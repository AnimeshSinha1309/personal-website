(self.webpackChunkpersonal_website=self.webpackChunkpersonal_website||[]).push([[179],{8255:function(rn){function mt(J){return Promise.resolve().then(function(){var _e=new Error("Cannot find module '"+J+"'");throw _e.code="MODULE_NOT_FOUND",_e})}mt.keys=function(){return[]},mt.resolve=mt,mt.id=8255,rn.exports=mt},5366:function(rn,mt,J){"use strict";J.d(mt,{deG:function(){return Yk},tb:function(){return tw},AFp:function(){return gD},ip1:function(){return NT},CZH:function(){return ev},hGG:function(){return GD},z2F:function(){return nv},sBO:function(){return NS},Sil:function(){return Qp},_Vd:function(){return Lp},EJc:function(){return nw},SBq:function(){return Kd},qLn:function(){return iu},vpe:function(){return Fc},gxx:function(){return F0},tBr:function(){return Vo},XFs:function(){return Zn},GSi:function(){return zL},OlP:function(){return Aa},zs3:function(){return Ls},ZZ4:function(){return kb},aQg:function(){return Eb},soG:function(){return Xp},LVF:function(){return ml},YKP:function(){return pI},v3s:function(){return $T},h0i:function(){return Fh},PXZ:function(){return tv},R0b:function(){return Zc},FiY:function(){return Fu},Lbi:function(){return FT},g9A:function(){return Yh},n_E:function(){return jb},Qsj:function(){return SS},FYo:function(){return Sf},JOm:function(){return dE},Tiy:function(){return gy},q3G:function(){return Ld},tp0:function(){return Zu},EAV:function(){return DV},Rgc:function(){return by},dDg:function(){return DD},DyG:function(){return Lu},q4F:function(){return AS},GfV:function(){return Tf},s_b:function(){return Sb},ifc:function(){return ra},eFA:function(){return WT},G48:function(){return Ko},Gpc:function(){return vn},f3M:function(){return Z_},X6Q:function(){return aw},_c5:function(){return uw},VLi:function(){return iZ},c2e:function(){return _D},zSh:function(){return pf},wAp:function(){return uo},vHH:function(){return Ct},EiD:function(){return ex},mCW:function(){return bn},qzn:function(){return L},JVY:function(){return O},pB0:function(){return $},eBb:function(){return R},L6k:function(){return F},LAX:function(){return j},cg1:function(){return XC},Tjo:function(){return pZ},kL8:function(){return QC},yhl:function(){return P},dqk:function(){return ot},sIi:function(){return Jr},CqO:function(){return so},QGY:function(){return xC},F4k:function(){return M1},zlt:function(){return Vh},RDi:function(){return po},AaK:function(){return Qe},z3N:function(){return Ll},qOj:function(){return En},TTD:function(){return me},_Bn:function(){return yb},xp6:function(){return wo},uIk:function(){return aC},ekj:function(){return nb},Suo:function(){return ET},Xpm:function(){return He},lG2:function(){return Ci},Yz7:function(){return Br},cJS:function(){return Zs},oAB:function(){return pn},Yjl:function(){return fs},Y36:function(){return mp},_UZ:function(){return MC},qZA:function(){return _f},TgZ:function(){return Mh},EpF:function(){return yp},n5z:function(){return wd},Ikx:function(){return sb},LFG:function(){return xa},$8M:function(){return Iv},NdJ:function(){return _p},CRH:function(){return CT},O4$:function(){return mn},oxw:function(){return IC},Hsn:function(){return DC},F$t:function(){return bf},Q6J:function(){return SC},s9C:function(){return eb},MGl:function(){return Qg},DdM:function(){return Hh},iGM:function(){return eD},MAs:function(){return W0},CHM:function(){return nf},uOi:function(){return X_},LSH:function(){return gg},kYT:function(){return $n},Udp:function(){return VC},WFA:function(){return bp},d8E:function(){return ln},YNc:function(){return uC},_uU:function(){return F1},Oqu:function(){return ab},hij:function(){return ry},Gf:function(){return kT}});var _e=J(7528),de=J(9187),D=J(6518),M=J(3740),Re=(J(3512),J(8251),J(6054)),ke=J(6837),v=J(4768),be=J(7289),we=J(5134),ne=J(1885),Oe=J(9727),Q=J(3693),fe=J(7570),Ae=J(5959),Le=J(8318),We=J(1906),qe=J(1055);function Be(l){for(var f in l)if(l[f]===Be)return f;throw Error("Could not find renamed property on target object.")}function st(l,f){for(var h in f)f.hasOwnProperty(h)&&!l.hasOwnProperty(h)&&(l[h]=f[h])}function Qe(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(Qe).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return"".concat(l.overriddenName);if(l.name)return"".concat(l.name);var f=l.toString();if(null==f)return""+f;var h=f.indexOf("\n");return-1===h?f:f.substring(0,h)}function Y(l,f){return null==l||""===l?null===f?"":f:null==f||""===f?l:l+" "+f}var dn=Be({__forward_ref__:Be});function vn(l){return l.__forward_ref__=vn,l.toString=function(){return Qe(this())},l}function nn(l){return xt(l)?l():l}function xt(l){return"function"==typeof l&&l.hasOwnProperty(dn)&&l.__forward_ref__===vn}var Ct=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g,y){var w;return(0,we.Z)(this,h),(w=f.call(this,function(l,f){var h=l?"NG0".concat(l,": "):"";return"".concat(h).concat(f)}(g,y))).code=g,w}return h}((0,Q.Z)(Error));function k(l){return"string"==typeof l?l:null==l?"":String(l)}function B(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():k(l)}function nt(l,f){var h=f?" in ".concat(f):"";throw new Ct("201","No provider for ".concat(B(l)," found").concat(h))}function mr(l,f,h,g){throw new Error("ASSERTION ERROR: ".concat(l)+(null==g?"":" [Expected=> ".concat(h," ").concat(g," ").concat(f," <=Actual]")))}function Br(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function Zs(l){return{providers:l.providers||[],imports:l.imports||[]}}function Wa(l){return Ts(l,qi)||Ts(l,sr)}function Ts(l,f){return l.hasOwnProperty(f)?l[f]:null}function Hi(l){return l&&(l.hasOwnProperty(qa)||l.hasOwnProperty(Kn))?l[qa]:null}var Hr,qi=Be({"\u0275prov":Be}),qa=Be({"\u0275inj":Be}),sr=Be({ngInjectableDef:Be}),Kn=Be({ngInjectorDef:Be}),Zn=function(l){return l[l.Default=0]="Default",l[l.Host=1]="Host",l[l.Self=2]="Self",l[l.SkipSelf=4]="SkipSelf",l[l.Optional=8]="Optional",l}({});function Yr(){return Hr}function Qr(l){var f=Hr;return Hr=l,f}function br(l,f,h){var g=Wa(l);return g&&"root"==g.providedIn?void 0===g.value?g.value=g.factory():g.value:h&Zn.Optional?null:void 0!==f?f:void nt(Qe(l),"Injector")}function Pi(l){return{toString:l}.toString()}var Ja=function(l){return l[l.OnPush=0]="OnPush",l[l.Default=1]="Default",l}({}),ra=function(l){return l[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",l}({}),gi="undefined"!=typeof globalThis&&globalThis,gt="undefined"!=typeof window&&window,ft="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$e="undefined"!=typeof global&&global,ot=gi||$e||gt||ft,Sn={},yn=[],yi=Be({"\u0275cmp":Be}),Yi=Be({"\u0275dir":Be}),hi=Be({"\u0275pipe":Be}),Ki=Be({"\u0275mod":Be}),Ea=Be({"\u0275loc":Be}),ct=Be({"\u0275fac":Be}),Tt=Be({__NG_ELEMENT_ID__:Be}),je=0;function He(l){return Pi(function(){var h={},g={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===Ja.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||yn,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||ra.Emulated,id:"c",styles:l.styles||yn,_:null,setInput:null,schemas:l.schemas||null,tView:null},y=l.directives,w=l.features,C=l.pipes;return g.id+=je++,g.inputs=da(l.inputs,h),g.outputs=da(l.outputs),w&&w.forEach(function(x){return x(g)}),g.directiveDefs=y?function(){return("function"==typeof y?y():y).map(Gt)}:null,g.pipeDefs=C?function(){return("function"==typeof C?C():C).map(zt)}:null,g})}function ht(l,f,h){var g=l.\u0275cmp;g.directiveDefs=function(){return f.map(Gt)},g.pipeDefs=function(){return h.map(zt)}}function Gt(l){return Pr(l)||function(l){return l[Yi]||null}(l)}function zt(l){return function(l){return l[hi]||null}(l)}var Kt={};function pn(l){return Pi(function(){var f={type:l.type,bootstrap:l.bootstrap||yn,declarations:l.declarations||yn,imports:l.imports||yn,exports:l.exports||yn,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(Kt[l.id]=l.type),f})}function $n(l,f){return Pi(function(){var h=oa(l,!0);h.declarations=f.declarations||yn,h.imports=f.imports||yn,h.exports=f.exports||yn})}function da(l,f){if(null==l)return Sn;var h={};for(var g in l)if(l.hasOwnProperty(g)){var y=l[g],w=y;Array.isArray(y)&&(w=y[1],y=y[0]),h[y]=g,f&&(f[y]=w)}return h}var Ci=He;function fs(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function Pr(l){return l[yi]||null}function oa(l,f){var h=l[Ki]||null;if(!h&&!0===f)throw new Error("Type ".concat(Qe(l)," does not have '\u0275mod' property."));return h}function Za(l){return Array.isArray(l)&&"object"==typeof l[1]}function Us(l){return Array.isArray(l)&&!0===l[1]}function hd(l){return 0!=(8&l.flags)}function oc(l){return 2==(2&l.flags)}function tf(l){return 1==(1&l.flags)}function Ka(l){return null!==l.template}function dd(l){return 0!=(512&l[2])}function ie(l,f){return l.hasOwnProperty(ct)?l[ct]:null}var ce=function(){function l(f,h,g){(0,we.Z)(this,l),this.previousValue=f,this.currentValue=h,this.firstChange=g}return(0,be.Z)(l,[{key:"isFirstChange",value:function(){return this.firstChange}}]),l}();function me(){return Ee}function Ee(l){return l.type.prototype.ngOnChanges&&(l.setInput=Xe),ze}function ze(){var l=Wt(this),f=null==l?void 0:l.current;if(f){var h=l.previous;if(h===Sn)l.previous=f;else for(var g in f)h[g]=f[g];l.current=null,this.ngOnChanges(f)}}function Xe(l,f,h,g){var y=Wt(l)||function(l,f){return l[yt]=f}(l,{previous:Sn,current:null}),w=y.current||(y.current={}),C=y.previous,x=this.declaredInputs[h],Z=C[x];w[x]=new ce(Z&&Z.currentValue,f,C===Sn),l[g]=f}me.ngInherit=!0;var yt="__ngSimpleChanges__";function Wt(l){return l[yt]||null}var er="http://www.w3.org/2000/svg",di="http://www.w3.org/1998/MathML/",Ta=void 0;function po(l){Ta=l}function zr(){return void 0!==Ta?Ta:"undefined"!=typeof document?document:void 0}function An(l){return!!l.listen}var $i={createRenderer:function(f,h){return zr()}};function Mr(l){for(;Array.isArray(l);)l=l[0];return l}function yu(l,f){return Mr(f[l])}function aa(l,f){return Mr(f[l.index])}function Oo(l,f){return l.data[f]}function sa(l,f){return l[f]}function xs(l,f){var h=f[l];return Za(h)?h:h[0]}function il(l){return 4==(4&l[2])}function al(l){return 128==(128&l[2])}function Is(l,f){return null==f?null:l[f]}function lc(l){l[18]=0}function jf(l,f){l[5]+=f;for(var h=l,g=l[3];null!==g&&(1===f&&1===h[5]||-1===f&&0===h[5]);)g[5]+=f,h=g,g=g[3]}var pr={lFrame:of(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function fc(){return pr.bindingsEnabled}function Yf(){pr.bindingsEnabled=!0}function Sl(){pr.bindingsEnabled=!1}function jt(){return pr.lFrame.lView}function ei(){return pr.lFrame.tView}function nf(l){return pr.lFrame.contextLView=l,l[8]}function pa(){for(var l=Kf();null!==l&&64===l.type;)l=l.parent;return l}function Kf(){return pr.lFrame.currentTNode}function Tl(){var l=pr.lFrame,f=l.currentTNode;return l.isParent?f:f.parent}function ts(l,f){var h=pr.lFrame;h.currentTNode=l,h.isParent=f}function Ds(){return pr.lFrame.isParent}function rf(){pr.lFrame.isParent=!1}function hc(){return pr.isInCheckNoChangesMode}function vi(l){pr.isInCheckNoChangesMode=l}function ns(){var l=pr.lFrame,f=l.bindingRootIndex;return-1===f&&(f=l.bindingRootIndex=l.tView.bindingStartIndex),f}function ma(){return pr.lFrame.bindingIndex}function Lo(l){return pr.lFrame.bindingIndex=l}function _u(){return pr.lFrame.bindingIndex++}function bu(l){var f=pr.lFrame,h=f.bindingIndex;return f.bindingIndex=f.bindingIndex+l,h}function $f(l){pr.lFrame.inI18n=l}function af(l,f){var h=pr.lFrame;h.bindingIndex=h.bindingRootIndex=l,xl(f)}function xl(l){pr.lFrame.currentDirectiveIndex=l}function Xf(l){var f=pr.lFrame.currentDirectiveIndex;return-1===f?null:l[f]}function Qf(){return pr.lFrame.currentQueryIndex}function Il(l){pr.lFrame.currentQueryIndex=l}function Jf(l){var f=l[1];return 2===f.type?f.declTNode:1===f.type?l[6]:null}function gd(l,f,h){if(h&Zn.SkipSelf){for(var g=f,y=l;!(null!==(g=g.parent)||h&Zn.Host||null===(g=Jf(y))||(y=y[15],10&g.type)););if(null===g)return!1;f=g,l=y}var w=pr.lFrame=sf();return w.currentTNode=f,w.lView=l,!0}function No(l){var f=sf(),h=l[1];pr.lFrame=f,f.currentTNode=h.firstChild,f.lView=l,f.tView=h,f.contextLView=l,f.bindingIndex=h.bindingStartIndex,f.inI18n=!1}function sf(){var l=pr.lFrame,f=null===l?null:l.child;return null===f?of(l):f}function of(l){var f={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=f),f}function Av(){var l=pr.lFrame;return pr.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}var Ge=Av;function Ce(){var l=Av();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function it(l){return(pr.lFrame.contextLView=function(l,f){for(;l>0;)f=f[15],l--;return f}(l,pr.lFrame.contextLView))[8]}function lt(){return pr.lFrame.selectedIndex}function Ft(l){pr.lFrame.selectedIndex=l}function Bt(){var l=pr.lFrame;return Oo(l.tView,l.selectedIndex)}function mn(){pr.lFrame.currentNamespace=er}function Rn(){pr.lFrame.currentNamespace=di}function Yn(){pr.lFrame.currentNamespace=null}function Ui(l,f){for(var h=f.directiveStart,g=f.directiveEnd;h<g;h++){var w=l.data[h].type.prototype,C=w.ngAfterContentInit,x=w.ngAfterContentChecked,Z=w.ngAfterViewInit,K=w.ngAfterViewChecked,ae=w.ngOnDestroy;C&&(l.contentHooks||(l.contentHooks=[])).push(-h,C),x&&((l.contentHooks||(l.contentHooks=[])).push(h,x),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(h,x)),Z&&(l.viewHooks||(l.viewHooks=[])).push(-h,Z),K&&((l.viewHooks||(l.viewHooks=[])).push(h,K),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(h,K)),null!=ae&&(l.destroyHooks||(l.destroyHooks=[])).push(h,ae)}}function zi(l,f,h){$a(l,f,3,h)}function kr(l,f,h,g){(3&l[2])===h&&$a(l,f,h,g)}function Ma(l,f){var h=l[2];(3&h)===f&&(h&=2047,l[2]=h+=1)}function $a(l,f,h,g){for(var w=null!=g?g:-1,C=f.length-1,x=0,Z=void 0!==g?65535&l[18]:0;Z<C;Z++)if("number"==typeof f[Z+1]){if(x=f[Z],null!=g&&x>=g)break}else f[Z]<0&&(l[18]+=65536),(x<w||-1==w)&&(Xi(l,h,f,Z),l[18]=(4294901760&l[18])+Z+2),Z++}function Xi(l,f,h,g){var y=h[g]<0,w=h[g+1],x=l[y?-h[g]:h[g]];if(y){if(l[2]>>11<l[18]>>16&&(3&l[2])===f){l[2]+=2048;try{w.call(x)}finally{}}}else try{w.call(x)}finally{}}var tu=function l(f,h,g){(0,we.Z)(this,l),this.factory=f,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=g};function yd(l,f,h){for(var g=An(l),y=0;y<h.length;){var w=h[y];if("number"==typeof w){if(0!==w)break;y++;var C=h[y++],x=h[y++],Z=h[y++];g?l.setAttribute(f,x,Z,C):f.setAttributeNS(C,x,Z)}else{var K=w,ae=h[++y];eh(K)?g&&l.setProperty(f,K,ae):g?l.setAttribute(f,K,ae):f.setAttribute(K,ae),y++}}return y}function Vk(l){return 3===l||4===l||6===l}function eh(l){return 64===l.charCodeAt(0)}function eg(l,f){if(null!==f&&0!==f.length)if(null===l||0===l.length)l=f.slice();else for(var h=-1,g=0;g<f.length;g++){var y=f[g];"number"==typeof y?h=y:0===h||rs(l,h,y,null,-1===h||2===h?f[++g]:null)}return l}function rs(l,f,h,g,y){var w=0,C=l.length;if(-1===f)C=-1;else for(;w<l.length;){var x=l[w++];if("number"==typeof x){if(x===f){C=-1;break}if(x>f){C=w-1;break}}}for(;w<l.length;){var Z=l[w];if("number"==typeof Z)break;if(Z===h){if(null===g)return void(null!==y&&(l[w+1]=y));if(g===l[w+1])return void(l[w+2]=y)}w++,null!==g&&w++,null!==y&&w++}-1!==C&&(l.splice(C,0,f),w=C+1),l.splice(w++,0,h),null!==g&&l.splice(w++,0,g),null!==y&&l.splice(w++,0,y)}function Hk(l){return-1!==l}function vc(l){return 32767&l}function uf(l,f){for(var h=function(l){return l>>16}(l),g=f;h>0;)g=g[15],h--;return g}var T_=!0;function tg(l){var f=T_;return T_=l,f}var sl=0;function Zo(l,f){var h=th(l,f);if(-1!==h)return h;var g=f[1];g.firstCreatePass&&(l.injectorIndex=f.length,M_(g.data,l),M_(f,null),M_(g.blueprint,null));var y=Vs(l,f),w=l.injectorIndex;if(Hk(y))for(var C=vc(y),x=uf(y,f),Z=x[1].data,K=0;K<8;K++)f[w+K]=x[C+K]|Z[C+K];return f[w+8]=y,w}function M_(l,f){l.push(0,0,0,0,0,0,0,0,f)}function th(l,f){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===f[l.injectorIndex+8]?-1:l.injectorIndex}function Vs(l,f){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;for(var h=0,g=null,y=f;null!==y;){var w=y[1],C=w.type;if(null===(g=2===C?w.declTNode:1===C?y[6]:null))return-1;if(h++,y=y[15],-1!==g.injectorIndex)return g.injectorIndex|h<<16}return-1}function nu(l,f,h){!function(l,f,h){var g;"string"==typeof h?g=h.charCodeAt(0)||0:h.hasOwnProperty(Tt)&&(g=h[Tt]),null==g&&(g=h[Tt]=sl++);var y=255&g;f.data[l+(y>>5)]|=1<<y}(l,f,h)}function ol(l,f,h){if(h&Zn.Optional)return l;nt(f,"NodeInjector")}function A_(l,f,h,g){if(h&Zn.Optional&&void 0===g&&(g=null),0==(h&(Zn.Self|Zn.Host))){var y=l[9],w=Qr(void 0);try{return y?y.get(f,g,h&Zn.Optional):br(f,g,h&Zn.Optional)}finally{Qr(w)}}return ol(g,f,h)}function Gk(l,f,h){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zn.Default,y=arguments.length>4?arguments[4]:void 0;if(null!==l){var w=x_(h);if("function"==typeof w){if(!gd(f,l,g))return g&Zn.Host?ol(y,h,g):A_(f,h,g,y);try{var C=w(g);if(null!=C||g&Zn.Optional)return C;nt(h)}finally{Ge()}}else if("number"==typeof w){var x=null,Z=th(l,f),K=-1,ae=g&Zn.Host?f[16][6]:null;for((-1===Z||g&Zn.SkipSelf)&&(-1!==(K=-1===Z?Vs(l,f):f[Z+8])&&Gr(g,!1)?(x=f[1],Z=vc(K),f=uf(K,f)):Z=-1);-1!==Z;){var pe=f[1];if(nh(w,Z,pe.data)){var ve=Wk(Z,f,h,x,g,ae);if(ve!==jk)return ve}-1!==(K=f[Z+8])&&Gr(g,f[1].data[Z+8]===ae)&&nh(w,Z,f)?(x=pe,Z=vc(K),f=uf(K,f)):Z=-1}}}return A_(f,h,g,y)}var jk={};function $A(){return new pc(pa(),jt())}function Wk(l,f,h,g,y,w){var C=f[1],x=C.data[l+8],ae=bd(x,C,h,null==g?oc(x)&&T_:g!=C&&0!=(3&x.type),y&Zn.Host&&w===x);return null!==ae?ul(f,C,ae,x):jk}function bd(l,f,h,g,y){for(var w=l.providerIndexes,C=f.data,x=1048575&w,Z=l.directiveStart,ae=w>>20,ve=y?x+ae:l.directiveEnd,Se=g?x:x+ae;Se<ve;Se++){var Ne=C[Se];if(Se<Z&&h===Ne||Se>=Z&&Ne.type===h)return Se}if(y){var at=C[Z];if(at&&Ka(at)&&at.type===h)return Z}return null}function ul(l,f,h,g){var y=l[h],w=f.data;if(function(l){return l instanceof tu}(y)){var C=y;C.resolving&&function(l,f){throw new Ct("200","Circular dependency in DI detected for ".concat(l).concat(""))}(B(w[h]));var x=tg(C.canSeeViewProviders);C.resolving=!0;var Z=C.injectImpl?Qr(C.injectImpl):null;gd(l,g,Zn.Default);try{y=l[h]=C.factory(void 0,w,l,g),f.firstCreatePass&&h>=g.directiveStart&&function(l,f,h){var g=f.type.prototype,w=g.ngOnInit,C=g.ngDoCheck;if(g.ngOnChanges){var x=Ee(f);(h.preOrderHooks||(h.preOrderHooks=[])).push(l,x),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(l,x)}w&&(h.preOrderHooks||(h.preOrderHooks=[])).push(0-l,w),C&&((h.preOrderHooks||(h.preOrderHooks=[])).push(l,C),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(l,C))}(h,w[h],f)}finally{null!==Z&&Qr(Z),tg(x),C.resolving=!1,Ge()}}return y}function x_(l){if("string"==typeof l)return l.charCodeAt(0)||0;var f=l.hasOwnProperty(Tt)?l[Tt]:void 0;return"number"==typeof f?f>=0?255&f:$A:f}function nh(l,f,h){return!!(h[f+(l>>5)]&1<<l)}function Gr(l,f){return!(l&Zn.Self||l&Zn.Host&&f)}var pc=function(){function l(f,h){(0,we.Z)(this,l),this._tNode=f,this._lView=h}return(0,be.Z)(l,[{key:"get",value:function(h,g){return Gk(this._tNode,this._lView,h,void 0,g)}}]),l}();function wd(l){return Pi(function(){for(var f=l.prototype.constructor,h=f[ct]||ll(f),g=Object.prototype,y=Object.getPrototypeOf(l.prototype).constructor;y&&y!==g;){var w=y[ct]||ll(y);if(w&&w!==h)return w;y=Object.getPrototypeOf(y)}return function(C){return new C}})}function ll(l){return xt(l)?function(){var f=ll(nn(l));return f&&f()}:ie(l)}function Iv(l){return function(l,f){if("class"===f)return l.classes;if("style"===f)return l.styles;var h=l.attrs;if(h)for(var g=h.length,y=0;y<g;){var w=h[y];if(Vk(w))break;if(0===w)y+=2;else if("number"==typeof w)for(y++;y<g&&"string"==typeof h[y];)y++;else{if(w===f)return h[y+1];y+=2}}return null}(pa(),l)}var Ou="__annotations__",mc="__parameters__",gc="__prop__metadata__";function Hs(l,f,h,g,y){return Pi(function(){var w=rh(f);function C(){for(var x=arguments.length,Z=new Array(x),K=0;K<x;K++)Z[K]=arguments[K];if(this instanceof C)return w.call.apply(w,[this].concat(Z)),this;var ae=(0,v.Z)(C,Z);return function(ve){return y&&y.apply(void 0,[ve].concat(Z)),(ve.hasOwnProperty(Ou)?ve[Ou]:Object.defineProperty(ve,Ou,{value:[]})[Ou]).push(ae),g&&g(ve),ve}}return h&&(C.prototype=Object.create(h.prototype)),C.prototype.ngMetadataName=l,C.annotationCls=C,C})}function rh(l){return function(){if(l){var h=l.apply(void 0,arguments);for(var g in h)this[g]=h[g]}}}function Rl(l,f,h){return Pi(function(){var g=rh(f);function y(){for(var w=arguments.length,C=new Array(w),x=0;x<w;x++)C[x]=arguments[x];if(this instanceof y)return g.apply(this,C),this;var Z=(0,v.Z)(y,C);return K.annotation=Z,K;function K(ae,pe,ve){for(var Se=ae.hasOwnProperty(mc)?ae[mc]:Object.defineProperty(ae,mc,{value:[]})[mc];Se.length<=ve;)Se.push(null);return(Se[ve]=Se[ve]||[]).push(Z),ae}}return h&&(y.prototype=Object.create(h.prototype)),y.prototype.ngMetadataName=l,y.annotationCls=y,y})}var qk=function(){return Rl("Attribute",function(l){return{attributeName:l,__NG_ELEMENT_ID__:function(){return Iv(l)}}})}(),Aa=function(){function l(f,h){(0,we.Z)(this,l),this._desc=f,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=Br({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}return(0,be.Z)(l,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),l}(),Yk=new Aa("AnalyzeForEntryComponents");function vs(l){var f=ot.ng;if(f&&f.\u0275compilerFacade)return f.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}var Lu=Function;function _c(l){return"function"==typeof l}function go(l,f){void 0===f&&(f=l);for(var h=0;h<l.length;h++){var g=l[h];Array.isArray(g)?(f===l&&(f=l.slice(0,h)),go(g,f)):f!==l&&f.push(g)}return f}function yo(l,f){l.forEach(function(h){return Array.isArray(h)?yo(h,f):f(h)})}function ih(l,f,h){f>=l.length?l.push(h):l.splice(f,0,h)}function Pl(l,f){return f>=l.length-1?l.pop():l.splice(f,1)[0]}function Bo(l,f){for(var h=[],g=0;g<l;g++)h.push(f);return h}function Uo(l,f,h){var g=_o(l,f);return g>=0?l[1|g]=h:function(l,f,h,g){var y=l.length;if(y==f)l.push(h,g);else if(1===y)l.push(g,l[0]),l[0]=h;else{for(y--,l.push(l[y-1],l[y]);y>f;)l[y]=l[y-2],y--;l[f]=h,l[f+1]=g}}(l,g=~g,f,h),g}function sh(l,f){var h=_o(l,f);if(h>=0)return l[1|h]}function _o(l,f){return function(l,f,h){for(var g=0,y=l.length>>h;y!==g;){var w=g+(y-g>>1),C=l[w<<h];if(f===C)return w<<h;C>f?y=w:g=w+1}return~(y<<h)}(l,f,1)}var og=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\))\)/,Cd=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,N_=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,uh=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/,Td=function(){function l(f){(0,we.Z)(this,l),this._reflect=f||ot.Reflect}return(0,be.Z)(l,[{key:"isReflectionEnabled",value:function(){return!0}},{key:"factory",value:function(h){return function(){for(var g=arguments.length,y=new Array(g),w=0;w<g;w++)y[w]=arguments[w];return(0,v.Z)(h,y)}}},{key:"_zipTypesAndAnnotations",value:function(h,g){var y;y=Bo(void 0===h?g.length:h.length);for(var w=0;w<y.length;w++)y[w]=void 0===h?[]:h[w]&&h[w]!=Object?[h[w]]:[],g&&null!=g[w]&&(y[w]=y[w].concat(g[w]));return y}},{key:"_ownParameters",value:function(h,g){if(function(l){return og.test(l)||uh.test(l)||Cd.test(l)&&!N_.test(l)}(h.toString()))return null;if(h.parameters&&h.parameters!==g.parameters)return h.parameters;var w=h.ctorParameters;if(w&&w!==g.ctorParameters){var C="function"==typeof w?w():w,x=C.map(function(pe){return pe&&pe.type}),Z=C.map(function(pe){return pe&&Md(pe.decorators)});return this._zipTypesAndAnnotations(x,Z)}var K=h.hasOwnProperty(mc)&&h[mc],ae=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",h);return ae||K?this._zipTypesAndAnnotations(ae,K):Bo(h.length)}},{key:"parameters",value:function(h){if(!_c(h))return[];var g=lh(h),y=this._ownParameters(h,g);return!y&&g!==Object&&(y=this.parameters(g)),y||[]}},{key:"_ownAnnotations",value:function(h,g){if(h.annotations&&h.annotations!==g.annotations){var y=h.annotations;return"function"==typeof y&&y.annotations&&(y=y.annotations),y}return h.decorators&&h.decorators!==g.decorators?Md(h.decorators):h.hasOwnProperty(Ou)?h[Ou]:null}},{key:"annotations",value:function(h){if(!_c(h))return[];var g=lh(h),y=this._ownAnnotations(h,g)||[];return(g!==Object?this.annotations(g):[]).concat(y)}},{key:"_ownPropMetadata",value:function(h,g){if(h.propMetadata&&h.propMetadata!==g.propMetadata){var y=h.propMetadata;return"function"==typeof y&&y.propMetadata&&(y=y.propMetadata),y}if(h.propDecorators&&h.propDecorators!==g.propDecorators){var w=h.propDecorators,C={};return Object.keys(w).forEach(function(x){C[x]=Md(w[x])}),C}return h.hasOwnProperty(gc)?h[gc]:null}},{key:"propMetadata",value:function(h){if(!_c(h))return{};var g=lh(h),y={};if(g!==Object){var w=this.propMetadata(g);Object.keys(w).forEach(function(x){y[x]=w[x]})}var C=this._ownPropMetadata(h,g);return C&&Object.keys(C).forEach(function(x){var Z=[];y.hasOwnProperty(x)&&Z.push.apply(Z,(0,ke.Z)(y[x])),Z.push.apply(Z,(0,ke.Z)(C[x])),y[x]=Z}),y}},{key:"ownPropMetadata",value:function(h){return _c(h)&&this._ownPropMetadata(h,lh(h))||{}}},{key:"hasLifecycleHook",value:function(h,g){return h instanceof Lu&&g in h.prototype}},{key:"guards",value:function(h){return{}}},{key:"getter",value:function(h){return new Function("o","return o."+h+";")}},{key:"setter",value:function(h){return new Function("o","v","return o."+h+" = v;")}},{key:"method",value:function(h){var g="if (!o.".concat(h,") throw new Error('\"").concat(h,"\" is undefined');\n        return o.").concat(h,".apply(o, args);");return new Function("o","args",g)}},{key:"importUri",value:function(h){return"object"==typeof h&&h.filePath?h.filePath:"./".concat(Qe(h))}},{key:"resourceUri",value:function(h){return"./".concat(Qe(h))}},{key:"resolveIdentifier",value:function(h,g,y,w){return w}},{key:"resolveEnum",value:function(h,g){return h[g]}}]),l}();function Md(l){return l?l.map(function(f){return(0,v.Z)(f.type.annotationCls,(0,ke.Z)(f.args?f.args:[]))}):[]}function lh(l){var f=l.prototype?Object.getPrototypeOf(l.prototype):null;return(f?f.constructor:null)||Object}var ch={},zs="__NG_DI_FLAG__",wc="ngTempTokenPath",ug=/\n/gm,Ad="__source",kc=Be({provide:String,useValue:Be}),lf=void 0;function cf(l){var f=lf;return lf=l,f}function Xk(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn.Default;if(void 0===lf)throw new Error("inject() must be called from an injection context");return null===lf?br(l,void 0,f):lf.get(l,f&Zn.Optional?null:void 0,f)}function xa(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn.Default;return(Yr()||Xk)(nn(l),f)}function Nv(l){throw new Error("invalid")}var Z_=xa;function ff(l){for(var f=[],h=0;h<l.length;h++){var g=nn(l[h]);if(Array.isArray(g)){if(0===g.length)throw new Error("Arguments array must have arguments.");for(var y=void 0,w=Zn.Default,C=0;C<g.length;C++){var x=g[C],Z=lg(x);"number"==typeof Z?-1===Z?y=x.token:w|=Z:y=x}f.push(xa(y,w))}else f.push(xa(g))}return f}function hh(l,f){return l[zs]=f,l.prototype[zs]=f,l}function lg(l){return l[zs]}function Qk(l,f,h,g){var y=l[wc];throw f[Ad]&&y.unshift(f[Ad]),l.message=function(l,f,h){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;var y=Qe(f);if(Array.isArray(f))y=f.map(Qe).join(" -> ");else if("object"==typeof f){var w=[];for(var C in f)if(f.hasOwnProperty(C)){var x=f[C];w.push(C+":"+("string"==typeof x?JSON.stringify(x):Qe(x)))}y="{".concat(w.join(", "),"}")}return"".concat(h).concat(g?"("+g+")":"","[").concat(y,"]: ").concat(l.replace(ug,"\n  "))}("\n"+l.message,y,h,g),l.ngTokenPath=y,l[wc]=null,l}var Zv,ph,Vo=hh(Rl("Inject",function(f){return{token:f}}),-1),Fu=hh(Rl("Optional"),8),dh=hh(Rl("Self"),2),Zu=hh(Rl("SkipSelf"),4),eE=hh(Rl("Host"),1),Id=null;function Fv(l){return B_((Id=Id||new Td).parameters(l))}function B_(l){return l.map(function(f){return function(l){var f={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(l)&&l.length>0)for(var h=0;h<l.length;h++){var g=l[h];if(void 0!==g){var y=Object.getPrototypeOf(g);if(g instanceof Fu||"Optional"===y.ngMetadataName)f.optional=!0;else if(g instanceof Zu||"SkipSelf"===y.ngMetadataName)f.skipSelf=!0;else if(g instanceof dh||"Self"===y.ngMetadataName)f.self=!0;else if(g instanceof eE||"Host"===y.ngMetadataName)f.host=!0;else if(g instanceof Vo)f.token=g.token;else if(g instanceof qk){if(void 0===g.attributeName)throw new Error("Attribute name must be defined.");f.attribute=g.attributeName}else f.token=g}}else f.token=void 0===l||Array.isArray(l)&&0===l.length?null:l;return f}(f)})}function dg(){if(void 0===Zv&&(Zv=null,ot.trustedTypes))try{Zv=ot.trustedTypes.createPolicy("angular",{createHTML:function(f){return f},createScript:function(f){return f},createScriptURL:function(f){return f}})}catch(l){}return Zv}function vh(l){var f;return(null===(f=dg())||void 0===f?void 0:f.createHTML(l))||l}function vg(){if(void 0===ph&&(ph=null,ot.trustedTypes))try{ph=ot.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(f){return f},createScript:function(f){return f},createScriptURL:function(f){return f}})}catch(l){}return ph}function pg(l){var f;return(null===(f=vg())||void 0===f?void 0:f.createHTML(l))||l}function j_(l){var f;return(null===(f=vg())||void 0===f?void 0:f.createScript(l))||l}function W_(l){var f;return(null===(f=vg())||void 0===f?void 0:f.createScriptURL(l))||l}var Ec=function(){function l(f){(0,we.Z)(this,l),this.changingThisBreaksApplicationSecurity=f}return(0,be.Z)(l,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),l}(),iE=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(){return(0,we.Z)(this,h),f.apply(this,arguments)}return(0,be.Z)(h,[{key:"getTypeName",value:function(){return"HTML"}}]),h}(Ec),aE=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(){return(0,we.Z)(this,h),f.apply(this,arguments)}return(0,be.Z)(h,[{key:"getTypeName",value:function(){return"Style"}}]),h}(Ec),q_=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(){return(0,we.Z)(this,h),f.apply(this,arguments)}return(0,be.Z)(h,[{key:"getTypeName",value:function(){return"Script"}}]),h}(Ec),sE=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(){return(0,we.Z)(this,h),f.apply(this,arguments)}return(0,be.Z)(h,[{key:"getTypeName",value:function(){return"URL"}}]),h}(Ec),Y_=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(){return(0,we.Z)(this,h),f.apply(this,arguments)}return(0,be.Z)(h,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),h}(Ec);function Ll(l){return l instanceof Ec?l.changingThisBreaksApplicationSecurity:l}function L(l,f){var h=P(l);if(null!=h&&h!==f){if("ResourceURL"===h&&"URL"===f)return!0;throw new Error("Required a safe ".concat(f,", got a ").concat(h," (see https://g.co/ng/security#xss)"))}return h===f}function P(l){return l instanceof Ec&&l.getTypeName()||null}function O(l){return new iE(l)}function F(l){return new aE(l)}function R(l){return new q_(l)}function j(l){return new sE(l)}function $(l){return new Y_(l)}function ee(l){var f=new Te(l);return function(){try{return!!(new window.DOMParser).parseFromString(vh(""),"text/html")}catch(l){return!1}}()?new oe(f):f}var oe=function(){function l(f){(0,we.Z)(this,l),this.inertDocumentHelper=f}return(0,be.Z)(l,[{key:"getInertBodyElement",value:function(h){h="<body><remove></remove>"+h;try{var g=(new window.DOMParser).parseFromString(vh(h),"text/html").body;return null===g?this.inertDocumentHelper.getInertBodyElement(h):(g.removeChild(g.firstChild),g)}catch(y){return null}}}]),l}(),Te=function(){function l(f){if((0,we.Z)(this,l),this.defaultDoc=f,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var h=this.inertDocument.createElement("html");this.inertDocument.appendChild(h);var g=this.inertDocument.createElement("body");h.appendChild(g)}}return(0,be.Z)(l,[{key:"getInertBodyElement",value:function(h){var g=this.inertDocument.createElement("template");if("content"in g)return g.innerHTML=vh(h),g;var y=this.inertDocument.createElement("body");return y.innerHTML=vh(h),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(y),y}},{key:"stripCustomNsAttrs",value:function(h){for(var g=h.attributes,y=g.length-1;0<y;y--){var C=g.item(y).name;("xmlns:ns1"===C||0===C.indexOf("ns1:"))&&h.removeAttribute(C)}for(var x=h.firstChild;x;)x.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(x),x=x.nextSibling}}]),l}(),kt=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,gn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bn(l){return(l=String(l)).match(kt)||l.match(gn)?l:"unsafe:"+l}function or(l){return(l=String(l)).split(",").map(function(f){return bn(f.trim())}).join(", ")}function Qi(l){var g,f={},h=(0,Re.Z)(l.split(","));try{for(h.s();!(g=h.n()).done;)f[g.value]=!0}catch(w){h.e(w)}finally{h.f()}return f}function Li(){for(var l={},f=arguments.length,h=new Array(f),g=0;g<f;g++)h[g]=arguments[g];for(var y=0,w=h;y<w.length;y++){var C=w[y];for(var x in C)C.hasOwnProperty(x)&&(l[x]=!0)}return l}var mg,wu=Qi("area,br,col,hr,img,wbr"),Or=Qi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),is=Qi("rp,rt"),ps=Li(is,Or),ba=Li(wu,Li(Or,Qi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Li(is,Qi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ps),Bv=Qi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Od=Qi("srcset"),oE=Li(Bv,Od,Qi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Qi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),YO=Qi("script,style,template"),uE=function(){function l(){(0,we.Z)(this,l),this.sanitizedSomething=!1,this.buf=[]}return(0,be.Z)(l,[{key:"sanitizeChildren",value:function(h){for(var g=h.firstChild,y=!0;g;)if(g.nodeType===Node.ELEMENT_NODE?y=this.startElement(g):g.nodeType===Node.TEXT_NODE?this.chars(g.nodeValue):this.sanitizedSomething=!0,y&&g.firstChild)g=g.firstChild;else for(;g;){g.nodeType===Node.ELEMENT_NODE&&this.endElement(g);var w=this.checkClobberedElement(g,g.nextSibling);if(w){g=w;break}g=this.checkClobberedElement(g,g.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(h){var g=h.nodeName.toLowerCase();if(!ba.hasOwnProperty(g))return this.sanitizedSomething=!0,!YO.hasOwnProperty(g);this.buf.push("<"),this.buf.push(g);for(var y=h.attributes,w=0;w<y.length;w++){var C=y.item(w),x=C.name,Z=x.toLowerCase();if(oE.hasOwnProperty(Z)){var K=C.value;Bv[Z]&&(K=bn(K)),Od[Z]&&(K=or(K)),this.buf.push(" ",x,'="',lE(K),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(h){var g=h.nodeName.toLowerCase();ba.hasOwnProperty(g)&&!wu.hasOwnProperty(g)&&(this.buf.push("</"),this.buf.push(g),this.buf.push(">"))}},{key:"chars",value:function(h){this.buf.push(lE(h))}},{key:"checkClobberedElement",value:function(h,g){if(g&&(h.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(h.outerHTML));return g}}]),l}(),KO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$O=/([^\#-~ |!])/g;function lE(l){return l.replace(/&/g,"&amp;").replace(KO,function(f){return"&#"+(1024*(f.charCodeAt(0)-55296)+(f.charCodeAt(1)-56320)+65536)+";"}).replace($O,function(f){return"&#"+f.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ex(l,f){var h=null;try{mg=mg||ee(l);var g=f?String(f):"";h=mg.getInertBodyElement(g);var y=5,w=g;do{if(0===y)throw new Error("Failed to sanitize html because the input is unstable");y--,g=w,w=h.innerHTML,h=mg.getInertBodyElement(g)}while(g!==w);return vh((new uE).sanitizeChildren(cE(h)||h))}finally{if(h)for(var Z=cE(h)||h;Z.firstChild;)Z.removeChild(Z.firstChild)}}function cE(l){return"content"in l&&function(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}var Ld=function(l){return l[l.NONE=0]="NONE",l[l.HTML=1]="HTML",l[l.STYLE=2]="STYLE",l[l.SCRIPT=3]="SCRIPT",l[l.URL=4]="URL",l[l.RESOURCE_URL=5]="RESOURCE_URL",l}({});function XO(l){var f=yg();return f?pg(f.sanitize(Ld.HTML,l)||""):L(l,"HTML")?pg(Ll(l)):ex(zr(),k(l))}function nx(l){var f=yg();return f?f.sanitize(Ld.STYLE,l)||"":L(l,"Style")?Ll(l):k(l)}function gg(l){var f=yg();return f?f.sanitize(Ld.URL,l)||"":L(l,"URL")?Ll(l):bn(k(l))}function X_(l){var f=yg();if(f)return W_(f.sanitize(Ld.RESOURCE_URL,l)||"");if(L(l,"ResourceURL"))return W_(Ll(l));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function Q_(l){var f=yg();if(f)return j_(f.sanitize(Ld.SCRIPT,l)||"");if(L(l,"Script"))return j_(Ll(l));throw new Error("unsafe value used in a script context")}function fE(l){return vh(l[0])}function QO(l){return function(l){var f;return(null===(f=dg())||void 0===f?void 0:f.createScriptURL(l))||l}(l[0])}function eL(l,f,h){return function(l,f){return"src"===f&&("embed"===l||"frame"===l||"iframe"===l||"media"===l||"script"===l)||"href"===f&&("base"===l||"link"===l)?X_:gg}(f,h)(l)}function yg(){var l=jt();return l&&l[12]}var ix="__ngContext__";function Ho(l,f){l[ix]=f}function ax(l){var f=function(l){return l[ix]||null}(l);return f?Array.isArray(f)?f:f.lView:null}function n0(l){return l.ngOriginalError}function sL(l){for(var f=arguments.length,h=new Array(f>1?f-1:0),g=1;g<f;g++)h[g-1]=arguments[g];l.error.apply(l,h)}var iu=function(){function l(){(0,we.Z)(this,l),this._console=console}return(0,be.Z)(l,[{key:"handleError",value:function(h){var g=this._findOriginalError(h),y=this._findContext(h),w=function(l){return l&&l.ngErrorLogger||sL}(h);w(this._console,"ERROR",h),g&&w(this._console,"ORIGINAL ERROR",g),y&&w(this._console,"ERROR CONTEXT",y)}},{key:"_findContext",value:function(h){return h?function(l){return l.ngDebugContext}(h)||this._findContext(n0(h)):null}},{key:"_findOriginalError",value:function(h){for(var g=h&&n0(h);g&&n0(g);)g=n0(g);return g||null}}]),l}(),yx=/^>|^->|<!--|-->|--!>|<!-$/g,oL=/(<|>)/;var _x=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ot)}();function hE(l){return l.ownerDocument.defaultView}function a0(l){return l.ownerDocument}function au(l){return l.ownerDocument.body}function Uu(l){return l instanceof Function?l():l}var vE,dE=function(l){return l[l.Important=1]="Important",l[l.DashCase=2]="DashCase",l}({});function mh(l,f){return vE(l,f)}function Ji(l){var f=l[3];return Us(f)?f[3]:f}function ku(l){return pE(l[13])}function Ex(l){return pE(l[4])}function pE(l){for(;null!==l&&!Us(l);)l=l[4];return l}function Ut(l,f,h,g,y){if(null!=g){var w,C=!1;Us(g)?w=g:Za(g)&&(C=!0,g=g[0]);var x=Mr(g);0===l&&null!==h?null==y?Tx(f,h,x):Fd(f,h,x,y||null,!0):1===l&&null!==h?Fd(f,h,x,y||null,!0):2===l?zo(f,x,C):3===l&&f.destroyNode(x),null!=w&&function(l,f,h,g,y){var w=h[7];w!==Mr(h)&&Ut(f,l,g,w,y);for(var x=10;x<h.length;x++){var Z=h[x];Gs(Z[1],Z,l,f,g,w)}}(f,l,w,h,y)}}function mE(l,f){return An(l)?l.createText(f):l.createTextNode(f)}function Cx(l,f,h){An(l)?l.setValue(f,h):f.textContent=h}function Ze(l,f){return l.createComment(function(l){return l.replace(yx,function(f){return f.replace(oL,"\u200b$1\u200b")})}(f))}function gh(l,f,h){return An(l)?l.createElement(f,h):null===h?l.createElement(f):l.createElementNS(h,f)}function s0(l,f){var h=l[9],g=h.indexOf(f),y=f[3];1024&f[2]&&(f[2]&=-1025,jf(y,-1)),h.splice(g,1)}function xr(l,f){if(!(l.length<=10)){var h=10+f,g=l[h];if(g){var y=g[17];null!==y&&y!==l&&s0(y,g),f>0&&(l[h-1][4]=g[4]);var w=Pl(l,10+f);!function(l,f){Gs(l,f,f[11],2,null,null),f[0]=null,f[6]=null}(g[1],g);var C=w[19];null!==C&&C.detachView(w[1]),g[3]=null,g[4]=null,g[2]&=-129}return g}}function _g(l,f){if(!(256&f[2])){var h=f[11];An(h)&&h.destroyNode&&Gs(l,f,h,3,null,null),function(l){var f=l[13];if(!f)return bg(l[1],l);for(;f;){var h=null;if(Za(f))h=f[13];else{var g=f[10];g&&(h=g)}if(!h){for(;f&&!f[4]&&f!==l;)Za(f)&&bg(f[1],f),f=f[3];null===f&&(f=l),Za(f)&&bg(f[1],f),h=f&&f[4]}f=h}}(f)}}function bg(l,f){if(!(256&f[2])){f[2]&=-129,f[2]|=256,function(l,f){var h;if(null!=l&&null!=(h=l.destroyHooks))for(var g=0;g<h.length;g+=2){var y=f[h[g]];if(!(y instanceof tu)){var w=h[g+1];if(Array.isArray(w))for(var C=0;C<w.length;C+=2){var x=y[w[C]],Z=w[C+1];try{Z.call(x)}finally{}}else try{w.call(y)}finally{}}}}(l,f),function(l,f){var h=l.cleanup,g=f[7],y=-1;if(null!==h)for(var w=0;w<h.length-1;w+=2)if("string"==typeof h[w]){var C=h[w+1],x="function"==typeof C?C(f):Mr(f[C]),Z=g[y=h[w+2]],K=h[w+3];"boolean"==typeof K?x.removeEventListener(h[w],Z,K):K>=0?g[y=K]():g[y=-K].unsubscribe(),w+=2}else{var ae=g[y=h[w+1]];h[w].call(ae)}if(null!==g){for(var pe=y+1;pe<g.length;pe++)(0,g[pe])();f[7]=null}}(l,f),1===f[1].type&&An(f[11])&&f[11].destroy();var h=f[17];if(null!==h&&Us(f[3])){h!==f[3]&&s0(h,f);var g=f[19];null!==g&&g.detachView(l)}}}function o0(l,f,h){return Sx(l,f.parent,h)}function Sx(l,f,h){for(var g=f;null!==g&&40&g.type;)g=(f=g).parent;if(null===g)return h[0];if(2&g.flags){var y=l.data[g.directiveStart].encapsulation;if(y===ra.None||y===ra.Emulated)return null}return aa(g,h)}function Fd(l,f,h,g,y){An(l)?l.insertBefore(f,h,g,y):f.insertBefore(h,g,y)}function Tx(l,f,h){An(l)?l.appendChild(f,h):f.appendChild(h)}function eo(l,f,h,g,y){null!==g?Fd(l,f,h,g,y):Tx(l,f,h)}function Rs(l,f){return An(l)?l.parentNode(f):f.parentNode}function Mx(l,f,h){return gE(l,f,h)}function Ax(l,f,h){return 40&l.type?aa(l,h):null}var l0,gE=Ax;function xx(l,f){gE=l,l0=f}function kg(l,f,h,g){var y=o0(l,g,f),w=f[11],x=Mx(g.parent||f[6],g,f);if(null!=y)if(Array.isArray(h))for(var Z=0;Z<h.length;Z++)eo(w,y,h[Z],x,!1);else eo(w,y,h,x,!1);void 0!==l0&&l0(w,g,f,h,y)}function Hv(l,f){if(null!==f){var h=f.type;if(3&h)return aa(f,l);if(4&h)return c0(-1,l[f.index]);if(8&h){var g=f.child;if(null!==g)return Hv(l,g);var y=l[f.index];return Us(y)?c0(-1,y):Mr(y)}if(32&h)return mh(f,l)()||Mr(l[f.index]);var x=Eg(l,f);return null!==x?Array.isArray(x)?x[0]:Hv(Ji(l[16]),x):Hv(l,f.next)}return null}function Eg(l,f){return null!==f?l[16][6].projection[f.projection]:null}function c0(l,f){var h=10+l+1;if(h<f.length){var g=f[h],y=g[1].firstChild;if(null!==y)return Hv(g,y)}return f[7]}function zo(l,f,h){var g=Rs(l,f);g&&function(l,f,h,g){An(l)?l.removeChild(f,h,g):f.removeChild(h)}(l,g,f,h)}function Cg(l,f,h,g,y,w,C){for(;null!=h;){var x=g[h.index],Z=h.type;if(C&&0===f&&(x&&Ho(Mr(x),g),h.flags|=4),64!=(64&h.flags))if(8&Z)Cg(l,f,h.child,g,y,w,!1),Ut(f,l,y,x,w);else if(32&Z){for(var K=mh(h,g),ae=void 0;ae=K();)Ut(f,l,y,ae,w);Ut(f,l,y,x,w)}else 16&Z?yE(l,f,g,h,y,w):Ut(f,l,y,x,w);h=C?h.projectionNext:h.next}}function Gs(l,f,h,g,y,w){Cg(h,g,l.firstChild,f,y,w,!1)}function Ix(l,f,h){yE(f[11],0,f,h,o0(l,h,f),Mx(h.parent||f[6],h,f))}function yE(l,f,h,g,y,w){var C=h[16],Z=C[6].projection[g.projection];if(Array.isArray(Z))for(var K=0;K<Z.length;K++)Ut(f,l,y,Z[K],w);else Cg(l,f,Z,C[3],y,w,!0)}function bE(l,f,h){An(l)?l.setAttribute(f,"style",h):f.style.cssText=h}function f0(l,f,h){An(l)?""===h?l.removeAttribute(f,"class"):l.setAttribute(f,"class",h):f.className=h}function h0(l,f,h){for(var g=l.length;;){var y=l.indexOf(f,h);if(-1===y)return y;if(0===y||l.charCodeAt(y-1)<=32){var w=f.length;if(y+w===g||l.charCodeAt(y+w)<=32)return y}h=y+1}}var Rx="ng-template";function zv(l,f,h){for(var g=0;g<l.length;){var y=l[g++];if(h&&"class"===y){if(-1!==h0((y=l[g]).toLowerCase(),f,0))return!0}else if(1===y){for(;g<l.length&&"string"==typeof(y=l[g++]);)if(y.toLowerCase()===f)return!0;return!1}}return!1}function wE(l){return 4===l.type&&l.value!==Rx}function kE(l,f,h){return f===(4!==l.type||h?l.value:Rx)}function Px(l,f,h){for(var g=4,y=l.attrs||[],w=function(l){for(var f=0;f<l.length;f++)if(Vk(l[f]))return f;return l.length}(y),C=!1,x=0;x<f.length;x++){var Z=f[x];if("number"!=typeof Z){if(!C)if(4&g){if(g=2|1&g,""!==Z&&!kE(l,Z,h)||""===Z&&1===f.length){if(Nl(g))return!1;C=!0}}else{var K=8&g?Z:f[++x];if(8&g&&null!==l.attrs){if(!zv(l.attrs,K,h)){if(Nl(g))return!1;C=!0}continue}var pe=Ox(8&g?"class":Z,y,wE(l),h);if(-1===pe){if(Nl(g))return!1;C=!0;continue}if(""!==K){var ve;ve=pe>w?"":y[pe+1].toLowerCase();var Se=8&g?ve:null;if(Se&&-1!==h0(Se,K,0)||2&g&&K!==ve){if(Nl(g))return!1;C=!0}}}}else{if(!C&&!Nl(g)&&!Nl(Z))return!1;if(C&&Nl(Z))continue;C=!1,g=Z|1&g}}return Nl(g)||C}function Nl(l){return 0==(1&l)}function Ox(l,f,h,g){if(null===f)return-1;var y=0;if(g||!h){for(var w=!1;y<f.length;){var C=f[y];if(C===l)return y;if(3===C||6===C)w=!0;else{if(1===C||2===C){for(var x=f[++y];"string"==typeof x;)x=f[++y];continue}if(4===C)break;if(0===C){y+=4;continue}}y+=w?1:2}return-1}return function(l,f){var h=l.indexOf(4);if(h>-1)for(h++;h<l.length;){var g=l[h];if("number"==typeof g)return-1;if(g===f)return h;h++}return-1}(f,l)}function Sg(l,f){for(var h=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=0;g<f.length;g++)if(Px(l,f[g],h))return!0;return!1}function hL(l,f){e:for(var h=0;h<f.length;h++){var g=f[h];if(l.length===g.length){for(var y=0;y<l.length;y++)if(l[y]!==g[y])continue e;return!0}}return!1}function Lx(l,f){return l?":not("+f.trim()+")":f}function TE(l){for(var f=l[0],h=1,g=2,y="",w=!1;h<l.length;){var C=l[h];if("string"==typeof C)if(2&g){var x=l[++h];y+="["+C+(x.length>0?'="'+x+'"':"")+"]"}else 8&g?y+="."+C:4&g&&(y+=" "+C);else""!==y&&!Nl(C)&&(f+=Lx(w,y),y=""),g=C,w=w||!Nl(g);h++}return""!==y&&(f+=Lx(w,y)),f}var Nr={};function wo(l){Gv(ei(),jt(),lt()+l,hc())}function Gv(l,f,h,g){if(!g)if(3==(3&f[2])){var w=l.preOrderCheckHooks;null!==w&&zi(f,w,h)}else{var C=l.preOrderHooks;null!==C&&kr(f,C,0,h)}Ft(h)}function d0(l,f){return l<<17|f<<2}function su(l){return l>>17&32767}function jv(l){return 2|l}function cl(l){return(131068&l)>>2}function Tg(l,f){return-131069&l|f<<2}function Mg(l){return 1|l}function _h(l,f){var h=l.contentQueries;if(null!==h)for(var g=0;g<h.length;g+=2){var w=h[g+1];if(-1!==w){var C=l.data[w];Il(h[g]),C.contentQueries(2,f[w],w)}}}function qv(l,f,h,g,y,w,C,x,Z,K){var ae=f.blueprint.slice();return ae[0]=y,ae[2]=140|g,lc(ae),ae[3]=ae[15]=l,ae[8]=h,ae[10]=C||l&&l[10],ae[11]=x||l&&l[11],ae[12]=Z||l&&l[12]||null,ae[9]=K||l&&l[9]||null,ae[6]=w,ae[16]=2==f.type?l[16]:ae,ae}function Tc(l,f,h,g,y){var w=l.data[f];if(null===w)w=y0(l,f,h,g,y),pr.lFrame.inI18n&&(w.flags|=64);else if(64&w.type){w.type=h,w.value=g,w.attrs=y;var C=Tl();w.injectorIndex=null===C?-1:C.injectorIndex}return ts(w,!0),w}function y0(l,f,h,g,y){var w=Kf(),C=Ds(),Z=l.data[f]=function(l,f,h,g,y,w){return{type:h,index:g,insertBeforeIndex:null,injectorIndex:f?f.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:y,attrs:w,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:f,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?w:w&&w.parent,h,f,g,y);return null===l.firstChild&&(l.firstChild=Z),null!==w&&(C?null==w.child&&null!==Z.parent&&(w.child=Z):null===w.next&&(w.next=Z)),Z}function Ps(l,f,h,g){if(0===h)return-1;for(var y=f.length,w=0;w<h;w++)f.push(g),l.blueprint.push(g),l.data.push(null);return y}function Yv(l,f,h){No(f);try{var g=l.viewQuery;null!==g&&jE(1,g,h);var y=l.template;null!==y&&OE(l,f,y,1,h),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&_h(l,f),l.staticViewQueries&&jE(2,l.viewQuery,h);var w=l.components;null!==w&&function(l,f){for(var h=0;h<f.length;h++)TL(l,f[h])}(f,w)}catch(C){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),C}finally{f[2]&=-5,Ce()}}function Mc(l,f,h,g){var y=f[2];if(256!=(256&y)){No(f);var w=hc();try{lc(f),Lo(l.bindingStartIndex),null!==h&&OE(l,f,h,2,g);var C=3==(3&y);if(!w)if(C){var x=l.preOrderCheckHooks;null!==x&&zi(f,x,null)}else{var Z=l.preOrderHooks;null!==Z&&kr(f,Z,0,null),Ma(f,0)}if(function(l){for(var f=ku(l);null!==f;f=Ex(f))if(f[2])for(var h=f[9],g=0;g<h.length;g++){var y=h[g];0==(1024&y[2])&&jf(y[3],1),y[2]|=1024}}(f),function(l){for(var f=ku(l);null!==f;f=Ex(f))for(var h=10;h<f.length;h++){var g=f[h],y=g[1];al(g)&&Mc(y,g,y.template,g[8])}}(f),null!==l.contentQueries&&_h(l,f),!w)if(C){var K=l.contentCheckHooks;null!==K&&zi(f,K)}else{var ae=l.contentHooks;null!==ae&&kr(f,ae,1),Ma(f,1)}!function(l,f){var h=l.hostBindingOpCodes;if(null!==h)try{for(var g=0;g<h.length;g++){var y=h[g];if(y<0)Ft(~y);else{var w=y,C=h[++g],x=h[++g];af(C,w),x(2,f[w])}}}finally{Ft(-1)}}(l,f);var pe=l.components;null!==pe&&function(l,f){for(var h=0;h<f.length;h++)SL(l,f[h])}(f,pe);var ve=l.viewQuery;if(null!==ve&&jE(2,ve,g),!w)if(C){var Se=l.viewCheckHooks;null!==Se&&zi(f,Se)}else{var Ne=l.viewHooks;null!==Ne&&kr(f,Ne,2),Ma(f,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),w||(f[2]&=-73),1024&f[2]&&(f[2]&=-1025,jf(f[3],-1))}finally{Ce()}}}function _0(l,f,h,g){var y=f[10],w=!hc(),C=il(f);try{w&&!C&&y.begin&&y.begin(),C&&Yv(l,f,g),Mc(l,f,h,g)}finally{w&&!C&&y.end&&y.end()}}function OE(l,f,h,g,y){var w=lt(),C=2&g;try{Ft(-1),C&&f.length>20&&Gv(l,f,20,hc()),h(g,y)}finally{Ft(w)}}function b0(l,f,h){if(hd(f))for(var y=f.directiveEnd,w=f.directiveStart;w<y;w++){var C=l.data[w];C.contentQueries&&C.contentQueries(1,h[w],w)}}function w0(l,f,h){!fc()||(function(l,f,h,g){var y=h.directiveStart,w=h.directiveEnd;l.firstCreatePass||Zo(h,f),Ho(g,f);for(var C=h.initialInputs,x=y;x<w;x++){var Z=l.data[x],K=Ka(Z);K&&x0(f,h,Z);var ae=ul(f,l,x,h);Ho(ae,f),null!==C&&Ba(0,x-y,ae,Z,0,C),K&&(xs(h.index,f)[8]=ae)}}(l,f,h,aa(h,f)),128==(128&h.flags)&&function(l,f,h){var g=h.directiveStart,y=h.directiveEnd,C=h.index,x=pr.lFrame.currentDirectiveIndex;try{Ft(C);for(var Z=g;Z<y;Z++){var K=l.data[Z],ae=f[Z];xl(Z),(null!==K.hostBindings||0!==K.hostVars||null!==K.hostAttrs)&&A0(K,ae)}}finally{Ft(-1),xl(x)}}(l,f,h))}function k0(l,f){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aa,g=f.localNames;if(null!==g)for(var y=f.index+1,w=0;w<g.length;w+=2){var C=g[w+1],x=-1===C?h(f,l):l[C];l[y++]=x}}function Kv(l){var f=l.tView;return null===f||f.incompleteFirstPass?l.tView=$v(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):f}function $v(l,f,h,g,y,w,C,x,Z,K){var ae=20+g,pe=ae+y,ve=function(l,f){for(var h=[],g=0;g<f;g++)h.push(g<l?null:Nr);return h}(ae,pe),Se="function"==typeof K?K():K;return ve[1]={type:l,blueprint:ve,template:h,queries:null,viewQuery:x,declTNode:f,data:ve.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof w?w():w,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:Z,consts:Se,incompleteFirstPass:!1}}function FE(l,f,h,g){var y=Jx(f);null===h?y.push(g):(y.push(h),l.firstCreatePass&&WE(l).push(g,y.length-1))}function C0(l,f,h){for(var g in l)if(l.hasOwnProperty(g)){var y=l[g];(h=null===h?{}:h).hasOwnProperty(g)?h[g].push(f,y):h[g]=[f,y]}return h}function Eu(l,f,h,g,y,w,C,x){var ae,Z=aa(f,h),K=f.inputs;!x&&null!=K&&(ae=K[g])?(N0(l,h,ae,g,y),oc(f)&&function(l,f){var h=xs(f,l);16&h[2]||(h[2]|=64)}(h,f.index)):3&f.type&&(g=function(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(g),y=null!=C?C(y,f.value||"",g):y,An(w)?w.setProperty(Z,g,y):eh(g)||(Z.setProperty?Z.setProperty(g,y):Z[g]=y))}function vf(l,f,h,g){var y=!1;if(fc()){var w=function(l,f,h){var g=l.directiveRegistry,y=null;if(g)for(var w=0;w<g.length;w++){var C=g[w];Sg(h,C.selectors,!1)&&(y||(y=[]),nu(Zo(h,f),l,C.type),Ka(C)?(HE(l,h),y.unshift(C)):y.push(C))}return y}(l,f,h),C=null===g?null:{"":-1};if(null!==w){y=!0,Ac(h,l.data.length,w.length);for(var x=0;x<w.length;x++){var Z=w[x];Z.providersResolver&&Z.providersResolver(Z)}for(var K=!1,ae=!1,pe=Ps(l,f,w.length,null),ve=0;ve<w.length;ve++){var Se=w[ve];h.mergedAttrs=eg(h.mergedAttrs,Se.hostAttrs),Og(l,h,f,pe,Se),Ud(pe,Se,C),null!==Se.contentQueries&&(h.flags|=8),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(h.flags|=128);var Ne=Se.type.prototype;!K&&(Ne.ngOnChanges||Ne.ngOnInit||Ne.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(h.index),K=!0),!ae&&(Ne.ngOnChanges||Ne.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(h.index),ae=!0),pe++}!function(l,f){for(var g=f.directiveEnd,y=l.data,w=f.attrs,C=[],x=null,Z=null,K=f.directiveStart;K<g;K++){var ae=y[K],pe=ae.inputs,ve=null===w||wE(f)?null:D0(pe,w);C.push(ve),x=C0(pe,K,x),Z=C0(ae.outputs,K,Z)}null!==x&&(x.hasOwnProperty("class")&&(f.flags|=16),x.hasOwnProperty("style")&&(f.flags|=32)),f.initialInputs=C,f.inputs=x,f.outputs=Z}(l,h)}C&&function(l,f,h){if(f)for(var g=l.localNames=[],y=0;y<f.length;y+=2){var w=h[f[y+1]];if(null==w)throw new Ct("301","Export of name '".concat(f[y+1],"' not found!"));g.push(f[y],w)}}(h,g,C)}return h.mergedAttrs=eg(h.mergedAttrs,h.attrs),y}function M0(l,f,h,g,y,w){var C=w.hostBindings;if(C){var x=l.hostBindingOpCodes;null===x&&(x=l.hostBindingOpCodes=[]);var Z=~f.index;(function(l){for(var f=l.length;f>0;){var h=l[--f];if("number"==typeof h&&h<0)return h}return 0})(x)!=Z&&x.push(Z),x.push(g,y,C)}}function A0(l,f){null!==l.hostBindings&&l.hostBindings(1,f)}function HE(l,f){f.flags|=2,(l.components||(l.components=[])).push(f.index)}function Ud(l,f,h){if(h){if(f.exportAs)for(var g=0;g<f.exportAs.length;g++)h[f.exportAs[g]]=l;Ka(f)&&(h[""]=l)}}function Ac(l,f,h){l.flags|=1,l.directiveStart=f,l.directiveEnd=f+h,l.providerIndexes=f}function Og(l,f,h,g,y){l.data[g]=y;var w=y.factory||(y.factory=ie(y.type)),C=new tu(w,Ka(y),null);l.blueprint[g]=C,h[g]=C,M0(l,f,0,g,Ps(l,h,y.hostVars,Nr),y)}function x0(l,f,h){var g=aa(f,l),y=Kv(h),w=l[10],C=P0(l,qv(l,y,null,h.onPush?64:16,g,f,w,w.createRenderer(g,h),null,null));l[f.index]=C}function Vu(l,f,h,g,y,w){var C=aa(l,f);I0(f[11],C,w,l.value,h,g,y)}function I0(l,f,h,g,y,w,C){if(null==w)An(l)?l.removeAttribute(f,y,h):f.removeAttribute(y);else{var x=null==C?k(w):C(w,g||"",y);An(l)?l.setAttribute(f,y,x,h):h?f.setAttributeNS(h,y,x):f.setAttribute(y,x)}}function Ba(l,f,h,g,y,w){var C=w[f];if(null!==C)for(var x=g.setInput,Z=0;Z<C.length;){var K=C[Z++],ae=C[Z++],pe=C[Z++];null!==x?g.setInput(h,pe,K,ae):h[ae]=pe}}function D0(l,f){for(var h=null,g=0;g<f.length;){var y=f[g];if(0!==y)if(5!==y){if("number"==typeof y)break;l.hasOwnProperty(y)&&(null===h&&(h=[]),h.push(y,l[y],f[g+1])),g+=2}else g+=2;else g+=4}return h}function $x(l,f,h,g){return new Array(l,!0,!1,f,null,0,g,h,null,null)}function SL(l,f){var h=xs(f,l);if(al(h)){var g=h[1];80&h[2]?Mc(g,h,g.template,h[8]):h[5]>0&&R0(h)}}function R0(l){for(var f=ku(l);null!==f;f=Ex(f))for(var h=10;h<f.length;h++){var g=f[h];if(1024&g[2]){var y=g[1];Mc(y,g,y.template,g[8])}else g[5]>0&&R0(g)}var C=l[1].components;if(null!==C)for(var x=0;x<C.length;x++){var Z=xs(C[x],l);al(Z)&&Z[5]>0&&R0(Z)}}function TL(l,f){var h=xs(f,l),g=h[1];(function(l,f){for(var h=f.length;h<l.blueprint.length;h++)f.push(l.blueprint[h])})(g,h),Yv(g,h,h[8])}function P0(l,f){return l[13]?l[14][4]=f:l[13]=f,l[14]=f,f}function zE(l){for(;l;){l[2]|=64;var f=Ji(l);if(dd(l)&&!f)return l;l=f}return null}function O0(l,f,h){var g=f[10];g.begin&&g.begin();try{Mc(l,f,l.template,h)}catch(y){throw L0(f,y),y}finally{g.end&&g.end()}}function GE(l){!function(l){for(var f=0;f<l.components.length;f++){var h=l.components[f],g=ax(h),y=g[1];_0(y,g,y.template,h)}}(l[8])}function jE(l,f,h){Il(0),f(l,h)}var Qx=function(){return Promise.resolve(null)}();function Jx(l){return l[7]||(l[7]=[])}function WE(l){return l.cleanup||(l.cleanup=[])}function qE(l,f,h){return(null===l||Ka(l))&&(h=function(l){for(;Array.isArray(l);){if("object"==typeof l[1])return l;l=l[0]}return null}(h[f.index])),h[11]}function L0(l,f){var h=l[9],g=h?h.get(iu,null):null;g&&g.handleError(f)}function N0(l,f,h,g,y){for(var w=0;w<h.length;){var C=h[w++],x=h[w++],Z=f[C],K=l.data[C];null!==K.setInput?K.setInput(Z,y,g,x):Z[x]=y}}function Ic(l,f,h){var g=yu(f,l);Cx(l[11],g,h)}function Zg(l,f,h){var g=h?l.styles:null,y=h?l.classes:null,w=0;if(null!==f)for(var C=0;C<f.length;C++){var x=f[C];"number"==typeof x?w=x:1==w?y=Y(y,x):2==w&&(g=Y(g,x+": "+f[++C]+";"))}h?l.styles=g:l.stylesWithoutHost=g,h?l.classes=y:l.classesWithoutHost=y}var F0=new Aa("INJECTOR",-1),Bg=function(){function l(){(0,we.Z)(this,l)}return(0,be.Z)(l,[{key:"get",value:function(h){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ch;if(g===ch){var y=new Error("NullInjectorError: No provider for ".concat(Qe(h),"!"));throw y.name="NullInjectorError",y}return g}}]),l}(),pf=new Aa("Set Injector scope."),bh={},KE={},Z0=void 0;function ep(){return void 0===Z0&&(Z0=new Bg),Z0}function e1(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=arguments.length>3?arguments[3]:void 0;return new Os(l,h,f||ep(),g)}var Os=function(){function l(f,h,g){var y=this,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,we.Z)(this,l),this.parent=g,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var C=[];h&&yo(h,function(Z){return y.processProvider(Z,f,h)}),yo([f],function(Z){return y.processInjectorType(Z,[],C)}),this.records.set(F0,tp(void 0,this));var x=this.records.get(pf);this.scope=null!=x?x.value:null,this.source=w||("object"==typeof f?null:Qe(f))}return(0,be.Z)(l,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(h){return h.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(h){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ch,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zn.Default;this.assertNotDestroyed();var w=cf(this),C=Qr(void 0);try{if(!(y&Zn.SkipSelf)){var x=this.records.get(h);if(void 0===x){var Z=DL(h)&&Wa(h);x=Z&&this.injectableDefInScope(Z)?tp(B0(h),bh):null,this.records.set(h,x)}if(null!=x)return this.hydrate(h,x)}var K=y&Zn.Self?ep():this.parent;return K.get(h,g=y&Zn.Optional&&g===ch?null:g)}catch(pe){if("NullInjectorError"===pe.name){var ae=pe[wc]=pe[wc]||[];if(ae.unshift(Qe(h)),w)throw pe;return Qk(pe,h,"R3InjectorError",this.source)}throw pe}finally{Qr(C),cf(w)}}},{key:"_resolveInjectorDefTypes",value:function(){var h=this;this.injectorDefTypes.forEach(function(g){return h.get(g)})}},{key:"toString",value:function(){var h=[];return this.records.forEach(function(y,w){return h.push(Qe(w))}),"R3Injector[".concat(h.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(h,g,y){var w=this;if(!(h=nn(h)))return!1;var C=Hi(h),x=null==C&&h.ngModule||void 0,Z=void 0===x?h:x,pe=-1!==y.indexOf(Z);if(void 0!==x&&(C=Hi(x)),null==C)return!1;if(null!=C.imports&&!pe){var ve;y.push(Z);try{yo(C.imports,function(It){w.processInjectorType(It,g,y)&&(void 0===ve&&(ve=[]),ve.push(It))})}finally{}if(void 0!==ve)for(var Se=function(xn){var Lr=ve[xn],jr=Lr.ngModule,Mi=Lr.providers;yo(Mi,function(Pa){return w.processProvider(Pa,jr,Mi||yn)})},Ne=0;Ne<ve.length;Ne++)Se(Ne)}this.injectorDefTypes.add(Z);var at=ie(Z)||function(){return new Z};this.records.set(Z,tp(at,bh));var Et=C.providers;if(null!=Et&&!pe){var cn=h;yo(Et,function(It){return w.processProvider(It,cn,Et)})}return void 0!==x&&void 0!==h.providers}},{key:"processProvider",value:function(h,g,y){var w=mf(h=nn(h))?h:nn(h&&h.provide),C=function(l,f,h){return $E(l)?tp(void 0,l.useValue):tp(t1(l),bh)}(h);if(mf(h)||!0!==h.multi)this.records.get(w);else{var x=this.records.get(w);x||((x=tp(void 0,bh,!0)).factory=function(){return ff(x.multi)},this.records.set(w,x)),w=h,x.multi.push(h)}this.records.set(w,C)}},{key:"hydrate",value:function(h,g){return g.value===bh&&(g.value=KE,g.value=g.factory()),"object"==typeof g.value&&g.value&&function(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(g.value)&&this.onDestroy.add(g.value),g.value}},{key:"injectableDefInScope",value:function(h){if(!h.providedIn)return!1;var g=nn(h.providedIn);return"string"==typeof g?"any"===g||g===this.scope:this.injectorDefTypes.has(g)}}]),l}();function B0(l){var f=Wa(l),h=null!==f?f.factory:ie(l);if(null!==h)return h;if(l instanceof Aa)throw new Error("Token ".concat(Qe(l)," is missing a \u0275prov definition."));if(l instanceof Function)return function(l){var f=l.length;if(f>0){var h=Bo(f,"?");throw new Error("Can't resolve all parameters for ".concat(Qe(l),": (").concat(h.join(", "),")."))}var g=function(l){var f=l&&(l[qi]||l[sr]);if(f){var h=function(l){if(l.hasOwnProperty("name"))return l.name;var f=(""+l).match(/^function\s*([^\s(]+)/);return null===f?"":f[1]}(l);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(h,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(h,'" class.')),f}return null}(l);return null!==g?function(){return g.factory(l)}:function(){return new l}}(l);throw new Error("unreachable")}function t1(l,f,h){var g=void 0;if(mf(l)){var y=nn(l);return ie(y)||B0(y)}if($E(l))g=function(){return nn(l.useValue)};else if(function(l){return!(!l||!l.useFactory)}(l))g=function(){return l.useFactory.apply(l,(0,ke.Z)(ff(l.deps||[])))};else if(function(l){return!(!l||!l.useExisting)}(l))g=function(){return xa(nn(l.useExisting))};else{var w=nn(l&&(l.useClass||l.provide));if(!function(l){return!!l.deps}(l))return ie(w)||B0(w);g=function(){return(0,v.Z)(w,(0,ke.Z)(ff(l.deps)))}}return g}function tp(l,f){var h=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:l,value:f,multi:h?[]:void 0}}function $E(l){return null!==l&&"object"==typeof l&&kc in l}function mf(l){return"function"==typeof l}function DL(l){return"function"==typeof l||"object"==typeof l&&l instanceof Aa}var XE=function(l,f,h){return function(l){var y=e1(l,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0);return y._resolveInjectorDefTypes(),y}({name:h},f,l,h)},Ls=function(){var l=function(){function f(){(0,we.Z)(this,f)}return(0,be.Z)(f,null,[{key:"create",value:function(g,y){return Array.isArray(g)?XE(g,y,""):XE(g.providers,g.parent,g.name||"")}}]),f}();return l.THROW_IF_NOT_FOUND=ch,l.NULL=new Bg,l.\u0275prov=Br({token:l,providedIn:"any",factory:function(){return xa(F0)}}),l.__NG_ELEMENT_ID__=-1,l}();function ar(l,f){Ui(ax(l)[1],pa())}function m1(l){return Object.getPrototypeOf(l.prototype).constructor}function En(l){for(var f=m1(l.type),h=!0,g=[l];f;){var y=void 0;if(Ka(l))y=f.\u0275cmp||f.\u0275dir;else{if(f.\u0275cmp)throw new Error("Directives cannot inherit Components");y=f.\u0275dir}if(y){if(h){g.push(y);var w=l;w.inputs=en(l.inputs),w.declaredInputs=en(l.declaredInputs),w.outputs=en(l.outputs);var C=y.hostBindings;C&&ZL(l,C);var x=y.viewQuery,Z=y.contentQueries;if(x&&ro(l,x),Z&&g1(l,Z),st(l.inputs,y.inputs),st(l.declaredInputs,y.declaredInputs),st(l.outputs,y.outputs),Ka(y)&&y.data.animation){var K=l.data;K.animation=(K.animation||[]).concat(y.data.animation)}}var ae=y.features;if(ae)for(var pe=0;pe<ae.length;pe++){var ve=ae[pe];ve&&ve.ngInherit&&ve(l),ve===En&&(h=!1)}}f=Object.getPrototypeOf(f)}!function(l){for(var f=0,h=null,g=l.length-1;g>=0;g--){var y=l[g];y.hostVars=f+=y.hostVars,y.hostAttrs=eg(y.hostAttrs,h=eg(h,y.hostAttrs))}}(g)}function en(l){return l===Sn?{}:l===yn?[]:l}function ro(l,f){var h=l.viewQuery;l.viewQuery=h?function(g,y){f(g,y),h(g,y)}:f}function g1(l,f){var h=l.contentQueries;l.contentQueries=h?function(g,y,w){f(g,y,w),h(g,y,w)}:f}function ZL(l,f){var h=l.hostBindings;l.hostBindings=h?function(g,y){f(g,y),h(g,y)}:f}var BL=["providersResolver"],UL=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function VL(l){var h,f=m1(l.type);h=Ka(l)?f.\u0275cmp:f.\u0275dir;var w,g=l,y=(0,Re.Z)(BL);try{for(y.s();!(w=y.n()).done;){var C=w.value;g[C]=h[C]}}catch(ae){y.e(ae)}finally{y.f()}if(Ka(h)){var Z,x=(0,Re.Z)(UL);try{for(x.s();!(Z=x.n()).done;){var K=Z.value;g[K]=h[K]}}catch(ae){x.e(ae)}finally{x.f()}}}var j0=null;function io(){if(!j0){var l=ot.Symbol;if(l&&l.iterator)j0=l.iterator;else for(var f=Object.getOwnPropertyNames(Map.prototype),h=0;h<f.length;++h){var g=f[h];"entries"!==g&&"size"!==g&&Map.prototype[g]===Map.prototype.entries&&(j0=g)}}return j0}var kh=function(){function l(f){(0,we.Z)(this,l),this.wrapped=f}return(0,be.Z)(l,null,[{key:"wrap",value:function(h){return new l(h)}},{key:"unwrap",value:function(h){return l.isWrapped(h)?h.wrapped:h}},{key:"isWrapped",value:function(h){return h instanceof l}}]),l}();function Jr(l){return!!Go(l)&&(Array.isArray(l)||!(l instanceof Map)&&io()in l)}function Go(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function Ar(l,f,h){return l[f]=h}function sp(l,f){return l[f]}function os(l,f,h){return!Object.is(l[f],h)&&(l[f]=h,!0)}function Eh(l,f,h,g){var y=os(l,f,h);return os(l,f+1,g)||y}function Gg(l,f,h,g,y){var w=Eh(l,f,h,g);return os(l,f+2,y)||w}function Wr(l,f,h,g,y,w){var C=Eh(l,f,h,g);return Eh(l,f+2,y,w)||C}function aC(l,f,h,g){var y=jt();return os(y,_u(),f)&&(ei(),Vu(Bt(),y,l,f,h,g)),aC}function jo(l,f){for(var h=!1,g=ma(),y=1;y<f.length;y+=2)h=os(l,g++,f[y])||h;if(Lo(g),!h)return Nr;for(var w=f[0],C=1;C<f.length;C+=2)w+=k(f[C])+f[C+1];return w}function Zl(l,f,h,g){return os(l,_u(),h)?f+k(h)+g:Nr}function op(l,f,h,g,y,w){var x=Eh(l,ma(),h,y);return bu(2),x?f+k(h)+g+k(y)+w:Nr}function ao(l,f,h,g,y,w,C,x){var K=Gg(l,ma(),h,y,C);return bu(3),K?f+k(h)+g+k(y)+w+k(C)+x:Nr}function up(l,f,h,g,y,w,C,x,Z,K){var pe=Wr(l,ma(),h,y,C,Z);return bu(4),pe?f+k(h)+g+k(y)+w+k(C)+x+k(Z)+K:Nr}function zu(l,f,h,g,y,w,C,x,Z,K,ae,pe){var ve=ma(),Se=Wr(l,ve,h,y,C,Z);return Se=os(l,ve+4,ae)||Se,bu(5),Se?f+k(h)+g+k(y)+w+k(C)+x+k(Z)+K+k(ae)+pe:Nr}function Ia(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se){var Ne=ma(),at=Wr(l,Ne,h,y,C,Z);return at=Eh(l,Ne+4,ae,ve)||at,bu(6),at?f+k(h)+g+k(y)+w+k(C)+x+k(Z)+K+k(ae)+pe+k(ve)+Se:Nr}function Bl(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at){var Et=ma(),cn=Wr(l,Et,h,y,C,Z);return cn=Gg(l,Et+4,ae,ve,Ne)||cn,bu(7),cn?f+k(h)+g+k(y)+w+k(C)+x+k(Z)+K+k(ae)+pe+k(ve)+Se+k(Ne)+at:Nr}function Ch(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn){var It=ma(),xn=Wr(l,It,h,y,C,Z);return xn=Wr(l,It+4,ae,ve,Ne,Et)||xn,bu(8),xn?f+k(h)+g+k(y)+w+k(C)+x+k(Z)+K+k(ae)+pe+k(ve)+Se+k(Ne)+at+k(Et)+cn:Nr}function sC(l,f,h,g,y,w){var C=jt(),x=Zl(C,f,h,g);return x!==Nr&&Vu(Bt(),C,l,x,y,w),sC}function lp(l,f,h,g,y,w,C,x){var Z=jt(),K=op(Z,f,h,g,y,w);return K!==Nr&&Vu(Bt(),Z,l,K,C,x),lp}function Sh(l,f,h,g,y,w,C,x,Z,K){var ae=jt(),pe=ao(ae,f,h,g,y,w,C,x);return pe!==Nr&&Vu(Bt(),ae,l,pe,Z,K),Sh}function jg(l,f,h,g,y,w,C,x,Z,K,ae,pe){var ve=jt(),Se=up(ve,f,h,g,y,w,C,x,Z,K);return Se!==Nr&&Vu(Bt(),ve,l,Se,ae,pe),jg}function oC(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se){var Ne=jt(),at=zu(Ne,f,h,g,y,w,C,x,Z,K,ae,pe);return at!==Nr&&Vu(Bt(),Ne,l,at,ve,Se),oC}function fr(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at){var Et=jt(),cn=Ia(Et,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se);return cn!==Nr&&Vu(Bt(),Et,l,cn,Ne,at),fr}function Th(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn){var It=jt(),xn=Bl(It,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at);return xn!==Nr&&Vu(Bt(),It,l,xn,Et,cn),Th}function Ul(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn,It,xn){var Lr=jt(),jr=Ch(Lr,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn);return jr!==Nr&&Vu(Bt(),Lr,l,jr,It,xn),Ul}function cp(l,f,h,g){var y=jt(),w=jo(y,f);return w!==Nr&&Vu(Bt(),y,l,w,h,g),cp}function uC(l,f,h,g,y,w,C,x){var Z=jt(),K=ei(),ae=l+20,pe=K.firstCreatePass?function(l,f,h,g,y,w,C,x,Z){var K=f.consts,ae=Tc(f,l,4,C||null,Is(K,x));vf(f,h,ae,Is(K,Z)),Ui(f,ae);var pe=ae.tViews=$v(2,ae,g,y,w,f.directiveRegistry,f.pipeRegistry,null,f.schemas,K);return null!==f.queries&&(f.queries.template(f,ae),pe.queries=f.queries.embeddedTView(ae)),ae}(ae,K,Z,f,h,g,y,w,C):K.data[ae];ts(pe,!1);var ve=Z[11].createComment("");kg(K,Z,ve,pe),Ho(ve,Z),P0(Z,Z[ae]=$x(ve,Z,ve,pe)),tf(pe)&&w0(K,Z,pe),null!=C&&k0(Z,pe,x)}function W0(l){return sa(pr.lFrame.contextLView,20+l)}var Wg={"\u0275\u0275defineInjectable":Br,"\u0275\u0275defineInjector":Zs,"\u0275\u0275inject":xa,"\u0275\u0275invalidFactoryDep":Nv,resolveForwardRef:nn},b1=Be({provide:String,useValue:Be});function hC(l){return void 0!==l.useClass}function hp(l){return void 0!==l.useFactory}var zL=Hs("Injectable",void 0,void 0,void 0,function(f,h){return GL(f,h)}),GL=function(l,f){var h=null,g=null;l.hasOwnProperty(qi)||Object.defineProperty(l,qi,{get:function(){if(null===h){var w=vs();h=w.compileInjectable(Wg,"ng:///".concat(l.name,"/\u0275prov.js"),function(l,f){var h=f||{providedIn:null},g={name:l.name,type:l,typeArgumentCount:0,providedIn:h.providedIn};return(hC(h)||hp(h))&&void 0!==h.deps&&(g.deps=B_(h.deps)),hC(h)?g.useClass=h.useClass:function(l){return b1 in l}(h)?g.useValue=h.useValue:hp(h)?g.useFactory=h.useFactory:function(l){return void 0!==l.useExisting}(h)&&(g.useExisting=h.useExisting),g}(l,f))}return h}}),l.hasOwnProperty(ct)||Object.defineProperty(l,ct,{get:function(){if(null===g){var w=vs();g=w.compileFactory(Wg,"ng:///".concat(l.name,"/\u0275fac.js"),{name:l.name,type:l,typeArgumentCount:0,deps:Fv(l),target:w.FactoryTarget.Injectable})}return g},configurable:!0})};function mp(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn.Default,h=jt();if(null===h)return xa(l,f);var g=pa();return Gk(g,h,nn(l),f)}function X0(){throw new Error("invalid")}function SC(l,f,h){var g=jt();return os(g,_u(),f)&&Eu(ei(),Bt(),g,l,f,g[11],h,!1),SC}function TC(l,f,h,g,y){var C=y?"class":"style";N0(l,h,f.inputs[C],C,g)}function Mh(l,f,h,g){var y=jt(),w=ei(),C=20+l,x=y[11],Z=y[C]=gh(x,f,pr.lFrame.currentNamespace),K=w.firstCreatePass?function(l,f,h,g,y,w,C){var x=f.consts,K=Tc(f,l,2,y,Is(x,w));return vf(f,h,K,Is(x,C)),null!==K.attrs&&Zg(K,K.attrs,!1),null!==K.mergedAttrs&&Zg(K,K.mergedAttrs,!0),null!==f.queries&&f.queries.elementStart(f,K),K}(C,w,y,0,f,h,g):w.data[C];ts(K,!0);var ae=K.mergedAttrs;null!==ae&&yd(x,Z,ae);var pe=K.classes;null!==pe&&f0(x,Z,pe);var ve=K.styles;null!==ve&&bE(x,Z,ve),64!=(64&K.flags)&&kg(w,y,Z,K),0===pr.lFrame.elementDepthCount&&Ho(Z,y),pr.lFrame.elementDepthCount++,tf(K)&&(w0(w,y,K),b0(w,K,y)),null!==g&&k0(y,K)}function _f(){var l=pa();Ds()?rf():ts(l=l.parent,!1);var f=l;pr.lFrame.elementDepthCount--;var h=ei();h.firstCreatePass&&(Ui(h,l),hd(l)&&h.queries.elementEnd(l)),null!=f.classesWithoutHost&&function(l){return 0!=(16&l.flags)}(f)&&TC(h,f,jt(),f.classesWithoutHost,!0),null!=f.stylesWithoutHost&&function(l){return 0!=(32&l.flags)}(f)&&TC(h,f,jt(),f.stylesWithoutHost,!1)}function MC(l,f,h,g){Mh(l,f,h,g),_f()}function jd(l,f,h){var g=jt(),y=ei(),w=l+20,C=y.firstCreatePass?function(l,f,h,g,y){var w=f.consts,C=Is(w,g),x=Tc(f,l,8,"ng-container",C);return null!==C&&Zg(x,C,!0),vf(f,h,x,Is(w,y)),null!==f.queries&&f.queries.elementStart(f,x),x}(w,y,g,f,h):y.data[w];ts(C,!0);var x=g[w]=g[11].createComment("");kg(y,g,x,C),Ho(x,g),tf(C)&&(w0(y,g,C),b0(y,C,g)),null!=h&&k0(g,C)}function AC(){var l=pa(),f=ei();Ds()?rf():ts(l=l.parent,!1),f.firstCreatePass&&(Ui(f,l),hd(l)&&f.queries.elementEnd(l))}function T1(l,f,h){jd(l,f,h),AC()}function yp(){return jt()}function xC(l){return!!l&&"function"==typeof l.then}function M1(l){return!!l&&"function"==typeof l.subscribe}var so=M1;function _p(l,f,h,g){var y=jt(),w=ei(),C=pa();return Q0(w,y,y[11],C,l,f,!!h,g),_p}function bp(l,f){var h=pa(),g=jt(),y=ei();return Q0(y,g,qE(Xf(y.data),h,g),h,l,f,!1),bp}function Q0(l,f,h,g,y,w,C,x){var Z=tf(g),ae=l.firstCreatePass&&WE(l),pe=f[8],ve=Jx(f),Se=!0;if(3&g.type||x){var Ne=aa(g,f),at=x?x(Ne):Ne,Et=ve.length,cn=x?function(Pf){return x(Mr(Pf[g.index]))}:g.index;if(An(h)){var It=null;if(!x&&Z&&(It=function(l,f,h,g){var y=l.cleanup;if(null!=y)for(var w=0;w<y.length-1;w+=2){var C=y[w];if(C===h&&y[w+1]===g){var x=f[7],Z=y[w+2];return x.length>Z?x[Z]:null}"string"==typeof C&&(w+=2)}return null}(l,f,y,g.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=w,It.__ngLastListenerFn__=w,Se=!1;else{w=J0(g,f,pe,w,!1);var Lr=h.listen(at,y,w);ve.push(w,Lr),ae&&ae.push(y,cn,Et,Et+1)}}else w=J0(g,f,pe,w,!0),at.addEventListener(y,w,C),ve.push(w),ae&&ae.push(y,cn,Et,C)}else w=J0(g,f,pe,w,!1);var Mi,jr=g.outputs;if(Se&&null!==jr&&(Mi=jr[y])){var Pa=Mi.length;if(Pa)for(var Ns=0;Ns<Pa;Ns+=2){var ed=f[Mi[Ns]][Mi[Ns+1]].subscribe(w),Ql=ve.length;ve.push(w,ed),ae&&ae.push(y,g.index,Ql,-(Ql+1))}}}function A1(l,f,h,g){try{return!1!==h(g)}catch(y){return L0(l,y),!1}}function J0(l,f,h,g,y){return function w(C){if(C===Function)return g;var x=2&l.flags?xs(l.index,f):f;0==(32&f[2])&&zE(x);for(var Z=A1(f,0,g,C),K=w.__ngNextListenerFn__;K;)Z=A1(f,0,K,C)&&Z,K=K.__ngNextListenerFn__;return y&&!1===Z&&(C.preventDefault(),C.returnValue=!1),Z}}function IC(){var l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return it(l)}function Xg(l,f){for(var h=null,g=function(l){var f=l.attrs;if(null!=f){var h=f.indexOf(5);if(0==(1&h))return f[h+1]}return null}(l),y=0;y<f.length;y++){var w=f[y];if("*"!==w){if(null===g?Sg(l,w,!0):hL(g,w))return y}else h=y}return h}function bf(l){var f=jt()[16][6];if(!f.projection)for(var g=f.projection=Bo(l?l.length:1,null),y=g.slice(),w=f.child;null!==w;){var C=l?Xg(w,l):0;null!==C&&(y[C]?y[C].projectionNext=w:g[C]=w,y[C]=w),w=w.next}}function DC(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2?arguments[2]:void 0,g=jt(),y=ei(),w=Tc(y,20+l,16,null,h||null);null===w.projection&&(w.projection=f),rf(),64!=(64&w.flags)&&Ix(y,g,w)}function eb(l,f,h){return Qg(l,"",f,"",h),eb}function Qg(l,f,h,g,y){var w=jt(),C=Zl(w,f,h,g);return C!==Nr&&Eu(ei(),Bt(),w,l,C,w[11],y,!1),Qg}function wp(l,f,h,g,y,w,C){var x=jt(),Z=op(x,f,h,g,y,w);return Z!==Nr&&Eu(ei(),Bt(),x,l,Z,x[11],C,!1),wp}function tb(l,f,h,g,y,w,C,x,Z){var K=jt(),ae=ao(K,f,h,g,y,w,C,x);return ae!==Nr&&Eu(ei(),Bt(),K,l,ae,K[11],Z,!1),tb}function x1(l,f,h,g,y,w,C,x,Z,K,ae){var pe=jt(),ve=up(pe,f,h,g,y,w,C,x,Z,K);return ve!==Nr&&Eu(ei(),Bt(),pe,l,ve,pe[11],ae,!1),x1}function _s(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve){var Se=jt(),Ne=zu(Se,f,h,g,y,w,C,x,Z,K,ae,pe);return Ne!==Nr&&Eu(ei(),Bt(),Se,l,Ne,Se[11],ve,!1),_s}function wi(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne){var at=jt(),Et=Ia(at,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se);return Et!==Nr&&Eu(ei(),Bt(),at,l,Et,at[11],Ne,!1),wi}function RC(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et){var cn=jt(),It=Bl(cn,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at);return It!==Nr&&Eu(ei(),Bt(),cn,l,It,cn[11],Et,!1),RC}function PC(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn,It){var xn=jt(),Lr=Ch(xn,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn);return Lr!==Nr&&Eu(ei(),Bt(),xn,l,Lr,xn[11],It,!1),PC}function Co(l,f,h){var g=jt(),y=jo(g,f);return y!==Nr&&Eu(ei(),Bt(),g,l,y,g[11],h,!1),Co}function LC(l,f,h,g,y){for(var w=l[h+1],C=null===f,x=g?su(w):cl(w),Z=!1;0!==x&&(!1===Z||C);){var ae=l[x+1];XL(l[x],f)&&(Z=!0,l[x+1]=g?Mg(ae):jv(ae)),x=g?su(ae):cl(ae)}Z&&(l[h+1]=g?jv(w):Mg(w))}function XL(l,f){return null===l||null==f||(Array.isArray(l)?l[1]:l)===f||!(!Array.isArray(l)||"string"!=typeof f)&&_o(l,f)>=0}var ea={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function I1(l){return l.substring(ea.key,ea.keyEnd)}function NC(l){return l.substring(ea.value,ea.valueEnd)}function FC(l,f){var h=ea.textEnd;return h===f?-1:(f=ea.keyEnd=function(l,f,h){for(;f<h&&l.charCodeAt(f)>32;)f++;return f}(l,ea.key=f,h),wf(l,f,h))}function ta(l,f){var h=ea.textEnd,g=ea.key=wf(l,f,h);return h===g?-1:(g=ea.keyEnd=function(l,f,h){for(var g;f<h&&(45===(g=l.charCodeAt(f))||95===g||(-33&g)>=65&&(-33&g)<=90||g>=48&&g<=57);)f++;return f}(l,g,h),g=Jg(l,g,h),g=ea.value=wf(l,g,h),g=ea.valueEnd=function(l,f,h){for(var g=-1,y=-1,w=-1,C=f,x=C;C<h;){var Z=l.charCodeAt(C++);if(59===Z)return x;34===Z||39===Z?x=C=UC(l,Z,C,h):f===C-4&&85===w&&82===y&&76===g&&40===Z?x=C=UC(l,41,C,h):Z>32&&(x=C),w=y,y=g,g=-33&Z}return x}(l,g,h),Jg(l,g,h))}function D1(l){ea.key=0,ea.keyEnd=0,ea.value=0,ea.valueEnd=0,ea.textEnd=l.length}function wf(l,f,h){for(;f<h&&l.charCodeAt(f)<=32;)f++;return f}function Jg(l,f,h,g){return(f=wf(l,f,h))<h&&f++,f}function UC(l,f,h,g){for(var y=-1,w=h;w<g;){var C=l.charCodeAt(w++);if(C==f&&92!==y)return w;y=92==C&&92===y?0:C}throw new Error}function VC(l,f,h){return ou(l,f,h,!1),VC}function nb(l,f){return ou(l,f,null,!0),nb}function Vl(l){dl(zC,tN,l,!1)}function tN(l,f){for(var h=function(l){return D1(l),ta(l,wf(l,0,ea.textEnd))}(f);h>=0;h=ta(f,h))zC(l,I1(f),NC(f))}function nN(l){dl(Uo,Dc,l,!0)}function Dc(l,f){for(var h=function(l){return D1(l),FC(l,wf(l,0,ea.textEnd))}(f);h>=0;h=FC(f,h))Uo(l,I1(f),!0)}function ou(l,f,h,g){var y=jt(),w=ei(),C=bu(2);w.firstUpdatePass&&Ws(w,l,C,g),f!==Nr&&os(y,C,f)&&GC(w,w.data[lt()],y,y[11],l,y[C+1]=function(l,f){return null==l||("string"==typeof f?l+=f:"object"==typeof l&&(l=Qe(Ll(l)))),l}(f,h),g,C)}function dl(l,f,h,g){var y=ei(),w=bu(2);y.firstUpdatePass&&Ws(y,null,w,g);var C=jt();if(h!==Nr&&os(C,w,h)){var x=y.data[lt()];if(jC(x,g)&&!P1(y,w)){var K=g?x.classesWithoutHost:x.stylesWithoutHost;null!==K&&(h=Y(K,h||"")),TC(y,x,C,h,g)}else!function(l,f,h,g,y,w,C,x){y===Nr&&(y=yn);for(var Z=0,K=0,ae=0<y.length?y[0]:null,pe=0<w.length?w[0]:null;null!==ae||null!==pe;){var ve=Z<y.length?y[Z+1]:void 0,Se=K<w.length?w[K+1]:void 0,Ne=null,at=void 0;ae===pe?(Z+=2,K+=2,ve!==Se&&(Ne=pe,at=Se)):null===pe||null!==ae&&ae<pe?(Z+=2,Ne=ae):(K+=2,Ne=pe,at=Se),null!==Ne&&GC(l,f,h,g,Ne,at,C,x),ae=Z<y.length?y[Z]:null,pe=K<w.length?w[K]:null}}(y,x,C,C[11],C[w+1],C[w+1]=function(l,f,h){if(null==h||""===h)return yn;var g=[],y=Ll(h);if(Array.isArray(y))for(var w=0;w<y.length;w++)l(g,y[w],!0);else if("object"==typeof y)for(var C in y)y.hasOwnProperty(C)&&l(g,C,y[C]);else"string"==typeof y&&f(g,y);return g}(l,f,h),g,w)}}function P1(l,f){return f>=l.expandoStartIndex}function Ws(l,f,h,g){var y=l.data;if(null===y[h+1]){var w=y[lt()],C=P1(l,h);jC(w,g)&&null===f&&!C&&(f=!1),f=function(l,f,h,g){var y=Xf(l),w=g?f.residualClasses:f.residualStyles;if(null===y)0===(g?f.classBindings:f.styleBindings)&&(h=kp(h=ty(null,l,f,h,g),f.attrs,g),w=null);else{var x=f.directiveStylingLast;if(-1===x||l[x]!==y)if(h=ty(y,l,f,h,g),null===w){var K=function(l,f,h){var g=h?f.classBindings:f.styleBindings;if(0!==cl(g))return l[su(g)]}(l,f,g);void 0!==K&&Array.isArray(K)&&function(l,f,h,g){l[su(h?f.classBindings:f.styleBindings)]=g}(l,f,g,K=kp(K=ty(null,l,f,K[1],g),f.attrs,g))}else w=function(l,f,h){for(var g=void 0,y=f.directiveEnd,w=1+f.directiveStylingLast;w<y;w++)g=kp(g,l[w].hostAttrs,h);return kp(g,f.attrs,h)}(l,f,g)}return void 0!==w&&(g?f.residualClasses=w:f.residualStyles=w),h}(y,w,f,g),function(l,f,h,g,y,w){var C=w?f.classBindings:f.styleBindings,x=su(C),Z=cl(C);l[g]=h;var ae,K=!1;if(Array.isArray(h)?(null===(ae=h[1])||_o(h,ae)>0)&&(K=!0):ae=h,y)if(0!==Z){var Se=su(l[x+1]);l[g+1]=d0(Se,x),0!==Se&&(l[Se+1]=Tg(l[Se+1],g)),l[x+1]=function(l,f){return 131071&l|f<<17}(l[x+1],g)}else l[g+1]=d0(x,0),0!==x&&(l[x+1]=Tg(l[x+1],g)),x=g;else l[g+1]=d0(Z,0),0===x?x=g:l[Z+1]=Tg(l[Z+1],g),Z=g;K&&(l[g+1]=jv(l[g+1])),LC(l,ae,g,!0),LC(l,ae,g,!1),function(l,f,h,g,y){var w=y?l.residualClasses:l.residualStyles;null!=w&&"string"==typeof f&&_o(w,f)>=0&&(h[g+1]=Mg(h[g+1]))}(f,ae,l,g,w),C=d0(x,Z),w?f.classBindings=C:f.styleBindings=C}(y,w,f,h,C,g)}}function ty(l,f,h,g,y){var w=null,C=h.directiveEnd,x=h.directiveStylingLast;for(-1===x?x=h.directiveStart:x++;x<C&&(g=kp(g,(w=f[x]).hostAttrs,y),w!==l);)x++;return null!==l&&(h.directiveStylingLast=x),g}function kp(l,f,h){var g=h?1:2,y=-1;if(null!==f)for(var w=0;w<f.length;w++){var C=f[w];"number"==typeof C?y=C:y===g&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),Uo(l,C,!!h||f[++w]))}return void 0===l?null:l}function zC(l,f,h){Uo(l,f,Ll(h))}function GC(l,f,h,g,y,w,C,x){if(3&f.type){var Z=l.data,K=Z[x+1];rb(function(l){return 1==(1&l)}(K)?N1(Z,f,h,y,cl(K),C):void 0)||(rb(w)||function(l){return 2==(2&l)}(K)&&(w=N1(Z,null,h,y,x,C)),function(l,f,h,g,y){var w=An(l);if(f)y?w?l.addClass(h,g):h.classList.add(g):w?l.removeClass(h,g):h.classList.remove(g);else{var C=-1===g.indexOf("-")?void 0:dE.DashCase;if(null==y)w?l.removeStyle(h,g,C):h.style.removeProperty(g);else{var x="string"==typeof y&&y.endsWith("!important");x&&(y=y.slice(0,-10),C|=dE.Important),w?l.setStyle(h,g,y,C):h.style.setProperty(g,y,x?"important":"")}}}(g,C,yu(lt(),h),y,w))}}function N1(l,f,h,g,y,w){for(var C=null===f,x=void 0;y>0;){var Z=l[y],K=Array.isArray(Z),ae=K?Z[1]:Z,pe=null===ae,ve=h[y+1];ve===Nr&&(ve=pe?yn:void 0);var Se=pe?sh(ve,g):ae===g?ve:void 0;if(K&&!rb(Se)&&(Se=sh(Z,g)),rb(Se)&&(x=Se,C))return x;var Ne=l[y+1];y=C?su(Ne):cl(Ne)}if(null!==f){var at=w?f.residualClasses:f.residualStyles;null!=at&&(x=sh(at,g))}return x}function rb(l){return void 0!==l}function jC(l,f){return 0!=(l.flags&(f?16:32))}function F1(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",h=jt(),g=ei(),y=l+20,w=g.firstCreatePass?Tc(g,y,1,f,null):g.data[y],C=h[y]=mE(h[11],f);kg(g,h,C,w),ts(w,!1)}function ab(l){return ry("",l,""),ab}function ry(l,f,h){var g=jt(),y=Zl(g,l,f,h);return y!==Nr&&Ic(g,lt(),y),ry}function WC(l,f,h,g,y){var w=jt(),C=op(w,l,f,h,g,y);return C!==Nr&&Ic(w,lt(),C),WC}function Z1(l,f,h,g,y,w,C){var x=jt(),Z=ao(x,l,f,h,g,y,w,C);return Z!==Nr&&Ic(x,lt(),Z),Z1}function qC(l,f,h,g,y,w,C,x,Z){var K=jt(),ae=up(K,l,f,h,g,y,w,C,x,Z);return ae!==Nr&&Ic(K,lt(),ae),qC}function YC(l,f,h,g,y,w,C,x,Z,K,ae){var pe=jt(),ve=zu(pe,l,f,h,g,y,w,C,x,Z,K,ae);return ve!==Nr&&Ic(pe,lt(),ve),YC}function KC(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve){var Se=jt(),Ne=Ia(Se,l,f,h,g,y,w,C,x,Z,K,ae,pe,ve);return Ne!==Nr&&Ic(Se,lt(),Ne),KC}function B1(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne){var at=jt(),Et=Bl(at,l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne);return Et!==Nr&&Ic(at,lt(),Et),B1}function U1(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et){var cn=jt(),It=Ch(cn,l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et);return It!==Nr&&Ic(cn,lt(),It),U1}function Wd(l){var f=jt(),h=jo(f,l);return h!==Nr&&Ic(f,lt(),h),Wd}function Ep(l,f,h){dl(Uo,Dc,Zl(jt(),l,f,h),!0)}function rN(l,f,h,g,y){dl(Uo,Dc,op(jt(),l,f,h,g,y),!0)}function iN(l,f,h,g,y,w,C){dl(Uo,Dc,ao(jt(),l,f,h,g,y,w,C),!0)}function aN(l,f,h,g,y,w,C,x,Z){dl(Uo,Dc,up(jt(),l,f,h,g,y,w,C,x,Z),!0)}function V1(l,f,h,g,y,w,C,x,Z,K,ae){dl(Uo,Dc,zu(jt(),l,f,h,g,y,w,C,x,Z,K,ae),!0)}function Hl(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve){dl(Uo,Dc,Ia(jt(),l,f,h,g,y,w,C,x,Z,K,ae,pe,ve),!0)}function sN(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne){dl(Uo,Dc,Bl(jt(),l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne),!0)}function H1(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et){dl(Uo,Dc,Ch(jt(),l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et),!0)}function kf(l){dl(Uo,Dc,jo(jt(),l),!0)}function oN(l,f,h){Vl(Zl(jt(),l,f,h))}function zl(l,f,h,g,y){Vl(op(jt(),l,f,h,g,y))}function Cp(l,f,h,g,y,w,C){Vl(ao(jt(),l,f,h,g,y,w,C))}function Da(l,f,h,g,y,w,C,x,Z){Vl(up(jt(),l,f,h,g,y,w,C,x,Z))}function ju(l,f,h,g,y,w,C,x,Z,K,ae){Vl(zu(jt(),l,f,h,g,y,w,C,x,Z,K,ae))}function uN(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve){Vl(Ia(jt(),l,f,h,g,y,w,C,x,Z,K,ae,pe,ve))}function lN(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne){Vl(Bl(jt(),l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne))}function us(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et){Vl(Ch(jt(),l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et))}function xh(l){Vl(jo(jt(),l))}function uu(l,f,h,g,y){return ou(l,Zl(jt(),f,h,g),y,!1),uu}function oo(l,f,h,g,y,w,C){return ou(l,op(jt(),f,h,g,y,w),C,!1),oo}function vl(l,f,h,g,y,w,C,x,Z){return ou(l,ao(jt(),f,h,g,y,w,C,x),Z,!1),vl}function Sp(l,f,h,g,y,w,C,x,Z,K,ae){return ou(l,up(jt(),f,h,g,y,w,C,x,Z,K),ae,!1),Sp}function Ih(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve){return ou(l,zu(jt(),f,h,g,y,w,C,x,Z,K,ae,pe),ve,!1),Ih}function iy(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne){return ou(l,Ia(jt(),f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se),Ne,!1),iy}function ay(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et){return ou(l,Bl(jt(),f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at),Et,!1),ay}function z1(l,f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn,It){return ou(l,Ch(jt(),f,h,g,y,w,C,x,Z,K,ae,pe,ve,Se,Ne,at,Et,cn),It,!1),z1}function $C(l,f,h){return ou(l,jo(jt(),f),h,!1),$C}function sb(l,f,h){var g=jt();return os(g,_u(),f)&&Eu(ei(),Bt(),g,l,f,g[11],h,!0),sb}function ln(l,f,h){var g=jt();if(os(g,_u(),f)){var w=ei(),C=Bt();Eu(w,C,g,l,f,qE(Xf(w.data),C,g),h,!0)}return ln}var Dh=void 0,cN=["en",[["a","p"],["AM","PM"],Dh],[["AM","PM"],Dh,Dh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dh,"{1} 'at' {0}",Dh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(l){var f=Math.floor(Math.abs(l)),h=l.toString().replace(/^[^.]*\.?/,"").length;return 1===f&&0===h?1:5}],Pc={};function XC(l){var f=function(l){return l.toLowerCase().replace(/_/g,"-")}(l),h=ob(f);if(h)return h;var g=f.split("-")[0];if(h=ob(g))return h;if("en"===g)return cN;throw new Error('Missing locale data for the locale "'.concat(l,'".'))}function QC(l){return XC(l)[uo.PluralCase]}function ob(l){return l in Pc||(Pc[l]=ot.ng&&ot.ng.common&&ot.ng.common.locales&&ot.ng.common.locales[l]),Pc[l]}var uo=function(l){return l[l.LocaleId=0]="LocaleId",l[l.DayPeriodsFormat=1]="DayPeriodsFormat",l[l.DayPeriodsStandalone=2]="DayPeriodsStandalone",l[l.DaysFormat=3]="DaysFormat",l[l.DaysStandalone=4]="DaysStandalone",l[l.MonthsFormat=5]="MonthsFormat",l[l.MonthsStandalone=6]="MonthsStandalone",l[l.Eras=7]="Eras",l[l.FirstDayOfWeek=8]="FirstDayOfWeek",l[l.WeekendRange=9]="WeekendRange",l[l.DateFormat=10]="DateFormat",l[l.TimeFormat=11]="TimeFormat",l[l.DateTimeFormat=12]="DateTimeFormat",l[l.NumberSymbols=13]="NumberSymbols",l[l.NumberFormats=14]="NumberFormats",l[l.CurrencyCode=15]="CurrencyCode",l[l.CurrencySymbol=16]="CurrencySymbol",l[l.CurrencyName=17]="CurrencyName",l[l.Currencies=18]="Currencies",l[l.Directionality=19]="Directionality",l[l.PluralCase=20]="PluralCase",l[l.ExtraData=21]="ExtraData",l}({}),hN=["zero","one","two","few","many"],sy="en-US",oy={marker:"element"},xp={marker:"ICU"},Cu=function(l){return l[l.SHIFT=2]="SHIFT",l[l.APPEND_EAGERLY=1]="APPEND_EAGERLY",l[l.COMMENT=2]="COMMENT",l}({}),qd=sy;function Rh(l){(function(l,f){null==l&&mr(f,l,null,"!=")})(l,"Expected localeId to be defined"),"string"==typeof l&&(qd=l.toLowerCase().replace(/_/g,"-"))}function tS(l,f,h){var g=f.insertBeforeIndex,y=Array.isArray(g)?g[0]:g;return null===y?Ax(l,0,h):Mr(h[y])}function lb(l,f,h,g,y){var w=f.insertBeforeIndex;if(Array.isArray(w)){var C=g,x=null;if(3&f.type||(x=C,C=y),null!==C&&0==(2&f.flags))for(var Z=1;Z<w.length;Z++)Fd(l,C,h[w[Z]],x,!1)}}function G1(l,f){if(l.push(f),l.length>1)for(var h=l.length-2;h>=0;h--){var g=l[h];nS(g)||j1(g,f)&&null===dN(g)&&rS(g,f.index)}}function nS(l){return!(64&l.type)}function j1(l,f){return nS(f)||l.index>f.index}function dN(l){var f=l.insertBeforeIndex;return Array.isArray(f)?f[0]:f}function rS(l,f){var h=l.insertBeforeIndex;Array.isArray(h)?h[0]=f:(xx(tS,lb),l.insertBeforeIndex=f)}function cy(l,f){var h=l.data[f];return null===h||"string"==typeof h?null:h.hasOwnProperty("currentCaseLViewIndex")?h:h.value}function Oc(l,f,h){var g=y0(l,h,64,null,null);return G1(f,g),g}function fy(l,f){var h=f[l.currentCaseLViewIndex];return null===h?h:h<0?~h:h}function hy(l){return l>>>17}function Y1(l){return(131070&l)>>>1}var Lc=0,Ip=0;function Dp(l,f,h,g){for(var y=l[11],w=0;w<f.length;w++){var C=f[w++],x=f[w],K=(C&Cu.APPEND_EAGERLY)===Cu.APPEND_EAGERLY,ae=C>>>Cu.SHIFT,pe=l[ae];null===pe&&(pe=l[ae]=(C&Cu.COMMENT)===Cu.COMMENT?y.createComment(x):mE(y,x)),K&&null!==h&&Fd(y,h,pe,g,!1)}}function aS(l,f,h,g){for(var C,y=h[11],w=null,x=0;x<f.length;x++){var Z=f[x];if("string"==typeof Z){var K=f[++x];null===h[K]&&(h[K]=mE(y,Z))}else if("number"==typeof Z)switch(1&Z){case 0:var ae=hy(Z);null===w&&(w=ae,C=Rs(y,g));var pe=void 0,ve=void 0;if(ae===w?(pe=g,ve=C):(pe=null,ve=Mr(h[ae])),null!==ve){var Se=Y1(Z);Fd(y,ve,h[Se],pe,!1);var at=cy(l,Se);if(null!==at&&"object"==typeof at){var Et=fy(at,h);null!==Et&&aS(l,at.create[Et],h,h[at.anchorIdx])}}break;case 1:var It=f[++x],xn=f[++x];I0(y,yu(Z>>>1,h),null,null,It,xn,null);break;default:throw new Error('Unable to determine the type of mutate operation for "'.concat(Z,'"'))}else switch(Z){case xp:var Lr=f[++x],jr=f[++x];null===h[jr]&&Ho(h[jr]=Ze(y,Lr),h);break;case oy:var Pa=f[++x],Ns=f[++x];null===h[Ns]&&Ho(h[Ns]=gh(y,Pa,null),h)}}}function Ef(l,f,h,g,y){for(var w=0;w<h.length;w++){var C=h[w],x=h[++w];if(C&y)for(var Z="",K=w+1;K<=w+x;K++){var ae=h[K];if("string"==typeof ae)Z+=ae;else if("number"==typeof ae)if(ae<0)Z+=k(f[g-ae]);else{var pe=ae>>>2;switch(3&ae){case 1:var ve=h[++K],Se=h[++K],Ne=l.data[pe];"string"==typeof Ne?I0(f[11],f[pe],null,Ne,ve,Z,Se):Eu(l,Ne,f,ve,Z,f[11],Se,!1);break;case 0:var at=f[pe];null!==at&&Cx(f[11],at,Z);break;case 2:sS(l,cy(l,pe),f,Z);break;case 3:Oh(l,cy(l,pe),g,f)}}}else{var Et=h[w+1];if(Et>0&&3==(3&Et)){var It=cy(l,Et>>>2);f[It.currentCaseLViewIndex]<0&&Oh(l,It,g,f)}}w+=x}}function Oh(l,f,h,g){var y=g[f.currentCaseLViewIndex];if(null!==y){var w=Lc;y<0&&(y=g[f.currentCaseLViewIndex]=~y,w=-1),Ef(l,g,f.update[y],h,w)}}function sS(l,f,h,g){var y=function(l,f){var h=l.cases.indexOf(f);if(-1===h)switch(l.type){case 1:var g=function(l,f){var h=QC(f)(parseInt(l,10)),g=hN[h];return void 0!==g?g:"other"}(f,qd);-1===(h=l.cases.indexOf(g))&&"other"!==g&&(h=l.cases.indexOf("other"));break;case 0:h=l.cases.indexOf("other")}return-1===h?null:h}(f,g);if(fy(f,h)!==y&&(oS(l,f,h),h[f.currentCaseLViewIndex]=null===y?null:~y,null!==y)){var C=h[f.anchorIdx];C&&aS(l,f.create[y],h,C)}}function oS(l,f,h){var g=fy(f,h);if(null!==g)for(var y=f.remove[g],w=0;w<y.length;w++){var C=y[w];if(C>0){var x=yu(C,h);null!==x&&zo(h[11],x)}else oS(l,cy(l,~C),h)}}function mN(){var h,g,l=[],f=-1;function w(x,Z){f=0;var K=fy(x,Z);g=null!==K?x.remove[K]:yn}function C(){if(f<g.length){var x=g[f++];return x>0?h[x]:(l.push(f,g),w(h[1].data[~x],h),C())}return 0===l.length?null:(g=l.pop(),f=l.pop(),C())}return function(x,Z){for(h=Z;l.length;)l.pop();return w(x.value,Z),C}}var fb=/\ufffd(\d+):?\d*\ufffd/gi,gN=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,K1=/\ufffd(\d+)\ufffd/,Cf=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,yN=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,$1=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,cS=/\uE500/g;function vy(l,f,h,g,y,w){for(var C=Tl(),x=[],Z=[],K=[[]],ae=function(l){return l.replace(cS," ")}(y=function(l,f){if(function(l){return-1===l}(f))return dS(l);var h=l.indexOf(":".concat(f).concat("\ufffd"))+2+f.toString().length,g=l.search(new RegExp("".concat("\ufffd","\\/\\*\\d+:").concat(f).concat("\ufffd")));return dS(l.substring(h,g))}(y,w)).split($1),pe=0;pe<ae.length;pe++){var ve=ae[pe];if(0==(1&pe))for(var Se=db(ve),Ne=0;Ne<Se.length;Ne++){var at=Se[Ne];if(0==(1&Ne))""!==at&&fS(l,C,K[0],x,Z,h,at);else{var cn=at;if("object"!=typeof cn)throw new Error('Unable to parse ICU expression in "'.concat(y,'" message.'));hb(l,h,Z,f,cn,py(l,C,K[0],h,x,"",!0).index)}}else{var Lr=47===ve.charCodeAt(0),Mi=(ve.charCodeAt(Lr?1:0),20+Number.parseInt(ve.substring(Lr?2:1)));if(Lr)K.shift(),ts(Tl(),!1);else{var Pa=Oc(l,K[0],Mi);K.unshift([]),ts(Pa,!0)}}}l.data[g]={create:x,update:Z}}function py(l,f,h,g,y,w,C){var x=Ps(l,g,1,null),Z=x<<Cu.SHIFT,K=Tl();f===K&&(K=null),null===K&&(Z|=Cu.APPEND_EAGERLY),C&&(Z|=Cu.COMMENT,function(l){void 0===vE&&(vE=l())}(mN)),y.push(Z,null===w?"":w);var ae=y0(l,x,C?32:1,null===w?"":w,null);G1(h,ae);var pe=ae.index;return ts(ae,!1),null!==K&&f!==K&&function(l,f){var h=l.insertBeforeIndex;null===h?(xx(tS,lb),h=l.insertBeforeIndex=[null,f]):(function(l,f,h){l!=f&&mr(h,l,f,"==")}(Array.isArray(h),!0,"Expecting array here"),h.push(f))}(K,pe),ae}function fS(l,f,h,g,y,w,C){var x=C.match(fb),Z=py(l,f,h,w,g,x?null:C,!1);x&&Yd(y,C,Z.index,null,0,null)}function Yd(l,f,h,g,y,w){var C=l.length,x=C+1;l.push(null,null);for(var Z=C+2,K=f.split(fb),ae=0,pe=0;pe<K.length;pe++){var ve=K[pe];if(1&pe){var Se=y+parseInt(ve,10);l.push(-1-Se),ae|=hS(Se)}else""!==ve&&l.push(ve)}return l.push(h<<2|(g?1:0)),g&&l.push(g,w),l[C]=ae,l[x]=l.length-Z,ae}function wN(l){for(var f=0,h=0;h<l.length;h++){var g=l[h];"number"==typeof g&&g<0&&f++}return f}function hS(l){return 1<<Math.min(l,31)}function dS(l){for(var f,w,h="",g=0,y=!1;null!==(f=yN.exec(l));)y?f[0]==="".concat("\ufffd","/*").concat(w).concat("\ufffd")&&(g=f.index,y=!1):(h+=l.substring(g,f.index+f[0].length),w=f[1],y=!0);return h+l.substr(g)}function hb(l,f,h,g,y,w){var C=0,x={type:y.type,currentCaseLViewIndex:Ps(l,f,1,null),anchorIdx:w,cases:[],create:[],remove:[],update:[]};(function(l,f,h){l.push(hS(f.mainBinding),2,-1-f.mainBinding,h<<2|2)})(h,y,w),function(l,f,h){var g=l.data[f];null===g?l.data[f]=h:g.value=h}(l,w,x);for(var Z=y.values,K=0;K<Z.length;K++){for(var ae=Z[K],pe=[],ve=0;ve<ae.length;ve++){var Se=ae[ve];if("string"!=typeof Se){var Ne=pe.push(Se)-1;ae[ve]="\x3c!--\ufffd".concat(Ne,"\ufffd--\x3e")}}C=CN(l,x,f,h,g,y.cases[K],ae.join(""),pe)|C}C&&function(l,f,h){l.push(f,1,h<<2|3)}(h,C,w)}function EN(l){for(var f=[],h=[],g=1,y=0,w=db(l=l.replace(Cf,function(K,ae,pe){return g="select"===pe?0:1,y=parseInt(ae.substr(1),10),""})),C=0;C<w.length;){var x=w[C++].trim();1===g&&(x=x.replace(/\s*(?:=)?(\w+)\s*/,"$1")),x.length&&f.push(x);var Z=db(w[C++]);f.length>h.length&&h.push(Z)}return{type:g,mainBinding:y,cases:f,values:h}}function db(l){if(!l)return[];var w,f=0,h=[],g=[],y=/[{}]/g;for(y.lastIndex=0;w=y.exec(l);){var C=w.index;if("}"==w[0]){if(h.pop(),0==h.length){var x=l.substring(f,C);Cf.test(x)?g.push(EN(x)):g.push(x),f=C+1}}else{if(0==h.length){var Z=l.substring(f,C);g.push(Z),f=C+1}h.push("{")}}var K=l.substring(f);return g.push(K),g}function CN(l,f,h,g,y,w,C,x){var Z=[],K=[],ae=[];f.cases.push(w),f.create.push(Z),f.remove.push(K),f.update.push(ae);var ve=ee(zr()).getInertBodyElement(C),Se=cE(ve)||ve;return Se?vS(l,f,h,g,Z,K,ae,Se,y,x,0):0}function vS(l,f,h,g,y,w,C,x,Z,K,ae){for(var pe=0,ve=x.firstChild;ve;){var Se=Ps(l,h,1,null);switch(ve.nodeType){case Node.ELEMENT_NODE:var Ne=ve,at=Ne.tagName.toLowerCase();if(ba.hasOwnProperty(at)){Op(y,oy,at,Z,Se),l.data[Se]=at;for(var Et=Ne.attributes,cn=0;cn<Et.length;cn++){var It=Et.item(cn),xn=It.name.toLowerCase();It.value.match(fb)?oE.hasOwnProperty(xn)&&Yd(C,It.value,Se,It.name,0,Bv[xn]?bn:Od[xn]?or:null):J1(y,Se,It)}pe=vS(l,f,h,g,y,w,C,ve,Se,K,ae+1)|pe,Q1(w,Se,ae)}break;case Node.TEXT_NODE:var jr=ve.textContent||"",Mi=jr.match(fb);Op(y,null,Mi?"":jr,Z,Se),Q1(w,Se,ae),Mi&&(pe=Yd(C,jr,Se,null,0,null)|pe);break;case Node.COMMENT_NODE:var Pa=K1.exec(ve.textContent||"");if(Pa){var Ks=K[parseInt(Pa[1],10)];Op(y,xp,"",Z,Se),hb(l,h,g,Z,Ks,Se),Rp(w,Se,ae)}}ve=ve.nextSibling}return pe}function Q1(l,f,h){0===h&&l.push(f)}function Rp(l,f,h){0===h&&(l.push(~f),l.push(f))}function Op(l,f,h,g,y){null!==f&&l.push(f),l.push(h,y,function(l,f,h){return 0|f<<17|h<<1}(0,g,y))}function J1(l,f,h){l.push(f<<1|1,h.name,h.value)}var SN=/\[(\ufffd.+?\ufffd?)\]/,gS=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,TN=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,yS=/{([A-Z0-9_]+)}/g,MN=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,_S=/\/\*/,AN=/\d+\:(\d+)/;function bS(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=l;if(SN.test(l)){var g={},y=[0];h=h.replace(gS,function(w,C,x){var Z=C||x,K=g[Z]||[];if(K.length||(Z.split("|").forEach(function(cn){var It=cn.match(AN),xn=It?parseInt(It[1],10):0,Lr=_S.test(cn);K.push([xn,Lr,cn])}),g[Z]=K),!K.length)throw new Error("i18n postprocess: unmatched placeholder - ".concat(Z));for(var ae=y[y.length-1],pe=0,ve=0;ve<K.length;ve++)if(K[ve][0]===ae){pe=ve;break}var Se=(0,M.Z)(K[pe],3),Ne=Se[0],Et=Se[2];return Se[1]?y.pop():ae!==Ne&&y.push(Ne),K.splice(pe,1),Et})}return Object.keys(f).length&&(h=(h=(h=h.replace(TN,function(w,C,x,Z,K,ae){return f.hasOwnProperty(x)?"".concat(C).concat(f[x]).concat(ae):w})).replace(yS,function(w,C){return f.hasOwnProperty(C)?f[C]:w})).replace(MN,function(w,C){if(f.hasOwnProperty(C)){var x=f[C];if(!x.length)throw new Error("i18n postprocess: unmatched ICU - ".concat(w," with key: ").concat(C));return x.shift()}return w})),h}function qs(l,f){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,g=ei(),y=jt(),w=20+l,C=Is(g.consts,f),x=Tl();g.firstCreatePass&&vy(g,null===x?0:x.index,y,w,C,h);var Z=g.data[w],K=x===y[6]?null:x,ae=Sx(g,K,y),pe=x&&8&x.type?y[x.index]:null;Dp(y,Z.create,ae,pe),$f(!0)}function eI(){$f(!1)}function xN(l,f,h){qs(l,f,h),eI()}function IN(l,f){var h=ei();!function(l,f,h){var y=pa().index,w=[];if(l.firstCreatePass&&null===l.data[f]){for(var C=0;C<h.length;C+=2){var x=h[C],Z=h[C+1];if(""!==Z){if(gN.test(Z))throw new Error('ICU expressions are not supported in attributes. Message: "'.concat(Z,'".'));Yd(w,Z,y,x,wN(w),null)}}l.data[f]=w}}(h,l+20,Is(h.consts,f))}function tI(l){return function(l){l&&(Lc|=1<<Math.min(Ip,31)),Ip++}(os(jt(),_u(),l)),tI}function DN(l){!function(l,f,h){if(Ip>0){var g=l.data[h];Ef(l,f,Array.isArray(g)?g:g.update,ma()-Ip-1,Lc)}Lc=0,Ip=0}(ei(),jt(),l+20)}function RN(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bS(l,f)}function PN(l,f,h){var g=ei();if(g.firstCreatePass){var y=Ka(l);vb(h,g.data,g.blueprint,y,!0),vb(f,g.data,g.blueprint,y,!1)}}function vb(l,f,h,g,y){if(l=nn(l),Array.isArray(l))for(var w=0;w<l.length;w++)vb(l[w],f,h,g,y);else{var C=ei(),x=jt(),Z=mf(l)?l:nn(l.provide),K=t1(l),ae=pa(),pe=1048575&ae.providerIndexes,ve=ae.directiveStart,Se=ae.providerIndexes>>20;if(mf(l)||!l.multi){var Ne=new tu(K,y,mp),at=gb(Z,f,y?pe:pe+Se,ve);-1===at?(nu(Zo(ae,x),C,Z),pb(C,l,f.length),f.push(Z),ae.directiveStart++,ae.directiveEnd++,y&&(ae.providerIndexes+=1048576),h.push(Ne),x.push(Ne)):(h[at]=Ne,x[at]=Ne)}else{var Et=gb(Z,f,pe+Se,ve),cn=gb(Z,f,pe,pe+Se),xn=cn>=0&&h[cn];if(y&&!xn||!y&&!(Et>=0&&h[Et])){nu(Zo(ae,x),C,Z);var Lr=function(l,f,h,g,y){var w=new tu(l,h,mp);return w.multi=[],w.index=f,w.componentProviders=0,mb(w,y,g&&!h),w}(y?nI:wS,h.length,y,g,K);!y&&xn&&(h[cn].providerFactory=Lr),pb(C,l,f.length,0),f.push(Z),ae.directiveStart++,ae.directiveEnd++,y&&(ae.providerIndexes+=1048576),h.push(Lr),x.push(Lr)}else pb(C,l,Et>-1?Et:cn,mb(h[y?cn:Et],K,!y&&g));!y&&g&&xn&&h[cn].componentProviders++}}}function pb(l,f,h,g){var y=mf(f);if(y||function(l){return!!l.useClass}(f)){var C=(f.useClass||f).prototype.ngOnDestroy;if(C){var x=l.destroyHooks||(l.destroyHooks=[]);if(!y&&f.multi){var Z=x.indexOf(h);-1===Z?x.push(h,[g,C]):x[Z+1].push(g,C)}else x.push(h,C)}}}function mb(l,f,h){return h&&l.componentProviders++,l.multi.push(f)-1}function gb(l,f,h,g){for(var y=h;y<g;y++)if(f[y]===l)return y;return-1}function wS(l,f,h,g){return kS(this.multi,[])}function nI(l,f,h,g){var w,y=this.multi;if(this.providerFactory){var C=this.providerFactory.componentProviders,x=ul(h,h[1],this.providerFactory.index,g);kS(y,w=x.slice(0,C));for(var Z=C;Z<x.length;Z++)w.push(x[Z])}else kS(y,w=[]);return w}function kS(l,f){for(var h=0;h<l.length;h++)f.push((0,l[h])());return f}function yb(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(h){h.providersResolver=function(g,y){return PN(g,y?y(l):l,f)}}}var rI=function l(){(0,we.Z)(this,l)},iI=function l(){(0,we.Z)(this,l)},ON=function(){function l(){(0,we.Z)(this,l)}return(0,be.Z)(l,[{key:"resolveComponentFactory",value:function(h){throw function(l){var f=Error("No component factory found for ".concat(Qe(l),". Did you add it to @NgModule.entryComponents?"));return f.ngComponent=l,f}(h)}}]),l}(),Lp=function(){var l=function f(){(0,we.Z)(this,f)};return l.NULL=new ON,l}();function Np(){}function Fp(l,f){return new Kd(aa(l,f))}var NN=function(){return Fp(pa(),jt())},Kd=function(){var l=function f(h){(0,we.Z)(this,f),this.nativeElement=h};return l.__NG_ELEMENT_ID__=NN,l}();function Zp(l){return l instanceof Kd?l.nativeElement:l}var Sf=function l(){(0,we.Z)(this,l)},SS=function(){var l=function f(){(0,we.Z)(this,f)};return l.__NG_ELEMENT_ID__=function(){return TS()},l}(),TS=function(){var l=jt(),h=xs(pa().index,l);return function(l){return l[11]}(Za(h)?h:l)},gy=function(){var l=function f(){(0,we.Z)(this,f)};return l.\u0275prov=Br({token:l,providedIn:"root",factory:function(){return null}}),l}(),Tf=function l(f){(0,we.Z)(this,l),this.full=f,this.major=f.split(".")[0],this.minor=f.split(".")[1],this.patch=f.split(".").slice(2).join(".")},AS=new Tf("12.2.8"),cI=function(){function l(){(0,we.Z)(this,l)}return(0,be.Z)(l,[{key:"supports",value:function(h){return Jr(h)}},{key:"create",value:function(h){return new IS(h)}}]),l}(),xS=function(f,h){return h},IS=function(){function l(f){(0,we.Z)(this,l),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=f||xS}return(0,be.Z)(l,[{key:"forEachItem",value:function(h){var g;for(g=this._itHead;null!==g;g=g._next)h(g)}},{key:"forEachOperation",value:function(h){for(var g=this._itHead,y=this._removalsHead,w=0,C=null;g||y;){var x=!y||g&&g.currentIndex<wb(y,w,C)?g:y,Z=wb(x,w,C),K=x.currentIndex;if(x===y)w--,y=y._nextRemoved;else if(g=g._next,null==x.previousIndex)w++;else{C||(C=[]);var ae=Z-w,pe=K-w;if(ae!=pe){for(var ve=0;ve<ae;ve++){var Se=ve<C.length?C[ve]:C[ve]=0,Ne=Se+ve;pe<=Ne&&Ne<ae&&(C[ve]=Se+1)}C[x.previousIndex]=pe-ae}}Z!==K&&h(x,Z,K)}}},{key:"forEachPreviousItem",value:function(h){var g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)h(g)}},{key:"forEachAddedItem",value:function(h){var g;for(g=this._additionsHead;null!==g;g=g._nextAdded)h(g)}},{key:"forEachMovedItem",value:function(h){var g;for(g=this._movesHead;null!==g;g=g._nextMoved)h(g)}},{key:"forEachRemovedItem",value:function(h){var g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)h(g)}},{key:"forEachIdentityChange",value:function(h){var g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)h(g)}},{key:"diff",value:function(h){if(null==h&&(h=[]),!Jr(h))throw new Error("Error trying to diff '".concat(Qe(h),"'. Only arrays and iterables are allowed"));return this.check(h)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(h){var g=this;this._reset();var C,x,Z,y=this._itHead,w=!1;if(Array.isArray(h)){this.length=h.length;for(var K=0;K<this.length;K++)Z=this._trackByFn(K,x=h[K]),null!==y&&Object.is(y.trackById,Z)?(w&&(y=this._verifyReinsertion(y,x,Z,K)),Object.is(y.item,x)||this._addIdentityChange(y,x)):(y=this._mismatch(y,x,Z,K),w=!0),y=y._next}else C=0,function(l,f){if(Array.isArray(l))for(var h=0;h<l.length;h++)f(l[h]);else for(var y,g=l[io()]();!(y=g.next()).done;)f(y.value)}(h,function(ae){Z=g._trackByFn(C,ae),null!==y&&Object.is(y.trackById,Z)?(w&&(y=g._verifyReinsertion(y,ae,Z,C)),Object.is(y.item,ae)||g._addIdentityChange(y,ae)):(y=g._mismatch(y,ae,Z,C),w=!0),y=y._next,C++}),this.length=C;return this._truncate(y),this.collection=h,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var h;for(h=this._previousItHead=this._itHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._additionsHead;null!==h;h=h._nextAdded)h.previousIndex=h.currentIndex;for(this._additionsHead=this._additionsTail=null,h=this._movesHead;null!==h;h=h._nextMoved)h.previousIndex=h.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(h,g,y,w){var C;return null===h?C=this._itTail:(C=h._prev,this._remove(h)),null!==(h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null))?(Object.is(h.item,g)||this._addIdentityChange(h,g),this._reinsertAfter(h,C,w)):null!==(h=null===this._linkedRecords?null:this._linkedRecords.get(y,w))?(Object.is(h.item,g)||this._addIdentityChange(h,g),this._moveAfter(h,C,w)):h=this._addAfter(new FN(g,y),C,w),h}},{key:"_verifyReinsertion",value:function(h,g,y,w){var C=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null);return null!==C?h=this._reinsertAfter(C,h._prev,w):h.currentIndex!=w&&(h.currentIndex=w,this._addToMoves(h,w)),h}},{key:"_truncate",value:function(h){for(;null!==h;){var g=h._next;this._addToRemovals(this._unlink(h)),h=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(h,g,y){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(h);var w=h._prevRemoved,C=h._nextRemoved;return null===w?this._removalsHead=C:w._nextRemoved=C,null===C?this._removalsTail=w:C._prevRemoved=w,this._insertAfter(h,g,y),this._addToMoves(h,y),h}},{key:"_moveAfter",value:function(h,g,y){return this._unlink(h),this._insertAfter(h,g,y),this._addToMoves(h,y),h}},{key:"_addAfter",value:function(h,g,y){return this._insertAfter(h,g,y),this._additionsTail=null===this._additionsTail?this._additionsHead=h:this._additionsTail._nextAdded=h,h}},{key:"_insertAfter",value:function(h,g,y){var w=null===g?this._itHead:g._next;return h._next=w,h._prev=g,null===w?this._itTail=h:w._prev=h,null===g?this._itHead=h:g._next=h,null===this._linkedRecords&&(this._linkedRecords=new yy),this._linkedRecords.put(h),h.currentIndex=y,h}},{key:"_remove",value:function(h){return this._addToRemovals(this._unlink(h))}},{key:"_unlink",value:function(h){null!==this._linkedRecords&&this._linkedRecords.remove(h);var g=h._prev,y=h._next;return null===g?this._itHead=y:g._next=y,null===y?this._itTail=g:y._prev=g,h}},{key:"_addToMoves",value:function(h,g){return h.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=h:this._movesTail._nextMoved=h),h}},{key:"_addToRemovals",value:function(h){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yy),this._unlinkedRecords.put(h),h.currentIndex=null,h._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=h,h._prevRemoved=null):(h._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=h),h}},{key:"_addIdentityChange",value:function(h,g){return h.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=h:this._identityChangesTail._nextIdentityChange=h,h}}]),l}(),FN=function l(f,h){(0,we.Z)(this,l),this.item=f,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},DS=function(){function l(){(0,we.Z)(this,l),this._head=null,this._tail=null}return(0,be.Z)(l,[{key:"add",value:function(h){null===this._head?(this._head=this._tail=h,h._nextDup=null,h._prevDup=null):(this._tail._nextDup=h,h._prevDup=this._tail,h._nextDup=null,this._tail=h)}},{key:"get",value:function(h,g){var y;for(y=this._head;null!==y;y=y._nextDup)if((null===g||g<=y.currentIndex)&&Object.is(y.trackById,h))return y;return null}},{key:"remove",value:function(h){var g=h._prevDup,y=h._nextDup;return null===g?this._head=y:g._nextDup=y,null===y?this._tail=g:y._prevDup=g,null===this._head}}]),l}(),yy=function(){function l(){(0,we.Z)(this,l),this.map=new Map}return(0,be.Z)(l,[{key:"put",value:function(h){var g=h.trackById,y=this.map.get(g);y||(y=new DS,this.map.set(g,y)),y.add(h)}},{key:"get",value:function(h,g){var w=this.map.get(h);return w?w.get(h,g):null}},{key:"remove",value:function(h){var g=h.trackById;return this.map.get(g).remove(h)&&this.map.delete(g),h}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),l}();function wb(l,f,h){var g=l.previousIndex;if(null===g)return g;var y=0;return h&&g<h.length&&(y=h[g]),g+f+y}var RS=function(){function l(){(0,we.Z)(this,l)}return(0,be.Z)(l,[{key:"supports",value:function(h){return h instanceof Map||Go(h)}},{key:"create",value:function(){return new Bp}}]),l}(),Bp=function(){function l(){(0,we.Z)(this,l),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return(0,be.Z)(l,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(h){var g;for(g=this._mapHead;null!==g;g=g._next)h(g)}},{key:"forEachPreviousItem",value:function(h){var g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)h(g)}},{key:"forEachChangedItem",value:function(h){var g;for(g=this._changesHead;null!==g;g=g._nextChanged)h(g)}},{key:"forEachAddedItem",value:function(h){var g;for(g=this._additionsHead;null!==g;g=g._nextAdded)h(g)}},{key:"forEachRemovedItem",value:function(h){var g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)h(g)}},{key:"diff",value:function(h){if(h){if(!(h instanceof Map||Go(h)))throw new Error("Error trying to diff '".concat(Qe(h),"'. Only maps and objects are allowed"))}else h=new Map;return this.check(h)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(h){var g=this;this._reset();var y=this._mapHead;if(this._appendAfter=null,this._forEach(h,function(C,x){if(y&&y.key===x)g._maybeAddToChanges(y,C),g._appendAfter=y,y=y._next;else{var Z=g._getOrCreateRecordForKey(x,C);y=g._insertBeforeOrAppend(y,Z)}}),y){y._prev&&(y._prev._next=null),this._removalsHead=y;for(var w=y;null!==w;w=w._nextRemoved)w===this._mapHead&&(this._mapHead=null),this._records.delete(w.key),w._nextRemoved=w._next,w.previousValue=w.currentValue,w.currentValue=null,w._prev=null,w._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(h,g){if(h){var y=h._prev;return g._next=h,g._prev=y,h._prev=g,y&&(y._next=g),h===this._mapHead&&(this._mapHead=g),this._appendAfter=h,h}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}},{key:"_getOrCreateRecordForKey",value:function(h,g){if(this._records.has(h)){var y=this._records.get(h);this._maybeAddToChanges(y,g);var w=y._prev,C=y._next;return w&&(w._next=C),C&&(C._prev=w),y._next=null,y._prev=null,y}var x=new PS(h);return this._records.set(h,x),x.currentValue=g,this._addToAdditions(x),x}},{key:"_reset",value:function(){if(this.isDirty){var h;for(this._previousMapHead=this._mapHead,h=this._previousMapHead;null!==h;h=h._next)h._nextPrevious=h._next;for(h=this._changesHead;null!==h;h=h._nextChanged)h.previousValue=h.currentValue;for(h=this._additionsHead;null!=h;h=h._nextAdded)h.previousValue=h.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(h,g){Object.is(g,h.currentValue)||(h.previousValue=h.currentValue,h.currentValue=g,this._addToChanges(h))}},{key:"_addToAdditions",value:function(h){null===this._additionsHead?this._additionsHead=this._additionsTail=h:(this._additionsTail._nextAdded=h,this._additionsTail=h)}},{key:"_addToChanges",value:function(h){null===this._changesHead?this._changesHead=this._changesTail=h:(this._changesTail._nextChanged=h,this._changesTail=h)}},{key:"_forEach",value:function(h,g){h instanceof Map?h.forEach(g):Object.keys(h).forEach(function(y){return g(h[y],y)})}}]),l}(),PS=function l(f){(0,we.Z)(this,l),this.key=f,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function fI(){return new kb([new cI])}var kb=function(){var l=function(){function f(h){(0,we.Z)(this,f),this.factories=h}return(0,be.Z)(f,[{key:"find",value:function(g){var y=this.factories.find(function(w){return w.supports(g)});if(null!=y)return y;throw new Error("Cannot find a differ supporting object '".concat(g,"' of type '").concat(function(l){return l.name||typeof l}(g),"'"))}}],[{key:"create",value:function(g,y){if(null!=y){var w=y.factories.slice();g=g.concat(w)}return new f(g)}},{key:"extend",value:function(g){return{provide:f,useFactory:function(w){return f.create(g,w||fI())},deps:[[f,new Zu,new Fu]]}}}]),f}();return l.\u0275prov=Br({token:l,providedIn:"root",factory:fI}),l}();function OS(){return new Eb([new RS])}var Eb=function(){var l=function(){function f(h){(0,we.Z)(this,f),this.factories=h}return(0,be.Z)(f,[{key:"find",value:function(g){var y=this.factories.find(function(w){return w.supports(g)});if(y)return y;throw new Error("Cannot find a differ supporting object '".concat(g,"'"))}}],[{key:"create",value:function(g,y){if(y){var w=y.factories.slice();g=g.concat(w)}return new f(g)}},{key:"extend",value:function(g){return{provide:f,useFactory:function(w){return f.create(g,w||OS())},deps:[[f,new Zu,new Fu]]}}}]),f}();return l.\u0275prov=Br({token:l,providedIn:"root",factory:OS}),l}();function Up(l,f,h,g){for(var y=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==h;){var w=f[h.index];if(null!==w&&g.push(Mr(w)),Us(w))for(var C=10;C<w.length;C++){var x=w[C],Z=x[1].firstChild;null!==Z&&Up(x[1],x,Z,g)}var K=h.type;if(8&K)Up(l,f,h.child,g);else if(32&K)for(var ae=mh(h,f),pe=void 0;pe=ae();)g.push(pe);else if(16&K){var ve=Eg(f,h);if(Array.isArray(ve))g.push.apply(g,(0,ke.Z)(ve));else{var Se=Ji(f[16]);Up(Se[1],Se,ve,g,!0)}}h=y?h.projectionNext:h.next}return g}var _y=function(){function l(f,h){(0,we.Z)(this,l),this._lView=f,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}return(0,be.Z)(l,[{key:"rootNodes",get:function(){var h=this._lView,g=h[1];return Up(g,h,g.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(h){this._lView[8]=h}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var h=this._lView[3];if(Us(h)){var g=h[8],y=g?g.indexOf(this):-1;y>-1&&(xr(h,y),Pl(g,y))}this._attachedToViewContainer=!1}_g(this._lView[1],this._lView)}},{key:"onDestroy",value:function(h){FE(this._lView[1],this._lView,null,h)}},{key:"markForCheck",value:function(){zE(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){O0(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(l,f,h){vi(!0);try{O0(l,f,h)}finally{vi(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){this._appRef=null,function(l,f){Gs(l,f,f[11],2,null,null)}(this._lView[1],this._lView)}},{key:"attachToAppRef",value:function(h){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=h}}]),l}(),LS=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g){var y;return(0,we.Z)(this,h),(y=f.call(this,g))._view=g,y}return(0,be.Z)(h,[{key:"detectChanges",value:function(){GE(this._view)}},{key:"checkNoChanges",value:function(){!function(l){vi(!0);try{GE(l)}finally{vi(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),h}(_y),BN=function(l){return function(l,f,h){if(oc(l)&&!h){var g=xs(l.index,f);return new _y(g,g)}return 47&l.type?new _y(f[16],f):null}(pa(),jt(),16==(16&l))},NS=function(){var l=function f(){(0,we.Z)(this,f)};return l.__NG_ELEMENT_ID__=BN,l}(),Vp=[new RS],UN=new kb([new cI]),Hp=new Eb(Vp),Cb=function(){return zp(pa(),jt())},by=function(){var l=function f(){(0,we.Z)(this,f)};return l.__NG_ELEMENT_ID__=Cb,l}(),BS=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g,y,w){var C;return(0,we.Z)(this,h),(C=f.call(this))._declarationLView=g,C._declarationTContainer=y,C.elementRef=w,C}return(0,be.Z)(h,[{key:"createEmbeddedView",value:function(y){var w=this._declarationTContainer.tViews,C=qv(this._declarationLView,w,y,16,null,w.declTNode,null,null,null,null);C[17]=this._declarationLView[this._declarationTContainer.index];var Z=this._declarationLView[19];return null!==Z&&(C[19]=Z.createEmbeddedView(w)),Yv(w,C,y),new _y(C)}}]),h}(by);function zp(l,f){return 4&l.type?new BS(f,l,Fp(l,f)):null}var Fh=function l(){(0,we.Z)(this,l)},pI=function l(){(0,we.Z)(this,l)},VS=function(){return GS(pa(),jt())},Sb=function(){var l=function f(){(0,we.Z)(this,f)};return l.__NG_ELEMENT_ID__=VS,l}(),HS=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g,y,w){var C;return(0,we.Z)(this,h),(C=f.call(this))._lContainer=g,C._hostTNode=y,C._hostLView=w,C}return(0,be.Z)(h,[{key:"element",get:function(){return Fp(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new pc(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var y=Vs(this._hostTNode,this._hostLView);if(Hk(y)){var w=uf(y,this._hostLView),C=vc(y);return new pc(w[1].data[C+8],w)}return new pc(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(y){var w=zS(this._lContainer);return null!==w&&w[y]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(y,w,C){var x=y.createEmbeddedView(w||{});return this.insert(x,C),x}},{key:"createComponent",value:function(y,w,C,x,Z){var K=C||this.parentInjector;if(!Z&&null==y.ngModule&&K){var ae=K.get(Fh,null);ae&&(Z=ae)}var pe=y.create(K,x,void 0,Z);return this.insert(pe.hostView,w),pe}},{key:"insert",value:function(y,w){var C=y._lView,x=C[1];if(function(l){return Us(l[3])}(C)){var Z=this.indexOf(y);if(-1!==Z)this.detach(Z);else{var K=C[3],ae=new HS(K,K[6],K[3]);ae.detach(ae.indexOf(y))}}var pe=this._adjustIndex(w),ve=this._lContainer;!function(l,f,h,g){var y=10+g,w=h.length;g>0&&(h[y-1][4]=f),g<w-10?(f[4]=h[y],ih(h,10+g,f)):(h.push(f),f[4]=null),f[3]=h;var C=f[17];null!==C&&h!==C&&function(l,f){var h=l[9];f[16]!==f[3][3][16]&&(l[2]=!0),null===h?l[9]=[f]:h.push(f)}(C,f);var x=f[19];null!==x&&x.insertView(l),f[2]|=128}(x,C,ve,pe);var Se=c0(pe,ve),Ne=C[11],at=Rs(Ne,ve[7]);return null!==at&&function(l,f,h,g,y,w){g[0]=y,g[6]=f,Gs(l,g,h,1,y,w)}(x,ve[6],Ne,C,at,Se),y.attachToViewContainerRef(),ih(Tb(ve),pe,y),y}},{key:"move",value:function(y,w){return this.insert(y,w)}},{key:"indexOf",value:function(y){var w=zS(this._lContainer);return null!==w?w.indexOf(y):-1}},{key:"remove",value:function(y){var w=this._adjustIndex(y,-1),C=xr(this._lContainer,w);C&&(Pl(Tb(this._lContainer),w),_g(C[1],C))}},{key:"detach",value:function(y){var w=this._adjustIndex(y,-1),C=xr(this._lContainer,w);return C&&null!=Pl(Tb(this._lContainer),w)?new _y(C):null}},{key:"_adjustIndex",value:function(y){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==y?this.length+w:y}}]),h}(Sb);function zS(l){return l[8]}function Tb(l){return l[8]||(l[8]=[])}function GS(l,f){var h,g=f[l.index];if(Us(g))h=g;else{var y;if(8&l.type)y=Mr(g);else{var w=f[11];y=w.createComment("");var C=aa(l,f);Fd(w,Rs(w,C),y,function(l,f){return An(l)?l.nextSibling(f):f.nextSibling}(w,C),!1)}f[l.index]=h=$x(g,f,y,l),P0(f,h)}return new HS(h,l,f)}var Iy={},HI=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g){var y;return(0,we.Z)(this,h),(y=f.call(this)).ngModule=g,y}return(0,be.Z)(h,[{key:"resolveComponentFactory",value:function(y){var w=Pr(y);return new GI(w,this.ngModule)}}]),h}(Lp);function zI(l){var f=[];for(var h in l)l.hasOwnProperty(h)&&f.push({propName:l[h],templateName:h});return f}var pV=new Aa("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return _x}}),GI=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g,y){var w;return(0,we.Z)(this,h),(w=f.call(this)).componentDef=g,w.ngModule=y,w.componentType=g.type,w.selector=function(l){return l.map(TE).join(",")}(g.selectors),w.ngContentSelectors=g.ngContentSelectors?g.ngContentSelectors:[],w.isBoundToModule=!!y,w}return(0,be.Z)(h,[{key:"inputs",get:function(){return zI(this.componentDef.inputs)}},{key:"outputs",get:function(){return zI(this.componentDef.outputs)}},{key:"create",value:function(y,w,C,x){var It,xn,Z=(x=x||this.ngModule)?function(l,f){return{get:function(g,y,w){var C=l.get(g,Iy,w);return C!==Iy||y===Iy?C:f.get(g,y,w)}}}(y,x.injector):y,K=Z.get(Sf,$i),ae=Z.get(gy,null),pe=K.createRenderer(null,this.componentDef),ve=this.componentDef.selectors[0][0]||"div",Se=C?function(l,f,h){if(An(l))return l.selectRootElement(f,h===ra.ShadowDom);var y="string"==typeof f?l.querySelector(f):f;return y.textContent="",y}(pe,C,this.componentDef.encapsulation):gh(K.createRenderer(null,this.componentDef),ve,function(l){var f=l.toLowerCase();return"svg"===f?er:"math"===f?di:null}(ve)),Ne=this.componentDef.onPush?576:528,at=function(l,f){return{components:[],scheduler:l||_x,clean:Qx,playerHandler:f||null,flags:0}}(),Et=$v(0,null,null,1,0,null,null,null,null,null),cn=qv(null,Et,at,Ne,null,null,K,pe,ae,Z);No(cn);try{var Lr=function(l,f,h,g,y,w){var C=h[1];h[20]=l;var Z=Tc(C,20,2,"#host",null),K=Z.mergedAttrs=f.hostAttrs;null!==K&&(Zg(Z,K,!0),null!==l&&(yd(y,l,K),null!==Z.classes&&f0(y,l,Z.classes),null!==Z.styles&&bE(y,l,Z.styles)));var ae=g.createRenderer(l,f),pe=qv(h,Kv(f),null,f.onPush?64:16,h[20],Z,g,ae,w||null,null);return C.firstCreatePass&&(nu(Zo(Z,h),C,f.type),HE(C,Z),Ac(Z,h.length,1)),P0(h,pe),h[20]=pe}(Se,this.componentDef,cn,K,pe);if(Se)if(C)yd(pe,Se,["ng-version",AS.full]);else{var jr=function(l){for(var f=[],h=[],g=1,y=2;g<l.length;){var w=l[g];if("string"==typeof w)2===y?""!==w&&f.push(w,l[++g]):8===y&&h.push(w);else{if(!Nl(y))break;y=w}g++}return{attrs:f,classes:h}}(this.componentDef.selectors[0]),Mi=jr.attrs,Pa=jr.classes;Mi&&yd(pe,Se,Mi),Pa&&Pa.length>0&&f0(pe,Se,Pa.join(" "))}if(xn=Oo(Et,20),void 0!==w)for(var Ns=xn.projection=[],Ks=0;Ks<this.ngContentSelectors.length;Ks++){var Xl=w[Ks];Ns.push(null!=Xl?Array.from(Xl):null)}It=function(l,f,h,g,y){var w=h[1],C=function(l,f,h){var g=pa();l.firstCreatePass&&(h.providersResolver&&h.providersResolver(h),Og(l,g,f,Ps(l,f,1,null),h));var w=ul(f,l,g.directiveStart,g);Ho(w,f);var C=aa(g,f);return C&&Ho(C,f),w}(w,h,f);if(g.components.push(C),l[8]=C,y&&y.forEach(function(ae){return ae(C,f)}),f.contentQueries){var x=pa();f.contentQueries(1,C,x.directiveStart)}var Z=pa();return!w.firstCreatePass||null===f.hostBindings&&null===f.hostAttrs||(Ft(Z.index),M0(h[1],Z,0,Z.directiveStart,Z.directiveEnd,f),A0(f,C)),C}(Lr,this.componentDef,cn,at,[ar]),Yv(Et,cn,null)}finally{Ce()}return new mV(this.componentType,It,Fp(xn,cn),cn,xn)}}]),h}(iI),mV=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g,y,w,C,x){var Z;return(0,we.Z)(this,h),(Z=f.call(this)).location=w,Z._rootLView=C,Z._tNode=x,Z.instance=y,Z.hostView=Z.changeDetectorRef=new LS(C),Z.componentType=g,Z}return(0,be.Z)(h,[{key:"injector",get:function(){return new pc(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(y){this.hostView.onDestroy(y)}}]),h}(rI);function Vh(l,f,h,g){return Pi(function(){var y=l;if(null!==f)if(y.hasOwnProperty("decorators")&&void 0!==y.decorators){var w;(w=y.decorators).push.apply(w,(0,ke.Z)(f))}else y.decorators=f;null!==h&&(y.ctorParameters=h),null!==g&&(y.propDecorators=y.hasOwnProperty("propDecorators")&&void 0!==y.propDecorators?Object.assign(Object.assign({},y.propDecorators),g):g)})}var pl=new Map;var qI=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g,y){var w;(0,we.Z)(this,h),(w=f.call(this))._parent=y,w._bootstrapComponents=[],w.injector=(0,D.Z)(w),w.destroyCbs=[],w.componentFactoryResolver=new HI((0,D.Z)(w));var C=oa(g),x=function(l){return l[Ea]||null}(g);return x&&Rh(x),w._bootstrapComponents=Uu(C.bootstrap),w._r3Injector=e1(g,y,[{provide:Fh,useValue:(0,D.Z)(w)},{provide:Lp,useValue:w.componentFactoryResolver}],Qe(g)),w._r3Injector._resolveInjectorDefTypes(),w.instance=w.get(g),w}return(0,be.Z)(h,[{key:"get",value:function(y){var w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ls.THROW_IF_NOT_FOUND,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zn.Default;return y===Ls||y===Fh||y===F0?this:this._r3Injector.get(y,w,C)}},{key:"destroy",value:function(){var y=this._r3Injector;!y.destroyed&&y.destroy(),this.destroyCbs.forEach(function(w){return w()}),this.destroyCbs=null}},{key:"onDestroy",value:function(y){this.destroyCbs.push(y)}}]),h}(Fh),dT=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(g){var y;return(0,we.Z)(this,h),(y=f.call(this)).moduleType=g,null!==oa(g)&&function(l){var f=new Set;!function h(g){var y=oa(g,!0),w=y.id;null!==w&&(function(l,f,h){if(f&&f!==h)throw new Error("Duplicate module registered for ".concat(l," - ").concat(Qe(f)," vs ").concat(Qe(f.name)))}(w,pl.get(w),g),pl.set(w,g));var K,x=Uu(y.imports),Z=(0,Re.Z)(x);try{for(Z.s();!(K=Z.n()).done;){var ae=K.value;f.has(ae)||(f.add(ae),h(ae))}}catch(pe){Z.e(pe)}finally{Z.f()}}(l)}(g),y}return(0,be.Z)(h,[{key:"create",value:function(y){return new qI(this.moduleType,y)}}]),h}(pI);function Hh(l,f,h){var g=ns()+l,y=jt();return y[g]===Nr?Ar(y,g,h?f.call(h):f()):sp(y,g)}function Ub(l,f,h,g){return zh(jt(),ns(),l,f,h,g)}function vT(l,f,h,g,y){return gT(jt(),ns(),l,f,h,g,y)}function YI(l,f,h,g,y,w){return yT(jt(),ns(),l,f,h,g,y,w)}function vF(l,f,h,g,y,w,C){return Vb(jt(),ns(),l,f,h,g,y,w,C)}function pF(l,f,h,g,y,w,C,x){var Z=ns()+l,K=jt(),ae=Wr(K,Z,h,g,y,w);return os(K,Z+4,C)||ae?Ar(K,Z+5,x?f.call(x,h,g,y,w,C):f(h,g,y,w,C)):sp(K,Z+5)}function mF(l,f,h,g,y,w,C,x,Z){var K=ns()+l,ae=jt(),pe=Wr(ae,K,h,g,y,w);return Eh(ae,K+4,C,x)||pe?Ar(ae,K+6,Z?f.call(Z,h,g,y,w,C,x):f(h,g,y,w,C,x)):sp(ae,K+6)}function gF(l,f,h,g,y,w,C,x,Z,K){var ae=ns()+l,pe=jt(),ve=Wr(pe,ae,h,g,y,w);return Gg(pe,ae+4,C,x,Z)||ve?Ar(pe,ae+7,K?f.call(K,h,g,y,w,C,x,Z):f(h,g,y,w,C,x,Z)):sp(pe,ae+7)}function pT(l,f,h,g,y,w,C,x,Z,K,ae){var pe=ns()+l,ve=jt(),Se=Wr(ve,pe,h,g,y,w);return Wr(ve,pe+4,C,x,Z,K)||Se?Ar(ve,pe+8,ae?f.call(ae,h,g,y,w,C,x,Z,K):f(h,g,y,w,C,x,Z,K)):sp(ve,pe+8)}function mT(l,f,h,g){return Hb(jt(),ns(),l,f,h,g)}function Kp(l,f){var h=l[f];return h===Nr?void 0:h}function zh(l,f,h,g,y,w){var C=f+h;return os(l,C,y)?Ar(l,C+1,w?g.call(w,y):g(y)):Kp(l,C+1)}function gT(l,f,h,g,y,w,C){var x=f+h;return Eh(l,x,y,w)?Ar(l,x+2,C?g.call(C,y,w):g(y,w)):Kp(l,x+2)}function yT(l,f,h,g,y,w,C,x){var Z=f+h;return Gg(l,Z,y,w,C)?Ar(l,Z+3,x?g.call(x,y,w,C):g(y,w,C)):Kp(l,Z+3)}function Vb(l,f,h,g,y,w,C,x,Z){var K=f+h;return Wr(l,K,y,w,C,x)?Ar(l,K+4,Z?g.call(Z,y,w,C,x):g(y,w,C,x)):Kp(l,K+4)}function Hb(l,f,h,g,y,w){for(var C=f+h,x=!1,Z=0;Z<y.length;Z++)os(l,C++,y[Z])&&(x=!0);return x?Ar(l,C,g.apply(w,y)):Kp(l,C)}function yF(l,f){var g,h=ei(),y=l+20;h.firstCreatePass?(g=function(l,f){if(f)for(var h=f.length-1;h>=0;h--){var g=f[h];if(l===g.name)return g}throw new Ct("302","The pipe '".concat(l,"' could not be found!"))}(f,h.pipeRegistry),h.data[y]=g,g.onDestroy&&(h.destroyHooks||(h.destroyHooks=[])).push(y,g.onDestroy)):g=h.data[y];var w=g.factory||(g.factory=ie(g.type)),C=Qr(mp);try{var x=tg(!1),Z=w();return tg(x),function(l,f,h,g){h>=l.data.length&&(l.data[h]=null,l.blueprint[h]=null),f[h]=g}(h,jt(),y,Z),Z}finally{Qr(C)}}function zb(l,f,h){var g=l+20,y=jt(),w=sa(y,g);return Yu(y,ql(y,g)?zh(y,ns(),f,w.transform,h,w):w.transform(h))}function KI(l,f,h,g){var y=l+20,w=jt(),C=sa(w,y);return Yu(w,ql(w,y)?gT(w,ns(),f,C.transform,h,g,C):C.transform(h,g))}function Dy(l,f,h,g,y){var w=l+20,C=jt(),x=sa(C,w);return Yu(C,ql(C,w)?yT(C,ns(),f,x.transform,h,g,y,x):x.transform(h,g,y))}function _F(l,f,h,g,y,w){var C=l+20,x=jt(),Z=sa(x,C);return Yu(x,ql(x,C)?Vb(x,ns(),f,Z.transform,h,g,y,w,Z):Z.transform(h,g,y,w))}function Gb(l,f,h){var g=l+20,y=jt(),w=sa(y,g);return Yu(y,ql(y,g)?Hb(y,ns(),f,w.transform,h,w):w.transform.apply(w,h))}function ql(l,f){return l[1].data[f].pure}function Yu(l,f){return kh.isWrapped(f)&&(f=kh.unwrap(f),l[ma()]=Nr),f}function Nc(l){return function(f){setTimeout(l,void 0,f)}}var Fc=function(l){(0,ne.Z)(h,l);var f=(0,Oe.Z)(h);function h(){var g,y=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,we.Z)(this,h),(g=f.call(this)).__isAsync=y,g}return(0,be.Z)(h,[{key:"emit",value:function(y){(0,_e.Z)((0,de.Z)(h.prototype),"next",this).call(this,y)}},{key:"subscribe",value:function(y,w,C){var x,Z,K,ae=y,pe=w||function(){return null},ve=C;if(y&&"object"==typeof y){var Se=y;ae=null===(x=Se.next)||void 0===x?void 0:x.bind(Se),pe=null===(Z=Se.error)||void 0===Z?void 0:Z.bind(Se),ve=null===(K=Se.complete)||void 0===K?void 0:K.bind(Se)}this.__isAsync&&(pe=Nc(pe),ae&&(ae=Nc(ae)),ve&&(ve=Nc(ve)));var Ne=(0,_e.Z)((0,de.Z)(h.prototype),"subscribe",this).call(this,{next:ae,error:pe,complete:ve});return y instanceof fe.w&&y.add(Ne),Ne}}]),h}(Ae.xQ);function $I(){return this._results[io()]()}var jb=function(){function l(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,we.Z)(this,l),this._emitDistinctChangesOnly=f,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var h=io(),g=l.prototype;g[h]||(g[h]=$I)}return(0,be.Z)(l,[{key:"changes",get:function(){return this._changes||(this._changes=new Fc)}},{key:"get",value:function(h){return this._results[h]}},{key:"map",value:function(h){return this._results.map(h)}},{key:"filter",value:function(h){return this._results.filter(h)}},{key:"find",value:function(h){return this._results.find(h)}},{key:"reduce",value:function(h,g){return this._results.reduce(h,g)}},{key:"forEach",value:function(h){this._results.forEach(h)}},{key:"some",value:function(h){return this._results.some(h)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(h,g){var y=this;y.dirty=!1;var w=go(h);(this._changesDetected=!function(l,f,h){if(l.length!==f.length)return!1;for(var g=0;g<l.length;g++){var y=l[g],w=f[g];if(h&&(y=h(y),w=h(w)),w!==y)return!1}return!0}(y._results,w,g))&&(y._results=w,y.length=w.length,y.last=w[this.length-1],y.first=w[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),l}();Symbol;var bF=function(){function l(f){(0,we.Z)(this,l),this.queryList=f,this.matches=null}return(0,be.Z)(l,[{key:"clone",value:function(){return new l(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),l}(),wF=function(){function l(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,we.Z)(this,l),this.queries=f}return(0,be.Z)(l,[{key:"createEmbeddedView",value:function(h){var g=h.queries;if(null!==g){for(var y=null!==h.contentQueries?h.contentQueries[0]:g.length,w=[],C=0;C<y;C++){var x=g.getByIndex(C);w.push(this.queries[x.indexInDeclarationView].clone())}return new l(w)}return null}},{key:"insertView",value:function(h){this.dirtyQueriesWithMatches(h)}},{key:"detachView",value:function(h){this.dirtyQueriesWithMatches(h)}},{key:"dirtyQueriesWithMatches",value:function(h){for(var g=0;g<this.queries.length;g++)null!==ST(h,g).matches&&this.queries[g].setDirty()}}]),l}(),XI=function l(f,h){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,we.Z)(this,l),this.predicate=f,this.flags=h,this.read=g},QI=function(){function l(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,we.Z)(this,l),this.queries=f}return(0,be.Z)(l,[{key:"elementStart",value:function(h,g){for(var y=0;y<this.queries.length;y++)this.queries[y].elementStart(h,g)}},{key:"elementEnd",value:function(h){for(var g=0;g<this.queries.length;g++)this.queries[g].elementEnd(h)}},{key:"embeddedTView",value:function(h){for(var g=null,y=0;y<this.length;y++){var w=null!==g?g.length:0,C=this.getByIndex(y).embeddedTView(h,w);C&&(C.indexInDeclarationView=y,null!==g?g.push(C):g=[C])}return null!==g?new l(g):null}},{key:"template",value:function(h,g){for(var y=0;y<this.queries.length;y++)this.queries[y].template(h,g)}},{key:"getByIndex",value:function(h){return this.queries[h]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(h){this.queries.push(h)}}]),l}(),kF=function(){function l(f){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,we.Z)(this,l),this.metadata=f,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}return(0,be.Z)(l,[{key:"elementStart",value:function(h,g){this.isApplyingToNode(g)&&this.matchTNode(h,g)}},{key:"elementEnd",value:function(h){this._declarationNodeIndex===h.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(h,g){this.elementStart(h,g)}},{key:"embeddedTView",value:function(h,g){return this.isApplyingToNode(h)?(this.crossesNgTemplate=!0,this.addMatch(-h.index,g),new l(this.metadata)):null}},{key:"isApplyingToNode",value:function(h){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var g=this._declarationNodeIndex,y=h.parent;null!==y&&8&y.type&&y.index!==g;)y=y.parent;return g===(null!==y?y.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(h,g){var y=this.metadata.predicate;if(Array.isArray(y))for(var w=0;w<y.length;w++){var C=y[w];this.matchTNodeWithReadOption(h,g,EF(g,C)),this.matchTNodeWithReadOption(h,g,bd(g,h,C,!1,!1))}else y===by?4&g.type&&this.matchTNodeWithReadOption(h,g,-1):this.matchTNodeWithReadOption(h,g,bd(g,h,y,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(h,g,y){if(null!==y){var w=this.metadata.read;if(null!==w)if(w===Kd||w===Sb||w===by&&4&g.type)this.addMatch(g.index,-2);else{var C=bd(g,h,w,!1,!1);null!==C&&this.addMatch(g.index,C)}else this.addMatch(g.index,y)}}},{key:"addMatch",value:function(h,g){null===this.matches?this.matches=[h,g]:this.matches.push(h,g)}}]),l}();function EF(l,f){var h=l.localNames;if(null!==h)for(var g=0;g<h.length;g+=2)if(h[g]===f)return h[g+1];return null}function CF(l,f,h,g){return-1===h?function(l,f){return 11&l.type?Fp(l,f):4&l.type?zp(l,f):null}(f,l):-2===h?function(l,f,h){return h===Kd?Fp(f,l):h===by?zp(f,l):h===Sb?GS(f,l):void 0}(l,f,g):ul(l,l[1],h,f)}function bT(l,f,h,g){var y=f[19].queries[g];if(null===y.matches){for(var w=l.data,C=h.matches,x=[],Z=0;Z<C.length;Z+=2){var K=C[Z];x.push(K<0?null:CF(f,w[K],C[Z+1],h.metadata.read))}y.matches=x}return y.matches}function wT(l,f,h,g){var y=l.queries.getByIndex(h),w=y.matches;if(null!==w)for(var C=bT(l,f,y,h),x=0;x<w.length;x+=2){var Z=w[x];if(Z>0)g.push(C[x/2]);else{for(var K=w[x+1],ae=f[-Z],pe=10;pe<ae.length;pe++){var ve=ae[pe];ve[17]===ve[3]&&wT(ve[1],ve,K,g)}if(null!==ae[9])for(var Se=ae[9],Ne=0;Ne<Se.length;Ne++){var at=Se[Ne];wT(at[1],at,K,g)}}}return g}function eD(l){var f=jt(),h=ei(),g=Qf();Il(g+1);var y=ST(h,g);if(l.dirty&&il(f)===(2==(2&y.metadata.flags))){if(null===y.matches)l.reset([]);else{var w=y.crossesNgTemplate?wT(h,f,g,[]):bT(h,f,y,g);l.reset(w,Zp),l.notifyOnChanges()}return!0}return!1}function kT(l,f,h){var g=ei();g.firstCreatePass&&(Oy(g,new XI(l,f,h),-1),2==(2&f)&&(g.staticViewQueries=!0)),Wb(g,jt(),f)}function ET(l,f,h,g){var y=ei();if(y.firstCreatePass){var w=pa();Oy(y,new XI(f,h,g),w.index),function(l,f){var h=l.contentQueries||(l.contentQueries=[]);f!==(h.length?h[h.length-1]:-1)&&h.push(l.queries.length-1,f)}(y,l),2==(2&h)&&(y.staticContentQueries=!0)}Wb(y,jt(),h)}function CT(){return l=jt(),f=Qf(),l[19].queries[f].queryList;var l,f}function Wb(l,f,h){var g=new jb(4==(4&h));FE(l,f,g,g.destroy),null===f[19]&&(f[19]=new wF),f[19].queries.push(new bF(g))}function Oy(l,f,h){null===l.queries&&(l.queries=new QI),l.queries.track(new kF(f,h))}function ST(l,f){return l.queries.getByIndex(f)}function jh(l,f){return zp(l,f)}var bs=function(){return{"\u0275\u0275attribute":aC,"\u0275\u0275attributeInterpolate1":sC,"\u0275\u0275attributeInterpolate2":lp,"\u0275\u0275attributeInterpolate3":Sh,"\u0275\u0275attributeInterpolate4":jg,"\u0275\u0275attributeInterpolate5":oC,"\u0275\u0275attributeInterpolate6":fr,"\u0275\u0275attributeInterpolate7":Th,"\u0275\u0275attributeInterpolate8":Ul,"\u0275\u0275attributeInterpolateV":cp,"\u0275\u0275defineComponent":He,"\u0275\u0275defineDirective":Ci,"\u0275\u0275defineInjectable":Br,"\u0275\u0275defineInjector":Zs,"\u0275\u0275defineNgModule":pn,"\u0275\u0275definePipe":fs,"\u0275\u0275directiveInject":mp,"\u0275\u0275getInheritedFactory":wd,"\u0275\u0275inject":xa,"\u0275\u0275injectAttribute":Iv,"\u0275\u0275invalidFactory":X0,"\u0275\u0275invalidFactoryDep":Nv,"\u0275\u0275templateRefExtractor":jh,"\u0275\u0275NgOnChangesFeature":me,"\u0275\u0275ProvidersFeature":yb,"\u0275\u0275CopyDefinitionFeature":VL,"\u0275\u0275InheritDefinitionFeature":En,"\u0275\u0275nextContext":IC,"\u0275\u0275namespaceHTML":Yn,"\u0275\u0275namespaceMathML":Rn,"\u0275\u0275namespaceSVG":mn,"\u0275\u0275enableBindings":Yf,"\u0275\u0275disableBindings":Sl,"\u0275\u0275elementStart":Mh,"\u0275\u0275elementEnd":_f,"\u0275\u0275element":MC,"\u0275\u0275elementContainerStart":jd,"\u0275\u0275elementContainerEnd":AC,"\u0275\u0275elementContainer":T1,"\u0275\u0275pureFunction0":Hh,"\u0275\u0275pureFunction1":Ub,"\u0275\u0275pureFunction2":vT,"\u0275\u0275pureFunction3":YI,"\u0275\u0275pureFunction4":vF,"\u0275\u0275pureFunction5":pF,"\u0275\u0275pureFunction6":mF,"\u0275\u0275pureFunction7":gF,"\u0275\u0275pureFunction8":pT,"\u0275\u0275pureFunctionV":mT,"\u0275\u0275getCurrentView":yp,"\u0275\u0275restoreView":nf,"\u0275\u0275listener":_p,"\u0275\u0275projection":DC,"\u0275\u0275syntheticHostProperty":ln,"\u0275\u0275syntheticHostListener":bp,"\u0275\u0275pipeBind1":zb,"\u0275\u0275pipeBind2":KI,"\u0275\u0275pipeBind3":Dy,"\u0275\u0275pipeBind4":_F,"\u0275\u0275pipeBindV":Gb,"\u0275\u0275projectionDef":bf,"\u0275\u0275hostProperty":sb,"\u0275\u0275property":SC,"\u0275\u0275propertyInterpolate":eb,"\u0275\u0275propertyInterpolate1":Qg,"\u0275\u0275propertyInterpolate2":wp,"\u0275\u0275propertyInterpolate3":tb,"\u0275\u0275propertyInterpolate4":x1,"\u0275\u0275propertyInterpolate5":_s,"\u0275\u0275propertyInterpolate6":wi,"\u0275\u0275propertyInterpolate7":RC,"\u0275\u0275propertyInterpolate8":PC,"\u0275\u0275propertyInterpolateV":Co,"\u0275\u0275pipe":yF,"\u0275\u0275queryRefresh":eD,"\u0275\u0275viewQuery":kT,"\u0275\u0275loadQuery":CT,"\u0275\u0275contentQuery":ET,"\u0275\u0275reference":W0,"\u0275\u0275classMap":nN,"\u0275\u0275classMapInterpolate1":Ep,"\u0275\u0275classMapInterpolate2":rN,"\u0275\u0275classMapInterpolate3":iN,"\u0275\u0275classMapInterpolate4":aN,"\u0275\u0275classMapInterpolate5":V1,"\u0275\u0275classMapInterpolate6":Hl,"\u0275\u0275classMapInterpolate7":sN,"\u0275\u0275classMapInterpolate8":H1,"\u0275\u0275classMapInterpolateV":kf,"\u0275\u0275styleMap":Vl,"\u0275\u0275styleMapInterpolate1":oN,"\u0275\u0275styleMapInterpolate2":zl,"\u0275\u0275styleMapInterpolate3":Cp,"\u0275\u0275styleMapInterpolate4":Da,"\u0275\u0275styleMapInterpolate5":ju,"\u0275\u0275styleMapInterpolate6":uN,"\u0275\u0275styleMapInterpolate7":lN,"\u0275\u0275styleMapInterpolate8":us,"\u0275\u0275styleMapInterpolateV":xh,"\u0275\u0275styleProp":VC,"\u0275\u0275stylePropInterpolate1":uu,"\u0275\u0275stylePropInterpolate2":oo,"\u0275\u0275stylePropInterpolate3":vl,"\u0275\u0275stylePropInterpolate4":Sp,"\u0275\u0275stylePropInterpolate5":Ih,"\u0275\u0275stylePropInterpolate6":iy,"\u0275\u0275stylePropInterpolate7":ay,"\u0275\u0275stylePropInterpolate8":z1,"\u0275\u0275stylePropInterpolateV":$C,"\u0275\u0275classProp":nb,"\u0275\u0275advance":wo,"\u0275\u0275template":uC,"\u0275\u0275text":F1,"\u0275\u0275textInterpolate":ab,"\u0275\u0275textInterpolate1":ry,"\u0275\u0275textInterpolate2":WC,"\u0275\u0275textInterpolate3":Z1,"\u0275\u0275textInterpolate4":qC,"\u0275\u0275textInterpolate5":YC,"\u0275\u0275textInterpolate6":KC,"\u0275\u0275textInterpolate7":B1,"\u0275\u0275textInterpolate8":U1,"\u0275\u0275textInterpolateV":Wd,"\u0275\u0275i18n":xN,"\u0275\u0275i18nAttributes":IN,"\u0275\u0275i18nExp":tI,"\u0275\u0275i18nStart":qs,"\u0275\u0275i18nEnd":eI,"\u0275\u0275i18nApply":DN,"\u0275\u0275i18nPostprocess":RN,"\u0275\u0275resolveWindow":hE,"\u0275\u0275resolveDocument":a0,"\u0275\u0275resolveBody":au,"\u0275\u0275setComponentScope":ht,"\u0275\u0275setNgModuleScope":$n,"\u0275\u0275sanitizeHtml":XO,"\u0275\u0275sanitizeStyle":nx,"\u0275\u0275sanitizeResourceUrl":X_,"\u0275\u0275sanitizeScript":Q_,"\u0275\u0275sanitizeUrl":gg,"\u0275\u0275sanitizeUrlOrResourceUrl":eL,"\u0275\u0275trustConstantHtml":fE,"\u0275\u0275trustConstantResourceUrl":QO,forwardRef:vn,resolveForwardRef:nn}}(),Ly=[];function nD(l,f){Ly.push({moduleType:l,ngModule:f})}function DF(l,f){var g=go(f.declarations||yn),y=null;Object.defineProperty(l,Ki,{configurable:!0,get:function(){if(null===y){var Z=vs();(y=Z.compileNgModule(bs,"ng:///".concat(l.name,"/\u0275mod.js"),{type:l,bootstrap:go(f.bootstrap||yn).map(nn),declarations:g.map(nn),imports:go(f.imports||yn).map(nn).map(uD),exports:go(f.exports||yn).map(nn).map(uD),schemas:f.schemas?go(f.schemas):null,id:f.id||null})).schemas||(y.schemas=[])}return y}});var w=null;Object.defineProperty(l,ct,{get:function(){if(null===w){var Z=vs();w=Z.compileFactory(bs,"ng:///".concat(l.name,"/\u0275fac.js"),{name:l.name,type:l,deps:Fv(l),target:Z.FactoryTarget.NgModule,typeArgumentCount:0})}return w},configurable:!1});var C=null;Object.defineProperty(l,qa,{get:function(){if(null===C){var Z={name:l.name,type:l,providers:f.providers||yn,imports:[(f.imports||yn).map(nn),(f.exports||yn).map(nn)]},K=vs();C=K.compileInjector(bs,"ng:///".concat(l.name,"/\u0275inj.js"),Z)}return C},configurable:!1})}function uD(l){return function(l){return void 0!==l.ngModule}(l)?l.ngModule:l}var ml=Hs("NgModule",function(f){return f},void 0,void 0,function(f,h){return WF(f,h)}),WF=function(l){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};DF(l,f),nD(l,f)},NT=new Aa("Application Initializer"),ev=function(){var l=function(){function f(h){var g=this;(0,we.Z)(this,f),this.appInits=h,this.resolve=Np,this.reject=Np,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(y,w){g.resolve=y,g.reject=w})}return(0,be.Z)(f,[{key:"runInitializers",value:function(){var g=this;if(!this.initialized){var y=[],w=function(){g.done=!0,g.resolve()};if(this.appInits)for(var C=function(K){var ae=g.appInits[K]();if(xC(ae))y.push(ae);else if(so(ae)){var pe=new Promise(function(ve,Se){ae.subscribe({complete:ve,error:Se})});y.push(pe)}},x=0;x<this.appInits.length;x++)C(x);Promise.all(y).then(function(){w()}).catch(function(Z){g.reject(Z)}),0===y.length&&w(),this.initialized=!0}}}]),f}();return l.\u0275fac=function(h){return new(h||l)(xa(NT,8))},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}(),gD=new Aa("AppId"),YF={provide:gD,useFactory:function(){return"".concat(ew()).concat(ew()).concat(ew())},deps:[]};function ew(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Yh=new Aa("Platform Initializer"),FT=new Aa("Platform ID"),tw=new Aa("appBootstrapListener"),_D=function(){var l=function(){function f(){(0,we.Z)(this,f)}return(0,be.Z)(f,[{key:"log",value:function(g){console.log(g)}},{key:"warn",value:function(g){console.warn(g)}}]),f}();return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}(),Xp=new Aa("LocaleId"),nw=new Aa("DefaultCurrencyCode"),KF=function l(f,h){(0,we.Z)(this,l),this.ngModuleFactory=f,this.componentFactories=h},BT=function(f){return new dT(f)},UT=BT,XF=function(f){return Promise.resolve(BT(f))},TD=function(f){var h=BT(f),y=Uu(oa(f).declarations).reduce(function(w,C){var x=Pr(C);return x&&w.push(new GI(x)),w},[]);return new KF(h,y)},MD=TD,JF=function(f){return Promise.resolve(TD(f))},Qp=function(){var l=function(){function f(){(0,we.Z)(this,f),this.compileModuleSync=UT,this.compileModuleAsync=XF,this.compileModuleAndAllComponentsSync=MD,this.compileModuleAndAllComponentsAsync=JF}return(0,be.Z)(f,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(g){}},{key:"getModuleId",value:function(g){}}]),f}();return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}(),tZ=function(){return Promise.resolve(0)}();function rw(l){"undefined"==typeof Zone?tZ.then(function(){l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}var Zc=function(){function l(f){var h=f.enableLongStackTrace,g=void 0!==h&&h,y=f.shouldCoalesceEventChangeDetection,w=void 0!==y&&y,C=f.shouldCoalesceRunChangeDetection,x=void 0!==C&&C;if((0,we.Z)(this,l),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fc(!1),this.onMicrotaskEmpty=new Fc(!1),this.onStable=new Fc(!1),this.onError=new Fc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var Z=this;Z._nesting=0,Z._outer=Z._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(Z._inner=Z._inner.fork(new Zone.TaskTrackingZoneSpec)),g&&Zone.longStackTraceZoneSpec&&(Z._inner=Z._inner.fork(Zone.longStackTraceZoneSpec)),Z.shouldCoalesceEventChangeDetection=!x&&w,Z.shouldCoalesceRunChangeDetection=x,Z.lastRequestAnimationFrameId=-1,Z.nativeRequestAnimationFrame=function(){var l=ot.requestAnimationFrame,f=ot.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&f){var h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h);var g=f[Zone.__symbol__("OriginalDelegate")];g&&(f=g)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:f}}().nativeRequestAnimationFrame,function(l){var f=function(){!function(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(ot,function(){l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){l.lastRequestAnimationFrameId=-1,em(l),l.isCheckStableRunning=!0,Jp(l),l.isCheckStableRunning=!1},void 0,function(){},function(){})),l.fakeTopEventTask.invoke()}),em(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(g,y,w,C,x,Z){try{return zT(l),g.invokeTask(w,C,x,Z)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===C.type||l.shouldCoalesceRunChangeDetection)&&f(),$h(l)}},onInvoke:function(g,y,w,C,x,Z,K){try{return zT(l),g.invoke(w,C,x,Z,K)}finally{l.shouldCoalesceRunChangeDetection&&f(),$h(l)}},onHasTask:function(g,y,w,C){g.hasTask(w,C),y===w&&("microTask"==C.change?(l._hasPendingMicrotasks=C.microTask,em(l),Jp(l)):"macroTask"==C.change&&(l.hasPendingMacrotasks=C.macroTask))},onHandleError:function(g,y,w,C){return g.handleError(w,C),l.runOutsideAngular(function(){return l.onError.emit(C)}),!1}})}(Z)}return(0,be.Z)(l,[{key:"run",value:function(h,g,y){return this._inner.run(h,g,y)}},{key:"runTask",value:function(h,g,y,w){var C=this._inner,x=C.scheduleEventTask("NgZoneEvent: "+w,h,wa,Np,Np);try{return C.runTask(x,g,y)}finally{C.cancelTask(x)}}},{key:"runGuarded",value:function(h,g,y){return this._inner.runGuarded(h,g,y)}},{key:"runOutsideAngular",value:function(h){return this._outer.run(h)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!l.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(l.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),l}(),wa={};function Jp(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(function(){return l.onStable.emit(null)})}finally{l.isStable=!0}}}function em(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function zT(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function $h(l){l._nesting--,Jp(l)}var Kl=function(){function l(){(0,we.Z)(this,l),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fc,this.onMicrotaskEmpty=new Fc,this.onStable=new Fc,this.onError=new Fc}return(0,be.Z)(l,[{key:"run",value:function(h,g,y){return h.apply(g,y)}},{key:"runGuarded",value:function(h,g,y){return h.apply(g,y)}},{key:"runOutsideAngular",value:function(h){return h()}},{key:"runTask",value:function(h,g,y,w){return h.apply(g,y)}}]),l}(),DD=function(){var l=function(){function f(h){var g=this;(0,we.Z)(this,f),this._ngZone=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),h.run(function(){g.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return(0,be.Z)(f,[{key:"_watchAngularEvents",value:function(){var g=this;this._ngZone.onUnstable.subscribe({next:function(){g._didWork=!0,g._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){g._ngZone.onStable.subscribe({next:function(){Zc.assertNotInAngularZone(),rw(function(){g._isZoneStable=!0,g._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var g=this;if(this.isStable())rw(function(){for(;0!==g._callbacks.length;){var w=g._callbacks.pop();clearTimeout(w.timeoutId),w.doneCb(g._didWork)}g._didWork=!1});else{var y=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(w){return!w.updateCb||!w.updateCb(y)||(clearTimeout(w.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(g){return{source:g.source,creationLocation:g.creationLocation,data:g.data}}):[]}},{key:"addCallback",value:function(g,y,w){var C=this,x=-1;y&&y>0&&(x=setTimeout(function(){C._callbacks=C._callbacks.filter(function(Z){return Z.timeoutId!==x}),g(C._didWork,C.getPendingTasks())},y)),this._callbacks.push({doneCb:g,timeoutId:x,updateCb:w})}},{key:"whenStable",value:function(g,y,w){if(w&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,y,w),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(g,y,w){return[]}}]),f}();return l.\u0275fac=function(h){return new(h||l)(xa(Zc))},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}(),GT=function(){var l=function(){function f(){(0,we.Z)(this,f),this._applications=new Map,jT.addToWindow(this)}return(0,be.Z)(f,[{key:"registerApplication",value:function(g,y){this._applications.set(g,y)}},{key:"unregisterApplication",value:function(g){this._applications.delete(g)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(g){return this._applications.get(g)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(g){var y=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return jT.findTestabilityInTree(this,g,y)}}]),f}();return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}();function iZ(l){jT=l}var jT=new(function(){function l(){(0,we.Z)(this,l)}return(0,be.Z)(l,[{key:"addToWindow",value:function(h){}},{key:"findTestabilityInTree",value:function(h,g,y){return null}}]),l}()),iw=!0,Df=!1;function aw(){return Df=!0,iw}function Ko(){if(Df)throw new Error("Cannot enable prod mode after platform setup.");iw=!1}var lo,aZ=function(l,f,h){var g=new dT(h);return Promise.resolve(g)},RD=new Aa("AllowMultipleToken"),tv=function l(f,h){(0,we.Z)(this,l),this.name=f,this.token=h};function PD(l){if(lo&&!lo.destroyed&&!lo.injector.get(RD,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");lo=l.get(qT);var f=l.get(Yh,null);return f&&f.forEach(function(h){return h()}),lo}function WT(l,f){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],g="Platform: ".concat(f),y=new Aa(g);return function(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],C=LD();if(!C||C.injector.get(RD,!1))if(l)l(h.concat(w).concat({provide:y,useValue:!0}));else{var x=h.concat(w).concat({provide:y,useValue:!0},{provide:pf,useValue:"platform"});PD(Ls.create({providers:x,name:g}))}return OD(y)}}function OD(l){var f=LD();if(!f)throw new Error("No platform exists!");if(!f.injector.get(l,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return f}function LD(){return lo&&!lo.destroyed?lo:null}var qT=function(){var l=function(){function f(h){(0,we.Z)(this,f),this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return(0,be.Z)(f,[{key:"bootstrapModuleFactory",value:function(g,y){var w=this,K=function(l,f){return"noop"===l?new Kl:("zone.js"===l?void 0:l)||new Zc({enableLongStackTrace:aw(),shouldCoalesceEventChangeDetection:!!(null==f?void 0:f.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==f?void 0:f.ngZoneRunCoalescing)})}(y?y.ngZone:void 0,{ngZoneEventCoalescing:y&&y.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:y&&y.ngZoneRunCoalescing||!1}),ae=[{provide:Zc,useValue:K}];return K.run(function(){var pe=Ls.create({providers:ae,parent:w.injector,name:g.moduleType.name}),ve=g.create(pe),Se=ve.injector.get(iu,null);if(!Se)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return K.runOutsideAngular(function(){var Ne=K.onError.subscribe({next:function(Et){Se.handleError(Et)}});ve.onDestroy(function(){sw(w._modules,ve),Ne.unsubscribe()})}),function(l,f,h){try{var g=((Ne=ve.injector.get(ev)).runInitializers(),Ne.donePromise.then(function(){return Rh(ve.injector.get(Xp,sy)||sy),w._moduleDoBootstrap(ve),ve}));return xC(g)?g.catch(function(y){throw f.runOutsideAngular(function(){return l.handleError(y)}),y}):g}catch(y){throw f.runOutsideAngular(function(){return l.handleError(y)}),y}var Ne}(Se,K)})}},{key:"bootstrapModule",value:function(g){var y=this,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],C=ND({},w);return aZ(0,0,g).then(function(x){return y.bootstrapModuleFactory(x,C)})}},{key:"_moduleDoBootstrap",value:function(g){var y=g.injector.get(nv);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(function(w){return y.bootstrap(w)});else{if(!g.instance.ngDoBootstrap)throw new Error("The module ".concat(Qe(g.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");g.instance.ngDoBootstrap(y)}this._modules.push(g)}},{key:"onDestroy",value:function(g){this._destroyListeners.push(g)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(g){return g.destroy()}),this._destroyListeners.forEach(function(g){return g()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),f}();return l.\u0275fac=function(h){return new(h||l)(xa(Ls))},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}();function ND(l,f){return Array.isArray(f)?f.reduce(ND,l):Object.assign(Object.assign({},l),f)}var nv=function(){var l=function(){function f(h,g,y,w,C){var x=this;(0,we.Z)(this,f),this._zone=h,this._injector=g,this._exceptionHandler=y,this._componentFactoryResolver=w,this._initStatus=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){x._zone.run(function(){x.tick()})}});var Z=new Le.y(function(ae){x._stable=x._zone.isStable&&!x._zone.hasPendingMacrotasks&&!x._zone.hasPendingMicrotasks,x._zone.runOutsideAngular(function(){ae.next(x._stable),ae.complete()})}),K=new Le.y(function(ae){var pe;x._zone.runOutsideAngular(function(){pe=x._zone.onStable.subscribe(function(){Zc.assertNotInAngularZone(),rw(function(){!x._stable&&!x._zone.hasPendingMacrotasks&&!x._zone.hasPendingMicrotasks&&(x._stable=!0,ae.next(!0))})})});var ve=x._zone.onUnstable.subscribe(function(){Zc.assertInAngularZone(),x._stable&&(x._stable=!1,x._zone.runOutsideAngular(function(){ae.next(!1)}))});return function(){pe.unsubscribe(),ve.unsubscribe()}});this.isStable=(0,We.T)(Z,K.pipe((0,qe.B)()))}return(0,be.Z)(f,[{key:"bootstrap",value:function(g,y){var C,w=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");C=g instanceof iI?g:this._componentFactoryResolver.resolveComponentFactory(g),this.componentTypes.push(C.componentType);var x=function(l){return l.isBoundToModule}(C)?void 0:this._injector.get(Fh),K=C.create(Ls.NULL,[],y||C.selector,x),ae=K.location.nativeElement,pe=K.injector.get(DD,null),ve=pe&&K.injector.get(GT);return pe&&ve&&ve.registerApplication(ae,pe),K.onDestroy(function(){w.detachView(K.hostView),sw(w.components,K),ve&&ve.unregisterApplication(ae)}),this._loadComponent(K),K}},{key:"tick",value:function(){var g=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var w,y=(0,Re.Z)(this._views);try{for(y.s();!(w=y.n()).done;)w.value.detectChanges()}catch(ae){y.e(ae)}finally{y.f()}}catch(ae){this._zone.runOutsideAngular(function(){return g._exceptionHandler.handleError(ae)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(g){var y=g;this._views.push(y),y.attachToAppRef(this)}},{key:"detachView",value:function(g){var y=g;sw(this._views,y),y.detachFromAppRef()}},{key:"_loadComponent",value:function(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(tw,[]).concat(this._bootstrapListeners).forEach(function(w){return w(g)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(g){return g.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),f}();return l.\u0275fac=function(h){return new(h||l)(xa(Zc),xa(Ls),xa(iu),xa(Lp),xa(ev))},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}();function sw(l,f){var h=l.indexOf(f);h>-1&&l.splice(h,1)}var $T=function l(){(0,we.Z)(this,l)},ZD=function l(){(0,we.Z)(this,l)},IV={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},DV=function(){var l=function(){function f(h,g){(0,we.Z)(this,f),this._compiler=h,this._config=g||IV}return(0,be.Z)(f,[{key:"load",value:function(g){return this.loadAndCompile(g)}},{key:"loadAndCompile",value:function(g){var y=this,w=g.split("#"),C=(0,M.Z)(w,2),x=C[0],Z=C[1];return void 0===Z&&(Z="default"),J(8255)(x).then(function(K){return K[Z]}).then(function(K){return BD(K,x,Z)}).then(function(K){return y._compiler.compileModuleAsync(K)})}},{key:"loadFactory",value:function(g){var y=g.split("#"),w=(0,M.Z)(y,2),C=w[0],x=w[1],Z="NgFactory";return void 0===x&&(x="default",Z=""),J(8255)(this._config.factoryPathPrefix+C+this._config.factoryPathSuffix).then(function(K){return K[x+Z]}).then(function(K){return BD(K,C,x)})}}]),f}();return l.\u0275fac=function(h){return new(h||l)(xa(Qp),xa(ZD,8))},l.\u0275prov=Br({token:l,factory:l.\u0275fac}),l}();function BD(l,f,h){if(!l)throw new Error("Cannot find '".concat(h,"' in '").concat(f,"'"));return l}var pZ=function(l){return null},uw=WT(null,"core",[{provide:FT,useValue:"unknown"},{provide:qT,deps:[Ls]},{provide:GT,deps:[]},{provide:_D,deps:[]}]),gZ=[{provide:nv,useClass:nv,deps:[Zc,Ls,iu,Lp,ev]},{provide:pV,deps:[Zc],useFactory:function(l){var f=[];return l.onStable.subscribe(function(){for(;f.length;)f.pop()()}),function(h){f.push(h)}}},{provide:ev,useClass:ev,deps:[[new Fu,NT]]},{provide:Qp,useClass:Qp,deps:[]},YF,{provide:kb,useFactory:function(){return UN},deps:[]},{provide:Eb,useFactory:function(){return Hp},deps:[]},{provide:Xp,useFactory:function(l){return Rh(l=l||"undefined"!=typeof $localize&&$localize.locale||sy),l},deps:[[new Vo(Xp),new Fu,new Zu]]},{provide:nw,useValue:"USD"}],GD=function(){var l=function f(h){(0,we.Z)(this,f)};return l.\u0275fac=function(h){return new(h||l)(xa(nv))},l.\u0275mod=pn({type:l}),l.\u0275inj=Zs({providers:gZ}),l}()},9748:function(rn,mt,J){"use strict";J.d(mt,{hO:function(){return Ae},xv:function(){return ne},Dh:function(){return we},GT:function(){return v},on:function(){return Oe},pX:function(){return ke}});var _e=J(7289),de=J(5134),D=J(6837),M=J(5366),S=J(9001),re=J(5271);rn=J.hmd(rn);var Re=["ngOnDestroy"],ke=function(We,qe,Be){var st=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(We,{get:function(Y,dn){return Be.runOutsideAngular(function(){var vn;if(We[dn])return(null===(vn=null==st?void 0:st.spy)||void 0===vn?void 0:vn.get)&&st.spy.get(dn,We[dn]),We[dn];if(Re.indexOf(dn)>-1)return function(){};var nn=qe.toPromise().then(function(xt){var Ot=xt&&xt[dn];return"function"==typeof Ot?Ot.bind(xt):Ot&&Ot.then?Ot.then(function(Ct){return Be.run(function(){return Ct})}):Be.run(function(){return Ot})});return new Proxy(function(){},{get:function(Ot,Ct){return nn[Ct]},apply:function(Ot,Ct,Zt){return nn.then(function(z){var k,B=z&&z.apply(void 0,(0,D.Z)(Zt));return(null===(k=null==st?void 0:st.spy)||void 0===k?void 0:k.apply)&&st.spy.apply(dn,Zt,B),B})}})})}})},v=function(We,qe){qe.forEach(function(Be){Object.getOwnPropertyNames(Be.prototype||Be).forEach(function(st){Object.defineProperty(We.prototype,st,Object.getOwnPropertyDescriptor(Be.prototype||Be,st))})})},be=function Le(We){return(0,de.Z)(this,Le),We},we=new M.OlP("angularfire2.app.options"),ne=new M.OlP("angularfire2.app.name");function Oe(Le,We,qe){var st="object"==typeof qe&&qe||{};st.name=st.name||"string"==typeof qe&&qe||"[DEFAULT]";var Y=S.Z.apps.filter(function(vn){return vn&&vn.name===st.name})[0]||We.runOutsideAngular(function(){return S.Z.initializeApp(Le,st)});try{if(JSON.stringify(Le)!==JSON.stringify(Y.options)){var dn=!!rn.hot;Q("error","".concat(Y.name," Firebase App already initialized with different options").concat(dn?", you may need to reload as Firebase is not HMR aware.":"."))}}catch(vn){}return new be(Y)}var Q=function(We){if((0,M.X6Q)()&&"undefined"!=typeof console){for(var qe,Be=arguments.length,st=new Array(Be>1?Be-1:0),Qe=1;Qe<Be;Qe++)st[Qe-1]=arguments[Qe];(qe=console)[We].apply(qe,st)}},fe={provide:be,useFactory:Oe,deps:[we,M.R0b,[new M.FiY,ne]]},Ae=function(){var Le=function(){function We(qe){(0,de.Z)(this,We),S.Z.registerVersion("angularfire",re.q4.full,"core"),S.Z.registerVersion("angularfire",re.q4.full,"app-compat"),S.Z.registerVersion("angular",M.q4F.full,qe.toString())}return(0,_e.Z)(We,null,[{key:"initializeApp",value:function(Be,st){return{ngModule:We,providers:[{provide:we,useValue:Be},{provide:ne,useValue:st}]}}}]),We}();return Le.\u0275fac=function(qe){return new(qe||Le)(M.LFG(M.Lbi))},Le.\u0275mod=M.oAB({type:Le}),Le.\u0275inj=M.cJS({providers:[fe]}),Le}()},5271:function(rn,mt,J){"use strict";J.d(mt,{q4:function(){return Q},iC:function(){return z},HU:function(){return vn},cc:function(){return Le}});var _e=J(5134),de=J(7289),D=J(3740),M=J(5366);(0,J(7092).registerVersion)("firebase","9.1.1","app");var ke=J(8489),v=J(8569),be=J(6599),we=J(3482),ne=J(45);rn=J.hmd(rn);var Q=new M.GfV("7.0.4"),fe=!!rn.hot,Ae=function(Ie){if((0,M.X6Q)()&&"undefined"!=typeof console){for(var nt,_t=arguments.length,rt=new Array(_t>1?_t-1:0),Vt=1;Vt<_t;Vt++)rt[Vt-1]=arguments[Vt];(nt=console)[Ie].apply(nt,rt)}};function Le(ge,Ie,nt,_t,rt){var Vt=globalThis.\u0275AngularfireInstanceCache.find(function(Bi){return Bi[0]===ge})||[],Fn=(0,D.Z)(Vt,3),rr=Fn[1],Vr=Fn[2];if(rr)return function(ge,Ie){try{return ge.toString()===Ie.toString()}catch(nt){return ge===Ie}}(rt,Vr)||(Ae("error","".concat(Ie," was already initialized on the ").concat(nt," Firebase App with different settings.").concat(fe?" You may need to reload as Firebase is not HMR aware.":"")),Ae("warn",{is:rt,was:Vr})),rr;var ii=_t();return globalThis.\u0275AngularfireInstanceCache.push([ge,ii,rt]),ii}function Qe(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);var Y=function(){function ge(Ie){var nt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke.N;(0,_e.Z)(this,ge),this.zone=Ie,this.delegate=nt}return(0,de.Z)(ge,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(nt,_t,rt){var Vt=this.zone;return this.delegate.schedule(function(Vr){var ii=this;Vt.runGuarded(function(){nt.apply(ii,[Vr])})},_t,rt)}}]),ge}(),dn=function(){function ge(Ie){(0,_e.Z)(this,ge),this.zone=Ie,this.task=null}return(0,de.Z)(ge,[{key:"call",value:function(nt,_t){var rt=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",Qe,{},Qe,Qe)}),_t.pipe((0,be.b)({next:rt,complete:rt,error:rt})).subscribe(nt).add(rt)}},{key:"unscheduleTask",value:function(){var nt=this;setTimeout(function(){null!=nt.task&&"scheduled"===nt.task.state&&(nt.task.invoke(),nt.task=null)},10)}}]),ge}(),vn=function(){var ge=function Ie(nt){(0,_e.Z)(this,Ie),this.ngZone=nt,this.outsideAngular=nt.runOutsideAngular(function(){return new Y(Zone.current)}),this.insideAngular=nt.run(function(){return new Y(Zone.current,v.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)};return ge.\u0275fac=function(nt){return new(nt||ge)(M.LFG(M.R0b))},ge.\u0275prov=M.Yz7({token:ge,factory:ge.\u0275fac,providedIn:"root"}),ge}();function nn(){var ge=globalThis.\u0275AngularFireScheduler;if(!ge)throw new Error("AngularFireModule has not been provided");return ge}function z(ge){return nn(),function(ge){return function(nt){return(nt=nt.lift(new dn(ge.ngZone))).pipe((0,we.R)(ge.outsideAngular),(0,ne.QV)(ge.insideAngular))}}(nn())(ge)}},1932:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return Be}});var ke,_e=J(3512),de=J(5134),D=J(7289),M=J(5725),S=J(5119),re=J(7092),Re=J(2134),v=function(){function st(Qe,Y){var dn=this;(0,de.Z)(this,st),this._delegate=Qe,this.firebase=Y,(0,re._addComponent)(Qe,new S.wA("app-compat",function(){return dn},"PUBLIC")),this.container=Qe.container}return(0,D.Z)(st,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(Y){this._delegate.automaticDataCollectionEnabled=Y}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var Y=this;return new Promise(function(dn){Y._delegate.checkDestroyed(),dn()}).then(function(){return Y.firebase.INTERNAL.removeApp(Y.name),(0,re.deleteApp)(Y._delegate)})}},{key:"_getService",value:function(Y){var vn,dn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var nn=this._delegate.container.getProvider(Y);return!nn.isInitialized()&&"EXPLICIT"===(null===(vn=nn.getComponent())||void 0===vn?void 0:vn.instantiationMode)&&nn.initialize(),nn.getImmediate({identifier:dn})}},{key:"_removeServiceInstance",value:function(Y){var dn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:re._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(Y).clearInstance(dn)}},{key:"_addComponent",value:function(Y){(0,re._addComponent)(this._delegate,Y)}},{key:"_addOrOverwriteComponent",value:function(Y){(0,re._addOrOverwriteComponent)(this._delegate,Y)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),st}(),be=((0,_e.Z)(ke={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,_e.Z)(ke,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ke),we=new M.LL("app-compat","Firebase",be),Q=function Oe(){var st=function(st){var Qe={},Y={__esModule:!0,initializeApp:function(Zt){var k=re.initializeApp(Zt,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if((0,M.r3)(Qe,k.name))return Qe[k.name];var B=new st(k,Y);return Qe[k.name]=B,B},app:vn,registerVersion:re.registerVersion,setLogLevel:re.setLogLevel,onLog:re.onLog,apps:null,SDK_VERSION:re.SDK_VERSION,INTERNAL:{registerComponent:function(Zt){var z=Zt.name,k=z.replace("-compat","");if(re._registerComponent(Zt)&&"PUBLIC"===Zt.type){var B=function(){var ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn();if("function"!=typeof ge[k])throw we.create("invalid-app-argument",{appName:z});return ge[k]()};void 0!==Zt.serviceProps&&(0,M.ZB)(B,Zt.serviceProps),Y[k]=B,st.prototype[k]=function(){for(var X=this._getService.bind(this,z),ge=arguments.length,Ie=new Array(ge),nt=0;nt<ge;nt++)Ie[nt]=arguments[nt];return X.apply(this,Zt.multipleInstances?Ie:[])}}return"PUBLIC"===Zt.type?Y[k]:null},removeApp:function(Zt){delete Qe[Zt]},useAsService:function(Zt,z){return"serverAuth"===z?null:z},modularAPIs:re}};function vn(Zt){if(!(0,M.r3)(Qe,Zt=Zt||re._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Zt});return Qe[Zt]}return Y.default=Y,Object.defineProperty(Y,"apps",{get:function(){return Object.keys(Qe).map(function(Zt){return Qe[Zt]})}}),vn.App=st,Y}(v);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:Oe,extendNamespace:function(Y){(0,M.ZB)(st,Y)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),st}(),fe=new Re.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Be=Q;(0,re.registerVersion)("@firebase/app-compat","0.1.3",undefined)},7092:function(rn,mt,J){"use strict";J.r(mt),J.d(mt,{FirebaseError:function(){return be.ZR},SDK_VERSION:function(){return Br},_DEFAULT_ENTRY_NAME:function(){return Vr},_addComponent:function(){return mu},_addOrOverwriteComponent:function(){return rc},_apps:function(){return Bi},_clearComponents:function(){return mr},_components:function(){return Ri},_getProvider:function(){return ja},_registerComponent:function(){return Io},_removeServiceInstance:function(){return si},deleteApp:function(){return Ts},getApp:function(){return Zs},getApps:function(){return Wa},initializeApp:function(){return ha},onLog:function(){return Hi},registerVersion:function(){return Bs},setLogLevel:function(){return qi}});var we,ne,_e=J(8239),de=J(6054),D=J(3512),M=J(5134),S=J(7289),re=J(8774),Re=J.n(re),ke=J(5119),v=J(2134),be=J(5725),Oe=function(){function sr(Kn){(0,M.Z)(this,sr),this.container=Kn}return(0,S.Z)(sr,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(Hr){if(function(sr){var Kn=sr.getComponent();return"VERSION"===(null==Kn?void 0:Kn.type)}(Hr)){var Yr=Hr.getImmediate();return"".concat(Yr.library,"/").concat(Yr.version)}return null}).filter(function(Hr){return Hr}).join(" ")}}]),sr}(),fe="@firebase/app",Le=new v.Yd("@firebase/app"),Vr="[DEFAULT]",ii=((0,D.Z)(we={},fe,"fire-core"),(0,D.Z)(we,"@firebase/app-compat","fire-core-compat"),(0,D.Z)(we,"@firebase/analytics","fire-analytics"),(0,D.Z)(we,"@firebase/analytics-compat","fire-analytics-compat"),(0,D.Z)(we,"@firebase/app-check","fire-app-check"),(0,D.Z)(we,"@firebase/app-check-compat","fire-app-check-compat"),(0,D.Z)(we,"@firebase/auth","fire-auth"),(0,D.Z)(we,"@firebase/auth-compat","fire-auth-compat"),(0,D.Z)(we,"@firebase/database","fire-rtdb"),(0,D.Z)(we,"@firebase/database-compat","fire-rtdb-compat"),(0,D.Z)(we,"@firebase/functions","fire-fn"),(0,D.Z)(we,"@firebase/functions-compat","fire-fn-compat"),(0,D.Z)(we,"@firebase/installations","fire-iid"),(0,D.Z)(we,"@firebase/installations-compat","fire-iid-compat"),(0,D.Z)(we,"@firebase/messaging","fire-fcm"),(0,D.Z)(we,"@firebase/messaging-compat","fire-fcm-compat"),(0,D.Z)(we,"@firebase/performance","fire-perf"),(0,D.Z)(we,"@firebase/performance-compat","fire-perf-compat"),(0,D.Z)(we,"@firebase/remote-config","fire-rc"),(0,D.Z)(we,"@firebase/remote-config-compat","fire-rc-compat"),(0,D.Z)(we,"@firebase/storage","fire-gcs"),(0,D.Z)(we,"@firebase/storage-compat","fire-gcs-compat"),(0,D.Z)(we,"@firebase/firestore","fire-fst"),(0,D.Z)(we,"@firebase/firestore-compat","fire-fst-compat"),(0,D.Z)(we,"fire-js","fire-js"),(0,D.Z)(we,"firebase","fire-js-all"),we),Bi=new Map,Ri=new Map;function mu(sr,Kn){try{sr.container.addComponent(Kn)}catch(Zn){Le.debug("Component ".concat(Kn.name," failed to register with FirebaseApp ").concat(sr.name),Zn)}}function rc(sr,Kn){sr.container.addOrOverwriteComponent(Kn)}function Io(sr){var Kn=sr.name;if(Ri.has(Kn))return Le.debug("There were multiple attempts to register component ".concat(Kn,".")),!1;Ri.set(Kn,sr);var Hr,Zn=(0,de.Z)(Bi.values());try{for(Zn.s();!(Hr=Zn.n()).done;)mu(Hr.value,sr)}catch(Qr){Zn.e(Qr)}finally{Zn.f()}return!0}function ja(sr,Kn){return sr.container.getProvider(Kn)}function si(sr,Kn){var Zn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vr;ja(sr,Kn).clearInstance(Zn)}function mr(){Ri.clear()}var Wn=((0,D.Z)(ne={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,D.Z)(ne,"bad-app-name","Illegal App name: '{$appName}"),(0,D.Z)(ne,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,D.Z)(ne,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,D.Z)(ne,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,D.Z)(ne,"invalid-log-argument","First argument to `onLog` must be null or a function."),ne),fa=new be.LL("app","Firebase",Wn),ic=function(){function sr(Kn,Zn,Hr){var Yr=this;(0,M.Z)(this,sr),this._isDeleted=!1,this._options=Object.assign({},Kn),this._config=Object.assign({},Zn),this._name=Zn.name,this._automaticDataCollectionEnabled=Zn.automaticDataCollectionEnabled,this._container=Hr,this.container.addComponent(new ke.wA("app",function(){return Yr},"PUBLIC"))}return(0,S.Z)(sr,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(Zn){this.checkDestroyed(),this._automaticDataCollectionEnabled=Zn}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(Zn){this._isDeleted=Zn}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw fa.create("app-deleted",{appName:this._name})}}]),sr}(),Br="9.1.1";function ha(sr){var Kn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof Kn){var Zn=Kn;Kn={name:Zn}}var Hr=Object.assign({name:Vr,automaticDataCollectionEnabled:!1},Kn),Yr=Hr.name;if("string"!=typeof Yr||!Yr)throw fa.create("bad-app-name",{appName:String(Yr)});var Qr=Bi.get(Yr);if(Qr){if((0,be.vZ)(sr,Qr.options)&&(0,be.vZ)(Hr,Qr.config))return Qr;throw fa.create("duplicate-app",{appName:Yr})}var Pi,br=new ke.H0(Yr),qn=(0,de.Z)(Ri.values());try{for(qn.s();!(Pi=qn.n()).done;){var Ja=Pi.value;br.addComponent(Ja)}}catch(Do){qn.e(Do)}finally{qn.f()}var Ms=new ic(sr,Hr,br);return Bi.set(Yr,Ms),Ms}function Zs(){var sr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr,Kn=Bi.get(sr);if(!Kn)throw fa.create("no-app",{appName:sr});return Kn}function Wa(){return Array.from(Bi.values())}function Ts(sr){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,_e.Z)(Re().mark(function sr(Kn){var Zn;return Re().wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:if(!Bi.has(Zn=Kn.name)){Yr.next=6;break}return Bi.delete(Zn),Yr.next=5,Promise.all(Kn.container.getProviders().map(function(Qr){return Qr.delete()}));case 5:Kn.isDeleted=!0;case 6:case"end":return Yr.stop()}},sr)}))).apply(this,arguments)}function Bs(sr,Kn,Zn){var Hr,Yr=null!==(Hr=ii[sr])&&void 0!==Hr?Hr:sr;Zn&&(Yr+="-".concat(Zn));var Qr=Yr.match(/\s|\//),br=Kn.match(/\s|\//);if(Qr||br){var qn=['Unable to register library "'.concat(Yr,'" with version "').concat(Kn,'":')];return Qr&&qn.push('library name "'.concat(Yr,'" contains illegal characters (whitespace or "/")')),Qr&&br&&qn.push("and"),br&&qn.push('version name "'.concat(Kn,'" contains illegal characters (whitespace or "/")')),void Le.warn(qn.join(" "))}Io(new ke.wA("".concat(Yr,"-version"),function(){return{library:Yr,version:Kn}},"VERSION"))}function Hi(sr,Kn){if(null!==sr&&"function"!=typeof sr)throw fa.create("invalid-log-argument");(0,v.Am)(sr,Kn)}function qi(sr){(0,v.Ub)(sr)}Io(new ke.wA("platform-logger",function(Kn){return new Oe(Kn)},"PRIVATE")),Bs(fe,"0.7.2",undefined),Bs("fire-js","")},282:function(rn,mt,J){"use strict";J.d(mt,{$:function(){return Cl},A:function(){return vn},E:function(){return Sa},G:function(){return wr},I:function(){return kl},K:function(){return He},L:function(){return Mv},M:function(){return V},N:function(){return q},P:function(){return vs},Q:function(){return ie},R:function(){return Yk},T:function(){return A},V:function(){return Xe},W:function(){return Jt},X:function(){return yu},Y:function(){return Po},Z:function(){return sa},_:function(){return Si},a:function(){return Uk},a0:function(){return Wf},a1:function(){return fc},a2:function(){return Sl},a3:function(){return ei},a4:function(){return pa},a5:function(){return Tl},a6:function(){return ts},a7:function(){return rf},a8:function(){return S_},a9:function(){return ns},aA:function(){return fh},aB:function(){return N_},aC:function(){return bi},aG:function(){return eh},aJ:function(){return me},aa:function(){return Lo},ab:function(){return bu},ae:function(){return Al},af:function(){return Xf},ag:function(){return Qf},aj:function(){return po},ak:function(){return it},am:function(){return Ui},an:function(){return ds},ao:function(){return Ya},ap:function(){return Fn},aq:function(){return _i},ar:function(){return Ci},as:function(){return X},at:function(){return Rd},au:function(){return hh},av:function(){return ge},aw:function(){return rt},ax:function(){return Vr},ay:function(){return ht},az:function(){return xa},b:function(){return Bk},c:function(){return Bo},d:function(){return Ed},e:function(){return Ov},f:function(){return Td},g:function(){return wc},h:function(){return F_},i:function(){return Wk},j:function(){return $k},k:function(){return pg},l:function(){return O_},m:function(){return Ec},o:function(){return Qe},r:function(){return L_},s:function(){return R_},u:function(){return kd},z:function(){return Ot}});var Be,_e=J(7528),de=J(9187),D=J(6518),M=J(1885),S=J(9727),re=J(6054),Re=J(3740),ke=J(8239),v=J(5134),be=J(7289),we=J(6837),ne=J(3512),Oe=J(8774),Q=J.n(Oe),fe=J(5725),Ae=J(7092),Le=J(4762),We=J(2134),qe=J(5119),Qe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},vn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function xt(){return(0,ne.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ot=function(){var L;return(0,ne.Z)(L={},"admin-restricted-operation","This operation is restricted to administrators only."),(0,ne.Z)(L,"argument-error",""),(0,ne.Z)(L,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,ne.Z)(L,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,ne.Z)(L,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,ne.Z)(L,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,ne.Z)(L,"cordova-not-ready","Cordova framework is not ready."),(0,ne.Z)(L,"cors-unsupported","This browser is not supported."),(0,ne.Z)(L,"credential-already-in-use","This credential is already associated with a different user account."),(0,ne.Z)(L,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,ne.Z)(L,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,ne.Z)(L,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,ne.Z)(L,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,ne.Z)(L,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,ne.Z)(L,"email-already-in-use","The email address is already in use by another account."),(0,ne.Z)(L,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,ne.Z)(L,"expired-action-code","The action code has expired."),(0,ne.Z)(L,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,ne.Z)(L,"internal-error","An internal AuthError has occurred."),(0,ne.Z)(L,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,ne.Z)(L,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,ne.Z)(L,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,ne.Z)(L,"invalid-auth-event","An internal AuthError has occurred."),(0,ne.Z)(L,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,ne.Z)(L,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,ne.Z)(L,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,ne.Z)(L,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,ne.Z)(L,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,ne.Z)(L,"invalid-email","The email address is badly formatted."),(0,ne.Z)(L,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,ne.Z)(L,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,ne.Z)(L,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,ne.Z)(L,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,ne.Z)(L,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,ne.Z)(L,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,ne.Z)(L,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,ne.Z)(L,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,ne.Z)(L,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,ne.Z)(L,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,ne.Z)(L,"wrong-password","The password is invalid or the user does not have a password."),(0,ne.Z)(L,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,ne.Z)(L,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,ne.Z)(L,"invalid-provider-id","The specified provider ID is invalid."),(0,ne.Z)(L,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,ne.Z)(L,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,ne.Z)(L,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,ne.Z)(L,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,ne.Z)(L,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,ne.Z)(L,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,ne.Z)(L,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,ne.Z)(L,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,ne.Z)(L,"missing-continue-uri","A continue URL must be provided in the request."),(0,ne.Z)(L,"missing-iframe-start","An internal AuthError has occurred."),(0,ne.Z)(L,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,ne.Z)(L,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,ne.Z)(L,"missing-multi-factor-info","No second factor identifier is provided."),(0,ne.Z)(L,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,ne.Z)(L,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,ne.Z)(L,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,ne.Z)(L,"app-deleted","This instance of FirebaseApp has been deleted."),(0,ne.Z)(L,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,ne.Z)(L,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,ne.Z)(L,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,ne.Z)(L,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,ne.Z)(L,"no-auth-event","An internal AuthError has occurred."),(0,ne.Z)(L,"no-such-provider","User was not linked to an account with the given provider."),(0,ne.Z)(L,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,ne.Z)(L,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,ne.Z)(L,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,ne.Z)(L,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,ne.Z)(L,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,ne.Z)(L,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,ne.Z)(L,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,ne.Z)(L,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,ne.Z)(L,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,ne.Z)(L,"rejected-credential","The request contains malformed or mismatching credentials."),(0,ne.Z)(L,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,ne.Z)(L,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,ne.Z)(L,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,ne.Z)(L,"timeout","The operation has timed out."),(0,ne.Z)(L,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,ne.Z)(L,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,ne.Z)(L,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,ne.Z)(L,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,ne.Z)(L,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,ne.Z)(L,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,ne.Z)(L,"unverified-email","The operation requires a verified email."),(0,ne.Z)(L,"user-cancelled","The user did not grant your application the permissions it requested."),(0,ne.Z)(L,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,ne.Z)(L,"user-disabled","The user account has been disabled by an administrator."),(0,ne.Z)(L,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,ne.Z)(L,"user-signed-out",""),(0,ne.Z)(L,"weak-password","The password must be 6 characters long or more."),(0,ne.Z)(L,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,ne.Z)(L,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),L},Ct=xt,Zt=new fe.LL("auth","Firebase",xt()),k=new We.Yd("@firebase/auth");function B(L){if(k.logLevel<=We.in.ERROR){for(var P=arguments.length,O=new Array(P>1?P-1:0),F=1;F<P;F++)O[F-1]=arguments[F];k.error.apply(k,["Auth (".concat(Ae.SDK_VERSION,"): ").concat(L)].concat(O))}}function X(L){for(var P=arguments.length,O=new Array(P>1?P-1:0),F=1;F<P;F++)O[F-1]=arguments[F];throw _t.apply(void 0,[L].concat(O))}function ge(L){for(var P=arguments.length,O=new Array(P>1?P-1:0),F=1;F<P;F++)O[F-1]=arguments[F];return _t.apply(void 0,[L].concat(O))}function Ie(L,P,O){var F=Object.assign(Object.assign({},Ct()),(0,ne.Z)({},P,O));return new fe.LL("auth","Firebase",F).create(P,{appName:L.name})}function nt(L,P,O){if(!(P instanceof O))throw O.name!==P.constructor.name&&X(L,"argument-error"),Ie(L,"argument-error","Type of ".concat(P.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function _t(L){for(var P=arguments.length,O=new Array(P>1?P-1:0),F=1;F<P;F++)O[F-1]=arguments[F];if("string"!=typeof L){var R,j=O[0],$=(0,we.Z)(O.slice(1));return $[0]&&($[0].appName=L.name),(R=L._errorFactory).create.apply(R,[j].concat((0,we.Z)($)))}return Zt.create.apply(Zt,[L].concat(O))}function rt(L,P){if(!L){for(var O=arguments.length,F=new Array(O>2?O-2:0),R=2;R<O;R++)F[R-2]=arguments[R];throw _t.apply(void 0,[P].concat(F))}}function Vt(L){var P="INTERNAL ASSERTION FAILED: "+L;throw B(P),new Error(P)}function Fn(L,P){L||Vt(P)}var rr=new Map;function Vr(L){Fn(L instanceof Function,"Expected a class definition");var P=rr.get(L);return P?(Fn(P instanceof L,"Instance stored in cache mismatched with class"),P):(P=new L,rr.set(L,P),P)}function Ri(){var L;return"undefined"!=typeof self&&(null===(L=self.location)||void 0===L?void 0:L.href)||""}function mu(){return"http:"===rc()||"https:"===rc()}function rc(){var L;return"undefined"!=typeof self&&(null===(L=self.location)||void 0===L?void 0:L.protocol)||null}var si=function(){function L(P,O){(0,v.Z)(this,L),this.shortDelay=P,this.longDelay=O,Fn(O>P,"Short delay should be less than long delay!"),this.isMobile=(0,fe.uI)()||(0,fe.b$)()}return(0,be.Z)(L,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(mu()||(0,fe.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),L}();function mr(L,P){Fn(L.emulator,"Emulator should always be set here");var O=L.emulator.url;return P?"".concat(O).concat(P.startsWith("/")?P.slice(1):P):O}var Wn=function(){function L(){(0,v.Z)(this,L)}return(0,be.Z)(L,null,[{key:"initialize",value:function(O,F,R){this.fetchImpl=O,F&&(this.headersImpl=F),R&&(this.responseImpl=R)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),L}(),fa=((0,ne.Z)(Be={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,ne.Z)(Be,"MISSING_CUSTOM_TOKEN","internal-error"),(0,ne.Z)(Be,"INVALID_IDENTIFIER","invalid-email"),(0,ne.Z)(Be,"MISSING_CONTINUE_URI","internal-error"),(0,ne.Z)(Be,"INVALID_PASSWORD","wrong-password"),(0,ne.Z)(Be,"MISSING_PASSWORD","internal-error"),(0,ne.Z)(Be,"EMAIL_EXISTS","email-already-in-use"),(0,ne.Z)(Be,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,ne.Z)(Be,"INVALID_IDP_RESPONSE","invalid-credential"),(0,ne.Z)(Be,"INVALID_PENDING_TOKEN","invalid-credential"),(0,ne.Z)(Be,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,ne.Z)(Be,"MISSING_REQ_TYPE","internal-error"),(0,ne.Z)(Be,"EMAIL_NOT_FOUND","user-not-found"),(0,ne.Z)(Be,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,ne.Z)(Be,"EXPIRED_OOB_CODE","expired-action-code"),(0,ne.Z)(Be,"INVALID_OOB_CODE","invalid-action-code"),(0,ne.Z)(Be,"MISSING_OOB_CODE","internal-error"),(0,ne.Z)(Be,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,ne.Z)(Be,"INVALID_ID_TOKEN","invalid-user-token"),(0,ne.Z)(Be,"TOKEN_EXPIRED","user-token-expired"),(0,ne.Z)(Be,"USER_NOT_FOUND","user-token-expired"),(0,ne.Z)(Be,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,ne.Z)(Be,"INVALID_CODE","invalid-verification-code"),(0,ne.Z)(Be,"INVALID_SESSION_INFO","invalid-verification-id"),(0,ne.Z)(Be,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,ne.Z)(Be,"MISSING_SESSION_INFO","missing-verification-id"),(0,ne.Z)(Be,"SESSION_EXPIRED","code-expired"),(0,ne.Z)(Be,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,ne.Z)(Be,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,ne.Z)(Be,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,ne.Z)(Be,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,ne.Z)(Be,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,ne.Z)(Be,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,ne.Z)(Be,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,ne.Z)(Be,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,ne.Z)(Be,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,ne.Z)(Be,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,ne.Z)(Be,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Be),ic=new si(3e4,6e4);function Br(L,P){return L.tenantId&&!P.tenantId?Object.assign(Object.assign({},P),{tenantId:L.tenantId}):P}function ha(L,P,O,F){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,ke.Z)(Q().mark(function L(P,O,F,R){var $=arguments;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",Wa(P,$.length>4&&void 0!==$[4]?$[4]:{},function(){var Te={},vt={};R&&("GET"===O?vt=R:Te={body:JSON.stringify(R)});var kt=(0,fe.xO)(Object.assign({key:P.config.apiKey},vt)).slice(1),Gn=new(Wn.headers());return Gn.set("Content-Type","application/json"),Gn.set("X-Client-Version",P._getSdkClientVersion()),P.languageCode&&Gn.set("X-Firebase-Locale",P.languageCode),Wn.fetch()(Hi(P,P.config.apiHost,F,kt),Object.assign({method:O,headers:Gn,referrerPolicy:"no-referrer"},Te))}));case 2:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function Wa(L,P,O){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j,$,ee,Te,vt,kt,Gn,gn;return Q().wrap(function(or){for(;;)switch(or.prev=or.next){case 0:return P._canInitEmulator=!1,R=Object.assign(Object.assign({},fa),O),or.prev=2,j=new qi(P),or.next=6,Promise.race([F(),j.promise]);case 6:return $=or.sent,j.clearNetworkTimeout(),or.next=10,$.json();case 10:if(!("needConfirmation"in(ee=or.sent))){or.next=13;break}throw qa(P,"account-exists-with-different-credential",ee);case 13:if(!$.ok||"errorMessage"in ee){or.next=17;break}return or.abrupt("return",ee);case 17:if(Te=($.ok?ee.errorMessage:ee.error.message).split(" : "),vt=(0,Re.Z)(Te,2),Gn=vt[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==(kt=vt[0])){or.next=23;break}throw qa(P,"credential-already-in-use",ee);case 23:if("EMAIL_EXISTS"!==kt){or.next=25;break}throw qa(P,"email-already-in-use",ee);case 25:if(gn=R[kt]||kt.toLowerCase().replace(/[_\s]+/g,"-"),!Gn){or.next=30;break}throw Ie(P,gn,Gn);case 30:X(P,gn);case 31:or.next=38;break;case 33:if(or.prev=33,or.t0=or.catch(2),!(or.t0 instanceof fe.ZR)){or.next=37;break}throw or.t0;case 37:X(P,"network-request-failed");case 38:case"end":return or.stop()}},L,null,[[2,33]])}))).apply(this,arguments)}function Wi(L,P,O,F){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,ke.Z)(Q().mark(function L(P,O,F,R){var j,$,ee=arguments;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return j=ee.length>4&&void 0!==ee[4]?ee[4]:{},Te.next=3,ha(P,O,F,R,j);case 3:return"mfaPendingCredential"in($=Te.sent)&&X(P,"multi-factor-auth-required",{serverResponse:$}),Te.abrupt("return",$);case 6:case"end":return Te.stop()}},L)}))).apply(this,arguments)}function Hi(L,P,O,F){var R="".concat(P).concat(O,"?").concat(F);return L.config.emulator?mr(L.config,R):"".concat(L.config.apiScheme,"://").concat(R)}var qi=function(){function L(P){var O=this;(0,v.Z)(this,L),this.auth=P,this.timer=null,this.promise=new Promise(function(F,R){O.timer=setTimeout(function(){return R(ge(O.auth,"timeout"))},ic.get())})}return(0,be.Z)(L,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),L}();function qa(L,P,O){var F={appName:L.name};O.email&&(F.email=O.email),O.phoneNumber&&(F.phoneNumber=O.phoneNumber);var R=ge(L,P,F);return R.customData._tokenResponse=O,R}function sr(L,P){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:delete",O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Zn(L,P){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:update",O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Yr(L,P){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:lookup",O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function br(L){if(L)try{var P=new Date(Number(L));if(!isNaN(P.getTime()))return P.toUTCString()}catch(O){}}function Ja(){return(Ja=(0,ke.Z)(Q().mark(function L(P){var O,F,R,j,$,ee,oe=arguments;return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return O=oe.length>1&&void 0!==oe[1]&&oe[1],F=(0,fe.m9)(P),vt.next=4,F.getIdToken(O);case 4:return rt((j=Do(R=vt.sent))&&j.exp&&j.auth_time&&j.iat,F.auth,"internal-error"),ee=null==($="object"==typeof j.firebase?j.firebase:void 0)?void 0:$.sign_in_provider,vt.abrupt("return",{claims:j,token:R,authTime:br(Ms(j.auth_time)),issuedAtTime:br(Ms(j.iat)),expirationTime:br(Ms(j.exp)),signInProvider:ee||null,signInSecondFactor:(null==$?void 0:$.sign_in_second_factor)||null});case 10:case"end":return vt.stop()}},L)}))).apply(this,arguments)}function Ms(L){return 1e3*Number(L)}function Do(L){var P=L.split("."),O=(0,Re.Z)(P,3),R=O[1];if(void 0===O[0]||void 0===R||void 0===O[2])return B("JWT malformed, contained fewer than 3 sections"),null;try{var $=(0,fe.tV)(R);return $?JSON.parse($):(B("Failed to decode base64 JWT payload"),null)}catch(ee){return B("Caught error parsing JWT payload as JSON",ee),null}}function gi(L,P){return gt.apply(this,arguments)}function gt(){return(gt=(0,ke.Z)(Q().mark(function L(P,O){var R=arguments;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!(R.length>2&&void 0!==R[2]&&R[2])){$.next=3;break}return $.abrupt("return",O);case 3:return $.prev=3,$.next=6,O;case 6:return $.abrupt("return",$.sent);case 9:if($.prev=9,$.t0=$.catch(3),!($.t0 instanceof fe.ZR&&ft($.t0))){$.next=15;break}if(P.auth.currentUser!==P){$.next=15;break}return $.next=15,P.auth.signOut();case 15:throw $.t0;case 16:case"end":return $.stop()}},L,null,[[3,9]])}))).apply(this,arguments)}function ft(L){var P=L.code;return P==="auth/".concat("user-disabled")||P==="auth/".concat("user-token-expired")}var $e=function(){function L(P){(0,v.Z)(this,L),this.user=P,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,be.Z)(L,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(O){var F;if(O){var R=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),R}this.errorBackoff=3e4;var $=(null!==(F=this.user.stsTokenManager.expirationTime)&&void 0!==F?F:0)-Date.now()-3e5;return Math.max(0,$)}},{key:"schedule",value:function(){var O=this,F=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var R=this.getInterval(F);this.timerId=setTimeout((0,ke.Z)(Q().mark(function j(){return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,O.iteration();case 2:case"end":return ee.stop()}},j)})),R)}}},{key:"iteration",value:(P=(0,ke.Z)(Q().mark(function F(){return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.prev=0,j.next=3,this.user.getIdToken(!0);case 3:j.next=9;break;case 5:return j.prev=5,j.t0=j.catch(0),j.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),j.abrupt("return");case 9:this.schedule();case 10:case"end":return j.stop()}},F,this,[[0,5]])})),function(){return P.apply(this,arguments)})}]),L;var P}(),ot=function(){function L(P,O){(0,v.Z)(this,L),this.createdAt=P,this.lastLoginAt=O,this._initializeTime()}return(0,be.Z)(L,[{key:"_initializeTime",value:function(){this.lastSignInTime=br(this.lastLoginAt),this.creationTime=br(this.createdAt)}},{key:"_copy",value:function(O){this.createdAt=O.createdAt,this.lastLoginAt=O.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),L}();function Nt(L){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,ke.Z)(Q().mark(function L(P){var O,F,R,j,$,ee,oe,vt,kt,Gn;return Q().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return F=P.auth,bn.next=3,P.getIdToken();case 3:return R=bn.sent,bn.next=6,gi(P,Yr(F,{idToken:R}));case 6:rt(null==(j=bn.sent)?void 0:j.users.length,F,"internal-error"),P._notifyReloadListener($=j.users[0]),ee=(null===(O=$.providerUserInfo)||void 0===O?void 0:O.length)?Yi($.providerUserInfo):[],oe=yi(P.providerData,ee),vt=!(P.email&&$.passwordHash||(null==oe?void 0:oe.length)),kt=!!P.isAnonymous&&vt,Gn={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:oe,metadata:new ot($.createdAt,$.lastLoginAt),isAnonymous:kt},Object.assign(P,Gn);case 17:case"end":return bn.stop()}},L)}))).apply(this,arguments)}function yn(){return(yn=(0,ke.Z)(Q().mark(function L(P){var O;return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return O=(0,fe.m9)(P),R.next=3,Nt(O);case 3:return R.next=5,O.auth._persistUserIfCurrent(O);case 5:O.auth._notifyListenersIfCurrent(O);case 6:case"end":return R.stop()}},L)}))).apply(this,arguments)}function yi(L,P){var O=L.filter(function(F){return!P.some(function(R){return R.providerId===F.providerId})});return[].concat((0,we.Z)(O),(0,we.Z)(P))}function Yi(L){return L.map(function(P){var O=P.providerId,F=(0,Le._T)(P,["providerId"]);return{providerId:O,uid:F.rawId||"",displayName:F.displayName||null,email:F.email||null,phoneNumber:F.phoneNumber||null,photoURL:F.photoUrl||null}})}function hi(L,P){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,ke.Z)(Q().mark(function L(P,O){var F;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Wa(P,{},function(){var $=(0,fe.xO)({grant_type:"refresh_token",refresh_token:O}).slice(1),ee=P.config,vt=Hi(P,ee.tokenApiHost,"/v1/token","key=".concat(ee.apiKey));return Wn.fetch()(vt,{method:"POST",headers:{"X-Client-Version":P._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:$})});case 2:return j.abrupt("return",{accessToken:(F=j.sent).access_token,expiresIn:F.expires_in,refreshToken:F.refresh_token});case 4:case"end":return j.stop()}},L)}))).apply(this,arguments)}var Ea=function(){function L(){(0,v.Z)(this,L),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,be.Z)(L,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(O){rt(O.idToken,"internal-error"),rt(void 0!==O.idToken,"internal-error"),rt(void 0!==O.refreshToken,"internal-error");var F="expiresIn"in O&&void 0!==O.expiresIn?Number(O.expiresIn):function(L){var P=Do(L);return rt(P,"internal-error"),rt(void 0!==P.exp,"internal-error"),rt(void 0!==P.iat,"internal-error"),Number(P.exp)-Number(P.iat)}(O.idToken);this.updateTokensAndExpiration(O.idToken,O.refreshToken,F)}},{key:"getToken",value:(P=(0,ke.Z)(Q().mark(function F(R){var j,$=arguments;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(j=$.length>1&&void 0!==$[1]&&$[1],rt(!this.accessToken||this.refreshToken,R,"user-token-expired"),j||!this.accessToken||this.isExpired){oe.next=4;break}return oe.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){oe.next=8;break}return oe.next=7,this.refresh(R,this.refreshToken);case 7:return oe.abrupt("return",this.accessToken);case 8:return oe.abrupt("return",null);case 9:case"end":return oe.stop()}},F,this)})),function(F){return P.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var P=(0,ke.Z)(Q().mark(function F(R,j){var $;return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,hi(R,j);case 2:this.updateTokensAndExpiration(($=kt.sent).accessToken,$.refreshToken,Number($.expiresIn));case 7:case"end":return kt.stop()}},F,this)}));return function(F,R){return P.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(O,F,R){this.refreshToken=F||null,this.accessToken=O||null,this.expirationTime=Date.now()+1e3*R}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(O){this.accessToken=O.accessToken,this.refreshToken=O.refreshToken,this.expirationTime=O.expirationTime}},{key:"_clone",value:function(){return Object.assign(new L,this.toJSON())}},{key:"_performRefresh",value:function(){return Vt("not implemented")}}],[{key:"fromJSON",value:function(O,F){var R=F.refreshToken,j=F.accessToken,$=F.expirationTime,ee=new L;return R&&(rt("string"==typeof R,"internal-error",{appName:O}),ee.refreshToken=R),j&&(rt("string"==typeof j,"internal-error",{appName:O}),ee.accessToken=j),$&&(rt("number"==typeof $,"internal-error",{appName:O}),ee.expirationTime=$),ee}}]),L;var P}();function ct(L,P){rt("string"==typeof L||void 0===L,"internal-error",{appName:P})}var Tt=function(){function L(P){(0,v.Z)(this,L);var O=P.uid,F=P.auth,R=P.stsTokenManager,j=(0,Le._T)(P,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new $e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=O,this.auth=F,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.metadata=new ot(j.createdAt||void 0,j.lastLoginAt||void 0)}return(0,be.Z)(L,[{key:"getIdToken",value:(P=(0,ke.Z)(Q().mark(function F(R){var j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,gi(this,this.stsTokenManager.getToken(this.auth,R));case 2:if(rt(j=ee.sent,this.auth,"internal-error"),this.accessToken===j){ee.next=9;break}return this.accessToken=j,ee.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return ee.abrupt("return",j);case 10:case"end":return ee.stop()}},F,this)})),function(F){return P.apply(this,arguments)})},{key:"getIdTokenResult",value:function(O){return function(L){return Ja.apply(this,arguments)}(this,O)}},{key:"reload",value:function(){return function(L){return yn.apply(this,arguments)}(this)}},{key:"_assign",value:function(O){this!==O&&(rt(this.uid===O.uid,this.auth,"internal-error"),this.displayName=O.displayName,this.photoURL=O.photoURL,this.email=O.email,this.emailVerified=O.emailVerified,this.phoneNumber=O.phoneNumber,this.isAnonymous=O.isAnonymous,this.tenantId=O.tenantId,this.providerData=O.providerData.map(function(F){return Object.assign({},F)}),this.metadata._copy(O.metadata),this.stsTokenManager._assign(O.stsTokenManager))}},{key:"_clone",value:function(O){return new L(Object.assign(Object.assign({},this),{auth:O,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(O){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=O,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(O){this.reloadListener?this.reloadListener(O):this.reloadUserInfo=O}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j,$,ee=arguments;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(j=ee.length>1&&void 0!==ee[1]&&ee[1],$=!1,R.idToken&&R.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(R),$=!0),!j){Te.next=6;break}return Te.next=6,Nt(this);case 6:return Te.next=8,this.auth._persistUserIfCurrent(this);case 8:$&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return Te.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"delete",value:function(){var P=(0,ke.Z)(Q().mark(function F(){var R;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,this.getIdToken();case 2:return R=$.sent,$.next=5,gi(this,sr(this.auth,{idToken:R}));case 5:return this.stsTokenManager.clearRefreshToken(),$.abrupt("return",this.auth.signOut());case 7:case"end":return $.stop()}},F,this)}));return function(){return P.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(O){return Object.assign({},O)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(O,F){var R,j,$,ee,oe,Te,vt,kt,Gn=null!==(R=F.displayName)&&void 0!==R?R:void 0,gn=null!==(j=F.email)&&void 0!==j?j:void 0,bn=null!==($=F.phoneNumber)&&void 0!==$?$:void 0,or=null!==(ee=F.photoURL)&&void 0!==ee?ee:void 0,Qi=null!==(oe=F.tenantId)&&void 0!==oe?oe:void 0,Li=null!==(Te=F._redirectEventId)&&void 0!==Te?Te:void 0,wu=null!==(vt=F.createdAt)&&void 0!==vt?vt:void 0,Or=null!==(kt=F.lastLoginAt)&&void 0!==kt?kt:void 0,is=F.uid,ps=F.emailVerified,ru=F.isAnonymous,Pd=F.providerData,ba=F.stsTokenManager;rt(is&&ba,O,"internal-error");var Bv=Ea.fromJSON(this.name,ba);rt("string"==typeof is,O,"internal-error"),ct(Gn,O.name),ct(gn,O.name),rt("boolean"==typeof ps,O,"internal-error"),rt("boolean"==typeof ru,O,"internal-error"),ct(bn,O.name),ct(or,O.name),ct(Qi,O.name),ct(Li,O.name),ct(wu,O.name),ct(Or,O.name);var Od=new L({uid:is,auth:O,email:gn,emailVerified:ps,displayName:Gn,isAnonymous:ru,photoURL:or,phoneNumber:bn,tenantId:Qi,stsTokenManager:Bv,createdAt:wu,lastLoginAt:Or});return Pd&&Array.isArray(Pd)&&(Od.providerData=Pd.map(function(K_){return Object.assign({},K_)})),Li&&(Od._redirectEventId=Li),Od}},{key:"_fromIdTokenResponse",value:function(){var P=(0,ke.Z)(Q().mark(function F(R,j){var $,ee,oe,Te=arguments;return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return $=Te.length>2&&void 0!==Te[2]&&Te[2],(ee=new Ea).updateFromServerResponse(j),oe=new L({uid:j.localId,auth:R,stsTokenManager:ee,isAnonymous:$}),kt.next=6,Nt(oe);case 6:return kt.abrupt("return",oe);case 7:case"end":return kt.stop()}},F)}));return function(F,R){return P.apply(this,arguments)}}()}]),L;var P}(),He=function(){var L=function(){function P(){(0,v.Z)(this,P),this.type="NONE",this.storage={}}return(0,be.Z)(P,[{key:"_isAvailable",value:(O=(0,ke.Z)(Q().mark(function R(){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",!0);case 1:case"end":return $.stop()}},R)})),function(){return O.apply(this,arguments)})},{key:"_set",value:function(){var O=(0,ke.Z)(Q().mark(function R(j,$){return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:this.storage[j]=$;case 1:case"end":return oe.stop()}},R,this)}));return function(R,j){return O.apply(this,arguments)}}()},{key:"_get",value:function(){var O=(0,ke.Z)(Q().mark(function R(j){var $;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",void 0===($=this.storage[j])?null:$);case 2:case"end":return oe.stop()}},R,this)}));return function(R){return O.apply(this,arguments)}}()},{key:"_remove",value:function(){var O=(0,ke.Z)(Q().mark(function R(j){return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:delete this.storage[j];case 1:case"end":return ee.stop()}},R,this)}));return function(R){return O.apply(this,arguments)}}()},{key:"_addListener",value:function(F,R){}},{key:"_removeListener",value:function(F,R){}}]),P;var O}();return L.type="NONE",L}();function ht(L,P,O){return"firebase".concat(":",L,":").concat(P,":").concat(O)}var Gt=function(){function L(P,O,F){(0,v.Z)(this,L),this.persistence=P,this.auth=O,this.userKey=F;var R=this.auth,j=R.config,$=R.name;this.fullUserKey=ht(this.userKey,j.apiKey,$),this.fullPersistenceKey=ht("persistence",j.apiKey,$),this.boundEventHandler=O._onStorageEvent.bind(O),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,be.Z)(L,[{key:"setCurrentUser",value:function(O){return this.persistence._set(this.fullUserKey,O.toJSON())}},{key:"getCurrentUser",value:(P=(0,ke.Z)(Q().mark(function F(){var R;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,this.persistence._get(this.fullUserKey);case 2:return $.abrupt("return",(R=$.sent)?Tt._fromJSON(this.auth,R):null);case 4:case"end":return $.stop()}},F,this)})),function(){return P.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(this.persistence!==R){ee.next=2;break}return ee.abrupt("return");case 2:return ee.next=4,this.getCurrentUser();case 4:return j=ee.sent,ee.next=7,this.removeCurrentUser();case 7:if(this.persistence=R,!j){ee.next=10;break}return ee.abrupt("return",this.setCurrentUser(j));case 10:case"end":return ee.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var P=(0,ke.Z)(Q().mark(function F(R,j){var $,ee,oe,Te,vt,kt,Gn,gn,bn,or,Qi,Li=arguments;return Q().wrap(function(Or){for(;;)switch(Or.prev=Or.next){case 0:if($=Li.length>2&&void 0!==Li[2]?Li[2]:"authUser",j.length){Or.next=3;break}return Or.abrupt("return",new L(Vr(He),R,$));case 3:return Or.next=5,Promise.all(j.map(function(){var is=(0,ke.Z)(Q().mark(function ps(ru){return Q().wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:return ba.next=2,ru._isAvailable();case 2:if(!ba.sent){ba.next=4;break}return ba.abrupt("return",ru);case 4:return ba.abrupt("return",void 0);case 5:case"end":return ba.stop()}},ps)}));return function(ps){return is.apply(this,arguments)}}()));case 5:ee=Or.sent.filter(function(is){return is}),oe=ee[0]||Vr(He),Te=ht($,R.config.apiKey,R.name),vt=null,kt=(0,re.Z)(j),Or.prev=10,kt.s();case 12:if((Gn=kt.n()).done){Or.next=29;break}return gn=Gn.value,Or.prev=14,Or.next=17,gn._get(Te);case 17:if(!(bn=Or.sent)){Or.next=23;break}return or=Tt._fromJSON(R,bn),gn!==oe&&(vt=or),oe=gn,Or.abrupt("break",29);case 23:Or.next=27;break;case 25:Or.prev=25,Or.t0=Or.catch(14);case 27:Or.next=12;break;case 29:Or.next=34;break;case 31:Or.prev=31,Or.t1=Or.catch(10),kt.e(Or.t1);case 34:return Or.prev=34,kt.f(),Or.finish(34);case 37:if(Qi=ee.filter(function(is){return is._shouldAllowMigration}),oe._shouldAllowMigration&&Qi.length){Or.next=40;break}return Or.abrupt("return",new L(oe,R,$));case 40:if(oe=Qi[0],!vt){Or.next=44;break}return Or.next=44,oe._set(Te,vt.toJSON());case 44:return Or.next=46,Promise.all(j.map(function(){var is=(0,ke.Z)(Q().mark(function ps(ru){return Q().wrap(function(ba){for(;;)switch(ba.prev=ba.next){case 0:if(ru===oe){ba.next=8;break}return ba.prev=1,ba.next=4,ru._remove(Te);case 4:ba.next=8;break;case 6:ba.prev=6,ba.t0=ba.catch(1);case 8:case"end":return ba.stop()}},ps,null,[[1,6]])}));return function(ps){return is.apply(this,arguments)}}()));case 46:return Or.abrupt("return",new L(oe,R,$));case 47:case"end":return Or.stop()}},F,null,[[10,31,34,37],[14,25]])}));return function(F,R){return P.apply(this,arguments)}}()}]),L;var P}();function zt(L){var P=L.toLowerCase();if(P.includes("opera/")||P.includes("opr/")||P.includes("opios/"))return"Opera";if(da(P))return"IEMobile";if(P.includes("msie")||P.includes("trident/"))return"IE";if(P.includes("edge/"))return"Edge";if(Kt(P))return"Firefox";if(P.includes("silk/"))return"Silk";if(fs(P))return"Blackberry";if(Pr(P))return"Webos";if(pn(P))return"Safari";if((P.includes("chrome/")||$n(P))&&!P.includes("edge/"))return"Chrome";if(Ci(P))return"Android";var F=L.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==F?void 0:F.length)?F[1]:"Other"}function Kt(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/firefox\//i.test(L)}function pn(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)(),P=L.toLowerCase();return P.includes("safari/")&&!P.includes("chrome/")&&!P.includes("crios/")&&!P.includes("android")}function $n(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/crios\//i.test(L)}function da(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/iemobile/i.test(L)}function Ci(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/android/i.test(L)}function fs(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/blackberry/i.test(L)}function Pr(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/webos/i.test(L)}function _i(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/iphone|ipad|ipod/i.test(L)}function Ya(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(L)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(L)}function oa(){var P,L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return _i(L)&&!!(null===(P=window.navigator)||void 0===P?void 0:P.standalone)}function Qc(){return(0,fe.w1)()&&10===document.documentMode}function Ca(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,fe.z$)();return _i(L)||Ci(L)||Pr(L)||fs(L)||/windows phone/i.test(L)||da(L)}function hr(L){var O,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(L){case"Browser":O=zt((0,fe.z$)());break;case"Worker":O="".concat(zt((0,fe.z$)()),"-").concat(L);break;default:O=L}var F=P.length?P.join(","):"FirebaseCore-web";return"".concat(O,"/","JsCore","/").concat(Ae.SDK_VERSION,"/").concat(F)}var Oi=function(){function L(P,O){(0,v.Z)(this,L),this.app=P,this.config=O,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gu(this),this.idTokenSubscription=new gu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=P.name,this.clientVersion=O.sdkClientVersion}return(0,be.Z)(L,[{key:"_initializeWithPersistence",value:function(O,F){var R=this;return F&&(this._popupRedirectResolver=Vr(F)),this._initializationPromise=this.queue((0,ke.Z)(Q().mark(function j(){var $;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!R._deleted){oe.next=2;break}return oe.abrupt("return");case 2:return oe.next=4,Gt.create(R,O);case 4:if(R.persistenceManager=oe.sent,!R._deleted){oe.next=7;break}return oe.abrupt("return");case 7:if(!(null===($=R._popupRedirectResolver)||void 0===$?void 0:$._shouldInitProactively)){oe.next=10;break}return oe.next=10,R._popupRedirectResolver._initialize(R);case 10:return oe.next=12,R.initializeCurrentUser(F);case 12:if(!R._deleted){oe.next=14;break}return oe.abrupt("return");case 14:R._isInitialized=!0;case 15:case"end":return oe.stop()}},j)}))),this._initializationPromise}},{key:"_onStorageEvent",value:(P=(0,ke.Z)(Q().mark(function F(){var R;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!this._deleted){$.next=2;break}return $.abrupt("return");case 2:return $.next=4,this.assertedPersistence.getCurrentUser();case 4:if(R=$.sent,this.currentUser||R){$.next=7;break}return $.abrupt("return");case 7:if(!this.currentUser||!R||this.currentUser.uid!==R.uid){$.next=12;break}return this._currentUser._assign(R),$.next=11,this.currentUser.getIdToken();case 11:return $.abrupt("return");case 12:return $.next=14,this._updateCurrentUser(R);case 14:case"end":return $.stop()}},F,this)})),function(){return P.apply(this,arguments)})},{key:"initializeCurrentUser",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j,$,ee,oe,Te;return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,this.assertedPersistence.getCurrentUser();case 2:if($=kt.sent,!R||!this.config.authDomain){kt.next=12;break}return kt.next=6,this.getOrInitRedirectPersistenceManager();case 6:return ee=null===(j=this.redirectUser)||void 0===j?void 0:j._redirectEventId,oe=null==$?void 0:$._redirectEventId,kt.next=10,this.tryRedirectSignIn(R);case 10:Te=kt.sent,(!ee||ee===oe)&&(null==Te?void 0:Te.user)&&($=Te.user);case 12:if($){kt.next=14;break}return kt.abrupt("return",this.directlySetCurrentUser(null));case 14:if($._redirectEventId){kt.next=16;break}return kt.abrupt("return",this.reloadAndSetCurrentUserOrClear($));case 16:return rt(this._popupRedirectResolver,this,"argument-error"),kt.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==$._redirectEventId){kt.next=21;break}return kt.abrupt("return",this.directlySetCurrentUser($));case 21:return kt.abrupt("return",this.reloadAndSetCurrentUserOrClear($));case 22:case"end":return kt.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return j=null,ee.prev=1,ee.next=4,this._popupRedirectResolver._completeRedirectFn(this,R,!0);case 4:j=ee.sent,ee.next=11;break;case 7:return ee.prev=7,ee.t0=ee.catch(1),ee.next=11,this._setRedirectUser(null);case 11:return ee.abrupt("return",j);case 12:case"end":return ee.stop()}},F,this,[[1,7]])}));return function(F){return P.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.prev=0,$.next=3,Nt(R);case 3:$.next=9;break;case 5:if($.prev=5,$.t0=$.catch(0),$.t0.code==="auth/".concat("network-request-failed")){$.next=9;break}return $.abrupt("return",this.directlySetCurrentUser(null));case 9:return $.abrupt("return",this.directlySetCurrentUser(R));case 10:case"end":return $.stop()}},F,this,[[0,5]])}));return function(F){return P.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var L=navigator;return L.languages&&L.languages[0]||L.language||null}()}},{key:"_delete",value:function(){var P=(0,ke.Z)(Q().mark(function F(){return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:this._deleted=!0;case 1:case"end":return j.stop()}},F,this)}));return function(){return P.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return(j=R?(0,fe.m9)(R):null)&&rt(j.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),ee.abrupt("return",this._updateCurrentUser(j&&j._clone(this)));case 3:case"end":return ee.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j=this;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(!this._deleted){ee.next=2;break}return ee.abrupt("return");case 2:return R&&rt(this.tenantId===R.tenantId,this,"tenant-id-mismatch"),ee.abrupt("return",this.queue((0,ke.Z)(Q().mark(function oe(){return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.next=2,j.directlySetCurrentUser(R);case 2:j.notifyAuthListeners();case 3:case"end":return vt.stop()}},oe)}))));case 4:case"end":return ee.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"signOut",value:function(){var P=(0,ke.Z)(Q().mark(function F(){return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){j.next=3;break}return j.next=3,this._setRedirectUser(null);case 3:return j.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return j.stop()}},F,this)}));return function(){return P.apply(this,arguments)}}()},{key:"setPersistence",value:function(O){var F=this;return this.queue((0,ke.Z)(Q().mark(function R(){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,F.assertedPersistence.setPersistence(Vr(O));case 2:case"end":return $.stop()}},R)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(O){this._errorFactory=new fe.LL("auth","Firebase",O())}},{key:"onAuthStateChanged",value:function(O,F,R){return this.registerStateListener(this.authStateSubscription,O,F,R)}},{key:"onIdTokenChanged",value:function(O,F,R){return this.registerStateListener(this.idTokenSubscription,O,F,R)}},{key:"toJSON",value:function(){var O;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(O=this._currentUser)||void 0===O?void 0:O.toJSON()}}},{key:"_setRedirectUser",value:function(){var P=(0,ke.Z)(Q().mark(function F(R,j){var $;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,this.getOrInitRedirectPersistenceManager(j);case 2:return $=oe.sent,oe.abrupt("return",null===R?$.removeCurrentUser():$.setCurrentUser(R));case 4:case"end":return oe.stop()}},F,this)}));return function(F,R){return P.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(this.redirectPersistenceManager){ee.next=9;break}return rt(j=R&&Vr(R)||this._popupRedirectResolver,this,"argument-error"),ee.next=5,Gt.create(this,[Vr(j._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=ee.sent,ee.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=ee.sent;case 9:return ee.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return ee.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!this._isInitialized){oe.next=3;break}return oe.next=3,this.queue((0,ke.Z)(Q().mark(function Te(){return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:case"end":return kt.stop()}},Te)})));case 3:if((null===(j=this._currentUser)||void 0===j?void 0:j._redirectEventId)!==R){oe.next=5;break}return oe.abrupt("return",this._currentUser);case 5:if((null===($=this.redirectUser)||void 0===$?void 0:$._redirectEventId)!==R){oe.next=7;break}return oe.abrupt("return",this.redirectUser);case 7:return oe.abrupt("return",null);case 8:case"end":return oe.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j=this;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(R!==this.currentUser){ee.next=2;break}return ee.abrupt("return",this.queue((0,ke.Z)(Q().mark(function oe(){return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.abrupt("return",j.directlySetCurrentUser(R));case 1:case"end":return vt.stop()}},oe)}))));case 2:case"end":return ee.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(O){O===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var O,F;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var R=null!==(F=null===(O=this.currentUser)||void 0===O?void 0:O.uid)&&void 0!==F?F:null;this.lastNotifiedUid!==R&&(this.lastNotifiedUid=R,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(O,F,R,j){var $=this;if(this._deleted)return function(){};var ee="function"==typeof F?F:F.next.bind(F),oe=this._isInitialized?Promise.resolve():this._initializationPromise;return rt(oe,this,"internal-error"),oe.then(function(){return ee($.currentUser)}),"function"==typeof F?O.addObserver(F,R,j):O.addObserver(F)}},{key:"directlySetCurrentUser",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(this.currentUser&&this.currentUser!==R&&(this._currentUser._stopProactiveRefresh(),R&&this.isProactiveRefreshEnabled&&R._startProactiveRefresh()),this.currentUser=R,!R){$.next=7;break}return $.next=5,this.assertedPersistence.setCurrentUser(R);case 5:$.next=9;break;case 7:return $.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return $.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"queue",value:function(O){return this.operations=this.operations.then(O,O),this.operations}},{key:"assertedPersistence",get:function(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(O){!O||this.frameworks.includes(O)||(this.frameworks.push(O),this.frameworks.sort(),this.clientVersion=hr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),L;var P}();function bi(L){return(0,fe.m9)(L)}var gu=function(){function L(P){var O=this;(0,v.Z)(this,L),this.auth=P,this.observer=null,this.addObserver=(0,fe.ne)(function(F){return O.observer=F})}return(0,be.Z)(L,[{key:"next",get:function(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),L}();function Sa(L,P,O){var F=bi(L);rt(F._canInitEmulator,F,"emulator-config-failed"),rt(/^https?:\/\//.test(P),F,"invalid-emulator-scheme");var R=!!(null==O?void 0:O.disableWarnings),j=eu(P),$=function(L){var P=eu(L),O=/(\/\/)?([^?#/]+)/.exec(L.substr(P.length));if(!O)return{host:"",port:null};var F=O[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(F);if(R){var j=R[1];return{host:j,port:el(F.substr(j.length+1))}}var $=F.split(":"),ee=(0,Re.Z)($,2);return{host:ee[0],port:el(ee[1])}}(P),ee=$.host,oe=$.port,Te=null===oe?"":":".concat(oe);F.config.emulator={url:"".concat(j,"//").concat(ee).concat(Te,"/")},F.settings.appVerificationDisabledForTesting=!0,F.emulatorConfig=Object.freeze({host:ee,port:oe,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:R})}),function(L){function P(){var O=document.createElement("p"),F=O.style;O.innerText="Running in emulator mode. Do not use with production credentials.",F.position="fixed",F.width="100%",F.backgroundColor="#ffffff",F.border=".1em solid #000000",F.color="#b50000",F.bottom="0px",F.left="0px",F.margin="0px",F.zIndex="10000",F.textAlign="center",O.classList.add("firebase-emulator-warning"),document.body.appendChild(O)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!L&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",P):P())}(R)}function eu(L){var P=L.indexOf(":");return P<0?"":L.substr(0,P+1)}function el(L){if(!L)return null;var P=Number(L);return isNaN(P)?null:P}var wr=function(){function L(P,O){(0,v.Z)(this,L),this.providerId=P,this.signInMethod=O}return(0,be.Z)(L,[{key:"toJSON",value:function(){return Vt("not implemented")}},{key:"_getIdTokenResponse",value:function(O){return Vt("not implemented")}},{key:"_linkToIdToken",value:function(O,F){return Vt("not implemented")}},{key:"_getReauthenticationResolver",value:function(O){return Vt("not implemented")}}]),L}();function Jc(L,P){return es.apply(this,arguments)}function es(){return(es=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:resetPassword",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function nl(L,P){return vo.apply(this,arguments)}function vo(){return(vo=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:update",O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Js(L,P){return As.apply(this,arguments)}function As(){return(As=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:update",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Ro(L,P){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",Wi(P,"POST","/v1/accounts:signInWithPassword",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function oi(L,P){return ef.apply(this,arguments)}function ef(){return(ef=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:sendOobCode",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function kv(L,P){return wl.apply(this,arguments)}function wl(){return(wl=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",oi(P,O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function ac(L,P){return Du.apply(this,arguments)}function Du(){return(Du=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",oi(P,O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function sc(L,P){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",oi(P,O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function hs(L,P){return Ev.apply(this,arguments)}function Ev(){return(Ev=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",oi(P,O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Za(L,P){return Us.apply(this,arguments)}function Us(){return(Us=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",Wi(P,"POST","/v1/accounts:signInWithEmailLink",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function hd(L,P){return oc.apply(this,arguments)}function oc(){return(oc=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",Wi(P,"POST","/v1/accounts:signInWithEmailLink",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}var tf=function(L){(0,M.Z)(O,L);var F,P=(0,S.Z)(O);function O(F,R,j){var $,ee=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,v.Z)(this,O),($=P.call(this,"password",j))._email=F,$._password=R,$._tenantId=ee,$}return(0,be.Z)(O,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(F=(0,ke.Z)(Q().mark(function j($){return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:oe.t0=this.signInMethod,oe.next="password"===oe.t0?3:"emailLink"===oe.t0?4:5;break;case 3:return oe.abrupt("return",Ro($,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return oe.abrupt("return",Za($,{email:this._email,oobCode:this._password}));case 5:X($,"internal-error");case 6:case"end":return oe.stop()}},j,this)})),function(j){return F.apply(this,arguments)})},{key:"_linkToIdToken",value:function(){var F=(0,ke.Z)(Q().mark(function j($,ee){return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:Te.t0=this.signInMethod,Te.next="password"===Te.t0?3:"emailLink"===Te.t0?4:5;break;case 3:return Te.abrupt("return",nl($,{idToken:ee,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return Te.abrupt("return",hd($,{idToken:ee,email:this._email,oobCode:this._password}));case 5:X($,"internal-error");case 6:case"end":return Te.stop()}},j,this)}));return function(j,$){return F.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(R){return this._getIdTokenResponse(R)}}],[{key:"_fromEmailAndPassword",value:function(R,j){return new O(R,j,"password")}},{key:"_fromEmailAndCode",value:function(R,j){var $=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new O(R,j,"emailLink",$)}},{key:"fromJSON",value:function(R){var j="string"==typeof R?JSON.parse(R):R;if((null==j?void 0:j.email)&&(null==j?void 0:j.password)){if("password"===j.signInMethod)return this._fromEmailAndPassword(j.email,j.password);if("emailLink"===j.signInMethod)return this._fromEmailAndCode(j.email,j.password,j.tenantId)}return null}}]),O}(wr);function Ka(L,P){return dd.apply(this,arguments)}function dd(){return(dd=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",Wi(P,"POST","/v1/accounts:signInWithIdp",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}var kl=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(){var F;return(0,v.Z)(this,O),(F=P.apply(this,arguments)).pendingToken=null,F}return(0,be.Z)(O,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(R){return Ka(R,this.buildRequest())}},{key:"_linkToIdToken",value:function(R,j){var $=this.buildRequest();return $.idToken=j,Ka(R,$)}},{key:"_getReauthenticationResolver",value:function(R){var j=this.buildRequest();return j.autoCreate=!1,Ka(R,j)}},{key:"buildRequest",value:function(){var R={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)R.pendingToken=this.pendingToken;else{var j={};this.idToken&&(j.id_token=this.idToken),this.accessToken&&(j.access_token=this.accessToken),this.secret&&(j.oauth_token_secret=this.secret),j.providerId=this.providerId,this.nonce&&!this.pendingToken&&(j.nonce=this.nonce),R.postBody=(0,fe.xO)(j)}return R}}],[{key:"_fromParams",value:function(R){var j=new O(R.providerId,R.signInMethod);return R.idToken||R.accessToken?(R.idToken&&(j.idToken=R.idToken),R.accessToken&&(j.accessToken=R.accessToken),R.nonce&&!R.pendingToken&&(j.nonce=R.nonce),R.pendingToken&&(j.pendingToken=R.pendingToken)):R.oauthToken&&R.oauthTokenSecret?(j.accessToken=R.oauthToken,j.secret=R.oauthTokenSecret):X("argument-error"),j}},{key:"fromJSON",value:function(R){var j="string"==typeof R?JSON.parse(R):R,$=j.providerId,ee=j.signInMethod,oe=(0,Le._T)(j,["providerId","signInMethod"]);if(!$||!ee)return null;var Te=new O($,ee);return Object.assign(Te,oe),Te}}]),O}(wr);function Cv(L,P){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:sendVerificationCode",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function zf(){return(zf=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",Wi(P,"POST","/v1/accounts:signInWithPhoneNumber",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function vd(){return(vd=(0,ke.Z)(Q().mark(function L(P,O){var F;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Wi(P,"POST","/v1/accounts:signInWithPhoneNumber",Br(P,O));case 2:if(!(F=j.sent).temporaryProof){j.next=5;break}throw qa(P,"account-exists-with-different-credential",F);case 5:return j.abrupt("return",F);case 6:case"end":return j.stop()}},L)}))).apply(this,arguments)}var Sv=(0,ne.Z)({},"USER_NOT_FOUND","user-not-found");function pd(){return(pd=(0,ke.Z)(Q().mark(function L(P,O){var F;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return F=Object.assign(Object.assign({},O),{operation:"REAUTH"}),j.abrupt("return",Wi(P,"POST","/v1/accounts:signInWithPhoneNumber",Br(P,F),Sv));case 2:case"end":return j.stop()}},L)}))).apply(this,arguments)}var Tv=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F){var R;return(0,v.Z)(this,O),(R=P.call(this,"phone","phone")).params=F,R}return(0,be.Z)(O,[{key:"_getIdTokenResponse",value:function(R){return function(L,P){return zf.apply(this,arguments)}(R,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(R,j){return function(L,P){return vd.apply(this,arguments)}(R,Object.assign({idToken:j},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(R){return function(L,P){return pd.apply(this,arguments)}(R,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var R=this.params,j=R.temporaryProof,$=R.phoneNumber;return j&&$?{temporaryProof:j,phoneNumber:$}:{sessionInfo:R.verificationId,code:R.verificationCode}}},{key:"toJSON",value:function(){var R={providerId:this.providerId};return this.params.phoneNumber&&(R.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(R.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(R.verificationCode=this.params.verificationCode),this.params.verificationId&&(R.verificationId=this.params.verificationId),R}}],[{key:"_fromVerification",value:function(R,j){return new O({verificationId:R,verificationCode:j})}},{key:"_fromTokenResponse",value:function(R,j){return new O({phoneNumber:R,temporaryProof:j})}},{key:"fromJSON",value:function(R){"string"==typeof R&&(R=JSON.parse(R));var $=R.verificationId,ee=R.verificationCode,oe=R.phoneNumber,Te=R.temporaryProof;return ee||$||oe||Te?new O({verificationId:$,verificationCode:ee,phoneNumber:oe,temporaryProof:Te}):null}}]),O}(wr),uc=function(){function L(P){(0,v.Z)(this,L);var O,F,R,j,$,ee,oe=(0,fe.zd)((0,fe.pd)(P)),Te=null!==(O=oe.apiKey)&&void 0!==O?O:null,vt=null!==(F=oe.oobCode)&&void 0!==F?F:null,kt=function(L){switch(L){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=oe.mode)&&void 0!==R?R:null);rt(Te&&vt&&kt,"argument-error"),this.apiKey=Te,this.operation=kt,this.code=vt,this.continueUrl=null!==(j=oe.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==($=oe.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(ee=oe.tenantId)&&void 0!==ee?ee:null}return(0,be.Z)(L,null,[{key:"parseLink",value:function(O){var F=function(L){var P=(0,fe.zd)((0,fe.pd)(L)).link,O=P?(0,fe.zd)((0,fe.pd)(P)).deep_link_id:null,F=(0,fe.zd)((0,fe.pd)(L)).deep_link_id;return(F?(0,fe.zd)((0,fe.pd)(F)).link:null)||F||O||P||L}(O);try{return new L(F)}catch(R){return null}}}]),L}(),Mv=function(){var L=function(){function P(){(0,v.Z)(this,P),this.providerId=P.PROVIDER_ID}return(0,be.Z)(P,null,[{key:"credential",value:function(F,R){return tf._fromEmailAndPassword(F,R)}},{key:"credentialWithLink",value:function(F,R){var j=uc.parseLink(R);return rt(j,"argument-error"),tf._fromEmailAndCode(F,j.code,j.tenantId)}}]),P}();return L.PROVIDER_ID="password",L.EMAIL_PASSWORD_SIGN_IN_METHOD="password",L.EMAIL_LINK_SIGN_IN_METHOD="emailLink",L}(),rl=function(){function L(P){(0,v.Z)(this,L),this.providerId=P,this.defaultLanguageCode=null,this.customParameters={}}return(0,be.Z)(L,[{key:"setDefaultLanguage",value:function(O){this.defaultLanguageCode=O}},{key:"setCustomParameters",value:function(O){return this.customParameters=O,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),L}(),G=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(){var F;return(0,v.Z)(this,O),(F=P.apply(this,arguments)).scopes=[],F}return(0,be.Z)(O,[{key:"addScope",value:function(R){return this.scopes.includes(R)||this.scopes.push(R),this}},{key:"getScopes",value:function(){return(0,we.Z)(this.scopes)}}]),O}(rl),A=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(){return(0,v.Z)(this,O),P.apply(this,arguments)}return(0,be.Z)(O,[{key:"credential",value:function(R){return this._credential(R)}},{key:"_credential",value:function(R){return rt(R.idToken||R.accessToken,"argument-error"),kl._fromParams(Object.assign(Object.assign({},R),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(R){var j="string"==typeof R?JSON.parse(R):R;return rt("providerId"in j&&"signInMethod"in j,"argument-error"),kl._fromParams(j)}},{key:"credentialFromResult",value:function(R){return O.oauthCredentialFromTaggedObject(R)}},{key:"credentialFromError",value:function(R){return O.oauthCredentialFromTaggedObject(R.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(R){var j=R._tokenResponse;if(!j)return null;var $=j.oauthIdToken,ee=j.oauthAccessToken,Te=j.pendingToken,vt=j.nonce,kt=j.providerId;if(!ee&&!j.oauthTokenSecret&&!$&&!Te||!kt)return null;try{return new O(kt)._credential({idToken:$,accessToken:ee,rawNonce:vt,pendingToken:Te})}catch(Gn){return null}}}]),O}(G),V=function(){var L=function(P){(0,M.Z)(F,P);var O=(0,S.Z)(F);function F(){return(0,v.Z)(this,F),O.call(this,"facebook.com")}return(0,be.Z)(F,null,[{key:"credential",value:function(j){return kl._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.FACEBOOK_SIGN_IN_METHOD,accessToken:j})}},{key:"credentialFromResult",value:function(j){return F.credentialFromTaggedObject(j)}},{key:"credentialFromError",value:function(j){return F.credentialFromTaggedObject(j.customData||{})}},{key:"credentialFromTaggedObject",value:function(j){var $=j._tokenResponse;if(!$||!("oauthAccessToken"in $)||!$.oauthAccessToken)return null;try{return F.credential($.oauthAccessToken)}catch(ee){return null}}}]),F}(G);return L.FACEBOOK_SIGN_IN_METHOD="facebook.com",L.PROVIDER_ID="facebook.com",L}(),q=function(){var L=function(P){(0,M.Z)(F,P);var O=(0,S.Z)(F);function F(){var R;return(0,v.Z)(this,F),(R=O.call(this,"google.com")).addScope("profile"),R}return(0,be.Z)(F,null,[{key:"credential",value:function(j,$){return kl._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.GOOGLE_SIGN_IN_METHOD,idToken:j,accessToken:$})}},{key:"credentialFromResult",value:function(j){return F.credentialFromTaggedObject(j)}},{key:"credentialFromError",value:function(j){return F.credentialFromTaggedObject(j.customData||{})}},{key:"credentialFromTaggedObject",value:function(j){var $=j._tokenResponse;if(!$)return null;var ee=$.oauthIdToken,oe=$.oauthAccessToken;if(!ee&&!oe)return null;try{return F.credential(ee,oe)}catch(Te){return null}}}]),F}(G);return L.GOOGLE_SIGN_IN_METHOD="google.com",L.PROVIDER_ID="google.com",L}(),ie=function(){var L=function(P){(0,M.Z)(F,P);var O=(0,S.Z)(F);function F(){return(0,v.Z)(this,F),O.call(this,"github.com")}return(0,be.Z)(F,null,[{key:"credential",value:function(j){return kl._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.GITHUB_SIGN_IN_METHOD,accessToken:j})}},{key:"credentialFromResult",value:function(j){return F.credentialFromTaggedObject(j)}},{key:"credentialFromError",value:function(j){return F.credentialFromTaggedObject(j.customData||{})}},{key:"credentialFromTaggedObject",value:function(j){var $=j._tokenResponse;if(!$||!("oauthAccessToken"in $)||!$.oauthAccessToken)return null;try{return F.credential($.oauthAccessToken)}catch(ee){return null}}}]),F}(G);return L.GITHUB_SIGN_IN_METHOD="github.com",L.PROVIDER_ID="github.com",L}(),me=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F,R){var j;return(0,v.Z)(this,O),(j=P.call(this,F,F)).pendingToken=R,j}return(0,be.Z)(O,[{key:"_getIdTokenResponse",value:function(R){return Ka(R,this.buildRequest())}},{key:"_linkToIdToken",value:function(R,j){var $=this.buildRequest();return $.idToken=j,Ka(R,$)}},{key:"_getReauthenticationResolver",value:function(R){var j=this.buildRequest();return j.autoCreate=!1,Ka(R,j)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(R){var j="string"==typeof R?JSON.parse(R):R,$=j.providerId,ee=j.signInMethod,oe=j.pendingToken;return $&&ee&&oe&&$===ee?new O($,oe):null}},{key:"_create",value:function(R,j){return new O(R,j)}}]),O}(wr),Xe=function(){var L=function(P){(0,M.Z)(F,P);var O=(0,S.Z)(F);function F(){return(0,v.Z)(this,F),O.call(this,"twitter.com")}return(0,be.Z)(F,null,[{key:"credential",value:function(j,$){return kl._fromParams({providerId:F.PROVIDER_ID,signInMethod:F.TWITTER_SIGN_IN_METHOD,oauthToken:j,oauthTokenSecret:$})}},{key:"credentialFromResult",value:function(j){return F.credentialFromTaggedObject(j)}},{key:"credentialFromError",value:function(j){return F.credentialFromTaggedObject(j.customData||{})}},{key:"credentialFromTaggedObject",value:function(j){var $=j._tokenResponse;if(!$)return null;var ee=$.oauthAccessToken,oe=$.oauthTokenSecret;if(!ee||!oe)return null;try{return F.credential(ee,oe)}catch(Te){return null}}}]),F}(G);return L.TWITTER_SIGN_IN_METHOD="twitter.com",L.PROVIDER_ID="twitter.com",L}();function yt(L,P){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",Wi(P,"POST","/v1/accounts:signUp",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}var qt=function(){function L(P){(0,v.Z)(this,L),this.user=P.user,this.providerId=P.providerId,this._tokenResponse=P._tokenResponse,this.operationType=P.operationType}return(0,be.Z)(L,null,[{key:"_fromIdTokenResponse",value:(P=(0,ke.Z)(Q().mark(function F(R,j,$){var ee,oe,Te,vt,kt=arguments;return Q().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:return ee=kt.length>3&&void 0!==kt[3]&&kt[3],gn.next=3,Tt._fromIdTokenResponse(R,$,ee);case 3:return oe=gn.sent,Te=ut($),vt=new L({user:oe,providerId:Te,_tokenResponse:$,operationType:j}),gn.abrupt("return",vt);case 7:case"end":return gn.stop()}},F)})),function(F,R,j){return P.apply(this,arguments)})},{key:"_forOperation",value:function(){var P=(0,ke.Z)(Q().mark(function F(R,j,$){var ee;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,R._updateTokensIfNecessary($,!0);case 2:return ee=ut($),Te.abrupt("return",new L({user:R,providerId:ee,_tokenResponse:$,operationType:j}));case 4:case"end":return Te.stop()}},F)}));return function(F,R,j){return P.apply(this,arguments)}}()}]),L;var P}();function ut(L){return L.providerId?L.providerId:"phoneNumber"in L?"phone":null}function Jt(L){return On.apply(this,arguments)}function On(){return(On=(0,ke.Z)(Q().mark(function L(P){var O,F,R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return F=bi(P),ee.next=3,F._initializationPromise;case 3:if(!(null===(O=F.currentUser)||void 0===O?void 0:O.isAnonymous)){ee.next=5;break}return ee.abrupt("return",new qt({user:F.currentUser,providerId:null,operationType:"signIn"}));case 5:return ee.next=7,yt(F,{returnSecureToken:!0});case 7:return R=ee.sent,ee.next=10,qt._fromIdTokenResponse(F,"signIn",R,!0);case 10:return j=ee.sent,ee.next=13,F._updateCurrentUser(j.user);case 13:return ee.abrupt("return",j);case 14:case"end":return ee.stop()}},L)}))).apply(this,arguments)}var er=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F,R,j,$){var ee,oe;return(0,v.Z)(this,O),(ee=P.call(this,R.code,R.message)).operationType=j,ee.user=$,ee.name="FirebaseError",Object.setPrototypeOf((0,D.Z)(ee),O.prototype),ee.appName=F.name,ee.code=R.code,ee.tenantId=null!==(oe=F.tenantId)&&void 0!==oe?oe:void 0,ee.serverResponse=R.customData.serverResponse,ee}return(0,be.Z)(O,null,[{key:"_fromErrorAndOperation",value:function(R,j,$,ee){return new O(R,j,$,ee)}}]),O}(fe.ZR);function di(L,P,O,F){return("reauthenticate"===P?O._getReauthenticationResolver(L):O._getIdTokenResponse(L)).catch(function(j){throw j.code==="auth/".concat("multi-factor-auth-required")?er._fromErrorAndOperation(L,j,P,F):j})}function Ta(L){return new Set(L.map(function(P){return P.providerId}).filter(function(P){return!!P}))}function po(L,P){return zr.apply(this,arguments)}function zr(){return(zr=(0,ke.Z)(Q().mark(function L(P,O){var F,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return F=(0,fe.m9)(P),oe.next=3,Pu(!0,F,O);case 3:return oe.t0=Zn,oe.t1=F.auth,oe.next=7,F.getIdToken();case 7:return oe.t2=oe.sent,oe.t3=[O],oe.t4={idToken:oe.t2,deleteProvider:oe.t3},oe.next=12,(0,oe.t0)(oe.t1,oe.t4);case 12:return $=Ta(oe.sent.providerUserInfo||[]),F.providerData=F.providerData.filter(function(Te){return $.has(Te.providerId)}),$.has("phone")||(F.phoneNumber=null),oe.next=19,F.auth._persistUserIfCurrent(F);case 19:return oe.abrupt("return",F);case 20:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function ia(L,P){return An.apply(this,arguments)}function An(){return(An=(0,ke.Z)(Q().mark(function L(P,O){var F,j=arguments;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return F=j.length>2&&void 0!==j[2]&&j[2],ee.t0=gi,ee.t1=P,ee.t2=O,ee.t3=P.auth,ee.next=7,P.getIdToken();case 7:return ee.t4=ee.sent,ee.t5=ee.t2._linkToIdToken.call(ee.t2,ee.t3,ee.t4),ee.t6=F,ee.next=12,(0,ee.t0)(ee.t1,ee.t5,ee.t6);case 12:return ee.abrupt("return",qt._forOperation(P,"link",ee.sent));case 14:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function Pu(L,P,O){return $i.apply(this,arguments)}function $i(){return($i=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,Nt(O);case 2:R=Ta(O.providerData),j=!1===P?"provider-already-linked":"no-such-provider",rt(R.has(F)===P,O.auth,j);case 5:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function va(L,P){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,ke.Z)(Q().mark(function L(P,O){var F,R,j,$,ee,Te=arguments;return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return F=Te.length>2&&void 0!==Te[2]&&Te[2],R=P.auth,j="reauthenticate",kt.prev=3,kt.next=6,gi(P,di(R,j,O,P),F);case 6:return rt(($=kt.sent).idToken,R,"internal-error"),rt(ee=Do($.idToken),R,"internal-error"),rt(P.uid===ee.sub,R,"user-mismatch"),kt.abrupt("return",qt._forOperation(P,j,$));case 15:throw kt.prev=15,kt.t0=kt.catch(3),(null==kt.t0?void 0:kt.t0.code)==="auth/".concat("user-not-found")&&X(R,"user-mismatch"),kt.t0;case 19:case"end":return kt.stop()}},L,null,[[3,15]])}))).apply(this,arguments)}function El(L,P){return mo.apply(this,arguments)}function mo(){return(mo=(0,ke.Z)(Q().mark(function L(P,O){var F,R,j,$,ee=arguments;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return F=ee.length>2&&void 0!==ee[2]&&ee[2],R="signIn",Te.next=4,di(P,R,O);case 4:return j=Te.sent,Te.next=7,qt._fromIdTokenResponse(P,R,j);case 7:if($=Te.sent,F){Te.next=11;break}return Te.next=11,P._updateCurrentUser($.user);case 11:return Te.abrupt("return",$);case 12:case"end":return Te.stop()}},L)}))).apply(this,arguments)}function yu(L,P){return aa.apply(this,arguments)}function aa(){return(aa=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",El(bi(P),O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Po(L,P){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,ke.Z)(Q().mark(function L(P,O){var F;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return F=(0,fe.m9)(P),j.next=3,Pu(!1,F,O.providerId);case 3:return j.abrupt("return",ia(F,O));case 4:case"end":return j.stop()}},L)}))).apply(this,arguments)}function sa(L,P){return xs.apply(this,arguments)}function xs(){return(xs=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",va((0,fe.m9)(P),O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function il(L,P){return al.apply(this,arguments)}function al(){return(al=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",Wi(P,"POST","/v1/accounts:signInWithCustomToken",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Si(L,P){return Is.apply(this,arguments)}function Is(){return(Is=(0,ke.Z)(Q().mark(function L(P,O){var F,R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return F=bi(P),ee.next=3,il(F,{token:O,returnSecureToken:!0});case 3:return R=ee.sent,ee.next=6,qt._fromIdTokenResponse(F,"signIn",R);case 6:return j=ee.sent,ee.next=9,F._updateCurrentUser(j.user);case 9:return ee.abrupt("return",j);case 10:case"end":return ee.stop()}},L)}))).apply(this,arguments)}var lc=function(){function L(P,O){(0,v.Z)(this,L),this.factorId=P,this.uid=O.mfaEnrollmentId,this.enrollmentTime=new Date(O.enrolledAt).toUTCString(),this.displayName=O.displayName}return(0,be.Z)(L,null,[{key:"_fromServerResponse",value:function(O,F){return"phoneInfo"in F?jf._fromServerResponse(O,F):X(O,"internal-error")}}]),L}(),jf=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F){var R;return(0,v.Z)(this,O),(R=P.call(this,"phone",F)).phoneNumber=F.phoneInfo,R}return(0,be.Z)(O,null,[{key:"_fromServerResponse",value:function(R,j){return new O(j)}}]),O}(lc);function pr(L,P,O){var F;rt((null===(F=O.url)||void 0===F?void 0:F.length)>0,L,"invalid-continue-uri"),rt(void 0===O.dynamicLinkDomain||O.dynamicLinkDomain.length>0,L,"invalid-dynamic-link-domain"),P.continueUrl=O.url,P.dynamicLinkDomain=O.dynamicLinkDomain,P.canHandleCodeInApp=O.handleCodeInApp,O.iOS&&(rt(O.iOS.bundleId.length>0,L,"missing-ios-bundle-id"),P.iOSBundleId=O.iOS.bundleId),O.android&&(rt(O.android.packageName.length>0,L,"missing-android-pkg-name"),P.androidInstallApp=O.android.installApp,P.androidMinimumVersionCode=O.android.minimumVersion,P.androidPackageName=O.android.packageName)}function Cl(L,P,O){return cc.apply(this,arguments)}function cc(){return(cc=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return R=(0,fe.m9)(P),j={requestType:"PASSWORD_RESET",email:O},F&&pr(R,j,F),ee.next=5,ac(R,j);case 5:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function Wf(L,P,O){return qf.apply(this,arguments)}function qf(){return(qf=(0,ke.Z)(Q().mark(function L(P,O,F){return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Jc((0,fe.m9)(P),{oobCode:O,newPassword:F});case 2:case"end":return j.stop()}},L)}))).apply(this,arguments)}function fc(L,P){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Js((0,fe.m9)(P),{oobCode:O});case 2:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Sl(L,P){return jt.apply(this,arguments)}function jt(){return(jt=(0,ke.Z)(Q().mark(function L(P,O){var F,R,j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return F=(0,fe.m9)(P),oe.next=3,Jc(F,{oobCode:O});case 3:rt(j=(R=oe.sent).requestType,F,"internal-error"),oe.t0=j,oe.next="EMAIL_SIGNIN"===oe.t0?9:"VERIFY_AND_CHANGE_EMAIL"===oe.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===oe.t0?12:13;break;case 9:return oe.abrupt("break",14);case 10:return rt(R.newEmail,F,"internal-error"),oe.abrupt("break",14);case 12:rt(R.mfaInfo,F,"internal-error");case 13:rt(R.email,F,"internal-error");case 14:return $=null,R.mfaInfo&&($=lc._fromServerResponse(bi(F),R.mfaInfo)),oe.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.newEmail:R.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===R.requestType?R.email:R.newEmail)||null,multiFactorInfo:$},operation:j});case 17:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function ei(L,P){return nf.apply(this,arguments)}function nf(){return(nf=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Sl((0,fe.m9)(P),O);case 2:return $.abrupt("return",$.sent.data.email);case 5:case"end":return $.stop()}},L)}))).apply(this,arguments)}function pa(L,P,O){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return R=bi(P),oe.next=3,yt(R,{returnSecureToken:!0,email:O,password:F});case 3:return j=oe.sent,oe.next=6,qt._fromIdTokenResponse(R,"signIn",j);case 6:return $=oe.sent,oe.next=9,R._updateCurrentUser($.user);case 9:return oe.abrupt("return",$);case 10:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function Tl(L,P,O){return yu((0,fe.m9)(L),Mv.credential(P,O))}function ts(L,P,O){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return R=(0,fe.m9)(P),j={requestType:"EMAIL_SIGNIN",email:O},rt(F.handleCodeInApp,R,"argument-error"),F&&pr(R,j,F),ee.next=6,sc(R,j);case 6:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function rf(L,P){var O=uc.parseLink(P);return"EMAIL_SIGNIN"===(null==O?void 0:O.operation)}function S_(L,P,O){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return R=(0,fe.m9)(P),rt((j=Mv.credentialWithLink(O,F||Ri()))._tenantId===(R.tenantId||null),R,"tenant-id-mismatch"),ee.abrupt("return",yu(R,j));case 4:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function hc(L,P){return vi.apply(this,arguments)}function vi(){return(vi=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:createAuthUri",Br(P,O)));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function ns(L,P){return ma.apply(this,arguments)}function ma(){return(ma=(0,ke.Z)(Q().mark(function L(P,O){var F,R;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return F=mu()?Ri():"http://localhost",R={identifier:O,continueUri:F},oe.next=4,hc((0,fe.m9)(P),R);case 4:return oe.abrupt("return",oe.sent.signinMethods||[]);case 7:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function Lo(L,P){return _u.apply(this,arguments)}function _u(){return(_u=(0,ke.Z)(Q().mark(function L(P,O){var F,j;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return F=(0,fe.m9)(P),Te.next=3,P.getIdToken();case 3:return j={requestType:"VERIFY_EMAIL",idToken:Te.sent},O&&pr(F.auth,j,O),Te.next=8,kv(F.auth,j);case 8:if(Te.sent.email===P.email){Te.next=13;break}return Te.next=13,P.reload();case 13:case"end":return Te.stop()}},L)}))).apply(this,arguments)}function bu(L,P,O){return md.apply(this,arguments)}function md(){return(md=(0,ke.Z)(Q().mark(function L(P,O,F){var R,$;return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return R=(0,fe.m9)(P),vt.next=3,P.getIdToken();case 3:return $={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:vt.sent,newEmail:O},F&&pr(R.auth,$,F),vt.next=8,hs(R.auth,$);case 8:if(vt.sent.email===P.email){vt.next=13;break}return vt.next=13,P.reload();case 13:case"end":return vt.stop()}},L)}))).apply(this,arguments)}function $f(L,P){return af.apply(this,arguments)}function af(){return(af=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",ha(P,"POST","/v1/accounts:update",O));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function Al(L,P){return xl.apply(this,arguments)}function xl(){return(xl=(0,ke.Z)(Q().mark(function L(P,O){var F,R,j,ee,oe,Te;return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(R=O.photoURL,void 0!==(F=O.displayName)||void 0!==R){kt.next=3;break}return kt.abrupt("return");case 3:return j=(0,fe.m9)(P),kt.next=6,j.getIdToken();case 6:return ee={idToken:kt.sent,displayName:F,photoUrl:R,returnSecureToken:!0},kt.next=10,gi(j,$f(j.auth,ee));case 10:return j.displayName=(oe=kt.sent).displayName||null,j.photoURL=oe.photoUrl||null,(Te=j.providerData.find(function(Gn){return"password"===Gn.providerId}))&&(Te.displayName=j.displayName,Te.photoURL=j.photoURL),kt.next=17,j._updateTokensIfNecessary(oe);case 17:case"end":return kt.stop()}},L)}))).apply(this,arguments)}function Xf(L,P){return Il((0,fe.m9)(L),P,null)}function Qf(L,P){return Il((0,fe.m9)(L),null,P)}function Il(L,P,O){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,ke.Z)(Q().mark(function L(P,O,F){var R,$,ee;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return R=P.auth,Te.next=3,P.getIdToken();case 3:return $={idToken:Te.sent,returnSecureToken:!0},O&&($.email=O),F&&($.password=F),Te.next=9,gi(P,nl(R,$));case 9:return ee=Te.sent,Te.next=12,P._updateTokensIfNecessary(ee,!0);case 12:case"end":return Te.stop()}},L)}))).apply(this,arguments)}var No=function L(P,O){var F=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,v.Z)(this,L),this.isNewUser=P,this.providerId=O,this.profile=F},sf=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F,R,j,$){var ee;return(0,v.Z)(this,O),(ee=P.call(this,F,R,j)).username=$,ee}return O}(No),of=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F,R){return(0,v.Z)(this,O),P.call(this,F,"facebook.com",R)}return O}(No),Av=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F,R){return(0,v.Z)(this,O),P.call(this,F,"github.com",R,"string"==typeof(null==R?void 0:R.login)?null==R?void 0:R.login:null)}return O}(sf),Ge=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F,R){return(0,v.Z)(this,O),P.call(this,F,"google.com",R)}return O}(No),Ce=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F,R,j){return(0,v.Z)(this,O),P.call(this,F,"twitter.com",R,j)}return O}(sf);function it(L){var O=L._tokenResponse;return L.user.isAnonymous&&!O?{providerId:null,isNewUser:!1,profile:null}:function(L){var P,O;if(!L)return null;var F=L.providerId,R=L.rawUserInfo?JSON.parse(L.rawUserInfo):{},j=L.isNewUser||"identitytoolkit#SignupNewUserResponse"===L.kind;if(!F&&(null==L?void 0:L.idToken)){var $=null===(O=null===(P=Do(L.idToken))||void 0===P?void 0:P.firebase)||void 0===O?void 0:O.sign_in_provider;if($)return new No(j,"anonymous"!==$&&"custom"!==$?$:null)}if(!F)return null;switch(F){case"facebook.com":return new of(j,R);case"github.com":return new Av(j,R);case"google.com":return new Ge(j,R);case"twitter.com":return new Ce(j,R,L.screenName||null);case"custom":case"anonymous":return new No(j,null);default:return new No(j,F,R)}}(O)}var vr=function(){function L(P,O){(0,v.Z)(this,L),this.type=P,this.credential=O}return(0,be.Z)(L,[{key:"toJSON",value:function(){return{multiFactorSession:(0,ne.Z)({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(O){return new L("enroll",O)}},{key:"_fromMfaPendingCredential",value:function(O){return new L("signin",O)}},{key:"fromJSON",value:function(O){var F,R;if(null==O?void 0:O.multiFactorSession){if(null===(F=O.multiFactorSession)||void 0===F?void 0:F.pendingCredential)return L._fromMfaPendingCredential(O.multiFactorSession.pendingCredential);if(null===(R=O.multiFactorSession)||void 0===R?void 0:R.idToken)return L._fromIdtoken(O.multiFactorSession.idToken)}return null}}]),L}(),Kr=function(){function L(P,O,F){(0,v.Z)(this,L),this.session=P,this.hints=O,this.signInResolver=F}return(0,be.Z)(L,[{key:"resolveSignIn",value:(P=(0,ke.Z)(Q().mark(function F(R){return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",this.signInResolver(R));case 2:case"end":return ee.stop()}},F,this)})),function(F){return P.apply(this,arguments)})}],[{key:"_fromError",value:function(O,F){var R=bi(O),j=(F.serverResponse.mfaInfo||[]).map(function(ee){return lc._fromServerResponse(R,ee)});rt(F.serverResponse.mfaPendingCredential,R,"internal-error");var $=vr._fromMfaPendingCredential(F.serverResponse.mfaPendingCredential);return new L($,j,function(){var ee=(0,ke.Z)(Q().mark(function oe(Te){var vt,kt,Gn;return Q().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return bn.next=2,Te._process(R,$);case 2:vt=bn.sent,delete F.serverResponse.mfaInfo,delete F.serverResponse.mfaPendingCredential,kt=Object.assign(Object.assign({},F.serverResponse),{idToken:vt.idToken,refreshToken:vt.refreshToken}),bn.t0=F.operationType,bn.next="signIn"===bn.t0?9:"reauthenticate"===bn.t0?15:17;break;case 9:return bn.next=11,qt._fromIdTokenResponse(R,F.operationType,kt);case 11:return Gn=bn.sent,bn.next=14,R._updateCurrentUser(Gn.user);case 14:return bn.abrupt("return",Gn);case 15:return rt(F.user,R,"internal-error"),bn.abrupt("return",qt._forOperation(F.user,F.operationType,kt));case 17:X(R,"internal-error");case 18:case"end":return bn.stop()}},oe)}));return function(oe){return ee.apply(this,arguments)}}())}}]),L;var P}();function Ui(L,P){var O,F=(0,fe.m9)(L),R=P;return rt(P.operationType,F,"argument-error"),rt(null===(O=R.serverResponse)||void 0===O?void 0:O.mfaPendingCredential,F,"argument-error"),Kr._fromError(F,R)}function zi(L,P){return ha(L,"POST","/v2/accounts/mfaEnrollment:start",Br(L,P))}function Ma(L,P){return ha(L,"POST","/v2/accounts/mfaEnrollment:withdraw",Br(L,P))}var $a=function(){function L(P){var O=this;(0,v.Z)(this,L),this.user=P,this.enrolledFactors=[],P._onReload(function(F){F.mfaInfo&&(O.enrolledFactors=F.mfaInfo.map(function(R){return lc._fromServerResponse(P.auth,R)}))})}return(0,be.Z)(L,[{key:"getSession",value:(P=(0,ke.Z)(Q().mark(function F(){return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.t0=vr,j.next=3,this.user.getIdToken();case 3:return j.t1=j.sent,j.abrupt("return",j.t0._fromIdtoken.call(j.t0,j.t1));case 5:case"end":return j.stop()}},F,this)})),function(){return P.apply(this,arguments)})},{key:"enroll",value:function(){var P=(0,ke.Z)(Q().mark(function F(R,j){var $,ee,oe;return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return $=R,vt.next=3,this.getSession();case 3:return ee=vt.sent,vt.next=6,gi(this.user,$._process(this.user.auth,ee,j));case 6:return oe=vt.sent,vt.next=9,this.user._updateTokensIfNecessary(oe);case 9:return vt.abrupt("return",this.user.reload());case 10:case"end":return vt.stop()}},F,this)}));return function(F,R){return P.apply(this,arguments)}}()},{key:"unenroll",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j,$,ee;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return j="string"==typeof R?R:R.uid,Te.next=3,this.user.getIdToken();case 3:return $=Te.sent,Te.next=6,gi(this.user,Ma(this.user.auth,{idToken:$,mfaEnrollmentId:j}));case 6:return ee=Te.sent,this.enrolledFactors=this.enrolledFactors.filter(function(vt){return vt.uid!==j}),Te.next=10,this.user._updateTokensIfNecessary(ee);case 10:return Te.prev=10,Te.next=13,this.user.reload();case 13:Te.next=19;break;case 15:if(Te.prev=15,Te.t0=Te.catch(10),Te.t0.code==="auth/".concat("user-token-expired")){Te.next=19;break}throw Te.t0;case 19:case"end":return Te.stop()}},F,this,[[10,15]])}));return function(F){return P.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(O){return new L(O)}}]),L;var P}(),Xi=new WeakMap;function ds(L){var P=(0,fe.m9)(L);return Xi.has(P)||Xi.set(P,$a._fromUser(P)),Xi.get(P)}var tu="__sak",dc=function(){function L(P,O){(0,v.Z)(this,L),this.storage=P,this.type=O}return(0,be.Z)(L,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(tu,"1"),this.storage.removeItem(tu),Promise.resolve(!0)):Promise.resolve(!1)}catch(O){return Promise.resolve(!1)}}},{key:"_set",value:function(O,F){return this.storage.setItem(O,JSON.stringify(F)),Promise.resolve()}},{key:"_get",value:function(O){var F=this.storage.getItem(O);return Promise.resolve(F?JSON.parse(F):null)}},{key:"_remove",value:function(O){return this.storage.removeItem(O),Promise.resolve()}}]),L}(),Bk=function(){var L=function(P){(0,M.Z)(F,P);var R,O=(0,S.Z)(F);function F(){var R;return(0,v.Z)(this,F),(R=O.call(this,window.localStorage,"LOCAL")).boundEventHandler=function(j,$){return R.onStorageEvent(j,$)},R.listeners={},R.localCache={},R.pollTimer=null,R.safariLocalStorageNotSynced=function(){var L=(0,fe.z$)();return pn(L)||_i(L)}()&&function(){try{return!(!window||window===window.top)}catch(L){return!1}}(),R.fallbackToPolling=Ca(),R._shouldAllowMigration=!0,R}return(0,be.Z)(F,[{key:"forAllChangedKeys",value:function(j){for(var $=0,ee=Object.keys(this.listeners);$<ee.length;$++){var oe=ee[$],Te=this.storage.getItem(oe),vt=this.localCache[oe];Te!==vt&&j(oe,vt,Te)}}},{key:"onStorageEvent",value:function(j){var $=this,ee=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(j.key){var oe=j.key;if(ee?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var Te=this.storage.getItem(oe);if(j.newValue!==Te)null!==j.newValue?this.storage.setItem(oe,j.newValue):this.storage.removeItem(oe);else if(this.localCache[oe]===j.newValue&&!ee)return}var vt=function(){var gn=$.storage.getItem(oe);!ee&&$.localCache[oe]===gn||$.notifyListeners(oe,gn)},kt=this.storage.getItem(oe);Qc()&&kt!==j.newValue&&j.newValue!==j.oldValue?setTimeout(vt,10):vt()}else this.forAllChangedKeys(function(Gn,gn,bn){$.notifyListeners(Gn,bn)})}},{key:"notifyListeners",value:function(j,$){this.localCache[j]=$;var ee=this.listeners[j];if(ee)for(var oe=0,Te=Array.from(ee);oe<Te.length;oe++)(0,Te[oe])($&&JSON.parse($))}},{key:"startPolling",value:function(){var j=this;this.stopPolling(),this.pollTimer=setInterval(function(){j.forAllChangedKeys(function($,ee,oe){j.onStorageEvent(new StorageEvent("storage",{key:$,oldValue:ee,newValue:oe}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(j,$){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[j]||(this.listeners[j]=new Set,this.localCache[j]=this.storage.getItem(j)),this.listeners[j].add($)}},{key:"_removeListener",value:function(j,$){this.listeners[j]&&(this.listeners[j].delete($),0===this.listeners[j].size&&delete this.listeners[j]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(R=(0,ke.Z)(Q().mark(function $(ee,oe){return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.next=2,(0,_e.Z)((0,de.Z)(F.prototype),"_set",this).call(this,ee,oe);case 2:this.localCache[ee]=JSON.stringify(oe);case 3:case"end":return vt.stop()}},$,this)})),function($,ee){return R.apply(this,arguments)})},{key:"_get",value:function(){var R=(0,ke.Z)(Q().mark(function $(ee){var oe;return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return vt.next=2,(0,_e.Z)((0,de.Z)(F.prototype),"_get",this).call(this,ee);case 2:return oe=vt.sent,this.localCache[ee]=JSON.stringify(oe),vt.abrupt("return",oe);case 5:case"end":return vt.stop()}},$,this)}));return function($){return R.apply(this,arguments)}}()},{key:"_remove",value:function(){var R=(0,ke.Z)(Q().mark(function $(ee){return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,(0,_e.Z)((0,de.Z)(F.prototype),"_remove",this).call(this,ee);case 2:delete this.localCache[ee];case 3:case"end":return Te.stop()}},$,this)}));return function($){return R.apply(this,arguments)}}()}]),F}(dc);return L.type="LOCAL",L}(),Uk=function(){var L=function(P){(0,M.Z)(F,P);var O=(0,S.Z)(F);function F(){return(0,v.Z)(this,F),O.call(this,window.sessionStorage,"SESSION")}return(0,be.Z)(F,[{key:"_addListener",value:function(j,$){}},{key:"_removeListener",value:function(j,$){}}]),F}(dc);return L.type="SESSION",L}();function yd(L){return Promise.all(L.map(function(){var P=(0,ke.Z)(Q().mark(function O(F){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.prev=0,$.next=3,F;case 3:return $.abrupt("return",{fulfilled:!0,value:$.sent});case 7:return $.prev=7,$.t0=$.catch(0),$.abrupt("return",{fulfilled:!1,reason:$.t0});case 10:case"end":return $.stop()}},O,null,[[0,7]])}));return function(O){return P.apply(this,arguments)}}()))}var Vk=function(){var L=function(){function P(O){(0,v.Z)(this,P),this.eventTarget=O,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,be.Z)(P,[{key:"isListeningto",value:function(F){return this.eventTarget===F}},{key:"handleEvent",value:(O=(0,ke.Z)(Q().mark(function R(j){var $,ee,oe,Te,vt,kt,Gn;return Q().wrap(function(or){for(;;)switch(or.prev=or.next){case 0:if(oe=(ee=($=j).data).eventId,vt=ee.data,null==(kt=this.handlersMap[Te=ee.eventType])?void 0:kt.size){or.next=5;break}return or.abrupt("return");case 5:return $.ports[0].postMessage({status:"ack",eventId:oe,eventType:Te}),Gn=Array.from(kt).map(function(){var Qi=(0,ke.Z)(Q().mark(function Li(wu){return Q().wrap(function(is){for(;;)switch(is.prev=is.next){case 0:return is.abrupt("return",wu($.origin,vt));case 1:case"end":return is.stop()}},Li)}));return function(Li){return Qi.apply(this,arguments)}}()),or.next=9,yd(Gn);case 9:$.ports[0].postMessage({status:"done",eventId:oe,eventType:Te,response:or.sent});case 11:case"end":return or.stop()}},R,this)})),function(R){return O.apply(this,arguments)})},{key:"_subscribe",value:function(F,R){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[F]||(this.handlersMap[F]=new Set),this.handlersMap[F].add(R)}},{key:"_unsubscribe",value:function(F,R){this.handlersMap[F]&&R&&this.handlersMap[F].delete(R),(!R||0===this.handlersMap[F].size)&&delete this.handlersMap[F],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(F){var R=this.receivers.find(function($){return $.isListeningto(F)});if(R)return R;var j=new P(F);return this.receivers.push(j),j}}]),P;var O}();return L.receivers=[],L}();function eh(){for(var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,O="",F=0;F<P;F++)O+=Math.floor(10*Math.random());return L+O}var eg=function(){function L(P){(0,v.Z)(this,L),this.target=P,this.handlers=new Set}return(0,be.Z)(L,[{key:"removeMessageHandler",value:function(O){O.messageChannel&&(O.messageChannel.port1.removeEventListener("message",O.onMessage),O.messageChannel.port1.close()),this.handlers.delete(O)}},{key:"_send",value:(P=(0,ke.Z)(Q().mark(function F(R,j){var ee,oe,Te,vt,$=this,kt=arguments;return Q().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:if(ee=kt.length>2&&void 0!==kt[2]?kt[2]:50,oe="undefined"!=typeof MessageChannel?new MessageChannel:null){gn.next=4;break}throw new Error("connection_unavailable");case 4:return gn.abrupt("return",new Promise(function(bn,or){var Qi=eh("",20);oe.port1.start();var Li=setTimeout(function(){or(new Error("unsupported_event"))},ee);$.handlers.add(vt={messageChannel:oe,onMessage:function(Or){var is=Or;if(is.data.eventId===Qi)switch(is.data.status){case"ack":clearTimeout(Li),Te=setTimeout(function(){or(new Error("timeout"))},3e3);break;case"done":clearTimeout(Te),bn(is.data.response);break;default:clearTimeout(Li),clearTimeout(Te),or(new Error("invalid_response"))}}}),oe.port1.addEventListener("message",vt.onMessage),$.target.postMessage({eventType:R,eventId:Qi,data:j},[oe.port2])}).finally(function(){vt&&$.removeMessageHandler(vt)}));case 5:case"end":return gn.stop()}},F)})),function(F,R){return P.apply(this,arguments)})}]),L;var P}();function rs(){return window}function Hk(L){rs().location.href=L}function vc(){return void 0!==rs().WorkerGlobalScope&&"function"==typeof rs().importScripts}function YA(){return uf.apply(this,arguments)}function uf(){return(uf=(0,ke.Z)(Q().mark(function L(){return Q().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(null==navigator?void 0:navigator.serviceWorker){F.next=2;break}return F.abrupt("return",null);case 2:return F.prev=2,F.next=5,navigator.serviceWorker.ready;case 5:return F.abrupt("return",F.sent.active);case 9:return F.prev=9,F.t0=F.catch(2),F.abrupt("return",null);case 12:case"end":return F.stop()}},L,null,[[2,9]])}))).apply(this,arguments)}function T_(){var L;return(null===(L=null==navigator?void 0:navigator.serviceWorker)||void 0===L?void 0:L.controller)||null}var zk="firebaseLocalStorageDb",_d="firebaseLocalStorage",sl="fbase_key",Dl=function(){function L(P){(0,v.Z)(this,L),this.request=P}return(0,be.Z)(L,[{key:"toPromise",value:function(){var O=this;return new Promise(function(F,R){O.request.addEventListener("success",function(){F(O.request.result)}),O.request.addEventListener("error",function(){R(O.request.error)})})}}]),L}();function Zo(L,P){return L.transaction([_d],P?"readwrite":"readonly").objectStore(_d)}function M_(){var L=indexedDB.deleteDatabase(zk);return new Dl(L).toPromise()}function th(){var L=indexedDB.open(zk,1);return new Promise(function(P,O){L.addEventListener("error",function(){O(L.error)}),L.addEventListener("upgradeneeded",function(){var F=L.result;try{F.createObjectStore(_d,{keyPath:sl})}catch(R){O(R)}}),L.addEventListener("success",(0,ke.Z)(Q().mark(function F(){var R;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:if((R=L.result).objectStoreNames.contains(_d)){$.next=12;break}return R.close(),$.next=5,M_();case 5:return $.t0=P,$.next=8,th();case 8:$.t1=$.sent,(0,$.t0)($.t1),$.next=13;break;case 12:P(R);case 13:case"end":return $.stop()}},F)})))})}function Vs(L,P,O){return nu.apply(this,arguments)}function nu(){return(nu=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return j=Zo(P,!0).put(((0,ne.Z)(R={},sl,O),(0,ne.Z)(R,"value",F),R)),ee.abrupt("return",new Dl(j).toPromise());case 2:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function KA(L,P){return ol.apply(this,arguments)}function ol(){return(ol=(0,ke.Z)(Q().mark(function L(P,O){var F,R;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return F=Zo(P,!1).get(O),$.next=3,new Dl(F).toPromise();case 3:return $.abrupt("return",void 0===(R=$.sent)?null:R.value);case 5:case"end":return $.stop()}},L)}))).apply(this,arguments)}function A_(L,P){var O=Zo(L,!0).delete(P);return new Dl(O).toPromise()}var Wk=function(){var L=function(){function P(){(0,v.Z)(this,P),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return(0,be.Z)(P,[{key:"_openDb",value:(O=(0,ke.Z)(Q().mark(function R(){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!this.db){$.next=2;break}return $.abrupt("return",this.db);case 2:return $.next=4,th();case 4:return this.db=$.sent,$.abrupt("return",this.db);case 6:case"end":return $.stop()}},R,this)})),function(){return O.apply(this,arguments)})},{key:"_withRetries",value:function(){var O=(0,ke.Z)(Q().mark(function R(j){var $,ee;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:$=0;case 1:return Te.prev=2,Te.next=5,this._openDb();case 5:return ee=Te.sent,Te.next=8,j(ee);case 8:return Te.abrupt("return",Te.sent);case 11:if(Te.prev=11,Te.t0=Te.catch(2),!($++>3)){Te.next=15;break}throw Te.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:Te.next=1;break;case 18:case"end":return Te.stop()}},R,this,[[2,11]])}));return function(R){return O.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var O=(0,ke.Z)(Q().mark(function R(){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",vc()?this.initializeReceiver():this.initializeSender());case 1:case"end":return $.stop()}},R,this)}));return function(){return O.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var O=(0,ke.Z)(Q().mark(function R(){var j=this;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:this.receiver=Vk._getInstance(vc()?self:null),this.receiver._subscribe("keyChanged",function(){var oe=(0,ke.Z)(Q().mark(function Te(vt,kt){return Q().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return bn.next=2,j._poll();case 2:return bn.abrupt("return",{keyProcessed:bn.sent.includes(kt.key)});case 4:case"end":return bn.stop()}},Te)}));return function(Te,vt){return oe.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var oe=(0,ke.Z)(Q().mark(function Te(vt,kt){return Q().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:return gn.abrupt("return",["keyChanged"]);case 1:case"end":return gn.stop()}},Te)}));return function(Te,vt){return oe.apply(this,arguments)}}());case 3:case"end":return ee.stop()}},R,this)}));return function(){return O.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var O=(0,ke.Z)(Q().mark(function R(){var j,$,ee;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,YA();case 2:if(this.activeServiceWorker=Te.sent,this.activeServiceWorker){Te.next=5;break}return Te.abrupt("return");case 5:return this.sender=new eg(this.activeServiceWorker),Te.next=8,this.sender._send("ping",{},800);case 8:if(ee=Te.sent){Te.next=11;break}return Te.abrupt("return");case 11:(null===(j=ee[0])||void 0===j?void 0:j.fulfilled)&&(null===($=ee[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return Te.stop()}},R,this)}));return function(){return O.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var O=(0,ke.Z)(Q().mark(function R(j){return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(this.sender&&this.activeServiceWorker&&T_()===this.activeServiceWorker){ee.next=2;break}return ee.abrupt("return");case 2:return ee.prev=2,ee.next=5,this.sender._send("keyChanged",{key:j},this.serviceWorkerReceiverAvailable?800:50);case 5:ee.next=9;break;case 7:ee.prev=7,ee.t0=ee.catch(2);case 9:case"end":return ee.stop()}},R,this,[[2,7]])}));return function(R){return O.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var O=(0,ke.Z)(Q().mark(function R(){var j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(ee.prev=0,indexedDB){ee.next=3;break}return ee.abrupt("return",!1);case 3:return ee.next=5,th();case 5:return j=ee.sent,ee.next=8,Vs(j,tu,"1");case 8:return ee.next=10,A_(j,tu);case 10:return ee.abrupt("return",!0);case 13:ee.prev=13,ee.t0=ee.catch(0);case 15:return ee.abrupt("return",!1);case 16:case"end":return ee.stop()}},R,null,[[0,13]])}));return function(){return O.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var O=(0,ke.Z)(Q().mark(function R(j){return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return this.pendingWrites++,ee.prev=1,ee.next=4,j();case 4:return ee.prev=4,this.pendingWrites--,ee.finish(4);case 7:case"end":return ee.stop()}},R,this,[[1,,4,7]])}));return function(R){return O.apply(this,arguments)}}()},{key:"_set",value:function(){var O=(0,ke.Z)(Q().mark(function R(j,$){var ee=this;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.abrupt("return",this._withPendingWrite((0,ke.Z)(Q().mark(function vt(){return Q().wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:return Gn.next=2,ee._withRetries(function(gn){return Vs(gn,j,$)});case 2:return ee.localCache[j]=$,Gn.abrupt("return",ee.notifyServiceWorker(j));case 4:case"end":return Gn.stop()}},vt)}))));case 1:case"end":return Te.stop()}},R,this)}));return function(R,j){return O.apply(this,arguments)}}()},{key:"_get",value:function(){var O=(0,ke.Z)(Q().mark(function R(j){var $;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,this._withRetries(function(Te){return KA(Te,j)});case 2:return this.localCache[j]=$=oe.sent,oe.abrupt("return",$);case 5:case"end":return oe.stop()}},R,this)}));return function(R){return O.apply(this,arguments)}}()},{key:"_remove",value:function(){var O=(0,ke.Z)(Q().mark(function R(j){var $=this;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.abrupt("return",this._withPendingWrite((0,ke.Z)(Q().mark(function Te(){return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,$._withRetries(function(Gn){return A_(Gn,j)});case 2:return delete $.localCache[j],kt.abrupt("return",$.notifyServiceWorker(j));case 4:case"end":return kt.stop()}},Te)}))));case 1:case"end":return oe.stop()}},R,this)}));return function(R){return O.apply(this,arguments)}}()},{key:"_poll",value:function(){var O=(0,ke.Z)(Q().mark(function R(){var j,$,ee,oe,Te,vt,kt,Gn,gn,bn,or;return Q().wrap(function(Li){for(;;)switch(Li.prev=Li.next){case 0:return Li.next=2,this._withRetries(function(wu){var Or=Zo(wu,!1).getAll();return new Dl(Or).toPromise()});case 2:if(j=Li.sent){Li.next=5;break}return Li.abrupt("return",[]);case 5:if(0===this.pendingWrites){Li.next=7;break}return Li.abrupt("return",[]);case 7:$=[],ee=new Set,oe=(0,re.Z)(j);try{for(oe.s();!(Te=oe.n()).done;)Gn=(vt=Te.value).value,ee.add(kt=vt.fbase_key),JSON.stringify(this.localCache[kt])!==JSON.stringify(Gn)&&(this.notifyListeners(kt,Gn),$.push(kt))}catch(wu){oe.e(wu)}finally{oe.f()}for(gn=0,bn=Object.keys(this.localCache);gn<bn.length;gn++)this.localCache[or=bn[gn]]&&!ee.has(or)&&(this.notifyListeners(or,null),$.push(or));return Li.abrupt("return",$);case 13:case"end":return Li.stop()}},R,this)}));return function(){return O.apply(this,arguments)}}()},{key:"notifyListeners",value:function(F,R){this.localCache[F]=R;var j=this.listeners[F];if(j)for(var $=0,ee=Array.from(j);$<ee.length;$++)(0,ee[$])(R)}},{key:"startPolling",value:function(){var F=this;this.stopPolling(),this.pollTimer=setInterval((0,ke.Z)(Q().mark(function R(){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",F._poll());case 1:case"end":return $.stop()}},R)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(F,R){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[F]||(this.listeners[F]=new Set,this._get(F)),this.listeners[F].add(R)}},{key:"_removeListener",value:function(F,R){this.listeners[F]&&(this.listeners[F].delete(R),0===this.listeners[F].size&&delete this.listeners[F]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),P;var O}();return L.type="LOCAL",L}();function bd(L,P){return ha(L,"POST","/v2/accounts/mfaSignIn:start",Br(L,P))}function x_(L){return nh.apply(this,arguments)}function nh(){return(nh=(0,ke.Z)(Q().mark(function L(P){return Q().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,ha(P,"GET","/v1/recaptchaParams");case 2:if(F.t0=F.sent.recaptchaSiteKey,F.t0){F.next=5;break}F.t0="";case 5:return F.abrupt("return",F.t0);case 6:case"end":return F.stop()}},L)}))).apply(this,arguments)}function pc(L){return new Promise(function(P,O){var F=document.createElement("script");F.setAttribute("src",L),F.onload=P,F.onerror=function(R){var j=ge("internal-error");j.customData=R,O(j)},F.type="text/javascript",F.charset="UTF-8",function(){var L,P;return null!==(P=null===(L=document.getElementsByTagName("head"))||void 0===L?void 0:L[0])&&void 0!==P?P:document}().appendChild(F)})}function wd(L){return"__".concat(L).concat(Math.floor(1e6*Math.random()))}var Ou=1e12,mc=function(){function L(P){(0,v.Z)(this,L),this.auth=P,this.counter=Ou,this._widgets=new Map}return(0,be.Z)(L,[{key:"render",value:function(O,F){var R=this.counter;return this._widgets.set(R,new gc(O,this.auth.name,F||{})),this.counter++,R}},{key:"reset",value:function(O){var F,R=O||Ou;null===(F=this._widgets.get(R))||void 0===F||F.delete(),this._widgets.delete(R)}},{key:"getResponse",value:function(O){var F;return(null===(F=this._widgets.get(O||Ou))||void 0===F?void 0:F.getResponse())||""}},{key:"execute",value:(P=(0,ke.Z)(Q().mark(function F(R){var j;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return null===(j=this._widgets.get(R||Ou))||void 0===j||j.execute(),oe.abrupt("return","");case 3:case"end":return oe.stop()}},F,this)})),function(F){return P.apply(this,arguments)})}]),L;var P}(),gc=function(){function L(P,O,F){var R=this;(0,v.Z)(this,L),this.params=F,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){R.execute()};var j="string"==typeof P?document.getElementById(P):P;rt(j,"argument-error",{appName:O}),this.container=j,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,be.Z)(L,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var O=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){O.responseToken=function(L){for(var P=[],O="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",F=0;F<50;F++)P.push(O.charAt(Math.floor(Math.random()*O.length)));return P.join("")}();var F=O.params,R=F.callback,j=F["expired-callback"];if(R)try{R(O.responseToken)}catch($){}O.timerId=window.setTimeout(function(){if(O.timerId=null,O.responseToken=null,j)try{j()}catch($){}O.isVisible&&O.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),L}(),rh=wd("rcb"),Rl=new si(3e4,6e4),jO="https://www.google.com/recaptcha/api.js?",I_=function(){function L(){(0,v.Z)(this,L),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rs().grecaptcha}return(0,be.Z)(L,[{key:"load",value:function(O){var F=this,R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return rt(XA(R),O,"argument-error"),this.shouldResolveImmediately(R)?Promise.resolve(rs().grecaptcha):new Promise(function(j,$){var ee=rs().setTimeout(function(){$(ge(O,"network-request-failed"))},Rl.get());rs()[rh]=function(){rs().clearTimeout(ee),delete rs()[rh];var Te=rs().grecaptcha;if(Te){var vt=Te.render;Te.render=function(kt,Gn){var gn=vt(kt,Gn);return F.counter++,gn},F.hostLanguage=R,j(Te)}else $(ge(O,"internal-error"))},pc("".concat(jO,"?").concat((0,fe.xO)({onload:rh,render:"explicit",hl:R}))).catch(function(){clearTimeout(ee),$(ge(O,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(O){return!!rs().grecaptcha&&(O===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),L}();function XA(L){return L.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(L)}var D_=function(){function L(){(0,v.Z)(this,L)}return(0,be.Z)(L,[{key:"load",value:(P=(0,ke.Z)(Q().mark(function F(R){return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",new mc(R));case 1:case"end":return $.stop()}},F)})),function(F){return P.apply(this,arguments)})},{key:"clearedOneInstance",value:function(){}}]),L;var P}(),qk="recaptcha",Aa={theme:"light",type:"image"},Yk=function(){function L(P){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Aa),F=arguments.length>2?arguments[2]:void 0;(0,v.Z)(this,L),this.parameters=O,this.type=qk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bi(F),this.isInvisible="invisible"===this.parameters.size,rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var R="string"==typeof P?document.getElementById(P):P;rt(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new D_:new I_,this.validateStartingState()}return(0,be.Z)(L,[{key:"verify",value:(P=(0,ke.Z)(Q().mark(function F(){var j,$,ee,R=this;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return this.assertNotDestroyed(),Te.next=3,this.render();case 3:if(j=Te.sent,$=this.getAssertedRecaptcha(),!(ee=$.getResponse(j))){Te.next=8;break}return Te.abrupt("return",ee);case 8:return Te.abrupt("return",new Promise(function(vt){R.tokenChangeListeners.add(function Gn(gn){!gn||(R.tokenChangeListeners.delete(Gn),vt(gn))}),R.isInvisible&&$.execute(j)}));case 9:case"end":return Te.stop()}},F,this)})),function(){return P.apply(this,arguments)})},{key:"render",value:function(){var O=this;try{this.assertNotDestroyed()}catch(F){return Promise.reject(F)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(F){throw O.renderPromise=null,F})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var O=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(F){O.container.removeChild(F)})}},{key:"validateStartingState",value:function(){rt(!this.parameters.sitekey,this.auth,"argument-error"),rt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(O){var F=this;return function(R){if(F.tokenChangeListeners.forEach(function($){return $(R)}),"function"==typeof O)O(R);else if("string"==typeof O){var j=rs()[O];"function"==typeof j&&j(R)}}}},{key:"assertNotDestroyed",value:function(){rt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var P=(0,ke.Z)(Q().mark(function F(){var R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,this.init();case 2:return this.widgetId||(R=this.container,this.isInvisible||(j=document.createElement("div"),R.appendChild(j),R=j),this.widgetId=this.getAssertedRecaptcha().render(R,this.parameters)),ee.abrupt("return",this.widgetId);case 4:case"end":return ee.stop()}},F,this)}));return function(){return P.apply(this,arguments)}}()},{key:"init",value:function(){var P=(0,ke.Z)(Q().mark(function F(){var R;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return rt(mu()&&!vc(),this.auth,"internal-error"),$.next=3,yc();case 3:return $.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=$.sent,$.next=8,x_(this.auth);case 8:rt(R=$.sent,this.auth,"internal-error"),this.parameters.sitekey=R;case 11:case"end":return $.stop()}},F,this)}));return function(){return P.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return rt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),L;var P}();function yc(){var L=null;return new Promise(function(P){"complete"!==document.readyState?(L=function(){return P()},window.addEventListener("load",L)):P()}).catch(function(P){throw L&&window.removeEventListener("load",L),P})}var rg=function(){function L(P,O){(0,v.Z)(this,L),this.verificationId=P,this.onConfirmation=O}return(0,be.Z)(L,[{key:"confirm",value:function(O){var F=Tv._fromVerification(this.verificationId,O);return this.onConfirmation(F)}}]),L}();function R_(L,P,O){return P_.apply(this,arguments)}function P_(){return(P_=(0,ke.Z)(Q().mark(function L(P,O,F){var R;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return R=bi(P),ee.next=3,Rv(R,O,(0,fe.m9)(F));case 3:return ee.abrupt("return",new rg(ee.sent,function(oe){return yu(R,oe)}));case 5:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function O_(L,P,O){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,ke.Z)(Q().mark(function L(P,O,F){var R;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return R=(0,fe.m9)(P),ee.next=3,Pu(!1,R,"phone");case 3:return ee.next=5,Rv(R.auth,O,(0,fe.m9)(F));case 5:return ee.abrupt("return",new rg(ee.sent,function(oe){return Po(R,oe)}));case 7:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function L_(L,P,O){return ig.apply(this,arguments)}function ig(){return(ig=(0,ke.Z)(Q().mark(function L(P,O,F){var R;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return R=(0,fe.m9)(P),ee.next=3,Rv(R.auth,O,(0,fe.m9)(F));case 3:return ee.abrupt("return",new rg(ee.sent,function(oe){return sa(R,oe)}));case 5:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function Rv(L,P,O){return Pv.apply(this,arguments)}function Pv(){return(Pv=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j,$,ee,Te;return Q().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return bn.next=2,F.verify();case 2:if(j=bn.sent,bn.prev=3,rt("string"==typeof j,P,"argument-error"),rt(F.type===qk,P,"argument-error"),!("session"in($="string"==typeof O?{phoneNumber:O}:O))){bn.next=26;break}if(ee=$.session,!("phoneNumber"in $)){bn.next=17;break}return rt("enroll"===ee.type,P,"internal-error"),bn.next=13,zi(P,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:j}});case 13:return bn.abrupt("return",bn.sent.phoneSessionInfo.sessionInfo);case 17:return rt("signin"===ee.type,P,"internal-error"),rt(Te=(null===(R=$.multiFactorHint)||void 0===R?void 0:R.uid)||$.multiFactorUid,P,"missing-multi-factor-info"),bn.next=22,bd(P,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Te,phoneSignInInfo:{recaptchaToken:j}});case 22:return bn.abrupt("return",bn.sent.phoneResponseInfo.sessionInfo);case 24:bn.next=31;break;case 26:return bn.next=28,Cv(P,{phoneNumber:$.phoneNumber,recaptchaToken:j});case 28:return bn.abrupt("return",bn.sent.sessionInfo);case 31:return bn.prev=31,F._reset(),bn.finish(31);case 34:case"end":return bn.stop()}},L,null,[[3,,31,34]])}))).apply(this,arguments)}function kd(L,P){return ag.apply(this,arguments)}function ag(){return(ag=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,ia((0,fe.m9)(P),O);case 2:case"end":return R.stop()}},L)}))).apply(this,arguments)}var vs=function(){var L=function(){function P(O){(0,v.Z)(this,P),this.providerId=P.PROVIDER_ID,this.auth=bi(O)}return(0,be.Z)(P,[{key:"verifyPhoneNumber",value:function(F,R){return Rv(this.auth,F,(0,fe.m9)(R))}}],[{key:"credential",value:function(F,R){return Tv._fromVerification(F,R)}},{key:"credentialFromResult",value:function(F){return P.credentialFromTaggedObject(F)}},{key:"credentialFromError",value:function(F){return P.credentialFromTaggedObject(F.customData||{})}},{key:"credentialFromTaggedObject",value:function(F){var R=F._tokenResponse;if(!R)return null;var j=R.phoneNumber,$=R.temporaryProof;return j&&$?Tv._fromTokenResponse(j,$):null}}]),P}();return L.PROVIDER_ID="phone",L.PHONE_SIGN_IN_METHOD="phone",L}();function Lu(L,P){return P?Vr(P):(rt(L._popupRedirectResolver,L,"argument-error"),L._popupRedirectResolver)}var _c=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F){var R;return(0,v.Z)(this,O),(R=P.call(this,"custom","custom")).params=F,R}return(0,be.Z)(O,[{key:"_getIdTokenResponse",value:function(R){return Ka(R,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(R,j){return Ka(R,this._buildIdpRequest(j))}},{key:"_getReauthenticationResolver",value:function(R){return Ka(R,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(R){var j={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return R&&(j.idToken=R),j}}]),O}(wr);function WO(L){return El(L.auth,new _c(L),L.bypassAuthState)}function QA(L){var O=L.user;return rt(O,L.auth,"internal-error"),va(O,new _c(L),L.bypassAuthState)}function go(L){return yo.apply(this,arguments)}function yo(){return(yo=(0,ke.Z)(Q().mark(function L(P){var F;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return rt(F=P.user,P.auth,"internal-error"),j.abrupt("return",ia(F,new _c(P),P.bypassAuthState));case 3:case"end":return j.stop()}},L)}))).apply(this,arguments)}var ih=function(){function L(P,O,F,R){var j=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,v.Z)(this,L),this.auth=P,this.resolver=F,this.user=R,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(O)?O:[O]}return(0,be.Z)(L,[{key:"execute",value:function(){var O=this;return new Promise(function(){var F=(0,ke.Z)(Q().mark(function R(j,$){return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return O.pendingPromise={resolve:j,reject:$},oe.prev=1,oe.next=4,O.resolver._initialize(O.auth);case 4:return O.eventManager=oe.sent,oe.next=7,O.onExecution();case 7:O.eventManager.registerConsumer(O),oe.next=13;break;case 10:oe.prev=10,oe.t0=oe.catch(1),O.reject(oe.t0);case 13:case"end":return oe.stop()}},R,null,[[1,10]])}));return function(R,j){return F.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(P=(0,ke.Z)(Q().mark(function F(R){var j,$,ee,oe,Te,vt,kt;return Q().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:if(j=R.urlResponse,$=R.sessionId,ee=R.postBody,oe=R.tenantId,vt=R.type,!(Te=R.error)){gn.next=4;break}return this.reject(Te),gn.abrupt("return");case 4:return kt={auth:this.auth,requestUri:j,sessionId:$,tenantId:oe||void 0,postBody:ee||void 0,user:this.user,bypassAuthState:this.bypassAuthState},gn.prev=5,gn.t0=this,gn.next=9,this.getIdpTask(vt)(kt);case 9:gn.t1=gn.sent,gn.t0.resolve.call(gn.t0,gn.t1),gn.next=16;break;case 13:gn.prev=13,gn.t2=gn.catch(5),this.reject(gn.t2);case 16:case"end":return gn.stop()}},F,this,[[5,13]])})),function(F){return P.apply(this,arguments)})},{key:"onError",value:function(O){this.reject(O)}},{key:"getIdpTask",value:function(O){switch(O){case"signInViaPopup":case"signInViaRedirect":return WO;case"linkViaPopup":case"linkViaRedirect":return go;case"reauthViaPopup":case"reauthViaRedirect":return QA;default:X(this.auth,"internal-error")}}},{key:"resolve",value:function(O){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(O),this.unregisterAndCleanUp()}},{key:"reject",value:function(O){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(O),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),L;var P}(),Pl=new si(2e3,1e4);function Bo(L,P,O){return ah.apply(this,arguments)}function ah(){return(ah=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return R=bi(P),nt(P,O,rl),j=Lu(R,F),$=new Nu(R,"signInViaPopup",O,j),oe.abrupt("return",$.executeNotNull());case 5:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function Ov(L,P,O){return sg.apply(this,arguments)}function sg(){return(sg=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return nt((R=(0,fe.m9)(P)).auth,O,rl),j=Lu(R.auth,F),$=new Nu(R.auth,"reauthViaPopup",O,j,R),oe.abrupt("return",$.executeNotNull());case 5:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function Ed(L,P,O){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return nt((R=(0,fe.m9)(P)).auth,O,rl),j=Lu(R.auth,F),$=new Nu(R.auth,"linkViaPopup",O,j,R),oe.abrupt("return",$.executeNotNull());case 5:case"end":return oe.stop()}},L)}))).apply(this,arguments)}var Nu=function(){var L=function(P){(0,M.Z)(F,P);var R,O=(0,S.Z)(F);function F(R,j,$,ee,oe){var Te;return(0,v.Z)(this,F),(Te=O.call(this,R,j,ee,oe)).provider=$,Te.authWindow=null,Te.pollId=null,F.currentPopupAction&&F.currentPopupAction.cancel(),F.currentPopupAction=(0,D.Z)(Te),Te}return(0,be.Z)(F,[{key:"executeNotNull",value:(R=(0,ke.Z)(Q().mark(function $(){var ee;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this.execute();case 2:return rt(ee=Te.sent,this.auth,"internal-error"),Te.abrupt("return",ee);case 5:case"end":return Te.stop()}},$,this)})),function(){return R.apply(this,arguments)})},{key:"onExecution",value:function(){var R=(0,ke.Z)(Q().mark(function $(){var oe,ee=this;return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return Fn(1===this.filter.length,"Popup operations only handle one event"),oe=eh(),vt.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],oe);case 4:this.authWindow=vt.sent,this.authWindow.associatedEvent=oe,this.resolver._originValidation(this.auth).catch(function(kt){ee.reject(kt)}),this.resolver._isIframeWebStorageSupported(this.auth,function(kt){kt||ee.reject(ge(ee.auth,"web-storage-unsupported"))}),this.pollUserCancellation();case 9:case"end":return vt.stop()}},$,this)}));return function(){return R.apply(this,arguments)}}()},{key:"eventId",get:function(){var j;return(null===(j=this.authWindow)||void 0===j?void 0:j.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ge(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,F.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var j=this;!function ee(){var oe,Te;j.pollId=(null===(Te=null===(oe=j.authWindow)||void 0===oe?void 0:oe.window)||void 0===Te?void 0:Te.closed)?window.setTimeout(function(){j.pollId=null,j.reject(ge(j.auth,"popup-closed-by-user"))},2e3):window.setTimeout(ee,Pl.get())}()}}]),F}(ih);return L.currentPopupAction=null,L}(),sh=new Map,_o=function(L){(0,M.Z)(O,L);var F,P=(0,S.Z)(O);function O(F,R){var j,$=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,v.Z)(this,O),(j=P.call(this,F,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],R,void 0,$)).eventId=null,j}return(0,be.Z)(O,[{key:"execute",value:(F=(0,ke.Z)(Q().mark(function j(){var $,oe;return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if($=sh.get(this.auth._key())){vt.next=21;break}return vt.prev=2,vt.next=5,oh(this.resolver,this.auth);case 5:if(!vt.sent){vt.next=12;break}return vt.next=9,(0,_e.Z)((0,de.Z)(O.prototype),"execute",this).call(this);case 9:vt.t0=vt.sent,vt.next=13;break;case 12:vt.t0=null;case 13:oe=vt.t0,$=function(){return Promise.resolve(oe)},vt.next=20;break;case 17:vt.prev=17,vt.t1=vt.catch(2),$=function(){return Promise.reject(vt.t1)};case 20:sh.set(this.auth._key(),$);case 21:return vt.abrupt("return",$());case 22:case"end":return vt.stop()}},j,this,[[2,17]])})),function(){return F.apply(this,arguments)})},{key:"onAuthEvent",value:function(){var F=(0,ke.Z)(Q().mark(function j($){var ee;return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if("signInViaRedirect"!==$.type){Te.next=4;break}return Te.abrupt("return",(0,_e.Z)((0,de.Z)(O.prototype),"onAuthEvent",this).call(this,$));case 4:if("unknown"!==$.type){Te.next=7;break}return this.resolve(null),Te.abrupt("return");case 7:if(!$.eventId){Te.next=17;break}return Te.next=10,this.auth._redirectUserForId($.eventId);case 10:if(!(ee=Te.sent)){Te.next=16;break}return this.user=ee,Te.abrupt("return",(0,_e.Z)((0,de.Z)(O.prototype),"onAuthEvent",this).call(this,$));case 16:this.resolve(null);case 17:case"end":return Te.stop()}},j,this)}));return function(j){return F.apply(this,arguments)}}()},{key:"onExecution",value:function(){var F=(0,ke.Z)(Q().mark(function j(){return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:case"end":return ee.stop()}},j)}));return function(){return F.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),O}(ih);function oh(L,P){return bc.apply(this,arguments)}function bc(){return(bc=(0,ke.Z)(Q().mark(function L(P,O){var F,R;return Q().wrap(function($){for(;;)switch($.prev=$.next){case 0:return F=Sd(O),$.next=3,uh(P)._get(F);case 3:return $.t0=$.sent,R="true"===$.t0,$.next=7,uh(P)._remove(F);case 7:return $.abrupt("return",R);case 8:case"end":return $.stop()}},L)}))).apply(this,arguments)}function og(L,P){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",uh(P)._set(Sd(O),"true"));case 1:case"end":return R.stop()}},L)}))).apply(this,arguments)}function N_(){sh.clear()}function uh(L){return Vr(L._redirectPersistence)}function Sd(L){return ht("pendingRedirect",L.config.apiKey,L.name)}function Td(L,P,O){return function(L,P,O){return lh.apply(this,arguments)}(L,P,O)}function lh(){return(lh=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return R=bi(P),nt(P,O,rl),j=Lu(R,F),ee.next=5,og(j,R);case 5:return ee.abrupt("return",j._openRedirect(R,O,"signInViaRedirect"));case 6:case"end":return ee.stop()}},L)}))).apply(this,arguments)}function F_(L,P,O){return function(L,P,O){return zs.apply(this,arguments)}(L,P,O)}function zs(){return(zs=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return nt((R=(0,fe.m9)(P)).auth,O,rl),j=Lu(R.auth,F),oe.next=5,og(j,R.auth);case 5:return oe.next=7,lf(R);case 7:return oe.abrupt("return",j._openRedirect(R.auth,O,"reauthViaRedirect",oe.sent));case 9:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function wc(L,P,O){return function(L,P,O){return ug.apply(this,arguments)}(L,P,O)}function ug(){return(ug=(0,ke.Z)(Q().mark(function L(P,O,F){var R,j;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return nt((R=(0,fe.m9)(P)).auth,O,rl),j=Lu(R.auth,F),oe.next=5,Pu(!1,R,O.providerId);case 5:return oe.next=7,og(j,R.auth);case 7:return oe.next=9,lf(R);case 9:return oe.abrupt("return",j._openRedirect(R.auth,O,"linkViaRedirect",oe.sent));case 11:case"end":return oe.stop()}},L)}))).apply(this,arguments)}function $k(L,P){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,ke.Z)(Q().mark(function L(P,O){return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,bi(P)._initializationPromise;case 2:return R.abrupt("return",fh(P,O,!1));case 3:case"end":return R.stop()}},L)}))).apply(this,arguments)}function fh(L,P){return kc.apply(this,arguments)}function kc(){return(kc=(0,ke.Z)(Q().mark(function L(P,O){var F,R,j,$,ee,oe=arguments;return Q().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:return F=oe.length>2&&void 0!==oe[2]&&oe[2],R=bi(P),j=Lu(R,O),$=new _o(R,j,F),vt.next=6,$.execute();case 6:if(!(ee=vt.sent)||F){vt.next=13;break}return delete ee.user._redirectEventId,vt.next=11,R._persistUserIfCurrent(ee.user);case 11:return vt.next=13,R._setRedirectUser(null,O);case 13:return vt.abrupt("return",ee);case 14:case"end":return vt.stop()}},L)}))).apply(this,arguments)}function lf(L){return cf.apply(this,arguments)}function cf(){return(cf=(0,ke.Z)(Q().mark(function L(P){var O;return Q().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return O=eh("".concat(P.uid,":::")),P._redirectEventId=O,R.next=4,P.auth._setRedirectUser(P);case 4:return R.next=6,P.auth._persistUserIfCurrent(P);case 6:return R.abrupt("return",O);case 7:case"end":return R.stop()}},L)}))).apply(this,arguments)}var xa=function(){function L(P){(0,v.Z)(this,L),this.auth=P,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,be.Z)(L,[{key:"registerConsumer",value:function(O){this.consumers.add(O),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,O)&&(this.sendToConsumer(this.queuedRedirectEvent,O),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(O){this.consumers.delete(O)}},{key:"onEvent",value:function(O){var F=this;if(this.hasEventBeenHandled(O))return!1;var R=!1;return this.consumers.forEach(function(j){F.isEventForConsumer(O,j)&&(R=!0,F.sendToConsumer(O,j),F.saveEventToCache(O))}),this.hasHandledPotentialRedirect||!function(L){switch(L.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z_(L);default:return!1}}(O)||(this.hasHandledPotentialRedirect=!0,R||(this.queuedRedirectEvent=O,R=!0)),R}},{key:"sendToConsumer",value:function(O,F){var R;if(O.error&&!Z_(O)){var j=(null===(R=O.error.code)||void 0===R?void 0:R.split("auth/")[1])||"internal-error";F.onError(ge(this.auth,j))}else F.onAuthEvent(O)}},{key:"isEventForConsumer",value:function(O,F){var R=null===F.eventId||!!O.eventId&&O.eventId===F.eventId;return F.filter.includes(O.type)&&R}},{key:"hasEventBeenHandled",value:function(O){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nv(O))}},{key:"saveEventToCache",value:function(O){this.cachedEventUids.add(Nv(O)),this.lastProcessedEventTime=Date.now()}}]),L}();function Nv(L){return[L.type,L.eventId,L.sessionId,L.tenantId].filter(function(P){return P}).join("-")}function Z_(L){var O=L.error;return"unknown"===L.type&&(null==O?void 0:O.code)==="auth/".concat("no-auth-event")}function hh(L){return lg.apply(this,arguments)}function lg(){return(lg=(0,ke.Z)(Q().mark(function L(P){var F=arguments;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",ha(P,"GET","/v1/projects",F.length>1&&void 0!==F[1]?F[1]:{}));case 2:case"end":return j.stop()}},L)}))).apply(this,arguments)}var Qk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xd=/^https?/;function Vo(){return(Vo=(0,ke.Z)(Q().mark(function L(P){var R,j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!P.config.emulator){oe.next=2;break}return oe.abrupt("return");case 2:return oe.next=4,hh(P);case 4:R=(0,re.Z)(oe.sent.authorizedDomains),oe.prev=7,R.s();case 9:if((j=R.n()).done){oe.next=20;break}if($=j.value,oe.prev=11,!Fu($)){oe.next=14;break}return oe.abrupt("return");case 14:oe.next=18;break;case 16:oe.prev=16,oe.t0=oe.catch(11);case 18:oe.next=9;break;case 20:oe.next=25;break;case 22:oe.prev=22,oe.t1=oe.catch(7),R.e(oe.t1);case 25:return oe.prev=25,R.f(),oe.finish(25);case 28:X(P,"unauthorized-domain");case 29:case"end":return oe.stop()}},L,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function Fu(L){var P=Ri(),O=new URL(P),F=O.protocol,R=O.hostname;if(L.startsWith("chrome-extension://")){var j=new URL(L);return""===j.hostname&&""===R?"chrome-extension:"===F&&L.replace("chrome-extension://","")===P.replace("chrome-extension://",""):"chrome-extension:"===F&&j.hostname===R}if(!xd.test(F))return!1;if(Qk.test(L))return R===L;var $=L.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(R)}var dh=new si(3e4,6e4);function Zu(){var L=rs().___jsl;if(null==L?void 0:L.H)for(var P=0,O=Object.keys(L.H);P<O.length;P++){var F=O[P];if(L.H[F].r=L.H[F].r||[],L.H[F].L=L.H[F].L||[],L.H[F].r=(0,we.Z)(L.H[F].L),L.CP)for(var R=0;R<L.CP.length;R++)L.CP[R]=null}}var Id=null;function cg(L){return Id=Id||function(L){return new Promise(function(P,O){var F,R,j;function $(){Zu(),gapi.load("gapi.iframes",{callback:function(){P(gapi.iframes.getContext())},ontimeout:function(){Zu(),O(ge(L,"network-request-failed"))},timeout:dh.get()})}if(null===(R=null===(F=rs().gapi)||void 0===F?void 0:F.iframes)||void 0===R?void 0:R.Iframe)P(gapi.iframes.getContext());else{if(!(null===(j=rs().gapi)||void 0===j?void 0:j.load)){var ee=wd("iframefcb");return rs()[ee]=function(){gapi.load?$():O(ge(L,"network-request-failed"))},pc("https://apis.google.com/js/api.js?onload=".concat(ee))}$()}}).catch(function(P){throw Id=null,P})}(L)}var Fv=new si(5e3,15e3),tE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dd(L){var P=L.config;rt(P.authDomain,L,"auth-domain-config-required");var O=P.emulator?mr(P,"emulator/auth/iframe"):"https://".concat(L.config.authDomain,"/").concat("__/auth/iframe"),F={apiKey:P.apiKey,appName:L.name,v:Ae.SDK_VERSION},R=Ol.get(L.config.apiHost);R&&(F.eid=R);var j=L._getFrameworks();return j.length&&(F.fw=j.join(",")),"".concat(O,"?").concat((0,fe.xO)(F).slice(1))}function V_(L){return H_.apply(this,arguments)}function H_(){return(H_=(0,ke.Z)(Q().mark(function L(P){var O,F;return Q().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,cg(P);case 2:return O=j.sent,rt(F=rs().gapi,P,"internal-error"),j.abrupt("return",O.open({where:document.body,url:Dd(P),messageHandlersFilter:F.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tE,dontclear:!0},function($){return new Promise(function(){var ee=(0,ke.Z)(Q().mark(function oe(Te,vt){var kt,Gn,gn;return Q().wrap(function(or){for(;;)switch(or.prev=or.next){case 0:return gn=function(){rs().clearTimeout(Gn),Te($)},or.next=3,$.restyle({setHideOnLeave:!1});case 3:kt=ge(P,"network-request-failed"),Gn=rs().setTimeout(function(){vt(kt)},Fv.get()),$.ping(gn).then(gn,function(){vt(kt)});case 6:case"end":return or.stop()}},oe)}));return function(oe,Te){return ee.apply(this,arguments)}}())}));case 6:case"end":return j.stop()}},L)}))).apply(this,arguments)}var fg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JA="http://localhost",z_=function(){function L(P){(0,v.Z)(this,L),this.window=P,this.associatedEvent=null}return(0,be.Z)(L,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(O){}}}]),L}();function Zv(L,P,O){var F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,R=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,j=Math.max((window.screen.availHeight-R)/2,0).toString(),$=Math.max((window.screen.availWidth-F)/2,0).toString(),ee="",oe=Object.assign(Object.assign({},fg),{width:F.toString(),height:R.toString(),top:j,left:$}),Te=(0,fe.z$)().toLowerCase();O&&(ee=$n(Te)?"_blank":O),Kt(Te)&&(P=P||JA,oe.scrollbars="yes");var vt=Object.entries(oe).reduce(function(Gn,gn){var bn=(0,Re.Z)(gn,2),or=bn[0],Qi=bn[1];return"".concat(Gn).concat(or,"=").concat(Qi,",")},"");if(oa(Te)&&"_self"!==ee)return dg(P||"",ee),new z_(null);var kt=window.open(P||"",ee,vt);rt(kt,L,"popup-blocked");try{kt.focus()}catch(Gn){}return new z_(kt)}function dg(L,P){var O=document.createElement("a");O.href=L,O.target=P;var F=document.createEvent("MouseEvent");F.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),O.dispatchEvent(F)}function Rd(L,P,O,F,R,j){rt(L.config.authDomain,L,"auth-domain-config-required"),rt(L.config.apiKey,L,"invalid-api-key");var $={apiKey:L.config.apiKey,appName:L.name,authType:O,redirectUrl:F,v:Ae.SDK_VERSION,eventId:R};if(P instanceof rl){P.setDefaultLanguage(L.languageCode),$.providerId=P.providerId||"",(0,fe.xb)(P.getCustomParameters())||($.customParameters=JSON.stringify(P.getCustomParameters()));for(var ee=0,oe=Object.entries(j||{});ee<oe.length;ee++){var Te=(0,Re.Z)(oe[ee],2);$[Te[0]]=Te[1]}}if(P instanceof G){var Gn=P.getScopes().filter(function(Li){return""!==Li});Gn.length>0&&($.scopes=Gn.join(","))}L.tenantId&&($.tid=L.tenantId);for(var gn=$,bn=0,or=Object.keys(gn);bn<or.length;bn++){var Qi=or[bn];void 0===gn[Qi]&&delete gn[Qi]}return"".concat(function(L){var P=L.config;return P.emulator?mr(P,"emulator/auth/handler"):"https://".concat(P.authDomain,"/").concat("__/auth/handler")}(L),"?").concat((0,fe.xO)(gn).slice(1))}var L,ph="webStorageSupport",pg=function(){function L(){(0,v.Z)(this,L),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uk,this._completeRedirectFn=fh}return(0,be.Z)(L,[{key:"_openPopup",value:(P=(0,ke.Z)(Q().mark(function F(R,j,$,ee){var oe,Te;return Q().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return Fn(null===(oe=this.eventManagers[R._key()])||void 0===oe?void 0:oe.manager,"_initialize() not called before _openPopup()"),Te=Rd(R,j,$,Ri(),ee),kt.abrupt("return",Zv(R,Te,eh()));case 3:case"end":return kt.stop()}},F,this)})),function(F,R,j,$){return P.apply(this,arguments)})},{key:"_openRedirect",value:function(){var P=(0,ke.Z)(Q().mark(function F(R,j,$,ee){return Q().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,this._originValidation(R);case 2:return Hk(Rd(R,j,$,Ri(),ee)),Te.abrupt("return",new Promise(function(){}));case 4:case"end":return Te.stop()}},F,this)}));return function(F,R,j,$){return P.apply(this,arguments)}}()},{key:"_initialize",value:function(O){var F=O._key();if(this.eventManagers[F]){var R=this.eventManagers[F],j=R.manager,$=R.promise;return j?Promise.resolve(j):(Fn($,"If manager is not set, promise should be"),$)}var ee=this.initAndGetManager(O);return this.eventManagers[F]={promise:ee},ee}},{key:"initAndGetManager",value:function(){var P=(0,ke.Z)(Q().mark(function F(R){var j,$;return Q().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,V_(R);case 2:return j=oe.sent,$=new xa(R),j.register("authEvent",function(Te){return rt(null==Te?void 0:Te.authEvent,R,"invalid-auth-event"),{status:$.onEvent(Te.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[R._key()]={manager:$},this.iframes[R._key()]=j,oe.abrupt("return",$);case 8:case"end":return oe.stop()}},F,this)}));return function(F){return P.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(O,F){this.iframes[O._key()].send(ph,{type:ph},function(j){var $,ee=null===($=null==j?void 0:j[0])||void 0===$?void 0:$[ph];void 0!==ee&&F(!!ee),X(O,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(O){var F=O._key();return this.originValidationPromises[F]||(this.originValidationPromises[F]=function(L){return Vo.apply(this,arguments)}(O)),this.originValidationPromises[F]}},{key:"_shouldInitProactively",get:function(){return Ca()||pn()||_i()}}]),L;var P}(),W_=function(L){(0,M.Z)(O,L);var P=(0,S.Z)(O);function O(F){var R;return(0,v.Z)(this,O),(R=P.call(this,"phone")).credential=F,R}return(0,be.Z)(O,[{key:"_finalizeEnroll",value:function(R,j,$){return function(L,P){return ha(L,"POST","/v2/accounts/mfaEnrollment:finalize",Br(L,P))}(R,{idToken:j,displayName:$,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(R,j){return function(L,P){return ha(L,"POST","/v2/accounts/mfaSignIn:finalize",Br(L,P))}(R,{mfaPendingCredential:j,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(R){return new O(R)}}]),O}(function(){function L(P){(0,v.Z)(this,L),this.factorId=P}return(0,be.Z)(L,[{key:"_process",value:function(O,F,R){switch(F.type){case"enroll":return this._finalizeEnroll(O,F.credential,R);case"signin":return this._finalizeSignIn(O,F.credential);default:return Vt("unexpected MultiFactorSessionType")}}}]),L}()),Ec=function(){var L=function(){function P(){(0,v.Z)(this,P)}return(0,be.Z)(P,null,[{key:"assertion",value:function(F){return W_._fromCredential(F)}}]),P}();return L.FACTOR_ID="phone",L}(),q_=function(){function L(P){(0,v.Z)(this,L),this.auth=P,this.internalListeners=new Map}return(0,be.Z)(L,[{key:"getUid",value:function(){var O;return this.assertAuthConfigured(),(null===(O=this.auth.currentUser)||void 0===O?void 0:O.uid)||null}},{key:"getToken",value:(P=(0,ke.Z)(Q().mark(function F(R){return Q().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return this.assertAuthConfigured(),ee.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){ee.next=5;break}return ee.abrupt("return",null);case 5:return ee.next=7,this.auth.currentUser.getIdToken(R);case 7:return ee.abrupt("return",{accessToken:ee.sent});case 9:case"end":return ee.stop()}},F,this)})),function(F){return P.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(O){if(this.assertAuthConfigured(),!this.internalListeners.has(O)){var F=this.auth.onIdTokenChanged(function(R){var j;O((null===(j=R)||void 0===j?void 0:j.stsTokenManager.accessToken)||null)});this.internalListeners.set(O,F),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(O){this.assertAuthConfigured();var F=this.internalListeners.get(O);!F||(this.internalListeners.delete(O),F(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),L;var P}();L="Browser",(0,Ae._registerComponent)(new qe.wA("auth",function(P,O){var F=O.options,R=P.getProvider("app").getImmediate(),j=R.options,$=j.apiKey,ee=j.authDomain;return function(oe){rt($&&!$.includes(":"),"invalid-api-key",{appName:oe.name}),rt(!(null==ee?void 0:ee.includes(":")),"argument-error",{appName:oe.name});var Te={apiKey:$,authDomain:ee,clientPlatform:L,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hr(L)},vt=new Oi(oe,Te);return function(L,P){var O=(null==P?void 0:P.persistence)||[],F=(Array.isArray(O)?O:[O]).map(Vr);(null==P?void 0:P.errorMap)&&L._updateErrorMap(P.errorMap),L._initializeWithPersistence(F,null==P?void 0:P.popupRedirectResolver)}(vt,F),vt}(R)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(P,O,F){P.getProvider("auth-internal").initialize()})),(0,Ae._registerComponent)(new qe.wA("auth-internal",function(P){var O=bi(P.getProvider("auth").getImmediate());return new q_(O)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)("@firebase/auth","0.18.1",void 0)},5119:function(rn,mt,J){"use strict";J.d(mt,{wA:function(){return D},H0:function(){return ke},zt:function(){return S}});var _e=J(4762),de=J(5725),D=function(){function v(be,we,ne){this.name=be,this.instanceFactory=we,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v.prototype.setInstantiationMode=function(be){return this.instantiationMode=be,this},v.prototype.setMultipleInstances=function(be){return this.multipleInstances=be,this},v.prototype.setServiceProps=function(be){return this.serviceProps=be,this},v.prototype.setInstanceCreatedCallback=function(be){return this.onInstanceCreated=be,this},v}(),M="[DEFAULT]",S=function(){function v(be,we){this.name=be,this.container=we,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v.prototype.get=function(be){var we=this.normalizeInstanceIdentifier(be);if(!this.instancesDeferred.has(we)){var ne=new de.BH;if(this.instancesDeferred.set(we,ne),this.isInitialized(we)||this.shouldAutoInitialize())try{var Oe=this.getOrInitializeService({instanceIdentifier:we});Oe&&ne.resolve(Oe)}catch(Q){}}return this.instancesDeferred.get(we).promise},v.prototype.getImmediate=function(be){var we,ne=this.normalizeInstanceIdentifier(null==be?void 0:be.identifier),Oe=null!==(we=null==be?void 0:be.optional)&&void 0!==we&&we;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(Q){if(Oe)return null;throw Q}},v.prototype.getComponent=function(){return this.component},v.prototype.setComponent=function(be){var we,ne;if(be.name!==this.name)throw Error("Mismatching Component "+be.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=be,this.shouldAutoInitialize()){if(function(v){return"EAGER"===v.instantiationMode}(be))try{this.getOrInitializeService({instanceIdentifier:M})}catch(Be){}try{for(var Oe=(0,_e.XA)(this.instancesDeferred.entries()),Q=Oe.next();!Q.done;Q=Oe.next()){var fe=(0,_e.CR)(Q.value,2),Le=fe[1],We=this.normalizeInstanceIdentifier(fe[0]);try{var qe=this.getOrInitializeService({instanceIdentifier:We});Le.resolve(qe)}catch(Be){}}}catch(Be){we={error:Be}}finally{try{Q&&!Q.done&&(ne=Oe.return)&&ne.call(Oe)}finally{if(we)throw we.error}}}},v.prototype.clearInstance=function(be){void 0===be&&(be=M),this.instancesDeferred.delete(be),this.instancesOptions.delete(be),this.instances.delete(be)},v.prototype.delete=function(){return(0,_e.mG)(this,void 0,void 0,function(){var be;return(0,_e.Jh)(this,function(we){switch(we.label){case 0:return be=Array.from(this.instances.values()),[4,Promise.all((0,_e.ev)((0,_e.ev)([],(0,_e.CR)(be.filter(function(ne){return"INTERNAL"in ne}).map(function(ne){return ne.INTERNAL.delete()}))),(0,_e.CR)(be.filter(function(ne){return"_delete"in ne}).map(function(ne){return ne._delete()}))))];case 1:return we.sent(),[2]}})})},v.prototype.isComponentSet=function(){return null!=this.component},v.prototype.isInitialized=function(be){return void 0===be&&(be=M),this.instances.has(be)},v.prototype.getOptions=function(be){return void 0===be&&(be=M),this.instancesOptions.get(be)||{}},v.prototype.initialize=function(be){var we,ne;void 0===be&&(be={});var Oe=be.options,Q=void 0===Oe?{}:Oe,fe=this.normalizeInstanceIdentifier(be.instanceIdentifier);if(this.isInitialized(fe))throw Error(this.name+"("+fe+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Ae=this.getOrInitializeService({instanceIdentifier:fe,options:Q});try{for(var Le=(0,_e.XA)(this.instancesDeferred.entries()),We=Le.next();!We.done;We=Le.next()){var qe=(0,_e.CR)(We.value,2),st=qe[1];fe===this.normalizeInstanceIdentifier(qe[0])&&st.resolve(Ae)}}catch(Y){we={error:Y}}finally{try{We&&!We.done&&(ne=Le.return)&&ne.call(Le)}finally{if(we)throw we.error}}return Ae},v.prototype.onInit=function(be,we){var ne,Oe=this.normalizeInstanceIdentifier(we),Q=null!==(ne=this.onInitCallbacks.get(Oe))&&void 0!==ne?ne:new Set;Q.add(be),this.onInitCallbacks.set(Oe,Q);var fe=this.instances.get(Oe);return fe&&be(fe,Oe),function(){Q.delete(be)}},v.prototype.invokeOnInitCallbacks=function(be,we){var ne,Oe,Q=this.onInitCallbacks.get(we);if(Q)try{for(var fe=(0,_e.XA)(Q),Ae=fe.next();!Ae.done;Ae=fe.next()){var Le=Ae.value;try{Le(be,we)}catch(We){}}}catch(We){ne={error:We}}finally{try{Ae&&!Ae.done&&(Oe=fe.return)&&Oe.call(fe)}finally{if(ne)throw ne.error}}},v.prototype.getOrInitializeService=function(be){var we=be.instanceIdentifier,ne=be.options,Oe=void 0===ne?{}:ne,Q=this.instances.get(we);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:re(we),options:Oe}),this.instances.set(we,Q),this.instancesOptions.set(we,Oe),this.invokeOnInitCallbacks(Q,we),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,we,Q)}catch(fe){}return Q||null},v.prototype.normalizeInstanceIdentifier=function(be){return void 0===be&&(be=M),this.component?this.component.multipleInstances?be:M:be},v.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},v}();function re(v){return v===M?void 0:v}var ke=function(){function v(be){this.name=be,this.providers=new Map}return v.prototype.addComponent=function(be){var we=this.getProvider(be.name);if(we.isComponentSet())throw new Error("Component "+be.name+" has already been registered with "+this.name);we.setComponent(be)},v.prototype.addOrOverwriteComponent=function(be){this.getProvider(be.name).isComponentSet()&&this.providers.delete(be.name),this.addComponent(be)},v.prototype.getProvider=function(be){if(this.providers.has(be))return this.providers.get(be);var we=new S(be,this);return this.providers.set(be,we),we},v.prototype.getProviders=function(){return Array.from(this.providers.values())},v}()},2134:function(rn,mt,J){"use strict";J.d(mt,{in:function(){return Re},Yd:function(){return ne},Ub:function(){return Oe},Am:function(){return Q}});var S,_e=J(6054),de=J(5134),D=J(7289),M=J(3512),re=[],Re=function(fe){return fe[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",fe}({}),ke={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},v=Re.INFO,be=((0,M.Z)(S={},Re.DEBUG,"log"),(0,M.Z)(S,Re.VERBOSE,"log"),(0,M.Z)(S,Re.INFO,"info"),(0,M.Z)(S,Re.WARN,"warn"),(0,M.Z)(S,Re.ERROR,"error"),S),we=function(Ae,Le){if(!(Le<Ae.logLevel)){var We=(new Date).toISOString(),qe=be[Le];if(!qe)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(Le,")"));for(var Be,st=arguments.length,Qe=new Array(st>2?st-2:0),Y=2;Y<st;Y++)Qe[Y-2]=arguments[Y];(Be=console)[qe].apply(Be,["[".concat(We,"]  ").concat(Ae.name,":")].concat(Qe))}},ne=function(){function fe(Ae){(0,de.Z)(this,fe),this.name=Ae,this._logLevel=v,this._logHandler=we,this._userLogHandler=null,re.push(this)}return(0,D.Z)(fe,[{key:"logLevel",get:function(){return this._logLevel},set:function(Le){if(!(Le in Re))throw new TypeError('Invalid value "'.concat(Le,'" assigned to `logLevel`'));this._logLevel=Le}},{key:"setLogLevel",value:function(Le){this._logLevel="string"==typeof Le?ke[Le]:Le}},{key:"logHandler",get:function(){return this._logHandler},set:function(Le){if("function"!=typeof Le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Le}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(Le){this._userLogHandler=Le}},{key:"debug",value:function(){for(var Le=arguments.length,We=new Array(Le),qe=0;qe<Le;qe++)We[qe]=arguments[qe];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.DEBUG].concat(We)),this._logHandler.apply(this,[this,Re.DEBUG].concat(We))}},{key:"log",value:function(){for(var Le=arguments.length,We=new Array(Le),qe=0;qe<Le;qe++)We[qe]=arguments[qe];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.VERBOSE].concat(We)),this._logHandler.apply(this,[this,Re.VERBOSE].concat(We))}},{key:"info",value:function(){for(var Le=arguments.length,We=new Array(Le),qe=0;qe<Le;qe++)We[qe]=arguments[qe];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.INFO].concat(We)),this._logHandler.apply(this,[this,Re.INFO].concat(We))}},{key:"warn",value:function(){for(var Le=arguments.length,We=new Array(Le),qe=0;qe<Le;qe++)We[qe]=arguments[qe];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.WARN].concat(We)),this._logHandler.apply(this,[this,Re.WARN].concat(We))}},{key:"error",value:function(){for(var Le=arguments.length,We=new Array(Le),qe=0;qe<Le;qe++)We[qe]=arguments[qe];this._userLogHandler&&this._userLogHandler.apply(this,[this,Re.ERROR].concat(We)),this._logHandler.apply(this,[this,Re.ERROR].concat(We))}}]),fe}();function Oe(fe){re.forEach(function(Ae){Ae.setLogLevel(fe)})}function Q(fe,Ae){var We,Le=(0,_e.Z)(re);try{var qe=function(){var Qe=null;Ae&&Ae.level&&(Qe=ke[Ae.level]),We.value.userLogHandler=null===fe?null:function(Y,dn){for(var vn=arguments.length,nn=new Array(vn>2?vn-2:0),xt=2;xt<vn;xt++)nn[xt-2]=arguments[xt];var Ot=nn.map(function(Ct){if(null==Ct)return null;if("string"==typeof Ct)return Ct;if("number"==typeof Ct||"boolean"==typeof Ct)return Ct.toString();if(Ct instanceof Error)return Ct.message;try{return JSON.stringify(Ct)}catch(Zt){return null}}).filter(function(Ct){return Ct}).join(" ");dn>=(null!=Qe?Qe:Y.logLevel)&&fe({level:Re[dn].toLowerCase(),message:Ot,args:nn,type:Y.name})}};for(Le.s();!(We=Le.n()).done;)qe()}catch(Be){Le.e(Be)}finally{Le.f()}}},5725:function(rn,mt,J){"use strict";J.d(mt,{BH:function(){return st},LL:function(){return Vt},ZR:function(){return rt},gQ:function(){return Wa},hu:function(){return be},g5:function(){return we},US:function(){return Q},tV:function(){return Le},h$:function(){return fe},r3:function(){return ja},Sg:function(){return Qe},ne:function(){return Ts},p$:function(){return We},vZ:function(){return fa},ZB:function(){return qe},gK:function(){return sr},pd:function(){return Zs},m9:function(){return gi},z$:function(){return Y},GJ:function(){return Io},jU:function(){return nn},ru:function(){return xt},d:function(){return Ct},xb:function(){return mr},w1:function(){return Zt},hl:function(){return X},uI:function(){return dn},UG:function(){return vn},Yr:function(){return k},b$:function(){return Ot},G6:function(){return B},Mn:function(){return z},w9:function(){return rc},cI:function(){return Vr},UI:function(){return Wn},xO:function(){return Br},zd:function(){return ha},DV:function(){return si},ug:function(){return Qr},dS:function(){return Yr},Pz:function(){return ii},Dv:function(){return qa},Wj:function(){return Zn},lb:function(){return Hr}});var _e=J(6054),de=J(3740),D=J(6518),M=J(1885),S=J(9727),re=J(3693),Re=J(5134),ke=J(7289),be=function(ft,$e){if(!ft)throw we($e)},we=function(ft){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ft)},ne=function(ft){for(var $e=[],ot=0,Nt=0;Nt<ft.length;Nt++){var Rt=ft.charCodeAt(Nt);Rt<128?$e[ot++]=Rt:Rt<2048?($e[ot++]=Rt>>6|192,$e[ot++]=63&Rt|128):55296==(64512&Rt)&&Nt+1<ft.length&&56320==(64512&ft.charCodeAt(Nt+1))?(Rt=65536+((1023&Rt)<<10)+(1023&ft.charCodeAt(++Nt)),$e[ot++]=Rt>>18|240,$e[ot++]=Rt>>12&63|128,$e[ot++]=Rt>>6&63|128,$e[ot++]=63&Rt|128):($e[ot++]=Rt>>12|224,$e[ot++]=Rt>>6&63|128,$e[ot++]=63&Rt|128)}return $e},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(ft,$e){if(!Array.isArray(ft))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var ot=$e?this.byteToCharMapWebSafe_:this.byteToCharMap_,Nt=[],Rt=0;Rt<ft.length;Rt+=3){var Sn=ft[Rt],yn=Rt+1<ft.length,yi=yn?ft[Rt+1]:0,Yi=Rt+2<ft.length,hi=Yi?ft[Rt+2]:0,ct=(15&yi)<<2|hi>>6,Tt=63&hi;Yi||(Tt=64,yn||(ct=64)),Nt.push(ot[Sn>>2],ot[(3&Sn)<<4|yi>>4],ot[ct],ot[Tt])}return Nt.join("")},encodeString:function(ft,$e){return this.HAS_NATIVE_SUPPORT&&!$e?btoa(ft):this.encodeByteArray(ne(ft),$e)},decodeString:function(ft,$e){return this.HAS_NATIVE_SUPPORT&&!$e?atob(ft):function(ft){for(var $e=[],ot=0,Nt=0;ot<ft.length;){var Rt=ft[ot++];if(Rt<128)$e[Nt++]=String.fromCharCode(Rt);else if(Rt>191&&Rt<224){var Sn=ft[ot++];$e[Nt++]=String.fromCharCode((31&Rt)<<6|63&Sn)}else if(Rt>239&&Rt<365){var hi=((7&Rt)<<18|(63&ft[ot++])<<12|(63&ft[ot++])<<6|63&ft[ot++])-65536;$e[Nt++]=String.fromCharCode(55296+(hi>>10)),$e[Nt++]=String.fromCharCode(56320+(1023&hi))}else{var Ki=ft[ot++],Ea=ft[ot++];$e[Nt++]=String.fromCharCode((15&Rt)<<12|(63&Ki)<<6|63&Ea)}}return $e.join("")}(this.decodeStringToByteArray(ft,$e))},decodeStringToByteArray:function(ft,$e){this.init_();for(var ot=$e?this.charToByteMapWebSafe_:this.charToByteMap_,Nt=[],Rt=0;Rt<ft.length;){var Sn=ot[ft.charAt(Rt++)],yi=Rt<ft.length?ot[ft.charAt(Rt)]:0,hi=++Rt<ft.length?ot[ft.charAt(Rt)]:64,Ea=++Rt<ft.length?ot[ft.charAt(Rt)]:64;if(++Rt,null==Sn||null==yi||null==hi||null==Ea)throw Error();Nt.push(Sn<<2|yi>>4),64!==hi&&(Nt.push(yi<<4&240|hi>>2),64!==Ea&&Nt.push(hi<<6&192|Ea))}return Nt},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var ft=0;ft<this.ENCODED_VALS.length;ft++)this.byteToCharMap_[ft]=this.ENCODED_VALS.charAt(ft),this.charToByteMap_[this.byteToCharMap_[ft]]=ft,this.byteToCharMapWebSafe_[ft]=this.ENCODED_VALS_WEBSAFE.charAt(ft),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ft]]=ft,ft>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ft)]=ft,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ft)]=ft)}}},fe=function(ft){var $e=ne(ft);return Q.encodeByteArray($e,!0)},Ae=function(ft){return fe(ft).replace(/\./g,"")},Le=function(ft){try{return Q.decodeString(ft,!0)}catch($e){console.error("base64Decode failed: ",$e)}return null};function We(gt){return qe(void 0,gt)}function qe(gt,ft){if(!(ft instanceof Object))return ft;switch(ft.constructor){case Date:return new Date(ft.getTime());case Object:void 0===gt&&(gt={});break;case Array:gt=[];break;default:return ft}for(var ot in ft)!ft.hasOwnProperty(ot)||!Be(ot)||(gt[ot]=qe(gt[ot],ft[ot]));return gt}function Be(gt){return"__proto__"!==gt}var st=function(){function gt(){var ft=this;(0,Re.Z)(this,gt),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function($e,ot){ft.resolve=$e,ft.reject=ot})}return(0,ke.Z)(gt,[{key:"wrapCallback",value:function($e){var ot=this;return function(Nt,Rt){Nt?ot.reject(Nt):ot.resolve(Rt),"function"==typeof $e&&(ot.promise.catch(function(){}),1===$e.length?$e(Nt):$e(Nt,Rt))}}}]),gt}();function Qe(gt,ft){if(gt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var ot=ft||"demo-project",Nt=gt.iat||0,Rt=gt.sub||gt.user_id;if(!Rt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Sn=Object.assign({iss:"https://securetoken.google.com/".concat(ot),aud:ot,iat:Nt,exp:Nt+3600,auth_time:Nt,sub:Rt,user_id:Rt,firebase:{sign_in_provider:"custom",identities:{}}},gt);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(Sn)),""].join(".")}function Y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function dn(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y())}function vn(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(gt){return!1}}function nn(){return"object"==typeof self&&self.self===self}function xt(){var gt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof gt&&void 0!==gt.id}function Ot(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ct(){return Y().indexOf("Electron/")>=0}function Zt(){var gt=Y();return gt.indexOf("MSIE ")>=0||gt.indexOf("Trident/")>=0}function z(){return Y().indexOf("MSAppHost/")>=0}function k(){return!1}function B(){return!vn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){return"object"==typeof indexedDB}var rt=function(gt){(0,M.Z)($e,gt);var ft=(0,S.Z)($e);function $e(ot,Nt,Rt){var Sn;return(0,Re.Z)(this,$e),(Sn=ft.call(this,Nt)).code=ot,Sn.customData=Rt,Sn.name="FirebaseError",Object.setPrototypeOf((0,D.Z)(Sn),$e.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,D.Z)(Sn),Vt.prototype.create),Sn}return $e}((0,re.Z)(Error)),Vt=function(){function gt(ft,$e,ot){(0,Re.Z)(this,gt),this.service=ft,this.serviceName=$e,this.errors=ot}return(0,ke.Z)(gt,[{key:"create",value:function($e){var ot=(arguments.length<=1?void 0:arguments[1])||{},Nt="".concat(this.service,"/").concat($e),Rt=this.errors[$e],Sn=Rt?Fn(Rt,ot):"Error",yn="".concat(this.serviceName,": ").concat(Sn," (").concat(Nt,")."),yi=new rt(Nt,yn,ot);return yi}}]),gt}();function Fn(gt,ft){return gt.replace(rr,function($e,ot){var Nt=ft[ot];return null!=Nt?String(Nt):"<".concat(ot,"?>")})}var rr=/\{\$([^}]+)}/g;function Vr(gt){return JSON.parse(gt)}function ii(gt){return JSON.stringify(gt)}var Bi=function(ft){var $e={},ot={},Nt={},Rt="";try{var Sn=ft.split(".");$e=Vr(Le(Sn[0])||""),ot=Vr(Le(Sn[1])||""),Rt=Sn[2],Nt=ot.d||{},delete ot.d}catch(yn){}return{header:$e,claims:ot,data:Nt,signature:Rt}},rc=function(ft){var ot=Bi(ft).claims;return!!ot&&"object"==typeof ot&&ot.hasOwnProperty("iat")},Io=function(ft){var $e=Bi(ft).claims;return"object"==typeof $e&&!0===$e.admin};function ja(gt,ft){return Object.prototype.hasOwnProperty.call(gt,ft)}function si(gt,ft){if(Object.prototype.hasOwnProperty.call(gt,ft))return gt[ft]}function mr(gt){for(var ft in gt)if(Object.prototype.hasOwnProperty.call(gt,ft))return!1;return!0}function Wn(gt,ft,$e){var ot={};for(var Nt in gt)Object.prototype.hasOwnProperty.call(gt,Nt)&&(ot[Nt]=ft.call($e,gt[Nt],Nt,gt));return ot}function fa(gt,ft){if(gt===ft)return!0;for(var $e=Object.keys(gt),ot=Object.keys(ft),Nt=0,Rt=$e;Nt<Rt.length;Nt++){var Sn=Rt[Nt];if(!ot.includes(Sn))return!1;var yn=gt[Sn],yi=ft[Sn];if(ic(yn)&&ic(yi)){if(!fa(yn,yi))return!1}else if(yn!==yi)return!1}for(var Yi=0,hi=ot;Yi<hi.length;Yi++)if(!$e.includes(hi[Yi]))return!1;return!0}function ic(gt){return null!==gt&&"object"==typeof gt}function Br(gt){for(var ft=[],$e=function(){var Sn=(0,de.Z)(Nt[ot],2),yn=Sn[0],yi=Sn[1];Array.isArray(yi)?yi.forEach(function(Yi){ft.push(encodeURIComponent(yn)+"="+encodeURIComponent(Yi))}):ft.push(encodeURIComponent(yn)+"="+encodeURIComponent(yi))},ot=0,Nt=Object.entries(gt);ot<Nt.length;ot++)$e();return ft.length?"&"+ft.join("&"):""}function ha(gt){var ft={};return gt.replace(/^\?/,"").split("&").forEach(function(ot){if(ot){var Nt=ot.split("="),Rt=(0,de.Z)(Nt,2),yn=Rt[1];ft[decodeURIComponent(Rt[0])]=decodeURIComponent(yn)}}),ft}function Zs(gt){var ft=gt.indexOf("?");if(!ft)return"";var $e=gt.indexOf("#",ft);return gt.substring(ft,$e>0?$e:void 0)}var Wa=function(){function gt(){(0,Re.Z)(this,gt),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var ft=1;ft<this.blockSize;++ft)this.pad_[ft]=0;this.reset()}return(0,ke.Z)(gt,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function($e,ot){ot||(ot=0);var Nt=this.W_;if("string"==typeof $e)for(var Rt=0;Rt<16;Rt++)Nt[Rt]=$e.charCodeAt(ot)<<24|$e.charCodeAt(ot+1)<<16|$e.charCodeAt(ot+2)<<8|$e.charCodeAt(ot+3),ot+=4;else for(var Sn=0;Sn<16;Sn++)Nt[Sn]=$e[ot]<<24|$e[ot+1]<<16|$e[ot+2]<<8|$e[ot+3],ot+=4;for(var yn=16;yn<80;yn++){var yi=Nt[yn-3]^Nt[yn-8]^Nt[yn-14]^Nt[yn-16];Nt[yn]=4294967295&(yi<<1|yi>>>31)}for(var Tt,je,Yi=this.chain_[0],hi=this.chain_[1],Ki=this.chain_[2],Ea=this.chain_[3],ct=this.chain_[4],He=0;He<80;He++){He<40?He<20?(Tt=Ea^hi&(Ki^Ea),je=1518500249):(Tt=hi^Ki^Ea,je=1859775393):He<60?(Tt=hi&Ki|Ea&(hi|Ki),je=2400959708):(Tt=hi^Ki^Ea,je=3395469782);var ht=(Yi<<5|Yi>>>27)+Tt+ct+je+Nt[He]&4294967295;ct=Ea,Ea=Ki,Ki=4294967295&(hi<<30|hi>>>2),hi=Yi,Yi=ht}this.chain_[0]=this.chain_[0]+Yi&4294967295,this.chain_[1]=this.chain_[1]+hi&4294967295,this.chain_[2]=this.chain_[2]+Ki&4294967295,this.chain_[3]=this.chain_[3]+Ea&4294967295,this.chain_[4]=this.chain_[4]+ct&4294967295}},{key:"update",value:function($e,ot){if(null!=$e){void 0===ot&&(ot=$e.length);for(var Nt=ot-this.blockSize,Rt=0,Sn=this.buf_,yn=this.inbuf_;Rt<ot;){if(0===yn)for(;Rt<=Nt;)this.compress_($e,Rt),Rt+=this.blockSize;if("string"==typeof $e){for(;Rt<ot;)if(Sn[yn]=$e.charCodeAt(Rt),++Rt,++yn===this.blockSize){this.compress_(Sn),yn=0;break}}else for(;Rt<ot;)if(Sn[yn]=$e[Rt],++Rt,++yn===this.blockSize){this.compress_(Sn),yn=0;break}}this.inbuf_=yn,this.total_+=ot}}},{key:"digest",value:function(){var $e=[],ot=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Nt=this.blockSize-1;Nt>=56;Nt--)this.buf_[Nt]=255&ot,ot/=256;this.compress_(this.buf_);for(var Rt=0,Sn=0;Sn<5;Sn++)for(var yn=24;yn>=0;yn-=8)$e[Rt]=this.chain_[Sn]>>yn&255,++Rt;return $e}}]),gt}();function Ts(gt,ft){var $e=new Wi(gt,ft);return $e.subscribe.bind($e)}var Wi=function(){function gt(ft,$e){var ot=this;(0,Re.Z)(this,gt),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$e,this.task.then(function(){ft(ot)}).catch(function(Nt){ot.error(Nt)})}return(0,ke.Z)(gt,[{key:"next",value:function($e){this.forEachObserver(function(ot){ot.next($e)})}},{key:"error",value:function($e){this.forEachObserver(function(ot){ot.error($e)}),this.close($e)}},{key:"complete",value:function(){this.forEachObserver(function($e){$e.complete()}),this.close()}},{key:"subscribe",value:function($e,ot,Nt){var Sn,Rt=this;if(void 0===$e&&void 0===ot&&void 0===Nt)throw new Error("Missing Observer.");void 0===(Sn=function(gt,ft){if("object"!=typeof gt||null===gt)return!1;var ot,$e=(0,_e.Z)(["next","error","complete"]);try{for($e.s();!(ot=$e.n()).done;){var Nt=ot.value;if(Nt in gt&&"function"==typeof gt[Nt])return!0}}catch(Rt){$e.e(Rt)}finally{$e.f()}return!1}($e)?$e:{next:$e,error:ot,complete:Nt}).next&&(Sn.next=qi),void 0===Sn.error&&(Sn.error=qi),void 0===Sn.complete&&(Sn.complete=qi);var yn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Rt.finalError?Sn.error(Rt.finalError):Sn.complete()}catch(yi){}}),this.observers.push(Sn),yn}},{key:"unsubscribeOne",value:function($e){void 0===this.observers||void 0===this.observers[$e]||(delete this.observers[$e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function($e){if(!this.finalized)for(var ot=0;ot<this.observers.length;ot++)this.sendOne(ot,$e)}},{key:"sendOne",value:function($e,ot){var Nt=this;this.task.then(function(){if(void 0!==Nt.observers&&void 0!==Nt.observers[$e])try{ot(Nt.observers[$e])}catch(Rt){"undefined"!=typeof console&&console.error&&console.error(Rt)}})}},{key:"close",value:function($e){var ot=this;this.finalized||(this.finalized=!0,void 0!==$e&&(this.finalError=$e),this.task.then(function(){ot.observers=void 0,ot.onNoObservers=void 0}))}}]),gt}();function qi(){}var qa=function(ft,$e,ot,Nt){var Rt;if(Nt<$e?Rt="at least "+$e:Nt>ot&&(Rt=0===ot?"none":"no more than "+ot),Rt)throw new Error(ft+" failed: Was called with "+Nt+(1===Nt?" argument.":" arguments.")+" Expects "+Rt+".")};function sr(gt,ft){return"".concat(gt," failed: ").concat(ft," argument ")}function Zn(gt,ft,$e,ot){if((!ot||$e)&&"function"!=typeof $e)throw new Error(sr(gt,ft)+"must be a valid function.")}function Hr(gt,ft,$e,ot){if((!ot||$e)&&("object"!=typeof $e||null===$e))throw new Error(sr(gt,ft)+"must be a valid context object.")}var Yr=function(ft){for(var $e=[],ot=0,Nt=0;Nt<ft.length;Nt++){var Rt=ft.charCodeAt(Nt);if(Rt>=55296&&Rt<=56319){var Sn=Rt-55296;Nt++,be(Nt<ft.length,"Surrogate pair missing trail surrogate."),Rt=65536+(Sn<<10)+(ft.charCodeAt(Nt)-56320)}Rt<128?$e[ot++]=Rt:Rt<2048?($e[ot++]=Rt>>6|192,$e[ot++]=63&Rt|128):Rt<65536?($e[ot++]=Rt>>12|224,$e[ot++]=Rt>>6&63|128,$e[ot++]=63&Rt|128):($e[ot++]=Rt>>18|240,$e[ot++]=Rt>>12&63|128,$e[ot++]=Rt>>6&63|128,$e[ot++]=63&Rt|128)}return $e},Qr=function(ft){for(var $e=0,ot=0;ot<ft.length;ot++){var Nt=ft.charCodeAt(ot);Nt<128?$e++:Nt<2048?$e+=2:Nt>=55296&&Nt<=56319?($e+=4,ot++):$e+=3}return $e};function gi(gt){return gt&&gt._delegate?gt._delegate:gt}},9001:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return _e.Z}});var _e=J(1932);_e.Z.registerVersion("firebase","9.1.1","app-compat")},3121:function(rn,mt,J){"use strict";J.r(mt);var _e=J(5134),de=J(7289),D=J(8239),M=J(8774),S=J.n(M),re=J(1932),Re=J(8251),ke=J(7528),v=J(9187),be=J(1885),we=J(9727),ne=J(282),Oe=J(5725),Ae=(J(7092),J(2134),J(5119));function Le(){return window}function qe(ct,Tt,je){return Be.apply(this,arguments)}function Be(){return(Be=(0,D.Z)(S().mark(function ct(Tt,je,He){var ht,Gt,zt,Kt,pn;return S().wrap(function(da){for(;;)switch(da.prev=da.next){case 0:return Gt=Le(),zt=Gt.BuildInfo,(0,ne.ap)(je.sessionId,"AuthEvent did not contain a session ID"),da.next=4,xt(je.sessionId);case 4:return Kt=da.sent,pn={},(0,ne.aq)()?pn.ibi=zt.packageName:(0,ne.ar)()?pn.apn=zt.packageName:(0,ne.as)(Tt,"operation-not-supported-in-this-environment"),zt.displayName&&(pn.appDisplayName=zt.displayName),pn.sessionId=Kt,da.abrupt("return",(0,ne.at)(Tt,He,je.type,void 0,null!==(ht=je.eventId)&&void 0!==ht?ht:void 0,pn));case 10:case"end":return da.stop()}},ct)}))).apply(this,arguments)}function Qe(){return(Qe=(0,D.Z)(S().mark(function ct(Tt){var je,He,ht;return S().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return je=Le(),He=je.BuildInfo,ht={},(0,ne.aq)()?ht.iosBundleId=He.packageName:(0,ne.ar)()?ht.androidPackageName=He.packageName:(0,ne.as)(Tt,"operation-not-supported-in-this-environment"),zt.next=5,(0,ne.au)(Tt,ht);case 5:case"end":return zt.stop()}},ct)}))).apply(this,arguments)}function Y(ct){var je=Le().cordova;return new Promise(function(He){je.plugins.browsertab.isAvailable(function(ht){var Gt=null;ht?je.plugins.browsertab.openUrl(ct):Gt=je.InAppBrowser.open(ct,(0,ne.ao)()?"_blank":"_system","location=yes"),He(Gt)})})}function dn(ct,Tt,je){return vn.apply(this,arguments)}function vn(){return(vn=(0,D.Z)(S().mark(function ct(Tt,je,He){var ht,Gt,zt;return S().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return ht=Le(),Gt=ht.cordova,zt=function(){},pn.prev=2,pn.next=5,new Promise(function($n,da){var Ci=null;function fs(){var Ya;$n();var oa=null===(Ya=Gt.plugins.browsertab)||void 0===Ya?void 0:Ya.close;"function"==typeof oa&&oa(),"function"==typeof(null==He?void 0:He.close)&&He.close()}function Pr(){Ci||(Ci=window.setTimeout(function(){da((0,ne.av)(Tt,"redirect-cancelled-by-user"))},2e3))}function _i(){"visible"===(null==document?void 0:document.visibilityState)&&Pr()}je.addPassiveListener(fs),document.addEventListener("resume",Pr,!1),(0,ne.ar)()&&document.addEventListener("visibilitychange",_i,!1),zt=function(){je.removePassiveListener(fs),document.removeEventListener("resume",Pr,!1),document.removeEventListener("visibilitychange",_i,!1),Ci&&window.clearTimeout(Ci)}});case 5:return pn.prev=5,zt(),pn.finish(5);case 8:case"end":return pn.stop()}},ct,null,[[2,,5,8]])}))).apply(this,arguments)}function nn(ct){var Tt,je,He,ht,Gt,zt,Kt,pn,$n,da,Ci=Le();(0,ne.aw)("function"==typeof(null===(Tt=null==Ci?void 0:Ci.universalLinks)||void 0===Tt?void 0:Tt.subscribe),ct,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ne.aw)(void 0!==(null===(je=null==Ci?void 0:Ci.BuildInfo)||void 0===je?void 0:je.packageName),ct,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ne.aw)("function"==typeof(null===(Gt=null===(ht=null===(He=null==Ci?void 0:Ci.cordova)||void 0===He?void 0:He.plugins)||void 0===ht?void 0:ht.browsertab)||void 0===Gt?void 0:Gt.openUrl),ct,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ne.aw)("function"==typeof(null===(pn=null===(Kt=null===(zt=null==Ci?void 0:Ci.cordova)||void 0===zt?void 0:zt.plugins)||void 0===Kt?void 0:Kt.browsertab)||void 0===pn?void 0:pn.isAvailable),ct,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ne.aw)("function"==typeof(null===(da=null===($n=null==Ci?void 0:Ci.cordova)||void 0===$n?void 0:$n.InAppBrowser)||void 0===da?void 0:da.open),ct,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function xt(ct){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,D.Z)(S().mark(function ct(Tt){var je,ht;return S().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return je=Ct(Tt),zt.next=3,crypto.subtle.digest("SHA-256",je);case 3:return ht=Array.from(new Uint8Array(zt.sent)),zt.abrupt("return",ht.map(function(Kt){return Kt.toString(16).padStart(2,"0")}).join(""));case 6:case"end":return zt.stop()}},ct)}))).apply(this,arguments)}function Ct(ct){if((0,ne.ap)(/[0-9a-zA-Z]+/.test(ct),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ct);for(var Tt=new ArrayBuffer(ct.length),je=new Uint8Array(Tt),He=0;He<ct.length;He++)je[He]=ct.charCodeAt(He);return je}var z=function(ct){(0,be.Z)(je,ct);var He,Tt=(0,we.Z)(je);function je(){var He;return(0,_e.Z)(this,je),(He=Tt.apply(this,arguments)).passiveListeners=new Set,He.initPromise=new Promise(function(ht){He.resolveInialized=ht}),He}return(0,de.Z)(je,[{key:"addPassiveListener",value:function(ht){this.passiveListeners.add(ht)}},{key:"removePassiveListener",value:function(ht){this.passiveListeners.delete(ht)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(ht){return this.resolveInialized(),this.passiveListeners.forEach(function(Gt){return Gt(ht)}),(0,ke.Z)((0,v.Z)(je.prototype),"onEvent",this).call(this,ht)}},{key:"initialized",value:(He=(0,D.Z)(S().mark(function Gt(){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Kt.next=2,this.initPromise;case 2:case"end":return Kt.stop()}},Gt,this)})),function(){return He.apply(this,arguments)})}]),je}(ne.az);function k(ct,Tt){var je=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:Tt,eventId:je,urlResponse:null,sessionId:nt(),postBody:null,tenantId:ct.tenantId,error:(0,ne.av)(ct,"no-auth-event")}}function B(ct,Tt){return _t()._set(rt(ct),Tt)}function X(ct){return ge.apply(this,arguments)}function ge(){return(ge=(0,D.Z)(S().mark(function ct(Tt){var je;return S().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,_t()._get(rt(Tt));case 2:if(!(je=ht.sent)){ht.next=6;break}return ht.next=6,_t()._remove(rt(Tt));case 6:return ht.abrupt("return",je);case 7:case"end":return ht.stop()}},ct)}))).apply(this,arguments)}function Ie(ct,Tt){var je,He,ht=function(ct){var Tt=rr(ct),je=Tt.link?decodeURIComponent(Tt.link):void 0,He=rr(je).link,ht=Tt.deep_link_id?decodeURIComponent(Tt.deep_link_id):void 0;return rr(ht).link||ht||He||je||ct}(Tt);if(ht.includes("/__/auth/callback")){var Gt=rr(ht),zt=Gt.firebaseError?function(ct){try{return JSON.parse(ct)}catch(Tt){return null}}(decodeURIComponent(Gt.firebaseError)):null,Kt=null===(He=null===(je=null==zt?void 0:zt.code)||void 0===je?void 0:je.split("auth/"))||void 0===He?void 0:He[1],pn=Kt?(0,ne.av)(Kt):null;return pn?{type:ct.type,eventId:ct.eventId,tenantId:ct.tenantId,error:pn,urlResponse:null,sessionId:null,postBody:null}:{type:ct.type,eventId:ct.eventId,tenantId:ct.tenantId,sessionId:ct.sessionId,urlResponse:ht,postBody:null}}return null}function nt(){for(var ct=[],Tt="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",je=0;je<20;je++){var He=Math.floor(Math.random()*Tt.length);ct.push(Tt.charAt(He))}return ct.join("")}function _t(){return(0,ne.ax)(ne.b)}function rt(ct){return(0,ne.ay)("authEvent",ct.config.apiKey,ct.name)}function rr(ct){if(!(null==ct?void 0:ct.includes("?")))return{};var Tt=ct.split("?"),ht=(0,Re.Z)(Tt).slice(1);return(0,Oe.zd)(ht.join("?"))}var Bi=function(){function ct(){(0,_e.Z)(this,ct),this._redirectPersistence=ne.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ne.aA}return(0,de.Z)(ct,[{key:"_initialize",value:(Tt=(0,D.Z)(S().mark(function He(ht){var Gt,zt;return S().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return Gt=ht._key(),(zt=this.eventManagers.get(Gt))||(zt=new z(ht),this.eventManagers.set(Gt,zt),this.attachCallbackListeners(ht,zt)),pn.abrupt("return",zt);case 4:case"end":return pn.stop()}},He,this)})),function(He){return Tt.apply(this,arguments)})},{key:"_openPopup",value:function(je){(0,ne.as)(je,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var Tt=(0,D.Z)(S().mark(function He(ht,Gt,zt,Kt){var pn,$n,da;return S().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return nn(ht),Pr.next=3,this._initialize(ht);case 3:return pn=Pr.sent,Pr.next=6,pn.initialized();case 6:return pn.resetRedirect(),(0,ne.aB)(),Pr.next=10,this._originValidation(ht);case 10:return $n=k(ht,zt,Kt),Pr.next=13,B(ht,$n);case 13:return Pr.next=15,qe(ht,$n,Gt);case 15:return da=Pr.sent,Pr.next=18,Y(da);case 18:return Pr.abrupt("return",dn(ht,pn,Pr.sent));case 20:case"end":return Pr.stop()}},He,this)}));return function(He,ht,Gt,zt){return Tt.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(je,He){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(je){var He=je._key();return this.originValidationPromises[He]||(this.originValidationPromises[He]=function(ct){return Qe.apply(this,arguments)}(je)),this.originValidationPromises[He]}},{key:"attachCallbackListeners",value:function(je,He){var ht=Le(),Gt=ht.universalLinks,zt=ht.handleOpenURL,Kt=ht.BuildInfo,pn=setTimeout((0,D.Z)(S().mark(function fs(){return S().wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:return _i.next=2,X(je);case 2:He.onEvent(Ri());case 3:case"end":return _i.stop()}},fs)})),500),$n=function(){var fs=(0,D.Z)(S().mark(function Pr(_i){var Ya,oa;return S().wrap(function(Ca){for(;;)switch(Ca.prev=Ca.next){case 0:return clearTimeout(pn),Ca.next=3,X(je);case 3:oa=null,(Ya=Ca.sent)&&(null==_i?void 0:_i.url)&&(oa=Ie(Ya,_i.url)),He.onEvent(oa||Ri());case 7:case"end":return Ca.stop()}},Pr)}));return function(_i){return fs.apply(this,arguments)}}();void 0!==Gt&&"function"==typeof Gt.subscribe&&Gt.subscribe(null,$n);var da=zt,Ci="".concat(Kt.packageName.toLowerCase(),"://");Le().handleOpenURL=function(){var fs=(0,D.Z)(S().mark(function Pr(_i){return S().wrap(function(oa){for(;;)switch(oa.prev=oa.next){case 0:if(_i.toLowerCase().startsWith(Ci)&&$n({url:_i}),"function"==typeof da)try{da(_i)}catch(Qc){console.error(Qc)}case 2:case"end":return oa.stop()}},Pr)}));return function(Pr){return fs.apply(this,arguments)}}()}}]),ct;var Tt}();function Ri(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ne.av)("no-auth-event")}}function si(){var ct;return(null===(ct=null==self?void 0:self.location)||void 0===ct?void 0:ct.protocol)||null}function Wn(){var ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Oe.z$)();return!("file:"!==si()&&"ionic:"!==si()||!ct.toLowerCase().match(/iphone|ipad|ipod|android/))}function ic(){return(0,Oe.w1)()&&11===(null==document?void 0:document.documentMode)}function Br(){var ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Oe.z$)();return/Edge\/\d+/.test(ct)}function Zs(){try{var ct=self.localStorage,Tt=ne.aG();if(ct)return ct.setItem(Tt,"1"),ct.removeItem(Tt),!function(){var ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Oe.z$)();return ic()||Br(ct)}()||(0,Oe.hl)()}catch(je){return Wa()&&(0,Oe.hl)()}return!1}function Wa(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ts(){return("http:"===si()||"https:"===si()||(0,Oe.ru)()||Wn())&&!((0,Oe.b$)()||(0,Oe.UG)())&&Zs()&&!Wa()}function Wi(){return Wn()&&"undefined"!=typeof document}function Bs(){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,D.Z)(S().mark(function ct(){return S().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(Wi()){je.next=2;break}return je.abrupt("return",!1);case 2:return je.abrupt("return",new Promise(function(He){var ht=setTimeout(function(){He(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(ht),He(!0)})}));case 3:case"end":return je.stop()}},ct)}))).apply(this,arguments)}var qi={LOCAL:"local",NONE:"none",SESSION:"session"},qa=ne.aw,sr="persistence";function Kn(ct,Tt){qa(Object.values(qi).includes(Tt),ct,"invalid-persistence-type"),(0,Oe.b$)()?qa(Tt!==qi.SESSION,ct,"unsupported-persistence-type"):(0,Oe.UG)()?qa(Tt===qi.NONE,ct,"unsupported-persistence-type"):Wa()?qa(Tt===qi.NONE||Tt===qi.LOCAL&&(0,Oe.hl)(),ct,"unsupported-persistence-type"):qa(Tt===qi.NONE||Zs(),ct,"unsupported-persistence-type")}function Zn(ct){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,D.Z)(S().mark(function ct(Tt){var je,He;return S().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return Gt.next=2,Tt._initializationPromise;case 2:je=Qr(),He=ne.ay(sr,Tt.config.apiKey,Tt.name),(null==je?void 0:je.sessionStorage)&&je.sessionStorage.setItem(He,Tt._getPersistence());case 5:case"end":return Gt.stop()}},ct)}))).apply(this,arguments)}function Qr(){return"undefined"!=typeof window?window:null}var br=ne.aw,qn=function(){function ct(){(0,_e.Z)(this,ct),this.browserResolver=ne.ax(ne.k),this.cordovaResolver=ne.ax(Bi),this.underlyingResolver=null,this._redirectPersistence=ne.a,this._completeRedirectFn=ne.aA}return(0,de.Z)(ct,[{key:"_initialize",value:(Tt=(0,D.Z)(S().mark(function He(ht){return S().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:return zt.next=2,this.selectUnderlyingResolver();case 2:return zt.abrupt("return",this.assertedUnderlyingResolver._initialize(ht));case 3:case"end":return zt.stop()}},He,this)})),function(He){return Tt.apply(this,arguments)})},{key:"_openPopup",value:function(){var Tt=(0,D.Z)(S().mark(function He(ht,Gt,zt,Kt){return S().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:return $n.next=2,this.selectUnderlyingResolver();case 2:return $n.abrupt("return",this.assertedUnderlyingResolver._openPopup(ht,Gt,zt,Kt));case 3:case"end":return $n.stop()}},He,this)}));return function(He,ht,Gt,zt){return Tt.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var Tt=(0,D.Z)(S().mark(function He(ht,Gt,zt,Kt){return S().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:return $n.next=2,this.selectUnderlyingResolver();case 2:return $n.abrupt("return",this.assertedUnderlyingResolver._openRedirect(ht,Gt,zt,Kt));case 3:case"end":return $n.stop()}},He,this)}));return function(He,ht,Gt,zt){return Tt.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(je,He){this.assertedUnderlyingResolver._isIframeWebStorageSupported(je,He)}},{key:"_originValidation",value:function(je){return this.assertedUnderlyingResolver._originValidation(je)}},{key:"_shouldInitProactively",get:function(){return Wi()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return br(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var Tt=(0,D.Z)(S().mark(function He(){return S().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:if(!this.underlyingResolver){zt.next=2;break}return zt.abrupt("return");case 2:return zt.next=4,Bs();case 4:this.underlyingResolver=zt.sent?this.cordovaResolver:this.browserResolver;case 6:case"end":return zt.stop()}},He,this)}));return function(){return Tt.apply(this,arguments)}}()}]),ct;var Tt}();function Pi(ct){return ct.unwrap()}function Ms(ct){return ra(ct)}function Do(ct,Tt){var je,He=null===(je=Tt.customData)||void 0===je?void 0:je._tokenResponse;if("auth/multi-factor-auth-required"===Tt.code)Tt.resolver=new ot(ct,ne.am(ct,Tt));else if(He){var Gt=ra(Tt),zt=Tt;Gt&&(zt.credential=Gt,zt.tenantId=He.tenantId||void 0,zt.email=He.email||void 0,zt.phoneNumber=He.phoneNumber||void 0)}}function ra(ct){var je=(ct instanceof Oe.ZR?ct.customData:ct)._tokenResponse;if(!je)return null;if(!(ct instanceof Oe.ZR)&&"temporaryProof"in je&&"phoneNumber"in je)return ne.P.credentialFromResult(ct);var ht,He=je.providerId;if(!He||He===ne.o.PASSWORD)return null;switch(He){case ne.o.GOOGLE:ht=ne.N;break;case ne.o.FACEBOOK:ht=ne.M;break;case ne.o.GITHUB:ht=ne.Q;break;case ne.o.TWITTER:ht=ne.V;break;default:var Gt=je.oauthIdToken,zt=je.oauthAccessToken,pn=je.pendingToken,$n=je.nonce;return zt||je.oauthTokenSecret||Gt||pn?pn?He.startsWith("saml.")?ne.aJ._create(He,pn):ne.I._fromParams({providerId:He,signInMethod:He,pendingToken:pn,idToken:Gt,accessToken:zt}):new ne.T(He).credential({idToken:Gt,accessToken:zt,rawNonce:$n}):null}return ct instanceof Oe.ZR?ht.credentialFromError(ct):ht.credentialFromResult(ct)}function gi(ct,Tt){return gt.apply(this,arguments)}function gt(){return(gt=(0,D.Z)(S().mark(function ct(Tt,je){var He,ht,zt;return S().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return pn.prev=0,pn.next=3,je;case 3:He=pn.sent,pn.next=10;break;case 6:throw pn.prev=6,pn.t0=pn.catch(0),pn.t0 instanceof Oe.ZR&&Do(Tt,pn.t0),pn.t0;case 10:return zt=(ht=He).user,pn.abrupt("return",{operationType:ht.operationType,credential:Ms(He),additionalUserInfo:ne.ak(He),user:Nt.getOrCreate(zt)});case 12:case"end":return pn.stop()}},ct,null,[[0,6]])}))).apply(this,arguments)}function ft(ct,Tt){return $e.apply(this,arguments)}function $e(){return($e=(0,D.Z)(S().mark(function ct(Tt,je){var He;return S().wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:return Gt.next=2,je;case 2:return Gt.abrupt("return",{verificationId:(He=Gt.sent).verificationId,confirm:function(Kt){return gi(Tt,He.confirm(Kt))}});case 4:case"end":return Gt.stop()}},ct)}))).apply(this,arguments)}var ot=function(){function ct(Tt,je){(0,_e.Z)(this,ct),this.resolver=je,this.auth=function(ct){return ct.wrapped()}(Tt)}return(0,de.Z)(ct,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(je){return gi(Pi(this.auth),this.resolver.resolveSignIn(je))}}]),ct}(),Nt=function(){var ct=function(){function Tt(je){(0,_e.Z)(this,Tt),this._delegate=je,this.multiFactor=ne.an(je)}return(0,de.Z)(Tt,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(He){return this._delegate.getIdTokenResult(He)}},{key:"getIdToken",value:function(He){return this._delegate.getIdToken(He)}},{key:"linkAndRetrieveDataWithCredential",value:function(He){return this.linkWithCredential(He)}},{key:"linkWithCredential",value:(je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Kt.abrupt("return",gi(this.auth,ne.Y(this._delegate,Gt)));case 1:case"end":return Kt.stop()}},ht,this)})),function(ht){return je.apply(this,arguments)})},{key:"linkWithPhoneNumber",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt,zt){return S().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return pn.abrupt("return",ft(this.auth,ne.l(this._delegate,Gt,zt)));case 1:case"end":return pn.stop()}},ht,this)}));return function(ht,Gt){return je.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Kt.abrupt("return",gi(this.auth,ne.d(this._delegate,Gt,qn)));case 1:case"end":return Kt.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Kt.next=2,Zn(ne.aC(this.auth));case 2:return Kt.abrupt("return",ne.g(this._delegate,Gt,qn));case 3:case"end":return Kt.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(He){return this.reauthenticateWithCredential(He)}},{key:"reauthenticateWithCredential",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Kt.abrupt("return",gi(this.auth,ne.Z(this._delegate,Gt)));case 1:case"end":return Kt.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(He,ht){return ft(this.auth,ne.r(this._delegate,He,ht))}},{key:"reauthenticateWithPopup",value:function(He){return gi(this.auth,ne.e(this._delegate,He,qn))}},{key:"reauthenticateWithRedirect",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Kt.next=2,Zn(ne.aC(this.auth));case 2:return Kt.abrupt("return",ne.h(this._delegate,Gt,qn));case 3:case"end":return Kt.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(He){return ne.aa(this._delegate,He)}},{key:"unlink",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Kt.next=2,ne.aj(this._delegate,Gt);case 2:return Kt.abrupt("return",this);case 3:case"end":return Kt.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"updateEmail",value:function(He){return ne.af(this._delegate,He)}},{key:"updatePassword",value:function(He){return ne.ag(this._delegate,He)}},{key:"updatePhoneNumber",value:function(He){return ne.u(this._delegate,He)}},{key:"updateProfile",value:function(He){return ne.ae(this._delegate,He)}},{key:"verifyBeforeUpdateEmail",value:function(He,ht){return ne.ab(this._delegate,He,ht)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(He){return Tt.USER_MAP.has(He)||Tt.USER_MAP.set(He,new Tt(He)),Tt.USER_MAP.get(He)}}]),Tt;var je}();return ct.USER_MAP=new WeakMap,ct}(),Rt=ne.aw,Sn=function(){var ct=function(){function Tt(je,He){if((0,_e.Z)(this,Tt),this.app=je,He.isInitialized())return this._delegate=He.getImmediate(),void this.linkUnderlyingAuth();var ht=je.options.apiKey;Rt(ht,"invalid-api-key",{appName:je.name});var Gt=[ne.K];if("undefined"!=typeof window){Gt=function(ct,Tt){var je=Qr();if(!(null==je?void 0:je.sessionStorage))return[];var He=ne.ay(sr,ct,Tt);switch(je.sessionStorage.getItem(He)){case qi.NONE:return[ne.K];case qi.LOCAL:return[ne.i,ne.a];case qi.SESSION:return[ne.a];default:return[]}}(ht,je.name);for(var zt=0,Kt=[ne.i,ne.b,ne.a];zt<Kt.length;zt++){var pn=Kt[zt];Gt.includes(pn)||Gt.push(pn)}}Rt(ht,"invalid-api-key",{appName:je.name});var $n="undefined"!=typeof window?qn:void 0;this._delegate=He.initialize({options:{persistence:Gt,popupRedirectResolver:$n}}),this._delegate._updateErrorMap(ne.z),this.linkUnderlyingAuth()}return(0,de.Z)(Tt,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Nt.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(He){this._delegate.languageCode=He}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(He){this._delegate.tenantId=He}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(He,ht){ne.E(this._delegate,He,ht)}},{key:"applyActionCode",value:function(He){return ne.a1(this._delegate,He)}},{key:"checkActionCode",value:function(He){return ne.a2(this._delegate,He)}},{key:"confirmPasswordReset",value:function(He,ht){return ne.a0(this._delegate,He,ht)}},{key:"createUserWithEmailAndPassword",value:(je=(0,D.Z)(S().mark(function ht(Gt,zt){return S().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return pn.abrupt("return",gi(this._delegate,ne.a4(this._delegate,Gt,zt)));case 1:case"end":return pn.stop()}},ht,this)})),function(ht,Gt){return je.apply(this,arguments)})},{key:"fetchProvidersForEmail",value:function(He){return this.fetchSignInMethodsForEmail(He)}},{key:"fetchSignInMethodsForEmail",value:function(He){return ne.a9(this._delegate,He)}},{key:"isSignInWithEmailLink",value:function(He){return ne.a7(this._delegate,He)}},{key:"getRedirectResult",value:function(){var je=(0,D.Z)(S().mark(function ht(){var Gt;return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Rt(Ts(),this._delegate,"operation-not-supported-in-this-environment"),Kt.next=3,ne.j(this._delegate,qn);case 3:if(Gt=Kt.sent){Kt.next=6;break}return Kt.abrupt("return",{credential:null,user:null});case 6:return Kt.abrupt("return",gi(this._delegate,Promise.resolve(Gt)));case 7:case"end":return Kt.stop()}},ht,this)}));return function(){return je.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(He){!function(ct,Tt){(0,ne.aC)(ct)._logFramework(Tt)}(this._delegate,He)}},{key:"onAuthStateChanged",value:function(He,ht,Gt){var zt=yn(He,ht,Gt);return this._delegate.onAuthStateChanged(zt.next,zt.error,zt.complete)}},{key:"onIdTokenChanged",value:function(He,ht,Gt){var zt=yn(He,ht,Gt);return this._delegate.onIdTokenChanged(zt.next,zt.error,zt.complete)}},{key:"sendSignInLinkToEmail",value:function(He,ht){return ne.a6(this._delegate,He,ht)}},{key:"sendPasswordResetEmail",value:function(He,ht){return ne.$(this._delegate,He,ht||void 0)}},{key:"setPersistence",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){var zt;return S().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:Kn(this._delegate,Gt),$n.t0=Gt,$n.next=$n.t0===qi.SESSION?4:$n.t0===qi.LOCAL?6:$n.t0===qi.NONE?11:13;break;case 4:return zt=ne.a,$n.abrupt("break",14);case 6:return $n.next=8,ne.ax(ne.i)._isAvailable();case 8:return zt=$n.sent?ne.i:ne.b,$n.abrupt("break",14);case 11:return zt=ne.K,$n.abrupt("break",14);case 13:return $n.abrupt("return",ne.as("argument-error",{appName:this._delegate.name}));case 14:return $n.abrupt("return",this._delegate.setPersistence(zt));case 15:case"end":return $n.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(He){return this.signInWithCredential(He)}},{key:"signInAnonymously",value:function(){return gi(this._delegate,ne.W(this._delegate))}},{key:"signInWithCredential",value:function(He){return gi(this._delegate,ne.X(this._delegate,He))}},{key:"signInWithCustomToken",value:function(He){return gi(this._delegate,ne._(this._delegate,He))}},{key:"signInWithEmailAndPassword",value:function(He,ht){return gi(this._delegate,ne.a5(this._delegate,He,ht))}},{key:"signInWithEmailLink",value:function(He,ht){return gi(this._delegate,ne.a8(this._delegate,He,ht))}},{key:"signInWithPhoneNumber",value:function(He,ht){return ft(this._delegate,ne.s(this._delegate,He,ht))}},{key:"signInWithPopup",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Rt(Ts(),this._delegate,"operation-not-supported-in-this-environment"),Kt.abrupt("return",gi(this._delegate,ne.c(this._delegate,Gt,qn)));case 2:case"end":return Kt.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var je=(0,D.Z)(S().mark(function ht(Gt){return S().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return Rt(Ts(),this._delegate,"operation-not-supported-in-this-environment"),Kt.next=3,Zn(this._delegate);case 3:return Kt.abrupt("return",ne.f(this._delegate,Gt,qn));case 4:case"end":return Kt.stop()}},ht,this)}));return function(ht){return je.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(He){return this._delegate.updateCurrentUser(He)}},{key:"verifyPasswordResetCode",value:function(He){return ne.a3(this._delegate,He)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var He=this;this._delegate.wrapped=function(){return He}}}]),Tt;var je}();return ct.Persistence=qi,ct}();function yn(ct,Tt,je){var He=ct;"function"!=typeof ct&&(He=ct.next,Tt=ct.error,je=ct.complete);var ht=He;return{next:function(Kt){return ht(Kt&&Nt.getOrCreate(Kt))},error:Tt,complete:je}}var ct,yi=function(){var ct=function(){function Tt(){(0,_e.Z)(this,Tt),this.providerId="phone",this._delegate=new ne.P(Pi(re.Z.auth()))}return(0,de.Z)(Tt,[{key:"verifyPhoneNumber",value:function(He,ht){return this._delegate.verifyPhoneNumber(He,ht)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(He,ht){return ne.P.credential(He,ht)}}]),Tt}();return ct.PHONE_SIGN_IN_METHOD=ne.P.PHONE_SIGN_IN_METHOD,ct.PROVIDER_ID=ne.P.PROVIDER_ID,ct}(),Yi=ne.aw,hi=function(){function ct(Tt,je){var ht,He=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re.Z.app();(0,_e.Z)(this,ct),Yi(null===(ht=He.options)||void 0===ht?void 0:ht.apiKey,"invalid-api-key",{appName:He.name}),this._delegate=new ne.R(Tt,je,He.auth()),this.type=this._delegate.type}return(0,de.Z)(ct,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),ct}();(ct=re.Z).INTERNAL.registerComponent(new Ae.wA("auth-compat",function(Tt){var je=Tt.getProvider("app-compat").getImmediate(),He=Tt.getProvider("auth");return new Sn(je,He)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ne.A.EMAIL_SIGNIN,PASSWORD_RESET:ne.A.PASSWORD_RESET,RECOVER_EMAIL:ne.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ne.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ne.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ne.A.VERIFY_EMAIL}},EmailAuthProvider:ne.L,FacebookAuthProvider:ne.M,GithubAuthProvider:ne.Q,GoogleAuthProvider:ne.N,OAuthProvider:ne.T,PhoneAuthProvider:yi,PhoneMultiFactorGenerator:ne.m,RecaptchaVerifier:hi,TwitterAuthProvider:ne.V,Auth:Sn,AuthCredential:ne.G,Error:Oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ct.registerVersion("@firebase/auth-compat","0.1.4")},4173:function(rn,mt){var _e;!function(de,D){"use strict";"object"==typeof rn.exports?rn.exports=de.document?D(de,!0):function(M){if(!M.document)throw new Error("jQuery requires a window with a document");return D(M)}:D(de)}("undefined"!=typeof window?window:this,function(de,D){"use strict";var M=[],S=Object.getPrototypeOf,re=M.slice,Re=M.flat?function(G){return M.flat.call(G)}:function(G){return M.concat.apply([],G)},ke=M.push,v=M.indexOf,be={},we=be.toString,ne=be.hasOwnProperty,Oe=ne.toString,Q=Oe.call(Object),fe={},Ae=function(A){return"function"==typeof A&&"number"!=typeof A.nodeType&&"function"!=typeof A.item},Le=function(A){return null!=A&&A===A.window},We=de.document,qe={type:!0,src:!0,nonce:!0,noModule:!0};function Be(G,A,V){var q,ie,ce=(V=V||We).createElement("script");if(ce.text=G,A)for(q in qe)(ie=A[q]||A.getAttribute&&A.getAttribute(q))&&ce.setAttribute(q,ie);V.head.appendChild(ce).parentNode.removeChild(ce)}function st(G){return null==G?G+"":"object"==typeof G||"function"==typeof G?be[we.call(G)]||"object":typeof G}var Y=function G(A,V){return new G.fn.init(A,V)};function dn(G){var A=!!G&&"length"in G&&G.length,V=st(G);return!Ae(G)&&!Le(G)&&("array"===V||0===A||"number"==typeof A&&A>0&&A-1 in G)}Y.fn=Y.prototype={jquery:"3.6.0",constructor:Y,length:0,toArray:function(){return re.call(this)},get:function(A){return null==A?re.call(this):A<0?this[A+this.length]:this[A]},pushStack:function(A){var V=Y.merge(this.constructor(),A);return V.prevObject=this,V},each:function(A){return Y.each(this,A)},map:function(A){return this.pushStack(Y.map(this,function(V,q){return A.call(V,q,V)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Y.grep(this,function(A,V){return(V+1)%2}))},odd:function(){return this.pushStack(Y.grep(this,function(A,V){return V%2}))},eq:function(A){var V=this.length,q=+A+(A<0?V:0);return this.pushStack(q>=0&&q<V?[this[q]]:[])},end:function(){return this.prevObject||this.constructor()},push:ke,sort:M.sort,splice:M.splice},Y.extend=Y.fn.extend=function(){var G,A,V,q,ie,ce,me=arguments[0]||{},Ee=1,ze=arguments.length,Xe=!1;for("boolean"==typeof me&&(Xe=me,me=arguments[Ee]||{},Ee++),"object"!=typeof me&&!Ae(me)&&(me={}),Ee===ze&&(me=this,Ee--);Ee<ze;Ee++)if(null!=(G=arguments[Ee]))for(A in G)q=G[A],"__proto__"!==A&&me!==q&&(Xe&&q&&(Y.isPlainObject(q)||(ie=Array.isArray(q)))?(V=me[A],ce=ie&&!Array.isArray(V)?[]:ie||Y.isPlainObject(V)?V:{},ie=!1,me[A]=Y.extend(Xe,ce,q)):void 0!==q&&(me[A]=q));return me},Y.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(A){throw new Error(A)},noop:function(){},isPlainObject:function(A){var V,q;return!(!A||"[object Object]"!==we.call(A)||(V=S(A))&&("function"!=typeof(q=ne.call(V,"constructor")&&V.constructor)||Oe.call(q)!==Q))},isEmptyObject:function(A){var V;for(V in A)return!1;return!0},globalEval:function(A,V,q){Be(A,{nonce:V&&V.nonce},q)},each:function(A,V){var q,ie=0;if(dn(A))for(q=A.length;ie<q&&!1!==V.call(A[ie],ie,A[ie]);ie++);else for(ie in A)if(!1===V.call(A[ie],ie,A[ie]))break;return A},makeArray:function(A,V){var q=V||[];return null!=A&&(dn(Object(A))?Y.merge(q,"string"==typeof A?[A]:A):ke.call(q,A)),q},inArray:function(A,V,q){return null==V?-1:v.call(V,A,q)},merge:function(A,V){for(var q=+V.length,ie=0,ce=A.length;ie<q;ie++)A[ce++]=V[ie];return A.length=ce,A},grep:function(A,V,q){for(var ce=[],me=0,Ee=A.length,ze=!q;me<Ee;me++)!V(A[me],me)!==ze&&ce.push(A[me]);return ce},map:function(A,V,q){var ie,ce,me=0,Ee=[];if(dn(A))for(ie=A.length;me<ie;me++)null!=(ce=V(A[me],me,q))&&Ee.push(ce);else for(me in A)null!=(ce=V(A[me],me,q))&&Ee.push(ce);return Re(Ee)},guid:1,support:fe}),"function"==typeof Symbol&&(Y.fn[Symbol.iterator]=M[Symbol.iterator]),Y.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(G,A){be["[object "+A+"]"]=A.toLowerCase()});var vn=function(G){var A,V,q,ie,ce,me,Ee,ze,Xe,yt,Wt,qt,ut,Jt,On,er,di,Ta,po,zr="sizzle"+1*new Date,ia=G.document,An=0,Pu=0,$i=ns(),va=ns(),Mr=ns(),El=ns(),mo=function(Ce,it){return Ce===it&&(Wt=!0),0},yu={}.hasOwnProperty,aa=[],Po=aa.pop,Oo=aa.push,sa=aa.push,xs=aa.slice,il=function(Ce,it){for(var St=0,lt=Ce.length;St<lt;St++)if(Ce[St]===it)return St;return-1},al="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Si="[\\x20\\t\\r\\n\\f]",Is="(?:\\\\[\\da-fA-F]{1,6}"+Si+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",lc="\\["+Si+"*("+Is+")(?:"+Si+"*([*^$|!~]?=)"+Si+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Is+"))|)"+Si+"*\\]",jf=":("+Is+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+lc+")*)|.*)\\)|)",pr=new RegExp(Si+"+","g"),Cl=new RegExp("^"+Si+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Si+"+$","g"),cc=new RegExp("^"+Si+"*,"+Si+"*"),Wf=new RegExp("^"+Si+"*([>+~]|"+Si+")"+Si+"*"),qf=new RegExp(Si+"|>"),fc=new RegExp(jf),Yf=new RegExp("^"+Is+"$"),Sl={ID:new RegExp("^#("+Is+")"),CLASS:new RegExp("^\\.("+Is+")"),TAG:new RegExp("^("+Is+"|[*])"),ATTR:new RegExp("^"+lc),PSEUDO:new RegExp("^"+jf),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Si+"*(even|odd|(([+-]|)(\\d*)n|)"+Si+"*(?:([+-]|)"+Si+"*(\\d+)|))"+Si+"*\\)|)","i"),bool:new RegExp("^(?:"+al+")$","i"),needsContext:new RegExp("^"+Si+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Si+"*((?:-\\d)?\\d*)"+Si+"*\\)|)(?=[^-]|$)","i")},jt=/HTML$/i,ei=/^(?:input|select|textarea|button)$/i,nf=/^h\d$/i,pa=/^[^{]+\{\s*\[native \w/,Kf=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Tl=/[+~]/,ts=new RegExp("\\\\[\\da-fA-F]{1,6}"+Si+"?|\\\\([^\\r\\n\\f])","g"),Ds=function(Ce,it){var St="0x"+Ce.slice(1)-65536;return it||(St<0?String.fromCharCode(St+65536):String.fromCharCode(St>>10|55296,1023&St|56320))},rf=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,S_=function(Ce,it){return it?"\0"===Ce?"\ufffd":Ce.slice(0,-1)+"\\"+Ce.charCodeAt(Ce.length-1).toString(16)+" ":"\\"+Ce},Ml=function(){qt()},hc=Il(function(Ge){return!0===Ge.disabled&&"fieldset"===Ge.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{sa.apply(aa=xs.call(ia.childNodes),ia.childNodes)}catch(Ge){sa={apply:aa.length?function(Ce,it){Oo.apply(Ce,xs.call(it))}:function(Ce,it){for(var St=Ce.length,lt=0;Ce[St++]=it[lt++];);Ce.length=St-1}}}function vi(Ge,Ce,it,St){var lt,Ft,Bt,mn,Rn,Yn,dr,vr=Ce&&Ce.ownerDocument,Kr=Ce?Ce.nodeType:9;if(it=it||[],"string"!=typeof Ge||!Ge||1!==Kr&&9!==Kr&&11!==Kr)return it;if(!St&&(qt(Ce),Ce=Ce||ut,On)){if(11!==Kr&&(Rn=Kf.exec(Ge)))if(lt=Rn[1]){if(9===Kr){if(!(Bt=Ce.getElementById(lt)))return it;if(Bt.id===lt)return it.push(Bt),it}else if(vr&&(Bt=vr.getElementById(lt))&&po(Ce,Bt)&&Bt.id===lt)return it.push(Bt),it}else{if(Rn[2])return sa.apply(it,Ce.getElementsByTagName(Ge)),it;if((lt=Rn[3])&&V.getElementsByClassName&&Ce.getElementsByClassName)return sa.apply(it,Ce.getElementsByClassName(lt)),it}if(V.qsa&&!El[Ge+" "]&&(!er||!er.test(Ge))&&(1!==Kr||"object"!==Ce.nodeName.toLowerCase())){if(dr=Ge,vr=Ce,1===Kr&&(qf.test(Ge)||Wf.test(Ge))){for(((vr=Tl.test(Ge)&&xl(Ce.parentNode)||Ce)!==Ce||!V.scope)&&((mn=Ce.getAttribute("id"))?mn=mn.replace(rf,S_):Ce.setAttribute("id",mn=zr)),Ft=(Yn=me(Ge)).length;Ft--;)Yn[Ft]=(mn?"#"+mn:":scope")+" "+Qf(Yn[Ft]);dr=Yn.join(",")}try{return sa.apply(it,vr.querySelectorAll(dr)),it}catch(Ui){El(Ge,!0)}finally{mn===zr&&Ce.removeAttribute("id")}}}return ze(Ge.replace(Cl,"$1"),Ce,it,St)}function ns(){var Ge=[];return function Ce(it,St){return Ge.push(it+" ")>q.cacheLength&&delete Ce[Ge.shift()],Ce[it+" "]=St}}function ma(Ge){return Ge[zr]=!0,Ge}function Lo(Ge){var Ce=ut.createElement("fieldset");try{return!!Ge(Ce)}catch(it){return!1}finally{Ce.parentNode&&Ce.parentNode.removeChild(Ce),Ce=null}}function _u(Ge,Ce){for(var it=Ge.split("|"),St=it.length;St--;)q.attrHandle[it[St]]=Ce}function bu(Ge,Ce){var it=Ce&&Ge,St=it&&1===Ge.nodeType&&1===Ce.nodeType&&Ge.sourceIndex-Ce.sourceIndex;if(St)return St;if(it)for(;it=it.nextSibling;)if(it===Ce)return-1;return Ge?1:-1}function md(Ge){return function(Ce){return"input"===Ce.nodeName.toLowerCase()&&Ce.type===Ge}}function $f(Ge){return function(Ce){var it=Ce.nodeName.toLowerCase();return("input"===it||"button"===it)&&Ce.type===Ge}}function af(Ge){return function(Ce){return"form"in Ce?Ce.parentNode&&!1===Ce.disabled?"label"in Ce?"label"in Ce.parentNode?Ce.parentNode.disabled===Ge:Ce.disabled===Ge:Ce.isDisabled===Ge||Ce.isDisabled!==!Ge&&hc(Ce)===Ge:Ce.disabled===Ge:"label"in Ce&&Ce.disabled===Ge}}function Al(Ge){return ma(function(Ce){return Ce=+Ce,ma(function(it,St){for(var lt,Ft=Ge([],it.length,Ce),Bt=Ft.length;Bt--;)it[lt=Ft[Bt]]&&(it[lt]=!(St[lt]=it[lt]))})})}function xl(Ge){return Ge&&void 0!==Ge.getElementsByTagName&&Ge}for(A in V=vi.support={},ce=vi.isXML=function(Ge){var it=Ge&&(Ge.ownerDocument||Ge).documentElement;return!jt.test(Ge&&Ge.namespaceURI||it&&it.nodeName||"HTML")},qt=vi.setDocument=function(Ge){var Ce,it,St=Ge?Ge.ownerDocument||Ge:ia;return St==ut||9!==St.nodeType||!St.documentElement||(Jt=(ut=St).documentElement,On=!ce(ut),ia!=ut&&(it=ut.defaultView)&&it.top!==it&&(it.addEventListener?it.addEventListener("unload",Ml,!1):it.attachEvent&&it.attachEvent("onunload",Ml)),V.scope=Lo(function(lt){return Jt.appendChild(lt).appendChild(ut.createElement("div")),void 0!==lt.querySelectorAll&&!lt.querySelectorAll(":scope fieldset div").length}),V.attributes=Lo(function(lt){return lt.className="i",!lt.getAttribute("className")}),V.getElementsByTagName=Lo(function(lt){return lt.appendChild(ut.createComment("")),!lt.getElementsByTagName("*").length}),V.getElementsByClassName=pa.test(ut.getElementsByClassName),V.getById=Lo(function(lt){return Jt.appendChild(lt).id=zr,!ut.getElementsByName||!ut.getElementsByName(zr).length}),V.getById?(q.filter.ID=function(lt){var Ft=lt.replace(ts,Ds);return function(Bt){return Bt.getAttribute("id")===Ft}},q.find.ID=function(lt,Ft){if(void 0!==Ft.getElementById&&On){var Bt=Ft.getElementById(lt);return Bt?[Bt]:[]}}):(q.filter.ID=function(lt){var Ft=lt.replace(ts,Ds);return function(Bt){var mn=void 0!==Bt.getAttributeNode&&Bt.getAttributeNode("id");return mn&&mn.value===Ft}},q.find.ID=function(lt,Ft){if(void 0!==Ft.getElementById&&On){var Bt,mn,Rn,Yn=Ft.getElementById(lt);if(Yn){if((Bt=Yn.getAttributeNode("id"))&&Bt.value===lt)return[Yn];for(Rn=Ft.getElementsByName(lt),mn=0;Yn=Rn[mn++];)if((Bt=Yn.getAttributeNode("id"))&&Bt.value===lt)return[Yn]}return[]}}),q.find.TAG=V.getElementsByTagName?function(lt,Ft){return void 0!==Ft.getElementsByTagName?Ft.getElementsByTagName(lt):V.qsa?Ft.querySelectorAll(lt):void 0}:function(lt,Ft){var Bt,mn=[],Rn=0,Yn=Ft.getElementsByTagName(lt);if("*"===lt){for(;Bt=Yn[Rn++];)1===Bt.nodeType&&mn.push(Bt);return mn}return Yn},q.find.CLASS=V.getElementsByClassName&&function(lt,Ft){if(void 0!==Ft.getElementsByClassName&&On)return Ft.getElementsByClassName(lt)},di=[],er=[],(V.qsa=pa.test(ut.querySelectorAll))&&(Lo(function(lt){var Ft;Jt.appendChild(lt).innerHTML="<a id='"+zr+"'></a><select id='"+zr+"-\r\\' msallowcapture=''><option selected=''></option></select>",lt.querySelectorAll("[msallowcapture^='']").length&&er.push("[*^$]="+Si+"*(?:''|\"\")"),lt.querySelectorAll("[selected]").length||er.push("\\["+Si+"*(?:value|"+al+")"),lt.querySelectorAll("[id~="+zr+"-]").length||er.push("~="),(Ft=ut.createElement("input")).setAttribute("name",""),lt.appendChild(Ft),lt.querySelectorAll("[name='']").length||er.push("\\["+Si+"*name"+Si+"*="+Si+"*(?:''|\"\")"),lt.querySelectorAll(":checked").length||er.push(":checked"),lt.querySelectorAll("a#"+zr+"+*").length||er.push(".#.+[+~]"),lt.querySelectorAll("\\\f"),er.push("[\\r\\n\\f]")}),Lo(function(lt){lt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Ft=ut.createElement("input");Ft.setAttribute("type","hidden"),lt.appendChild(Ft).setAttribute("name","D"),lt.querySelectorAll("[name=d]").length&&er.push("name"+Si+"*[*^$|!~]?="),2!==lt.querySelectorAll(":enabled").length&&er.push(":enabled",":disabled"),Jt.appendChild(lt).disabled=!0,2!==lt.querySelectorAll(":disabled").length&&er.push(":enabled",":disabled"),lt.querySelectorAll("*,:x"),er.push(",.*:")})),(V.matchesSelector=pa.test(Ta=Jt.matches||Jt.webkitMatchesSelector||Jt.mozMatchesSelector||Jt.oMatchesSelector||Jt.msMatchesSelector))&&Lo(function(lt){V.disconnectedMatch=Ta.call(lt,"*"),Ta.call(lt,"[s!='']:x"),di.push("!=",jf)}),er=er.length&&new RegExp(er.join("|")),di=di.length&&new RegExp(di.join("|")),Ce=pa.test(Jt.compareDocumentPosition),po=Ce||pa.test(Jt.contains)?function(lt,Ft){var Bt=9===lt.nodeType?lt.documentElement:lt,mn=Ft&&Ft.parentNode;return lt===mn||!(!mn||1!==mn.nodeType||!(Bt.contains?Bt.contains(mn):lt.compareDocumentPosition&&16&lt.compareDocumentPosition(mn)))}:function(lt,Ft){if(Ft)for(;Ft=Ft.parentNode;)if(Ft===lt)return!0;return!1},mo=Ce?function(lt,Ft){if(lt===Ft)return Wt=!0,0;var Bt=!lt.compareDocumentPosition-!Ft.compareDocumentPosition;return Bt||(1&(Bt=(lt.ownerDocument||lt)==(Ft.ownerDocument||Ft)?lt.compareDocumentPosition(Ft):1)||!V.sortDetached&&Ft.compareDocumentPosition(lt)===Bt?lt==ut||lt.ownerDocument==ia&&po(ia,lt)?-1:Ft==ut||Ft.ownerDocument==ia&&po(ia,Ft)?1:yt?il(yt,lt)-il(yt,Ft):0:4&Bt?-1:1)}:function(lt,Ft){if(lt===Ft)return Wt=!0,0;var Bt,mn=0,Rn=lt.parentNode,Yn=Ft.parentNode,dr=[lt],vr=[Ft];if(!Rn||!Yn)return lt==ut?-1:Ft==ut?1:Rn?-1:Yn?1:yt?il(yt,lt)-il(yt,Ft):0;if(Rn===Yn)return bu(lt,Ft);for(Bt=lt;Bt=Bt.parentNode;)dr.unshift(Bt);for(Bt=Ft;Bt=Bt.parentNode;)vr.unshift(Bt);for(;dr[mn]===vr[mn];)mn++;return mn?bu(dr[mn],vr[mn]):dr[mn]==ia?-1:vr[mn]==ia?1:0}),ut},vi.matches=function(Ge,Ce){return vi(Ge,null,null,Ce)},vi.matchesSelector=function(Ge,Ce){if(qt(Ge),V.matchesSelector&&On&&!El[Ce+" "]&&(!di||!di.test(Ce))&&(!er||!er.test(Ce)))try{var it=Ta.call(Ge,Ce);if(it||V.disconnectedMatch||Ge.document&&11!==Ge.document.nodeType)return it}catch(St){El(Ce,!0)}return vi(Ce,ut,null,[Ge]).length>0},vi.contains=function(Ge,Ce){return(Ge.ownerDocument||Ge)!=ut&&qt(Ge),po(Ge,Ce)},vi.attr=function(Ge,Ce){(Ge.ownerDocument||Ge)!=ut&&qt(Ge);var it=q.attrHandle[Ce.toLowerCase()],St=it&&yu.call(q.attrHandle,Ce.toLowerCase())?it(Ge,Ce,!On):void 0;return void 0!==St?St:V.attributes||!On?Ge.getAttribute(Ce):(St=Ge.getAttributeNode(Ce))&&St.specified?St.value:null},vi.escape=function(Ge){return(Ge+"").replace(rf,S_)},vi.error=function(Ge){throw new Error("Syntax error, unrecognized expression: "+Ge)},vi.uniqueSort=function(Ge){var Ce,it=[],St=0,lt=0;if(Wt=!V.detectDuplicates,yt=!V.sortStable&&Ge.slice(0),Ge.sort(mo),Wt){for(;Ce=Ge[lt++];)Ce===Ge[lt]&&(St=it.push(lt));for(;St--;)Ge.splice(it[St],1)}return yt=null,Ge},ie=vi.getText=function(Ge){var Ce,it="",St=0,lt=Ge.nodeType;if(lt){if(1===lt||9===lt||11===lt){if("string"==typeof Ge.textContent)return Ge.textContent;for(Ge=Ge.firstChild;Ge;Ge=Ge.nextSibling)it+=ie(Ge)}else if(3===lt||4===lt)return Ge.nodeValue}else for(;Ce=Ge[St++];)it+=ie(Ce);return it},(q=vi.selectors={cacheLength:50,createPseudo:ma,match:Sl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ce){return Ce[1]=Ce[1].replace(ts,Ds),Ce[3]=(Ce[3]||Ce[4]||Ce[5]||"").replace(ts,Ds),"~="===Ce[2]&&(Ce[3]=" "+Ce[3]+" "),Ce.slice(0,4)},CHILD:function(Ce){return Ce[1]=Ce[1].toLowerCase(),"nth"===Ce[1].slice(0,3)?(Ce[3]||vi.error(Ce[0]),Ce[4]=+(Ce[4]?Ce[5]+(Ce[6]||1):2*("even"===Ce[3]||"odd"===Ce[3])),Ce[5]=+(Ce[7]+Ce[8]||"odd"===Ce[3])):Ce[3]&&vi.error(Ce[0]),Ce},PSEUDO:function(Ce){var it,St=!Ce[6]&&Ce[2];return Sl.CHILD.test(Ce[0])?null:(Ce[3]?Ce[2]=Ce[4]||Ce[5]||"":St&&fc.test(St)&&(it=me(St,!0))&&(it=St.indexOf(")",St.length-it)-St.length)&&(Ce[0]=Ce[0].slice(0,it),Ce[2]=St.slice(0,it)),Ce.slice(0,3))}},filter:{TAG:function(Ce){var it=Ce.replace(ts,Ds).toLowerCase();return"*"===Ce?function(){return!0}:function(St){return St.nodeName&&St.nodeName.toLowerCase()===it}},CLASS:function(Ce){var it=$i[Ce+" "];return it||(it=new RegExp("(^|"+Si+")"+Ce+"("+Si+"|$)"))&&$i(Ce,function(St){return it.test("string"==typeof St.className&&St.className||void 0!==St.getAttribute&&St.getAttribute("class")||"")})},ATTR:function(Ce,it,St){return function(lt){var Ft=vi.attr(lt,Ce);return null==Ft?"!="===it:!it||(Ft+="","="===it?Ft===St:"!="===it?Ft!==St:"^="===it?St&&0===Ft.indexOf(St):"*="===it?St&&Ft.indexOf(St)>-1:"$="===it?St&&Ft.slice(-St.length)===St:"~="===it?(" "+Ft.replace(pr," ")+" ").indexOf(St)>-1:"|="===it&&(Ft===St||Ft.slice(0,St.length+1)===St+"-"))}},CHILD:function(Ce,it,St,lt,Ft){var Bt="nth"!==Ce.slice(0,3),mn="last"!==Ce.slice(-4),Rn="of-type"===it;return 1===lt&&0===Ft?function(Yn){return!!Yn.parentNode}:function(Yn,dr,vr){var Kr,Ui,zi,kr,Ma,$a,Xi=Bt!==mn?"nextSibling":"previousSibling",ds=Yn.parentNode,tu=Rn&&Yn.nodeName.toLowerCase(),dc=!vr&&!Rn,Fo=!1;if(ds){if(Bt){for(;Xi;){for(kr=Yn;kr=kr[Xi];)if(Rn?kr.nodeName.toLowerCase()===tu:1===kr.nodeType)return!1;$a=Xi="only"===Ce&&!$a&&"nextSibling"}return!0}if($a=[mn?ds.firstChild:ds.lastChild],mn&&dc){for(Fo=(Ma=(Kr=(Ui=(zi=(kr=ds)[zr]||(kr[zr]={}))[kr.uniqueID]||(zi[kr.uniqueID]={}))[Ce]||[])[0]===An&&Kr[1])&&Kr[2],kr=Ma&&ds.childNodes[Ma];kr=++Ma&&kr&&kr[Xi]||(Fo=Ma=0)||$a.pop();)if(1===kr.nodeType&&++Fo&&kr===Yn){Ui[Ce]=[An,Ma,Fo];break}}else if(dc&&(Fo=Ma=(Kr=(Ui=(zi=(kr=Yn)[zr]||(kr[zr]={}))[kr.uniqueID]||(zi[kr.uniqueID]={}))[Ce]||[])[0]===An&&Kr[1]),!1===Fo)for(;(kr=++Ma&&kr&&kr[Xi]||(Fo=Ma=0)||$a.pop())&&((Rn?kr.nodeName.toLowerCase()!==tu:1!==kr.nodeType)||!++Fo||(dc&&((Ui=(zi=kr[zr]||(kr[zr]={}))[kr.uniqueID]||(zi[kr.uniqueID]={}))[Ce]=[An,Fo]),kr!==Yn)););return(Fo-=Ft)===lt||Fo%lt==0&&Fo/lt>=0}}},PSEUDO:function(Ce,it){var St,lt=q.pseudos[Ce]||q.setFilters[Ce.toLowerCase()]||vi.error("unsupported pseudo: "+Ce);return lt[zr]?lt(it):lt.length>1?(St=[Ce,Ce,"",it],q.setFilters.hasOwnProperty(Ce.toLowerCase())?ma(function(Ft,Bt){for(var mn,Rn=lt(Ft,it),Yn=Rn.length;Yn--;)Ft[mn=il(Ft,Rn[Yn])]=!(Bt[mn]=Rn[Yn])}):function(Ft){return lt(Ft,0,St)}):lt}},pseudos:{not:ma(function(Ge){var Ce=[],it=[],St=Ee(Ge.replace(Cl,"$1"));return St[zr]?ma(function(lt,Ft,Bt,mn){for(var Rn,Yn=St(lt,null,mn,[]),dr=lt.length;dr--;)(Rn=Yn[dr])&&(lt[dr]=!(Ft[dr]=Rn))}):function(lt,Ft,Bt){return Ce[0]=lt,St(Ce,null,Bt,it),Ce[0]=null,!it.pop()}}),has:ma(function(Ge){return function(Ce){return vi(Ge,Ce).length>0}}),contains:ma(function(Ge){return Ge=Ge.replace(ts,Ds),function(Ce){return(Ce.textContent||ie(Ce)).indexOf(Ge)>-1}}),lang:ma(function(Ge){return Yf.test(Ge||"")||vi.error("unsupported lang: "+Ge),Ge=Ge.replace(ts,Ds).toLowerCase(),function(Ce){var it;do{if(it=On?Ce.lang:Ce.getAttribute("xml:lang")||Ce.getAttribute("lang"))return(it=it.toLowerCase())===Ge||0===it.indexOf(Ge+"-")}while((Ce=Ce.parentNode)&&1===Ce.nodeType);return!1}}),target:function(Ce){var it=G.location&&G.location.hash;return it&&it.slice(1)===Ce.id},root:function(Ce){return Ce===Jt},focus:function(Ce){return Ce===ut.activeElement&&(!ut.hasFocus||ut.hasFocus())&&!!(Ce.type||Ce.href||~Ce.tabIndex)},enabled:af(!1),disabled:af(!0),checked:function(Ce){var it=Ce.nodeName.toLowerCase();return"input"===it&&!!Ce.checked||"option"===it&&!!Ce.selected},selected:function(Ce){return!0===Ce.selected},empty:function(Ce){for(Ce=Ce.firstChild;Ce;Ce=Ce.nextSibling)if(Ce.nodeType<6)return!1;return!0},parent:function(Ce){return!q.pseudos.empty(Ce)},header:function(Ce){return nf.test(Ce.nodeName)},input:function(Ce){return ei.test(Ce.nodeName)},button:function(Ce){var it=Ce.nodeName.toLowerCase();return"input"===it&&"button"===Ce.type||"button"===it},text:function(Ce){var it;return"input"===Ce.nodeName.toLowerCase()&&"text"===Ce.type&&(null==(it=Ce.getAttribute("type"))||"text"===it.toLowerCase())},first:Al(function(){return[0]}),last:Al(function(Ge,Ce){return[Ce-1]}),eq:Al(function(Ge,Ce,it){return[it<0?it+Ce:it]}),even:Al(function(Ge,Ce){for(var it=0;it<Ce;it+=2)Ge.push(it);return Ge}),odd:Al(function(Ge,Ce){for(var it=1;it<Ce;it+=2)Ge.push(it);return Ge}),lt:Al(function(Ge,Ce,it){for(var St=it<0?it+Ce:it>Ce?Ce:it;--St>=0;)Ge.push(St);return Ge}),gt:Al(function(Ge,Ce,it){for(var St=it<0?it+Ce:it;++St<Ce;)Ge.push(St);return Ge})}}).pseudos.nth=q.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})q.pseudos[A]=md(A);for(A in{submit:!0,reset:!0})q.pseudos[A]=$f(A);function Xf(){}function Qf(Ge){for(var Ce=0,it=Ge.length,St="";Ce<it;Ce++)St+=Ge[Ce].value;return St}function Il(Ge,Ce,it){var St=Ce.dir,lt=Ce.next,Ft=lt||St,Bt=it&&"parentNode"===Ft,mn=Pu++;return Ce.first?function(Rn,Yn,dr){for(;Rn=Rn[St];)if(1===Rn.nodeType||Bt)return Ge(Rn,Yn,dr);return!1}:function(Rn,Yn,dr){var vr,Kr,Ui,zi=[An,mn];if(dr){for(;Rn=Rn[St];)if((1===Rn.nodeType||Bt)&&Ge(Rn,Yn,dr))return!0}else for(;Rn=Rn[St];)if(1===Rn.nodeType||Bt)if(Kr=(Ui=Rn[zr]||(Rn[zr]={}))[Rn.uniqueID]||(Ui[Rn.uniqueID]={}),lt&&lt===Rn.nodeName.toLowerCase())Rn=Rn[St]||Rn;else{if((vr=Kr[Ft])&&vr[0]===An&&vr[1]===mn)return zi[2]=vr[2];if(Kr[Ft]=zi,zi[2]=Ge(Rn,Yn,dr))return!0}return!1}}function Jf(Ge){return Ge.length>1?function(Ce,it,St){for(var lt=Ge.length;lt--;)if(!Ge[lt](Ce,it,St))return!1;return!0}:Ge[0]}function No(Ge,Ce,it,St,lt){for(var Ft,Bt=[],mn=0,Rn=Ge.length,Yn=null!=Ce;mn<Rn;mn++)(Ft=Ge[mn])&&(!it||it(Ft,St,lt))&&(Bt.push(Ft),Yn&&Ce.push(mn));return Bt}function sf(Ge,Ce,it,St,lt,Ft){return St&&!St[zr]&&(St=sf(St)),lt&&!lt[zr]&&(lt=sf(lt,Ft)),ma(function(Bt,mn,Rn,Yn){var dr,vr,Kr,Ui=[],zi=[],kr=mn.length,Ma=Bt||function(Ge,Ce,it){for(var St=0,lt=Ce.length;St<lt;St++)vi(Ge,Ce[St],it);return it}(Ce||"*",Rn.nodeType?[Rn]:Rn,[]),$a=!Ge||!Bt&&Ce?Ma:No(Ma,Ui,Ge,Rn,Yn),Xi=it?lt||(Bt?Ge:kr||St)?[]:mn:$a;if(it&&it($a,Xi,Rn,Yn),St)for(dr=No(Xi,zi),St(dr,[],Rn,Yn),vr=dr.length;vr--;)(Kr=dr[vr])&&(Xi[zi[vr]]=!($a[zi[vr]]=Kr));if(Bt){if(lt||Ge){if(lt){for(dr=[],vr=Xi.length;vr--;)(Kr=Xi[vr])&&dr.push($a[vr]=Kr);lt(null,Xi=[],dr,Yn)}for(vr=Xi.length;vr--;)(Kr=Xi[vr])&&(dr=lt?il(Bt,Kr):Ui[vr])>-1&&(Bt[dr]=!(mn[dr]=Kr))}}else Xi=No(Xi===mn?Xi.splice(kr,Xi.length):Xi),lt?lt(null,mn,Xi,Yn):sa.apply(mn,Xi)})}function of(Ge){for(var Ce,it,St,lt=Ge.length,Ft=q.relative[Ge[0].type],Bt=Ft||q.relative[" "],mn=Ft?1:0,Rn=Il(function(vr){return vr===Ce},Bt,!0),Yn=Il(function(vr){return il(Ce,vr)>-1},Bt,!0),dr=[function(vr,Kr,Ui){var zi=!Ft&&(Ui||Kr!==Xe)||((Ce=Kr).nodeType?Rn(vr,Kr,Ui):Yn(vr,Kr,Ui));return Ce=null,zi}];mn<lt;mn++)if(it=q.relative[Ge[mn].type])dr=[Il(Jf(dr),it)];else{if((it=q.filter[Ge[mn].type].apply(null,Ge[mn].matches))[zr]){for(St=++mn;St<lt&&!q.relative[Ge[St].type];St++);return sf(mn>1&&Jf(dr),mn>1&&Qf(Ge.slice(0,mn-1).concat({value:" "===Ge[mn-2].type?"*":""})).replace(Cl,"$1"),it,mn<St&&of(Ge.slice(mn,St)),St<lt&&of(Ge=Ge.slice(St)),St<lt&&Qf(Ge))}dr.push(it)}return Jf(dr)}return Xf.prototype=q.filters=q.pseudos,q.setFilters=new Xf,me=vi.tokenize=function(Ge,Ce){var it,St,lt,Ft,Bt,mn,Rn,Yn=va[Ge+" "];if(Yn)return Ce?0:Yn.slice(0);for(Bt=Ge,mn=[],Rn=q.preFilter;Bt;){for(Ft in(!it||(St=cc.exec(Bt)))&&(St&&(Bt=Bt.slice(St[0].length)||Bt),mn.push(lt=[])),it=!1,(St=Wf.exec(Bt))&&(it=St.shift(),lt.push({value:it,type:St[0].replace(Cl," ")}),Bt=Bt.slice(it.length)),q.filter)(St=Sl[Ft].exec(Bt))&&(!Rn[Ft]||(St=Rn[Ft](St)))&&(it=St.shift(),lt.push({value:it,type:Ft,matches:St}),Bt=Bt.slice(it.length));if(!it)break}return Ce?Bt.length:Bt?vi.error(Ge):va(Ge,mn).slice(0)},Ee=vi.compile=function(Ge,Ce){var it,St=[],lt=[],Ft=Mr[Ge+" "];if(!Ft){for(Ce||(Ce=me(Ge)),it=Ce.length;it--;)(Ft=of(Ce[it]))[zr]?St.push(Ft):lt.push(Ft);(Ft=Mr(Ge,function(Ge,Ce){var it=Ce.length>0,St=Ge.length>0,lt=function(Bt,mn,Rn,Yn,dr){var vr,Kr,Ui,zi=0,kr="0",Ma=Bt&&[],$a=[],Xi=Xe,ds=Bt||St&&q.find.TAG("*",dr),tu=An+=null==Xi?1:Math.random()||.1,dc=ds.length;for(dr&&(Xe=mn==ut||mn||dr);kr!==dc&&null!=(vr=ds[kr]);kr++){if(St&&vr){for(Kr=0,!mn&&vr.ownerDocument!=ut&&(qt(vr),Rn=!On);Ui=Ge[Kr++];)if(Ui(vr,mn||ut,Rn)){Yn.push(vr);break}dr&&(An=tu)}it&&((vr=!Ui&&vr)&&zi--,Bt&&Ma.push(vr))}if(zi+=kr,it&&kr!==zi){for(Kr=0;Ui=Ce[Kr++];)Ui(Ma,$a,mn,Rn);if(Bt){if(zi>0)for(;kr--;)Ma[kr]||$a[kr]||($a[kr]=Po.call(Yn));$a=No($a)}sa.apply(Yn,$a),dr&&!Bt&&$a.length>0&&zi+Ce.length>1&&vi.uniqueSort(Yn)}return dr&&(An=tu,Xe=Xi),Ma};return it?ma(lt):lt}(lt,St))).selector=Ge}return Ft},ze=vi.select=function(Ge,Ce,it,St){var lt,Ft,Bt,mn,Rn,Yn="function"==typeof Ge&&Ge,dr=!St&&me(Ge=Yn.selector||Ge);if(it=it||[],1===dr.length){if((Ft=dr[0]=dr[0].slice(0)).length>2&&"ID"===(Bt=Ft[0]).type&&9===Ce.nodeType&&On&&q.relative[Ft[1].type]){if(!(Ce=(q.find.ID(Bt.matches[0].replace(ts,Ds),Ce)||[])[0]))return it;Yn&&(Ce=Ce.parentNode),Ge=Ge.slice(Ft.shift().value.length)}for(lt=Sl.needsContext.test(Ge)?0:Ft.length;lt--&&!q.relative[mn=(Bt=Ft[lt]).type];)if((Rn=q.find[mn])&&(St=Rn(Bt.matches[0].replace(ts,Ds),Tl.test(Ft[0].type)&&xl(Ce.parentNode)||Ce))){if(Ft.splice(lt,1),!(Ge=St.length&&Qf(Ft)))return sa.apply(it,St),it;break}}return(Yn||Ee(Ge,dr))(St,Ce,!On,it,!Ce||Tl.test(Ge)&&xl(Ce.parentNode)||Ce),it},V.sortStable=zr.split("").sort(mo).join("")===zr,V.detectDuplicates=!!Wt,qt(),V.sortDetached=Lo(function(Ge){return 1&Ge.compareDocumentPosition(ut.createElement("fieldset"))}),Lo(function(Ge){return Ge.innerHTML="<a href='#'></a>","#"===Ge.firstChild.getAttribute("href")})||_u("type|href|height|width",function(Ge,Ce,it){if(!it)return Ge.getAttribute(Ce,"type"===Ce.toLowerCase()?1:2)}),(!V.attributes||!Lo(function(Ge){return Ge.innerHTML="<input/>",Ge.firstChild.setAttribute("value",""),""===Ge.firstChild.getAttribute("value")}))&&_u("value",function(Ge,Ce,it){if(!it&&"input"===Ge.nodeName.toLowerCase())return Ge.defaultValue}),Lo(function(Ge){return null==Ge.getAttribute("disabled")})||_u(al,function(Ge,Ce,it){var St;if(!it)return!0===Ge[Ce]?Ce.toLowerCase():(St=Ge.getAttributeNode(Ce))&&St.specified?St.value:null}),vi}(de);Y.find=vn,(Y.expr=vn.selectors)[":"]=Y.expr.pseudos,Y.uniqueSort=Y.unique=vn.uniqueSort,Y.text=vn.getText,Y.isXMLDoc=vn.isXML,Y.contains=vn.contains,Y.escapeSelector=vn.escape;var nn=function(A,V,q){for(var ie=[],ce=void 0!==q;(A=A[V])&&9!==A.nodeType;)if(1===A.nodeType){if(ce&&Y(A).is(q))break;ie.push(A)}return ie},xt=function(A,V){for(var q=[];A;A=A.nextSibling)1===A.nodeType&&A!==V&&q.push(A);return q},Ot=Y.expr.match.needsContext;function Ct(G,A){return G.nodeName&&G.nodeName.toLowerCase()===A.toLowerCase()}var Zt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(G,A,V){return Ae(A)?Y.grep(G,function(q,ie){return!!A.call(q,ie,q)!==V}):A.nodeType?Y.grep(G,function(q){return q===A!==V}):"string"!=typeof A?Y.grep(G,function(q){return v.call(A,q)>-1!==V}):Y.filter(A,G,V)}Y.filter=function(G,A,V){var q=A[0];return V&&(G=":not("+G+")"),1===A.length&&1===q.nodeType?Y.find.matchesSelector(q,G)?[q]:[]:Y.find.matches(G,Y.grep(A,function(ie){return 1===ie.nodeType}))},Y.fn.extend({find:function(A){var V,q,ie=this.length,ce=this;if("string"!=typeof A)return this.pushStack(Y(A).filter(function(){for(V=0;V<ie;V++)if(Y.contains(ce[V],this))return!0}));for(q=this.pushStack([]),V=0;V<ie;V++)Y.find(A,ce[V],q);return ie>1?Y.uniqueSort(q):q},filter:function(A){return this.pushStack(z(this,A||[],!1))},not:function(A){return this.pushStack(z(this,A||[],!0))},is:function(A){return!!z(this,"string"==typeof A&&Ot.test(A)?Y(A):A||[],!1).length}});var k,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(Y.fn.init=function(G,A,V){var q,ie;if(!G)return this;if(V=V||k,"string"==typeof G){if(!(q="<"===G[0]&&">"===G[G.length-1]&&G.length>=3?[null,G,null]:B.exec(G))||!q[1]&&A)return!A||A.jquery?(A||V).find(G):this.constructor(A).find(G);if(q[1]){if(Y.merge(this,Y.parseHTML(q[1],(A=A instanceof Y?A[0]:A)&&A.nodeType?A.ownerDocument||A:We,!0)),Zt.test(q[1])&&Y.isPlainObject(A))for(q in A)Ae(this[q])?this[q](A[q]):this.attr(q,A[q]);return this}return(ie=We.getElementById(q[2]))&&(this[0]=ie,this.length=1),this}return G.nodeType?(this[0]=G,this.length=1,this):Ae(G)?void 0!==V.ready?V.ready(G):G(Y):Y.makeArray(G,this)}).prototype=Y.fn,k=Y(We);var ge=/^(?:parents|prev(?:Until|All))/,Ie={children:!0,contents:!0,next:!0,prev:!0};function nt(G,A){for(;(G=G[A])&&1!==G.nodeType;);return G}Y.fn.extend({has:function(A){var V=Y(A,this),q=V.length;return this.filter(function(){for(var ie=0;ie<q;ie++)if(Y.contains(this,V[ie]))return!0})},closest:function(A,V){var q,ie=0,ce=this.length,me=[],Ee="string"!=typeof A&&Y(A);if(!Ot.test(A))for(;ie<ce;ie++)for(q=this[ie];q&&q!==V;q=q.parentNode)if(q.nodeType<11&&(Ee?Ee.index(q)>-1:1===q.nodeType&&Y.find.matchesSelector(q,A))){me.push(q);break}return this.pushStack(me.length>1?Y.uniqueSort(me):me)},index:function(A){return A?"string"==typeof A?v.call(Y(A),this[0]):v.call(this,A.jquery?A[0]:A):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(A,V){return this.pushStack(Y.uniqueSort(Y.merge(this.get(),Y(A,V))))},addBack:function(A){return this.add(null==A?this.prevObject:this.prevObject.filter(A))}}),Y.each({parent:function(A){var V=A.parentNode;return V&&11!==V.nodeType?V:null},parents:function(A){return nn(A,"parentNode")},parentsUntil:function(A,V,q){return nn(A,"parentNode",q)},next:function(A){return nt(A,"nextSibling")},prev:function(A){return nt(A,"previousSibling")},nextAll:function(A){return nn(A,"nextSibling")},prevAll:function(A){return nn(A,"previousSibling")},nextUntil:function(A,V,q){return nn(A,"nextSibling",q)},prevUntil:function(A,V,q){return nn(A,"previousSibling",q)},siblings:function(A){return xt((A.parentNode||{}).firstChild,A)},children:function(A){return xt(A.firstChild)},contents:function(A){return null!=A.contentDocument&&S(A.contentDocument)?A.contentDocument:(Ct(A,"template")&&(A=A.content||A),Y.merge([],A.childNodes))}},function(G,A){Y.fn[G]=function(V,q){var ie=Y.map(this,A,V);return"Until"!==G.slice(-5)&&(q=V),q&&"string"==typeof q&&(ie=Y.filter(q,ie)),this.length>1&&(Ie[G]||Y.uniqueSort(ie),ge.test(G)&&ie.reverse()),this.pushStack(ie)}});var _t=/[^\x20\t\r\n\f]+/g;function Vt(G){return G}function Fn(G){throw G}function rr(G,A,V,q){var ie;try{G&&Ae(ie=G.promise)?ie.call(G).done(A).fail(V):G&&Ae(ie=G.then)?ie.call(G,A,V):A.apply(void 0,[G].slice(q))}catch(ce){V.apply(void 0,[ce])}}Y.Callbacks=function(G){G="string"==typeof G?function(G){var A={};return Y.each(G.match(_t)||[],function(V,q){A[q]=!0}),A}(G):Y.extend({},G);var A,V,q,ie,ce=[],me=[],Ee=-1,ze=function(){for(ie=ie||G.once,q=A=!0;me.length;Ee=-1)for(V=me.shift();++Ee<ce.length;)!1===ce[Ee].apply(V[0],V[1])&&G.stopOnFalse&&(Ee=ce.length,V=!1);G.memory||(V=!1),A=!1,ie&&(ce=V?[]:"")},Xe={add:function(){return ce&&(V&&!A&&(Ee=ce.length-1,me.push(V)),function Wt(qt){Y.each(qt,function(ut,Jt){Ae(Jt)?(!G.unique||!Xe.has(Jt))&&ce.push(Jt):Jt&&Jt.length&&"string"!==st(Jt)&&Wt(Jt)})}(arguments),V&&!A&&ze()),this},remove:function(){return Y.each(arguments,function(Wt,qt){for(var ut;(ut=Y.inArray(qt,ce,ut))>-1;)ce.splice(ut,1),ut<=Ee&&Ee--}),this},has:function(Wt){return Wt?Y.inArray(Wt,ce)>-1:ce.length>0},empty:function(){return ce&&(ce=[]),this},disable:function(){return ie=me=[],ce=V="",this},disabled:function(){return!ce},lock:function(){return ie=me=[],!V&&!A&&(ce=V=""),this},locked:function(){return!!ie},fireWith:function(Wt,qt){return ie||(qt=[Wt,(qt=qt||[]).slice?qt.slice():qt],me.push(qt),A||ze()),this},fire:function(){return Xe.fireWith(this,arguments),this},fired:function(){return!!q}};return Xe},Y.extend({Deferred:function(A){var V=[["notify","progress",Y.Callbacks("memory"),Y.Callbacks("memory"),2],["resolve","done",Y.Callbacks("once memory"),Y.Callbacks("once memory"),0,"resolved"],["reject","fail",Y.Callbacks("once memory"),Y.Callbacks("once memory"),1,"rejected"]],q="pending",ie={state:function(){return q},always:function(){return ce.done(arguments).fail(arguments),this},catch:function(Ee){return ie.then(null,Ee)},pipe:function(){var Ee=arguments;return Y.Deferred(function(ze){Y.each(V,function(Xe,yt){var Wt=Ae(Ee[yt[4]])&&Ee[yt[4]];ce[yt[1]](function(){var qt=Wt&&Wt.apply(this,arguments);qt&&Ae(qt.promise)?qt.promise().progress(ze.notify).done(ze.resolve).fail(ze.reject):ze[yt[0]+"With"](this,Wt?[qt]:arguments)})}),Ee=null}).promise()},then:function(Ee,ze,Xe){var yt=0;function Wt(qt,ut,Jt,On){return function(){var er=this,di=arguments,Ta=function(){var ia,An;if(!(qt<yt)){if((ia=Jt.apply(er,di))===ut.promise())throw new TypeError("Thenable self-resolution");Ae(An=ia&&("object"==typeof ia||"function"==typeof ia)&&ia.then)?On?An.call(ia,Wt(yt,ut,Vt,On),Wt(yt,ut,Fn,On)):(yt++,An.call(ia,Wt(yt,ut,Vt,On),Wt(yt,ut,Fn,On),Wt(yt,ut,Vt,ut.notifyWith))):(Jt!==Vt&&(er=void 0,di=[ia]),(On||ut.resolveWith)(er,di))}},po=On?Ta:function(){try{Ta()}catch(zr){Y.Deferred.exceptionHook&&Y.Deferred.exceptionHook(zr,po.stackTrace),qt+1>=yt&&(Jt!==Fn&&(er=void 0,di=[zr]),ut.rejectWith(er,di))}};qt?po():(Y.Deferred.getStackHook&&(po.stackTrace=Y.Deferred.getStackHook()),de.setTimeout(po))}}return Y.Deferred(function(qt){V[0][3].add(Wt(0,qt,Ae(Xe)?Xe:Vt,qt.notifyWith)),V[1][3].add(Wt(0,qt,Ae(Ee)?Ee:Vt)),V[2][3].add(Wt(0,qt,Ae(ze)?ze:Fn))}).promise()},promise:function(Ee){return null!=Ee?Y.extend(Ee,ie):ie}},ce={};return Y.each(V,function(me,Ee){var ze=Ee[2],Xe=Ee[5];ie[Ee[1]]=ze.add,Xe&&ze.add(function(){q=Xe},V[3-me][2].disable,V[3-me][3].disable,V[0][2].lock,V[0][3].lock),ze.add(Ee[3].fire),ce[Ee[0]]=function(){return ce[Ee[0]+"With"](this===ce?void 0:this,arguments),this},ce[Ee[0]+"With"]=ze.fireWith}),ie.promise(ce),A&&A.call(ce,ce),ce},when:function(A){var V=arguments.length,q=V,ie=Array(q),ce=re.call(arguments),me=Y.Deferred(),Ee=function(Xe){return function(yt){ie[Xe]=this,ce[Xe]=arguments.length>1?re.call(arguments):yt,--V||me.resolveWith(ie,ce)}};if(V<=1&&(rr(A,me.done(Ee(q)).resolve,me.reject,!V),"pending"===me.state()||Ae(ce[q]&&ce[q].then)))return me.then();for(;q--;)rr(ce[q],Ee(q),me.reject);return me.promise()}});var Vr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Y.Deferred.exceptionHook=function(G,A){de.console&&de.console.warn&&G&&Vr.test(G.name)&&de.console.warn("jQuery.Deferred exception: "+G.message,G.stack,A)},Y.readyException=function(G){de.setTimeout(function(){throw G})};var ii=Y.Deferred();function Bi(){We.removeEventListener("DOMContentLoaded",Bi),de.removeEventListener("load",Bi),Y.ready()}Y.fn.ready=function(G){return ii.then(G).catch(function(A){Y.readyException(A)}),this},Y.extend({isReady:!1,readyWait:1,ready:function(A){(!0===A?--Y.readyWait:Y.isReady)||(Y.isReady=!0,!(!0!==A&&--Y.readyWait>0)&&ii.resolveWith(We,[Y]))}}),Y.ready.then=ii.then,"complete"===We.readyState||"loading"!==We.readyState&&!We.documentElement.doScroll?de.setTimeout(Y.ready):(We.addEventListener("DOMContentLoaded",Bi),de.addEventListener("load",Bi));var Ri=function G(A,V,q,ie,ce,me,Ee){var ze=0,Xe=A.length,yt=null==q;if("object"===st(q))for(ze in ce=!0,q)G(A,V,ze,q[ze],!0,me,Ee);else if(void 0!==ie&&(ce=!0,Ae(ie)||(Ee=!0),yt&&(Ee?(V.call(A,ie),V=null):(yt=V,V=function(qt,ut,Jt){return yt.call(Y(qt),Jt)})),V))for(;ze<Xe;ze++)V(A[ze],q,Ee?ie:ie.call(A[ze],ze,V(A[ze],q)));return ce?A:yt?V.call(A):Xe?V(A[0],q):me},mu=/^-ms-/,rc=/-([a-z])/g;function Io(G,A){return A.toUpperCase()}function ja(G){return G.replace(mu,"ms-").replace(rc,Io)}var si=function(A){return 1===A.nodeType||9===A.nodeType||!+A.nodeType};function mr(){this.expando=Y.expando+mr.uid++}mr.uid=1,mr.prototype={cache:function(A){var V=A[this.expando];return V||(V={},si(A)&&(A.nodeType?A[this.expando]=V:Object.defineProperty(A,this.expando,{value:V,configurable:!0}))),V},set:function(A,V,q){var ie,ce=this.cache(A);if("string"==typeof V)ce[ja(V)]=q;else for(ie in V)ce[ja(ie)]=V[ie];return ce},get:function(A,V){return void 0===V?this.cache(A):A[this.expando]&&A[this.expando][ja(V)]},access:function(A,V,q){return void 0===V||V&&"string"==typeof V&&void 0===q?this.get(A,V):(this.set(A,V,q),void 0!==q?q:V)},remove:function(A,V){var q,ie=A[this.expando];if(void 0!==ie){if(void 0!==V)for((q=(V=Array.isArray(V)?V.map(ja):(V=ja(V))in ie?[V]:V.match(_t)||[]).length);q--;)delete ie[V[q]];(void 0===V||Y.isEmptyObject(ie))&&(A.nodeType?A[this.expando]=void 0:delete A[this.expando])}},hasData:function(A){var V=A[this.expando];return void 0!==V&&!Y.isEmptyObject(V)}};var Wn=new mr,fa=new mr,ic=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Br=/[A-Z]/g;function Zs(G,A,V){var q;if(void 0===V&&1===G.nodeType)if(q="data-"+A.replace(Br,"-$&").toLowerCase(),"string"==typeof(V=G.getAttribute(q))){try{V=function(G){return"true"===G||"false"!==G&&("null"===G?null:G===+G+""?+G:ic.test(G)?JSON.parse(G):G)}(V)}catch(ie){}fa.set(G,A,V)}else V=void 0;return V}Y.extend({hasData:function(A){return fa.hasData(A)||Wn.hasData(A)},data:function(A,V,q){return fa.access(A,V,q)},removeData:function(A,V){fa.remove(A,V)},_data:function(A,V,q){return Wn.access(A,V,q)},_removeData:function(A,V){Wn.remove(A,V)}}),Y.fn.extend({data:function(A,V){var q,ie,ce,me=this[0],Ee=me&&me.attributes;if(void 0===A){if(this.length&&(ce=fa.get(me),1===me.nodeType&&!Wn.get(me,"hasDataAttrs"))){for(q=Ee.length;q--;)Ee[q]&&0===(ie=Ee[q].name).indexOf("data-")&&(ie=ja(ie.slice(5)),Zs(me,ie,ce[ie]));Wn.set(me,"hasDataAttrs",!0)}return ce}return"object"==typeof A?this.each(function(){fa.set(this,A)}):Ri(this,function(ze){var Xe;if(me&&void 0===ze)return void 0!==(Xe=fa.get(me,A))||void 0!==(Xe=Zs(me,A))?Xe:void 0;this.each(function(){fa.set(this,A,ze)})},null,V,arguments.length>1,null,!0)},removeData:function(A){return this.each(function(){fa.remove(this,A)})}}),Y.extend({queue:function(A,V,q){var ie;if(A)return ie=Wn.get(A,V=(V||"fx")+"queue"),q&&(!ie||Array.isArray(q)?ie=Wn.access(A,V,Y.makeArray(q)):ie.push(q)),ie||[]},dequeue:function(A,V){var q=Y.queue(A,V=V||"fx"),ie=q.length,ce=q.shift(),me=Y._queueHooks(A,V);"inprogress"===ce&&(ce=q.shift(),ie--),ce&&("fx"===V&&q.unshift("inprogress"),delete me.stop,ce.call(A,function(){Y.dequeue(A,V)},me)),!ie&&me&&me.empty.fire()},_queueHooks:function(A,V){var q=V+"queueHooks";return Wn.get(A,q)||Wn.access(A,q,{empty:Y.Callbacks("once memory").add(function(){Wn.remove(A,[V+"queue",q])})})}}),Y.fn.extend({queue:function(A,V){var q=2;return"string"!=typeof A&&(V=A,A="fx",q--),arguments.length<q?Y.queue(this[0],A):void 0===V?this:this.each(function(){var ie=Y.queue(this,A,V);Y._queueHooks(this,A),"fx"===A&&"inprogress"!==ie[0]&&Y.dequeue(this,A)})},dequeue:function(A){return this.each(function(){Y.dequeue(this,A)})},clearQueue:function(A){return this.queue(A||"fx",[])},promise:function(A,V){var q,ie=1,ce=Y.Deferred(),me=this,Ee=this.length,ze=function(){--ie||ce.resolveWith(me,[me])};for("string"!=typeof A&&(V=A,A=void 0),A=A||"fx";Ee--;)(q=Wn.get(me[Ee],A+"queueHooks"))&&q.empty&&(ie++,q.empty.add(ze));return ze(),ce.promise(V)}});var Wa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ts=new RegExp("^(?:([+-])=|)("+Wa+")([a-z%]*)$","i"),Wi=["Top","Right","Bottom","Left"],Bs=We.documentElement,Hi=function(A){return Y.contains(A.ownerDocument,A)},qi={composed:!0};Bs.getRootNode&&(Hi=function(A){return Y.contains(A.ownerDocument,A)||A.getRootNode(qi)===A.ownerDocument});var qa=function(A,V){return"none"===(A=V||A).style.display||""===A.style.display&&Hi(A)&&"none"===Y.css(A,"display")};function sr(G,A,V,q){var ie,ce,me=20,Ee=q?function(){return q.cur()}:function(){return Y.css(G,A,"")},ze=Ee(),Xe=V&&V[3]||(Y.cssNumber[A]?"":"px"),yt=G.nodeType&&(Y.cssNumber[A]||"px"!==Xe&&+ze)&&Ts.exec(Y.css(G,A));if(yt&&yt[3]!==Xe){for(Xe=Xe||yt[3],yt=+(ze/=2)||1;me--;)Y.style(G,A,yt+Xe),(1-ce)*(1-(ce=Ee()/ze||.5))<=0&&(me=0),yt/=ce;Y.style(G,A,(yt*=2)+Xe),V=V||[]}return V&&(yt=+yt||+ze||0,ie=V[1]?yt+(V[1]+1)*V[2]:+V[2],q&&(q.unit=Xe,q.start=yt,q.end=ie)),ie}var Kn={};function Zn(G){var A,V=G.ownerDocument,q=G.nodeName,ie=Kn[q];return ie||(A=V.body.appendChild(V.createElement(q)),ie=Y.css(A,"display"),A.parentNode.removeChild(A),"none"===ie&&(ie="block"),Kn[q]=ie,ie)}function Hr(G,A){for(var V,q,ie=[],ce=0,me=G.length;ce<me;ce++)(q=G[ce]).style&&(V=q.style.display,A?("none"===V&&(ie[ce]=Wn.get(q,"display")||null,ie[ce]||(q.style.display="")),""===q.style.display&&qa(q)&&(ie[ce]=Zn(q))):"none"!==V&&(ie[ce]="none",Wn.set(q,"display",V)));for(ce=0;ce<me;ce++)null!=ie[ce]&&(G[ce].style.display=ie[ce]);return G}Y.fn.extend({show:function(){return Hr(this,!0)},hide:function(){return Hr(this)},toggle:function(A){return"boolean"==typeof A?A?this.show():this.hide():this.each(function(){qa(this)?Y(this).show():Y(this).hide()})}});var A,V,Yr=/^(?:checkbox|radio)$/i,Qr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,br=/^$|^module$|\/(?:java|ecma)script/i;A=We.createDocumentFragment().appendChild(We.createElement("div")),(V=We.createElement("input")).setAttribute("type","radio"),V.setAttribute("checked","checked"),V.setAttribute("name","t"),A.appendChild(V),fe.checkClone=A.cloneNode(!0).cloneNode(!0).lastChild.checked,A.innerHTML="<textarea>x</textarea>",fe.noCloneChecked=!!A.cloneNode(!0).lastChild.defaultValue,A.innerHTML="<option></option>",fe.option=!!A.lastChild;var qn={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Pi(G,A){var V;return V=void 0!==G.getElementsByTagName?G.getElementsByTagName(A||"*"):void 0!==G.querySelectorAll?G.querySelectorAll(A||"*"):[],void 0===A||A&&Ct(G,A)?Y.merge([G],V):V}function Ja(G,A){for(var V=0,q=G.length;V<q;V++)Wn.set(G[V],"globalEval",!A||Wn.get(A[V],"globalEval"))}qn.tbody=qn.tfoot=qn.colgroup=qn.caption=qn.thead,qn.th=qn.td,fe.option||(qn.optgroup=qn.option=[1,"<select multiple='multiple'>","</select>"]);var Ms=/<|&#?\w+;/;function Do(G,A,V,q,ie){for(var ce,me,Ee,ze,Xe,yt,Wt=A.createDocumentFragment(),qt=[],ut=0,Jt=G.length;ut<Jt;ut++)if((ce=G[ut])||0===ce)if("object"===st(ce))Y.merge(qt,ce.nodeType?[ce]:ce);else if(Ms.test(ce)){for(me=me||Wt.appendChild(A.createElement("div")),Ee=(Qr.exec(ce)||["",""])[1].toLowerCase(),me.innerHTML=(ze=qn[Ee]||qn._default)[1]+Y.htmlPrefilter(ce)+ze[2],yt=ze[0];yt--;)me=me.lastChild;Y.merge(qt,me.childNodes),(me=Wt.firstChild).textContent=""}else qt.push(A.createTextNode(ce));for(Wt.textContent="",ut=0;ce=qt[ut++];)if(q&&Y.inArray(ce,q)>-1)ie&&ie.push(ce);else if(Xe=Hi(ce),me=Pi(Wt.appendChild(ce),"script"),Xe&&Ja(me),V)for(yt=0;ce=me[yt++];)br.test(ce.type||"")&&V.push(ce);return Wt}var ra=/^([^.]*)(?:\.(.+)|)/;function gi(){return!0}function gt(){return!1}function ft(G,A){return G===function(){try{return We.activeElement}catch(G){}}()==("focus"===A)}function ot(G,A,V,q,ie,ce){var me,Ee;if("object"==typeof A){for(Ee in"string"!=typeof V&&(q=q||V,V=void 0),A)ot(G,Ee,V,q,A[Ee],ce);return G}if(null==q&&null==ie?(ie=V,q=V=void 0):null==ie&&("string"==typeof V?(ie=q,q=void 0):(ie=q,q=V,V=void 0)),!1===ie)ie=gt;else if(!ie)return G;return 1===ce&&(me=ie,(ie=function(Xe){return Y().off(Xe),me.apply(this,arguments)}).guid=me.guid||(me.guid=Y.guid++)),G.each(function(){Y.event.add(this,A,ie,q,V)})}function Nt(G,A,V){V?(Wn.set(G,A,!1),Y.event.add(G,A,{namespace:!1,handler:function(ie){var ce,me,Ee=Wn.get(this,A);if(1&ie.isTrigger&&this[A]){if(Ee.length)(Y.event.special[A]||{}).delegateType&&ie.stopPropagation();else if(Ee=re.call(arguments),Wn.set(this,A,Ee),ce=V(this,A),this[A](),Ee!==(me=Wn.get(this,A))||ce?Wn.set(this,A,!1):me={},Ee!==me)return ie.stopImmediatePropagation(),ie.preventDefault(),me&&me.value}else Ee.length&&(Wn.set(this,A,{value:Y.event.trigger(Y.extend(Ee[0],Y.Event.prototype),Ee.slice(1),this)}),ie.stopImmediatePropagation())}})):void 0===Wn.get(G,A)&&Y.event.add(G,A,gi)}Y.event={global:{},add:function(A,V,q,ie,ce){var me,Ee,ze,Xe,yt,Wt,qt,ut,Jt,On,er,di=Wn.get(A);if(si(A))for(q.handler&&(q=(me=q).handler,ce=me.selector),ce&&Y.find.matchesSelector(Bs,ce),q.guid||(q.guid=Y.guid++),(Xe=di.events)||(Xe=di.events=Object.create(null)),(Ee=di.handle)||(Ee=di.handle=function(Ta){return void 0!==Y&&Y.event.triggered!==Ta.type?Y.event.dispatch.apply(A,arguments):void 0}),yt=(V=(V||"").match(_t)||[""]).length;yt--;)Jt=er=(ze=ra.exec(V[yt])||[])[1],On=(ze[2]||"").split(".").sort(),Jt&&(qt=Y.event.special[Jt]||{},qt=Y.event.special[Jt=(ce?qt.delegateType:qt.bindType)||Jt]||{},Wt=Y.extend({type:Jt,origType:er,data:ie,handler:q,guid:q.guid,selector:ce,needsContext:ce&&Y.expr.match.needsContext.test(ce),namespace:On.join(".")},me),(ut=Xe[Jt])||((ut=Xe[Jt]=[]).delegateCount=0,(!qt.setup||!1===qt.setup.call(A,ie,On,Ee))&&A.addEventListener&&A.addEventListener(Jt,Ee)),qt.add&&(qt.add.call(A,Wt),Wt.handler.guid||(Wt.handler.guid=q.guid)),ce?ut.splice(ut.delegateCount++,0,Wt):ut.push(Wt),Y.event.global[Jt]=!0)},remove:function(A,V,q,ie,ce){var me,Ee,ze,Xe,yt,Wt,qt,ut,Jt,On,er,di=Wn.hasData(A)&&Wn.get(A);if(di&&(Xe=di.events)){for(yt=(V=(V||"").match(_t)||[""]).length;yt--;)if(Jt=er=(ze=ra.exec(V[yt])||[])[1],On=(ze[2]||"").split(".").sort(),Jt){for(qt=Y.event.special[Jt]||{},ut=Xe[Jt=(ie?qt.delegateType:qt.bindType)||Jt]||[],ze=ze[2]&&new RegExp("(^|\\.)"+On.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ee=me=ut.length;me--;)Wt=ut[me],(ce||er===Wt.origType)&&(!q||q.guid===Wt.guid)&&(!ze||ze.test(Wt.namespace))&&(!ie||ie===Wt.selector||"**"===ie&&Wt.selector)&&(ut.splice(me,1),Wt.selector&&ut.delegateCount--,qt.remove&&qt.remove.call(A,Wt));Ee&&!ut.length&&((!qt.teardown||!1===qt.teardown.call(A,On,di.handle))&&Y.removeEvent(A,Jt,di.handle),delete Xe[Jt])}else for(Jt in Xe)Y.event.remove(A,Jt+V[yt],q,ie,!0);Y.isEmptyObject(Xe)&&Wn.remove(A,"handle events")}},dispatch:function(A){var V,q,ie,ce,me,Ee,ze=new Array(arguments.length),Xe=Y.event.fix(A),yt=(Wn.get(this,"events")||Object.create(null))[Xe.type]||[],Wt=Y.event.special[Xe.type]||{};for(ze[0]=Xe,V=1;V<arguments.length;V++)ze[V]=arguments[V];if(Xe.delegateTarget=this,!Wt.preDispatch||!1!==Wt.preDispatch.call(this,Xe)){for(Ee=Y.event.handlers.call(this,Xe,yt),V=0;(ce=Ee[V++])&&!Xe.isPropagationStopped();)for(Xe.currentTarget=ce.elem,q=0;(me=ce.handlers[q++])&&!Xe.isImmediatePropagationStopped();)(!Xe.rnamespace||!1===me.namespace||Xe.rnamespace.test(me.namespace))&&(Xe.handleObj=me,Xe.data=me.data,void 0!==(ie=((Y.event.special[me.origType]||{}).handle||me.handler).apply(ce.elem,ze))&&!1===(Xe.result=ie)&&(Xe.preventDefault(),Xe.stopPropagation()));return Wt.postDispatch&&Wt.postDispatch.call(this,Xe),Xe.result}},handlers:function(A,V){var q,ie,ce,me,Ee,ze=[],Xe=V.delegateCount,yt=A.target;if(Xe&&yt.nodeType&&!("click"===A.type&&A.button>=1))for(;yt!==this;yt=yt.parentNode||this)if(1===yt.nodeType&&("click"!==A.type||!0!==yt.disabled)){for(me=[],Ee={},q=0;q<Xe;q++)void 0===Ee[ce=(ie=V[q]).selector+" "]&&(Ee[ce]=ie.needsContext?Y(ce,this).index(yt)>-1:Y.find(ce,this,null,[yt]).length),Ee[ce]&&me.push(ie);me.length&&ze.push({elem:yt,handlers:me})}return yt=this,Xe<V.length&&ze.push({elem:yt,handlers:V.slice(Xe)}),ze},addProp:function(A,V){Object.defineProperty(Y.Event.prototype,A,{enumerable:!0,configurable:!0,get:Ae(V)?function(){if(this.originalEvent)return V(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[A]},set:function(ie){Object.defineProperty(this,A,{enumerable:!0,configurable:!0,writable:!0,value:ie})}})},fix:function(A){return A[Y.expando]?A:new Y.Event(A)},special:{load:{noBubble:!0},click:{setup:function(A){var V=this||A;return Yr.test(V.type)&&V.click&&Ct(V,"input")&&Nt(V,"click",gi),!1},trigger:function(A){var V=this||A;return Yr.test(V.type)&&V.click&&Ct(V,"input")&&Nt(V,"click"),!0},_default:function(A){var V=A.target;return Yr.test(V.type)&&V.click&&Ct(V,"input")&&Wn.get(V,"click")||Ct(V,"a")}},beforeunload:{postDispatch:function(A){void 0!==A.result&&A.originalEvent&&(A.originalEvent.returnValue=A.result)}}}},Y.removeEvent=function(G,A,V){G.removeEventListener&&G.removeEventListener(A,V)},(Y.Event=function(G,A){if(!(this instanceof Y.Event))return new Y.Event(G,A);G&&G.type?(this.originalEvent=G,this.type=G.type,this.isDefaultPrevented=G.defaultPrevented||void 0===G.defaultPrevented&&!1===G.returnValue?gi:gt,this.target=G.target&&3===G.target.nodeType?G.target.parentNode:G.target,this.currentTarget=G.currentTarget,this.relatedTarget=G.relatedTarget):this.type=G,A&&Y.extend(this,A),this.timeStamp=G&&G.timeStamp||Date.now(),this[Y.expando]=!0}).prototype={constructor:Y.Event,isDefaultPrevented:gt,isPropagationStopped:gt,isImmediatePropagationStopped:gt,isSimulated:!1,preventDefault:function(){var A=this.originalEvent;this.isDefaultPrevented=gi,A&&!this.isSimulated&&A.preventDefault()},stopPropagation:function(){var A=this.originalEvent;this.isPropagationStopped=gi,A&&!this.isSimulated&&A.stopPropagation()},stopImmediatePropagation:function(){var A=this.originalEvent;this.isImmediatePropagationStopped=gi,A&&!this.isSimulated&&A.stopImmediatePropagation(),this.stopPropagation()}},Y.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},Y.event.addProp),Y.each({focus:"focusin",blur:"focusout"},function(G,A){Y.event.special[G]={setup:function(){return Nt(this,G,ft),!1},trigger:function(){return Nt(this,G),!0},_default:function(){return!0},delegateType:A}}),Y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(G,A){Y.event.special[G]={delegateType:A,bindType:A,handle:function(q){var ie,ce=this,me=q.relatedTarget,Ee=q.handleObj;return(!me||me!==ce&&!Y.contains(ce,me))&&(q.type=Ee.origType,ie=Ee.handler.apply(this,arguments),q.type=A),ie}}}),Y.fn.extend({on:function(A,V,q,ie){return ot(this,A,V,q,ie)},one:function(A,V,q,ie){return ot(this,A,V,q,ie,1)},off:function(A,V,q){var ie,ce;if(A&&A.preventDefault&&A.handleObj)return ie=A.handleObj,Y(A.delegateTarget).off(ie.namespace?ie.origType+"."+ie.namespace:ie.origType,ie.selector,ie.handler),this;if("object"==typeof A){for(ce in A)this.off(ce,V,A[ce]);return this}return(!1===V||"function"==typeof V)&&(q=V,V=void 0),!1===q&&(q=gt),this.each(function(){Y.event.remove(this,A,q,V)})}});var Rt=/<script|<style|<link/i,Sn=/checked\s*(?:[^=]|=\s*.checked.)/i,yn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function yi(G,A){return Ct(G,"table")&&Ct(11!==A.nodeType?A:A.firstChild,"tr")&&Y(G).children("tbody")[0]||G}function Yi(G){return G.type=(null!==G.getAttribute("type"))+"/"+G.type,G}function hi(G){return"true/"===(G.type||"").slice(0,5)?G.type=G.type.slice(5):G.removeAttribute("type"),G}function Ki(G,A){var V,q,ie,me,Ee,ze;if(1===A.nodeType){if(Wn.hasData(G)&&(ze=Wn.get(G).events))for(ie in Wn.remove(A,"handle events"),ze)for(V=0,q=ze[ie].length;V<q;V++)Y.event.add(A,ie,ze[ie][V]);fa.hasData(G)&&(me=fa.access(G),Ee=Y.extend({},me),fa.set(A,Ee))}}function Ea(G,A){var V=A.nodeName.toLowerCase();"input"===V&&Yr.test(G.type)?A.checked=G.checked:("input"===V||"textarea"===V)&&(A.defaultValue=G.defaultValue)}function ct(G,A,V,q){A=Re(A);var ie,ce,me,Ee,ze,Xe,yt=0,Wt=G.length,qt=Wt-1,ut=A[0],Jt=Ae(ut);if(Jt||Wt>1&&"string"==typeof ut&&!fe.checkClone&&Sn.test(ut))return G.each(function(On){var er=G.eq(On);Jt&&(A[0]=ut.call(this,On,er.html())),ct(er,A,V,q)});if(Wt&&(ce=(ie=Do(A,G[0].ownerDocument,!1,G,q)).firstChild,1===ie.childNodes.length&&(ie=ce),ce||q)){for(Ee=(me=Y.map(Pi(ie,"script"),Yi)).length;yt<Wt;yt++)ze=ie,yt!==qt&&(ze=Y.clone(ze,!0,!0),Ee&&Y.merge(me,Pi(ze,"script"))),V.call(G[yt],ze,yt);if(Ee)for(Xe=me[me.length-1].ownerDocument,Y.map(me,hi),yt=0;yt<Ee;yt++)br.test((ze=me[yt]).type||"")&&!Wn.access(ze,"globalEval")&&Y.contains(Xe,ze)&&(ze.src&&"module"!==(ze.type||"").toLowerCase()?Y._evalUrl&&!ze.noModule&&Y._evalUrl(ze.src,{nonce:ze.nonce||ze.getAttribute("nonce")},Xe):Be(ze.textContent.replace(yn,""),ze,Xe))}return G}function Tt(G,A,V){for(var q,ie=A?Y.filter(A,G):G,ce=0;null!=(q=ie[ce]);ce++)!V&&1===q.nodeType&&Y.cleanData(Pi(q)),q.parentNode&&(V&&Hi(q)&&Ja(Pi(q,"script")),q.parentNode.removeChild(q));return G}Y.extend({htmlPrefilter:function(A){return A},clone:function(A,V,q){var ie,ce,me,Ee,ze=A.cloneNode(!0),Xe=Hi(A);if(!(fe.noCloneChecked||1!==A.nodeType&&11!==A.nodeType||Y.isXMLDoc(A)))for(Ee=Pi(ze),ie=0,ce=(me=Pi(A)).length;ie<ce;ie++)Ea(me[ie],Ee[ie]);if(V)if(q)for(me=me||Pi(A),Ee=Ee||Pi(ze),ie=0,ce=me.length;ie<ce;ie++)Ki(me[ie],Ee[ie]);else Ki(A,ze);return(Ee=Pi(ze,"script")).length>0&&Ja(Ee,!Xe&&Pi(A,"script")),ze},cleanData:function(A){for(var V,q,ie,ce=Y.event.special,me=0;void 0!==(q=A[me]);me++)if(si(q)){if(V=q[Wn.expando]){if(V.events)for(ie in V.events)ce[ie]?Y.event.remove(q,ie):Y.removeEvent(q,ie,V.handle);q[Wn.expando]=void 0}q[fa.expando]&&(q[fa.expando]=void 0)}}}),Y.fn.extend({detach:function(A){return Tt(this,A,!0)},remove:function(A){return Tt(this,A)},text:function(A){return Ri(this,function(V){return void 0===V?Y.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=V)})},null,A,arguments.length)},append:function(){return ct(this,arguments,function(A){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||yi(this,A).appendChild(A)})},prepend:function(){return ct(this,arguments,function(A){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var V=yi(this,A);V.insertBefore(A,V.firstChild)}})},before:function(){return ct(this,arguments,function(A){this.parentNode&&this.parentNode.insertBefore(A,this)})},after:function(){return ct(this,arguments,function(A){this.parentNode&&this.parentNode.insertBefore(A,this.nextSibling)})},empty:function(){for(var A,V=0;null!=(A=this[V]);V++)1===A.nodeType&&(Y.cleanData(Pi(A,!1)),A.textContent="");return this},clone:function(A,V){return A=null!=A&&A,V=null==V?A:V,this.map(function(){return Y.clone(this,A,V)})},html:function(A){return Ri(this,function(V){var q=this[0]||{},ie=0,ce=this.length;if(void 0===V&&1===q.nodeType)return q.innerHTML;if("string"==typeof V&&!Rt.test(V)&&!qn[(Qr.exec(V)||["",""])[1].toLowerCase()]){V=Y.htmlPrefilter(V);try{for(;ie<ce;ie++)1===(q=this[ie]||{}).nodeType&&(Y.cleanData(Pi(q,!1)),q.innerHTML=V);q=0}catch(me){}}q&&this.empty().append(V)},null,A,arguments.length)},replaceWith:function(){var A=[];return ct(this,arguments,function(V){var q=this.parentNode;Y.inArray(this,A)<0&&(Y.cleanData(Pi(this)),q&&q.replaceChild(V,this))},A)}}),Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(G,A){Y.fn[G]=function(V){for(var q,ie=[],ce=Y(V),me=ce.length-1,Ee=0;Ee<=me;Ee++)q=Ee===me?this:this.clone(!0),Y(ce[Ee])[A](q),ke.apply(ie,q.get());return this.pushStack(ie)}});var je=new RegExp("^("+Wa+")(?!px)[a-z%]+$","i"),He=function(A){var V=A.ownerDocument.defaultView;return(!V||!V.opener)&&(V=de),V.getComputedStyle(A)},ht=function(A,V,q){var ie,ce,me={};for(ce in V)me[ce]=A.style[ce],A.style[ce]=V[ce];for(ce in ie=q.call(A),V)A.style[ce]=me[ce];return ie},Gt=new RegExp(Wi.join("|"),"i");function zt(G,A,V){var q,ie,ce,me,Ee=G.style;return(V=V||He(G))&&(""===(me=V.getPropertyValue(A)||V[A])&&!Hi(G)&&(me=Y.style(G,A)),!fe.pixelBoxStyles()&&je.test(me)&&Gt.test(A)&&(q=Ee.width,ie=Ee.minWidth,ce=Ee.maxWidth,Ee.minWidth=Ee.maxWidth=Ee.width=me,me=V.width,Ee.width=q,Ee.minWidth=ie,Ee.maxWidth=ce)),void 0!==me?me+"":me}function Kt(G,A){return{get:function(){if(!G())return(this.get=A).apply(this,arguments);delete this.get}}}!function(){function G(){if(Xe){ze.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Xe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Bs.appendChild(ze).appendChild(Xe);var yt=de.getComputedStyle(Xe);V="1%"!==yt.top,Ee=12===A(yt.marginLeft),Xe.style.right="60%",ce=36===A(yt.right),q=36===A(yt.width),Xe.style.position="absolute",ie=12===A(Xe.offsetWidth/3),Bs.removeChild(ze),Xe=null}}function A(yt){return Math.round(parseFloat(yt))}var V,q,ie,ce,me,Ee,ze=We.createElement("div"),Xe=We.createElement("div");!Xe.style||(Xe.style.backgroundClip="content-box",Xe.cloneNode(!0).style.backgroundClip="",fe.clearCloneStyle="content-box"===Xe.style.backgroundClip,Y.extend(fe,{boxSizingReliable:function(){return G(),q},pixelBoxStyles:function(){return G(),ce},pixelPosition:function(){return G(),V},reliableMarginLeft:function(){return G(),Ee},scrollboxSize:function(){return G(),ie},reliableTrDimensions:function(){var Wt,qt,ut,Jt;return null==me&&(Wt=We.createElement("table"),qt=We.createElement("tr"),ut=We.createElement("div"),Wt.style.cssText="position:absolute;left:-11111px;border-collapse:separate",qt.style.cssText="border:1px solid",qt.style.height="1px",ut.style.height="9px",ut.style.display="block",Bs.appendChild(Wt).appendChild(qt).appendChild(ut),Jt=de.getComputedStyle(qt),me=parseInt(Jt.height,10)+parseInt(Jt.borderTopWidth,10)+parseInt(Jt.borderBottomWidth,10)===qt.offsetHeight,Bs.removeChild(Wt)),me}}))}();var pn=["Webkit","Moz","ms"],$n=We.createElement("div").style,da={};function fs(G){return Y.cssProps[G]||da[G]||(G in $n?G:da[G]=function(G){for(var A=G[0].toUpperCase()+G.slice(1),V=pn.length;V--;)if((G=pn[V]+A)in $n)return G}(G)||G)}var Pr=/^(none|table(?!-c[ea]).+)/,_i=/^--/,Ya={position:"absolute",visibility:"hidden",display:"block"},oa={letterSpacing:"0",fontWeight:"400"};function Qc(G,A,V){var q=Ts.exec(A);return q?Math.max(0,q[2]-(V||0))+(q[3]||"px"):A}function Ca(G,A,V,q,ie,ce){var me="width"===A?1:0,Ee=0,ze=0;if(V===(q?"border":"content"))return 0;for(;me<4;me+=2)"margin"===V&&(ze+=Y.css(G,V+Wi[me],!0,ie)),q?("content"===V&&(ze-=Y.css(G,"padding"+Wi[me],!0,ie)),"margin"!==V&&(ze-=Y.css(G,"border"+Wi[me]+"Width",!0,ie))):(ze+=Y.css(G,"padding"+Wi[me],!0,ie),"padding"!==V?ze+=Y.css(G,"border"+Wi[me]+"Width",!0,ie):Ee+=Y.css(G,"border"+Wi[me]+"Width",!0,ie));return!q&&ce>=0&&(ze+=Math.max(0,Math.ceil(G["offset"+A[0].toUpperCase()+A.slice(1)]-ce-ze-Ee-.5))||0),ze}function Tn(G,A,V){var q=He(G),ce=(!fe.boxSizingReliable()||V)&&"border-box"===Y.css(G,"boxSizing",!1,q),me=ce,Ee=zt(G,A,q),ze="offset"+A[0].toUpperCase()+A.slice(1);if(je.test(Ee)){if(!V)return Ee;Ee="auto"}return(!fe.boxSizingReliable()&&ce||!fe.reliableTrDimensions()&&Ct(G,"tr")||"auto"===Ee||!parseFloat(Ee)&&"inline"===Y.css(G,"display",!1,q))&&G.getClientRects().length&&(ce="border-box"===Y.css(G,"boxSizing",!1,q),(me=ze in G)&&(Ee=G[ze])),(Ee=parseFloat(Ee)||0)+Ca(G,A,V||(ce?"border":"content"),me,q,Ee)+"px"}function hr(G,A,V,q,ie){return new hr.prototype.init(G,A,V,q,ie)}Y.extend({cssHooks:{opacity:{get:function(A,V){if(V){var q=zt(A,"opacity");return""===q?"1":q}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(A,V,q,ie){if(A&&3!==A.nodeType&&8!==A.nodeType&&A.style){var ce,me,Ee,ze=ja(V),Xe=_i.test(V),yt=A.style;if(Xe||(V=fs(ze)),Ee=Y.cssHooks[V]||Y.cssHooks[ze],void 0===q)return Ee&&"get"in Ee&&void 0!==(ce=Ee.get(A,!1,ie))?ce:yt[V];if("string"==(me=typeof q)&&(ce=Ts.exec(q))&&ce[1]&&(q=sr(A,V,ce),me="number"),null==q||q!=q)return;"number"===me&&!Xe&&(q+=ce&&ce[3]||(Y.cssNumber[ze]?"":"px")),!fe.clearCloneStyle&&""===q&&0===V.indexOf("background")&&(yt[V]="inherit"),(!Ee||!("set"in Ee)||void 0!==(q=Ee.set(A,q,ie)))&&(Xe?yt.setProperty(V,q):yt[V]=q)}},css:function(A,V,q,ie){var ce,me,Ee,ze=ja(V);return _i.test(V)||(V=fs(ze)),(Ee=Y.cssHooks[V]||Y.cssHooks[ze])&&"get"in Ee&&(ce=Ee.get(A,!0,q)),void 0===ce&&(ce=zt(A,V,ie)),"normal"===ce&&V in oa&&(ce=oa[V]),""===q||q?(me=parseFloat(ce),!0===q||isFinite(me)?me||0:ce):ce}}),Y.each(["height","width"],function(G,A){Y.cssHooks[A]={get:function(q,ie,ce){if(ie)return!Pr.test(Y.css(q,"display"))||q.getClientRects().length&&q.getBoundingClientRect().width?Tn(q,A,ce):ht(q,Ya,function(){return Tn(q,A,ce)})},set:function(q,ie,ce){var me,Ee=He(q),ze=!fe.scrollboxSize()&&"absolute"===Ee.position,yt=(ze||ce)&&"border-box"===Y.css(q,"boxSizing",!1,Ee),Wt=ce?Ca(q,A,ce,yt,Ee):0;return yt&&ze&&(Wt-=Math.ceil(q["offset"+A[0].toUpperCase()+A.slice(1)]-parseFloat(Ee[A])-Ca(q,A,"border",!1,Ee)-.5)),Wt&&(me=Ts.exec(ie))&&"px"!==(me[3]||"px")&&(q.style[A]=ie,ie=Y.css(q,A)),Qc(0,ie,Wt)}}}),Y.cssHooks.marginLeft=Kt(fe.reliableMarginLeft,function(G,A){if(A)return(parseFloat(zt(G,"marginLeft"))||G.getBoundingClientRect().left-ht(G,{marginLeft:0},function(){return G.getBoundingClientRect().left}))+"px"}),Y.each({margin:"",padding:"",border:"Width"},function(G,A){Y.cssHooks[G+A]={expand:function(q){for(var ie=0,ce={},me="string"==typeof q?q.split(" "):[q];ie<4;ie++)ce[G+Wi[ie]+A]=me[ie]||me[ie-2]||me[0];return ce}},"margin"!==G&&(Y.cssHooks[G+A].set=Qc)}),Y.fn.extend({css:function(A,V){return Ri(this,function(q,ie,ce){var me,Ee,ze={},Xe=0;if(Array.isArray(ie)){for(me=He(q),Ee=ie.length;Xe<Ee;Xe++)ze[ie[Xe]]=Y.css(q,ie[Xe],!1,me);return ze}return void 0!==ce?Y.style(q,ie,ce):Y.css(q,ie)},A,V,arguments.length>1)}}),Y.Tween=hr,(hr.prototype={constructor:hr,init:function(A,V,q,ie,ce,me){this.elem=A,this.prop=q,this.easing=ce||Y.easing._default,this.options=V,this.start=this.now=this.cur(),this.end=ie,this.unit=me||(Y.cssNumber[q]?"":"px")},cur:function(){var A=hr.propHooks[this.prop];return A&&A.get?A.get(this):hr.propHooks._default.get(this)},run:function(A){var V,q=hr.propHooks[this.prop];return this.pos=V=this.options.duration?Y.easing[this.easing](A,this.options.duration*A,0,1,this.options.duration):A,this.now=(this.end-this.start)*V+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),q&&q.set?q.set(this):hr.propHooks._default.set(this),this}}).init.prototype=hr.prototype,(hr.propHooks={_default:{get:function(A){var V;return 1!==A.elem.nodeType||null!=A.elem[A.prop]&&null==A.elem.style[A.prop]?A.elem[A.prop]:(V=Y.css(A.elem,A.prop,""))&&"auto"!==V?V:0},set:function(A){Y.fx.step[A.prop]?Y.fx.step[A.prop](A):1!==A.elem.nodeType||!Y.cssHooks[A.prop]&&null==A.elem.style[fs(A.prop)]?A.elem[A.prop]=A.now:Y.style(A.elem,A.prop,A.now+A.unit)}}}).scrollTop=hr.propHooks.scrollLeft={set:function(A){A.elem.nodeType&&A.elem.parentNode&&(A.elem[A.prop]=A.now)}},Y.easing={linear:function(A){return A},swing:function(A){return.5-Math.cos(A*Math.PI)/2},_default:"swing"},(Y.fx=hr.prototype.init).step={};var Oi,bi,gu=/^(?:toggle|show|hide)$/,Sa=/queueHooks$/;function eu(){bi&&(!1===We.hidden&&de.requestAnimationFrame?de.requestAnimationFrame(eu):de.setTimeout(eu,Y.fx.interval),Y.fx.tick())}function _a(){return de.setTimeout(function(){Oi=void 0}),Oi=Date.now()}function el(G,A){var V,q=0,ie={height:G};for(A=A?1:0;q<4;q+=2-A)ie["margin"+(V=Wi[q])]=ie["padding"+V]=G;return A&&(ie.opacity=ie.width=G),ie}function tl(G,A,V){for(var q,ie=(es.tweeners[A]||[]).concat(es.tweeners["*"]),ce=0,me=ie.length;ce<me;ce++)if(q=ie[ce].call(V,A,G))return q}function es(G,A,V){var q,ie,ce=0,me=es.prefilters.length,Ee=Y.Deferred().always(function(){delete ze.elem}),ze=function(){if(ie)return!1;for(var qt=Oi||_a(),ut=Math.max(0,Xe.startTime+Xe.duration-qt),On=1-(ut/Xe.duration||0),er=0,di=Xe.tweens.length;er<di;er++)Xe.tweens[er].run(On);return Ee.notifyWith(G,[Xe,On,ut]),On<1&&di?ut:(di||Ee.notifyWith(G,[Xe,1,0]),Ee.resolveWith(G,[Xe]),!1)},Xe=Ee.promise({elem:G,props:Y.extend({},A),opts:Y.extend(!0,{specialEasing:{},easing:Y.easing._default},V),originalProperties:A,originalOptions:V,startTime:Oi||_a(),duration:V.duration,tweens:[],createTween:function(qt,ut){var Jt=Y.Tween(G,Xe.opts,qt,ut,Xe.opts.specialEasing[qt]||Xe.opts.easing);return Xe.tweens.push(Jt),Jt},stop:function(qt){var ut=0,Jt=qt?Xe.tweens.length:0;if(ie)return this;for(ie=!0;ut<Jt;ut++)Xe.tweens[ut].run(1);return qt?(Ee.notifyWith(G,[Xe,1,0]),Ee.resolveWith(G,[Xe,qt])):Ee.rejectWith(G,[Xe,qt]),this}}),yt=Xe.props;for(function(G,A){var V,q,ie,ce,me;for(V in G)if(ie=A[q=ja(V)],ce=G[V],Array.isArray(ce)&&(ie=ce[1],ce=G[V]=ce[0]),V!==q&&(G[q]=ce,delete G[V]),(me=Y.cssHooks[q])&&"expand"in me)for(V in ce=me.expand(ce),delete G[q],ce)V in G||(G[V]=ce[V],A[V]=ie);else A[q]=ie}(yt,Xe.opts.specialEasing);ce<me;ce++)if(q=es.prefilters[ce].call(Xe,G,yt,Xe.opts))return Ae(q.stop)&&(Y._queueHooks(Xe.elem,Xe.opts.queue).stop=q.stop.bind(q)),q;return Y.map(yt,tl,Xe),Ae(Xe.opts.start)&&Xe.opts.start.call(G,Xe),Xe.progress(Xe.opts.progress).done(Xe.opts.done,Xe.opts.complete).fail(Xe.opts.fail).always(Xe.opts.always),Y.fx.timer(Y.extend(ze,{elem:G,anim:Xe,queue:Xe.opts.queue})),Xe}Y.Animation=Y.extend(es,{tweeners:{"*":[function(G,A){var V=this.createTween(G,A);return sr(V.elem,G,Ts.exec(A),V),V}]},tweener:function(A,V){Ae(A)?(V=A,A=["*"]):A=A.match(_t);for(var q,ie=0,ce=A.length;ie<ce;ie++)(es.tweeners[q=A[ie]]=es.tweeners[q]||[]).unshift(V)},prefilters:[function(G,A,V){var q,ie,ce,me,Ee,ze,Xe,yt,Wt="width"in A||"height"in A,qt=this,ut={},Jt=G.style,On=G.nodeType&&qa(G),er=Wn.get(G,"fxshow");for(q in V.queue||(null==(me=Y._queueHooks(G,"fx")).unqueued&&(me.unqueued=0,Ee=me.empty.fire,me.empty.fire=function(){me.unqueued||Ee()}),me.unqueued++,qt.always(function(){qt.always(function(){me.unqueued--,Y.queue(G,"fx").length||me.empty.fire()})})),A)if(gu.test(ie=A[q])){if(delete A[q],ce=ce||"toggle"===ie,ie===(On?"hide":"show")){if("show"!==ie||!er||void 0===er[q])continue;On=!0}ut[q]=er&&er[q]||Y.style(G,q)}if((ze=!Y.isEmptyObject(A))||!Y.isEmptyObject(ut))for(q in Wt&&1===G.nodeType&&(V.overflow=[Jt.overflow,Jt.overflowX,Jt.overflowY],null==(Xe=er&&er.display)&&(Xe=Wn.get(G,"display")),"none"===(yt=Y.css(G,"display"))&&(Xe?yt=Xe:(Hr([G],!0),Xe=G.style.display||Xe,yt=Y.css(G,"display"),Hr([G]))),("inline"===yt||"inline-block"===yt&&null!=Xe)&&"none"===Y.css(G,"float")&&(ze||(qt.done(function(){Jt.display=Xe}),null==Xe&&(Xe="none"===(yt=Jt.display)?"":yt)),Jt.display="inline-block")),V.overflow&&(Jt.overflow="hidden",qt.always(function(){Jt.overflow=V.overflow[0],Jt.overflowX=V.overflow[1],Jt.overflowY=V.overflow[2]})),ze=!1,ut)ze||(er?"hidden"in er&&(On=er.hidden):er=Wn.access(G,"fxshow",{display:Xe}),ce&&(er.hidden=!On),On&&Hr([G],!0),qt.done(function(){for(q in On||Hr([G]),Wn.remove(G,"fxshow"),ut)Y.style(G,q,ut[q])})),ze=tl(On?er[q]:0,q,qt),q in er||(er[q]=ze.start,On&&(ze.end=ze.start,ze.start=0))}],prefilter:function(A,V){V?es.prefilters.unshift(A):es.prefilters.push(A)}}),Y.speed=function(G,A,V){var q=G&&"object"==typeof G?Y.extend({},G):{complete:V||!V&&A||Ae(G)&&G,duration:G,easing:V&&A||A&&!Ae(A)&&A};return Y.fx.off?q.duration=0:"number"!=typeof q.duration&&(q.duration=q.duration in Y.fx.speeds?Y.fx.speeds[q.duration]:Y.fx.speeds._default),(null==q.queue||!0===q.queue)&&(q.queue="fx"),q.old=q.complete,q.complete=function(){Ae(q.old)&&q.old.call(this),q.queue&&Y.dequeue(this,q.queue)},q},Y.fn.extend({fadeTo:function(A,V,q,ie){return this.filter(qa).css("opacity",0).show().end().animate({opacity:V},A,q,ie)},animate:function(A,V,q,ie){var ce=Y.isEmptyObject(A),me=Y.speed(V,q,ie),Ee=function(){var Xe=es(this,Y.extend({},A),me);(ce||Wn.get(this,"finish"))&&Xe.stop(!0)};return Ee.finish=Ee,ce||!1===me.queue?this.each(Ee):this.queue(me.queue,Ee)},stop:function(A,V,q){var ie=function(me){var Ee=me.stop;delete me.stop,Ee(q)};return"string"!=typeof A&&(q=V,V=A,A=void 0),V&&this.queue(A||"fx",[]),this.each(function(){var ce=!0,me=null!=A&&A+"queueHooks",Ee=Y.timers,ze=Wn.get(this);if(me)ze[me]&&ze[me].stop&&ie(ze[me]);else for(me in ze)ze[me]&&ze[me].stop&&Sa.test(me)&&ie(ze[me]);for(me=Ee.length;me--;)Ee[me].elem===this&&(null==A||Ee[me].queue===A)&&(Ee[me].anim.stop(q),ce=!1,Ee.splice(me,1));(ce||!q)&&Y.dequeue(this,A)})},finish:function(A){return!1!==A&&(A=A||"fx"),this.each(function(){var V,q=Wn.get(this),ie=q[A+"queue"],ce=q[A+"queueHooks"],me=Y.timers,Ee=ie?ie.length:0;for(q.finish=!0,Y.queue(this,A,[]),ce&&ce.stop&&ce.stop.call(this,!0),V=me.length;V--;)me[V].elem===this&&me[V].queue===A&&(me[V].anim.stop(!0),me.splice(V,1));for(V=0;V<Ee;V++)ie[V]&&ie[V].finish&&ie[V].finish.call(this);delete q.finish})}}),Y.each(["toggle","show","hide"],function(G,A){var V=Y.fn[A];Y.fn[A]=function(q,ie,ce){return null==q||"boolean"==typeof q?V.apply(this,arguments):this.animate(el(A,!0),q,ie,ce)}}),Y.each({slideDown:el("show"),slideUp:el("hide"),slideToggle:el("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(G,A){Y.fn[G]=function(V,q,ie){return this.animate(A,V,q,ie)}}),Y.timers=[],Y.fx.tick=function(){var G,A=0,V=Y.timers;for(Oi=Date.now();A<V.length;A++)!(G=V[A])()&&V[A]===G&&V.splice(A--,1);V.length||Y.fx.stop(),Oi=void 0},Y.fx.timer=function(G){Y.timers.push(G),Y.fx.start()},Y.fx.interval=13,Y.fx.start=function(){bi||(bi=!0,eu())},Y.fx.stop=function(){bi=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fn.delay=function(G,A){return G=Y.fx&&Y.fx.speeds[G]||G,this.queue(A=A||"fx",function(V,q){var ie=de.setTimeout(V,G);q.stop=function(){de.clearTimeout(ie)}})},function(){var G=We.createElement("input"),V=We.createElement("select").appendChild(We.createElement("option"));G.type="checkbox",fe.checkOn=""!==G.value,fe.optSelected=V.selected,(G=We.createElement("input")).value="t",G.type="radio",fe.radioValue="t"===G.value}();var nl,vo=Y.expr.attrHandle;Y.fn.extend({attr:function(A,V){return Ri(this,Y.attr,A,V,arguments.length>1)},removeAttr:function(A){return this.each(function(){Y.removeAttr(this,A)})}}),Y.extend({attr:function(A,V,q){var ie,ce,me=A.nodeType;if(3!==me&&8!==me&&2!==me)return void 0===A.getAttribute?Y.prop(A,V,q):((1!==me||!Y.isXMLDoc(A))&&(ce=Y.attrHooks[V.toLowerCase()]||(Y.expr.match.bool.test(V)?nl:void 0)),void 0!==q?null===q?void Y.removeAttr(A,V):ce&&"set"in ce&&void 0!==(ie=ce.set(A,q,V))?ie:(A.setAttribute(V,q+""),q):ce&&"get"in ce&&null!==(ie=ce.get(A,V))?ie:null==(ie=Y.find.attr(A,V))?void 0:ie)},attrHooks:{type:{set:function(A,V){if(!fe.radioValue&&"radio"===V&&Ct(A,"input")){var q=A.value;return A.setAttribute("type",V),q&&(A.value=q),V}}}},removeAttr:function(A,V){var q,ie=0,ce=V&&V.match(_t);if(ce&&1===A.nodeType)for(;q=ce[ie++];)A.removeAttribute(q)}}),nl={set:function(A,V,q){return!1===V?Y.removeAttr(A,q):A.setAttribute(q,q),q}},Y.each(Y.expr.match.bool.source.match(/\w+/g),function(G,A){var V=vo[A]||Y.find.attr;vo[A]=function(q,ie,ce){var me,Ee,ze=ie.toLowerCase();return ce||(Ee=vo[ze],vo[ze]=me,me=null!=V(q,ie,ce)?ze:null,vo[ze]=Ee),me}});var Js=/^(?:input|select|textarea|button)$/i,As=/^(?:a|area)$/i;function Ro(G){return(G.match(_t)||[]).join(" ")}function Fa(G){return G.getAttribute&&G.getAttribute("class")||""}function oi(G){return Array.isArray(G)?G:"string"==typeof G&&G.match(_t)||[]}Y.fn.extend({prop:function(A,V){return Ri(this,Y.prop,A,V,arguments.length>1)},removeProp:function(A){return this.each(function(){delete this[Y.propFix[A]||A]})}}),Y.extend({prop:function(A,V,q){var ie,ce,me=A.nodeType;if(3!==me&&8!==me&&2!==me)return(1!==me||!Y.isXMLDoc(A))&&(ce=Y.propHooks[V=Y.propFix[V]||V]),void 0!==q?ce&&"set"in ce&&void 0!==(ie=ce.set(A,q,V))?ie:A[V]=q:ce&&"get"in ce&&null!==(ie=ce.get(A,V))?ie:A[V]},propHooks:{tabIndex:{get:function(A){var V=Y.find.attr(A,"tabindex");return V?parseInt(V,10):Js.test(A.nodeName)||As.test(A.nodeName)&&A.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),fe.optSelected||(Y.propHooks.selected={get:function(A){return null},set:function(A){}}),Y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Y.propFix[this.toLowerCase()]=this}),Y.fn.extend({addClass:function(A){var V,q,ie,ce,me,Ee,ze,Xe=0;if(Ae(A))return this.each(function(yt){Y(this).addClass(A.call(this,yt,Fa(this)))});if((V=oi(A)).length)for(;q=this[Xe++];)if(ce=Fa(q),ie=1===q.nodeType&&" "+Ro(ce)+" "){for(Ee=0;me=V[Ee++];)ie.indexOf(" "+me+" ")<0&&(ie+=me+" ");ce!==(ze=Ro(ie))&&q.setAttribute("class",ze)}return this},removeClass:function(A){var V,q,ie,ce,me,Ee,ze,Xe=0;if(Ae(A))return this.each(function(yt){Y(this).removeClass(A.call(this,yt,Fa(this)))});if(!arguments.length)return this.attr("class","");if((V=oi(A)).length)for(;q=this[Xe++];)if(ce=Fa(q),ie=1===q.nodeType&&" "+Ro(ce)+" "){for(Ee=0;me=V[Ee++];)for(;ie.indexOf(" "+me+" ")>-1;)ie=ie.replace(" "+me+" "," ");ce!==(ze=Ro(ie))&&q.setAttribute("class",ze)}return this},toggleClass:function(A,V){var q=typeof A,ie="string"===q||Array.isArray(A);return"boolean"==typeof V&&ie?V?this.addClass(A):this.removeClass(A):Ae(A)?this.each(function(ce){Y(this).toggleClass(A.call(this,ce,Fa(this),V),V)}):this.each(function(){var ce,me,Ee,ze;if(ie)for(me=0,Ee=Y(this),ze=oi(A);ce=ze[me++];)Ee.hasClass(ce)?Ee.removeClass(ce):Ee.addClass(ce);else(void 0===A||"boolean"===q)&&((ce=Fa(this))&&Wn.set(this,"__className__",ce),this.setAttribute&&this.setAttribute("class",ce||!1===A?"":Wn.get(this,"__className__")||""))})},hasClass:function(A){var V,q,ie=0;for(V=" "+A+" ";q=this[ie++];)if(1===q.nodeType&&(" "+Ro(Fa(q))+" ").indexOf(V)>-1)return!0;return!1}});var ef=/\r/g;Y.fn.extend({val:function(A){var V,q,ie,ce=this[0];return arguments.length?(ie=Ae(A),this.each(function(me){var Ee;1===this.nodeType&&(null==(Ee=ie?A.call(this,me,Y(this).val()):A)?Ee="":"number"==typeof Ee?Ee+="":Array.isArray(Ee)&&(Ee=Y.map(Ee,function(ze){return null==ze?"":ze+""})),(!(V=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()])||!("set"in V)||void 0===V.set(this,Ee,"value"))&&(this.value=Ee))})):ce?(V=Y.valHooks[ce.type]||Y.valHooks[ce.nodeName.toLowerCase()])&&"get"in V&&void 0!==(q=V.get(ce,"value"))?q:"string"==typeof(q=ce.value)?q.replace(ef,""):null==q?"":q:void 0}}),Y.extend({valHooks:{option:{get:function(A){var V=Y.find.attr(A,"value");return null!=V?V:Ro(Y.text(A))}},select:{get:function(A){var V,q,ie,ce=A.options,me=A.selectedIndex,Ee="select-one"===A.type,ze=Ee?null:[],Xe=Ee?me+1:ce.length;for(ie=me<0?Xe:Ee?me:0;ie<Xe;ie++)if(((q=ce[ie]).selected||ie===me)&&!q.disabled&&(!q.parentNode.disabled||!Ct(q.parentNode,"optgroup"))){if(V=Y(q).val(),Ee)return V;ze.push(V)}return ze},set:function(A,V){for(var q,ie,ce=A.options,me=Y.makeArray(V),Ee=ce.length;Ee--;)((ie=ce[Ee]).selected=Y.inArray(Y.valHooks.option.get(ie),me)>-1)&&(q=!0);return q||(A.selectedIndex=-1),me}}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]={set:function(A,V){if(Array.isArray(V))return A.checked=Y.inArray(Y(A).val(),V)>-1}},fe.checkOn||(Y.valHooks[this].get=function(G){return null===G.getAttribute("value")?"on":G.value})}),fe.focusin="onfocusin"in de;var kv=/^(?:focusinfocus|focusoutblur)$/,wl=function(A){A.stopPropagation()};Y.extend(Y.event,{trigger:function(A,V,q,ie){var ce,me,Ee,ze,Xe,yt,Wt,qt,ut=[q||We],Jt=ne.call(A,"type")?A.type:A,On=ne.call(A,"namespace")?A.namespace.split("."):[];if(me=qt=Ee=q=q||We,3!==q.nodeType&&8!==q.nodeType&&!kv.test(Jt+Y.event.triggered)&&(Jt.indexOf(".")>-1&&(On=Jt.split("."),Jt=On.shift(),On.sort()),Xe=Jt.indexOf(":")<0&&"on"+Jt,(A=A[Y.expando]?A:new Y.Event(Jt,"object"==typeof A&&A)).isTrigger=ie?2:3,A.namespace=On.join("."),A.rnamespace=A.namespace?new RegExp("(^|\\.)"+On.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,A.result=void 0,A.target||(A.target=q),V=null==V?[A]:Y.makeArray(V,[A]),Wt=Y.event.special[Jt]||{},ie||!Wt.trigger||!1!==Wt.trigger.apply(q,V))){if(!ie&&!Wt.noBubble&&!Le(q)){for(kv.test((ze=Wt.delegateType||Jt)+Jt)||(me=me.parentNode);me;me=me.parentNode)ut.push(me),Ee=me;Ee===(q.ownerDocument||We)&&ut.push(Ee.defaultView||Ee.parentWindow||de)}for(ce=0;(me=ut[ce++])&&!A.isPropagationStopped();)qt=me,A.type=ce>1?ze:Wt.bindType||Jt,(yt=(Wn.get(me,"events")||Object.create(null))[A.type]&&Wn.get(me,"handle"))&&yt.apply(me,V),(yt=Xe&&me[Xe])&&yt.apply&&si(me)&&(A.result=yt.apply(me,V),!1===A.result&&A.preventDefault());return A.type=Jt,!ie&&!A.isDefaultPrevented()&&(!Wt._default||!1===Wt._default.apply(ut.pop(),V))&&si(q)&&Xe&&Ae(q[Jt])&&!Le(q)&&((Ee=q[Xe])&&(q[Xe]=null),Y.event.triggered=Jt,A.isPropagationStopped()&&qt.addEventListener(Jt,wl),q[Jt](),A.isPropagationStopped()&&qt.removeEventListener(Jt,wl),Y.event.triggered=void 0,Ee&&(q[Xe]=Ee)),A.result}},simulate:function(A,V,q){var ie=Y.extend(new Y.Event,q,{type:A,isSimulated:!0});Y.event.trigger(ie,null,V)}}),Y.fn.extend({trigger:function(A,V){return this.each(function(){Y.event.trigger(A,V,this)})},triggerHandler:function(A,V){var q=this[0];if(q)return Y.event.trigger(A,V,q,!0)}}),fe.focusin||Y.each({focus:"focusin",blur:"focusout"},function(G,A){var V=function(ie){Y.event.simulate(A,ie.target,Y.event.fix(ie))};Y.event.special[A]={setup:function(){var ie=this.ownerDocument||this.document||this,ce=Wn.access(ie,A);ce||ie.addEventListener(G,V,!0),Wn.access(ie,A,(ce||0)+1)},teardown:function(){var ie=this.ownerDocument||this.document||this,ce=Wn.access(ie,A)-1;ce?Wn.access(ie,A,ce):(ie.removeEventListener(G,V,!0),Wn.remove(ie,A))}}});var ac=de.location,Du={guid:Date.now()},sc=/\?/;Y.parseXML=function(G){var A,V;if(!G||"string"!=typeof G)return null;try{A=(new de.DOMParser).parseFromString(G,"text/xml")}catch(q){}return V=A&&A.getElementsByTagName("parsererror")[0],(!A||V)&&Y.error("Invalid XML: "+(V?Y.map(V.childNodes,function(q){return q.textContent}).join("\n"):G)),A};var Ru=/\[\]$/,hs=/\r?\n/g,Ev=/^(?:submit|button|image|reset|file)$/i,Za=/^(?:input|select|textarea|keygen)/i;function Us(G,A,V,q){var ie;if(Array.isArray(A))Y.each(A,function(ce,me){V||Ru.test(G)?q(G,me):Us(G+"["+("object"==typeof me&&null!=me?ce:"")+"]",me,V,q)});else if(V||"object"!==st(A))q(G,A);else for(ie in A)Us(G+"["+ie+"]",A[ie],V,q)}Y.param=function(G,A){var V,q=[],ie=function(me,Ee){var ze=Ae(Ee)?Ee():Ee;q[q.length]=encodeURIComponent(me)+"="+encodeURIComponent(null==ze?"":ze)};if(null==G)return"";if(Array.isArray(G)||G.jquery&&!Y.isPlainObject(G))Y.each(G,function(){ie(this.name,this.value)});else for(V in G)Us(V,G[V],A,ie);return q.join("&")},Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var A=Y.prop(this,"elements");return A?Y.makeArray(A):this}).filter(function(){var A=this.type;return this.name&&!Y(this).is(":disabled")&&Za.test(this.nodeName)&&!Ev.test(A)&&(this.checked||!Yr.test(A))}).map(function(A,V){var q=Y(this).val();return null==q?null:Array.isArray(q)?Y.map(q,function(ie){return{name:V.name,value:ie.replace(hs,"\r\n")}}):{name:V.name,value:q.replace(hs,"\r\n")}}).get()}});var hd=/%20/g,oc=/#.*$/,tf=/([?&])_=[^&]*/,Ka=/^(.*?):[ \t]*([^\r\n]*)$/gm,E_=/^(?:GET|HEAD)$/,kl=/^\/\//,Cv={},Hf={},Ym="*/".concat("*"),zf=We.createElement("a");function Km(G){return function(A,V){"string"!=typeof A&&(V=A,A="*");var q,ie=0,ce=A.toLowerCase().match(_t)||[];if(Ae(V))for(;q=ce[ie++];)"+"===q[0]?(q=q.slice(1)||"*",(G[q]=G[q]||[]).unshift(V)):(G[q]=G[q]||[]).push(V)}}function vd(G,A,V,q){var ie={},ce=G===Hf;function me(Ee){var ze;return ie[Ee]=!0,Y.each(G[Ee]||[],function(Xe,yt){var Wt=yt(A,V,q);return"string"!=typeof Wt||ce||ie[Wt]?ce?!(ze=Wt):void 0:(A.dataTypes.unshift(Wt),me(Wt),!1)}),ze}return me(A.dataTypes[0])||!ie["*"]&&me("*")}function Sv(G,A){var V,q,ie=Y.ajaxSettings.flatOptions||{};for(V in A)void 0!==A[V]&&((ie[V]?G:q||(q={}))[V]=A[V]);return q&&Y.extend(!0,G,q),G}zf.href=ac.href,Y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ac.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ac.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ym,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(A,V){return V?Sv(Sv(A,Y.ajaxSettings),V):Sv(Y.ajaxSettings,A)},ajaxPrefilter:Km(Cv),ajaxTransport:Km(Hf),ajax:function(A,V){"object"==typeof A&&(V=A,A=void 0);var q,ie,ce,me,Ee,ze,Xe,yt,Wt,qt,ut=Y.ajaxSetup({},V=V||{}),Jt=ut.context||ut,On=ut.context&&(Jt.nodeType||Jt.jquery)?Y(Jt):Y.event,er=Y.Deferred(),di=Y.Callbacks("once memory"),Ta=ut.statusCode||{},po={},zr={},ia="canceled",An={readyState:0,getResponseHeader:function(va){var Mr;if(Xe){if(!me)for(me={};Mr=Ka.exec(ce);)me[Mr[1].toLowerCase()+" "]=(me[Mr[1].toLowerCase()+" "]||[]).concat(Mr[2]);Mr=me[va.toLowerCase()+" "]}return null==Mr?null:Mr.join(", ")},getAllResponseHeaders:function(){return Xe?ce:null},setRequestHeader:function(va,Mr){return null==Xe&&(va=zr[va.toLowerCase()]=zr[va.toLowerCase()]||va,po[va]=Mr),this},overrideMimeType:function(va){return null==Xe&&(ut.mimeType=va),this},statusCode:function(va){var Mr;if(va)if(Xe)An.always(va[An.status]);else for(Mr in va)Ta[Mr]=[Ta[Mr],va[Mr]];return this},abort:function(va){var Mr=va||ia;return q&&q.abort(Mr),Pu(0,Mr),this}};if(er.promise(An),ut.url=((A||ut.url||ac.href)+"").replace(kl,ac.protocol+"//"),ut.type=V.method||V.type||ut.method||ut.type,ut.dataTypes=(ut.dataType||"*").toLowerCase().match(_t)||[""],null==ut.crossDomain){ze=We.createElement("a");try{ze.href=ut.url,ze.href=ze.href,ut.crossDomain=zf.protocol+"//"+zf.host!=ze.protocol+"//"+ze.host}catch($i){ut.crossDomain=!0}}if(ut.data&&ut.processData&&"string"!=typeof ut.data&&(ut.data=Y.param(ut.data,ut.traditional)),vd(Cv,ut,V,An),Xe)return An;for(Wt in(yt=Y.event&&ut.global)&&0==Y.active++&&Y.event.trigger("ajaxStart"),ut.type=ut.type.toUpperCase(),ut.hasContent=!E_.test(ut.type),ie=ut.url.replace(oc,""),ut.hasContent?ut.data&&ut.processData&&0===(ut.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ut.data=ut.data.replace(hd,"+")):(qt=ut.url.slice(ie.length),ut.data&&(ut.processData||"string"==typeof ut.data)&&(ie+=(sc.test(ie)?"&":"?")+ut.data,delete ut.data),!1===ut.cache&&(ie=ie.replace(tf,"$1"),qt=(sc.test(ie)?"&":"?")+"_="+Du.guid+++qt),ut.url=ie+qt),ut.ifModified&&(Y.lastModified[ie]&&An.setRequestHeader("If-Modified-Since",Y.lastModified[ie]),Y.etag[ie]&&An.setRequestHeader("If-None-Match",Y.etag[ie])),(ut.data&&ut.hasContent&&!1!==ut.contentType||V.contentType)&&An.setRequestHeader("Content-Type",ut.contentType),An.setRequestHeader("Accept",ut.dataTypes[0]&&ut.accepts[ut.dataTypes[0]]?ut.accepts[ut.dataTypes[0]]+("*"!==ut.dataTypes[0]?", "+Ym+"; q=0.01":""):ut.accepts["*"]),ut.headers)An.setRequestHeader(Wt,ut.headers[Wt]);if(ut.beforeSend&&(!1===ut.beforeSend.call(Jt,An,ut)||Xe))return An.abort();if(ia="abort",di.add(ut.complete),An.done(ut.success),An.fail(ut.error),q=vd(Hf,ut,V,An)){if(An.readyState=1,yt&&On.trigger("ajaxSend",[An,ut]),Xe)return An;ut.async&&ut.timeout>0&&(Ee=de.setTimeout(function(){An.abort("timeout")},ut.timeout));try{Xe=!1,q.send(po,Pu)}catch($i){if(Xe)throw $i;Pu(-1,$i)}}else Pu(-1,"No Transport");function Pu($i,va,Mr,El){var mo,yu,aa,Po,Oo,sa=va;Xe||(Xe=!0,Ee&&de.clearTimeout(Ee),q=void 0,ce=El||"",An.readyState=$i>0?4:0,mo=$i>=200&&$i<300||304===$i,Mr&&(Po=function(G,A,V){for(var q,ie,ce,me,Ee=G.contents,ze=G.dataTypes;"*"===ze[0];)ze.shift(),void 0===q&&(q=G.mimeType||A.getResponseHeader("Content-Type"));if(q)for(ie in Ee)if(Ee[ie]&&Ee[ie].test(q)){ze.unshift(ie);break}if(ze[0]in V)ce=ze[0];else{for(ie in V){if(!ze[0]||G.converters[ie+" "+ze[0]]){ce=ie;break}me||(me=ie)}ce=ce||me}if(ce)return ce!==ze[0]&&ze.unshift(ce),V[ce]}(ut,An,Mr)),!mo&&Y.inArray("script",ut.dataTypes)>-1&&Y.inArray("json",ut.dataTypes)<0&&(ut.converters["text script"]=function(){}),Po=function(G,A,V,q){var ie,ce,me,Ee,ze,Xe={},yt=G.dataTypes.slice();if(yt[1])for(me in G.converters)Xe[me.toLowerCase()]=G.converters[me];for(ce=yt.shift();ce;)if(G.responseFields[ce]&&(V[G.responseFields[ce]]=A),!ze&&q&&G.dataFilter&&(A=G.dataFilter(A,G.dataType)),ze=ce,ce=yt.shift())if("*"===ce)ce=ze;else if("*"!==ze&&ze!==ce){if(!(me=Xe[ze+" "+ce]||Xe["* "+ce]))for(ie in Xe)if((Ee=ie.split(" "))[1]===ce&&(me=Xe[ze+" "+Ee[0]]||Xe["* "+Ee[0]])){!0===me?me=Xe[ie]:!0!==Xe[ie]&&(ce=Ee[0],yt.unshift(Ee[1]));break}if(!0!==me)if(me&&G.throws)A=me(A);else try{A=me(A)}catch(Wt){return{state:"parsererror",error:me?Wt:"No conversion from "+ze+" to "+ce}}}return{state:"success",data:A}}(ut,Po,An,mo),mo?(ut.ifModified&&((Oo=An.getResponseHeader("Last-Modified"))&&(Y.lastModified[ie]=Oo),(Oo=An.getResponseHeader("etag"))&&(Y.etag[ie]=Oo)),204===$i||"HEAD"===ut.type?sa="nocontent":304===$i?sa="notmodified":(sa=Po.state,yu=Po.data,mo=!(aa=Po.error))):(aa=sa,($i||!sa)&&(sa="error",$i<0&&($i=0))),An.status=$i,An.statusText=(va||sa)+"",mo?er.resolveWith(Jt,[yu,sa,An]):er.rejectWith(Jt,[An,sa,aa]),An.statusCode(Ta),Ta=void 0,yt&&On.trigger(mo?"ajaxSuccess":"ajaxError",[An,ut,mo?yu:aa]),di.fireWith(Jt,[An,sa]),yt&&(On.trigger("ajaxComplete",[An,ut]),--Y.active||Y.event.trigger("ajaxStop")))}return An},getJSON:function(A,V,q){return Y.get(A,V,q,"json")},getScript:function(A,V){return Y.get(A,void 0,V,"script")}}),Y.each(["get","post"],function(G,A){Y[A]=function(V,q,ie,ce){return Ae(q)&&(ce=ce||ie,ie=q,q=void 0),Y.ajax(Y.extend({url:V,type:A,dataType:ce,data:q,success:ie},Y.isPlainObject(V)&&V))}}),Y.ajaxPrefilter(function(G){var A;for(A in G.headers)"content-type"===A.toLowerCase()&&(G.contentType=G.headers[A]||"")}),Y._evalUrl=function(G,A,V){return Y.ajax({url:G,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ie){Y.globalEval(ie,A,V)}})},Y.fn.extend({wrapAll:function(A){var V;return this[0]&&(Ae(A)&&(A=A.call(this[0])),V=Y(A,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&V.insertBefore(this[0]),V.map(function(){for(var q=this;q.firstElementChild;)q=q.firstElementChild;return q}).append(this)),this},wrapInner:function(A){return Ae(A)?this.each(function(V){Y(this).wrapInner(A.call(this,V))}):this.each(function(){var V=Y(this),q=V.contents();q.length?q.wrapAll(A):V.append(A)})},wrap:function(A){var V=Ae(A);return this.each(function(q){Y(this).wrapAll(V?A.call(this,q):A)})},unwrap:function(A){return this.parent(A).not("body").each(function(){Y(this).replaceWith(this.childNodes)}),this}}),Y.expr.pseudos.hidden=function(G){return!Y.expr.pseudos.visible(G)},Y.expr.pseudos.visible=function(G){return!!(G.offsetWidth||G.offsetHeight||G.getClientRects().length)},Y.ajaxSettings.xhr=function(){try{return new de.XMLHttpRequest}catch(G){}};var Tv={0:200,1223:204},Gf=Y.ajaxSettings.xhr();fe.cors=!!Gf&&"withCredentials"in Gf,fe.ajax=Gf=!!Gf,Y.ajaxTransport(function(G){var A,V;if(fe.cors||Gf&&!G.crossDomain)return{send:function(ie,ce){var me,Ee=G.xhr();if(Ee.open(G.type,G.url,G.async,G.username,G.password),G.xhrFields)for(me in G.xhrFields)Ee[me]=G.xhrFields[me];for(me in G.mimeType&&Ee.overrideMimeType&&Ee.overrideMimeType(G.mimeType),!G.crossDomain&&!ie["X-Requested-With"]&&(ie["X-Requested-With"]="XMLHttpRequest"),ie)Ee.setRequestHeader(me,ie[me]);A=function(Xe){return function(){A&&(A=V=Ee.onload=Ee.onerror=Ee.onabort=Ee.ontimeout=Ee.onreadystatechange=null,"abort"===Xe?Ee.abort():"error"===Xe?"number"!=typeof Ee.status?ce(0,"error"):ce(Ee.status,Ee.statusText):ce(Tv[Ee.status]||Ee.status,Ee.statusText,"text"!==(Ee.responseType||"text")||"string"!=typeof Ee.responseText?{binary:Ee.response}:{text:Ee.responseText},Ee.getAllResponseHeaders()))}},Ee.onload=A(),V=Ee.onerror=Ee.ontimeout=A("error"),void 0!==Ee.onabort?Ee.onabort=V:Ee.onreadystatechange=function(){4===Ee.readyState&&de.setTimeout(function(){A&&V()})},A=A("abort");try{Ee.send(G.hasContent&&G.data||null)}catch(ze){if(A)throw ze}},abort:function(){A&&A()}}}),Y.ajaxPrefilter(function(G){G.crossDomain&&(G.contents.script=!1)}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(A){return Y.globalEval(A),A}}}),Y.ajaxPrefilter("script",function(G){void 0===G.cache&&(G.cache=!1),G.crossDomain&&(G.type="GET")}),Y.ajaxTransport("script",function(G){var A,V;if(G.crossDomain||G.scriptAttrs)return{send:function(ie,ce){A=Y("<script>").attr(G.scriptAttrs||{}).prop({charset:G.scriptCharset,src:G.url}).on("load error",V=function(Ee){A.remove(),V=null,Ee&&ce("error"===Ee.type?404:200,Ee.type)}),We.head.appendChild(A[0])},abort:function(){V&&V()}}});var G,$m=[],uc=/(=)\?(?=&|$)|\?\?/;Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var A=$m.pop()||Y.expando+"_"+Du.guid++;return this[A]=!0,A}}),Y.ajaxPrefilter("json jsonp",function(G,A,V){var q,ie,ce,me=!1!==G.jsonp&&(uc.test(G.url)?"url":"string"==typeof G.data&&0===(G.contentType||"").indexOf("application/x-www-form-urlencoded")&&uc.test(G.data)&&"data");if(me||"jsonp"===G.dataTypes[0])return q=G.jsonpCallback=Ae(G.jsonpCallback)?G.jsonpCallback():G.jsonpCallback,me?G[me]=G[me].replace(uc,"$1"+q):!1!==G.jsonp&&(G.url+=(sc.test(G.url)?"&":"?")+G.jsonp+"="+q),G.converters["script json"]=function(){return ce||Y.error(q+" was not called"),ce[0]},G.dataTypes[0]="json",ie=de[q],de[q]=function(){ce=arguments},V.always(function(){void 0===ie?Y(de).removeProp(q):de[q]=ie,G[q]&&(G.jsonpCallback=A.jsonpCallback,$m.push(q)),ce&&Ae(ie)&&ie(ce[0]),ce=ie=void 0}),"script"}),fe.createHTMLDocument=((G=We.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===G.childNodes.length),Y.parseHTML=function(G,A,V){return"string"!=typeof G?[]:("boolean"==typeof A&&(V=A,A=!1),A||(fe.createHTMLDocument?((q=(A=We.implementation.createHTMLDocument("")).createElement("base")).href=We.location.href,A.head.appendChild(q)):A=We),ce=!V&&[],(ie=Zt.exec(G))?[A.createElement(ie[1])]:(ie=Do([G],A,ce),ce&&ce.length&&Y(ce).remove(),Y.merge([],ie.childNodes)));var q,ie,ce},Y.fn.load=function(G,A,V){var q,ie,ce,me=this,Ee=G.indexOf(" ");return Ee>-1&&(q=Ro(G.slice(Ee)),G=G.slice(0,Ee)),Ae(A)?(V=A,A=void 0):A&&"object"==typeof A&&(ie="POST"),me.length>0&&Y.ajax({url:G,type:ie||"GET",dataType:"html",data:A}).done(function(ze){ce=arguments,me.html(q?Y("<div>").append(Y.parseHTML(ze)).find(q):ze)}).always(V&&function(ze,Xe){me.each(function(){V.apply(this,ce||[ze.responseText,Xe,ze])})}),this},Y.expr.pseudos.animated=function(G){return Y.grep(Y.timers,function(A){return G===A.elem}).length},Y.offset={setOffset:function(A,V,q){var ie,ce,me,Ee,ze,Xe,Wt=Y.css(A,"position"),qt=Y(A),ut={};"static"===Wt&&(A.style.position="relative"),ze=qt.offset(),me=Y.css(A,"top"),Xe=Y.css(A,"left"),("absolute"===Wt||"fixed"===Wt)&&(me+Xe).indexOf("auto")>-1?(Ee=(ie=qt.position()).top,ce=ie.left):(Ee=parseFloat(me)||0,ce=parseFloat(Xe)||0),Ae(V)&&(V=V.call(A,q,Y.extend({},ze))),null!=V.top&&(ut.top=V.top-ze.top+Ee),null!=V.left&&(ut.left=V.left-ze.left+ce),"using"in V?V.using.call(A,ut):qt.css(ut)}},Y.fn.extend({offset:function(A){if(arguments.length)return void 0===A?this:this.each(function(ce){Y.offset.setOffset(this,A,ce)});var V,q,ie=this[0];return ie?ie.getClientRects().length?{top:(V=ie.getBoundingClientRect()).top+(q=ie.ownerDocument.defaultView).pageYOffset,left:V.left+q.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var A,V,q,ie=this[0],ce={top:0,left:0};if("fixed"===Y.css(ie,"position"))V=ie.getBoundingClientRect();else{for(V=this.offset(),q=ie.ownerDocument,A=ie.offsetParent||q.documentElement;A&&(A===q.body||A===q.documentElement)&&"static"===Y.css(A,"position");)A=A.parentNode;A&&A!==ie&&1===A.nodeType&&((ce=Y(A).offset()).top+=Y.css(A,"borderTopWidth",!0),ce.left+=Y.css(A,"borderLeftWidth",!0))}return{top:V.top-ce.top-Y.css(ie,"marginTop",!0),left:V.left-ce.left-Y.css(ie,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var A=this.offsetParent;A&&"static"===Y.css(A,"position");)A=A.offsetParent;return A||Bs})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(G,A){var V="pageYOffset"===A;Y.fn[G]=function(q){return Ri(this,function(ie,ce,me){var Ee;if(Le(ie)?Ee=ie:9===ie.nodeType&&(Ee=ie.defaultView),void 0===me)return Ee?Ee[A]:ie[ce];Ee?Ee.scrollTo(V?Ee.pageXOffset:me,V?me:Ee.pageYOffset):ie[ce]=me},G,q,arguments.length)}}),Y.each(["top","left"],function(G,A){Y.cssHooks[A]=Kt(fe.pixelPosition,function(V,q){if(q)return q=zt(V,A),je.test(q)?Y(V).position()[A]+"px":q})}),Y.each({Height:"height",Width:"width"},function(G,A){Y.each({padding:"inner"+G,content:A,"":"outer"+G},function(V,q){Y.fn[q]=function(ie,ce){var me=arguments.length&&(V||"boolean"!=typeof ie),Ee=V||(!0===ie||!0===ce?"margin":"border");return Ri(this,function(ze,Xe,yt){var Wt;return Le(ze)?0===q.indexOf("outer")?ze["inner"+G]:ze.document.documentElement["client"+G]:9===ze.nodeType?(Wt=ze.documentElement,Math.max(ze.body["scroll"+G],Wt["scroll"+G],ze.body["offset"+G],Wt["offset"+G],Wt["client"+G])):void 0===yt?Y.css(ze,Xe,Ee):Y.style(ze,Xe,yt,Ee)},A,me?ie:void 0,me)}})}),Y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(G,A){Y.fn[A]=function(V){return this.on(A,V)}}),Y.fn.extend({bind:function(A,V,q){return this.on(A,null,V,q)},unbind:function(A,V){return this.off(A,null,V)},delegate:function(A,V,q,ie){return this.on(V,A,q,ie)},undelegate:function(A,V,q){return 1===arguments.length?this.off(A,"**"):this.off(V,A||"**",q)},hover:function(A,V){return this.mouseenter(A).mouseleave(V||A)}}),Y.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(G,A){Y.fn[A]=function(V,q){return arguments.length>0?this.on(A,null,V,q):this.trigger(A)}});var Xm=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Y.proxy=function(G,A){var V,q,ie;if("string"==typeof A&&(V=G[A],A=G,G=V),Ae(G))return q=re.call(arguments,2),(ie=function(){return G.apply(A||this,q.concat(re.call(arguments)))}).guid=G.guid=G.guid||Y.guid++,ie},Y.holdReady=function(G){G?Y.readyWait++:Y.ready(!0)},Y.isArray=Array.isArray,Y.parseJSON=JSON.parse,Y.nodeName=Ct,Y.isFunction=Ae,Y.isWindow=Le,Y.camelCase=ja,Y.type=st,Y.now=Date.now,Y.isNumeric=function(G){var A=Y.type(G);return("number"===A||"string"===A)&&!isNaN(G-parseFloat(G))},Y.trim=function(G){return null==G?"":(G+"").replace(Xm,"")},void 0!==(_e=function(){return Y}.apply(mt,[]))&&(rn.exports=_e);var Mv=de.jQuery,rl=de.$;return Y.noConflict=function(G){return de.$===Y&&(de.$=rl),G&&de.jQuery===Y&&(de.jQuery=Mv),Y},void 0===D&&(de.jQuery=de.$=Y),Y})},5579:function(rn){var mt=function(J){"use strict";var D,_e=Object.prototype,de=_e.hasOwnProperty,M="function"==typeof Symbol?Symbol:{},S=M.iterator||"@@iterator",re=M.asyncIterator||"@@asyncIterator",Re=M.toStringTag||"@@toStringTag";function ke(k,B,X){return Object.defineProperty(k,B,{value:X,enumerable:!0,configurable:!0,writable:!0}),k[B]}try{ke({},"")}catch(k){ke=function(X,ge,Ie){return X[ge]=Ie}}function v(k,B,X,ge){var nt=Object.create((B&&B.prototype instanceof Ae?B:Ae).prototype),_t=new Ct(ge||[]);return nt._invoke=function(k,B,X){var ge=we;return function(nt,_t){if(ge===Oe)throw new Error("Generator is already running");if(ge===Q){if("throw"===nt)throw _t;return z()}for(X.method=nt,X.arg=_t;;){var rt=X.delegate;if(rt){var Vt=nn(rt,X);if(Vt){if(Vt===fe)continue;return Vt}}if("next"===X.method)X.sent=X._sent=X.arg;else if("throw"===X.method){if(ge===we)throw ge=Q,X.arg;X.dispatchException(X.arg)}else"return"===X.method&&X.abrupt("return",X.arg);ge=Oe;var Fn=be(k,B,X);if("normal"===Fn.type){if(ge=X.done?Q:ne,Fn.arg===fe)continue;return{value:Fn.arg,done:X.done}}"throw"===Fn.type&&(ge=Q,X.method="throw",X.arg=Fn.arg)}}}(k,X,_t),nt}function be(k,B,X){try{return{type:"normal",arg:k.call(B,X)}}catch(ge){return{type:"throw",arg:ge}}}J.wrap=v;var we="suspendedStart",ne="suspendedYield",Oe="executing",Q="completed",fe={};function Ae(){}function Le(){}function We(){}var qe={};ke(qe,S,function(){return this});var Be=Object.getPrototypeOf,st=Be&&Be(Be(Zt([])));st&&st!==_e&&de.call(st,S)&&(qe=st);var Qe=We.prototype=Ae.prototype=Object.create(qe);function Y(k){["next","throw","return"].forEach(function(B){ke(k,B,function(X){return this._invoke(B,X)})})}function dn(k,B){function X(nt,_t,rt,Vt){var Fn=be(k[nt],k,_t);if("throw"!==Fn.type){var rr=Fn.arg,Vr=rr.value;return Vr&&"object"==typeof Vr&&de.call(Vr,"__await")?B.resolve(Vr.__await).then(function(ii){X("next",ii,rt,Vt)},function(ii){X("throw",ii,rt,Vt)}):B.resolve(Vr).then(function(ii){rr.value=ii,rt(rr)},function(ii){return X("throw",ii,rt,Vt)})}Vt(Fn.arg)}var ge;this._invoke=function(nt,_t){function rt(){return new B(function(Vt,Fn){X(nt,_t,Vt,Fn)})}return ge=ge?ge.then(rt,rt):rt()}}function nn(k,B){var X=k.iterator[B.method];if(X===D){if(B.delegate=null,"throw"===B.method){if(k.iterator.return&&(B.method="return",B.arg=D,nn(k,B),"throw"===B.method))return fe;B.method="throw",B.arg=new TypeError("The iterator does not provide a 'throw' method")}return fe}var ge=be(X,k.iterator,B.arg);if("throw"===ge.type)return B.method="throw",B.arg=ge.arg,B.delegate=null,fe;var Ie=ge.arg;return Ie?Ie.done?(B[k.resultName]=Ie.value,B.next=k.nextLoc,"return"!==B.method&&(B.method="next",B.arg=D),B.delegate=null,fe):Ie:(B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,fe)}function xt(k){var B={tryLoc:k[0]};1 in k&&(B.catchLoc=k[1]),2 in k&&(B.finallyLoc=k[2],B.afterLoc=k[3]),this.tryEntries.push(B)}function Ot(k){var B=k.completion||{};B.type="normal",delete B.arg,k.completion=B}function Ct(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(xt,this),this.reset(!0)}function Zt(k){if(k){var B=k[S];if(B)return B.call(k);if("function"==typeof k.next)return k;if(!isNaN(k.length)){var X=-1,ge=function Ie(){for(;++X<k.length;)if(de.call(k,X))return Ie.value=k[X],Ie.done=!1,Ie;return Ie.value=D,Ie.done=!0,Ie};return ge.next=ge}}return{next:z}}function z(){return{value:D,done:!0}}return Le.prototype=We,ke(Qe,"constructor",We),ke(We,"constructor",Le),Le.displayName=ke(We,Re,"GeneratorFunction"),J.isGeneratorFunction=function(k){var B="function"==typeof k&&k.constructor;return!!B&&(B===Le||"GeneratorFunction"===(B.displayName||B.name))},J.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,We):(k.__proto__=We,ke(k,Re,"GeneratorFunction")),k.prototype=Object.create(Qe),k},J.awrap=function(k){return{__await:k}},Y(dn.prototype),ke(dn.prototype,re,function(){return this}),J.AsyncIterator=dn,J.async=function(k,B,X,ge,Ie){void 0===Ie&&(Ie=Promise);var nt=new dn(v(k,B,X,ge),Ie);return J.isGeneratorFunction(B)?nt:nt.next().then(function(_t){return _t.done?_t.value:nt.next()})},Y(Qe),ke(Qe,Re,"Generator"),ke(Qe,S,function(){return this}),ke(Qe,"toString",function(){return"[object Generator]"}),J.keys=function(k){var B=[];for(var X in k)B.push(X);return B.reverse(),function ge(){for(;B.length;){var Ie=B.pop();if(Ie in k)return ge.value=Ie,ge.done=!1,ge}return ge.done=!0,ge}},J.values=Zt,Ct.prototype={constructor:Ct,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=D,this.done=!1,this.delegate=null,this.method="next",this.arg=D,this.tryEntries.forEach(Ot),!B)for(var X in this)"t"===X.charAt(0)&&de.call(this,X)&&!isNaN(+X.slice(1))&&(this[X]=D)},stop:function(){this.done=!0;var X=this.tryEntries[0].completion;if("throw"===X.type)throw X.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var X=this;function ge(Fn,rr){return _t.type="throw",_t.arg=B,X.next=Fn,rr&&(X.method="next",X.arg=D),!!rr}for(var Ie=this.tryEntries.length-1;Ie>=0;--Ie){var nt=this.tryEntries[Ie],_t=nt.completion;if("root"===nt.tryLoc)return ge("end");if(nt.tryLoc<=this.prev){var rt=de.call(nt,"catchLoc"),Vt=de.call(nt,"finallyLoc");if(rt&&Vt){if(this.prev<nt.catchLoc)return ge(nt.catchLoc,!0);if(this.prev<nt.finallyLoc)return ge(nt.finallyLoc)}else if(rt){if(this.prev<nt.catchLoc)return ge(nt.catchLoc,!0)}else{if(!Vt)throw new Error("try statement without catch or finally");if(this.prev<nt.finallyLoc)return ge(nt.finallyLoc)}}}},abrupt:function(B,X){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Ie=this.tryEntries[ge];if(Ie.tryLoc<=this.prev&&de.call(Ie,"finallyLoc")&&this.prev<Ie.finallyLoc){var nt=Ie;break}}nt&&("break"===B||"continue"===B)&&nt.tryLoc<=X&&X<=nt.finallyLoc&&(nt=null);var _t=nt?nt.completion:{};return _t.type=B,_t.arg=X,nt?(this.method="next",this.next=nt.finallyLoc,fe):this.complete(_t)},complete:function(B,X){if("throw"===B.type)throw B.arg;return"break"===B.type||"continue"===B.type?this.next=B.arg:"return"===B.type?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):"normal"===B.type&&X&&(this.next=X),fe},finish:function(B){for(var X=this.tryEntries.length-1;X>=0;--X){var ge=this.tryEntries[X];if(ge.finallyLoc===B)return this.complete(ge.completion,ge.afterLoc),Ot(ge),fe}},catch:function(B){for(var X=this.tryEntries.length-1;X>=0;--X){var ge=this.tryEntries[X];if(ge.tryLoc===B){var Ie=ge.completion;if("throw"===Ie.type){var nt=Ie.arg;Ot(ge)}return nt}}throw new Error("illegal catch attempt")},delegateYield:function(B,X,ge){return this.delegate={iterator:Zt(B),resultName:X,nextLoc:ge},"next"===this.method&&(this.arg=D),fe}},J}(rn.exports);try{regeneratorRuntime=mt}catch(J){"object"==typeof globalThis?globalThis.regeneratorRuntime=mt:Function("r","regeneratorRuntime = r")(mt)}},3103:function(rn,mt,J){"use strict";J.d(mt,{P:function(){return Re}});var _e=J(5134),de=J(7289),D=J(653),M=J(878),S=J(1225),Re=function(){var ke=function(){function v(be,we,ne){(0,_e.Z)(this,v),this.kind=be,this.value=we,this.error=ne,this.hasValue="N"===be}return(0,de.Z)(v,[{key:"observe",value:function(we){switch(this.kind){case"N":return we.next&&we.next(this.value);case"E":return we.error&&we.error(this.error);case"C":return we.complete&&we.complete()}}},{key:"do",value:function(we,ne,Oe){switch(this.kind){case"N":return we&&we(this.value);case"E":return ne&&ne(this.error);case"C":return Oe&&Oe()}}},{key:"accept",value:function(we,ne,Oe){return we&&"function"==typeof we.next?this.observe(we):this.do(we,ne,Oe)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,M.of)(this.value);case"E":return(0,S._)(this.error);case"C":return(0,D.c)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(we){return void 0!==we?new v("N",we):v.undefinedValueNotification}},{key:"createError",value:function(we){return new v("E",void 0,we)}},{key:"createComplete",value:function(){return v.completeNotification}}]),v}();return ke.completeNotification=new ke("C"),ke.undefinedValueNotification=new ke("N",void 0),ke}()},8318:function(rn,mt,J){"use strict";J.d(mt,{y:function(){return Oe}});var _e=J(5134),de=J(7289),D=J(6673),S=J(5331),re=J(7498),ke=J(6197),v=J(3392);function we(fe){return 0===fe.length?v.y:1===fe.length?fe[0]:function(Le){return fe.reduce(function(We,qe){return qe(We)},Le)}}var ne=J(1484),Oe=function(){var fe=function(){function Ae(Le){(0,_e.Z)(this,Ae),this._isScalar=!1,Le&&(this._subscribe=Le)}return(0,de.Z)(Ae,[{key:"lift",value:function(We){var qe=new Ae;return qe.source=this,qe.operator=We,qe}},{key:"subscribe",value:function(We,qe,Be){var st=this.operator,Qe=function(fe,Ae,Le){if(fe){if(fe instanceof D.L)return fe;if(fe[S.b])return fe[S.b]()}return fe||Ae||Le?new D.L(fe,Ae,Le):new D.L(re.c)}(We,qe,Be);if(Qe.add(st?st.call(Qe,this.source):this.source||ne.v.useDeprecatedSynchronousErrorHandling&&!Qe.syncErrorThrowable?this._subscribe(Qe):this._trySubscribe(Qe)),ne.v.useDeprecatedSynchronousErrorHandling&&Qe.syncErrorThrowable&&(Qe.syncErrorThrowable=!1,Qe.syncErrorThrown))throw Qe.syncErrorValue;return Qe}},{key:"_trySubscribe",value:function(We){try{return this._subscribe(We)}catch(qe){ne.v.useDeprecatedSynchronousErrorHandling&&(We.syncErrorThrown=!0,We.syncErrorValue=qe),function(fe){for(;fe;){var We=fe.destination;if(fe.closed||fe.isStopped)return!1;fe=We&&We instanceof D.L?We:null}return!0}(We)?We.error(qe):console.warn(qe)}}},{key:"forEach",value:function(We,qe){var Be=this;return new(qe=Q(qe))(function(st,Qe){var Y;Y=Be.subscribe(function(dn){try{We(dn)}catch(vn){Qe(vn),Y&&Y.unsubscribe()}},Qe,st)})}},{key:"_subscribe",value:function(We){var qe=this.source;return qe&&qe.subscribe(We)}},{key:ke.L,value:function(){return this}},{key:"pipe",value:function(){for(var We=arguments.length,qe=new Array(We),Be=0;Be<We;Be++)qe[Be]=arguments[Be];return 0===qe.length?this:we(qe)(this)}},{key:"toPromise",value:function(We){var qe=this;return new(We=Q(We))(function(Be,st){var Qe;qe.subscribe(function(Y){return Qe=Y},function(Y){return st(Y)},function(){return Be(Qe)})})}}]),Ae}();return fe.create=function(Ae){return new fe(Ae)},fe}();function Q(fe){if(fe||(fe=ne.v.Promise||Promise),!fe)throw new Error("no Promise impl found");return fe}},7498:function(rn,mt,J){"use strict";J.d(mt,{c:function(){return D}});var _e=J(1484),de=J(4294),D={closed:!0,next:function(S){},error:function(S){if(_e.v.useDeprecatedSynchronousErrorHandling)throw S;(0,de.z)(S)},complete:function(){}}},5959:function(rn,mt,J){"use strict";J.d(mt,{Yc:function(){return Oe},xQ:function(){return Q}});var _e=J(7289),de=J(7528),D=J(9187),M=J(5134),S=J(1885),re=J(9727),Re=J(8318),ke=J(6673),v=J(7570),be=J(3895),we=J(9291),ne=J(5331),Oe=function(Ae){(0,S.Z)(We,Ae);var Le=(0,re.Z)(We);function We(qe){var Be;return(0,M.Z)(this,We),(Be=Le.call(this,qe)).destination=qe,Be}return We}(ke.L),Q=function(){var Ae=function(Le){(0,S.Z)(qe,Le);var We=(0,re.Z)(qe);function qe(){var Be;return(0,M.Z)(this,qe),(Be=We.call(this)).observers=[],Be.closed=!1,Be.isStopped=!1,Be.hasError=!1,Be.thrownError=null,Be}return(0,_e.Z)(qe,[{key:ne.b,value:function(){return new Oe(this)}},{key:"lift",value:function(st){var Qe=new fe(this,this);return Qe.operator=st,Qe}},{key:"next",value:function(st){if(this.closed)throw new be.N;if(!this.isStopped)for(var Qe=this.observers,Y=Qe.length,dn=Qe.slice(),vn=0;vn<Y;vn++)dn[vn].next(st)}},{key:"error",value:function(st){if(this.closed)throw new be.N;this.hasError=!0,this.thrownError=st,this.isStopped=!0;for(var Qe=this.observers,Y=Qe.length,dn=Qe.slice(),vn=0;vn<Y;vn++)dn[vn].error(st);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new be.N;this.isStopped=!0;for(var st=this.observers,Qe=st.length,Y=st.slice(),dn=0;dn<Qe;dn++)Y[dn].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(st){if(this.closed)throw new be.N;return(0,de.Z)((0,D.Z)(qe.prototype),"_trySubscribe",this).call(this,st)}},{key:"_subscribe",value:function(st){if(this.closed)throw new be.N;return this.hasError?(st.error(this.thrownError),v.w.EMPTY):this.isStopped?(st.complete(),v.w.EMPTY):(this.observers.push(st),new we.W(this,st))}},{key:"asObservable",value:function(){var st=new Re.y;return st.source=this,st}}]),qe}(Re.y);return Ae.create=function(Le,We){return new fe(Le,We)},Ae}(),fe=function(Ae){(0,S.Z)(We,Ae);var Le=(0,re.Z)(We);function We(qe,Be){var st;return(0,M.Z)(this,We),(st=Le.call(this)).destination=qe,st.source=Be,st}return(0,_e.Z)(We,[{key:"next",value:function(Be){var st=this.destination;st&&st.next&&st.next(Be)}},{key:"error",value:function(Be){var st=this.destination;st&&st.error&&this.destination.error(Be)}},{key:"complete",value:function(){var Be=this.destination;Be&&Be.complete&&this.destination.complete()}},{key:"_subscribe",value:function(Be){return this.source?this.source.subscribe(Be):v.w.EMPTY}}]),We}(Q)},9291:function(rn,mt,J){"use strict";J.d(mt,{W:function(){return re}});var _e=J(5134),de=J(7289),D=J(1885),M=J(9727),re=function(Re){(0,D.Z)(v,Re);var ke=(0,M.Z)(v);function v(be,we){var ne;return(0,_e.Z)(this,v),(ne=ke.call(this)).subject=be,ne.subscriber=we,ne.closed=!1,ne}return(0,de.Z)(v,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var we=this.subject,ne=we.observers;if(this.subject=null,ne&&0!==ne.length&&!we.isStopped&&!we.closed){var Oe=ne.indexOf(this.subscriber);-1!==Oe&&ne.splice(Oe,1)}}}}]),v}(J(7570).w)},6673:function(rn,mt,J){"use strict";J.d(mt,{L:function(){return Q}});var _e=J(5134),de=J(7289),D=J(6518),M=J(7528),S=J(9187),re=J(1885),Re=J(9727),ke=J(5024),v=J(7498),be=J(7570),we=J(5331),ne=J(1484),Oe=J(4294),Q=function(Ae){(0,re.Z)(We,Ae);var Le=(0,Re.Z)(We);function We(qe,Be,st){var Qe;switch((0,_e.Z)(this,We),(Qe=Le.call(this)).syncErrorValue=null,Qe.syncErrorThrown=!1,Qe.syncErrorThrowable=!1,Qe.isStopped=!1,arguments.length){case 0:Qe.destination=v.c;break;case 1:if(!qe){Qe.destination=v.c;break}if("object"==typeof qe){qe instanceof We?(Qe.syncErrorThrowable=qe.syncErrorThrowable,Qe.destination=qe,qe.add((0,D.Z)(Qe))):(Qe.syncErrorThrowable=!0,Qe.destination=new fe((0,D.Z)(Qe),qe));break}default:Qe.syncErrorThrowable=!0,Qe.destination=new fe((0,D.Z)(Qe),qe,Be,st)}return Qe}return(0,de.Z)(We,[{key:we.b,value:function(){return this}},{key:"next",value:function(Be){this.isStopped||this._next(Be)}},{key:"error",value:function(Be){this.isStopped||(this.isStopped=!0,this._error(Be))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,(0,M.Z)((0,S.Z)(We.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(Be){this.destination.next(Be)}},{key:"_error",value:function(Be){this.destination.error(Be),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var Be=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Be,this}}],[{key:"create",value:function(Be,st,Qe){var Y=new We(Be,st,Qe);return Y.syncErrorThrowable=!1,Y}}]),We}(be.w),fe=function(Ae){(0,re.Z)(We,Ae);var Le=(0,Re.Z)(We);function We(qe,Be,st,Qe){var Y;(0,_e.Z)(this,We),(Y=Le.call(this))._parentSubscriber=qe;var dn,vn=(0,D.Z)(Y);return(0,ke.m)(Be)?dn=Be:Be&&(dn=Be.next,st=Be.error,Qe=Be.complete,Be!==v.c&&(vn=Object.create(Be),(0,ke.m)(vn.unsubscribe)&&Y.add(vn.unsubscribe.bind(vn)),vn.unsubscribe=Y.unsubscribe.bind((0,D.Z)(Y)))),Y._context=vn,Y._next=dn,Y._error=st,Y._complete=Qe,Y}return(0,de.Z)(We,[{key:"next",value:function(Be){if(!this.isStopped&&this._next){var st=this._parentSubscriber;ne.v.useDeprecatedSynchronousErrorHandling&&st.syncErrorThrowable?this.__tryOrSetError(st,this._next,Be)&&this.unsubscribe():this.__tryOrUnsub(this._next,Be)}}},{key:"error",value:function(Be){if(!this.isStopped){var st=this._parentSubscriber,Qe=ne.v.useDeprecatedSynchronousErrorHandling;if(this._error)Qe&&st.syncErrorThrowable?(this.__tryOrSetError(st,this._error,Be),this.unsubscribe()):(this.__tryOrUnsub(this._error,Be),this.unsubscribe());else if(st.syncErrorThrowable)Qe?(st.syncErrorValue=Be,st.syncErrorThrown=!0):(0,Oe.z)(Be),this.unsubscribe();else{if(this.unsubscribe(),Qe)throw Be;(0,Oe.z)(Be)}}}},{key:"complete",value:function(){var Be=this;if(!this.isStopped){var st=this._parentSubscriber;if(this._complete){var Qe=function(){return Be._complete.call(Be._context)};ne.v.useDeprecatedSynchronousErrorHandling&&st.syncErrorThrowable?(this.__tryOrSetError(st,Qe),this.unsubscribe()):(this.__tryOrUnsub(Qe),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(Be,st){try{Be.call(this._context,st)}catch(Qe){if(this.unsubscribe(),ne.v.useDeprecatedSynchronousErrorHandling)throw Qe;(0,Oe.z)(Qe)}}},{key:"__tryOrSetError",value:function(Be,st,Qe){if(!ne.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{st.call(this._context,Qe)}catch(Y){return ne.v.useDeprecatedSynchronousErrorHandling?(Be.syncErrorValue=Y,Be.syncErrorThrown=!0,!0):((0,Oe.z)(Y),!0)}return!1}},{key:"_unsubscribe",value:function(){var Be=this._parentSubscriber;this._context=null,this._parentSubscriber=null,Be.unsubscribe()}}]),We}(Q)},7570:function(rn,mt,J){"use strict";J.d(mt,{w:function(){return ke}});var _e=J(5134),de=J(7289),D=J(8470),M=J(2056),S=J(5024),Re=function(){function be(we){return Error.call(this),this.message=we?"".concat(we.length," errors occurred during unsubscription:\n").concat(we.map(function(ne,Oe){return"".concat(Oe+1,") ").concat(ne.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=we,this}return be.prototype=Object.create(Error.prototype),be}(),ke=function(){var we,be=function(){function we(ne){(0,_e.Z)(this,we),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}return(0,de.Z)(we,[{key:"unsubscribe",value:function(){var Oe;if(!this.closed){var Q=this._parentOrParents,fe=this._ctorUnsubscribe,Ae=this._unsubscribe,Le=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Q instanceof we)Q.remove(this);else if(null!==Q)for(var We=0;We<Q.length;++We)Q[We].remove(this);if((0,S.m)(Ae)){fe&&(this._unsubscribe=void 0);try{Ae.call(this)}catch(Y){Oe=Y instanceof Re?v(Y.errors):[Y]}}if((0,D.k)(Le))for(var Be=-1,st=Le.length;++Be<st;){var Qe=Le[Be];if((0,M.K)(Qe))try{Qe.unsubscribe()}catch(Y){Oe=Oe||[],Y instanceof Re?Oe=Oe.concat(v(Y.errors)):Oe.push(Y)}}if(Oe)throw new Re(Oe)}}},{key:"add",value:function(Oe){var Q=Oe;if(!Oe)return we.EMPTY;switch(typeof Oe){case"function":Q=new we(Oe);case"object":if(Q===this||Q.closed||"function"!=typeof Q.unsubscribe)return Q;if(this.closed)return Q.unsubscribe(),Q;if(!(Q instanceof we)){var fe=Q;(Q=new we)._subscriptions=[fe]}break;default:throw new Error("unrecognized teardown "+Oe+" added to Subscription.")}var Le=Q._parentOrParents;if(null===Le)Q._parentOrParents=this;else if(Le instanceof we){if(Le===this)return Q;Q._parentOrParents=[Le,this]}else{if(-1!==Le.indexOf(this))return Q;Le.push(this)}var We=this._subscriptions;return null===We?this._subscriptions=[Q]:We.push(Q),Q}},{key:"remove",value:function(Oe){var Q=this._subscriptions;if(Q){var fe=Q.indexOf(Oe);-1!==fe&&Q.splice(fe,1)}}}]),we}();return be.EMPTY=((we=new be).closed=!0,we),be}();function v(be){return be.reduce(function(we,ne){return we.concat(ne instanceof Re?ne.errors:ne)},[])}},1484:function(rn,mt,J){"use strict";J.d(mt,{v:function(){return de}});var _e=!1,de={Promise:void 0,set useDeprecatedSynchronousErrorHandling(D){if(D){var M=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+M.stack)}else _e&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_e=D},get useDeprecatedSynchronousErrorHandling(){return _e}}},6882:function(rn,mt,J){"use strict";J.d(mt,{IY:function(){return ke},Ds:function(){return be},ft:function(){return ne}});var _e=J(5134),de=J(7289),D=J(1885),M=J(9727),S=J(6673),re=J(8318),Re=J(6015),ke=function(Oe){(0,D.Z)(fe,Oe);var Q=(0,M.Z)(fe);function fe(Ae){var Le;return(0,_e.Z)(this,fe),(Le=Q.call(this)).parent=Ae,Le}return(0,de.Z)(fe,[{key:"_next",value:function(Le){this.parent.notifyNext(Le)}},{key:"_error",value:function(Le){this.parent.notifyError(Le),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),fe}(S.L),be=function(Oe){(0,D.Z)(fe,Oe);var Q=(0,M.Z)(fe);function fe(){return(0,_e.Z)(this,fe),Q.apply(this,arguments)}return(0,de.Z)(fe,[{key:"notifyNext",value:function(Le){this.destination.next(Le)}},{key:"notifyError",value:function(Le){this.destination.error(Le)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),fe}(S.L);function ne(Oe,Q){if(!Q.closed){if(Oe instanceof re.y)return Oe.subscribe(Q);var fe;try{fe=(0,Re.s)(Oe)(Q)}catch(Ae){Q.error(Ae)}return fe}}},2875:function(rn,mt,J){"use strict";J.d(mt,{c:function(){return ne},N:function(){return Oe}});var _e=J(7528),de=J(9187),D=J(5134),M=J(7289),S=J(1885),re=J(9727),Re=J(5959),ke=J(8318),be=(J(6673),J(7570)),we=J(1564),ne=function(Le){(0,S.Z)(qe,Le);var We=(0,re.Z)(qe);function qe(Be,st){var Qe;return(0,D.Z)(this,qe),(Qe=We.call(this)).source=Be,Qe.subjectFactory=st,Qe._refCount=0,Qe._isComplete=!1,Qe}return(0,M.Z)(qe,[{key:"_subscribe",value:function(st){return this.getSubject().subscribe(st)}},{key:"getSubject",value:function(){var st=this._subject;return(!st||st.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var st=this._connection;return st||(this._isComplete=!1,(st=this._connection=new be.w).add(this.source.subscribe(new Q(this.getSubject(),this))),st.closed&&(this._connection=null,st=be.w.EMPTY)),st}},{key:"refCount",value:function(){return(0,we.x)()(this)}}]),qe}(ke.y),Oe=function(){var Le=ne.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Le._subscribe},_isComplete:{value:Le._isComplete,writable:!0},getSubject:{value:Le.getSubject},connect:{value:Le.connect},refCount:{value:Le.refCount}}}(),Q=function(Le){(0,S.Z)(qe,Le);var We=(0,re.Z)(qe);function qe(Be,st){var Qe;return(0,D.Z)(this,qe),(Qe=We.call(this,Be)).connectable=st,Qe}return(0,M.Z)(qe,[{key:"_error",value:function(st){this._unsubscribe(),(0,_e.Z)((0,de.Z)(qe.prototype),"_error",this).call(this,st)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),(0,_e.Z)((0,de.Z)(qe.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var st=this.connectable;if(st){this.connectable=null;var Qe=st._connection;st._refCount=0,st._subject=null,st._connection=null,Qe&&Qe.unsubscribe()}}}]),qe}(Re.Yc)},653:function(rn,mt,J){"use strict";J.d(mt,{E:function(){return de},c:function(){return D}});var _e=J(8318),de=new _e.y(function(S){return S.complete()});function D(S){return S?function(S){return new _e.y(function(re){return S.schedule(function(){return re.complete()})})}(S):de}},9764:function(rn,mt,J){"use strict";J.d(mt,{D:function(){return fe}});var _e=J(8318),de=J(6015),D=J(7570),M=J(6197),Re=J(2570),ke=J(5686),we=J(5168),ne=J(9653);function fe(Ae,Le){return Le?function(Ae,Le){if(null!=Ae){if(function(Ae){return Ae&&"function"==typeof Ae[M.L]}(Ae))return function(Ae,Le){return new _e.y(function(We){var qe=new D.w;return qe.add(Le.schedule(function(){var Be=Ae[M.L]();qe.add(Be.subscribe({next:function(Qe){qe.add(Le.schedule(function(){return We.next(Qe)}))},error:function(Qe){qe.add(Le.schedule(function(){return We.error(Qe)}))},complete:function(){qe.add(Le.schedule(function(){return We.complete()}))}}))})),qe})}(Ae,Le);if((0,we.t)(Ae))return function(Ae,Le){return new _e.y(function(We){var qe=new D.w;return qe.add(Le.schedule(function(){return Ae.then(function(Be){qe.add(Le.schedule(function(){We.next(Be),qe.add(Le.schedule(function(){return We.complete()}))}))},function(Be){qe.add(Le.schedule(function(){return We.error(Be)}))})})),qe})}(Ae,Le);if((0,ne.z)(Ae))return(0,Re.r)(Ae,Le);if(function(Ae){return Ae&&"function"==typeof Ae[ke.hZ]}(Ae)||"string"==typeof Ae)return function(Ae,Le){if(!Ae)throw new Error("Iterable cannot be null");return new _e.y(function(We){var Be,qe=new D.w;return qe.add(function(){Be&&"function"==typeof Be.return&&Be.return()}),qe.add(Le.schedule(function(){Be=Ae[ke.hZ](),qe.add(Le.schedule(function(){if(!We.closed){var st,Qe;try{var Y=Be.next();st=Y.value,Qe=Y.done}catch(dn){return void We.error(dn)}Qe?We.complete():(We.next(st),this.schedule())}}))})),qe})}(Ae,Le)}throw new TypeError((null!==Ae&&typeof Ae||Ae)+" is not observable")}(Ae,Le):Ae instanceof _e.y?Ae:new _e.y((0,de.s)(Ae))}},9342:function(rn,mt,J){"use strict";J.d(mt,{n:function(){return M}});var _e=J(8318),de=J(625),D=J(2570);function M(S,re){return re?(0,D.r)(S,re):new _e.y((0,de.V)(S))}},1906:function(rn,mt,J){"use strict";J.d(mt,{T:function(){return S}});var _e=J(8318),de=J(6163),D=J(7471),M=J(9342);function S(){for(var re=Number.POSITIVE_INFINITY,Re=null,ke=arguments.length,v=new Array(ke),be=0;be<ke;be++)v[be]=arguments[be];var we=v[v.length-1];return(0,de.K)(we)?(Re=v.pop(),v.length>1&&"number"==typeof v[v.length-1]&&(re=v.pop())):"number"==typeof we&&(re=v.pop()),null===Re&&1===v.length&&v[0]instanceof _e.y?v[0]:(0,D.J)(re)((0,M.n)(v,Re))}},878:function(rn,mt,J){"use strict";J.d(mt,{of:function(){return M}});var _e=J(6163),de=J(9342),D=J(2570);function M(){for(var S=arguments.length,re=new Array(S),Re=0;Re<S;Re++)re[Re]=arguments[Re];var ke=re[re.length-1];return(0,_e.K)(ke)?(re.pop(),(0,D.r)(re,ke)):(0,de.n)(re)}},1225:function(rn,mt,J){"use strict";J.d(mt,{_:function(){return de}});var _e=J(8318);function de(M,S){return new _e.y(S?function(re){return S.schedule(D,0,{error:M,subscriber:re})}:function(re){return re.error(M)})}function D(M){M.subscriber.error(M.error)}},9996:function(rn,mt,J){"use strict";J.d(mt,{U:function(){return Re}});var _e=J(6518),de=J(1885),D=J(9727),M=J(5134),S=J(7289),re=J(6673);function Re(be,we){return function(Oe){if("function"!=typeof be)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Oe.lift(new ke(be,we))}}var ke=function(){function be(we,ne){(0,M.Z)(this,be),this.project=we,this.thisArg=ne}return(0,S.Z)(be,[{key:"call",value:function(ne,Oe){return Oe.subscribe(new v(ne,this.project,this.thisArg))}}]),be}(),v=function(be){(0,de.Z)(ne,be);var we=(0,D.Z)(ne);function ne(Oe,Q,fe){var Ae;return(0,M.Z)(this,ne),(Ae=we.call(this,Oe)).project=Q,Ae.count=0,Ae.thisArg=fe||(0,_e.Z)(Ae),Ae}return(0,S.Z)(ne,[{key:"_next",value:function(Q){var fe;try{fe=this.project.call(this.thisArg,Q,this.count++)}catch(Ae){return void this.destination.error(Ae)}this.destination.next(fe)}}]),ne}(re.L)},7471:function(rn,mt,J){"use strict";J.d(mt,{J:function(){return D}});var _e=J(3982),de=J(3392);function D(){var M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,_e.zg)(de.y,M)}},3982:function(rn,mt,J){"use strict";J.d(mt,{zg:function(){return ke}});var _e=J(1885),de=J(9727),D=J(5134),M=J(7289),S=J(9996),re=J(9764),Re=J(6882);function ke(ne,Oe){var Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof Oe?function(fe){return fe.pipe(ke(function(Ae,Le){return(0,re.D)(ne(Ae,Le)).pipe((0,S.U)(function(We,qe){return Oe(Ae,We,Le,qe)}))},Q))}:("number"==typeof Oe&&(Q=Oe),function(fe){return fe.lift(new v(ne,Q))})}var v=function(){function ne(Oe){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;(0,D.Z)(this,ne),this.project=Oe,this.concurrent=Q}return(0,M.Z)(ne,[{key:"call",value:function(Q,fe){return fe.subscribe(new be(Q,this.project,this.concurrent))}}]),ne}(),be=function(ne){(0,_e.Z)(Q,ne);var Oe=(0,de.Z)(Q);function Q(fe,Ae){var Le,We=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return(0,D.Z)(this,Q),(Le=Oe.call(this,fe)).project=Ae,Le.concurrent=We,Le.hasCompleted=!1,Le.buffer=[],Le.active=0,Le.index=0,Le}return(0,M.Z)(Q,[{key:"_next",value:function(Ae){this.active<this.concurrent?this._tryNext(Ae):this.buffer.push(Ae)}},{key:"_tryNext",value:function(Ae){var Le,We=this.index++;try{Le=this.project(Ae,We)}catch(qe){return void this.destination.error(qe)}this.active++,this._innerSub(Le)}},{key:"_innerSub",value:function(Ae){var Le=new Re.IY(this),We=this.destination;We.add(Le);var qe=(0,Re.ft)(Ae,Le);qe!==Le&&We.add(qe)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(Ae){this.destination.next(Ae)}},{key:"notifyComplete",value:function(){var Ae=this.buffer;this.active--,Ae.length>0?this._next(Ae.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),Q}(Re.Ds)},45:function(rn,mt,J){"use strict";J.d(mt,{QV:function(){return Re},ht:function(){return v}});var _e=J(1885),de=J(9727),D=J(5134),M=J(7289),S=J(6673),re=J(3103);function Re(we){var ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(Q){return Q.lift(new ke(we,ne))}}var ke=function(){function we(ne){var Oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,D.Z)(this,we),this.scheduler=ne,this.delay=Oe}return(0,M.Z)(we,[{key:"call",value:function(Oe,Q){return Q.subscribe(new v(Oe,this.scheduler,this.delay))}}]),we}(),v=function(we){(0,_e.Z)(Oe,we);var ne=(0,de.Z)(Oe);function Oe(Q,fe){var Ae,Le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,D.Z)(this,Oe),(Ae=ne.call(this,Q)).scheduler=fe,Ae.delay=Le,Ae}return(0,M.Z)(Oe,[{key:"scheduleMessage",value:function(fe){this.destination.add(this.scheduler.schedule(Oe.dispatch,this.delay,new be(fe,this.destination)))}},{key:"_next",value:function(fe){this.scheduleMessage(re.P.createNext(fe))}},{key:"_error",value:function(fe){this.scheduleMessage(re.P.createError(fe)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(re.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(fe){fe.notification.observe(fe.destination),this.unsubscribe()}}]),Oe}(S.L),be=function we(ne,Oe){(0,D.Z)(this,we),this.notification=ne,this.destination=Oe}},1564:function(rn,mt,J){"use strict";J.d(mt,{x:function(){return re}});var _e=J(1885),de=J(9727),D=J(5134),M=J(7289),S=J(6673);function re(){return function(be){return be.lift(new Re(be))}}var Re=function(){function v(be){(0,D.Z)(this,v),this.connectable=be}return(0,M.Z)(v,[{key:"call",value:function(we,ne){var Oe=this.connectable;Oe._refCount++;var Q=new ke(we,Oe),fe=ne.subscribe(Q);return Q.closed||(Q.connection=Oe.connect()),fe}}]),v}(),ke=function(v){(0,_e.Z)(we,v);var be=(0,de.Z)(we);function we(ne,Oe){var Q;return(0,D.Z)(this,we),(Q=be.call(this,ne)).connectable=Oe,Q}return(0,M.Z)(we,[{key:"_unsubscribe",value:function(){var Oe=this.connectable;if(Oe){this.connectable=null;var Q=Oe._refCount;if(Q<=0)this.connection=null;else if(Oe._refCount=Q-1,Q>1)this.connection=null;else{var fe=this.connection,Ae=Oe._connection;this.connection=null,Ae&&(!fe||Ae===fe)&&Ae.unsubscribe()}}else this.connection=null}}]),we}(S.L)},1055:function(rn,mt,J){"use strict";J.d(mt,{B:function(){return v}});J(5134),J(7289);var D=J(2875),re=J(1564),Re=J(5959);function ke(){return new Re.xQ}function v(){return function(be){return(0,re.x)()(function(be,we){return function(Oe){var Q;Q="function"==typeof be?be:function(){return be};var fe=Object.create(Oe,D.N);return fe.source=Oe,fe.subjectFactory=Q,fe}}(ke)(be))}}},3482:function(rn,mt,J){"use strict";J.d(mt,{R:function(){return v}});var _e=J(5134),de=J(7289),D=J(1885),M=J(9727),S=J(8318),re=J(2709),Re=J(2293),ke=function(we){(0,D.Z)(Oe,we);var ne=(0,M.Z)(Oe);function Oe(Q){var fe,Ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re.e;return(0,_e.Z)(this,Oe),(fe=ne.call(this)).source=Q,fe.delayTime=Ae,fe.scheduler=Le,(!(0,Re.k)(Ae)||Ae<0)&&(fe.delayTime=0),(!Le||"function"!=typeof Le.schedule)&&(fe.scheduler=re.e),fe}return(0,de.Z)(Oe,[{key:"_subscribe",value:function(fe){return this.scheduler.schedule(Oe.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}],[{key:"create",value:function(fe){var Ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:re.e;return new Oe(fe,Ae,Le)}},{key:"dispatch",value:function(fe){return this.add(fe.source.subscribe(fe.subscriber))}}]),Oe}(S.y);function v(we){var ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(Q){return Q.lift(new be(we,ne))}}var be=function(){function we(ne,Oe){(0,_e.Z)(this,we),this.scheduler=ne,this.delay=Oe}return(0,de.Z)(we,[{key:"call",value:function(Oe,Q){return new ke(Q,this.delay,this.scheduler).subscribe(Oe)}}]),we}()},6599:function(rn,mt,J){"use strict";J.d(mt,{b:function(){return v}});var _e=J(6518),de=J(1885),D=J(9727),M=J(5134),S=J(7289),re=J(6673);function Re(){}var ke=J(5024);function v(ne,Oe,Q){return function(Ae){return Ae.lift(new be(ne,Oe,Q))}}var be=function(){function ne(Oe,Q,fe){(0,M.Z)(this,ne),this.nextOrObserver=Oe,this.error=Q,this.complete=fe}return(0,S.Z)(ne,[{key:"call",value:function(Q,fe){return fe.subscribe(new we(Q,this.nextOrObserver,this.error,this.complete))}}]),ne}(),we=function(ne){(0,de.Z)(Q,ne);var Oe=(0,D.Z)(Q);function Q(fe,Ae,Le,We){var qe;return(0,M.Z)(this,Q),(qe=Oe.call(this,fe))._tapNext=Re,qe._tapError=Re,qe._tapComplete=Re,qe._tapError=Le||Re,qe._tapComplete=We||Re,(0,ke.m)(Ae)?(qe._context=(0,_e.Z)(qe),qe._tapNext=Ae):Ae&&(qe._context=Ae,qe._tapNext=Ae.next||Re,qe._tapError=Ae.error||Re,qe._tapComplete=Ae.complete||Re),qe}return(0,S.Z)(Q,[{key:"_next",value:function(Ae){try{this._tapNext.call(this._context,Ae)}catch(Le){return void this.destination.error(Le)}this.destination.next(Ae)}},{key:"_error",value:function(Ae){try{this._tapError.call(this._context,Ae)}catch(Le){return void this.destination.error(Le)}this.destination.error(Ae)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(Ae){return void this.destination.error(Ae)}return this.destination.complete()}}]),Q}(re.L)},2570:function(rn,mt,J){"use strict";J.d(mt,{r:function(){return D}});var _e=J(8318),de=J(7570);function D(M,S){return new _e.y(function(re){var Re=new de.w,ke=0;return Re.add(S.schedule(function(){ke!==M.length?(re.next(M[ke++]),re.closed||Re.add(this.schedule())):re.complete()})),Re})}},8277:function(rn,mt,J){"use strict";J.d(mt,{o:function(){return Re}});var _e=J(5134),de=J(7289),D=J(1885),M=J(9727),Re=function(ke){(0,D.Z)(be,ke);var v=(0,M.Z)(be);function be(we,ne){var Oe;return(0,_e.Z)(this,be),(Oe=v.call(this,we,ne)).scheduler=we,Oe.work=ne,Oe.pending=!1,Oe}return(0,de.Z)(be,[{key:"schedule",value:function(ne){var Oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=ne;var Q=this.id,fe=this.scheduler;return null!=Q&&(this.id=this.recycleAsyncId(fe,Q,Oe)),this.pending=!0,this.delay=Oe,this.id=this.id||this.requestAsyncId(fe,this.id,Oe),this}},{key:"requestAsyncId",value:function(ne,Oe){var Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(ne.flush.bind(ne,this),Q)}},{key:"recycleAsyncId",value:function(ne,Oe){var Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==Q&&this.delay===Q&&!1===this.pending)return Oe;clearInterval(Oe)}},{key:"execute",value:function(ne,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var Q=this._execute(ne,Oe);if(Q)return Q;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(ne,Oe){var Q=!1,fe=void 0;try{this.work(ne)}catch(Ae){Q=!0,fe=!!Ae&&Ae||new Error(Ae)}if(Q)return this.unsubscribe(),fe}},{key:"_unsubscribe",value:function(){var ne=this.id,Oe=this.scheduler,Q=Oe.actions,fe=Q.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==fe&&Q.splice(fe,1),null!=ne&&(this.id=this.recycleAsyncId(Oe,ne,null)),this.delay=null}}]),be}(function(ke){(0,D.Z)(be,ke);var v=(0,M.Z)(be);function be(we,ne){return(0,_e.Z)(this,be),v.call(this)}return(0,de.Z)(be,[{key:"schedule",value:function(ne){return this}}]),be}(J(7570).w))},1098:function(rn,mt,J){"use strict";J.d(mt,{v:function(){return v}});var _e=J(5134),de=J(7289),D=J(6518),M=J(7528),S=J(9187),re=J(1885),Re=J(9727),ke=function(){var be=function(){function we(ne){var Oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:we.now;(0,_e.Z)(this,we),this.SchedulerAction=ne,this.now=Oe}return(0,de.Z)(we,[{key:"schedule",value:function(Oe){var Q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,fe=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,Oe).schedule(fe,Q)}}]),we}();return be.now=function(){return Date.now()},be}(),v=function(be){(0,re.Z)(ne,be);var we=(0,Re.Z)(ne);function ne(Oe){var Q,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke.now;return(0,_e.Z)(this,ne),(Q=we.call(this,Oe,function(){return ne.delegate&&ne.delegate!==(0,D.Z)(Q)?ne.delegate.now():fe()})).actions=[],Q.active=!1,Q.scheduled=void 0,Q}return(0,de.Z)(ne,[{key:"schedule",value:function(Q){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Ae=arguments.length>2?arguments[2]:void 0;return ne.delegate&&ne.delegate!==this?ne.delegate.schedule(Q,fe,Ae):(0,M.Z)((0,S.Z)(ne.prototype),"schedule",this).call(this,Q,fe,Ae)}},{key:"flush",value:function(Q){var fe=this.actions;if(this.active)fe.push(Q);else{var Ae;this.active=!0;do{if(Ae=Q.execute(Q.state,Q.delay))break}while(Q=fe.shift());if(this.active=!1,Ae){for(;Q=fe.shift();)Q.unsubscribe();throw Ae}}}}]),ne}(ke)},2709:function(rn,mt,J){"use strict";J.d(mt,{e:function(){return We},E:function(){return Le}});var _e=J(5134),de=J(7289),D=J(7528),M=J(9187),S=J(1885),re=J(9727),Re=1,ke=function(){return Promise.resolve()}(),v={};function be(qe){return qe in v&&(delete v[qe],!0)}var we_setImmediate=function(Be){var st=Re++;return v[st]=!0,ke.then(function(){return be(st)&&Be()}),st},we_clearImmediate=function(Be){be(Be)},Q=function(qe){(0,S.Z)(st,qe);var Be=(0,re.Z)(st);function st(Qe,Y){var dn;return(0,_e.Z)(this,st),(dn=Be.call(this,Qe,Y)).scheduler=Qe,dn.work=Y,dn}return(0,de.Z)(st,[{key:"requestAsyncId",value:function(Y,dn){var vn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==vn&&vn>0?(0,D.Z)((0,M.Z)(st.prototype),"requestAsyncId",this).call(this,Y,dn,vn):(Y.actions.push(this),Y.scheduled||(Y.scheduled=we_setImmediate(Y.flush.bind(Y,null))))}},{key:"recycleAsyncId",value:function(Y,dn){var vn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==vn&&vn>0||null===vn&&this.delay>0)return(0,D.Z)((0,M.Z)(st.prototype),"recycleAsyncId",this).call(this,Y,dn,vn);0===Y.actions.length&&(we_clearImmediate(dn),Y.scheduled=void 0)}}]),st}(J(8277).o),Le=new(function(qe){(0,S.Z)(st,qe);var Be=(0,re.Z)(st);function st(){return(0,_e.Z)(this,st),Be.apply(this,arguments)}return(0,de.Z)(st,[{key:"flush",value:function(Y){this.active=!0,this.scheduled=void 0;var vn,dn=this.actions,nn=-1,xt=dn.length;Y=Y||dn.shift();do{if(vn=Y.execute(Y.state,Y.delay))break}while(++nn<xt&&(Y=dn.shift()));if(this.active=!1,vn){for(;++nn<xt&&(Y=dn.shift());)Y.unsubscribe();throw vn}}}]),st}(J(1098).v))(Q),We=Le},8569:function(rn,mt,J){"use strict";J.d(mt,{z:function(){return D},P:function(){return M}});var _e=J(8277),D=new(J(1098).v)(_e.o),M=D},8489:function(rn,mt,J){"use strict";J.d(mt,{c:function(){return ne},N:function(){return we}});var _e=J(5134),de=J(7289),D=J(7528),M=J(9187),S=J(1885),re=J(9727),ke=function(Oe){(0,S.Z)(fe,Oe);var Q=(0,re.Z)(fe);function fe(Ae,Le){var We;return(0,_e.Z)(this,fe),(We=Q.call(this,Ae,Le)).scheduler=Ae,We.work=Le,We}return(0,de.Z)(fe,[{key:"schedule",value:function(Le){var We=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return We>0?(0,D.Z)((0,M.Z)(fe.prototype),"schedule",this).call(this,Le,We):(this.delay=We,this.state=Le,this.scheduler.flush(this),this)}},{key:"execute",value:function(Le,We){return We>0||this.closed?(0,D.Z)((0,M.Z)(fe.prototype),"execute",this).call(this,Le,We):this._execute(Le,We)}},{key:"requestAsyncId",value:function(Le,We){var qe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==qe&&qe>0||null===qe&&this.delay>0?(0,D.Z)((0,M.Z)(fe.prototype),"requestAsyncId",this).call(this,Le,We,qe):Le.flush(this)}}]),fe}(J(8277).o),we=new(function(Oe){(0,S.Z)(fe,Oe);var Q=(0,re.Z)(fe);function fe(){return(0,_e.Z)(this,fe),Q.apply(this,arguments)}return fe}(J(1098).v))(ke),ne=we},5686:function(rn,mt,J){"use strict";function _e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}J.d(mt,{hZ:function(){return de}});var de=_e()},6197:function(rn,mt,J){"use strict";J.d(mt,{L:function(){return _e}});var _e=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},5331:function(rn,mt,J){"use strict";J.d(mt,{b:function(){return _e}});var _e=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},3895:function(rn,mt,J){"use strict";J.d(mt,{N:function(){return de}});var de=function(){function D(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return D.prototype=Object.create(Error.prototype),D}()},4294:function(rn,mt,J){"use strict";function _e(de){setTimeout(function(){throw de},0)}J.d(mt,{z:function(){return _e}})},3392:function(rn,mt,J){"use strict";function _e(de){return de}J.d(mt,{y:function(){return _e}})},8470:function(rn,mt,J){"use strict";J.d(mt,{k:function(){return _e}});var _e=function(){return Array.isArray||function(de){return de&&"number"==typeof de.length}}()},9653:function(rn,mt,J){"use strict";J.d(mt,{z:function(){return _e}});var _e=function(D){return D&&"number"==typeof D.length&&"function"!=typeof D}},5024:function(rn,mt,J){"use strict";function _e(de){return"function"==typeof de}J.d(mt,{m:function(){return _e}})},2293:function(rn,mt,J){"use strict";J.d(mt,{k:function(){return de}});var _e=J(8470);function de(D){return!(0,_e.k)(D)&&D-parseFloat(D)+1>=0}},2056:function(rn,mt,J){"use strict";function _e(de){return null!==de&&"object"==typeof de}J.d(mt,{K:function(){return _e}})},5168:function(rn,mt,J){"use strict";function _e(de){return!!de&&"function"!=typeof de.subscribe&&"function"==typeof de.then}J.d(mt,{t:function(){return _e}})},6163:function(rn,mt,J){"use strict";function _e(de){return de&&"function"==typeof de.schedule}J.d(mt,{K:function(){return _e}})},6015:function(rn,mt,J){"use strict";J.d(mt,{s:function(){return we}});var _e=J(625),de=J(4294),M=J(5686),re=J(6197),ke=J(9653),v=J(5168),be=J(2056),we=function(Oe){if(Oe&&"function"==typeof Oe[re.L])return function(Oe){return function(Q){var fe=Oe[re.L]();if("function"!=typeof fe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return fe.subscribe(Q)}}(Oe);if((0,ke.z)(Oe))return(0,_e.V)(Oe);if((0,v.t)(Oe))return function(Oe){return function(Q){return Oe.then(function(fe){Q.closed||(Q.next(fe),Q.complete())},function(fe){return Q.error(fe)}).then(null,de.z),Q}}(Oe);if(Oe&&"function"==typeof Oe[M.hZ])return function(Oe){return function(Q){for(var fe=Oe[M.hZ]();;){var Ae=void 0;try{Ae=fe.next()}catch(Le){return Q.error(Le),Q}if(Ae.done){Q.complete();break}if(Q.next(Ae.value),Q.closed)break}return"function"==typeof fe.return&&Q.add(function(){fe.return&&fe.return()}),Q}}(Oe);var Q=(0,be.K)(Oe)?"an invalid object":"'".concat(Oe,"'"),fe="You provided ".concat(Q," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(fe)}},625:function(rn,mt,J){"use strict";J.d(mt,{V:function(){return _e}});var _e=function(D){return function(M){for(var S=0,re=D.length;S<re&&!M.closed;S++)M.next(D[S]);M.complete()}}},3124:function(rn,mt,J){var _e,de;de="undefined"!=typeof window?window:this,void 0!==(_e=function(){return function(de,D){var S=(void 0!==this?this:de).SVG=function(z){if(S.supported)return z=new S.Doc(z),S.parser.draw||S.prepare(),z};if(S.ns="http://www.w3.org/2000/svg",S.xmlns="http://www.w3.org/2000/xmlns/",S.xlink="http://www.w3.org/1999/xlink",S.svgjs="http://svgjs.com/svgjs",S.supported=!!D.createElementNS&&!!D.createElementNS(S.ns,"svg").createSVGRect,!S.supported)return!1;S.did=1e3,S.eid=function(z){return"Svgjs"+Ae(z)+S.did++},S.create=function(z){var k=D.createElementNS(this.ns,z);return k.setAttribute("id",this.eid(z)),k},S.extend=function(){var z,k,B,X;for(k=(z=[].slice.call(arguments)).pop(),X=z.length-1;X>=0;X--)if(z[X])for(B in k)z[X].prototype[B]=k[B];S.Set&&S.Set.inherit&&S.Set.inherit()},S.invent=function(z){var k="function"==typeof z.create?z.create:function(){this.constructor.call(this,S.create(z.create))};return z.inherit&&(k.prototype=new z.inherit),z.extend&&S.extend(k,z.extend),z.construct&&S.extend(z.parent||S.Container,z.construct),k},S.adopt=function(z){return z?z.instance?z.instance:((k="svg"==z.nodeName?z.parentNode instanceof de.SVGElement?new S.Nested:new S.Doc:"linearGradient"==z.nodeName?new S.Gradient("linear"):"radialGradient"==z.nodeName?new S.Gradient("radial"):S[Ae(z.nodeName)]?new(S[Ae(z.nodeName)]):new S.Element(z)).type=z.nodeName,k.node=z,z.instance=k,k instanceof S.Doc&&k.namespace().defs(),k.setData(JSON.parse(z.getAttribute("svgjs:data"))||{}),k):null;var k},S.prepare=function(){var z=D.getElementsByTagName("body")[0],k=(z?new S.Doc(z):S.adopt(D.documentElement).nested()).size(2,0);S.parser={body:z||D.documentElement,draw:k.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:k.polyline().node,path:k.path().node,native:S.create("svg")}},S.parser={native:S.create("svg")},D.addEventListener("DOMContentLoaded",function(){S.parser.draw||S.prepare()},!1),S.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},S.utils={map:function(k,B){var X,ge=k.length,Ie=[];for(X=0;X<ge;X++)Ie.push(B(k[X]));return Ie},filter:function(k,B){var X,ge=k.length,Ie=[];for(X=0;X<ge;X++)B(k[X])&&Ie.push(k[X]);return Ie},radians:function(k){return k%360*Math.PI/180},degrees:function(k){return 180*k/Math.PI%360},filterSVGElements:function(k){return this.filter(k,function(B){return B instanceof de.SVGElement})}},S.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},S.Color=function(z){var k;this.r=0,this.g=0,this.b=0,z&&("string"==typeof z?S.regex.isRgb.test(z)?(k=S.regex.rgb.exec(z.replace(S.regex.whitespace,"")),this.r=parseInt(k[1]),this.g=parseInt(k[2]),this.b=parseInt(k[3])):S.regex.isHex.test(z)&&(k=S.regex.hex.exec(function(z){return 4==z.length?["#",z.substring(1,2),z.substring(1,2),z.substring(2,3),z.substring(2,3),z.substring(3,4),z.substring(3,4)].join(""):z}(z)),this.r=parseInt(k[1],16),this.g=parseInt(k[2],16),this.b=parseInt(k[3],16)):"object"==typeof z&&(this.r=z.r,this.g=z.g,this.b=z.b))},S.extend(S.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+We(this.r)+We(this.g)+We(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(k){return this.destination=new S.Color(k),this},at:function(k){return this.destination?new S.Color({r:~~(this.r+(this.destination.r-this.r)*(k=k<0?0:k>1?1:k)),g:~~(this.g+(this.destination.g-this.g)*k),b:~~(this.b+(this.destination.b-this.b)*k)}):this}}),S.Color.test=function(z){return S.regex.isHex.test(z+="")||S.regex.isRgb.test(z)},S.Color.isRgb=function(z){return z&&"number"==typeof z.r&&"number"==typeof z.g&&"number"==typeof z.b},S.Color.isColor=function(z){return S.Color.isRgb(z)||S.Color.test(z)},S.Array=function(z,k){0==(z=(z||[]).valueOf()).length&&k&&(z=k.valueOf()),this.value=this.parse(z)},S.extend(S.Array,{morph:function(k){if(this.destination=this.parse(k),this.value.length!=this.destination.length){for(var B=this.value[this.value.length-1],X=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(X);for(;this.value.length<this.destination.length;)this.value.push(B)}return this},settle:function(){for(var k=0,B=this.value.length,X=[];k<B;k++)-1==X.indexOf(this.value[k])&&X.push(this.value[k]);return this.value=X},at:function(k){if(!this.destination)return this;for(var B=0,X=this.value.length,ge=[];B<X;B++)ge.push(this.value[B]+(this.destination[B]-this.value[B])*k);return new S.Array(ge)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(k){return k=k.valueOf(),Array.isArray(k)?k:this.split(k)},split:function(k){return k.trim().split(S.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var k=new this.constructor;return k.value=ne(this.value),k}}),S.PointArray=function(z,k){S.Array.call(this,z,k||[[0,0]])},S.PointArray.prototype=new S.Array,S.PointArray.prototype.constructor=S.PointArray,S.extend(S.PointArray,{toString:function(){for(var k=0,B=this.value.length,X=[];k<B;k++)X.push(this.value[k].join(","));return X.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(k){if(!this.destination)return this;for(var B=0,X=this.value.length,ge=[];B<X;B++)ge.push([this.value[B][0]+(this.destination[B][0]-this.value[B][0])*k,this.value[B][1]+(this.destination[B][1]-this.value[B][1])*k]);return new S.PointArray(ge)},parse:function(k){var B=[];if(k=k.valueOf(),Array.isArray(k)){if(Array.isArray(k[0]))return k.map(function(Ie){return Ie.slice()});if(null!=k[0].x)return k.map(function(Ie){return[Ie.x,Ie.y]})}else k=k.trim().split(S.regex.delimiter).map(parseFloat);k.length%2!=0&&k.pop();for(var X=0,ge=k.length;X<ge;X+=2)B.push([k[X],k[X+1]]);return B},move:function(k,B){var X=this.bbox();if(k-=X.x,B-=X.y,!isNaN(k)&&!isNaN(B))for(var ge=this.value.length-1;ge>=0;ge--)this.value[ge]=[this.value[ge][0]+k,this.value[ge][1]+B];return this},size:function(k,B){var X,ge=this.bbox();for(X=this.value.length-1;X>=0;X--)ge.width&&(this.value[X][0]=(this.value[X][0]-ge.x)*k/ge.width+ge.x),ge.height&&(this.value[X][1]=(this.value[X][1]-ge.y)*B/ge.height+ge.y);return this},bbox:function(){return S.parser.poly.setAttribute("points",this.toString()),S.parser.poly.getBBox()}});for(var re={M:function(k,B,X){return B.x=X.x=k[0],B.y=X.y=k[1],["M",B.x,B.y]},L:function(k,B){return B.x=k[0],B.y=k[1],["L",k[0],k[1]]},H:function(k,B){return B.x=k[0],["H",k[0]]},V:function(k,B){return B.y=k[0],["V",k[0]]},C:function(k,B){return B.x=k[4],B.y=k[5],["C",k[0],k[1],k[2],k[3],k[4],k[5]]},S:function(k,B){return B.x=k[2],B.y=k[3],["S",k[0],k[1],k[2],k[3]]},Q:function(k,B){return B.x=k[2],B.y=k[3],["Q",k[0],k[1],k[2],k[3]]},T:function(k,B){return B.x=k[0],B.y=k[1],["T",k[0],k[1]]},Z:function(k,B,X){return B.x=X.x,B.y=X.y,["Z"]},A:function(k,B){return B.x=k[5],B.y=k[6],["A",k[0],k[1],k[2],k[3],k[4],k[5],k[6]]}},Re="mlhvqtcsaz".split(""),ke=0,v=Re.length;ke<v;++ke)re[Re[ke]]=function(z){return function(k,B,X){if("H"==z)k[0]=k[0]+B.x;else if("V"==z)k[0]=k[0]+B.y;else if("A"==z)k[5]=k[5]+B.x,k[6]=k[6]+B.y;else for(var ge=0,Ie=k.length;ge<Ie;++ge)k[ge]=k[ge]+(ge%2?B.y:B.x);return re[z](k,B,X)}}(Re[ke].toUpperCase());S.PathArray=function(z,k){S.Array.call(this,z,k||[["M",0,0]])},S.PathArray.prototype=new S.Array,S.PathArray.prototype.constructor=S.PathArray,S.extend(S.PathArray,{toString:function(){return function(z){for(var k=0,B=z.length,X="";k<B;k++)X+=z[k][0],null!=z[k][1]&&(X+=z[k][1],null!=z[k][2]&&(X+=" ",X+=z[k][2],null!=z[k][3]&&(X+=" ",X+=z[k][3],X+=" ",X+=z[k][4],null!=z[k][5]&&(X+=" ",X+=z[k][5],X+=" ",X+=z[k][6],null!=z[k][7]&&(X+=" ",X+=z[k][7])))));return X+" "}(this.value)},move:function(k,B){var X=this.bbox();if(k-=X.x,B-=X.y,!isNaN(k)&&!isNaN(B))for(var ge,Ie=this.value.length-1;Ie>=0;Ie--)"M"==(ge=this.value[Ie][0])||"L"==ge||"T"==ge?(this.value[Ie][1]+=k,this.value[Ie][2]+=B):"H"==ge?this.value[Ie][1]+=k:"V"==ge?this.value[Ie][1]+=B:"C"==ge||"S"==ge||"Q"==ge?(this.value[Ie][1]+=k,this.value[Ie][2]+=B,this.value[Ie][3]+=k,this.value[Ie][4]+=B,"C"==ge&&(this.value[Ie][5]+=k,this.value[Ie][6]+=B)):"A"==ge&&(this.value[Ie][6]+=k,this.value[Ie][7]+=B);return this},size:function(k,B){var X,ge,Ie=this.bbox();for(X=this.value.length-1;X>=0;X--)"M"==(ge=this.value[X][0])||"L"==ge||"T"==ge?(this.value[X][1]=(this.value[X][1]-Ie.x)*k/Ie.width+Ie.x,this.value[X][2]=(this.value[X][2]-Ie.y)*B/Ie.height+Ie.y):"H"==ge?this.value[X][1]=(this.value[X][1]-Ie.x)*k/Ie.width+Ie.x:"V"==ge?this.value[X][1]=(this.value[X][1]-Ie.y)*B/Ie.height+Ie.y:"C"==ge||"S"==ge||"Q"==ge?(this.value[X][1]=(this.value[X][1]-Ie.x)*k/Ie.width+Ie.x,this.value[X][2]=(this.value[X][2]-Ie.y)*B/Ie.height+Ie.y,this.value[X][3]=(this.value[X][3]-Ie.x)*k/Ie.width+Ie.x,this.value[X][4]=(this.value[X][4]-Ie.y)*B/Ie.height+Ie.y,"C"==ge&&(this.value[X][5]=(this.value[X][5]-Ie.x)*k/Ie.width+Ie.x,this.value[X][6]=(this.value[X][6]-Ie.y)*B/Ie.height+Ie.y)):"A"==ge&&(this.value[X][1]=this.value[X][1]*k/Ie.width,this.value[X][2]=this.value[X][2]*B/Ie.height,this.value[X][6]=(this.value[X][6]-Ie.x)*k/Ie.width+Ie.x,this.value[X][7]=(this.value[X][7]-Ie.y)*B/Ie.height+Ie.y);return this},equalCommands:function(k){var B,X,ge;for(k=new S.PathArray(k),ge=this.value.length===k.value.length,B=0,X=this.value.length;ge&&B<X;B++)ge=this.value[B][0]===k.value[B][0];return ge},morph:function(k){return k=new S.PathArray(k),this.destination=this.equalCommands(k)?k:null,this},at:function(k){if(!this.destination)return this;var nt,_t,rt,Vt,B=this.value,X=this.destination.value,ge=[],Ie=new S.PathArray;for(nt=0,_t=B.length;nt<_t;nt++){for(ge[nt]=[B[nt][0]],rt=1,Vt=B[nt].length;rt<Vt;rt++)ge[nt][rt]=B[nt][rt]+(X[nt][rt]-B[nt][rt])*k;"A"===ge[nt][0]&&(ge[nt][4]=+(0!=ge[nt][4]),ge[nt][5]=+(0!=ge[nt][5]))}return Ie.value=ge,Ie},parse:function(k){if(k instanceof S.PathArray)return k.valueOf();var Ie,Fn={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};k="string"==typeof k?k.replace(S.regex.numbersWithDots,we).replace(S.regex.pathLetters," $& ").replace(S.regex.hyphen,"$1 -").trim().split(S.regex.delimiter):k.reduce(function(Ri,mu){return[].concat.call(Ri,mu)},[]);var _t=[],rr=new S.Point,Vr=new S.Point,ii=0,Bi=k.length;do{S.regex.isPathLetter.test(k[ii])?(Ie=k[ii],++ii):"M"==Ie?Ie="L":"m"==Ie&&(Ie="l"),_t.push(re[Ie].call(null,k.slice(ii,ii+=Fn[Ie.toUpperCase()]).map(parseFloat),rr,Vr))}while(Bi>ii);return _t},bbox:function(){return S.parser.path.setAttribute("d",this.toString()),S.parser.path.getBBox()}}),S.Number=S.invent({create:function(k,B){this.value=0,this.unit=B||"","number"==typeof k?this.value=isNaN(k)?0:isFinite(k)?k:k<0?-34e37:34e37:"string"==typeof k?(B=k.match(S.regex.numberAndUnit))&&(this.value=parseFloat(B[1]),"%"==B[5]?this.value/=100:"s"==B[5]&&(this.value*=1e3),this.unit=B[5]):k instanceof S.Number&&(this.value=k.valueOf(),this.unit=k.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(k){return k=new S.Number(k),new S.Number(this+k,this.unit||k.unit)},minus:function(k){return k=new S.Number(k),new S.Number(this-k,this.unit||k.unit)},times:function(k){return k=new S.Number(k),new S.Number(this*k,this.unit||k.unit)},divide:function(k){return k=new S.Number(k),new S.Number(this/k,this.unit||k.unit)},to:function(k){var B=new S.Number(this);return"string"==typeof k&&(B.unit=k),B},morph:function(k){return this.destination=new S.Number(k),k.relative&&(this.destination.value+=this.value),this},at:function(k){return this.destination?new S.Number(this.destination).minus(this).times(k).plus(this):this}}}),S.Element=S.invent({create:function(k){this._stroke=S.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=k)&&(this.type=k.nodeName,this.node.instance=this,this._events=k._events||{},this._stroke=k.getAttribute("stroke")||this._stroke)},extend:{x:function(k){return this.attr("x",k)},y:function(k){return this.attr("y",k)},cx:function(k){return null==k?this.x()+this.width()/2:this.x(k-this.width()/2)},cy:function(k){return null==k?this.y()+this.height()/2:this.y(k-this.height()/2)},move:function(k,B){return this.x(k).y(B)},center:function(k,B){return this.cx(k).cy(B)},width:function(k){return this.attr("width",k)},height:function(k){return this.attr("height",k)},size:function(k,B){var X=qe(this,k,B);return this.width(new S.Number(X.width)).height(new S.Number(X.height))},clone:function(k){this.writeDataToDom();var B=vn(this.node.cloneNode(!0));return k?k.add(B):this.after(B),B},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(k){return this.after(k).remove(),k},addTo:function(k){return k.put(this)},putIn:function(k){return k.add(this)},id:function(k){return this.attr("id",k)},inside:function(k,B){var X=this.bbox();return k>X.x&&B>X.y&&k<X.x+X.width&&B<X.y+X.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var k=this.attr("class");return null==k?[]:k.trim().split(S.regex.delimiter)},hasClass:function(k){return-1!=this.classes().indexOf(k)},addClass:function(k){if(!this.hasClass(k)){var B=this.classes();B.push(k),this.attr("class",B.join(" "))}return this},removeClass:function(k){return this.hasClass(k)&&this.attr("class",this.classes().filter(function(B){return B!=k}).join(" ")),this},toggleClass:function(k){return this.hasClass(k)?this.removeClass(k):this.addClass(k)},reference:function(k){return S.get(this.attr(k))},parent:function(k){var B=this;if(!B.node.parentNode)return null;if(B=S.adopt(B.node.parentNode),!k)return B;for(;B&&B.node instanceof de.SVGElement;){if("string"==typeof k?B.matches(k):B instanceof k)return B;if(!B.node.parentNode||"#document"==B.node.parentNode.nodeName||"#document-fragment"==B.node.parentNode.nodeName)return null;B=S.adopt(B.node.parentNode)}},doc:function(){return this instanceof S.Doc?this:this.parent(S.Doc)},parents:function(k){var B=[],X=this;do{if(!(X=X.parent(k))||!X.node)break;B.push(X)}while(X.parent);return B},matches:function(k){return function(z,k){return(z.matches||z.matchesSelector||z.msMatchesSelector||z.mozMatchesSelector||z.webkitMatchesSelector||z.oMatchesSelector).call(z,k)}(this.node,k)},native:function(){return this.node},svg:function(k){var B=D.createElement("svg");if(!(k&&this instanceof S.Parent))return B.appendChild(k=D.createElement("svg")),this.writeDataToDom(),k.appendChild(this.node.cloneNode(!0)),B.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");B.innerHTML="<svg>"+k.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var X=0,ge=B.firstChild.childNodes.length;X<ge;X++)this.node.appendChild(B.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(k){return this.dom=k,this},is:function(k){return function(z,k){return z instanceof k}(this,k)}}}),S.easing={"-":function(k){return k},"<>":function(k){return-Math.cos(k*Math.PI)/2+.5},">":function(k){return Math.sin(k*Math.PI/2)},"<":function(k){return 1-Math.cos(k*Math.PI/2)}},S.morph=function(z){return function(k,B){return new S.MorphObj(k,B).at(z)}},S.Situation=S.invent({create:function(k){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new S.Number(k.duration).valueOf(),this.delay=new S.Number(k.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=k.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),S.FX=S.invent({create:function(k){this._target=k,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(k,B,X){"object"==typeof k&&(B=k.ease,X=k.delay,k=k.duration);var ge=new S.Situation({duration:k||1e3,delay:X||0,ease:S.easing[B||"-"]||B});return this.queue(ge),this},delay:function(k){var B=new S.Situation({duration:k,delay:0,ease:S.easing["-"]});return this.queue(B)},target:function(k){return k&&k instanceof S.Element?(this._target=k,this):this._target},timeToAbsPos:function(k){return(k-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(k){return this.situation.duration/this._speed*k+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=de.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){de.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(k){return("function"==typeof k||k instanceof S.Situation)&&this.situations.push(k),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof S.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var k,B,X,ge=this.situation;if(ge.init)return this;for(k in ge.animations)for(X=this.target()[k](),Array.isArray(X)||(X=[X]),Array.isArray(ge.animations[k])||(ge.animations[k]=[ge.animations[k]]),B=X.length;B--;)ge.animations[k][B]instanceof S.Number&&(X[B]=new S.Number(X[B])),ge.animations[k][B]=X[B].morph(ge.animations[k][B]);for(k in ge.attrs)ge.attrs[k]=new S.MorphObj(this.target().attr(k),ge.attrs[k]);for(k in ge.styles)ge.styles[k]=new S.MorphObj(this.target().style(k),ge.styles[k]);return ge.initialTransformation=this.target().matrixify(),ge.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(k,B){var X=this.active;return this.active=!1,B&&this.clearQueue(),k&&this.situation&&(!X&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var k=this.situation;this.stop(),this.situation=k,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),this.at("number"==typeof this.situation.loops?this.situation.loops:1,!0)},at:function(k,B){var X=this.situation.duration/this._speed;return this.absPos=k,B||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*X,this.situation.finish=this.situation.start+X,this.step(!0)},speed:function(k){return 0===k?this.pause():k?(this._speed=k,this.at(this.absPos,!0)):this._speed},loop:function(k,B){var X=this.last();return X.loops=null==k||k,X.loop=0,B&&(X.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(k){var B=this.last();return B.reversed=void 0===k?!B.reversed:k,this},progress:function(k){return k?this.situation.ease(this.pos):this.pos},after:function(k){var B=this.last();return this.target().on("finished.fx",function ge(Ie){Ie.detail.situation==B&&(k.call(this,B),this.off("finished.fx",ge))}),this._callStart()},during:function(k){var B=this.last(),X=function(Ie){Ie.detail.situation==B&&k.call(this,Ie.detail.pos,S.morph(Ie.detail.pos),Ie.detail.eased,B)};return this.target().off("during.fx",X).on("during.fx",X),this.after(function(){this.off("during.fx",X)}),this._callStart()},afterAll:function(k){var B=function X(ge){k.call(this),this.off("allfinished.fx",X)};return this.target().off("allfinished.fx",B).on("allfinished.fx",B),this._callStart()},duringAll:function(k){var B=function(ge){k.call(this,ge.detail.pos,S.morph(ge.detail.pos),ge.detail.eased,ge.detail.situation)};return this.target().off("during.fx",B).on("during.fx",B),this.afterAll(function(){this.off("during.fx",B)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(k,B,X){return this.last()[X||"animations"][k]=B,this._callStart()},step:function(k){var B,X,ge;k||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(B=Math.max(this.absPos,0),X=Math.floor(B),!0===this.situation.loops||X<this.situation.loops?(this.pos=B-X,ge=this.situation.loop,this.situation.loop=X):(this.absPos=this.situation.loops,this.pos=1,ge=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-ge)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Ie=this.situation.ease(this.pos);for(var nt in this.situation.once)nt>this.lastPos&&nt<=Ie&&(this.situation.once[nt].call(this.target(),this.pos,Ie),delete this.situation.once[nt]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Ie,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Ie,this):this},eachAt:function(){var k,B,X,ge=this,Ie=this.target(),nt=this.situation;for(k in nt.animations)X=[].concat(nt.animations[k]).map(function(rt){return"string"!=typeof rt&&rt.at?rt.at(nt.ease(ge.pos),ge.pos):rt}),Ie[k].apply(Ie,X);for(k in nt.attrs)X=[k].concat(nt.attrs[k]).map(function(rt){return"string"!=typeof rt&&rt.at?rt.at(nt.ease(ge.pos),ge.pos):rt}),Ie.attr.apply(Ie,X);for(k in nt.styles)X=[k].concat(nt.styles[k]).map(function(rt){return"string"!=typeof rt&&rt.at?rt.at(nt.ease(ge.pos),ge.pos):rt}),Ie.style.apply(Ie,X);if(nt.transforms.length){for(X=nt.initialTransformation,k=0,B=nt.transforms.length;k<B;k++){var _t=nt.transforms[k];_t instanceof S.Matrix?X=_t.relative?X.multiply((new S.Matrix).morph(_t).at(nt.ease(this.pos))):X.morph(_t).at(nt.ease(this.pos)):(_t.relative||_t.undo(X.extract()),X=X.multiply(_t.at(nt.ease(this.pos))))}Ie.matrix(X)}return this},once:function(k,B,X){var ge=this.last();return X||(k=ge.ease(k)),ge.once[k]=B,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:S.Element,construct:{animate:function(k,B,X){return(this.fx||(this.fx=new S.FX(this))).animate(k,B,X)},delay:function(k){return(this.fx||(this.fx=new S.FX(this))).delay(k)},stop:function(k,B){return this.fx&&this.fx.stop(k,B),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(k){if(this.fx){if(null==k)return this.fx.speed();this.fx.speed(k)}return this}}}),S.MorphObj=S.invent({create:function(k,B){return S.Color.isColor(B)?new S.Color(k).morph(B):S.regex.delimiter.test(k)?S.regex.pathLetters.test(k)?new S.PathArray(k).morph(B):new S.Array(k).morph(B):S.regex.numberAndUnit.test(B)?new S.Number(k).morph(B):(this.value=k,void(this.destination=B))},extend:{at:function(k,B){return B<1?this.value:this.destination},valueOf:function(){return this.value}}}),S.extend(S.FX,{attr:function(k,B,X){if("object"==typeof k)for(var ge in k)this.attr(ge,k[ge]);else this.add(k,B,"attrs");return this},style:function(k,B){if("object"==typeof k)for(var X in k)this.style(X,k[X]);else this.add(k,B,"styles");return this},x:function(k,B){if(this.target()instanceof S.G)return this.transform({x:k},B),this;var X=new S.Number(k);return X.relative=B,this.add("x",X)},y:function(k,B){if(this.target()instanceof S.G)return this.transform({y:k},B),this;var X=new S.Number(k);return X.relative=B,this.add("y",X)},cx:function(k){return this.add("cx",new S.Number(k))},cy:function(k){return this.add("cy",new S.Number(k))},move:function(k,B){return this.x(k).y(B)},center:function(k,B){return this.cx(k).cy(B)},size:function(k,B){var X;return this.target()instanceof S.Text?this.attr("font-size",k):((!k||!B)&&(X=this.target().bbox()),k||(k=X.width/X.height*B),B||(B=X.height/X.width*k),this.add("width",new S.Number(k)).add("height",new S.Number(B))),this},width:function(k){return this.add("width",new S.Number(k))},height:function(k){return this.add("height",new S.Number(k))},plot:function(k,B,X,ge){return 4==arguments.length?this.plot([k,B,X,ge]):this.add("plot",new(this.target().morphArray)(k))},leading:function(k){return this.target().leading?this.add("leading",new S.Number(k)):this},viewbox:function(k,B,X,ge){return this.target()instanceof S.Container&&this.add("viewbox",new S.ViewBox(k,B,X,ge)),this},update:function(k){if(this.target()instanceof S.Stop){if("number"==typeof k||k instanceof S.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=k.opacity&&this.attr("stop-opacity",k.opacity),null!=k.color&&this.attr("stop-color",k.color),null!=k.offset&&this.attr("offset",k.offset)}return this}}),S.Box=S.invent({create:function(k,B,X,ge){if("object"==typeof k&&!(k instanceof S.Element))return S.Box.call(this,null!=k.left?k.left:k.x,null!=k.top?k.top:k.y,k.width,k.height);4==arguments.length&&(this.x=k,this.y=B,this.width=X,this.height=ge),nn(this)},extend:{merge:function(k){var B=new this.constructor;return B.x=Math.min(this.x,k.x),B.y=Math.min(this.y,k.y),B.width=Math.max(this.x+this.width,k.x+k.width)-B.x,B.height=Math.max(this.y+this.height,k.y+k.height)-B.y,nn(B)},transform:function(k){var _t,B=1/0,X=-1/0,ge=1/0,Ie=-1/0;return[new S.Point(this.x,this.y),new S.Point(this.x2,this.y),new S.Point(this.x,this.y2),new S.Point(this.x2,this.y2)].forEach(function(Vt){Vt=Vt.transform(k),B=Math.min(B,Vt.x),X=Math.max(X,Vt.x),ge=Math.min(ge,Vt.y),Ie=Math.max(Ie,Vt.y)}),(_t=new this.constructor).x=B,_t.width=X-B,_t.y=ge,_t.height=Ie-ge,nn(_t),_t}}}),S.BBox=S.invent({create:function(k){if(S.Box.apply(this,[].slice.call(arguments)),k instanceof S.Element){var B;try{if(D.documentElement.contains){if(!D.documentElement.contains(k.node))throw new Exception("Element not in the dom")}else{for(var X=k.node;X.parentNode;)X=X.parentNode;if(X!=D)throw new Exception("Element not in the dom")}B=k.node.getBBox()}catch(Ie){if(k instanceof S.Shape){var ge=k.clone(S.parser.draw.instance).show();B=ge.node.getBBox(),ge.remove()}else B={x:k.node.clientLeft,y:k.node.clientTop,width:k.node.clientWidth,height:k.node.clientHeight}}S.Box.call(this,B)}},inherit:S.Box,parent:S.Element,construct:{bbox:function(){return new S.BBox(this)}}}),S.BBox.prototype.constructor=S.BBox,S.extend(S.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),S.RBox=S.invent({create:function(k){S.Box.apply(this,[].slice.call(arguments)),k instanceof S.Element&&S.Box.call(this,k.node.getBoundingClientRect())},inherit:S.Box,parent:S.Element,extend:{addOffset:function(){return this.x+=de.pageXOffset,this.y+=de.pageYOffset,this}},construct:{rbox:function(k){return k?new S.RBox(this).transform(k.screenCTM().inverse()):new S.RBox(this).addOffset()}}}),S.RBox.prototype.constructor=S.RBox,S.Matrix=S.invent({create:function(k){var B,X=st([1,0,0,1,0,0]);for(k=k instanceof S.Element?k.matrixify():"string"==typeof k?st(k.split(S.regex.delimiter).map(parseFloat)):6==arguments.length?st([].slice.call(arguments)):Array.isArray(k)?st(k):"object"==typeof k?k:X,B=Ct.length-1;B>=0;--B)this[Ct[B]]=null!=k[Ct[B]]?k[Ct[B]]:X[Ct[B]]},extend:{extract:function(){var k=Be(this,0,1),B=Be(this,1,0),X=180/Math.PI*Math.atan2(k.y,k.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(X*Math.PI/180)+this.f*Math.sin(X*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(X*Math.PI/180)+this.e*Math.sin(-X*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-X,skewY:180/Math.PI*Math.atan2(B.y,B.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:X,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new S.Matrix(this)}},clone:function(){return new S.Matrix(this)},morph:function(k){return this.destination=new S.Matrix(k),this},at:function(k){return this.destination?new S.Matrix({a:this.a+(this.destination.a-this.a)*k,b:this.b+(this.destination.b-this.b)*k,c:this.c+(this.destination.c-this.c)*k,d:this.d+(this.destination.d-this.d)*k,e:this.e+(this.destination.e-this.e)*k,f:this.f+(this.destination.f-this.f)*k}):this},multiply:function(k){return new S.Matrix(this.native().multiply((z=k,z instanceof S.Matrix||(z=new S.Matrix(z)),z).native()));var z},inverse:function(){return new S.Matrix(this.native().inverse())},translate:function(k,B){return new S.Matrix(this.native().translate(k||0,B||0))},scale:function(k,B,X,ge){return 1==arguments.length?B=k:3==arguments.length&&(ge=X,X=B,B=k),this.around(X,ge,new S.Matrix(k,0,0,B,0,0))},rotate:function(k,B,X){return k=S.utils.radians(k),this.around(B,X,new S.Matrix(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0))},flip:function(k,B){return"x"==k?this.scale(-1,1,B,0):"y"==k?this.scale(1,-1,0,B):this.scale(-1,-1,k,null!=B?B:k)},skew:function(k,B,X,ge){return 1==arguments.length?B=k:3==arguments.length&&(ge=X,X=B,B=k),k=S.utils.radians(k),B=S.utils.radians(B),this.around(X,ge,new S.Matrix(1,Math.tan(B),Math.tan(k),1,0,0))},skewX:function(k,B,X){return this.skew(k,0,B,X)},skewY:function(k,B,X){return this.skew(0,k,B,X)},around:function(k,B,X){return this.multiply(new S.Matrix(1,0,0,1,k||0,B||0)).multiply(X).multiply(new S.Matrix(1,0,0,1,-k||0,-B||0))},native:function(){for(var k=S.parser.native.createSVGMatrix(),B=Ct.length-1;B>=0;B--)k[Ct[B]]=this[Ct[B]];return k},toString:function(){return"matrix("+Ot(this.a)+","+Ot(this.b)+","+Ot(this.c)+","+Ot(this.d)+","+Ot(this.e)+","+Ot(this.f)+")"}},parent:S.Element,construct:{ctm:function(){return new S.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof S.Nested){var k=this.rect(1,1),B=k.node.getScreenCTM();return k.remove(),new S.Matrix(B)}return new S.Matrix(this.node.getScreenCTM())}}}),S.Point=S.invent({create:function(k,B){var ge;ge=Array.isArray(k)?{x:k[0],y:k[1]}:"object"==typeof k?{x:k.x,y:k.y}:null!=k?{x:k,y:null!=B?B:k}:{x:0,y:0},this.x=ge.x,this.y=ge.y},extend:{clone:function(){return new S.Point(this)},morph:function(k,B){return this.destination=new S.Point(k,B),this},at:function(k){return this.destination?new S.Point({x:this.x+(this.destination.x-this.x)*k,y:this.y+(this.destination.y-this.y)*k}):this},native:function(){var k=S.parser.native.createSVGPoint();return k.x=this.x,k.y=this.y,k},transform:function(k){return new S.Point(this.native().matrixTransform(k.native()))}}}),S.extend(S.Element,{point:function(k,B){return new S.Point(k,B).transform(this.screenCTM().inverse())}}),S.extend(S.Element,{attr:function(k,B,X){if(null==k){for(k={},X=(B=this.node.attributes).length-1;X>=0;X--)k[B[X].nodeName]=S.regex.isNumber.test(B[X].nodeValue)?parseFloat(B[X].nodeValue):B[X].nodeValue;return k}if("object"==typeof k)for(B in k)this.attr(B,k[B]);else if(null===B)this.node.removeAttribute(k);else{if(null==B)return null==(B=this.node.getAttribute(k))?S.defaults.attrs[k]:S.regex.isNumber.test(B)?parseFloat(B):B;"stroke-width"==k?this.attr("stroke",parseFloat(B)>0?this._stroke:null):"stroke"==k&&(this._stroke=B),("fill"==k||"stroke"==k)&&(S.regex.isImage.test(B)&&(B=this.doc().defs().image(B,0,0)),B instanceof S.Image&&(B=this.doc().defs().pattern(0,0,function(){this.add(B)}))),"number"==typeof B?B=new S.Number(B):S.Color.isColor(B)?B=new S.Color(B):Array.isArray(B)&&(B=new S.Array(B)),"leading"==k?this.leading&&this.leading(B):"string"==typeof X?this.node.setAttributeNS(X,k,B.toString()):this.node.setAttribute(k,B.toString()),this.rebuild&&("font-size"==k||"x"==k)&&this.rebuild(k,B)}return this}}),S.extend(S.Element,{transform:function(k,B){var ge,Ie,X=this;if("object"!=typeof k)return ge=new S.Matrix(X).extract(),"string"==typeof k?ge[k]:ge;if(ge=new S.Matrix(X),B=!!B||!!k.relative,null!=k.a)ge=B?ge.multiply(new S.Matrix(k)):new S.Matrix(k);else if(null!=k.rotation)Y(k,X),ge=ge.rotate(B?k.rotation:k.rotation-ge.extract().rotation,k.cx,k.cy);else if(null!=k.scale||null!=k.scaleX||null!=k.scaleY){if(Y(k,X),k.scaleX=null!=k.scale?k.scale:null!=k.scaleX?k.scaleX:1,k.scaleY=null!=k.scale?k.scale:null!=k.scaleY?k.scaleY:1,!B){var nt=ge.extract();k.scaleX=1*k.scaleX/nt.scaleX,k.scaleY=1*k.scaleY/nt.scaleY}ge=ge.scale(k.scaleX,k.scaleY,k.cx,k.cy)}else null!=k.skew||null!=k.skewX||null!=k.skewY?(Y(k,X),k.skewX=null!=k.skew?k.skew:null!=k.skewX?k.skewX:0,k.skewY=null!=k.skew?k.skew:null!=k.skewY?k.skewY:0,B||(nt=ge.extract(),ge=ge.multiply((new S.Matrix).skew(nt.skewX,nt.skewY,k.cx,k.cy).inverse())),ge=ge.skew(k.skewX,k.skewY,k.cx,k.cy)):k.flip?("x"==k.flip||"y"==k.flip?k.offset=null==k.offset?X.bbox()["c"+k.flip]:k.offset:null==k.offset?(Ie=X.bbox(),k.flip=Ie.cx,k.offset=Ie.cy):k.flip=k.offset,ge=(new S.Matrix).flip(k.flip,k.offset)):(null!=k.x||null!=k.y)&&(B?ge=ge.translate(k.x,k.y):(null!=k.x&&(ge.e=k.x),null!=k.y&&(ge.f=k.y)));return this.attr("transform",ge)}}),S.extend(S.FX,{transform:function(k,B){var ge,Ie,X=this.target();return"object"!=typeof k?(ge=new S.Matrix(X).extract(),"string"==typeof k?ge[k]:ge):(B=!!B||!!k.relative,null!=k.a?ge=new S.Matrix(k):null!=k.rotation?(Y(k,X),ge=new S.Rotate(k.rotation,k.cx,k.cy)):null!=k.scale||null!=k.scaleX||null!=k.scaleY?(Y(k,X),k.scaleX=null!=k.scale?k.scale:null!=k.scaleX?k.scaleX:1,k.scaleY=null!=k.scale?k.scale:null!=k.scaleY?k.scaleY:1,ge=new S.Scale(k.scaleX,k.scaleY,k.cx,k.cy)):null!=k.skewX||null!=k.skewY?(Y(k,X),k.skewX=null!=k.skewX?k.skewX:0,k.skewY=null!=k.skewY?k.skewY:0,ge=new S.Skew(k.skewX,k.skewY,k.cx,k.cy)):k.flip?("x"==k.flip||"y"==k.flip?k.offset=null==k.offset?X.bbox()["c"+k.flip]:k.offset:null==k.offset?(Ie=X.bbox(),k.flip=Ie.cx,k.offset=Ie.cy):k.flip=k.offset,ge=(new S.Matrix).flip(k.flip,k.offset)):(null!=k.x||null!=k.y)&&(ge=new S.Translate(k.x,k.y)),ge?(ge.relative=B,this.last().transforms.push(ge),this._callStart()):this)}}),S.extend(S.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(S.regex.transforms).slice(0,-1).map(function(B){var X=B.trim().split("(");return[X[0],X[1].split(S.regex.delimiter).map(function(ge){return parseFloat(ge)})]}).reduce(function(B,X){return"matrix"==X[0]?B.multiply(st(X[1])):B[X[0]].apply(B,X[1])},new S.Matrix)},toParent:function(k){if(this==k)return this;var B=this.screenCTM(),X=k.screenCTM().inverse();return this.addTo(k).untransform().transform(X.multiply(B)),this},toDoc:function(){return this.toParent(this.doc())}}),S.Transformation=S.invent({create:function(k,B){if(arguments.length>1&&"boolean"!=typeof B)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(k))for(var X=0,ge=this.arguments.length;X<ge;++X)this[this.arguments[X]]=k[X];else if("object"==typeof k)for(X=0,ge=this.arguments.length;X<ge;++X)this[this.arguments[X]]=k[this.arguments[X]];this.inversed=!1,!0===B&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(k){for(var B=[],X=0,ge=this.arguments.length;X<ge;++X)B.push(this[this.arguments[X]]);var Ie=this._undo||new S.Matrix;return Ie=(new S.Matrix).morph(S.Matrix.prototype[this.method].apply(Ie,B)).at(k),this.inversed?Ie.inverse():Ie},undo:function(k){for(var B=0,X=this.arguments.length;B<X;++B)k[this.arguments[B]]=void 0===this[this.arguments[B]]?0:k[this.arguments[B]];return k.cx=this.cx,k.cy=this.cy,this._undo=new(S[Ae(this.method)])(k,!0).at(1),this}}}),S.Translate=S.invent({parent:S.Matrix,inherit:S.Transformation,create:function(k,B){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),S.Rotate=S.invent({parent:S.Matrix,inherit:S.Transformation,create:function(k,B){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(k){var B=(new S.Matrix).rotate((new S.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(k),this.cx,this.cy);return this.inversed?B.inverse():B},undo:function(k){return this._undo=k,this}}}),S.Scale=S.invent({parent:S.Matrix,inherit:S.Transformation,create:function(k,B){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),S.Skew=S.invent({parent:S.Matrix,inherit:S.Transformation,create:function(k,B){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),S.extend(S.Element,{style:function(k,B){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof k)for(B in k)this.style(B,k[B]);else{if(!S.regex.isCss.test(k))return this.node.style[fe(k)];for(k=k.split(/\s*;\s*/).filter(function(X){return!!X}).map(function(X){return X.split(/\s*:\s*/)});B=k.pop();)this.style(B[0],B[1])}else this.node.style[fe(k)]=null===B||S.regex.isBlank.test(B)?"":B;return this}}),S.Parent=S.invent({create:function(k){this.constructor.call(this,k)},inherit:S.Element,extend:{children:function(){return S.utils.map(S.utils.filterSVGElements(this.node.childNodes),function(k){return S.adopt(k)})},add:function(k,B){return null==B?this.node.appendChild(k.node):k.node!=this.node.childNodes[B]&&this.node.insertBefore(k.node,this.node.childNodes[B]),this},put:function(k,B){return this.add(k,B),k},has:function(k){return this.index(k)>=0},index:function(k){return[].slice.call(this.node.childNodes).indexOf(k.node)},get:function(k){return S.adopt(this.node.childNodes[k])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(k,B){var X,ge,Ie=this.children();for(X=0,ge=Ie.length;X<ge;X++)Ie[X]instanceof S.Element&&k.apply(Ie[X],[X,Ie]),B&&Ie[X]instanceof S.Container&&Ie[X].each(k,B);return this},removeElement:function(k){return this.node.removeChild(k.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),S.extend(S.Parent,{ungroup:function(k,B){return 0===B||this instanceof S.Defs||this.node==S.parser.draw||(k=k||(this instanceof S.Doc?this:this.parent(S.Parent)),B=B||1/0,this.each(function(){return this instanceof S.Defs?this:this instanceof S.Parent?this.ungroup(k,B-1):this.toParent(k)}),this.node.firstChild||this.remove()),this},flatten:function(k,B){return this.ungroup(k,B)}}),S.Container=S.invent({create:function(k){this.constructor.call(this,k)},inherit:S.Parent}),S.ViewBox=S.invent({create:function(k){var ge,Ie,nt,_t,Vt,Fn,rr,X=[0,0,0,0],Vr=1,ii=1,Bi=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(k instanceof S.Element){for(Fn=k,rr=k,Vt=(k.attr("viewBox")||"").match(Bi),nt=new S.Number(k.width()),_t=new S.Number(k.height());"%"==nt.unit;)Vr*=nt.value,nt=new S.Number(Fn instanceof S.Doc?Fn.parent().offsetWidth:Fn.parent().width()),Fn=Fn.parent();for(;"%"==_t.unit;)ii*=_t.value,_t=new S.Number(rr instanceof S.Doc?rr.parent().offsetHeight:rr.parent().height()),rr=rr.parent();this.x=0,this.y=0,this.width=nt*Vr,this.height=_t*ii,this.zoom=1,Vt&&(ge=parseFloat(Vt[0]),Ie=parseFloat(Vt[1]),nt=parseFloat(Vt[2]),_t=parseFloat(Vt[3]),this.zoom=this.width/this.height>nt/_t?this.height/_t:this.width/nt,this.x=ge,this.y=Ie,this.width=nt,this.height=_t)}else k="string"==typeof k?k.match(Bi).map(function(Ri){return parseFloat(Ri)}):Array.isArray(k)?k:"object"==typeof k?[k.x,k.y,k.width,k.height]:4==arguments.length?[].slice.call(arguments):X,this.x=k[0],this.y=k[1],this.width=k[2],this.height=k[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(k,B,X,ge){return this.destination=new S.ViewBox(k,B,X,ge),this},at:function(k){return this.destination?new S.ViewBox([this.x+(this.destination.x-this.x)*k,this.y+(this.destination.y-this.y)*k,this.width+(this.destination.width-this.width)*k,this.height+(this.destination.height-this.height)*k]):this}},parent:S.Container,construct:{viewbox:function(k,B,X,ge){return 0==arguments.length?new S.ViewBox(this):this.attr("viewBox",new S.ViewBox(k,B,X,ge))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(z){S.Element.prototype[z]=function(k){return null==k?S.off(this,z):S.on(this,z,k),this}}),S.listenerId=0,S.on=function(z,k,B,X,ge){var Ie=B.bind(X||z),nt=z instanceof S.Element?z.node:z;nt.instance=nt.instance||{_events:{}};var _t=nt.instance._events;B._svgjsListenerId||(B._svgjsListenerId=++S.listenerId),k.split(S.regex.delimiter).forEach(function(rt){var Vt=rt.split(".")[0],Fn=rt.split(".")[1]||"*";_t[Vt]=_t[Vt]||{},_t[Vt][Fn]=_t[Vt][Fn]||{},_t[Vt][Fn][B._svgjsListenerId]=Ie,nt.addEventListener(Vt,Ie,ge||!1)})},S.off=function(z,k,B,X){var ge=z instanceof S.Element?z.node:z;if(ge.instance&&("function"!=typeof B||(B=B._svgjsListenerId))){var Ie=ge.instance._events;(k||"").split(S.regex.delimiter).forEach(function(nt){var Vt,Fn,_t=nt&&nt.split(".")[0],rt=nt&&nt.split(".")[1];if(B)Ie[_t]&&Ie[_t][rt||"*"]&&(ge.removeEventListener(_t,Ie[_t][rt||"*"][B],X||!1),delete Ie[_t][rt||"*"][B]);else if(_t&&rt){if(Ie[_t]&&Ie[_t][rt]){for(Fn in Ie[_t][rt])S.off(ge,[_t,rt].join("."),Fn);delete Ie[_t][rt]}}else if(rt)for(nt in Ie)for(Vt in Ie[nt])rt===Vt&&S.off(ge,[nt,rt].join("."));else if(_t){if(Ie[_t]){for(Vt in Ie[_t])S.off(ge,[_t,Vt].join("."));delete Ie[_t]}}else{for(nt in Ie)S.off(ge,nt);ge.instance._events={}}})}},S.extend(S.Element,{on:function(k,B,X,ge){return S.on(this,k,B,X,ge),this},off:function(k,B){return S.off(this.node,k,B),this},fire:function(k,B){return this.node.dispatchEvent(k instanceof de.Event?k:k=new S.CustomEvent(k,{detail:B,cancelable:!0})),this._event=k,this},event:function(){return this._event}}),S.Defs=S.invent({create:"defs",inherit:S.Container}),S.G=S.invent({create:"g",inherit:S.Container,extend:{x:function(k){return null==k?this.transform("x"):this.transform({x:k-this.x()},!0)},y:function(k){return null==k?this.transform("y"):this.transform({y:k-this.y()},!0)},cx:function(k){return null==k?this.gbox().cx:this.x(k-this.gbox().width/2)},cy:function(k){return null==k?this.gbox().cy:this.y(k-this.gbox().height/2)},gbox:function(){var k=this.bbox(),B=this.transform();return k.x+=B.x,k.x2+=B.x,k.cx+=B.x,k.y+=B.y,k.y2+=B.y,k.cy+=B.y,k}},construct:{group:function(){return this.put(new S.G)}}}),S.Doc=S.invent({create:function(k){k&&("svg"==(k="string"==typeof k?D.getElementById(k):k).nodeName?this.constructor.call(this,k):(this.constructor.call(this,S.create("svg")),k.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:S.Container,extend:{namespace:function(){return this.attr({xmlns:S.ns,version:"1.1"}).attr("xmlns:xlink",S.xlink,S.xmlns).attr("xmlns:svgjs",S.svgjs,S.xmlns)},defs:function(){var k;return this._defs||(this._defs=(k=this.node.getElementsByTagName("defs")[0])?S.adopt(k):new S.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var k=this.node.getScreenCTM();return k&&this.style("left",-k.e%1+"px").style("top",-k.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,S.parser.draw.parentNode||this.node.appendChild(S.parser.draw),this},clone:function(k){this.writeDataToDom();var B=this.node,X=vn(B.cloneNode(!0));return k?(k.node||k).appendChild(X.node):B.parentNode.insertBefore(X.node,B.nextSibling),X}}}),S.extend(S.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var k=this.position()+1,B=this.parent();return B.removeElement(this).add(this,k),B instanceof S.Doc&&B.node.appendChild(B.defs().node),this},backward:function(){var k=this.position();return k>0&&this.parent().removeElement(this).add(this,k-1),this},front:function(){var k=this.parent();return k.node.appendChild(this.node),k instanceof S.Doc&&k.node.appendChild(k.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(k){k.remove();var B=this.position();return this.parent().add(k,B),this},after:function(k){k.remove();var B=this.position();return this.parent().add(k,B+1),this}}),S.Mask=S.invent({create:function(){this.constructor.call(this,S.create("mask")),this.targets=[]},inherit:S.Container,extend:{remove:function(){for(var k=this.targets.length-1;k>=0;k--)this.targets[k]&&this.targets[k].unmask();return this.targets=[],S.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new S.Mask)}}}),S.extend(S.Element,{maskWith:function(k){return this.masker=k instanceof S.Mask?k:this.parent().mask().add(k),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),S.ClipPath=S.invent({create:function(){this.constructor.call(this,S.create("clipPath")),this.targets=[]},inherit:S.Container,extend:{remove:function(){for(var k=this.targets.length-1;k>=0;k--)this.targets[k]&&this.targets[k].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new S.ClipPath)}}}),S.extend(S.Element,{clipWith:function(k){return this.clipper=k instanceof S.ClipPath?k:this.parent().clip().add(k),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),S.Gradient=S.invent({create:function(k){this.constructor.call(this,S.create(k+"Gradient")),this.type=k},inherit:S.Container,extend:{at:function(k,B,X){return this.put(new S.Stop).update(k,B,X)},update:function(k){return this.clear(),"function"==typeof k&&k.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(k,B,X){return"transform"==k&&(k="gradientTransform"),S.Container.prototype.attr.call(this,k,B,X)}},construct:{gradient:function(k,B){return this.defs().gradient(k,B)}}}),S.extend(S.Gradient,S.FX,{from:function(k,B){return this.attr("radial"==(this._target||this).type?{fx:new S.Number(k),fy:new S.Number(B)}:{x1:new S.Number(k),y1:new S.Number(B)})},to:function(k,B){return this.attr("radial"==(this._target||this).type?{cx:new S.Number(k),cy:new S.Number(B)}:{x2:new S.Number(k),y2:new S.Number(B)})}}),S.extend(S.Defs,{gradient:function(k,B){return this.put(new S.Gradient(k)).update(B)}}),S.Stop=S.invent({create:"stop",inherit:S.Element,extend:{update:function(k){return("number"==typeof k||k instanceof S.Number)&&(k={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=k.opacity&&this.attr("stop-opacity",k.opacity),null!=k.color&&this.attr("stop-color",k.color),null!=k.offset&&this.attr("offset",new S.Number(k.offset)),this}}}),S.Pattern=S.invent({create:"pattern",inherit:S.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(k){return this.clear(),"function"==typeof k&&k.call(this,this),this},toString:function(){return this.fill()},attr:function(k,B,X){return"transform"==k&&(k="patternTransform"),S.Container.prototype.attr.call(this,k,B,X)}},construct:{pattern:function(k,B,X){return this.defs().pattern(k,B,X)}}}),S.extend(S.Defs,{pattern:function(k,B,X){return this.put(new S.Pattern).update(X).attr({x:0,y:0,width:k,height:B,patternUnits:"userSpaceOnUse"})}}),S.Shape=S.invent({create:function(k){this.constructor.call(this,k)},inherit:S.Element}),S.Bare=S.invent({create:function(k,B){if(this.constructor.call(this,S.create(k)),B)for(var X in B.prototype)"function"==typeof B.prototype[X]&&(this[X]=B.prototype[X])},inherit:S.Element,extend:{words:function(k){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(D.createTextNode(k)),this}}}),S.extend(S.Parent,{element:function(k,B){return this.put(new S.Bare(k,B))}}),S.Symbol=S.invent({create:"symbol",inherit:S.Container,construct:{symbol:function(){return this.put(new S.Symbol)}}}),S.Use=S.invent({create:"use",inherit:S.Shape,extend:{element:function(k,B){return this.attr("href",(B||"")+"#"+k,S.xlink)}},construct:{use:function(k,B){return this.put(new S.Use).element(k,B)}}}),S.Rect=S.invent({create:"rect",inherit:S.Shape,construct:{rect:function(k,B){return this.put(new S.Rect).size(k,B)}}}),S.Circle=S.invent({create:"circle",inherit:S.Shape,construct:{circle:function(k){return this.put(new S.Circle).rx(new S.Number(k).divide(2)).move(0,0)}}}),S.extend(S.Circle,S.FX,{rx:function(k){return this.attr("r",k)},ry:function(k){return this.rx(k)}}),S.Ellipse=S.invent({create:"ellipse",inherit:S.Shape,construct:{ellipse:function(k,B){return this.put(new S.Ellipse).size(k,B).move(0,0)}}}),S.extend(S.Ellipse,S.Rect,S.FX,{rx:function(k){return this.attr("rx",k)},ry:function(k){return this.attr("ry",k)}}),S.extend(S.Circle,S.Ellipse,{x:function(k){return null==k?this.cx()-this.rx():this.cx(k+this.rx())},y:function(k){return null==k?this.cy()-this.ry():this.cy(k+this.ry())},cx:function(k){return null==k?this.attr("cx"):this.attr("cx",k)},cy:function(k){return null==k?this.attr("cy"):this.attr("cy",k)},width:function(k){return null==k?2*this.rx():this.rx(new S.Number(k).divide(2))},height:function(k){return null==k?2*this.ry():this.ry(new S.Number(k).divide(2))},size:function(k,B){var X=qe(this,k,B);return this.rx(new S.Number(X.width).divide(2)).ry(new S.Number(X.height).divide(2))}}),S.Line=S.invent({create:"line",inherit:S.Shape,extend:{array:function(){return new S.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(k,B,X,ge){return null==k?this.array():(k=void 0!==B?{x1:k,y1:B,x2:X,y2:ge}:new S.PointArray(k).toLine(),this.attr(k))},move:function(k,B){return this.attr(this.array().move(k,B).toLine())},size:function(k,B){var X=qe(this,k,B);return this.attr(this.array().size(X.width,X.height).toLine())}},construct:{line:function(k,B,X,ge){return S.Line.prototype.plot.apply(this.put(new S.Line),null!=k?[k,B,X,ge]:[0,0,0,0])}}}),S.Polyline=S.invent({create:"polyline",inherit:S.Shape,construct:{polyline:function(k){return this.put(new S.Polyline).plot(k||new S.PointArray)}}}),S.Polygon=S.invent({create:"polygon",inherit:S.Shape,construct:{polygon:function(k){return this.put(new S.Polygon).plot(k||new S.PointArray)}}}),S.extend(S.Polyline,S.Polygon,{array:function(){return this._array||(this._array=new S.PointArray(this.attr("points")))},plot:function(k){return null==k?this.array():this.clear().attr("points","string"==typeof k?k:this._array=new S.PointArray(k))},clear:function(){return delete this._array,this},move:function(k,B){return this.attr("points",this.array().move(k,B))},size:function(k,B){var X=qe(this,k,B);return this.attr("points",this.array().size(X.width,X.height))}}),S.extend(S.Line,S.Polyline,S.Polygon,{morphArray:S.PointArray,x:function(k){return null==k?this.bbox().x:this.move(k,this.bbox().y)},y:function(k){return null==k?this.bbox().y:this.move(this.bbox().x,k)},width:function(k){var B=this.bbox();return null==k?B.width:this.size(k,B.height)},height:function(k){var B=this.bbox();return null==k?B.height:this.size(B.width,k)}}),S.Path=S.invent({create:"path",inherit:S.Shape,extend:{morphArray:S.PathArray,array:function(){return this._array||(this._array=new S.PathArray(this.attr("d")))},plot:function(k){return null==k?this.array():this.clear().attr("d","string"==typeof k?k:this._array=new S.PathArray(k))},clear:function(){return delete this._array,this},move:function(k,B){return this.attr("d",this.array().move(k,B))},x:function(k){return null==k?this.bbox().x:this.move(k,this.bbox().y)},y:function(k){return null==k?this.bbox().y:this.move(this.bbox().x,k)},size:function(k,B){var X=qe(this,k,B);return this.attr("d",this.array().size(X.width,X.height))},width:function(k){return null==k?this.bbox().width:this.size(k,this.bbox().height)},height:function(k){return null==k?this.bbox().height:this.size(this.bbox().width,k)}},construct:{path:function(k){return this.put(new S.Path).plot(k||new S.PathArray)}}}),S.Image=S.invent({create:"image",inherit:S.Shape,extend:{load:function(k){if(!k)return this;var B=this,X=new de.Image;return S.on(X,"load",function(){S.off(X);var ge=B.parent(S.Pattern);null!==ge&&(0==B.width()&&0==B.height()&&B.size(X.width,X.height),ge&&0==ge.width()&&0==ge.height()&&ge.size(B.width(),B.height()),"function"==typeof B._loaded&&B._loaded.call(B,{width:X.width,height:X.height,ratio:X.width/X.height,url:k}))}),S.on(X,"error",function(ge){S.off(X),"function"==typeof B._error&&B._error.call(B,ge)}),this.attr("href",X.src=this.src=k,S.xlink)},loaded:function(k){return this._loaded=k,this},error:function(k){return this._error=k,this}},construct:{image:function(k,B,X){return this.put(new S.Image).load(k).size(B||0,X||B||0)}}}),S.Text=S.invent({create:function(){this.constructor.call(this,S.create("text")),this.dom.leading=new S.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",S.defaults.attrs["font-family"])},inherit:S.Shape,extend:{x:function(k){return null==k?this.attr("x"):this.attr("x",k)},y:function(k){var B=this.attr("y"),X="number"==typeof B?B-this.bbox().y:0;return null==k?"number"==typeof B?B-X:B:this.attr("y","number"==typeof k.valueOf()?k+X:k)},cx:function(k){return null==k?this.bbox().cx:this.x(k-this.bbox().width/2)},cy:function(k){return null==k?this.bbox().cy:this.y(k-this.bbox().height/2)},text:function(k){if(void 0===k){k="";for(var B=this.node.childNodes,X=0,ge=B.length;X<ge;++X)0!=X&&3!=B[X].nodeType&&1==S.adopt(B[X]).dom.newLined&&(k+="\n"),k+=B[X].textContent;return k}if(this.clear().build(!0),"function"==typeof k)k.call(this,this);else{X=0;for(var Ie=(k=k.split("\n")).length;X<Ie;X++)this.tspan(k[X]).newLine()}return this.build(!1).rebuild()},size:function(k){return this.attr("font-size",k).rebuild()},leading:function(k){return null==k?this.dom.leading:(this.dom.leading=new S.Number(k),this.rebuild())},lines:function(){var k=(this.textPath&&this.textPath()||this).node,B=S.utils.map(S.utils.filterSVGElements(k.childNodes),function(X){return S.adopt(X)});return new S.Set(B)},rebuild:function(k){if("boolean"==typeof k&&(this._rebuild=k),this._rebuild){var B=this,X=0,ge=this.dom.leading*new S.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(B.textPath()||this.attr("x",B.attr("x")),"\n"==this.text()?X+=ge:(this.attr("dy",ge+X),X=0))}),this.fire("rebuild")}return this},build:function(k){return this._build=!!k,this},setData:function(k){return this.dom=k,this.dom.leading=new S.Number(k.leading||1.3),this}},construct:{text:function(k){return this.put(new S.Text).text(k)},plain:function(k){return this.put(new S.Text).plain(k)}}}),S.Tspan=S.invent({create:"tspan",inherit:S.Shape,extend:{text:function(k){return null==k?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof k?k.call(this,this):this.plain(k),this)},dx:function(k){return this.attr("dx",k)},dy:function(k){return this.attr("dy",k)},newLine:function(){var k=this.parent(S.Text);return this.dom.newLined=!0,this.dy(k.dom.leading*k.attr("font-size")).attr("x",k.x())}}}),S.extend(S.Text,S.Tspan,{plain:function(k){return!1===this._build&&this.clear(),this.node.appendChild(D.createTextNode(k)),this},tspan:function(k){var B=(this.textPath&&this.textPath()||this).node,X=new S.Tspan;return!1===this._build&&this.clear(),B.appendChild(X.node),X.text(k)},clear:function(){for(var k=(this.textPath&&this.textPath()||this).node;k.hasChildNodes();)k.removeChild(k.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),S.TextPath=S.invent({create:"textPath",inherit:S.Parent,parent:S.Text,construct:{morphArray:S.PathArray,path:function(k){for(var B=new S.TextPath,X=this.doc().defs().path(k);this.node.hasChildNodes();)B.node.appendChild(this.node.firstChild);return this.node.appendChild(B.node),B.attr("href","#"+X,S.xlink),this},array:function(){var k=this.track();return k?k.array():null},plot:function(k){var B=this.track(),X=null;return B&&(X=B.plot(k)),null==k?X:this},track:function(){var k=this.textPath();if(k)return k.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return S.adopt(this.node.firstChild)}}}),S.Nested=S.invent({create:function(){this.constructor.call(this,S.create("svg")),this.style("overflow","visible")},inherit:S.Container,construct:{nested:function(){return this.put(new S.Nested)}}}),S.A=S.invent({create:"a",inherit:S.Container,extend:{to:function(k){return this.attr("href",k,S.xlink)},show:function(k){return this.attr("show",k,S.xlink)},target:function(k){return this.attr("target",k)}},construct:{link:function(k){return this.put(new S.A).to(k)}}}),S.extend(S.Element,{linkTo:function(k){var B=new S.A;return"function"==typeof k?k.call(B,B):B.to(k),this.parent().put(B).put(this)}}),S.Marker=S.invent({create:"marker",inherit:S.Container,extend:{width:function(k){return this.attr("markerWidth",k)},height:function(k){return this.attr("markerHeight",k)},ref:function(k,B){return this.attr("refX",k).attr("refY",B)},update:function(k){return this.clear(),"function"==typeof k&&k.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(k,B,X){return this.defs().marker(k,B,X)}}}),S.extend(S.Defs,{marker:function(k,B,X){return this.put(new S.Marker).size(k,B).ref(k/2,B/2).viewbox(0,0,k,B).attr("orient","auto").update(X)}}),S.extend(S.Line,S.Polyline,S.Polygon,S.Path,{marker:function(k,B,X,ge){var Ie=["marker"];return"all"!=k&&Ie.push(k),Ie=Ie.join("-"),k=arguments[1]instanceof S.Marker?arguments[1]:this.doc().marker(B,X,ge),this.attr(Ie,k)}});var be={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(k,B){return"color"==B?k:k+"-"+B}};function we(z,k,B,X){return B+X.replace(S.regex.dots," .")}function ne(z){for(var k=z.slice(0),B=k.length;B--;)Array.isArray(k[B])&&(k[B]=ne(k[B]));return k}function fe(z){return z.toLowerCase().replace(/-(.)/g,function(k,B){return B.toUpperCase()})}function Ae(z){return z.charAt(0).toUpperCase()+z.slice(1)}function We(z){var k=z.toString(16);return 1==k.length?"0"+k:k}function qe(z,k,B){if(null==k||null==B){var X=z.bbox();null==k?k=X.width/X.height*B:null==B&&(B=X.height/X.width*k)}return{width:k,height:B}}function Be(z,k,B){return{x:k*z.a+B*z.c+0,y:k*z.b+B*z.d+0}}function st(z){return{a:z[0],b:z[1],c:z[2],d:z[3],e:z[4],f:z[5]}}function Y(z,k){z.cx=null==z.cx?k.bbox().cx:z.cx,z.cy=null==z.cy?k.bbox().cy:z.cy}function vn(z){for(var k=z.childNodes.length-1;k>=0;k--)z.childNodes[k]instanceof de.SVGElement&&vn(z.childNodes[k]);return S.adopt(z).id(S.eid(z.nodeName))}function nn(z){return null==z.x&&(z.x=0,z.y=0,z.width=0,z.height=0),z.w=z.width,z.h=z.height,z.x2=z.x+z.width,z.y2=z.y+z.height,z.cx=z.x+z.width/2,z.cy=z.y+z.height/2,z}function Ot(z){return Math.abs(z)>1e-37?z:0}["fill","stroke"].forEach(function(z){var k,B={};B[z]=function(X){if(void 0===X)return this;if("string"==typeof X||S.Color.isRgb(X)||X&&"function"==typeof X.fill)this.attr(z,X);else for(k=be[z].length-1;k>=0;k--)null!=X[be[z][k]]&&this.attr(be.prefix(z,be[z][k]),X[be[z][k]]);return this},S.extend(S.Element,S.FX,B)}),S.extend(S.Element,S.FX,{rotate:function(k,B,X){return this.transform({rotation:k,cx:B,cy:X})},skew:function(k,B,X,ge){return this.transform(1==arguments.length||3==arguments.length?{skew:k,cx:B,cy:X}:{skewX:k,skewY:B,cx:X,cy:ge})},scale:function(k,B,X,ge){return this.transform(1==arguments.length||3==arguments.length?{scale:k,cx:B,cy:X}:{scaleX:k,scaleY:B,cx:X,cy:ge})},translate:function(k,B){return this.transform({x:k,y:B})},flip:function(k,B){return this.transform({flip:k||"both",offset:B="number"==typeof k?k:B})},matrix:function(k){return this.attr("transform",new S.Matrix(6==arguments.length?[].slice.call(arguments):k))},opacity:function(k){return this.attr("opacity",k)},dx:function(k){return this.x(new S.Number(k).plus(this instanceof S.FX?0:this.x()),!0)},dy:function(k){return this.y(new S.Number(k).plus(this instanceof S.FX?0:this.y()),!0)},dmove:function(k,B){return this.dx(k).dy(B)}}),S.extend(S.Rect,S.Ellipse,S.Circle,S.Gradient,S.FX,{radius:function(k,B){var X=(this._target||this).type;return"radial"==X||"circle"==X?this.attr("r",new S.Number(k)):this.rx(k).ry(null==B?k:B)}}),S.extend(S.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(k){return this.node.getPointAtLength(k)}}),S.extend(S.Parent,S.Text,S.Tspan,S.FX,{font:function(k,B){if("object"==typeof k)for(B in k)this.font(B,k[B]);return"leading"==k?this.leading(B):this.attr("anchor"==k?"text-anchor":"size"==k||"family"==k||"weight"==k||"stretch"==k||"variant"==k||"style"==k?"font-"+k:k,B)}}),S.Set=S.invent({create:function(k){k instanceof S.Set?this.members=k.members.slice():Array.isArray(k)?this.members=k:this.clear()},extend:{add:function(){var k,B,X=[].slice.call(arguments);for(k=0,B=X.length;k<B;k++)this.members.push(X[k]);return this},remove:function(k){var B=this.index(k);return B>-1&&this.members.splice(B,1),this},each:function(k){for(var B=0,X=this.members.length;B<X;B++)k.apply(this.members[B],[B,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(k){return this.index(k)>=0},index:function(k){return this.members.indexOf(k)},get:function(k){return this.members[k]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new S.RBox;var k=this.members[0].rbox(this.members[0].doc());return this.each(function(){k=k.merge(this.rbox(this.doc()))}),k}},construct:{set:function(k){return new S.Set(k)}}}),S.FX.Set=S.invent({create:function(k){this.set=k}}),S.Set.inherit=function(){var k=[];for(var z in S.Shape.prototype)"function"==typeof S.Shape.prototype[z]&&"function"!=typeof S.Set.prototype[z]&&k.push(z);for(var z in k.forEach(function(B){S.Set.prototype[B]=function(){for(var X=0,ge=this.members.length;X<ge;X++)this.members[X]&&"function"==typeof this.members[X][B]&&this.members[X][B].apply(this.members[X],arguments);return"animate"==B?this.fx||(this.fx=new S.FX.Set(this)):this}}),k=[],S.FX.prototype)"function"==typeof S.FX.prototype[z]&&"function"!=typeof S.FX.Set.prototype[z]&&k.push(z);k.forEach(function(B){S.FX.Set.prototype[B]=function(){for(var X=0,ge=this.set.members.length;X<ge;X++)this.set.members[X].fx[B].apply(this.set.members[X].fx,arguments);return this}})},S.extend(S.Element,{data:function(k,B,X){if("object"==typeof k)for(B in k)this.data(B,k[B]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+k))}catch(ge){return this.attr("data-"+k)}else this.attr("data-"+k,null===B?null:!0===X||"string"==typeof B||"number"==typeof B?B:JSON.stringify(B));return this}}),S.extend(S.Element,{remember:function(k,B){if("object"==typeof arguments[0])for(var B in k)this.remember(B,k[B]);else{if(1==arguments.length)return this.memory()[k];this.memory()[k]=B}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var k=arguments.length-1;k>=0;k--)delete this.memory()[arguments[k]];return this},memory:function(){return this._memory||(this._memory={})}}),S.get=function(z){var k=D.getElementById(function(z){var k=(z||"").toString().match(S.regex.reference);if(k)return k[1]}(z)||z);return S.adopt(k)},S.select=function(z,k){return new S.Set(S.utils.map((k||D).querySelectorAll(z),function(B){return S.adopt(B)}))},S.extend(S.Parent,{select:function(k){return S.select(k,this.node)}});var Ct="abcdef".split("");if("function"!=typeof de.CustomEvent){var Zt=function(k,B){B=B||{bubbles:!1,cancelable:!1,detail:void 0};var X=D.createEvent("CustomEvent");return X.initCustomEvent(k,B.bubbles,B.cancelable,B.detail),X};Zt.prototype=de.Event.prototype,S.CustomEvent=Zt}else S.CustomEvent=de.CustomEvent;return function(z){for(var k=0,B=["moz","webkit"],X=0;X<B.length&&!de.requestAnimationFrame;++X)z.requestAnimationFrame=z[B[X]+"RequestAnimationFrame"],z.cancelAnimationFrame=z[B[X]+"CancelAnimationFrame"]||z[B[X]+"CancelRequestAnimationFrame"];z.requestAnimationFrame=z.requestAnimationFrame||function(ge){var Ie=(new Date).getTime(),nt=Math.max(0,16-(Ie-k)),_t=z.setTimeout(function(){ge(Ie+nt)},nt);return k=Ie+nt,_t},z.cancelAnimationFrame=z.cancelAnimationFrame||z.clearTimeout}(de),S}(de,de.document)}.call(mt,J,mt,rn))&&(rn.exports=_e)},8181:function(rn,mt,J){"use strict";var _e=J(7528),de=J(9187),D=J(7289),M=J(5134),S=J(1885),re=J(9727),Re=J(6054),ke=J(3740),v=J(5366),be=null;function we(){return be}var Q=function i(){(0,M.Z)(this,i)},fe=new v.OlP("DocumentToken"),Ae=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,D.Z)(s,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,v.Yz7)({factory:Le,token:i,providedIn:"platform"}),i}();function Le(){return(0,v.LFG)(qe)}var We=new v.OlP("Location Initialized"),qe=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this))._doc=a,o._init(),o}return(0,D.Z)(r,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return we().getBaseHref(this._doc)}},{key:"onPopState",value:function(o){var u=we().getGlobalEventTarget(this._doc,"window");return u.addEventListener("popstate",o,!1),function(){return u.removeEventListener("popstate",o)}}},{key:"onHashChange",value:function(o){var u=we().getGlobalEventTarget(this._doc,"window");return u.addEventListener("hashchange",o,!1),function(){return u.removeEventListener("hashchange",o)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(o){this.location.pathname=o}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(o,u,c){Be()?this._history.pushState(o,u,c):this.location.hash=c}},{key:"replaceState",value:function(o,u,c){Be()?this._history.replaceState(o,u,c):this.location.hash=c}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(o)}},{key:"getState",value:function(){return this._history.state}}]),r}(Ae);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe))},i.\u0275prov=(0,v.Yz7)({factory:st,token:i,providedIn:"platform"}),i}();function Be(){return!!window.history.pushState}function st(){return new qe((0,v.LFG)(fe))}function Qe(i,s){if(0==i.length)return s;if(0==s.length)return i;var n=0;return i.endsWith("/")&&n++,s.startsWith("/")&&n++,2==n?i+s.substring(1):1==n?i+s:i+"/"+s}function Y(i){var s=i.match(/#|\?|$/),n=s&&s.index||i.length;return i.slice(0,n-("/"===i[n-1]?1:0))+i.slice(n)}function dn(i){return i&&"?"!==i[0]?"?"+i:i}var vn=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,D.Z)(s,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,v.Yz7)({factory:nn,token:i,providedIn:"root"}),i}();function nn(i){var s=(0,v.LFG)(fe).location;return new Ot((0,v.LFG)(Ae),s&&s.origin||"")}var xt=new v.OlP("appBaseHref"),Ot=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o){var u;if((0,M.Z)(this,r),(u=n.call(this))._platformLocation=a,u._removeListenerFns=[],null==o&&(o=u._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return u._baseHref=o,u}return(0,D.Z)(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(o){return Qe(this._baseHref,o)}},{key:"path",value:function(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=this._platformLocation.pathname+dn(this._platformLocation.search),c=this._platformLocation.hash;return c&&o?"".concat(u).concat(c):u}},{key:"pushState",value:function(o,u,c,d){var m=this.prepareExternalUrl(c+dn(d));this._platformLocation.pushState(o,u,m)}},{key:"replaceState",value:function(o,u,c,d){var m=this.prepareExternalUrl(c+dn(d));this._platformLocation.replaceState(o,u,m)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var u,c,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(c=(u=this._platformLocation).historyGo)||void 0===c||c.call(u,o)}}]),r}(vn);return i.\u0275fac=function(n){return new(n||i)(v.LFG(Ae),v.LFG(xt,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Ct=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o){var u;return(0,M.Z)(this,r),(u=n.call(this))._platformLocation=a,u._baseHref="",u._removeListenerFns=[],null!=o&&(u._baseHref=o),u}return(0,D.Z)(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var u=this._platformLocation.hash;return null==u&&(u="#"),u.length>0?u.substring(1):u}},{key:"prepareExternalUrl",value:function(o){var u=Qe(this._baseHref,o);return u.length>0?"#"+u:u}},{key:"pushState",value:function(o,u,c,d){var m=this.prepareExternalUrl(c+dn(d));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(o,u,m)}},{key:"replaceState",value:function(o,u,c,d){var m=this.prepareExternalUrl(c+dn(d));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(o,u,m)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var u,c,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(c=(u=this._platformLocation).historyGo)||void 0===c||c.call(u,o)}}]),r}(vn);return i.\u0275fac=function(n){return new(n||i)(v.LFG(Ae),v.LFG(xt,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Zt=function(){var i=function(){function s(n,r){var a=this;(0,M.Z)(this,s),this._subject=new v.vpe,this._urlChangeListeners=[],this._platformStrategy=n;var o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Y(B(o)),this._platformStrategy.onPopState(function(u){a._subject.emit({url:a.path(!0),pop:!0,state:u.state,type:u.type})})}return(0,D.Z)(s,[{key:"path",value:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(r))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(r+dn(a))}},{key:"normalize",value:function(r){return s.stripTrailingSlash(function(i,s){return i&&s.startsWith(i)?s.substring(i.length):s}(this._baseHref,B(r)))}},{key:"prepareExternalUrl",value:function(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}},{key:"go",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(o,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+dn(a)),o)}},{key:"replaceState",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(o,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+dn(a)),o)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var a,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(o=(a=this._platformStrategy).historyGo)||void 0===o||o.call(a,r)}},{key:"onUrlChange",value:function(r){var a=this;this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(o){a._notifyUrlChangeListeners(o.url,o.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(o){return o(r,a)})}},{key:"subscribe",value:function(r,a,o){return this._subject.subscribe({next:r,error:a,complete:o})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(vn),v.LFG(Ae))},i.normalizeQueryParams=dn,i.joinWithSlash=Qe,i.stripTrailingSlash=Y,i.\u0275prov=(0,v.Yz7)({factory:z,token:i,providedIn:"root"}),i}();function z(){return new Zt((0,v.LFG)(vn),(0,v.LFG)(Ae))}function B(i){return i.replace(/\/index.html$/,"")}var Ie=function(i){return i[i.Zero=0]="Zero",i[i.One=1]="One",i[i.Two=2]="Two",i[i.Few=3]="Few",i[i.Many=4]="Many",i[i.Other=5]="Other",i}({}),Zs=v.kL8,Sa=function i(){(0,M.Z)(this,i)},_a=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this)).locale=a,o}return(0,D.Z)(r,[{key:"getPluralCategory",value:function(o,u){switch(Zs(u||this.locale)(o)){case Ie.Zero:return"zero";case Ie.One:return"one";case Ie.Two:return"two";case Ie.Few:return"few";case Ie.Many:return"many";default:return"other"}}}]),r}(Sa);return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.soG))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();var wr=function(){var i=function(){function s(n,r,a,o){(0,M.Z)(this,s),this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=a,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return(0,D.Z)(s,[{key:"klass",set:function(r){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof r?r.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(r){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof r?r.split(/\s+/):r,this._rawClass&&((0,v.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var r=this._iterableDiffer.diff(this._rawClass);r&&this._applyIterableChanges(r)}else if(this._keyValueDiffer){var a=this._keyValueDiffer.diff(this._rawClass);a&&this._applyKeyValueChanges(a)}}},{key:"_applyKeyValueChanges",value:function(r){var a=this;r.forEachAddedItem(function(o){return a._toggleClass(o.key,o.currentValue)}),r.forEachChangedItem(function(o){return a._toggleClass(o.key,o.currentValue)}),r.forEachRemovedItem(function(o){o.previousValue&&a._toggleClass(o.key,!1)})}},{key:"_applyIterableChanges",value:function(r){var a=this;r.forEachAddedItem(function(o){if("string"!=typeof o.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat((0,v.AaK)(o.item)));a._toggleClass(o.item,!0)}),r.forEachRemovedItem(function(o){return a._toggleClass(o.item,!1)})}},{key:"_applyClasses",value:function(r){var a=this;r&&(Array.isArray(r)||r instanceof Set?r.forEach(function(o){return a._toggleClass(o,!0)}):Object.keys(r).forEach(function(o){return a._toggleClass(o,!!r[o])}))}},{key:"_removeClasses",value:function(r){var a=this;r&&(Array.isArray(r)||r instanceof Set?r.forEach(function(o){return a._toggleClass(o,!1)}):Object.keys(r).forEach(function(o){return a._toggleClass(o,!1)}))}},{key:"_toggleClass",value:function(r,a){var o=this;(r=r.trim())&&r.split(/\s+/g).forEach(function(u){a?o._renderer.addClass(o._ngEl.nativeElement,u):o._renderer.removeClass(o._ngEl.nativeElement,u)})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i}(),es=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.$implicit=s,this.ngForOf=n,this.index=r,this.count=a}return(0,D.Z)(i,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),i}(),nl=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._viewContainer=n,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return(0,D.Z)(s,[{key:"ngForOf",set:function(r){this._ngForOf=r,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(r){this._trackByFn=r}},{key:"ngForTemplate",set:function(r){r&&(this._template=r)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(o){throw new Error("Cannot find a differ supporting object '".concat(r,"' of type '").concat(function(i){return i.name||typeof i}(r),"'. NgFor only supports binding to Iterables such as Arrays."))}}if(this._differ){var a=this._differ.diff(this._ngForOf);a&&this._applyChanges(a)}}},{key:"_applyChanges",value:function(r){var a=this,o=[];r.forEachOperation(function(_,b,E){if(null==_.previousIndex){var T=a._viewContainer.createEmbeddedView(a._template,new es(null,a._ngForOf,-1,-1),null===E?void 0:E),I=new vo(_,T);o.push(I)}else if(null==E)a._viewContainer.remove(null===b?void 0:b);else if(null!==b){var N=a._viewContainer.get(b);a._viewContainer.move(N,E);var W=new vo(_,N);o.push(W)}});for(var u=0;u<o.length;u++)this._perViewChange(o[u].view,o[u].record);for(var c=0,d=this._viewContainer.length;c<d;c++){var m=this._viewContainer.get(c);m.context.index=c,m.context.count=d,m.context.ngForOf=this._ngForOf}r.forEachIdentityChange(function(_){a._viewContainer.get(_.currentIndex).context.$implicit=_.item})}},{key:"_perViewChange",value:function(r,a){r.context.$implicit=a.item}}],[{key:"ngTemplateContextGuard",value:function(r,a){return!0}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i}(),vo=function i(s,n){(0,M.Z)(this,i),this.record=s,this.view=n},As=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this._viewContainer=n,this._context=new Ro,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}return(0,D.Z)(s,[{key:"ngIf",set:function(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}},{key:"ngIfThen",set:function(r){Fa("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(r){Fa("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(r,a){return!0}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.s_b),v.Y36(v.Rgc))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i}(),Ro=function i(){(0,M.Z)(this,i),this.$implicit=null,this.ngIf=null};function Fa(i,s){if(s&&!s.createEmbeddedView)throw new Error("".concat(i," must be a TemplateRef, but received '").concat((0,v.AaK)(s),"'."))}var G=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[{provide:Sa,useClass:_a}]}),i}();function me(i){return"server"===i}var yt=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275prov=(0,v.Yz7)({token:i,providedIn:"root",factory:function(){return new Wt((0,v.LFG)(fe),window)}}),i}(),Wt=function(){function i(s,n){(0,M.Z)(this,i),this.document=s,this.window=n,this.offset=function(){return[0,0]}}return(0,D.Z)(i,[{key:"setOffset",value:function(n){this.offset=Array.isArray(n)?function(){return n}:n}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}},{key:"scrollToAnchor",value:function(n){if(this.supportsScrolling()){var r=function(i,s){var n=i.getElementById(s)||i.getElementsByName(s)[0];if(n)return n;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow))for(var r=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT),a=r.currentNode;a;){var o=a.shadowRoot;if(o){var u=o.getElementById(s)||o.querySelector('[name="'.concat(s,'"]'));if(u)return u}a=r.nextNode()}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}}},{key:"setHistoryScrollRestoration",value:function(n){if(this.supportScrollRestoration()){var r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}},{key:"scrollToElement",value:function(n){var r=n.getBoundingClientRect(),a=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(a-u[0],o-u[1])}},{key:"attemptFocus",value:function(n){return n.focus(),this.document.activeElement===n}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var n=qt(this.window.history)||qt(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(r){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}]),i}();function qt(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}var zr,di=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"onAndCancel",value:function(a,o,u){return a.addEventListener(o,u,!1),function(){a.removeEventListener(o,u,!1)}}},{key:"dispatchEvent",value:function(a,o){a.dispatchEvent(o)}},{key:"remove",value:function(a){a.parentNode&&a.parentNode.removeChild(a)}},{key:"createElement",value:function(a,o){return(o=o||this.getDefaultDocument()).createElement(a)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(a){return a.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(a){return a instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(a,o){return"window"===o?window:"document"===o?a:"body"===o?a.body:null}},{key:"getBaseHref",value:function(a){var o=(Ta=Ta||document.querySelector("base"))?Ta.getAttribute("href"):null;return null==o?null:function(i){(zr=zr||document.createElement("a")).setAttribute("href",i);var s=zr.pathname;return"/"===s.charAt(0)?s:"/".concat(s)}(o)}},{key:"resetBaseElement",value:function(){Ta=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(a){return function(i,s){s=encodeURIComponent(s);var r,n=(0,Re.Z)(i.split(";"));try{for(n.s();!(r=n.n()).done;){var a=r.value,o=a.indexOf("="),u=-1==o?[a,""]:[a.slice(0,o),a.slice(o+1)],c=(0,ke.Z)(u,2),m=c[1];if(c[0].trim()===s)return decodeURIComponent(m)}}catch(_){n.e(_)}finally{n.f()}return null}(document.cookie,a)}}],[{key:"makeCurrent",value:function(){!function(i){be||(be=i)}(new n)}}]),n}(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.apply(this,arguments)).supportsDOMEvents=!0,r}return n}(Q)),Ta=null,An=new v.OlP("TRANSITION_ID"),$i=[{provide:v.ip1,useFactory:function(i,s,n){return function(){n.get(v.CZH).donePromise.then(function(){for(var r=we(),a=s.querySelectorAll('style[ng-transition="'.concat(i,'"]')),o=0;o<a.length;o++)r.remove(a[o])})}},deps:[An,fe,v.zs3],multi:!0}],va=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"addToWindow",value:function(n){v.dqk.getAngularTestability=function(a){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=n.findTestabilityInTree(a,o);if(null==u)throw new Error("Could not find testability for element.");return u},v.dqk.getAllAngularTestabilities=function(){return n.getAllTestabilities()},v.dqk.getAllAngularRootElements=function(){return n.getAllRootElements()},v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(function(o){var u=v.dqk.getAllAngularTestabilities(),c=u.length,d=!1,m=function(b){d=d||b,0==--c&&o(d)};u.forEach(function(_){_.whenStable(m)})})}},{key:"findTestabilityInTree",value:function(n,r,a){if(null==r)return null;var o=n.getTestability(r);return null!=o?o:a?we().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}],[{key:"init",value:function(){(0,v.VLi)(new i)}}]),i}(),Mr=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,D.Z)(s,[{key:"build",value:function(){return new XMLHttpRequest}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Cl=new v.OlP("EventManagerPlugins"),cc=function(){var i=function(){function s(n,r){var a=this;(0,M.Z)(this,s),this._zone=r,this._eventNameToPlugin=new Map,n.forEach(function(o){return o.manager=a}),this._plugins=n.slice().reverse()}return(0,D.Z)(s,[{key:"addEventListener",value:function(r,a,o){return this._findPluginFor(a).addEventListener(r,a,o)}},{key:"addGlobalEventListener",value:function(r,a,o){return this._findPluginFor(a).addGlobalEventListener(r,a,o)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(r){var a=this._eventNameToPlugin.get(r);if(a)return a;for(var o=this._plugins,u=0;u<o.length;u++){var c=o[u];if(c.supports(r))return this._eventNameToPlugin.set(r,c),c}throw new Error("No event manager plugin found for event ".concat(r))}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Cl),v.LFG(v.R0b))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Wf=function(){function i(s){(0,M.Z)(this,i),this._doc=s}return(0,D.Z)(i,[{key:"addGlobalEventListener",value:function(n,r,a){var o=we().getGlobalEventTarget(this._doc,n);if(!o)throw new Error("Unsupported event target ".concat(o," for event ").concat(r));return this.addEventListener(o,r,a)}}]),i}(),qf=function(){var i=function(){function s(){(0,M.Z)(this,s),this._stylesSet=new Set}return(0,D.Z)(s,[{key:"addStyles",value:function(r){var a=this,o=new Set;r.forEach(function(u){a._stylesSet.has(u)||(a._stylesSet.add(u),o.add(u))}),this.onStylesAdded(o)}},{key:"onStylesAdded",value:function(r){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),fc=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this))._doc=a,o._hostNodes=new Map,o._hostNodes.set(a.head,[]),o}return(0,D.Z)(r,[{key:"_addStylesToHost",value:function(o,u,c){var d=this;o.forEach(function(m){var _=d._doc.createElement("style");_.textContent=m,c.push(u.appendChild(_))})}},{key:"addHost",value:function(o){var u=[];this._addStylesToHost(this._stylesSet,o,u),this._hostNodes.set(o,u)}},{key:"removeHost",value:function(o){var u=this._hostNodes.get(o);u&&u.forEach(Yf),this._hostNodes.delete(o)}},{key:"onStylesAdded",value:function(o){var u=this;this._hostNodes.forEach(function(c,d){u._addStylesToHost(o,d,c)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(o){return o.forEach(Yf)})}}]),r}(qf);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();function Yf(i){we().remove(i)}var Sl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},jt=/%COMP%/g,pa="_nghost-".concat("%COMP%"),Kf="_ngcontent-".concat("%COMP%");function Ds(i,s,n){for(var r=0;r<s.length;r++){var a=s[r];Array.isArray(a)?Ds(i,a,n):(a=a.replace(jt,i),n.push(a))}return n}function rf(i){return function(s){if("__ngUnwrap__"===s)return i;!1===i(s)&&(s.preventDefault(),s.returnValue=!1)}}var Ml=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this.eventManager=n,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new hc(n)}return(0,D.Z)(s,[{key:"createRenderer",value:function(r,a){if(!r||!a)return this.defaultRenderer;switch(a.encapsulation){case v.ifc.Emulated:var o=this.rendererByCompId.get(a.id);return o||(o=new Lo(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,o)),o.applyToHost(r),o;case 1:case v.ifc.ShadowDom:return new _u(this.eventManager,this.sharedStylesHost,r,a);default:if(!this.rendererByCompId.has(a.id)){var u=Ds(a.id,a.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(cc),v.LFG(fc),v.LFG(v.AFp))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),hc=function(){function i(s){(0,M.Z)(this,i),this.eventManager=s,this.data=Object.create(null)}return(0,D.Z)(i,[{key:"destroy",value:function(){}},{key:"createElement",value:function(n,r){return r?document.createElementNS(Sl[r]||r,n):document.createElement(n)}},{key:"createComment",value:function(n){return document.createComment(n)}},{key:"createText",value:function(n){return document.createTextNode(n)}},{key:"appendChild",value:function(n,r){n.appendChild(r)}},{key:"insertBefore",value:function(n,r,a){n&&n.insertBefore(r,a)}},{key:"removeChild",value:function(n,r){n&&n.removeChild(r)}},{key:"selectRootElement",value:function(n,r){var a="string"==typeof n?document.querySelector(n):n;if(!a)throw new Error('The selector "'.concat(n,'" did not match any elements'));return r||(a.textContent=""),a}},{key:"parentNode",value:function(n){return n.parentNode}},{key:"nextSibling",value:function(n){return n.nextSibling}},{key:"setAttribute",value:function(n,r,a,o){if(o){r=o+":"+r;var u=Sl[o];u?n.setAttributeNS(u,r,a):n.setAttribute(r,a)}else n.setAttribute(r,a)}},{key:"removeAttribute",value:function(n,r,a){if(a){var o=Sl[a];o?n.removeAttributeNS(o,r):n.removeAttribute("".concat(a,":").concat(r))}else n.removeAttribute(r)}},{key:"addClass",value:function(n,r){n.classList.add(r)}},{key:"removeClass",value:function(n,r){n.classList.remove(r)}},{key:"setStyle",value:function(n,r,a,o){o&(v.JOm.DashCase|v.JOm.Important)?n.style.setProperty(r,a,o&v.JOm.Important?"important":""):n.style[r]=a}},{key:"removeStyle",value:function(n,r,a){a&v.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}},{key:"setProperty",value:function(n,r,a){n[r]=a}},{key:"setValue",value:function(n,r){n.nodeValue=r}},{key:"listen",value:function(n,r,a){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,rf(a)):this.eventManager.addEventListener(n,r,rf(a))}}]),i}(),Lo=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;(0,M.Z)(this,n),(c=s.call(this,r)).component=o;var d=Ds(u+"-"+o.id,o.styles,[]);return a.addStyles(d),c.contentAttr=function(i){return Kf.replace(jt,i)}(u+"-"+o.id),c.hostAttr=function(i){return pa.replace(jt,i)}(u+"-"+o.id),c}return(0,D.Z)(n,[{key:"applyToHost",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"setAttribute",this).call(this,a,this.hostAttr,"")}},{key:"createElement",value:function(a,o){var u=(0,_e.Z)((0,de.Z)(n.prototype),"createElement",this).call(this,a,o);return(0,_e.Z)((0,de.Z)(n.prototype),"setAttribute",this).call(this,u,this.contentAttr,""),u}}]),n}(hc),_u=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;(0,M.Z)(this,n),(c=s.call(this,r)).sharedStylesHost=a,c.hostEl=o,c.shadowRoot=o.attachShadow({mode:"open"}),c.sharedStylesHost.addHost(c.shadowRoot);for(var d=Ds(u.id,u.styles,[]),m=0;m<d.length;m++){var _=document.createElement("style");_.textContent=d[m],c.shadowRoot.appendChild(_)}return c}return(0,D.Z)(n,[{key:"nodeOrShadowRoot",value:function(a){return a===this.hostEl?this.shadowRoot:a}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(a,o){return(0,_e.Z)((0,de.Z)(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(a),o)}},{key:"insertBefore",value:function(a,o,u){return(0,_e.Z)((0,de.Z)(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(a),o,u)}},{key:"removeChild",value:function(a,o){return(0,_e.Z)((0,de.Z)(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(a),o)}},{key:"parentNode",value:function(a){return this.nodeOrShadowRoot((0,_e.Z)((0,de.Z)(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(a)))}}]),n}(hc),bu=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a){return(0,M.Z)(this,r),n.call(this,a)}return(0,D.Z)(r,[{key:"supports",value:function(o){return!0}},{key:"addEventListener",value:function(o,u,c){var d=this;return o.addEventListener(u,c,!1),function(){return d.removeEventListener(o,u,c)}}},{key:"removeEventListener",value:function(o,u,c){return o.removeEventListener(u,c)}}]),r}(Wf);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),gd=["alt","control","meta","shift"],sf={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},of={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},St={alt:function(s){return s.altKey},control:function(s){return s.ctrlKey},meta:function(s){return s.metaKey},shift:function(s){return s.shiftKey}},lt=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a){return(0,M.Z)(this,r),n.call(this,a)}return(0,D.Z)(r,[{key:"supports",value:function(o){return null!=r.parseEventName(o)}},{key:"addEventListener",value:function(o,u,c){var d=r.parseEventName(u),m=r.eventCallback(d.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return we().onAndCancel(o,d.domEventName,m)})}}],[{key:"parseEventName",value:function(o){var u=o.toLowerCase().split("."),c=u.shift();if(0===u.length||"keydown"!==c&&"keyup"!==c)return null;var d=r._normalizeKey(u.pop()),m="";if(gd.forEach(function(b){var E=u.indexOf(b);E>-1&&(u.splice(E,1),m+=b+".")}),m+=d,0!=u.length||0===d.length)return null;var _={};return _.domEventName=c,_.fullKey=m,_}},{key:"getEventFullKey",value:function(o){var u="",c=function(i){var s=i.key;if(null==s){if(null==(s=i.keyIdentifier))return"Unidentified";s.startsWith("U+")&&(s=String.fromCharCode(parseInt(s.substring(2),16)),3===i.location&&of.hasOwnProperty(s)&&(s=of[s]))}return sf[s]||s}(o);return" "===(c=c.toLowerCase())?c="space":"."===c&&(c="dot"),gd.forEach(function(d){d!=c&&(0,St[d])(o)&&(u+=d+".")}),u+=c}},{key:"eventCallback",value:function(o,u,c){return function(d){r.getEventFullKey(d)===o&&c.runGuarded(function(){return u(d)})}}},{key:"_normalizeKey",value:function(o){switch(o){case"esc":return"escape";default:return o}}}]),r}(Wf);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Bt=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,v.Yz7)({factory:function(){return(0,v.LFG)(Rn)},token:i,providedIn:"root"}),i}(),Rn=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this))._doc=a,o}return(0,D.Z)(r,[{key:"sanitize",value:function(o,u){if(null==u)return null;switch(o){case v.q3G.NONE:return u;case v.q3G.HTML:return(0,v.qzn)(u,"HTML")?(0,v.z3N)(u):(0,v.EiD)(this._doc,String(u)).toString();case v.q3G.STYLE:return(0,v.qzn)(u,"Style")?(0,v.z3N)(u):u;case v.q3G.SCRIPT:if((0,v.qzn)(u,"Script"))return(0,v.z3N)(u);throw new Error("unsafe value used in a script context");case v.q3G.URL:return(0,v.yhl)(u),(0,v.qzn)(u,"URL")?(0,v.z3N)(u):(0,v.mCW)(String(u));case v.q3G.RESOURCE_URL:if((0,v.qzn)(u,"ResourceURL"))return(0,v.z3N)(u);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(o," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(o){return(0,v.JVY)(o)}},{key:"bypassSecurityTrustStyle",value:function(o){return(0,v.L6k)(o)}},{key:"bypassSecurityTrustScript",value:function(o){return(0,v.eBb)(o)}},{key:"bypassSecurityTrustUrl",value:function(o){return(0,v.LAX)(o)}},{key:"bypassSecurityTrustResourceUrl",value:function(o){return(0,v.pB0)(o)}}]),r}(Bt);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe))},i.\u0275prov=(0,v.Yz7)({factory:function(){return function(i){return new Rn(i.get(fe))}((0,v.LFG)(v.gxx))},token:i,providedIn:"root"}),i}(),$a=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function(){di.makeCurrent(),va.init()},multi:!0},{provide:fe,useFactory:function(){return(0,v.RDi)(document),document},deps:[]}]),Xi=[[],{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function(){return new v.qLn},deps:[]},{provide:Cl,useClass:bu,multi:!0,deps:[fe,v.R0b,v.Lbi]},{provide:Cl,useClass:lt,multi:!0,deps:[fe]},[],{provide:Ml,useClass:Ml,deps:[cc,fc,v.AFp]},{provide:v.FYo,useExisting:Ml},{provide:qf,useExisting:fc},{provide:fc,useClass:fc,deps:[fe]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:cc,useClass:cc,deps:[Cl,v.R0b]},{provide:function i(){(0,M.Z)(this,i)},useClass:Mr,deps:[]},[]],ds=function(){var i=function(){function s(n){if((0,M.Z)(this,s),n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return(0,D.Z)(s,null,[{key:"withServerTransition",value:function(r){return{ngModule:s,providers:[{provide:v.AFp,useValue:r.appId},{provide:An,useExisting:v.AFp},$i]}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(i,12))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:Xi,imports:[G,v.hGG]}),i}();"undefined"!=typeof window&&window;var ng=function i(){(0,M.Z)(this,i)},_d=function i(){(0,M.Z)(this,i)},sl="*";function Dl(i,s){return{type:7,name:i,definitions:s,options:{}}}function Zo(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:s,timings:i}}function th(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:i,options:s}}function Vs(i){return{type:6,styles:i,offset:null}}function nu(i,s,n){return{type:0,name:i,styles:s,options:n}}function ol(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:i,animation:s,options:n}}function bd(i){Promise.resolve(null).then(i)}var ul=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,i),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=s+n}return(0,D.Z)(i,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[])}},{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var n=this;bd(function(){return n._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this._started=!1}},{key:"setPosition",value:function(n){this._position=this.totalTime?n*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}}]),i}(),x_=function(){function i(s){var n=this;(0,M.Z)(this,i),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=s;var r=0,a=0,o=0,u=this.players.length;0==u?bd(function(){return n._onFinish()}):this.players.forEach(function(c){c.onDone(function(){++r==u&&n._onFinish()}),c.onDestroy(function(){++a==u&&n._onDestroy()}),c.onStart(function(){++o==u&&n._onStart()})}),this.totalTime=this.players.reduce(function(c,d){return Math.max(c,d.totalTime)},0)}return(0,D.Z)(i,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(n){return n.init()})}},{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[])}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(n){return n.play()})}},{key:"pause",value:function(){this.players.forEach(function(n){return n.pause()})}},{key:"restart",value:function(){this.players.forEach(function(n){return n.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(n){return n.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(n){return n.destroy()}),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(n){return n.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(n){var r=n*this.totalTime;this.players.forEach(function(a){var o=a.totalTime?Math.min(1,r/a.totalTime):1;a.setPosition(o)})}},{key:"getPosition",value:function(){var n=this.players.reduce(function(r,a){return null===r||a.totalTime>r.totalTime?a:r},null);return null!=n?n.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(n){n.beforeDestroy&&n.beforeDestroy()})}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}}]),i}(),Gr=J(6837);function pc(){return"undefined"!=typeof window&&void 0!==window.document}function wd(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function ll(i){switch(i.length){case 0:return new ul;case 1:return i[0];default:return new x_(i)}}function Iv(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=[],c=[],d=-1,m=null;if(r.forEach(function(b){var E=b.offset,T=E==d,I=T&&m||{};Object.keys(b).forEach(function(N){var W=N,U=b[N];if("offset"!==N)switch(W=s.normalizePropertyName(W,u),U){case"!":U=a[N];break;case sl:U=o[N];break;default:U=s.normalizeStyleValue(N,W,U,u)}I[W]=U}),T||c.push(I),m=I,d=E}),u.length){var _="\n - ";throw new Error("Unable to animate due to the following errors:".concat(_).concat(u.join(_)))}return c}function Ou(i,s,n,r){switch(s){case"start":i.onStart(function(){return r(n&&mc(n,"start",i))});break;case"done":i.onDone(function(){return r(n&&mc(n,"done",i))});break;case"destroy":i.onDestroy(function(){return r(n&&mc(n,"destroy",i))})}}function mc(i,s,n){var r=n.totalTime,o=gc(i.element,i.triggerName,i.fromState,i.toState,s||i.phaseName,null==r?i.totalTime:r,!!n.disabled),u=i._data;return null!=u&&(o._data=u),o}function gc(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6?arguments[6]:void 0;return{element:i,triggerName:s,fromState:n,toState:r,phaseName:a,totalTime:o,disabled:!!u}}function Hs(i,s,n){var r;return i instanceof Map?(r=i.get(s))||i.set(s,r=n):(r=i[s])||(r=i[s]=n),r}function rh(i){var s=i.indexOf(":");return[i.substring(1,s),i.substr(s+1)]}var Rl=function(s,n){return!1},I_=function(s,n){return!1},D_=function(s,n,r){return[]},Aa=wd();(Aa||"undefined"!=typeof Element)&&(Rl=pc()?function(s,n){for(;n&&n!==document.documentElement;){if(n===s)return!0;n=n.parentNode||n.host}return!1}:function(s,n){return s.contains(n)},I_=function(){if(Aa||Element.prototype.matches)return function(n,r){return n.matches(r)};var i=Element.prototype,s=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return s?function(n,r){return s.apply(n,[r])}:I_}(),D_=function(s,n,r){var a=[];if(r)for(var o=s.querySelectorAll(n),u=0;u<o.length;u++)a.push(o[u]);else{var c=s.querySelector(n);c&&a.push(c)}return a});var yc=null,rg=!1;function R_(i){yc||(yc=("undefined"!=typeof document?document.body:null)||{},rg=!!yc.style&&"WebkitAppearance"in yc.style);var s=!0;return yc.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&!(s=i in yc.style)&&rg&&(s="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in yc.style),s}var O_=I_,Dv=Rl,L_=D_;function ig(i){var s={};return Object.keys(i).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");s[r]=i[n]}),s}var Rv=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,D.Z)(s,[{key:"validateStyleProperty",value:function(r){return R_(r)}},{key:"matchesElement",value:function(r,a){return O_(r,a)}},{key:"containsElement",value:function(r,a){return Dv(r,a)}},{key:"query",value:function(r,a,o){return L_(r,a,o)}},{key:"computeStyle",value:function(r,a,o){return o||""}},{key:"animate",value:function(r,a,o,u,c){return new ul(o,u)}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Pv=function(){var i=function s(){(0,M.Z)(this,s)};return i.NOOP=new Rv,i}(),Lu="ng-enter",_c="ng-leave",go="ng-trigger",yo=".ng-trigger",ih="ng-animating",Pl=".ng-animating";function Bo(i){if("number"==typeof i)return i;var s=i.match(/^(-?[\.\d]+)(m?s)/);return!s||s.length<2?0:ah(parseFloat(s[1]),s[2])}function ah(i,s){switch(s){case"s":return 1e3*i;default:return i}}function Ov(i,s,n){return i.hasOwnProperty("duration")?i:function(i,s,n){var a,o=0,u="";if("string"==typeof i){var c=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return s.push('The provided timing value "'.concat(i,'" is invalid.')),{duration:0,delay:0,easing:""};a=ah(parseFloat(c[1]),c[2]);var d=c[3];null!=d&&(o=ah(parseFloat(d),c[4]));var m=c[5];m&&(u=m)}else a=i;if(!n){var _=!1,b=s.length;a<0&&(s.push("Duration values below 0 are not allowed for this animation step."),_=!0),o<0&&(s.push("Delay values below 0 are not allowed for this animation step."),_=!0),_&&s.splice(b,0,'The provided timing value "'.concat(i,'" is invalid.'))}return{duration:a,delay:o,easing:u}}(i,s,n)}function Ed(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(i).forEach(function(n){s[n]=i[n]}),s}function Nu(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s)for(var r in i)n[r]=i[r];else Ed(i,n);return n}function Uo(i,s,n){return n?s+":"+n+";":""}function sh(i){for(var s="",n=0;n<i.style.length;n++){var r=i.style.item(n);s+=Uo(0,r,i.style.getPropertyValue(r))}for(var a in i.style)i.style.hasOwnProperty(a)&&!a.startsWith("_")&&(s+=Uo(0,lh(a),i.style[a]));i.setAttribute("style",s)}function _o(i,s,n){i.style&&(Object.keys(s).forEach(function(r){var a=Md(r);n&&!n.hasOwnProperty(r)&&(n[r]=i.style[a]),i.style[a]=s[r]}),wd()&&sh(i))}function oh(i,s){i.style&&(Object.keys(s).forEach(function(n){var r=Md(n);i.style[r]=""}),wd()&&sh(i))}function bc(i){return Array.isArray(i)?1==i.length?i[0]:th(i):i}var Cd=new RegExp("".concat("{{","\\s*(.+?)\\s*").concat("}}"),"g");function N_(i){var s=[];if("string"==typeof i){for(var n;n=Cd.exec(i);)s.push(n[1]);Cd.lastIndex=0}return s}function uh(i,s,n){var r=i.toString(),a=r.replace(Cd,function(o,u){var c=s[u];return s.hasOwnProperty(u)||(n.push("Please provide a value for the animation param ".concat(u)),c=""),c.toString()});return a==r?i:a}function Sd(i){for(var s=[],n=i.next();!n.done;)s.push(n.value),n=i.next();return s}var Td=/-+([a-z0-9])/g;function Md(i){return i.replace(Td,function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return n[1].toUpperCase()})}function lh(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function F_(i,s){return 0===i||0===s}function ch(i,s,n){var r=Object.keys(n);if(r.length&&s.length){var a=s[0],o=[];if(r.forEach(function(d){a.hasOwnProperty(d)||o.push(d),a[d]=n[d]}),o.length)for(var u=function(){var m=s[c];o.forEach(function(_){m[_]=wc(i,_)})},c=1;c<s.length;c++)u()}return s}function zs(i,s,n){switch(s.type){case 7:return i.visitTrigger(s,n);case 0:return i.visitState(s,n);case 1:return i.visitTransition(s,n);case 2:return i.visitSequence(s,n);case 3:return i.visitGroup(s,n);case 4:return i.visitAnimate(s,n);case 5:return i.visitKeyframes(s,n);case 6:return i.visitStyle(s,n);case 8:return i.visitReference(s,n);case 9:return i.visitAnimateChild(s,n);case 10:return i.visitAnimateRef(s,n);case 11:return i.visitQuery(s,n);case 12:return i.visitStagger(s,n);default:throw new Error("Unable to resolve animation metadata node #".concat(s.type))}}function wc(i,s){return window.getComputedStyle(i)[s]}function ug(i,s){var n=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(function(r){return function(i,s,n){if(":"==i[0]){var r=function(i,s){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(n,r){return parseFloat(r)>parseFloat(n)};case":decrement":return function(n,r){return parseFloat(r)<parseFloat(n)};default:return s.push('The transition alias value "'.concat(i,'" is not supported')),"* => *"}}(i,n);if("function"==typeof r)return void s.push(r);i=r}var a=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==a||a.length<4)return n.push('The provided transition expression "'.concat(i,'" is not supported')),s;var o=a[1],u=a[2],c=a[3];s.push(lf(o,c)),"<"==u[0]&&!("*"==o&&"*"==c)&&s.push(lf(c,o))}(r,n,s)}):n.push(i),n}var fh=new Set(["true","1"]),kc=new Set(["false","0"]);function lf(i,s){var n=fh.has(i)||kc.has(i),r=fh.has(s)||kc.has(s);return function(a,o){var u="*"==i||i==a,c="*"==s||s==o;return!u&&n&&"boolean"==typeof a&&(u=a?fh.has(i):kc.has(i)),!c&&r&&"boolean"==typeof o&&(c=o?fh.has(s):kc.has(s)),u&&c}}var Xk=new RegExp("s*".concat(":self","s*,?"),"g");function xa(i,s,n){return new Z_(i).build(s,n)}var Z_=function(){function i(s){(0,M.Z)(this,i),this._driver=s}return(0,D.Z)(i,[{key:"build",value:function(n,r){var a=new lg(r);return this._resetContextStyleTimingState(a),zs(this,bc(n),a)}},{key:"_resetContextStyleTimingState",value:function(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}},{key:"visitTrigger",value:function(n,r){var a=this,o=r.queryCount=0,u=r.depCount=0,c=[],d=[];return"@"==n.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(function(m){if(a._resetContextStyleTimingState(r),0==m.type){var _=m,b=_.name;b.toString().split(/\s*,\s*/).forEach(function(T){_.name=T,c.push(a.visitState(_,r))}),_.name=b}else if(1==m.type){var E=a.visitTransition(m,r);o+=E.queryCount,u+=E.depCount,d.push(E)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:c,transitions:d,queryCount:o,depCount:u,options:null}}},{key:"visitState",value:function(n,r){var a=this.visitStyle(n.styles,r),o=n.options&&n.options.params||null;if(a.containsDynamicStyles){var u=new Set,c=o||{};if(a.styles.forEach(function(m){if(xd(m)){var _=m;Object.keys(_).forEach(function(b){N_(_[b]).forEach(function(E){c.hasOwnProperty(E)||u.add(E)})})}}),u.size){var d=Sd(u.values());r.errors.push('state("'.concat(n.name,'", ...) must define default values for all the following style substitutions: ').concat(d.join(", ")))}}return{type:0,name:n.name,style:a,options:o?{params:o}:null}}},{key:"visitTransition",value:function(n,r){r.queryCount=0,r.depCount=0;var a=zs(this,bc(n.animation),r);return{type:1,matchers:ug(n.expr,r.errors),animation:a,queryCount:r.queryCount,depCount:r.depCount,options:Vo(n.options)}}},{key:"visitSequence",value:function(n,r){var a=this;return{type:2,steps:n.steps.map(function(o){return zs(a,o,r)}),options:Vo(n.options)}}},{key:"visitGroup",value:function(n,r){var a=this,o=r.currentTime,u=0,c=n.steps.map(function(d){r.currentTime=o;var m=zs(a,d,r);return u=Math.max(u,r.currentTime),m});return r.currentTime=u,{type:3,steps:c,options:Vo(n.options)}}},{key:"visitAnimate",value:function(n,r){var a=function(i,s){var n=null;if(i.hasOwnProperty("duration"))n=i;else if("number"==typeof i)return Fu(Ov(i,s).duration,0,"");var a=i;if(a.split(/\s+/).some(function(c){return"{"==c.charAt(0)&&"{"==c.charAt(1)})){var u=Fu(0,0,"");return u.dynamic=!0,u.strValue=a,u}return Fu((n=n||Ov(a,s)).duration,n.delay,n.easing)}(n.timings,r.errors);r.currentAnimateTimings=a;var o,u=n.styles?n.styles:Vs({});if(5==u.type)o=this.visitKeyframes(u,r);else{var c=n.styles,d=!1;if(!c){d=!0;var m={};a.easing&&(m.easing=a.easing),c=Vs(m)}r.currentTime+=a.duration+a.delay;var _=this.visitStyle(c,r);_.isEmptyStep=d,o=_}return r.currentAnimateTimings=null,{type:4,timings:a,style:o,options:null}}},{key:"visitStyle",value:function(n,r){var a=this._makeStyleAst(n,r);return this._validateStyleAst(a,r),a}},{key:"_makeStyleAst",value:function(n,r){var a=[];Array.isArray(n.styles)?n.styles.forEach(function(c){"string"==typeof c?c==sl?a.push(c):r.errors.push("The provided style string value ".concat(c," is not allowed.")):a.push(c)}):a.push(n.styles);var o=!1,u=null;return a.forEach(function(c){if(xd(c)){var d=c,m=d.easing;if(m&&(u=m,delete d.easing),!o)for(var _ in d)if(d[_].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:a,easing:u,offset:n.offset,containsDynamicStyles:o,options:null}}},{key:"_validateStyleAst",value:function(n,r){var a=this,o=r.currentAnimateTimings,u=r.currentTime,c=r.currentTime;o&&c>0&&(c-=o.duration+o.delay),n.styles.forEach(function(d){"string"!=typeof d&&Object.keys(d).forEach(function(m){if(a._driver.validateStyleProperty(m)){var _=r.collectedStyles[r.currentQuerySelector],b=_[m],E=!0;b&&(c!=u&&c>=b.startTime&&u<=b.endTime&&(r.errors.push('The CSS property "'.concat(m,'" that exists between the times of "').concat(b.startTime,'ms" and "').concat(b.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(c,'ms" and "').concat(u,'ms"')),E=!1),c=b.startTime),E&&(_[m]={startTime:c,endTime:u}),r.options&&function(i,s,n){var r=s.params||{},a=N_(i);a.length&&a.forEach(function(o){r.hasOwnProperty(o)||n.push("Unable to resolve the local animation param ".concat(o," in the given list of values"))})}(d[m],r.options,r.errors)}else r.errors.push('The provided animation property "'.concat(m,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(n,r){var a=this,o={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),o;var c=0,d=[],m=!1,_=!1,b=0,E=n.steps.map(function(te){var ue=a._makeStyleAst(te,r),le=null!=ue.offset?ue.offset:function(i){if("string"==typeof i)return null;var s=null;if(Array.isArray(i))i.forEach(function(r){if(xd(r)&&r.hasOwnProperty("offset")){var a=r;s=parseFloat(a.offset),delete a.offset}});else if(xd(i)&&i.hasOwnProperty("offset")){var n=i;s=parseFloat(n.offset),delete n.offset}return s}(ue.styles),he=0;return null!=le&&(c++,he=ue.offset=le),_=_||he<0||he>1,m=m||he<b,b=he,d.push(he),ue});_&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),m&&r.errors.push("Please ensure that all keyframe offsets are in order");var T=n.steps.length,I=0;c>0&&c<T?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(I=1/(T-1));var N=T-1,W=r.currentTime,U=r.currentAnimateTimings,H=U.duration;return E.forEach(function(te,ue){var le=I>0?ue==N?1:I*ue:d[ue],he=le*H;r.currentTime=W+U.delay+he,U.duration=he,a._validateStyleAst(te,r),te.offset=le,o.styles.push(te)}),o}},{key:"visitReference",value:function(n,r){return{type:8,animation:zs(this,bc(n.animation),r),options:Vo(n.options)}}},{key:"visitAnimateChild",value:function(n,r){return r.depCount++,{type:9,options:Vo(n.options)}}},{key:"visitAnimateRef",value:function(n,r){return{type:10,animation:this.visitReference(n.animation,r),options:Vo(n.options)}}},{key:"visitQuery",value:function(n,r){var a=r.currentQuerySelector,o=n.options||{};r.queryCount++,r.currentQuery=n;var u=function(i){var s=!!i.split(/\s*,\s*/).find(function(n){return":self"==n});return s&&(i=i.replace(Xk,"")),[i=i.replace(/@\*/g,yo).replace(/@\w+/g,function(n){return yo+"-"+n.substr(1)}).replace(/:animating/g,Pl),s]}(n.selector),c=(0,ke.Z)(u,2),d=c[0],m=c[1];r.currentQuerySelector=a.length?a+" "+d:d,Hs(r.collectedStyles,r.currentQuerySelector,{});var _=zs(this,bc(n.animation),r);return r.currentQuery=null,r.currentQuerySelector=a,{type:11,selector:d,limit:o.limit||0,optional:!!o.optional,includeSelf:m,animation:_,originalSelector:n.selector,options:Vo(n.options)}}},{key:"visitStagger",value:function(n,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");var a="full"===n.timings?{duration:0,delay:0,easing:"full"}:Ov(n.timings,r.errors,!0);return{type:12,animation:zs(this,bc(n.animation),r),timings:a,options:null}}}]),i}(),lg=function i(s){(0,M.Z)(this,i),this.errors=s,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function xd(i){return!Array.isArray(i)&&"object"==typeof i}function Vo(i){return i?(i=Ed(i)).params&&(i.params=function(i){return i?Ed(i):null}(i.params)):i={},i}function Fu(i,s,n){return{duration:i,delay:s,easing:n}}function dh(i,s,n,r,a,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:i,keyframes:s,preStyleProps:n,postStyleProps:r,duration:a,delay:o,totalTime:a+o,easing:u,subTimeline:c}}var Zu=function(){function i(){(0,M.Z)(this,i),this._map=new Map}return(0,D.Z)(i,[{key:"consume",value:function(n){var r=this._map.get(n);return r?this._map.delete(n):r=[],r}},{key:"append",value:function(n,r){var a,o=this._map.get(n);o||this._map.set(n,o=[]),(a=o).push.apply(a,(0,Gr.Z)(r))}},{key:"has",value:function(n){return this._map.has(n)}},{key:"clear",value:function(){this._map.clear()}}]),i}(),cg=new RegExp(":enter","g"),B_=new RegExp(":leave","g");function U_(i,s,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new tE).buildKeyframes(i,s,n,r,a,o,u,c,d,m)}var tE=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"buildKeyframes",value:function(n,r,a,o,u,c,d,m,_){var b=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];_=_||new Zu;var E=new Dd(n,r,_,o,u,b,[]);E.options=m,E.currentTimeline.setStyles([c],null,E.errors,m),zs(this,a,E);var T=E.timelines.filter(function(N){return N.containsAnimation()});if(T.length&&Object.keys(d).length){var I=T[T.length-1];I.allowOnlyTimelineStyles()||I.setStyles([d],null,E.errors,m)}return T.length?T.map(function(N){return N.buildKeyframes()}):[dh(r,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(n,r){}},{key:"visitState",value:function(n,r){}},{key:"visitTransition",value:function(n,r){}},{key:"visitAnimateChild",value:function(n,r){var a=r.subInstructions.consume(r.element);if(a){var o=r.createSubContext(n.options),u=r.currentTimeline.currentTime,c=this._visitSubInstructions(a,o,o.options);u!=c&&r.transformIntoNewTimeline(c)}r.previousNode=n}},{key:"visitAnimateRef",value:function(n,r){var a=r.createSubContext(n.options);a.transformIntoNewTimeline(),this.visitReference(n.animation,a),r.transformIntoNewTimeline(a.currentTimeline.currentTime),r.previousNode=n}},{key:"_visitSubInstructions",value:function(n,r,a){var u=r.currentTimeline.currentTime,c=null!=a.duration?Bo(a.duration):null,d=null!=a.delay?Bo(a.delay):null;return 0!==c&&n.forEach(function(m){var _=r.appendInstructionToTimeline(m,c,d);u=Math.max(u,_.duration+_.delay)}),u}},{key:"visitReference",value:function(n,r){r.updateOptions(n.options,!0),zs(this,n.animation,r),r.previousNode=n}},{key:"visitSequence",value:function(n,r){var a=this,o=r.subContextCount,u=r,c=n.options;if(c&&(c.params||c.delay)&&((u=r.createSubContext(c)).transformIntoNewTimeline(),null!=c.delay)){6==u.previousNode.type&&(u.currentTimeline.snapshotCurrentStyles(),u.previousNode=Ol);var d=Bo(c.delay);u.delayNextStep(d)}n.steps.length&&(n.steps.forEach(function(m){return zs(a,m,u)}),u.currentTimeline.applyStylesToKeyframe(),u.subContextCount>o&&u.transformIntoNewTimeline()),r.previousNode=n}},{key:"visitGroup",value:function(n,r){var a=this,o=[],u=r.currentTimeline.currentTime,c=n.options&&n.options.delay?Bo(n.options.delay):0;n.steps.forEach(function(d){var m=r.createSubContext(n.options);c&&m.delayNextStep(c),zs(a,d,m),u=Math.max(u,m.currentTimeline.currentTime),o.push(m.currentTimeline)}),o.forEach(function(d){return r.currentTimeline.mergeTimelineCollectedStyles(d)}),r.transformIntoNewTimeline(u),r.previousNode=n}},{key:"_visitTiming",value:function(n,r){if(n.dynamic){var a=n.strValue;return Ov(r.params?uh(a,r.params,r.errors):a,r.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}},{key:"visitAnimate",value:function(n,r){var a=r.currentAnimateTimings=this._visitTiming(n.timings,r),o=r.currentTimeline;a.delay&&(r.incrementTime(a.delay),o.snapshotCurrentStyles());var u=n.style;5==u.type?this.visitKeyframes(u,r):(r.incrementTime(a.duration),this.visitStyle(u,r),o.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=n}},{key:"visitStyle",value:function(n,r){var a=r.currentTimeline,o=r.currentAnimateTimings;!o&&a.getCurrentStyleProperties().length&&a.forwardFrame();var u=o&&o.easing||n.easing;n.isEmptyStep?a.applyEmptyStep(u):a.setStyles(n.styles,u,r.errors,r.options),r.previousNode=n}},{key:"visitKeyframes",value:function(n,r){var a=r.currentAnimateTimings,o=r.currentTimeline.duration,u=a.duration,d=r.createSubContext().currentTimeline;d.easing=a.easing,n.styles.forEach(function(m){d.forwardTime((m.offset||0)*u),d.setStyles(m.styles,m.easing,r.errors,r.options),d.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(d),r.transformIntoNewTimeline(o+u),r.previousNode=n}},{key:"visitQuery",value:function(n,r){var a=this,o=r.currentTimeline.currentTime,u=n.options||{},c=u.delay?Bo(u.delay):0;c&&(6===r.previousNode.type||0==o&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ol);var d=o,m=r.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!u.optional,r.errors);r.currentQueryTotal=m.length;var _=null;m.forEach(function(b,E){r.currentQueryIndex=E;var T=r.createSubContext(n.options,b);c&&T.delayNextStep(c),b===r.element&&(_=T.currentTimeline),zs(a,n.animation,T),T.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,T.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(d),_&&(r.currentTimeline.mergeTimelineCollectedStyles(_),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=n}},{key:"visitStagger",value:function(n,r){var a=r.parentContext,o=r.currentTimeline,u=n.timings,c=Math.abs(u.duration),d=c*(r.currentQueryTotal-1),m=c*r.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":m=d-m;break;case"full":m=a.currentStaggerTime}var b=r.currentTimeline;m&&b.delayNextStep(m);var E=b.currentTime;zs(this,n.animation,r),r.previousNode=n,a.currentStaggerTime=o.currentTime-E+(o.startTime-a.currentTimeline.startTime)}}]),i}(),Ol={},Dd=function(){function i(s,n,r,a,o,u,c,d){(0,M.Z)(this,i),this._driver=s,this.element=n,this.subInstructions=r,this._enterClassName=a,this._leaveClassName=o,this.errors=u,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ol,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=d||new V_(this._driver,n,0),c.push(this.currentTimeline)}return(0,D.Z)(i,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(n,r){var a=this;if(n){var o=n,u=this.options;null!=o.duration&&(u.duration=Bo(o.duration)),null!=o.delay&&(u.delay=Bo(o.delay));var c=o.params;if(c){var d=u.params;d||(d=this.options.params={}),Object.keys(c).forEach(function(m){(!r||!d.hasOwnProperty(m))&&(d[m]=uh(c[m],d,a.errors))})}}}},{key:"_copyOptions",value:function(){var n={};if(this.options){var r=this.options.params;if(r){var a=n.params={};Object.keys(r).forEach(function(o){a[o]=r[o]})}}return n}},{key:"createSubContext",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=r||this.element,u=new i(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,a||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(n),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}},{key:"transformIntoNewTimeline",value:function(n){return this.previousNode=Ol,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(n,r,a){var o={duration:null!=r?r:n.duration,delay:this.currentTimeline.currentTime+(null!=a?a:0)+n.delay,easing:""},u=new H_(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(u),o}},{key:"incrementTime",value:function(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}},{key:"delayNextStep",value:function(n){n>0&&this.currentTimeline.delayNextStep(n)}},{key:"invokeQuery",value:function(n,r,a,o,u,c){var d=[];if(o&&d.push(this.element),n.length>0){n=(n=n.replace(cg,"."+this._enterClassName)).replace(B_,"."+this._leaveClassName);var _=this._driver.query(this.element,n,1!=a);0!==a&&(_=a<0?_.slice(_.length+a,_.length):_.slice(0,a)),d.push.apply(d,(0,Gr.Z)(_))}return!u&&0==d.length&&c.push('`query("'.concat(r,'")` returned zero elements. (Use `query("').concat(r,'", { optional: true })` if you wish to allow this.)')),d}}]),i}(),V_=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._driver=s,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return(0,D.Z)(i,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(n){var r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+n),r&&this.snapshotCurrentStyles()):this.startTime+=n}},{key:"fork",value:function(n,r){return this.applyStylesToKeyframe(),new i(this._driver,n,r||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}},{key:"_updateStyle",value:function(n,r){this._localTimelineStyles[n]=r,this._globalTimelineStyles[n]=r,this._styleSummary[n]={time:this.currentTime,value:r}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(n){var r=this;n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(function(a){r._backFill[a]=r._globalTimelineStyles[a]||sl,r._currentKeyframe[a]=sl}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(n,r,a,o){var u=this;r&&(this._previousKeyframe.easing=r);var c=o&&o.params||{},d=function(i,s){var r,n={};return i.forEach(function(a){"*"===a?(r=r||Object.keys(s)).forEach(function(o){n[o]=sl}):Nu(a,!1,n)}),n}(n,this._globalTimelineStyles);Object.keys(d).forEach(function(m){var _=uh(d[m],c,a);u._pendingStyles[m]=_,u._localTimelineStyles.hasOwnProperty(m)||(u._backFill[m]=u._globalTimelineStyles.hasOwnProperty(m)?u._globalTimelineStyles[m]:sl),u._updateStyle(m,_)})}},{key:"applyStylesToKeyframe",value:function(){var n=this,r=this._pendingStyles,a=Object.keys(r);0!=a.length&&(this._pendingStyles={},a.forEach(function(o){n._currentKeyframe[o]=r[o]}),Object.keys(this._localTimelineStyles).forEach(function(o){n._currentKeyframe.hasOwnProperty(o)||(n._currentKeyframe[o]=n._localTimelineStyles[o])}))}},{key:"snapshotCurrentStyles",value:function(){var n=this;Object.keys(this._localTimelineStyles).forEach(function(r){var a=n._localTimelineStyles[r];n._pendingStyles[r]=a,n._updateStyle(r,a)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var n=[];for(var r in this._currentKeyframe)n.push(r);return n}},{key:"mergeTimelineCollectedStyles",value:function(n){var r=this;Object.keys(n._styleSummary).forEach(function(a){var o=r._styleSummary[a],u=n._styleSummary[a];(!o||u.time>o.time)&&r._updateStyle(a,u.value)})}},{key:"buildKeyframes",value:function(){var n=this;this.applyStylesToKeyframe();var r=new Set,a=new Set,o=1===this._keyframes.size&&0===this.duration,u=[];this._keyframes.forEach(function(b,E){var T=Nu(b,!0);Object.keys(T).forEach(function(I){var N=T[I];"!"==N?r.add(I):N==sl&&a.add(I)}),o||(T.offset=E/n.duration),u.push(T)});var c=r.size?Sd(r.values()):[],d=a.size?Sd(a.values()):[];if(o){var m=u[0],_=Ed(m);m.offset=0,_.offset=1,u=[m,_]}return dh(this.element,u,c,d,this.duration,this.startTime,this.easing,!1)}}]),i}(),H_=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d){var m,_=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return(0,M.Z)(this,n),(m=s.call(this,r,a,d.delay)).keyframes=o,m.preStyleProps=u,m.postStyleProps=c,m._stretchStartingKeyframe=_,m.timings={duration:d.duration,delay:d.delay,easing:d.easing},m}return(0,D.Z)(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var a=this.keyframes,o=this.timings,u=o.delay,c=o.duration,d=o.easing;if(this._stretchStartingKeyframe&&u){var m=[],_=c+u,b=u/_,E=Nu(a[0],!1);E.offset=0,m.push(E);var T=Nu(a[0],!1);T.offset=fg(b),m.push(T);for(var I=a.length-1,N=1;N<=I;N++){var W=Nu(a[N],!1);W.offset=fg((u+W.offset*c)/_),m.push(W)}c=_,u=0,d="",a=m}return dh(this.element,a,this.preStyleProps,this.postStyleProps,c,u,d,!0)}}]),n}(V_);function fg(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,s-1);return Math.round(i*n)/n}var hg=function i(){(0,M.Z)(this,i)},z_=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"normalizePropertyName",value:function(a,o){return Md(a)}},{key:"normalizeStyleValue",value:function(a,o,u,c){var d="",m=u.toString().trim();if(dg[o]&&0!==u&&"0"!==u)if("number"==typeof u)d="px";else{var _=u.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&c.push("Please provide a CSS unit value for ".concat(a,":").concat(u))}return m+d}}]),n}(hg),dg=function(){return i="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),s={},i.forEach(function(n){return s[n]=!0}),s;var i,s}();function G_(i,s,n,r,a,o,u,c,d,m,_,b,E){return{type:0,element:i,triggerName:s,isRemovalTransition:a,fromState:n,fromStyles:o,toState:r,toStyles:u,timelines:c,queriedElements:d,preStyleProps:m,postStyleProps:_,totalTime:b,errors:E}}var Rd={},rE=function(){function i(s,n,r){(0,M.Z)(this,i),this._triggerName=s,this.ast=n,this._stateStyles=r}return(0,D.Z)(i,[{key:"match",value:function(n,r,a,o){return function(i,s,n,r,a){return i.some(function(o){return o(s,n,r,a)})}(this.ast.matchers,n,r,a,o)}},{key:"buildStyles",value:function(n,r,a){var o=this._stateStyles["*"],u=this._stateStyles[n],c=o?o.buildStyles(r,a):{};return u?u.buildStyles(r,a):c}},{key:"build",value:function(n,r,a,o,u,c,d,m,_,b){var E=[],T=this.ast.options&&this.ast.options.params||Rd,N=this.buildStyles(a,d&&d.params||Rd,E),W=m&&m.params||Rd,U=this.buildStyles(o,W,E),H=new Set,te=new Map,ue=new Map,le="void"===o,he={params:Object.assign(Object.assign({},T),W)},se=b?[]:U_(n,r,this.ast.animation,u,c,N,U,he,_,E),ye=0;if(se.forEach(function(Ve){ye=Math.max(Ve.duration+Ve.delay,ye)}),E.length)return G_(r,this._triggerName,a,o,le,N,U,[],[],te,ue,ye,E);se.forEach(function(Ve){var Fe=Ve.element,et=Hs(te,Fe,{});Ve.preStyleProps.forEach(function(tt){return et[tt]=!0});var Ye=Hs(ue,Fe,{});Ve.postStyleProps.forEach(function(tt){return Ye[tt]=!0}),Fe!==r&&H.add(Fe)});var Ue=Sd(H.values());return G_(r,this._triggerName,a,o,le,N,U,se,Ue,te,ue,ye)}}]),i}(),vg=function(){function i(s,n,r){(0,M.Z)(this,i),this.styles=s,this.defaultParams=n,this.normalizer=r}return(0,D.Z)(i,[{key:"buildStyles",value:function(n,r){var a=this,o={},u=Ed(this.defaultParams);return Object.keys(n).forEach(function(c){var d=n[c];null!=d&&(u[c]=d)}),this.styles.styles.forEach(function(c){if("string"!=typeof c){var d=c;Object.keys(d).forEach(function(m){var _=d[m];_.length>1&&(_=uh(_,u,r));var b=a.normalizer.normalizePropertyName(m,r);_=a.normalizer.normalizeStyleValue(m,b,_,r),o[b]=_})}}),o}}]),i}(),j_=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.name=s,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states={},n.states.forEach(function(o){a.states[o.name]=new vg(o.style,o.options&&o.options.params||{},r)}),Ec(this.states,"true","1"),Ec(this.states,"false","0"),n.transitions.forEach(function(o){a.transitionFactories.push(new rE(s,o,a.states))}),this.fallbackTransition=function(i,s,n){return new rE(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(u,c){return!0}],options:null,queryCount:0,depCount:0},s)}(s,this.states)}return(0,D.Z)(i,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(n,r,a,o){return this.transitionFactories.find(function(c){return c.match(n,r,a,o)})||null}},{key:"matchStyles",value:function(n,r,a){return this.fallbackTransition.buildStyles(n,r,a)}}]),i}();function Ec(i,s,n){i.hasOwnProperty(s)?i.hasOwnProperty(n)||(i[n]=i[s]):i.hasOwnProperty(n)&&(i[s]=i[n])}var iE=new Zu,aE=function(){function i(s,n,r){(0,M.Z)(this,i),this.bodyNode=s,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return(0,D.Z)(i,[{key:"register",value:function(n,r){var a=[],o=xa(this._driver,r,a);if(a.length)throw new Error("Unable to build the animation due to the following errors: ".concat(a.join("\n")));this._animations[n]=o}},{key:"_buildPlayer",value:function(n,r,a){var o=n.element,u=Iv(this._driver,this._normalizer,o,n.keyframes,r,a);return this._driver.animate(o,u,n.duration,n.delay,n.easing,[],!0)}},{key:"create",value:function(n,r){var d,a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=[],c=this._animations[n],m=new Map;if(c?(d=U_(this._driver,r,c,Lu,_c,{},{},o,iE,u)).forEach(function(E){var T=Hs(m,E.element,{});E.postStyleProps.forEach(function(I){return T[I]=null})}):(u.push("The requested animation doesn't exist or has already been destroyed"),d=[]),u.length)throw new Error("Unable to create the animation due to the following errors: ".concat(u.join("\n")));m.forEach(function(E,T){Object.keys(E).forEach(function(I){E[I]=a._driver.computeStyle(T,I,sl)})});var _=d.map(function(E){var T=m.get(E.element);return a._buildPlayer(E,{},T)}),b=ll(_);return this._playersById[n]=b,b.onDestroy(function(){return a.destroy(n)}),this.players.push(b),b}},{key:"destroy",value:function(n){var r=this._getPlayer(n);r.destroy(),delete this._playersById[n];var a=this.players.indexOf(r);a>=0&&this.players.splice(a,1)}},{key:"_getPlayer",value:function(n){var r=this._playersById[n];if(!r)throw new Error("Unable to find the timeline player referenced by ".concat(n));return r}},{key:"listen",value:function(n,r,a,o){var u=gc(r,"","","");return Ou(this._getPlayer(n),a,u,o),function(){}}},{key:"command",value:function(n,r,a,o){if("register"!=a)if("create"!=a){var c=this._getPlayer(n);switch(a){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}else this.create(n,r,o[0]||{});else this.register(n,o[0])}}]),i}(),q_="ng-animate-queued",Y_="ng-animate-disabled",Ll=".ng-animate-disabled",L="ng-star-inserted",O=[],F={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},R={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},j="__ng_removed",$=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,M.Z)(this,i),this.namespaceId=n;var r=s&&s.hasOwnProperty("value"),a=r?s.value:s;if(this.value=gn(a),r){var o=Ed(s);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return(0,D.Z)(i,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(n){var r=n.params;if(r){var a=this.options.params;Object.keys(r).forEach(function(o){null==a[o]&&(a[o]=r[o])})}}}]),i}(),ee="void",oe=new $(ee),Te=function(){function i(s,n,r){(0,M.Z)(this,i),this.id=s,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+s,ps(n,this._hostClassName)}return(0,D.Z)(i,[{key:"listen",value:function(n,r,a,o){var u=this;if(!this._triggers.hasOwnProperty(r))throw new Error('Unable to listen on the animation trigger event "'.concat(a,'" because the animation trigger "').concat(r,"\" doesn't exist!"));if(null==a||0==a.length)throw new Error('Unable to listen on the animation trigger "'.concat(r,'" because the provided event is undefined!'));if(!function(i){return"start"==i||"done"==i}(a))throw new Error('The provided animation trigger event "'.concat(a,'" for the animation trigger "').concat(r,'" is not supported!'));var c=Hs(this._elementListeners,n,[]),d={name:r,phase:a,callback:o};c.push(d);var m=Hs(this._engine.statesByElement,n,{});return m.hasOwnProperty(r)||(ps(n,go),ps(n,go+"-"+r),m[r]=oe),function(){u._engine.afterFlush(function(){var _=c.indexOf(d);_>=0&&c.splice(_,1),u._triggers[r]||delete m[r]})}}},{key:"register",value:function(n,r){return!this._triggers[n]&&(this._triggers[n]=r,!0)}},{key:"_getTrigger",value:function(n){var r=this._triggers[n];if(!r)throw new Error('The provided animation trigger "'.concat(n,'" has not been registered!'));return r}},{key:"trigger",value:function(n,r,a){var o=this,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=this._getTrigger(r),d=new kt(this.id,r,n),m=this._engine.statesByElement.get(n);m||(ps(n,go),ps(n,go+"-"+r),this._engine.statesByElement.set(n,m={}));var _=m[r],b=new $(a,this.id),E=a&&a.hasOwnProperty("value");!E&&_&&b.absorbOptions(_.options),m[r]=b,_||(_=oe);var T=b.value===ee;if(T||_.value!==b.value){var U=Hs(this._engine.playersByElement,n,[]);U.forEach(function(ue){ue.namespaceId==o.id&&ue.triggerName==r&&ue.queued&&ue.destroy()});var H=c.matchTransition(_.value,b.value,n,b.params),te=!1;if(!H){if(!u)return;H=c.fallbackTransition,te=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:r,transition:H,fromState:_,toState:b,player:d,isFallbackTransition:te}),te||(ps(n,q_),d.onStart(function(){ru(n,q_)})),d.onDone(function(){var ue=o.players.indexOf(d);ue>=0&&o.players.splice(ue,1);var le=o._engine.playersByElement.get(n);if(le){var he=le.indexOf(d);he>=0&&le.splice(he,1)}}),this.players.push(d),U.push(d),d}if(!Od(_.params,b.params)){var I=[],N=c.matchStyles(_.value,_.params,I),W=c.matchStyles(b.value,b.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(function(){oh(n,N),_o(n,W)})}}},{key:"deregister",value:function(n){var r=this;delete this._triggers[n],this._engine.statesByElement.forEach(function(a,o){delete a[n]}),this._elementListeners.forEach(function(a,o){r._elementListeners.set(o,a.filter(function(u){return u.name!=n}))})}},{key:"clearElementCache",value:function(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);var r=this._engine.playersByElement.get(n);r&&(r.forEach(function(a){return a.destroy()}),this._engine.playersByElement.delete(n))}},{key:"_signalRemovalForInnerTriggers",value:function(n,r){var a=this,o=this._engine.driver.query(n,yo,!0);o.forEach(function(u){if(!u[j]){var c=a._engine.fetchNamespacesByElement(u);c.size?c.forEach(function(d){return d.triggerLeaveAnimation(u,r,!1,!0)}):a.clearElementCache(u)}}),this._engine.afterFlushAnimationsDone(function(){return o.forEach(function(u){return a.clearElementCache(u)})})}},{key:"triggerLeaveAnimation",value:function(n,r,a,o){var u=this,c=this._engine.statesByElement.get(n);if(c){var d=[];if(Object.keys(c).forEach(function(m){if(u._triggers[m]){var _=u.trigger(n,m,ee,o);_&&d.push(_)}}),d.length)return this._engine.markElementAsRemoved(this.id,n,!0,r),a&&ll(d).onDone(function(){return u._engine.processLeaveNode(n)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(n){var r=this,a=this._elementListeners.get(n),o=this._engine.statesByElement.get(n);if(a&&o){var u=new Set;a.forEach(function(c){var d=c.name;if(!u.has(d)){u.add(d);var _=r._triggers[d].fallbackTransition,b=o[d]||oe,E=new $(ee),T=new kt(r.id,d,n);r._engine.totalQueuedPlayers++,r._queue.push({element:n,triggerName:d,transition:_,fromState:b,toState:E,player:T,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(n,r){var a=this,o=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,r),!this.triggerLeaveAnimation(n,r,!0)){var u=!1;if(o.totalAnimations){var c=o.players.length?o.playersByQueriedElement.get(n):[];if(c&&c.length)u=!0;else for(var d=n;d=d.parentNode;)if(o.statesByElement.get(d)){u=!0;break}}if(this.prepareLeaveAnimationListeners(n),u)o.markElementAsRemoved(this.id,n,!1,r);else{var _=n[j];(!_||_===F)&&(o.afterFlush(function(){return a.clearElementCache(n)}),o.destroyInnerAnimations(n),o._onRemovalComplete(n,r))}}}},{key:"insertNode",value:function(n,r){ps(n,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(n){var r=this,a=[];return this._queue.forEach(function(o){var u=o.player;if(!u.destroyed){var c=o.element,d=r._elementListeners.get(c);d&&d.forEach(function(m){if(m.name==o.triggerName){var _=gc(c,o.triggerName,o.fromState.value,o.toState.value);_._data=n,Ou(o.player,m.phase,_,m.callback)}}),u.markedForDestroy?r._engine.afterFlush(function(){u.destroy()}):a.push(o)}}),this._queue=[],a.sort(function(o,u){var c=o.transition.ast.depCount,d=u.transition.ast.depCount;return 0==c||0==d?c-d:r._engine.driver.containsElement(o.element,u.element)?1:-1})}},{key:"destroy",value:function(n){this.players.forEach(function(r){return r.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,n)}},{key:"elementContainsData",value:function(n){var r=!1;return this._elementListeners.has(n)&&(r=!0),!!this._queue.find(function(a){return a.element===n})||r}}]),i}(),vt=function(){function i(s,n,r){(0,M.Z)(this,i),this.bodyNode=s,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(a,o){}}return(0,D.Z)(i,[{key:"_onRemovalComplete",value:function(n,r){this.onRemovalComplete(n,r)}},{key:"queuedPlayers",get:function(){var n=[];return this._namespaceList.forEach(function(r){r.players.forEach(function(a){a.queued&&n.push(a)})}),n}},{key:"createNamespace",value:function(n,r){var a=new Te(n,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(a,r):(this.newHostElements.set(r,a),this.collectEnterElement(r)),this._namespaceLookup[n]=a}},{key:"_balanceNamespaceList",value:function(n,r){var a=this._namespaceList.length-1;if(a>=0){for(var o=!1,u=a;u>=0;u--)if(this.driver.containsElement(this._namespaceList[u].hostElement,r)){this._namespaceList.splice(u+1,0,n),o=!0;break}o||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(r,n),n}},{key:"register",value:function(n,r){var a=this._namespaceLookup[n];return a||(a=this.createNamespace(n,r)),a}},{key:"registerTrigger",value:function(n,r,a){var o=this._namespaceLookup[n];o&&o.register(r,a)&&this.totalAnimations++}},{key:"destroy",value:function(n,r){var a=this;if(n){var o=this._fetchNamespace(n);this.afterFlush(function(){a.namespacesByHostElement.delete(o.hostElement),delete a._namespaceLookup[n];var u=a._namespaceList.indexOf(o);u>=0&&a._namespaceList.splice(u,1)}),this.afterFlushAnimationsDone(function(){return o.destroy(r)})}}},{key:"_fetchNamespace",value:function(n){return this._namespaceLookup[n]}},{key:"fetchNamespacesByElement",value:function(n){var r=new Set,a=this.statesByElement.get(n);if(a)for(var o=Object.keys(a),u=0;u<o.length;u++){var c=a[o[u]].namespaceId;if(c){var d=this._fetchNamespace(c);d&&r.add(d)}}return r}},{key:"trigger",value:function(n,r,a,o){if(bn(r)){var u=this._fetchNamespace(n);if(u)return u.trigger(r,a,o),!0}return!1}},{key:"insertNode",value:function(n,r,a,o){if(bn(r)){var u=r[j];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;var c=this.collectedLeaveElements.indexOf(r);c>=0&&this.collectedLeaveElements.splice(c,1)}if(n){var d=this._fetchNamespace(n);d&&d.insertNode(r,a)}o&&this.collectEnterElement(r)}}},{key:"collectEnterElement",value:function(n){this.collectedEnterElements.push(n)}},{key:"markElementAsDisabled",value:function(n,r){r?this.disabledNodes.has(n)||(this.disabledNodes.add(n),ps(n,Y_)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),ru(n,Y_))}},{key:"removeNode",value:function(n,r,a,o){if(bn(r)){var u=n?this._fetchNamespace(n):null;if(u?u.removeNode(r,o):this.markElementAsRemoved(n,r,!1,o),a){var c=this.namespacesByHostElement.get(r);c&&c.id!==n&&c.removeNode(r,o)}}else this._onRemovalComplete(r,o)}},{key:"markElementAsRemoved",value:function(n,r,a,o){this.collectedLeaveElements.push(r),r[j]={namespaceId:n,setForRemoval:o,hasAnimation:a,removedBeforeQueried:!1}}},{key:"listen",value:function(n,r,a,o,u){return bn(r)?this._fetchNamespace(n).listen(r,a,o,u):function(){}}},{key:"_buildInstruction",value:function(n,r,a,o,u){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,a,o,n.fromState.options,n.toState.options,r,u)}},{key:"destroyInnerAnimations",value:function(n){var r=this,a=this.driver.query(n,yo,!0);a.forEach(function(o){return r.destroyActiveAnimationsForElement(o)}),0!=this.playersByQueriedElement.size&&(a=this.driver.query(n,Pl,!0)).forEach(function(o){return r.finishActiveQueriedAnimationOnElement(o)})}},{key:"destroyActiveAnimationsForElement",value:function(n){var r=this.playersByElement.get(n);r&&r.forEach(function(a){a.queued?a.markedForDestroy=!0:a.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(n){var r=this.playersByQueriedElement.get(n);r&&r.forEach(function(a){return a.finish()})}},{key:"whenRenderingDone",value:function(){var n=this;return new Promise(function(r){if(n.players.length)return ll(n.players).onDone(function(){return r()});r()})}},{key:"processLeaveNode",value:function(n){var r=this,a=n[j];if(a&&a.setForRemoval){if(n[j]=F,a.namespaceId){this.destroyInnerAnimations(n);var o=this._fetchNamespace(a.namespaceId);o&&o.clearElementCache(n)}this._onRemovalComplete(n,a.setForRemoval)}this.driver.matchesElement(n,Ll)&&this.markElementAsDisabled(n,!1),this.driver.query(n,Ll,!0).forEach(function(u){r.markElementAsDisabled(u,!1)})}},{key:"flush",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(E,T){return n._balanceNamespaceList(E,T)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var o=0;o<this.collectedEnterElements.length;o++){var u=this.collectedEnterElements[o];ps(u,L)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var c=[];try{a=this._flushAnimations(c,r)}finally{for(var d=0;d<c.length;d++)c[d]()}}else for(var m=0;m<this.collectedLeaveElements.length;m++){var _=this.collectedLeaveElements[m];this.processLeaveNode(_)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(E){return E()}),this._flushFns=[],this._whenQuietFns.length){var b=this._whenQuietFns;this._whenQuietFns=[],a.length?ll(a).onDone(function(){b.forEach(function(E){return E()})}):b.forEach(function(E){return E()})}}},{key:"reportError",value:function(n){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(n.join("\n")))}},{key:"_flushAnimations",value:function(n,r){var a=this,o=new Zu,u=[],c=new Map,d=[],m=new Map,_=new Map,b=new Map,E=new Set;this.disabledNodes.forEach(function(Ht){E.add(Ht);for(var an=a.driver.query(Ht,".ng-animate-queued",!0),hn=0;hn<an.length;hn++)E.add(an[hn])});var T=this.bodyNode,I=Array.from(this.statesByElement.keys()),N=wu(I,this.collectedEnterElements),W=new Map,U=0;N.forEach(function(Ht,an){var hn=Lu+U++;W.set(an,hn),Ht.forEach(function(gr){return ps(gr,hn)})});for(var H=[],te=new Set,ue=new Set,le=0;le<this.collectedLeaveElements.length;le++){var he=this.collectedLeaveElements[le],se=he[j];se&&se.setForRemoval&&(H.push(he),te.add(he),se.hasAnimation?this.driver.query(he,".ng-star-inserted",!0).forEach(function(Ht){return te.add(Ht)}):ue.add(he))}var ye=new Map,Ue=wu(I,Array.from(te));Ue.forEach(function(Ht,an){var hn=_c+U++;ye.set(an,hn),Ht.forEach(function(gr){return ps(gr,hn)})}),n.push(function(){N.forEach(function(Ht,an){var hn=W.get(an);Ht.forEach(function(gr){return ru(gr,hn)})}),Ue.forEach(function(Ht,an){var hn=ye.get(an);Ht.forEach(function(gr){return ru(gr,hn)})}),H.forEach(function(Ht){a.processLeaveNode(Ht)})});for(var Ve=[],Fe=[],et=this._namespaceList.length-1;et>=0;et--)this._namespaceList[et].drainQueuedTransitions(r).forEach(function(Ht){var an=Ht.player,hn=Ht.element;if(Ve.push(an),a.collectedEnterElements.length){var gr=hn[j];if(gr&&gr.setForMove)return void an.destroy()}var ni=!T||!a.driver.containsElement(T,hn),Vi=ye.get(hn),Ke=W.get(hn),Pe=a._buildInstruction(Ht,o,Ke,Vi,ni);if(Pe.errors&&Pe.errors.length)Fe.push(Pe);else{if(ni)return an.onStart(function(){return oh(hn,Pe.fromStyles)}),an.onDestroy(function(){return _o(hn,Pe.toStyles)}),void u.push(an);if(Ht.isFallbackTransition)return an.onStart(function(){return oh(hn,Pe.fromStyles)}),an.onDestroy(function(){return _o(hn,Pe.toStyles)}),void u.push(an);Pe.timelines.forEach(function(kn){return kn.stretchStartingKeyframe=!0}),o.append(hn,Pe.timelines),d.push({instruction:Pe,player:an,element:hn}),Pe.queriedElements.forEach(function(kn){return Hs(m,kn,[]).push(an)}),Pe.preStyleProps.forEach(function(kn,Dn){var Hn=Object.keys(kn);if(Hn.length){var cr=_.get(Dn);cr||_.set(Dn,cr=new Set),Hn.forEach(function(ir){return cr.add(ir)})}}),Pe.postStyleProps.forEach(function(kn,Dn){var Hn=Object.keys(kn),cr=b.get(Dn);cr||b.set(Dn,cr=new Set),Hn.forEach(function(ir){return cr.add(ir)})})}});if(Fe.length){var tt=[];Fe.forEach(function(Ht){tt.push("@".concat(Ht.triggerName," has failed due to:\n")),Ht.errors.forEach(function(an){return tt.push("- ".concat(an,"\n"))})}),Ve.forEach(function(Ht){return Ht.destroy()}),this.reportError(tt)}var wt=new Map,pt=new Map;d.forEach(function(Ht){var an=Ht.element;o.has(an)&&(pt.set(an,an),a._beforeAnimationBuild(Ht.player.namespaceId,Ht.instruction,wt))}),u.forEach(function(Ht){var an=Ht.element;a._getPreviousPlayers(an,!1,Ht.namespaceId,Ht.triggerName,null).forEach(function(gr){Hs(wt,an,[]).push(gr),gr.destroy()})});var Mt=H.filter(function(Ht){return K_(Ht,_,b)}),$t=new Map;Li($t,this.driver,ue,b,sl).forEach(function(Ht){K_(Ht,_,b)&&Mt.push(Ht)});var fn=new Map;N.forEach(function(Ht,an){Li(fn,a.driver,new Set(Ht),_,"!")}),Mt.forEach(function(Ht){var an=$t.get(Ht),hn=fn.get(Ht);$t.set(Ht,Object.assign(Object.assign({},an),hn))});var tn=[],un=[],Pn={};d.forEach(function(Ht){var an=Ht.element,hn=Ht.player,gr=Ht.instruction;if(o.has(an)){if(E.has(an))return hn.onDestroy(function(){return _o(an,gr.toStyles)}),hn.disabled=!0,hn.overrideTotalTime(gr.totalTime),void u.push(hn);var ni=Pn;if(pt.size>1){for(var Vi=an,Ke=[];Vi=Vi.parentNode;){var Pe=pt.get(Vi);if(Pe){ni=Pe;break}Ke.push(Vi)}Ke.forEach(function(Dn){return pt.set(Dn,ni)})}var Xt=a._buildAnimation(hn.namespaceId,gr,wt,c,fn,$t);if(hn.setRealPlayer(Xt),ni===Pn)tn.push(hn);else{var kn=a.playersByElement.get(ni);kn&&kn.length&&(hn.parentPlayer=ll(kn)),u.push(hn)}}else oh(an,gr.fromStyles),hn.onDestroy(function(){return _o(an,gr.toStyles)}),un.push(hn),E.has(an)&&u.push(hn)}),un.forEach(function(Ht){var an=c.get(Ht.element);if(an&&an.length){var hn=ll(an);Ht.setRealPlayer(hn)}}),u.forEach(function(Ht){Ht.parentPlayer?Ht.syncPlayerEvents(Ht.parentPlayer):Ht.destroy()});for(var Tr=0;Tr<H.length;Tr++){var nr=H[Tr],Je=nr[j];if(ru(nr,_c),!Je||!Je.hasAnimation){var on=[];if(m.size){var Nn=m.get(nr);Nn&&Nn.length&&on.push.apply(on,(0,Gr.Z)(Nn));for(var sn=this.driver.query(nr,Pl,!0),In=0;In<sn.length;In++){var Mn=m.get(sn[In]);Mn&&Mn.length&&on.push.apply(on,(0,Gr.Z)(Mn))}}var Cn=on.filter(function(Ht){return!Ht.destroyed});Cn.length?Pd(this,nr,Cn):this.processLeaveNode(nr)}}return H.length=0,tn.forEach(function(Ht){a.players.push(Ht),Ht.onDone(function(){Ht.destroy();var an=a.players.indexOf(Ht);a.players.splice(an,1)}),Ht.play()}),tn}},{key:"elementContainsData",value:function(n,r){var a=!1,o=r[j];return o&&o.setForRemoval&&(a=!0),this.playersByElement.has(r)&&(a=!0),this.playersByQueriedElement.has(r)&&(a=!0),this.statesByElement.has(r)&&(a=!0),this._fetchNamespace(n).elementContainsData(r)||a}},{key:"afterFlush",value:function(n){this._flushFns.push(n)}},{key:"afterFlushAnimationsDone",value:function(n){this._whenQuietFns.push(n)}},{key:"_getPreviousPlayers",value:function(n,r,a,o,u){var c=[];if(r){var d=this.playersByQueriedElement.get(n);d&&(c=d)}else{var m=this.playersByElement.get(n);if(m){var _=!u||u==ee;m.forEach(function(b){b.queued||!_&&b.triggerName!=o||c.push(b)})}}return(a||o)&&(c=c.filter(function(b){return!(a&&a!=b.namespaceId||o&&o!=b.triggerName)})),c}},{key:"_beforeAnimationBuild",value:function(n,r,a){var b,o=this,c=r.element,d=r.isRemovalTransition?void 0:n,m=r.isRemovalTransition?void 0:r.triggerName,_=(0,Re.Z)(r.timelines);try{var E=function(){var N=b.value.element,W=N!==c,U=Hs(a,N,[]);o._getPreviousPlayers(N,W,d,m,r.toState).forEach(function(te){var ue=te.getRealPlayer();ue.beforeDestroy&&ue.beforeDestroy(),te.destroy(),U.push(te)})};for(_.s();!(b=_.n()).done;)E()}catch(T){_.e(T)}finally{_.f()}oh(c,r.fromStyles)}},{key:"_buildAnimation",value:function(n,r,a,o,u,c){var d=this,m=r.triggerName,_=r.element,b=[],E=new Set,T=new Set,I=r.timelines.map(function(W){var U=W.element;E.add(U);var H=U[j];if(H&&H.removedBeforeQueried)return new ul(W.duration,W.delay);var te=U!==_,ue=function(i){var s=[];return Bv(i,s),s}((a.get(U)||O).map(function(Ve){return Ve.getRealPlayer()})).filter(function(Ve){return!!Ve.element&&Ve.element===U}),le=u.get(U),he=c.get(U),se=Iv(d.driver,d._normalizer,U,W.keyframes,le,he),ye=d._buildPlayer(W,se,ue);if(W.subTimeline&&o&&T.add(U),te){var Ue=new kt(n,m,U);Ue.setRealPlayer(ye),b.push(Ue)}return ye});b.forEach(function(W){Hs(d.playersByQueriedElement,W.element,[]).push(W),W.onDone(function(){return function(i,s,n){var r;if(i instanceof Map){if(r=i.get(s)){if(r.length){var a=r.indexOf(n);r.splice(a,1)}0==r.length&&i.delete(s)}}else if(r=i[s]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete i[s]}return r}(d.playersByQueriedElement,W.element,W)})}),E.forEach(function(W){return ps(W,ih)});var N=ll(I);return N.onDestroy(function(){E.forEach(function(W){return ru(W,ih)}),_o(_,r.toStyles)}),T.forEach(function(W){Hs(o,W,[]).push(N)}),N}},{key:"_buildPlayer",value:function(n,r,a){return r.length>0?this.driver.animate(n.element,r,n.duration,n.delay,n.easing,a):new ul(n.duration,n.delay)}}]),i}(),kt=function(){function i(s,n,r){(0,M.Z)(this,i),this.namespaceId=s,this.triggerName=n,this.element=r,this._player=new ul,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return(0,D.Z)(i,[{key:"setRealPlayer",value:function(n){var r=this;this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(function(a){r._queuedCallbacks[a].forEach(function(o){return Ou(n,a,void 0,o)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(n){this.totalTime=n}},{key:"syncPlayerEvents",value:function(n){var r=this,a=this._player;a.triggerCallback&&n.onStart(function(){return a.triggerCallback("start")}),n.onDone(function(){return r.finish()}),n.onDestroy(function(){return r.destroy()})}},{key:"_queueEvent",value:function(n,r){Hs(this._queuedCallbacks,n,[]).push(r)}},{key:"onDone",value:function(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}},{key:"onStart",value:function(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}},{key:"onDestroy",value:function(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(n){this.queued||this._player.setPosition(n)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(n){var r=this._player;r.triggerCallback&&r.triggerCallback(n)}}]),i}();function gn(i){return null!=i?i:null}function bn(i){return i&&1===i.nodeType}function Qi(i,s){var n=i.style.display;return i.style.display=null!=s?s:"none",n}function Li(i,s,n,r,a){var o=[];n.forEach(function(d){return o.push(Qi(d))});var u=[];r.forEach(function(d,m){var _={};d.forEach(function(b){var E=_[b]=s.computeStyle(m,b,a);(!E||0==E.length)&&(m[j]=R,u.push(m))}),i.set(m,_)});var c=0;return n.forEach(function(d){return Qi(d,o[c++])}),u}function wu(i,s){var n=new Map;if(i.forEach(function(c){return n.set(c,[])}),0==s.length)return n;var a=new Set(s),o=new Map;function u(c){if(!c)return 1;var d=o.get(c);if(d)return d;var m=c.parentNode;return d=n.has(m)?m:a.has(m)?1:u(m),o.set(c,d),d}return s.forEach(function(c){var d=u(c);1!==d&&n.get(d).push(c)}),n}var Or="$$classes";function ps(i,s){if(i.classList)i.classList.add(s);else{var n=i[Or];n||(n=i[Or]={}),n[s]=!0}}function ru(i,s){if(i.classList)i.classList.remove(s);else{var n=i[Or];n&&delete n[s]}}function Pd(i,s,n){ll(n).onDone(function(){return i.processLeaveNode(s)})}function Bv(i,s){for(var n=0;n<i.length;n++){var r=i[n];r instanceof x_?Bv(r.players,s):s.push(r)}}function Od(i,s){var n=Object.keys(i),r=Object.keys(s);if(n.length!=r.length)return!1;for(var a=0;a<n.length;a++){var o=n[a];if(!s.hasOwnProperty(o)||i[o]!==s[o])return!1}return!0}function K_(i,s,n){var r=n.get(i);if(!r)return!1;var a=s.get(i);return a?r.forEach(function(o){return a.add(o)}):s.set(i,r),n.delete(i),!0}var $_=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.bodyNode=s,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=function(o,u){},this._transitionEngine=new vt(s,n,r),this._timelineEngine=new aE(s,n,r),this._transitionEngine.onRemovalComplete=function(o,u){return a.onRemovalComplete(o,u)}}return(0,D.Z)(i,[{key:"registerTrigger",value:function(n,r,a,o,u){var c=n+"-"+o,d=this._triggerCache[c];if(!d){var m=[],_=xa(this._driver,u,m);if(m.length)throw new Error('The animation trigger "'.concat(o,'" has failed to build due to the following errors:\n - ').concat(m.join("\n - ")));d=function(i,s,n){return new j_(i,s,n)}(o,_,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(r,o,d)}},{key:"register",value:function(n,r){this._transitionEngine.register(n,r)}},{key:"destroy",value:function(n,r){this._transitionEngine.destroy(n,r)}},{key:"onInsert",value:function(n,r,a,o){this._transitionEngine.insertNode(n,r,a,o)}},{key:"onRemove",value:function(n,r,a,o){this._transitionEngine.removeNode(n,r,o||!1,a)}},{key:"disableAnimations",value:function(n,r){this._transitionEngine.markElementAsDisabled(n,r)}},{key:"process",value:function(n,r,a,o){if("@"==a.charAt(0)){var u=rh(a),c=(0,ke.Z)(u,2);this._timelineEngine.command(c[0],r,c[1],o)}else this._transitionEngine.trigger(n,r,a,o)}},{key:"listen",value:function(n,r,a,o,u){if("@"==a.charAt(0)){var c=rh(a),d=(0,ke.Z)(c,2);return this._timelineEngine.listen(d[0],r,d[1],u)}return this._transitionEngine.listen(n,r,a,o,u)}},{key:"flush",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(n)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),i}();function oE(i,s){var n=null,r=null;return Array.isArray(s)&&s.length?(n=uE(s[0]),s.length>1&&(r=uE(s[s.length-1]))):s&&(n=uE(s)),n||r?new YO(i,n,r):null}var YO=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._element=n,this._startStyles=r,this._endStyles=a,this._state=0;var o=s.initialStylesByElement.get(n);o||s.initialStylesByElement.set(n,o={}),this._initialStyles=o}return(0,D.Z)(s,[{key:"start",value:function(){this._state<1&&(this._startStyles&&_o(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(_o(this._element,this._initialStyles),this._endStyles&&(_o(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(s.initialStylesByElement.delete(this._element),this._startStyles&&(oh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(oh(this._element,this._endStyles),this._endStyles=null),_o(this._element,this._initialStyles),this._state=3)}}]),s}();return i.initialStylesByElement=new WeakMap,i}();function uE(i){for(var s=null,n=Object.keys(i),r=0;r<n.length;r++){var a=n[r];KO(a)&&((s=s||{})[a]=i[a])}return s}function KO(i){return"display"===i||"position"===i}var lE="animation",mg="animationend",cE=function(){function i(s,n,r,a,o,u,c){var d=this;(0,M.Z)(this,i),this._element=s,this._name=n,this._duration=r,this._delay=a,this._easing=o,this._fillMode=u,this._onDoneFn=c,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(m){return d._handleCallback(m)}}return(0,D.Z)(i,[{key:"apply",value:function(){(function(i,s){var n=fE(i,"").trim();n.length&&(function(i,s){for(var n=0,r=0;r<i.length;r++)","===i.charAt(r)&&n++;return n}(n)+1,s="".concat(n,", ").concat(s)),Q_(i,"",s)})(this._element,"".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name)),X_(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){tx(this._element,this._name,"paused")}},{key:"resume",value:function(){tx(this._element,this._name,"running")}},{key:"setPosition",value:function(n){var r=nx(this._element,this._name);this._position=n*this._duration,Q_(this._element,"Delay","-".concat(this._position,"ms"),r)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(n){var r=n._ngTestManualTimestamp||Date.now(),a=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(r-this._startTime,0)>=this._delay&&a>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),X_(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,s){var r=fE(i,"").split(","),a=gg(r,s);a>=0&&(r.splice(a,1),Q_(i,"",r.join(",")))}(this._element,this._name))}}]),i}();function tx(i,s,n){Q_(i,"PlayState",n,nx(i,s))}function nx(i,s){var n=fE(i,"");return n.indexOf(",")>0?gg(n.split(","),s):gg([n],s)}function gg(i,s){for(var n=0;n<i.length;n++)if(i[n].indexOf(s)>=0)return n;return-1}function X_(i,s,n){n?i.removeEventListener(mg,s):i.addEventListener(mg,s)}function Q_(i,s,n,r){var a=lE+s;if(null!=r){var o=i.style[a];if(o.length){var u=o.split(",");u[r]=n,n=u.join(",")}}i.style[a]=n}function fE(i,s){return i.style[lE+s]||""}var tL=function(){function i(s,n,r,a,o,u,c,d){(0,M.Z)(this,i),this.element=s,this.keyframes=n,this.animationName=r,this._duration=a,this._delay=o,this._finalStyles=c,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=a+o,this._buildStyler()}return(0,D.Z)(i,[{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"destroy",value:function(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(n){this._styler.setPosition(n)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var n=this;this._styler=new cE(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return n.finish()})}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}},{key:"beforeDestroy",value:function(){var n=this;this.init();var r={};if(this.hasStarted()){var a=this._state>=3;Object.keys(this._finalStyles).forEach(function(o){"offset"!=o&&(r[o]=a?n._finalStyles[o]:wc(n.element,o))})}this.currentSnapshot=r}}]),i}(),PU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).element=r,o._startingStyles={},o.__initialized=!1,o._styles=ig(a),o}return(0,D.Z)(n,[{key:"init",value:function(){var a=this;this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(function(o){a._startingStyles[o]=a.element.style[o]}),(0,_e.Z)((0,de.Z)(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var a=this;!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(function(o){return a.element.style.setProperty(o,a._styles[o])}),(0,_e.Z)((0,de.Z)(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var a=this;!this._startingStyles||(Object.keys(this._startingStyles).forEach(function(o){var u=a._startingStyles[o];u?a.element.style.setProperty(o,u):a.element.style.removeProperty(o)}),this._startingStyles=null,(0,_e.Z)((0,de.Z)(n.prototype),"destroy",this).call(this))}}]),n}(ul),yg="gen_css_kf_",J_=function(){function i(){(0,M.Z)(this,i),this._count=0}return(0,D.Z)(i,[{key:"validateStyleProperty",value:function(n){return R_(n)}},{key:"matchesElement",value:function(n,r){return O_(n,r)}},{key:"containsElement",value:function(n,r){return Dv(n,r)}},{key:"query",value:function(n,r,a){return L_(n,r,a)}},{key:"computeStyle",value:function(n,r,a){return window.getComputedStyle(n)[r]}},{key:"buildKeyframeElement",value:function(n,r,a){a=a.map(function(d){return ig(d)});var o="@keyframes ".concat(r," {\n"),u="";a.forEach(function(d){u=" ";var m=parseFloat(d.offset);o+="".concat(u).concat(100*m,"% {\n"),u+=" ",Object.keys(d).forEach(function(_){var b=d[_];switch(_){case"offset":return;case"easing":return void(b&&(o+="".concat(u,"animation-timing-function: ").concat(b,";\n")));default:return void(o+="".concat(u).concat(_,": ").concat(b,";\n"))}}),o+="".concat(u,"}\n")}),o+="}\n";var c=document.createElement("style");return c.textContent=o,c}},{key:"animate",value:function(n,r,a,o,u){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],m=c.filter(function(U){return U instanceof tL}),_={};F_(a,o)&&m.forEach(function(U){var H=U.currentSnapshot;Object.keys(H).forEach(function(te){return _[te]=H[te]})});var b=ix(r=ch(n,r,_));if(0==a)return new PU(n,b);var E="".concat(yg).concat(this._count++),T=this.buildKeyframeElement(n,E,r),I=rx(n);I.appendChild(T);var N=oE(n,r),W=new tL(n,r,E,a,o,u,b,N);return W.onDestroy(function(){return Ho(T)}),W}}]),i}();function rx(i){var s,n=null===(s=i.getRootNode)||void 0===s?void 0:s.call(i);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head}function ix(i){var s={};return i&&(Array.isArray(i)?i:[i]).forEach(function(r){Object.keys(r).forEach(function(a){"offset"==a||"easing"==a||(s[a]=r[a])})}),s}function Ho(i){i.parentNode.removeChild(i)}var sx=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.element=s,this.keyframes=n,this.options=r,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return(0,D.Z)(i,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var n=this;if(!this._initialized){this._initialized=!0;var r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:{},this.domPlayer.addEventListener("finish",function(){return n._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(n,r,a){return n.animate(r,a)}},{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var n=this,r={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(a){"offset"!=a&&(r[a]=n._finished?n._finalKeyframe[a]:wc(n.element,a))}),this.currentSnapshot=r}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}}]),i}(),nL=function(){function i(){(0,M.Z)(this,i),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ux().toString()),this._cssKeyframesDriver=new J_}return(0,D.Z)(i,[{key:"validateStyleProperty",value:function(n){return R_(n)}},{key:"matchesElement",value:function(n,r){return O_(n,r)}},{key:"containsElement",value:function(n,r){return Dv(n,r)}},{key:"query",value:function(n,r,a){return L_(n,r,a)}},{key:"computeStyle",value:function(n,r,a){return window.getComputedStyle(n)[r]}},{key:"overrideWebAnimationsSupport",value:function(n){this._isNativeImpl=n}},{key:"animate",value:function(n,r,a,o,u){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],d=arguments.length>6?arguments[6]:void 0,m=!d&&!this._isNativeImpl;if(m)return this._cssKeyframesDriver.animate(n,r,a,o,u,c);var _=0==o?"both":"forwards",b={duration:a,delay:o,fill:_};u&&(b.easing=u);var E={},T=c.filter(function(N){return N instanceof sx});F_(a,o)&&T.forEach(function(N){var W=N.currentSnapshot;Object.keys(W).forEach(function(U){return E[U]=W[U]})});var I=oE(n,r=ch(n,r=r.map(function(N){return Nu(N,!1)}),E));return new sx(n,r,b,I)}}]),i}();function ux(){return pc()&&Element.prototype.animate||{}}var lx=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o){var u;return(0,M.Z)(this,r),(u=n.call(this))._nextAnimationId=0,u._renderer=a.createRenderer(o.body,{id:"0",encapsulation:v.ifc.None,styles:[],data:{animation:[]}}),u}return(0,D.Z)(r,[{key:"build",value:function(o){var u=this._nextAnimationId.toString();this._nextAnimationId++;var c=Array.isArray(o)?th(o):o;return fx(this._renderer,null,u,"register",[c]),new rL(u,this._renderer)}}]),r}(ng);return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.FYo),v.LFG(fe))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),rL=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._id=r,o._renderer=a,o}return(0,D.Z)(n,[{key:"create",value:function(a,o){return new cx(this._id,a,o||{},this._renderer)}}]),n}(_d),cx=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.id=s,this.element=n,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return(0,D.Z)(i,[{key:"_listen",value:function(n,r){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(n),r)}},{key:"_command",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return fx(this._renderer,this.element,this.id,n,a)}},{key:"onDone",value:function(n){this._listen("done",n)}},{key:"onStart",value:function(n){this._listen("start",n)}},{key:"onDestroy",value:function(n){this._listen("destroy",n)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset"),this._started=!1}},{key:"setPosition",value:function(n){this._command("setPosition",n)}},{key:"getPosition",value:function(){var n,r;return null!==(r=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==r?r:0}}]),i}();function fx(i,s,n,r,a){return i.setProperty(s,"@@".concat(n,":").concat(r),a)}var hx="@.disabled",dx=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this.delegate=n,this.engine=r,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=function(o,u){u&&u.parentNode(o)&&u.removeChild(o.parentNode,o)}}return(0,D.Z)(s,[{key:"createRenderer",value:function(r,a){var o=this,c=this.delegate.createRenderer(r,a);if(!(r&&a&&a.data&&a.data.animation)){var d=this._rendererCache.get(c);return d||(d=new t0("",c,this.engine),this._rendererCache.set(c,d)),d}var m=a.id,_=a.id+"-"+this._currentId;return this._currentId++,this.engine.register(_,r),a.data.animation.forEach(function T(I){Array.isArray(I)?I.forEach(T):o.engine.registerTrigger(m,_,r,I.name,I)}),new vx(this,_,c,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var r=this;this.promise.then(function(){r._microtaskId++})}},{key:"scheduleListenerCallback",value:function(r,a,o){var u=this;r>=0&&r<this._microtaskId?this._zone.run(function(){return a(o)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){u._zone.run(function(){u._animationCallbacksBuffer.forEach(function(c){var d=(0,ke.Z)(c,2);(0,d[0])(d[1])}),u._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([a,o]))}},{key:"end",value:function(){var r=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){r._scheduleCountTask(),r.engine.flush(r._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.FYo),v.LFG($_),v.LFG(v.R0b))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),t0=function(){function i(s,n,r){(0,M.Z)(this,i),this.namespaceId=s,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(a){return n.destroyNode(a)}:null}return(0,D.Z)(i,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(n,r){return this.delegate.createElement(n,r)}},{key:"createComment",value:function(n){return this.delegate.createComment(n)}},{key:"createText",value:function(n){return this.delegate.createText(n)}},{key:"appendChild",value:function(n,r){this.delegate.appendChild(n,r),this.engine.onInsert(this.namespaceId,r,n,!1)}},{key:"insertBefore",value:function(n,r,a){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(n,r,a),this.engine.onInsert(this.namespaceId,r,n,o)}},{key:"removeChild",value:function(n,r,a){this.engine.onRemove(this.namespaceId,r,this.delegate,a)}},{key:"selectRootElement",value:function(n,r){return this.delegate.selectRootElement(n,r)}},{key:"parentNode",value:function(n){return this.delegate.parentNode(n)}},{key:"nextSibling",value:function(n){return this.delegate.nextSibling(n)}},{key:"setAttribute",value:function(n,r,a,o){this.delegate.setAttribute(n,r,a,o)}},{key:"removeAttribute",value:function(n,r,a){this.delegate.removeAttribute(n,r,a)}},{key:"addClass",value:function(n,r){this.delegate.addClass(n,r)}},{key:"removeClass",value:function(n,r){this.delegate.removeClass(n,r)}},{key:"setStyle",value:function(n,r,a,o){this.delegate.setStyle(n,r,a,o)}},{key:"removeStyle",value:function(n,r,a){this.delegate.removeStyle(n,r,a)}},{key:"setProperty",value:function(n,r,a){"@"==r.charAt(0)&&r==hx?this.disableAnimations(n,!!a):this.delegate.setProperty(n,r,a)}},{key:"setValue",value:function(n,r){this.delegate.setValue(n,r)}},{key:"listen",value:function(n,r,a){return this.delegate.listen(n,r,a)}},{key:"disableAnimations",value:function(n,r){this.engine.disableAnimations(n,r)}}]),i}(),vx=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this,a,o,u)).factory=r,c.namespaceId=a,c}return(0,D.Z)(n,[{key:"setProperty",value:function(a,o,u){"@"==o.charAt(0)?"."==o.charAt(1)&&o==hx?this.disableAnimations(a,u=void 0===u||!!u):this.engine.process(this.namespaceId,a,o.substr(1),u):this.delegate.setProperty(a,o,u)}},{key:"listen",value:function(a,o,u){var c=this;if("@"==o.charAt(0)){var d=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(a),m=o.substr(1),_="";if("@"!=m.charAt(0)){var b=function(i){var s=i.indexOf(".");return[i.substring(0,s),i.substr(s+1)]}(m),E=(0,ke.Z)(b,2);m=E[0],_=E[1]}return this.engine.listen(this.namespaceId,d,m,_,function(T){c.factory.scheduleListenerCallback(T._data||-1,u,T)})}return this.delegate.listen(a,o,u)}}]),n}(t0),px=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o,u){return(0,M.Z)(this,r),n.call(this,a.body,o,u)}return(0,D.Z)(r,[{key:"ngOnDestroy",value:function(){this.flush()}}]),r}($_);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe),v.LFG(Pv),v.LFG(hg))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),iu=new v.OlP("AnimationModuleType"),mx=[{provide:ng,useClass:lx},{provide:hg,useFactory:function(){return new z_}},{provide:$_,useClass:px},{provide:v.FYo,useFactory:function(i,s,n){return new dx(i,s,n)},deps:[Ml,$_,v.R0b]}],gx=[{provide:Pv,useFactory:function(){return"function"==typeof ux()?new nL:new J_}},{provide:iu,useValue:"BrowserAnimations"}].concat(mx),yx=[{provide:Pv,useClass:Rv},{provide:iu,useValue:"NoopAnimations"}].concat(mx),oL=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,D.Z)(s,null,[{key:"withConfig",value:function(r){return{ngModule:s,providers:r.disableAnimations?yx:gx}}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:gx,imports:[ds]}),i}(),ti=J(3512),bo=J(8569),ms=J(8318),as=J(9764),tr=J(878),ua=J(5271),r0=J(7471);function _x(){return(0,r0.J)(1)}function hE(){return _x()(tr.of.apply(void 0,arguments))}var a0=J(6163);function au(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];var r=s[s.length-1];return(0,a0.K)(r)?(s.pop(),function(a){return hE(s,a,r)}):function(a){return hE(s,a)}}var ss=J(6673);function Uu(){return function(i){return i.lift(new NU)}}var NU=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new FU(n))}}]),i}(),FU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).hasPrev=!1,a}return(0,D.Z)(n,[{key:"_next",value:function(a){var o;this.hasPrev?o=[this.prev,a]:this.hasPrev=!0,this.prev=a,o&&this.destination.next(o)}}]),n}(ss.L),ur=J(9996);function Vv(i,s){var n=!1;return arguments.length>=2&&(n=!0),function(a){return a.lift(new dE(i,s,n))}}var dE=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,M.Z)(this,i),this.accumulator=s,this.seed=n,this.hasSeed=r}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new vE(n,this.accumulator,this.seed,this.hasSeed))}}]),i}(),vE=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this,r)).accumulator=a,c._seed=o,c.hasSeed=u,c.index=0,c}return(0,D.Z)(n,[{key:"seed",get:function(){return this._seed},set:function(a){this.hasSeed=!0,this._seed=a}},{key:"_next",value:function(a){if(this.hasSeed)return this._tryNext(a);this.seed=a,this.destination.next(a)}},{key:"_tryNext",value:function(a){var u,o=this.index++;try{u=this.accumulator(this.seed,a,o)}catch(c){this.destination.error(c)}this.seed=u,this.destination.next(u)}}]),n}(ss.L);function mh(i,s){return function(n){return n.lift(new uL(i,s))}}var uL=function(){function i(s,n){(0,M.Z)(this,i),this.compare=s,this.keySelector=n}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new bx(n,this.compare,this.keySelector))}}]),i}(),bx=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).keySelector=o,u.hasKey=!1,"function"==typeof a&&(u.compare=a),u}return(0,D.Z)(n,[{key:"compare",value:function(a,o){return a===o}},{key:"_next",value:function(a){var o;try{var u=this.keySelector;o=u?u(a):a}catch(m){return this.destination.error(m)}var c=!1;if(this.hasKey)try{c=(0,this.compare)(this.key,o)}catch(m){return this.destination.error(m)}else this.hasKey=!0;c||(this.key=o,this.destination.next(a))}}]),n}(ss.L);function Ji(i,s){return function(r){return r.lift(new wx(i,s))}}var jn,wx=function(){function i(s,n){(0,M.Z)(this,i),this.predicate=s,this.thisArg=n}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new kx(n,this.predicate,this.thisArg))}}]),i}(),kx=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).predicate=a,u.thisArg=o,u.count=0,u}return(0,D.Z)(n,[{key:"_next",value:function(a){var o;try{o=this.predicate.call(this.thisArg,a,this.count++)}catch(u){return void this.destination.error(u)}o&&this.destination.next(a)}}]),n}(ss.L),ku=J(9748),pE=(J(3121),J(4768)),lL=J(1932),Ut=J(8239),mE=J(3693),Cx=J(8774),Ze=J.n(Cx),gh=J(7092),Nd=J(5119),Cc=J(2134),Me=J(5725),cL="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},hf={},s0=s0||{},xr=cL||self;function _g(){}function bg(i){var s=typeof i;return"array"==(s="object"!=s?s:i?Array.isArray(i)?"array":s:"null")||"object"==s&&"number"==typeof i.length}function wg(i){var s=typeof i;return"object"==s&&null!=i||"function"==s}var o0="closure_uid_"+(1e9*Math.random()>>>0),Sx=0;function Fd(i,s,n){return i.call.apply(i.bind,arguments)}function Tx(i,s,n){if(!i)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),i.apply(s,a)}}return function(){return i.apply(s,arguments)}}function eo(i,s,n){return(eo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fd:Tx).apply(null,arguments)}function u0(i,s){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),i.apply(this,r)}}function Rs(i,s){function n(){}n.prototype=s.prototype,i.Z=s.prototype,i.prototype=new n,i.prototype.constructor=i,i.Vb=function(r,a,o){for(var u=Array(arguments.length-2),c=2;c<arguments.length;c++)u[c-2]=arguments[c];return s.prototype[a].apply(r,u)}}function yh(){this.s=this.s,this.o=this.o}var Ax={};yh.prototype.s=!1,yh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,o0)&&i[o0]||(i[o0]=++Sx)}(this);delete Ax[i]}},yh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var gE=Array.prototype.indexOf?function(i,s){return Array.prototype.indexOf.call(i,s,void 0)}:function(i,s){if("string"==typeof i)return"string"!=typeof s||1!=s.length?-1:i.indexOf(s,0);for(var n=0;n<i.length;n++)if(n in i&&i[n]===s)return n;return-1},l0=Array.prototype.forEach?function(i,s,n){Array.prototype.forEach.call(i,s,n)}:function(i,s,n){for(var r=i.length,a="string"==typeof i?i.split(""):i,o=0;o<r;o++)o in a&&s.call(n,a[o],o,i)};function kg(i){return Array.prototype.concat.apply([],arguments)}function Hv(i){var s=i.length;if(0<s){for(var n=Array(s),r=0;r<s;r++)n[r]=i[r];return n}return[]}function Eg(i){return/^[\s\xa0]*$/.test(i)}var Gs,c0=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function zo(i,s){return-1!=i.indexOf(s)}function Cg(i,s){return i<s?-1:i>s?1:0}e:{var Ix=xr.navigator;if(Ix){var yE=Ix.userAgent;if(yE){Gs=yE;break e}}Gs=""}function _E(i,s,n){for(var r in i)s.call(n,i[r],r,i)}function Dx(i){var s={};for(var n in i)s[n]=i[n];return s}var bE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function f0(i,s){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])i[n]=r[n];for(var o=0;o<bE.length;o++)n=bE[o],Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}}function h0(i){return h0[" "](i),i}h0[" "]=_g;var Sg,i,Rx=zo(Gs,"Opera"),zv=zo(Gs,"Trident")||zo(Gs,"MSIE"),wE=zo(Gs,"Edge"),kE=wE||zv,Px=zo(Gs,"Gecko")&&!(zo(Gs.toLowerCase(),"webkit")&&!zo(Gs,"Edge"))&&!(zo(Gs,"Trident")||zo(Gs,"MSIE"))&&!zo(Gs,"Edge"),Nl=zo(Gs.toLowerCase(),"webkit")&&!zo(Gs,"Edge");function Ox(){var i=xr.document;return i?i.documentMode:void 0}e:{var EE="",CE=(i=Gs,Px?/rv:([^\);]+)(\)|;)/.exec(i):wE?/Edge\/([\d\.]+)/.exec(i):zv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Nl?/WebKit\/(\S+)/.exec(i):Rx?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(CE&&(EE=CE?CE[1]:""),zv){var SE=Ox();if(null!=SE&&SE>parseFloat(EE)){Sg=String(SE);break e}}Sg=EE}var hL={};function Lx(){return s=hL,Object.prototype.hasOwnProperty.call(s,9)?s[9]:s[9]=function(){for(var i=0,s=c0(String(Sg)).split("."),n=c0("9").split("."),r=Math.max(s.length,n.length),a=0;0==i&&a<r;a++){var o=s[a]||"",u=n[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;i=Cg(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Cg(0==o[2].length,0==u[2].length)||Cg(o[2],u[2]),o=o[3],u=u[3]}while(0==i)}return 0<=i}();var s}var dL=xr.document&&zv&&(Ox()||parseInt(Sg,10))||void 0,Nr=function(){if(!xr.addEventListener||!Object.defineProperty)return!1;var i=!1,s=Object.defineProperty({},"passive",{get:function(){i=!0}});try{xr.addEventListener("test",_g,s),xr.removeEventListener("test",_g,s)}catch(n){}return i}();function wo(i,s){this.type=i,this.g=this.target=s,this.defaultPrevented=!1}function Gv(i,s){if(wo.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,r=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=s,s=i.relatedTarget){if(Px){e:{try{h0(s.nodeName);var a=!0;break e}catch(o){}a=!1}a||(s=null)}}else"mouseover"==n?s=i.fromElement:"mouseout"==n&&(s=i.toElement);this.relatedTarget=s,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:d0[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Gv.Z.h.call(this)}}wo.prototype.h=function(){this.defaultPrevented=!0},Rs(Gv,wo);var d0={2:"touch",3:"pen",4:"mouse"};Gv.prototype.h=function(){Gv.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var su="closure_listenable_"+(1e6*Math.random()|0),Fx=0;function vL(i,s,n,r,a){this.listener=i,this.proxy=null,this.src=s,this.type=n,this.capture=!!r,this.ia=a,this.key=++Fx,this.ca=this.fa=!1}function jv(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function cl(i){this.src=i,this.g={},this.h=0}function Tg(i,s){var n=s.type;if(n in i.g){var o,r=i.g[n],a=gE(r,s);(o=0<=a)&&Array.prototype.splice.call(r,a,1),o&&(jv(s),0==i.g[n].length&&(delete i.g[n],i.h--))}}function v0(i,s,n,r){for(var a=0;a<i.length;++a){var o=i[a];if(!o.ca&&o.listener==s&&o.capture==!!n&&o.ia==r)return a}return-1}cl.prototype.add=function(i,s,n,r,a){var o=i.toString();(i=this.g[o])||(i=this.g[o]=[],this.h++);var u=v0(i,s,r,a);return-1<u?(s=i[u],n||(s.fa=!1)):((s=new vL(s,this.src,o,!!r,a)).fa=n,i.push(s)),s};var Mg="closure_lm_"+(1e6*Math.random()|0),Zx={};function ME(i,s,n,r,a){if(r&&r.once)return Ag(i,s,n,r,a);if(Array.isArray(s)){for(var o=0;o<s.length;o++)ME(i,s[o],n,r,a);return null}return n=AE(n),i&&i[su]?i.N(s,n,wg(r)?!!r.capture:!!r,a):pL(i,s,n,!1,r,a)}function pL(i,s,n,r,a,o){if(!s)throw Error("Invalid event type");var u=wg(a)?!!a.capture:!!a,c=p0(i);if(c||(i[Mg]=c=new cl(i)),(n=c.add(s,n,r,u,o)).proxy)return n;if(r=function(){var s=gL;return function i(n){return s.call(i.src,i.listener,n)}}(),n.proxy=r,r.src=i,r.listener=n,i.addEventListener)Nr||(a=u),void 0===a&&(a=!1),i.addEventListener(s.toString(),r,a);else if(i.attachEvent)i.attachEvent(mL(s.toString()),r);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(r)}return n}function Ag(i,s,n,r,a){if(Array.isArray(s)){for(var o=0;o<s.length;o++)Ag(i,s[o],n,r,a);return null}return n=AE(n),i&&i[su]?i.O(s,n,wg(r)?!!r.capture:!!r,a):pL(i,s,n,!0,r,a)}function xg(i,s,n,r,a){if(Array.isArray(s))for(var o=0;o<s.length;o++)xg(i,s[o],n,r,a);else r=wg(r)?!!r.capture:!!r,n=AE(n),i&&i[su]?(i=i.i,(s=String(s).toString())in i.g&&-1<(n=v0(o=i.g[s],n,r,a))&&(jv(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete i.g[s],i.h--))):i&&(i=p0(i))&&(s=i.g[s.toString()],i=-1,s&&(i=v0(s,n,r,a)),(n=-1<i?s[i]:null)&&Ig(n))}function Ig(i){if("number"!=typeof i&&i&&!i.ca){var s=i.src;if(s&&s[su])Tg(s.i,i);else{var n=i.type,r=i.proxy;s.removeEventListener?s.removeEventListener(n,r,i.capture):s.detachEvent?s.detachEvent(mL(n),r):s.addListener&&s.removeListener&&s.removeListener(r),(n=p0(s))?(Tg(n,i),0==n.h&&(n.src=null,s[Mg]=null)):jv(i)}}}function mL(i){return i in Zx?Zx[i]:Zx[i]="on"+i}function gL(i,s){if(i.ca)i=!0;else{s=new Gv(s,this);var n=i.listener,r=i.ia||i.src;i.fa&&Ig(i),i=n.call(r,s)}return i}function p0(i){return(i=i[Mg])instanceof cl?i:null}var Bx="__closure_events_fn_"+(1e9*Math.random()>>>0);function AE(i){return"function"==typeof i?i:(i[Bx]||(i[Bx]=function(s){return i.handleEvent(s)}),i[Bx])}function ko(){yh.call(this),this.i=new cl(this),this.P=this,this.I=null}function to(i,s){var n,r=i.I;if(r)for(n=[];r;r=r.I)n.push(r);if(i=i.P,r=s.type||s,"string"==typeof s)s=new wo(s,i);else if(s instanceof wo)s.target=s.target||i;else{var a=s;f0(s=new wo(r,i),a)}if(a=!0,n)for(var o=n.length-1;0<=o;o--){var u=s.g=n[o];a=Dg(u,r,!0,s)&&a}if(a=Dg(u=s.g=i,r,!0,s)&&a,a=Dg(u,r,!1,s)&&a,n)for(o=0;o<n.length;o++)a=Dg(u=s.g=n[o],r,!1,s)&&a}function Dg(i,s,n,r){if(!(s=i.i.g[String(s)]))return!0;s=s.concat();for(var a=!0,o=0;o<s.length;++o){var u=s[o];if(u&&!u.ca&&u.capture==n){var c=u.listener,d=u.ia||u.src;u.fa&&Tg(i.i,u),a=!1!==c.call(d,r)&&a}}return a&&!r.defaultPrevented}Rs(ko,yh),ko.prototype[su]=!0,ko.prototype.removeEventListener=function(i,s,n,r){xg(this,i,s,n,r)},ko.prototype.M=function(){if(ko.Z.M.call(this),this.i){var s,i=this.i;for(s in i.g){for(var n=i.g[s],r=0;r<n.length;r++)jv(n[r]);delete i.g[s],i.h--}}this.I=null},ko.prototype.N=function(i,s,n,r){return this.i.add(String(i),s,!1,n,r)},ko.prototype.O=function(i,s,n,r){return this.i.add(String(i),s,!0,n,r)};var xE=xr.JSON.stringify;function IE(){var i=_L,s=null;return i.g&&(s=i.g,i.g=i.g.next,i.g||(i.h=null),s.next=null),s}var Vx,BU=function(){function i(){(0,M.Z)(this,i),this.h=this.g=null}return(0,D.Z)(i,[{key:"add",value:function(n,r){var a=yL.get();a.set(n,r),this.h?this.h.next=a:this.g=a,this.h=a}}]),i}(),yL=new(function(){function i(s,n){(0,M.Z)(this,i),this.i=s,this.j=n,this.h=0,this.g=null}return(0,D.Z)(i,[{key:"get",value:function(){var n;return 0<this.h?(this.h--,this.g=(n=this.g).next,n.next=null):n=this.i(),n}}]),i}())(function(){return new UU},function(i){return i.reset()}),UU=function(){function i(){(0,M.Z)(this,i),this.next=this.g=this.h=null}return(0,D.Z)(i,[{key:"set",value:function(n,r){this.h=n,this.g=r,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),i}();function VU(i){xr.setTimeout(function(){throw i},0)}function Ux(i,s){Vx||function(){var i=xr.Promise.resolve(void 0);Vx=function(){i.then(zU)}}(),Hx||(Vx(),Hx=!0),_L.add(i,s)}var Hx=!1,_L=new BU;function zU(){for(var i;i=IE();){try{i.h.call(i.g)}catch(n){VU(n)}var s=yL;s.j(i),100>s.h&&(s.h++,i.next=s.g,s.g=i)}Hx=!1}function DE(i,s){ko.call(this),this.h=i||1,this.g=s||xr,this.j=eo(this.kb,this),this.l=Date.now()}function Sc(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Rg(i,s,n){if("function"==typeof i)n&&(i=eo(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=eo(i.handleEvent,i)}return 2147483647<Number(s)?-1:xr.setTimeout(i,s||0)}function zx(i){i.g=Rg(function(){i.g=null,i.i&&(i.i=!1,zx(i))},i.j);var s=i.h;i.h=null,i.m.apply(null,s)}Rs(DE,ko),(jn=DE.prototype).da=!1,jn.S=null,jn.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),to(this,"tick"),this.da&&(Sc(this),this.start()))}},jn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jn.M=function(){DE.Z.M.call(this),Sc(this),delete this.g};var Gx=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).m=r,o.j=a,o.h=null,o.i=!1,o.g=null,o}return(0,D.Z)(n,[{key:"l",value:function(a){this.h=arguments,this.g?this.i=!0:zx(this)}},{key:"M",value:function(){(0,_e.Z)((0,de.Z)(n.prototype),"M",this).call(this),this.g&&(xr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(yh);function Zd(i){yh.call(this),this.h=i,this.g={}}Rs(Zd,yh);var RE=[];function m0(i,s,n,r){Array.isArray(n)||(n&&(RE[0]=n.toString()),n=RE);for(var a=0;a<n.length;a++){var o=ME(s,n[a],r||i.handleEvent,!1,i.h||i);if(!o)break;i.g[o.key]=o}}function jx(i){_E(i.g,function(s,n){this.g.hasOwnProperty(n)&&Ig(s)},i),i.g={}}function Fl(){this.g=!0}function Wv(i,s,n,r){i.info(function(){return"XMLHTTP TEXT ("+s+"): "+function(i,s){if(!i.g)return s;if(!s)return null;try{var n=JSON.parse(s);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var r=n[i];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var o=a[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<a.length;u++)a[u]=""}}}return xE(n)}catch(c){return s}}(i,n)+(r?" "+r:"")})}Zd.prototype.M=function(){Zd.Z.M.call(this),jx(this)},Zd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fl.prototype.Aa=function(){this.g=!1},Fl.prototype.info=function(){};var _h={},qx=null;function g0(){return qx=qx||new ko}function qv(i){wo.call(this,_h.Ma,i)}function Tc(i){var s=g0();to(s,new qv(s,i))}function y0(i,s){wo.call(this,_h.STAT_EVENT,i),this.stat=s}function Ps(i){var s=g0();to(s,new y0(s,i))}function Yv(i,s){wo.call(this,_h.Na,i),this.size=s}function Mc(i,s){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return xr.setTimeout(function(){i()},s)}_h.Ma="serverreachability",Rs(qv,wo),_h.STAT_EVENT="statevent",Rs(y0,wo),_h.Na="timingevent",Rs(Yv,wo);var _0={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},OE={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function b0(){}function k0(){}b0.prototype.h=null;var E0,Kv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $v(){wo.call(this,"d")}function LE(){wo.call(this,"c")}function NE(){}function Xv(i,s,n,r){this.l=i,this.j=s,this.m=n,this.X=r||1,this.V=new Zd(this),this.P=kL,this.W=new DE(i=kE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new FE}function FE(){this.i=null,this.g="",this.h=!1}Rs($v,wo),Rs(LE,wo),Rs(NE,b0),NE.prototype.g=function(){return new XMLHttpRequest},NE.prototype.i=function(){return{}},E0=new NE;var kL=45e3,C0={},S0={};function ZE(i,s,n){i.K=1,i.v=D0(Ac(s)),i.s=n,i.U=!0,Eu(i,null)}function Eu(i,s){i.F=Date.now(),T0(i),i.A=Ac(i.v);var n=i.A,r=i.X;Array.isArray(r)||(r=[String(r)]),Xx(n.h,"t",r),i.C=0,n=i.l.H,i.h=new FE,i.g=eC(i.l,n?s:null,!i.s),0<i.O&&(i.L=new Gx(eo(i.Ia,i,i.g),i.O)),m0(i.V,i.g,"readystatechange",i.gb),s=i.H?Dx(i.H):{},i.s?(i.u||(i.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,s)):(i.u="GET",i.g.ea(i.A,i.u,null,s)),Tc(1),function(i,s,n,r,a,o){i.info(function(){if(i.g)if(o)for(var u="",c=o.split("&"),d=0;d<c.length;d++){var m=c[d].split("=");if(1<m.length){var _=m[0];m=m[1];var b=_.split("_");u=2<=b.length&&"type"==b[1]?u+(_+"=")+m+"&":u+(_+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+s+"\n"+n+"\n"+u})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Yx(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Kx(i,s,n){for(var a,r=!0;!i.I&&i.C<n.length;){if((a=GU(i,n))==S0){4==s&&(i.o=4,Ps(14),r=!1),Wv(i.j,i.m,null,"[Incomplete Response]");break}if(a==C0){i.o=4,Ps(15),Wv(i.j,i.m,n,"[Invalid Chunk]"),r=!1;break}Wv(i.j,i.m,a,null),M0(i,a)}Yx(i)&&a!=S0&&a!=C0&&(i.h.g="",i.C=0),4!=s||0!=n.length||i.h.h||(i.o=1,Ps(16),r=!1),i.i=i.i&&r,r?0<n.length&&!i.aa&&(i.aa=!0,(s=i.l).g==i&&s.$&&!s.L&&(s.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),JE(s),s.L=!0,Ps(11))):(Wv(i.j,i.m,n,"[Invalid Chunked Response]"),vf(i),Pg(i))}function GU(i,s){var n=i.C,r=s.indexOf("\n",n);return-1==r?S0:(n=Number(s.substring(n,r)),isNaN(n)?C0:(r+=1)+n>s.length?S0:(s=s.substr(r,n),i.C=r+n,s))}function T0(i){i.Y=Date.now()+i.P,BE(i,i.P)}function BE(i,s){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Mc(eo(i.eb,i),s)}function UE(i){i.B&&(xr.clearTimeout(i.B),i.B=null)}function Pg(i){0==i.l.G||i.I||c1(i.l,i)}function vf(i){UE(i);var s=i.L;s&&"function"==typeof s.na&&s.na(),i.L=null,Sc(i.W),jx(i.V),i.g&&(s=i.g,i.g=null,s.abort(),s.na())}function M0(i,s){try{var n=i.l;if(0!=n.G&&(n.g==i||L0(n.i,i)))if(n.I=i.N,!i.J&&L0(n.i,i)&&3==n.G){try{var r=n.Ca.g.parse(s)}catch(W){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(n.u)n.ta=a[1],0<n.ta-n.U&&37500>a[2]&&n.N&&0==n.A&&!n.v&&(n.v=Mc(eo(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<i.F))break e;H0(n),U0(n)}V0(n),Ps(18)}if(1>=qE(n.i)&&n.ka){try{n.ka()}catch(W){}n.ka=void 0}}else Vd(n,11)}else if((i.J||n.g==i)&&H0(n),!Eg(s))for(a=n.Ca.g.parse(s),s=0;s<a.length;s++){var o=a[s];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var u=o[3];null!=u&&(n.ma=u,n.h.info("VER="+n.ma));var c=o[4];null!=c&&(n.za=c,n.h.info("SVER="+n.za));var d=o[5];null!=d&&"number"==typeof d&&0<d&&(n.K=r=1.5*d,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var m=i.g;if(m){var _=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var b=r.i;!b.g&&(zo(_,"spdy")||zo(_,"quic")||zo(_,"h2"))&&(b.j=b.l,b.g=new Set,b.h&&(N0(b,b.h),b.h=null))}if(r.D){var E=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.sa=E,Ba(r.F,r.D,E))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-i.F,n.h.info("Handshake RTT: "+n.O+"ms"));var T=i;if((r=n).oa=h1(r,r.H?r.la:null,r.W),T.J){Ic(r.i,T);var I=T,N=r.K;N&&I.setTimeout(N),I.B&&(UE(I),T0(I)),r.g=T}else u1(r);0<n.l.length&&np(n)}else"stop"!=o[0]&&"close"!=o[0]||Vd(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Vd(n,7):Ls(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Tc(4)}catch(W){}}function VE(i,s){if(i.forEach&&"function"==typeof i.forEach)i.forEach(s,void 0);else if(bg(i)||"string"==typeof i)l0(i,s,void 0);else{if(i.T&&"function"==typeof i.T)var n=i.T();else if(i.R&&"function"==typeof i.R)n=void 0;else if(bg(i)||"string"==typeof i){n=[];for(var r=i.length,a=0;a<r;a++)n.push(a)}else for(a in n=[],r=0,i)n[r++]=a;a=(r=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(bg(i)){for(var s=[],n=i.length,r=0;r<n;r++)s.push(i[r]);return s}for(r in s=[],n=0,i)s[n++]=i[r];return s}(i)).length;for(var o=0;o<a;o++)s.call(void 0,r[o],n&&n[o],i)}}function Qv(i,s){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(i)if(i instanceof Qv)for(n=i.T(),r=0;r<n.length;r++)this.set(n[r],i.get(n[r]));else for(r in i)this.set(r,i[r])}function A0(i){if(i.i!=i.g.length){for(var s=0,n=0;s<i.g.length;){var r=i.g[s];Bd(i.h,r)&&(i.g[n++]=r),s++}i.g.length=n}if(i.i!=i.g.length){var a={};for(n=s=0;s<i.g.length;)Bd(a,r=i.g[s])||(i.g[n++]=r,a[r]=1),s++;i.g.length=n}}function Bd(i,s){return Object.prototype.hasOwnProperty.call(i,s)}(jn=Xv.prototype).setTimeout=function(i){this.P=i},jn.gb=function(i){i=i.target;var s=this.L;s&&3==gf(i)?s.l():this.Ia(i)},jn.Ia=function(i){try{if(i==this.g)e:{var s=gf(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>s)&&(3!=s||kE||this.g&&(this.h.h||this.g.ga()||a1(this.g)))){this.I||4!=s||7==n||Tc(8==n||0>=r?3:2),UE(this);var a=this.g.ba();this.N=a;t:if(Yx(this)){var o=a1(this.g);i="";var u=o.length,c=4==gf(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vf(this),Pg(this);var d="";break t}this.h.i=new xr.TextDecoder}for(n=0;n<u;n++)this.h.h=!0,i+=this.h.i.decode(o[n],{stream:c&&n==u-1});o.splice(0,u),this.h.g+=i,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==a,function(i,s,n,r,a,o,u){i.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+s+"\n"+n+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.X,s,a),this.i){if(this.$&&!this.J){t:{if(this.g){var m,_=this.g;if((m=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Eg(m)){var b=m;break t}}b=null}if(!(a=b)){this.i=!1,this.o=3,Ps(12),vf(this),Pg(this);break e}Wv(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,M0(this,a)}this.U?(Kx(this,s,d),kE&&this.i&&3==s&&(m0(this.V,this.W,"tick",this.fb),this.W.start())):(Wv(this.j,this.m,d,null),M0(this,d)),4==s&&vf(this),this.i&&!this.I&&(4==s?c1(this.l,this):(this.i=!1,T0(this)))}else 400==a&&0<d.indexOf("Unknown SID")?(this.o=3,Ps(12)):(this.o=0,Ps(13)),vf(this),Pg(this)}}}catch(E){}},jn.fb=function(){if(this.g){var i=gf(this.g),s=this.g.ga();this.C<s.length&&(UE(this),Kx(this,i,s),this.i&&4!=i&&T0(this))}},jn.cancel=function(){this.I=!0,vf(this)},jn.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function(i,s){i.info(function(){return"TIMEOUT: "+s})}(this.j,this.A),2!=this.K&&(Tc(3),Ps(17)),vf(this),this.o=2,Pg(this)):BE(this,this.Y-i)},(jn=Qv.prototype).R=function(){A0(this);for(var i=[],s=0;s<this.g.length;s++)i.push(this.h[this.g[s]]);return i},jn.T=function(){return A0(this),this.g.concat()},jn.get=function(i,s){return Bd(this.h,i)?this.h[i]:s},jn.set=function(i,s){Bd(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=s},jn.forEach=function(i,s){for(var n=this.T(),r=0;r<n.length;r++){var a=n[r],o=this.get(a);i.call(s,o,a,this)}};var HE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ud(i,s){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Ud){this.g=void 0!==s?s:i.g,Og(this,i.j),this.s=i.s,x0(this,i.i),Vu(this,i.m),this.l=i.l,s=i.h;var n=new Fg;n.i=s.i,s.g&&(n.g=new Qv(s.g),n.h=s.h),I0(this,n),this.o=i.o}else i&&(n=String(i).match(HE))?(this.g=!!s,Og(this,n[1]||"",!0),this.s=Lg(n[2]||""),x0(this,n[3]||"",!0),Vu(this,n[4]),this.l=Lg(n[5]||"",!0),I0(this,n[6]||"",!0),this.o=Lg(n[7]||"")):(this.g=!!s,this.h=new Fg(null,this.g))}function Ac(i){return new Ud(i)}function Og(i,s,n){i.j=n?Lg(s,!0):s,i.j&&(i.j=i.j.replace(/:$/,""))}function x0(i,s,n){i.i=n?Lg(s,!0):s}function Vu(i,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);i.m=s}else i.m=null}function I0(i,s,n){s instanceof Fg?(i.h=s,function(i,s){s&&!i.j&&(xc(i),i.i=null,i.g.forEach(function(n,r){var a=r.toLowerCase();r!=a&&(O0(this,r),Xx(this,a,n))},i)),i.j=s}(i.h,i.g)):(n||(s=Ng(s,P0)),i.h=new Fg(s,i.g))}function Ba(i,s,n){i.h.set(s,n)}function D0(i){return Ba(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Lg(i,s){return i?s?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ng(i,s,n){return"string"==typeof i?(i=encodeURI(i).replace(s,SL),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function SL(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ud.prototype.toString=function(){var i=[],s=this.j;s&&i.push(Ng(s,R0,!0),":");var n=this.i;return(n||"file"==s)&&(i.push("//"),(s=this.s)&&i.push(Ng(s,R0,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&i.push("/"),i.push(Ng(n,"/"==n.charAt(0)?ML:TL,!0))),(n=this.h.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Ng(n,zE)),i.join("")};var R0=/[#\/\?@]/g,TL=/[#\?:]/g,ML=/[#\?]/g,P0=/[#\?@]/g,zE=/#/g;function Fg(i,s){this.h=this.g=null,this.i=i||null,this.j=!!s}function xc(i){i.g||(i.g=new Qv,i.h=0,i.i&&function(i,s){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var r=i[n].indexOf("="),a=null;if(0<=r){var o=i[n].substring(0,r);a=i[n].substring(r+1)}else o=i[n];s(o,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(s,n){i.add(decodeURIComponent(s.replace(/\+/g," ")),n)}))}function O0(i,s){xc(i),s=Jv(i,s),Bd(i.g.h,s)&&(i.i=null,i.h-=i.g.get(s).length,Bd((i=i.g).h,s)&&(delete i.h[s],i.i--,i.g.length>2*i.i&&A0(i)))}function GE(i,s){return xc(i),s=Jv(i,s),Bd(i.g.h,s)}function Xx(i,s,n){O0(i,s),0<n.length&&(i.i=null,i.g.set(Jv(i,s),Hv(n)),i.h+=n.length)}function Jv(i,s){return s=String(s),i.j&&(s=s.toLowerCase()),s}(jn=Fg.prototype).add=function(i,s){xc(this),this.i=null,i=Jv(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(s),this.h+=1,this},jn.forEach=function(i,s){xc(this),this.g.forEach(function(n,r){l0(n,function(a){i.call(s,a,r,this)},this)},this)},jn.T=function(){xc(this);for(var i=this.g.R(),s=this.g.T(),n=[],r=0;r<s.length;r++)for(var a=i[r],o=0;o<a.length;o++)n.push(s[r]);return n},jn.R=function(i){xc(this);var s=[];if("string"==typeof i)GE(this,i)&&(s=kg(s,this.g.get(Jv(this,i))));else{i=this.g.R();for(var n=0;n<i.length;n++)s=kg(s,i[n])}return s},jn.set=function(i,s){return xc(this),this.i=null,GE(this,i=Jv(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[s]),this.h+=1,this},jn.get=function(i,s){return i&&0<(i=this.R(i)).length?String(i[0]):s},jn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],s=this.g.T(),n=0;n<s.length;n++){var r=s[n],a=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var u=a;""!==r[o]&&(u+="="+encodeURIComponent(String(r[o]))),i.push(u)}}return this.i=i.join("&")};var WU=function i(s,n){(0,M.Z)(this,i),this.h=s,this.g=n};function Qx(i){this.l=i||Jx,i=xr.PerformanceNavigationTiming?0<(i=xr.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(xr.g&&xr.g.Ea&&xr.g.Ea()&&xr.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Jx=10;function WE(i){return!!i.h||!!i.g&&i.g.size>=i.j}function qE(i){return i.h?1:i.g?i.g.size:0}function L0(i,s){return i.h?i.h==s:!!i.g&&i.g.has(s)}function N0(i,s){i.g?i.g.add(s):i.h=s}function Ic(i,s){i.h&&i.h==s?i.h=null:i.g&&i.g.has(s)&&i.g.delete(s)}function Zg(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var r,s=i.i,n=(0,Re.Z)(i.g.values());try{for(n.s();!(r=n.n()).done;)s=s.concat(r.value.D)}catch(o){n.e(o)}finally{n.f()}return s}return Hv(i.i)}function YE(){}function AL(){this.g=new YE}function qU(i,s,n){var r=n||"";try{VE(i,function(a,o){var u=a;wg(a)&&(u=xE(a)),s.push(r+o+"="+encodeURIComponent(u))})}catch(a){throw s.push(r+"type="+encodeURIComponent("_badmap")),a}}function Bg(i,s,n,r,a){try{s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null,a(r)}catch(o){}}function pf(i){this.l=i.$b||null,this.j=i.ib||!1}function bh(i,s){ko.call(this),this.D=i,this.u=s,this.m=void 0,this.readyState=KE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qx.prototype.cancel=function(){if(this.i=Zg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var s,i=(0,Re.Z)(this.g.values());try{for(i.s();!(s=i.n()).done;)s.value.cancel()}catch(r){i.e(r)}finally{i.f()}this.g.clear()}},YE.prototype.stringify=function(i){return xr.JSON.stringify(i,void 0)},YE.prototype.parse=function(i){return xr.JSON.parse(i,void 0)},Rs(pf,b0),pf.prototype.g=function(){return new bh(this.l,this.j)},pf.prototype.i=function(i){return function(){return i}}({}),Rs(bh,ko);var KE=0;function Z0(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function ep(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ug(i)}function Ug(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(jn=bh.prototype).open=function(i,s){if(this.readyState!=KE)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=s,this.readyState=1,Ug(this)},jn.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var s={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(s.body=i),(this.D||xr).fetch(new Request(this.B,s)).then(this.Va.bind(this),this.ha.bind(this))},jn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ep(this)),this.readyState=KE},jn.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ug(this)),this.g&&(this.readyState=3,Ug(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==xr.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Z0(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},jn.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var s=i.value?i.value:new Uint8Array(0);(s=this.A.decode(s,{stream:!i.done}))&&(this.response=this.responseText+=s)}i.done?ep(this):Ug(this),3==this.readyState&&Z0(this)}},jn.Ua=function(i){this.g&&(this.response=this.responseText=i,ep(this))},jn.Ta=function(i){this.g&&(this.response=i,ep(this))},jn.ha=function(){this.g&&ep(this)},jn.setRequestHeader=function(i,s){this.v.append(i,s)},jn.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},jn.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],s=this.h.entries(),n=s.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=s.next();return i.join("\r\n")},Object.defineProperty(bh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var e1=xr.JSON.parse;function Os(i){ko.call(this),this.headers=new Qv,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=B0,this.K=this.L=!1}Rs(Os,ko);var B0="",xL=/^https?$/i,IL=["POST","PUT"];function tp(i){return"content-type"==i.toLowerCase()}function $E(i,s){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=s,i.m=5,n1(i),mf(i)}function n1(i){i.D||(i.D=!0,to(i,"complete"),to(i,"error"))}function r1(i){if(i.h&&void 0!==s0&&(!i.C[1]||4!=gf(i)||2!=i.ba()))if(i.v&&4==gf(i))Rg(i.Fa,0,i);else if(to(i,"readystatechange"),4==gf(i)){i.h=!1;try{var r,s=i.ba();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}if(!(r=n)){var a;if(a=0===s){var o=String(i.H).match(HE)[1]||null;if(!o&&xr.self&&xr.self.location){var u=xr.self.location.protocol;o=u.substr(0,u.length-1)}a=!xL.test(o?o.toLowerCase():"")}r=a}if(r)to(i,"complete"),to(i,"success");else{i.m=6;try{var c=2<gf(i)?i.g.statusText:""}catch(d){c=""}i.j=c+" ["+i.ba()+"]",n1(i)}}finally{mf(i)}}}function mf(i,s){if(i.g){i1(i);var n=i.g,r=i.C[0]?_g:null;i.g=null,i.C=null,s||to(i,"ready");try{n.onreadystatechange=r}catch(a){}}}function i1(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(xr.clearTimeout(i.A),i.A=null)}function gf(i){return i.g?i.g.readyState:0}function a1(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case B0:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(s){return null}}function s1(i,s,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(i){var s="";return _E(i,function(n,r){s+=r,s+=":",s+=n,s+="\r\n"}),s}(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Ba(i,s,n))}function Vg(i,s,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||s}function XE(i){this.za=0,this.l=[],this.h=new Fl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vg("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vg("baseRetryDelayMs",5e3,i),this.$a=Vg("retryDelaySeedMs",1e4,i),this.Ya=Vg("forwardChannelMaxRetries",2,i),this.ra=Vg("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Qx(i&&i.concurrentRequestLimit),this.Ca=new AL,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Ls(i){if(RL(i),3==i.G){var s=i.V++,n=Ac(i.F);Ba(n,"SID",i.J),Ba(n,"RID",s),Ba(n,"TYPE","terminate"),Hg(i,n),(s=new Xv(i,i.h,s,void 0)).K=2,s.v=D0(Ac(n)),n=!1,xr.navigator&&xr.navigator.sendBeacon&&(n=xr.navigator.sendBeacon(s.v.toString(),"")),!n&&xr.Image&&((new Image).src=s.v,n=!0),n||(s.g=eC(s.l,null),s.g.ea(s.v)),s.F=Date.now(),T0(s)}f1(i)}function U0(i){i.g&&(JE(i),i.g.cancel(),i.g=null)}function RL(i){U0(i),i.u&&(xr.clearTimeout(i.u),i.u=null),H0(i),i.i.cancel(),i.m&&("number"==typeof i.m&&xr.clearTimeout(i.m),i.m=null)}function wh(i,s){i.l.push(new WU(i.Za++,s)),3==i.G&&np(i)}function np(i){WE(i.i)||i.m||(i.m=!0,Ux(i.Ha,i),i.C=0)}function PL(i,s){var n;n=s?s.m:i.V++;var r=Ac(i.F);Ba(r,"SID",i.J),Ba(r,"RID",n),Ba(r,"AID",i.U),Hg(i,r),i.o&&i.s&&s1(r,i.o,i.s),n=new Xv(i,i.h,n,i.C+1),null===i.o&&(n.H=i.s),s&&(i.l=s.D.concat(i.l)),s=o1(i,n,1e3),n.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),N0(i.i,n),ZE(n,r,s)}function Hg(i,s){i.j&&VE({},function(n,r){Ba(s,r,n)})}function o1(i,s,n){n=Math.min(i.l.length,n);var r=i.j?eo(i.j.Oa,i.j,i):null;e:for(var a=i.l,o=-1;;){var u=["count="+n];-1==o?0<n?u.push("ofs="+(o=a[0].h)):o=0:u.push("ofs="+o);for(var c=!0,d=0;d<n;d++){var m=a[d].h,_=a[d].g;if(0>(m-=o))o=Math.max(0,a[d].h-100),c=!1;else try{qU(_,u,"req"+m+"_")}catch(b){r&&r(_)}}if(c){r=u.join("&");break e}}return i=i.l.splice(0,n),s.D=i,r}function u1(i){i.g||i.u||(i.Y=1,Ux(i.Ga,i),i.A=0)}function V0(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Mc(eo(i.Ga,i),rp(i,i.A)),i.A++,0))}function JE(i){null!=i.B&&(xr.clearTimeout(i.B),i.B=null)}function l1(i){i.g=new Xv(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var s=Ac(i.oa);Ba(s,"RID","rpc"),Ba(s,"SID",i.J),Ba(s,"CI",i.N?"0":"1"),Ba(s,"AID",i.U),Hg(i,s),Ba(s,"TYPE","xmlhttp"),i.o&&i.s&&s1(s,i.o,i.s),i.K&&i.g.setTimeout(i.K);var n=i.g;i=i.la,n.K=1,n.v=D0(Ac(s)),n.s=null,n.U=!0,Eu(n,i)}function H0(i){null!=i.v&&(xr.clearTimeout(i.v),i.v=null)}function c1(i,s){var n=null;if(i.g==s){H0(i),JE(i),i.g=null;var r=2}else{if(!L0(i.i,s))return;n=s.D,Ic(i.i,s),r=1}if(i.I=s.N,0!=i.G)if(s.i)if(1==r){n=s.s?s.s.length:0,s=Date.now()-s.F;var a=i.C;to(r=g0(),new Yv(r,n,s,a)),np(i)}else u1(i);else if(3==(a=s.o)||0==a&&0<i.I||!(1==r&&function(i,s){return!(qE(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=s.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Mc(eo(i.Ha,i,s),rp(i,i.C)),i.C++,0)))}(i,s)||2==r&&V0(i)))switch(n&&0<n.length&&(s=i.i,s.i=s.i.concat(n)),a){case 1:Vd(i,5);break;case 4:Vd(i,10);break;case 3:Vd(i,6);break;default:Vd(i,2)}}function rp(i,s){var n=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(n*=2),n*s}function Vd(i,s){if(i.h.info("Error code "+s),2==s){var n=null;i.j&&(n=null);var r=eo(i.jb,i);n||(n=new Ud("//www.google.com/images/cleardot.gif"),xr.location&&"http"==xr.location.protocol||Og(n,"https"),D0(n)),function(i,s){var n=new Fl;if(xr.Image){var r=new Image;r.onload=u0(Bg,n,r,"TestLoadImage: loaded",!0,s),r.onerror=u0(Bg,n,r,"TestLoadImage: error",!1,s),r.onabort=u0(Bg,n,r,"TestLoadImage: abort",!1,s),r.ontimeout=u0(Bg,n,r,"TestLoadImage: timeout",!1,s),xr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=i}else s(!1)}(n.toString(),r)}else Ps(2);i.G=0,i.j&&i.j.va(s),f1(i),RL(i)}function f1(i){i.G=0,i.I=-1,i.j&&((0!=Zg(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Hv(i.l),i.l.length=0),i.j.ua())}function h1(i,s,n){var r=function(i){return i instanceof Ud?Ac(i):new Ud(i,void 0)}(n);if(""!=r.i)s&&x0(r,s+"."+r.i),Vu(r,r.m);else{var a=xr.location;r=function(i,s,n,r){var a=new Ud(null,void 0);return i&&Og(a,i),s&&x0(a,s),n&&Vu(a,n),r&&(a.l=r),a}(a.protocol,s?s+"."+a.hostname:a.hostname,+a.port,n)}return i.aa&&_E(i.aa,function(o,u){Ba(r,u,o)}),n=i.sa,(s=i.D)&&n&&Ba(r,s,n),Ba(r,"VER",i.ma),Hg(i,r),r}function eC(i,s,n){if(s&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(s=new Os(n&&i.Ba&&!i.qa?new pf({ib:!0}):i.qa)).L=i.H,s}function d1(){}function tC(){if(zv&&!(10<=Number(dL)))throw Error("Environmental error: no available transport.")}function Hu(i,s){ko.call(this),this.g=new XE(s),this.l=i,this.h=s&&s.messageUrlParams||null,i=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(i?i["X-WebChannel-Content-Type"]=s.messageContentType:i={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.ya&&(i?i["X-WebChannel-Client-Profile"]=s.ya:i={"X-WebChannel-Client-Profile":s.ya}),this.g.P=i,(i=s&&s.httpHeadersOverwriteParam)&&!Eg(i)&&(this.g.o=i),this.A=s&&s.supportsCrossDomainXhr||!1,this.v=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!Eg(s)&&(this.g.D=s,null!==(i=this.h)&&s in i&&s in(i=this.h)&&delete i[s]),this.j=new Hd(this)}function v1(i){$v.call(this);var s=i.__sm__;if(s){e:{for(var n in s){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,s=null!==s&&i in s?s[i]:void 0),this.data=s}else this.data=i}function OL(){LE.call(this),this.status=1}function Hd(i){this.g=i}(jn=Os.prototype).ea=function(i,s,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);s=s?s.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():E0.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:E0),this.g.onreadystatechange=eo(this.Fa,this);try{this.F=!0,this.g.open(s,String(i),!0),this.F=!1}catch(o){return void $E(this,o)}i=n||"";var a=new Qv(this.headers);r&&VE(r,function(o,u){a.set(u,o)}),r=function(i){e:{for(var s=tp,n=i.length,r="string"==typeof i?i.split(""):i,a=0;a<n;a++)if(a in r&&s.call(void 0,r[a],a,i)){s=a;break e}s=-1}return 0>s?null:"string"==typeof i?i.charAt(s):i[s]}(a.T()),n=xr.FormData&&i instanceof xr.FormData,!(0<=gE(IL,s))||r||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(o,u){this.g.setRequestHeader(u,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{i1(this),0<this.B&&((this.K=function(i){return zv&&Lx()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=eo(this.pa,this)):this.A=Rg(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(o){$E(this,o)}},jn.pa=function(){void 0!==s0&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,to(this,"timeout"),this.abort(8))},jn.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,to(this,"complete"),to(this,"abort"),mf(this))},jn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mf(this,!0)),Os.Z.M.call(this)},jn.Fa=function(){this.s||(this.F||this.v||this.l?r1(this):this.cb())},jn.cb=function(){r1(this)},jn.ba=function(){try{return 2<gf(this)?this.g.status:-1}catch(i){return-1}},jn.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},jn.Qa=function(i){if(this.g){var s=this.g.responseText;return i&&0==s.indexOf(i)&&(s=s.substring(i.length)),e1(s)}},jn.Da=function(){return this.m},jn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(jn=XE.prototype).ma=8,jn.G=1,jn.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(s){}},jn.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var s=new Xv(this,this.h,i,void 0),n=this.s;if(this.P&&(n?f0(n=Dx(n),this.P):n=this.P),null===this.o&&(s.H=n),this.ja)e:{for(var r=0,a=0;a<this.l.length;a++){var o=this.l[a];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=a;break e}if(4096===r||a===this.l.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=o1(this,s,r),Ba(a=Ac(this.F),"RID",i),Ba(a,"CVER",22),this.D&&Ba(a,"X-HTTP-Session-Id",this.D),Hg(this,a),this.o&&n&&s1(a,this.o,n),N0(this.i,s),this.Ra&&Ba(a,"TYPE","init"),this.ja?(Ba(a,"$req",r),Ba(a,"SID","null"),s.$=!0,ZE(s,a,null)):ZE(s,a,r),this.G=2}}else 3==this.G&&(i?PL(this,i):0==this.l.length||WE(this.i)||PL(this))},jn.Ga=function(){if(this.u=null,l1(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Mc(eo(this.bb,this),i)}},jn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ps(10),U0(this),l1(this))},jn.ab=function(){null!=this.v&&(this.v=null,U0(this),V0(this),Ps(19))},jn.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Ps(2)):(this.h.info("Failed to ping google.com"),Ps(1))},(jn=d1.prototype).xa=function(){},jn.wa=function(){},jn.va=function(){},jn.ua=function(){},jn.Oa=function(){},tC.prototype.g=function(i,s){return new Hu(i,s)},Rs(Hu,ko),Hu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,s=this.l,n=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ux(eo(i.hb,i,s))),Ps(0),i.W=s,i.aa=n||{},i.N=i.X,i.F=h1(i,null,i.W),np(i)},Hu.prototype.close=function(){Ls(this.g)},Hu.prototype.u=function(i){if("string"==typeof i){var s={};s.__data__=i,wh(this.g,s)}else this.v?((s={}).__data__=xE(i),wh(this.g,s)):wh(this.g,i)},Hu.prototype.M=function(){this.g.j=null,delete this.j,Ls(this.g),delete this.g,Hu.Z.M.call(this)},Rs(v1,$v),Rs(OL,LE),Rs(Hd,d1),Hd.prototype.xa=function(){to(this.g,"a")},Hd.prototype.wa=function(i){to(this.g,new v1(i))},Hd.prototype.va=function(i){to(this.g,new OL(i))},Hd.prototype.ua=function(){to(this.g,"b")},tC.prototype.createWebChannel=tC.prototype.g,Hu.prototype.send=Hu.prototype.u,Hu.prototype.open=Hu.prototype.m,Hu.prototype.close=Hu.prototype.close,_0.NO_ERROR=0,_0.TIMEOUT=8,_0.HTTP_ERROR=6,OE.COMPLETE="complete",k0.EventType=Kv,Kv.OPEN="a",Kv.CLOSE="b",Kv.ERROR="c",Kv.MESSAGE="d",ko.prototype.listen=ko.prototype.N,Os.prototype.listenOnce=Os.prototype.O,Os.prototype.getLastError=Os.prototype.La,Os.prototype.getLastErrorCode=Os.prototype.Da,Os.prototype.getStatus=Os.prototype.ba,Os.prototype.getResponseJson=Os.prototype.Qa,Os.prototype.getResponseText=Os.prototype.ga,Os.prototype.send=Os.prototype.ea;var YU=hf.createWebChannelTransport=function(){return new tC},LL=hf.getStatEventTarget=function(){return g0()},nC=hf.ErrorCode=_0,NL=hf.EventType=OE,KU=hf.Event=_h,FL=hf.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rC=hf.FetchXmlHttpFactory=pf,z0=hf.WebChannel=k0,p1=hf.XhrIo=Os,no=function(){function i(s){(0,M.Z)(this,i),this.uid=s}return(0,D.Z)(i,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(n){return n.uid===this.uid}}]),i}();no.UNAUTHENTICATED=new no(null),no.GOOGLE_CREDENTIALS=new no("google-credentials-uid"),no.FIRST_PARTY=new no("first-party-uid"),no.MOCK_USER=new no("mock-user");var zg="9.1.0",gs=new Cc.Yd("@firebase/firestore");function iC(){return gs.logLevel}function wn(i){if(gs.logLevel<=Cc.in.DEBUG){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a=n.map(G0);gs.debug.apply(gs,["Firestore (".concat(zg,"): ").concat(i)].concat((0,Gr.Z)(a)))}}function ys(i){if(gs.logLevel<=Cc.in.ERROR){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a=n.map(G0);gs.error.apply(gs,["Firestore (".concat(zg,"): ").concat(i)].concat((0,Gr.Z)(a)))}}function ip(i){if(gs.logLevel<=Cc.in.WARN){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a=n.map(G0);gs.warn.apply(gs,["Firestore (".concat(zg,"): ").concat(i)].concat((0,Gr.Z)(a)))}}function G0(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(n){return i}}function ar(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",s="FIRESTORE (".concat(zg,") INTERNAL ASSERTION FAILED: ")+i;throw ys(s),new Error(s)}function Ir(i,s){i||ar()}function En(i,s){return i}var Lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},en=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,a)).code=r,o.message=a,o.name="FirebaseError",o.toString=function(){return"".concat(o.name,": [code=").concat(o.code,"]: ").concat(o.message)},o}return n}((0,mE.Z)(Error)),ro=function i(){var s=this;(0,M.Z)(this,i),this.promise=new Promise(function(n,r){s.resolve=n,s.reject=r})},g1=function i(s,n){(0,M.Z)(this,i),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(s)},ZL=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(n,r){n.enqueueRetryable(function(){return r(no.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),i}(),BL=function(){function i(s){(0,M.Z)(this,i),this.token=s,this.changeListener=null}return(0,D.Z)(i,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(n,r){var a=this;this.changeListener=r,n.enqueueRetryable(function(){return r(a.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),i}(),UL=function(){function i(s){(0,M.Z)(this,i),this.t=s,this.currentUser=no.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,D.Z)(i,[{key:"start",value:function(n,r){var a=this,o=this.i,u=function(b){return a.i!==o?(o=a.i,r(b)):Promise.resolve()},c=new ro;this.o=function(){a.i++,a.currentUser=a.u(),c.resolve(),c=new ro,n.enqueueRetryable(function(){return u(a.currentUser)})};var d=function(){var b=c;n.enqueueRetryable((0,Ut.Z)(Ze().mark(function E(){return Ze().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,b.promise;case 2:return I.next=4,u(a.currentUser);case 4:case"end":return I.stop()}},E)})))},m=function(b){wn("FirebaseCredentialsProvider","Auth detected"),a.auth=b,a.auth.addAuthTokenListener(a.o),d()};this.t.onInit(function(_){return m(_)}),setTimeout(function(){if(!a.auth){var _=a.t.getImmediate({optional:!0});_?m(_):(wn("FirebaseCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ro)}},0),d()}},{key:"getToken",value:function(){var n=this,r=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(function(o){return n.i!==r?(wn("FirebaseCredentialsProvider","getToken aborted due to token change."),n.getToken()):o?(Ir("string"==typeof o.accessToken),new g1(o.accessToken,n.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var n=this.auth&&this.auth.getUid();return Ir(null===n||"string"==typeof n),new no(n)}}]),i}(),VL=function(){function i(s,n,r){(0,M.Z)(this,i),this.h=s,this.l=n,this.m=r,this.type="FirstParty",this.user=no.FIRST_PARTY}return(0,D.Z)(i,[{key:"authHeaders",get:function(){var n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}]),i}(),j0=function(){function i(s,n,r){(0,M.Z)(this,i),this.h=s,this.l=n,this.m=r}return(0,D.Z)(i,[{key:"getToken",value:function(){return Promise.resolve(new VL(this.h,this.l,this.m))}},{key:"start",value:function(n,r){n.enqueueRetryable(function(){return r(no.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),i}(),io=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.previousValue=s,n&&(n.sequenceNumberHandler=function(a){return r.g(a)},this.p=function(a){return n.writeSequenceNumber(a)})}return(0,D.Z)(i,[{key:"g",value:function(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}},{key:"next",value:function(){var n=++this.previousValue;return this.p&&this.p(n),n}}]),i}();function y1(i){var s="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(s&&"function"==typeof s.getRandomValues)s.getRandomValues(n);else for(var r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}io.T=-1;var kh=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,null,[{key:"I",value:function(){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length,a="";a.length<20;)for(var o=y1(40),u=0;u<o.length;++u)a.length<20&&o[u]<r&&(a+=n.charAt(o[u]%n.length));return a}}]),i}();function Jr(i,s){return i<s?-1:i>s?1:0}function ap(i,s,n){return i.length===s.length&&i.every(function(r,a){return n(r,s[a])})}function _1(i){return i+"\0"}var Go=function(){function i(s,n){if((0,M.Z)(this,i),this.seconds=s,this.nanoseconds=n,n<0)throw new en(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new en(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(s<-62135596800)throw new en(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s);if(s>=253402300800)throw new en(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s)}return(0,D.Z)(i,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(n){return this.seconds===n.seconds?Jr(this.nanoseconds,n.nanoseconds):Jr(this.seconds,n.seconds)}},{key:"isEqual",value:function(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return i.fromMillis(Date.now())}},{key:"fromDate",value:function(n){return i.fromMillis(n.getTime())}},{key:"fromMillis",value:function(n){var r=Math.floor(n/1e3);return new i(r,Math.floor(1e6*(n-1e3*r)))}}]),i}(),Ar=function(){function i(s){(0,M.Z)(this,i),this.timestamp=s}return(0,D.Z)(i,[{key:"compareTo",value:function(n){return this.timestamp._compareTo(n.timestamp)}},{key:"isEqual",value:function(n){return this.timestamp.isEqual(n.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(n){return new i(n)}},{key:"min",value:function(){return new i(new Go(0,0))}}]),i}();function sp(i){var s=0;for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&s++;return s}function os(i,s){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&s(n,i[n])}function Eh(i){for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s))return!1;return!0}var Gg=function(){function i(s,n,r){(0,M.Z)(this,i),void 0===n?n=0:n>s.length&&ar(),void 0===r?r=s.length-n:r>s.length-n&&ar(),this.segments=s,this.offset=n,this.len=r}return(0,D.Z)(i,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(n){return 0===i.comparator(this,n)}},{key:"child",value:function(n){var r=this.segments.slice(this.offset,this.limit());return n instanceof i?n.forEach(function(a){r.push(a)}):r.push(n),this.construct(r)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(n){return this.segments[this.offset+n]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(n){if(n.length<this.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}},{key:"isImmediateParentOf",value:function(n){if(this.length+1!==n.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}},{key:"forEach",value:function(n){for(var r=this.offset,a=this.limit();r<a;r++)n(this.segments[r])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(n,r){for(var a=Math.min(n.length,r.length),o=0;o<a;o++){var u=n.get(o),c=r.get(o);if(u<c)return-1;if(u>c)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}]),i}(),Wr=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"construct",value:function(a,o,u){return new n(a,o,u)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var a=[],o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];for(var d=0,m=u;d<m.length;d++){var _=m[d];if(_.indexOf("//")>=0)throw new en(Lt.INVALID_ARGUMENT,"Invalid segment (".concat(_,"). Paths must not contain // in them."));a.push.apply(a,(0,Gr.Z)(_.split("/").filter(function(b){return b.length>0})))}return new n(a)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gg),aC=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jo=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"construct",value:function(a,o,u){return new n(a,o,u)}},{key:"canonicalString",value:function(){return this.toArray().map(function(a){return a=a.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(a)||(a="`"+a+"`"),a}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(a){return aC.test(a)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(a){for(var o=[],u="",c=0,d=function(){if(0===u.length)throw new en(Lt.INVALID_ARGUMENT,"Invalid field path (".concat(a,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));o.push(u),u=""},m=!1;c<a.length;){var _=a[c];if("\\"===_){if(c+1===a.length)throw new en(Lt.INVALID_ARGUMENT,"Path has trailing escape character: "+a);var b=a[c+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new en(Lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+a);u+=b,c+=2}else"`"===_?(m=!m,c++):"."!==_||m?(u+=_,c++):(d(),c++)}if(d(),m)throw new en(Lt.INVALID_ARGUMENT,"Unterminated ` in path: "+a);return new n(o)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gg),Zl=function(){function i(s){(0,M.Z)(this,i),this.fields=s,s.sort(jo.comparator)}return(0,D.Z)(i,[{key:"covers",value:function(n){var a,r=(0,Re.Z)(this.fields);try{for(r.s();!(a=r.n()).done;)if(a.value.isPrefixOf(n))return!0}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"isEqual",value:function(n){return ap(this.fields,n.fields,function(r,a){return r.isEqual(a)})}}]),i}(),ao=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.binaryString=n}return(0,D.Z)(s,[{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(r){for(var a=new Uint8Array(r.length),o=0;o<r.length;o++)a[o]=r.charCodeAt(o);return a}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(r){return Jr(this.binaryString,r.binaryString)}},{key:"isEqual",value:function(r){return this.binaryString===r.binaryString}}],[{key:"fromBase64String",value:function(r){return new s(atob(r))}},{key:"fromUint8Array",value:function(r){return new s(function(o){for(var u="",c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u}(r))}}]),s}();return i.EMPTY_BYTE_STRING=new i(""),i}(),up=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zu(i){if(Ir(!!i),"string"==typeof i){var s=0,n=up.exec(i);if(Ir(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),s=Number(r)}var a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:s}}return{seconds:Ia(i.seconds),nanos:Ia(i.nanos)}}function Ia(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Bl(i){return"string"==typeof i?ao.fromBase64String(i):ao.fromUint8Array(i)}function Ch(i){var s,n;return"server_timestamp"===(null===(n=((null===(s=null==i?void 0:i.mapValue)||void 0===s?void 0:s.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sC(i){var s=i.mapValue.fields.__previous_value__;return Ch(s)?sC(s):s}function lp(i){var s=zu(i.mapValue.fields.__local_write_time__.timestampValue);return new Go(s.seconds,s.nanos)}function Sh(i){return null==i}function jg(i){return 0===i&&1/i==-1/0}function oC(i){return"number"==typeof i&&Number.isInteger(i)&&!jg(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var fr=function(){function i(s){(0,M.Z)(this,i),this.path=s}return(0,D.Z)(i,[{key:"hasCollectionId",value:function(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}},{key:"isEqual",value:function(n){return null!==n&&0===Wr.comparator(this.path,n.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(n){return new i(Wr.fromString(n))}},{key:"fromName",value:function(n){return new i(Wr.fromString(n).popFirst(5))}},{key:"comparator",value:function(n,r){return Wr.comparator(n.path,r.path)}},{key:"isDocumentKey",value:function(n){return n.length%2==0}},{key:"fromSegments",value:function(n){return new i(new Wr(n.slice()))}}]),i}();function Th(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ch(i)?4:10:ar()}function Ul(i,s){var a,n=Th(i);if(n!==Th(s))return!1;switch(n){case 0:return!0;case 1:return i.booleanValue===s.booleanValue;case 4:return lp(i).isEqual(lp(s));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;var o=zu(r.timestampValue),u=zu(a.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(i,s);case 5:return i.stringValue===s.stringValue;case 6:return a=s,Bl(i.bytesValue).isEqual(Bl(a.bytesValue));case 7:return i.referenceValue===s.referenceValue;case 8:return function(r,a){return Ia(r.geoPointValue.latitude)===Ia(a.geoPointValue.latitude)&&Ia(r.geoPointValue.longitude)===Ia(a.geoPointValue.longitude)}(i,s);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return Ia(r.integerValue)===Ia(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){var o=Ia(r.doubleValue),u=Ia(a.doubleValue);return o===u?jg(o)===jg(u):isNaN(o)&&isNaN(u)}return!1}(i,s);case 9:return ap(i.arrayValue.values||[],s.arrayValue.values||[],Ul);case 10:return function(r,a){var o=r.mapValue.fields||{},u=a.mapValue.fields||{};if(sp(o)!==sp(u))return!1;for(var c in o)if(o.hasOwnProperty(c)&&(void 0===u[c]||!Ul(o[c],u[c])))return!1;return!0}(i,s);default:return ar()}}function cp(i,s){return void 0!==(i.values||[]).find(function(n){return Ul(n,s)})}function fp(i,s){var a,o,u,c,n=Th(i),r=Th(s);if(n!==r)return Jr(n,r);switch(n){case 0:return 0;case 1:return Jr(i.booleanValue,s.booleanValue);case 2:return o=s,(u=Ia((a=i).integerValue||a.doubleValue))<(c=Ia(o.integerValue||o.doubleValue))?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1;case 3:return uC(i.timestampValue,s.timestampValue);case 4:return uC(lp(i),lp(s));case 5:return Jr(i.stringValue,s.stringValue);case 6:return function(a,o){var u=Bl(a),c=Bl(o);return u.compareTo(c)}(i.bytesValue,s.bytesValue);case 7:return function(a,o){for(var u=a.split("/"),c=o.split("/"),d=0;d<u.length&&d<c.length;d++){var m=Jr(u[d],c[d]);if(0!==m)return m}return Jr(u.length,c.length)}(i.referenceValue,s.referenceValue);case 8:return function(a,o){var u=Jr(Ia(a.latitude),Ia(o.latitude));return 0!==u?u:Jr(Ia(a.longitude),Ia(o.longitude))}(i.geoPointValue,s.geoPointValue);case 9:return function(a,o){for(var u=a.values||[],c=o.values||[],d=0;d<u.length&&d<c.length;++d){var m=fp(u[d],c[d]);if(m)return m}return Jr(u.length,c.length)}(i.arrayValue,s.arrayValue);case 10:return function(a,o){var u=a.fields||{},c=Object.keys(u),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(var _=0;_<c.length&&_<m.length;++_){var b=Jr(c[_],m[_]);if(0!==b)return b;var E=fp(u[c[_]],d[m[_]]);if(0!==E)return E}return Jr(c.length,m.length)}(i.mapValue,s.mapValue);default:throw ar()}}function uC(i,s){if("string"==typeof i&&"string"==typeof s&&i.length===s.length)return Jr(i,s);var n=zu(i),r=zu(s),a=Jr(n.seconds,r.seconds);return 0!==a?a:Jr(n.nanos,r.nanos)}function lC(i){return W0(i)}function W0(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(a=zu(i.timestampValue),"time(".concat(a.seconds,",").concat(a.nanos,")")):"stringValue"in i?i.stringValue:"bytesValue"in i?Bl(i.bytesValue).toBase64():"referenceValue"in i?fr.fromName(i.referenceValue).toString():"geoPointValue"in i?"geo(".concat((s=i.geoPointValue).latitude,",").concat(s.longitude,")"):"arrayValue"in i?function(r){var c,a="[",o=!0,u=(0,Re.Z)(r.values||[]);try{for(u.s();!(c=u.n()).done;)o?o=!1:a+=",",a+=W0(c.value)}catch(m){u.e(m)}finally{u.f()}return a+"]"}(i.arrayValue):"mapValue"in i?function(r){var d,a=Object.keys(r.fields||{}).sort(),o="{",u=!0,c=(0,Re.Z)(a);try{for(c.s();!(d=c.n()).done;){var m=d.value;u?u=!1:o+=",",o+="".concat(m,":").concat(W0(r.fields[m]))}}catch(_){c.e(_)}finally{c.f()}return o+"}"}(i.mapValue):ar();var a,s}function Wg(i,s){return{referenceValue:"projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(s.path.canonicalString())}}function cC(i){return!!i&&"integerValue"in i}function fC(i){return!!i&&"arrayValue"in i}function b1(i){return!!i&&"nullValue"in i}function hC(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function q0(i){return!!i&&"mapValue"in i}function hp(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){var s={mapValue:{fields:{}}};return os(i.mapValue.fields,function(a,o){return s.mapValue.fields[a]=hp(o)}),s}if(i.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=hp(i.arrayValue.values[r]);return n}return Object.assign({},i)}var Gu=function(){function i(s){(0,M.Z)(this,i),this.value=s}return(0,D.Z)(i,[{key:"field",value:function(n){if(n.isEmpty())return this.value;for(var r=this.value,a=0;a<n.length-1;++a)if(!q0(r=(r.mapValue.fields||{})[n.get(a)]))return null;return(r=(r.mapValue.fields||{})[n.lastSegment()])||null}},{key:"set",value:function(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=hp(r)}},{key:"setAll",value:function(n){var r=this,a=jo.emptyPath(),o={},u=[];n.forEach(function(d,m){if(!a.isImmediateParentOf(m)){var _=r.getFieldsMap(a);r.applyChanges(_,o,u),o={},u=[],a=m.popLast()}d?o[m.lastSegment()]=hp(d):u.push(m.lastSegment())});var c=this.getFieldsMap(a);this.applyChanges(c,o,u)}},{key:"delete",value:function(n){var r=this.field(n.popLast());q0(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}},{key:"isEqual",value:function(n){return Ul(this.value,n.value)}},{key:"getFieldsMap",value:function(n){var r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(var a=0;a<n.length;++a){var o=r.mapValue.fields[n.get(a)];q0(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},r.mapValue.fields[n.get(a)]=o),r=o}return r.mapValue.fields}},{key:"applyChanges",value:function(n,r,a){os(r,function(d,m){return n[d]=m});var u,o=(0,Re.Z)(a);try{for(o.s();!(u=o.n()).done;)delete n[u.value]}catch(d){o.e(d)}finally{o.f()}}},{key:"clone",value:function(){return new i(hp(this.value))}}],[{key:"empty",value:function(){return new i({mapValue:{}})}}]),i}();function w1(i){var s=[];return os(i.fields,function(n,r){var a=new jo([n]);if(q0(r)){var o=w1(r.mapValue).fields;if(0===o.length)s.push(a);else{var c,u=(0,Re.Z)(o);try{for(u.s();!(c=u.n()).done;)s.push(a.child(c.value))}catch(m){u.e(m)}finally{u.f()}}}else s.push(a)}),new Zl(s)}var Eo=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.key=s,this.documentType=n,this.version=r,this.data=a,this.documentState=o}return(0,D.Z)(i,[{key:"convertToFoundDocument",value:function(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}},{key:"convertToNoDocument",value:function(n){return this.version=n,this.documentType=2,this.data=Gu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(n){return this.version=n,this.documentType=3,this.data=Gu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(n){return n instanceof i&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}},{key:"clone",value:function(){return new i(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(n){return new i(n,0,Ar.min(),Gu.empty(),0)}},{key:"newFoundDocument",value:function(n,r,a){return new i(n,1,r,a,0)}},{key:"newNoDocument",value:function(n,r){return new i(n,2,r,Gu.empty(),0)}},{key:"newUnknownDocument",value:function(n,r){return new i(n,3,r,Gu.empty(),2)}}]),i}(),HL=function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,M.Z)(this,i),this.path=s,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=u,this.endAt=c,this.A=null};function dC(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new HL(i,s,n,r,a,o,u)}function qg(i){var s=En(i);if(null===s.A){var n=s.path.canonicalString();null!==s.collectionGroup&&(n+="|cg:"+s.collectionGroup),n+="|f:",n+=s.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+lC(i.value)}(r)}).join(","),n+="|ob:",n+=s.orderBy.map(function(r){return(a=r).field.canonicalString()+a.dir;var a}).join(","),Sh(s.limit)||(n+="|l:",n+=s.limit),s.startAt&&(n+="|lb:",n+=gC(s.startAt)),s.endAt&&(n+="|ub:",n+=gC(s.endAt)),s.A=n}return s.A}function vC(i,s){if(i.limit!==s.limit||i.orderBy.length!==s.orderBy.length)return!1;for(var n=0;n<i.orderBy.length;n++)if(!pp(i.orderBy[n],s.orderBy[n]))return!1;if(i.filters.length!==s.filters.length)return!1;for(var r=0;r<i.filters.length;r++)if((a=i.filters[r]).op!==(o=s.filters[r]).op||!a.field.isEqual(o.field)||!Ul(a.value,o.value))return!1;var a,o;return i.collectionGroup===s.collectionGroup&&!!i.path.isEqual(s.path)&&!!yC(i.startAt,s.startAt)&&yC(i.endAt,s.endAt)}function Y0(i){return fr.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}var fl=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).field=r,u.op=a,u.value=o,u}return(0,D.Z)(n,[{key:"matches",value:function(a){var o=a.data.field(this.field);return"!="===this.op?null!==o&&this.P(fp(o,this.value)):null!==o&&Th(this.value)===Th(o)&&this.P(fp(o,this.value))}},{key:"P",value:function(a){switch(this.op){case"<":return a<0;case"<=":return a<=0;case"==":return 0===a;case"!=":return 0!==a;case">":return a>0;case">=":return a>=0;default:return ar()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(a,o,u){return a.isKeyField()?"in"===o||"not-in"===o?this.R(a,o,u):new jL(a,o,u):"array-contains"===o?new XU(a,u):"in"===o?new QU(a,u):"not-in"===o?new JU(a,u):"array-contains-any"===o?new WL(a,u):new n(a,o,u)}},{key:"R",value:function(a,o,u){return"in"===o?new pC(a,u):new mC(a,u)}}]),n}(function(){return function i(){(0,M.Z)(this,i)}}()),jL=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a,o)).key=fr.fromName(o.referenceValue),u}return(0,D.Z)(n,[{key:"matches",value:function(a){var o=fr.comparator(a.key,this.key);return this.P(o)}}]),n}(fl),pC=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,"in",a)).keys=k1(0,a),o}return(0,D.Z)(n,[{key:"matches",value:function(a){return this.keys.some(function(o){return o.isEqual(a.key)})}}]),n}(fl),mC=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,"not-in",a)).keys=k1(0,a),o}return(0,D.Z)(n,[{key:"matches",value:function(a){return!this.keys.some(function(o){return o.isEqual(a.key)})}}]),n}(fl);function k1(i,s){var n;return((null===(n=s.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(r){return fr.fromName(r.referenceValue)})}var XU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"array-contains",a)}return(0,D.Z)(n,[{key:"matches",value:function(a){var o=a.data.field(this.field);return fC(o)&&cp(o.arrayValue,this.value)}}]),n}(fl),QU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"in",a)}return(0,D.Z)(n,[{key:"matches",value:function(a){var o=a.data.field(this.field);return null!==o&&cp(this.value.arrayValue,o)}}]),n}(fl),JU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"not-in",a)}return(0,D.Z)(n,[{key:"matches",value:function(a){if(cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var o=a.data.field(this.field);return null!==o&&!cp(this.value.arrayValue,o)}}]),n}(fl),WL=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"array-contains-any",a)}return(0,D.Z)(n,[{key:"matches",value:function(a){var o=this,u=a.data.field(this.field);return!(!fC(u)||!u.arrayValue.values)&&u.arrayValue.values.some(function(c){return cp(o.value.arrayValue,c)})}}]),n}(fl),dp=function i(s,n){(0,M.Z)(this,i),this.position=s,this.before=n};function gC(i){return"".concat(i.before?"b":"a",":").concat(i.position.map(function(s){return lC(s)}).join(","))}var vp=function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,M.Z)(this,i),this.field=s,this.dir=n};function pp(i,s){return i.dir===s.dir&&i.field.isEqual(s.field)}function E1(i,s,n){for(var r=0,a=0;a<i.position.length;a++){var o=s[a],u=i.position[a];if(r=o.field.isKeyField()?fr.comparator(fr.fromName(u.referenceValue),n.key):fp(u,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return i.before?r<=0:r<0}function yC(i,s){if(null===i)return null===s;if(null===s||i.before!==s.before||i.position.length!==s.position.length)return!1;for(var n=0;n<i.position.length;n++)if(!Ul(i.position[n],s.position[n]))return!1;return!0}var yf=function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,M.Z)(this,i),this.path=s,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=d,this.V=null,this.S=null};function _C(i,s,n,r,a,o,u,c){return new yf(i,s,n,r,a,o,u,c)}function zd(i){return new yf(i)}function K0(i){return!Sh(i.limit)&&"F"===i.limitType}function Yg(i){return!Sh(i.limit)&&"L"===i.limitType}function bC(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function wC(i){var n,s=(0,Re.Z)(i.filters);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r.v())return r.field}}catch(a){s.e(a)}finally{s.f()}return null}function kC(i){return null!==i.collectionGroup}function Kg(i){var s=En(i);if(null===s.V){s.V=[];var n=wC(s),r=bC(s);if(null!==n&&null===r)n.isKeyField()||s.V.push(new vp(n)),s.V.push(new vp(jo.keyField(),"asc"));else{var u,a=!1,o=(0,Re.Z)(s.explicitOrderBy);try{for(o.s();!(u=o.n()).done;){var c=u.value;s.V.push(c),c.field.isKeyField()&&(a=!0)}}catch(m){o.e(m)}finally{o.f()}if(!a){var d=s.explicitOrderBy.length>0?s.explicitOrderBy[s.explicitOrderBy.length-1].dir:"asc";s.V.push(new vp(jo.keyField(),d))}}}return s.V}function hl(i){var s=En(i);if(!s.S)if("F"===s.limitType)s.S=dC(s.path,s.collectionGroup,Kg(s),s.filters,s.limit,s.startAt,s.endAt);else{var a,n=[],r=(0,Re.Z)(Kg(s));try{for(r.s();!(a=r.n()).done;){var o=a.value;n.push(new vp(o.field,"desc"===o.dir?"asc":"desc"))}}catch(m){r.e(m)}finally{r.f()}var c=s.endAt?new dp(s.endAt.position,!s.endAt.before):null,d=s.startAt?new dp(s.startAt.position,!s.startAt.before):null;s.S=dC(s.path,s.collectionGroup,n,s.filters,s.limit,c,d)}return s.S}function EC(i,s,n){return new yf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),s,n,i.startAt,i.endAt)}function $g(i,s){return vC(hl(i),hl(s))&&i.limitType===s.limitType}function CC(i){return"".concat(qg(hl(i)),"|lt:").concat(i.limitType)}function $0(i){return"Query(target=".concat(function(i){var s=i.path.canonicalString();return null!==i.collectionGroup&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=", filters: [".concat(i.filters.map(function(n){return"".concat((r=n).field.canonicalString()," ").concat(r.op," ").concat(lC(r.value));var r}).join(", "),"]")),Sh(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=", orderBy: [".concat(i.orderBy.map(function(n){return"".concat((r=n).field.canonicalString()," (").concat(r.dir,")");var r}).join(", "),"]")),i.startAt&&(s+=", startAt: "+gC(i.startAt)),i.endAt&&(s+=", endAt: "+gC(i.endAt)),"Target(".concat(s,")")}(hl(i)),"; limitType=").concat(i.limitType,")")}function Gd(i,s){return s.isFoundDocument()&&(a=(r=s).key.path,null!==(n=i).collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):fr.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a))&&function(n,r){var o,a=(0,Re.Z)(n.explicitOrderBy);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(!u.field.isKeyField()&&null===r.data.field(u.field))return!1}}catch(c){a.e(c)}finally{a.f()}return!0}(i,s)&&function(n,r){var o,a=(0,Re.Z)(n.filters);try{for(a.s();!(o=a.n()).done;)if(!o.value.matches(r))return!1}catch(c){a.e(c)}finally{a.f()}return!0}(i,s)&&function(n,r){return!(n.startAt&&!E1(n.startAt,Kg(n),r)||n.endAt&&E1(n.endAt,Kg(n),r))}(i,s);var n,r,a}function qL(i){return function(s,n){var o,r=!1,a=(0,Re.Z)(Kg(i));try{for(a.s();!(o=a.n()).done;){var u=o.value,c=eV(u,s,n);if(0!==c)return c;r=r||u.field.isKeyField()}}catch(d){a.e(d)}finally{a.f()}return 0}}function eV(i,s,n){var a,u,c,d,r=i.field.isKeyField()?fr.comparator(s.key,n.key):(u=n,c=s.data.field(a=i.field),d=u.data.field(a),null!==c&&null!==d?fp(c,d):ar());switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ar()}}function YL(i,s){if(i.D){if(isNaN(s))return{doubleValue:"NaN"};if(s===1/0)return{doubleValue:"Infinity"};if(s===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jg(s)?"-0":s}}function KL(i){return{integerValue:""+i}}function mp(i,s){return oC(s)?KL(s):YL(i,s)}var X0=function i(){(0,M.Z)(this,i),this._=void 0};function SC(i,s,n){return i instanceof Mh?(o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},(a=s)&&(o.fields.__previous_value__=a),{mapValue:o}):i instanceof _f?MC(i,s):i instanceof gp?S1(i,s):function(r,a){var o=C1(r,a),u=AC(o)+AC(r.C);return cC(o)&&cC(r.C)?KL(u):YL(r.N,u)}(i,s);var r,a,o}function TC(i,s,n){return i instanceof _f?MC(i,s):i instanceof gp?S1(i,s):n}function C1(i,s){return i instanceof jd?cC(n=s)||(r=n)&&"doubleValue"in r?s:{integerValue:0}:null;var r,n}var Mh=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(X0),_f=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).elements=r,a}return n}(X0);function MC(i,s){var a,n=T1(s),r=(0,Re.Z)(i.elements);try{var o=function(){var c=a.value;n.some(function(d){return Ul(d,c)})||n.push(c)};for(r.s();!(a=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}return{arrayValue:{values:n}}}var gp=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).elements=r,a}return n}(X0);function S1(i,s){var a,n=T1(s),r=(0,Re.Z)(i.elements);try{var o=function(){var c=a.value;n=n.filter(function(d){return!Ul(d,c)})};for(r.s();!(a=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}return{arrayValue:{values:n}}}var jd=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).N=r,o.C=a,o}return n}(X0);function AC(i){return Ia(i.integerValue||i.doubleValue)}function T1(i){return fC(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var yp=function i(s,n){(0,M.Z)(this,i),this.field=s,this.transform=n},M1=function i(s,n){(0,M.Z)(this,i),this.version=s,this.transformResults=n},so=function(){function i(s,n){(0,M.Z)(this,i),this.updateTime=s,this.exists=n}return(0,D.Z)(i,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}],[{key:"none",value:function(){return new i}},{key:"exists",value:function(n){return new i(void 0,n)}},{key:"updateTime",value:function(n){return new i(n)}}]),i}();function _p(i,s){return void 0!==i.updateTime?s.isFoundDocument()&&s.version.isEqual(i.updateTime):void 0===i.exists||i.exists===s.isFoundDocument()}var bp=function i(){(0,M.Z)(this,i)};function $L(i,s,n){var r,a,o,u,c;i instanceof Xg?(a=s,o=n,u=(r=i).value.clone(),c=eb(r.fieldTransforms,a,o.transformResults),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()):i instanceof bf?function(r,a,o){if(_p(r.precondition,a)){var u=eb(r.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(DC(r)),c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}else a.convertToUnknownDocument(o.version)}(i,s,n):function(r,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,s,n)}function Q0(i,s,n){var a;i instanceof Xg?function(r,a,o){if(_p(r.precondition,a)){var u=r.value.clone(),c=Qg(r.fieldTransforms,o,a);u.setAll(c),a.convertToFoundDocument(IC(a),u).setHasLocalMutations()}}(i,s,n):i instanceof bf?function(r,a,o){if(_p(r.precondition,a)){var u=Qg(r.fieldTransforms,o,a),c=a.data;c.setAll(DC(r)),c.setAll(u),a.convertToFoundDocument(IC(a),c).setHasLocalMutations()}}(i,s,n):_p(i.precondition,a=s)&&a.convertToNoDocument(Ar.min())}function A1(i,s){var a,n=null,r=(0,Re.Z)(i.fieldTransforms);try{for(r.s();!(a=r.n()).done;){var o=a.value,u=s.data.field(o.field),c=C1(o.transform,u||null);null!=c&&(null==n&&(n=Gu.empty()),n.set(o.field,c))}}catch(d){r.e(d)}finally{r.f()}return n||null}function J0(i,s){return i.type===s.type&&!!i.key.isEqual(s.key)&&!!i.precondition.isEqual(s.precondition)&&(r=s.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===r||n&&r&&ap(n,r,function(a,o){return function(i,s){return i.field.isEqual(s.field)&&(r=s.transform,(n=i.transform)instanceof _f&&r instanceof _f||n instanceof gp&&r instanceof gp?ap(n.elements,r.elements,Ul):n instanceof jd&&r instanceof jd?Ul(n.C,r.C):n instanceof Mh&&r instanceof Mh);var n,r}(a,o)})))&&(0===i.type?i.value.isEqual(s.value):1!==i.type||i.data.isEqual(s.data)&&i.fieldMask.isEqual(s.fieldMask));var n,r}function IC(i){return i.isFoundDocument()?i.version:Ar.min()}var Xg=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,M.Z)(this,n),(u=s.call(this)).key=r,u.value=a,u.precondition=o,u.fieldTransforms=c,u.type=0,u}return n}(bp),bf=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,M.Z)(this,n),(c=s.call(this)).key=r,c.data=a,c.fieldMask=o,c.precondition=u,c.fieldTransforms=d,c.type=1,c}return n}(bp);function DC(i){var s=new Map;return i.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=i.data.field(n);s.set(n,r)}}),s}function eb(i,s,n){var r=new Map;Ir(i.length===n.length);for(var a=0;a<n.length;a++){var o=i[a],u=o.transform,c=s.data.field(o.field);r.set(o.field,TC(u,c,n[a]))}return r}function Qg(i,s,n){var o,r=new Map,a=(0,Re.Z)(i);try{for(a.s();!(o=a.n()).done;){var u=o.value,c=u.transform,d=n.data.field(u.field);r.set(u.field,SC(c,d,s))}}catch(m){a.e(m)}finally{a.f()}return r}var _s,wi,wp=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).key=r,o.precondition=a,o.type=2,o.fieldTransforms=[],o}return n}(bp),tb=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).key=r,o.precondition=a,o.type=3,o.fieldTransforms=[],o}return n}(bp),x1=function i(s){(0,M.Z)(this,i),this.count=s};function RC(i){switch(i){case Lt.OK:return ar();case Lt.CANCELLED:case Lt.UNKNOWN:case Lt.DEADLINE_EXCEEDED:case Lt.RESOURCE_EXHAUSTED:case Lt.INTERNAL:case Lt.UNAVAILABLE:case Lt.UNAUTHENTICATED:return!1;case Lt.INVALID_ARGUMENT:case Lt.NOT_FOUND:case Lt.ALREADY_EXISTS:case Lt.PERMISSION_DENIED:case Lt.FAILED_PRECONDITION:case Lt.ABORTED:case Lt.OUT_OF_RANGE:case Lt.UNIMPLEMENTED:case Lt.DATA_LOSS:return!0;default:return ar()}}function PC(i){if(void 0===i)return ys("GRPC error has no .code"),Lt.UNKNOWN;switch(i){case _s.OK:return Lt.OK;case _s.CANCELLED:return Lt.CANCELLED;case _s.UNKNOWN:return Lt.UNKNOWN;case _s.DEADLINE_EXCEEDED:return Lt.DEADLINE_EXCEEDED;case _s.RESOURCE_EXHAUSTED:return Lt.RESOURCE_EXHAUSTED;case _s.INTERNAL:return Lt.INTERNAL;case _s.UNAVAILABLE:return Lt.UNAVAILABLE;case _s.UNAUTHENTICATED:return Lt.UNAUTHENTICATED;case _s.INVALID_ARGUMENT:return Lt.INVALID_ARGUMENT;case _s.NOT_FOUND:return Lt.NOT_FOUND;case _s.ALREADY_EXISTS:return Lt.ALREADY_EXISTS;case _s.PERMISSION_DENIED:return Lt.PERMISSION_DENIED;case _s.FAILED_PRECONDITION:return Lt.FAILED_PRECONDITION;case _s.ABORTED:return Lt.ABORTED;case _s.OUT_OF_RANGE:return Lt.OUT_OF_RANGE;case _s.UNIMPLEMENTED:return Lt.UNIMPLEMENTED;case _s.DATA_LOSS:return Lt.DATA_LOSS;default:return ar()}}(wi=_s||(_s={}))[wi.OK=0]="OK",wi[wi.CANCELLED=1]="CANCELLED",wi[wi.UNKNOWN=2]="UNKNOWN",wi[wi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wi[wi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wi[wi.NOT_FOUND=5]="NOT_FOUND",wi[wi.ALREADY_EXISTS=6]="ALREADY_EXISTS",wi[wi.PERMISSION_DENIED=7]="PERMISSION_DENIED",wi[wi.UNAUTHENTICATED=16]="UNAUTHENTICATED",wi[wi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wi[wi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wi[wi.ABORTED=10]="ABORTED",wi[wi.OUT_OF_RANGE=11]="OUT_OF_RANGE",wi[wi.UNIMPLEMENTED=12]="UNIMPLEMENTED",wi[wi.INTERNAL=13]="INTERNAL",wi[wi.UNAVAILABLE=14]="UNAVAILABLE",wi[wi.DATA_LOSS=15]="DATA_LOSS";var Co=function(){function i(s,n){(0,M.Z)(this,i),this.comparator=s,this.root=n||Ah.EMPTY}return(0,D.Z)(i,[{key:"insert",value:function(n,r){return new i(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,Ah.BLACK,null,null))}},{key:"remove",value:function(n){return new i(this.comparator,this.root.remove(n,this.comparator).copy(null,null,Ah.BLACK,null,null))}},{key:"get",value:function(n){for(var r=this.root;!r.isEmpty();){var a=this.comparator(n,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}},{key:"indexOf",value:function(n){for(var r=0,a=this.root;!a.isEmpty();){var o=this.comparator(n,a.key);if(0===o)return r+a.left.size;o<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(n){return this.root.inorderTraversal(n)}},{key:"forEach",value:function(n){this.inorderTraversal(function(r,a){return n(r,a),!1})}},{key:"toString",value:function(){var n=[];return this.inorderTraversal(function(r,a){return n.push("".concat(r,":").concat(a)),!1}),"{".concat(n.join(", "),"}")}},{key:"reverseTraversal",value:function(n){return this.root.reverseTraversal(n)}},{key:"getIterator",value:function(){return new OC(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(n){return new OC(this.root,n,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new OC(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(n){return new OC(this.root,n,this.comparator,!0)}}]),i}(),OC=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.isReverse=a,this.nodeStack=[];for(var o=1;!s.isEmpty();)if(o=n?r(s.key,n):1,a&&(o*=-1),o<0)s=this.isReverse?s.left:s.right;else{if(0===o){this.nodeStack.push(s);break}this.nodeStack.push(s),s=this.isReverse?s.right:s.left}}return(0,D.Z)(i,[{key:"getNext",value:function(){var n=this.nodeStack.pop(),r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}]),i}(),Ah=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.key=s,this.value=n,this.color=null!=r?r:i.RED,this.left=null!=a?a:i.EMPTY,this.right=null!=o?o:i.EMPTY,this.size=this.left.size+1+this.right.size}return(0,D.Z)(i,[{key:"copy",value:function(n,r,a,o,u){return new i(null!=n?n:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=o?o:this.left,null!=u?u:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}},{key:"reverseTraversal",value:function(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(n,r,a){var o=this,u=a(n,o.key);return(o=u<0?o.copy(null,null,null,o.left.insert(n,r,a),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,a))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return i.EMPTY;var n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),(n=n.copy(null,null,null,n.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(n,r){var a,o=this;if(r(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,r),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===r(n,o.key)){if(o.right.isEmpty())return i.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,r))}return o.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}},{key:"moveRedLeft",value:function(){var n=this.colorFlip();return n.right.left.isRed()&&(n=(n=(n=n.copy(null,null,null,null,n.right.rotateRight())).rotateLeft()).colorFlip()),n}},{key:"moveRedRight",value:function(){var n=this.colorFlip();return n.left.left.isRed()&&(n=(n=n.rotateRight()).colorFlip()),n}},{key:"rotateLeft",value:function(){var n=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}},{key:"rotateRight",value:function(){var n=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}},{key:"colorFlip",value:function(){var n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}},{key:"checkMaxDepth",value:function(){var n=this.check();return Math.pow(2,n)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ar();var n=this.left.check();if(n!==this.right.check())throw ar();return n+(this.isRed()?0:1)}}]),i}();Ah.EMPTY=null,Ah.RED=!0,Ah.BLACK=!1,Ah.EMPTY=new(function(){function i(){(0,M.Z)(this,i),this.size=0}return(0,D.Z)(i,[{key:"key",get:function(){throw ar()}},{key:"value",get:function(){throw ar()}},{key:"color",get:function(){throw ar()}},{key:"left",get:function(){throw ar()}},{key:"right",get:function(){throw ar()}},{key:"copy",value:function(n,r,a,o,u){return this}},{key:"insert",value:function(n,r,a){return new Ah(n,r)}},{key:"remove",value:function(n,r){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(n){return!1}},{key:"reverseTraversal",value:function(n){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),i}());var js=function(){function i(s){(0,M.Z)(this,i),this.comparator=s,this.data=new Co(this.comparator)}return(0,D.Z)(i,[{key:"has",value:function(n){return null!==this.data.get(n)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(n){return this.data.indexOf(n)}},{key:"forEach",value:function(n){this.data.inorderTraversal(function(r,a){return n(r),!1})}},{key:"forEachInRange",value:function(n,r){for(var a=this.data.getIteratorFrom(n[0]);a.hasNext();){var o=a.getNext();if(this.comparator(o.key,n[1])>=0)return;r(o.key)}}},{key:"forEachWhile",value:function(n,r){var a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!n(a.getNext().key))return}},{key:"firstAfterOrEqual",value:function(n){var r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}},{key:"getIterator",value:function(){return new LC(this.data.getIterator())}},{key:"getIteratorFrom",value:function(n){return new LC(this.data.getIteratorFrom(n))}},{key:"add",value:function(n){return this.copy(this.data.remove(n).insert(n,!0))}},{key:"delete",value:function(n){return this.has(n)?this.copy(this.data.remove(n)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(n){var r=this;return r.size<n.size&&(r=n,n=this),n.forEach(function(a){r=r.add(a)}),r}},{key:"isEqual",value:function(n){if(!(n instanceof i)||this.size!==n.size)return!1;for(var r=this.data.getIterator(),a=n.data.getIterator();r.hasNext();){var o=r.getNext().key,u=a.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}},{key:"toArray",value:function(){var n=[];return this.forEach(function(r){n.push(r)}),n}},{key:"toString",value:function(){var n=[];return this.forEach(function(r){return n.push(r)}),"SortedSet("+n.toString()+")"}},{key:"copy",value:function(n){var r=new i(this.comparator);return r.data=n,r}}]),i}(),LC=function(){function i(s){(0,M.Z)(this,i),this.iter=s}return(0,D.Z)(i,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),i}(),XL=new Co(fr.comparator);function ea(){return XL}var I1=new Co(fr.comparator);function NC(){return I1}var QL=new Co(fr.comparator);function FC(){return QL}var JL=new js(fr.comparator);function ta(){for(var i=JL,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];for(var a=0,o=n;a<o.length;a++){var u=o[a];i=i.add(u)}return i}var D1=new js(Jr);function wf(){return D1}var ZC=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.snapshotVersion=s,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}return(0,D.Z)(i,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(n,r){var a=new Map;return a.set(n,BC.createSynthesizedTargetChangeForCurrentChange(n,r)),new i(Ar.min(),a,wf(),ea(),ta())}}]),i}(),BC=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.resumeToken=s,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}return(0,D.Z)(i,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(n,r){return new i(ao.EMPTY_BYTE_STRING,r,ta(),ta(),ta())}}]),i}(),Jg=function i(s,n,r,a){(0,M.Z)(this,i),this.k=s,this.removedTargetIds=n,this.key=r,this.$=a},R1=function i(s,n){(0,M.Z)(this,i),this.targetId=s,this.O=n},UC=function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ao.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,M.Z)(this,i),this.state=s,this.targetIds=n,this.resumeToken=r,this.cause=a},eN=function(){function i(){(0,M.Z)(this,i),this.F=0,this.M=Vl(),this.L=ao.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return(0,D.Z)(i,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}},{key:"W",value:function(){var n=ta(),r=ta(),a=ta();return this.M.forEach(function(o,u){switch(u){case 0:n=n.add(o);break;case 2:r=r.add(o);break;case 1:a=a.add(o);break;default:ar()}}),new BC(this.L,this.B,n,r,a)}},{key:"G",value:function(){this.U=!1,this.M=Vl()}},{key:"H",value:function(n,r){this.U=!0,this.M=this.M.insert(n,r)}},{key:"J",value:function(n){this.U=!0,this.M=this.M.remove(n)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),i}(),VC=function(){function i(s){(0,M.Z)(this,i),this.tt=s,this.et=new Map,this.nt=ea(),this.st=nb(),this.it=new js(Jr)}return(0,D.Z)(i,[{key:"rt",value:function(n){var a,r=(0,Re.Z)(n.k);try{for(r.s();!(a=r.n()).done;){var o=a.value;n.$&&n.$.isFoundDocument()?this.ot(o,n.$):this.at(o,n.key,n.$)}}catch(m){r.e(m)}finally{r.f()}var c,u=(0,Re.Z)(n.removedTargetIds);try{for(u.s();!(c=u.n()).done;)this.at(c.value,n.key,n.$)}catch(m){u.e(m)}finally{u.f()}}},{key:"ct",value:function(n){var r=this;this.forEachTarget(n,function(a){var o=r.ut(a);switch(n.state){case 0:r.ht(a)&&o.j(n.resumeToken);break;case 1:o.X(),o.q||o.G(),o.j(n.resumeToken);break;case 2:o.X(),o.q||r.removeTarget(a);break;case 3:r.ht(a)&&(o.Z(),o.j(n.resumeToken));break;case 4:r.ht(a)&&(r.lt(a),o.j(n.resumeToken));break;default:ar()}})}},{key:"forEachTarget",value:function(n,r){var a=this;n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach(function(o,u){a.ht(u)&&r(u)})}},{key:"ft",value:function(n){var r=n.targetId,a=n.O.count,o=this.dt(r);if(o){var u=o.target;if(Y0(u))if(0===a){var c=new fr(u.path);this.at(r,c,Eo.newNoDocument(c,Ar.min()))}else Ir(1===a);else this.wt(r)!==a&&(this.lt(r),this.it=this.it.add(r))}}},{key:"_t",value:function(n){var r=this,a=new Map;this.et.forEach(function(c,d){var m=r.dt(d);if(m){if(c.current&&Y0(m.target)){var _=new fr(m.target.path);null!==r.nt.get(_)||r.gt(d,_)||r.at(d,_,Eo.newNoDocument(_,n))}c.K&&(a.set(d,c.W()),c.G())}});var o=ta();this.st.forEach(function(c,d){var m=!0;d.forEachWhile(function(_){var b=r.dt(_);return!b||2===b.purpose||(m=!1,!1)}),m&&(o=o.add(c))});var u=new ZC(n,a,this.it,this.nt,o);return this.nt=ea(),this.st=nb(),this.it=new js(Jr),u}},{key:"ot",value:function(n,r){if(this.ht(n)){var a=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,a),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}}},{key:"at",value:function(n,r,a){if(this.ht(n)){var o=this.ut(n);this.gt(n,r)?o.H(r,1):o.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),a&&(this.nt=this.nt.insert(r,a))}}},{key:"removeTarget",value:function(n){this.et.delete(n)}},{key:"wt",value:function(n){var r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}},{key:"Y",value:function(n){this.ut(n).Y()}},{key:"ut",value:function(n){var r=this.et.get(n);return r||(r=new eN,this.et.set(n,r)),r}},{key:"yt",value:function(n){var r=this.st.get(n);return r||(r=new js(Jr),this.st=this.st.insert(n,r)),r}},{key:"ht",value:function(n){var r=null!==this.dt(n);return r||wn("WatchChangeAggregator","Detected inactive target",n),r}},{key:"dt",value:function(n){var r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}},{key:"lt",value:function(n){var r=this;this.et.set(n,new eN),this.tt.getRemoteKeysForTarget(n).forEach(function(a){r.at(n,a,null)})}},{key:"gt",value:function(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}]),i}();function nb(){return new Co(fr.comparator)}function Vl(){return new Co(fr.comparator)}var tN={asc:"ASCENDING",desc:"DESCENDING"},nN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dc=function i(s,n){(0,M.Z)(this,i),this.databaseId=s,this.D=n};function ou(i,s){return i.D?"".concat(new Date(1e3*s.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+s.nanoseconds).slice(-9),"Z"):{seconds:""+s.seconds,nanos:s.nanoseconds}}function dl(i,s){return i.D?s.toBase64():s.toUint8Array()}function P1(i,s){return ou(i,s.toTimestamp())}function Ws(i){return Ir(!!i),Ar.fromTimestamp((n=zu(i),new Go(n.seconds,n.nanos)));var n}function HC(i,s){return(n=i,new Wr(["projects",n.projectId,"databases",n.database])).child("documents").child(s).canonicalString();var n}function O1(i){var s=Wr.fromString(i);return Ir(V1(s)),s}function ey(i,s){return HC(i.databaseId,s.path)}function Rc(i,s){var n=O1(s);if(n.get(1)!==i.databaseId.projectId)throw new en(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new en(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new fr(zC(n))}function ty(i,s){return HC(i.databaseId,s)}function kp(i){var s=O1(i);return 4===s.length?Wr.emptyPath():zC(s)}function ny(i){return new Wr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function zC(i){return Ir(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function L1(i,s,n){return{name:ey(i,s),fields:n.value.mapValue.fields}}function GC(i,s,n){var r=Rc(i,s.name),a=Ws(s.updateTime),o=new Gu({mapValue:{fields:s.fields}}),u=Eo.newFoundDocument(r,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function N1(i,s){return"found"in s?function(n,r){Ir(!!r.found);var a=Rc(n,r.found.name),o=Ws(r.found.updateTime),u=new Gu({mapValue:{fields:r.found.fields}});return Eo.newFoundDocument(a,o,u)}(i,s):"missing"in s?function(n,r){Ir(!!r.missing),Ir(!!r.readTime);var a=Rc(n,r.missing),o=Ws(r.readTime);return Eo.newNoDocument(a,o)}(i,s):ar()}function ib(i,s){var n,a;if(s instanceof Xg)n={update:L1(i,s.key,s.value)};else if(s instanceof wp)n={delete:ey(i,s.key)};else if(s instanceof bf)n={update:L1(i,s.key,s.data),updateMask:aN(s.fieldMask)};else{if(!(s instanceof tb))return ar();n={verify:ey(i,s.key)}}return s.fieldTransforms.length>0&&(n.updateTransforms=s.fieldTransforms.map(function(r){return function(a,o){var u=o.transform;if(u instanceof Mh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _f)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof gp)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof jd)return{fieldPath:o.field.canonicalString(),increment:u.C};throw ar()}(0,r)})),s.precondition.isNone||(n.currentDocument=void 0!==(a=s.precondition).updateTime?{updateTime:P1(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:ar()),n}function jC(i,s){var m,n=s.currentDocument?void 0!==(m=s.currentDocument).updateTime?so.updateTime(Ws(m.updateTime)):void 0!==m.exists?so.exists(m.exists):so.none():so.none(),r=s.updateTransforms?s.updateTransforms.map(function(m){return function(_,b){var E=null;"setToServerValue"in b?(Ir("REQUEST_TIME"===b.setToServerValue),E=new Mh):"appendMissingElements"in b?E=new _f(b.appendMissingElements.values||[]):"removeAllFromArray"in b?E=new gp(b.removeAllFromArray.values||[]):"increment"in b?E=new jd(_,b.increment):ar();var N=jo.fromServerFormat(b.fieldPath);return new yp(N,E)}(i,m)}):[];if(s.update){var a=Rc(i,s.update.name),o=new Gu({mapValue:{fields:s.update.fields}});if(s.updateMask){var u=function(m){return new Zl((m.fieldPaths||[]).map(function(b){return jo.fromServerFormat(b)}))}(s.updateMask);return new bf(a,o,u,n,r)}return new Xg(a,o,n,r)}if(s.delete){var c=Rc(i,s.delete);return new wp(c,n)}if(s.verify){var d=Rc(i,s.verify);return new tb(d,n)}return ar()}function ab(i,s){return{documents:[ty(i,s.path)]}}function ry(i,s){var n={structuredQuery:{}},r=s.path;null!==s.collectionGroup?(n.parent=ty(i,r),n.structuredQuery.from=[{collectionId:s.collectionGroup,allDescendants:!0}]):(n.parent=ty(i,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(c){if(0!==c.length){var d=c.map(function(m){return function(_){if("=="===_.op){if(hC(_.value))return{unaryFilter:{field:Wd(_.field),op:"IS_NAN"}};if(b1(_.value))return{unaryFilter:{field:Wd(_.field),op:"IS_NULL"}}}else if("!="===_.op){if(hC(_.value))return{unaryFilter:{field:Wd(_.field),op:"IS_NOT_NAN"}};if(b1(_.value))return{unaryFilter:{field:Wd(_.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wd(_.field),op:U1(_.op),value:_.value}}}(m)});return 1===d.length?d[0]:{compositeFilter:{op:"AND",filters:d}}}}(s.filters);a&&(n.structuredQuery.where=a);var o=function(c){if(0!==c.length)return c.map(function(d){return{field:Wd((m=d).field),direction:B1(m.dir)};var m})}(s.orderBy);o&&(n.structuredQuery.orderBy=o);var d,u=(d=s.limit,i.D||Sh(d)?d:{value:d});return null!==u&&(n.structuredQuery.limit=u),s.startAt&&(n.structuredQuery.startAt=YC(s.startAt)),s.endAt&&(n.structuredQuery.endAt=YC(s.endAt)),n}function WC(i){var s=kp(i.parent),n=i.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){Ir(1===r);var o=n.from[0];o.allDescendants?a=o.collectionId:s=s.child(o.collectionId)}var u=[];n.where&&(u=qC(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(b){return new vp(Ep((E=b).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));var b,E,d=null;n.limit&&(d=Sh(E="object"==typeof(b=n.limit)?b.value:b)?null:E);var m=null;n.startAt&&(m=KC(n.startAt));var _=null;return n.endAt&&(_=KC(n.endAt)),_C(s,a,c,u,d,"F",m,_)}function qC(i){return i?void 0!==i.unaryFilter?[iN(i)]:void 0!==i.fieldFilter?[rN(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(function(s){return qC(s)}).reduce(function(s,n){return s.concat(n)}):ar():[]}function YC(i){return{before:i.before,values:i.position}}function KC(i){return new dp(i.values||[],!!i.before)}function B1(i){return tN[i]}function U1(i){return nN[i]}function Wd(i){return{fieldPath:i.canonicalString()}}function Ep(i){return jo.fromServerFormat(i.fieldPath)}function rN(i){return fl.create(Ep(i.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ar()}}(i.fieldFilter.op),i.fieldFilter.value)}function iN(i){switch(i.unaryFilter.op){case"IS_NAN":var s=Ep(i.unaryFilter.field);return fl.create(s,"==",{doubleValue:NaN});case"IS_NULL":var n=Ep(i.unaryFilter.field);return fl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ep(i.unaryFilter.field);return fl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=Ep(i.unaryFilter.field);return fl.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ar()}}function aN(i){var s=[];return i.fields.forEach(function(n){return s.push(n.canonicalString())}),{fieldPaths:s}}function V1(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Hl(i){for(var s="",n=0;n<i.length;n++)s.length>0&&(s=H1(s)),s=sN(i.get(n),s);return H1(s)}function sN(i,s){for(var n=s,r=i.length,a=0;a<r;a++){var o=i.charAt(a);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function H1(i){return i+"\x01\x01"}function kf(i){var s=i.length;if(Ir(s>=2),2===s)return Ir("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Wr.emptyPath();for(var n=s-2,r=[],a="",o=0;o<s;){var u=i.indexOf("\x01",o);switch((u<0||u>n)&&ar(),i.charAt(u+1)){case"\x01":var c=i.substring(o,u),d=void 0;0===a.length?d=c:(d=a+=c,a=""),r.push(d);break;case"\x10":a+=i.substring(o,u),a+="\0";break;case"\x11":a+=i.substring(o,u+1);break;default:ar()}o=u+2}return new Wr(r)}var oN=function i(s,n){(0,M.Z)(this,i),this.seconds=s,this.nanoseconds=n},zl=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=a};return i.store="owner",i.key="owner",i}(),Cp=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=a};return i.store="mutationQueues",i.keyPath="userId",i}(),Da=function i(s,n,r,a,o){(0,M.Z)(this,i),this.userId=s,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=a,this.mutations=o};Da.store="mutations",Da.keyPath="batchId",Da.userMutationsIndex="userMutationsIndex",Da.userMutationsKeyPath=["userId","batchId"];var ju=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,D.Z)(s,null,[{key:"prefixForUser",value:function(r){return[r]}},{key:"prefixForPath",value:function(r,a){return[r,Hl(a)]}},{key:"key",value:function(r,a,o){return[r,Hl(a),o]}}]),s}();return i.store="documentMutations",i.PLACEHOLDER=new i,i}(),uN=function i(s,n){(0,M.Z)(this,i),this.path=s,this.readTime=n},lN=function i(s,n){(0,M.Z)(this,i),this.path=s,this.version=n},us=function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.unknownDocument=s,this.noDocument=n,this.document=r,this.hasCommittedMutations=a,this.readTime=o,this.parentPath=u};us.store="remoteDocuments",us.readTimeIndex="readTimeIndex",us.readTimeIndexPath="readTime",us.collectionReadTimeIndex="collectionReadTimeIndex",us.collectionReadTimeIndexPath=["parentPath","readTime"];var xh=function(){var i=function s(n){(0,M.Z)(this,s),this.byteSize=n};return i.store="remoteDocumentGlobal",i.key="remoteDocumentGlobalKey",i}(),uu=function i(s,n,r,a,o,u,c){(0,M.Z)(this,i),this.targetId=s,this.canonicalId=n,this.readTime=r,this.resumeToken=a,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=u,this.query=c};uu.store="targets",uu.keyPath="targetId",uu.queryTargetsIndexName="queryTargetsIndex",uu.queryTargetsKeyPath=["canonicalId","targetId"];var oo=function i(s,n,r){(0,M.Z)(this,i),this.targetId=s,this.path=n,this.sequenceNumber=r};oo.store="targetDocuments",oo.keyPath=["targetId","path"],oo.documentTargetsIndex="documentTargetsIndex",oo.documentTargetsKeyPath=["path","targetId"];var vl=function(){var i=function s(n,r,a,o){(0,M.Z)(this,s),this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=a,this.targetCount=o};return i.key="targetGlobalKey",i.store="targetGlobal",i}(),Sp=function(){var i=function s(n,r){(0,M.Z)(this,s),this.collectionId=n,this.parent=r};return i.store="collectionParents",i.keyPath=["collectionId","parent"],i}(),Ih=function(){var i=function s(n,r,a,o){(0,M.Z)(this,s),this.clientId=n,this.updateTimeMs=r,this.networkEnabled=a,this.inForeground=o};return i.store="clientMetadata",i.keyPath="clientId",i}(),iy=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.bundleId=n,this.createTime=r,this.version=a};return i.store="bundles",i.keyPath="bundleId",i}(),ay=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.name=n,this.readTime=r,this.bundledQuery=a};return i.store="namedQueries",i.keyPath="name",i}(),z1=[Cp.store,Da.store,ju.store,us.store,uu.store,zl.store,vl.store,oo.store].concat([Ih.store]).concat([xh.store]).concat([Sp.store]).concat([iy.store,ay.store]),$C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sb=function(){function i(){(0,M.Z)(this,i),this.onCommittedListeners=[]}return(0,D.Z)(i,[{key:"addOnCommittedListener",value:function(n){this.onCommittedListeners.push(n)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(n){return n()})}}]),i}(),ln=function(){function i(s){var n=this;(0,M.Z)(this,i),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,s(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return(0,D.Z)(i,[{key:"catch",value:function(n){return this.next(void 0,n)}},{key:"next",value:function(n,r){var a=this;return this.callbackAttached&&ar(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new i(function(o,u){a.nextCallback=function(c){a.wrapSuccess(n,c).next(o,u)},a.catchCallback=function(c){a.wrapFailure(r,c).next(o,u)}})}},{key:"toPromise",value:function(){var n=this;return new Promise(function(r,a){n.next(r,a)})}},{key:"wrapUserFunction",value:function(n){try{var r=n();return r instanceof i?r:i.resolve(r)}catch(a){return i.reject(a)}}},{key:"wrapSuccess",value:function(n,r){return n?this.wrapUserFunction(function(){return n(r)}):i.resolve(r)}},{key:"wrapFailure",value:function(n,r){return n?this.wrapUserFunction(function(){return n(r)}):i.reject(r)}}],[{key:"resolve",value:function(n){return new i(function(r,a){r(n)})}},{key:"reject",value:function(n){return new i(function(r,a){a(n)})}},{key:"waitFor",value:function(n){return new i(function(r,a){var o=0,u=0,c=!1;n.forEach(function(d){++o,d.next(function(){++u,c&&u===o&&r()},function(m){return a(m)})}),c=!0,u===o&&r()})}},{key:"or",value:function(n){var o,r=i.resolve(!1),a=(0,Re.Z)(n);try{var u=function(){var d=o.value;r=r.next(function(m){return m?i.resolve(m):d()})};for(a.s();!(o=a.n()).done;)u()}catch(c){a.e(c)}finally{a.f()}return r}},{key:"forEach",value:function(n,r){var a=this,o=[];return n.forEach(function(u,c){o.push(r.call(a,u,c))}),this.waitFor(o)}}]),i}(),Dh=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.action=s,this.transaction=n,this.aborted=!1,this.Tt=new ro,this.transaction.oncomplete=function(){r.Tt.resolve()},this.transaction.onabort=function(){n.error?r.Tt.reject(new Pc(s,n.error)):r.Tt.resolve()},this.transaction.onerror=function(a){var o=ob(a.target.error);r.Tt.reject(new Pc(s,o))}}return(0,D.Z)(i,[{key:"It",get:function(){return this.Tt.promise}},{key:"abort",value:function(n){n&&this.Tt.reject(n),this.aborted||(wn("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(n){var r=this.transaction.objectStore(n);return new XC(r)}}],[{key:"open",value:function(n,r,a,o){try{return new i(r,n.transaction(o,a))}catch(u){throw new Pc(r,u)}}}]),i}(),Tp=function(){function i(s,n,r){(0,M.Z)(this,i),this.name=s,this.version=n,this.At=r,12.2===i.Rt((0,Me.z$)())&&ys("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,D.Z)(i,[{key:"Dt",value:(s=(0,Ut.Z)(Ze().mark(function r(a){var o=this;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.t0=this.db,c.t0){c.next=6;break}return wn("SimpleDb","Opening database:",this.name),c.next=5,new Promise(function(d,m){var _=indexedDB.open(o.name,o.version);_.onsuccess=function(b){d(b.target.result)},_.onblocked=function(){m(new Pc(a,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},_.onerror=function(b){var E=b.target.error;m("VersionError"===E.name?new en(Lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===E.name?new en(Lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+E):new Pc(a,E))},_.onupgradeneeded=function(b){wn("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',b.oldVersion),o.At.Ct(b.target.result,_.transaction,b.oldVersion,o.version).next(function(){wn("SimpleDb","Database upgrade to version "+o.version+" complete")})}});case 5:this.db=c.sent;case 6:return this.Nt&&(this.db.onversionchange=function(d){return o.Nt(d)}),c.abrupt("return",this.db);case 8:case"end":return c.stop()}},r,this)})),function(r){return s.apply(this,arguments)})},{key:"xt",value:function(n){this.Nt=n,this.db&&(this.db.onversionchange=function(r){return n(r)})}},{key:"runTransaction",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(a,o,u,c){var m,_,b,E,d=this;return Ze().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:m="readonly"===o,_=0;case 2:return++_,I.prev=3,I.delegateYield(Ze().mark(function N(){var W,U;return Ze().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,d.Dt(a);case 2:return d.db=te.sent,W=Dh.open(d.db,a,m?"readonly":"readwrite",u),(U=c(W).catch(function(ue){return W.abort(ue),ln.reject(ue)}).toPromise()).catch(function(){}),te.next=7,W.It;case 7:return te.t0=U,te.abrupt("return",{v:te.t0});case 9:case"end":return te.stop()}},N)})(),"t0",5);case 5:if("object"!=typeof(b=I.t0)){I.next=8;break}return I.abrupt("return",b.v);case 8:I.next=15;break;case 10:if(I.prev=10,I.t1=I.catch(3),wn("SimpleDb","Transaction failed with error:",I.t1.message,"Retrying:",E="FirebaseError"!==I.t1.name&&_<3),this.close(),E){I.next=15;break}return I.abrupt("return",Promise.reject(I.t1));case 15:I.next=2;break;case 17:case"end":return I.stop()}},r,this,[[3,10]])}));return function(r,a,o,u){return s.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(n){return wn("SimpleDb","Removing database:",n),Ap(window.indexedDB.deleteDatabase(n)).toPromise()}},{key:"bt",value:function(){if(!(0,Me.hl)())return!1;if(i.Pt())return!0;var n=(0,Me.z$)(),r=i.Rt(n),a=0<r&&r<10,o=i.vt(n),u=0<o&&o<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||a||u)}},{key:"Pt",value:function(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}},{key:"St",value:function(n,r){return n.store(r)}},{key:"Rt",value:function(n){var r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}},{key:"vt",value:function(n){var r=n.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}}]),i;var s}(),cN=function(){function i(s){(0,M.Z)(this,i),this.kt=s,this.$t=!1,this.Ot=null}return(0,D.Z)(i,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(n){this.kt=n}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(n){this.Ot=n}},{key:"delete",value:function(){return Ap(this.kt.delete())}}]),i}(),Pc=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,Lt.UNAVAILABLE,"IndexedDB transaction '".concat(r,"' failed: ").concat(a))).name="IndexedDbTransactionError",o}return n}(en);function Mp(i){return"IndexedDbTransactionError"===i.name}var XC=function(){function i(s){(0,M.Z)(this,i),this.store=s}return(0,D.Z)(i,[{key:"put",value:function(n,r){var a;return void 0!==r?(wn("SimpleDb","PUT",this.store.name,n,r),a=this.store.put(r,n)):(wn("SimpleDb","PUT",this.store.name,"<auto-key>",n),a=this.store.put(n)),Ap(a)}},{key:"add",value:function(n){return wn("SimpleDb","ADD",this.store.name,n,n),Ap(this.store.add(n))}},{key:"get",value:function(n){var r=this;return Ap(this.store.get(n)).next(function(a){return void 0===a&&(a=null),wn("SimpleDb","GET",r.store.name,n,a),a})}},{key:"delete",value:function(n){return wn("SimpleDb","DELETE",this.store.name,n),Ap(this.store.delete(n))}},{key:"count",value:function(){return wn("SimpleDb","COUNT",this.store.name),Ap(this.store.count())}},{key:"Lt",value:function(n,r){var a=this.cursor(this.options(n,r)),o=[];return this.Bt(a,function(u,c){o.push(c)}).next(function(){return o})}},{key:"Ut",value:function(n,r){wn("SimpleDb","DELETE ALL",this.store.name);var a=this.options(n,r);a.qt=!1;var o=this.cursor(a);return this.Bt(o,function(u,c,d){return d.delete()})}},{key:"Kt",value:function(n,r){var a;r?a=n:(a={},r=n);var o=this.cursor(a);return this.Bt(o,r)}},{key:"jt",value:function(n){var r=this.cursor({});return new ln(function(a,o){r.onerror=function(u){var c=ob(u.target.error);o(c)},r.onsuccess=function(u){var c=u.target.result;c?n(c.primaryKey,c.value).next(function(d){d?c.continue():a()}):a()}})}},{key:"Bt",value:function(n,r){var a=[];return new ln(function(o,u){n.onerror=function(c){u(c.target.error)},n.onsuccess=function(c){var d=c.target.result;if(d){var m=new cN(d),_=r(d.primaryKey,d.value,m);if(_ instanceof ln){var b=_.catch(function(E){return m.done(),ln.reject(E)});a.push(b)}m.isDone?o():null===m.Ft?d.continue():d.continue(m.Ft)}else o()}}).next(function(){return ln.waitFor(a)})}},{key:"options",value:function(n,r){var a;return void 0!==n&&("string"==typeof n?a=n:r=n),{index:a,range:r}}},{key:"cursor",value:function(n){var r="next";if(n.reverse&&(r="prev"),n.index){var a=this.store.index(n.index);return n.qt?a.openKeyCursor(n.range,r):a.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}]),i}();function Ap(i){return new ln(function(s,n){i.onsuccess=function(r){s(r.target.result)},i.onerror=function(r){var a=ob(r.target.error);n(a)}})}var QC=!1;function ob(i){var s=Tp.Rt((0,Me.z$)());if(s>=12.2&&s<13){var n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){var r=new en("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return QC||(QC=!0,setTimeout(function(){throw r},0)),r}}return i}var fN=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).Qt=r,o.currentSequenceNumber=a,o}return n}(sb);function uo(i,s){var n=En(i);return Tp.St(n.Qt,s)}var JC=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.batchId=s,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return(0,D.Z)(i,[{key:"applyToRemoteDocument",value:function(n,r){for(var a=r.mutationResults,o=0;o<this.mutations.length;o++){var u=this.mutations[o];u.key.isEqual(n.key)&&$L(u,n,a[o])}}},{key:"applyToLocalView",value:function(n){var a,r=(0,Re.Z)(this.baseMutations);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.key.isEqual(n.key)&&Q0(o,n,this.localWriteTime)}}catch(m){r.e(m)}finally{r.f()}var c,u=(0,Re.Z)(this.mutations);try{for(u.s();!(c=u.n()).done;){var d=c.value;d.key.isEqual(n.key)&&Q0(d,n,this.localWriteTime)}}catch(m){u.e(m)}finally{u.f()}}},{key:"applyToLocalDocumentSet",value:function(n){var r=this;this.mutations.forEach(function(a){var o=n.get(a.key),u=o;r.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(Ar.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(n,r){return n.add(r.key)},ta())}},{key:"isEqual",value:function(n){return this.batchId===n.batchId&&ap(this.mutations,n.mutations,function(r,a){return J0(r,a)})&&ap(this.baseMutations,n.baseMutations,function(r,a){return J0(r,a)})}}]),i}(),hN=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.batch=s,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return(0,D.Z)(i,null,[{key:"from",value:function(n,r,a){Ir(n.mutations.length===a.length);for(var o=FC(),u=n.mutations,c=0;c<u.length;c++)o=o.insert(u[c].key,a[c].version);return new i(n,r,a,o)}}]),i}(),ub=function(){function i(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ar.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ar.min(),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ao.EMPTY_BYTE_STRING;(0,M.Z)(this,i),this.target=s,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c}return(0,D.Z)(i,[{key:"withSequenceNumber",value:function(n){return new i(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(n,r){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}},{key:"withLastLimboFreeSnapshotVersion",value:function(n){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}]),i}(),sy=function i(s){(0,M.Z)(this,i),this.Wt=s};function eS(i,s){if(s.document)return GC(i.Wt,s.document,!!s.hasCommittedMutations);if(s.noDocument){var n=fr.fromSegments(s.noDocument.path),r=qd(s.noDocument.readTime),a=Eo.newNoDocument(n,r);return s.hasCommittedMutations?a.setHasCommittedMutations():a}if(s.unknownDocument){var o=fr.fromSegments(s.unknownDocument.path),u=qd(s.unknownDocument.version);return Eo.newUnknownDocument(o,u)}return ar()}function oy(i,s,n){var E,T,r=xp(n),a=s.key.path.popLast().toArray();if(s.isFoundDocument()){var o={name:ey(E=i.Wt,(T=s).key),fields:T.data.value.mapValue.fields,updateTime:ou(E,T.version.toTimestamp())};return new us(null,null,o,s.hasCommittedMutations,r,a)}if(s.isNoDocument()){var c=s.key.path.toArray(),d=uy(s.version),m=s.hasCommittedMutations;return new us(null,new uN(c,d),null,m,r,a)}if(s.isUnknownDocument()){var _=s.key.path.toArray(),b=uy(s.version);return new us(new lN(_,b),null,null,!0,r,a)}return ar()}function xp(i){var s=i.toTimestamp();return[s.seconds,s.nanoseconds]}function Cu(i){var s=new Go(i[0],i[1]);return Ar.fromTimestamp(s)}function uy(i){var s=i.toTimestamp();return new oN(s.seconds,s.nanoseconds)}function qd(i){var s=new Go(i.seconds,i.nanoseconds);return Ar.fromTimestamp(s)}function Rh(i,s){for(var n=(s.baseMutations||[]).map(function(d){return jC(i.Wt,d)}),r=0;r<s.mutations.length-1;++r)r+1<s.mutations.length&&void 0!==s.mutations[r+1].transform&&(s.mutations[r].updateTransforms=s.mutations[r+1].transform.fieldTransforms,s.mutations.splice(r+1,1),++r);var u=s.mutations.map(function(d){return jC(i.Wt,d)}),c=Go.fromMillis(s.localWriteTimeMs);return new JC(s.batchId,c,n,u)}function ly(i){var r,a,s=qd(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?qd(i.lastLimboFreeSnapshotVersion):Ar.min();return void 0!==i.query.documents?(Ir(1===(a=i.query).documents.length),r=hl(zd(kp(a.documents[0])))):r=hl(WC(i.query)),new ub(r,i.targetId,0,i.lastListenSequenceNumber,s,n,ao.fromBase64String(i.resumeToken))}function tS(i,s){var a,n=uy(s.snapshotVersion),r=uy(s.lastLimboFreeSnapshotVersion);a=Y0(s.target)?ab(i.Wt,s.target):ry(i.Wt,s.target);var o=s.resumeToken.toBase64();return new uu(s.targetId,qg(s.target),n,o,s.sequenceNumber,r,a)}function lb(i){var s=WC({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?EC(s,s.limit,"L"):s}var G1=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"getBundleMetadata",value:function(n,r){return nS(n).get(r).next(function(a){if(a)return{id:(o=a).bundleId,createTime:qd(o.createTime),version:o.version};var o})}},{key:"saveBundleMetadata",value:function(n,r){return nS(n).put({bundleId:(a=r).id,createTime:uy(Ws(a.createTime)),version:a.version});var a}},{key:"getNamedQuery",value:function(n,r){return j1(n).get(r).next(function(a){if(a)return{name:(o=a).name,query:lb(o.bundledQuery),readTime:qd(o.readTime)};var o})}},{key:"saveNamedQuery",value:function(n,r){return j1(n).put({name:(a=r).name,readTime:uy(Ws(a.readTime)),bundledQuery:a.bundledQuery});var a}}]),i}();function nS(i){return uo(i,iy.store)}function j1(i){return uo(i,ay.store)}var dN=function(){function i(){(0,M.Z)(this,i),this.Gt=new rS}return(0,D.Z)(i,[{key:"addToCollectionParentIndex",value:function(n,r){return this.Gt.add(r),ln.resolve()}},{key:"getCollectionParents",value:function(n,r){return ln.resolve(this.Gt.getEntries(r))}}]),i}(),rS=function(){function i(){(0,M.Z)(this,i),this.index={}}return(0,D.Z)(i,[{key:"add",value:function(n){var r=n.lastSegment(),a=n.popLast(),o=this.index[r]||new js(Wr.comparator),u=!o.has(a);return this.index[r]=o.add(a),u}},{key:"has",value:function(n){var r=n.lastSegment(),a=n.popLast(),o=this.index[r];return o&&o.has(a)}},{key:"getEntries",value:function(n){return(this.index[n]||new js(Wr.comparator)).toArray()}}]),i}(),cy=function(){function i(){(0,M.Z)(this,i),this.zt=new rS}return(0,D.Z)(i,[{key:"addToCollectionParentIndex",value:function(n,r){var a=this;if(!this.zt.has(r)){var o=r.lastSegment(),u=r.popLast();n.addOnCommittedListener(function(){a.zt.add(r)});var c={collectionId:o,parent:Hl(u)};return W1(n).put(c)}return ln.resolve()}},{key:"getCollectionParents",value:function(n,r){var a=[],o=IDBKeyRange.bound([r,""],[_1(r),""],!1,!0);return W1(n).Lt(o).next(function(u){var d,c=(0,Re.Z)(u);try{for(c.s();!(d=c.n()).done;){var m=d.value;if(m.collectionId!==r)break;a.push(kf(m.parent))}}catch(_){c.e(_)}finally{c.f()}return a})}}]),i}();function W1(i){return uo(i,Sp.store)}var q1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Oc=function(){function i(s,n,r){(0,M.Z)(this,i),this.cacheSizeCollectionThreshold=s,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,D.Z)(i,null,[{key:"withCacheSize",value:function(n){return new i(n,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),i}();function fy(i,s,n){var r=i.store(Da.store),a=i.store(ju.store),o=[],u=IDBKeyRange.only(n.batchId),c=0,d=r.Kt({range:u},function(I,N,W){return c++,W.delete()});o.push(d.next(function(){Ir(1===c)}));var b,m=[],_=(0,Re.Z)(n.mutations);try{for(_.s();!(b=_.n()).done;){var E=b.value,T=ju.key(s,E.key.path,n.batchId);o.push(a.delete(T)),m.push(E.key)}}catch(I){_.e(I)}finally{_.f()}return ln.waitFor(o).next(function(){return m})}function hy(i){if(!i)return 0;var s;if(i.document)s=i.document;else if(i.unknownDocument)s=i.unknownDocument;else{if(!i.noDocument)throw ar();s=i.noDocument}return JSON.stringify(s).length}Oc.DEFAULT_COLLECTION_PERCENTILE=10,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oc.DEFAULT=new Oc(41943040,Oc.DEFAULT_COLLECTION_PERCENTILE,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oc.DISABLED=new Oc(-1,0,0);var Y1=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.userId=s,this.N=n,this.Ht=r,this.referenceDelegate=a,this.Jt={}}return(0,D.Z)(i,[{key:"checkEmpty",value:function(n){var r=!0,a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ph(n).Kt({index:Da.userMutationsIndex,range:a},function(o,u,c){r=!1,c.done()}).next(function(){return r})}},{key:"addMutationBatch",value:function(n,r,a,o){var u=this,c=Lc(n),d=Ph(n);return d.add({}).next(function(m){Ir("number"==typeof m);var N,H,te,ue,le,he,_=new JC(m,r,a,o),b=(H=u.N,te=u.userId,le=(ue=_).baseMutations.map(function(se){return ib(H.Wt,se)}),he=ue.mutations.map(function(se){return ib(H.Wt,se)}),new Da(te,ue.batchId,ue.localWriteTime.toMillis(),le,he)),E=[],T=new js(function(H,te){return Jr(H.canonicalString(),te.canonicalString())}),I=(0,Re.Z)(o);try{for(I.s();!(N=I.n()).done;){var W=N.value,U=ju.key(u.userId,W.key.path,m);T=T.add(W.key.path.popLast()),E.push(d.put(b)),E.push(c.put(U,ju.PLACEHOLDER))}}catch(H){I.e(H)}finally{I.f()}return T.forEach(function(H){E.push(u.Ht.addToCollectionParentIndex(n,H))}),n.addOnCommittedListener(function(){u.Jt[m]=_.keys()}),ln.waitFor(E).next(function(){return _})})}},{key:"lookupMutationBatch",value:function(n,r){var a=this;return Ph(n).get(r).next(function(o){return o?(Ir(o.userId===a.userId),Rh(a.N,o)):null})}},{key:"Xt",value:function(n,r){var a=this;return this.Jt[r]?ln.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(function(o){if(o){var u=o.keys();return a.Jt[r]=u,u}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(n,r){var a=this,o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]),c=null;return Ph(n).Kt({index:Da.userMutationsIndex,range:u},function(d,m,_){m.userId===a.userId&&(Ir(m.batchId>=o),c=Rh(a.N,m)),_.done()}).next(function(){return c})}},{key:"getHighestUnacknowledgedBatchId",value:function(n){var r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),a=-1;return Ph(n).Kt({index:Da.userMutationsIndex,range:r,reverse:!0},function(o,u,c){a=u.batchId,c.done()}).next(function(){return a})}},{key:"getAllMutationBatches",value:function(n){var r=this,a=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ph(n).Lt(Da.userMutationsIndex,a).next(function(o){return o.map(function(u){return Rh(r.N,u)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(n,r){var a=this,o=ju.prefixForPath(this.userId,r.path),u=IDBKeyRange.lowerBound(o),c=[];return Lc(n).Kt({range:u},function(d,m,_){var b=(0,ke.Z)(d,3),E=b[0],I=b[2],N=kf(b[1]);if(E===a.userId&&r.path.isEqual(N))return Ph(n).get(I).next(function(W){if(!W)throw ar();Ir(W.userId===a.userId),c.push(Rh(a.N,W))});_.done()}).next(function(){return c})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(n,r){var a=this,o=new js(Jr),u=[];return r.forEach(function(c){var d=ju.prefixForPath(a.userId,c.path),m=IDBKeyRange.lowerBound(d),_=Lc(n).Kt({range:m},function(b,E,T){var I=(0,ke.Z)(b,3),N=I[0],U=I[2],H=kf(I[1]);N===a.userId&&c.path.isEqual(H)?o=o.add(U):T.done()});u.push(_)}),ln.waitFor(u).next(function(){return a.Zt(n,o)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(n,r){var a=this,o=r.path,u=o.length+1,c=ju.prefixForPath(this.userId,o),d=IDBKeyRange.lowerBound(c),m=new js(Jr);return Lc(n).Kt({range:d},function(_,b,E){var T=(0,ke.Z)(_,3),I=T[0],W=T[2],U=kf(T[1]);I===a.userId&&o.isPrefixOf(U)?U.length===u&&(m=m.add(W)):E.done()}).next(function(){return a.Zt(n,m)})}},{key:"Zt",value:function(n,r){var a=this,o=[],u=[];return r.forEach(function(c){u.push(Ph(n).get(c).next(function(d){if(null===d)throw ar();Ir(d.userId===a.userId),o.push(Rh(a.N,d))}))}),ln.waitFor(u).next(function(){return o})}},{key:"removeMutationBatch",value:function(n,r){var a=this;return fy(n.Qt,this.userId,r).next(function(o){return n.addOnCommittedListener(function(){a.te(r.batchId)}),ln.forEach(o,function(u){return a.referenceDelegate.markPotentiallyOrphaned(n,u)})})}},{key:"te",value:function(n){delete this.Jt[n]}},{key:"performConsistencyCheck",value:function(n){var r=this;return this.checkEmpty(n).next(function(a){if(!a)return ln.resolve();var o=IDBKeyRange.lowerBound(ju.prefixForUser(r.userId)),u=[];return Lc(n).Kt({range:o},function(c,d,m){if(c[0]===r.userId){var _=kf(c[1]);u.push(_)}else m.done()}).next(function(){Ir(0===u.length)})})}},{key:"containsKey",value:function(n,r){return iS(n,this.userId,r)}},{key:"ee",value:function(n){var r=this;return Ip(n).get(this.userId).next(function(a){return a||new Cp(r.userId,-1,"")})}}],[{key:"Yt",value:function(n,r,a,o){return Ir(""!==n.uid),new i(n.isAuthenticated()?n.uid:"",r,a,o)}}]),i}();function iS(i,s,n){var r=ju.prefixForPath(s,n.path),a=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return Lc(i).Kt({range:o,qt:!0},function(c,d,m){var _=(0,ke.Z)(c,3);_[0]===s&&_[1]===a&&(u=!0),m.done()}).next(function(){return u})}function Ph(i){return uo(i,Da.store)}function Lc(i){return uo(i,ju.store)}function Ip(i){return uo(i,Cp.store)}var cb=function(){function i(s){(0,M.Z)(this,i),this.ne=s}return(0,D.Z)(i,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new i(0)}},{key:"ie",value:function(){return new i(-1)}}]),i}(),vN=function(){function i(s,n){(0,M.Z)(this,i),this.referenceDelegate=s,this.N=n}return(0,D.Z)(i,[{key:"allocateTargetId",value:function(n){var r=this;return this.re(n).next(function(a){var o=new cb(a.highestTargetId);return a.highestTargetId=o.next(),r.oe(n,a).next(function(){return a.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(n){return this.re(n).next(function(r){return Ar.fromTimestamp(new Go(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(n){return this.re(n).next(function(r){return r.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(n,r,a){var o=this;return this.re(n).next(function(u){return u.highestListenSequenceNumber=r,a&&(u.lastRemoteSnapshotVersion=a.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),o.oe(n,u)})}},{key:"addTargetData",value:function(n,r){var a=this;return this.ae(n,r).next(function(){return a.re(n).next(function(o){return o.targetCount+=1,a.ce(r,o),a.oe(n,o)})})}},{key:"updateTargetData",value:function(n,r){return this.ae(n,r)}},{key:"removeTargetData",value:function(n,r){var a=this;return this.removeMatchingKeysForTargetId(n,r.targetId).next(function(){return Dp(n).delete(r.targetId)}).next(function(){return a.re(n)}).next(function(o){return Ir(o.targetCount>0),o.targetCount-=1,a.oe(n,o)})}},{key:"removeTargets",value:function(n,r,a){var o=this,u=0,c=[];return Dp(n).Kt(function(d,m){var _=ly(m);_.sequenceNumber<=r&&null===a.get(_.targetId)&&(u++,c.push(o.removeTargetData(n,_)))}).next(function(){return ln.waitFor(c)}).next(function(){return u})}},{key:"forEachTarget",value:function(n,r){return Dp(n).Kt(function(a,o){var u=ly(o);r(u)})}},{key:"re",value:function(n){return aS(n).get(vl.key).next(function(r){return Ir(null!==r),r})}},{key:"oe",value:function(n,r){return aS(n).put(vl.key,r)}},{key:"ae",value:function(n,r){return Dp(n).put(tS(this.N,r))}},{key:"ce",value:function(n,r){var a=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,a=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,a=!0),a}},{key:"getTargetCount",value:function(n){return this.re(n).next(function(r){return r.targetCount})}},{key:"getTargetData",value:function(n,r){var a=qg(r),o=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]),u=null;return Dp(n).Kt({range:o,index:uu.queryTargetsIndexName},function(c,d,m){var _=ly(d);vC(r,_.target)&&(u=_,m.done())}).next(function(){return u})}},{key:"addMatchingKeys",value:function(n,r,a){var o=this,u=[],c=Ef(n);return r.forEach(function(d){var m=Hl(d.path);u.push(c.put(new oo(a,m))),u.push(o.referenceDelegate.addReference(n,a,d))}),ln.waitFor(u)}},{key:"removeMatchingKeys",value:function(n,r,a){var o=this,u=Ef(n);return ln.forEach(r,function(c){var d=Hl(c.path);return ln.waitFor([u.delete([a,d]),o.referenceDelegate.removeReference(n,a,c)])})}},{key:"removeMatchingKeysForTargetId",value:function(n,r){var a=Ef(n),o=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(o)}},{key:"getMatchingKeysForTargetId",value:function(n,r){var a=IDBKeyRange.bound([r],[r+1],!1,!0),o=Ef(n),u=ta();return o.Kt({range:a,qt:!0},function(c,d,m){var _=kf(c[1]),b=new fr(_);u=u.add(b)}).next(function(){return u})}},{key:"containsKey",value:function(n,r){var a=Hl(r.path),o=IDBKeyRange.bound([a],[_1(a)],!1,!0),u=0;return Ef(n).Kt({index:oo.documentTargetsIndex,qt:!0,range:o},function(c,d,m){0!==(0,ke.Z)(c,2)[0]&&(u++,m.done())}).next(function(){return u>0})}},{key:"Et",value:function(n,r){return Dp(n).get(r).next(function(a){return a?ly(a):null})}}]),i}();function Dp(i){return uo(i,uu.store)}function aS(i){return uo(i,vl.store)}function Ef(i){return uo(i,oo.store)}function Oh(i){return sS.apply(this,arguments)}function sS(){return(sS=(0,Ut.Z)(Ze().mark(function i(s){return Ze().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s.code===Lt.FAILED_PRECONDITION&&s.message===$C){r.next=2;break}throw s;case 2:wn("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return r.stop()}},i)}))).apply(this,arguments)}function oS(i,s){var n=(0,ke.Z)(i,2),r=n[0],a=n[1],o=(0,ke.Z)(s,2),c=o[1],d=Jr(r,o[0]);return 0===d?Jr(a,c):d}var pN=function(){function i(s){(0,M.Z)(this,i),this.ue=s,this.buffer=new js(oS),this.he=0}return(0,D.Z)(i,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(n){var r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{var a=this.buffer.last();oS(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),i}(),mN=function(){function i(s,n){(0,M.Z)(this,i),this.garbageCollector=s,this.asyncQueue=n,this.de=!1,this.we=null}return(0,D.Z)(i,[{key:"start",value:function(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(n){var r=this,a=this.de?3e5:6e4;wn("LruGarbageCollector","Garbage collection scheduled in ".concat(a,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,Ut.Z)(Ze().mark(function o(){return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r.we=null,r.de=!0,c.prev=1,c.next=4,n.collectGarbage(r.garbageCollector);case 4:c.next=14;break;case 6:if(c.prev=6,c.t0=c.catch(1),!Mp(c.t0)){c.next=12;break}wn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",c.t0),c.next=14;break;case 12:return c.next=14,Oh(c.t0);case 14:return c.next=16,r._e(n);case 16:case"end":return c.stop()}},o,null,[[1,6]])})))}}]),i}(),tV=function(){function i(s,n){(0,M.Z)(this,i),this.me=s,this.params=n}return(0,D.Z)(i,[{key:"calculateTargetCount",value:function(n,r){return this.me.ge(n).next(function(a){return Math.floor(r/100*a)})}},{key:"nthSequenceNumber",value:function(n,r){var a=this;if(0===r)return ln.resolve(io.T);var o=new pN(r);return this.me.forEachTarget(n,function(u){return o.fe(u.sequenceNumber)}).next(function(){return a.me.ye(n,function(u){return o.fe(u)})}).next(function(){return o.maxValue})}},{key:"removeTargets",value:function(n,r,a){return this.me.removeTargets(n,r,a)}},{key:"removeOrphanedDocuments",value:function(n,r){return this.me.removeOrphanedDocuments(n,r)}},{key:"collect",value:function(n,r){var a=this;return-1===this.params.cacheSizeCollectionThreshold?(wn("LruGarbageCollector","Garbage collection skipped; disabled"),ln.resolve(q1)):this.getCacheSize(n).next(function(o){return o<a.params.cacheSizeCollectionThreshold?(wn("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(o," is lower than threshold ").concat(a.params.cacheSizeCollectionThreshold)),q1):a.pe(n,r)})}},{key:"getCacheSize",value:function(n){return this.me.getCacheSize(n)}},{key:"pe",value:function(n,r){var o,u,c,d,m,_,b,a=this,E=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(function(T){return T>a.params.maximumSequenceNumbersToCollect?(wn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(a.params.maximumSequenceNumbersToCollect," from ").concat(T)),u=a.params.maximumSequenceNumbersToCollect):u=T,d=Date.now(),a.nthSequenceNumber(n,u)}).next(function(T){return o=T,m=Date.now(),a.removeTargets(n,o,r)}).next(function(T){return c=T,_=Date.now(),a.removeOrphanedDocuments(n,o)}).next(function(T){return b=Date.now(),iC()<=Cc.in.DEBUG&&wn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(d-E,"ms\n\tDetermined least recently used ").concat(u," in ")+(m-d)+"ms\n"+"\tRemoved ".concat(c," targets in ")+(_-m)+"ms\n"+"\tRemoved ".concat(T," documents in ")+(b-_)+"ms\n"+"Total Duration: ".concat(b-E,"ms")),ln.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:T})})}}]),i}(),nV=function(){function i(s,n){(0,M.Z)(this,i),this.db=s,this.garbageCollector=new tV(this,n)}return(0,D.Z)(i,[{key:"ge",value:function(n){var r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(function(a){return r.next(function(o){return a+o})})}},{key:"Ee",value:function(n){var r=0;return this.ye(n,function(a){r++}).next(function(){return r})}},{key:"forEachTarget",value:function(n,r){return this.db.getTargetCache().forEachTarget(n,r)}},{key:"ye",value:function(n,r){return this.Te(n,function(a,o){return r(o)})}},{key:"addReference",value:function(n,r,a){return uS(n,a)}},{key:"removeReference",value:function(n,r,a){return uS(n,a)}},{key:"removeTargets",value:function(n,r,a){return this.db.getTargetCache().removeTargets(n,r,a)}},{key:"markPotentiallyOrphaned",value:function(n,r){return uS(n,r)}},{key:"Ie",value:function(n,r){return o=r,u=!1,Ip(a=n).jt(function(c){return iS(a,c,o).next(function(d){return d&&(u=!0),ln.resolve(!d)})}).next(function(){return u});var a,o,u}},{key:"removeOrphanedDocuments",value:function(n,r){var a=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[],c=0;return this.Te(n,function(d,m){if(m<=r){var _=a.Ie(n,d).next(function(b){if(!b)return c++,o.getEntry(n,d).next(function(){return o.removeEntry(d),Ef(n).delete([0,Hl(d.path)])})});u.push(_)}}).next(function(){return ln.waitFor(u)}).next(function(){return o.apply(n)}).next(function(){return c})}},{key:"removeTarget",value:function(n,r){var a=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,a)}},{key:"updateLimboDocument",value:function(n,r){return uS(n,r)}},{key:"Te",value:function(n,r){var o,a=Ef(n),u=io.T;return a.Kt({index:oo.documentTargetsIndex},function(c,d){var m=(0,ke.Z)(c,2),E=d.path,T=d.sequenceNumber;0===m[0]?(u!==io.T&&r(new fr(kf(o)),u),u=T,o=E):u=io.T}).next(function(){u!==io.T&&r(new fr(kf(o)),u)})}},{key:"getCacheSize",value:function(n){return this.db.getRemoteDocumentCache().getSize(n)}}]),i}();function uS(i,s){return Ef(i).put((r=i.currentSequenceNumber,new oo(0,Hl(s.path),r)));var r}var dy=function(){function i(s,n){(0,M.Z)(this,i),this.mapKeyFn=s,this.equalsFn=n,this.inner={}}return(0,D.Z)(i,[{key:"get",value:function(n){var r=this.mapKeyFn(n),a=this.inner[r];if(void 0!==a){var u,o=(0,Re.Z)(a);try{for(o.s();!(u=o.n()).done;){var c=(0,ke.Z)(u.value,2),m=c[1];if(this.equalsFn(c[0],n))return m}}catch(_){o.e(_)}finally{o.f()}}}},{key:"has",value:function(n){return void 0!==this.get(n)}},{key:"set",value:function(n,r){var a=this.mapKeyFn(n),o=this.inner[a];if(void 0!==o){for(var u=0;u<o.length;u++)if(this.equalsFn(o[u][0],n))return void(o[u]=[n,r]);o.push([n,r])}else this.inner[a]=[[n,r]]}},{key:"delete",value:function(n){var r=this.mapKeyFn(n),a=this.inner[r];if(void 0===a)return!1;for(var o=0;o<a.length;o++)if(this.equalsFn(a[o][0],n))return 1===a.length?delete this.inner[r]:a.splice(o,1),!0;return!1}},{key:"forEach",value:function(n){os(this.inner,function(r,a){var u,o=(0,Re.Z)(a);try{for(o.s();!(u=o.n()).done;){var c=(0,ke.Z)(u.value,2);n(c[0],c[1])}}catch(_){o.e(_)}finally{o.f()}})}},{key:"isEmpty",value:function(){return Eh(this.inner)}}]),i}(),lS=function(){function i(){(0,M.Z)(this,i),this.changes=new dy(function(s){return s.toString()},function(s,n){return s.isEqual(n)}),this.changesApplied=!1}return(0,D.Z)(i,[{key:"getReadTime",value:function(n){var r=this.changes.get(n);return r?r.readTime:Ar.min()}},{key:"addEntry",value:function(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}},{key:"removeEntry",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(n,{document:Eo.newInvalidDocument(n),readTime:r})}},{key:"getEntry",value:function(n,r){this.assertNotApplied();var a=this.changes.get(r);return void 0!==a?ln.resolve(a.document):this.getFromCache(n,r)}},{key:"getEntries",value:function(n,r){return this.getAllFromCache(n,r)}},{key:"apply",value:function(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}},{key:"assertNotApplied",value:function(){}}]),i}(),fb=function(){function i(s,n){(0,M.Z)(this,i),this.N=s,this.Ht=n}return(0,D.Z)(i,[{key:"addEntry",value:function(n,r,a){return Cf(n).put(Lh(r),a)}},{key:"removeEntry",value:function(n,r){var a=Cf(n),o=Lh(r);return a.delete(o)}},{key:"updateMetadata",value:function(n,r){var a=this;return this.getMetadata(n).next(function(o){return o.byteSize+=r,a.Ae(n,o)})}},{key:"getEntry",value:function(n,r){var a=this;return Cf(n).get(Lh(r)).next(function(o){return a.Re(r,o)})}},{key:"be",value:function(n,r){var a=this;return Cf(n).get(Lh(r)).next(function(o){return{document:a.Re(r,o),size:hy(o)}})}},{key:"getEntries",value:function(n,r){var a=this,o=ea();return this.Pe(n,r,function(u,c){var d=a.Re(u,c);o=o.insert(u,d)}).next(function(){return o})}},{key:"ve",value:function(n,r){var a=this,o=ea(),u=new Co(fr.comparator);return this.Pe(n,r,function(c,d){var m=a.Re(c,d);o=o.insert(c,m),u=u.insert(c,hy(d))}).next(function(){return{documents:o,Ve:u}})}},{key:"Pe",value:function(n,r,a){if(r.isEmpty())return ln.resolve();var o=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),u=r.getIterator(),c=u.getNext();return Cf(n).Kt({range:o},function(d,m,_){for(var b=fr.fromSegments(d);c&&fr.comparator(c,b)<0;)a(c,null),c=u.getNext();c&&c.isEqual(b)&&(a(c,m),c=u.hasNext()?u.getNext():null),c?_.Mt(c.path.toArray()):_.done()}).next(function(){for(;c;)a(c,null),c=u.hasNext()?u.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(n,r,a){var o=this,u=ea(),c=r.path.length+1,d={};if(a.isEqual(Ar.min())){var m=r.path.toArray();d.range=IDBKeyRange.lowerBound(m)}else{var _=r.path.toArray(),b=xp(a);d.range=IDBKeyRange.lowerBound([_,b],!0),d.index=us.collectionReadTimeIndex}return Cf(n).Kt(d,function(E,T,I){if(E.length===c){var N=eS(o.N,T);r.path.isPrefixOf(N.key.path)?Gd(r,N)&&(u=u.insert(N.key,N)):I.done()}}).next(function(){return u})}},{key:"newChangeBuffer",value:function(n){return new gN(this,!!n&&n.trackRemovals)}},{key:"getSize",value:function(n){return this.getMetadata(n).next(function(r){return r.byteSize})}},{key:"getMetadata",value:function(n){return K1(n).get(xh.key).next(function(r){return Ir(!!r),r})}},{key:"Ae",value:function(n,r){return K1(n).put(xh.key,r)}},{key:"Re",value:function(n,r){if(r){var a=eS(this.N,r);if(!a.isNoDocument()||!a.version.isEqual(Ar.min()))return a}return Eo.newInvalidDocument(n)}}]),i}(),gN=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).Se=r,o.trackRemovals=a,o.De=new dy(function(u){return u.toString()},function(u,c){return u.isEqual(c)}),o}return(0,D.Z)(n,[{key:"applyChanges",value:function(a){var o=this,u=[],c=0,d=new js(function(m,_){return Jr(m.canonicalString(),_.canonicalString())});return this.changes.forEach(function(m,_){var b=o.De.get(m);if(_.document.isValidDocument()){var E=oy(o.Se.N,_.document,o.getReadTime(m));d=d.add(m.path.popLast());var T=hy(E);c+=T-b,u.push(o.Se.addEntry(a,m,E))}else if(c-=b,o.trackRemovals){var I=oy(o.Se.N,Eo.newNoDocument(m,Ar.min()),o.getReadTime(m));u.push(o.Se.addEntry(a,m,I))}else u.push(o.Se.removeEntry(a,m))}),d.forEach(function(m){u.push(o.Se.Ht.addToCollectionParentIndex(a,m))}),u.push(this.Se.updateMetadata(a,c)),ln.waitFor(u)}},{key:"getFromCache",value:function(a,o){var u=this;return this.Se.be(a,o).next(function(c){return u.De.set(o,c.size),c.document})}},{key:"getAllFromCache",value:function(a,o){var u=this;return this.Se.ve(a,o).next(function(c){var d=c.documents;return c.Ve.forEach(function(_,b){u.De.set(_,b)}),d})}}]),n}(lS);function K1(i){return uo(i,xh.store)}function Cf(i){return uo(i,us.store)}function Lh(i){return i.path.toArray()}var yN=function(){function i(s){(0,M.Z)(this,i),this.N=s}return(0,D.Z)(i,[{key:"Ct",value:function(n,r,a,o){var u=this;Ir(a<o&&a>=0&&o<=11);var m,c=new Dh("createOrUpgrade",r);a<1&&o>=1&&(n.createObjectStore(zl.store),(m=n).createObjectStore(Cp.store,{keyPath:Cp.keyPath}),m.createObjectStore(Da.store,{keyPath:Da.keyPath,autoIncrement:!0}).createIndex(Da.userMutationsIndex,Da.userMutationsKeyPath,{unique:!0}),m.createObjectStore(ju.store),$1(n),function(m){m.createObjectStore(us.store)}(n));var d=ln.resolve();return a<3&&o>=3&&(0!==a&&(function(m){m.deleteObjectStore(oo.store),m.deleteObjectStore(uu.store),m.deleteObjectStore(vl.store)}(n),$1(n)),d=d.next(function(){return function(m){var _=m.store(vl.store),b=new vl(0,0,Ar.min().toTimestamp(),0);return _.put(vl.key,b)}(c)})),a<4&&o>=4&&(0!==a&&(d=d.next(function(){return function(m,_){return _.store(Da.store).Lt().next(function(b){m.deleteObjectStore(Da.store),m.createObjectStore(Da.store,{keyPath:Da.keyPath,autoIncrement:!0}).createIndex(Da.userMutationsIndex,Da.userMutationsKeyPath,{unique:!0});var E=_.store(Da.store),T=b.map(function(I){return E.put(I)});return ln.waitFor(T)})}(n,c)})),d=d.next(function(){!function(m){m.createObjectStore(Ih.store,{keyPath:Ih.keyPath})}(n)})),a<5&&o>=5&&(d=d.next(function(){return u.Ce(c)})),a<6&&o>=6&&(d=d.next(function(){return function(m){m.createObjectStore(xh.store)}(n),u.Ne(c)})),a<7&&o>=7&&(d=d.next(function(){return u.xe(c)})),a<8&&o>=8&&(d=d.next(function(){return u.ke(n,c)})),a<9&&o>=9&&(d=d.next(function(){(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(n),function(m){var _=m.objectStore(us.store);_.createIndex(us.readTimeIndex,us.readTimeIndexPath,{unique:!1}),_.createIndex(us.collectionReadTimeIndex,us.collectionReadTimeIndexPath,{unique:!1})}(r)})),a<10&&o>=10&&(d=d.next(function(){return u.$e(c)})),a<11&&o>=11&&(d=d.next(function(){(function(m){m.createObjectStore(iy.store,{keyPath:iy.keyPath})})(n),function(m){m.createObjectStore(ay.store,{keyPath:ay.keyPath})}(n)})),d}},{key:"Ne",value:function(n){var r=0;return n.store(us.store).Kt(function(a,o){r+=hy(o)}).next(function(){var a=new xh(r);return n.store(xh.store).put(xh.key,a)})}},{key:"Ce",value:function(n){var r=this,a=n.store(Cp.store),o=n.store(Da.store);return a.Lt().next(function(u){return ln.forEach(u,function(c){var d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.Lt(Da.userMutationsIndex,d).next(function(m){return ln.forEach(m,function(_){Ir(_.userId===c.userId);var b=Rh(r.N,_);return fy(n,c.userId,b).next(function(){})})})})})}},{key:"xe",value:function(n){var r=n.store(oo.store),a=n.store(us.store);return n.store(vl.store).get(vl.key).next(function(o){var u=[];return a.Kt(function(c,d){var m=new Wr(c),_=[0,Hl(m)];u.push(r.get(_).next(function(b){return b?ln.resolve():r.put(new oo(0,Hl(m),o.highestListenSequenceNumber))}))}).next(function(){return ln.waitFor(u)})})}},{key:"ke",value:function(n,r){n.createObjectStore(Sp.store,{keyPath:Sp.keyPath});var a=r.store(Sp.store),o=new rS,u=function(d){if(o.add(d)){var m=d.lastSegment(),_=d.popLast();return a.put({collectionId:m,parent:Hl(_)})}};return r.store(us.store).Kt({qt:!0},function(c,d){var m=new Wr(c);return u(m.popLast())}).next(function(){return r.store(ju.store).Kt({qt:!0},function(c,d){var T=kf((0,ke.Z)(c,3)[1]);return u(T.popLast())})})}},{key:"$e",value:function(n){var r=this,a=n.store(uu.store);return a.Kt(function(o,u){var c=ly(u),d=tS(r.N,c);return a.put(d)})}}]),i}();function $1(i){i.createObjectStore(oo.store,{keyPath:oo.keyPath}).createIndex(oo.documentTargetsIndex,oo.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(uu.store,{keyPath:uu.keyPath}).createIndex(uu.queryTargetsIndexName,uu.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(vl.store)}var cS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_N=function(){function i(s,n,r,a,o,u,c,d,m,_){if((0,M.Z)(this,i),this.allowTabSynchronization=s,this.persistenceKey=n,this.clientId=r,this.Oe=o,this.window=u,this.document=c,this.Fe=m,this.Me=_,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(b){return Promise.resolve()},!i.bt())throw new en(Lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nV(this,a),this.We=n+"main",this.N=new sy(d),this.Ge=new Tp(this.We,11,new yN(this.N)),this.ze=new vN(this.referenceDelegate,this.N),this.Ht=new cy,this.He=new fb(this.N,this.Ht),this.Je=new G1,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===_&&ys("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,D.Z)(i,[{key:"start",value:function(){var n=this;return this.Xe().then(function(){if(!n.isPrimary&&!n.allowTabSynchronization)throw new en(Lt.FAILED_PRECONDITION,cS);return n.Ze(),n.tn(),n.en(),n.runTransaction("getHighestListenSequenceNumber","readonly",function(r){return n.ze.getHighestSequenceNumber(r)})}).then(function(r){n.Le=new io(r,n.Fe)}).then(function(){n.Be=!0}).catch(function(r){return n.Ge&&n.Ge.close(),Promise.reject(r)})}},{key:"nn",value:function(n){var r=this;return this.Qe=function(){var a=(0,Ut.Z)(Ze().mark(function o(u){return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!r.started){d.next=2;break}return d.abrupt("return",n(u));case 2:case"end":return d.stop()}},o)}));return function(o){return a.apply(this,arguments)}}(),n(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(n){this.Ge.xt(function(){var r=(0,Ut.Z)(Ze().mark(function a(o){return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.t0=null===o.newVersion,!c.t0){c.next=4;break}return c.next=4,n();case 4:case"end":return c.stop()}},a)}));return function(a){return r.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,Ut.Z)(Ze().mark(function a(){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.t0=r.started,!u.t0){u.next=4;break}return u.next=4,r.Xe();case 4:case"end":return u.stop()}},a)}))))}},{key:"Xe",value:function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(r){return py(r).put(new Ih(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.sn(r).next(function(a){a||(n.isPrimary=!1,n.Oe.enqueueRetryable(function(){return n.Qe(!1)}))})}).next(function(){return n.rn(r)}).next(function(a){return n.isPrimary&&!a?n.on(r).next(function(){return!1}):!!a&&n.an(r).next(function(){return!0})})}).catch(function(r){if(Mp(r))return wn("IndexedDbPersistence","Failed to extend owner lease: ",r),n.isPrimary;if(!n.allowTabSynchronization)throw r;return wn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(function(r){n.isPrimary!==r&&n.Oe.enqueueRetryable(function(){return n.Qe(r)}),n.isPrimary=r})}},{key:"sn",value:function(n){var r=this;return vy(n).get(zl.key).next(function(a){return ln.resolve(r.cn(a))})}},{key:"un",value:function(n){return py(n).delete(this.clientId)}},{key:"hn",value:(s=(0,Ut.Z)(Ze().mark(function r(){var o,u,c,a=this;return Ze().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!this.isPrimary||this.ln(this.je,18e5)){_.next=6;break}return this.je=Date.now(),_.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(b){var E=uo(b,Ih.store);return E.Lt().next(function(T){var I=a.fn(T,18e5),N=T.filter(function(W){return-1===I.indexOf(W)});return ln.forEach(N,function(W){return E.delete(W.clientId)}).next(function(){return N})})}).catch(function(){return[]});case 4:if(o=_.sent,this.Ye){u=(0,Re.Z)(o);try{for(u.s();!(c=u.n()).done;)this.Ye.removeItem(this.dn(c.value.clientId))}catch(b){u.e(b)}finally{u.f()}}case 6:case"end":return _.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"en",value:function(){var n=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return n.Xe().then(function(){return n.hn()}).then(function(){return n.en()})})}},{key:"cn",value:function(n){return!!n&&n.ownerId===this.clientId}},{key:"rn",value:function(n){var r=this;return this.Me?ln.resolve(!0):vy(n).get(zl.key).next(function(a){if(null!==a&&r.ln(a.leaseTimestampMs,5e3)&&!r.wn(a.ownerId)){if(r.cn(a)&&r.networkEnabled)return!0;if(!r.cn(a)){if(!a.allowTabSynchronization)throw new en(Lt.FAILED_PRECONDITION,cS);return!1}}return!(!r.networkEnabled||!r.inForeground)||py(n).Lt().next(function(o){return void 0===r.fn(o,5e3).find(function(u){return!(r.clientId===u.clientId||!(!r.networkEnabled&&u.networkEnabled||!r.inForeground&&u.inForeground&&r.networkEnabled===u.networkEnabled))})})}).next(function(a){return r.isPrimary!==a&&wn("IndexedDbPersistence","Client ".concat(a?"is":"is not"," eligible for a primary lease.")),a})}},{key:"shutdown",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){var a=this;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),u.next=7,this.Ge.runTransaction("shutdown","readwrite",[zl.store,Ih.store],function(c){var d=new fN(c,io.T);return a.on(d).next(function(){return a.un(d)})});case 7:this.Ge.close(),this.yn();case 9:case"end":return u.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"fn",value:function(n,r){var a=this;return n.filter(function(o){return a.ln(o.updateTimeMs,r)&&!a.wn(o.clientId)})}},{key:"pn",value:function(){var n=this;return this.runTransaction("getActiveClients","readonly",function(r){return py(r).Lt().next(function(a){return n.fn(a,18e5).map(function(o){return o.clientId})})})}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(n){return Y1.Yt(n,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(n,r,a){var c,o=this;return wn("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",z1,function(d){return c=new fN(d,o.Le?o.Le.next():io.T),"readwrite-primary"===r?o.sn(c).next(function(m){return!!m||o.rn(c)}).next(function(m){if(!m)throw ys("Failed to obtain primary lease for action '".concat(n,"'.")),o.isPrimary=!1,o.Oe.enqueueRetryable(function(){return o.Qe(!1)}),new en(Lt.FAILED_PRECONDITION,$C);return a(c)}).next(function(m){return o.an(c).next(function(){return m})}):o.En(c).next(function(){return a(c)})}).then(function(d){return c.raiseOnCommittedEvent(),d})}},{key:"En",value:function(n){var r=this;return vy(n).get(zl.key).next(function(a){if(null!==a&&r.ln(a.leaseTimestampMs,5e3)&&!r.wn(a.ownerId)&&!r.cn(a)&&!(r.Me||r.allowTabSynchronization&&a.allowTabSynchronization))throw new en(Lt.FAILED_PRECONDITION,cS)})}},{key:"an",value:function(n){var r=new zl(this.clientId,this.allowTabSynchronization,Date.now());return vy(n).put(zl.key,r)}},{key:"on",value:function(n){var r=this,a=vy(n);return a.get(zl.key).next(function(o){return r.cn(o)?(wn("IndexedDbPersistence","Releasing primary lease."),a.delete(zl.key)):ln.resolve()})}},{key:"ln",value:function(n,r){var a=Date.now();return!(n<a-r||n>a&&(ys("Detected an update time that is in the future: ".concat(n," > ").concat(a)),1))}},{key:"Ze",value:function(){var n=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){n.Oe.enqueueAndForget(function(){return n.inForeground="visible"===n.document.visibilityState,n.Xe()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var r,n=this;"function"==typeof(null===(r=this.window)||void 0===r?void 0:r.addEventListener)&&(this.Ue=function(){n._n(),(0,Me.G6)()&&navigator.appVersion.match("Version/14")&&n.Oe.enterRestrictedMode(!0),n.Oe.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(n){var r;try{var a=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return wn("IndexedDbPersistence","Client '".concat(n,"' ").concat(a?"is":"is not"," zombied in LocalStorage")),a}catch(o){return ys("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){ys("Failed to set zombie client id.",n)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}},{key:"dn",value:function(n){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(n)}}],[{key:"bt",value:function(){return Tp.bt()}}]),i;var s}();function vy(i){return uo(i,zl.store)}function py(i){return uo(i,Ih.store)}function fS(i,s){var n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+s+"/"+n+"/"}var bN=function i(s,n){(0,M.Z)(this,i),this.progress=s,this.Tn=n},Yd=function(){function i(s,n,r){(0,M.Z)(this,i),this.He=s,this.In=n,this.Ht=r}return(0,D.Z)(i,[{key:"An",value:function(n,r){var a=this;return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(function(o){return a.Rn(n,r,o)})}},{key:"Rn",value:function(n,r,a){return this.He.getEntry(n,r).next(function(o){var c,u=(0,Re.Z)(a);try{for(u.s();!(c=u.n()).done;)c.value.applyToLocalView(o)}catch(m){u.e(m)}finally{u.f()}return o})}},{key:"bn",value:function(n,r){n.forEach(function(a,o){var c,u=(0,Re.Z)(r);try{for(u.s();!(c=u.n()).done;)c.value.applyToLocalView(o)}catch(m){u.e(m)}finally{u.f()}})}},{key:"Pn",value:function(n,r){var a=this;return this.He.getEntries(n,r).next(function(o){return a.vn(n,o).next(function(){return o})})}},{key:"vn",value:function(n,r){var a=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(function(o){return a.bn(r,o)})}},{key:"getDocumentsMatchingQuery",value:function(n,r,a){return fr.isDocumentKey((o=r).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(n,r.path):kC(r)?this.Sn(n,r,a):this.Dn(n,r,a);var o}},{key:"Vn",value:function(n,r){return this.An(n,new fr(r)).next(function(a){var o=NC();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}},{key:"Sn",value:function(n,r,a){var o=this,u=r.collectionGroup,c=NC();return this.Ht.getCollectionParents(n,u).next(function(d){return ln.forEach(d,function(m){var b,E,_=(b=r,E=m.child(u),new yf(E,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));return o.Dn(n,_,a).next(function(b){b.forEach(function(E,T){c=c.insert(E,T)})})}).next(function(){return c})})}},{key:"Dn",value:function(n,r,a){var u,c,o=this;return this.He.getDocumentsMatchingQuery(n,r,a).next(function(d){return u=d,o.In.getAllMutationBatchesAffectingQuery(n,r)}).next(function(d){return o.Cn(n,c=d,u).next(function(m){u=m;var b,_=(0,Re.Z)(c);try{for(_.s();!(b=_.n()).done;){var I,E=b.value,T=(0,Re.Z)(E.mutations);try{for(T.s();!(I=T.n()).done;){var N=I.value,W=N.key,U=u.get(W);null==U&&(U=Eo.newInvalidDocument(W),u=u.insert(W,U)),Q0(N,U,E.localWriteTime),U.isFoundDocument()||(u=u.remove(W))}}catch(H){T.e(H)}finally{T.f()}}}catch(H){_.e(H)}finally{_.f()}})}).next(function(){return u.forEach(function(d,m){Gd(r,m)||(u=u.remove(d))}),u})}},{key:"Cn",value:function(n,r,a){var c,o=ta(),u=(0,Re.Z)(r);try{for(u.s();!(c=u.n()).done;){var _,m=(0,Re.Z)(c.value.mutations);try{for(m.s();!(_=m.n()).done;){var b=_.value;b instanceof bf&&null===a.get(b.key)&&(o=o.add(b.key))}}catch(T){m.e(T)}finally{m.f()}}}catch(T){u.e(T)}finally{u.f()}var E=a;return this.He.getEntries(n,o).next(function(T){return T.forEach(function(I,N){N.isFoundDocument()&&(E=E.insert(I,N))}),E})}}]),i}(),wN=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.targetId=s,this.fromCache=n,this.Nn=r,this.xn=a}return(0,D.Z)(i,null,[{key:"kn",value:function(n,r){var c,a=ta(),o=ta(),u=(0,Re.Z)(r.docChanges);try{for(u.s();!(c=u.n()).done;){var d=c.value;switch(d.type){case 0:a=a.add(d.doc.key);break;case 1:o=o.add(d.doc.key)}}}catch(m){u.e(m)}finally{u.f()}return new i(n,r.fromCache,a,o)}}]),i}(),hS=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"$n",value:function(n){this.On=n}},{key:"getDocumentsMatchingQuery",value:function(n,r,a,o){var c,u=this;return 0===(c=r).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||a.isEqual(Ar.min())?this.Fn(n,r):this.On.Pn(n,o).next(function(c){var d=u.Mn(r,c);return(K0(r)||Yg(r))&&u.Ln(r.limitType,d,o,a)?u.Fn(n,r):(iC()<=Cc.in.DEBUG&&wn("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),$0(r)),u.On.getDocumentsMatchingQuery(n,r,a).next(function(m){return d.forEach(function(_){m=m.insert(_.key,_)}),m}))})}},{key:"Mn",value:function(n,r){var a=new js(qL(n));return r.forEach(function(o,u){Gd(n,u)&&(a=a.add(u))}),a}},{key:"Ln",value:function(n,r,a,o){if(a.size!==r.size)return!0;var u="F"===n?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}},{key:"Fn",value:function(n,r){return iC()<=Cc.in.DEBUG&&wn("QueryEngine","Using full collection scan to execute query:",$0(r)),this.On.getDocumentsMatchingQuery(n,r,Ar.min())}}]),i}(),kN=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.persistence=s,this.Bn=n,this.N=a,this.Un=new Co(Jr),this.qn=new dy(function(o){return qg(o)},vC),this.Kn=Ar.min(),this.In=s.getMutationQueue(r),this.jn=s.getRemoteDocumentCache(),this.ze=s.getTargetCache(),this.Qn=new Yd(this.jn,this.In,this.persistence.getIndexManager()),this.Je=s.getBundleCache(),this.Bn.$n(this.Qn)}return(0,D.Z)(i,[{key:"collectGarbage",value:function(n){var r=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(a){return n.collect(a,r.Un)})}}]),i}();function dS(i,s,n,r){return new kN(i,s,n,r)}function X1(i,s){return hb.apply(this,arguments)}function hb(){return(hb=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o,u;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=En(s),a=r.In,o=r.Qn,d.next=4,r.persistence.runTransaction("Handle user change","readonly",function(m){var _;return r.In.getAllMutationBatches(m).next(function(b){return _=b,a=r.persistence.getMutationQueue(n),o=new Yd(r.jn,a,r.persistence.getIndexManager()),a.getAllMutationBatches(m)}).next(function(b){var W,E=[],T=[],I=ta(),N=(0,Re.Z)(_);try{for(N.s();!(W=N.n()).done;){var U=W.value;E.push(U.batchId);var te,H=(0,Re.Z)(U.mutations);try{for(H.s();!(te=H.n()).done;)I=I.add(te.value.key)}catch(Fe){H.e(Fe)}finally{H.f()}}}catch(Fe){N.e(Fe)}finally{N.f()}var he,le=(0,Re.Z)(b);try{for(le.s();!(he=le.n()).done;){var se=he.value;T.push(se.batchId);var Ue,ye=(0,Re.Z)(se.mutations);try{for(ye.s();!(Ue=ye.n()).done;)I=I.add(Ue.value.key)}catch(Fe){ye.e(Fe)}finally{ye.f()}}}catch(Fe){le.e(Fe)}finally{le.f()}return o.Pn(m,I).next(function(Fe){return{Wn:Fe,removedBatchIds:E,addedBatchIds:T}})})});case 4:return u=d.sent,d.abrupt("return",(r.In=a,r.Qn=o,r.Bn.$n(r.Qn),u));case 6:case"end":return d.stop()}},i)}))).apply(this,arguments)}function EN(i,s){var n=En(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var u,c,d,m,_,b,E,a=s.batch.keys(),o=n.jn.newChangeBuffer({trackRemovals:!0});return(u=n,c=r,d=s,m=o,_=d.batch,b=_.keys(),E=ln.resolve(),b.forEach(function(T){E=E.next(function(){return m.getEntry(c,T)}).next(function(I){var N=d.docVersions.get(T);Ir(null!==N),I.version.compareTo(N)<0&&(_.applyToRemoteDocument(I,d),I.isValidDocument()&&m.addEntry(I,d.commitVersion))})}),E.next(function(){return u.In.removeMutationBatch(c,_)})).next(function(){return o.apply(r)}).next(function(){return n.In.performConsistencyCheck(r)}).next(function(){return n.Qn.Pn(r,a)})})}function db(i){var s=En(i);return s.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return s.ze.getLastRemoteSnapshotVersion(n)})}function CN(i,s){var n=En(i),r=s.snapshotVersion,a=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var u=n.jn.newChangeBuffer({trackRemovals:!0});a=n.Un;var c=[];s.targetChanges.forEach(function(_,b){var N,W,U,E=a.get(b);if(E){c.push(n.ze.removeMatchingKeys(o,_.removedDocuments,b).next(function(){return n.ze.addMatchingKeys(o,_.addedDocuments,b)}));var T=_.resumeToken;if(T.approximateByteSize()>0){var I=E.withResumeToken(T,r).withSequenceNumber(o.currentSequenceNumber);a=a.insert(b,I),N=E,U=_,Ir((W=I).resumeToken.approximateByteSize()>0),(0===N.resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8||U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0)&&c.push(n.ze.updateTargetData(o,I))}}});var d=ea();if(s.documentUpdates.forEach(function(_,b){s.resolvedLimboDocuments.has(_)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),c.push(vS(o,u,s.documentUpdates,r,void 0).next(function(_){d=_})),!r.isEqual(Ar.min())){var m=n.ze.getLastRemoteSnapshotVersion(o).next(function(_){return n.ze.setTargetsMetadata(o,o.currentSequenceNumber,r)});c.push(m)}return ln.waitFor(c).next(function(){return u.apply(o)}).next(function(){return n.Qn.vn(o,d)}).next(function(){return d})}).then(function(o){return n.Un=a,o})}function vS(i,s,n,r,a){var o=ta();return n.forEach(function(u){return o=o.add(u)}),s.getEntries(i,o).next(function(u){var c=ea();return n.forEach(function(d,m){var _=u.get(d),b=(null==a?void 0:a.get(d))||r;m.isNoDocument()&&m.version.isEqual(Ar.min())?(s.removeEntry(d,b),c=c.insert(d,m)):!_.isValidDocument()||m.version.compareTo(_.version)>0||0===m.version.compareTo(_.version)&&_.hasPendingWrites?(s.addEntry(m,b),c=c.insert(d,m)):wn("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",m.version)}),c})}function Q1(i,s){var n=En(i);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return void 0===s&&(s=-1),n.In.getNextMutationBatchAfterBatchId(r,s)})}function Rp(i,s){var n=En(i);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var a;return n.ze.getTargetData(r,s).next(function(o){return o?ln.resolve(a=o):n.ze.allocateTargetId(r).next(function(u){return a=new ub(s,u,0,r.currentSequenceNumber),n.ze.addTargetData(r,a).next(function(){return a})})})}).then(function(r){var a=n.Un.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Un=n.Un.insert(r.targetId,r),n.qn.set(s,r.targetId)),r})}function Pp(i,s,n){return pS.apply(this,arguments)}function pS(){return(pS=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o,u;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=En(s),o=a.Un.get(n),u=r?"readwrite":"readwrite-primary",d.prev=1,d.t0=r,d.t0){d.next=6;break}return d.next=6,a.persistence.runTransaction("Release target",u,function(m){return a.persistence.referenceDelegate.removeTarget(m,o)});case 6:d.next=13;break;case 8:if(d.prev=8,d.t1=d.catch(1),Mp(d.t1)){d.next=12;break}throw d.t1;case 12:wn("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(d.t1));case 13:a.Un=a.Un.remove(n),a.qn.delete(o.target);case 14:case"end":return d.stop()}},i,null,[[1,8]])}))).apply(this,arguments)}function Op(i,s,n){var r=En(i),a=Ar.min(),o=ta();return r.persistence.runTransaction("Execute query","readonly",function(u){return(c=r,d=u,m=hl(s),_=En(c),b=_.qn.get(m),void 0!==b?ln.resolve(_.Un.get(b)):_.ze.getTargetData(d,m)).next(function(c){if(c)return a=c.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(u,c.targetId).next(function(d){o=d})}).next(function(){return r.Bn.getDocumentsMatchingQuery(u,s,n?a:Ar.min(),n?o:ta())}).next(function(c){return{documents:c,Gn:o}});var c,d,m,_,b})}function J1(i,s){var n=En(i),r=En(n.ze),a=n.Un.get(s);return a?Promise.resolve(a.target):n.persistence.runTransaction("Get target data","readonly",function(o){return r.Et(o,s).next(function(u){return u?u.target:null})})}function mS(i){var s=En(i);return s.persistence.runTransaction("Get new document changes","readonly",function(n){return a=n,o=s.Kn,u=En(s.jn),c=ea(),d=xp(o),m=Cf(a),_=IDBKeyRange.lowerBound(d,!0),m.Kt({index:us.readTimeIndex,range:_},function(b,E){var T=eS(u.N,E);c=c.insert(T.key,T),d=E.readTime}).next(function(){return{Tn:c,readTime:Cu(d)}});var a,o,u,c,d,m,_}).then(function(n){var r=n.Tn;return s.Kn=n.readTime,r})}function SN(i){return gS.apply(this,arguments)}function gS(){return(gS=(0,Ut.Z)(Ze().mark(function i(s){var n;return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=En(s),a.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",function(o){return c=Cf(o),d=Ar.min(),c.Kt({index:us.readTimeIndex,reverse:!0},function(m,_,b){_.readTime&&(d=Cu(_.readTime)),b.done()}).next(function(){return d});var c,d}).then(function(o){n.Kn=o}));case 2:case"end":return a.stop()}},i)}))).apply(this,arguments)}function TN(i,s,n,r){return yS.apply(this,arguments)}function yS(){return(yS=(0,Ut.Z)(Ze().mark(function i(s,n,r,a){var o,u,c,d,m,_,b,E,T,I;return Ze().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:o=En(s),u=ta(),c=ea(),d=FC(),m=(0,Re.Z)(r);try{for(m.s();!(_=m.n()).done;)E=n.zn((b=_.value).metadata.name),b.document&&(u=u.add(E)),c=c.insert(E,n.Hn(b)),d=d.insert(E,n.Jn(b.metadata.readTime))}catch(U){m.e(U)}finally{m.f()}return T=o.jn.newChangeBuffer({trackRemovals:!0}),W.next=7,Rp(o,hl(zd(Wr.fromString("__bundle__/docs/".concat(U=a)))));case 7:return I=W.sent,W.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",function(U){return vS(U,T,c,Ar.min(),d).next(function(H){return T.apply(U),H}).next(function(H){return o.ze.removeMatchingKeysForTargetId(U,I.targetId).next(function(){return o.ze.addMatchingKeys(U,u,I.targetId)}).next(function(){return o.Qn.vn(U,H)}).next(function(){return H})})}));case 9:case"end":return W.stop()}var U},i)}))).apply(this,arguments)}function MN(i,s){return _S.apply(this,arguments)}function _S(){return(_S=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o,u=arguments;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:ta(),d.next=3,Rp(s,hl(lb(n.bundledQuery)));case 3:return a=d.sent,o=En(s),d.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",function(m){var _=Ws(n.readTime);if(a.snapshotVersion.compareTo(_)>=0)return o.Je.saveNamedQuery(m,n);var b=a.withResumeToken(ao.EMPTY_BYTE_STRING,_);return o.Un=o.Un.insert(b.targetId,b),o.ze.updateTargetData(m,b).next(function(){return o.ze.removeMatchingKeysForTargetId(m,a.targetId)}).next(function(){return o.ze.addMatchingKeys(m,r,a.targetId)}).next(function(){return o.Je.saveNamedQuery(m,n)})}));case 6:case"end":return d.stop()}},i)}))).apply(this,arguments)}var AN=function(){function i(s){(0,M.Z)(this,i),this.N=s,this.Yn=new Map,this.Xn=new Map}return(0,D.Z)(i,[{key:"getBundleMetadata",value:function(n,r){return ln.resolve(this.Yn.get(r))}},{key:"saveBundleMetadata",value:function(n,r){var a;return this.Yn.set(r.id,{id:(a=r).id,version:a.version,createTime:Ws(a.createTime)}),ln.resolve()}},{key:"getNamedQuery",value:function(n,r){return ln.resolve(this.Xn.get(r))}},{key:"saveNamedQuery",value:function(n,r){return this.Xn.set(r.name,{name:(a=r).name,query:lb(a.bundledQuery),readTime:Ws(a.readTime)}),ln.resolve();var a}}]),i}(),bS=function(){function i(){(0,M.Z)(this,i),this.Zn=new js(qs.ts),this.es=new js(qs.ns)}return(0,D.Z)(i,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(n,r){var a=new qs(n,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}},{key:"ss",value:function(n,r){var a=this;n.forEach(function(o){return a.addReference(o,r)})}},{key:"removeReference",value:function(n,r){this.rs(new qs(n,r))}},{key:"os",value:function(n,r){var a=this;n.forEach(function(o){return a.removeReference(o,r)})}},{key:"cs",value:function(n){var r=this,a=new fr(new Wr([])),o=new qs(a,n),u=new qs(a,n+1),c=[];return this.es.forEachInRange([o,u],function(d){r.rs(d),c.push(d.key)}),c}},{key:"us",value:function(){var n=this;this.Zn.forEach(function(r){return n.rs(r)})}},{key:"rs",value:function(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}},{key:"hs",value:function(n){var r=new fr(new Wr([])),a=new qs(r,n),o=new qs(r,n+1),u=ta();return this.es.forEachInRange([a,o],function(c){u=u.add(c.key)}),u}},{key:"containsKey",value:function(n){var r=new qs(n,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&n.isEqual(a.key)}}]),i}(),qs=function(){function i(s,n){(0,M.Z)(this,i),this.key=s,this.ls=n}return(0,D.Z)(i,null,[{key:"ts",value:function(n,r){return fr.comparator(n.key,r.key)||Jr(n.ls,r.ls)}},{key:"ns",value:function(n,r){return Jr(n.ls,r.ls)||fr.comparator(n.key,r.key)}}]),i}(),eI=function(){function i(s,n){(0,M.Z)(this,i),this.Ht=s,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new js(qs.ts)}return(0,D.Z)(i,[{key:"checkEmpty",value:function(n){return ln.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(n,r,a,o){var u=this.fs;this.fs++;var c=new JC(u,r,a,o);this.In.push(c);var m,d=(0,Re.Z)(o);try{for(d.s();!(m=d.n()).done;){var _=m.value;this.ds=this.ds.add(new qs(_.key,u)),this.Ht.addToCollectionParentIndex(n,_.key.path.popLast())}}catch(b){d.e(b)}finally{d.f()}return ln.resolve(c)}},{key:"lookupMutationBatch",value:function(n,r){return ln.resolve(this.ws(r))}},{key:"getNextMutationBatchAfterBatchId",value:function(n,r){var o=this._s(r+1),u=o<0?0:o;return ln.resolve(this.In.length>u?this.In[u]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ln.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(n){return ln.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(n,r){var a=this,o=new qs(r,0),u=new qs(r,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([o,u],function(d){var m=a.ws(d.ls);c.push(m)}),ln.resolve(c)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(n,r){var a=this,o=new js(Jr);return r.forEach(function(u){var c=new qs(u,0),d=new qs(u,Number.POSITIVE_INFINITY);a.ds.forEachInRange([c,d],function(m){o=o.add(m.ls)})}),ln.resolve(this.gs(o))}},{key:"getAllMutationBatchesAffectingQuery",value:function(n,r){var a=r.path,o=a.length+1,u=a;fr.isDocumentKey(u)||(u=u.child(""));var c=new qs(new fr(u),0),d=new js(Jr);return this.ds.forEachWhile(function(m){var _=m.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(d=d.add(m.ls)),!0)},c),ln.resolve(this.gs(d))}},{key:"gs",value:function(n){var r=this,a=[];return n.forEach(function(o){var u=r.ws(o);null!==u&&a.push(u)}),a}},{key:"removeMutationBatch",value:function(n,r){var a=this;Ir(0===this.ys(r.batchId,"removed")),this.In.shift();var o=this.ds;return ln.forEach(r.mutations,function(u){var c=new qs(u.key,r.batchId);return o=o.delete(c),a.referenceDelegate.markPotentiallyOrphaned(n,u.key)}).next(function(){a.ds=o})}},{key:"te",value:function(n){}},{key:"containsKey",value:function(n,r){var a=new qs(r,0),o=this.ds.firstAfterOrEqual(a);return ln.resolve(r.isEqual(o&&o.key))}},{key:"performConsistencyCheck",value:function(n){return ln.resolve()}},{key:"ys",value:function(n,r){return this._s(n)}},{key:"_s",value:function(n){return 0===this.In.length?0:n-this.In[0].batchId}},{key:"ws",value:function(n){var r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}]),i}(),xN=function(){function i(s,n){(0,M.Z)(this,i),this.Ht=s,this.ps=n,this.docs=new Co(fr.comparator),this.size=0}return(0,D.Z)(i,[{key:"addEntry",value:function(n,r,a){var o=r.key,u=this.docs.get(o),c=u?u.size:0,d=this.ps(r);return this.docs=this.docs.insert(o,{document:r.clone(),size:d,readTime:a}),this.size+=d-c,this.Ht.addToCollectionParentIndex(n,o.path.popLast())}},{key:"removeEntry",value:function(n){var r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}},{key:"getEntry",value:function(n,r){var a=this.docs.get(r);return ln.resolve(a?a.document.clone():Eo.newInvalidDocument(r))}},{key:"getEntries",value:function(n,r){var a=this,o=ea();return r.forEach(function(u){var c=a.docs.get(u);o=o.insert(u,c?c.document.clone():Eo.newInvalidDocument(u))}),ln.resolve(o)}},{key:"getDocumentsMatchingQuery",value:function(n,r,a){for(var o=ea(),u=new fr(r.path.child("")),c=this.docs.getIteratorFrom(u);c.hasNext();){var d=c.getNext(),_=d.value,b=_.document,E=_.readTime;if(!r.path.isPrefixOf(d.key.path))break;E.compareTo(a)<=0||Gd(r,b)&&(o=o.insert(b.key,b.clone()))}return ln.resolve(o)}},{key:"Es",value:function(n,r){return ln.forEach(this.docs,function(a){return r(a)})}},{key:"newChangeBuffer",value:function(n){return new IN(this)}},{key:"getSize",value:function(n){return ln.resolve(this.size)}}]),i}(),IN=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).Se=r,a}return(0,D.Z)(n,[{key:"applyChanges",value:function(a){var o=this,u=[];return this.changes.forEach(function(c,d){d.document.isValidDocument()?u.push(o.Se.addEntry(a,d.document,o.getReadTime(c))):o.Se.removeEntry(c)}),ln.waitFor(u)}},{key:"getFromCache",value:function(a,o){return this.Se.getEntry(a,o)}},{key:"getAllFromCache",value:function(a,o){return this.Se.getEntries(a,o)}}]),n}(lS),tI=function(){function i(s){(0,M.Z)(this,i),this.persistence=s,this.Ts=new dy(function(n){return qg(n)},vC),this.lastRemoteSnapshotVersion=Ar.min(),this.highestTargetId=0,this.Is=0,this.As=new bS,this.targetCount=0,this.Rs=cb.se()}return(0,D.Z)(i,[{key:"forEachTarget",value:function(n,r){return this.Ts.forEach(function(a,o){return r(o)}),ln.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(n){return ln.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(n){return ln.resolve(this.Is)}},{key:"allocateTargetId",value:function(n){return this.highestTargetId=this.Rs.next(),ln.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(n,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Is&&(this.Is=r),ln.resolve()}},{key:"ae",value:function(n){this.Ts.set(n.target,n);var r=n.targetId;r>this.highestTargetId&&(this.Rs=new cb(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}},{key:"addTargetData",value:function(n,r){return this.ae(r),this.targetCount+=1,ln.resolve()}},{key:"updateTargetData",value:function(n,r){return this.ae(r),ln.resolve()}},{key:"removeTargetData",value:function(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,ln.resolve()}},{key:"removeTargets",value:function(n,r,a){var o=this,u=0,c=[];return this.Ts.forEach(function(d,m){m.sequenceNumber<=r&&null===a.get(m.targetId)&&(o.Ts.delete(d),c.push(o.removeMatchingKeysForTargetId(n,m.targetId)),u++)}),ln.waitFor(c).next(function(){return u})}},{key:"getTargetCount",value:function(n){return ln.resolve(this.targetCount)}},{key:"getTargetData",value:function(n,r){var a=this.Ts.get(r)||null;return ln.resolve(a)}},{key:"addMatchingKeys",value:function(n,r,a){return this.As.ss(r,a),ln.resolve()}},{key:"removeMatchingKeys",value:function(n,r,a){this.As.os(r,a);var o=this.persistence.referenceDelegate,u=[];return o&&r.forEach(function(c){u.push(o.markPotentiallyOrphaned(n,c))}),ln.waitFor(u)}},{key:"removeMatchingKeysForTargetId",value:function(n,r){return this.As.cs(r),ln.resolve()}},{key:"getMatchingKeysForTargetId",value:function(n,r){var a=this.As.hs(r);return ln.resolve(a)}},{key:"containsKey",value:function(n,r){return ln.resolve(this.As.containsKey(r))}}]),i}(),DN=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.bs={},this.Le=new io(0),this.Be=!1,this.Be=!0,this.referenceDelegate=s(this),this.ze=new tI(this),this.Ht=new dN,this.He=new xN(this.Ht,function(a){return r.referenceDelegate.Ps(a)}),this.N=new sy(n),this.Je=new AN(this.N)}return(0,D.Z)(i,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(n){var r=this.bs[n.toKey()];return r||(r=new eI(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(n,r,a){var o=this;wn("MemoryPersistence","Starting transaction:",n);var u=new RN(this.Le.next());return this.referenceDelegate.vs(),a(u).next(function(c){return o.referenceDelegate.Vs(u).next(function(){return c})}).toPromise().then(function(c){return u.raiseOnCommittedEvent(),c})}},{key:"Ss",value:function(n,r){return ln.or(Object.values(this.bs).map(function(a){return function(){return a.containsKey(n,r)}}))}}]),i}(),RN=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).currentSequenceNumber=r,a}return n}(sb),PN=function(){function i(s){(0,M.Z)(this,i),this.persistence=s,this.Ds=new bS,this.Cs=null}return(0,D.Z)(i,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw ar()}},{key:"addReference",value:function(n,r,a){return this.Ds.addReference(a,r),this.xs.delete(a.toString()),ln.resolve()}},{key:"removeReference",value:function(n,r,a){return this.Ds.removeReference(a,r),this.xs.add(a.toString()),ln.resolve()}},{key:"markPotentiallyOrphaned",value:function(n,r){return this.xs.add(r.toString()),ln.resolve()}},{key:"removeTarget",value:function(n,r){var a=this;this.Ds.cs(r.targetId).forEach(function(u){return a.xs.add(u.toString())});var o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(n,r.targetId).next(function(u){u.forEach(function(c){return a.xs.add(c.toString())})}).next(function(){return o.removeTargetData(n,r)})}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(n){var r=this,a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ln.forEach(this.xs,function(o){var u=fr.fromPath(o);return r.ks(n,u).next(function(c){c||a.removeEntry(u)})}).next(function(){return r.Cs=null,a.apply(n)})}},{key:"updateLimboDocument",value:function(n,r){var a=this;return this.ks(n,r).next(function(o){o?a.xs.delete(r.toString()):a.xs.add(r.toString())})}},{key:"Ps",value:function(n){return 0}},{key:"ks",value:function(n,r){var a=this;return ln.or([function(){return ln.resolve(a.Ds.containsKey(r))},function(){return a.persistence.getTargetCache().containsKey(n,r)},function(){return a.persistence.Ss(n,r)}])}}],[{key:"Ns",value:function(n){return new i(n)}}]),i}();function vb(i,s){return"firestore_clients_".concat(i,"_").concat(s)}function pb(i,s,n){var r="firestore_mutations_".concat(i,"_").concat(n);return s.isAuthenticated()&&(r+="_".concat(s.uid)),r}function mb(i,s){return"firestore_targets_".concat(i,"_").concat(s)}var gb=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.user=s,this.batchId=n,this.state=r,this.error=a}return(0,D.Z)(i,[{key:"Os",value:function(){var n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}],[{key:"$s",value:function(n,r,a){var u,o=JSON.parse(a),c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(u=new en(o.error.code,o.error.message)),c?new i(n,r,o.state,u):(ys("SharedClientState","Failed to parse mutation state for ID '".concat(r,"': ").concat(a)),null)}}]),i}(),wS=function(){function i(s,n,r){(0,M.Z)(this,i),this.targetId=s,this.state=n,this.error=r}return(0,D.Z)(i,[{key:"Os",value:function(){var n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}],[{key:"$s",value:function(n,r){var o,a=JSON.parse(r),u="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return u&&a.error&&(u="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(o=new en(a.error.code,a.error.message)),u?new i(n,a.state,o):(ys("SharedClientState","Failed to parse target state for ID '".concat(n,"': ").concat(r)),null)}}]),i}(),nI=function(){function i(s,n){(0,M.Z)(this,i),this.clientId=s,this.activeTargetIds=n}return(0,D.Z)(i,null,[{key:"$s",value:function(n,r){for(var a=JSON.parse(r),o="object"==typeof a&&a.activeTargetIds instanceof Array,u=wf(),c=0;o&&c<a.activeTargetIds.length;++c)o=oC(a.activeTargetIds[c]),u=u.add(a.activeTargetIds[c]);return o?new i(n,u):(ys("SharedClientState","Failed to parse client data for instance '".concat(n,"': ").concat(r)),null)}}]),i}(),kS=function(){function i(s,n){(0,M.Z)(this,i),this.clientId=s,this.onlineState=n}return(0,D.Z)(i,null,[{key:"$s",value:function(n){var r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new i(r.clientId,r.onlineState):(ys("SharedClientState","Failed to parse online state: ".concat(n)),null)}}]),i}(),ES=function(){function i(){(0,M.Z)(this,i),this.activeTargetIds=wf()}return(0,D.Z)(i,[{key:"Fs",value:function(n){this.activeTargetIds=this.activeTargetIds.add(n)}},{key:"Ms",value:function(n){this.activeTargetIds=this.activeTargetIds.delete(n)}},{key:"Os",value:function(){var n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}]),i}(),yb=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.window=s,this.Oe=n,this.persistenceKey=r,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Co(Jr),this.started=!1,this.Ks=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.js=vb(this.persistenceKey,this.Ls),this.Qs="firestore_sequence_number_".concat(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new ES),this.Ws=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.Hs="firestore_online_state_".concat(this.persistenceKey),this.Js=function(c){return"firestore_bundle_loaded_".concat(c)}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}return(0,D.Z)(i,[{key:"start",value:(s=(0,Ut.Z)(Ze().mark(function r(){var u,c,d,m,_,b,E,T,I,a=this;return Ze().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.syncEngine.pn();case 2:u=(0,Re.Z)(U.sent),U.prev=4,u.s();case 6:if((c=u.n()).done){U.next=14;break}if((d=c.value)!==this.Ls){U.next=10;break}return U.abrupt("continue",12);case 10:(m=this.getItem(vb(this.persistenceKey,d)))&&(_=nI.$s(d,m))&&(this.qs=this.qs.insert(_.clientId,_));case 12:U.next=6;break;case 14:U.next=19;break;case 16:U.prev=16,U.t0=U.catch(4),u.e(U.t0);case 19:return U.prev=19,u.f(),U.finish(19);case 22:this.Ys(),(b=this.storage.getItem(this.Hs))&&(E=this.Xs(b))&&this.Zs(E),T=(0,Re.Z)(this.Ks);try{for(T.s();!(I=T.n()).done;)this.Us(I.value)}catch(H){T.e(H)}finally{T.f()}this.Ks=[],this.window.addEventListener("pagehide",function(){return a.shutdown()}),this.started=!0;case 28:case"end":return U.stop()}},r,this,[[4,16,19,22]])})),function(){return s.apply(this,arguments)})},{key:"writeSequenceNumber",value:function(n){this.setItem(this.Qs,JSON.stringify(n))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(n){var r=!1;return this.qs.forEach(function(a,o){o.activeTargetIds.has(n)&&(r=!0)}),r}},{key:"addPendingMutation",value:function(n){this.ei(n,"pending")}},{key:"updateMutationState",value:function(n,r,a){this.ei(n,r,a),this.ni(n)}},{key:"addLocalQueryTarget",value:function(n){var r="not-current";if(this.isActiveQueryTarget(n)){var a=this.storage.getItem(mb(this.persistenceKey,n));if(a){var o=wS.$s(n,a);o&&(r=o.state)}}return this.si.Fs(n),this.Ys(),r}},{key:"removeLocalQueryTarget",value:function(n){this.si.Ms(n),this.Ys()}},{key:"isLocalQueryTarget",value:function(n){return this.si.activeTargetIds.has(n)}},{key:"clearQueryState",value:function(n){this.removeItem(mb(this.persistenceKey,n))}},{key:"updateQueryState",value:function(n,r,a){this.ii(n,r,a)}},{key:"handleUserChange",value:function(n,r,a){var o=this;r.forEach(function(u){o.ni(u)}),this.currentUser=n,a.forEach(function(u){o.addPendingMutation(u)})}},{key:"setOnlineState",value:function(n){this.ri(n)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(n){var r=this.storage.getItem(n);return wn("SharedClientState","READ",n,r),r}},{key:"setItem",value:function(n,r){wn("SharedClientState","SET",n,r),this.storage.setItem(n,r)}},{key:"removeItem",value:function(n){wn("SharedClientState","REMOVE",n),this.storage.removeItem(n)}},{key:"Us",value:function(n){var r=this,a=n;if(a.storageArea===this.storage){if(wn("SharedClientState","EVENT",a.key,a.newValue),a.key===this.js)return void ys("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ut.Z)(Ze().mark(function o(){var u,c,d,m,_,b;return Ze().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!r.started){T.next=41;break}if(null===a.key){T.next=39;break}if(!r.Ws.test(a.key)){T.next=11;break}if(null!=a.newValue){T.next=6;break}return u=r.ai(a.key),T.abrupt("return",r.ci(u,null));case 6:if(!(c=r.ui(a.key,a.newValue))){T.next=9;break}return T.abrupt("return",r.ci(c.clientId,c));case 9:T.next=39;break;case 11:if(!r.Gs.test(a.key)){T.next=18;break}if(null===a.newValue){T.next=16;break}if(!(d=r.hi(a.key,a.newValue))){T.next=16;break}return T.abrupt("return",r.li(d));case 16:T.next=39;break;case 18:if(!r.zs.test(a.key)){T.next=25;break}if(null===a.newValue){T.next=23;break}if(!(m=r.fi(a.key,a.newValue))){T.next=23;break}return T.abrupt("return",r.di(m));case 23:T.next=39;break;case 25:if(a.key!==r.Hs){T.next=32;break}if(null===a.newValue){T.next=30;break}if(!(_=r.Xs(a.newValue))){T.next=30;break}return T.abrupt("return",r.Zs(_));case 30:T.next=39;break;case 32:if(a.key!==r.Qs){T.next=37;break}(b=function(I){var N=io.T;if(null!=I)try{var W=JSON.parse(I);Ir("number"==typeof W),N=W}catch(U){ys("SharedClientState","Failed to read sequence number from WebStorage",U)}return N}(a.newValue))!==io.T&&r.sequenceNumberHandler(b),T.next=39;break;case 37:if(a.key!==r.Js){T.next=39;break}return T.abrupt("return",r.syncEngine.wi());case 39:T.next=42;break;case 41:r.Ks.push(a);case 42:case"end":return T.stop()}},o)})))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(n,r,a){var o=new gb(this.currentUser,n,r,a),u=pb(this.persistenceKey,this.currentUser,n);this.setItem(u,o.Os())}},{key:"ni",value:function(n){var r=pb(this.persistenceKey,this.currentUser,n);this.removeItem(r)}},{key:"ri",value:function(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}},{key:"ii",value:function(n,r,a){var o=mb(this.persistenceKey,n),u=new wS(n,r,a);this.setItem(o,u.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ai",value:function(n){var r=this.Ws.exec(n);return r?r[1]:null}},{key:"ui",value:function(n,r){var a=this.ai(n);return nI.$s(a,r)}},{key:"hi",value:function(n,r){var a=this.Gs.exec(n),o=Number(a[1]);return gb.$s(new no(void 0!==a[2]?a[2]:null),o,r)}},{key:"fi",value:function(n,r){var a=this.zs.exec(n),o=Number(a[1]);return wS.$s(o,r)}},{key:"Xs",value:function(n){return kS.$s(n)}},{key:"li",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(a){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a.user.uid!==this.currentUser.uid){u.next=2;break}return u.abrupt("return",this.syncEngine._i(a.batchId,a.state,a.error));case 2:wn("SharedClientState","Ignoring mutation for non-active user ".concat(a.user.uid));case 3:case"end":return u.stop()}},r,this)}));return function(r){return s.apply(this,arguments)}}()},{key:"di",value:function(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}},{key:"ci",value:function(n,r){var a=this,o=r?this.qs.insert(n,r):this.qs.remove(n),u=this.ti(this.qs),c=this.ti(o),d=[],m=[];return c.forEach(function(_){u.has(_)||d.push(_)}),u.forEach(function(_){c.has(_)||m.push(_)}),this.syncEngine.gi(d,m).then(function(){a.qs=o})}},{key:"Zs",value:function(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}},{key:"ti",value:function(n){var r=wf();return n.forEach(function(a,o){r=r.unionWith(o.activeTargetIds)}),r}}],[{key:"bt",value:function(n){return!(!n||!n.localStorage)}}]),i;var s}(),rI=function(){function i(){(0,M.Z)(this,i),this.yi=new ES,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,D.Z)(i,[{key:"addPendingMutation",value:function(n){}},{key:"updateMutationState",value:function(n,r,a){}},{key:"addLocalQueryTarget",value:function(n){return this.yi.Fs(n),this.pi[n]||"not-current"}},{key:"updateQueryState",value:function(n,r,a){this.pi[n]=r}},{key:"removeLocalQueryTarget",value:function(n){this.yi.Ms(n)}},{key:"isLocalQueryTarget",value:function(n){return this.yi.activeTargetIds.has(n)}},{key:"clearQueryState",value:function(n){delete this.pi[n]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(n){return this.yi.activeTargetIds.has(n)}},{key:"start",value:function(){return this.yi=new ES,Promise.resolve()}},{key:"handleUserChange",value:function(n,r,a){}},{key:"setOnlineState",value:function(n){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(n){}},{key:"notifyBundleLoaded",value:function(){}}]),i}(),iI=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"Ei",value:function(n){}},{key:"shutdown",value:function(){}}]),i}(),aI=function(){function i(){var s=this;(0,M.Z)(this,i),this.Ti=function(){return s.Ii()},this.Ai=function(){return s.Ri()},this.bi=[],this.Pi()}return(0,D.Z)(i,[{key:"Ei",value:function(n){this.bi.push(n)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){wn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var r,n=(0,Re.Z)(this.bi);try{for(n.s();!(r=n.n()).done;)(0,r.value)(0)}catch(o){n.e(o)}finally{n.f()}}},{key:"Ri",value:function(){wn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var r,n=(0,Re.Z)(this.bi);try{for(n.s();!(r=n.n()).done;)(0,r.value)(1)}catch(o){n.e(o)}finally{n.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),i}(),sI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},rV=function(){function i(s){(0,M.Z)(this,i),this.vi=s.vi,this.Vi=s.Vi}return(0,D.Z)(i,[{key:"Si",value:function(n){this.Di=n}},{key:"Ci",value:function(n){this.Ni=n}},{key:"onMessage",value:function(n){this.xi=n}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(n){this.vi(n)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(n){this.Ni(n)}},{key:"Oi",value:function(n){this.xi(n)}}]),i}(),ON=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).forceLongPolling=r.forceLongPolling,a.autoDetectLongPolling=r.autoDetectLongPolling,a.useFetchStreams=r.useFetchStreams,a}return(0,D.Z)(n,[{key:"qi",value:function(a,o,u,c){return new Promise(function(d,m){var _=new p1;_.listenOnce(NL.COMPLETE,function(){try{switch(_.getLastErrorCode()){case nC.NO_ERROR:var E=_.getResponseJson();wn("Connection","XHR received:",JSON.stringify(E)),d(E);break;case nC.TIMEOUT:wn("Connection",'RPC "'+a+'" timed out'),m(new en(Lt.DEADLINE_EXCEEDED,"Request time out"));break;case nC.HTTP_ERROR:var T=_.getStatus();if(wn("Connection",'RPC "'+a+'" failed with status:',T,"response text:",_.getResponseText()),T>0){var I=_.getResponseJson().error;if(I&&I.status&&I.message){var N=(U=I.status.toLowerCase().replace(/_/g,"-"),Object.values(Lt).indexOf(U)>=0?U:Lt.UNKNOWN);m(new en(N,I.message))}else m(new en(Lt.UNKNOWN,"Server responded with status "+_.getStatus()))}else m(new en(Lt.UNAVAILABLE,"Connection failed."));break;default:ar()}}finally{wn("Connection",'RPC "'+a+'" completed.')}var U});var b=JSON.stringify(c);_.send(o,"POST",b,u,15)})}},{key:"ji",value:function(a,o){var u=[this.Fi,"/","google.firestore.v1.Firestore","/",a,"/channel"],c=YU(),d=LL(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new rC({})),this.Ui(m.initMessageHeaders,o),(0,Me.uI)()||(0,Me.b$)()||(0,Me.d)()||(0,Me.w1)()||(0,Me.Mn)()||(0,Me.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");var _=u.join("");wn("Connection","Creating WebChannel: "+_,m);var b=c.createWebChannel(_,m),E=!1,T=!1,I=new rV({vi:function(U){T?wn("Connection","Not sending because WebChannel is closed:",U):(E||(wn("Connection","Opening WebChannel transport."),b.open(),E=!0),wn("Connection","WebChannel sending:",U),b.send(U))},Vi:function(){return b.close()}}),N=function(U,H,te){U.listen(H,function(ue){try{te(ue)}catch(le){setTimeout(function(){throw le},0)}})};return N(b,z0.EventType.OPEN,function(){T||wn("Connection","WebChannel transport opened.")}),N(b,z0.EventType.CLOSE,function(){T||(T=!0,wn("Connection","WebChannel transport closed"),I.$i())}),N(b,z0.EventType.ERROR,function(W){T||(T=!0,ip("Connection","WebChannel transport errored:",W),I.$i(new en(Lt.UNAVAILABLE,"The operation could not be completed")))}),N(b,z0.EventType.MESSAGE,function(W){var U;if(!T){var H=W.data[0];Ir(!!H);var ue=H.error||(null===(U=H[0])||void 0===U?void 0:U.error);if(ue){wn("Connection","WebChannel received error:",ue);var le=ue.status,he=function(ye){var Ue=_s[ye];if(void 0!==Ue)return PC(Ue)}(le),se=ue.message;void 0===he&&(he=Lt.INTERNAL,se="Unknown error status: "+le+" with message "+ue.message),T=!0,I.$i(new en(he,se)),b.close()}else wn("Connection","WebChannel received:",H),I.Oi(H)}}),N(d,KU.STAT_EVENT,function(W){W.stat===FL.PROXY?wn("Connection","Detected buffering proxy"):W.stat===FL.NOPROXY&&wn("Connection","Detected no buffering proxy")}),setTimeout(function(){I.ki()},0),I}}]),n}(function(){function i(s){(0,M.Z)(this,i),this.databaseInfo=s,this.databaseId=s.databaseId,this.Fi=(s.ssl?"https":"http")+"://"+s.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,D.Z)(i,[{key:"Li",value:function(n,r,a,o){var u=this.Bi(n,r);wn("RestConnection","Sending: ",u,a);var c={};return this.Ui(c,o),this.qi(n,u,c,a).then(function(d){return wn("RestConnection","Received: ",d),d},function(d){throw ip("RestConnection","".concat(n," failed with error: "),d,"url: ",u,"request:",a),d})}},{key:"Ki",value:function(n,r,a,o){return this.Li(n,r,a,o)}},{key:"Ui",value:function(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+zg,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(var a in r.authHeaders)r.authHeaders.hasOwnProperty(a)&&(n[a]=r.authHeaders[a])}},{key:"Bi",value:function(n,r){var a=sI[n];return"".concat(this.Fi,"/v1/").concat(r,":").concat(a)}}]),i}());function Lp(){return"undefined"!=typeof window?window:null}function CS(){return"undefined"!=typeof document?document:null}function my(i){return new Dc(i,!0)}var Np=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,M.Z)(this,i),this.Oe=s,this.timerId=n,this.Qi=r,this.Wi=a,this.Gi=o,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return(0,D.Z)(i,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(n){var r=this;this.cancel();var a=Math.floor(this.zi+this.Zi()),o=Math.max(0,Date.now()-this.Ji),u=Math.max(0,a-o);u>0&&wn("ExponentialBackoff","Backing off for ".concat(u," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(a," ms, last attempt: ").concat(o," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,u,function(){return r.Ji=Date.now(),n()}),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),i}(),oI=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.Oe=s,this.er=r,this.nr=a,this.credentialsProvider=o,this.listener=u,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Np(s,n)}return(0,D.Z)(i,[{key:"ar",value:function(){return 1===this.state||2===this.state||4===this.state}},{key:"cr",value:function(){return 2===this.state}},{key:"start",value:function(){3!==this.state?this.auth():this.ur()}},{key:"stop",value:(s=(0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.t0=this.ar(),!o.t0){o.next=4;break}return o.next=4,this.close(0);case 4:case"end":return o.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"hr",value:function(){this.state=0,this.rr.reset()}},{key:"lr",value:function(){var n=this;this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,function(){return n.dr()}))}},{key:"wr",value:function(n){this._r(),this.stream.send(n)}},{key:"dr",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.cr()){o.next=2;break}return o.abrupt("return",this.close(0));case 2:case"end":return o.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"_r",value:function(){this.ir&&(this.ir.cancel(),this.ir=null)}},{key:"close",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(a,o){return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==a?this.rr.reset():o&&o.code===Lt.RESOURCE_EXHAUSTED?(ys(o.toString()),ys("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):o&&o.code===Lt.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=a,c.next=8,this.listener.Ci(o);case 8:case"end":return c.stop()}},r,this)}));return function(r,a){return s.apply(this,arguments)}}()},{key:"mr",value:function(){}},{key:"auth",value:function(){var n=this;this.state=1;var r=this.gr(this.sr),a=this.sr;this.credentialsProvider.getToken().then(function(o){n.sr===a&&n.yr(o)},function(o){r(function(){var u=new en(Lt.UNKNOWN,"Fetching auth token failed: "+o.message);return n.pr(u)})})}},{key:"yr",value:function(n){var r=this,a=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(function(){a(function(){return r.state=2,r.listener.Si()})}),this.stream.Ci(function(o){a(function(){return r.pr(o)})}),this.stream.onMessage(function(o){a(function(){return r.onMessage(o)})})}},{key:"ur",value:function(){var n=this;this.state=4,this.rr.Xi((0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n.state=0,n.start();case 1:case"end":return o.stop()}},r)})))}},{key:"pr",value:function(n){return wn("PersistentStream","close with error: ".concat(n)),this.stream=null,this.close(3,n)}},{key:"gr",value:function(n){var r=this;return function(a){r.Oe.enqueueAndForget(function(){return r.sr===n?a():(wn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),i;var s}(),Fp=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c){var d;return(0,M.Z)(this,n),(d=s.call(this,r,"listen_stream_connection_backoff","listen_stream_idle",a,o,c)).N=u,d}return(0,D.Z)(n,[{key:"Er",value:function(a){return this.nr.ji("Listen",a)}},{key:"onMessage",value:function(a){this.rr.reset();var o=function(i,s){var n,Fe;if("targetChange"in s){var r="NO_CHANGE"===(Fe=s.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Fe?1:"REMOVE"===Fe?2:"CURRENT"===Fe?3:"RESET"===Fe?4:ar(),a=s.targetChange.targetIds||[],o=function(Fe,et){return Fe.D?(Ir(void 0===et||"string"==typeof et),ao.fromBase64String(et||"")):(Ir(void 0===et||et instanceof Uint8Array),ao.fromUint8Array(et||new Uint8Array))}(i,s.targetChange.resumeToken),u=s.targetChange.cause,c=u&&function(Fe){var et=void 0===Fe.code?Lt.UNKNOWN:PC(Fe.code);return new en(et,Fe.message||"")}(u);n=new UC(r,a,o,c||null)}else if("documentChange"in s){var d=s.documentChange,m=Rc(i,d.document.name),_=Ws(d.document.updateTime),b=new Gu({mapValue:{fields:d.document.fields}}),E=Eo.newFoundDocument(m,_,b);n=new Jg(d.targetIds||[],d.removedTargetIds||[],E.key,E)}else if("documentDelete"in s){var N=s.documentDelete,W=Rc(i,N.document),U=N.readTime?Ws(N.readTime):Ar.min(),H=Eo.newNoDocument(W,U);n=new Jg([],N.removedTargetIds||[],H.key,H)}else if("documentRemove"in s){var ue=s.documentRemove,le=Rc(i,ue.document);n=new Jg([],ue.removedTargetIds||[],le,null)}else{if(!("filter"in s))return ar();var se=s.filter,Ue=new x1(se.count||0);n=new R1(se.targetId,Ue)}return n}(this.N,a),u=function(c){if(!("targetChange"in c))return Ar.min();var d=c.targetChange;return d.targetIds&&d.targetIds.length?Ar.min():d.readTime?Ws(d.readTime):Ar.min()}(a);return this.listener.Tr(o,u)}},{key:"Ir",value:function(a){var c,d,m,_,o={};o.database=ny(this.N),o.addTarget=(c=this.N,(m=Y0(_=(d=a).target)?{documents:ab(c,_)}:{query:ry(c,_)}).targetId=d.targetId,d.resumeToken.approximateByteSize()>0?m.resumeToken=dl(c,d.resumeToken):d.snapshotVersion.compareTo(Ar.min())>0&&(m.readTime=ou(c,d.snapshotVersion.toTimestamp())),m);var u=function(i,s){var n=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ar()}}(0,s.purpose);return null==n?null:{"goog-listen-tags":n}}(0,a);u&&(o.labels=u),this.wr(o)}},{key:"Ar",value:function(a){var o={};o.database=ny(this.N),o.removeTarget=a,this.wr(o)}}]),n}(oI),LN=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c){var d;return(0,M.Z)(this,n),(d=s.call(this,r,"write_stream_connection_backoff","write_stream_idle",a,o,c)).N=u,d.Rr=!1,d}return(0,D.Z)(n,[{key:"br",get:function(){return this.Rr}},{key:"start",value:function(){this.Rr=!1,this.lastStreamToken=void 0,(0,_e.Z)((0,de.Z)(n.prototype),"start",this).call(this)}},{key:"mr",value:function(){this.Rr&&this.Pr([])}},{key:"Er",value:function(a){return this.nr.ji("Write",a)}},{key:"onMessage",value:function(a){if(Ir(!!a.streamToken),this.lastStreamToken=a.streamToken,this.Rr){this.rr.reset();var o=function(i,s){return i&&i.length>0?(Ir(void 0!==s),i.map(function(n){return a=s,(o=Ws((r=n).updateTime?r.updateTime:a)).isEqual(Ar.min())&&(o=Ws(a)),new M1(o,r.transformResults||[]);var r,a,o})):[]}(a.writeResults,a.commitTime),u=Ws(a.commitTime);return this.listener.vr(u,o)}return Ir(!a.writeResults||0===a.writeResults.length),this.Rr=!0,this.listener.Vr()}},{key:"Sr",value:function(){var a={};a.database=ny(this.N),this.wr(a)}},{key:"Pr",value:function(a){var o=this,u={streamToken:this.lastStreamToken,writes:a.map(function(c){return ib(o.N,c)})};this.wr(u)}}]),n}(oI),iV=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).credentials=r,u.nr=a,u.N=o,u.Dr=!1,u}return(0,D.Z)(n,[{key:"Cr",value:function(){if(this.Dr)throw new en(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(a,o,u){var c=this;return this.Cr(),this.credentials.getToken().then(function(d){return c.nr.Li(a,o,u,d)}).catch(function(d){throw"FirebaseError"===d.name?(d.code===Lt.UNAUTHENTICATED&&c.credentials.invalidateToken(),d):new en(Lt.UNKNOWN,d.toString())})}},{key:"Ki",value:function(a,o,u){var c=this;return this.Cr(),this.credentials.getToken().then(function(d){return c.nr.Ki(a,o,u,d)}).catch(function(d){throw"FirebaseError"===d.name?(d.code===Lt.UNAUTHENTICATED&&c.credentials.invalidateToken(),d):new en(Lt.UNKNOWN,d.toString())})}},{key:"terminate",value:function(){this.Dr=!0}}]),n}(function(){return function i(){(0,M.Z)(this,i)}}()),NN=function(){function i(s,n){(0,M.Z)(this,i),this.asyncQueue=s,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}return(0,D.Z)(i,[{key:"Or",value:function(){var n=this;0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return n.kr=null,n.Mr("Backend didn't respond within 10 seconds."),n.Fr("Offline"),Promise.resolve()}))}},{key:"Lr",value:function(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: ".concat(n.toString())),this.Fr("Offline")))}},{key:"set",value:function(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}},{key:"Fr",value:function(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}},{key:"Mr",value:function(n){var r="Could not reach Cloud Firestore backend. ".concat(n,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.$r?(ys(r),this.$r=!1):wn("OnlineStateTracker",r)}},{key:"Br",value:function(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}]),i}(),Kd=function i(s,n,r,a,o){var u=this;(0,M.Z)(this,i),this.localStore=s,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=o,this.Qr.Ei(function(c){r.enqueueAndForget((0,Ut.Z)(Ze().mark(function d(){return Ze().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(_.t0=Tf(u),!_.t0){_.next=5;break}return wn("RemoteStore","Restarting streams for network reachability change."),_.next=5,function(){var b=(0,Ut.Z)(Ze().mark(function E(T){var I;return Ze().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return(I=En(T)).Kr.add(4),W.next=4,Sf(I);case 4:return I.Wr.set("Unknown"),I.Kr.delete(4),W.next=8,Zp(I);case 8:case"end":return W.stop()}},E)}));return function(E){return b.apply(this,arguments)}}()(u);case 5:case"end":return _.stop()}},d)})))}),this.Wr=new NN(r,a)};function Zp(i){return uI.apply(this,arguments)}function uI(){return(uI=(0,Ut.Z)(Ze().mark(function i(s){var n,r,a;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!Tf(s)){u.next=18;break}n=(0,Re.Z)(s.jr),u.prev=2,n.s();case 4:if((r=n.n()).done){u.next=10;break}return a=r.value,u.next=8,a(!0);case 8:u.next=4;break;case 10:u.next=15;break;case 12:u.prev=12,u.t0=u.catch(2),n.e(u.t0);case 15:return u.prev=15,n.f(),u.finish(15);case 18:case"end":return u.stop()}},i,null,[[2,12,15,18]])}))).apply(this,arguments)}function Sf(i){return SS.apply(this,arguments)}function SS(){return(SS=(0,Ut.Z)(Ze().mark(function i(s){var n,r,a;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=(0,Re.Z)(s.jr),u.prev=1,n.s();case 3:if((r=n.n()).done){u.next=9;break}return a=r.value,u.next=7,a(!1);case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),n.e(u.t0);case 14:return u.prev=14,n.f(),u.finish(14);case 17:case"end":return u.stop()}},i,null,[[1,11,14,17]])}))).apply(this,arguments)}function _b(i,s){var n=En(i);n.qr.has(s.targetId)||(n.qr.set(s.targetId,s),gy(n)?MS(n):Vp(n).cr()&&TS(n,s))}function bb(i,s){var n=En(i),r=Vp(n);n.qr.delete(s),r.cr()&&lI(n,s),0===n.qr.size&&(r.cr()?r.lr():Tf(n)&&n.Wr.set("Unknown"))}function TS(i,s){i.Gr.Y(s.targetId),Vp(i).Ir(s)}function lI(i,s){i.Gr.Y(s),Vp(i).Ar(s)}function MS(i){i.Gr=new VC({getRemoteKeysForTarget:function(n){return i.remoteSyncer.getRemoteKeysForTarget(n)},Et:function(n){return i.qr.get(n)||null}}),Vp(i).start(),i.Wr.Or()}function gy(i){return Tf(i)&&!Vp(i).ar()&&i.qr.size>0}function Tf(i){return 0===En(i).Kr.size}function AS(i){i.Gr=void 0}function cI(i){return xS.apply(this,arguments)}function xS(){return(xS=(0,Ut.Z)(Ze().mark(function i(s){return Ze().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:s.qr.forEach(function(a,o){TS(s,a)});case 1:case"end":return r.stop()}},i)}))).apply(this,arguments)}function aV(i,s){return IS.apply(this,arguments)}function IS(){return(IS=(0,Ut.Z)(Ze().mark(function i(s,n){return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:AS(s),gy(s)?(s.Wr.Lr(n),MS(s)):s.Wr.set("Unknown");case 1:case"end":return a.stop()}},i)}))).apply(this,arguments)}function FN(i,s,n){return DS.apply(this,arguments)}function DS(){return(DS=(0,Ut.Z)(Ze().mark(function i(s,n,r){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s.Wr.set("Online"),!(n instanceof UC&&2===n.state&&n.cause)){u.next=13;break}return u.prev=1,u.next=4,function(){var c=(0,Ut.Z)(Ze().mark(function d(m,_){var b,E,T,I;return Ze().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:b=_.cause,E=(0,Re.Z)(_.targetIds),W.prev=2,E.s();case 4:if((T=E.n()).done){W.next=14;break}if(W.t0=m.qr.has(I=T.value),!W.t0){W.next=12;break}return W.next=10,m.remoteSyncer.rejectListen(I,b);case 10:m.qr.delete(I),m.Gr.removeTarget(I);case 12:W.next=4;break;case 14:W.next=19;break;case 16:W.prev=16,W.t1=W.catch(2),E.e(W.t1);case 19:return W.prev=19,E.f(),W.finish(19);case 22:case"end":return W.stop()}},d,null,[[2,16,19,22]])}));return function(d,m){return c.apply(this,arguments)}}()(s,n);case 4:u.next=11;break;case 6:return u.prev=6,u.t0=u.catch(1),wn("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),u.t0),u.next=11,yy(s,u.t0);case 11:u.next=29;break;case 13:if(n instanceof Jg?s.Gr.rt(n):n instanceof R1?s.Gr.ft(n):s.Gr.ct(n),r.isEqual(Ar.min())){u.next=29;break}return u.prev=14,u.next=17,db(s.localStore);case 17:if(u.t1=r.compareTo(u.sent)>=0,!u.t1){u.next=22;break}return u.next=22,function(c,d){var m=c.Gr._t(d);return m.targetChanges.forEach(function(_,b){if(_.resumeToken.approximateByteSize()>0){var E=c.qr.get(b);E&&c.qr.set(b,E.withResumeToken(_.resumeToken,d))}}),m.targetMismatches.forEach(function(_){var b=c.qr.get(_);if(b){c.qr.set(_,b.withResumeToken(ao.EMPTY_BYTE_STRING,b.snapshotVersion)),lI(c,_);var E=new ub(b.target,_,1,b.sequenceNumber);TS(c,E)}}),c.remoteSyncer.applyRemoteEvent(m)}(s,r);case 22:u.next=29;break;case 24:return u.prev=24,u.t2=u.catch(14),wn("RemoteStore","Failed to raise snapshot:",u.t2),u.next=29,yy(s,u.t2);case 29:case"end":return u.stop()}},i,null,[[1,6],[14,24]])}))).apply(this,arguments)}function yy(i,s,n){return wb.apply(this,arguments)}function wb(){return(wb=(0,Ut.Z)(Ze().mark(function i(s,n,r){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(Mp(n)){o.next=2;break}throw n;case 2:return s.Kr.add(1),o.next=5,Sf(s);case 5:s.Wr.set("Offline"),r||(r=function(){return db(s.localStore)}),s.asyncQueue.enqueueRetryable((0,Ut.Z)(Ze().mark(function u(){return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return wn("RemoteStore","Retrying IndexedDB access"),d.next=3,r();case 3:return s.Kr.delete(1),d.next=6,Zp(s);case 6:case"end":return d.stop()}},u)})));case 8:case"end":return o.stop()}},i)}))).apply(this,arguments)}function RS(i,s){return s().catch(function(n){return yy(i,n,s)})}function Bp(i){return PS.apply(this,arguments)}function PS(){return(PS=(0,Ut.Z)(Ze().mark(function i(s){var n,r,a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:n=En(s),r=Nh(n),a=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;case 2:if(!fI(n)){c.next=19;break}return c.prev=3,c.next=6,Q1(n.localStore,a);case 6:if(null!==(o=c.sent)){c.next=10;break}return 0===n.Ur.length&&r.lr(),c.abrupt("break",19);case 10:a=o.batchId,kb(n,o),c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(3),c.next=17,yy(n,c.t0);case 17:c.next=2;break;case 19:hI(n)&&OS(n);case 20:case"end":return c.stop()}},i,null,[[3,13]])}))).apply(this,arguments)}function fI(i){return Tf(i)&&i.Ur.length<10}function kb(i,s){i.Ur.push(s);var n=Nh(i);n.cr()&&n.br&&n.Pr(s.mutations)}function hI(i){return Tf(i)&&!Nh(i).ar()&&i.Ur.length>0}function OS(i){Nh(i).start()}function Eb(i){return Up.apply(this,arguments)}function Up(){return(Up=(0,Ut.Z)(Ze().mark(function i(s){return Ze().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:Nh(s).Sr();case 1:case"end":return r.stop()}},i)}))).apply(this,arguments)}function _y(i){return LS.apply(this,arguments)}function LS(){return(LS=(0,Ut.Z)(Ze().mark(function i(s){var n,r,a;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:n=Nh(s),r=(0,Re.Z)(s.Ur);try{for(r.s();!(a=r.n()).done;)n.Pr(a.value.mutations)}catch(d){r.e(d)}finally{r.f()}case 3:case"end":return c.stop()}},i)}))).apply(this,arguments)}function ZN(i,s,n){return dI.apply(this,arguments)}function dI(){return(dI=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=s.Ur.shift(),o=hN.from(a,n,r),c.next=3,RS(s,function(){return s.remoteSyncer.applySuccessfulWrite(o)});case 3:return c.next=5,Bp(s);case 5:case"end":return c.stop()}},i)}))).apply(this,arguments)}function BN(i,s){return NS.apply(this,arguments)}function NS(){return(NS=(0,Ut.Z)(Ze().mark(function i(s,n){return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.t0=n&&Nh(s).br,!a.t0){a.next=4;break}return a.next=4,function(){var o=(0,Ut.Z)(Ze().mark(function u(c,d){var m,_;return Ze().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!RC(_=d.code)||_===Lt.ABORTED){E.next=7;break}return m=c.Ur.shift(),Nh(c).hr(),E.next=5,RS(c,function(){return c.remoteSyncer.rejectFailedWrite(m.batchId,d)});case 5:return E.next=7,Bp(c);case 7:case"end":return E.stop()}},u)}));return function(u,c){return o.apply(this,arguments)}}()(s,n);case 4:hI(s)&&OS(s);case 5:case"end":return a.stop()}},i)}))).apply(this,arguments)}function FS(i,s){return ZS.apply(this,arguments)}function ZS(){return(ZS=(0,Ut.Z)(Ze().mark(function i(s,n){var r;return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=En(s),!n){o.next=7;break}return r.Kr.delete(2),o.next=5,Zp(r);case 5:o.next=13;break;case 7:if(o.t0=n,o.t0){o.next=13;break}return r.Kr.add(2),o.next=12,Sf(r);case 12:r.Wr.set("Unknown");case 13:case"end":return o.stop()}},i)}))).apply(this,arguments)}function Vp(i){return i.zr||(i.zr=(s=i.datastore,n=i.asyncQueue,r={Si:cI.bind(null,i),Ci:aV.bind(null,i),Tr:FN.bind(null,i)},(a=En(s)).Cr(),new Fp(n,a.nr,a.credentials,a.N,r)),i.jr.push(function(){var s=(0,Ut.Z)(Ze().mark(function n(r){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r){o.next=4;break}i.zr.hr(),gy(i)?MS(i):i.Wr.set("Unknown"),o.next=7;break;case 4:return o.next=6,i.zr.stop();case 6:AS(i);case 7:case"end":return o.stop()}},n)}));return function(n){return s.apply(this,arguments)}}())),i.zr;var s,n,r,a}function Nh(i){return i.Hr||(i.Hr=(s=i.datastore,n=i.asyncQueue,r={Si:Eb.bind(null,i),Ci:BN.bind(null,i),Vr:_y.bind(null,i),vr:ZN.bind(null,i)},(a=En(s)).Cr(),new LN(n,a.nr,a.credentials,a.N,r)),i.jr.push(function(){var s=(0,Ut.Z)(Ze().mark(function n(r){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r){o.next=6;break}return i.Hr.hr(),o.next=4,Bp(i);case 4:o.next=9;break;case 6:return o.next=8,i.Hr.stop();case 8:i.Ur.length>0&&(wn("RemoteStore","Stopping write stream with ".concat(i.Ur.length," pending writes")),i.Ur=[]);case 9:case"end":return o.stop()}},n)}));return function(n){return s.apply(this,arguments)}}())),i.Hr;var s,n,r,a}var UN=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.asyncQueue=s,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(u){})}return(0,D.Z)(i,[{key:"start",value:function(n){var r=this;this.timerHandle=setTimeout(function(){return r.handleDelayElapsed()},n)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new en(Lt.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}},{key:"handleDelayElapsed",value:function(){var n=this;this.asyncQueue.enqueueAndForget(function(){return null!==n.timerHandle?(n.clearTimeout(),n.op().then(function(r){return n.deferred.resolve(r)})):Promise.resolve()})}},{key:"clearTimeout",value:function(s){function n(){return s.apply(this,arguments)}return n.toString=function(){return s.toString()},n}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(n,r,a,o,u){var d=new i(n,r,Date.now()+a,o,u);return d.start(a),d}}]),i}();function Hp(i,s){if(ys("AsyncQueue","".concat(s,": ").concat(i)),Mp(i))return new en(Lt.UNAVAILABLE,"".concat(s,": ").concat(i));throw i}var vI=function(){function i(s){(0,M.Z)(this,i),this.comparator=s?function(n,r){return s(n,r)||fr.comparator(n.key,r.key)}:function(n,r){return fr.comparator(n.key,r.key)},this.keyedMap=NC(),this.sortedSet=new Co(this.comparator)}return(0,D.Z)(i,[{key:"has",value:function(n){return null!=this.keyedMap.get(n)}},{key:"get",value:function(n){return this.keyedMap.get(n)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(n){var r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(n){this.sortedSet.inorderTraversal(function(r,a){return n(r),!1})}},{key:"add",value:function(n){var r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}},{key:"delete",value:function(n){var r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}},{key:"isEqual",value:function(n){if(!(n instanceof i)||this.size!==n.size)return!1;for(var r=this.sortedSet.getIterator(),a=n.sortedSet.getIterator();r.hasNext();){var o=r.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}},{key:"toString",value:function(){var n=[];return this.forEach(function(r){n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}},{key:"copy",value:function(n,r){var a=new i;return a.comparator=this.comparator,a.keyedMap=n,a.sortedSet=r,a}}],[{key:"emptySet",value:function(n){return new i(n.comparator)}}]),i}(),VN=function(){function i(){(0,M.Z)(this,i),this.Jr=new Co(fr.comparator)}return(0,D.Z)(i,[{key:"track",value:function(n){var r=n.doc.key,a=this.Jr.get(r);a?0!==n.type&&3===a.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==a.type?this.Jr=this.Jr.insert(r,{type:a.type,doc:n.doc}):2===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===a.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===a.type?this.Jr=this.Jr.remove(r):1===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:1,doc:a.doc}):0===n.type&&1===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):ar():this.Jr=this.Jr.insert(r,n)}},{key:"Yr",value:function(){var n=[];return this.Jr.inorderTraversal(function(r,a){n.push(a)}),n}}]),i}(),Cb=function(){function i(s,n,r,a,o,u,c,d){(0,M.Z)(this,i),this.query=s,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d}return(0,D.Z)(i,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&$g(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;var r=this.docChanges,a=n.docChanges;if(r.length!==a.length)return!1;for(var o=0;o<r.length;o++)if(r[o].type!==a[o].type||!r[o].doc.isEqual(a[o].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(n,r,a,o){var u=[];return r.forEach(function(c){u.push({type:0,doc:c})}),new i(n,r,vI.emptySet(r),u,a,o,!0,!1)}}]),i}(),by=function i(){(0,M.Z)(this,i),this.Xr=void 0,this.listeners=[]},HN=function i(){(0,M.Z)(this,i),this.queries=new dy(function(s){return CC(s)},$g),this.onlineState="Unknown",this.Zr=new Set};function BS(i,s){return US.apply(this,arguments)}function US(){return(US=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o,u,c;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(r=En(s),o=!1,(u=r.queries.get(a=n.query))||(o=!0,u=new by),!o){m.next=13;break}return m.prev=3,m.next=6,r.onListen(a);case 6:u.Xr=m.sent,m.next=13;break;case 9:return m.prev=9,m.t0=m.catch(3),c=Hp(m.t0,"Initialization of query '".concat($0(n.query),"' failed")),m.abrupt("return",void n.onError(c));case 13:r.queries.set(a,u),u.listeners.push(n),n.eo(r.onlineState),u.Xr&&n.no(u.Xr)&&mI(r);case 14:case"end":return m.stop()}},i,null,[[3,9]])}))).apply(this,arguments)}function zp(i,s){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o,u,c;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(r=En(s),o=!1,(u=r.queries.get(a=n.query))&&(c=u.listeners.indexOf(n))>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length),!o){m.next=6;break}return m.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return m.stop()}},i)}))).apply(this,arguments)}function pI(i,s){var o,n=En(i),r=!1,a=(0,Re.Z)(s);try{for(a.s();!(o=a.n()).done;){var u=o.value,d=n.queries.get(u.query);if(d){var _,m=(0,Re.Z)(d.listeners);try{for(m.s();!(_=m.n()).done;)_.value.no(u)&&(r=!0)}catch(E){m.e(E)}finally{m.f()}d.Xr=u}}}catch(E){a.e(E)}finally{a.f()}r&&mI(n)}function zN(i,s,n){var r=En(i),a=r.queries.get(s);if(a){var u,o=(0,Re.Z)(a.listeners);try{for(o.s();!(u=o.n()).done;)u.value.onError(n)}catch(d){o.e(d)}finally{o.f()}}r.queries.delete(s)}function mI(i){i.Zr.forEach(function(s){s.next()})}var VS=function(){function i(s,n,r){(0,M.Z)(this,i),this.query=s,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}return(0,D.Z)(i,[{key:"no",value:function(n){if(!this.options.includeMetadataChanges){var o,r=[],a=(0,Re.Z)(n.docChanges);try{for(a.s();!(o=a.n()).done;){var u=o.value;3!==u.type&&r.push(u)}}catch(d){a.e(d)}finally{a.f()}n=new Cb(n.query,n.docs,n.oldDocs,r,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}var c=!1;return this.io?this.oo(n)&&(this.so.next(n),c=!0):this.ao(n,this.onlineState)&&(this.co(n),c=!0),this.ro=n,c}},{key:"onError",value:function(n){this.so.error(n)}},{key:"eo",value:function(n){this.onlineState=n;var r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}},{key:"ao",value:function(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}},{key:"oo",value:function(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"co",value:function(n){n=Cb.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}]),i}(),Sb=function(){function i(s,n){(0,M.Z)(this,i),this.payload=s,this.byteLength=n}return(0,D.Z)(i,[{key:"ho",value:function(){return"metadata"in this.payload}}]),i}(),gI=function(){function i(s){(0,M.Z)(this,i),this.N=s}return(0,D.Z)(i,[{key:"zn",value:function(n){return Rc(this.N,n)}},{key:"Hn",value:function(n){return n.metadata.exists?GC(this.N,n.document,!1):Eo.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}},{key:"Jn",value:function(n){return Ws(n)}}]),i}(),GN=function(){function i(s,n,r){(0,M.Z)(this,i),this.lo=s,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=HS(s)}return(0,D.Z)(i,[{key:"fo",value:function(n){this.progress.bytesLoaded+=n.byteLength;var r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}},{key:"wo",value:function(n){var u,r=new Map,a=new gI(this.N),o=(0,Re.Z)(n);try{for(o.s();!(u=o.n()).done;){var c=u.value;if(c.metadata.queries){var _,d=a.zn(c.metadata.name),m=(0,Re.Z)(c.metadata.queries);try{for(m.s();!(_=m.n()).done;){var b=_.value,E=(r.get(b)||ta()).add(d);r.set(b,E)}}catch(T){m.e(T)}finally{m.f()}}}}catch(T){o.e(T)}finally{o.f()}return r}},{key:"complete",value:(s=(0,Ut.Z)(Ze().mark(function r(){var a,o,u,c,d;return Ze().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,TN(this.localStore,new gI(this.N),this.documents,this.lo.id);case 2:a=_.sent,o=this.wo(this.documents),u=(0,Re.Z)(this.queries),_.prev=5,u.s();case 7:if((c=u.n()).done){_.next=13;break}return d=c.value,_.next=11,MN(this.localStore,d,o.get(d.name));case 11:_.next=7;break;case 13:_.next=18;break;case 15:_.prev=15,_.t0=_.catch(5),u.e(_.t0);case 18:return _.prev=18,u.f(),_.finish(18);case 21:return _.abrupt("return",(this.progress.taskState="Success",new bN(Object.assign({},this.progress),a)));case 22:case"end":return _.stop()}},r,this,[[5,15,18,21]])})),function(){return s.apply(this,arguments)})}]),i;var s}();function HS(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}var zS=function i(s){(0,M.Z)(this,i),this.key=s},Tb=function i(s){(0,M.Z)(this,i),this.key=s},GS=function(){function i(s,n){(0,M.Z)(this,i),this.query=s,this._o=n,this.mo=null,this.current=!1,this.yo=ta(),this.mutatedKeys=ta(),this.po=qL(s),this.Eo=new vI(this.po)}return(0,D.Z)(i,[{key:"To",get:function(){return this._o}},{key:"Io",value:function(n,r){var a=this,o=r?r.Ao:new VN,u=r?r.Eo:this.Eo,c=r?r.mutatedKeys:this.mutatedKeys,d=u,m=!1,_=K0(this.query)&&u.size===this.query.limit?u.last():null,b=Yg(this.query)&&u.size===this.query.limit?u.first():null;if(n.inorderTraversal(function(T,I){var N=u.get(T),W=Gd(a.query,I)?I:null,U=!!N&&a.mutatedKeys.has(N.key),H=!!W&&(W.hasLocalMutations||a.mutatedKeys.has(W.key)&&W.hasCommittedMutations),te=!1;N&&W?N.data.isEqual(W.data)?U!==H&&(o.track({type:3,doc:W}),te=!0):a.Ro(N,W)||(o.track({type:2,doc:W}),te=!0,(_&&a.po(W,_)>0||b&&a.po(W,b)<0)&&(m=!0)):!N&&W?(o.track({type:0,doc:W}),te=!0):N&&!W&&(o.track({type:1,doc:N}),te=!0,(_||b)&&(m=!0)),te&&(W?(d=d.add(W),c=H?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))}),K0(this.query)||Yg(this.query))for(;d.size>this.query.limit;){var E=K0(this.query)?d.last():d.first();d=d.delete(E.key),c=c.delete(E.key),o.track({type:1,doc:E})}return{Eo:d,Ao:o,Ln:m,mutatedKeys:c}}},{key:"Ro",value:function(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}},{key:"applyChanges",value:function(n,r,a){var o=this,u=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;var c=n.Ao.Yr();c.sort(function(b,E){return I=E.type,(N=function(U){switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ar()}})(b.type)-N(I)||o.po(b.doc,E.doc);var I,N}),this.bo(a);var d=r?this.Po():[],m=0===this.yo.size&&this.current?1:0,_=m!==this.mo;return this.mo=m,0!==c.length||_?{snapshot:new Cb(this.query,n.Eo,u,c,n.mutatedKeys,0===m,_,!1),vo:d}:{vo:d}}},{key:"eo",value:function(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new VN,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}},{key:"Vo",value:function(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}},{key:"bo",value:function(n){var r=this;n&&(n.addedDocuments.forEach(function(a){return r._o=r._o.add(a)}),n.modifiedDocuments.forEach(function(a){}),n.removedDocuments.forEach(function(a){return r._o=r._o.delete(a)}),this.current=n.current)}},{key:"Po",value:function(){var n=this;if(!this.current)return[];var r=this.yo;this.yo=ta(),this.Eo.forEach(function(o){n.Vo(o.key)&&(n.yo=n.yo.add(o.key))});var a=[];return r.forEach(function(o){n.yo.has(o)||a.push(new Tb(o))}),this.yo.forEach(function(o){r.has(o)||a.push(new zS(o))}),a}},{key:"So",value:function(n){this._o=n.Gn,this.yo=ta();var r=this.Io(n.documents);return this.applyChanges(r,!0)}},{key:"Do",value:function(){return Cb.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}]),i}(),yI=function i(s,n,r){(0,M.Z)(this,i),this.query=s,this.targetId=n,this.view=r},jN=function i(s){(0,M.Z)(this,i),this.key=s,this.Co=!1},WN=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.localStore=s,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.No={},this.xo=new dy(function(c){return CC(c)},$g),this.ko=new Map,this.$o=new Set,this.Oo=new Co(fr.comparator),this.Fo=new Map,this.Mo=new bS,this.Lo={},this.Bo=new Map,this.Uo=cb.ie(),this.onlineState="Unknown",this.qo=void 0}return(0,D.Z)(i,[{key:"isPrimaryClient",get:function(){return!0===this.qo}}]),i}();function _I(i,s){return jS.apply(this,arguments)}function jS(){return(jS=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o,u,c,d;return Ze().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(r=Ty(s),!(u=r.xo.get(n))){_.next=6;break}r.sharedClientState.addLocalQueryTarget(a=u.targetId),o=u.view.Do(),_.next=15;break;case 6:return _.next=8,Rp(r.localStore,hl(n));case 8:return d=r.sharedClientState.addLocalQueryTarget((c=_.sent).targetId),a=c.targetId,_.next=13,Mb(r,n,a,"current"===d);case 13:o=_.sent,r.isPrimaryClient&&_b(r.remoteStore,c);case 15:return _.abrupt("return",o);case 16:case"end":return _.stop()}},i)}))).apply(this,arguments)}function Mb(i,s,n,r){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,Ut.Z)(Ze().mark(function i(s,n,r,a){var o,u,c,d,m,_;return Ze().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return s.Ko=function(T,I,N){return(W=(0,Ut.Z)(Ze().mark(function U(H,te,ue,le){var he,se,ye;return Ze().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(he=te.view.Io(ue),Ve.t0=he.Ln,!Ve.t0){Ve.next=6;break}return Ve.next=5,Op(H.localStore,te.query,!1).then(function(Fe){return te.view.Io(Fe.documents,he)});case 5:he=Ve.sent;case 6:return se=le&&le.targetChanges.get(te.targetId),ye=te.view.applyChanges(he,H.isPrimaryClient,se),Ve.abrupt("return",(Ra(H,te.targetId,ye.vo),ye.snapshot));case 8:case"end":return Ve.stop()}},U)})),function(U,H,te,ue){return W.apply(this,arguments)})(s,T,I,N);var W},E.next=3,Op(s.localStore,n,!0);case 3:return u=new GS(n,(o=E.sent).Gn),c=u.Io(o.documents),d=BC.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState),m=u.applyChanges(c,s.isPrimaryClient,d),Ra(s,r,m.vo),_=new yI(n,r,u),E.abrupt("return",(s.xo.set(n,_),s.ko.has(r)?s.ko.get(r).push(n):s.ko.set(r,[n]),m.snapshot));case 11:case"end":return E.stop()}},i)}))).apply(this,arguments)}function Ab(i,s){return bI.apply(this,arguments)}function bI(){return(bI=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=En(s),a=r.xo.get(n),!((o=r.ko.get(a.targetId)).length>1)){c.next=3;break}return c.abrupt("return",(r.ko.set(a.targetId,o.filter(function(d){return!$g(d,n)})),void r.xo.delete(n)));case 3:if(!r.isPrimaryClient){c.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),c.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),c.t0){c.next=9;break}return c.next=9,Pp(r.localStore,a.targetId,!1).then(function(){r.sharedClientState.clearQueryState(a.targetId),bb(r.remoteStore,a.targetId),Wp(r,a.targetId)}).catch(Oh);case 9:c.next=14;break;case 11:return Wp(r,a.targetId),c.next=14,Pp(r.localStore,a.targetId,!0);case 14:case"end":return c.stop()}},i)}))).apply(this,arguments)}function wy(i,s,n){return la.apply(this,arguments)}function la(){return(la=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o,u;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=My(s),d.prev=1,d.next=4,function(m,_){var I,b=En(m),E=Go.now(),T=_.reduce(function(N,W){return N.add(W.key)},ta());return b.persistence.runTransaction("Locally write mutations","readwrite",function(N){return b.Qn.Pn(N,T).next(function(W){I=W;var te,U=[],H=(0,Re.Z)(_);try{for(H.s();!(te=H.n()).done;){var ue=te.value,le=A1(ue,I.get(ue.key));null!=le&&U.push(new bf(ue.key,le,w1(le.value.mapValue),so.exists(!0)))}}catch(he){H.e(he)}finally{H.f()}return b.In.addMutationBatch(N,E,U,_)})}).then(function(N){return N.applyToLocalDocumentSet(I),{batchId:N.batchId,changes:I}})}(a.localStore,n);case 4:return a.sharedClientState.addPendingMutation((o=d.sent).batchId),_=o.batchId,b=r,E=void 0,(E=(m=a).Lo[m.currentUser.toKey()])||(E=new Co(Jr)),E=E.insert(_,b),m.Lo[m.currentUser.toKey()]=E,d.next=9,Mf(a,o.changes);case 9:return d.next=11,Bp(a.remoteStore);case 11:d.next=17;break;case 13:d.prev=13,d.t0=d.catch(1),u=Hp(d.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return d.stop()}var m,_,b,E},i,null,[[1,13]])}))).apply(this,arguments)}function Zh(i,s){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=En(s),u.prev=1,u.next=4,CN(r.localStore,n);case 4:return a=u.sent,n.targetChanges.forEach(function(c,d){var m=r.Fo.get(d);m&&(Ir(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?m.Co=!0:c.modifiedDocuments.size>0?Ir(m.Co):c.removedDocuments.size>0&&(Ir(m.Co),m.Co=!1))}),u.next=8,Mf(r,a,n);case 8:u.next=14;break;case 10:return u.prev=10,u.t0=u.catch(1),u.next=14,Oh(u.t0);case 14:case"end":return u.stop()}},i,null,[[1,10]])}))).apply(this,arguments)}function jp(i,s,n){var r=En(i);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.xo.forEach(function(o,u){var c=u.view.eo(s);c.snapshot&&a.push(c.snapshot)}),function(o,u){var c=En(o);c.onlineState=u;var d=!1;c.queries.forEach(function(m,_){var E,b=(0,Re.Z)(_.listeners);try{for(b.s();!(E=b.n()).done;)E.value.eo(u)&&(d=!0)}catch(I){b.e(I)}finally{b.f()}}),d&&mI(c)}(r.eventManager,s),a.length&&r.No.Tr(a),r.onlineState=s,r.isPrimaryClient&&r.sharedClientState.setOnlineState(s)}}function sV(i,s,n){return ui.apply(this,arguments)}function ui(){return(ui=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o,u,c,d,m;return Ze().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if((a=En(s)).sharedClientState.updateQueryState(n,"rejected",r),o=a.Fo.get(n),!(u=o&&o.key)){b.next=14;break}return c=(c=new Co(fr.comparator)).insert(u,Eo.newNoDocument(u,Ar.min())),d=ta().add(u),m=new ZC(Ar.min(),new Map,new js(Jr),c,d),b.next=9,Zh(a,m);case 9:a.Oo=a.Oo.remove(u),a.Fo.delete(n),qS(a),b.next=16;break;case 14:return b.next=16,Pp(a.localStore,n,!1).then(function(){return Wp(a,n,r)}).catch(Oh);case 16:case"end":return b.stop()}},i)}))).apply(this,arguments)}function Gl(i,s){return ky.apply(this,arguments)}function ky(){return(ky=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=En(s),a=n.batch.batchId,c.prev=1,c.next=4,EN(r.localStore,n);case 4:return o=c.sent,WS(r,a,null),EI(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),c.next=10,Mf(r,o);case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(1),c.next=16,Oh(c.t0);case 16:case"end":return c.stop()}},i,null,[[1,12]])}))).apply(this,arguments)}function Ey(i,s,n){return wI.apply(this,arguments)}function wI(){return(wI=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=En(s),c.prev=1,c.next=4,function(d,m){var _=En(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",function(b){var E;return _.In.lookupMutationBatch(b,m).next(function(T){return Ir(null!==T),E=T.keys(),_.In.removeMutationBatch(b,T)}).next(function(){return _.In.performConsistencyCheck(b)}).next(function(){return _.Qn.Pn(b,E)})})}(a.localStore,n);case 4:return o=c.sent,WS(a,n,r),EI(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),c.next=10,Mf(a,o);case 10:c.next=16;break;case 12:return c.prev=12,c.t0=c.catch(1),c.next=16,Oh(c.t0);case 16:case"end":return c.stop()}},i,null,[[1,12]])}))).apply(this,arguments)}function kI(i,s){return xb.apply(this,arguments)}function xb(){return(xb=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o,u;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return Tf((r=En(s)).remoteStore)||wn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),d.prev=2,d.next=5,function(m){var _=En(m);return _.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(b){return _.In.getHighestUnacknowledgedBatchId(b)})}(r.localStore);case 5:if(-1!==(a=d.sent)){d.next=8;break}return d.abrupt("return",void n.resolve());case 8:(o=r.Bo.get(a)||[]).push(n),r.Bo.set(a,o),d.next=16;break;case 12:d.prev=12,d.t0=d.catch(2),u=Hp(d.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return d.stop()}},i,null,[[2,12]])}))).apply(this,arguments)}function EI(i,s){(i.Bo.get(s)||[]).forEach(function(n){n.resolve()}),i.Bo.delete(s)}function WS(i,s,n){var r=En(i),a=r.Lo[r.currentUser.toKey()];if(a){var o=a.get(s);o&&(n?o.reject(n):o.resolve(),a=a.remove(s)),r.Lo[r.currentUser.toKey()]=a}}function Wp(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i.sharedClientState.removeLocalQueryTarget(s);var a,r=(0,Re.Z)(i.ko.get(s));try{for(r.s();!(a=r.n()).done;){var o=a.value;i.xo.delete(o),n&&i.No.jo(o,n)}}catch(u){r.e(u)}finally{r.f()}i.ko.delete(s),i.isPrimaryClient&&i.Mo.cs(s).forEach(function(u){i.Mo.containsKey(u)||Wu(i,u)})}function Wu(i,s){i.$o.delete(s.path.canonicalString());var n=i.Oo.get(s);null!==n&&(bb(i.remoteStore,n),i.Oo=i.Oo.remove(s),i.Fo.delete(n),qS(i))}function Ra(i,s,n){var a,r=(0,Re.Z)(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;o instanceof zS?(i.Mo.addReference(o.key,s),jl(i,o)):o instanceof Tb?(wn("SyncEngine","Document no longer in limbo: "+o.key),i.Mo.removeReference(o.key,s),i.Mo.containsKey(o.key)||Wu(i,o.key)):ar()}}catch(u){r.e(u)}finally{r.f()}}function jl(i,s){var n=s.key,r=n.path.canonicalString();i.Oo.get(n)||i.$o.has(r)||(wn("SyncEngine","New document in limbo: "+n),i.$o.add(r),qS(i))}function qS(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){var s=i.$o.values().next().value;i.$o.delete(s);var n=new fr(Wr.fromString(s)),r=i.Uo.next();i.Fo.set(r,new jN(n)),i.Oo=i.Oo.insert(n,r),_b(i.remoteStore,new ub(hl(zd(n.path)),r,2,io.T))}}function Mf(i,s,n){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o,u,c;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(a=En(s),o=[],u=[],c=[],m.t0=a.xo.isEmpty(),m.t0){m.next=9;break}return a.xo.forEach(function(_,b){c.push(a.Ko(b,n,r).then(function(E){if(E){a.isPrimaryClient&&a.sharedClientState.updateQueryState(b.targetId,E.fromCache?"not-current":"current"),o.push(E);var T=wN.kn(b.targetId,E);u.push(T)}}))}),m.next=6,Promise.all(c);case 6:return a.No.Tr(o),m.next=9,function(){var _=(0,Ut.Z)(Ze().mark(function b(E,T){var I,N,W,U,H,te,le;return Ze().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return I=En(E),se.prev=1,se.next=4,I.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(ye){return ln.forEach(T,function(Ue){return ln.forEach(Ue.Nn,function(Ve){return I.persistence.referenceDelegate.addReference(ye,Ue.targetId,Ve)}).next(function(){return ln.forEach(Ue.xn,function(Ve){return I.persistence.referenceDelegate.removeReference(ye,Ue.targetId,Ve)})})})});case 4:se.next=11;break;case 6:if(se.prev=6,se.t0=se.catch(1),Mp(se.t0)){se.next=10;break}throw se.t0;case 10:wn("LocalStore","Failed to update sequence numbers: "+se.t0);case 11:N=(0,Re.Z)(T);try{for(N.s();!(W=N.n()).done;)H=(U=W.value).targetId,U.fromCache||(te=I.Un.get(H),le=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion),I.Un=I.Un.insert(H,le))}catch(ye){N.e(ye)}finally{N.f()}case 13:case"end":return se.stop()}},b,null,[[1,6]])}));return function(b,E){return _.apply(this,arguments)}}()(a.localStore,u);case 9:case"end":return m.stop()}},i)}))).apply(this,arguments)}function YS(i,s){return qp.apply(this,arguments)}function qp(){return(qp=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((r=En(s)).currentUser.isEqual(n)){u.next=11;break}return wn("SyncEngine","User change. New user:",n.toKey()),u.next=5,X1(r.localStore,n);case 5:return a=u.sent,r.currentUser=n,(c=r).Bo.forEach(function(m){m.forEach(function(_){_.reject(new en(Lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Bo.clear(),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),u.next=11,Mf(r,a.Wn);case 11:case"end":return u.stop()}var c},i)}))).apply(this,arguments)}function KS(i,s){var n=En(i),r=n.Fo.get(s);if(r&&r.Co)return ta().add(r.key);var a=ta(),o=n.ko.get(s);if(!o)return a;var c,u=(0,Re.Z)(o);try{for(u.s();!(c=u.n()).done;){var m=n.xo.get(c.value);a=a.unionWith(m.view.To)}}catch(_){u.e(_)}finally{u.f()}return a}function qN(i,s){return Af.apply(this,arguments)}function Af(){return(Af=(0,Ut.Z)(Ze().mark(function i(s,n){var r,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r=En(s),c.next=3,Op(r.localStore,n.query,!0);case 3:return o=n.view.So(c.sent),c.abrupt("return",(r.isPrimaryClient&&Ra(r,n.targetId,o.vo),o));case 6:case"end":return c.stop()}},i)}))).apply(this,arguments)}function YN(i){return Db.apply(this,arguments)}function Db(){return(Db=(0,Ut.Z)(Ze().mark(function i(s){var n;return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=En(s),a.abrupt("return",mS(n.localStore).then(function(o){return Mf(n,o)}));case 2:case"end":return a.stop()}},i)}))).apply(this,arguments)}function $S(i,s,n,r){return $d.apply(this,arguments)}function $d(){return($d=(0,Ut.Z)(Ze().mark(function i(s,n,r,a){var o,u;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return o=En(s),d.next=3,function(m,_){var b=En(m),E=En(b.In);return b.persistence.runTransaction("Lookup mutation documents","readonly",function(T){return E.Xt(T,_).next(function(I){return I?b.Qn.Pn(T,I):ln.resolve(null)})})}(o.localStore,n);case 3:if(null===(u=d.sent)){d.next=15;break}if("pending"!==r){d.next=10;break}return d.next=8,Bp(o.remoteStore);case 8:d.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(WS(o,n,a||null),EI(o,n),_=n,En(En(o.localStore).In).te(_)):ar();case 11:return d.next=13,Mf(o,u);case 13:d.next=16;break;case 15:wn("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return d.stop()}var _},i)}))).apply(this,arguments)}function XS(i,s){return Rb.apply(this,arguments)}function Rb(){return(Rb=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a,o,u,c,m,_;return Ze().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(Ty(r=En(s)),My(r),!0!==n||!0===r.qo){E.next=13;break}return a=r.sharedClientState.getAllActiveQueryTargets(),E.next=5,Cy(r,a.toArray());case 5:return o=E.sent,r.qo=!0,E.next=9,FS(r.remoteStore,!0);case 9:u=(0,Re.Z)(o);try{for(u.s();!(c=u.n()).done;)_b(r.remoteStore,c.value)}catch(T){u.e(T)}finally{u.f()}E.next=25;break;case 13:if(!1!==n||!1===r.qo){E.next=25;break}return m=[],_=Promise.resolve(),r.ko.forEach(function(T,I){r.sharedClientState.isLocalQueryTarget(I)?m.push(I):_=_.then(function(){return Wp(r,I),Pp(r.localStore,I,!0)}),bb(r.remoteStore,I)}),E.next=19,_;case 19:return E.next=21,Cy(r,m);case 21:return function(T){var I=En(T);I.Fo.forEach(function(N,W){bb(I.remoteStore,W)}),I.Mo.us(),I.Fo=new Map,I.Oo=new Co(fr.comparator)}(r),r.qo=!1,E.next=25,FS(r.remoteStore,!1);case 25:case"end":return E.stop()}},i)}))).apply(this,arguments)}function Cy(i,s,n){return CI.apply(this,arguments)}function CI(){return(CI=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o,u,c,d,m,_,b,E,T,N,W,U;return Ze().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:a=En(s),o=[],u=[],c=(0,Re.Z)(n),te.prev=2,c.s();case 4:if((d=c.n()).done){te.next=45;break}if(_=void 0,!(b=a.ko.get(m=d.value))||0===b.length){te.next=34;break}return te.next=11,Rp(a.localStore,hl(b[0]));case 11:_=te.sent,E=(0,Re.Z)(b),te.prev=13,E.s();case 15:if((T=E.n()).done){te.next=24;break}return N=a.xo.get(T.value),te.next=20,qN(a,N);case 20:(W=te.sent).snapshot&&u.push(W.snapshot);case 22:te.next=15;break;case 24:te.next=29;break;case 26:te.prev=26,te.t0=te.catch(13),E.e(te.t0);case 29:return te.prev=29,E.f(),te.finish(29);case 32:te.next=42;break;case 34:return te.next=36,J1(a.localStore,m);case 36:return U=te.sent,te.next=39,Rp(a.localStore,U);case 39:return _=te.sent,te.next=42,Mb(a,Sy(U),m,!1);case 42:o.push(_);case 43:te.next=4;break;case 45:te.next=50;break;case 47:te.prev=47,te.t1=te.catch(2),c.e(te.t1);case 50:return te.prev=50,c.f(),te.finish(50);case 53:return te.abrupt("return",(a.No.Tr(u),o));case 54:case"end":return te.stop()}},i,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function Sy(i){return _C(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function SI(i){var s=En(i);return En(En(s.localStore).persistence).pn()}function TI(i,s,n,r){return Pb.apply(this,arguments)}function Pb(){return(Pb=(0,Ut.Z)(Ze().mark(function i(s,n,r,a){var o,u,c;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(o=En(s)).qo){m.next=5;break}wn("SyncEngine","Ignoring unexpected query state notification."),m.next=21;break;case 5:if(!o.ko.has(n)){m.next=21;break}m.t0=r,m.next="current"===m.t0||"not-current"===m.t0?9:"rejected"===m.t0?16:20;break;case 9:return m.next=11,mS(o.localStore);case 11:return u=m.sent,c=ZC.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),m.next=15,Mf(o,u,c);case 15:return m.abrupt("break",21);case 16:return m.next=18,Pp(o.localStore,n,!0);case 18:return Wp(o,n,a),m.abrupt("break",21);case 20:ar();case 21:case"end":return m.stop()}},i)}))).apply(this,arguments)}function Ob(i,s,n){return QS.apply(this,arguments)}function QS(){return(QS=(0,Ut.Z)(Ze().mark(function i(s,n,r){var a,o,u,c,d,m,_,b,E;return Ze().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(a=Ty(s)).qo){I.next=45;break}o=(0,Re.Z)(n),I.prev=3,o.s();case 5:if((u=o.n()).done){I.next=21;break}if(!a.ko.has(c=u.value)){I.next=10;break}return wn("SyncEngine","Adding an already active target "+c),I.abrupt("continue",19);case 10:return I.next=12,J1(a.localStore,c);case 12:return d=I.sent,I.next=15,Rp(a.localStore,d);case 15:return m=I.sent,I.next=18,Mb(a,Sy(d),m.targetId,!1);case 18:_b(a.remoteStore,m);case 19:I.next=5;break;case 21:I.next=26;break;case 23:I.prev=23,I.t0=I.catch(3),o.e(I.t0);case 26:return I.prev=26,o.f(),I.finish(26);case 29:_=(0,Re.Z)(r),I.prev=30,E=Ze().mark(function N(){var W;return Ze().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(H.t0=a.ko.has(W=b.value),!H.t0){H.next=5;break}return H.next=5,Pp(a.localStore,W,!1).then(function(){bb(a.remoteStore,W),Wp(a,W)}).catch(Oh);case 5:case"end":return H.stop()}},N)}),_.s();case 33:if((b=_.n()).done){I.next=37;break}return I.delegateYield(E(),"t1",35);case 35:I.next=33;break;case 37:I.next=42;break;case 39:I.prev=39,I.t2=I.catch(30),_.e(I.t2);case 42:return I.prev=42,_.f(),I.finish(42);case 45:case"end":return I.stop()}},i,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function Ty(i){var s=En(i);return s.remoteStore.remoteSyncer.applyRemoteEvent=Zh.bind(null,s),s.remoteStore.remoteSyncer.getRemoteKeysForTarget=KS.bind(null,s),s.remoteStore.remoteSyncer.rejectListen=sV.bind(null,s),s.No.Tr=pI.bind(null,s.eventManager),s.No.jo=zN.bind(null,s.eventManager),s}function My(i){var s=En(i);return s.remoteStore.remoteSyncer.applySuccessfulWrite=Gl.bind(null,s),s.remoteStore.remoteSyncer.rejectFailedWrite=Ey.bind(null,s),s}function oV(i,s,n){var a,r=En(i);(a=(0,Ut.Z)(Ze().mark(function o(u,c,d){var m,_,b,E,T;return Ze().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.prev=0,N.next=3,c.getMetadata();case 3:return m=N.sent,N.next=6,function(W,U){var H=En(W),te=Ws(U.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",function(ue){return H.Je.getBundleMetadata(ue,U.id)}).then(function(ue){return!!ue&&ue.createTime.compareTo(te)>=0})}(u.localStore,m);case 6:if(!N.sent){N.next=10;break}return N.next=9,c.close();case 9:return N.abrupt("return",void d._completeWith((W=m,{taskState:"Success",documentsLoaded:W.totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes})));case 10:return d._updateProgress(HS(m)),_=new GN(m,u.localStore,c.N),N.next=14,c.Qo();case 14:b=N.sent;case 15:if(!b){N.next=25;break}return N.next=18,_.fo(b);case 18:return(E=N.sent)&&d._updateProgress(E),N.next=22,c.Qo();case 22:b=N.sent;case 23:N.next=15;break;case 25:return N.next=27,_.complete();case 27:return T=N.sent,N.next=30,Mf(u,T.Tn,void 0);case 30:return N.next=32,function(W,U){var H=En(W);return H.persistence.runTransaction("Save bundle","readwrite",function(te){return H.Je.saveBundleMetadata(te,U)})}(u.localStore,m);case 32:d._completeWith(T.progress),N.next=38;break;case 35:N.prev=35,N.t0=N.catch(0),ip("SyncEngine","Loading bundle failed with ".concat(N.t0)),d._failWith(N.t0);case 38:case"end":return N.stop()}var W},o,null,[[0,35]])})),function(o,u,c){return a.apply(this,arguments)})(r,s,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var KN=function(){function i(){(0,M.Z)(this,i),this.synchronizeTabs=!1}return(0,D.Z)(i,[{key:"initialize",value:(s=(0,Ut.Z)(Ze().mark(function r(a){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.N=my(a.databaseInfo.databaseId),this.sharedClientState=this.Wo(a),this.persistence=this.Go(a),u.next=5,this.persistence.start();case 5:this.gcScheduler=this.zo(a),this.localStore=this.Ho(a);case 7:case"end":return u.stop()}},r,this)})),function(r){return s.apply(this,arguments)})},{key:"zo",value:function(n){return null}},{key:"Ho",value:function(n){return dS(this.persistence,new hS,n.initialUser,this.N)}},{key:"Go",value:function(n){return new DN(PN.Ns,this.N)}},{key:"Wo",value:function(n){return new rI}},{key:"terminate",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),o.next=3,this.sharedClientState.shutdown();case 3:return o.next=5,this.persistence.shutdown();case 5:case"end":return o.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()}]),i;var s}(),Dr=function(i){(0,S.Z)(n,i);var r,s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).Jo=r,u.cacheSizeBytes=a,u.forceOwnership=o,u.synchronizeTabs=!1,u}return(0,D.Z)(n,[{key:"initialize",value:(r=(0,Ut.Z)(Ze().mark(function o(u){var c=this;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,_e.Z)((0,de.Z)(n.prototype),"initialize",this).call(this,u);case 2:return m.next=4,SN(this.localStore);case 4:return m.next=6,this.Jo.initialize(this,u);case 6:return m.next=8,My(this.Jo.syncEngine);case 8:return m.next=10,Bp(this.Jo.remoteStore);case 10:return m.next=12,this.persistence.nn(function(){return c.gcScheduler&&!c.gcScheduler.started&&c.gcScheduler.start(c.localStore),Promise.resolve()});case 12:case"end":return m.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"Ho",value:function(a){return dS(this.persistence,new hS,a.initialUser,this.N)}},{key:"zo",value:function(a){return new mN(this.persistence.referenceDelegate.garbageCollector,a.asyncQueue)}},{key:"Go",value:function(a){var o=fS(a.databaseInfo.databaseId,a.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?Oc.withCacheSize(this.cacheSizeBytes):Oc.DEFAULT;return new _N(this.synchronizeTabs,o,a.clientId,u,a.asyncQueue,Lp(),CS(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Wo",value:function(a){return new rI}}]),n}(KN),uV=function(i){(0,S.Z)(n,i);var r,s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a,!1)).Jo=r,o.cacheSizeBytes=a,o.synchronizeTabs=!0,o}return(0,D.Z)(n,[{key:"initialize",value:(r=(0,Ut.Z)(Ze().mark(function o(u){var d,c=this;return Ze().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,_e.Z)((0,de.Z)(n.prototype),"initialize",this).call(this,u);case 2:if(d=this.Jo.syncEngine,_.t0=this.sharedClientState instanceof yb,!_.t0){_.next=8;break}return this.sharedClientState.syncEngine={_i:$S.bind(null,d),mi:TI.bind(null,d),gi:Ob.bind(null,d),pn:SI.bind(null,d),wi:YN.bind(null,d)},_.next=8,this.sharedClientState.start();case 8:return _.next=10,this.persistence.nn(function(){var b=(0,Ut.Z)(Ze().mark(function E(T){return Ze().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,XS(c.Jo.syncEngine,T);case 2:c.gcScheduler&&(T&&!c.gcScheduler.started?c.gcScheduler.start(c.localStore):T||c.gcScheduler.stop());case 3:case"end":return N.stop()}},E)}));return function(E){return b.apply(this,arguments)}}());case 10:case"end":return _.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"Wo",value:function(a){var o=Lp();if(!yb.bt(o))throw new en(Lt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var u=fS(a.databaseInfo.databaseId,a.databaseInfo.persistenceKey);return new yb(o,a.asyncQueue,u,a.clientId,a.initialUser)}}]),n}(Dr),Xd=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"initialize",value:(s=(0,Ut.Z)(Ze().mark(function r(a,o){var u=this;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(d.t0=this.localStore,d.t0){d.next=12;break}return this.localStore=a.localStore,this.sharedClientState=a.sharedClientState,this.datastore=this.createDatastore(o),this.remoteStore=this.createRemoteStore(o),this.eventManager=this.createEventManager(o),this.syncEngine=this.createSyncEngine(o,!a.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(m){return jp(u.syncEngine,m,1)},this.remoteStore.remoteSyncer.handleCredentialChange=YS.bind(null,this.syncEngine),d.next=12,FS(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return d.stop()}},r,this)})),function(r,a){return s.apply(this,arguments)})},{key:"createEventManager",value:function(n){return new HN}},{key:"createDatastore",value:function(n){var r=my(n.databaseInfo.databaseId),a=new ON(n.databaseInfo);return new iV(n.credentials,a,r)}},{key:"createRemoteStore",value:function(n){var a,o,u,c,d,r=this;return a=this.localStore,o=this.datastore,u=n.asyncQueue,c=function(_){return jp(r.syncEngine,_,0)},d=aI.bt()?new aI:new iI,new Kd(a,o,u,c,d)}},{key:"createSyncEngine",value:function(n,r){return _=r,b=new WN(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions),_&&(b.qo=!0),b;var _,b}},{key:"terminate",value:function(){return(n=(0,Ut.Z)(Ze().mark(function r(a){var o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o=En(a),wn("RemoteStore","RemoteStore shutting down."),o.Kr.add(5),c.next=5,Sf(o);case 5:o.Qr.shutdown(),o.Wr.set("Unknown");case 7:case"end":return c.stop()}},r)})),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}]),i;var s}();function MI(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,Ut.Z)(Ze().mark(function a(){var o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(n<i.byteLength)){c.next=3;break}return o={value:i.slice(n,n+s),done:!1},c.abrupt("return",(n+=s,o));case 3:return c.abrupt("return",{done:!0});case 4:case"end":return c.stop()}},a)}))()},cancel:function(){return(0,Ut.Z)(Ze().mark(function a(){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},a)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Lb=function(){function i(s){(0,M.Z)(this,i),this.observer=s,this.muted=!1}return(0,D.Z)(i,[{key:"next",value:function(n){this.observer.next&&this.Yo(this.observer.next,n)}},{key:"error",value:function(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}},{key:"Xo",value:function(){this.muted=!0}},{key:"Yo",value:function(n,r){var a=this;this.muted||setTimeout(function(){a.muted||n(r)},0)}}]),i}(),$N=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.Zo=s,this.N=n,this.metadata=new ro,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(function(a){a&&a.ho()?r.metadata.resolve(a.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==a?void 0:a.payload))))},function(a){return r.metadata.reject(a)})}return(0,D.Z)(i,[{key:"close",value:function(){return this.Zo.cancel()}},{key:"getMetadata",value:(s=(0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.metadata.promise);case 1:case"end":return o.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"Qo",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getMetadata();case 2:return o.abrupt("return",this.ea());case 3:case"end":return o.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"ea",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){var a,o,u;return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.na();case 2:if(null!==(a=m.sent)){m.next=5;break}return m.abrupt("return",null);case 5:return o=this.ta.decode(a),u=Number(o),isNaN(u)&&this.sa("length string (".concat(o,") is not valid number")),m.next=9,this.ia(u);case 9:return m.abrupt("return",new Sb(JSON.parse(m.sent),a.length+u));case 11:case"end":return m.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"ra",value:function(){return this.buffer.findIndex(function(n){return n==="{".charCodeAt(0)})}},{key:"na",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){var a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(this.ra()<0)){c.next=7;break}return c.next=3,this.oa();case 3:if(!c.sent){c.next=5;break}return c.abrupt("break",7);case 5:c.next=0;break;case 7:if(0!==this.buffer.length){c.next=9;break}return c.abrupt("return",null);case 9:return(a=this.ra())<0&&this.sa("Reached the end of bundle when a length string is expected."),o=this.buffer.slice(0,a),c.abrupt("return",(this.buffer=this.buffer.slice(a),o));case 13:case"end":return c.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"ia",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(a){var o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(this.buffer.length<a)){c.next=8;break}return c.next=3,this.oa();case 3:if(c.t0=c.sent,!c.t0){c.next=6;break}this.sa("Reached the end of bundle when more is expected.");case 6:c.next=0;break;case 8:return o=this.ta.decode(this.buffer.slice(0,a)),c.abrupt("return",(this.buffer=this.buffer.slice(a),o));case 10:case"end":return c.stop()}},r,this)}));return function(r){return s.apply(this,arguments)}}()},{key:"sa",value:function(n){throw this.Zo.cancel(),new Error("Invalid bundle format: ".concat(n))}},{key:"oa",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){var a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,this.Zo.read();case 2:return(a=c.sent).done||((o=new Uint8Array(this.buffer.length+a.value.length)).set(this.buffer),o.set(a.value,this.buffer.length),this.buffer=o),c.abrupt("return",a.done);case 5:case"end":return c.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()}]),i;var s}(),lV=function(){function i(s){(0,M.Z)(this,i),this.datastore=s,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,D.Z)(i,[{key:"lookup",value:(s=(0,Ut.Z)(Ze().mark(function r(a){var u,o=this;return Ze().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){d.next=2;break}throw new en(Lt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return d.next=4,function(){var m=(0,Ut.Z)(Ze().mark(function _(b,E){var T,I,N,W,U,H;return Ze().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return T=En(b),I=ny(T.N)+"/documents",N={documents:E.map(function(le){return ey(T.N,le)})},ue.next=5,T.Ki("BatchGetDocuments",I,N);case 5:return W=ue.sent,U=new Map,W.forEach(function(le){var he=N1(T.N,le);U.set(he.key.toString(),he)}),H=[],ue.abrupt("return",(E.forEach(function(le){var he=U.get(le.toString());Ir(!!he),H.push(he)}),H));case 10:case"end":return ue.stop()}},_)}));return function(_,b){return m.apply(this,arguments)}}()(this.datastore,a);case 4:return d.abrupt("return",((u=d.sent).forEach(function(m){return o.recordVersion(m)}),u));case 6:case"end":return d.stop()}},r,this)})),function(r){return s.apply(this,arguments)})},{key:"set",value:function(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}},{key:"update",value:function(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(n.toString())}},{key:"delete",value:function(n){this.write(new wp(n,this.precondition(n))),this.writtenDocs.add(n.toString())}},{key:"commit",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){var o,a=this;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){c.next=2;break}throw this.lastWriteError;case 2:return o=this.readVersions,this.mutations.forEach(function(d){o.delete(d.key.toString())}),o.forEach(function(d,m){var _=fr.fromPath(m);a.mutations.push(new tb(_,a.precondition(_)))}),c.next=7,function(){var d=(0,Ut.Z)(Ze().mark(function m(_,b){var E,T,I;return Ze().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return E=En(_),T=ny(E.N)+"/documents",I={writes:b.map(function(U){return ib(E.N,U)})},W.next=3,E.Li("Commit",T,I);case 3:case"end":return W.stop()}},m)}));return function(m,_){return d.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return c.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"recordVersion",value:function(n){var r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw ar();r=Ar.min()}var a=this.readVersions.get(n.key.toString());if(a){if(!r.isEqual(a))throw new en(Lt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}},{key:"precondition",value:function(n){var r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?so.updateTime(r):so.none()}},{key:"preconditionForUpdate",value:function(n){var r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(Ar.min()))throw new en(Lt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return so.updateTime(r)}return so.exists(!0)}},{key:"write",value:function(n){this.ensureCommitNotCalled(),this.mutations.push(n)}},{key:"ensureCommitNotCalled",value:function(){}}]),i;var s}(),cV=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.asyncQueue=s,this.datastore=n,this.updateFunction=r,this.deferred=a,this.aa=5,this.rr=new Np(this.asyncQueue,"transaction_retry")}return(0,D.Z)(i,[{key:"run",value:function(){this.aa-=1,this.ca()}},{key:"ca",value:function(){var n=this;this.rr.Xi((0,Ut.Z)(Ze().mark(function r(){var a,o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:a=new lV(n.datastore),(o=n.ua(a))&&o.then(function(d){n.asyncQueue.enqueueAndForget(function(){return a.commit().then(function(){n.deferred.resolve(d)}).catch(function(m){n.ha(m)})})}).catch(function(d){n.ha(d)});case 2:case"end":return c.stop()}},r)})))}},{key:"ua",value:function(n){try{var r=this.updateFunction(n);return!Sh(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(a){return this.deferred.reject(a),null}}},{key:"ha",value:function(n){var r=this;this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(function(){return r.ca(),Promise.resolve()})):this.deferred.reject(n)}},{key:"la",value:function(n){if("FirebaseError"===n.name){var r=n.code;return"aborted"===r||"failed-precondition"===r||!RC(r)}return!1}}]),i}(),fV=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.credentials=s,this.asyncQueue=n,this.databaseInfo=r,this.user=no.UNAUTHENTICATED,this.clientId=kh.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(n,function(){var o=(0,Ut.Z)(Ze().mark(function u(c){return Ze().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return wn("FirestoreClient","Received user=",c.uid),m.next=3,a.credentialListener(c);case 3:a.user=c;case 4:case"end":return m.stop()}},u)}));return function(u){return o.apply(this,arguments)}}())}return(0,D.Z)(i,[{key:"getConfiguration",value:(s=(0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return o.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"setCredentialChangeListener",value:function(n){this.credentialListener=n}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new en(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var n=this;this.asyncQueue.enterRestrictedMode();var r=new ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ut.Z)(Ze().mark(function a(){var o;return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,c.t0=n.onlineComponents,!c.t0){c.next=5;break}return c.next=5,n.onlineComponents.terminate();case 5:if(c.t1=n.offlineComponents,!c.t1){c.next=9;break}return c.next=9,n.offlineComponents.terminate();case 9:n.credentials.shutdown(),r.resolve(),c.next=17;break;case 13:c.prev=13,c.t2=c.catch(0),o=Hp(c.t2,"Failed to shutdown persistence"),r.reject(o);case 17:case"end":return c.stop()}},a,null,[[0,13]])}))),r.promise}}]),i;var s}();function Wo(i,s){return JS.apply(this,arguments)}function JS(){return(JS=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s.asyncQueue.verifyOperationInProgress(),wn("FirestoreClient","Initializing OfflineComponentProvider"),u.next=3,s.getConfiguration();case 3:return r=u.sent,u.next=6,n.initialize(r);case 6:a=r.initialUser,s.setCredentialChangeListener(function(){var c=(0,Ut.Z)(Ze().mark(function d(m){return Ze().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(b.t0=a.isEqual(m),b.t0){b.next=5;break}return b.next=4,X1(n.localStore,m);case 4:a=m;case 5:case"end":return b.stop()}},d)}));return function(d){return c.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return s.terminate()}),s.offlineComponents=n;case 8:case"end":return u.stop()}},i)}))).apply(this,arguments)}function AI(i,s){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,Ut.Z)(Ze().mark(function i(s,n){var r,a;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s.asyncQueue.verifyOperationInProgress(),u.next=3,eT(s);case 3:return r=u.sent,wn("FirestoreClient","Initializing OnlineComponentProvider"),u.next=7,s.getConfiguration();case 7:return a=u.sent,u.next=10,n.initialize(r,a);case 10:s.setCredentialChangeListener(function(c){return(d=(0,Ut.Z)(Ze().mark(function m(_,b){var E,T;return Ze().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return(E=En(_)).asyncQueue.verifyOperationInProgress(),wn("RemoteStore","RemoteStore received new credentials"),T=Tf(E),E.Kr.add(3),N.next=6,Sf(E);case 6:return T&&E.Wr.set("Unknown"),N.next=9,E.remoteSyncer.handleCredentialChange(b);case 9:return E.Kr.delete(3),N.next=12,Zp(E);case 12:case"end":return N.stop()}},m)})),function(m,_){return d.apply(this,arguments)})(n.remoteStore,c);var d}),s.onlineComponents=n;case 12:case"end":return u.stop()}},i)}))).apply(this,arguments)}function eT(i){return tT.apply(this,arguments)}function tT(){return(tT=(0,Ut.Z)(Ze().mark(function i(s){return Ze().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=s.offlineComponents,r.t0){r.next=5;break}return wn("FirestoreClient","Using default OfflineComponentProvider"),r.next=5,Wo(s,new KN);case 5:return r.abrupt("return",s.offlineComponents);case 6:case"end":return r.stop()}},i)}))).apply(this,arguments)}function nT(i){return xI.apply(this,arguments)}function xI(){return(xI=(0,Ut.Z)(Ze().mark(function i(s){return Ze().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=s.onlineComponents,r.t0){r.next=5;break}return wn("FirestoreClient","Using default OnlineComponentProvider"),r.next=5,AI(s,new Xd);case 5:return r.abrupt("return",s.onlineComponents);case 6:case"end":return r.stop()}},i)}))).apply(this,arguments)}function II(i){return eT(i).then(function(s){return s.persistence})}function rT(i){return eT(i).then(function(s){return s.localStore})}function XN(i){return nT(i).then(function(s){return s.remoteStore})}function iT(i){return nT(i).then(function(s){return s.syncEngine})}function xy(i){return Nb.apply(this,arguments)}function Nb(){return(Nb=(0,Ut.Z)(Ze().mark(function i(s){var n,r;return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,nT(s);case 2:return o.abrupt("return",((r=(n=o.sent).eventManager).onListen=_I.bind(null,n.syncEngine),r.onUnlisten=Ab.bind(null,n.syncEngine),r));case 5:case"end":return o.stop()}},i)}))).apply(this,arguments)}function RI(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ro;return i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function a(){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=function(c,d,m,_,b){var E=new Lb({next:function(N){d.enqueueAndForget(function(){return zp(c,T)});var W=N.docs.has(m);!W&&N.fromCache?b.reject(new en(Lt.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&N.fromCache&&_&&"server"===_.source?b.reject(new en(Lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(N)},error:function(N){return b.reject(N)}}),T=new VS(zd(m.path),E,{includeMetadataChanges:!0,uo:!0});return BS(c,T)},u.next=3,xy(i);case 3:return u.t1=u.sent,u.t2=i.asyncQueue,u.t3=s,u.t4=n,u.t5=r,u.abrupt("return",(0,u.t0)(u.t1,u.t2,u.t3,u.t4,u.t5));case 9:case"end":return u.stop()}},a)}))),r.promise}function JN(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ro;return i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function a(){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=function(c,d,m,_,b){var E=new Lb({next:function(N){d.enqueueAndForget(function(){return zp(c,T)}),N.fromCache&&"server"===_.source?b.reject(new en(Lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(N)},error:function(N){return b.reject(N)}}),T=new VS(m,E,{includeMetadataChanges:!0,uo:!0});return BS(c,T)},u.next=3,xy(i);case 3:return u.t1=u.sent,u.t2=i.asyncQueue,u.t3=s,u.t4=n,u.t5=r,u.abrupt("return",(0,u.t0)(u.t1,u.t2,u.t3,u.t4,u.t5));case 9:case"end":return u.stop()}},a)}))),r.promise}var iF=function i(s,n,r,a,o,u,c,d){(0,M.Z)(this,i),this.databaseId=s,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.useFetchStreams=d},Fb=function(){function i(s,n){(0,M.Z)(this,i),this.projectId=s,this.database=n||"(default)"}return(0,D.Z)(i,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(n){return n instanceof i&&n.projectId===this.projectId&&n.database===this.database}}]),i}(),PI=new Map;function aT(i,s,n){if(!n)throw new en(Lt.INVALID_ARGUMENT,"Function ".concat(i,"() cannot be called with an empty ").concat(s,"."))}function aF(i,s,n,r){if(!0===s&&!0===r)throw new en(Lt.INVALID_ARGUMENT,"".concat(i," and ").concat(n," cannot be used together."))}function sT(i){if(!fr.isDocumentKey(i))throw new en(Lt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(i," has ").concat(i.length,"."))}function OI(i){if(fr.isDocumentKey(i))throw new en(Lt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(i," has ").concat(i.length,"."))}function Zb(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i="".concat(i.substring(0,20),"...")),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";var s=(n=i).constructor?n.constructor.name:null;return s?"a custom ".concat(s," object"):"an object"}var n;return"function"==typeof i?"a function":ar()}function Ni(i,s){if("_delegate"in i&&(i=i._delegate),!(i instanceof s)){if(s.name===i.constructor.name)throw new en(Lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Zb(i);throw new en(Lt.INVALID_ARGUMENT,"Expected type '".concat(s.name,"', but it was: ").concat(n))}return i}function LI(i,s){if(s<=0)throw new en(Lt.INVALID_ARGUMENT,"Function ".concat(i,"() requires a positive number, but it was: ").concat(s,"."))}var NI=function(){function i(s){var n;if((0,M.Z)(this,i),void 0===s.host){if(void 0!==s.ssl)throw new en(Lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=s.host,this.ssl=null===(n=s.ssl)||void 0===n||n;if(this.credentials=s.credentials,this.ignoreUndefinedProperties=!!s.ignoreUndefinedProperties,void 0===s.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==s.cacheSizeBytes&&s.cacheSizeBytes<1048576)throw new en(Lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=s.cacheSizeBytes}this.experimentalForceLongPolling=!!s.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!s.experimentalAutoDetectLongPolling,this.useFetchStreams=!!s.useFetchStreams,aF("experimentalForceLongPolling",s.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",s.experimentalAutoDetectLongPolling)}return(0,D.Z)(i,[{key:"isEqual",value:function(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}]),i}(),Yp=function(){function i(s,n){(0,M.Z)(this,i),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NI({}),this._settingsFrozen=!1,s instanceof Fb?this._databaseId=s:(this._app=s,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new en(Lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fb(r.options.projectId)}(s))}return(0,D.Z)(i,[{key:"app",get:function(){if(!this._app)throw new en(Lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(n){if(this._settingsFrozen)throw new en(Lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NI(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new ZL;switch(r.type){case"gapi":var a=r.client;return Ir(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new j0(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new en(Lt.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return(r=PI.get(this))&&(wn("ComponentProvider","Removing Datastore"),PI.delete(this),r.terminate()),Promise.resolve();var r}}]),i}();function sF(i,s,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(i=Ni(i,Yp))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==s&&ip("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},o),{host:"".concat(s,":").concat(n),ssl:!1})),r.mockUserToken){var u,c;if("string"==typeof r.mockUserToken)u=r.mockUserToken,c=no.MOCK_USER;else{u=(0,Me.Sg)(r.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);var d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new en(Lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new no(d)}i._credentials=new BL(new g1(u,c))}}var Xa=function(){function i(s,n,r){(0,M.Z)(this,i),this.converter=n,this._key=r,this.type="document",this.firestore=s}return(0,D.Z)(i,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Qd(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(n){return new i(this.firestore,n,this._key)}}]),i}(),qu=function(){function i(s,n,r){(0,M.Z)(this,i),this.converter=n,this._query=r,this.type="query",this.firestore=s}return(0,D.Z)(i,[{key:"withConverter",value:function(n){return new i(this.firestore,n,this._query)}}]),i}(),Qd=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a,zd(o)))._path=o,u.type="collection",u}return(0,D.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var a=this._path.popLast();return a.isEmpty()?null:new Xa(this.firestore,null,new fr(a))}},{key:"withConverter",value:function(a){return new n(this.firestore,a,this._path)}}]),n}(qu);function oF(i,s){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(i=(0,Me.m9)(i),aT("collection","path",s),i instanceof Yp){var o=Wr.fromString.apply(Wr,[s].concat(r));return OI(o),new Qd(i,null,o)}if(!(i instanceof Xa||i instanceof Qd))throw new en(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=i._path.child(Wr.fromString.apply(Wr,[s].concat(r)));return OI(u),new Qd(i.firestore,null,u)}function Bb(i,s){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(i=(0,Me.m9)(i),1===arguments.length&&(s=kh.I()),aT("doc","path",s),i instanceof Yp){var o=Wr.fromString.apply(Wr,[s].concat(r));return sT(o),new Xa(i,null,new fr(o))}if(!(i instanceof Xa||i instanceof Qd))throw new en(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=i._path.child(Wr.fromString.apply(Wr,[s].concat(r)));return sT(u),new Xa(i.firestore,i instanceof Qd?i.converter:null,new fr(u))}function FI(i,s){return i=(0,Me.m9)(i),s=(0,Me.m9)(s),(i instanceof Xa||i instanceof Qd)&&(s instanceof Xa||s instanceof Qd)&&i.firestore===s.firestore&&i.path===s.path&&i.converter===s.converter}function ZI(i,s){return i=(0,Me.m9)(i),s=(0,Me.m9)(s),i instanceof qu&&s instanceof qu&&i.firestore===s.firestore&&$g(i._query,s._query)&&i.converter===s.converter}var uF=function(){function i(){var s=this;(0,M.Z)(this,i),this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Np(this,"async_queue_retry"),this.Ea=function(){var r=CS();r&&wn("AsyncQueue","Visibility state changed to "+r.visibilityState),s.rr.tr()};var n=CS();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}return(0,D.Z)(i,[{key:"isShuttingDown",get:function(){return this.wa}},{key:"enqueueAndForget",value:function(n){this.enqueue(n)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(n){this.Ta(),this.Ia(n)}},{key:"enterRestrictedMode",value:function(n){if(!this.wa){this.wa=!0,this.ya=n||!1;var r=CS();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}},{key:"enqueue",value:function(n){var r=this;if(this.Ta(),this.wa)return new Promise(function(){});var a=new ro;return this.Ia(function(){return r.wa&&r.ya?Promise.resolve():(n().then(a.resolve,a.reject),a.promise)}).then(function(){return a.promise})}},{key:"enqueueRetryable",value:function(n){var r=this;this.enqueueAndForget(function(){return r.da.push(n),r.Aa()})}},{key:"Aa",value:(s=(0,Ut.Z)(Ze().mark(function r(){var a=this;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(0===this.da.length){u.next=14;break}return u.prev=1,u.next=4,this.da[0]();case 4:this.da.shift(),this.rr.reset(),u.next=13;break;case 8:if(u.prev=8,u.t0=u.catch(1),Mp(u.t0)){u.next=12;break}throw u.t0;case 12:wn("AsyncQueue","Operation failed with retryable error: "+u.t0);case 13:this.da.length>0&&this.rr.Xi(function(){return a.Aa()});case 14:case"end":return u.stop()}},r,this,[[1,8]])})),function(){return s.apply(this,arguments)})},{key:"Ia",value:function(n){var r=this,a=this.fa.then(function(){return r.ga=!0,n().catch(function(o){throw r.ma=o,r.ga=!1,ys("INTERNAL UNHANDLED ERROR: ",(c=(u=o).message||"",u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c)),o;var u,c}).then(function(o){return r.ga=!1,o})});return this.fa=a,a}},{key:"enqueueAfterDelay",value:function(n,r,a){var o=this;this.Ta(),this.pa.indexOf(n)>-1&&(r=0);var u=UN.createAndSchedule(this,n,r,a,function(c){return o.Ra(c)});return this._a.push(u),u}},{key:"Ta",value:function(){this.ma&&ar()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ba",value:function(){var s=(0,Ut.Z)(Ze().mark(function r(){var a;return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=this.fa,u.next=3,a;case 3:if(a!==this.fa){u.next=0;break}case 4:case"end":return u.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"Pa",value:function(n){var a,r=(0,Re.Z)(this._a);try{for(r.s();!(a=r.n()).done;)if(a.value.timerId===n)return!0}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"va",value:function(n){var r=this;return this.ba().then(function(){r._a.sort(function(c,d){return c.targetTimeMs-d.targetTimeMs});var o,a=(0,Re.Z)(r._a);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(u.skipDelay(),"all"!==n&&u.timerId===n)break}}catch(c){a.e(c)}finally{a.f()}return r.ba()})}},{key:"Va",value:function(n){this.pa.push(n)}},{key:"Ra",value:function(n){var r=this._a.indexOf(n);this._a.splice(r,1)}}]),i;var s}();function uT(i){return function(s,n){if("object"!=typeof s||null===s)return!1;var o,r=s,a=(0,Re.Z)(["next","error","complete"]);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(u in r&&"function"==typeof r[u])return!0}}catch(c){a.e(c)}finally{a.f()}return!1}(i)}var lF=function(){function i(){(0,M.Z)(this,i),this._progressObserver={},this._taskCompletionResolver=new ro,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,D.Z)(i,[{key:"onProgress",value:function(n,r,a){this._progressObserver={next:n,error:r,complete:a}}},{key:"catch",value:function(n){return this._taskCompletionResolver.promise.catch(n)}},{key:"then",value:function(n,r){return this._taskCompletionResolver.promise.then(n,r)}},{key:"_completeWith",value:function(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}},{key:"_failWith",value:function(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}},{key:"_updateProgress",value:function(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}]),i}(),Ua=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="firestore",o._queue=new uF,o._persistenceKey="name"in r?r.name:"[DEFAULT]",o}return(0,D.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||lT(this),this._firestoreClient.terminate()}}]),n}(Yp);function Ti(i){return i._firestoreClient||lT(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function lT(i){var s,o,c,n=i._freezeSettings(),r=(o=(null===(s=i._app)||void 0===s?void 0:s.options.appId)||"",new iF(i._databaseId,o,i._persistenceKey,(c=n).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));i._firestoreClient=new fV(i._credentials,i._queue,r)}function UI(i,s,n){var r=new ro;return i.asyncQueue.enqueue((0,Ut.Z)(Ze().mark(function a(){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Wo(i,n);case 3:return u.next=5,AI(i,s);case 5:r.resolve(),u.next=13;break;case 8:if(u.prev=8,u.t0=u.catch(0),"FirebaseError"===(c=u.t0).name?c.code===Lt.FAILED_PRECONDITION||c.code===Lt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code){u.next=12;break}throw u.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u.t0),r.reject(u.t0);case 13:case"end":return u.stop()}var c},a,null,[[0,8]])}))).then(function(){return r.promise})}function jI(i){if(i._initialized||i._terminated)throw new en(Lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Uh=function(){function i(){(0,M.Z)(this,i);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new en(Lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jo(n)}return(0,D.Z)(i,[{key:"isEqual",value:function(n){return this._internalPath.isEqual(n._internalPath)}}]),i}(),Vh=function(){function i(s){(0,M.Z)(this,i),this._byteString=s}return(0,D.Z)(i,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(n){return this._byteString.isEqual(n._byteString)}}],[{key:"fromBase64String",value:function(n){try{return new i(ao.fromBase64String(n))}catch(r){throw new en(Lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}},{key:"fromUint8Array",value:function(n){return new i(ao.fromUint8Array(n))}}]),i}(),pl=function i(s){(0,M.Z)(this,i),this._methodName=s},fT=function(){function i(s,n){if((0,M.Z)(this,i),!isFinite(s)||s<-90||s>90)throw new en(Lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+s);if(!isFinite(n)||n<-180||n>180)throw new en(Lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=s,this._long=n}return(0,D.Z)(i,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(n){return this._lat===n._lat&&this._long===n._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(n){return Jr(this._lat,n._lat)||Jr(this._long,n._long)}}]),i}(),WI=/^__.*__$/,hF=function(){function i(s,n,r){(0,M.Z)(this,i),this.data=s,this.fieldMask=n,this.fieldTransforms=r}return(0,D.Z)(i,[{key:"toMutation",value:function(n,r){return null!==this.fieldMask?new bf(n,this.data,this.fieldMask,r,this.fieldTransforms):new Xg(n,this.data,r,this.fieldTransforms)}}]),i}(),dF=function(){function i(s,n,r){(0,M.Z)(this,i),this.data=s,this.fieldMask=n,this.fieldTransforms=r}return(0,D.Z)(i,[{key:"toMutation",value:function(n,r){return new bf(n,this.data,this.fieldMask,r,this.fieldTransforms)}}]),i}();function hT(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ar()}}var qI=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.settings=s,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=a,void 0===o&&this.Sa(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return(0,D.Z)(i,[{key:"path",get:function(){return this.settings.path}},{key:"Da",get:function(){return this.settings.Da}},{key:"Ca",value:function(n){return new i(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Na",value:function(n){var r,a=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:a,xa:!1});return o.ka(n),o}},{key:"$a",value:function(n){var r,a=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:a,xa:!1});return o.Sa(),o}},{key:"Oa",value:function(n){return this.Ca({path:void 0,xa:!0})}},{key:"Fa",value:function(n){return zb(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}},{key:"contains",value:function(n){return void 0!==this.fieldMask.find(function(r){return n.isPrefixOf(r)})||void 0!==this.fieldTransforms.find(function(r){return n.isPrefixOf(r.field)})}},{key:"Sa",value:function(){if(this.path)for(var n=0;n<this.path.length;n++)this.ka(this.path.get(n))}},{key:"ka",value:function(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(hT(this.Da)&&WI.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}]),i}(),dT=function(){function i(s,n,r){(0,M.Z)(this,i),this.databaseId=s,this.ignoreUndefinedProperties=n,this.N=r||my(s)}return(0,D.Z)(i,[{key:"Ba",value:function(n,r,a){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qI({Da:n,methodName:r,La:a,path:jo.emptyPath(),xa:!1,Ma:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),i}();function Hh(i){var s=i._freezeSettings(),n=my(i._databaseId);return new dT(i._databaseId,!!s.ignoreUndefinedProperties,n)}function Ub(i,s,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=i.Ba(o.merge||o.mergeFields?2:0,s,n,a);Vb("Data must be an object, but it was:",u,r);var d,m,c=gT(r,u);if(o.merge)d=new Zl(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){var E,_=[],b=(0,Re.Z)(o.mergeFields);try{for(b.s();!(E=b.n()).done;){var T=E.value,I=Hb(s,T,n);if(!u.contains(I))throw new en(Lt.INVALID_ARGUMENT,"Field '".concat(I,"' is specified in your field mask but missing from your input data."));KI(_,I)||_.push(I)}}catch(N){b.e(N)}finally{b.f()}d=new Zl(_),m=u.fieldTransforms.filter(function(N){return d.covers(N.field)})}else d=null,m=u.fieldTransforms;return new hF(new Gu(c),d,m)}var vT=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"_toFieldTransform",value:function(a){if(2!==a.Da)throw a.Fa("".concat(this._methodName,1===a.Da?"() can only appear at the top level of your update data":"() cannot be used with set() unless you pass {merge:true}"));return a.fieldMask.push(a.path),null}},{key:"isEqual",value:function(a){return a instanceof n}}]),n}(pl);function YI(i,s,n){return new qI({Da:3,La:s.settings.La,methodName:i._methodName,xa:n},s.databaseId,s.N,s.ignoreUndefinedProperties)}var vF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"_toFieldTransform",value:function(a){return new yp(a.path,new Mh)}},{key:"isEqual",value:function(a){return a instanceof n}}]),n}(pl),pF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).Ua=a,o}return(0,D.Z)(n,[{key:"_toFieldTransform",value:function(a){var o=YI(this,a,!0),u=this.Ua.map(function(d){return zh(d,o)}),c=new _f(u);return new yp(a.path,c)}},{key:"isEqual",value:function(a){return this===a}}]),n}(pl),mF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).Ua=a,o}return(0,D.Z)(n,[{key:"_toFieldTransform",value:function(a){var o=YI(this,a,!0),u=this.Ua.map(function(d){return zh(d,o)}),c=new gp(u);return new yp(a.path,c)}},{key:"isEqual",value:function(a){return this===a}}]),n}(pl),gF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).qa=a,o}return(0,D.Z)(n,[{key:"_toFieldTransform",value:function(a){var o=new jd(a.N,mp(a.N,this.qa));return new yp(a.path,o)}},{key:"isEqual",value:function(a){return this===a}}]),n}(pl);function pT(i,s,n,r){var a=i.Ba(1,s,n);Vb("Data must be an object, but it was:",a,r);var o=[],u=Gu.empty();os(r,function(d,m){var _=_T(s,d,n);m=(0,Me.m9)(m);var b=a.$a(_);if(m instanceof vT)o.push(_);else{var E=zh(m,b);null!=E&&(o.push(_),u.set(_,E))}});var c=new Zl(o);return new dF(u,c,a.fieldTransforms)}function mT(i,s,n,r,a,o){var u=i.Ba(1,s,n),c=[Hb(s,r,n)],d=[a];if(o.length%2!=0)throw new en(Lt.INVALID_ARGUMENT,"Function ".concat(s,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var m=0;m<o.length;m+=2)c.push(Hb(s,o[m])),d.push(o[m+1]);for(var _=[],b=Gu.empty(),E=c.length-1;E>=0;--E)if(!KI(_,c[E])){var T=c[E],I=d[E];I=(0,Me.m9)(I);var N=u.$a(T);if(I instanceof vT)_.push(T);else{var W=zh(I,N);null!=W&&(_.push(T),b.set(T,W))}}var U=new Zl(_);return new dF(b,U,u.fieldTransforms)}function Kp(i,s,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return zh(n,i.Ba(r?4:3,s))}function zh(i,s){if(yT(i=(0,Me.m9)(i)))return Vb("Unsupported field value:",s,i),gT(i,s);if(i instanceof pl)return function(n,r){if(!hT(r.Da))throw r.Fa("".concat(n._methodName,"() can only be used with update() and set()"));if(!r.path)throw r.Fa("".concat(n._methodName,"() is not currently supported inside arrays"));var a=n._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(i,s),null;if(void 0===i&&s.ignoreUndefinedProperties)return null;if(s.path&&s.fieldMask.push(s.path),i instanceof Array){if(s.settings.xa&&4!==s.Da)throw s.Fa("Nested arrays are not supported");return function(n,r){var c,a=[],o=0,u=(0,Re.Z)(n);try{for(u.s();!(c=u.n()).done;){var m=zh(c.value,r.Oa(o));null==m&&(m={nullValue:"NULL_VALUE"}),a.push(m),o++}}catch(_){u.e(_)}finally{u.f()}return{arrayValue:{values:a}}}(i,s)}return function(n,r){if(null===(n=(0,Me.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return mp(r.N,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){var a=Go.fromDate(n);return{timestampValue:ou(r.N,a)}}if(n instanceof Go){var o=new Go(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ou(r.N,o)}}if(n instanceof fT)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vh)return{bytesValue:dl(r.N,n._byteString)};if(n instanceof Xa){var u=r.databaseId,c=n.firestore._databaseId;if(!c.isEqual(u))throw r.Fa("Document reference is for database ".concat(c.projectId,"/").concat(c.database," but should be for database ").concat(u.projectId,"/").concat(u.database));return{referenceValue:HC(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Fa("Unsupported field value: ".concat(Zb(n)))}(i,s)}function gT(i,s){var n={};return Eh(i)?s.path&&s.path.length>0&&s.fieldMask.push(s.path):os(i,function(r,a){var o=zh(a,s.Na(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function yT(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Go||i instanceof fT||i instanceof Vh||i instanceof Xa||i instanceof pl)}function Vb(i,s,n){if(!yT(n)||"object"!=typeof(a=n)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){var r=Zb(n);throw s.Fa("an object"===r?i+" a custom object":i+" "+r)}var a}function Hb(i,s,n){if((s=(0,Me.m9)(s))instanceof Uh)return s._internalPath;if("string"==typeof s)return _T(i,s);throw zb("Field path arguments must be of type string or FieldPath.",i,!1,void 0,n)}var yF=new RegExp("[~\\*/\\[\\]]");function _T(i,s,n){if(s.search(yF)>=0)throw zb("Invalid field path (".concat(s,"). Paths must not contain '~', '*', '/', '[', or ']'"),i,!1,void 0,n);try{return(0,pE.Z)(Uh,(0,Gr.Z)(s.split(".")))._internalPath}catch(r){throw zb("Invalid field path (".concat(s,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),i,!1,void 0,n)}}function zb(i,s,n,r,a){var o=r&&!r.isEmpty(),u=void 0!==a,c="Function ".concat(s,"() called with invalid data");n&&(c+=" (via `toFirestore()`)"),c+=". ";var d="";return(o||u)&&(d+=" (found",o&&(d+=" in field ".concat(r)),u&&(d+=" in document ".concat(a)),d+=")"),new en(Lt.INVALID_ARGUMENT,c+i+d)}function KI(i,s){return i.some(function(n){return n.isEqual(s)})}var Dy=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this._firestore=s,this._userDataWriter=n,this._key=r,this._document=a,this._converter=o}return(0,D.Z)(i,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Xa(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var n=new _F(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(n){if(this._document){var r=this._document.data.field(Gb("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}]),i}(),_F=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"data",value:function(){return(0,_e.Z)((0,de.Z)(n.prototype),"data",this).call(this)}}]),n}(Dy);function Gb(i,s){return"string"==typeof s?_T(i,s):s instanceof Uh?s._internalPath:s._delegate._internalPath}var ql=function(){function i(s,n){(0,M.Z)(this,i),this.hasPendingWrites=s,this.fromCache=n}return(0,D.Z)(i,[{key:"isEqual",value:function(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}]),i}(),Yu=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d){var m;return(0,M.Z)(this,n),(m=s.call(this,r,a,o,u,d))._firestore=r,m._firestoreImpl=r,m.metadata=c,m}return(0,D.Z)(n,[{key:"exists",value:function(){return(0,_e.Z)((0,de.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var o=new Ry(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,a)}return this._userDataWriter.convertValue(this._document.data.value,a.serverTimestamps)}}},{key:"get",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var u=this._document.data.field(Gb("DocumentSnapshot.get",a));if(null!==u)return this._userDataWriter.convertValue(u,o.serverTimestamps)}}}]),n}(Dy),Ry=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"data",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_e.Z)((0,de.Z)(n.prototype),"data",this).call(this,a)}}]),n}(Yu),Nc=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._firestore=s,this._userDataWriter=n,this._snapshot=a,this.metadata=new ql(a.hasPendingWrites,a.fromCache),this.query=r}return(0,D.Z)(i,[{key:"docs",get:function(){var n=[];return this.forEach(function(r){return n.push(r)}),n}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(n,r){var a=this;this._snapshot.docs.forEach(function(o){n.call(r,new Ry(a._firestore,a._userDataWriter,o.key,o,new ql(a._snapshot.mutatedKeys.has(o.key),a._snapshot.fromCache),a.query.converter))})}},{key:"docChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new en(Lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){var u=0;return a._snapshot.docChanges.map(function(d){return{type:"added",doc:new Ry(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ql(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:u++}})}var c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(function(d){return o||3!==d.type}).map(function(d){var m=new Ry(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ql(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter),_=-1,b=-1;return 0!==d.type&&(_=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),1!==d.type&&(b=(c=c.add(d.doc)).indexOf(d.doc.key)),{type:Fc(d.type),doc:m,oldIndex:_,newIndex:b}})}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}]),i}();function Fc(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ar()}}function $I(i,s){return i instanceof Yu&&s instanceof Yu?i._firestore===s._firestore&&i._key.isEqual(s._key)&&(null===i._document?null===s._document:i._document.isEqual(s._document))&&i._converter===s._converter:i instanceof Nc&&s instanceof Nc&&i._firestore===s._firestore&&ZI(i.query,s.query)&&i.metadata.isEqual(s.metadata)&&i._snapshot.isEqual(s._snapshot)}function jb(i){if(Yg(i)&&0===i.explicitOrderBy.length)throw new en(Lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Py=function i(){(0,M.Z)(this,i)};function Gh(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var u=o[a];i=u._apply(i)}return i}var gV=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).Ka=r,u.ja=a,u.Qa=o,u.type="where",u}return(0,D.Z)(n,[{key:"_apply",value:function(a){var c,m,o=Hh(a.firestore),u=function(c,d,m,_,b,E,T){var I;if(b.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new en(Lt.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(E,"' queries on FieldPath.documentId()."));if("in"===E||"not-in"===E){CT(T,E);var U,N=[],W=(0,Re.Z)(T);try{for(W.s();!(U=W.n()).done;)N.push(ET(_,c,U.value))}catch(ue){W.e(ue)}finally{W.f()}I={arrayValue:{values:N}}}else I=ET(_,c,T)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||CT(T,E),I=Kp(m,"where",T,"in"===E||"not-in"===E);var te=fl.create(b,E,I);return function(ue,le){if(le.v()){var he=wC(ue);if(null!==he&&!he.isEqual(le.field))throw new en(Lt.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(he.toString(),"' and '").concat(le.field.toString(),"'"));var se=bC(ue);null!==se&&tD(0,le.field,se)}var ye=function(Ue,Ve){var et,Fe=(0,Re.Z)(Ue.filters);try{for(Fe.s();!(et=Fe.n()).done;){var Ye=et.value;if(Ve.indexOf(Ye.op)>=0)return Ye.op}}catch(tt){Fe.e(tt)}finally{Fe.f()}return null}(ue,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(le.op));if(null!==ye)throw new en(Lt.INVALID_ARGUMENT,ye===le.op?"Invalid query. You cannot use more than one '".concat(le.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(le.op.toString(),"' filters with '").concat(ye.toString(),"' filters."))}(c,te),te}(a._query,0,o,a.firestore._databaseId,this.Ka,this.ja,this.Qa);return new qu(a.firestore,a.converter,(m=(c=a._query).filters.concat([u]),new yf(c.path,c.collectionGroup,c.explicitOrderBy.slice(),m,c.limit,c.limitType,c.startAt,c.endAt)))}}]),n}(Py),wF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).Ka=r,o.Wa=a,o.type="orderBy",o}return(0,D.Z)(n,[{key:"_apply",value:function(a){var u,d,o=function(u,c,d){if(null!==u.startAt)throw new en(Lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new en(Lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var m=new vp(c,d);return function(_,b){if(null===bC(_)){var E=wC(_);null!==E&&tD(0,E,b.field)}}(u,m),m}(a._query,this.Ka,this.Wa);return new qu(a.firestore,a.converter,(d=(u=a._query).explicitOrderBy.concat([o]),new yf(u.path,u.collectionGroup,d,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)))}}]),n}(Py),QI=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).type=r,u.Ga=a,u.za=o,u}return(0,D.Z)(n,[{key:"_apply",value:function(a){return new qu(a.firestore,a.converter,EC(a._query,this.Ga,this.za))}}]),n}(Py),JI=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).type=r,u.Ha=a,u.Ja=o,u}return(0,D.Z)(n,[{key:"_apply",value:function(a){var u,c,o=kT(a,this.type,this.Ha,this.Ja);return new qu(a.firestore,a.converter,(c=o,new yf((u=a._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)))}}]),n}(Py);function CF(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new JI("startAt",s,!0)}function SF(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new JI("startAfter",s,!1)}var bT=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).type=r,u.Ha=a,u.Ja=o,u}return(0,D.Z)(n,[{key:"_apply",value:function(a){var u,c,o=kT(a,this.type,this.Ha,this.Ja);return new qu(a.firestore,a.converter,(c=o,new yf((u=a._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)))}}]),n}(Py);function wT(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new bT("endBefore",s,!0)}function eD(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new bT("endAt",s,!1)}function kT(i,s,n,r){if(n[0]=(0,Me.m9)(n[0]),n[0]instanceof Dy)return function(o,u,c,d,m){if(!d)throw new en(Lt.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(c,"()."));var E,_=[],b=(0,Re.Z)(Kg(o));try{for(b.s();!(E=b.n()).done;){var T=E.value;if(T.field.isKeyField())_.push(Wg(u,d.key));else{var I=d.data.field(T.field);if(Ch(I))throw new en(Lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){var N=T.field.canonicalString();throw new en(Lt.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(N,"' (used as the orderBy) does not exist."))}_.push(I)}}}catch(W){b.e(W)}finally{b.f()}return new dp(_,m)}(i._query,i.firestore._databaseId,s,n[0]._document,r);var a=Hh(i.firestore);return function(o,u,c,d,m,_){var b=o.explicitOrderBy;if(m.length>b.length)throw new en(Lt.INVALID_ARGUMENT,"Too many arguments provided to ".concat(d,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var E=[],T=0;T<m.length;T++){var I=m[T];if(b[T].field.isKeyField()){if("string"!=typeof I)throw new en(Lt.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(d,"(), but got a ").concat(typeof I));if(!kC(o)&&-1!==I.indexOf("/"))throw new en(Lt.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(d,"() must be a plain document ID, but '").concat(I,"' contains a slash."));var N=o.path.child(Wr.fromString(I));if(!fr.isDocumentKey(N))throw new en(Lt.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(d,"() must result in a valid document path, but '").concat(N,"' is not because it contains an odd number of segments."));var W=new fr(N);E.push(Wg(u,W))}else{var U=Kp(c,d,I);E.push(U)}}return new dp(E,_)}(i._query,i.firestore._databaseId,a,s,n,r)}function ET(i,s,n){if("string"==typeof(n=(0,Me.m9)(n))){if(""===n)throw new en(Lt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!kC(s)&&-1!==n.indexOf("/"))throw new en(Lt.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=s.path.child(Wr.fromString(n));if(!fr.isDocumentKey(r))throw new en(Lt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Wg(i,new fr(r))}if(n instanceof Xa)return Wg(i,n._key);throw new en(Lt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Zb(n),"."))}function CT(i,s){if(!Array.isArray(i)||0===i.length)throw new en(Lt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(s.toString(),"' filters."));if(i.length>10)throw new en(Lt.INVALID_ARGUMENT,"Invalid Query. '".concat(s.toString(),"' filters support a maximum of 10 elements in the value array."))}function tD(i,s,n){if(!n.isEqual(s))throw new en(Lt.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(s.toString(),"' and so you must also use '").concat(s.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Wb=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"convertValue",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Th(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Ia(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Bl(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw ar()}}},{key:"convertObject",value:function(n,r){var a=this,o={};return os(n.fields,function(u,c){o[u]=a.convertValue(c,r)}),o}},{key:"convertGeoPoint",value:function(n){return new fT(Ia(n.latitude),Ia(n.longitude))}},{key:"convertArray",value:function(n,r){var a=this;return(n.values||[]).map(function(o){return a.convertValue(o,r)})}},{key:"convertServerTimestamp",value:function(n,r){switch(r){case"previous":var a=sC(n);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(lp(n));default:return null}}},{key:"convertTimestamp",value:function(n){var r=zu(n);return new Go(r.seconds,r.nanos)}},{key:"convertDocumentKey",value:function(n,r){var a=Wr.fromString(n);Ir(V1(a));var o=new Fb(a.get(1),a.get(3)),u=new fr(a.popFirst(5));return o.isEqual(r)||ys("Document ".concat(u," contains a document reference within a different database (").concat(o.projectId,"/").concat(o.database,") which is not supported. It will be treated as a reference in the current database (").concat(r.projectId,"/").concat(r.database,") instead.")),u}}]),i}();function Oy(i,s,n){return i?n&&(n.merge||n.mergeFields)?i.toFirestore(s,n):i.toFirestore(s):s}var TF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).firestore=r,a}return(0,D.Z)(n,[{key:"convertBytes",value:function(a){return new Vh(a)}},{key:"convertReference",value:function(a){var o=this.convertDocumentKey(a,this.firestore._databaseId);return new Xa(this.firestore,null,o)}}]),n}(Wb),ST=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Hh(s)}return(0,D.Z)(i,[{key:"set",value:function(n,r,a){this._verifyNotCommitted();var o=jh(n,this._firestore),u=Oy(o.converter,r,a),c=Ub(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,a);return this._mutations.push(c.toMutation(o._key,so.none())),this}},{key:"update",value:function(n,r,a){this._verifyNotCommitted();for(var u,o=jh(n,this._firestore),c=arguments.length,d=new Array(c>3?c-3:0),m=3;m<c;m++)d[m-3]=arguments[m];return u="string"==typeof(r=(0,Me.m9)(r))||r instanceof Uh?mT(this._dataReader,"WriteBatch.update",o._key,r,a,d):pT(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(u.toMutation(o._key,so.exists(!0))),this}},{key:"delete",value:function(n){this._verifyNotCommitted();var r=jh(n,this._firestore);return this._mutations=this._mutations.concat(new wp(r._key,so.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new en(Lt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),i}();function jh(i,s){if((i=(0,Me.m9)(i)).firestore!==s)throw new en(Lt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var bs=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).firestore=r,a}return(0,D.Z)(n,[{key:"convertBytes",value:function(a){return new Vh(a)}},{key:"convertReference",value:function(a){var o=this.convertDocumentKey(a,this.firestore._databaseId);return new Xa(this.firestore,null,o)}}]),n}(Wb);function nD(i,s,n){i=Ni(i,Xa);var r=Ni(i.firestore,Ua),a=Oy(i.converter,s,n);return Wh(r,[Ub(Hh(r),"setDoc",i._key,a,null!==i.converter,n).toMutation(i._key,so.none())])}function qb(i,s,n){i=Ni(i,Xa);for(var r=Ni(i.firestore,Ua),a=Hh(r),u=arguments.length,c=new Array(u>3?u-3:0),d=3;d<u;d++)c[d-3]=arguments[d];return Wh(r,[("string"==typeof(s=(0,Me.m9)(s))||s instanceof Uh?mT(a,"updateDoc",i._key,s,n,c):pT(a,"updateDoc",i._key,s)).toMutation(i._key,so.exists(!0))])}function iD(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a,o,u;i=(0,Me.m9)(i);var c={includeMetadataChanges:!1},d=0;"object"!=typeof n[d]||uT(n[d])||(c=n[d],d++);var b,E,T,W,U,H,ue,le,m={includeMetadataChanges:c.includeMetadataChanges};if(uT(n[d])){var _=n[d];n[d]=null===(a=_.next)||void 0===a?void 0:a.bind(_),n[d+1]=null===(o=_.error)||void 0===o?void 0:o.bind(_),n[d+2]=null===(u=_.complete)||void 0===u?void 0:u.bind(_)}if(i instanceof Xa)E=Ni(i.firestore,Ua),T=zd(i._key.path),b={next:function(U){n[d]&&n[d](Yb(E,i,U))},error:n[d+1],complete:n[d+2]};else{var I=Ni(i,qu);E=Ni(I.firestore,Ua),T=I._query;var N=new bs(E);b={next:function(U){n[d]&&n[d](new Nc(E,N,I,U))},error:n[d+1],complete:n[d+2]},jb(i._query)}return W=Ti(E),U=T,H=m,ue=new Lb(b),le=new VS(U,ue,H),W.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function he(){return Ze().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.t0=BS,ye.next=3,xy(W);case 3:return ye.t1=ye.sent,ye.t2=le,ye.abrupt("return",(0,ye.t0)(ye.t1,ye.t2));case 6:case"end":return ye.stop()}},he)}))),function(){ue.Xo(),W.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function he(){return Ze().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.t0=zp,ye.next=3,xy(W);case 3:return ye.t1=ye.sent,ye.t2=le,ye.abrupt("return",(0,ye.t0)(ye.t1,ye.t2));case 6:case"end":return ye.stop()}},he)})))}}function Wh(i,s){return n=Ti(i),r=s,a=new ro,n.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function o(){return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=wy,c.next=3,iT(n);case 3:return c.t1=c.sent,c.t2=r,c.t3=a,c.abrupt("return",(0,c.t0)(c.t1,c.t2,c.t3));case 7:case"end":return c.stop()}},o)}))),a.promise;var n,r,a}function Yb(i,s,n){var r=n.docs.get(s._key),a=new bs(i);return new Yu(i,a,s._key,r,new ql(n.hasPendingWrites,n.fromCache),s.converter)}var aD=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a))._firestore=r,o}return(0,D.Z)(n,[{key:"get",value:function(a){var o=this,u=jh(a,this._firestore),c=new bs(this._firestore);return(0,_e.Z)((0,de.Z)(n.prototype),"get",this).call(this,a).then(function(d){return new Yu(o._firestore,c,u._key,d._document,new ql(!1,!1),u.converter)})}}]),n}(function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._transaction=n,this._dataReader=Hh(s)}return(0,D.Z)(i,[{key:"get",value:function(n){var r=this,a=jh(n,this._firestore),o=new TF(this._firestore);return this._transaction.lookup([a._key]).then(function(u){if(!u||1!==u.length)return ar();var c=u[0];if(c.isFoundDocument())return new Dy(r._firestore,o,c.key,c,a.converter);if(c.isNoDocument())return new Dy(r._firestore,o,a._key,null,a.converter);throw ar()})}},{key:"set",value:function(n,r,a){var o=jh(n,this._firestore),u=Oy(o.converter,r,a),c=Ub(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,a);return this._transaction.set(o._key,c),this}},{key:"update",value:function(n,r,a){for(var u,o=jh(n,this._firestore),c=arguments.length,d=new Array(c>3?c-3:0),m=3;m<c;m++)d[m-3]=arguments[m];return u="string"==typeof(r=(0,Me.m9)(r))||r instanceof Uh?mT(this._dataReader,"Transaction.update",o._key,r,a,d):pT(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,u),this}},{key:"delete",value:function(n){var r=jh(n,this._firestore);return this._transaction.delete(r._key),this}}]),i}());function sD(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new pF("arrayUnion",s)}function RF(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new mF("arrayRemove",s)}function Ny(i,s){if(void 0===s)return{merge:!1};if(void 0!==s.mergeFields&&void 0!==s.merge)throw new en("invalid-argument","Invalid options passed to function ".concat(i,"(): You cannot ")+'specify both "merge" and "mergeFields".');return s}function lD(){if("undefined"==typeof Uint8Array)throw new en("unimplemented","Uint8Arrays are not available in this environment.")}function cD(){if("undefined"==typeof atob)throw new en("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){zg=i})(gh.SDK_VERSION),(0,gh._registerComponent)(new Nd.wA("firestore",function(i,s){var n=s.options,r=i.getProvider("app").getImmediate(),a=new Ua(r,new UL(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),a._setSettings(n),a},"PUBLIC")),(0,gh.registerVersion)("@firebase/firestore","3.1.0",void 0);var xT=function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,D.Z)(i,[{key:"toBase64",value:function(){return cD(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return lD(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(n){return this._delegate.isEqual(n._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(n){return cD(),new i(Vh.fromBase64String(n))}},{key:"fromUint8Array",value:function(n){return lD(),new i(Vh.fromUint8Array(n))}}]),i}();function $b(i){return function(i,s){if("object"!=typeof i||null===i)return!1;var a,n=i,r=(0,Re.Z)(["next","error","complete"]);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o in n&&"function"==typeof n[o])return!0}}catch(u){r.e(u)}finally{r.f()}return!1}(i)}var OF=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"enableIndexedDbPersistence",value:function(n,r){return function(i,s){jI(i=Ni(i,Ua));var n=Ti(i),r=i._freezeSettings(),a=new Xd;return UI(n,a,new Dr(a,r.cacheSizeBytes,null==s?void 0:s.forceOwnership))}(n._delegate,{forceOwnership:r})}},{key:"enableMultiTabIndexedDbPersistence",value:function(n){return function(i){jI(i=Ni(i,Ua));var s=Ti(i),n=i._freezeSettings(),r=new Xd;return UI(s,r,new uV(r,n.cacheSizeBytes))}(n._delegate)}},{key:"clearIndexedDbPersistence",value:function(n){return function(i){if(i._initialized&&!i._terminated)throw new en(Lt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var s=new ro;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ut.Z)(Ze().mark(function n(){return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,function(){var o=(0,Ut.Z)(Ze().mark(function u(c){var d;return Ze().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(Tp.bt()){_.next=2;break}return _.abrupt("return",Promise.resolve());case 2:return d=c+"main",_.next=5,Tp.delete(d);case 5:case"end":return _.stop()}},u)}));return function(u){return o.apply(this,arguments)}}()(fS(i._databaseId,i._persistenceKey));case 3:s.resolve(),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),s.reject(a.t0);case 9:case"end":return a.stop()}},n,null,[[0,6]])}))),s.promise}(n._delegate)}}]),i}(),IT=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return a.terminate()}},s instanceof Fb||(this._appCompat=s)}return(0,D.Z)(i,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(n){var r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&ip("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}},{key:"useEmulator",value:function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};sF(this._delegate,n,r,a)}},{key:"enableNetwork",value:function(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ut.Z)(Ze().mark(function s(){var n,r;return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,II(i);case 2:return n=o.sent,o.next=5,XN(i);case 5:return r=o.sent,o.abrupt("return",(n.setNetworkEnabled(!0),c=void 0,(c=En(r)).Kr.delete(0),Zp(c)));case 7:case"end":return o.stop()}var c},s)})))}(Ti(i=Ni(i,Ua)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Ut.Z)(Ze().mark(function s(){var n,r;return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,II(i);case 2:return n=o.sent,o.next=5,XN(i);case 5:return r=o.sent,o.abrupt("return",(n.setNetworkEnabled(!1),function(){var u=(0,Ut.Z)(Ze().mark(function c(d){var m;return Ze().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return(m=En(d)).Kr.add(0),b.next=4,Sf(m);case 4:m.Wr.set("Offline");case 5:case"end":return b.stop()}},c)}));return function(c){return u.apply(this,arguments)}}()(r)));case 7:case"end":return o.stop()}},s)})))}(Ti(i=Ni(i,Ua)))}(this._delegate)}},{key:"enablePersistence",value:function(n){var r=!1,a=!1;return n&&aF("synchronizeTabs",r=!!n.synchronizeTabs,"experimentalForceOwningTab",a=!!n.experimentalForceOwningTab),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(i){return s=Ti(i=Ni(i,Ua)),n=new ro,s.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=kI,o.next=3,iT(s);case 3:return o.t1=o.sent,o.t2=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2));case 6:case"end":return o.stop()}},r)}))),n.promise;var s,n}(this._delegate)}},{key:"onSnapshotsInSync",value:function(n){return function(i,s){return function(i,s){var n=new Lb(s);return i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(u,c){En(u).Zr.add(c),c.next()},o.next=3,xy(i);case 3:return o.t1=o.sent,o.t2=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2));case 6:case"end":return o.stop()}},r)}))),function(){n.Xo(),i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(u,c){En(u).Zr.delete(c)},o.next=3,xy(i);case 3:return o.t1=o.sent,o.t2=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2));case 6:case"end":return o.stop()}},r)})))}}(Ti(i=Ni(i,Ua)),uT(s)?s:{next:s})}(this._delegate,n)}},{key:"app",get:function(){if(!this._appCompat)throw new en("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(n){try{return new Xb(this,oF(this._delegate,n))}catch(r){throw qo(r,"collection()","Firestore.collection()")}}},{key:"doc",value:function(n){try{return new xf(this,Bb(this._delegate,n))}catch(r){throw qo(r,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(n){try{return new Uy(this,function(i,s){if(i=Ni(i,Yp),aT("collectionGroup","collection id",s),s.indexOf("/")>=0)throw new en(Lt.INVALID_ARGUMENT,"Invalid collection ID '".concat(s,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new qu(i,null,(n=s,new yf(Wr.emptyPath(),n)));var n}(this._delegate,n))}catch(r){throw qo(r,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(n){var r=this;return function(i,s){return function(i,s){var n=new ro;return i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,nT(i).then(function(d){return d.datastore});case 2:new cV(i.asyncQueue,u.sent,s,n).run();case 4:case"end":return u.stop()}},r)}))),n.promise}(Ti(i),function(n){return s(new aD(i,n))})}(this._delegate,function(a){return n(new hD(r,a))})}},{key:"batch",value:function(){var n=this;return Ti(this._delegate),new DT(new ST(this._delegate,function(r){return Wh(n._delegate,r)}))}},{key:"loadBundle",value:function(n){return function(i,s){var n=Ti(i=Ni(i,Ua)),r=new lF;return function(i,s,n,r){var o,u,d,a=(o=n,u=my(s),d=function(d,m){if(d instanceof Uint8Array)return MI(d,m);if(d instanceof ArrayBuffer)return MI(new Uint8Array(d),m);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof o?(new TextEncoder).encode(o):o),new $N(d,u));i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function o(){return Ze().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=oV,c.next=3,iT(i);case 3:c.t1=c.sent,c.t2=a,c.t3=r,(0,c.t0)(c.t1,c.t2,c.t3);case 7:case"end":return c.stop()}},o)})))}(n,i._databaseId,s,r),r}(this._delegate,n)}},{key:"namedQuery",value:function(n){var r=this;return function(i,s){return function(i,s){return i.asyncQueue.enqueue((0,Ut.Z)(Ze().mark(function n(){return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(o,u){var c=En(o);return c.persistence.runTransaction("Get named query","readonly",function(d){return c.Je.getNamedQuery(d,u)})},a.next=3,rT(i);case 3:return a.t1=a.sent,a.t2=s,a.abrupt("return",(0,a.t0)(a.t1,a.t2));case 6:case"end":return a.stop()}},n)})))}(Ti(i=Ni(i,Ua)),s).then(function(n){return n?new qu(i,null,n.query):null})}(this._delegate,n).then(function(a){return a?new Uy(r,a):null})}}]),i}(),Fy=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).firestore=r,a}return(0,D.Z)(n,[{key:"convertBytes",value:function(a){return new xT(new Vh(a))}},{key:"convertReference",value:function(a){var o=this.convertDocumentKey(a,this.firestore._databaseId);return xf.forKey(o,this.firestore,null)}}]),n}(Wb),hD=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n,this._userDataWriter=new Fy(s)}return(0,D.Z)(i,[{key:"get",value:function(n){var r=this,a=Jd(n);return this._delegate.get(a).then(function(o){return new Zy(r._firestore,new Yu(r._firestore._delegate,r._userDataWriter,o._key,o._document,o.metadata,a.converter))})}},{key:"set",value:function(n,r,a){var o=Jd(n);return a?(Ny("Transaction.set",a),this._delegate.set(o,r,a)):this._delegate.set(o,r),this}},{key:"update",value:function(n,r,a){for(var o=arguments.length,u=new Array(o>3?o-3:0),c=3;c<o;c++)u[c-3]=arguments[c];var m,d=Jd(n);return 2===arguments.length?this._delegate.update(d,r):(m=this._delegate).update.apply(m,[d,r,a].concat(u)),this}},{key:"delete",value:function(n){var r=Jd(n);return this._delegate.delete(r),this}}]),i}(),DT=function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,D.Z)(i,[{key:"set",value:function(n,r,a){var o=Jd(n);return a?(Ny("WriteBatch.set",a),this._delegate.set(o,r,a)):this._delegate.set(o,r),this}},{key:"update",value:function(n,r,a){for(var o=arguments.length,u=new Array(o>3?o-3:0),c=3;c<o;c++)u[c-3]=arguments[c];var m,d=Jd(n);return 2===arguments.length?this._delegate.update(d,r):(m=this._delegate).update.apply(m,[d,r,a].concat(u)),this}},{key:"delete",value:function(n){var r=Jd(n);return this._delegate.delete(r),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),i}(),RT=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._firestore=n,this._userDataWriter=r,this._delegate=a}return(0,D.Z)(s,[{key:"fromFirestore",value:function(r,a){var o=new Ry(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,null);return this._delegate.fromFirestore(new By(this._firestore,o),null!=a?a:{})}},{key:"toFirestore",value:function(r,a){return a?this._delegate.toFirestore(r,a):this._delegate.toFirestore(r)}}],[{key:"getInstance",value:function(r,a){var o=s.INSTANCES,u=o.get(r);u||(u=new WeakMap,o.set(r,u));var c=u.get(a);return c||(c=new s(r,new Fy(r),a),u.set(a,c)),c}}]),s}();return i.INSTANCES=new WeakMap,i}(),xf=function(){function i(s,n){(0,M.Z)(this,i),this.firestore=s,this._delegate=n,this._userDataWriter=new Fy(s)}return(0,D.Z)(i,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Xb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(n){try{return new Xb(this.firestore,oF(this._delegate,n))}catch(r){throw qo(r,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(n){return(n=(0,Me.m9)(n))instanceof Xa&&FI(this._delegate,n)}},{key:"set",value:function(n,r){r=Ny("DocumentReference.set",r);try{return r?nD(this._delegate,n,r):nD(this._delegate,n)}catch(a){throw qo(a,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(n,r){for(var a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];try{return 1===arguments.length?qb(this._delegate,n):qb.apply(void 0,[this._delegate,n,r].concat(o))}catch(c){throw qo(c,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(i){return Wh(Ni(i.firestore,Ua),[new wp(i._key,so.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var n=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var u=PT(a),c=OT(a,function(d){return new Zy(n.firestore,new Yu(n.firestore._delegate,n._userDataWriter,d._key,d._document,d.metadata,n._delegate.converter))});return iD(this._delegate,u,c)}},{key:"get",value:function(n){var r=this;return("cache"===(null==n?void 0:n.source)?function(i){i=Ni(i,Xa);var s=Ni(i.firestore,Ua),n=Ti(s),r=new bs(s);return function(i,s){var n=new ro;return i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(){var u=(0,Ut.Z)(Ze().mark(function c(d,m,_){var b,E;return Ze().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,function(N,W){var U=En(N);return U.persistence.runTransaction("read document","readonly",function(H){return U.Qn.An(H,W)})}(d,m);case 3:(b=I.sent).isFoundDocument()?_.resolve(b):b.isNoDocument()?_.resolve(null):_.reject(new en(Lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),I.next=11;break;case 7:I.prev=7,I.t0=I.catch(0),E=Hp(I.t0,"Failed to get document '".concat(m," from cache")),_.reject(E);case 11:case"end":return I.stop()}},c,null,[[0,7]])}));return function(c,d,m){return u.apply(this,arguments)}}(),o.next=3,rT(i);case 3:return o.t1=o.sent,o.t2=s,o.t3=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2,o.t3));case 7:case"end":return o.stop()}},r)}))),n.promise}(n,i._key).then(function(a){return new Yu(s,r,i._key,a,new ql(null!==a&&a.hasLocalMutations,!0),i.converter)})}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Ni(i,Xa);var s=Ni(i.firestore,Ua);return RI(Ti(s),i._key,{source:"server"}).then(function(n){return Yb(s,i,n)})}(this._delegate):function(i){i=Ni(i,Xa);var s=Ni(i.firestore,Ua);return RI(Ti(s),i._key).then(function(n){return Yb(s,i,n)})}(this._delegate)).then(function(o){return new Zy(r.firestore,new Yu(r.firestore._delegate,r._userDataWriter,o._key,o._document,o.metadata,r._delegate.converter))})}},{key:"withConverter",value:function(n){return new i(this.firestore,this._delegate.withConverter(n?RT.getInstance(this.firestore,n):null))}}],[{key:"forPath",value:function(n,r,a){if(n.length%2!=0)throw new en("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(n.canonicalString()," has ").concat(n.length));return new i(r,new Xa(r._delegate,a,new fr(n)))}},{key:"forKey",value:function(n,r,a){return new i(r,new Xa(r._delegate,a,n))}}]),i}();function qo(i,s,n){return i.message=i.message.replace(s,n),i}function PT(i){var n,s=(0,Re.Z)(i);try{for(s.s();!(n=s.n()).done;){var r=n.value;if("object"==typeof r&&!$b(r))return r}}catch(a){s.e(a)}finally{s.f()}return{}}function OT(i,s){var n,r,a;return{next:function(u){a.next&&a.next(s(u))},error:null===(n=(a=$b(i[0])?i[0]:$b(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]}).error)||void 0===n?void 0:n.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}var Zy=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n}return(0,D.Z)(i,[{key:"ref",get:function(){return new xf(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(n){return this._delegate.data(n)}},{key:"get",value:function(n,r){return this._delegate.get(n,r)}},{key:"isEqual",value:function(n){return $I(this._delegate,n._delegate)}}]),i}(),By=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"data",value:function(a){var o=this._delegate.data(a);return function(i,s){i||ar()}(void 0!==o),o}}]),n}(Zy),Uy=function(){function i(s,n){(0,M.Z)(this,i),this.firestore=s,this._delegate=n,this._userDataWriter=new Fy(s)}return(0,D.Z)(i,[{key:"where",value:function(n,r,a){try{return new i(this.firestore,Gh(this._delegate,function(i,s,n){var r=s,a=Gb("where",i);return new gV(a,r,n)}(n,r,a)))}catch(o){throw qo(o,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(n,r){try{return new i(this.firestore,Gh(this._delegate,function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r=Gb("orderBy",i);return new wF(r,n)}(n,r)))}catch(a){throw qo(a,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(n){try{return new i(this.firestore,Gh(this._delegate,function(i){return LI("limit",i),new QI("limit",i,"F")}(n)))}catch(r){throw qo(r,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(n){try{return new i(this.firestore,Gh(this._delegate,function(i){return LI("limitToLast",i),new QI("limitToLast",i,"L")}(n)))}catch(r){throw qo(r,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new i(this.firestore,Gh(this._delegate,CF.apply(void 0,arguments)))}catch(n){throw qo(n,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new i(this.firestore,Gh(this._delegate,SF.apply(void 0,arguments)))}catch(n){throw qo(n,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new i(this.firestore,Gh(this._delegate,wT.apply(void 0,arguments)))}catch(n){throw qo(n,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new i(this.firestore,Gh(this._delegate,eD.apply(void 0,arguments)))}catch(n){throw qo(n,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(n){return ZI(this._delegate,n._delegate)}},{key:"get",value:function(n){var r=this;return("cache"===(null==n?void 0:n.source)?function(i){i=Ni(i,qu);var s=Ni(i.firestore,Ua),n=Ti(s),r=new bs(s);return function(i,s){var n=new ro;return i.asyncQueue.enqueueAndForget((0,Ut.Z)(Ze().mark(function r(){return Ze().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(){var u=(0,Ut.Z)(Ze().mark(function c(d,m,_){var b,E,T,I,N;return Ze().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.prev=0,U.next=3,Op(d,m,!0);case 3:E=new GS(m,(b=U.sent).Gn),T=E.Io(b.documents),I=E.applyChanges(T,!1),_.resolve(I.snapshot),U.next=14;break;case 10:U.prev=10,U.t0=U.catch(0),N=Hp(U.t0,"Failed to execute query '".concat(m," against cache")),_.reject(N);case 14:case"end":return U.stop()}},c,null,[[0,10]])}));return function(c,d,m){return u.apply(this,arguments)}}(),o.next=3,rT(i);case 3:return o.t1=o.sent,o.t2=s,o.t3=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2,o.t3));case 7:case"end":return o.stop()}},r)}))),n.promise}(n,i._query).then(function(a){return new Nc(s,r,i,a)})}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=Ni(i,qu);var s=Ni(i.firestore,Ua),n=Ti(s),r=new bs(s);return JN(n,i._query,{source:"server"}).then(function(a){return new Nc(s,r,i,a)})}(this._delegate):function(i){i=Ni(i,qu);var s=Ni(i.firestore,Ua),n=Ti(s),r=new bs(s);return jb(i._query),JN(n,i._query).then(function(a){return new Nc(s,r,i,a)})}(this._delegate)).then(function(o){return new LT(r.firestore,new Nc(r.firestore._delegate,r._userDataWriter,r._delegate,o._snapshot))})}},{key:"onSnapshot",value:function(){for(var n=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var u=PT(a),c=OT(a,function(d){return new LT(n.firestore,new Nc(n.firestore._delegate,n._userDataWriter,n._delegate,d._snapshot))});return iD(this._delegate,u,c)}},{key:"withConverter",value:function(n){return new i(this.firestore,this._delegate.withConverter(n?RT.getInstance(this.firestore,n):null))}}]),i}(),dD=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n}return(0,D.Z)(i,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new By(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),i}(),LT=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n}return(0,D.Z)(i,[{key:"query",get:function(){return new Uy(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var n=this;return this._delegate.docs.map(function(r){return new By(n._firestore,r)})}},{key:"docChanges",value:function(n){var r=this;return this._delegate.docChanges(n).map(function(a){return new dD(r._firestore,a)})}},{key:"forEach",value:function(n,r){var a=this;this._delegate.forEach(function(o){n.call(r,new By(a._firestore,o))})}},{key:"isEqual",value:function(n){return $I(this._delegate,n._delegate)}}]),i}(),Xb=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).firestore=r,o._delegate=a,o}return(0,D.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var a=this._delegate.parent;return a?new xf(this.firestore,a):null}},{key:"doc",value:function(a){try{return new xf(this.firestore,void 0===a?Bb(this._delegate):Bb(this._delegate,a))}catch(o){throw qo(o,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(a){var o=this;return function(i,s){var n=Ni(i.firestore,Ua),r=Bb(i),a=Oy(i.converter,s);return Wh(n,[Ub(Hh(i.firestore),"addDoc",r._key,a,null!==i.converter,{}).toMutation(r._key,so.exists(!1))]).then(function(){return r})}(this._delegate,a).then(function(u){return new xf(o.firestore,u)})}},{key:"isEqual",value:function(a){return FI(this._delegate,a._delegate)}},{key:"withConverter",value:function(a){return new n(this.firestore,this._delegate.withConverter(a?RT.getInstance(this.firestore,a):null))}}]),n}(Uy);function Jd(i){return Ni(i,Xa)}var bV={Firestore:IT,GeoPoint:fT,Timestamp:Go,Blob:xT,Transaction:hD,WriteBatch:DT,DocumentReference:xf,DocumentSnapshot:Zy,Query:Uy,QueryDocumentSnapshot:By,QuerySnapshot:LT,CollectionReference:Xb,FieldPath:function(){function i(){(0,M.Z)(this,i);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];this._delegate=(0,pE.Z)(Uh,n)}return(0,D.Z)(i,[{key:"isEqual",value:function(n){return(n=(0,Me.m9)(n))instanceof Uh&&this._delegate._internalPath.isEqual(n._internalPath)}}],[{key:"documentId",value:function(){return new i(jo.keyField().canonicalString())}}]),i}(),FieldValue:function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,D.Z)(i,[{key:"isEqual",value:function(n){return this._delegate.isEqual(n._delegate)}}],[{key:"serverTimestamp",value:function(){var n=new vF("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new i(n)}},{key:"delete",value:function(){var n=new vT("deleteField");return n._methodName="FieldValue.delete",new i(n)}},{key:"arrayUnion",value:function(){var n=sD.apply(void 0,arguments);return n._methodName="FieldValue.arrayUnion",new i(n)}},{key:"arrayRemove",value:function(){var n=RF.apply(void 0,arguments);return n._methodName="FieldValue.arrayRemove",new i(n)}},{key:"increment",value:function(n){var r=function(i){return new gF("increment",i)}(n);return r._methodName="FieldValue.increment",new i(r)}}]),i}(),setLogLevel:function(i){!function(i){gs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,s){i.INTERNAL.registerComponent(new Nd.wA("firestore-compat",function(n){return function(s,n){return new IT(s,n,new OF)}(n.getProvider("app-compat").getImmediate(),n.getProvider("firestore").getImmediate())},"PUBLIC").setServiceProps(Object.assign({},bV)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(lL.Z);var Er=J(5959),qh=J(1906),Qb=J(45),Yl=J(6882);function Ys(i,s){return"function"==typeof s?function(n){return n.pipe(Ys(function(r,a){return(0,as.D)(i(r,a)).pipe((0,ur.U)(function(o,u){return s(r,o,a,u)}))}))}:function(n){return n.lift(new wV(i))}}var wV=function(){function i(s){(0,M.Z)(this,i),this.project=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new kV(n,this.project))}}]),i}(),kV=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).project=a,o.index=0,o}return(0,D.Z)(n,[{key:"_next",value:function(a){var o,u=this.index++;try{o=this.project(a,u)}catch(c){return void this.destination.error(c)}this._innerSub(o)}},{key:"_innerSub",value:function(a){var o=this.innerSubscription;o&&o.unsubscribe();var u=new Yl.IY(this),c=this.destination;c.add(u),this.innerSubscription=(0,Yl.ft)(a,u),this.innerSubscription!==u&&c.add(this.innerSubscription)}},{key:"_complete",value:function(){var a=this.innerSubscription;(!a||a.closed)&&(0,_e.Z)((0,de.Z)(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&(0,_e.Z)((0,de.Z)(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(a){this.destination.next(a)}}]),n}(Yl.Ds),EV=J(8489),Yo=J(7570),vD=J(3895),UF=J(9291),VF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,u=arguments.length>2?arguments[2]:void 0;return(0,M.Z)(this,n),(r=s.call(this)).scheduler=u,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=a<1?1:a,r._windowTime=o<1?1:o,o===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return(0,D.Z)(n,[{key:"nextInfiniteTimeWindow",value:function(a){if(!this.isStopped){var o=this._events;o.push(a),o.length>this._bufferSize&&o.shift()}(0,_e.Z)((0,de.Z)(n.prototype),"next",this).call(this,a)}},{key:"nextTimeWindow",value:function(a){this.isStopped||(this._events.push(new CV(this._getNow(),a)),this._trimBufferThenGetEvents()),(0,_e.Z)((0,de.Z)(n.prototype),"next",this).call(this,a)}},{key:"_subscribe",value:function(a){var m,o=this._infiniteTimeWindow,u=o?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,d=u.length;if(this.closed)throw new vD.N;if(this.isStopped||this.hasError?m=Yo.w.EMPTY:(this.observers.push(a),m=new UF.W(this,a)),c&&a.add(a=new Qb.ht(a,c)),o)for(var _=0;_<d&&!a.closed;_++)a.next(u[_]);else for(var b=0;b<d&&!a.closed;b++)a.next(u[b].value);return this.hasError?a.error(this.thrownError):this.isStopped&&a.complete(),m}},{key:"_getNow",value:function(){return(this.scheduler||EV.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var a=this._getNow(),o=this._bufferSize,u=this._windowTime,c=this._events,d=c.length,m=0;m<d&&!(a-c[m].time<u);)m++;return d>o&&(m=Math.max(m,d-o)),m>0&&c.splice(0,m),c}}]),n}(Er.xQ),CV=function i(s,n){(0,M.Z)(this,i),this.time=s,this.value=n};function pD(i,s,n){var r;return r=i&&"object"==typeof i?i:{bufferSize:i,windowTime:s,refCount:!1,scheduler:n},function(a){return a.lift(function(i){var c,m,s=i.bufferSize,n=void 0===s?Number.POSITIVE_INFINITY:s,r=i.windowTime,a=void 0===r?Number.POSITIVE_INFINITY:r,o=i.refCount,u=i.scheduler,d=0,_=!1,b=!1;return function(T){var I;d++,!c||_?(_=!1,c=new VF(n,a,u),I=c.subscribe(this),m=T.subscribe({next:function(W){c.next(W)},error:function(W){_=!0,c.error(W)},complete:function(){b=!0,m=void 0,c.complete()}}),b&&(m=void 0)):I=c.subscribe(this),this.add(function(){d--,I.unsubscribe(),I=void 0,m&&!b&&o&&0===d&&(m.unsubscribe(),m=void 0,c=void 0)})}}(r))}}var Jb=function(){function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i}(),mD=function(){function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i}(),If=J(653);function ml(i){return function(s){return 0===i?(0,If.c)():s.lift(new TV(i))}}var TV=function(){function i(s){if((0,M.Z)(this,i),this.total=s,this.total<0)throw new mD}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new GF(n,this.total))}}]),i}(),GF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).total=a,o.count=0,o}return(0,D.Z)(n,[{key:"_next",value:function(a){var o=this.total,u=++this.count;u<=o&&(this.destination.next(a),u===o&&(this.destination.complete(),this.unsubscribe()))}}]),n}(ss.L);function jF(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(s){return s.lift(new WF(i))}}var WF=function(){function i(s){(0,M.Z)(this,i),this.defaultValue=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new NT(n,this.defaultValue))}}]),i}(),NT=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).defaultValue=a,o.isEmpty=!0,o}return(0,D.Z)(n,[{key:"_next",value:function(a){this.isEmpty=!1,this.destination.next(a)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(ss.L);function ev(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YF;return function(s){return s.lift(new gD(i))}}var gD=function(){function i(s){(0,M.Z)(this,i),this.errorFactory=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new qF(n,this.errorFactory))}}]),i}(),qF=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).errorFactory=a,o.hasValue=!1,o}return(0,D.Z)(n,[{key:"_next",value:function(a){this.hasValue=!0,this.destination.next(a)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var a;try{a=this.errorFactory()}catch(o){a=o}this.destination.error(a)}}]),n}(ss.L);function YF(){return new Jb}var ew=J(3392);function Yh(i,s){var n=arguments.length>=2;return function(r){return r.pipe(i?Ji(function(a,o){return i(a,o,r)}):ew.y,ml(1),n?jF(s):ev(function(){return new Jb}))}}function FT(i,s){return s?Ys(function(){return i},s):Ys(function(){return i})}var tw=J(3482),yD=J(9001),Xp=new v.OlP("angularfire2.auth.use-emulator"),nw=new v.OlP("angularfire2.auth.settings"),bD=new v.OlP("angularfire2.auth.tenant-id"),wD=new v.OlP("angularfire2.auth.langugage-code"),kD=new v.OlP("angularfire2.auth.use-device-language"),ZT=new v.OlP("angularfire.auth.persistence"),ED=function(s,n,r,a,o,u,c,d){return(0,ua.cc)("".concat(s.name,".auth"),"AngularFireAuth",s.name,function(){var m=n.runOutsideAngular(function(){return s.auth()});if(r&&m.useEmulator.apply(m,(0,Gr.Z)(r)),a&&(m.tenantId=a),m.languageCode=o,u&&m.useDeviceLanguage(),c)for(var _=0,b=Object.entries(c);_<b.length;_++){var E=(0,ke.Z)(b[_],2);m.settings[E[0]]=E[1]}return d&&m.setPersistence(d),m},[r,a,o,u,c,d])},Kh=function(){var i=function s(n,r,a,o,u,c,d,m,_,b,E){(0,M.Z)(this,s);var T=new Er.xQ,I=(0,tr.of)(void 0).pipe((0,Qb.QV)(u.outsideAngular),Ys(function(){return o.runOutsideAngular(function(){return Promise.resolve().then(J.bind(J,3121))})}),(0,ur.U)(function(){return(0,ku.on)(n,o,r)}),(0,ur.U)(function(te){return ED(te,o,c,m,_,b,d,E)}),pD({bufferSize:1,refCount:!1}));if(me(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,tr.of)(null);else{I.pipe(Yh()).subscribe();var W=I.pipe(Ys(function(te){return te.getRedirectResult().then(function(ue){return ue},function(){return null})}),ua.iC,pD({bufferSize:1,refCount:!1})),U=I.pipe(Ys(function(te){return new ms.y(function(ue){return{unsubscribe:o.runOutsideAngular(function(){return te.onAuthStateChanged(function(le){return ue.next(le)},function(le){return ue.error(le)},function(){return ue.complete()})})}})})),H=I.pipe(Ys(function(te){return new ms.y(function(ue){return{unsubscribe:o.runOutsideAngular(function(){return te.onIdTokenChanged(function(le){return ue.next(le)},function(le){return ue.error(le)},function(){return ue.complete()})})}})}));this.authState=W.pipe(FT(U),(0,tw.R)(u.outsideAngular),(0,Qb.QV)(u.insideAngular)),this.user=W.pipe(FT(H),(0,tw.R)(u.outsideAngular),(0,Qb.QV)(u.insideAngular)),this.idToken=this.user.pipe(Ys(function(te){return te?(0,as.D)(te.getIdToken()):(0,tr.of)(null)})),this.idTokenResult=this.user.pipe(Ys(function(te){return te?(0,as.D)(te.getIdTokenResult()):(0,tr.of)(null)})),this.credential=(0,qh.T)(W,T,this.authState.pipe(Ji(function(te){return!te}))).pipe((0,ur.U)(function(te){return(null==te?void 0:te.user)?te:null}),(0,tw.R)(u.outsideAngular),(0,Qb.QV)(u.insideAngular))}return(0,ku.pX)(this,I,o,{spy:{apply:function(ue,le,he){(ue.startsWith("signIn")||ue.startsWith("createUser"))&&he.then(function(se){return T.next(se)})}}})};return i.\u0275fac=function(n){return new(n||i)(v.LFG(ku.Dh),v.LFG(ku.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(ua.HU),v.LFG(Xp,8),v.LFG(nw,8),v.LFG(bD,8),v.LFG(wD,8),v.LFG(kD,8),v.LFG(ZT,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i}();(0,ku.GT)(Kh,[{name:null,config:null,emulatorConfig:null,app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var KF=function(){var i=function s(){(0,M.Z)(this,s),yD.Z.registerVersion("angularfire",ua.q4.full,"auth-compat")};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[Kh]}),i}();function $F(i,s){return function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo.z;return new ms.y(function(n){var r;return null!=s?s.schedule(function(){r=i.onSnapshot({includeMetadataChanges:!0},n)}):r=i.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(i,s)}function UT(i,s){return $F(i,s).pipe((0,ur.U)(function(n){return{payload:n,type:"query"}}))}function VT(i,s){return UT(i,s).pipe(au(void 0),Uu(),(0,ur.U)(function(n){var r=(0,ke.Z)(n,2),a=r[0],o=r[1],u=o.payload.docChanges(),c=u.map(function(d){return{type:d.type,payload:d}});return a&&JSON.stringify(a.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach(function(d,m){var _=u.find(function(E){return E.doc.ref.isEqual(d.ref)}),b=null==a?void 0:a.payload.docs.find(function(E){return E.ref.isEqual(d.ref)});_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||c.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),c}))}function CD(i,s,n){return VT(i,n).pipe(Vv(function(r,a){return function(i,s,n){return s.forEach(function(r){n.indexOf(r.type)>-1&&(i=function(i,s){switch(s.type){case"added":if(!i[s.newIndex]||!i[s.newIndex].doc.ref.isEqual(s.doc.ref))return SD(i,s.newIndex,0,s);break;case"modified":if(null==i[s.oldIndex]||i[s.oldIndex].doc.ref.isEqual(s.doc.ref)){if(s.oldIndex!==s.newIndex){var n=i.slice();return n.splice(s.oldIndex,1),n.splice(s.newIndex,0,s),n}return SD(i,s.newIndex,1,s)}break;case"removed":if(i[s.oldIndex]&&i[s.oldIndex].doc.ref.isEqual(s.doc.ref))return SD(i,s.oldIndex,1)}return i}(i,r))}),i}(r,a.map(function(o){return o.payload}),s)},[]),mh(),(0,ur.U)(function(r){return r.map(function(a){return{type:a.type,payload:a}})}))}function SD(i,s,n){for(var r=i.slice(),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r.splice.apply(r,[s,n].concat(o)),r}function MD(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}var QF=function(){function i(s,n,r){(0,M.Z)(this,i),this.ref=s,this.query=n,this.afs=r}return(0,D.Z)(i,[{key:"stateChanges",value:function(n){var r=VT(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,ur.U)(function(a){return a.filter(function(o){return n.indexOf(o.type)>-1})}))),r.pipe(au(void 0),Uu(),Ji(function(a){var o=(0,ke.Z)(a,2);return o[1].length>0||!o[0]}),(0,ur.U)(function(a){return(0,ke.Z)(a,2)[1]}),ua.iC)}},{key:"auditTrail",value:function(n){return this.stateChanges(n).pipe(Vv(function(r,a){return[].concat((0,Gr.Z)(r),(0,Gr.Z)(a))},[]))}},{key:"snapshotChanges",value:function(n){var r=MD(n);return CD(this.query,r,this.afs.schedulers.outsideAngular).pipe(ua.iC)}},{key:"valueChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return UT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ur.U)(function(r){return r.payload.docs.map(function(a){return n.idField?Object.assign(Object.assign({},a.data()),(0,ti.Z)({},n.idField,a.id)):a.data()})}),ua.iC)}},{key:"get",value:function(n){return(0,as.D)(this.query.get(n)).pipe(ua.iC)}},{key:"add",value:function(n){return this.ref.add(n)}},{key:"doc",value:function(n){return new AD(this.ref.doc(n),this.afs)}}]),i}(),AD=function(){function i(s,n){(0,M.Z)(this,i),this.ref=s,this.afs=n}return(0,D.Z)(i,[{key:"set",value:function(n,r){return this.ref.set(n,r)}},{key:"update",value:function(n){return this.ref.update(n)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(n,r){var o=rw(this.ref.collection(n),r);return new QF(o.ref,o.query,this.afs)}},{key:"snapshotChanges",value:function(){return function(i,s){return $F(i,s).pipe(au(void 0),Uu(),(0,ur.U)(function(n){var r=(0,ke.Z)(n,2),a=r[0],o=r[1];return o.exists?(null==a?void 0:a.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ua.iC)}},{key:"valueChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,ur.U)(function(r){var a=r.payload;return n.idField?Object.assign(Object.assign({},a.data()),(0,ti.Z)({},n.idField,a.id)):a.data()}))}},{key:"get",value:function(n){return(0,as.D)(this.ref.get(n)).pipe(ua.iC)}}]),i}(),JF=function(){function i(s,n){(0,M.Z)(this,i),this.query=s,this.afs=n}return(0,D.Z)(i,[{key:"stateChanges",value:function(n){return n&&0!==n.length?VT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ur.U)(function(r){return r.filter(function(a){return n.indexOf(a.type)>-1})}),Ji(function(r){return r.length>0}),ua.iC):VT(this.query,this.afs.schedulers.outsideAngular).pipe(ua.iC)}},{key:"auditTrail",value:function(n){return this.stateChanges(n).pipe(Vv(function(r,a){return[].concat((0,Gr.Z)(r),(0,Gr.Z)(a))},[]))}},{key:"snapshotChanges",value:function(n){var r=MD(n);return CD(this.query,r,this.afs.schedulers.outsideAngular).pipe(ua.iC)}},{key:"valueChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=UT(this.query,this.afs.schedulers.outsideAngular);return r.pipe((0,ur.U)(function(a){return a.payload.docs.map(function(o){return n.idField?Object.assign((0,ti.Z)({},n.idField,o.id),o.data()):o.data()})}),ua.iC)}},{key:"get",value:function(n){return(0,as.D)(this.query.get(n)).pipe(ua.iC)}}]),i}(),Qp=new v.OlP("angularfire2.enableFirestorePersistence"),xD=new v.OlP("angularfire2.firestore.persistenceSettings"),eZ=new v.OlP("angularfire2.firestore.settings"),tZ=new v.OlP("angularfire2.firestore.use-emulator");function rw(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(a){return a},n=s(i);return{query:n,ref:i}}var HT=function(){var i=function(){function s(n,r,a,o,u,c,d,m,_,b,E,T,I,N,W,U){(0,M.Z)(this,s),this.schedulers=d;var H=(0,ku.on)(n,c,r),te=_;b&&ED(H,c,E,I,N,W,T,U);var ue=(0,ua.cc)("".concat(H.name,".firestore"),"AngularFirestore",H.name,function(){var he=c.runOutsideAngular(function(){return H.firestore()});return o&&he.settings(o),te&&he.useEmulator.apply(he,(0,Gr.Z)(te)),a&&!me(u)?[he,c.runOutsideAngular(function(){try{return(0,as.D)(he.enablePersistence(m||void 0).then(function(){return!0},function(){return!1}))}catch(Ue){return"undefined"!=typeof console&&console.warn(Ue),(0,tr.of)(!1)}})]:[he,(0,tr.of)(!1)]},[o,te,a]),le=(0,ke.Z)(ue,2);this.firestore=le[0],this.persistenceEnabled$=le[1]}return(0,D.Z)(s,[{key:"collection",value:function(r,a){var u=rw("string"==typeof r?this.firestore.collection(r):r,a),c=u.ref,d=u.query,m=this.schedulers.ngZone.run(function(){return c});return new QF(m,d,this)}},{key:"collectionGroup",value:function(r,a){var o=a||function(c){return c},u=this.firestore.collectionGroup(r);return new JF(o(u),this)}},{key:"doc",value:function(r){var a;a="string"==typeof r?this.firestore.doc(r):r;var o=this.schedulers.ngZone.run(function(){return a});return new AD(o,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(ku.Dh),v.LFG(ku.xv,8),v.LFG(Qp,8),v.LFG(eZ,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(ua.HU),v.LFG(xD,8),v.LFG(tZ,8),v.LFG(Kh,8),v.LFG(Xp,8),v.LFG(nw,8),v.LFG(bD,8),v.LFG(wD,8),v.LFG(kD,8),v.LFG(ZT,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i}(),Zc=function(){var i=function(){function s(){(0,M.Z)(this,s),yD.Z.registerVersion("angularfire",ua.q4.full,"fst-compat")}return(0,D.Z)(s,null,[{key:"enablePersistence",value:function(r){return{ngModule:s,providers:[{provide:Qp,useValue:!0},{provide:xD,useValue:r}]}}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[HT]}),i}(),wa=J(6518),Jp=J(8470);J(2056);var SZ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),cR=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[SZ]]}),i}(),fR=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[cR]}),i}(),Uc=J(1055),om=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"notifyNext",value:function(a,o,u,c,d){this.destination.next(o)}},{key:"notifyError",value:function(a,o){this.destination.error(a)}},{key:"notifyComplete",value:function(a){this.destination.complete()}}]),n}(ss.L),um=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).parent=r,u.outerValue=a,u.outerIndex=o,u.index=0,u}return(0,D.Z)(n,[{key:"_next",value:function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)}},{key:"_error",value:function(a){this.parent.notifyError(a,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(ss.L),gw=J(6015);function rv(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new um(i,n,r);if(!a.closed)return s instanceof ms.y?s.subscribe(a):(0,gw.s)(s)(a)}var NZ=function(){function i(s,n){(0,M.Z)(this,i),this.observables=s,this.project=n}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new FZ(n,this.observables,this.project))}}]),i}(),FZ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;(0,M.Z)(this,n),(u=s.call(this,r)).observables=a,u.project=o,u.toRespond=[];var c=a.length;u.values=new Array(c);for(var d=0;d<c;d++)u.toRespond.push(d);for(var m=0;m<c;m++){var _=a[m];u.add(rv((0,wa.Z)(u),_,void 0,m))}return u}return(0,D.Z)(n,[{key:"notifyNext",value:function(a,o,u){this.values[u]=o;var c=this.toRespond;if(c.length>0){var d=c.indexOf(u);-1!==d&&c.splice(d,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(a){if(0===this.toRespond.length){var o=[a].concat((0,Gr.Z)(this.values));this.project?this._tryProject(o):this.destination.next(o)}}},{key:"_tryProject",value:function(a){var o;try{o=this.project.apply(this,a)}catch(u){return void this.destination.error(u)}this.destination.next(o)}}]),n}(om),dR=function(){function i(s){(0,M.Z)(this,i),this.predicate=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new vR(n,this.predicate))}}]),i}(),vR=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).predicate=a,o.skipping=!0,o.index=0,o}return(0,D.Z)(n,[{key:"_next",value:function(a){var o=this.destination;this.skipping&&this.tryCallPredicate(a),this.skipping||o.next(a)}},{key:"tryCallPredicate",value:function(a){try{var o=this.predicate(a,this.index++);this.skipping=Boolean(o)}catch(u){this.destination.error(u)}}}]),n}(ss.L),mR="";function ZZ(i){mR=i}var iH=function(){function i(s){(0,M.Z)(this,i),this.domStorage_=s,this.prefix_="firebase:"}return(0,D.Z)(i,[{key:"set",value:function(n,r){null==r?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,Me.Pz)(r))}},{key:"get",value:function(n){var r=this.domStorage_.getItem(this.prefixedName_(n));return null==r?null:(0,Me.cI)(r)}},{key:"remove",value:function(n){this.domStorage_.removeItem(this.prefixedName_(n))}},{key:"prefixedName_",value:function(n){return this.prefix_+n}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),i}(),iv=function(){function i(){(0,M.Z)(this,i),this.cache_={},this.isInMemoryStorage=!0}return(0,D.Z)(i,[{key:"set",value:function(n,r){null==r?delete this.cache_[n]:this.cache_[n]=r}},{key:"get",value:function(n){return(0,Me.r3)(this.cache_,n)?this.cache_[n]:null}},{key:"remove",value:function(n){delete this.cache_[n]}}]),i}(),gR=function(s){try{if("undefined"!=typeof window&&void 0!==window[s]){var n=window[s];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new iH(n)}}catch(r){}return new iv},av=gR("localStorage"),yR=gR("sessionStorage"),Xy=new Cc.Yd("@firebase/database"),BZ=function(){var i=1;return function(){return i++}}(),UZ=function(s){var n=(0,Me.dS)(s),r=new Me.gQ;r.update(n);var a=r.digest();return Me.US.encodeByteArray(a)},gM=function i(){for(var s="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?s+=i.apply(null,r):s+="object"==typeof r?(0,Me.Pz)(r):r,s+=" "}return s},lm=null,_R=!0,VZ=function(s,n){(0,Me.hu)(!n||!0===s||!1===s,"Can't turn on custom loggers persistently."),!0===s?(Xy.logLevel=Cc.in.VERBOSE,lm=Xy.log.bind(Xy),n&&yR.set("logging_enabled",!0)):"function"==typeof s?lm=s:(lm=null,yR.remove("logging_enabled"))},To=function(){if(!0===_R&&(_R=!1,null===lm&&!0===yR.get("logging_enabled")&&VZ(!0)),lm){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];var a=gM.apply(null,n);lm(a)}},yw=function(s){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];To.apply(void 0,[s].concat(r))}},bR=function(){var s="FIREBASE INTERNAL ERROR: "+gM.apply(void 0,arguments);Xy.error(s)},Vc=function(){var s="FIREBASE FATAL ERROR: ".concat(gM.apply(void 0,arguments));throw Xy.error(s),new Error(s)},Su=function(){var s="FIREBASE WARNING: "+gM.apply(void 0,arguments);Xy.warn(s)},yM=function(s){return"number"==typeof s&&(s!=s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},l="[MIN_NAME]",f="[MAX_NAME]",h=function(s,n){if(s===n)return 0;if(s===l||n===f)return-1;if(n===l||s===f)return 1;var r=at(s),a=at(n);return null!==r?null!==a?r-a==0?s.length-n.length:r-a:-1:null!==a?1:s<n?-1:1},g=function(s,n){return s===n?0:s<n?-1:1},y=function(s,n){if(n&&s in n)return n[s];throw new Error("Missing required key ("+s+") in object: "+(0,Me.Pz)(n))},w=function i(s){if("object"!=typeof s||null===s)return(0,Me.Pz)(s);var n=[];for(var r in s)n.push(r);n.sort();for(var a="{",o=0;o<n.length;o++)0!==o&&(a+=","),a+=(0,Me.Pz)(n[o]),a+=":",a+=i(s[n[o]]);return a+"}"},C=function(s,n){var r=s.length;if(r<=n)return[s];for(var a=[],o=0;o<r;o+=n)a.push(s.substring(o,o+n>r?r:o+n));return a};function x(i,s){for(var n in i)i.hasOwnProperty(n)&&s(n,i[n])}var Z=function(s){(0,Me.hu)(!yM(s),"Invalid JSON number");var o,u,c,d,m,a=1023;0===s?(u=0,c=0,o=1/s==-1/0?1:0):(o=s<0,(s=Math.abs(s))>=Math.pow(2,1-a)?(u=(d=Math.min(Math.floor(Math.log(s)/Math.LN2),a))+a,c=Math.round(s*Math.pow(2,52-d)-Math.pow(2,52))):(u=0,c=Math.round(s/Math.pow(2,-1074))));var _=[];for(m=52;m;m-=1)_.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)_.push(u%2?1:0),u=Math.floor(u/2);_.push(o?1:0),_.reverse();var b=_.join(""),E="";for(m=0;m<64;m+=8){var T=parseInt(b.substr(m,8),2).toString(16);1===T.length&&(T="0"+T),E+=T}return E.toLowerCase()},ve=new RegExp("^-?(0*)\\d{1,10}$"),Se=-2147483648,Ne=2147483647,at=function(s){if(ve.test(s)){var n=Number(s);if(n>=Se&&n<=Ne)return n}return null},Et=function(s){try{s()}catch(n){setTimeout(function(){throw Su("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},It=function(s,n){var r=setTimeout(s,n);return"object"==typeof r&&r.unref&&r.unref(),r},xn=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.appName_=s,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(function(a){return r.appCheck=a})}return(0,D.Z)(i,[{key:"getToken",value:function(n){var r=this;return this.appCheck?this.appCheck.getToken(n):new Promise(function(a,o){setTimeout(function(){r.appCheck?r.getToken(n).then(a,o):a(null)},0)})}},{key:"addTokenChangeListener",value:function(n){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(function(a){return a.addTokenListener(n)})}},{key:"notifyForInvalidToken",value:function(){Su('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),i}(),Lr=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.appName_=s,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(o){return a.auth_=o})}return(0,D.Z)(i,[{key:"getToken",value:function(n){var r=this;return this.auth_?this.auth_.getToken(n).catch(function(a){return a&&"auth/token-not-initialized"===a.code?(To("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)}):new Promise(function(a,o){setTimeout(function(){r.auth_?r.getToken(n).then(a,o):a(null)},0)})}},{key:"addTokenChangeListener",value:function(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(function(r){return r.addAuthTokenListener(n)})}},{key:"removeTokenChangeListener",value:function(n){this.authProvider_.get().then(function(r){return r.removeAuthTokenListener(n)})}},{key:"notifyForInvalidToken",value:function(){var n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';Su(n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')}}]),i}(),jr=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.accessToken=n}return(0,D.Z)(s,[{key:"getToken",value:function(r){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(r){r(this.accessToken)}},{key:"removeTokenChangeListener",value:function(r){}},{key:"notifyForInvalidToken",value:function(){}}]),s}();return i.OWNER="owner",i}(),Rf=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pf="websocket",sv="long_polling",cm=function(){function i(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];(0,M.Z)(this,i),this.secure=n,this.namespace=r,this.webSocketOnly=a,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=c,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=av.get("host:"+s)||this._host}return(0,D.Z)(i,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&av.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}},{key:"toURLString",value:function(){var n=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(n).concat(this.host,"/").concat(r)}}]),i}();function kR(i,s,n){var r;if((0,Me.hu)("string"==typeof s,"typeof type must == string"),(0,Me.hu)("object"==typeof n,"typeof params must == object"),s===Pf)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(s!==sv)throw new Error("Unknown connection type: "+s);r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(n.ns=i.namespace);var a=[];return x(n,function(o,u){a.push(o+"="+u)}),r+a.join("&")}var HZ=function(){function i(){(0,M.Z)(this,i),this.counters_={}}return(0,D.Z)(i,[{key:"incrementCounter",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,Me.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}},{key:"get",value:function(){return(0,Me.p$)(this.counters_)}}]),i}(),_M={},bM={};function _w(i){var s=i.toString();return _M[s]||(_M[s]=new HZ),_M[s]}var GZ=function(){function i(s){(0,M.Z)(this,i),this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return(0,D.Z)(i,[{key:"closeAfter",value:function(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(n,r){var a=this;this.pendingResponses[n]=r;for(var o=function(){var d=a.pendingResponses[a.currentResponseNum];delete a.pendingResponses[a.currentResponseNum];for(var m=function(E){d[E]&&Et(function(){a.onMessage_(d[E])})},_=0;_<d.length;++_)m(_);if(a.currentResponseNum===a.closeAfterResponse)return a.onClose&&(a.onClose(),a.onClose=null),"break";a.currentResponseNum++};this.pendingResponses[this.currentResponseNum]&&"break"!==o(););}}]),i}(),dq=function(){function i(s,n,r,a,o,u,c){var d=this;(0,M.Z)(this,i),this.connId=s,this.repoInfo=n,this.applicationId=r,this.appCheckToken=a,this.authToken=o,this.transportSessionId=u,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yw(s),this.stats_=_w(n),this.urlFn=function(m){return d.appCheckToken&&(m.ac=d.appCheckToken),kR(n,sv,m)}}return(0,D.Z)(i,[{key:"open",value:function(n,r){var a=this;this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new GZ(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){a.log_("Timed out trying to connect."),a.onClosed_(),a.connectTimeoutTimer_=null},Math.floor(3e4)),function(s){if((0,Me.Yr)()||"complete"===document.readyState)s();else{var n=!1,r=function a(){document.body?n||(n=!0,s()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(function(){if(!a.isClosed_){a.scriptTagHolder=new vq(function(){for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];var _=d[0],b=d[1],E=d[2];if(a.incrementIncomingBytes_(d),a.scriptTagHolder)if(a.connectTimeoutTimer_&&(clearTimeout(a.connectTimeoutTimer_),a.connectTimeoutTimer_=null),a.everConnected_=!0,"start"===_)a.id=b,a.password=E;else{if("close"!==_)throw new Error("Unrecognized command received: "+_);b?(a.scriptTagHolder.sendNewPolls=!1,a.myPacketOrderer.closeAfter(b,function(){a.onClosed_()})):a.onClosed_()}},function(){for(var c=arguments.length,d=new Array(c),m=0;m<c;m++)d[m]=arguments[m];var _=d[0],b=d[1];a.incrementIncomingBytes_(d),a.myPacketOrderer.handleResponse(_,b)},function(){a.onClosed_()},a.urlFn);var o={start:"t"};o.ser=Math.floor(1e8*Math.random()),a.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=a.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",a.transportSessionId&&(o.s=a.transportSessionId),a.lastSessionId&&(o.ls=a.lastSessionId),a.applicationId&&(o.p=a.applicationId),a.appCheckToken&&(o.ac=a.appCheckToken),"undefined"!=typeof location&&location.hostname&&Rf.test(location.hostname)&&(o.r="f");var u=a.urlFn(o);a.log_("Connecting via long-poll to "+u),a.scriptTagHolder.addTag(u,function(){})}})}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(n){var r=(0,Me.Pz)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);for(var a=(0,Me.h$)(r),o=C(a,1840),u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(n,r){if(!(0,Me.Yr)()){this.myDisconnFrame=document.createElement("iframe");var a={dframe:"t"};a.id=n,a.pw=r,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(n){var r=(0,Me.Pz)(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}],[{key:"forceAllow",value:function(){i.forceAllow_=!0}},{key:"forceDisallow",value:function(){i.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!((0,Me.Yr)()||!i.forceAllow_&&(i.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}}]),i}(),vq=function(){function i(s,n,r,a){if((0,M.Z)(this,i),this.onDisconnect=r,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Me.Yr)())this.commandCB=s,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=BZ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=i.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){To("frame writing exception"),d.stack&&To(d.stack),To(d)}}}return(0,D.Z)(i,[{key:"close",value:function(){var n=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0)));var r=this.onDisconnect;r&&(this.onDisconnect=null,r())}},{key:"startLongPoll",value:function(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;for(var r=this.urlFn(n),a="",o=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+a.length<=1870;){var c=this.pendingSegs.shift();a=a+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return this.addLongPollTag_(r+=a,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(n,r,a){this.pendingSegs.push({seg:n,ts:r,d:a}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(n,r){var a=this;this.outstandingRequests.add(r);var o=function(){a.outstandingRequests.delete(r),a.newRequest_()},u=setTimeout(o,Math.floor(25e3));this.addTag(n,function(){clearTimeout(u),o()})}},{key:"addTag",value:function(n,r){var a=this;(0,Me.Yr)()?this.doNodeLongPoll(n,r):setTimeout(function(){try{if(!a.sendNewPolls)return;var o=a.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=n,o.onload=o.onreadystatechange=function(){var u=o.readyState;(!u||"loaded"===u||"complete"===u)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=function(){To("Long-poll script failed to load: "+n),a.sendNewPolls=!1,a.close()},a.myIFrame.doc.body.appendChild(o)}catch(u){}},Math.floor(1))}}],[{key:"createIFrame_",value:function(){var n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||To("No IE domain setting required")}catch(o){var a=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}}]),i}(),wM=null;"undefined"!=typeof MozWebSocket?wM=MozWebSocket:"undefined"!=typeof WebSocket&&(wM=WebSocket);var kM=function(){var i=function(){function s(n,r,a,o,u,c,d){(0,M.Z)(this,s),this.connId=n,this.applicationId=a,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yw(this.connId),this.stats_=_w(r),this.connURL=s.connectionURL_(r,c,d,o),this.nodeAdmin=r.nodeAdmin}return(0,D.Z)(s,[{key:"open",value:function(r,a){var o=this;this.onDisconnect=a,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,av.set("previous_websocket_failure",!0);try{if((0,Me.Yr)()){var u=this.nodeAdmin?"AdminNode":"Node",c={headers:{"User-Agent":"Firebase/".concat("5","/").concat(mR,"/").concat(process.platform,"/").concat(u),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);var d=process.env,m=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;m&&(c.proxy={origin:m}),this.mySock=new wM(this.connURL,[],c)}else this.mySock=new wM(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(E){this.log_("Error instantiating WebSocket.");var b=E.message||E.data;return b&&this.log_(b),void this.onClosed_()}this.mySock.onopen=function(){o.log_("Websocket connected."),o.everConnected_=!0},this.mySock.onclose=function(){o.log_("Websocket connection was disconnected."),o.mySock=null,o.onClosed_()},this.mySock.onmessage=function(E){o.handleIncomingFrame(E)},this.mySock.onerror=function(E){o.log_("WebSocket error.  Closing connection.");var T=E.message||E.data;T&&o.log_(T),o.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){av.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(r){if(this.frames.push(r),this.frames.length===this.totalFrames){var a=this.frames.join("");this.frames=null;var o=(0,Me.cI)(a);this.onMessage(o)}}},{key:"handleNewFrameCount_",value:function(r){this.totalFrames=r,this.frames=[]}},{key:"extractFrameCount_",value:function(r){if((0,Me.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){var a=Number(r);if(!isNaN(a))return this.handleNewFrameCount_(a),null}return this.handleNewFrameCount_(1),r}},{key:"handleIncomingFrame",value:function(r){if(null!==this.mySock){var a=r.data;if(this.bytesReceived+=a.length,this.stats_.incrementCounter("bytes_received",a.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(a);else{var o=this.extractFrameCount_(a);null!==o&&this.appendFrame_(o)}}}},{key:"send",value:function(r){this.resetKeepAlive();var a=(0,Me.Pz)(r);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);var o=C(a,16384);o.length>1&&this.sendString_(String(o.length));for(var u=0;u<o.length;u++)this.sendString_(o[u])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var r=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){r.mySock&&r.sendString_("0"),r.resetKeepAlive()},Math.floor(45e3))}},{key:"sendString_",value:function(r){try{this.mySock.send(r)}catch(a){this.log_("Exception thrown from WebSocket.send():",a.message||a.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(r,a,o,u){var c={v:"5"};return!(0,Me.Yr)()&&"undefined"!=typeof location&&location.hostname&&Rf.test(location.hostname)&&(c.r="f"),a&&(c.s=a),o&&(c.ls=o),u&&(c.ac=u),kR(r,Pf,c)}},{key:"forceDisallow",value:function(){s.forceDisallow_=!0}},{key:"isAvailable",value:function(){var r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(r=!0)}return!r&&null!==wM&&!s.forceDisallow_}},{key:"previouslyFailed",value:function(){return av.isInMemoryStorage||!0===av.get("previous_websocket_failure")}}]),s}();return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i}(),gq=function(){function i(s){(0,M.Z)(this,i),this.initTransports_(s)}return(0,D.Z)(i,[{key:"initTransports_",value:function(n){var r=kM&&kM.isAvailable(),a=r&&!kM.previouslyFailed();if(n.webSocketOnly&&(r||Su("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[kM];else{var c,o=this.transports_=[],u=(0,Re.Z)(i.ALL_TRANSPORTS);try{for(u.s();!(c=u.n()).done;){var d=c.value;d&&d.isAvailable()&&o.push(d)}}catch(m){u.e(m)}finally{u.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[dq,kM]}}]),i}(),yH=function(){function i(s,n,r,a,o,u,c,d,m,_){(0,M.Z)(this,i),this.id=s,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=a,this.authToken_=o,this.onMessage_=u,this.onReady_=c,this.onDisconnect_=d,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yw("c:"+this.id+":"),this.transportManager_=new gq(n),this.log_("Connection created"),this.start_()}return(0,D.Z)(i,[{key:"start_",value:function(){var n=this,r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;var a=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){n.conn_&&n.conn_.open(a,o)},Math.floor(0));var u=r.healthyTimeout||0;u>0&&(this.healthyTimeout_=It(function(){n.healthyTimeout_=null,n.isHealthy_||(n.conn_&&n.conn_.bytesReceived>102400?(n.log_("Connection exceeded healthy timeout but has received "+n.conn_.bytesReceived+" bytes.  Marking connection healthy."),n.isHealthy_=!0,n.conn_.markConnectionHealthy()):n.conn_&&n.conn_.bytesSent>10240?n.log_("Connection exceeded healthy timeout but has sent "+n.conn_.bytesSent+" bytes.  Leaving connection alive."):(n.log_("Closing unhealthy connection after timeout."),n.close()))},Math.floor(u)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(n){var r=this;return function(a){n===r.conn_?r.onConnectionLost_(a):n===r.secondaryConn_?(r.log_("Secondary connection lost."),r.onSecondaryConnectionLost_()):r.log_("closing an old connection")}}},{key:"connReceiver_",value:function(n){var r=this;return function(a){2!==r.state_&&(n===r.rx_?r.onPrimaryMessageReceived_(a):n===r.secondaryConn_?r.onSecondaryMessageReceived_(a):r.log_("message on old connection"))}}},{key:"sendRequest",value:function(n){this.sendData_({t:"d",d:n})}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(n){if("t"in n){var r=n.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(n){var r=y("t",n),a=y("d",n);if("c"===r)this.onSecondaryControl_(a);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(a)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(n){var r=y("t",n),a=y("d",n);"c"===r?this.onControl_(a):"d"===r&&this.onDataMessage_(a)}},{key:"onDataMessage_",value:function(n){this.onPrimaryResponse_(),this.onMessage_(n)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(n){var r=y("t",n);if("d"in n){var a=n.d;if("h"===r)this.onHandshake_(a);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(a):"r"===r?this.onReset_(a):"e"===r?bR("Server Error: "+a):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bR("Unknown control packet command: "+r)}}},{key:"onHandshake_",value:function(n){var r=n.ts,a=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==a&&Su("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}},{key:"startUpgrade_",value:function(n){var r=this;this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var a=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,o),It(function(){r.secondaryConn_&&(r.log_("Timed out trying to upgrade."),r.secondaryConn_.close())},Math.floor(6e4))}},{key:"onReset_",value:function(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(n,r){var a=this;this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):It(function(){a.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}},{key:"onConnectionLost_",value:function(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(av.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),i}(),_H=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"put",value:function(n,r,a,o){}},{key:"merge",value:function(n,r,a,o){}},{key:"refreshAuthToken",value:function(n){}},{key:"refreshAppCheckToken",value:function(n){}},{key:"onDisconnectPut",value:function(n,r,a){}},{key:"onDisconnectMerge",value:function(n,r,a){}},{key:"onDisconnectCancel",value:function(n,r){}},{key:"reportStats",value:function(n){}}]),i}(),bH=function(){function i(s){(0,M.Z)(this,i),this.allowedEvents_=s,this.listeners_={},(0,Me.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}return(0,D.Z)(i,[{key:"trigger",value:function(n){if(Array.isArray(this.listeners_[n])){for(var r=(0,Gr.Z)(this.listeners_[n]),a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];for(var c=0;c<r.length;c++)r[c].callback.apply(r[c].context,o)}}},{key:"on",value:function(n,r,a){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:a});var o=this.getInitialEvent(n);o&&r.apply(a,o)}},{key:"off",value:function(n,r,a){this.validateEventType_(n);for(var o=this.listeners_[n]||[],u=0;u<o.length;u++)if(o[u].callback===r&&(!a||a===o[u].context))return void o.splice(u,1)}},{key:"validateEventType_",value:function(n){(0,Me.hu)(this.allowedEvents_.find(function(r){return r===n}),"Unknown event: "+n)}}]),i}(),wH=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this,["online"])).online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Me.uI)()&&(window.addEventListener("online",function(){r.online_||(r.online_=!0,r.trigger("online",!0))},!1),window.addEventListener("offline",function(){r.online_&&(r.online_=!1,r.trigger("online",!1))},!1)),r}return(0,D.Z)(n,[{key:"getInitialEvent",value:function(a){return(0,Me.hu)("online"===a,"Unknown event type: "+a),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(bH),ca=function(){function i(s,n){if((0,M.Z)(this,i),void 0===n){this.pieces_=s.split("/");for(var r=0,a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[r]=this.pieces_[a],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=n}return(0,D.Z)(i,[{key:"toString",value:function(){for(var n="",r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(n+="/"+this.pieces_[r]);return n||"/"}}]),i}();function na(){return new ca("")}function li(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function fm(i){return i.pieces_.length-i.pieceNum_}function Oa(i){var s=i.pieceNum_;return s<i.pieces_.length&&s++,new ca(i.pieces_,s)}function YZ(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function EM(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i.pieces_.slice(i.pieceNum_+s)}function CH(i){if(i.pieceNum_>=i.pieces_.length)return null;for(var s=[],n=i.pieceNum_;n<i.pieces_.length-1;n++)s.push(i.pieces_[n]);return new ca(s,0)}function ls(i,s){for(var n=[],r=i.pieceNum_;r<i.pieces_.length;r++)n.push(i.pieces_[r]);if(s instanceof ca)for(var a=s.pieceNum_;a<s.pieces_.length;a++)n.push(s.pieces_[a]);else for(var o=s.split("/"),u=0;u<o.length;u++)o[u].length>0&&n.push(o[u]);return new ca(n,0)}function ci(i){return i.pieceNum_>=i.pieces_.length}function Ku(i,s){var n=li(i),r=li(s);if(null===n)return s;if(n===r)return Ku(Oa(i),Oa(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+i+")")}function Tq(i,s){for(var n=EM(i,0),r=EM(s,0),a=0;a<n.length&&a<r.length;a++){var o=h(n[a],r[a]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function KZ(i,s){if(fm(i)!==fm(s))return!1;for(var n=i.pieceNum_,r=s.pieceNum_;n<=i.pieces_.length;n++,r++)if(i.pieces_[n]!==s.pieces_[r])return!1;return!0}function Hc(i,s){var n=i.pieceNum_,r=s.pieceNum_;if(fm(i)>fm(s))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==s.pieces_[r])return!1;++n,++r}return!0}var Mq=function i(s,n){(0,M.Z)(this,i),this.errorPrefix_=n,this.parts_=EM(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Me.ug)(this.parts_[r]);SH(this)};function SH(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Qy(i))}function Qy(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}var TR,XZ,Iq=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a,o;return(0,M.Z)(this,n),r=s.call(this,["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(o="visibilitychange",a="hidden"):void 0!==document.mozHidden?(o="mozvisibilitychange",a="mozHidden"):void 0!==document.msHidden?(o="msvisibilitychange",a="msHidden"):void 0!==document.webkitHidden&&(o="webkitvisibilitychange",a="webkitHidden")),r.visible_=!0,o&&document.addEventListener(o,function(){var u=!document[a];u!==r.visible_&&(r.visible_=u,r.trigger("visible",u))},!1),r}return(0,D.Z)(n,[{key:"getInitialEvent",value:function(a){return(0,Me.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(bH),CM=1e3,Jy=function(){var i=function(s){(0,S.Z)(r,s);var a,n=(0,re.Z)(r);function r(a,o,u,c,d,m,_,b){var E;if((0,M.Z)(this,r),(E=n.call(this)).repoInfo_=a,E.applicationId_=o,E.onDataUpdate_=u,E.onConnectStatus_=c,E.onServerInfoUpdate_=d,E.authTokenProvider_=m,E.appCheckTokenProvider_=_,E.authOverride_=b,E.id=r.nextPersistentConnectionId_++,E.log_=yw("p:"+E.id+":"),E.interruptReasons_={},E.listens=new Map,E.outstandingPuts_=[],E.outstandingGets_=[],E.outstandingPutCount_=0,E.outstandingGetCount_=0,E.onDisconnectRequestQueue_=[],E.connected_=!1,E.reconnectDelay_=CM,E.maxReconnectDelay_=3e5,E.securityDebugCallback_=null,E.lastSessionId=null,E.establishConnectionTimer_=null,E.visible_=!1,E.requestCBHash_={},E.requestNumber_=0,E.realtime_=null,E.authToken_=null,E.appCheckToken_=null,E.forceTokenRefresh_=!1,E.invalidAuthTokenCount_=0,E.invalidAppCheckTokenCount_=0,E.firstConnection_=!0,E.lastConnectionAttemptTime_=null,E.lastConnectionEstablishedTime_=null,b&&!(0,Me.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Iq.getInstance().on("visible",E.onVisible_,(0,wa.Z)(E)),-1===a.host.indexOf("fblocal")&&wH.getInstance().on("online",E.onOnline_,(0,wa.Z)(E)),E}return(0,D.Z)(r,[{key:"sendRequest",value:function(o,u,c){var d=++this.requestNumber_,m={r:d,a:o,b:u};this.log_((0,Me.Pz)(m)),(0,Me.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(m),c&&(this.requestCBHash_[d]=c)}},{key:"get",value:function(o){var u=this;this.initConnection_();var c=new Me.BH,d={p:o._path.toString(),q:o._queryObject},m={action:"g",request:d,onComplete:function(E){var T=E.d;"ok"===E.s?(u.onDataUpdate_(d.p,T,!1,null),c.resolve(T)):c.reject(T)}};this.outstandingGets_.push(m),this.outstandingGetCount_++;var _=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var b=u.outstandingGets_[_];void 0===b||m!==b||(delete u.outstandingGets_[_],u.outstandingGetCount_--,0===u.outstandingGetCount_&&(u.outstandingGets_=[]),u.log_("get "+_+" timed out on connection"),c.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(_),c.promise}},{key:"listen",value:function(o,u,c,d){this.initConnection_();var m=o._queryIdentifier,_=o._path.toString();this.log_("Listen called for "+_+" "+m),this.listens.has(_)||this.listens.set(_,new Map),(0,Me.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Me.hu)(!this.listens.get(_).has(m),"listen() called twice for same path/queryId.");var b={onComplete:d,hashFn:u,query:o,tag:c};this.listens.get(_).set(m,b),this.connected_&&this.sendListen_(b)}},{key:"sendGet_",value:function(o){var u=this,c=this.outstandingGets_[o];this.sendRequest("g",c.request,function(d){delete u.outstandingGets_[o],u.outstandingGetCount_--,0===u.outstandingGetCount_&&(u.outstandingGets_=[]),c.onComplete&&c.onComplete(d)})}},{key:"sendListen_",value:function(o){var u=this,c=o.query,d=c._path.toString(),m=c._queryIdentifier;this.log_("Listen on "+d+" for "+m);var _={p:d};o.tag&&(_.q=c._queryObject,_.t=o.tag),_.h=o.hashFn(),this.sendRequest("q",_,function(E){var T=E.d,I=E.s;r.warnOnListenWarnings_(T,c),(u.listens.get(d)&&u.listens.get(d).get(m))===o&&(u.log_("listen response",E),"ok"!==I&&u.removeListen_(d,m),o.onComplete&&o.onComplete(I,T))})}},{key:"refreshAuthToken",value:function(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(o)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(o){(o&&40===o.length||(0,Me.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})}},{key:"tryAuth",value:function(){var o=this;if(this.connected_&&this.authToken_){var u=this.authToken_,c=(0,Me.w9)(u)?"auth":"gauth",d={cred:u};null===this.authOverride_?d.noauth=!0:"object"==typeof this.authOverride_&&(d.authvar=this.authOverride_),this.sendRequest(c,d,function(m){var _=m.s,b=m.d||"error";o.authToken_===u&&("ok"===_?o.invalidAuthTokenCount_=0:o.onAuthRevoked_(_,b))})}}},{key:"tryAppCheck",value:function(){var o=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(u){var c=u.s,d=u.d||"error";"ok"===c?o.invalidAppCheckTokenCount_=0:o.onAppCheckRevoked_(c,d)})}},{key:"unlisten",value:function(o,u){var c=o._path.toString(),d=o._queryIdentifier;this.log_("Unlisten called for "+c+" "+d),(0,Me.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(c,d)&&this.connected_&&this.sendUnlisten_(c,d,o._queryObject,u)}},{key:"sendUnlisten_",value:function(o,u,c,d){this.log_("Unlisten on "+o+" for "+u);var m={p:o};d&&(m.q=c,m.t=d),this.sendRequest("n",m)}},{key:"onDisconnectPut",value:function(o,u,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,u,c):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:u,onComplete:c})}},{key:"onDisconnectMerge",value:function(o,u,c){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,u,c):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:u,onComplete:c})}},{key:"onDisconnectCancel",value:function(o,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,u):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:u})}},{key:"sendOnDisconnect_",value:function(o,u,c,d){var m={p:u,d:c};this.log_("onDisconnect "+o,m),this.sendRequest(o,m,function(_){d&&setTimeout(function(){d(_.s,_.d)},Math.floor(0))})}},{key:"put",value:function(o,u,c,d){this.putInternal("p",o,u,c,d)}},{key:"merge",value:function(o,u,c,d){this.putInternal("m",o,u,c,d)}},{key:"putInternal",value:function(o,u,c,d,m){this.initConnection_();var _={p:u,d:c};void 0!==m&&(_.h=m),this.outstandingPuts_.push({action:o,request:_,onComplete:d}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+u)}},{key:"sendPut_",value:function(o){var u=this,c=this.outstandingPuts_[o].action,d=this.outstandingPuts_[o].request,m=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(c,d,function(_){u.log_(c+" response",_),delete u.outstandingPuts_[o],u.outstandingPutCount_--,0===u.outstandingPutCount_&&(u.outstandingPuts_=[]),m&&m(_.s,_.d)})}},{key:"reportStats",value:function(o){var u=this;if(this.connected_){var c={c:o};this.log_("reportStats",c),this.sendRequest("s",c,function(d){"ok"!==d.s&&u.log_("reportStats","Error sending stats: "+d.d)})}}},{key:"onDataMessage_",value:function(o){if("r"in o){this.log_("from server: "+(0,Me.Pz)(o));var u=o.r,c=this.requestCBHash_[u];c&&(delete this.requestCBHash_[u],c(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}},{key:"onDataPush_",value:function(o,u){this.log_("handleServerMessage",o,u),"d"===o?this.onDataUpdate_(u.p,u.d,!1,u.t):"m"===o?this.onDataUpdate_(u.p,u.d,!0,u.t):"c"===o?this.onListenRevoked_(u.p,u.q):"ac"===o?this.onAuthRevoked_(u.s,u.d):"apc"===o?this.onAppCheckRevoked_(u.s,u.d):"sd"===o?this.onSecurityDebugPacket_(u):bR("Unrecognized action received from server: "+(0,Me.Pz)(o)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(o,u){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=u,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(o){var u=this;(0,Me.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){u.establishConnectionTimer_=null,u.establishConnection_()},Math.floor(o))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=CM,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}},{key:"onOnline_",value:function(o){o?(this.log_("Browser went online."),this.reconnectDelay_=CM,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=CM),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var u=(new Date).getTime()-this.lastConnectionAttemptTime_,c=Math.max(0,this.reconnectDelay_-u);c=Math.random()*c,this.log_("Trying to reconnect in "+c+"ms"),this.scheduleConnect_(c),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:(a=(0,Ut.Z)(Ze().mark(function u(){var d,m,_,b,E,T,I,N,U,te,ue,le,c=this;return Ze().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!this.shouldReconnect_()){se.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,d=this.onDataMessage_.bind(this),m=this.onReady_.bind(this),_=this.onRealtimeDisconnect_.bind(this),b=this.id+":"+r.nextConnectionId_++,E=this.lastSessionId,T=!1,I=null,this.realtime_={close:N=function(){I?I.close():(T=!0,_())},sendRequest:function(Ue){(0,Me.hu)(I,"sendRequest call when we're not connected not allowed."),I.sendRequest(Ue)}},U=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,se.prev=16,se.next=19,Promise.all([this.authTokenProvider_.getToken(U),this.appCheckTokenProvider_.getToken(U)]);case 19:te=(0,ke.Z)(se.sent,2),ue=te[0],le=te[1],T?To("getToken() completed but was canceled"):(To("getToken() completed. Creating connection."),this.authToken_=ue&&ue.accessToken,this.appCheckToken_=le&&le.token,I=new yH(b,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,d,m,_,function(ye){Su(ye+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},E)),se.next=30;break;case 26:se.prev=26,se.t0=se.catch(16),this.log_("Failed to get token: "+se.t0),T||(this.repoInfo_.nodeAdmin&&Su(se.t0),N());case 30:case"end":return se.stop()}},u,this,[[16,26]])})),function(){return a.apply(this,arguments)})},{key:"interrupt",value:function(o){To("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(o){To("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,Me.xb)(this.interruptReasons_)&&(this.reconnectDelay_=CM,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(o){var u=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:u})}},{key:"cancelSentTransactions_",value:function(){for(var o=0;o<this.outstandingPuts_.length;o++){var u=this.outstandingPuts_[o];u&&"h"in u.request&&u.queued&&(u.onComplete&&u.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(o,u){var c;c=u?u.map(function(m){return w(m)}).join("$"):"default";var d=this.removeListen_(o,c);d&&d.onComplete&&d.onComplete("permission_denied")}},{key:"removeListen_",value:function(o,u){var d,c=new ca(o).toString();if(this.listens.has(c)){var m=this.listens.get(c);d=m.get(u),m.delete(u),0===m.size&&this.listens.delete(c)}else d=void 0;return d}},{key:"onAuthRevoked_",value:function(o,u){To("Auth token revoked: "+o+"/"+u),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(o,u){To("App check token revoked: "+o+"/"+u),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var u,o=(0,Re.Z)(this.listens.values());try{for(o.s();!(u=o.n()).done;){var m,d=(0,Re.Z)(u.value.values());try{for(d.s();!(m=d.n()).done;)this.sendListen_(m.value)}catch(I){d.e(I)}finally{d.f()}}}catch(I){o.e(I)}finally{o.f()}for(var b=0;b<this.outstandingPuts_.length;b++)this.outstandingPuts_[b]&&this.sendPut_(b);for(;this.onDisconnectRequestQueue_.length;){var E=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(E.action,E.pathString,E.data,E.onComplete)}for(var T=0;T<this.outstandingGets_.length;T++)this.outstandingGets_[T]&&this.sendGet_(T)}},{key:"sendConnectStats_",value:function(){var o={},u="js";(0,Me.Yr)()&&(u=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+u+"."+mR.replace(/\./g,"-")]=1,(0,Me.uI)()?o["framework.cordova"]=1:(0,Me.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}},{key:"shouldReconnect_",value:function(){var o=wH.getInstance().currentlyOnline();return(0,Me.xb)(this.interruptReasons_)&&o}}],[{key:"warnOnListenWarnings_",value:function(o,u){if(o&&"object"==typeof o&&(0,Me.r3)(o,"w")){var c=(0,Me.DV)(o,"w");if(Array.isArray(c)&&~c.indexOf("no_index")){var d='".indexOn": "'+u._queryParams.getIndex().toString()+'"',m=u._path.toString();Su("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(d," at ")+"".concat(m," to your security rules for better performance."))}}}}]),r}(_H);return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i}(),Ai=function(){function i(s,n){(0,M.Z)(this,i),this.name=s,this.node=n}return(0,D.Z)(i,null,[{key:"Wrap",value:function(n,r){return new i(n,r)}}]),i}(),SR=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(n,r){var a=new Ai(l,n),o=new Ai(l,r);return 0!==this.compare(a,o)}},{key:"minPost",value:function(){return Ai.MIN}}]),i}(),AH=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"compare",value:function(a,o){return h(a.name,o.name)}},{key:"isDefinedOn",value:function(a){throw(0,Me.g5)("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(a,o){return!1}},{key:"minPost",value:function(){return Ai.MIN}},{key:"maxPost",value:function(){return new Ai(f,TR)}},{key:"makePost",value:function(a,o){return(0,Me.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new Ai(a,TR)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return TR},set:function(a){TR=a}}]),n}(SR),td=new AH,MR=function(){function i(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,M.Z)(this,i),this.isReverse_=a,this.resultGenerator_=o,this.nodeStack_=[];for(var u=1;!s.isEmpty();)if(s=s,u=n?r(s.key,n):1,a&&(u*=-1),u<0)s=this.isReverse_?s.left:s.right;else{if(0===u){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}return(0,D.Z)(i,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var r,n=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}]),i}(),Of=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.key=n,this.value=r,this.color=null!=a?a:s.RED,this.left=null!=o?o:ov.EMPTY_NODE,this.right=null!=u?u:ov.EMPTY_NODE}return(0,D.Z)(s,[{key:"copy",value:function(r,a,o,u,c){return new s(null!=r?r:this.key,null!=a?a:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}},{key:"reverseTraversal",value:function(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(r,a,o){var u=this,c=o(r,u.key);return(u=c<0?u.copy(null,null,null,u.left.insert(r,a,o),null):0===c?u.copy(null,a,null,null,null):u.copy(null,null,null,null,u.right.insert(r,a,o))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return ov.EMPTY_NODE;var r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),(r=r.copy(null,null,null,r.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(r,a){var o,u;if(a(r,(o=this).key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(r,a),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===a(r,o.key)){if(o.right.isEmpty())return ov.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(r,a))}return o.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}},{key:"moveRedLeft_",value:function(){var r=this.colorFlip_();return r.right.left.isRed_()&&(r=(r=(r=r.copy(null,null,null,null,r.right.rotateRight_())).rotateLeft_()).colorFlip_()),r}},{key:"moveRedRight_",value:function(){var r=this.colorFlip_();return r.left.left.isRed_()&&(r=(r=r.rotateRight_()).colorFlip_()),r}},{key:"rotateLeft_",value:function(){var r=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}},{key:"rotateRight_",value:function(){var r=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}},{key:"colorFlip_",value:function(){var r=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,a)}},{key:"checkMaxDepth_",value:function(){var r=this.check_();return Math.pow(2,r)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}]),s}();return i.RED=!0,i.BLACK=!1,i}(),Nq=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"copy",value:function(n,r,a,o,u){return this}},{key:"insert",value:function(n,r,a){return new Of(n,r,null)}},{key:"remove",value:function(n,r){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(n){return!1}},{key:"reverseTraversal",value:function(n){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),i}(),ov=function(){var i=function(){function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.EMPTY_NODE;(0,M.Z)(this,s),this.comparator_=n,this.root_=r}return(0,D.Z)(s,[{key:"insert",value:function(r,a){return new s(this.comparator_,this.root_.insert(r,a,this.comparator_).copy(null,null,Of.BLACK,null,null))}},{key:"remove",value:function(r){return new s(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,Of.BLACK,null,null))}},{key:"get",value:function(r){for(var a,o=this.root_;!o.isEmpty();){if(0===(a=this.comparator_(r,o.key)))return o.value;a<0?o=o.left:a>0&&(o=o.right)}return null}},{key:"getPredecessorKey",value:function(r){for(var a,o=this.root_,u=null;!o.isEmpty();){if(0===(a=this.comparator_(r,o.key))){if(o.left.isEmpty())return u?u.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}a<0?o=o.left:a>0&&(u=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(r){return this.root_.inorderTraversal(r)}},{key:"reverseTraversal",value:function(r){return this.root_.reverseTraversal(r)}},{key:"getIterator",value:function(r){return new MR(this.root_,null,this.comparator_,!1,r)}},{key:"getIteratorFrom",value:function(r,a){return new MR(this.root_,r,this.comparator_,!1,a)}},{key:"getReverseIteratorFrom",value:function(r,a){return new MR(this.root_,r,this.comparator_,!0,a)}},{key:"getReverseIterator",value:function(r){return new MR(this.root_,null,this.comparator_,!0,r)}}]),s}();return i.EMPTY_NODE=new Nq,i}();function Fq(i,s){return h(i.name,s.name)}function $Z(i,s){return h(i,s)}var DH,RH,PH,QZ,SM,xH=function(s){return"number"==typeof s?"number:"+Z(s):"string:"+s},IH=function(s){if(s.isLeafNode()){var n=s.val();(0,Me.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,Me.r3)(n,".sv"),"Priority must be a string or number.")}else(0,Me.hu)(s===XZ||s.isEmpty(),"priority of unexpected type.");(0,Me.hu)(s===XZ||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},bw=function(){var i=function(){function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.__childrenNodeConstructor.EMPTY_NODE;(0,M.Z)(this,s),this.value_=n,this.priorityNode_=r,this.lazyHash_=null,(0,Me.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),IH(this.priorityNode_)}return(0,D.Z)(s,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(r){return new s(this.value_,r)}},{key:"getImmediateChild",value:function(r){return".priority"===r?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(r){return ci(r)?this:".priority"===li(r)?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(r,a){return null}},{key:"updateImmediateChild",value:function(r,a){return".priority"===r?this.updatePriority(a):a.isEmpty()&&".priority"!==r?this:s.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,a).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(r,a){var o=li(r);return null===o?a:a.isEmpty()&&".priority"!==o?this:((0,Me.hu)(".priority"!==o||1===fm(r),".priority must be the last token in a path"),this.updateImmediateChild(o,s.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oa(r),a)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(r,a){return!1}},{key:"val",value:function(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var r="";this.priorityNode_.isEmpty()||(r+="priority:"+xH(this.priorityNode_.val())+":");var a=typeof this.value_;r+=a+":",r+="number"===a?Z(this.value_):this.value_,this.lazyHash_=UZ(r)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(r){return r===s.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof s.__childrenNodeConstructor?-1:((0,Me.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}},{key:"compareToLeafNode_",value:function(r){var a=typeof r.value_,o=typeof this.value_,u=s.VALUE_TYPE_ORDER.indexOf(a),c=s.VALUE_TYPE_ORDER.indexOf(o);return(0,Me.hu)(u>=0,"Unknown leaf type: "+a),(0,Me.hu)(c>=0,"Unknown leaf type: "+o),u===c?"object"===o?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:c-u}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(r){return r===this||!!r.isLeafNode()&&(this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_))}}],[{key:"__childrenNodeConstructor",get:function(){return DH},set:function(r){DH=r}}]),s}();return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i}(),Va=new(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"compare",value:function(a,o){var u=a.node.getPriority(),c=o.node.getPriority(),d=u.compareTo(c);return 0===d?h(a.name,o.name):d}},{key:"isDefinedOn",value:function(a){return!a.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(a,o){return!a.getPriority().equals(o.getPriority())}},{key:"minPost",value:function(){return Ai.MIN}},{key:"maxPost",value:function(){return new Ai(f,new bw("[PRIORITY-POST]",PH))}},{key:"makePost",value:function(a,o){var u=RH(a);return new Ai(o,new bw("[PRIORITY-POST]",u))}},{key:"toString",value:function(){return".priority"}}]),n}(SR)),Hq=Math.log(2),zq=function(){function i(s){(0,M.Z)(this,i),this.count=parseInt(Math.log(s+1)/Hq,10),this.current_=this.count-1;var a=parseInt(Array(this.count+1).join("1"),2);this.bits_=s+1&a}return(0,D.Z)(i,[{key:"nextBitIsOne",value:function(){var n=!(this.bits_&1<<this.current_);return this.current_--,n}}]),i}(),AR=function(s,n,r,a){s.sort(n);var o=function m(_,b){var T,I,E=b-_;if(0===E)return null;if(1===E)return T=s[_],I=r?r(T):T,new Of(I,T.node,Of.BLACK,null,null);var N=parseInt(E/2,10)+_,W=m(_,N),U=m(N+1,b);return T=s[N],I=r?r(T):T,new Of(I,T.node,Of.BLACK,W,U)},d=function(_){for(var b=null,E=null,T=s.length,I=function(ue,le){var he=T-ue,se=T;T-=ue;var ye=o(he+1,se),Ue=s[he],Ve=r?r(Ue):Ue;N(new Of(Ve,Ue.node,le,null,ye))},N=function(ue){b?(b.left=ue,b=ue):(E=ue,b=ue)},W=0;W<_.count;++W){var U=_.nextBitIsOne(),H=Math.pow(2,_.count-(W+1));U?I(H,Of.BLACK):(I(H,Of.BLACK),I(H,Of.RED))}return E}(new zq(s.length));return new ov(a||n,d)},ww={},xR=function(){function i(s,n){(0,M.Z)(this,i),this.indexes_=s,this.indexSet_=n}return(0,D.Z)(i,[{key:"get",value:function(n){var r=(0,Me.DV)(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof ov?r:null}},{key:"hasIndex",value:function(n){return(0,Me.r3)(this.indexSet_,n.toString())}},{key:"addIndex",value:function(n,r){(0,Me.hu)(n!==td,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var a=[],o=!1,u=r.getIterator(Ai.Wrap),c=u.getNext();c;)o=o||n.isDefinedOn(c.node),a.push(c),c=u.getNext();var d;d=o?AR(a,n.getCompare()):ww;var m=n.toString(),_=Object.assign({},this.indexSet_);_[m]=n;var b=Object.assign({},this.indexes_);return b[m]=d,new i(b,_)}},{key:"addToIndexes",value:function(n,r){var a=this;return new i((0,Me.UI)(this.indexes_,function(u,c){var d=(0,Me.DV)(a.indexSet_,c);if((0,Me.hu)(d,"Missing index implementation for "+c),u===ww){if(d.isDefinedOn(n.node)){for(var m=[],_=r.getIterator(Ai.Wrap),b=_.getNext();b;)b.name!==n.name&&m.push(b),b=_.getNext();return m.push(n),AR(m,d.getCompare())}return ww}var E=r.get(n.name),T=u;return E&&(T=T.remove(new Ai(n.name,E))),T.insert(n,n.node)}),this.indexSet_)}},{key:"removeFromIndexes",value:function(n,r){return new i((0,Me.UI)(this.indexes_,function(o){if(o===ww)return o;var u=r.get(n.name);return u?o.remove(new Ai(n.name,u)):o}),this.indexSet_)}}],[{key:"Default",get:function(){return(0,Me.hu)(ww&&Va,"ChildrenNode.ts has not been loaded"),QZ=QZ||new i({".priority":ww},{".priority":Va})}}]),i}(),$r=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this.children_=n,this.priorityNode_=r,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&IH(this.priorityNode_),this.children_.isEmpty()&&(0,Me.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return(0,D.Z)(s,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||SM}},{key:"updatePriority",value:function(r){return this.children_.isEmpty()?this:new s(this.children_,r,this.indexMap_)}},{key:"getImmediateChild",value:function(r){if(".priority"===r)return this.getPriority();var a=this.children_.get(r);return null===a?SM:a}},{key:"getChild",value:function(r){var a=li(r);return null===a?this:this.getImmediateChild(a).getChild(Oa(r))}},{key:"hasChild",value:function(r){return null!==this.children_.get(r)}},{key:"updateImmediateChild",value:function(r,a){if((0,Me.hu)(a,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(a);var u,c,o=new Ai(r,a);a.isEmpty()?(u=this.children_.remove(r),c=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(r,a),c=this.indexMap_.addToIndexes(o,this.children_));var d=u.isEmpty()?SM:this.priorityNode_;return new s(u,d,c)}},{key:"updateChild",value:function(r,a){var o=li(r);if(null===o)return a;(0,Me.hu)(".priority"!==li(r)||1===fm(r),".priority must be the last token in a path");var u=this.getImmediateChild(o).updateChild(Oa(r),a);return this.updateImmediateChild(o,u)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(r){if(this.isEmpty())return null;var a={},o=0,u=0,c=!0;if(this.forEachChild(Va,function(_,b){a[_]=b.val(r),o++,c&&s.INTEGER_REGEXP_.test(_)?u=Math.max(u,Number(_)):c=!1}),!r&&c&&u<2*o){var d=[];for(var m in a)d[m]=a[m];return d}return r&&!this.getPriority().isEmpty()&&(a[".priority"]=this.getPriority().val()),a}},{key:"hash",value:function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+xH(this.getPriority().val())+":"),this.forEachChild(Va,function(a,o){var u=o.hash();""!==u&&(r+=":"+a+":"+u)}),this.lazyHash_=""===r?"":UZ(r)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(r,a,o){var u=this.resolveIndex_(o);if(u){var c=u.getPredecessorKey(new Ai(r,a));return c?c.name:null}return this.children_.getPredecessorKey(r)}},{key:"getFirstChildName",value:function(r){var a=this.resolveIndex_(r);if(a){var o=a.minKey();return o&&o.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(r){var a=this.getFirstChildName(r);return a?new Ai(a,this.children_.get(a)):null}},{key:"getLastChildName",value:function(r){var a=this.resolveIndex_(r);if(a){var o=a.maxKey();return o&&o.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(r){var a=this.getLastChildName(r);return a?new Ai(a,this.children_.get(a)):null}},{key:"forEachChild",value:function(r,a){var o=this.resolveIndex_(r);return o?o.inorderTraversal(function(u){return a(u.name,u.node)}):this.children_.inorderTraversal(a)}},{key:"getIterator",value:function(r){return this.getIteratorFrom(r.minPost(),r)}},{key:"getIteratorFrom",value:function(r,a){var o=this.resolveIndex_(a);if(o)return o.getIteratorFrom(r,function(d){return d});for(var u=this.children_.getIteratorFrom(r.name,Ai.Wrap),c=u.peek();null!=c&&a.compare(c,r)<0;)u.getNext(),c=u.peek();return u}},{key:"getReverseIterator",value:function(r){return this.getReverseIteratorFrom(r.maxPost(),r)}},{key:"getReverseIteratorFrom",value:function(r,a){var o=this.resolveIndex_(a);if(o)return o.getReverseIteratorFrom(r,function(d){return d});for(var u=this.children_.getReverseIteratorFrom(r.name,Ai.Wrap),c=u.peek();null!=c&&a.compare(c,r)>0;)u.getNext(),c=u.peek();return u}},{key:"compareTo",value:function(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===TM?-1:0}},{key:"withIndex",value:function(r){if(r===td||this.indexMap_.hasIndex(r))return this;var a=this.indexMap_.addIndex(r,this.children_);return new s(this.children_,this.priorityNode_,a)}},{key:"isIndexed",value:function(r){return r===td||this.indexMap_.hasIndex(r)}},{key:"equals",value:function(r){if(r===this)return!0;if(r.isLeafNode())return!1;var a=r;if(this.getPriority().equals(a.getPriority())){if(this.children_.count()===a.children_.count()){for(var o=this.getIterator(Va),u=a.getIterator(Va),c=o.getNext(),d=u.getNext();c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=o.getNext(),d=u.getNext()}return null===c&&null===d}return!1}return!1}},{key:"resolveIndex_",value:function(r){return r===td?null:this.indexMap_.get(r.toString())}}],[{key:"EMPTY_NODE",get:function(){return SM||(SM=new s(new ov($Z),null,xR.Default))}}]),s}();return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i}(),TM=new(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.call(this,new ov($Z),$r.EMPTY_NODE,xR.Default)}return(0,D.Z)(n,[{key:"compareTo",value:function(a){return a===this?0:1}},{key:"equals",value:function(a){return a===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(a){return $r.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}($r));function ws(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===i)return $r.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(s=i[".priority"]),(0,Me.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i){var n=i;return new bw(n,ws(s))}if(i instanceof Array){var d=$r.EMPTY_NODE;return x(i,function(m,_){if((0,Me.r3)(i,m)&&"."!==m.substring(0,1)){var b=ws(_);(b.isLeafNode()||!b.isEmpty())&&(d=d.updateImmediateChild(m,b))}}),d.updatePriority(ws(s))}var r=[],a=!1,o=i;if(x(o,function(m,_){if("."!==m.substring(0,1)){var b=ws(_);b.isEmpty()||(a=a||!b.getPriority().isEmpty(),r.push(new Ai(m,b)))}}),0===r.length)return $r.EMPTY_NODE;var u=AR(r,Fq,function(m){return m.name},$Z);if(a){var c=AR(r,Va.getCompare());return new $r(u,ws(s),new xR({".priority":c},{".priority":Va}))}return new $r(u,ws(s),xR.Default)}Object.defineProperties(Ai,{MIN:{value:new Ai(l,$r.EMPTY_NODE)},MAX:{value:new Ai(f,TM)}}),AH.__EMPTY_NODE=$r.EMPTY_NODE,bw.__childrenNodeConstructor=$r,function(i){XZ=i}(TM),function(i){PH=i}(TM),function(i){RH=i}(ws);var JZ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).indexPath_=r,(0,Me.hu)(!ci(r)&&".priority"!==li(r),"Can't create PathIndex with empty path or .priority key"),a}return(0,D.Z)(n,[{key:"extractChild",value:function(a){return a.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(a){return!a.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(a,o){var u=this.extractChild(a.node),c=this.extractChild(o.node),d=u.compareTo(c);return 0===d?h(a.name,o.name):d}},{key:"makePost",value:function(a,o){var u=ws(a),c=$r.EMPTY_NODE.updateChild(this.indexPath_,u);return new Ai(o,c)}},{key:"maxPost",value:function(){var a=$r.EMPTY_NODE.updateChild(this.indexPath_,TM);return new Ai(f,a)}},{key:"toString",value:function(){return EM(this.indexPath_,0).join("/")}}]),n}(SR),e2=new(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"compare",value:function(a,o){var u=a.node.compareTo(o.node);return 0===u?h(a.name,o.name):u}},{key:"isDefinedOn",value:function(a){return!0}},{key:"indexedValueChanged",value:function(a,o){return!a.equals(o)}},{key:"minPost",value:function(){return Ai.MIN}},{key:"maxPost",value:function(){return Ai.MAX}},{key:"makePost",value:function(a,o){var u=ws(a);return new Ai(o,u)}},{key:"toString",value:function(){return".value"}}]),n}(SR)),kw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qq=function(){var i=0,s=[];return function(n){var r=n===i;i=n;var a,o=new Array(8);for(a=7;a>=0;a--)o[a]=kw.charAt(n%64),n=Math.floor(n/64);(0,Me.hu)(0===n,"Cannot push at time == 0");var u=o.join("");if(r){for(a=11;a>=0&&63===s[a];a--)s[a]=0;s[a]++}else for(a=0;a<12;a++)s[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)u+=kw.charAt(s[a]);return(0,Me.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),NH=function(s){if(s===""+Ne)return"-";var n=at(s);if(null!=n)return""+(n+1);for(var r=new Array(s.length),a=0;a<r.length;a++)r[a]=s.charAt(a);if(r.length<786)return r.push("-"),r.join("");for(var o=r.length-1;o>=0&&"z"===r[o];)o--;if(-1===o)return f;var c=kw.charAt(kw.indexOf(r[o])+1);return r[o]=c,r.slice(0,o+1).join("")},FH=function(s){if(s===""+Se)return l;var n=at(s);if(null!=n)return""+(n-1);for(var r=new Array(s.length),a=0;a<r.length;a++)r[a]=s.charAt(a);return"-"===r[r.length-1]?1===r.length?""+Ne:(delete r[r.length-1],r.join("")):(r[r.length-1]=kw.charAt(kw.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function ZH(i){return{type:"value",snapshotNode:i}}function Ew(i,s){return{type:"child_added",snapshotNode:s,childName:i}}function MM(i,s){return{type:"child_removed",snapshotNode:s,childName:i}}function AM(i,s,n){return{type:"child_changed",snapshotNode:s,childName:i,oldSnap:n}}var n2=function(){function i(s){(0,M.Z)(this,i),this.index_=s}return(0,D.Z)(i,[{key:"updateChild",value:function(n,r,a,o,u,c){(0,Me.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");var d=n.getImmediateChild(r);return d.getChild(o).equals(a.getChild(o))&&d.isEmpty()===a.isEmpty()||(null!=c&&(a.isEmpty()?n.hasChild(r)?c.trackChildChange(MM(r,d)):(0,Me.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Ew(r,a)):c.trackChildChange(AM(r,a,d))),n.isLeafNode()&&a.isEmpty())?n:n.updateImmediateChild(r,a).withIndex(this.index_)}},{key:"updateFullNode",value:function(n,r,a){return null!=a&&(n.isLeafNode()||n.forEachChild(Va,function(o,u){r.hasChild(o)||a.trackChildChange(MM(o,u))}),r.isLeafNode()||r.forEachChild(Va,function(o,u){if(n.hasChild(o)){var c=n.getImmediateChild(o);c.equals(u)||a.trackChildChange(AM(o,u,c))}else a.trackChildChange(Ew(o,u))})),r.withIndex(this.index_)}},{key:"updatePriority",value:function(n,r){return n.isEmpty()?$r.EMPTY_NODE:n.updatePriority(r)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),i}(),BH=function(){function i(s){(0,M.Z)(this,i),this.indexedFilter_=new n2(s.getIndex()),this.index_=s.getIndex(),this.startPost_=i.getStartPost_(s),this.endPost_=i.getEndPost_(s)}return(0,D.Z)(i,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(n){return this.index_.compare(this.getStartPost(),n)<=0&&this.index_.compare(n,this.getEndPost())<=0}},{key:"updateChild",value:function(n,r,a,o,u,c){return this.matches(new Ai(r,a))||(a=$r.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,a,o,u,c)}},{key:"updateFullNode",value:function(n,r,a){r.isLeafNode()&&(r=$r.EMPTY_NODE);var o=r.withIndex(this.index_);o=o.updatePriority($r.EMPTY_NODE);var u=this;return r.forEachChild(Va,function(c,d){u.matches(new Ai(c,d))||(o=o.updateImmediateChild(c,$r.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,a)}},{key:"updatePriority",value:function(n,r){return n}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(n){if(n.hasStart()){var r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}return n.getIndex().minPost()}},{key:"getEndPost_",value:function(n){if(n.hasEnd()){var r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}return n.getIndex().maxPost()}}]),i}(),Kq=function(){function i(s){(0,M.Z)(this,i),this.rangedFilter_=new BH(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft()}return(0,D.Z)(i,[{key:"updateChild",value:function(n,r,a,o,u,c){return this.rangedFilter_.matches(new Ai(r,a))||(a=$r.EMPTY_NODE),n.getImmediateChild(r).equals(a)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,a,o,u,c):this.fullLimitUpdateChild_(n,r,a,u,c)}},{key:"updateFullNode",value:function(n,r,a){var o;if(r.isLeafNode()||r.isEmpty())o=$r.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){var u;o=$r.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var c=0;u.hasNext()&&c<this.limit_;){var d=u.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0))break;o=o.updateImmediateChild(d.name,d.node),c++}}else{var _,b,E,T;if(o=(o=r.withIndex(this.index_)).updatePriority($r.EMPTY_NODE),this.reverse_){T=o.getReverseIterator(this.index_),_=this.rangedFilter_.getEndPost(),b=this.rangedFilter_.getStartPost();var I=this.index_.getCompare();E=function(ue,le){return I(le,ue)}}else T=o.getIterator(this.index_),_=this.rangedFilter_.getStartPost(),b=this.rangedFilter_.getEndPost(),E=this.index_.getCompare();for(var N=0,W=!1;T.hasNext();){var U=T.getNext();!W&&E(_,U)<=0&&(W=!0),W&&N<this.limit_&&E(U,b)<=0?N++:o=o.updateImmediateChild(U.name,$r.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,a)}},{key:"updatePriority",value:function(n,r){return n}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(n,r,a,o,u){var c;if(this.reverse_){var d=this.index_.getCompare();c=function(ue,le){return d(le,ue)}}else c=this.index_.getCompare();var m=n;(0,Me.hu)(m.numChildren()===this.limit_,"");var _=new Ai(r,a),b=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),E=this.rangedFilter_.matches(_);if(m.hasChild(r)){for(var T=m.getImmediateChild(r),I=o.getChildAfterChild(this.index_,b,this.reverse_);null!=I&&(I.name===r||m.hasChild(I.name));)I=o.getChildAfterChild(this.index_,I,this.reverse_);var N=null==I?1:c(I,_);if(E&&!a.isEmpty()&&N>=0)return null!=u&&u.trackChildChange(AM(r,a,T)),m.updateImmediateChild(r,a);null!=u&&u.trackChildChange(MM(r,T));var U=m.updateImmediateChild(r,$r.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(null!=u&&u.trackChildChange(Ew(I.name,I.node)),U.updateImmediateChild(I.name,I.node)):U}return a.isEmpty()?n:E&&c(b,_)>=0?(null!=u&&(u.trackChildChange(MM(b.name,b.node)),u.trackChildChange(Ew(r,a))),m.updateImmediateChild(r,a).updateImmediateChild(b.name,$r.EMPTY_NODE)):n}}]),i}(),UH=function(){function i(){(0,M.Z)(this,i),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Va}return(0,D.Z)(i,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return(0,Me.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return(0,Me.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:l}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return(0,Me.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return(0,Me.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:f}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return(0,Me.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Va}},{key:"copy",value:function(){var n=new i;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}]),i}();function r2(i,s,n){var r=i.copy();return r.startSet_=!0,void 0===s&&(s=null),r.indexStartValue_=s,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function a2(i,s,n){var r=i.copy();return r.endSet_=!0,void 0===s&&(s=null),r.indexEndValue_=s,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function IR(i,s){var n=i.copy();return n.index_=s,n}function VH(i){var n,s={};return i.isDefault()||(i.index_===Va?n="$priority":i.index_===e2?n="$value":i.index_===td?n="$key":((0,Me.hu)(i.index_ instanceof JZ,"Unrecognized index type!"),n=i.index_.toString()),s.orderBy=(0,Me.Pz)(n),i.startSet_&&(s.startAt=(0,Me.Pz)(i.indexStartValue_),i.startNameSet_&&(s.startAt+=","+(0,Me.Pz)(i.indexStartName_))),i.endSet_&&(s.endAt=(0,Me.Pz)(i.indexEndValue_),i.endNameSet_&&(s.endAt+=","+(0,Me.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?s.limitToFirst=i.limit_:s.limitToLast=i.limit_)),s}function HH(i){var s={};if(i.startSet_&&(s.sp=i.indexStartValue_,i.startNameSet_&&(s.sn=i.indexStartName_)),i.endSet_&&(s.ep=i.indexEndValue_,i.endNameSet_&&(s.en=i.indexEndName_)),i.limitSet_){s.l=i.limit_;var n=i.viewFrom_;""===n&&(n=i.isViewFromLeft()?"l":"r"),s.vf=n}return i.index_!==Va&&(s.i=i.index_.toString()),s}var t8=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this)).repoInfo_=r,c.onDataUpdate_=a,c.authTokenProvider_=o,c.appCheckTokenProvider_=u,c.log_=yw("p:rest:"),c.listens_={},c}return(0,D.Z)(n,[{key:"reportStats",value:function(a){throw new Error("Method not implemented.")}},{key:"listen",value:function(a,o,u,c){var d=this,m=a._path.toString();this.log_("Listen called for "+m+" "+a._queryIdentifier);var _=n.getListenId_(a,u),b={};this.listens_[_]=b;var E=VH(a._queryParams);this.restRequest_(m+".json",E,function(T,I){var N=I;404===T&&(N=null,T=null),null===T&&d.onDataUpdate_(m,N,!1,u),(0,Me.DV)(d.listens_,_)===b&&c(T?401===T?"permission_denied":"rest_error:"+T:"ok",null)})}},{key:"unlisten",value:function(a,o){var u=n.getListenId_(a,o);delete this.listens_[u]}},{key:"get",value:function(a){var o=this,u=VH(a._queryParams),c=a._path.toString(),d=new Me.BH;return this.restRequest_(c+".json",u,function(m,_){var b=_;404===m&&(b=null,m=null),null===m?(o.onDataUpdate_(c,b,!1,null),d.resolve(b)):d.reject(new Error(b))}),d.promise}},{key:"refreshAuthToken",value:function(a){}},{key:"restRequest_",value:function(a){var o=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2?arguments[2]:void 0;return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(d){var m=(0,ke.Z)(d,2),_=m[0],b=m[1];_&&_.accessToken&&(u.auth=_.accessToken),b&&b.token&&(u.ac=b.token);var E=(o.repoInfo_.secure?"https://":"http://")+o.repoInfo_.host+a+"?ns="+o.repoInfo_.namespace+(0,Me.xO)(u);o.log_("Sending REST request for "+E);var T=new XMLHttpRequest;T.onreadystatechange=function(){if(c&&4===T.readyState){o.log_("REST Response for "+E+" received. status:",T.status,"response:",T.responseText);var I=null;if(T.status>=200&&T.status<300){try{I=(0,Me.cI)(T.responseText)}catch(N){Su("Failed to parse JSON response for "+E+": "+T.responseText)}c(null,I)}else 401!==T.status&&404!==T.status&&Su("Got unsuccessful REST response for "+E+" Status: "+T.status),c(T.status);c=null}},T.open("GET",E,!0),T.send()})}}],[{key:"getListenId_",value:function(a,o){return void 0!==o?"tag$"+o:((0,Me.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}}]),n}(_H),n8=function(){function i(){(0,M.Z)(this,i),this.rootNode_=$r.EMPTY_NODE}return(0,D.Z)(i,[{key:"getNode",value:function(n){return this.rootNode_.getChild(n)}},{key:"updateSnapshot",value:function(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}]),i}();function DR(){return{value:null,children:new Map}}function Cw(i,s,n){if(ci(s))i.value=n,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(s,n);else{var r=li(s);i.children.has(r)||i.children.set(r,DR()),Cw(i.children.get(r),s=Oa(s),n)}}function s2(i,s){if(ci(s))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;var n=i.value;return i.value=null,n.forEachChild(Va,function(o,u){Cw(i,new ca(o),u)}),s2(i,s)}if(i.children.size>0){var r=li(s);return s=Oa(s),i.children.has(r)&&s2(i.children.get(r),s)&&i.children.delete(r),0===i.children.size}return!0}function o2(i,s,n){null!==i.value?n(s,i.value):function(i,s){i.children.forEach(function(n,r){s(r,n)})}(i,function(r,a){o2(a,new ca(s.toString()+"/"+r),n)})}var i8=function(){function i(s){(0,M.Z)(this,i),this.collection_=s,this.last_=null}return(0,D.Z)(i,[{key:"get",value:function(){var n=this.collection_.get(),r=Object.assign({},n);return this.last_&&x(this.last_,function(a,o){r[a]=r[a]-o}),this.last_=n,r}}]),i}(),o8=function(){function i(s,n){(0,M.Z)(this,i),this.server_=n,this.statsToReport_={},this.statsListener_=new i8(s);var r=1e4+2e4*Math.random();It(this.reportStats_.bind(this),Math.floor(r))}return(0,D.Z)(i,[{key:"reportStats_",value:function(){var n=this,r=this.statsListener_.get(),a={},o=!1;x(r,function(u,c){c>0&&(0,Me.r3)(n.statsToReport_,u)&&(a[u]=c,o=!0)}),o&&this.server_.reportStats(a),It(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),i}(),uv=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}({});function c2(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var u8=function(){function i(s,n,r){(0,M.Z)(this,i),this.path=s,this.affectedTree=n,this.revert=r,this.type=uv.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return(0,D.Z)(i,[{key:"operationForChild",value:function(n){if(ci(this.path)){if(null!=this.affectedTree.value)return(0,Me.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var r=this.affectedTree.subtree(new ca(n));return new i(na(),r,this.revert)}return(0,Me.hu)(li(this.path)===n,"operationForChild called for unrelated child."),new i(Oa(this.path),this.affectedTree,this.revert)}}]),i}(),GH=function(){function i(s,n){(0,M.Z)(this,i),this.source=s,this.path=n,this.type=uv.LISTEN_COMPLETE}return(0,D.Z)(i,[{key:"operationForChild",value:function(n){return ci(this.path)?new i(this.source,na()):new i(this.source,Oa(this.path))}}]),i}(),RR=function(){function i(s,n,r){(0,M.Z)(this,i),this.source=s,this.path=n,this.snap=r,this.type=uv.OVERWRITE}return(0,D.Z)(i,[{key:"operationForChild",value:function(n){return ci(this.path)?new i(this.source,na(),this.snap.getImmediateChild(n)):new i(this.source,Oa(this.path),this.snap)}}]),i}(),f2=function(){function i(s,n,r){(0,M.Z)(this,i),this.source=s,this.path=n,this.children=r,this.type=uv.MERGE}return(0,D.Z)(i,[{key:"operationForChild",value:function(n){if(ci(this.path)){var r=this.children.subtree(new ca(n));return r.isEmpty()?null:r.value?new RR(this.source,na(),r.value):new i(this.source,na(),r)}return(0,Me.hu)(li(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new i(this.source,Oa(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),i}(),hm=function(){function i(s,n,r){(0,M.Z)(this,i),this.node_=s,this.fullyInitialized_=n,this.filtered_=r}return(0,D.Z)(i,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(n){if(ci(n))return this.isFullyInitialized()&&!this.filtered_;var r=li(n);return this.isCompleteForChild(r)}},{key:"isCompleteForChild",value:function(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}},{key:"getNode",value:function(){return this.node_}}]),i}(),l8=function i(s){(0,M.Z)(this,i),this.query_=s,this.index_=this.query_._queryParams.getIndex()};function xM(i,s,n,r,a,o){var u=r.filter(function(c){return c.type===n});u.sort(function(c,d){return function(i,s,n){if(null==s.childName||null==n.childName)throw(0,Me.g5)("Should only compare child_ events.");var r=new Ai(s.childName,s.snapshotNode),a=new Ai(n.childName,n.snapshotNode);return i.index_.compare(r,a)}(i,c,d)}),u.forEach(function(c){var d=function(i,s,n){return"value"===s.type||"child_removed"===s.type||(s.prevName=n.getPredecessorChildName(s.childName,s.snapshotNode,i.index_)),s}(i,c,o);a.forEach(function(m){m.respondsTo(c.type)&&s.push(m.createEvent(d,i.query_))})})}function PR(i,s){return{eventCache:i,serverCache:s}}function IM(i,s,n,r){return PR(new hm(s,n,r),i.serverCache)}function jH(i,s,n,r){return PR(i.eventCache,new hm(s,n,r))}function OR(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function e_(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var h2,d8=function(){return h2||(h2=new ov(g)),h2},Jl=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d8();(0,M.Z)(this,i),this.value=s,this.children=n}return(0,D.Z)(i,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(n,r){if(null!=this.value&&r(this.value))return{path:na(),value:this.value};if(ci(n))return null;var a=li(n),o=this.children.get(a);if(null!==o){var u=o.findRootMostMatchingPathAndValue(Oa(n),r);return null!=u?{path:ls(new ca(a),u.path),value:u.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(n){return this.findRootMostMatchingPathAndValue(n,function(){return!0})}},{key:"subtree",value:function(n){if(ci(n))return this;var r=li(n),a=this.children.get(r);return null!==a?a.subtree(Oa(n)):new i(null)}},{key:"set",value:function(n,r){if(ci(n))return new i(r,this.children);var a=li(n),u=(this.children.get(a)||new i(null)).set(Oa(n),r),c=this.children.insert(a,u);return new i(this.value,c)}},{key:"remove",value:function(n){if(ci(n))return this.children.isEmpty()?new i(null):new i(null,this.children);var r=li(n),a=this.children.get(r);if(a){var u,o=a.remove(Oa(n));return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),null===this.value&&u.isEmpty()?new i(null):new i(this.value,u)}return this}},{key:"get",value:function(n){if(ci(n))return this.value;var r=li(n),a=this.children.get(r);return a?a.get(Oa(n)):null}},{key:"setTree",value:function(n,r){if(ci(n))return r;var c,a=li(n),u=(this.children.get(a)||new i(null)).setTree(Oa(n),r);return c=u.isEmpty()?this.children.remove(a):this.children.insert(a,u),new i(this.value,c)}},{key:"fold",value:function(n){return this.fold_(na(),n)}},{key:"fold_",value:function(n,r){var a={};return this.children.inorderTraversal(function(o,u){a[o]=u.fold_(ls(n,o),r)}),r(n,this.value,a)}},{key:"findOnPath",value:function(n,r){return this.findOnPath_(n,na(),r)}},{key:"findOnPath_",value:function(n,r,a){var o=!!this.value&&a(r,this.value);if(o)return o;if(ci(n))return null;var u=li(n),c=this.children.get(u);return c?c.findOnPath_(Oa(n),ls(r,u),a):null}},{key:"foreachOnPath",value:function(n,r){return this.foreachOnPath_(n,na(),r)}},{key:"foreachOnPath_",value:function(n,r,a){if(ci(n))return this;this.value&&a(r,this.value);var o=li(n),u=this.children.get(o);return u?u.foreachOnPath_(Oa(n),ls(r,o),a):new i(null)}},{key:"foreach",value:function(n){this.foreach_(na(),n)}},{key:"foreach_",value:function(n,r){this.children.inorderTraversal(function(a,o){o.foreach_(ls(n,a),r)}),this.value&&r(n,this.value)}},{key:"foreachChild",value:function(n){this.children.inorderTraversal(function(r,a){a.value&&n(r,a.value)})}}],[{key:"fromObject",value:function(n){var r=new i(null);return x(n,function(a,o){r=r.set(new ca(a),o)}),r}}]),i}(),lv=function(){function i(s){(0,M.Z)(this,i),this.writeTree_=s}return(0,D.Z)(i,null,[{key:"empty",value:function(){return new i(new Jl(null))}}]),i}();function DM(i,s,n){if(ci(s))return new lv(new Jl(n));var r=i.writeTree_.findRootMostValueAndPath(s);if(null!=r){var a=r.path,o=r.value,u=Ku(a,s);return o=o.updateChild(u,n),new lv(i.writeTree_.set(a,o))}var c=new Jl(n),d=i.writeTree_.setTree(s,c);return new lv(d)}function d2(i,s,n){var r=i;return x(n,function(a,o){r=DM(r,ls(s,a),o)}),r}function WH(i,s){if(ci(s))return lv.empty();var n=i.writeTree_.setTree(s,new Jl(null));return new lv(n)}function v2(i,s){return null!=t_(i,s)}function t_(i,s){var n=i.writeTree_.findRootMostValueAndPath(s);return null!=n?i.writeTree_.get(n.path).getChild(Ku(n.path,s)):null}function qH(i){var s=[],n=i.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Va,function(r,a){s.push(new Ai(r,a))}):i.writeTree_.children.inorderTraversal(function(r,a){null!=a.value&&s.push(new Ai(r,a.value))}),s}function dm(i,s){if(ci(s))return i;var n=t_(i,s);return new lv(null!=n?new Jl(n):i.writeTree_.subtree(s))}function p2(i){return i.writeTree_.isEmpty()}function Sw(i,s){return YH(na(),i.writeTree_,s)}function YH(i,s,n){if(null!=s.value)return n.updateChild(i,s.value);var r=null;return s.children.inorderTraversal(function(a,o){".priority"===a?((0,Me.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=YH(ls(i,a),o,n)}),!n.getChild(i).isEmpty()&&null!==r&&(n=n.updateChild(ls(i,".priority"),r)),n}function LR(i,s){return JH(s,i)}function m8(i,s){for(var n=0;n<i.allWrites.length;n++){var r=i.allWrites[n];if(r.writeId===s)return r}return null}function g8(i,s){var n=i.allWrites.findIndex(function(m){return m.writeId===s});(0,Me.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=i.allWrites[n];i.allWrites.splice(n,1);for(var a=r.visible,o=!1,u=i.allWrites.length-1;a&&u>=0;){var c=i.allWrites[u];c.visible&&(u>=n&&y8(c,r.path)?a=!1:Hc(r.path,c.path)&&(o=!0)),u--}return!!a&&(o?(function(i){i.visibleWrites=KH(i.allWrites,b8,na()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(r.snap?i.visibleWrites=WH(i.visibleWrites,r.path):x(r.children,function(m){i.visibleWrites=WH(i.visibleWrites,ls(r.path,m))}),!0))}function y8(i,s){if(i.snap)return Hc(i.path,s);for(var n in i.children)if(i.children.hasOwnProperty(n)&&Hc(ls(i.path,n),s))return!0;return!1}function b8(i){return i.visible}function KH(i,s,n){for(var r=lv.empty(),a=0;a<i.length;++a){var o=i[a];if(s(o)){var u=o.path,c=void 0;if(o.snap)Hc(n,u)?r=DM(r,c=Ku(n,u),o.snap):Hc(u,n)&&(c=Ku(u,n),r=DM(r,na(),o.snap.getChild(c)));else{if(!o.children)throw(0,Me.g5)("WriteRecord should have .snap or .children");if(Hc(n,u))r=d2(r,c=Ku(n,u),o.children);else if(Hc(u,n))if(ci(c=Ku(u,n)))r=d2(r,na(),o.children);else{var d=(0,Me.DV)(o.children,li(c));if(d){var m=d.getChild(Oa(c));r=DM(r,na(),m)}}}}}return r}function $H(i,s,n,r,a){if(r||a){var d=dm(i.visibleWrites,s);return!a&&p2(d)?n:a||null!=n||v2(d,na())?Sw(KH(i.allWrites,function(T){return(T.visible||a)&&(!r||!~r.indexOf(T.writeId))&&(Hc(T.path,s)||Hc(s,T.path))},s),n||$r.EMPTY_NODE):null}var o=t_(i.visibleWrites,s);if(null!=o)return o;var u=dm(i.visibleWrites,s);return p2(u)?n:null!=n||v2(u,na())?Sw(u,n||$r.EMPTY_NODE):null}function NR(i,s,n,r){return $H(i.writeTree,i.treePath,s,n,r)}function m2(i,s){return function(i,s,n){var r=$r.EMPTY_NODE,a=t_(i.visibleWrites,s);if(a)return a.isLeafNode()||a.forEachChild(Va,function(c,d){r=r.updateImmediateChild(c,d)}),r;if(n){var o=dm(i.visibleWrites,s);return n.forEachChild(Va,function(c,d){var m=Sw(dm(o,new ca(c)),d);r=r.updateImmediateChild(c,m)}),qH(o).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}return qH(dm(i.visibleWrites,s)).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}(i.writeTree,i.treePath,s)}function XH(i,s,n,r){return function(i,s,n,r,a){(0,Me.hu)(r||a,"Either existingEventSnap or existingServerSnap must exist");var o=ls(s,n);if(v2(i.visibleWrites,o))return null;var u=dm(i.visibleWrites,o);return p2(u)?a.getChild(n):Sw(u,a.getChild(n))}(i.writeTree,i.treePath,s,n,r)}function FR(i,s){return function(i,s){return t_(i.visibleWrites,s)}(i.writeTree,ls(i.treePath,s))}function g2(i,s,n){return function(i,s,n,r){var a=ls(s,n),o=t_(i.visibleWrites,a);return null!=o?o:r.isCompleteForChild(n)?Sw(dm(i.visibleWrites,a),r.getNode().getImmediateChild(n)):null}(i.writeTree,i.treePath,s,n)}function QH(i,s){return JH(ls(i.treePath,s),i.writeTree)}function JH(i,s){return{treePath:i,writeTree:s}}var A8=function(){function i(){(0,M.Z)(this,i),this.changeMap=new Map}return(0,D.Z)(i,[{key:"trackChildChange",value:function(n){var r=n.type,a=n.childName;(0,Me.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,Me.hu)(".priority"!==a,"Only non-priority child changes can be tracked.");var o=this.changeMap.get(a);if(o){var u=o.type;if("child_added"===r&&"child_removed"===u)this.changeMap.set(a,AM(a,n.snapshotNode,o.snapshotNode));else if("child_removed"===r&&"child_added"===u)this.changeMap.delete(a);else if("child_removed"===r&&"child_changed"===u)this.changeMap.set(a,MM(a,o.oldSnap));else if("child_changed"===r&&"child_added"===u)this.changeMap.set(a,Ew(a,n.snapshotNode));else{if("child_changed"!==r||"child_changed"!==u)throw(0,Me.g5)("Illegal combination of changes: "+n+" occurred after "+o);this.changeMap.set(a,AM(a,n.snapshotNode,o.oldSnap))}}else this.changeMap.set(a,n)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),i}(),ez=new(function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"getCompleteChild",value:function(n){return null}},{key:"getChildAfterChild",value:function(n,r,a){return null}}]),i}()),y2=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,M.Z)(this,i),this.writes_=s,this.viewCache_=n,this.optCompleteServerCache_=r}return(0,D.Z)(i,[{key:"getCompleteChild",value:function(n){var r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);var a=null!=this.optCompleteServerCache_?new hm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return g2(this.writes_,n,a)}},{key:"getChildAfterChild",value:function(n,r,a){var o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:e_(this.viewCache_),u=function(i,s,n,r,a,o){return function(i,s,n,r,a,o,u){var c,d=dm(i.visibleWrites,s),m=t_(d,na());if(null!=m)c=m;else{if(null==n)return[];c=Sw(d,n)}if((c=c.withIndex(u)).isEmpty()||c.isLeafNode())return[];for(var _=[],b=u.getCompare(),E=o?c.getReverseIteratorFrom(r,u):c.getIteratorFrom(r,u),T=E.getNext();T&&_.length<a;)0!==b(T,r)&&_.push(T),T=E.getNext();return _}(i.writeTree,i.treePath,s,n,r,a,o)}(this.writes_,o,r,1,a,n);return 0===u.length?null:u[0]}}]),i}();function tz(i,s,n,r,a,o){var c,d,u=s.eventCache;if(null!=FR(r,n))return s;if(ci(n))if((0,Me.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){var m=e_(s),b=m2(r,m instanceof $r?m:$r.EMPTY_NODE);c=i.filter.updateFullNode(s.eventCache.getNode(),b,o)}else{var E=NR(r,e_(s));c=i.filter.updateFullNode(s.eventCache.getNode(),E,o)}else{var T=li(n);if(".priority"===T){(0,Me.hu)(1===fm(n),"Can't have a priority with additional path components");var I=u.getNode(),N=XH(r,n,I,d=s.serverCache.getNode());c=null!=N?i.filter.updatePriority(I,N):u.getNode()}else{var U,W=Oa(n);if(u.isCompleteForChild(T)){d=s.serverCache.getNode();var H=XH(r,n,u.getNode(),d);U=null!=H?u.getNode().getImmediateChild(T).updateChild(W,H):u.getNode().getImmediateChild(T)}else U=g2(r,T,s.serverCache);c=null!=U?i.filter.updateChild(u.getNode(),T,U,W,a,o):u.getNode()}}return IM(s,c,u.isFullyInitialized()||ci(n),i.filter.filtersNodes())}function ZR(i,s,n,r,a,o,u,c){var m,d=s.serverCache,_=u?i.filter:i.filter.getIndexedFilter();if(ci(n))m=_.updateFullNode(d.getNode(),r,null);else if(_.filtersNodes()&&!d.isFiltered()){var b=d.getNode().updateChild(n,r);m=_.updateFullNode(d.getNode(),b,null)}else{var E=li(n);if(!d.isCompleteForPath(n)&&fm(n)>1)return s;var T=Oa(n),N=d.getNode().getImmediateChild(E).updateChild(T,r);m=".priority"===E?_.updatePriority(d.getNode(),N):_.updateChild(d.getNode(),E,N,T,ez,null)}var W=jH(s,m,d.isFullyInitialized()||ci(n),_.filtersNodes());return tz(i,W,n,a,new y2(a,W,o),c)}function _2(i,s,n,r,a,o,u){var d,m,c=s.eventCache,_=new y2(a,s,o);if(ci(n))m=i.filter.updateFullNode(s.eventCache.getNode(),r,u),d=IM(s,m,!0,i.filter.filtersNodes());else{var b=li(n);if(".priority"===b)m=i.filter.updatePriority(s.eventCache.getNode(),r),d=IM(s,m,c.isFullyInitialized(),c.isFiltered());else{var I,E=Oa(n),T=c.getNode().getImmediateChild(b);if(ci(E))I=r;else{var N=_.getCompleteChild(b);I=null!=N?".priority"===YZ(E)&&N.getChild(CH(E)).isEmpty()?N:N.updateChild(E,r):$r.EMPTY_NODE}d=T.equals(I)?s:IM(s,i.filter.updateChild(c.getNode(),b,I,E,_,u),c.isFullyInitialized(),i.filter.filtersNodes())}}return d}function nz(i,s){return i.eventCache.isCompleteForChild(s)}function rz(i,s,n){return n.foreach(function(r,a){s=s.updateChild(r,a)}),s}function b2(i,s,n,r,a,o,u,c){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;var m,d=s;m=ci(n)?r:new Jl(null).setTree(n,r);var _=s.serverCache.getNode();return m.children.inorderTraversal(function(b,E){if(_.hasChild(b)){var I=rz(0,s.serverCache.getNode().getImmediateChild(b),E);d=ZR(i,d,new ca(b),I,a,o,u,c)}}),m.children.inorderTraversal(function(b,E){var T=!s.serverCache.isCompleteForChild(b)&&void 0===E.value;if(!_.hasChild(b)&&!T){var N=rz(0,s.serverCache.getNode().getImmediateChild(b),E);d=ZR(i,d,new ca(b),N,a,o,u,c)}}),d}var Z8=function(){function i(s,n){(0,M.Z)(this,i),this.query_=s,this.eventRegistrations_=[];var r=this.query_._queryParams,a=new n2(r.getIndex()),o=function(i){return i.loadsAllData()?new n2(i.getIndex()):i.hasLimit()?new Kq(i):new BH(i)}(r);this.processor_=function(i){return{filter:i}}(o);var u=n.serverCache,c=n.eventCache,d=a.updateFullNode($r.EMPTY_NODE,u.getNode(),null),m=o.updateFullNode($r.EMPTY_NODE,c.getNode(),null),_=new hm(d,u.isFullyInitialized(),a.filtersNodes()),b=new hm(m,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=PR(b,_),this.eventGenerator_=new l8(this.query_)}return(0,D.Z)(i,[{key:"query",get:function(){return this.query_}}]),i}();function V8(i,s){var n=e_(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!ci(s)&&!n.getImmediateChild(li(s)).isEmpty())?n.getChild(s):null}function iz(i){return 0===i.eventRegistrations_.length}function az(i,s,n){var r=[];if(n){(0,Me.hu)(null==s,"A cancel should cancel all event registrations.");var a=i.query._path;i.eventRegistrations_.forEach(function(d){var m=d.createCancelEvent(n,a);m&&r.push(m)})}if(s){for(var o=[],u=0;u<i.eventRegistrations_.length;++u){var c=i.eventRegistrations_[u];if(c.matches(s)){if(s.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(u+1));break}}else o.push(c)}i.eventRegistrations_=o}else i.eventRegistrations_=[];return r}function sz(i,s,n,r){s.type===uv.MERGE&&null!==s.source.queryId&&((0,Me.hu)(e_(i.viewCache_),"We should always have a full cache before handling merges"),(0,Me.hu)(OR(i.viewCache_),"Missing event cache, even though we have a server cache"));var a=i.viewCache_,o=function(i,s,n,r,a){var u,c,o=new A8;if(n.type===uv.OVERWRITE){var d=n;d.source.fromUser?u=_2(i,s,d.path,d.snap,r,a,o):((0,Me.hu)(d.source.fromServer,"Unknown source."),c=d.source.tagged||s.serverCache.isFiltered()&&!ci(d.path),u=ZR(i,s,d.path,d.snap,r,a,c,o))}else if(n.type===uv.MERGE){var m=n;m.source.fromUser?u=function(i,s,n,r,a,o,u){var c=s;return r.foreach(function(d,m){var _=ls(n,d);nz(s,li(_))&&(c=_2(i,c,_,m,a,o,u))}),r.foreach(function(d,m){var _=ls(n,d);nz(s,li(_))||(c=_2(i,c,_,m,a,o,u))}),c}(i,s,m.path,m.children,r,a,o):((0,Me.hu)(m.source.fromServer,"Unknown source."),c=m.source.tagged||s.serverCache.isFiltered(),u=b2(i,s,m.path,m.children,r,a,c,o))}else if(n.type===uv.ACK_USER_WRITE){var _=n;u=_.revert?function(i,s,n,r,a,o){var u;if(null!=FR(r,n))return s;var m,c=new y2(r,s,a),d=s.eventCache.getNode();if(ci(n)||".priority"===li(n)){var _;if(s.serverCache.isFullyInitialized())_=NR(r,e_(s));else{var b=s.serverCache.getNode();(0,Me.hu)(b instanceof $r,"serverChildren would be complete if leaf node"),_=m2(r,b)}m=i.filter.updateFullNode(d,_=_,o)}else{var E=li(n),T=g2(r,E,s.serverCache);null==T&&s.serverCache.isCompleteForChild(E)&&(T=d.getImmediateChild(E)),(m=null!=T?i.filter.updateChild(d,E,T,Oa(n),c,o):s.eventCache.getNode().hasChild(E)?i.filter.updateChild(d,E,$r.EMPTY_NODE,Oa(n),c,o):d).isEmpty()&&s.serverCache.isFullyInitialized()&&(u=NR(r,e_(s))).isLeafNode()&&(m=i.filter.updateFullNode(m,u,o))}return u=s.serverCache.isFullyInitialized()||null!=FR(r,na()),IM(s,m,u,i.filter.filtersNodes())}(i,s,_.path,r,a,o):function(i,s,n,r,a,o,u){if(null!=FR(a,n))return s;var c=s.serverCache.isFiltered(),d=s.serverCache;if(null!=r.value){if(ci(n)&&d.isFullyInitialized()||d.isCompleteForPath(n))return ZR(i,s,n,d.getNode().getChild(n),a,o,c,u);if(ci(n)){var m=new Jl(null);return d.getNode().forEachChild(td,function(b,E){m=m.set(new ca(b),E)}),b2(i,s,n,m,a,o,c,u)}return s}var _=new Jl(null);return r.foreach(function(b,E){var T=ls(n,b);d.isCompleteForPath(T)&&(_=_.set(b,d.getNode().getChild(T)))}),b2(i,s,n,_,a,o,c,u)}(i,s,_.path,_.affectedTree,r,a,o)}else{if(n.type!==uv.LISTEN_COMPLETE)throw(0,Me.g5)("Unknown operation type: "+n.type);u=function(i,s,n,r,a){var o=s.serverCache;return tz(i,jH(s,o.getNode(),o.isFullyInitialized()||ci(n),o.isFiltered()),n,r,ez,a)}(i,s,n.path,r,o)}var b=o.getChanges();return function(i,s,n){var r=s.eventCache;if(r.isFullyInitialized()){var a=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=OR(i);(n.length>0||!i.eventCache.isFullyInitialized()||a&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ZH(OR(s)))}}(s,u,b),{viewCache:u,changes:b}}(i.processor_,a,s,n,r);return function(i,s){(0,Me.hu)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,Me.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,o.viewCache),(0,Me.hu)(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=o.viewCache,oz(i,o.changes,o.viewCache.eventCache.getNode(),null)}function oz(i,s,n,r){return function(i,s,n,r){var a=[],o=[];return s.forEach(function(u){"child_changed"===u.type&&i.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function(i,s){return{type:"child_moved",snapshotNode:s,childName:i}}(u.childName,u.snapshotNode))}),xM(i,a,"child_removed",s,r,n),xM(i,a,"child_added",s,r,n),xM(i,a,"child_moved",o,r,n),xM(i,a,"child_changed",s,r,n),xM(i,a,"value",s,r,n),a}(i.eventGenerator_,s,n,r?[r]:i.eventRegistrations_)}var BR,VR,uz=function i(){(0,M.Z)(this,i),this.views=new Map};function w2(i,s,n,r){var a=s.source.queryId;if(null!==a){var o=i.views.get(a);return(0,Me.hu)(null!=o,"SyncTree gave us an op for an invalid query."),sz(o,s,n,r)}var d,u=[],c=(0,Re.Z)(i.views.values());try{for(c.s();!(d=c.n()).done;)u=u.concat(sz(d.value,s,n,r))}catch(_){c.e(_)}finally{c.f()}return u}function lz(i,s,n,r,a){var u=i.views.get(s._queryIdentifier);if(!u){var c=NR(n,a?r:null),d=!1;c?d=!0:r instanceof $r?(c=m2(n,r),d=!1):(c=$r.EMPTY_NODE,d=!1);var m=PR(new hm(c,d,!1),new hm(r,a,!1));return new Z8(s,m)}return u}function cz(i){var r,s=[],n=(0,Re.Z)(i.views.values());try{for(n.s();!(r=n.n()).done;){var a=r.value;a.query._queryParams.loadsAllData()||s.push(a)}}catch(o){n.e(o)}finally{n.f()}return s}function vm(i,s){var a,n=null,r=(0,Re.Z)(i.views.values());try{for(r.s();!(a=r.n()).done;)n=n||V8(a.value,s)}catch(u){r.e(u)}finally{r.f()}return n}function fz(i,s){return s._queryParams.loadsAllData()?UR(i):i.views.get(s._queryIdentifier)}function hz(i,s){return null!=fz(i,s)}function pm(i){return null!=UR(i)}function UR(i){var n,s=(0,Re.Z)(i.views.values());try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r.query._queryParams.loadsAllData())return r}}catch(a){s.e(a)}finally{s.f()}return null}var X8=1,dz=function i(s){(0,M.Z)(this,i),this.listenProvider_=s,this.syncPointTree_=new Jl(null),this.pendingWriteTree_={visibleWrites:lv.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function k2(i,s,n,r,a){return function(i,s,n,r,a){(0,Me.hu)(r>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),i.allWrites.push({path:s,snap:n,writeId:r,visible:a}),a&&(i.visibleWrites=DM(i.visibleWrites,s,n)),i.lastWriteId=r}(i.pendingWriteTree_,s,n,r,a),a?Tw(i,new RR({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,n)):[]}function mm(i,s){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m8(i.pendingWriteTree_,s),a=g8(i.pendingWriteTree_,s);if(a){var o=new Jl(null);return null!=r.snap?o=o.set(na(),!0):x(r.children,function(u){o=o.set(new ca(u),!0)}),Tw(i,new u8(r.path,o,n))}return[]}function RM(i,s,n){return Tw(i,new RR({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,n))}function E2(i,s,n,r){var a=s._path,o=i.syncPointTree_.get(a),u=[];if(o&&("default"===s._queryIdentifier||hz(o,s))){var c=function(i,s,n,r){var a=s._queryIdentifier,o=[],u=[],c=pm(i);if("default"===a){var m,d=(0,Re.Z)(i.views.entries());try{for(d.s();!(m=d.n()).done;){var _=(0,ke.Z)(m.value,2),b=_[0],E=_[1];u=u.concat(az(E,n,r)),iz(E)&&(i.views.delete(b),E.query._queryParams.loadsAllData()||o.push(E.query))}}catch(I){d.e(I)}finally{d.f()}}else{var T=i.views.get(a);T&&(u=u.concat(az(T,n,r)),iz(T)&&(i.views.delete(a),T.query._queryParams.loadsAllData()||o.push(T.query)))}return c&&!pm(i)&&o.push(new((0,Me.hu)(BR,"Reference.ts has not been loaded"),BR)(s._repo,s._path)),{removed:o,events:u}}(o,s,n,r);(function(i){return 0===i.views.size})(o)&&(i.syncPointTree_=i.syncPointTree_.remove(a));var d=c.removed;u=c.events;var m=-1!==d.findIndex(function(H){return H._queryParams.loadsAllData()}),_=i.syncPointTree_.findOnPath(a,function(H,te){return pm(te)});if(m&&!_){var b=i.syncPointTree_.subtree(a);if(!b.isEmpty())for(var E=function(i){return i.fold(function(s,n,r){if(n&&pm(n))return[UR(n)];var o=[];return n&&(o=cz(n)),x(r,function(u,c){o=o.concat(c)}),o})}(b),T=0;T<E.length;++T){var I=E[T],N=I.query,W=gz(i,I);i.listenProvider_.startListening(PM(N),zR(i,N),W.hashFn,W.onComplete)}}!_&&d.length>0&&!r&&(m?i.listenProvider_.stopListening(PM(s),null):d.forEach(function(H){var te=i.queryToTagMap.get(GR(H));i.listenProvider_.stopListening(PM(H),te)})),function(i,s){for(var n=0;n<s.length;++n){var r=s[n];if(!r._queryParams.loadsAllData()){var a=GR(r),o=i.queryToTagMap.get(a);i.queryToTagMap.delete(a),i.tagToQueryMap.delete(o)}}}(i,d)}return u}function vz(i,s,n){var r=s._path,a=null,o=!1;i.syncPointTree_.foreachOnPath(r,function(N,W){var U=Ku(N,r);a=a||vm(W,U),o=o||pm(W)});var c,u=i.syncPointTree_.get(r);u?(o=o||pm(u),a=a||vm(u,na())):(u=new uz,i.syncPointTree_=i.syncPointTree_.set(r,u)),null!=a?c=!0:(c=!1,a=$r.EMPTY_NODE,i.syncPointTree_.subtree(r).foreachChild(function(N,W){var U=vm(W,na());U&&(a=a.updateImmediateChild(N,U))}));var m=hz(u,s);if(!m&&!s._queryParams.loadsAllData()){var _=GR(s);(0,Me.hu)(!i.queryToTagMap.has(_),"View does not exist, but we have a tag");var b=X8++;i.queryToTagMap.set(_,b),i.tagToQueryMap.set(b,_)}var T=function(i,s,n,r,a,o){var u=lz(i,s,r,a,o);return i.views.has(s._queryIdentifier)||i.views.set(s._queryIdentifier,u),function(i,s){i.eventRegistrations_.push(s)}(u,n),function(i,s){var n=i.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Va,function(o,u){r.push(Ew(o,u))}),n.isFullyInitialized()&&r.push(ZH(n.getNode())),oz(i,r,n.getNode(),s)}(u,n)}(u,s,n,LR(i.pendingWriteTree_,r),a,c);if(!m&&!o){var I=fz(u,s);T=T.concat(function(i,s,n){var r=s._path,a=zR(i,s),o=gz(i,n),u=i.listenProvider_.startListening(PM(s),a,o.hashFn,o.onComplete),c=i.syncPointTree_.subtree(r);if(a)(0,Me.hu)(!pm(c.value),"If we're adding a query, it shouldn't be shadowed");else for(var d=c.fold(function(b,E,T){if(!ci(b)&&E&&pm(E))return[UR(E).query];var I=[];return E&&(I=I.concat(cz(E).map(function(N){return N.query}))),x(T,function(N,W){I=I.concat(W)}),I}),m=0;m<d.length;++m){var _=d[m];i.listenProvider_.stopListening(PM(_),zR(i,_))}return u}(i,s,I))}return T}function HR(i,s,n){var a=i.pendingWriteTree_,o=i.syncPointTree_.findOnPath(s,function(u,c){var m=vm(c,Ku(u,s));if(m)return m});return $H(a,s,o,n,!0)}function Tw(i,s){return pz(s,i.syncPointTree_,null,LR(i.pendingWriteTree_,na()))}function pz(i,s,n,r){if(ci(i.path))return mz(i,s,n,r);var a=s.get(na());null==n&&null!=a&&(n=vm(a,na()));var o=[],u=li(i.path),c=i.operationForChild(u),d=s.children.get(u);if(d&&c){var m=n?n.getImmediateChild(u):null,_=QH(r,u);o=o.concat(pz(c,d,m,_))}return a&&(o=o.concat(w2(a,i,r,n))),o}function mz(i,s,n,r){var a=s.get(na());null==n&&null!=a&&(n=vm(a,na()));var o=[];return s.children.inorderTraversal(function(u,c){var d=n?n.getImmediateChild(u):null,m=QH(r,u),_=i.operationForChild(u);_&&(o=o.concat(mz(_,c,d,m)))}),a&&(o=o.concat(w2(a,i,r,n))),o}function gz(i,s){var n=s.query,r=zR(i,n);return{hashFn:function(){return(function(i){return i.viewCache_.serverCache.getNode()}(s)||$r.EMPTY_NODE).hash()},onComplete:function(o){if("ok"===o)return r?function(i,s,n){var r=C2(i,n);if(r){var a=S2(r),o=a.path,u=a.queryId,c=Ku(o,s);return T2(i,o,new GH(c2(u),c))}return[]}(i,n._path,r):function(i,s){return Tw(i,new GH({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(i,n._path);var u=function(i,s){var n="Unknown Error";"too_big"===i?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?n="Client doesn't have permission to access the desired data.":"unavailable"===i&&(n="The service is unavailable");var r=new Error(i+" at "+s._path.toString()+": "+n);return r.code=i.toUpperCase(),r}(o,n);return E2(i,n,null,u)}}}function zR(i,s){var n=GR(s);return i.queryToTagMap.get(n)}function GR(i){return i._path.toString()+"$"+i._queryIdentifier}function C2(i,s){return i.tagToQueryMap.get(s)}function S2(i){var s=i.indexOf("$");return(0,Me.hu)(-1!==s&&s<i.length-1,"Bad queryKey."),{queryId:i.substr(s+1),path:new ca(i.substr(0,s))}}function T2(i,s,n){var r=i.syncPointTree_.get(s);return(0,Me.hu)(r,"Missing sync point for query tag that we're tracking"),w2(r,n,LR(i.pendingWriteTree_,s),null)}function PM(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new((0,Me.hu)(VR,"Reference.ts has not been loaded"),VR)(i._repo,i._path):i}var lY=function(){function i(s){(0,M.Z)(this,i),this.node_=s}return(0,D.Z)(i,[{key:"getImmediateChild",value:function(n){return new i(this.node_.getImmediateChild(n))}},{key:"node",value:function(){return this.node_}}]),i}(),cY=function(){function i(s,n){(0,M.Z)(this,i),this.syncTree_=s,this.path_=n}return(0,D.Z)(i,[{key:"getImmediateChild",value:function(n){var r=ls(this.path_,n);return new i(this.syncTree_,r)}},{key:"node",value:function(){return HR(this.syncTree_,this.path_)}}]),i}(),yz=function(s,n,r){return s&&"object"==typeof s?((0,Me.hu)(".sv"in s,"Unexpected leaf node or priority contents"),"string"==typeof s[".sv"]?hY(s[".sv"],n,r):"object"==typeof s[".sv"]?dY(s[".sv"],n):void(0,Me.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2))):s},hY=function(s,n,r){switch(s){case"timestamp":return r.timestamp;default:(0,Me.hu)(!1,"Unexpected server value: "+s)}},dY=function(s,n,r){s.hasOwnProperty("increment")||(0,Me.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2));var a=s.increment;"number"!=typeof a&&(0,Me.hu)(!1,"Unexpected increment value: "+a);var o=n.node();if((0,Me.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return a;var c=o.getValue();return"number"!=typeof c?a:c+a},_z=function(s,n,r,a){return A2(n,new cY(r,s),a)},M2=function(s,n,r){return A2(s,new lY(n),r)};function A2(i,s,n){var o,r=i.getPriority().val(),a=yz(r,s.getImmediateChild(".priority"),n);if(i.isLeafNode()){var u=i,c=yz(u.getValue(),s,n);return c!==u.getValue()||a!==u.getPriority().val()?new bw(c,ws(a)):i}var d=i;return o=d,a!==d.getPriority().val()&&(o=o.updatePriority(new bw(a))),d.forEachChild(Va,function(m,_){var b=A2(_,s.getImmediateChild(m),n);b!==_&&(o=o.updateImmediateChild(m,b))}),o}var x2=function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};(0,M.Z)(this,i),this.name=s,this.parent=n,this.node=r};function jR(i,s){for(var n=s instanceof ca?s:new ca(s),r=i,a=li(n);null!==a;){var o=(0,Me.DV)(r.node.children,a)||{children:{},childCount:0};r=new x2(a,r,o),a=li(n=Oa(n))}return r}function n_(i){return i.node.value}function I2(i,s){i.node.value=s,D2(i)}function bz(i){return i.node.childCount>0}function WR(i,s){x(i.node.children,function(n,r){s(new x2(n,i,r))})}function wz(i,s,n,r){n&&!r&&s(i),WR(i,function(a){wz(a,s,!0,r)}),n&&r&&s(i)}function OM(i){return new ca(null===i.parent?i.name:OM(i.parent)+"/"+i.name)}function D2(i){null!==i.parent&&function(i,s,n){var r=function(i){return void 0===n_(i)&&!bz(i)}(n),a=(0,Me.r3)(i.node.children,s);r&&a?(delete i.node.children[s],i.node.childCount--,D2(i)):!r&&!a&&(i.node.children[s]=n.node,i.node.childCount++,D2(i))}(i.parent,i.name,i)}var gY=/[\[\].#$\/\u0000-\u001F\u007F]/,yY=/[\[\].#$\u0000-\u001F\u007F]/,R2=10485760,qR=function(s){return"string"==typeof s&&0!==s.length&&!gY.test(s)},kz=function(s){return"string"==typeof s&&0!==s.length&&!yY.test(s)},LM=function(s){return null===s||"string"==typeof s||"number"==typeof s&&!yM(s)||s&&"object"==typeof s&&(0,Me.r3)(s,".sv")},nd=function(s,n,r,a){a&&void 0===n||YR((0,Me.gK)(s,"value"),n,r)},YR=function i(s,n,r){var a=r instanceof ca?new Mq(r,s):r;if(void 0===n)throw new Error(s+"contains undefined "+Qy(a));if("function"==typeof n)throw new Error(s+"contains a function "+Qy(a)+" with contents = "+n.toString());if(yM(n))throw new Error(s+"contains "+n.toString()+" "+Qy(a));if("string"==typeof n&&n.length>R2/3&&(0,Me.ug)(n)>R2)throw new Error(s+"contains a string greater than "+R2+" utf8 bytes "+Qy(a)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,u=!1;if(x(n,function(c,d){if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!qR(c)))throw new Error(s+" contains an invalid key ("+c+") "+Qy(a)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(i,s){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(s),i.byteLength_+=(0,Me.ug)(s),SH(i)})(a,c),i(s,d,a),function(i){var s=i.parts_.pop();i.byteLength_-=(0,Me.ug)(s),i.parts_.length>0&&(i.byteLength_-=1)}(a)}),o&&u)throw new Error(s+' contains ".value" child '+Qy(a)+" in addition to actual children.")}},Ez=function(s,n,r,a){if(!a||void 0!==n){var o=(0,Me.gK)(s,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var u=[];x(n,function(c,d){var m=new ca(c);if(YR(o,d,ls(r,m)),".priority"===YZ(m)&&!LM(d))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(m)}),function(s,n){var r,a;for(r=0;r<n.length;r++)for(var o=EM(a=n[r]),u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!qR(o[u]))throw new Error(s+"contains an invalid key ("+o[u]+") in path "+a.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.sort(Tq);var c=null;for(r=0;r<n.length;r++){if(a=n[r],null!==c&&Hc(c,a))throw new Error(s+"contains a path "+c.toString()+" that is ancestor of another path "+a.toString());c=a}}(o,u)}},P2=function(s,n,r){if(!r||void 0!==n){if(yM(n))throw new Error((0,Me.gK)(s,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!LM(n))throw new Error((0,Me.gK)(s,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},NM=function(s,n,r,a){if(!(a&&void 0===r||qR(r)))throw new Error((0,Me.gK)(s,n)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},FM=function(s,n,r,a){if(!(a&&void 0===r||kz(r)))throw new Error((0,Me.gK)(s,n)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},zc=function(s,n){if(".info"===li(n))throw new Error(s+" failed = Can't modify data under /.info/")},Cz=function(s,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!qR(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),kz(s)}(r))throw new Error((0,Me.gK)(s,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},kY=function i(){(0,M.Z)(this,i),this.eventLists_=[],this.recursionDepth_=0};function KR(i,s){for(var n=null,r=0;r<s.length;r++){var a=s[r],o=a.getPath();null!==n&&!KZ(o,n.path)&&(i.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(a)}n&&i.eventLists_.push(n)}function O2(i,s,n){KR(i,n),Sz(i,function(r){return KZ(r,s)})}function Gc(i,s,n){KR(i,n),Sz(i,function(r){return Hc(r,s)||Hc(s,r)})}function Sz(i,s){i.recursionDepth_++;for(var n=!0,r=0;r<i.eventLists_.length;r++){var a=i.eventLists_[r];a&&(s(a.path)?(EY(i.eventLists_[r]),i.eventLists_[r]=null):n=!1)}n&&(i.eventLists_=[]),i.recursionDepth_--}function EY(i){for(var s=0;s<i.events.length;s++){var n=i.events[s];if(null!==n){i.events[s]=null;var r=n.getEventRunner();lm&&To("event: "+n.toString()),Et(r)}}}var Tz="repo_interrupt",SY=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.repoInfo_=s,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new kY,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=DR(),this.transactionQueueTree_=new x2,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return(0,D.Z)(i,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),i}();function Mz(i){var n=i.infoData_.getNode(new ca(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function ZM(i){return(s=(s={timestamp:Mz(i)})||{}).timestamp=s.timestamp||(new Date).getTime(),s;var s}function Az(i,s,n,r,a){i.dataUpdateCount++;var o=new ca(s);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(s,n):n;var u=[];if(a)if(r){var c=(0,Me.UI)(n,function(E){return ws(E)});u=function(i,s,n,r){var a=C2(i,r);if(a){var o=S2(a),u=o.path,c=o.queryId,d=Ku(u,s),m=Jl.fromObject(n);return T2(i,u,new f2(c2(c),d,m))}return[]}(i.serverSyncTree_,o,c,a)}else{var d=ws(n);u=function(i,s,n,r){var a=C2(i,r);if(null!=a){var o=S2(a),u=o.path,c=o.queryId,d=Ku(u,s);return T2(i,u,new RR(c2(c),d,n))}return[]}(i.serverSyncTree_,o,d,a)}else if(r){var m=(0,Me.UI)(n,function(E){return ws(E)});u=function(i,s,n){var r=Jl.fromObject(n);return Tw(i,new f2({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,r))}(i.serverSyncTree_,o,m)}else{var _=ws(n);u=RM(i.serverSyncTree_,o,_)}var b=o;u.length>0&&(b=Aw(i,o)),Gc(i.eventQueue_,b,u)}function xz(i,s){L2(i,"connected",s),!1===s&&function(i){Mw(i,"onDisconnectEvents");var s=ZM(i),n=DR();o2(i.onDisconnect_,na(),function(a,o){var u=_z(a,o,i.serverSyncTree_,s);Cw(n,a,u)});var r=[];o2(n,na(),function(a,o){r=r.concat(RM(i.serverSyncTree_,a,o));var u=B2(i,a);Aw(i,u)}),i.onDisconnect_=DR(),Gc(i.eventQueue_,na(),r)}(i)}function L2(i,s,n){var r=new ca("/.info/"+s),a=ws(n);i.infoData_.updateSnapshot(r,a);var o=RM(i.infoSyncTree_,r,a);Gc(i.eventQueue_,r,o)}function $R(i){return i.nextWriteId_++}function N2(i,s,n,r,a){Mw(i,"set",{path:s.toString(),value:n,priority:r});var o=ZM(i),u=ws(n,r),c=HR(i.serverSyncTree_,s),d=M2(u,c,o),m=$R(i),_=k2(i.serverSyncTree_,s,d,m,!0);KR(i.eventQueue_,_),i.server_.put(s.toString(),u.val(!0),function(E,T){var I="ok"===E;I||Su("set at "+s+" failed: "+E);var N=mm(i.serverSyncTree_,m,!I);Gc(i.eventQueue_,s,N),gm(0,a,E,T)});var b=B2(i,s);Aw(i,b),Gc(i.eventQueue_,b,[])}function DY(i,s,n){i.server_.onDisconnectCancel(s.toString(),function(r,a){"ok"===r&&s2(i.onDisconnect_,s),gm(0,n,r,a)})}function Iz(i,s,n,r){var a=ws(n);i.server_.onDisconnectPut(s.toString(),a.val(!0),function(o,u){"ok"===o&&Cw(i.onDisconnect_,s,a),gm(0,r,o,u)})}function F2(i,s,n){var r;r=".info"===li(s._path)?E2(i.infoSyncTree_,s,n):E2(i.serverSyncTree_,s,n),O2(i.eventQueue_,s._path,r)}function Dz(i){i.persistentConnection_&&i.persistentConnection_.interrupt(Tz)}function Mw(i){var s="";i.persistentConnection_&&(s=i.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];To.apply(void 0,[s].concat(r))}function gm(i,s,n,r){s&&Et(function(){if("ok"===n)s(null);else{var a=(n||"error").toUpperCase(),o=a;r&&(o+=": "+r);var u=new Error(o);u.code=a,s(u)}})}function Z2(i,s,n){return HR(i.serverSyncTree_,s,n)||$r.EMPTY_NODE}function XR(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.transactionQueueTree_;if(s||QR(i,s),n_(s)){var n=Pz(i,s);(0,Me.hu)(n.length>0,"Sending zero length transaction queue");var r=n.every(function(a){return 0===a.status});r&&FY(i,OM(s),n)}else bz(s)&&WR(s,function(a){XR(i,a)})}function FY(i,s,n){for(var r=n.map(function(E){return E.currentWriteId}),a=Z2(i,s,r),o=a,u=a.hash(),c=0;c<n.length;c++){var d=n[c];(0,Me.hu)(0===d.status,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;var m=Ku(s,d.path);o=o.updateChild(m,d.currentOutputSnapshotRaw)}var _=o.val(!0),b=s;i.server_.put(b.toString(),_,function(E){Mw(i,"transaction put response",{path:b.toString(),status:E});var T=[];if("ok"===E){for(var I=[],N=function(le){n[le].status=2,T=T.concat(mm(i.serverSyncTree_,n[le].currentWriteId)),n[le].onComplete&&I.push(function(){return n[le].onComplete(null,!0,n[le].currentOutputSnapshotResolved)}),n[le].unwatcher()},W=0;W<n.length;W++)N(W);QR(i,jR(i.transactionQueueTree_,s)),XR(i,i.transactionQueueTree_),Gc(i.eventQueue_,s,T);for(var U=0;U<I.length;U++)Et(I[U])}else{if("datastale"===E)for(var H=0;H<n.length;H++)n[H].status=3===n[H].status?4:0;else{Su("transaction at "+b.toString()+" failed: "+E);for(var te=0;te<n.length;te++)n[te].status=4,n[te].abortReason=E}Aw(i,s)}},u)}function Aw(i,s){var n=Rz(i,s),r=OM(n);return function(i,s,n){if(0!==s.length){for(var r=[],a=[],u=s.filter(function(_){return 0===_.status}).map(function(_){return _.currentWriteId}),c=function(b){var E=s[b],T=Ku(n,E.path),I=!1,N=void 0;if((0,Me.hu)(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===E.status)I=!0,N=E.abortReason,a=a.concat(mm(i.serverSyncTree_,E.currentWriteId,!0));else if(0===E.status)if(E.retryCount>=25)I=!0,N="maxretry",a=a.concat(mm(i.serverSyncTree_,E.currentWriteId,!0));else{var W=Z2(i,E.path,u);E.currentInputSnapshot=W;var U=s[b].update(W.val());if(void 0!==U){YR("transaction failed: Data returned ",U,E.path);var H=ws(U);"object"==typeof U&&null!=U&&(0,Me.r3)(U,".priority")||(H=H.updatePriority(W.getPriority()));var ue=E.currentWriteId,le=ZM(i),he=M2(H,W,le);E.currentOutputSnapshotRaw=H,E.currentOutputSnapshotResolved=he,E.currentWriteId=$R(i),u.splice(u.indexOf(ue),1),a=(a=a.concat(k2(i.serverSyncTree_,E.path,he,E.currentWriteId,E.applyLocally))).concat(mm(i.serverSyncTree_,ue,!0))}else I=!0,N="nodata",a=a.concat(mm(i.serverSyncTree_,E.currentWriteId,!0))}Gc(i.eventQueue_,n,a),a=[],I&&(s[b].status=2,setTimeout(s[b].unwatcher,Math.floor(0)),s[b].onComplete&&r.push("nodata"===N?function(){return s[b].onComplete(null,!1,s[b].currentInputSnapshot)}:function(){return s[b].onComplete(new Error(N),!1,null)}))},d=0;d<s.length;d++)c(d);QR(i,i.transactionQueueTree_);for(var m=0;m<r.length;m++)Et(r[m]);XR(i,i.transactionQueueTree_)}}(i,Pz(i,n),r),r}function Rz(i,s){var n,r=i.transactionQueueTree_;for(n=li(s);null!==n&&void 0===n_(r);)r=jR(r,n),n=li(s=Oa(s));return r}function Pz(i,s){var n=[];return Oz(i,s,n),n.sort(function(r,a){return r.order-a.order}),n}function Oz(i,s,n){var r=n_(s);if(r)for(var a=0;a<r.length;a++)n.push(r[a]);WR(s,function(o){Oz(i,o,n)})}function QR(i,s){var n=n_(s);if(n){for(var r=0,a=0;a<n.length;a++)2!==n[a].status&&(n[r]=n[a],r++);n.length=r,I2(s,n.length>0?n:void 0)}WR(s,function(o){QR(i,o)})}function B2(i,s){var n=OM(Rz(i,s)),r=jR(i.transactionQueueTree_,s);return function(i,s,n){for(var r=i.parent;null!==r;){if(s(r))return!0;r=r.parent}}(r,function(a){U2(i,a)}),U2(i,r),wz(r,function(a){U2(i,a)}),n}function U2(i,s){var n=n_(s);if(n){for(var r=[],a=[],o=-1,u=0;u<n.length;u++)3===n[u].status||(1===n[u].status?((0,Me.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,n[u].status=3,n[u].abortReason="set"):((0,Me.hu)(0===n[u].status,"Unexpected transaction status in abort"),n[u].unwatcher(),a=a.concat(mm(i.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&r.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?I2(s,void 0):n.length=o+1,Gc(i.eventQueue_,OM(s),a);for(var c=0;c<r.length;c++)Et(r[c])}}var V2=function(s,n){var r=VY(s),a=r.namespace;return"firebase.com"===r.domain&&Vc(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||"undefined"===a)&&"localhost"!==r.domain&&Vc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Su("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new cm(r.host,r.secure,a,n,"ws"===r.scheme||"wss"===r.scheme,"",a!==r.subdomain),path:new ca(r.pathString)}},VY=function(s){var n="",r="",a="",o="",u="",c=!0,d="https",m=443;if("string"==typeof s){var _=s.indexOf("//");_>=0&&(d=s.substring(0,_-1),s=s.substring(_+2));var b=s.indexOf("/");-1===b&&(b=s.length);var E=s.indexOf("?");-1===E&&(E=s.length),n=s.substring(0,Math.min(b,E)),b<E&&(o=function(i){for(var s="",n=i.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var a=n[r];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(o){}s+="/"+a}return s}(s.substring(b,E)));var T=function(i){var s={};"?"===i.charAt(0)&&(i=i.substring(1));var r,n=(0,Re.Z)(i.split("&"));try{for(n.s();!(r=n.n()).done;){var a=r.value;if(0!==a.length){var o=a.split("=");2===o.length?s[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Su("Invalid query segment '".concat(a,"' in query '").concat(i,"'"))}}}catch(u){n.e(u)}finally{n.f()}return s}(s.substring(Math.min(s.length,E)));(_=n.indexOf(":"))>=0?(c="https"===d||"wss"===d,m=parseInt(n.substring(_+1),10)):_=n.length;var I=n.slice(0,_);if("localhost"===I.toLowerCase())r="localhost";else if(I.split(".").length<=2)r=I;else{var N=n.indexOf(".");a=n.substring(0,N).toLowerCase(),r=n.substring(N+1),u=a}"ns"in T&&(u=T.ns)}return{host:n,port:m,domain:r,subdomain:a,secure:c,scheme:d,pathString:o,namespace:u}},Lz=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.eventType=s,this.eventRegistration=n,this.snapshot=r,this.prevName=a}return(0,D.Z)(i,[{key:"getPath",value:function(){var n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+(0,Me.Pz)(this.snapshot.exportVal())}}]),i}(),Nz=function(){function i(s,n,r){(0,M.Z)(this,i),this.eventRegistration=s,this.error=n,this.path=r}return(0,D.Z)(i,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),i}(),Fz=function(){function i(s,n){(0,M.Z)(this,i),this.snapshotCallback=s,this.cancelCallback=n}return(0,D.Z)(i,[{key:"onValue",value:function(n,r){this.snapshotCallback.call(null,n,r)}},{key:"onCancel",value:function(n){return(0,Me.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}]),i}(),Zz=function(){function i(s,n){(0,M.Z)(this,i),this._repo=s,this._path=n}return(0,D.Z)(i,[{key:"cancel",value:function(){var n=new Me.BH;return DY(this._repo,this._path,n.wrapCallback(function(){})),n.promise}},{key:"remove",value:function(){zc("OnDisconnect.remove",this._path);var n=new Me.BH;return Iz(this._repo,this._path,null,n.wrapCallback(function(){})),n.promise}},{key:"set",value:function(n){zc("OnDisconnect.set",this._path),nd("OnDisconnect.set",n,this._path,!1);var r=new Me.BH;return Iz(this._repo,this._path,n,r.wrapCallback(function(){})),r.promise}},{key:"setWithPriority",value:function(n,r){zc("OnDisconnect.setWithPriority",this._path),nd("OnDisconnect.setWithPriority",n,this._path,!1),P2("OnDisconnect.setWithPriority",r,!1);var a=new Me.BH;return function(i,s,n,r,a){var o=ws(n,r);i.server_.onDisconnectPut(s.toString(),o.val(!0),function(u,c){"ok"===u&&Cw(i.onDisconnect_,s,o),gm(0,a,u,c)})}(this._repo,this._path,n,r,a.wrapCallback(function(){})),a.promise}},{key:"update",value:function(n){zc("OnDisconnect.update",this._path),Ez("OnDisconnect.update",n,this._path,!1);var r=new Me.BH;return function(i,s,n,r){if((0,Me.xb)(n))return To("onDisconnect().update() called with empty data.  Don't do anything."),void gm(0,r,"ok",void 0);i.server_.onDisconnectMerge(s.toString(),n,function(a,o){"ok"===a&&x(n,function(u,c){var d=ws(c);Cw(i.onDisconnect_,ls(s,u),d)}),gm(0,r,a,o)})}(this._repo,this._path,n,r.wrapCallback(function(){})),r.promise}}]),i}(),jc=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._repo=s,this._path=n,this._queryParams=r,this._orderByCalled=a}return(0,D.Z)(i,[{key:"key",get:function(){return ci(this._path)?null:YZ(this._path)}},{key:"ref",get:function(){return new rd(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var n=HH(this._queryParams),r=w(n);return"{}"===r?"default":r}},{key:"_queryObject",get:function(){return HH(this._queryParams)}},{key:"isEqual",value:function(n){if(!((n=(0,Me.m9)(n))instanceof i))return!1;var r=this._repo===n._repo,a=KZ(this._path,n._path);return r&&a&&this._queryIdentifier===n._queryIdentifier}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(i){for(var s="",n=i.pieceNum_;n<i.pieces_.length;n++)""!==i.pieces_[n]&&(s+="/"+encodeURIComponent(String(i.pieces_[n])));return s||"/"}(this._path)}}]),i}();function JR(i,s){if(!0===i._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function ym(i){var s=null,n=null;if(i.hasStart()&&(s=i.getIndexStartValue()),i.hasEnd()&&(n=i.getIndexEndValue()),i.getIndex()===td){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==l)throw new Error(r);if("string"!=typeof s)throw new Error(a)}if(i.hasEnd()){if(i.getIndexEndName()!==f)throw new Error(r);if("string"!=typeof n)throw new Error(a)}}else if(i.getIndex()===Va){if(null!=s&&!LM(s)||null!=n&&!LM(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Me.hu)(i.getIndex()instanceof JZ||i.getIndex()===e2,"unknown index type."),null!=s&&"object"==typeof s||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eP(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var rd=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,a,new UH,!1)}return(0,D.Z)(n,[{key:"parent",get:function(){var a=CH(this._path);return null===a?null:new n(this._repo,a)}},{key:"root",get:function(){for(var a=this;null!==a.parent;)a=a.parent;return a}}]),n}(jc),tP=function(){function i(s,n,r){(0,M.Z)(this,i),this._node=s,this.ref=n,this._index=r}return(0,D.Z)(i,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(n){var r=new ca(n),a=r_(this.ref,n);return new i(this._node.getChild(r),a,Va)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(n){var r=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(o,u){return n(new i(u,r_(r.ref,o),Va))})}},{key:"hasChild",value:function(n){var r=new ca(n);return!this._node.getChild(r).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),i}();function Bz(i,s){return(i=(0,Me.m9)(i))._checkNotDeleted("ref"),void 0!==s?r_(i._root,s):i._root}function Uz(i,s){(i=(0,Me.m9)(i))._checkNotDeleted("refFromURL");var n=V2(s,i._repo.repoInfo_.nodeAdmin);Cz("refFromURL",n);var r=n.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&r.host!==i._repo.repoInfo_.host&&Vc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+i._repo.repoInfo_.host+")"),Bz(i,n.path.toString())}function r_(i,s){return null===li((i=(0,Me.m9)(i))._path)?((r=s)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),FM("child","path",r,!1)):FM("child","path",s,!1),new rd(i._repo,ls(i._path,s));var r}function HY(i,s){i=(0,Me.m9)(i),zc("push",i._path),nd("push",s,i._path,!0);var u,n=Mz(i._repo),r=qq(n),a=r_(i,r),o=r_(i,r);return u=null!=s?H2(o,s).then(function(){return o}):Promise.resolve(o),a.then=u.then.bind(u),a.catch=u.then.bind(u,void 0),a}function zY(i){return zc("remove",i._path),H2(i,null)}function H2(i,s){i=(0,Me.m9)(i),zc("set",i._path),nd("set",s,i._path,!1);var n=new Me.BH;return N2(i._repo,i._path,s,null,n.wrapCallback(function(){})),n.promise}function GY(i,s){i=(0,Me.m9)(i),zc("setPriority",i._path),P2("setPriority",s,!1);var n=new Me.BH;return N2(i._repo,ls(i._path,".priority"),s,null,n.wrapCallback(function(){})),n.promise}function jY(i,s,n){if(zc("setWithPriority",i._path),nd("setWithPriority",s,i._path,!1),P2("setWithPriority",n,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";var r=new Me.BH;return N2(i._repo,i._path,s,n,r.wrapCallback(function(){})),r.promise}function WY(i,s){Ez("update",s,i._path,!1);var n=new Me.BH;return function(i,s,n,r){Mw(i,"update",{path:s.toString(),value:n});var a=!0,o=ZM(i),u={};if(x(n,function(m,_){a=!1,u[m]=_z(ls(s,m),ws(_),i.serverSyncTree_,o)}),a)To("update() called with empty data.  Don't do anything."),gm(0,r,"ok",void 0);else{var c=$R(i),d=function(i,s,n,r){!function(i,s,n,r){(0,Me.hu)(r>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:s,children:n,writeId:r,visible:!0}),i.visibleWrites=d2(i.visibleWrites,s,n),i.lastWriteId=r}(i.pendingWriteTree_,s,n,r);var a=Jl.fromObject(n);return Tw(i,new f2({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,a))}(i.serverSyncTree_,s,u,c);KR(i.eventQueue_,d),i.server_.merge(s.toString(),n,function(m,_){var b="ok"===m;b||Su("update at "+s+" failed: "+m);var E=mm(i.serverSyncTree_,c,!b),T=E.length>0?Aw(i,s):s;Gc(i.eventQueue_,T,E),gm(0,r,m,_)}),x(n,function(m){var _=B2(i,ls(s,m));Aw(i,_)}),Gc(i.eventQueue_,s,[])}}(i._repo,i._path,s,n.wrapCallback(function(){})),n.promise}function qY(i){return function(i,s){var n=function(i,s){var n=s._path,r=null;i.syncPointTree_.foreachOnPath(n,function(m,_){var b=Ku(m,n);r=r||vm(_,b)});var a=i.syncPointTree_.get(n);a?r=r||vm(a,na()):(a=new uz,i.syncPointTree_=i.syncPointTree_.set(n,a));var o=null!=r,u=o?new hm(r,!0,!1):null;return function(i){return OR(i.viewCache_)}(lz(a,s,LR(i.pendingWriteTree_,s._path),o?u.getNode():$r.EMPTY_NODE,o))}(i.serverSyncTree_,s);return null!=n?Promise.resolve(n):i.server_.get(s).then(function(r){var a=ws(r).withIndex(s._queryParams.getIndex()),o=RM(i.serverSyncTree_,s._path,a);return O2(i.eventQueue_,s._path,o),Promise.resolve(a)},function(r){return Mw(i,"get for query "+(0,Me.Pz)(s)+" failed: "+r),Promise.reject(new Error(r))})}((i=(0,Me.m9)(i))._repo,i).then(function(s){return new tP(s,new rd(i._repo,i._path),i._queryParams.getIndex())})}var Vz=function(){function i(s){(0,M.Z)(this,i),this.callbackContext=s}return(0,D.Z)(i,[{key:"respondsTo",value:function(n){return"value"===n}},{key:"createEvent",value:function(n,r){var a=r._queryParams.getIndex();return new Lz("value",this,new tP(n.snapshotNode,new rd(r._repo,r._path),a))}},{key:"getEventRunner",value:function(n){var r=this;return"cancel"===n.getEventType()?function(){return r.callbackContext.onCancel(n.error)}:function(){return r.callbackContext.onValue(n.snapshot,null)}}},{key:"createCancelEvent",value:function(n,r){return this.callbackContext.hasCancelCallback?new Nz(this,n,r):null}},{key:"matches",value:function(n){return n instanceof i&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),i}(),Hz=function(){function i(s,n){(0,M.Z)(this,i),this.eventType=s,this.callbackContext=n}return(0,D.Z)(i,[{key:"respondsTo",value:function(n){var r="children_added"===n?"child_added":n;return this.eventType===("children_removed"===r?"child_removed":r)}},{key:"createCancelEvent",value:function(n,r){return this.callbackContext.hasCancelCallback?new Nz(this,n,r):null}},{key:"createEvent",value:function(n,r){(0,Me.hu)(null!=n.childName,"Child events should have a childName.");var a=r_(new rd(r._repo,r._path),n.childName),o=r._queryParams.getIndex();return new Lz(n.type,this,new tP(n.snapshotNode,a,o),n.prevName)}},{key:"getEventRunner",value:function(n){var r=this;return"cancel"===n.getEventType()?function(){return r.callbackContext.onCancel(n.error)}:function(){return r.callbackContext.onValue(n.snapshot,n.prevName)}}},{key:"matches",value:function(n){return n instanceof i&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),i}();function BM(i,s,n,r,a){var o;if("object"==typeof r&&(o=void 0,a=r),"function"==typeof r&&(o=r),a&&a.onlyOnce){var u=n,c=function(b,E){F2(i._repo,i,m),u(b,E)};c.userCallback=n.userCallback,c.context=n.context,n=c}var d=new Fz(n,o||void 0),m="value"===s?new Vz(d):new Hz(s,d);return function(i,s,n){var r;r=".info"===li(s._path)?vz(i.infoSyncTree_,s,n):vz(i.serverSyncTree_,s,n),O2(i.eventQueue_,s._path,r)}(i._repo,i,m),function(){return F2(i._repo,i,m)}}function z2(i,s,n,r){return BM(i,"value",s,n,r)}function zz(i,s,n,r){return BM(i,"child_added",s,n,r)}function Gz(i,s,n,r){return BM(i,"child_changed",s,n,r)}function jz(i,s,n,r){return BM(i,"child_moved",s,n,r)}function Wz(i,s,n,r){return BM(i,"child_removed",s,n,r)}function qz(i,s,n){var r=null,a=n?new Fz(n):null;"value"===s?r=new Vz(a):s&&(r=new Hz(s,a)),F2(i._repo,i,r)}var Lf=function i(){(0,M.Z)(this,i)},Yz=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,D.Z)(n,[{key:"_apply",value:function(a){nd("endAt",this._value,a._path,!0);var o=a2(a._queryParams,this._value,this._key);if(eP(o),ym(o),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jc(a._repo,a._path,o,a._orderByCalled)}}]),n}(Lf);function YY(i,s){return NM("endAt","key",s,!0),new Yz(i,s)}var KY=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,D.Z)(n,[{key:"_apply",value:function(a){nd("endBefore",this._value,a._path,!1);var o=function(i,s,n){var a;return i.index_===td?("string"==typeof s&&(s=FH(s)),a=a2(i,s,n)):a=a2(i,s,null==n?l:FH(n)),a.endBeforeSet_=!0,a}(a._queryParams,this._value,this._key);if(eP(o),ym(o),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jc(a._repo,a._path,o,a._orderByCalled)}}]),n}(Lf);function $Y(i,s){return NM("endBefore","key",s,!0),new KY(i,s)}var Kz=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,D.Z)(n,[{key:"_apply",value:function(a){nd("startAt",this._value,a._path,!0);var o=r2(a._queryParams,this._value,this._key);if(eP(o),ym(o),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jc(a._repo,a._path,o,a._orderByCalled)}}]),n}(Lf);function XY(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1?arguments[1]:void 0;return NM("startAt","key",s,!0),new Kz(i,s)}var QY=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,D.Z)(n,[{key:"_apply",value:function(a){nd("startAfter",this._value,a._path,!1);var o=function(i,s,n){var r;return i.index_===td?("string"==typeof s&&(s=NH(s)),r=r2(i,s,n)):r=r2(i,s,null==n?f:NH(n)),r.startAfterSet_=!0,r}(a._queryParams,this._value,this._key);if(eP(o),ym(o),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jc(a._repo,a._path,o,a._orderByCalled)}}]),n}(Lf);function JY(i,s){return NM("startAfter","key",s,!0),new QY(i,s)}var e7=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._limit=r,a}return(0,D.Z)(n,[{key:"_apply",value:function(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jc(a._repo,a._path,function(i,s){var n=i.copy();return n.limitSet_=!0,n.limit_=s,n.viewFrom_="l",n}(a._queryParams,this._limit),a._orderByCalled)}}]),n}(Lf);function t7(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new e7(i)}var n7=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._limit=r,a}return(0,D.Z)(n,[{key:"_apply",value:function(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jc(a._repo,a._path,function(i,s){var n=i.copy();return n.limitSet_=!0,n.limit_=s,n.viewFrom_="r",n}(a._queryParams,this._limit),a._orderByCalled)}}]),n}(Lf);function r7(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new n7(i)}var i7=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._path=r,a}return(0,D.Z)(n,[{key:"_apply",value:function(a){JR(a,"orderByChild");var o=new ca(this._path);if(ci(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var u=new JZ(o),c=IR(a._queryParams,u);return ym(c),new jc(a._repo,a._path,c,!0)}}]),n}(Lf);function a7(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return FM("orderByChild","path",i,!1),new i7(i)}var s7=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"_apply",value:function(a){JR(a,"orderByKey");var o=IR(a._queryParams,td);return ym(o),new jc(a._repo,a._path,o,!0)}}]),n}(Lf);function o7(){return new s7}var u7=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"_apply",value:function(a){JR(a,"orderByPriority");var o=IR(a._queryParams,Va);return ym(o),new jc(a._repo,a._path,o,!0)}}]),n}(Lf);function l7(){return new u7}var c7=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"_apply",value:function(a){JR(a,"orderByValue");var o=IR(a._queryParams,e2);return ym(o),new jc(a._repo,a._path,o,!0)}}]),n}(Lf);function f7(){return new c7}var h7=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,D.Z)(n,[{key:"_apply",value:function(a){if(nd("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yz(this._value,this._key)._apply(new Kz(this._value,this._key)._apply(a))}}]),n}(Lf);function d7(i,s){return NM("equalTo","key",s,!0),new h7(i,s)}function Nf(i){for(var s=(0,Me.m9)(i),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=0,u=r;o<u.length;o++){var c=u[o];s=c._apply(s)}return s}(function(i){(0,Me.hu)(!BR,"__referenceConstructor has already been defined"),BR=i})(rd),function(i){(0,Me.hu)(!VR,"__referenceConstructor has already been defined"),VR=i}(rd);var G2={};function p7(i,s,n,r){i.repoInfo_=new cm("".concat(s,":").concat(n),!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),r&&(i.authTokenProvider_=r)}function Xz(i,s,n,r,a){var o=r||i.options.databaseURL;void 0===o&&(i.options.projectId||Vc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),To("Using default host for project ",i.options.projectId),o="".concat(i.options.projectId,"-default-rtdb.firebaseio.com"));var d,u=V2(o,a),c=u.repoInfo,m=void 0;"undefined"!=typeof process&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(d=!0,o="http://".concat(m,"?ns=").concat(c.namespace),c=(u=V2(o,a)).repoInfo):d=!u.repoInfo.secure;var _=a&&d?new jr(jr.OWNER):new Lr(i.name,i.options,s);Cz("Invalid Firebase Database URL",u),ci(u.path)||Vc("Database URL must point to the root of a Firebase Database (not including a child path).");var b=function(i,s,n,r){var a=G2[s.name];a||(G2[s.name]=a={});var o=a[i.toURLString()];return o&&Vc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new SY(i,false,n,r),a[i.toURLString()]=o,o}(c,i,_,new xn(i.name,n));return new _7(b,i)}var _7=function(){function i(s,n){(0,M.Z)(this,i),this._repoInternal=s,this.app=n,this.type="database",this._instanceStarted=!1}return(0,D.Z)(i,[{key:"_repo",get:function(){return this._instanceStarted||(function(i,s,n){if(i.stats_=_w(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new t8(i.repoInfo_,function(r,a,o,u){Az(i,r,a,o,u)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(function(){return xz(i,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Me.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new Jy(i.repoInfo_,s,function(r,a,o,u){Az(i,r,a,o,u)},function(r){xz(i,r)},function(r){!function(i,s){x(s,function(n,r){L2(i,n,r)})}(i,r)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(function(r){i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(function(r){i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=function(i,s){var n=i.toString();return bM[n]||(bM[n]=s()),bM[n]}(i.repoInfo_,function(){return new o8(i.stats_,i.server_)}),i.infoData_=new n8,i.infoSyncTree_=new dz({startListening:function(a,o,u,c){var d=[],m=i.infoData_.getNode(a._path);return m.isEmpty()||(d=RM(i.infoSyncTree_,a._path,m),setTimeout(function(){c("ok")},0)),d},stopListening:function(){}}),L2(i,"connected",!1),i.serverSyncTree_=new dz({startListening:function(a,o,u,c){return i.server_.listen(a,u,o,function(d,m){var _=c(d,m);Gc(i.eventQueue_,a._path,_)}),[]},stopListening:function(a,o){i.server_.unlisten(a,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new rd(this._repo,na())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(function(i,s){var n=G2[s];(!n||n[i.key]!==i)&&Vc("Database ".concat(s,"(").concat(i.repoInfo_,") has already been deleted.")),Dz(i),delete n[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(n){null===this._rootInternal&&Vc("Cannot call "+n+" on a deleted database.")}}]),i}();function b7(i,s,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(i=(0,Me.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Vc("Cannot call useEmulator() after instance has already been initialized.");var a=i._repoInternal,o=void 0;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Vc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new jr(jr.OWNER);else if(r.mockUserToken){var u="string"==typeof r.mockUserToken?r.mockUserToken:(0,Me.Sg)(r.mockUserToken,i.app.options.projectId);o=new jr(u)}p7(a,s,n,o)}function w7(i){(i=(0,Me.m9)(i))._checkNotDeleted("goOffline"),Dz(i._repo)}function k7(i){(i=(0,Me.m9)(i))._checkNotDeleted("goOnline"),function(i){i.persistentConnection_&&i.persistentConnection_.resume(Tz)}(i._repo)}function E7(i,s){VZ(i,s)}var S7={".sv":"timestamp"},A7=function(){function i(s,n){(0,M.Z)(this,i),this.committed=s,this.snapshot=n}return(0,D.Z)(i,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),i}();function x7(i,s,n){var r;if(i=(0,Me.m9)(i),zc("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";var a=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new Me.BH,c=z2(i,function(){});return function(i,s,n,r,a,o){Mw(i,"transaction on "+s);var u={path:s,update:n,onComplete:r,status:null,order:BZ(),applyLocally:o,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Z2(i,s,void 0);u.currentInputSnapshot=c;var d=u.update(c.val());if(void 0===d)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{YR("transaction failed: Data returned ",d,u.path),u.status=0;var b,m=jR(i.transactionQueueTree_,s),_=n_(m)||[];_.push(u),I2(m,_),"object"==typeof d&&null!==d&&(0,Me.r3)(d,".priority")?(b=(0,Me.DV)(d,".priority"),(0,Me.hu)(LM(b),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):b=(HR(i.serverSyncTree_,s)||$r.EMPTY_NODE).getPriority().val();var T=ZM(i),I=ws(d,b),N=M2(I,c,T);u.currentOutputSnapshotRaw=I,u.currentOutputSnapshotResolved=N,u.currentWriteId=$R(i);var W=k2(i.serverSyncTree_,s,N,u.currentWriteId,u.applyLocally);Gc(i.eventQueue_,s,W),XR(i,i.transactionQueueTree_)}}(i._repo,i._path,s,function(m,_,b){var E=null;m?o.reject(m):(E=new tP(b,new rd(i._repo,i._path),Va),o.resolve(new A7(_,E)))},c,a),o.promise}Jy.prototype.simpleListen=function(i,s){this.sendRequest("q",{p:i},s)},Jy.prototype.echo=function(i,s){this.sendRequest("echo",{d:i},s)},ZZ(gh.SDK_VERSION),(0,gh._registerComponent)(new Nd.wA("database",function(s,n){var r=n.instanceIdentifier;return Xz(s.getProvider("app").getImmediate(),s.getProvider("auth-internal"),s.getProvider("app-check-internal"),r)},"PUBLIC").setMultipleInstances(!0)),(0,gh.registerVersion)("@firebase/database","0.12.1",void 0);var R7=new Cc.Yd("@firebase/database-compat"),Qz=function(s){R7.warn("FIREBASE WARNING: "+s)},P7=function(s,n,r,a){if((!a||void 0!==r)&&"boolean"!=typeof r)throw new Error((0,Me.gK)(s,n)+"must be a boolean.")},O7=function(s,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Me.gK)(s,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},L7=function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,D.Z)(i,[{key:"cancel",value:function(n){(0,Me.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Me.Wj)("OnDisconnect.cancel","onComplete",n,!0);var r=this._delegate.cancel();return n&&r.then(function(){return n(null)},function(a){return n(a)}),r}},{key:"remove",value:function(n){(0,Me.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Me.Wj)("OnDisconnect.remove","onComplete",n,!0);var r=this._delegate.remove();return n&&r.then(function(){return n(null)},function(a){return n(a)}),r}},{key:"set",value:function(n,r){(0,Me.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Me.Wj)("OnDisconnect.set","onComplete",r,!0);var a=this._delegate.set(n);return r&&a.then(function(){return r(null)},function(o){return r(o)}),a}},{key:"setWithPriority",value:function(n,r,a){(0,Me.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Me.Wj)("OnDisconnect.setWithPriority","onComplete",a,!0);var o=this._delegate.setWithPriority(n,r);return a&&o.then(function(){return a(null)},function(u){return a(u)}),o}},{key:"update",value:function(n,r){if((0,Me.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){for(var a={},o=0;o<n.length;++o)a[""+o]=n[o];n=a,Qz("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Me.Wj)("OnDisconnect.update","onComplete",r,!0);var u=this._delegate.update(n);return r&&u.then(function(){return r(null)},function(c){return r(c)}),u}}]),i}(),N7=function(){function i(s,n){(0,M.Z)(this,i),this.committed=s,this.snapshot=n}return(0,D.Z)(i,[{key:"toJSON",value:function(){return(0,Me.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),i}(),UM=function(){function i(s,n){(0,M.Z)(this,i),this._database=s,this._delegate=n}return(0,D.Z)(i,[{key:"val",value:function(){return(0,Me.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return(0,Me.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return(0,Me.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return(0,Me.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(n){return(0,Me.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),FM("DataSnapshot.child","path",n,!1),new i(this._database,this._delegate.child(n))}},{key:"hasChild",value:function(n){return(0,Me.Dv)("DataSnapshot.hasChild",1,1,arguments.length),FM("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}},{key:"getPriority",value:function(){return(0,Me.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(n){var r=this;return(0,Me.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Me.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(function(a){return n(new i(r._database,a))})}},{key:"hasChildren",value:function(){return(0,Me.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return(0,Me.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return(0,Me.Dv)("DataSnapshot.ref",0,0,arguments.length),new i_(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),i}(),Jz=function(){function i(s,n){(0,M.Z)(this,i),this.database=s,this._delegate=n}return(0,D.Z)(i,[{key:"on",value:function(n,r,a,o){var c,u=this;(0,Me.Dv)("Query.on",2,4,arguments.length),(0,Me.Wj)("Query.on","callback",r,!1);var d=i.getCancelAndContextArgs_("Query.on",a,o),m=function(E,T){r.call(d.context,new UM(u.database,E),T)};m.userCallback=r,m.context=d.context;var _=null===(c=d.cancel)||void 0===c?void 0:c.bind(d.context);switch(n){case"value":return z2(this._delegate,m,_),r;case"child_added":return zz(this._delegate,m,_),r;case"child_removed":return Wz(this._delegate,m,_),r;case"child_changed":return Gz(this._delegate,m,_),r;case"child_moved":return jz(this._delegate,m,_),r;default:throw new Error((0,Me.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(n,r,a){if((0,Me.Dv)("Query.off",0,3,arguments.length),O7("Query.off",n,!0),(0,Me.Wj)("Query.off","callback",r,!0),(0,Me.lb)("Query.off","context",a,!0),r){var o=function(){};o.userCallback=r,o.context=a,qz(this._delegate,n,o)}else qz(this._delegate,n)}},{key:"get",value:function(){var n=this;return qY(this._delegate).then(function(r){return new UM(n.database,r)})}},{key:"once",value:function(n,r,a,o){var u=this;(0,Me.Dv)("Query.once",1,4,arguments.length),(0,Me.Wj)("Query.once","callback",r,!0);var c=i.getCancelAndContextArgs_("Query.once",a,o),d=new Me.BH,m=function(E,T){var I=new UM(u.database,E);r&&r.call(c.context,I,T),d.resolve(I)};m.userCallback=r,m.context=c.context;var _=function(E){c.cancel&&c.cancel.call(c.context,E),d.reject(E)};switch(n){case"value":z2(this._delegate,m,_,{onlyOnce:!0});break;case"child_added":zz(this._delegate,m,_,{onlyOnce:!0});break;case"child_removed":Wz(this._delegate,m,_,{onlyOnce:!0});break;case"child_changed":Gz(this._delegate,m,_,{onlyOnce:!0});break;case"child_moved":jz(this._delegate,m,_,{onlyOnce:!0});break;default:throw new Error((0,Me.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}},{key:"limitToFirst",value:function(n){return(0,Me.Dv)("Query.limitToFirst",1,1,arguments.length),new i(this.database,Nf(this._delegate,t7(n)))}},{key:"limitToLast",value:function(n){return(0,Me.Dv)("Query.limitToLast",1,1,arguments.length),new i(this.database,Nf(this._delegate,r7(n)))}},{key:"orderByChild",value:function(n){return(0,Me.Dv)("Query.orderByChild",1,1,arguments.length),new i(this.database,Nf(this._delegate,a7(n)))}},{key:"orderByKey",value:function(){return(0,Me.Dv)("Query.orderByKey",0,0,arguments.length),new i(this.database,Nf(this._delegate,o7()))}},{key:"orderByPriority",value:function(){return(0,Me.Dv)("Query.orderByPriority",0,0,arguments.length),new i(this.database,Nf(this._delegate,l7()))}},{key:"orderByValue",value:function(){return(0,Me.Dv)("Query.orderByValue",0,0,arguments.length),new i(this.database,Nf(this._delegate,f7()))}},{key:"startAt",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Me.Dv)("Query.startAt",0,2,arguments.length),new i(this.database,Nf(this._delegate,XY(n,r)))}},{key:"startAfter",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Me.Dv)("Query.startAfter",0,2,arguments.length),new i(this.database,Nf(this._delegate,JY(n,r)))}},{key:"endAt",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Me.Dv)("Query.endAt",0,2,arguments.length),new i(this.database,Nf(this._delegate,YY(n,r)))}},{key:"endBefore",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Me.Dv)("Query.endBefore",0,2,arguments.length),new i(this.database,Nf(this._delegate,$Y(n,r)))}},{key:"equalTo",value:function(n,r){return(0,Me.Dv)("Query.equalTo",1,2,arguments.length),new i(this.database,Nf(this._delegate,d7(n,r)))}},{key:"toString",value:function(){return(0,Me.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return(0,Me.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(n){if((0,Me.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof i)){var r="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(r)}return this._delegate.isEqual(n._delegate)}},{key:"ref",get:function(){return new i_(this.database,new rd(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(n,r,a){var o={cancel:void 0,context:void 0};if(r&&a)o.cancel=r,(0,Me.Wj)(n,"cancel",o.cancel,!0),o.context=a,(0,Me.lb)(n,"context",o.context,!0);else if(r)if("object"==typeof r&&null!==r)o.context=r;else{if("function"!=typeof r)throw new Error((0,Me.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=r}return o}}]),i}(),i_=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,new jc(a._repo,a._path,new UH,!1))).database=r,o._delegate=a,o}return(0,D.Z)(n,[{key:"getKey",value:function(){return(0,Me.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(a){return(0,Me.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new n(this.database,r_(this._delegate,a))}},{key:"getParent",value:function(){(0,Me.Dv)("Reference.parent",0,0,arguments.length);var a=this._delegate.parent;return a?new n(this.database,a):null}},{key:"getRoot",value:function(){return(0,Me.Dv)("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(a,o){(0,Me.Dv)("Reference.set",1,2,arguments.length),(0,Me.Wj)("Reference.set","onComplete",o,!0);var u=H2(this._delegate,a);return o&&u.then(function(){return o(null)},function(c){return o(c)}),u}},{key:"update",value:function(a,o){if((0,Me.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){for(var u={},c=0;c<a.length;++c)u[""+c]=a[c];a=u,Qz("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}zc("Reference.update",this._delegate._path),(0,Me.Wj)("Reference.update","onComplete",o,!0);var d=WY(this._delegate,a);return o&&d.then(function(){return o(null)},function(m){return o(m)}),d}},{key:"setWithPriority",value:function(a,o,u){(0,Me.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Me.Wj)("Reference.setWithPriority","onComplete",u,!0);var c=jY(this._delegate,a,o);return u&&c.then(function(){return u(null)},function(d){return u(d)}),c}},{key:"remove",value:function(a){(0,Me.Dv)("Reference.remove",0,1,arguments.length),(0,Me.Wj)("Reference.remove","onComplete",a,!0);var o=zY(this._delegate);return a&&o.then(function(){return a(null)},function(u){return a(u)}),o}},{key:"transaction",value:function(a,o,u){var c=this;(0,Me.Dv)("Reference.transaction",1,3,arguments.length),(0,Me.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,Me.Wj)("Reference.transaction","onComplete",o,!0),P7("Reference.transaction","applyLocally",u,!0);var d=x7(this._delegate,a,{applyLocally:u}).then(function(m){return new N7(m.committed,new UM(c.database,m.snapshot))});return o&&d.then(function(m){return o(null,m.committed,m.snapshot)},function(m){return o(m,!1,null)}),d}},{key:"setPriority",value:function(a,o){(0,Me.Dv)("Reference.setPriority",1,2,arguments.length),(0,Me.Wj)("Reference.setPriority","onComplete",o,!0);var u=GY(this._delegate,a);return o&&u.then(function(){return o(null)},function(c){return o(c)}),u}},{key:"push",value:function(a,o){var u=this;(0,Me.Dv)("Reference.push",0,2,arguments.length),(0,Me.Wj)("Reference.push","onComplete",o,!0);var c=HY(this._delegate,a),d=c.then(function(_){return new n(u.database,_)});o&&d.then(function(){return o(null)},function(_){return o(_)});var m=new n(this.database,c);return m.then=d.then.bind(d),m.catch=d.catch.bind(d,void 0),m}},{key:"onDisconnect",value:function(){return zc("Reference.onDisconnect",this._delegate._path),new L7(new Zz(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Jz),nP=function(){var i=function(){function s(n,r){var a=this;(0,M.Z)(this,s),this._delegate=n,this.app=r,this.INTERNAL={delete:function(){return a._delegate._delete()}}}return(0,D.Z)(s,[{key:"useEmulator",value:function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};b7(this._delegate,r,a,o)}},{key:"ref",value:function(r){if((0,Me.Dv)("database.ref",0,1,arguments.length),r instanceof i_){var a=Uz(this._delegate,r.toString());return new i_(this,a)}var o=Bz(this._delegate,r);return new i_(this,o)}},{key:"refFromURL",value:function(r){var a="database.refFromURL";(0,Me.Dv)(a,1,1,arguments.length);var o=Uz(this._delegate,r);return new i_(this,o)}},{key:"goOffline",value:function(){return(0,Me.Dv)("database.goOffline",0,0,arguments.length),w7(this._delegate)}},{key:"goOnline",value:function(){return(0,Me.Dv)("database.goOnline",0,0,arguments.length),k7(this._delegate)}}]),s}();return i.ServerValue={TIMESTAMP:S7,increment:function(n){return function(i){return{".sv":{increment:i}}}(n)}},i}(),Z7=Object.freeze({__proto__:null,initStandalone:function(i){var s=i.app,n=i.url,a=i.customAuthImpl,o=i.namespace,u=i.nodeAdmin,c=void 0!==u&&u;ZZ(i.version);var d=new Nd.zt("auth-internal",new Nd.H0("database-standalone"));return d.setComponent(new Nd.wA("auth-internal",function(){return a},"PRIVATE")),{instance:new nP(Xz(s,d,void 0,n,c),s),namespace:o}}}),B7=nP.ServerValue;function eG(i){return null==i}function tG(i){return"function"==typeof i.set}function nG(i,s){return tG(s)?s:i.ref(s)}function rG(i,s){if(function(i){return"string"==typeof i}(i))return s.stringCase();if(tG(i))return s.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return s.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: ".concat(typeof i))}function VM(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bo.z;return new ms.y(function(a){var o;return o=i[n](s,function(u,c){r.schedule(function(){a.next({snapshot:u,prevKey:c})}),"once"===n&&r.schedule(function(){return a.complete()})},function(u){r.schedule(function(){return a.error(u)})}),"on"===n?{unsubscribe:function(){null!=o&&i.off(s,o)}}:{unsubscribe:function(){}}}).pipe((0,ur.U)(function(a){var o=a.snapshot,u=a.prevKey,c=null;return o.exists()&&(c=o.key),{type:s,payload:o,prevKey:u,key:c}}),(0,Uc.B)())}function iG(i,s){for(var n=i.length,r=0;r<n;r++)if(i[r].payload.key===s)return r;return-1}function j7(i,s){var n=s.payload,r=s.prevKey,a=s.key,o=iG(i,a),u=function(i,s){if(eG(s))return 0;var n=iG(i,s);return-1===n?i.length:n+1}(i,r);switch(s.type){case"value":if(s.payload&&s.payload.exists()){var c=null;s.payload.forEach(function(_){var b={payload:_,type:"value",prevKey:c,key:_.key};return c=_.key,i=[].concat((0,Gr.Z)(i),[b]),!1})}return i;case"child_added":if(o>-1){var d=i[o-1];(d&&d.key||null)!==r&&(i=i.filter(function(_){return _.payload.key!==n.key})).splice(u,0,s)}else{if(null==r)return[s].concat((0,Gr.Z)(i));(i=i.slice()).splice(u,0,s)}return i;case"child_removed":return i.filter(function(_){return _.payload.key!==n.key});case"child_changed":return i.map(function(_){return _.payload.key===a?s:_});case"child_moved":if(o>-1){var m=i.splice(o,1)[0];return(i=i.slice()).splice(u,0,m),i}return i;default:return i}}function aG(i){return(eG(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function sG(i,s,n){return function(i,s,n){return VM(i,"value","once",n).pipe(Ys(function(r){var a=[(0,tr.of)(r)];return s.forEach(function(o){return a.push(VM(i,o,"on",n))}),qh.T.apply(void 0,a).pipe(Vv(j7,[]))}),mh())}(i,s=aG(s),n)}function oG(i,s,n){var r=(s=aG(s)).map(function(a){return VM(i,a,"on",n)});return qh.T.apply(void 0,(0,Gr.Z)(r))}function uG(i,s){return function(r,a){return rG(r,{stringCase:function(){return i.child(r)[s](a)},firebaseCase:function(){return r[s](a)},snapshotCase:function(){return r.ref[s](a)}})}}function K7(i){return function(n){return n?rG(n,{stringCase:function(){return i.child(n).remove()},firebaseCase:function(){return n.remove()},snapshotCase:function(){return n.ref.remove()}}):i.remove()}}function lG(i,s){return function(){return VM(i,"value","on",s)}}!function(i){i.INTERNAL.registerComponent(new Nd.wA("database-compat",function(s,n){var r=n.instanceIdentifier,a=s.getProvider("app-compat").getImmediate(),o=s.getProvider("database").getImmediate({identifier:r});return new nP(o,a)},"PUBLIC").setServiceProps({Reference:i_,Query:Jz,Database:nP,DataSnapshot:UM,enableLogging:E7,INTERNAL:Z7,ServerValue:B7}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.1")}(lL.Z);var Q7=new v.OlP("angularfire2.realtimeDatabaseURL"),J7=new v.OlP("angularfire2.database.use-emulator"),cG=function(){var i=function(){function s(n,r,a,o,u,c,d,m,_,b,E,T,I,N){(0,M.Z)(this,s),this.schedulers=c;var W=d,U=(0,ku.on)(n,u,r);m&&ED(U,u,_,E,T,I,b,N),this.database=(0,ua.cc)("".concat(U.name,".database.").concat(a),"AngularFireDatabase",U.name,function(){var H=u.runOutsideAngular(function(){return U.database(a||void 0)});return W&&H.useEmulator.apply(H,(0,Gr.Z)(W)),H},[W])}return(0,D.Z)(s,[{key:"list",value:function(r,a){var o=this,u=this.schedulers.ngZone.runOutsideAngular(function(){return nG(o.database,r)}),c=u;return a&&(c=a(u)),function(i,s){var n=s.schedulers.outsideAngular,r=s.schedulers.ngZone.run(function(){return i.ref});return{query:i,update:uG(r,"update"),set:uG(r,"set"),push:function(o){return r.push(o)},remove:K7(r),snapshotChanges:function(o){return sG(i,o,n).pipe(ua.iC)},stateChanges:function(o){return oG(i,o,n).pipe(ua.iC)},auditTrail:function(o){return function(i,s,n){return function(i,s,n){return function(i,s){return VM(i,"value","on",s).pipe((0,ur.U)(function(n){var r;return n.payload.forEach(function(a){return r=a.key,!1}),{data:n,lastKeyToLoad:r}}))}(i,n).pipe(function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return function(r){var a;return"function"==typeof s[s.length-1]&&(a=s.pop()),r.lift(new NZ(s,a))}}(s),(0,ur.U)(function(a){var o=(0,ke.Z)(a,2),c=o[1],d=o[0].lastKeyToLoad,m=c.map(function(_){return _.key});return{actions:c,lastKeyToLoad:d,loadedKeys:m}}),function(i){return function(s){return s.lift(new dR(i))}}(function(a){return-1===a.loadedKeys.indexOf(a.lastKeyToLoad)}),(0,ur.U)(function(a){return a.actions}))}(i,oG(i,s).pipe(Vv(function(a,o){return[].concat((0,Gr.Z)(a),[o])},[])),n)}(i,o,n).pipe(ua.iC)},valueChanges:function(o,u){return sG(i,o,n).pipe((0,ur.U)(function(d){return d.map(function(m){return u&&u.idField?Object.assign(Object.assign({},m.payload.val()),(0,ti.Z)({},u.idField,m.key)):m.payload.val()})}),ua.iC)}}}(c,this)}},{key:"object",value:function(r){var a=this;return function(i,s){return{query:i,snapshotChanges:function(){return lG(i,s.schedulers.outsideAngular)().pipe(ua.iC)},update:function(r){return i.ref.update(r)},set:function(r){return i.ref.set(r)},remove:function(){return i.ref.remove()},valueChanges:function(){return lG(i,s.schedulers.outsideAngular)().pipe(ua.iC,(0,ur.U)(function(a){return a.payload.exists()?a.payload.val():null}))}}}(this.schedulers.ngZone.runOutsideAngular(function(){return nG(a.database,r)}),this)}},{key:"createPushId",value:function(){var r=this;return this.schedulers.ngZone.runOutsideAngular(function(){return r.database.ref()}).push().key}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(ku.Dh),v.LFG(ku.xv,8),v.LFG(Q7,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(ua.HU),v.LFG(J7,8),v.LFG(Kh,8),v.LFG(Xp,8),v.LFG(nw,8),v.LFG(bD,8),v.LFG(wD,8),v.LFG(kD,8),v.LFG(ZT,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i}(),eK=function(){var i=function s(){(0,M.Z)(this,s),yD.Z.registerVersion("angularfire",ua.q4.full,"rtdb-compat")};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[cG]}),i}(),Wc=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._value=r,a}return(0,D.Z)(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"_subscribe",this).call(this,a);return o&&!o.closed&&a.next(this._value),o}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new vD.N;return this._value}},{key:"next",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"next",this).call(this,this._value=a)}}]),n}(Er.xQ);function _m(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return n.length?n.some(function(a){return i[a]}):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}var lu=J(6599);function $2(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo.P;return function(n){return n.lift(new hK(i,s))}}var hK=function(){function i(s,n){(0,M.Z)(this,i),this.dueTime=s,this.scheduler=n}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new dK(n,this.dueTime,this.scheduler))}}]),i}(),dK=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).dueTime=a,u.scheduler=o,u.debouncedSubscription=null,u.lastValue=null,u.hasValue=!1,u}return(0,D.Z)(n,[{key:"_next",value:function(a){this.clearDebounce(),this.lastValue=a,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(vK,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var a=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(a)}}},{key:"clearDebounce",value:function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)}}]),n}(ss.L);function vK(i){i.debouncedNext()}var mK=function(){function i(s){(0,M.Z)(this,i),this.total=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new gK(n,this.total))}}]),i}(),gK=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).total=a,o.count=0,o}return(0,D.Z)(n,[{key:"_next",value:function(a){++this.count>this.total&&this.destination.next(a)}}]),n}(ss.L);function $s(i){return function(s){return s.lift(new yK(i))}}var X2,yK=function(){function i(s){(0,M.Z)(this,i),this.notifier=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){var a=new _K(n),o=(0,Yl.ft)(this.notifier,new Yl.IY(a));return o&&!a.seenValue?(a.add(o),r.subscribe(a)):a}}]),i}(),_K=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).seenValue=!1,a}return(0,D.Z)(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(Yl.Ds);function Gi(i){return null!=i&&"false"!=="".concat(i)}function hG(i){return Array.isArray(i)?i:[i]}function co(i){return null==i?"":"string"==typeof i?i:"".concat(i,"px")}function a_(i){return i instanceof v.SBq?i.nativeElement:i}try{X2="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){X2=!1}var zM,s_,Q2,Fs=function(){var i=function s(n){(0,M.Z)(this,s),this._platformId=n,this.isBrowser=this._platformId?function(i){return"browser"===i}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!X2)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT};return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.Lbi))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(v.Lbi))},token:i,providedIn:"root"}),i}(),HM=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}();function aP(i){return function(){if(null==zM&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return zM=!0}}))}finally{zM=zM||!1}return zM}()?i:!!i.capture}function vG(){if(null==s_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return s_=!1;if("scrollBehavior"in document.documentElement.style)s_=!0;else{var i=Element.prototype.scrollTo;s_=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return s_}function EK(i){if(function(){if(null==Q2){var i="undefined"!=typeof document?document.head:null;Q2=!(!i||!i.createShadowRoot&&!i.attachShadow)}return Q2}()){var s=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&s instanceof ShadowRoot)return s}return null}function Iw(i){return i.composedPath?i.composedPath()[0]:i.target}var wm="undefined"!=typeof window?window:{};function J2(){return void 0!==wm.__karma__&&!!wm.__karma__||void 0!==wm.jasmine&&!!wm.jasmine||void 0!==wm.jest&&!!wm.jest||void 0!==wm.Mocha&&!!wm.Mocha}var tB=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.apply(this,arguments))._origin="program",r}return(0,D.Z)(n,[{key:"setFocusOrigin",value:function(a){return this._origin=a,this}},{key:"setActiveItem",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"setActiveItem",this).call(this,a),this.activeItem&&this.activeItem.focus(this._origin)}}]),n}(function(){function i(s){var n=this;(0,M.Z)(this,i),this._items=s,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Er.xQ,this._typeaheadSubscription=Yo.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=function(r){return r.disabled},this._pressedLetters=[],this.tabOut=new Er.xQ,this.change=new Er.xQ,s instanceof v.n_E&&s.changes.subscribe(function(r){if(n._activeItem){var o=r.toArray().indexOf(n._activeItem);o>-1&&o!==n._activeItemIndex&&(n._activeItemIndex=o)}})}return(0,D.Z)(i,[{key:"skipPredicate",value:function(n){return this._skipPredicateFn=n,this}},{key:"withWrap",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=n,this}},{key:"withVerticalOrientation",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=n,this}},{key:"withHorizontalOrientation",value:function(n){return this._horizontal=n,this}},{key:"withAllowedModifierKeys",value:function(n){return this._allowedModifierKeys=n,this}},{key:"withTypeAhead",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,lu.b)(function(a){return n._pressedLetters.push(a)}),$2(r),Ji(function(){return n._pressedLetters.length>0}),(0,ur.U)(function(){return n._pressedLetters.join("")})).subscribe(function(a){for(var o=n._getItemsArray(),u=1;u<o.length+1;u++){var c=(n._activeItemIndex+u)%o.length,d=o[c];if(!n._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(a)){n.setActiveItem(c);break}}n._pressedLetters=[]}),this}},{key:"withHomeAndEnd",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._homeAndEnd=n,this}},{key:"setActiveItem",value:function(n){var r=this._activeItem;this.updateActiveItem(n),this._activeItem!==r&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(n){var r=this,a=n.keyCode,u=["altKey","ctrlKey","metaKey","shiftKey"].every(function(c){return!n[c]||r._allowedModifierKeys.indexOf(c)>-1});switch(a){case 9:return void this.tabOut.next();case 40:if(this._vertical&&u){this.setNextItemActive();break}return;case 38:if(this._vertical&&u){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&u){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&u){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&u){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&u){this.setLastItemActive();break}return;default:return void((u||_m(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(a>=65&&a<=90||a>=48&&a<=57)&&this._letterKeyStream.next(String.fromCharCode(a))))}this._pressedLetters=[],n.preventDefault()}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}},{key:"isTyping",value:function(){return this._pressedLetters.length>0}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(n){var r=this._getItemsArray(),a="number"==typeof n?n:r.indexOf(n),o=r[a];this._activeItem=null==o?null:o,this._activeItemIndex=a}},{key:"_setActiveItemByDelta",value:function(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}},{key:"_setActiveInWrapMode",value:function(n){for(var r=this._getItemsArray(),a=1;a<=r.length;a++){var o=(this._activeItemIndex+n*a+r.length)%r.length;if(!this._skipPredicateFn(r[o]))return void this.setActiveItem(o)}}},{key:"_setActiveInDefaultMode",value:function(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}},{key:"_setActiveItemByIndex",value:function(n,r){var a=this._getItemsArray();if(a[n]){for(;this._skipPredicateFn(a[n]);)if(!a[n+=r])return;this.setActiveItem(n)}}},{key:"_getItemsArray",value:function(){return this._items instanceof v.n_E?this._items.toArray():this._items}}]),i}());function nB(i){return 0===i.offsetX&&0===i.offsetY}function rB(i){var s=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!s||-1!==s.identifier||null!=s.radiusX&&1!==s.radiusX||null!=s.radiusY&&1!==s.radiusY)}"undefined"!=typeof Element&&Element;var kG=new v.OlP("cdk-input-modality-detector-options"),zK={ignoreKeys:[18,17,224,91,16]},Dw=aP({passive:!0,capture:!0}),CG=function(){var i=function(){function s(n,r,a,o){var u=this;(0,M.Z)(this,s),this._platform=n,this._mostRecentTarget=null,this._modality=new Wc(null),this._lastTouchMs=0,this._onKeydown=function(c){var d,m;(null===(m=null===(d=u._options)||void 0===d?void 0:d.ignoreKeys)||void 0===m?void 0:m.some(function(_){return _===c.keyCode}))||(u._modality.next("keyboard"),u._mostRecentTarget=Iw(c))},this._onMousedown=function(c){Date.now()-u._lastTouchMs<650||(u._modality.next(nB(c)?"keyboard":"mouse"),u._mostRecentTarget=Iw(c))},this._onTouchstart=function(c){rB(c)?u._modality.next("keyboard"):(u._lastTouchMs=Date.now(),u._modality.next("touch"),u._mostRecentTarget=Iw(c))},this._options=Object.assign(Object.assign({},zK),o),this.modalityDetected=this._modality.pipe(function(s){return s.lift(new mK(1))}),this.modalityChanged=this.modalityDetected.pipe(mh()),n.isBrowser&&r.runOutsideAngular(function(){a.addEventListener("keydown",u._onKeydown,Dw),a.addEventListener("mousedown",u._onMousedown,Dw),a.addEventListener("touchstart",u._onTouchstart,Dw)})}return(0,D.Z)(s,[{key:"mostRecentModality",get:function(){return this._modality.value}},{key:"ngOnDestroy",value:function(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Dw),document.removeEventListener("mousedown",this._onMousedown,Dw),document.removeEventListener("touchstart",this._onTouchstart,Dw))}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Fs),v.LFG(v.R0b),v.LFG(fe),v.LFG(kG,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Fs),v.LFG(v.R0b),v.LFG(fe),v.LFG(kG,8))},token:i,providedIn:"root"}),i}(),MG=new v.OlP("cdk-focus-monitor-default-options"),oP=aP({passive:!0,capture:!0}),km=function(){var i=function(){function s(n,r,a,o,u){var c=this;(0,M.Z)(this,s),this._ngZone=n,this._platform=r,this._inputModalityDetector=a,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=function(){c._windowFocused=!0,c._windowFocusTimeoutId=setTimeout(function(){return c._windowFocused=!1})},this._stopInputModalityDetector=new Er.xQ,this._rootNodeFocusAndBlurListener=function(d){for(var m=Iw(d),_="focus"===d.type?c._onFocus:c._onBlur,b=m;b;b=b.parentElement)_.call(c,d,b)},this._document=o,this._detectionMode=(null==u?void 0:u.detectionMode)||0}return(0,D.Z)(s,[{key:"monitor",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=a_(r);if(!this._platform.isBrowser||1!==o.nodeType)return(0,tr.of)(null);var u=EK(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return a&&(c.checkChildren=!0),c.subject;var d={checkChildren:a,subject:new Er.xQ,rootNode:u};return this._elementInfo.set(o,d),this._registerGlobalListeners(d),d.subject}},{key:"stopMonitoring",value:function(r){var a=a_(r),o=this._elementInfo.get(a);o&&(o.subject.complete(),this._setClasses(a),this._elementInfo.delete(a),this._removeGlobalListeners(o))}},{key:"focusVia",value:function(r,a,o){var u=this,c=a_(r);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(function(m){var _=(0,ke.Z)(m,2);return u._originChanged(_[0],a,_[1])}):(this._setOrigin(a),"function"==typeof c.focus&&c.focus(o))}},{key:"ngOnDestroy",value:function(){var r=this;this._elementInfo.forEach(function(a,o){return r.stopMonitoring(o)})}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(r,a,o){o?r.classList.add(a):r.classList.remove(a)}},{key:"_getFocusOrigin",value:function(r){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(r)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}},{key:"_shouldBeAttributedToTouch",value:function(r){return 1===this._detectionMode||!!(null==r?void 0:r.contains(this._inputModalityDetector._mostRecentTarget))}},{key:"_setClasses",value:function(r,a){this._toggleClass(r,"cdk-focused",!!a),this._toggleClass(r,"cdk-touch-focused","touch"===a),this._toggleClass(r,"cdk-keyboard-focused","keyboard"===a),this._toggleClass(r,"cdk-mouse-focused","mouse"===a),this._toggleClass(r,"cdk-program-focused","program"===a)}},{key:"_setOrigin",value:function(r){var a=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._ngZone.runOutsideAngular(function(){a._origin=r,a._originFromTouchInteraction="touch"===r&&o,0===a._detectionMode&&(clearTimeout(a._originTimeoutId),a._originTimeoutId=setTimeout(function(){return a._origin=null},a._originFromTouchInteraction?650:1))})}},{key:"_onFocus",value:function(r,a){var o=this._elementInfo.get(a),u=Iw(r);!o||!o.checkChildren&&a!==u||this._originChanged(a,this._getFocusOrigin(u),o)}},{key:"_onBlur",value:function(r,a){var o=this._elementInfo.get(a);!o||o.checkChildren&&r.relatedTarget instanceof Node&&a.contains(r.relatedTarget)||(this._setClasses(a),this._emitOrigin(o.subject,null))}},{key:"_emitOrigin",value:function(r,a){this._ngZone.run(function(){return r.next(a)})}},{key:"_registerGlobalListeners",value:function(r){var a=this;if(this._platform.isBrowser){var o=r.rootNode,u=this._rootNodeFocusListenerCount.get(o)||0;u||this._ngZone.runOutsideAngular(function(){o.addEventListener("focus",a._rootNodeFocusAndBlurListener,oP),o.addEventListener("blur",a._rootNodeFocusAndBlurListener,oP)}),this._rootNodeFocusListenerCount.set(o,u+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(function(){a._getWindow().addEventListener("focus",a._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe($s(this._stopInputModalityDetector)).subscribe(function(c){a._setOrigin(c,!0)}))}}},{key:"_removeGlobalListeners",value:function(r){var a=r.rootNode;if(this._rootNodeFocusListenerCount.has(a)){var o=this._rootNodeFocusListenerCount.get(a);o>1?this._rootNodeFocusListenerCount.set(a,o-1):(a.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oP),a.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oP),this._rootNodeFocusListenerCount.delete(a))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}},{key:"_originChanged",value:function(r,a,o){this._setClasses(r,a),this._emitOrigin(o.subject,a),this._lastFocusOrigin=a}},{key:"_getClosestElementsInfo",value:function(r){var a=[];return this._elementInfo.forEach(function(o,u){(u===r||o.checkChildren&&u.contains(r))&&a.push([u,o])}),a}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.R0b),v.LFG(Fs),v.LFG(CG),v.LFG(fe,8),v.LFG(MG,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(v.R0b),v.LFG(Fs),v.LFG(CG),v.LFG(fe,8),v.LFG(MG,8))},token:i,providedIn:"root"}),i}(),AG="cdk-high-contrast-black-on-white",xG="cdk-high-contrast-white-on-black",iB="cdk-high-contrast-active",IG=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this._platform=n,this._document=r}return(0,D.Z)(s,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);var a=this._document.defaultView||window,o=a&&a.getComputedStyle?a.getComputedStyle(r):null,u=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(r),u){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){var r=this._document.body.classList;r.remove(iB),r.remove(AG),r.remove(xG),this._hasCheckedHighContrastMode=!0;var a=this.getHighContrastMode();1===a?(r.add(iB),r.add(AG)):2===a&&(r.add(iB),r.add(xG))}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Fs),v.LFG(fe))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Fs),v.LFG(fe))},token:i,providedIn:"root"}),i}(),DG=new v.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,v.f3M)(fe)}}),o_=function(){var i=function(){function s(n){if((0,M.Z)(this,s),this.value="ltr",this.change=new v.vpe,n){var o=(n.body?n.body.dir:null)||(n.documentElement?n.documentElement.dir:null);this.value="ltr"===o||"rtl"===o?o:"ltr"}}return(0,D.Z)(s,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(DG,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(DG,8))},token:i,providedIn:"root"}),i}(),jM=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),RG=new v.GfV("12.2.8"),PG=new v.GfV("12.2.8"),JK=new v.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),ks=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._hasDoneGlobalChecks=!1,this._document=a,n._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return(0,D.Z)(s,[{key:"_checkIsEnabled",value:function(r){return!(!(0,v.X6Q)()||J2())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[r])}},{key:"_checkDoctypeIsDefined",value:function(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._checkIsEnabled("theme")&&this._document.body&&"function"==typeof getComputedStyle){var r=this._document.createElement("div");r.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(r);var a=getComputedStyle(r);a&&"none"!==a.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(r)}}},{key:"_checkCdkVersionMatch",value:function(){this._checkIsEnabled("version")&&PG.full!==RG.full&&console.warn("The Angular Material version ("+PG.full+") does not match the Angular CDK version ("+RG.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(IG),v.LFG(JK,8),v.LFG(fe))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[jM],jM]}),i}();function uP(i){return function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(){var a;(0,M.Z)(this,r);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return(a=n.call.apply(n,[this].concat(u)))._disabled=!1,a}return(0,D.Z)(r,[{key:"disabled",get:function(){return this._disabled},set:function(o){this._disabled=Gi(o)}}]),r}(i)}function aB(i,s){return function(n){(0,S.Z)(a,n);var r=(0,re.Z)(a);function a(){var o;(0,M.Z)(this,a);for(var u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return(o=r.call.apply(r,[this].concat(c))).defaultColor=s,o.color=s,o}return(0,D.Z)(a,[{key:"color",get:function(){return this._color},set:function(u){var c=u||this.defaultColor;c!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),c&&this._elementRef.nativeElement.classList.add("mat-".concat(c)),this._color=c)}}]),a}(i)}function Rw(i){return function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(){var a;(0,M.Z)(this,r);for(var o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];return(a=n.call.apply(n,[this].concat(u)))._disableRipple=!1,a}return(0,D.Z)(r,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(o){this._disableRipple=Gi(o)}}]),r}(i)}var FG=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ks],ks]}),i}(),d9=function(){function i(s,n,r){(0,M.Z)(this,i),this._renderer=s,this.element=n,this.config=r,this.state=3}return(0,D.Z)(i,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),i}(),ZG={enterDuration:225,exitDuration:150},sB=aP({passive:!0}),BG=["mousedown","touchstart"],UG=["mouseup","mouseleave","touchend","touchcancel"],p9=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._target=s,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=a_(r))}return(0,D.Z)(i,[{key:"fadeInRipple",value:function(n,r){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Object.assign(Object.assign({},ZG),o.animation);o.centered&&(n=u.left+u.width/2,r=u.top+u.height/2);var d=o.radius||g9(n,r,u),m=n-u.left,_=r-u.top,b=c.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left="".concat(m-d,"px"),E.style.top="".concat(_-d,"px"),E.style.height="".concat(2*d,"px"),E.style.width="".concat(2*d,"px"),null!=o.color&&(E.style.backgroundColor=o.color),E.style.transitionDuration="".concat(b,"ms"),this._containerElement.appendChild(E),m9(E),E.style.transform="scale(1)";var T=new d9(this,E,o);return T.state=0,this._activeRipples.add(T),o.persistent||(this._mostRecentTransientRipple=T),this._runTimeoutOutsideZone(function(){var I=T===a._mostRecentTransientRipple;T.state=1,!o.persistent&&(!I||!a._isPointerDown)&&T.fadeOut()},b),T}},{key:"fadeOutRipple",value:function(n){var r=this._activeRipples.delete(n);if(n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),r){var a=n.element,o=Object.assign(Object.assign({},ZG),n.config.animation);a.style.transitionDuration="".concat(o.exitDuration,"ms"),a.style.opacity="0",n.state=2,this._runTimeoutOutsideZone(function(){n.state=3,a.parentNode.removeChild(a)},o.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach(function(n){return n.fadeOut()})}},{key:"fadeOutAllNonPersistent",value:function(){this._activeRipples.forEach(function(n){n.config.persistent||n.fadeOut()})}},{key:"setupTriggerEvents",value:function(n){var r=a_(n);!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,this._registerEvents(BG))}},{key:"handleEvent",value:function(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(UG),this._pointerUpEventsRegistered=!0)}},{key:"_onMousedown",value:function(n){var r=nB(n),a=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!r&&!a&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}},{key:"_onTouchStart",value:function(n){if(!this._target.rippleDisabled&&!rB(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;for(var r=n.changedTouches,a=0;a<r.length;a++)this.fadeInRipple(r[a].clientX,r[a].clientY,this._target.rippleConfig)}}},{key:"_onPointerUp",value:function(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(function(n){!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}},{key:"_runTimeoutOutsideZone",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular(function(){return setTimeout(n,r)})}},{key:"_registerEvents",value:function(n){var r=this;this._ngZone.runOutsideAngular(function(){n.forEach(function(a){r._triggerElement.addEventListener(a,r,sB)})})}},{key:"_removeTriggerEvents",value:function(){var n=this;this._triggerElement&&(BG.forEach(function(r){n._triggerElement.removeEventListener(r,n,sB)}),this._pointerUpEventsRegistered&&UG.forEach(function(r){n._triggerElement.removeEventListener(r,n,sB)}))}}]),i}();function m9(i){window.getComputedStyle(i).getPropertyValue("opacity")}function g9(i,s,n){var r=Math.max(Math.abs(i-n.left),Math.abs(i-n.right)),a=Math.max(Math.abs(s-n.top),Math.abs(s-n.bottom));return Math.sqrt(r*r+a*a)}var y9=new v.OlP("mat-ripple-global-options"),l_=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this._elementRef=n,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new p9(this,r,n,a)}return(0,D.Z)(s,[{key:"disabled",get:function(){return this._disabled},set:function(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}},{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"fadeOutAllNonPersistent",value:function(){this._rippleRenderer.fadeOutAllNonPersistent()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;return"number"==typeof r?this._rippleRenderer.fadeInRipple(r,a,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),r))}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(v.R0b),v.Y36(Fs),v.Y36(y9,8),v.Y36(iu,8))},i.\u0275dir=v.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){2&n&&v.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),i}(),cP=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ks,HM],ks]}),i}(),oB=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ks]]}),i}(),C9=["*",[["mat-card-footer"]]],S9=["*","mat-card-footer"],T9=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],M9=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],I9=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),i}(),uB=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),i}(),lB=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),i}(),jG=function(){var i=function s(){(0,M.Z)(this,s),this.align="start"};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(n,r){2&n&&v.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),i}(),WG=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),i}(),qG=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),i}(),cB=function(){var i=function s(n){(0,M.Z)(this,s),this._animationMode=n};return i.\u0275fac=function(n){return new(n||i)(v.Y36(iu,8))},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(n,r){2&n&&v.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:S9,decls:2,vars:0,template:function(n,r){1&n&&(v.F$t(C9),v.Hsn(0),v.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),i}(),fB=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:M9,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(n,r){1&n&&(v.F$t(T9),v.Hsn(0),v.TgZ(1,"div",0),v.Hsn(2,1),v.qZA(),v.Hsn(3,2))},encapsulation:2,changeDetection:0}),i}(),D9=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ks],ks]}),i}(),YG=["mat-button",""],KG=["*"],$G=".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n",P9=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],O9=aB(uP(Rw(function(){return function i(s){(0,M.Z)(this,i),this._elementRef=s}}()))),hB=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o,u){var c;(0,M.Z)(this,r),(c=n.call(this,a))._focusMonitor=o,c._animationMode=u,c.isRoundButton=c._hasHostAttributes("mat-fab","mat-mini-fab"),c.isIconButton=c._hasHostAttributes("mat-icon-button");var m,d=(0,Re.Z)(P9);try{for(d.s();!(m=d.n()).done;){var _=m.value;c._hasHostAttributes(_)&&c._getHostElement().classList.add(_)}}catch(b){d.e(b)}finally{d.f()}return a.nativeElement.classList.add("mat-button-base"),c.isRoundButton&&(c.color="accent"),c}return(0,D.Z)(r,[{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(o,u){o?this._focusMonitor.focusVia(this._getHostElement(),o,u):this._getHostElement().focus(u)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var o=this,u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return c.some(function(m){return o._getHostElement().hasAttribute(m)})}}]),r}(O9);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(km),v.Y36(iu,8))},i.\u0275cmp=v.Xpm({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,r){var a;1&n&&v.Gf(l_,5),2&n&&v.iGM(a=v.CRH())&&(r.ripple=a.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,r){2&n&&(v.uIk("disabled",r.disabled||null),v.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[v.qOj],attrs:YG,ngContentSelectors:KG,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,r){1&n&&(v.F$t(),v.TgZ(0,"span",0),v.Hsn(1),v.qZA(),v._UZ(2,"span",1),v._UZ(3,"span",2)),2&n&&(v.xp6(2),v.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),v.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[l_],styles:[$G],encapsulation:2,changeDetection:0}),i}(),XG=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o,u){return(0,M.Z)(this,r),n.call(this,o,a,u)}return(0,D.Z)(r,[{key:"_haltDisabledEvents",value:function(o){this.disabled&&(o.preventDefault(),o.stopImmediatePropagation())}}]),r}(hB);return i.\u0275fac=function(n){return new(n||i)(v.Y36(km),v.Y36(v.SBq),v.Y36(iu,8))},i.\u0275cmp=v.Xpm({type:i,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(n,r){1&n&&v.NdJ("click",function(o){return r._haltDisabledEvents(o)}),2&n&&(v.uIk("tabindex",r.disabled?-1:r.tabIndex||0)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString()),v.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[v.qOj],attrs:YG,ngContentSelectors:KG,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,r){1&n&&(v.F$t(),v.TgZ(0,"span",0),v.Hsn(1),v.qZA(),v._UZ(2,"span",1),v._UZ(3,"span",2)),2&n&&(v.xp6(2),v.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),v.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[l_],styles:[$G],encapsulation:2,changeDetection:0}),i}(),L9=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[cP,ks],ks]}),i}(),N9=["*",[["mat-toolbar-row"]]],F9=["*","mat-toolbar-row"],Z9=aB(function(){return function i(s){(0,M.Z)(this,i),this._elementRef=s}}()),QG=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i}(),B9=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o,u){var c;return(0,M.Z)(this,r),(c=n.call(this,a))._platform=o,c._document=u,c}return(0,D.Z)(r,[{key:"ngAfterViewInit",value:function(){var o=this;this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(function(){return o._checkToolbarMixedModes()}))}},{key:"_checkToolbarMixedModes",value:function(){}}]),r}(Z9);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(Fs),v.Y36(fe))},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-toolbar"]],contentQueries:function(n,r,a){var o;1&n&&v.Suo(a,QG,5),2&n&&v.iGM(o=v.CRH())&&(r._toolbarRows=o)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(n,r){2&n&&v.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[v.qOj],ngContentSelectors:F9,decls:2,vars:0,template:function(n,r){1&n&&(v.F$t(N9),v.Hsn(0),v.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),i}(),U9=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ks],ks]}),i}(),dB=J(2709);function V9(i){return i instanceof Date&&!isNaN(+i)}var JG=J(3103);function ej(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo.P,n=V9(i),r=n?+i-s.now():Math.abs(i);return function(a){return a.lift(new H9(r,s))}}var H9=function(){function i(s,n){(0,M.Z)(this,i),this.delay=s,this.scheduler=n}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new z9(n,this.delay,this.scheduler))}}]),i}(),z9=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).delay=a,u.scheduler=o,u.queue=[],u.active=!1,u.errored=!1,u}return(0,D.Z)(n,[{key:"_schedule",value:function(a){this.active=!0,this.destination.add(a.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))}},{key:"scheduleNotification",value:function(a){if(!0!==this.errored){var o=this.scheduler,u=new G9(o.now()+this.delay,a);this.queue.push(u),!1===this.active&&this._schedule(o)}}},{key:"_next",value:function(a){this.scheduleNotification(JG.P.createNext(a))}},{key:"_error",value:function(a){this.errored=!0,this.queue=[],this.destination.error(a),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(JG.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(a){for(var o=a.source,u=o.queue,c=a.scheduler,d=a.destination;u.length>0&&u[0].time-c.now()<=0;)u.shift().notification.observe(d);if(u.length>0){var m=Math.max(0,u[0].time-c.now());this.schedule(a,m)}else this.unsubscribe(),o.active=!1}}]),n}(ss.L),G9=function i(s,n){(0,M.Z)(this,i),this.time=s,this.notification=n},vB=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"attach",value:function(n){return this._attachedHost=n,n.attach(this)}},{key:"detach",value:function(){var n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(n){this._attachedHost=n}}]),i}(),j9=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this)).component=r,c.viewContainerRef=a,c.injector=o,c.componentFactoryResolver=u,c}return n}(vB),Pw=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).templateRef=r,u.viewContainerRef=a,u.context=o,u}return(0,D.Z)(n,[{key:"origin",get:function(){return this.templateRef.elementRef}},{key:"attach",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=o,(0,_e.Z)((0,de.Z)(n.prototype),"attach",this).call(this,a)}},{key:"detach",value:function(){return this.context=void 0,(0,_e.Z)((0,de.Z)(n.prototype),"detach",this).call(this)}}]),n}(vB),W9=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).element=r instanceof v.SBq?r.nativeElement:r,a}return n}(vB),nj=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c){var d,m;return(0,M.Z)(this,n),(m=s.call(this)).outletElement=r,m._componentFactoryResolver=a,m._appRef=o,m._defaultInjector=u,m.attachDomPortal=function(_){var b=_.element,E=m._document.createComment("dom-portal");b.parentNode.insertBefore(E,b),m.outletElement.appendChild(b),m._attachedPortal=_,(0,_e.Z)((d=(0,wa.Z)(m),(0,de.Z)(n.prototype)),"setDisposeFn",d).call(d,function(){E.parentNode&&E.parentNode.replaceChild(b,E)})},m._document=c,m}return(0,D.Z)(n,[{key:"attachComponentPortal",value:function(a){var d,o=this,c=(a.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(a.component);return a.viewContainerRef?(d=a.viewContainerRef.createComponent(c,a.viewContainerRef.length,a.injector||a.viewContainerRef.injector),this.setDisposeFn(function(){return d.destroy()})):(d=c.create(a.injector||this._defaultInjector),this._appRef.attachView(d.hostView),this.setDisposeFn(function(){o._appRef.detachView(d.hostView),d.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(d)),this._attachedPortal=a,d}},{key:"attachTemplatePortal",value:function(a){var o=this,u=a.viewContainerRef,c=u.createEmbeddedView(a.templateRef,a.context);return c.rootNodes.forEach(function(d){return o.outletElement.appendChild(d)}),c.detectChanges(),this.setDisposeFn(function(){var d=u.indexOf(c);-1!==d&&u.remove(d)}),this._attachedPortal=a,c}},{key:"dispose",value:function(){(0,_e.Z)((0,de.Z)(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(a){return a.hostView.rootNodes[0]}}]),n}(function(){function i(){(0,M.Z)(this,i),this._isDisposed=!1,this.attachDomPortal=null}return(0,D.Z)(i,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(n){return n instanceof j9?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof Pw?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof W9?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(n){this._disposeFn=n}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),i}()),ij=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),q9=J(5024);function fP(i,s,n,r){return(0,q9.m)(n)&&(r=n,n=void 0),r?fP(i,s,n).pipe((0,ur.U)(function(a){return(0,Jp.k)(a)?r.apply(void 0,(0,Gr.Z)(a)):r(a)})):new ms.y(function(a){aj(i,s,function(u){a.next(arguments.length>1?Array.prototype.slice.call(arguments):u)},a,n)})}function aj(i,s,n,r,a){var o;if(function(i){return i&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener}(i)){var u=i;i.addEventListener(s,n,a),o=function(){return u.removeEventListener(s,n,a)}}else if(function(i){return i&&"function"==typeof i.on&&"function"==typeof i.off}(i)){var c=i;i.on(s,n),o=function(){return c.off(s,n)}}else if(function(i){return i&&"function"==typeof i.addListener&&"function"==typeof i.removeListener}(i)){var d=i;i.addListener(s,n),o=function(){return d.removeListener(s,n)}}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(var m=0,_=i.length;m<_;m++)aj(i[m],s,n,r,a)}r.add(o)}J(8277);function n$(i){return function(n){return n.lift(new r$(i))}}var r$=function(){function i(s){(0,M.Z)(this,i),this.durationSelector=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new i$(n,this.durationSelector))}}]),i}(),i$=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).durationSelector=a,o.hasValue=!1,o}return(0,D.Z)(n,[{key:"_next",value:function(a){if(this.value=a,this.hasValue=!0,!this.throttled){var o;try{o=(0,this.durationSelector)(a)}catch(d){return this.destination.error(d)}var c=(0,Yl.ft)(o,new Yl.IY(this));!c||c.closed?this.clearThrottle():this.add(this.throttled=c)}}},{key:"clearThrottle",value:function(){var a=this.value,o=this.hasValue,u=this.throttled;u&&(this.remove(u),this.throttled=void 0,u.unsubscribe()),o&&(this.value=void 0,this.hasValue=!1,this.destination.next(a))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(Yl.Ds),oj=J(2293);function a$(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return(0,oj.k)(s)?r=Number(s)<1?1:Number(s):(0,a0.K)(s)&&(n=s),(0,a0.K)(n)||(n=bo.P),new ms.y(function(a){var o=(0,oj.k)(i)?i:+i-n.now();return n.schedule(s$,o,{index:0,period:r,subscriber:a})})}function s$(i){var s=i.index,n=i.period,r=i.subscriber;if(r.next(s),!r.closed){if(-1===n)return r.complete();i.index=s+1,this.schedule(i,n)}}function mB(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bo.P;return n$(function(){return a$(i,s)})}var Ow=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._ngZone=n,this._platform=r,this._scrolled=new Er.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}return(0,D.Z)(s,[{key:"register",value:function(r){var a=this;this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(function(){return a._scrolled.next(r)}))}},{key:"deregister",value:function(r){var a=this.scrollContainers.get(r);a&&(a.unsubscribe(),this.scrollContainers.delete(r))}},{key:"scrolled",value:function(){var r=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new ms.y(function(o){r._globalSubscription||r._addGlobalListener();var u=a>0?r._scrolled.pipe(mB(a)).subscribe(o):r._scrolled.subscribe(o);return r._scrolledCount++,function(){u.unsubscribe(),r._scrolledCount--,r._scrolledCount||r._removeGlobalListener()}}):(0,tr.of)()}},{key:"ngOnDestroy",value:function(){var r=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(a,o){return r.deregister(o)}),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(r,a){var o=this.getAncestorScrollContainers(r);return this.scrolled(a).pipe(Ji(function(u){return!u||o.indexOf(u)>-1}))}},{key:"getAncestorScrollContainers",value:function(r){var a=this,o=[];return this.scrollContainers.forEach(function(u,c){a._scrollableContainsElement(c,r)&&o.push(c)}),o}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_scrollableContainsElement",value:function(r,a){var o=a_(a),u=r.getElementRef().nativeElement;do{if(o==u)return!0}while(o=o.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var r=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return fP(r._getWindow().document,"scroll").subscribe(function(){return r._scrolled.next()})})}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.R0b),v.LFG(Fs),v.LFG(fe,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(v.R0b),v.LFG(Fs),v.LFG(fe,8))},token:i,providedIn:"root"}),i}(),Nw=function(){var i=function(){function s(n,r,a){var o=this;(0,M.Z)(this,s),this._platform=n,this._change=new Er.xQ,this._changeListener=function(u){o._change.next(u)},this._document=a,r.runOutsideAngular(function(){if(n.isBrowser){var u=o._getWindow();u.addEventListener("resize",o._changeListener),u.addEventListener("orientationchange",o._changeListener)}o.change().subscribe(function(){return o._viewportSize=null})})}return(0,D.Z)(s,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}},{key:"getViewportRect",value:function(){var r=this.getViewportScrollPosition(),a=this.getViewportSize(),o=a.width,u=a.height;return{top:r.top,left:r.left,bottom:r.top+u,right:r.left+o,height:u,width:o}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var r=this._document,a=this._getWindow(),o=r.documentElement,u=o.getBoundingClientRect();return{top:-u.top||r.body.scrollTop||a.scrollY||o.scrollTop||0,left:-u.left||r.body.scrollLeft||a.scrollX||o.scrollLeft||0}}},{key:"change",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return r>0?this._change.pipe(mB(r)):this._change}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_updateViewportSize",value:function(){var r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Fs),v.LFG(v.R0b),v.LFG(fe,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Fs),v.LFG(v.R0b),v.LFG(fe,8))},token:i,providedIn:"root"}),i}(),qM=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),dj=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[jM,HM,qM],jM,qM]}),i}(),vj=vG(),E$=function(){function i(s,n){(0,M.Z)(this,i),this._viewportRuler=s,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return(0,D.Z)(i,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=co(-this._previousScrollPosition.left),n.style.top=co(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var n=this._document.documentElement,a=n.style,o=this._document.body.style,u=a.scrollBehavior||"",c=o.scrollBehavior||"";this._isEnabled=!1,a.left=this._previousHTMLStyles.left,a.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),vj&&(a.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),vj&&(a.scrollBehavior=u,o.scrollBehavior=c)}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var r=this._document.body,a=this._viewportRuler.getViewportSize();return r.scrollHeight>a.height||r.scrollWidth>a.width}}]),i}(),C$=function(){function i(s,n,r,a){var o=this;(0,M.Z)(this,i),this._scrollDispatcher=s,this._ngZone=n,this._viewportRuler=r,this._config=a,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run(function(){return o._overlayRef.detach()})}}return(0,D.Z)(i,[{key:"attach",value:function(n){this._overlayRef=n}},{key:"enable",value:function(){var n=this;if(!this._scrollSubscription){var r=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(function(){var a=n._viewportRuler.getViewportScrollPosition().top;Math.abs(a-n._initialScrollPosition)>n._config.threshold?n._detach():n._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),i}(),pj=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),i}();function gB(i,s){return s.some(function(n){return i.bottom<n.top||i.top>n.bottom||i.right<n.left||i.left>n.right})}function mj(i,s){return s.some(function(n){return i.top<n.top||i.bottom>n.bottom||i.left<n.left||i.right>n.right})}var S$=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._scrollDispatcher=s,this._viewportRuler=n,this._ngZone=r,this._config=a,this._scrollSubscription=null}return(0,D.Z)(i,[{key:"attach",value:function(n){this._overlayRef=n}},{key:"enable",value:function(){var n=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(n._overlayRef.updatePosition(),n._config&&n._config.autoClose){var a=n._overlayRef.overlayElement.getBoundingClientRect(),o=n._viewportRuler.getViewportSize(),u=o.width,c=o.height;gB(a,[{width:u,height:c,bottom:c,right:u,top:0,left:0}])&&(n.disable(),n._ngZone.run(function(){return n._overlayRef.detach()}))}}))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),i}(),T$=function(){var i=function s(n,r,a,o){var u=this;(0,M.Z)(this,s),this._scrollDispatcher=n,this._viewportRuler=r,this._ngZone=a,this.noop=function(){return new pj},this.close=function(c){return new C$(u._scrollDispatcher,u._ngZone,u._viewportRuler,c)},this.block=function(){return new E$(u._viewportRuler,u._document)},this.reposition=function(c){return new S$(u._scrollDispatcher,u._viewportRuler,u._ngZone,c)},this._document=o};return i.\u0275fac=function(n){return new(n||i)(v.LFG(Ow),v.LFG(Nw),v.LFG(v.R0b),v.LFG(fe))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Ow),v.LFG(Nw),v.LFG(v.R0b),v.LFG(fe))},token:i,providedIn:"root"}),i}(),yB=function i(s){if((0,M.Z)(this,i),this.scrollStrategy=new pj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,s)for(var r=0,a=Object.keys(s);r<a.length;r++){var o=a[r];void 0!==s[o]&&(this[o]=s[o])}},M$=function i(s,n,r,a,o){(0,M.Z)(this,i),this.offsetX=r,this.offsetY=a,this.panelClass=o,this.originX=s.originX,this.originY=s.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},A$=function i(s,n){(0,M.Z)(this,i),this.connectionPair=s,this.scrollableViewProperties=n},gj=function(){var i=function(){function s(n){(0,M.Z)(this,s),this._attachedOverlays=[],this._document=n}return(0,D.Z)(s,[{key:"ngOnDestroy",value:function(){this.detach()}},{key:"add",value:function(r){this.remove(r),this._attachedOverlays.push(r)}},{key:"remove",value:function(r){var a=this._attachedOverlays.indexOf(r);a>-1&&this._attachedOverlays.splice(a,1),0===this._attachedOverlays.length&&this.detach()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(fe))},token:i,providedIn:"root"}),i}(),x$=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this,a))._keydownListener=function(u){for(var c=o._attachedOverlays,d=c.length-1;d>-1;d--)if(c[d]._keydownEvents.observers.length>0){c[d]._keydownEvents.next(u);break}},o}return(0,D.Z)(r,[{key:"add",value:function(o){(0,_e.Z)((0,de.Z)(r.prototype),"add",this).call(this,o),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}},{key:"detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),r}(gj);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(fe))},token:i,providedIn:"root"}),i}(),I$=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o){var u;return(0,M.Z)(this,r),(u=n.call(this,a))._platform=o,u._cursorStyleIsSet=!1,u._clickListener=function(c){for(var d=Iw(c),m=u._attachedOverlays.slice(),_=m.length-1;_>-1;_--){var b=m[_];if(!(b._outsidePointerEvents.observers.length<1)&&b.hasAttached()){if(b.overlayElement.contains(d))break;b._outsidePointerEvents.next(c)}}},u}return(0,D.Z)(r,[{key:"add",value:function(o){if((0,_e.Z)((0,de.Z)(r.prototype),"add",this).call(this,o),!this._isAttached){var u=this._document.body;u.addEventListener("click",this._clickListener,!0),u.addEventListener("auxclick",this._clickListener,!0),u.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=u.style.cursor,u.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}},{key:"detach",value:function(){if(this._isAttached){var o=this._document.body;o.removeEventListener("click",this._clickListener,!0),o.removeEventListener("auxclick",this._clickListener,!0),o.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(o.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}]),r}(gj);return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe),v.LFG(Fs))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(fe),v.LFG(Fs))},token:i,providedIn:"root"}),i}(),_B=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this._platform=r,this._document=n}return(0,D.Z)(s,[{key:"ngOnDestroy",value:function(){var r=this._containerElement;r&&r.parentNode&&r.parentNode.removeChild(r)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var r="cdk-overlay-container";if(this._platform.isBrowser||J2())for(var a=this._document.querySelectorAll(".".concat(r,'[platform="server"], ')+".".concat(r,'[platform="test"]')),o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);var u=this._document.createElement("div");u.classList.add(r),J2()?u.setAttribute("platform","test"):this._platform.isBrowser||u.setAttribute("platform","server"),this._document.body.appendChild(u),this._containerElement=u}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(fe),v.LFG(Fs))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(fe),v.LFG(Fs))},token:i,providedIn:"root"}),i}(),D$=function(){function i(s,n,r,a,o,u,c,d,m){var _=this;(0,M.Z)(this,i),this._portalOutlet=s,this._host=n,this._pane=r,this._config=a,this._ngZone=o,this._keyboardDispatcher=u,this._document=c,this._location=d,this._outsideClickDispatcher=m,this._backdropElement=null,this._backdropClick=new Er.xQ,this._attachments=new Er.xQ,this._detachments=new Er.xQ,this._locationChanges=Yo.w.EMPTY,this._backdropClickHandler=function(b){return _._backdropClick.next(b)},this._keydownEvents=new Er.xQ,this._outsidePointerEvents=new Er.xQ,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}return(0,D.Z)(i,[{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}},{key:"attach",value:function(n){var r=this,a=this._portalOutlet.attach(n);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ml(1)).subscribe(function(){r.hasAttached()&&r.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(function(){return r.dispose()})),this._outsideClickDispatcher.add(this),a}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}}},{key:"dispose",value:function(){var n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,n&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick}},{key:"attachments",value:function(){return this._attachments}},{key:"detachments",value:function(){return this._detachments}},{key:"keydownEvents",value:function(){return this._keydownEvents}},{key:"outsidePointerEvents",value:function(){return this._outsidePointerEvents}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(n){this._config=Object.assign(Object.assign({},this._config),n),this._updateElementSize()}},{key:"setDirection",value:function(n){this._config=Object.assign(Object.assign({},this._config),{direction:n}),this._updateElementDirection()}},{key:"addPanelClass",value:function(n){this._pane&&this._toggleClasses(this._pane,n,!0)}},{key:"removePanelClass",value:function(n){this._pane&&this._toggleClasses(this._pane,n,!1)}},{key:"getDirection",value:function(){var n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}},{key:"updateScrollStrategy",value:function(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var n=this._pane.style;n.width=co(this._config.width),n.height=co(this._config.height),n.minWidth=co(this._config.minWidth),n.minHeight=co(this._config.minHeight),n.maxWidth=co(this._config.maxWidth),n.maxHeight=co(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(n){this._pane.style.pointerEvents=n?"":"none"}},{key:"_attachBackdrop",value:function(){var n=this,r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){n._backdropElement&&n._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var n=this,r=this._backdropElement;if(r){var a,o=function u(){r&&(r.removeEventListener("click",n._backdropClickHandler),r.removeEventListener("transitionend",u),n._disposeBackdrop(r)),n._config.backdropClass&&n._toggleClasses(r,n._config.backdropClass,!1),clearTimeout(a)};r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(function(){r.addEventListener("transitionend",o)}),r.style.pointerEvents="none",a=this._ngZone.runOutsideAngular(function(){return setTimeout(o,500)})}}},{key:"_toggleClasses",value:function(n,r,a){var o=n.classList;hG(r).forEach(function(u){u&&(a?o.add(u):o.remove(u))})}},{key:"_detachContentWhenStable",value:function(){var n=this;this._ngZone.runOutsideAngular(function(){var r=n._ngZone.onStable.pipe($s((0,qh.T)(n._attachments,n._detachments))).subscribe(function(){(!n._pane||!n._host||0===n._pane.children.length)&&(n._pane&&n._config.panelClass&&n._toggleClasses(n._pane,n._config.panelClass,!1),n._host&&n._host.parentElement&&(n._previousHostParent=n._host.parentElement,n._previousHostParent.removeChild(n._host)),r.unsubscribe())})})}},{key:"_disposeScrollStrategy",value:function(){var n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}},{key:"_disposeBackdrop",value:function(n){n&&(n.parentNode&&n.parentNode.removeChild(n),this._backdropElement===n&&(this._backdropElement=null))}}]),i}(),yj="cdk-overlay-connected-position-bounding-box",R$=/([A-Za-z%]+)$/,_j=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this._viewportRuler=n,this._document=r,this._platform=a,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Er.xQ,this._resizeSubscription=Yo.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(s)}return(0,D.Z)(i,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(n){var r=this;this._validatePositions(),n.hostElement.classList.add(yj),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){r._isInitialRender=!0,r.apply()})}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser){if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var u,d,n=this._originRect,r=this._overlayRect,a=this._viewportRect,o=[],c=(0,Re.Z)(this._preferredPositions);try{for(c.s();!(d=c.n()).done;){var m=d.value,_=this._getOriginPoint(n,m),b=this._getOverlayPoint(_,r,m),E=this._getOverlayFit(b,r,a,m);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(m,_);this._canFitWithFlexibleDimensions(E,b,a)?o.push({position:m,origin:_,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(_,m)}):(!u||u.overlayFit.visibleArea<E.visibleArea)&&(u={overlayFit:E,overlayPoint:b,originPoint:_,position:m,overlayRect:r})}}catch(te){c.e(te)}finally{c.f()}if(o.length){var W,T=null,I=-1,N=(0,Re.Z)(o);try{for(N.s();!(W=N.n()).done;){var U=W.value,H=U.boundingBoxRect.width*U.boundingBoxRect.height*(U.position.weight||1);H>I&&(I=H,T=U)}}catch(te){N.e(te)}finally{N.f()}return this._isPushed=!1,void this._applyPosition(T.position,T.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&c_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(yj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var n=this._lastPosition||this._preferredPositions[0],r=this._getOriginPoint(this._originRect,n);this._applyPosition(n,r)}}},{key:"withScrollableContainers",value:function(n){return this._scrollables=n,this}},{key:"withPositions",value:function(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(n){return this._viewportMargin=n,this}},{key:"withFlexibleDimensions",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=n,this}},{key:"withGrowAfterOpen",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=n,this}},{key:"withPush",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=n,this}},{key:"withLockedPosition",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=n,this}},{key:"setOrigin",value:function(n){return this._origin=n,this}},{key:"withDefaultOffsetX",value:function(n){return this._offsetX=n,this}},{key:"withDefaultOffsetY",value:function(n){return this._offsetY=n,this}},{key:"withTransformOriginOn",value:function(n){return this._transformOriginSelector=n,this}},{key:"_getOriginPoint",value:function(n,r){var a;if("center"==r.originX)a=n.left+n.width/2;else{var o=this._isRtl()?n.right:n.left,u=this._isRtl()?n.left:n.right;a="start"==r.originX?o:u}return{x:a,y:"center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom}}},{key:"_getOverlayPoint",value:function(n,r,a){var o;return o="center"==a.overlayX?-r.width/2:"start"===a.overlayX?this._isRtl()?-r.width:0:this._isRtl()?0:-r.width,{x:n.x+o,y:n.y+("center"==a.overlayY?-r.height/2:"top"==a.overlayY?0:-r.height)}}},{key:"_getOverlayFit",value:function(n,r,a,o){var u=wj(r),c=n.x,d=n.y,m=this._getOffset(o,"x"),_=this._getOffset(o,"y");m&&(c+=m),_&&(d+=_);var T=0-d,I=d+u.height-a.height,N=this._subtractOverflows(u.width,0-c,c+u.width-a.width),W=this._subtractOverflows(u.height,T,I),U=N*W;return{visibleArea:U,isCompletelyWithinViewport:u.width*u.height===U,fitsInViewportVertically:W===u.height,fitsInViewportHorizontally:N==u.width}}},{key:"_canFitWithFlexibleDimensions",value:function(n,r,a){if(this._hasFlexibleDimensions){var o=a.bottom-r.y,u=a.right-r.x,c=bj(this._overlayRef.getConfig().minHeight),d=bj(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=c&&c<=o)&&(n.fitsInViewportHorizontally||null!=d&&d<=u)}return!1}},{key:"_pushOverlayOnScreen",value:function(n,r,a){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};var b,E,o=wj(r),u=this._viewportRect,c=Math.max(n.x+o.width-u.width,0),d=Math.max(n.y+o.height-u.height,0),m=Math.max(u.top-a.top-n.y,0),_=Math.max(u.left-a.left-n.x,0);return this._previousPushAmount={x:b=o.width<=u.width?_||-c:n.x<this._viewportMargin?u.left-a.left-n.x:0,y:E=o.height<=u.height?m||-d:n.y<this._viewportMargin?u.top-a.top-n.y:0},{x:n.x+b,y:n.y+E}}},{key:"_applyPosition",value:function(n,r){if(this._setTransformOrigin(n),this._setOverlayElementStyles(r,n),this._setBoundingBoxStyles(r,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){var a=this._getScrollVisibility(),o=new A$(n,a);this._positionChanges.next(o)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(n){if(this._transformOriginSelector){var a,r=this._boundingBox.querySelectorAll(this._transformOriginSelector),o=n.overlayY;a="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(var u=0;u<r.length;u++)r[u].style.transformOrigin="".concat(a," ").concat(o)}}},{key:"_calculateBoundingBoxRect",value:function(n,r){var u,c,d,T,I,N,a=this._viewportRect,o=this._isRtl();if("top"===r.overlayY)u=a.height-(c=n.y)+this._viewportMargin;else if("bottom"===r.overlayY)u=a.height-(d=a.height-n.y+2*this._viewportMargin)+this._viewportMargin;else{var m=Math.min(a.bottom-n.y+a.top,n.y),_=this._lastBoundingBoxSize.height;c=n.y-m,(u=2*m)>_&&!this._isInitialRender&&!this._growAfterOpen&&(c=n.y-_/2)}if("end"===r.overlayX&&!o||"start"===r.overlayX&&o)N=a.width-n.x+this._viewportMargin,T=n.x-this._viewportMargin;else if("start"===r.overlayX&&!o||"end"===r.overlayX&&o)I=n.x,T=a.right-n.x;else{var W=Math.min(a.right-n.x+a.left,n.x),U=this._lastBoundingBoxSize.width;I=n.x-W,(T=2*W)>U&&!this._isInitialRender&&!this._growAfterOpen&&(I=n.x-U/2)}return{top:c,left:I,bottom:d,right:N,width:T,height:u}}},{key:"_setBoundingBoxStyles",value:function(n,r){var a=this._calculateBoundingBoxRect(n,r);!this._isInitialRender&&!this._growAfterOpen&&(a.height=Math.min(a.height,this._lastBoundingBoxSize.height),a.width=Math.min(a.width,this._lastBoundingBoxSize.width));var o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{var u=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;o.height=co(a.height),o.top=co(a.top),o.bottom=co(a.bottom),o.width=co(a.width),o.left=co(a.left),o.right=co(a.right),o.alignItems="center"===r.overlayX?"center":"end"===r.overlayX?"flex-end":"flex-start",o.justifyContent="center"===r.overlayY?"center":"bottom"===r.overlayY?"flex-end":"flex-start",u&&(o.maxHeight=co(u)),c&&(o.maxWidth=co(c))}this._lastBoundingBoxSize=a,c_(this._boundingBox.style,o)}},{key:"_resetBoundingBoxStyles",value:function(){c_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){c_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(n,r){var a={},o=this._hasExactPosition(),u=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(o){var d=this._viewportRuler.getViewportScrollPosition();c_(a,this._getExactOverlayY(r,n,d)),c_(a,this._getExactOverlayX(r,n,d))}else a.position="static";var m="",_=this._getOffset(r,"x"),b=this._getOffset(r,"y");_&&(m+="translateX(".concat(_,"px) ")),b&&(m+="translateY(".concat(b,"px)")),a.transform=m.trim(),c.maxHeight&&(o?a.maxHeight=co(c.maxHeight):u&&(a.maxHeight="")),c.maxWidth&&(o?a.maxWidth=co(c.maxWidth):u&&(a.maxWidth="")),c_(this._pane.style,a)}},{key:"_getExactOverlayY",value:function(n,r,a){var o={top:"",bottom:""},u=this._getOverlayPoint(r,this._overlayRect,n);this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,a));var c=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return u.y-=c,"bottom"===n.overlayY?o.bottom="".concat(this._document.documentElement.clientHeight-(u.y+this._overlayRect.height),"px"):o.top=co(u.y),o}},{key:"_getExactOverlayX",value:function(n,r,a){var o={left:"",right:""},u=this._getOverlayPoint(r,this._overlayRect,n);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,a)),"right"==(this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left")?o.right="".concat(this._document.documentElement.clientWidth-(u.x+this._overlayRect.width),"px"):o.left=co(u.x),o}},{key:"_getScrollVisibility",value:function(){var n=this._getOriginRect(),r=this._pane.getBoundingClientRect(),a=this._scrollables.map(function(o){return o.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:mj(n,a),isOriginOutsideView:gB(n,a),isOverlayClipped:mj(r,a),isOverlayOutsideView:gB(r,a)}}},{key:"_subtractOverflows",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce(function(u,c){return u-Math.max(c,0)},n)}},{key:"_getNarrowedViewportRect",value:function(){var n=this._document.documentElement.clientWidth,r=this._document.documentElement.clientHeight,a=this._viewportRuler.getViewportScrollPosition();return{top:a.top+this._viewportMargin,left:a.left+this._viewportMargin,right:a.left+n-this._viewportMargin,bottom:a.top+r-this._viewportMargin,width:n-2*this._viewportMargin,height:r-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(n,r){return"x"===r?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}},{key:"_validatePositions",value:function(){}},{key:"_addPanelClasses",value:function(n){var r=this;this._pane&&hG(n).forEach(function(a){""!==a&&-1===r._appliedPanelClasses.indexOf(a)&&(r._appliedPanelClasses.push(a),r._pane.classList.add(a))})}},{key:"_clearPanelClasses",value:function(){var n=this;this._pane&&(this._appliedPanelClasses.forEach(function(r){n._pane.classList.remove(r)}),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var n=this._origin;if(n instanceof v.SBq)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();var r=n.width||0,a=n.height||0;return{top:n.y,bottom:n.y+a,left:n.x,right:n.x+r,height:a,width:r}}}]),i}();function c_(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n]);return i}function bj(i){if("number"!=typeof i&&null!=i){var s=i.split(R$),n=(0,ke.Z)(s,2),a=n[1];return a&&"px"!==a?null:parseFloat(n[0])}return i||null}function wj(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}var P$=function(){function i(s,n,r,a,o,u,c){(0,M.Z)(this,i),this._preferredPositions=[],this._positionStrategy=new _j(r,a,o,u,c).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(s,n),this.onPositionChange=this._positionStrategy.positionChanges}return(0,D.Z)(i,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(n){this._overlayRef=n,this._positionStrategy.attach(n),this._direction&&(n.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(n){this._positionStrategy.withScrollableContainers(n)}},{key:"withFallbackPosition",value:function(n,r,a,o){var u=new M$(n,r,a,o);return this._preferredPositions.push(u),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(n){return this._overlayRef?this._overlayRef.setDirection(n):this._direction=n,this}},{key:"withOffsetX",value:function(n){return this._positionStrategy.withDefaultOffsetX(n),this}},{key:"withOffsetY",value:function(n){return this._positionStrategy.withDefaultOffsetY(n),this}},{key:"withLockedPosition",value:function(n){return this._positionStrategy.withLockedPosition(n),this}},{key:"withPositions",value:function(n){return this._preferredPositions=n.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(n){return this._positionStrategy.setOrigin(n),this}}]),i}(),kj="cdk-global-overlay-wrapper",O$=function(){function i(){(0,M.Z)(this,i),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return(0,D.Z)(i,[{key:"attach",value:function(n){var r=n.getConfig();this._overlayRef=n,this._width&&!r.width&&n.updateSize({width:this._width}),this._height&&!r.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(kj),this._isDisposed=!1}},{key:"top",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}},{key:"left",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=n,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}},{key:"right",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=n,this._justifyContent="flex-end",this}},{key:"width",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}},{key:"height",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}},{key:"centerHorizontally",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(n),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(n),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var n=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement.style,a=this._overlayRef.getConfig(),o=a.width,u=a.height,c=a.maxWidth,d=a.maxHeight,m=!("100%"!==o&&"100vw"!==o||c&&"100%"!==c&&"100vw"!==c),_=!("100%"!==u&&"100vh"!==u||d&&"100%"!==d&&"100vh"!==d);n.position=this._cssPosition,n.marginLeft=m?"0":this._leftOffset,n.marginTop=_?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=this._rightOffset,m?r.justifyContent="flex-start":"center"===this._justifyContent?r.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?r.justifyContent="flex-end":"flex-end"===this._justifyContent&&(r.justifyContent="flex-start"):r.justifyContent=this._justifyContent,r.alignItems=_?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var n=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement,a=r.style;r.classList.remove(kj),a.justifyContent=a.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}}]),i}(),L$=function(){var i=function(){function s(n,r,a,o){(0,M.Z)(this,s),this._viewportRuler=n,this._document=r,this._platform=a,this._overlayContainer=o}return(0,D.Z)(s,[{key:"global",value:function(){return new O$}},{key:"connectedTo",value:function(r,a,o){return new P$(a,o,r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(r){return new _j(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Nw),v.LFG(fe),v.LFG(Fs),v.LFG(_B))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Nw),v.LFG(fe),v.LFG(Fs),v.LFG(_B))},token:i,providedIn:"root"}),i}(),N$=0,YM=function(){var i=function(){function s(n,r,a,o,u,c,d,m,_,b,E){(0,M.Z)(this,s),this.scrollStrategies=n,this._overlayContainer=r,this._componentFactoryResolver=a,this._positionBuilder=o,this._keyboardDispatcher=u,this._injector=c,this._ngZone=d,this._document=m,this._directionality=_,this._location=b,this._outsideClickDispatcher=E}return(0,D.Z)(s,[{key:"create",value:function(r){var a=this._createHostElement(),o=this._createPaneElement(a),u=this._createPortalOutlet(o),c=new yB(r);return c.direction=c.direction||this._directionality.value,new D$(u,a,o,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(r){var a=this._document.createElement("div");return a.id="cdk-overlay-".concat(N$++),a.classList.add("cdk-overlay-pane"),r.appendChild(a),a}},{key:"_createHostElement",value:function(){var r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}},{key:"_createPortalOutlet",value:function(r){return this._appRef||(this._appRef=this._injector.get(v.z2F)),new nj(r,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(T$),v.LFG(_B),v.LFG(v._Vd),v.LFG(L$),v.LFG(x$),v.LFG(v.zs3),v.LFG(v.R0b),v.LFG(fe),v.LFG(o_),v.LFG(Zt),v.LFG(I$))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),B$={provide:new v.OlP("cdk-connected-overlay-scroll-strategy"),deps:[YM],useFactory:function(i){return function(){return i.scrollStrategies.reposition()}}},U$=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[YM,B$],imports:[[jM,ij,dj],dj]}),i}(),V$=["mat-menu-item",""];function H$(i,s){1&i&&(v.O4$(),v.TgZ(0,"svg",2),v._UZ(1,"polygon",3),v.qZA())}var Cj=["*"];function z$(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div",0),v.NdJ("keydown",function(o){return v.CHM(n),v.oxw()._handleKeydown(o)})("click",function(){return v.CHM(n),v.oxw().closed.emit("click")})("@transformMenu.start",function(o){return v.CHM(n),v.oxw()._onAnimationStart(o)})("@transformMenu.done",function(o){return v.CHM(n),v.oxw()._onAnimationDone(o)}),v.TgZ(1,"div",1),v.Hsn(2),v.qZA(),v.qZA()}if(2&i){var r=v.oxw();v.Q6J("id",r.panelId)("ngClass",r._classList)("@transformMenu",r._panelAnimationState),v.uIk("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null)("aria-describedby",r.ariaDescribedby||null)}}var hP={transformMenu:Dl("transformMenu",[nu("void",Vs({opacity:0,transform:"scale(0.8)"})),ol("void => enter",Zo("120ms cubic-bezier(0, 0, 0.2, 1)",Vs({opacity:1,transform:"scale(1)"}))),ol("* => void",Zo("100ms 25ms linear",Vs({opacity:0})))]),fadeInItems:Dl("fadeInItems",[nu("showing",Vs({opacity:1})),ol("void => *",[Vs({opacity:0}),Zo("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Sj=new v.OlP("MatMenuContent"),bB=new v.OlP("MAT_MENU_PANEL"),j$=Rw(uP(function(){return function i(){(0,M.Z)(this,i)}}())),dP=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o,u,c,d){var m;return(0,M.Z)(this,r),(m=n.call(this))._elementRef=a,m._focusMonitor=u,m._parentMenu=c,m._changeDetectorRef=d,m.role="menuitem",m._hovered=new Er.xQ,m._focused=new Er.xQ,m._highlighted=!1,m._triggersSubmenu=!1,c&&c.addItem&&c.addItem((0,wa.Z)(m)),m}return(0,D.Z)(r,[{key:"focus",value:function(o,u){this._focusMonitor&&o?this._focusMonitor.focusVia(this._getHostElement(),o,u):this._getHostElement().focus(u),this._focused.next(this)}},{key:"ngAfterViewInit",value:function(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}},{key:"ngOnDestroy",value:function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_checkDisabled",value:function(o){this.disabled&&(o.preventDefault(),o.stopPropagation())}},{key:"_handleMouseEnter",value:function(){this._hovered.next(this)}},{key:"getLabel",value:function(){for(var o,u,c=this._elementRef.nativeElement.cloneNode(!0),d=c.querySelectorAll("mat-icon, .material-icons"),m=0;m<d.length;m++){var _=d[m];null===(o=_.parentNode)||void 0===o||o.removeChild(_)}return(null===(u=c.textContent)||void 0===u?void 0:u.trim())||""}},{key:"_setHighlighted",value:function(o){var u;this._highlighted=o,null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()}}]),r}(j$);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(fe),v.Y36(km),v.Y36(bB,8),v.Y36(v.sBO))},i.\u0275cmp=v.Xpm({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(n,r){1&n&&v.NdJ("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),2&n&&(v.uIk("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),v.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[v.qOj],attrs:V$,ngContentSelectors:Cj,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(n,r){1&n&&(v.F$t(),v.Hsn(0),v._UZ(1,"div",0),v.YNc(2,H$,2,0,"svg",1)),2&n&&(v.xp6(1),v.Q6J("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),v.xp6(1),v.Q6J("ngIf",r._triggersSubmenu))},directives:[l_,As],encapsulation:2,changeDetection:0}),i}(),Tj=new v.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),q$=0,KM=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._elementRef=n,this._ngZone=r,this._defaultOptions=a,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new v.n_E,this._tabSubscription=Yo.w.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Er.xQ,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new v.vpe,this.close=this.closed,this.panelId="mat-menu-panel-".concat(q$++)}return(0,D.Z)(s,[{key:"xPosition",get:function(){return this._xPosition},set:function(r){this._xPosition=r,this.setPositionClasses()}},{key:"yPosition",get:function(){return this._yPosition},set:function(r){this._yPosition=r,this.setPositionClasses()}},{key:"overlapTrigger",get:function(){return this._overlapTrigger},set:function(r){this._overlapTrigger=Gi(r)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(r){this._hasBackdrop=Gi(r)}},{key:"panelClass",set:function(r){var a=this,o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(function(u){a._classList[u]=!1}),this._previousPanelClass=r,r&&r.length&&(r.split(" ").forEach(function(u){a._classList[u]=!0}),this._elementRef.nativeElement.className="")}},{key:"classList",get:function(){return this.panelClass},set:function(r){this.panelClass=r}},{key:"ngOnInit",value:function(){this.setPositionClasses()}},{key:"ngAfterContentInit",value:function(){var r=this;this._updateDirectDescendants(),this._keyManager=new tB(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(function(){return r.closed.emit("tab")}),this._directDescendantItems.changes.pipe(au(this._directDescendantItems),Ys(function(a){return qh.T.apply(void 0,(0,Gr.Z)(a.map(function(o){return o._focused})))})).subscribe(function(a){return r._keyManager.updateActiveItem(a)})}},{key:"ngOnDestroy",value:function(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}},{key:"_hovered",value:function(){return this._directDescendantItems.changes.pipe(au(this._directDescendantItems),Ys(function(a){return qh.T.apply(void 0,(0,Gr.Z)(a.map(function(o){return o._hovered})))}))}},{key:"addItem",value:function(r){}},{key:"removeItem",value:function(r){}},{key:"_handleKeydown",value:function(r){var a=r.keyCode,o=this._keyManager;switch(a){case 27:_m(r)||(r.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===a||40===a)&&o.setFocusOrigin("keyboard"),o.onKeydown(r)}}},{key:"focusFirstItem",value:function(){var r=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program";this.lazyContent?this._ngZone.onStable.pipe(ml(1)).subscribe(function(){return r._focusFirstItem(a)}):this._focusFirstItem(a)}},{key:"_focusFirstItem",value:function(r){var a=this._keyManager;if(a.setFocusOrigin(r).setFirstItemActive(),!a.activeItem&&this._directDescendantItems.length)for(var o=this._directDescendantItems.first._getHostElement().parentElement;o;){if("menu"===o.getAttribute("role")){o.focus();break}o=o.parentElement}}},{key:"resetActiveItem",value:function(){this._keyManager.setActiveItem(-1)}},{key:"setElevation",value:function(r){var a=this,o=Math.min(this._baseElevation+r,24),u="".concat(this._elevationPrefix).concat(o),c=Object.keys(this._classList).find(function(d){return d.startsWith(a._elevationPrefix)});(!c||c===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[u]=!0,this._previousElevation=u)}},{key:"setPositionClasses",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xPosition,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yPosition,o=this._classList;o["mat-menu-before"]="before"===r,o["mat-menu-after"]="after"===r,o["mat-menu-above"]="above"===a,o["mat-menu-below"]="below"===a}},{key:"_startAnimation",value:function(){this._panelAnimationState="enter"}},{key:"_resetAnimation",value:function(){this._panelAnimationState="void"}},{key:"_onAnimationDone",value:function(r){this._animationDone.next(r),this._isAnimating=!1}},{key:"_onAnimationStart",value:function(r){this._isAnimating=!0,"enter"===r.toState&&0===this._keyManager.activeItemIndex&&(r.element.scrollTop=0)}},{key:"_updateDirectDescendants",value:function(){var r=this;this._allItems.changes.pipe(au(this._allItems)).subscribe(function(a){r._directDescendantItems.reset(a.filter(function(o){return o._parentMenu===r})),r._directDescendantItems.notifyOnChanges()})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(v.R0b),v.Y36(Tj))},i.\u0275dir=v.lG2({type:i,contentQueries:function(n,r,a){var o;1&n&&(v.Suo(a,Sj,5),v.Suo(a,dP,5),v.Suo(a,dP,4)),2&n&&(v.iGM(o=v.CRH())&&(r.lazyContent=o.first),v.iGM(o=v.CRH())&&(r._allItems=o),v.iGM(o=v.CRH())&&(r.items=o))},viewQuery:function(n,r){var a;1&n&&v.Gf(v.Rgc,5),2&n&&v.iGM(a=v.CRH())&&(r.templateRef=a.first)},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),i}(),Y$=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(a,o,u){var c;return(0,M.Z)(this,r),(c=n.call(this,a,o,u))._elevationPrefix="mat-elevation-z",c._baseElevation=4,c}return r}(KM);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(v.R0b),v.Y36(Tj))},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(n,r){2&n&&v.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[v._Bn([{provide:bB,useExisting:i}]),v.qOj],ngContentSelectors:Cj,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(n,r){1&n&&(v.F$t(),v.YNc(0,z$,3,6,"ng-template"))},directives:[wr],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[hP.transformMenu,hP.fadeInItems]},changeDetection:0}),i}(),Mj=new v.OlP("mat-menu-scroll-strategy"),$$={provide:Mj,deps:[YM],useFactory:function(i){return function(){return i.scrollStrategies.reposition()}}},xj=aP({passive:!0}),X$=function(){var i=function(){function s(n,r,a,o,u,c,d,m){var _=this;(0,M.Z)(this,s),this._overlay=n,this._element=r,this._viewContainerRef=a,this._menuItemInstance=c,this._dir=d,this._focusMonitor=m,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Yo.w.EMPTY,this._hoverSubscription=Yo.w.EMPTY,this._menuCloseSubscription=Yo.w.EMPTY,this._handleTouchStart=function(b){rB(b)||(_._openedBy="touch")},this._openedBy=void 0,this._ariaHaspopup=!0,this.restoreFocus=!0,this.menuOpened=new v.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new v.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=o,this._parentMaterialMenu=u instanceof KM?u:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,xj),c&&(c._triggersSubmenu=this.triggersSubmenu())}return(0,D.Z)(s,[{key:"_ariaExpanded",get:function(){return this.menuOpen||null}},{key:"_ariaControl",get:function(){return this.menuOpen?this.menu.panelId:null}},{key:"_deprecatedMatMenuTriggerFor",get:function(){return this.menu},set:function(r){this.menu=r}},{key:"menu",get:function(){return this._menu},set:function(r){var a=this;r!==this._menu&&(this._menu=r,this._menuCloseSubscription.unsubscribe(),r&&(this._menuCloseSubscription=r.close.subscribe(function(o){a._destroyMenu(o),("click"===o||"tab"===o)&&a._parentMaterialMenu&&a._parentMaterialMenu.closed.emit(o)})))}},{key:"ngAfterContentInit",value:function(){this._checkMenu(),this._handleHover()}},{key:"ngOnDestroy",value:function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,xj),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}},{key:"menuOpen",get:function(){return this._menuOpen}},{key:"dir",get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}},{key:"triggersSubmenu",value:function(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}},{key:"toggleMenu",value:function(){return this._menuOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){var r=this;if(!this._menuOpen){this._checkMenu();var a=this._createOverlay(),o=a.getConfig();this._setPosition(o.positionStrategy),o.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,a.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(function(){return r.closeMenu()}),this._initMenu(),this.menu instanceof KM&&this.menu._startAnimation()}}},{key:"closeMenu",value:function(){this.menu.close.emit()}},{key:"focus",value:function(r,a){this._focusMonitor&&r?this._focusMonitor.focusVia(this._element,r,a):this._element.nativeElement.focus(a)}},{key:"updatePosition",value:function(){var r;null===(r=this._overlayRef)||void 0===r||r.updatePosition()}},{key:"_destroyMenu",value:function(r){var a=this;if(this._overlayRef&&this.menuOpen){var o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===r||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof KM?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe(Ji(function(u){return"void"===u.toState}),ml(1),$s(o.lazyContent._attached)).subscribe({next:function(){return o.lazyContent.detach()},complete:function(){return a._setIsMenuOpen(!1)}}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o.lazyContent&&o.lazyContent.detach())}}},{key:"_initMenu",value:function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}},{key:"_setMenuElevation",value:function(){if(this.menu.setElevation){for(var r=0,a=this.menu.parentMenu;a;)r++,a=a.parentMenu;this.menu.setElevation(r)}}},{key:"_setIsMenuOpen",value:function(r){this._menuOpen=r,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(r)}},{key:"_checkMenu",value:function(){}},{key:"_createOverlay",value:function(){if(!this._overlayRef){var r=this._getOverlayConfig();this._subscribeToPositions(r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}},{key:"_getOverlayConfig",value:function(){return new yB({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}},{key:"_subscribeToPositions",value:function(r){var a=this;this.menu.setPositionClasses&&r.positionChanges.subscribe(function(o){a.menu.setPositionClasses("start"===o.connectionPair.overlayX?"after":"before","top"===o.connectionPair.overlayY?"below":"above")})}},{key:"_setPosition",value:function(r){var o=(0,ke.Z)("before"===this.menu.xPosition?["end","start"]:["start","end"],2),u=o[0],c=o[1],m=(0,ke.Z)("above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],2),_=m[0],b=m[1],E=_,T=b,I=u,N=c,W=0;this.triggersSubmenu()?(N=u="before"===this.menu.xPosition?"start":"end",c=I="end"===u?"start":"end",W="bottom"===_?8:-8):this.menu.overlapTrigger||(E="top"===_?"bottom":"top",T="top"===b?"bottom":"top"),r.withPositions([{originX:u,originY:E,overlayX:I,overlayY:_,offsetY:W},{originX:c,originY:E,overlayX:N,overlayY:_,offsetY:W},{originX:u,originY:T,overlayX:I,overlayY:b,offsetY:-W},{originX:c,originY:T,overlayX:N,overlayY:b,offsetY:-W}])}},{key:"_menuClosingActions",value:function(){var r=this,a=this._overlayRef.backdropClick(),o=this._overlayRef.detachments(),u=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,tr.of)(),c=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Ji(function(d){return d!==r._menuItemInstance}),Ji(function(){return r._menuOpen})):(0,tr.of)();return(0,qh.T)(a,u,c,o)}},{key:"_handleMousedown",value:function(r){nB(r)||(this._openedBy=0===r.button?"mouse":void 0,this.triggersSubmenu()&&r.preventDefault())}},{key:"_handleKeydown",value:function(r){var a=r.keyCode;(13===a||32===a)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===a&&"ltr"===this.dir||37===a&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}},{key:"_handleClick",value:function(r){this.triggersSubmenu()?(r.stopPropagation(),this.openMenu()):this.toggleMenu()}},{key:"_handleHover",value:function(){var r=this;!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Ji(function(a){return a===r._menuItemInstance&&!a.disabled}),ej(0,dB.E)).subscribe(function(){r._openedBy="mouse",r.menu instanceof KM&&r.menu._isAnimating?r.menu._animationDone.pipe(ml(1),ej(0,dB.E),$s(r._parentMaterialMenu._hovered())).subscribe(function(){return r.openMenu()}):r.openMenu()}))}},{key:"_getPortal",value:function(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new Pw(this.menu.templateRef,this._viewContainerRef)),this._portal}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(YM),v.Y36(v.SBq),v.Y36(v.s_b),v.Y36(Mj),v.Y36(bB,8),v.Y36(dP,10),v.Y36(o_,8),v.Y36(km))},i.\u0275dir=v.lG2({type:i,hostVars:3,hostBindings:function(n,r){1&n&&v.NdJ("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(o){return r._handleClick(o)}),2&n&&v.uIk("aria-haspopup",r._ariaHaspopup)("aria-expanded",r._ariaExpanded)("aria-controls",r._ariaControl)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i}(),Q$=function(){var i=function(s){(0,S.Z)(r,s);var n=(0,re.Z)(r);function r(){return(0,M.Z)(this,r),n.apply(this,arguments)}return r}(X$);return i.\u0275fac=function(){var s;return function(r){return(s||(s=v.n5z(i)))(r||i)}}(),i.\u0275dir=v.lG2({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[v.qOj]}),i}(),J$=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[$$],imports:[[G,ks,cP,U$],qM,ks]}),i}();function Em(i){return function(n){var r=new tX(i),a=n.lift(r);return r.caught=a}}J(1225);var tX=function(){function i(s){(0,M.Z)(this,i),this.selector=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new nX(n,this.selector,this.caught))}}]),i}(),nX=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).selector=a,u.caught=o,u}return(0,D.Z)(n,[{key:"error",value:function(a){if(!this.isStopped){var o;try{o=this.selector(a,this.caught)}catch(d){return void(0,_e.Z)((0,de.Z)(n.prototype),"error",this).call(this,d)}this._unsubscribeAndRecycle();var u=new Yl.IY(this);this.add(u);var c=(0,Yl.ft)(o,u);c!==u&&this.add(c)}}}]),n}(Yl.Ds);var rX=function(){function i(s){(0,M.Z)(this,i),this.callback=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new iX(n,this.callback))}}]),i}(),iX=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).add(new Yo.w(a)),o}return n}(ss.L),$u=J(3982);function Fw(i,s){return(0,$u.zg)(i,s,1)}var xX=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ks],ks]}),i}(),LX=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),$X=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[G,ks,LX,ij]]}),i}(),fQ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[G,ks,HM,qM],qM,ks]}),i}(),hQ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ks],ks]}),i}(),SQ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[FG,cP,ks,oB,G],FG,ks,oB,hQ]}),i}(),TQ=J(9342),cW={},AQ=function(){function i(s){(0,M.Z)(this,i),this.resultSelector=s}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new xQ(n,this.resultSelector))}}]),i}(),xQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).resultSelector=a,o.active=0,o.values=[],o.observables=[],o}return(0,D.Z)(n,[{key:"_next",value:function(a){this.values.push(cW),this.observables.push(a)}},{key:"_complete",value:function(){var a=this.observables,o=a.length;if(0===o)this.destination.complete();else{this.active=o,this.toRespond=o;for(var u=0;u<o;u++)this.add(rv(this,a[u],void 0,u))}}},{key:"notifyComplete",value:function(a){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(a,o,u){var c=this.values,m=this.toRespond?c[u]===cW?--this.toRespond:this.toRespond:0;c[u]=o,0===m&&(this.resultSelector?this._tryResultSelector(c):this.destination.next(c.slice()))}},{key:"_tryResultSelector",value:function(a){var o;try{o=this.resultSelector.apply(this,a)}catch(u){return void this.destination.error(u)}this.destination.next(o)}}]),n}(om);function fW(i){return new ms.y(function(s){var n;try{n=i()}catch(a){return void s.error(a)}return(n?(0,as.D)(n):(0,If.c)()).subscribe(s)})}var IQ=J(2875);function RB(i){return function(n){return 0===i?(0,If.c)():n.lift(new DQ(i))}}var DQ=function(){function i(s){if((0,M.Z)(this,i),this.total=s,this.total<0)throw new mD}return(0,D.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new RQ(n,this.total))}}]),i}(),RQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).total=a,o.ring=new Array,o.count=0,o}return(0,D.Z)(n,[{key:"_next",value:function(a){var o=this.ring,u=this.total,c=this.count++;o.length<u?o.push(a):o[c%u]=a}},{key:"_complete",value:function(){var a=this.destination,o=this.count;if(o>0)for(var u=this.count>=this.total?this.total:this.count,c=this.ring,d=0;d<u;d++){var m=o++%u;a.next(c[m])}a.complete()}}]),n}(ss.L),OQ=J(1564),cv=function i(s,n){(0,M.Z)(this,i),this.id=s,this.url=n},PB=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,M.Z)(this,n),(o=s.call(this,r,a)).navigationTrigger=u,o.restoredState=c,o}return(0,D.Z)(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(cv),QM=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).urlAfterRedirects=o,u}return(0,D.Z)(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(cv),hW=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).reason=o,u}return(0,D.Z)(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(cv),LQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).error=o,u}return(0,D.Z)(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(cv),NQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this,r,a)).urlAfterRedirects=o,c.state=u,c}return(0,D.Z)(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(cv),FQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this,r,a)).urlAfterRedirects=o,c.state=u,c}return(0,D.Z)(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(cv),ZQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c){var d;return(0,M.Z)(this,n),(d=s.call(this,r,a)).urlAfterRedirects=o,d.state=u,d.shouldActivate=c,d}return(0,D.Z)(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(cv),BQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this,r,a)).urlAfterRedirects=o,c.state=u,c}return(0,D.Z)(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(cv),UQ=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this,r,a)).urlAfterRedirects=o,c.state=u,c}return(0,D.Z)(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(cv),dW=function(){function i(s){(0,M.Z)(this,i),this.route=s}return(0,D.Z)(i,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),i}(),vW=function(){function i(s){(0,M.Z)(this,i),this.route=s}return(0,D.Z)(i,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),i}(),VQ=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,D.Z)(i,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),HQ=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,D.Z)(i,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),zQ=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,D.Z)(i,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),GQ=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,D.Z)(i,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),pW=function(){function i(s,n,r){(0,M.Z)(this,i),this.routerEvent=s,this.position=n,this.anchor=r}return(0,D.Z)(i,[{key:"toString",value:function(){var n=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(n,"')")}}]),i}(),pi="primary",jQ=function(){function i(s){(0,M.Z)(this,i),this.params=s||{}}return(0,D.Z)(i,[{key:"has",value:function(n){return Object.prototype.hasOwnProperty.call(this.params,n)}},{key:"get",value:function(n){if(this.has(n)){var r=this.params[n];return Array.isArray(r)?r[0]:r}return null}},{key:"getAll",value:function(n){if(this.has(n)){var r=this.params[n];return Array.isArray(r)?r:[r]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),i}();function Bw(i){return new jQ(i)}var mW="ngNavigationCancelingError";function OB(i){var s=Error("NavigationCancelingError: "+i);return s[mW]=!0,s}function qQ(i,s,n){var r=n.path.split("/");if(r.length>i.length||"full"===n.pathMatch&&(s.hasChildren()||r.length<i.length))return null;for(var a={},o=0;o<r.length;o++){var u=r[o],c=i[o];if(u.startsWith(":"))a[u.substring(1)]=c;else if(u!==c.path)return null}return{consumed:i.slice(0,r.length),posParams:a}}function id(i,s){var n=i?Object.keys(i):void 0,r=s?Object.keys(s):void 0;if(!n||!r||n.length!=r.length)return!1;for(var a,o=0;o<n.length;o++)if(!gW(i[a=n[o]],s[a]))return!1;return!0}function gW(i,s){if(Array.isArray(i)&&Array.isArray(s)){if(i.length!==s.length)return!1;var n=(0,Gr.Z)(i).sort(),r=(0,Gr.Z)(s).sort();return n.every(function(a,o){return r[o]===a})}return i===s}function yW(i){return Array.prototype.concat.apply([],i)}function _W(i){return i.length>0?i[i.length-1]:null}function cu(i,s){for(var n in i)i.hasOwnProperty(n)&&s(i[n],n)}function ad(i){return(0,v.CqO)(i)?i:(0,v.QGY)(i)?(0,as.D)(Promise.resolve(i)):(0,tr.of)(i)}var $Q={exact:function kW(i,s,n){if(!d_(i.segments,s.segments)||!_P(i.segments,s.segments,n)||i.numberOfChildren!==s.numberOfChildren)return!1;for(var r in s.children)if(!i.children[r]||!kW(i.children[r],s.children[r],n))return!1;return!0},subset:EW},bW={exact:function(i,s){return id(i,s)},subset:function(i,s){return Object.keys(s).length<=Object.keys(i).length&&Object.keys(s).every(function(n){return gW(i[n],s[n])})},ignored:function(){return!0}};function wW(i,s,n){return $Q[n.paths](i.root,s.root,n.matrixParams)&&bW[n.queryParams](i.queryParams,s.queryParams)&&!("exact"===n.fragment&&i.fragment!==s.fragment)}function EW(i,s,n){return CW(i,s,s.segments,n)}function CW(i,s,n,r){if(i.segments.length>n.length){var a=i.segments.slice(0,n.length);return!(!d_(a,n)||s.hasChildren()||!_P(a,n,r))}if(i.segments.length===n.length){if(!d_(i.segments,n)||!_P(i.segments,n,r))return!1;for(var o in s.children)if(!i.children[o]||!EW(i.children[o],s.children[o],r))return!1;return!0}var u=n.slice(0,i.segments.length),c=n.slice(i.segments.length);return!!(d_(i.segments,u)&&_P(i.segments,u,r)&&i.children[pi])&&CW(i.children[pi],s,c,r)}function _P(i,s,n){return s.every(function(r,a){return bW[n](i[a].parameters,r.parameters)})}var h_=function(){function i(s,n,r){(0,M.Z)(this,i),this.root=s,this.queryParams=n,this.fragment=r}return(0,D.Z)(i,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Bw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return tJ.serialize(this)}}]),i}(),xi=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.segments=s,this.children=n,this.parent=null,cu(n,function(a,o){return a.parent=r})}return(0,D.Z)(i,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return bP(this)}}]),i}(),JM=function(){function i(s,n){(0,M.Z)(this,i),this.path=s,this.parameters=n}return(0,D.Z)(i,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Bw(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return AW(this)}}]),i}();function d_(i,s){return i.length===s.length&&i.every(function(n,r){return n.path===s[r].path})}var LB=function i(){(0,M.Z)(this,i)},SW=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"parse",value:function(n){var r=new cJ(n);return new h_(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}},{key:"serialize",value:function(n){var r="/".concat(eA(n.root,!0)),a=function(i){var s=Object.keys(i).map(function(n){var r=i[n];return Array.isArray(r)?r.map(function(a){return"".concat(wP(n),"=").concat(wP(a))}).join("&"):"".concat(wP(n),"=").concat(wP(r))}).filter(function(n){return!!n});return s.length?"?".concat(s.join("&")):""}(n.queryParams),o="string"==typeof n.fragment?"#".concat(function(i){return encodeURI(i)}(n.fragment)):"";return"".concat(r).concat(a).concat(o)}}]),i}(),tJ=new SW;function bP(i){return i.segments.map(function(s){return AW(s)}).join("/")}function eA(i,s){if(!i.hasChildren())return bP(i);if(s){var n=i.children[pi]?eA(i.children[pi],!1):"",r=[];return cu(i.children,function(o,u){u!==pi&&r.push("".concat(u,":").concat(eA(o,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var a=function(i,s){var n=[];return cu(i.children,function(r,a){a===pi&&(n=n.concat(s(r,a)))}),cu(i.children,function(r,a){a!==pi&&(n=n.concat(s(r,a)))}),n}(i,function(o,u){return u===pi?[eA(i.children[pi],!1)]:["".concat(u,":").concat(eA(o,!1))]});return 1===Object.keys(i.children).length&&null!=i.children[pi]?"".concat(bP(i),"/").concat(a[0]):"".concat(bP(i),"/(").concat(a.join("//"),")")}function TW(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wP(i){return TW(i).replace(/%3B/gi,";")}function NB(i){return TW(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kP(i){return decodeURIComponent(i)}function MW(i){return kP(i.replace(/\+/g,"%20"))}function AW(i){return"".concat(NB(i.path)).concat(function(i){return Object.keys(i).map(function(s){return";".concat(NB(s),"=").concat(NB(i[s]))}).join("")}(i.parameters))}var aJ=/^[^\/()?;=#]+/;function EP(i){var s=i.match(aJ);return s?s[0]:""}var sJ=/^[^=?&#]+/,uJ=/^[^?&#]+/,cJ=function(){function i(s){(0,M.Z)(this,i),this.url=s,this.remaining=s}return(0,D.Z)(i,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xi([],{}):new xi([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());var r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));var a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(a[pi]=new xi(n,r)),a}},{key:"parseSegment",value:function(){var n=EP(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(n),new JM(kP(n),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var n={};this.consumeOptional(";");)this.parseParam(n);return n}},{key:"parseParam",value:function(n){var r=EP(this.remaining);if(r){this.capture(r);var a="";if(this.consumeOptional("=")){var o=EP(this.remaining);o&&this.capture(a=o)}n[kP(r)]=kP(a)}}},{key:"parseQueryParam",value:function(n){var r=function(i){var s=i.match(sJ);return s?s[0]:""}(this.remaining);if(r){this.capture(r);var a="";if(this.consumeOptional("=")){var o=function(i){var s=i.match(uJ);return s?s[0]:""}(this.remaining);o&&this.capture(a=o)}var u=MW(r),c=MW(a);if(n.hasOwnProperty(u)){var d=n[u];Array.isArray(d)||(n[u]=d=[d]),d.push(c)}else n[u]=c}}},{key:"parseParens",value:function(n){var r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var a=EP(this.remaining),o=this.remaining[a.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error("Cannot parse url '".concat(this.url,"'"));var u=void 0;a.indexOf(":")>-1?(u=a.substr(0,a.indexOf(":")),this.capture(u),this.capture(":")):n&&(u=pi);var c=this.parseChildren();r[u]=1===Object.keys(c).length?c[pi]:new xi([],c),this.consumeOptional("//")}return r}},{key:"peekStartsWith",value:function(n){return this.remaining.startsWith(n)}},{key:"consumeOptional",value:function(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}},{key:"capture",value:function(n){if(!this.consumeOptional(n))throw new Error('Expected "'.concat(n,'".'))}}]),i}(),xW=function(){function i(s){(0,M.Z)(this,i),this._root=s}return(0,D.Z)(i,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(n){var r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}},{key:"children",value:function(n){var r=FB(n,this._root);return r?r.children.map(function(a){return a.value}):[]}},{key:"firstChild",value:function(n){var r=FB(n,this._root);return r&&r.children.length>0?r.children[0].value:null}},{key:"siblings",value:function(n){var r=ZB(n,this._root);return r.length<2?[]:r[r.length-2].children.map(function(o){return o.value}).filter(function(o){return o!==n})}},{key:"pathFromRoot",value:function(n){return ZB(n,this._root).map(function(r){return r.value})}}]),i}();function FB(i,s){if(i===s.value)return s;var r,n=(0,Re.Z)(s.children);try{for(n.s();!(r=n.n()).done;){var o=FB(i,r.value);if(o)return o}}catch(u){n.e(u)}finally{n.f()}return null}function ZB(i,s){if(i===s.value)return[s];var r,n=(0,Re.Z)(s.children);try{for(n.s();!(r=n.n()).done;){var o=ZB(i,r.value);if(o.length)return o.unshift(s),o}}catch(u){n.e(u)}finally{n.f()}return[]}var fv=function(){function i(s,n){(0,M.Z)(this,i),this.value=s,this.children=n}return(0,D.Z)(i,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),i}();function tA(i){var s={};return i&&i.children.forEach(function(n){return s[n.value.outlet]=n}),s}var IW=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).snapshot=a,BB((0,wa.Z)(o),r),o}return(0,D.Z)(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(xW);function DW(i,s){var n=function(i,s){var u=new CP([],{},{},"",{},pi,s,null,i.root,-1,{});return new PW("",new fv(u,[]))}(i,s),r=new Wc([new JM("",{})]),a=new Wc({}),o=new Wc({}),u=new Wc({}),c=new Wc(""),d=new Uw(r,a,u,c,o,pi,s,n.root);return d.snapshot=n.root,new IW(new fv(d,[]),n)}var Uw=function(){function i(s,n,r,a,o,u,c,d){(0,M.Z)(this,i),this.url=s,this.params=n,this.queryParams=r,this.fragment=a,this.data=o,this.outlet=u,this.component=c,this._futureSnapshot=d}return(0,D.Z)(i,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,ur.U)(function(n){return Bw(n)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ur.U)(function(n){return Bw(n)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),i}();function RW(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=i.pathFromRoot,r=0;if("always"!==s)for(r=n.length-1;r>=1;){var a=n[r],o=n[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(o.component)break;r--}}return hJ(n.slice(r))}function hJ(i){return i.reduce(function(s,n){return{params:Object.assign(Object.assign({},s.params),n.params),data:Object.assign(Object.assign({},s.data),n.data),resolve:Object.assign(Object.assign({},s.resolve),n._resolvedData)}},{params:{},data:{},resolve:{}})}var CP=function(){function i(s,n,r,a,o,u,c,d,m,_,b){(0,M.Z)(this,i),this.url=s,this.params=n,this.queryParams=r,this.fragment=a,this.data=o,this.outlet=u,this.component=c,this.routeConfig=d,this._urlSegment=m,this._lastPathIndex=_,this._resolve=b}return(0,D.Z)(i,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Bw(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Bw(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var n=this.url.map(function(a){return a.toString()}).join("/"),r=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(n,"', path:'").concat(r,"')")}}]),i}(),PW=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,a)).url=r,BB((0,wa.Z)(o),a),o}return(0,D.Z)(n,[{key:"toString",value:function(){return OW(this._root)}}]),n}(xW);function BB(i,s){s.value._routerState=i,s.children.forEach(function(n){return BB(i,n)})}function OW(i){var s=i.children.length>0?" { ".concat(i.children.map(OW).join(", ")," } "):"";return"".concat(i.value).concat(s)}function UB(i){if(i.snapshot){var s=i.snapshot,n=i._futureSnapshot;i.snapshot=n,id(s.queryParams,n.queryParams)||i.queryParams.next(n.queryParams),s.fragment!==n.fragment&&i.fragment.next(n.fragment),id(s.params,n.params)||i.params.next(n.params),function(i,s){if(i.length!==s.length)return!1;for(var n=0;n<i.length;++n)if(!id(i[n],s[n]))return!1;return!0}(s.url,n.url)||i.url.next(n.url),id(s.data,n.data)||i.data.next(n.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function VB(i,s){return id(i.params,s.params)&&function(i,s){return d_(i,s)&&i.every(function(n,r){return id(n.parameters,s[r].parameters)})}(i.url,s.url)&&!(!i.parent!=!s.parent)&&(!i.parent||VB(i.parent,s.parent))}function SP(i,s,n){if(n&&i.shouldReuseRoute(s.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=s.value;var a=function(i,s,n){return s.children.map(function(r){var o,a=(0,Re.Z)(n.children);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(i.shouldReuseRoute(r.value,u.value.snapshot))return SP(i,r,u)}}catch(c){a.e(c)}finally{a.f()}return SP(i,r)})}(i,s,n);return new fv(r,a)}if(i.shouldAttach(s.value)){var o=i.retrieve(s.value);if(null!==o){var u=o.route;return LW(s,u),u}}var c=function(i){return new Uw(new Wc(i.url),new Wc(i.params),new Wc(i.queryParams),new Wc(i.fragment),new Wc(i.data),i.outlet,i.component,i)}(s.value),d=s.children.map(function(m){return SP(i,m)});return new fv(c,d)}function LW(i,s){if(i.value.routeConfig!==s.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==s.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");s.value._futureSnapshot=i.value;for(var n=0;n<i.children.length;++n)LW(i.children[n],s.children[n])}function mJ(i,s,n,r,a){if(0===n.length)return HB(s.root,s.root,s,r,a);var o=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new FW(!0,0,i);var s=0,n=!1,r=i.reduce(function(a,o,u){if("object"==typeof o&&null!=o){if(o.outlets){var c={};return cu(o.outlets,function(d,m){c[m]="string"==typeof d?d.split("/"):d}),[].concat((0,Gr.Z)(a),[{outlets:c}])}if(o.segmentPath)return[].concat((0,Gr.Z)(a),[o.segmentPath])}return"string"!=typeof o?[].concat((0,Gr.Z)(a),[o]):0===u?(o.split("/").forEach(function(d,m){0==m&&"."===d||(0==m&&""===d?n=!0:".."===d?s++:""!=d&&a.push(d))}),a):[].concat((0,Gr.Z)(a),[o])},[]);return new FW(n,s,r)}(n);if(o.toRoot())return HB(s.root,new xi([],{}),s,r,a);var u=function(i,s,n){if(i.isAbsolute)return new zB(s.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new zB(r,r===s.root,0)}var o=TP(i.commands[0])?0:1;return function(i,s,n){for(var r=i,a=s,o=n;o>a;){if(o-=a,!(r=r.parent))throw new Error("Invalid number of '../'");a=r.segments.length}return new zB(r,!1,a-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+o,i.numberOfDoubleDots)}(o,s,i),c=u.processChildren?MP(u.segmentGroup,u.index,o.commands):ZW(u.segmentGroup,u.index,o.commands);return HB(u.segmentGroup,c,s,r,a)}function TP(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function nA(i){return"object"==typeof i&&null!=i&&i.outlets}function HB(i,s,n,r,a){var o={};return r&&cu(r,function(u,c){o[c]=Array.isArray(u)?u.map(function(d){return"".concat(d)}):"".concat(u)}),new h_(n.root===i?s:NW(n.root,i,s),o,a)}function NW(i,s,n){var r={};return cu(i.children,function(a,o){r[o]=a===s?n:NW(a,s,n)}),new xi(i.segments,r)}var FW=function(){function i(s,n,r){if((0,M.Z)(this,i),this.isAbsolute=s,this.numberOfDoubleDots=n,this.commands=r,s&&r.length>0&&TP(r[0]))throw new Error("Root segment cannot have matrix parameters");var a=r.find(nA);if(a&&a!==_W(r))throw new Error("{outlets:{}} has to be the last command")}return(0,D.Z)(i,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),i}(),zB=function i(s,n,r){(0,M.Z)(this,i),this.segmentGroup=s,this.processChildren=n,this.index=r};function ZW(i,s,n){if(i||(i=new xi([],{})),0===i.segments.length&&i.hasChildren())return MP(i,s,n);var r=function(i,s,n){for(var r=0,a=s,o={match:!1,pathIndex:0,commandIndex:0};a<i.segments.length;){if(r>=n.length)return o;var u=i.segments[a],c=n[r];if(nA(c))break;var d="".concat(c),m=r<n.length-1?n[r+1]:null;if(a>0&&void 0===d)break;if(d&&m&&"object"==typeof m&&void 0===m.outlets){if(!UW(d,m,u))return o;r+=2}else{if(!UW(d,{},u))return o;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(i,s,n),a=n.slice(r.commandIndex);if(r.match&&r.pathIndex<i.segments.length){var o=new xi(i.segments.slice(0,r.pathIndex),{});return o.children[pi]=new xi(i.segments.slice(r.pathIndex),i.children),MP(o,0,a)}return r.match&&0===a.length?new xi(i.segments,{}):r.match&&!i.hasChildren()?GB(i,s,n):r.match?MP(i,0,a):GB(i,s,n)}function MP(i,s,n){if(0===n.length)return new xi(i.segments,{});var r=function(i){return nA(i[0])?i[0].outlets:(0,ti.Z)({},pi,i)}(n),a={};return cu(r,function(o,u){"string"==typeof o&&(o=[o]),null!==o&&(a[u]=ZW(i.children[u],s,o))}),cu(i.children,function(o,u){void 0===r[u]&&(a[u]=o)}),new xi(i.segments,a)}function GB(i,s,n){for(var r=i.segments.slice(0,s),a=0;a<n.length;){var o=n[a];if(nA(o)){var u=kJ(o.outlets);return new xi(r,u)}if(0===a&&TP(n[0]))r.push(new JM(i.segments[s].path,BW(n[0]))),a++;else{var d=nA(o)?o.outlets[pi]:"".concat(o),m=a<n.length-1?n[a+1]:null;d&&m&&TP(m)?(r.push(new JM(d,BW(m))),a+=2):(r.push(new JM(d,{})),a++)}}return new xi(r,{})}function kJ(i){var s={};return cu(i,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(s[r]=GB(new xi([],{}),0,n))}),s}function BW(i){var s={};return cu(i,function(n,r){return s[r]="".concat(n)}),s}function UW(i,s,n){return i==n.path&&id(s,n.parameters)}var CJ=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.routeReuseStrategy=s,this.futureState=n,this.currState=r,this.forwardEvent=a}return(0,D.Z)(i,[{key:"activate",value:function(n){var r=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,a,n),UB(this.futureState.root),this.activateChildRoutes(r,a,n)}},{key:"deactivateChildRoutes",value:function(n,r,a){var o=this,u=tA(r);n.children.forEach(function(c){var d=c.value.outlet;o.deactivateRoutes(c,u[d],a),delete u[d]}),cu(u,function(c,d){o.deactivateRouteAndItsChildren(c,a)})}},{key:"deactivateRoutes",value:function(n,r,a){var o=n.value,u=r?r.value:null;if(o===u)if(o.component){var c=a.getContext(o.outlet);c&&this.deactivateChildRoutes(n,r,c.children)}else this.deactivateChildRoutes(n,r,a);else u&&this.deactivateRouteAndItsChildren(r,a)}},{key:"deactivateRouteAndItsChildren",value:function(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}},{key:"detachAndStoreRouteSubtree",value:function(n,r){var a=r.getContext(n.value.outlet);if(a&&a.outlet){var o=a.outlet.detach(),u=a.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:u})}}},{key:"deactivateRouteAndOutlet",value:function(n,r){for(var a=r.getContext(n.value.outlet),o=a&&n.value.component?a.children:r,u=tA(n),c=0,d=Object.keys(u);c<d.length;c++)this.deactivateRouteAndItsChildren(u[d[c]],o);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}},{key:"activateChildRoutes",value:function(n,r,a){var o=this,u=tA(r);n.children.forEach(function(c){o.activateRoutes(c,u[c.value.outlet],a),o.forwardEvent(new GQ(c.value.snapshot))}),n.children.length&&this.forwardEvent(new HQ(n.value.snapshot))}},{key:"activateRoutes",value:function(n,r,a){var o=n.value,u=r?r.value:null;if(UB(o),o===u)if(o.component){var c=a.getOrCreateContext(o.outlet);this.activateChildRoutes(n,r,c.children)}else this.activateChildRoutes(n,r,a);else if(o.component){var d=a.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){var m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),VW(m.route)}else{var _=function(i){for(var s=i.parent;s;s=s.parent){var n=s.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(o.snapshot),b=_?_.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=b,d.outlet&&d.outlet.activateWith(o,b),this.activateChildRoutes(n,null,d.children)}}else this.activateChildRoutes(n,null,a)}}]),i}();function VW(i){UB(i.value),i.children.forEach(VW)}var jB=function i(s,n){(0,M.Z)(this,i),this.routes=s,this.module=n};function Cm(i){return"function"==typeof i}function v_(i){return i instanceof h_}var rA=Symbol("INITIAL_VALUE");function iA(){return Ys(function(i){return function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];var r=void 0,a=void 0;return(0,a0.K)(s[s.length-1])&&(a=s.pop()),"function"==typeof s[s.length-1]&&(r=s.pop()),1===s.length&&(0,Jp.k)(s[0])&&(s=s[0]),(0,TQ.n)(s,a).lift(new AQ(r))}(i.map(function(s){return s.pipe(ml(1),au(rA))})).pipe(Vv(function(s,n){var r=!1;return n.reduce(function(a,o,u){return a!==rA?a:(o===rA&&(r=!0),r||!1!==o&&u!==n.length-1&&!v_(o)?a:o)},s)},rA),Ji(function(s){return s!==rA}),(0,ur.U)(function(s){return v_(s)?s:!0===s}),ml(1))})}var HW=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&v._UZ(0,"router-outlet")},directives:function(){return[XB]},encapsulation:2}),i}();function zW(i){for(var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<i.length;n++){var r=i[n],a=RJ(s,r);DJ(r,a)}}function DJ(i,s){i.children&&zW(i.children,s)}function RJ(i,s){return s?i||s.path?i&&!s.path?"".concat(i,"/"):!i&&s.path?s.path:"".concat(i,"/").concat(s.path):"":i}function WB(i){var s=i.children&&i.children.map(WB),n=s?Object.assign(Object.assign({},i),{children:s}):Object.assign({},i);return!n.component&&(s||n.loadChildren)&&n.outlet&&n.outlet!==pi&&(n.component=HW),n}function qc(i){return i.outlet||pi}function GW(i,s){var n=i.filter(function(r){return qc(r)===s});return n.push.apply(n,(0,Gr.Z)(i.filter(function(r){return qc(r)!==s}))),n}var jW={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function AP(i,s,n){var r;if(""===s.path)return"full"===s.pathMatch&&(i.hasChildren()||n.length>0)?Object.assign({},jW):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var o=(s.matcher||qQ)(n,i,s);if(!o)return Object.assign({},jW);var u={};cu(o.posParams,function(d,m){u[m]=d.path});var c=o.consumed.length>0?Object.assign(Object.assign({},u),o.consumed[o.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:c,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function xP(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&LJ(i,n,r)){var o=new xi(s,OJ(i,s,r,new xi(n,i.children)));return o._sourceSegment=i,o._segmentIndexShift=s.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&NJ(i,n,r)){var u=new xi(i.segments,PJ(i,s,n,r,i.children,a));return u._sourceSegment=i,u._segmentIndexShift=s.length,{segmentGroup:u,slicedSegments:n}}var c=new xi(i.segments,i.children);return c._sourceSegment=i,c._segmentIndexShift=s.length,{segmentGroup:c,slicedSegments:n}}function PJ(i,s,n,r,a,o){var d,u={},c=(0,Re.Z)(r);try{for(c.s();!(d=c.n()).done;){var m=d.value;if(IP(i,n,m)&&!a[qc(m)]){var _=new xi([],{});_._sourceSegment=i,_._segmentIndexShift="legacy"===o?i.segments.length:s.length,u[qc(m)]=_}}}catch(b){c.e(b)}finally{c.f()}return Object.assign(Object.assign({},a),u)}function OJ(i,s,n,r){var a={};a[pi]=r,r._sourceSegment=i,r._segmentIndexShift=s.length;var u,o=(0,Re.Z)(n);try{for(o.s();!(u=o.n()).done;){var c=u.value;if(""===c.path&&qc(c)!==pi){var d=new xi([],{});d._sourceSegment=i,d._segmentIndexShift=s.length,a[qc(c)]=d}}}catch(m){o.e(m)}finally{o.f()}return a}function LJ(i,s,n){return n.some(function(r){return IP(i,s,r)&&qc(r)!==pi})}function NJ(i,s,n){return n.some(function(r){return IP(i,s,r)})}function IP(i,s,n){return(!(i.hasChildren()||s.length>0)||"full"!==n.pathMatch)&&""===n.path}function WW(i,s,n,r){return!!(qc(i)===r||r!==pi&&IP(s,n,i))&&("**"===i.path||AP(s,i,n).matched)}function qW(i,s,n){return 0===s.length&&!i.children[n]}var aA=function i(s){(0,M.Z)(this,i),this.segmentGroup=s||null},YW=function i(s){(0,M.Z)(this,i),this.urlTree=s};function DP(i){return new ms.y(function(s){return s.error(new aA(i))})}function KW(i){return new ms.y(function(s){return s.error(new YW(i))})}function FJ(i){return new ms.y(function(s){return s.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(i,"'")))})}var UJ=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.configLoader=n,this.urlSerializer=r,this.urlTree=a,this.config=o,this.allowRedirects=!0,this.ngModule=s.get(v.h0i)}return(0,D.Z)(i,[{key:"apply",value:function(){var n=this,r=xP(this.urlTree.root,[],[],this.config).segmentGroup,a=new xi(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,a,pi).pipe((0,ur.U)(function(c){return n.createUrlTree(qB(c),n.urlTree.queryParams,n.urlTree.fragment)})).pipe(Em(function(c){if(c instanceof YW)return n.allowRedirects=!1,n.match(c.urlTree);throw c instanceof aA?n.noMatchError(c):c}))}},{key:"match",value:function(n){var r=this;return this.expandSegmentGroup(this.ngModule,this.config,n.root,pi).pipe((0,ur.U)(function(u){return r.createUrlTree(qB(u),n.queryParams,n.fragment)})).pipe(Em(function(u){throw u instanceof aA?r.noMatchError(u):u}))}},{key:"noMatchError",value:function(n){return new Error("Cannot match any routes. URL Segment: '".concat(n.segmentGroup,"'"))}},{key:"createUrlTree",value:function(n,r,a){var o=n.segments.length>0?new xi([],(0,ti.Z)({},pi,n)):n;return new h_(o,r,a)}},{key:"expandSegmentGroup",value:function(n,r,a,o){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(n,r,a).pipe((0,ur.U)(function(u){return new xi([],u)})):this.expandSegment(n,a,r,a.segments,o,!0)}},{key:"expandChildren",value:function(n,r,a){for(var o=this,u=[],c=0,d=Object.keys(a.children);c<d.length;c++){var m=d[c];"primary"===m?u.unshift(m):u.push(m)}return(0,as.D)(u).pipe(Fw(function(_){var b=a.children[_],E=GW(r,_);return o.expandSegmentGroup(n,E,b,_).pipe((0,ur.U)(function(T){return{segment:T,outlet:_}}))}),Vv(function(_,b){return _[b.outlet]=b.segment,_},{}),function(i,s){var n=arguments.length>=2;return function(r){return r.pipe(i?Ji(function(a,o){return i(a,o,r)}):ew.y,RB(1),n?jF(s):ev(function(){return new Jb}))}}())}},{key:"expandSegment",value:function(n,r,a,o,u,c){var d=this;return(0,as.D)(a).pipe(Fw(function(m){return d.expandSegmentAgainstRoute(n,r,a,m,o,u,c).pipe(Em(function(b){if(b instanceof aA)return(0,tr.of)(null);throw b}))}),Yh(function(m){return!!m}),Em(function(m,_){if(m instanceof Jb||"EmptyError"===m.name){if(qW(r,o,u))return(0,tr.of)(new xi([],{}));throw new aA(r)}throw m}))}},{key:"expandSegmentAgainstRoute",value:function(n,r,a,o,u,c,d){return WW(o,r,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,r,o,u,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,a,o,u,c):DP(r):DP(r)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(n,r,a,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,a,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,o,u,c)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(n,r,a,o){var u=this,c=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?KW(c):this.lineralizeSegments(a,c).pipe((0,$u.zg)(function(d){var m=new xi(d,{});return u.expandSegment(n,m,r,d,o,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(n,r,a,o,u,c){var d=this,m=AP(r,o,u),b=m.consumedSegments,E=m.lastChild,T=m.positionalParamSegments;if(!m.matched)return DP(r);var I=this.applyRedirectCommands(b,o.redirectTo,T);return o.redirectTo.startsWith("/")?KW(I):this.lineralizeSegments(o,I).pipe((0,$u.zg)(function(N){return d.expandSegment(n,r,a,N.concat(u.slice(E)),c,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(n,r,a,o,u){var c=this;if("**"===a.path)return a.loadChildren?(a._loadedConfig?(0,tr.of)(a._loadedConfig):this.configLoader.load(n.injector,a)).pipe((0,ur.U)(function(N){return a._loadedConfig=N,new xi(o,{})})):(0,tr.of)(new xi(o,{}));var m=AP(r,a,o),b=m.consumedSegments,E=m.lastChild;if(!m.matched)return DP(r);var T=o.slice(E);return this.getChildConfig(n,a,o).pipe((0,$u.zg)(function(N){var W=N.module,U=N.routes,H=xP(r,b,T,U),te=H.segmentGroup,ue=H.slicedSegments,le=new xi(te.segments,te.children);if(0===ue.length&&le.hasChildren())return c.expandChildren(W,U,le).pipe((0,ur.U)(function(Ue){return new xi(b,Ue)}));if(0===U.length&&0===ue.length)return(0,tr.of)(new xi(b,{}));var se=qc(a)===u;return c.expandSegment(W,le,U,ue,se?pi:u,!0).pipe((0,ur.U)(function(Ue){return new xi(b.concat(Ue.segments),Ue.children)}))}))}},{key:"getChildConfig",value:function(n,r,a){var o=this;return r.children?(0,tr.of)(new jB(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,tr.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,a).pipe((0,$u.zg)(function(u){return u?o.configLoader.load(n.injector,r).pipe((0,ur.U)(function(c){return r._loadedConfig=c,c})):function(i){return new ms.y(function(s){return s.error(OB("Cannot load children because the guard of the route \"path: '".concat(i.path,"'\" returned false")))})}(r)})):(0,tr.of)(new jB([],n))}},{key:"runCanLoadGuards",value:function(n,r,a){var o=this,u=r.canLoad;if(!u||0===u.length)return(0,tr.of)(!0);var c=u.map(function(d){var _,m=n.get(d);if(function(i){return i&&Cm(i.canLoad)}(m))_=m.canLoad(r,a);else{if(!Cm(m))throw new Error("Invalid CanLoad guard");_=m(r,a)}return ad(_)});return(0,tr.of)(c).pipe(iA(),(0,lu.b)(function(d){if(v_(d)){var m=OB('Redirecting to "'.concat(o.urlSerializer.serialize(d),'"'));throw m.url=d,m}}),(0,ur.U)(function(d){return!0===d}))}},{key:"lineralizeSegments",value:function(n,r){for(var a=[],o=r.root;;){if(a=a.concat(o.segments),0===o.numberOfChildren)return(0,tr.of)(a);if(o.numberOfChildren>1||!o.children[pi])return FJ(n.redirectTo);o=o.children[pi]}}},{key:"applyRedirectCommands",value:function(n,r,a){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,a)}},{key:"applyRedirectCreatreUrlTree",value:function(n,r,a,o){var u=this.createSegmentGroup(n,r.root,a,o);return new h_(u,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}},{key:"createQueryParams",value:function(n,r){var a={};return cu(n,function(o,u){if("string"==typeof o&&o.startsWith(":")){var d=o.substring(1);a[u]=r[d]}else a[u]=o}),a}},{key:"createSegmentGroup",value:function(n,r,a,o){var u=this,c=this.createSegments(n,r.segments,a,o),d={};return cu(r.children,function(m,_){d[_]=u.createSegmentGroup(n,m,a,o)}),new xi(c,d)}},{key:"createSegments",value:function(n,r,a,o){var u=this;return r.map(function(c){return c.path.startsWith(":")?u.findPosParam(n,c,o):u.findOrReturn(c,a)})}},{key:"findPosParam",value:function(n,r,a){var o=a[r.path.substring(1)];if(!o)throw new Error("Cannot redirect to '".concat(n,"'. Cannot find '").concat(r.path,"'."));return o}},{key:"findOrReturn",value:function(n,r){var u,a=0,o=(0,Re.Z)(r);try{for(o.s();!(u=o.n()).done;){var c=u.value;if(c.path===n.path)return r.splice(a),c;a++}}catch(d){o.e(d)}finally{o.f()}return n}}]),i}();function qB(i){for(var s={},n=0,r=Object.keys(i.children);n<r.length;n++){var a=r[n],u=qB(i.children[a]);(u.segments.length>0||u.hasChildren())&&(s[a]=u)}return function(i){if(1===i.numberOfChildren&&i.children[pi]){var s=i.children[pi];return new xi(i.segments.concat(s.segments),s.children)}return i}(new xi(i.segments,s))}var $W=function i(s){(0,M.Z)(this,i),this.path=s,this.route=this.path[this.path.length-1]},RP=function i(s,n){(0,M.Z)(this,i),this.component=s,this.route=n};function zJ(i,s,n){var r=i._root;return sA(r,s?s._root:null,n,[r.value])}function PP(i,s,n){var r=function(i){if(!i)return null;for(var s=i.parent;s;s=s.parent){var n=s.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(s);return(r?r.module.injector:n).get(i)}function sA(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=tA(s);return i.children.forEach(function(u){WJ(u,o[u.value.outlet],n,r.concat([u.value]),a),delete o[u.value.outlet]}),cu(o,function(u,c){return oA(u,n.getContext(c),a)}),a}function WJ(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=i.value,u=s?s.value:null,c=n?n.getContext(i.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){var d=qJ(u,o,o.routeConfig.runGuardsAndResolvers);d?a.canActivateChecks.push(new $W(r)):(o.data=u.data,o._resolvedData=u._resolvedData),sA(i,s,o.component?c?c.children:null:n,r,a),d&&c&&c.outlet&&c.outlet.isActivated&&a.canDeactivateChecks.push(new RP(c.outlet.component,u))}else u&&oA(s,c,a),a.canActivateChecks.push(new $W(r)),sA(i,null,o.component?c?c.children:null:n,r,a);return a}function qJ(i,s,n){if("function"==typeof n)return n(i,s);switch(n){case"pathParamsChange":return!d_(i.url,s.url);case"pathParamsOrQueryParamsChange":return!d_(i.url,s.url)||!id(i.queryParams,s.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VB(i,s)||!id(i.queryParams,s.queryParams);case"paramsChange":default:return!VB(i,s)}}function oA(i,s,n){var r=tA(i),a=i.value;cu(r,function(o,u){oA(o,a.component?s?s.children.getContext(u):null:s,n)}),n.canDeactivateChecks.push(new RP(a.component&&s&&s.outlet&&s.outlet.isActivated?s.outlet.component:null,a))}var nee=function i(){(0,M.Z)(this,i)};function XW(i){return new ms.y(function(s){return s.error(i)})}var iee=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.rootComponentType=s,this.config=n,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=u}return(0,D.Z)(i,[{key:"recognize",value:function(){var n=xP(this.urlTree.root,[],[],this.config.filter(function(c){return void 0===c.redirectTo}),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,pi);if(null===r)return null;var a=new CP([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},pi,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new fv(a,r),u=new PW(this.url,o);return this.inheritParamsAndData(u._root),u}},{key:"inheritParamsAndData",value:function(n){var r=this,a=n.value,o=RW(a,this.paramsInheritanceStrategy);a.params=Object.freeze(o.params),a.data=Object.freeze(o.data),n.children.forEach(function(u){return r.inheritParamsAndData(u)})}},{key:"processSegmentGroup",value:function(n,r,a){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,a)}},{key:"processChildren",value:function(n,r){for(var a=[],o=0,u=Object.keys(r.children);o<u.length;o++){var c=u[o],d=r.children[c],m=GW(n,c),_=this.processSegmentGroup(m,d,c);if(null===_)return null;a.push.apply(a,(0,Gr.Z)(_))}var b=QW(a);return function(i){i.sort(function(s,n){return s.value.outlet===pi?-1:n.value.outlet===pi?1:s.value.outlet.localeCompare(n.value.outlet)})}(b),b}},{key:"processSegment",value:function(n,r,a,o){var c,u=(0,Re.Z)(n);try{for(u.s();!(c=u.n()).done;){var m=this.processSegmentAgainstRoute(c.value,r,a,o);if(null!==m)return m}}catch(_){u.e(_)}finally{u.f()}return qW(r,a,o)?[]:null}},{key:"processSegmentAgainstRoute",value:function(n,r,a,o){if(n.redirectTo||!WW(n,r,a,o))return null;var u,c=[],d=[];if("**"===n.path){var m=a.length>0?_W(a).parameters:{};u=new CP(a,m,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,t4(n),qc(n),n.component,n,JW(r),e4(r)+a.length,n4(n))}else{var _=AP(r,n,a);if(!_.matched)return null;c=_.consumedSegments,d=a.slice(_.lastChild),u=new CP(c,_.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,t4(n),qc(n),n.component,n,JW(r),e4(r)+c.length,n4(n))}var b=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(n),E=xP(r,c,d,b.filter(function(H){return void 0===H.redirectTo}),this.relativeLinkResolution),T=E.segmentGroup,I=E.slicedSegments;if(0===I.length&&T.hasChildren()){var N=this.processChildren(b,T);return null===N?null:[new fv(u,N)]}if(0===b.length&&0===I.length)return[new fv(u,[])];var W=qc(n)===o,U=this.processSegment(b,T,I,W?pi:o);return null===U?null:[new fv(u,U)]}}]),i}();function QW(i){var a,s=[],n=new Set,r=(0,Re.Z)(i);try{var o=function(){var E=a.value;if(!function(i){var s=i.value.routeConfig;return s&&""===s.path&&void 0===s.redirectTo}(E))return s.push(E),"continue";var I,T=s.find(function(N){return E.value.routeConfig===N.value.routeConfig});void 0!==T?((I=T.children).push.apply(I,(0,Gr.Z)(E.children)),n.add(T)):s.push(E)};for(r.s();!(a=r.n()).done;)o()}catch(b){r.e(b)}finally{r.f()}var d,c=(0,Re.Z)(n);try{for(c.s();!(d=c.n()).done;){var m=d.value,_=QW(m.children);s.push(new fv(m.value,_))}}catch(b){c.e(b)}finally{c.f()}return s.filter(function(b){return!n.has(b)})}function JW(i){for(var s=i;s._sourceSegment;)s=s._sourceSegment;return s}function e4(i){for(var s=i,n=s._segmentIndexShift?s._segmentIndexShift:0;s._sourceSegment;)n+=(s=s._sourceSegment)._segmentIndexShift?s._segmentIndexShift:0;return n-1}function t4(i){return i.data||{}}function n4(i){return i.resolve||{}}function YB(i){return Ys(function(s){var n=i(s);return n?(0,as.D)(n).pipe((0,ur.U)(function(){return s})):(0,tr.of)(s)})}var pee=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"shouldDetach",value:function(n){return!1}},{key:"store",value:function(n,r){}},{key:"shouldAttach",value:function(n){return!1}},{key:"retrieve",value:function(n){return null}},{key:"shouldReuseRoute",value:function(n,r){return n.routeConfig===r.routeConfig}}]),i}()),KB=new v.OlP("ROUTES"),r4=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.loader=s,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=a}return(0,D.Z)(i,[{key:"load",value:function(n,r){var a=this;if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);var u=this.loadModuleFactory(r.loadChildren).pipe((0,ur.U)(function(c){a.onLoadEndListener&&a.onLoadEndListener(r);var d=c.create(n);return new jB(yW(d.injector.get(KB,void 0,v.XFs.Self|v.XFs.Optional)).map(WB),d)}),Em(function(c){throw r._loader$=void 0,c}));return r._loader$=new IQ.c(u,function(){return new Er.xQ}).pipe((0,OQ.x)()),r._loader$}},{key:"loadModuleFactory",value:function(n){var r=this;return"string"==typeof n?(0,as.D)(this.loader.load(n)):ad(n()).pipe((0,$u.zg)(function(a){return a instanceof v.YKP?(0,tr.of)(a):(0,as.D)(r.compiler.compileModuleAsync(a))}))}}]),i}(),mee=function i(){(0,M.Z)(this,i),this.outlet=null,this.route=null,this.resolver=null,this.children=new Vw,this.attachRef=null},Vw=function(){function i(){(0,M.Z)(this,i),this.contexts=new Map}return(0,D.Z)(i,[{key:"onChildOutletCreated",value:function(n,r){var a=this.getOrCreateContext(n);a.outlet=r,this.contexts.set(n,a)}},{key:"onChildOutletDestroyed",value:function(n){var r=this.getContext(n);r&&(r.outlet=null)}},{key:"onOutletDeactivated",value:function(){var n=this.contexts;return this.contexts=new Map,n}},{key:"onOutletReAttached",value:function(n){this.contexts=n}},{key:"getOrCreateContext",value:function(n){var r=this.getContext(n);return r||(r=new mee,this.contexts.set(n,r)),r}},{key:"getContext",value:function(n){return this.contexts.get(n)||null}}]),i}(),yee=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"shouldProcessUrl",value:function(n){return!0}},{key:"extract",value:function(n){return n}},{key:"merge",value:function(n,r){return n}}]),i}();function _ee(i){throw i}function bee(i,s,n){return s.parse("/")}function i4(i,s){return(0,tr.of)(null)}var wee={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kee={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tu=function(){var i=function(){function s(n,r,a,o,u,c,d,m){var _=this;(0,M.Z)(this,s),this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=a,this.location=o,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Er.xQ,this.errorHandler=_ee,this.malformedUriErrorHandler=bee,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:i4,afterPreactivation:i4},this.urlHandlingStrategy=new yee,this.routeReuseStrategy=new pee,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(v.h0i),this.console=u.get(v.c2e);var T=u.get(v.R0b);this.isNgZoneEnabled=T instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=new h_(new xi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new r4(c,d,function(N){return _.triggerEvent(new dW(N))},function(N){return _.triggerEvent(new vW(N))}),this.routerState=DW(this.currentUrlTree,this.rootComponentType),this.transitions=new Wc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return(0,D.Z)(s,[{key:"browserPageId",get:function(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}},{key:"setupNavigations",value:function(r){var a=this,o=this.events;return r.pipe(Ji(function(u){return 0!==u.id}),(0,ur.U)(function(u){return Object.assign(Object.assign({},u),{extractedUrl:a.urlHandlingStrategy.extract(u.rawUrl)})}),Ys(function(u){var c=!1,d=!1;return(0,tr.of)(u).pipe((0,lu.b)(function(m){a.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:a.lastSuccessfulNavigation?Object.assign(Object.assign({},a.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ys(function(m){var _=a.browserUrlTree.toString(),b=!a.navigated||m.extractedUrl.toString()!==_||_!==a.currentUrlTree.toString();if(("reload"===a.onSameUrlNavigation||b)&&a.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return OP(m.source)&&(a.browserUrlTree=m.extractedUrl),(0,tr.of)(m).pipe(Ys(function(le){var he=a.transitions.getValue();return o.next(new PB(le.id,a.serializeUrl(le.extractedUrl),le.source,le.restoredState)),he!==a.transitions.getValue()?If.E:Promise.resolve(le)}),function(i,s,n,r){return Ys(function(a){return function(i,s,n,r,a){return new UJ(i,s,n,r,a).apply()}(i,s,n,a.extractedUrl,r).pipe((0,ur.U)(function(o){return Object.assign(Object.assign({},a),{urlAfterRedirects:o})}))})}(a.ngModule.injector,a.configLoader,a.urlSerializer,a.config),(0,lu.b)(function(le){a.currentNavigation=Object.assign(Object.assign({},a.currentNavigation),{finalUrl:le.urlAfterRedirects})}),function(i,s,n,r,a){return(0,$u.zg)(function(o){return function(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var u=new iee(i,s,n,r,a,o).recognize();return null===u?XW(new nee):(0,tr.of)(u)}catch(c){return XW(c)}}(i,s,o.urlAfterRedirects,n(o.urlAfterRedirects),r,a).pipe((0,ur.U)(function(u){return Object.assign(Object.assign({},o),{targetSnapshot:u})}))})}(a.rootComponentType,a.config,function(le){return a.serializeUrl(le)},a.paramsInheritanceStrategy,a.relativeLinkResolution),(0,lu.b)(function(le){"eager"===a.urlUpdateStrategy&&(le.extras.skipLocationChange||a.setBrowserUrl(le.urlAfterRedirects,le),a.browserUrlTree=le.urlAfterRedirects);var he=new NQ(le.id,a.serializeUrl(le.extractedUrl),a.serializeUrl(le.urlAfterRedirects),le.targetSnapshot);o.next(he)}));if(b&&a.rawUrlTree&&a.urlHandlingStrategy.shouldProcessUrl(a.rawUrlTree)){var N=m.extractedUrl,W=m.source,U=m.restoredState,H=m.extras,te=new PB(m.id,a.serializeUrl(N),W,U);o.next(te);var ue=DW(N,a.rootComponentType).snapshot;return(0,tr.of)(Object.assign(Object.assign({},m),{targetSnapshot:ue,urlAfterRedirects:N,extras:Object.assign(Object.assign({},H),{skipLocationChange:!1,replaceUrl:!1})}))}return a.rawUrlTree=m.rawUrl,a.browserUrlTree=m.urlAfterRedirects,m.resolve(null),If.E}),YB(function(m){var I=m.extras;return a.hooks.beforePreactivation(m.targetSnapshot,{navigationId:m.id,appliedUrlTree:m.extractedUrl,rawUrlTree:m.rawUrl,skipLocationChange:!!I.skipLocationChange,replaceUrl:!!I.replaceUrl})}),(0,lu.b)(function(m){var _=new FQ(m.id,a.serializeUrl(m.extractedUrl),a.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);a.triggerEvent(_)}),(0,ur.U)(function(m){return Object.assign(Object.assign({},m),{guards:zJ(m.targetSnapshot,m.currentSnapshot,a.rootContexts)})}),function(i,s){return(0,$u.zg)(function(n){var r=n.targetSnapshot,a=n.currentSnapshot,o=n.guards,u=o.canActivateChecks,c=o.canDeactivateChecks;return 0===c.length&&0===u.length?(0,tr.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(i,s,n,r){return(0,as.D)(i).pipe((0,$u.zg)(function(a){return function(i,s,n,r,a){var o=s&&s.routeConfig?s.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,tr.of)(!0);var u=o.map(function(c){var m,d=PP(c,s,a);if(function(i){return i&&Cm(i.canDeactivate)}(d))m=ad(d.canDeactivate(i,s,n,r));else{if(!Cm(d))throw new Error("Invalid CanDeactivate guard");m=ad(d(i,s,n,r))}return m.pipe(Yh())});return(0,tr.of)(u).pipe(iA())}(a.component,a.route,n,s,r)}),Yh(function(a){return!0!==a},!0))}(c,r,a,i).pipe((0,$u.zg)(function(d){return d&&function(i){return"boolean"==typeof i}(d)?function(i,s,n,r){return(0,as.D)(s).pipe(Fw(function(a){return hE(function(i,s){return null!==i&&s&&s(new VQ(i)),(0,tr.of)(!0)}(a.route.parent,r),function(i,s){return null!==i&&s&&s(new zQ(i)),(0,tr.of)(!0)}(a.route,r),function(i,s,n){var r=s[s.length-1],o=s.slice(0,s.length-1).reverse().map(function(u){return function(i){var s=i.routeConfig?i.routeConfig.canActivateChild:null;return s&&0!==s.length?{node:i,guards:s}:null}(u)}).filter(function(u){return null!==u}).map(function(u){return fW(function(){var c=u.guards.map(function(d){var _,m=PP(d,u.node,n);if(function(i){return i&&Cm(i.canActivateChild)}(m))_=ad(m.canActivateChild(r,i));else{if(!Cm(m))throw new Error("Invalid CanActivateChild guard");_=ad(m(r,i))}return _.pipe(Yh())});return(0,tr.of)(c).pipe(iA())})});return(0,tr.of)(o).pipe(iA())}(i,a.path,n),function(i,s,n){var r=s.routeConfig?s.routeConfig.canActivate:null;if(!r||0===r.length)return(0,tr.of)(!0);var a=r.map(function(o){return fW(function(){var c,u=PP(o,s,n);if(function(i){return i&&Cm(i.canActivate)}(u))c=ad(u.canActivate(s,i));else{if(!Cm(u))throw new Error("Invalid CanActivate guard");c=ad(u(s,i))}return c.pipe(Yh())})});return(0,tr.of)(a).pipe(iA())}(i,a.route,n))}),Yh(function(a){return!0!==a},!0))}(r,u,i,s):(0,tr.of)(d)}),(0,ur.U)(function(d){return Object.assign(Object.assign({},n),{guardsResult:d})}))})}(a.ngModule.injector,function(m){return a.triggerEvent(m)}),(0,lu.b)(function(m){if(v_(m.guardsResult)){var _=OB('Redirecting to "'.concat(a.serializeUrl(m.guardsResult),'"'));throw _.url=m.guardsResult,_}var b=new ZQ(m.id,a.serializeUrl(m.extractedUrl),a.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);a.triggerEvent(b)}),Ji(function(m){return!!m.guardsResult||(a.restoreHistory(m),a.cancelNavigationTransition(m,""),!1)}),YB(function(m){if(m.guards.canActivateChecks.length)return(0,tr.of)(m).pipe((0,lu.b)(function(_){var b=new BQ(_.id,a.serializeUrl(_.extractedUrl),a.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);a.triggerEvent(b)}),Ys(function(_){var b=!1;return(0,tr.of)(_).pipe(function(i,s){return(0,$u.zg)(function(n){var r=n.targetSnapshot,a=n.guards.canActivateChecks;if(!a.length)return(0,tr.of)(n);var o=0;return(0,as.D)(a).pipe(Fw(function(u){return function(i,s,n,r){return function(i,s,n,r){var a=Object.keys(i);if(0===a.length)return(0,tr.of)({});var o={};return(0,as.D)(a).pipe((0,$u.zg)(function(u){return function(i,s,n,r){var a=PP(i,s,r);return ad(a.resolve?a.resolve(s,n):a(s,n))}(i[u],s,n,r).pipe((0,lu.b)(function(c){o[u]=c}))}),RB(1),(0,$u.zg)(function(){return Object.keys(o).length===a.length?(0,tr.of)(o):If.E}))}(i._resolve,i,s,r).pipe((0,ur.U)(function(o){return i._resolvedData=o,i.data=Object.assign(Object.assign({},i.data),RW(i,n).resolve),null}))}(u.route,r,i,s)}),(0,lu.b)(function(){return o++}),RB(1),(0,$u.zg)(function(u){return o===a.length?(0,tr.of)(n):If.E}))})}(a.paramsInheritanceStrategy,a.ngModule.injector),(0,lu.b)({next:function(){return b=!0},complete:function(){b||(a.restoreHistory(_),a.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,lu.b)(function(_){var b=new UQ(_.id,a.serializeUrl(_.extractedUrl),a.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);a.triggerEvent(b)}))}),YB(function(m){var I=m.extras;return a.hooks.afterPreactivation(m.targetSnapshot,{navigationId:m.id,appliedUrlTree:m.extractedUrl,rawUrlTree:m.rawUrl,skipLocationChange:!!I.skipLocationChange,replaceUrl:!!I.replaceUrl})}),(0,ur.U)(function(m){var _=function(i,s,n){var r=SP(i,s._root,n?n._root:void 0);return new IW(r,s)}(a.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:_})}),(0,lu.b)(function(m){a.currentUrlTree=m.urlAfterRedirects,a.rawUrlTree=a.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),a.routerState=m.targetRouterState,"deferred"===a.urlUpdateStrategy&&(m.extras.skipLocationChange||a.setBrowserUrl(a.rawUrlTree,m),a.browserUrlTree=m.urlAfterRedirects)}),function(s,n,r){return(0,ur.U)(function(a){return new CJ(n,a.targetRouterState,a.currentRouterState,r).activate(s),a})}(a.rootContexts,a.routeReuseStrategy,function(m){return a.triggerEvent(m)}),(0,lu.b)({next:function(){c=!0},complete:function(){c=!0}}),function(i){return function(s){return s.lift(new rX(i))}}(function(){if(!c&&!d){var m="Navigation ID ".concat(u.id," is not equal to the current navigation id ").concat(a.navigationId);"replace"===a.canceledNavigationResolution&&a.restoreHistory(u),a.cancelNavigationTransition(u,m)}a.currentNavigation=null}),Em(function(m){if(d=!0,function(i){return i&&i[mW]}(m)){var _=v_(m.url);_||(a.navigated=!0,a.restoreHistory(u,!0));var b=new hW(u.id,a.serializeUrl(u.extractedUrl),m.message);o.next(b),_?setTimeout(function(){var T=a.urlHandlingStrategy.merge(m.url,a.rawUrlTree),I={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===a.urlUpdateStrategy||OP(u.source)};a.scheduleNavigation(T,"imperative",null,I,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{a.restoreHistory(u,!0);var E=new LQ(u.id,a.serializeUrl(u.extractedUrl),m);o.next(E);try{u.resolve(a.errorHandler(m))}catch(T){u.reject(T)}}return If.E}))}))}},{key:"resetRootComponentType",value:function(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}},{key:"setTransition",value:function(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var r=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(a){var o=r.extractLocationChangeInfoFromEvent(a);r.shouldScheduleNavigation(r.lastLocationChangeInfo,o)&&setTimeout(function(){var u=o.source,c=o.state,d=o.urlTree,m={replaceUrl:!0};if(c){var _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(m.state=_)}r.scheduleNavigation(d,u,c,m)},0),r.lastLocationChangeInfo=o}))}},{key:"extractLocationChangeInfoFromEvent",value:function(r){var a;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(a=r.state)||void 0===a?void 0:a.navigationId)?r.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(r,a){if(!r)return!0;var o=a.urlTree.toString()===r.urlTree.toString();return!(a.transitionId===r.transitionId&&o&&("hashchange"===a.source&&"popstate"===r.source||"popstate"===a.source&&"hashchange"===r.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(r){this.events.next(r)}},{key:"resetConfig",value:function(r){zW(r),this.config=r.map(WB),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.relativeTo,u=a.queryParams,c=a.fragment,d=a.queryParamsHandling,m=a.preserveFragment,_=o||this.routerState.root,b=m?this.currentUrlTree.fragment:c,E=null;switch(d){case"merge":E=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":E=this.currentUrlTree.queryParams;break;default:E=u||null}return null!==E&&(E=this.removeEmptyProps(E)),mJ(_,this.currentUrlTree,r,E,null!=b?b:null)}},{key:"navigateByUrl",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},o=v_(r)?r:this.parseUrl(r),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,a)}},{key:"navigate",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return Eee(r),this.navigateByUrl(this.createUrlTree(r,a),a)}},{key:"serializeUrl",value:function(r){return this.urlSerializer.serialize(r)}},{key:"parseUrl",value:function(r){var a;try{a=this.urlSerializer.parse(r)}catch(o){a=this.malformedUriErrorHandler(o,this.urlSerializer,r)}return a}},{key:"isActive",value:function(r,a){var o;if(o=!0===a?Object.assign({},wee):!1===a?Object.assign({},kee):a,v_(r))return wW(this.currentUrlTree,r,o);var u=this.parseUrl(r);return wW(this.currentUrlTree,u,o)}},{key:"removeEmptyProps",value:function(r){return Object.keys(r).reduce(function(a,o){var u=r[o];return null!=u&&(a[o]=u),a},{})}},{key:"processNavigations",value:function(){var r=this;this.navigations.subscribe(function(a){r.navigated=!0,r.lastSuccessfulId=a.id,r.currentPageId=a.targetPageId,r.events.next(new QM(a.id,r.serializeUrl(a.extractedUrl),r.serializeUrl(r.currentUrlTree))),r.lastSuccessfulNavigation=r.currentNavigation,a.resolve(!0)},function(a){r.console.warn("Unhandled Navigation Error: ".concat(a))})}},{key:"scheduleNavigation",value:function(r,a,o,u,c){var d,m;if(this.disposed)return Promise.resolve(!1);var N,W,U,_=this.getTransition(),b=OP(a)&&_&&!OP(_.source),I=(this.lastSuccessfulId===_.id||this.currentNavigation?_.rawUrl:_.urlAfterRedirects).toString()===r.toString();if(b&&I)return Promise.resolve(!0);c?(N=c.resolve,W=c.reject,U=c.promise):U=new Promise(function(le,he){N=le,W=he});var te,H=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),te=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):te=0,this.setTransition({id:H,targetPageId:te,source:a,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:u,resolve:N,reject:W,promise:U,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),U.catch(function(le){return Promise.reject(le)})}},{key:"setBrowserUrl",value:function(r,a){var o=this.urlSerializer.serialize(r),u=Object.assign(Object.assign({},a.extras.state),this.generateNgRouterState(a.id,a.targetPageId));this.location.isCurrentPathEqualTo(o)||a.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}},{key:"restoreHistory",value:function(r){var o,u,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var c=this.currentPageId-r.targetPageId,d="popstate"===r.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl);d&&0!==c?this.location.historyGo(c):this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(r),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(r,a){var o=new hW(r.id,this.serializeUrl(r.extractedUrl),a);this.triggerEvent(o),r.resolve(!1)}},{key:"generateNgRouterState",value:function(r,a){return"computed"===this.canceledNavigationResolution?{navigationId:r,"\u0275routerPageId":a}:{navigationId:r}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.DyG),v.LFG(LB),v.LFG(Vw),v.LFG(Zt),v.LFG(v.zs3),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(void 0))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();function Eee(i){for(var s=0;s<i.length;s++){var n=i[s];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(s))}}function OP(i){return"imperative"!==i}var $B=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.router=n,this.route=r,this.commands=[],this.onChanges=new Er.xQ,null==a&&o.setAttribute(u.nativeElement,"tabindex","0")}return(0,D.Z)(s,[{key:"ngOnChanges",value:function(r){this.onChanges.next(this)}},{key:"routerLink",set:function(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}},{key:"onClick",value:function(){var r={skipLocationChange:Hw(this.skipLocationChange),replaceUrl:Hw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Hw(this.preserveFragment)})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(Tu),v.Y36(Uw),v.$8M("tabindex"),v.Y36(v.Qsj),v.Y36(v.SBq))},i.\u0275dir=v.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,r){1&n&&v.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[v.TTD]}),i}(),LP=function(){var i=function(){function s(n,r,a){var o=this;(0,M.Z)(this,s),this.router=n,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new Er.xQ,this.subscription=n.events.subscribe(function(u){u instanceof QM&&o.updateTargetUrlAndHref()})}return(0,D.Z)(s,[{key:"routerLink",set:function(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}},{key:"ngOnChanges",value:function(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(r,a,o,u,c){if(0!==r||a||o||u||c||"string"==typeof this.target&&"_self"!=this.target)return!0;var d={skipLocationChange:Hw(this.skipLocationChange),replaceUrl:Hw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Hw(this.preserveFragment)})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(Tu),v.Y36(Uw),v.Y36(vn))},i.\u0275dir=v.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,r){1&n&&v.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&(v.Ikx("href",r.href,v.LSH),v.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[v.TTD]}),i}();function Hw(i){return""===i||!!i}var a4=function(){var i=function(){function s(n,r,a,o,u,c){var d=this;(0,M.Z)(this,s),this.router=n,this.element=r,this.renderer=a,this.cdr=o,this.link=u,this.linkWithHref=c,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=n.events.subscribe(function(m){m instanceof QM&&d.update()})}return(0,D.Z)(s,[{key:"ngAfterContentInit",value:function(){var r=this;(0,tr.of)(this.links.changes,this.linksWithHrefs.changes,(0,tr.of)(null)).pipe((0,r0.J)()).subscribe(function(a){r.update(),r.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var a,r=this;null===(a=this.linkInputChangesSubscription)||void 0===a||a.unsubscribe();var o=[].concat((0,Gr.Z)(this.links.toArray()),(0,Gr.Z)(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(u){return!!u}).map(function(u){return u.onChanges});this.linkInputChangesSubscription=(0,as.D)(o).pipe((0,r0.J)()).subscribe(function(u){r.isActive!==r.isLinkActive(r.router)(u)&&r.update()})}},{key:"routerLinkActive",set:function(r){var a=Array.isArray(r)?r:r.split(" ");this.classes=a.filter(function(o){return!!o})}},{key:"ngOnChanges",value:function(r){this.update()}},{key:"ngOnDestroy",value:function(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}},{key:"update",value:function(){var r=this;!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(function(){var a=r.hasActiveLinks();r.isActive!==a&&(r.isActive=a,r.cdr.markForCheck(),r.classes.forEach(function(o){a?r.renderer.addClass(r.element.nativeElement,o):r.renderer.removeClass(r.element.nativeElement,o)}))})}},{key:"isLinkActive",value:function(r){var a=function(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(o){return r.isActive(o.urlTree,a)}}},{key:"hasActiveLinks",value:function(){var r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(Tu),v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.sBO),v.Y36($B,8),v.Y36(LP,8))},i.\u0275dir=v.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,a){var o;1&n&&(v.Suo(a,$B,5),v.Suo(a,LP,5)),2&n&&(v.iGM(o=v.CRH())&&(r.links=o),v.iGM(o=v.CRH())&&(r.linksWithHrefs=o))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[v.TTD]}),i}(),XB=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.parentContexts=n,this.location=r,this.resolver=a,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.name=o||pi,n.onChildOutletCreated(this.name,this)}return(0,D.Z)(s,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var r=this.activated;return this.activated=null,this._activatedRoute=null,r}},{key:"attach",value:function(r,a){this.activated=r,this._activatedRoute=a,this.location.insert(r.hostView)}},{key:"deactivate",value:function(){if(this.activated){var r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}},{key:"activateWith",value:function(r,a){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;var c=(a=a||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,m=new See(r,d,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(Vw),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},i.\u0275dir=v.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i}(),See=function(){function i(s,n,r){(0,M.Z)(this,i),this.route=s,this.childContexts=n,this.parent=r}return(0,D.Z)(i,[{key:"get",value:function(n,r){return n===Uw?this.route:n===Vw?this.childContexts:this.parent.get(n,r)}}]),i}(),s4=function i(){(0,M.Z)(this,i)},Tee=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"preload",value:function(n,r){return r().pipe(Em(function(){return(0,tr.of)(null)}))}}]),i}(),o4=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"preload",value:function(n,r){return(0,tr.of)(null)}}]),i}(),u4=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.router=n,this.injector=o,this.preloadingStrategy=u,this.loader=new r4(r,a,function(_){return n.triggerEvent(new dW(_))},function(_){return n.triggerEvent(new vW(_))})}return(0,D.Z)(s,[{key:"setUpPreloading",value:function(){var r=this;this.subscription=this.router.events.pipe(Ji(function(a){return a instanceof QM}),Fw(function(){return r.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var r=this.injector.get(v.h0i);return this.processRoutes(r,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(r,a){var c,o=[],u=(0,Re.Z)(a);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(d.loadChildren&&!d.canLoad&&d._loadedConfig){var m=d._loadedConfig;o.push(this.processRoutes(m.module,m.routes))}else d.loadChildren&&!d.canLoad?o.push(this.preloadConfig(r,d)):d.children&&o.push(this.processRoutes(r,d.children))}}catch(_){u.e(_)}finally{u.f()}return(0,as.D)(o).pipe((0,r0.J)(),(0,ur.U)(function(_){}))}},{key:"preloadConfig",value:function(r,a){var o=this;return this.preloadingStrategy.preload(a,function(){return(a._loadedConfig?(0,tr.of)(a._loadedConfig):o.loader.load(r.injector,a)).pipe((0,$u.zg)(function(c){return a._loadedConfig=c,o.processRoutes(c.module,c.routes)}))})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Tu),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(s4))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),QB=function(){var i=function(){function s(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,M.Z)(this,s),this.router=n,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}return(0,D.Z)(s,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(a){a instanceof PB?(r.store[r.lastId]=r.viewportScroller.getScrollPosition(),r.lastSource=a.navigationTrigger,r.restoredId=a.restoredState?a.restoredState.navigationId:0):a instanceof QM&&(r.lastId=a.id,r.scheduleScrollEvent(a,r.router.parseUrl(a.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(a){a instanceof pW&&(a.position?"top"===r.options.scrollPositionRestoration?r.viewportScroller.scrollToPosition([0,0]):"enabled"===r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition(a.position):a.anchor&&"enabled"===r.options.anchorScrolling?r.viewportScroller.scrollToAnchor(a.anchor):"disabled"!==r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(r,a){this.router.triggerEvent(new pW(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Tu),v.LFG(yt),v.LFG(void 0))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),p_=new v.OlP("ROUTER_CONFIGURATION"),l4=new v.OlP("ROUTER_FORROOT_GUARD"),Aee=[Zt,{provide:LB,useClass:SW},{provide:Tu,useFactory:function(i,s,n,r,a,o,u){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},d=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,_=new Tu(null,i,s,n,r,a,o,yW(u));return d&&(_.urlHandlingStrategy=d),m&&(_.routeReuseStrategy=m),Oee(c,_),c.enableTracing&&_.events.subscribe(function(b){var E,T;null===(E=console.group)||void 0===E||E.call(console,"Router Event: ".concat(b.constructor.name)),console.log(b.toString()),console.log(b),null===(T=console.groupEnd)||void 0===T||T.call(console)}),_},deps:[LB,Vw,Zt,v.zs3,v.v3s,v.Sil,KB,p_,[function i(){(0,M.Z)(this,i)},new v.FiY],[function i(){(0,M.Z)(this,i)},new v.FiY]]},Vw,{provide:Uw,useFactory:function(i){return i.routerState.root},deps:[Tu]},{provide:v.v3s,useClass:v.EAV},u4,o4,Tee,{provide:p_,useValue:{enableTracing:!1}}];function xee(){return new v.PXZ("Router",Tu)}var c4=function(){var i=function(){function s(n,r){(0,M.Z)(this,s)}return(0,D.Z)(s,null,[{key:"forRoot",value:function(r,a){return{ngModule:s,providers:[Aee,f4(r),{provide:l4,useFactory:Ree,deps:[[Tu,new v.FiY,new v.tp0]]},{provide:p_,useValue:a||{}},{provide:vn,useFactory:Dee,deps:[Ae,[new v.tBr(xt),new v.FiY],p_]},{provide:QB,useFactory:Iee,deps:[Tu,yt,p_]},{provide:s4,useExisting:a&&a.preloadingStrategy?a.preloadingStrategy:o4},{provide:v.PXZ,multi:!0,useFactory:xee},[JB,{provide:v.ip1,multi:!0,useFactory:Nee,deps:[JB]},{provide:h4,useFactory:Fee,deps:[JB]},{provide:v.tb,multi:!0,useExisting:h4}]]}}},{key:"forChild",value:function(r){return{ngModule:s,providers:[f4(r)]}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(l4,8),v.LFG(Tu,8))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}();function Iee(i,s,n){return n.scrollOffset&&s.setOffset(n.scrollOffset),new QB(i,s,n)}function Dee(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Ct(i,s):new Ot(i,s)}function Ree(i){return"guarded"}function f4(i){return[{provide:v.deG,multi:!0,useValue:i},{provide:KB,multi:!0,useValue:i}]}function Oee(i,s){i.errorHandler&&(s.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(s.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(s.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(s.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(s.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(s.urlUpdateStrategy=i.urlUpdateStrategy)}var JB=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Er.xQ}return(0,D.Z)(s,[{key:"appInitializer",value:function(){var r=this;return this.injector.get(We,Promise.resolve(null)).then(function(){if(r.destroyed)return Promise.resolve(!0);var o=null,u=new Promise(function(m){return o=m}),c=r.injector.get(Tu),d=r.injector.get(p_);return"disabled"===d.initialNavigation?(c.setUpLocationChangeListener(),o(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(c.hooks.afterPreactivation=function(){return r.initNavigation?(0,tr.of)(null):(r.initNavigation=!0,o(!0),r.resultOfPreactivationDone)},c.initialNavigation()):o(!0),u})}},{key:"bootstrapListener",value:function(r){var a=this.injector.get(p_),o=this.injector.get(u4),u=this.injector.get(QB),c=this.injector.get(Tu),d=this.injector.get(v.z2F);r===d.components[0]&&(("enabledNonBlocking"===a.initialNavigation||void 0===a.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.zs3))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();function Nee(i){return i.appInitializer.bind(i)}function Fee(i){return i.bootstrapListener.bind(i)}var h4=new v.OlP("Router Initializer"),Bee=function(){function i(){}return i.prototype.ngOnInit=function(){},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-home"]],decls:135,vars:0,consts:[[1,"container","text-center",2,"max-width","1500px"],[1,"display-1"],[1,"display-4",2,"font-size","40px"],[1,"container","text-center"],[1,"display-3"],["href","https://scholar.google.com/citations?user=OMcthakAAAAJ&hl=en"],[1,"row","research-papers"],[1,"col-6"],["mat-button","","href","https://ojs.aaai.org/index.php/AAAI/article/view/21231"],["mat-button","","href",""],["mat-button","","href","https://link.springer.com/article/10.1007/s11128-023-03998-z"],[1,"row"],[1,"col-12"],[1,"company-logo"],["src","assets/companies/google.jpg"],[1,"fw-bold"],["src","assets/companies/optiver.png"],["src","assets/companies/aicrowd.png"],["src","assets/companies/algouniversity.png"],["src","assets/companies/vlabs.jpg"],["href","https://ds2-iiith.vlabs.ac.in/exp/tries-suffix-trees/index.html"],["href","https://ds1-iiith.vlabs.ac.in/exp/heap-sort/index.html"],["href","https://ds2-iiith.vlabs.ac.in/exp/2-3-tree/index.html"],["href","https://ds2-iiith.vlabs.ac.in/exp/red-black-tree/index.html"],["src","assets/companies/ihubdata.png"],["href","https://www.youtube.com/playlist?list=PLYGlLSI-E_w-5_p0PaycDf3IU_hNfh0O5"],["src","assets/companies/iiithyderabad.png","width","400px"],[1,"project-item","col-sm-6","col-lg-4","col-xs-12"],[1,"border-box"],[1,"font-weight-bold"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"h1",1),v._uU(2," Hi, I am Animesh. "),v.qZA(),v.TgZ(3,"h2",2),v._uU(4," Pleasure to meet you! I am a Computer Scientist by trade, I am interested in a lot of subdomains from Algorithms and Sports Programming to Machine Learning and a some parts of Quantum Computation. I love to play Chess, watch YouTube, and get better at Computer Aided art (Blender, etc.) "),v.qZA(),v.qZA(),v.TgZ(5,"div",3),v.TgZ(6,"h2",4),v.TgZ(7,"a",5),v._uU(8,"Research"),v.qZA(),v._uU(9," Publications"),v.qZA(),v.TgZ(10,"div",6),v.TgZ(11,"div",7),v.TgZ(12,"mat-card"),v.TgZ(13,"mat-card-header"),v.TgZ(14,"mat-card-title"),v._uU(15,"Qubit routing using graph neural network aided Monte Carlo tree search"),v.qZA(),v.TgZ(16,"mat-card-subtitle"),v.TgZ(17,"div"),v._uU(18,"Authors: Animesh Sinha, Utkarsh Azad, Prof. Harjinder Singh."),v.qZA(),v.TgZ(19,"div"),v._uU(20,"Publisher: Proceedings of the AAAI Conference on Artificial Intelligence"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(21,"p"),v._uU(22," Near-term quantum hardware can support two-qubit operations only on the qubits that can interact with each other. Therefore, to execute an arbitrary quantum circuit on the hardware, compilers have to first perform the task of qubit routing, ie, to transform the quantum circuit either by inserting additional SWAP gates or by reversing existing CNOT gates to satisfy the connectivity constraints of the target topology. The depth of the transformed quantum circuits is minimized by utilizing the Monte Carlo tree search (MCTS) to perform qubit routing by making it both construct each action and search over the space of all actions. It is aided in performing these tasks by a Graph neural network that evaluates the value function and action probabilities for each state. Along with this, we propose a new method of adding mutex-lock like variables in our state representation which helps factor in the parallelization of the scheduled operations, thereby pruning the depth of the output circuit. Overall, our procedure (referred to as QRoute) performs qubit routing in a hardware agnostic manner, and it outperforms other available qubit routing implementations on various circuit benchmarks. "),v.qZA(),v.TgZ(23,"mat-card-actions"),v.TgZ(24,"a",8),v._uU(25,"View Article"),v.qZA(),v.TgZ(26,"a",9),v._uU(27,"View Associated Material"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(28,"div",7),v.TgZ(29,"mat-card"),v.TgZ(30,"mat-card-header"),v.TgZ(31,"mat-card-title"),v._uU(32,"qLEET: visualizing loss landscapes, expressibility, entangling power and training trajectories for parameterized quantum circuits"),v.qZA(),v.TgZ(33,"mat-card-subtitle"),v.TgZ(34,"div"),v._uU(35,"Authors: Utkarsh Azad, Animesh Sinha."),v.qZA(),v.TgZ(36,"div"),v._uU(37,"Publisher: Quantum Information Processing"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(38,"p"),v._uU(39," We present qLEET, an open-source Python package for studying parameterized quantum circuits (PQCs), which are widely used in various variational quantum algorithms (VQAs) and quantum machine learning (QML) algorithms. qLEET enables computation of properties such as expressibility and entangling power of a PQC by studying its entanglement spectrum and the distribution of parameterized states produced by it. Furthermore, it allows users to visualize the training trajectories of PQCs along with high-dimensional loss landscapes generated by them for different objective functions. It supports quantum circuits and noise models built using popular quantum computing libraries such as Qiskit, Cirq, and PyQuil. In our work, we demonstrate how qLEET provides opportunities to design and improve hybrid quantum-classical algorithms by utilizing intuitive insights from the ansatz capability and structure of the loss landscape. "),v.qZA(),v.TgZ(40,"mat-card-actions"),v.TgZ(41,"a",10),v._uU(42,"View Article"),v.qZA(),v.TgZ(43,"a",9),v._uU(44,"View Associated Material"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(45,"div",3),v.TgZ(46,"h2",4),v._uU(47,"Places I worked at"),v.qZA(),v.TgZ(48,"div",11),v.TgZ(49,"div",12),v.TgZ(50,"div",13),v._UZ(51,"img",14),v.qZA(),v.TgZ(52,"div",15),v._uU(53,"Google"),v.qZA(),v.TgZ(54,"div"),v._uU(55,"Interned in the Ads Team for 3 months. Worked on implementing portions of machine learning pipelines on big-data using tools similar to Apache Beam in C++."),v.qZA(),v.qZA(),v.TgZ(56,"div",7),v.TgZ(57,"div",13),v._UZ(58,"img",16),v.qZA(),v.TgZ(59,"div",15),v._uU(60,"Optiver"),v.qZA(),v.TgZ(61,"div"),v._uU(62,"Full time job at a High Frequency trading firm, working in Delta-1 Core Data team as a Software Engineer. Working in C++ and Python to provide data storage, access and transformation pipelines."),v.qZA(),v.qZA(),v.TgZ(63,"div",7),v.TgZ(64,"div",13),v._UZ(65,"img",17),v.qZA(),v.TgZ(66,"div",15),v._uU(67,"AICrowd"),v.qZA(),v.TgZ(68,"div"),v._uU(69,"Worked for 3 months as a Reasearch Intern. Worked on the AICrowd food segmentation challenge, pixel level segmentation for a long-tailed high-error dataset, used Facebook Detectron2, PyTorch."),v.qZA(),v.qZA(),v.TgZ(70,"div",7),v.TgZ(71,"div",13),v._UZ(72,"img",18),v.qZA(),v.TgZ(73,"div",15),v._uU(74,"AlgoUniversity"),v.qZA(),v.TgZ(75,"div"),v._uU(76,"Took Algorithms and Data Structures classes, theory, labs, and contest upsolving. Acting as an independent content creator for the platform."),v.qZA(),v.qZA(),v.TgZ(77,"div",7),v.TgZ(78,"div",13),v._UZ(79,"img",19),v.qZA(),v.TgZ(80,"div",15),v._uU(81,"Virtual Labs"),v.qZA(),v.TgZ(82,"div"),v._uU(83,"Developed Simulation for how different data structures work ("),v.TgZ(84,"a",20),v._uU(85,"Tries and Suffix Tries"),v.qZA(),v._uU(86,", "),v.TgZ(87,"a",21),v._uU(88,"Heap Sort"),v.qZA(),v._uU(89,", "),v.TgZ(90,"a",22),v._uU(91,"2-3 Trees"),v.qZA(),v._uU(92,", and "),v.TgZ(93,"a",23),v._uU(94,"Red-Black Trees"),v.qZA(),v._uU(95,"), along with quizzes and explainatory text and video content."),v.qZA(),v.qZA(),v.TgZ(96,"div",7),v.TgZ(97,"div",13),v._UZ(98,"img",24),v.qZA(),v.TgZ(99,"div",15),v._uU(100,"IHub-Data"),v.qZA(),v.TgZ(101,"div"),v._uU(102,"One of the Head TAs working for the "),v.TgZ(103,"a",25),v._uU(104,"Foundations of Modern Machine Learning"),v.qZA(),v._uU(105," course and as a TA for the Machine Learning for Drug Design Course. Work involves making Jupyter notebooks for class and labs, holding lab/tutorial sessions, etc."),v.qZA(),v.qZA(),v.TgZ(106,"div",7),v.TgZ(107,"div",13),v._UZ(108,"img",26),v.qZA(),v.TgZ(109,"div",15),v._uU(110,"IIIT Hyderabad"),v.qZA(),v.TgZ(111,"div"),v._uU(112,"Was a teaching assistant for Data Structures and Algorithms, and Probability and Statistics, wrote questions for assignments, evaluated them, managed online judge and held tutorials."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(113,"div",3),v.TgZ(114,"h2",4),v._uU(115,"Exciting Projects"),v.qZA(),v.TgZ(116,"div",11),v.TgZ(117,"div",27),v.TgZ(118,"div",28),v.TgZ(119,"div",29),v._uU(120,"Qubit Routing"),v.qZA(),v.TgZ(121,"div"),v._uU(122,"Using Reinforcement Learning in combinatorial action spaces to map logical qubits to physical qubits in such a way to minimize the depth of the resulting circuit. So in totality it's an attempt at efficient quantum compilation."),v.qZA(),v.qZA(),v.qZA(),v.TgZ(123,"div",27),v.TgZ(124,"div",28),v.TgZ(125,"div",29),v._uU(126,"Particle Tagging"),v.qZA(),v.TgZ(127,"div"),v._uU(128,"Using Graph Convolutions to classify images of particle showers in calorimeters of particle accelerators, to classify what source particle the jet came from and what substructures in the jet lead to this classification."),v.qZA(),v.qZA(),v.qZA(),v.TgZ(129,"div",27),v.TgZ(130,"div",28),v.TgZ(131,"div",29),v._uU(132,"Food Segmentation"),v.qZA(),v.TgZ(133,"div"),v._uU(134,"Standard task of Semantic Segmentation on a messy long tailed distribution which gives us a chance to experiment with standard convolution nets and frameworks like Facebook Detectron. This is being undertaked for an intership at AICrowd."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA())},directives:[cB,fB,uB,lB,jG,XG],styles:["div.container[_ngcontent-%COMP%]{padding:50px}a[_ngcontent-%COMP%]:hover{text-decoration:none}.project-item[_ngcontent-%COMP%]{padding:10px;font-size:larger}.project-item[_ngcontent-%COMP%]   div.border-box[_ngcontent-%COMP%]{border:thick gray solid;padding:10px}.research-papers[_ngcontent-%COMP%]{margin-top:50dp}.research-papers[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:20dp}.company-logo[_ngcontent-%COMP%]{height:150px;margin-top:50px}.company-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:450px;max-height:150px;-o-object-fit:contain;object-fit:contain}"]}),i}(),Uee=J(4762),Vee=function(){function i(s){this.firestore=s}return i.prototype.getFriends=function(){return this.firestore.collection("friends").snapshotChanges()},i.\u0275fac=function(n){return new(n||i)(v.LFG(HT))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}();function Hee(i,s){if(1&i&&(v.TgZ(0,"div",5),v.TgZ(1,"mat-card"),v.TgZ(2,"mat-card-header"),v._UZ(3,"img",6),v.TgZ(4,"mat-card-title"),v._uU(5),v.qZA(),v.TgZ(6,"mat-card-subtitle"),v._uU(7),v.qZA(),v.qZA(),v._UZ(8,"img",7),v.TgZ(9,"mat-card-actions"),v.TgZ(10,"a",8),v._uU(11,"LinkedIn"),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&i){var n=s.$implicit;v.xp6(3),v.MGl("src","assets/friends/",n.id,".jpeg",v.LSH),v.xp6(2),v.Oqu(n.name),v.xp6(2),v.Oqu(n.affiliation),v.xp6(1),v.MGl("src","assets/friends/",n.id,".jpeg",v.LSH),v.xp6(2),v.s9C("href",n.linkedin,v.LSH)}}var dv,zee=function(){function i(s){this.friendService=s}return i.prototype.ngOnInit=function(){var s=this;this.friendService.getFriends().subscribe(function(n){s.friends=n.map(function(r){return(0,Uee.pi)({id:r.payload.doc.id},r.payload.doc.data())}).sort(function(r,a){var o,u;return(null!==(o=a.degval)&&void 0!==o?o:0)-(null!==(u=r.degval)&&void 0!==u?u:0)})})},i.\u0275fac=function(n){return new(n||i)(v.Y36(Vee))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-friends"]],decls:6,vars:1,consts:[[1,"container"],[1,"row","page-heading"],[1,"display-2"],[1,"row"],["class","col-lg-4 card-container",4,"ngFor","ngForOf"],[1,"col-lg-4","card-container"],["mat-card-avatar","","alt","A",3,"src"],["mat-card-image","","alt","Friend Avatar",1,"friend-image",3,"src"],["mat-button","",3,"href"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Come meet my friends!"),v.qZA(),v.qZA(),v.TgZ(4,"div",3),v.YNc(5,Hee,12,5,"div",4),v.qZA(),v.qZA()),2&n&&(v.xp6(5),v.Q6J("ngForOf",r.friends))},directives:[nl,cB,fB,qG,uB,lB,WG,jG,XG],styles:["div.card-container[_ngcontent-%COMP%]{padding:20px}a[_ngcontent-%COMP%]:hover{text-decoration:none}.friend-image[_ngcontent-%COMP%]{height:400px;width:400px;-o-object-fit:cover;object-fit:cover}"]}),i}(),hv=J(4173),Gee=function(){function i(s,n,r){void 0===r&&(r=100),this.mX=s,this.mY=n,this.mWumpus=!1,this.mPit=!1,this.mGold=!1,this.BLOCK_SIZE=r,this.mMeasurement=Qa.Safe,this.mMeasured=!1}return Object.defineProperty(i.prototype,"canvas",{set:function(s){this.mCanvas=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.mX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.mY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasWumpus",{get:function(){return this.mWumpus},set:function(s){this.mWumpus=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPit",{get:function(){return this.mPit},set:function(s){this.mPit=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasGold",{get:function(){return this.mGold},set:function(s){this.mGold=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"measurement",{get:function(){return this.mMeasurement},set:function(s){this.mMeasurement=s,this.render()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"measured",{get:function(){return this.mMeasured},set:function(s){this.mMeasured=s,this.render()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasBreeze",{get:function(){return this.mMeasurement===Qa.Breeze||this.mMeasurement===Qa.StenchyBreeze},set:function(s){s&&this.mMeasurement===Qa.Stench?this.mMeasurement=Qa.StenchyBreeze:s&&this.mMeasurement===Qa.Safe?this.mMeasurement=Qa.Breeze:s||this.mMeasurement!==Qa.StenchyBreeze?!s&&this.mMeasurement===Qa.Breeze&&(this.mMeasurement=Qa.Safe):this.mMeasurement=Qa.Stench},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasStench",{get:function(){return this.mMeasurement===Qa.Stench||this.mMeasurement===Qa.StenchyBreeze},set:function(s){s&&this.mMeasurement===Qa.Breeze?this.mMeasurement=Qa.StenchyBreeze:s&&this.mMeasurement===Qa.Safe?this.mMeasurement=Qa.Stench:s||this.mMeasurement!==Qa.StenchyBreeze?!s&&this.mMeasurement===Qa.Stench&&(this.mMeasurement=Qa.Safe):this.mMeasurement=Qa.Stench},enumerable:!1,configurable:!0}),i.prototype.render=function(s){void 0===s&&(s=!1);var n=this.mCanvas.rect(.98*this.BLOCK_SIZE,.98*this.BLOCK_SIZE),r=this.mCanvas.rect(.75*this.BLOCK_SIZE,.75*this.BLOCK_SIZE);n.fill(this.mMeasured?{color:this.mMeasurement}:{color:"#ccc"}),r.fill({color:"#ddd"}),n.center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2),r.center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2),(this.mMeasured||s)&&(this.hasWumpus?this.mCanvas.image("assets/illustrations/logicalagents/wumpus.png",.6*this.BLOCK_SIZE,.6*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2):this.hasPit?this.mCanvas.image("assets/illustrations/logicalagents/pit.png",.6*this.BLOCK_SIZE,.6*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2):(this.hasGold&&this.mCanvas.image("assets/illustrations/logicalagents/gold.png",.6*this.BLOCK_SIZE,.2*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2),this.hasBreeze&&this.mCanvas.image("assets/illustrations/logicalagents/breeze.png",.6*this.BLOCK_SIZE,.2*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2+.25*this.BLOCK_SIZE),this.hasStench&&this.mCanvas.image("assets/illustrations/logicalagents/stench.png",.6*this.BLOCK_SIZE,.2*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2-.25*this.BLOCK_SIZE)))},i.prototype.reset=function(){this.measured=!1},i}(),Qa=function(i){return i.Stench="#ff0000",i.Breeze="#000000",i.StenchyBreeze="#660000",i.Safe="#55ff66",i}({}),jee=function(){function i(s){this.canvas=[],this.ELEMENT="drawing-models",this.UX_SIZE=450,this.game=s,this.canvasParent=SVG(this.ELEMENT).size(2.02*this.UX_SIZE,6.04*this.UX_SIZE);for(var n=["Right","Up","Left","Down"],r=0;r<4;r++)this.canvasParent.rect(this.UX_SIZE,.25*this.UX_SIZE).center(.5*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE),this.canvasParent.text("Checking Wumpus on the "+n[r]).center(.5*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE).font({weight:"bold",fill:"white"}),this.canvas[r]=this.canvasParent.nested().size(this.UX_SIZE,this.UX_SIZE),this.canvas[r].center(.5*this.UX_SIZE,(1.51*r+.75)*this.UX_SIZE),this.canvasParent.rect(this.UX_SIZE,.25*this.UX_SIZE).center(1.51*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE),this.canvasParent.text("Checking Wumpus on the "+n[r]).center(1.51*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE).font({weight:"bold",fill:"white"}),this.canvas[r+4]=this.canvasParent.nested().size(this.UX_SIZE,this.UX_SIZE),this.canvas[r+4].center(1.51*this.UX_SIZE,(1.51*r+.75)*this.UX_SIZE),this.canvas[r+8]=this.canvasParent.nested().size(2*this.UX_SIZE,.25*this.UX_SIZE),this.canvas[r+8].center(1*this.UX_SIZE,(1.51*r+1.375)*this.UX_SIZE);this.render()}return i.prototype.render=function(){for(var s=this.game.agent.x,n=this.game.agent.y,r=[],a=0;a<8;a++){this.canvas[a].clear(),r[a]=!0;var o=s,u=n;if((0===a||4===a)&&s<this.game.GRID_SIZE?o++:(1===a||5===a)&&n<this.game.GRID_SIZE?u++:(2===a||6===a)&&s>1?o--:(3===a||7===a)&&n>1&&u--,s!==o||n!==u){this.game.getTile(o,u).measured&&(r[a]=!1);for(var c=[],d=0;d<this.game.GRID_SIZE*this.game.GRID_SIZE;d++)c[d]=!1;for(var m=0,_=this.game.getNeighbors(this.game.getTile(o,u));m<_.length;m++){var b=_[m];c[this.game.GRID_SIZE*(b.x-1)+(b.y-1)]=!0}for(d=1;d<=4;d++)for(var E=1;E<=4;E++){var T=this.canvas[a].rect(.245*this.UX_SIZE,.245*this.UX_SIZE).center((d-.5)*this.UX_SIZE/4,(4.5-E)*this.UX_SIZE/4),I=this.canvas[a].rect(.15*this.UX_SIZE,.15*this.UX_SIZE).center((d-.5)*this.UX_SIZE/4,(4.5-E)*this.UX_SIZE/4);this.game.getTile(d,E).measured?T.fill({color:this.game.getTile(d,E).measurement}):T.fill({color:"#dddddd"}),a<4?c[this.game.GRID_SIZE*(d-1)+(E-1)]?(I.fill({color:"#ff3837"}),this.game.getTile(d,E).measured&&!this.game.getTile(d,E).hasStench&&(r[a]=!1,this.canvas[a].text("x").font({fill:"#ffffff",weight:"bold",size:"large"}).center((d-.5)*this.UX_SIZE/4,(4.5-E)*this.UX_SIZE/4))):(I.fill({color:"#4e9d36"}),this.game.getTile(d,E).measured&&this.game.getTile(d,E).hasStench&&(r[a]=!1,this.canvas[a].text("x").font({fill:"#ffffff",weight:"bold",size:"large"}).center((d-.5)*this.UX_SIZE/4,(4.5-E)*this.UX_SIZE/4))):a<8&&(c[this.game.GRID_SIZE*(d-1)+(E-1)]?(I.fill({color:"#646464"}),this.game.getTile(d,E).measured&&!this.game.getTile(d,E).hasBreeze&&(r[a]=!1,this.canvas[a].text("x").font({fill:"#ffffff",weight:"bold",size:"large"}).center((d-.5)*this.UX_SIZE/4,(4.5-E)*this.UX_SIZE/4))):I.fill({color:"#ffffff"})),o===d&&u===E&&this.canvas[a].circle(10).fill({color:"#ff0066"}).center((d-.5)*this.UX_SIZE/4,(4.5-E)*this.UX_SIZE/4)}r[a]?r[a]&&(this.canvas[a].rect(this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#00ff00",opacity:"0.2"}).center(this.UX_SIZE/2,this.UX_SIZE/2),this.canvas[a].text("Model is Correct, Move is Risky.").font({weight:"bold"}).center(this.UX_SIZE/2,this.UX_SIZE/2)):(this.canvas[a].rect(this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#f00",opacity:"0.2"}).center(this.UX_SIZE/2,this.UX_SIZE/2),this.canvas[a].text("Model Invalid, Square Safe").font({weight:"bold"}).center(this.UX_SIZE/2,this.UX_SIZE/2))}else this.canvas[a].rect(this.UX_SIZE,this.UX_SIZE).fill({color:"#ddd",opacity:"0.5"}),this.canvas[a].rect(this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#f00",opacity:"0.2"}).center(this.UX_SIZE/2,this.UX_SIZE/2),this.canvas[a].text("Invalid Move").font({weight:"bold"}).center(this.UX_SIZE/2,this.UX_SIZE/2)}for(d=0;d<4;d++)this.canvas[d+8].clear(),r[d]||r[d+4]?(this.canvas[d+8].rect(2.01*this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#ff7b69"}),this.canvas[d+8].text("We ain't doing this.").center(1.05*this.UX_SIZE,.1*this.UX_SIZE).font({weight:"bold"})):(this.canvas[d+8].rect(2.01*this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#89ff4f"}),this.canvas[d+8].text("This is Safe, Good to Go.").center(1.05*this.UX_SIZE,.1*this.UX_SIZE).font({weight:"bold"}))},i}(),Wee=function(){function i(s){this.disabled=!1,this.mX=1,this.mY=1,this.mGame=s,this.measure(),this.disabled=!1,this.ux=this.mGame.canvas.circle(20),this.ux.fill("#f06"),this.ux.center(this.mGame.UX_SIZE/(2*this.mGame.GRID_SIZE),this.mGame.UX_SIZE-this.mGame.UX_SIZE/(2*this.mGame.GRID_SIZE))}return Object.defineProperty(i.prototype,"x",{get:function(){return this.mX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.mY},enumerable:!1,configurable:!0}),i.prototype.move=function(s){this.disabled||(s===Sm.Up&&this.mY<this.mGame.GRID_SIZE?this.mY+=1:s===Sm.Down&&this.mY>1?this.mY-=1:s===Sm.Right&&this.mX<this.mGame.GRID_SIZE?this.mX+=1:s===Sm.Left&&this.mX>1&&(this.mX-=1),this.render(),this.measure(),this.checkResult())},i.prototype.measure=function(){return this.mGame.getTile(this.x,this.y).measured=!0,this.mGame.getTile(this.x,this.y).measurement},i.prototype.reset=function(){this.mX=1,this.mY=1,this.render(),this.ux.finish(),this.ux.fill("#f06"),this.ux.radius(10),this.disabled=!1},i.prototype.render=function(){this.ux.finish();var s=this.mGame.UX_SIZE/this.mGame.GRID_SIZE;this.ux.animate().center(s*this.mX-s/2,this.mGame.UX_SIZE-s*this.mY+s/2),this.ux.front(),this.console()},i.prototype.checkResult=function(){var s=this,n=this.mGame.getTile(this.mX,this.mY);if(n.hasWumpus){this.ux.animate().fill("#000000").radius(5);var r=this.mGame.canvas.rect(this.mGame.UX_SIZE,this.mGame.UX_SIZE/this.mGame.GRID_SIZE).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2).fill("#000000"),a=this.mGame.canvas.text("Wumpus ate you.").font({family:"Helvetica",size:60,fill:"white"}).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2);setTimeout(function(){s.mGame.reset(),r.remove(),a.remove()},2500),this.disabled=!0}else if(n.hasPit){this.ux.animate().fill("#000000").radius(5);var o=this.mGame.canvas.rect(this.mGame.UX_SIZE,this.mGame.UX_SIZE/this.mGame.GRID_SIZE).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2).fill("#000000"),u=this.mGame.canvas.text("Oops, you fell in a Pit.").font({family:"Helvetica",size:60,fill:"white"}).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2);setTimeout(function(){s.mGame.reset(),o.remove(),u.remove()},2500),this.disabled=!0}else if(n.hasGold){this.ux.animate().fill("#FFD000").radius(25);var c=this.mGame.canvas.rect(this.mGame.UX_SIZE,this.mGame.UX_SIZE/this.mGame.GRID_SIZE).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2).fill("#FFD000"),d=this.mGame.canvas.text("You Won GOLD!.").font({family:"Helvetica",size:60,fill:"black"}).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2);setTimeout(function(){s.mGame.reset(),c.remove(),d.remove()},2500),this.disabled=!0}},i.prototype.console=function(){var s=this.mGame.getTile(this.mX,this.mY);s.hasGold?hv("#agent-console").html("Thank you for helping me find all this gold"):s.hasPit||s.hasWumpus?hv("#agent-console").html("You were supposed to help me, I am dead now."):s.hasStench&&s.hasBreeze?hv("#agent-console").html("There is a <strong>stench</strong> and there is a <strong>breeze</strong>!!!"):s.hasStench?hv("#agent-console").html("What's that <strong>stench?</strong> Wumpus must be around."):s.hasBreeze?hv("#agent-console").html("There is a <strong>breeze</strong>. Careful not to fall in a pit."):hv("#agent-console").html("I feel <strong>safe</strong> here, nothing around.")},i}(),Sm=function(i){return i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.Up=2]="Up",i[i.Down=3]="Down",i}({}),qee=J(3124),Yee=function(){function i(){this.GRID_SIZE=4,this.UX_SIZE=600,this.ELEMENT="drawing",this.tiles=[],this.canvas=qee(this.ELEMENT).size(this.UX_SIZE,this.UX_SIZE);for(var s=0;s<this.GRID_SIZE;s++){this.tiles[s]=[];for(var n=0;n<this.GRID_SIZE;n++)this.tiles[s][n]=new Gee(s+1,this.GRID_SIZE-n,this.UX_SIZE/this.GRID_SIZE)}this.render(),this.agent=new Wee(this),this.godSight=!1,this.modelFilter=new jee(this)}return Object.defineProperty(i.prototype,"godsight",{set:function(s){this.godSight=s,console.log("GodSight: "+s),this.render(),this.agent.render()},enumerable:!1,configurable:!0}),i.prototype.getTile=function(s,n){if(n=this.GRID_SIZE-n,(s-=1)<0||n<0||s>=this.GRID_SIZE||n>=this.GRID_SIZE)throw new Error("Accessing invalid tile index ("+s+","+n+")");return this.tiles[s][n]},i.prototype.getNeighbors=function(s){var n=[];return s.x>1&&n.push(this.getTile(s.x-1,s.y)),s.x<this.GRID_SIZE&&n.push(this.getTile(s.x+1,s.y)),s.y>1&&n.push(this.getTile(s.x,s.y-1)),s.y<this.GRID_SIZE&&n.push(this.getTile(s.x,s.y+1)),n},i.prototype.sensorUpdate=function(){for(var s=0;s<this.GRID_SIZE;s++)for(var n=0;n<this.GRID_SIZE;n++){for(var r=!1,a=!1,o=0,u=this.getNeighbors(this.tiles[s][n]);o<u.length;o++){var c=u[o];r=c.hasWumpus||r,a=c.hasPit||a}this.tiles[s][n].measurement=a?r?Qa.StenchyBreeze:Qa.Breeze:r?Qa.Stench:Qa.Safe,this.tiles[s][n].render()}},i.prototype.reset=function(){for(var s=0;s<this.GRID_SIZE;s++)for(var n=0;n<this.GRID_SIZE;n++)this.tiles[s][n].reset();this.getTile(1,1).measured=!0,this.agent.reset(),this.modelFilter.render()},i.prototype.render=function(){for(var s=this.UX_SIZE/this.GRID_SIZE,n=0;n<this.GRID_SIZE;n++)for(var r=0;r<this.GRID_SIZE;r++)this.tiles[n][r].canvas=this.canvas.nested().attr({x:s*n,y:s*r}),this.tiles[n][r].render(this.godSight)},i}(),Kee=function(){function i(){}return i.prototype.ngOnInit=function(){var s=new Yee;s.getTile(3,1).hasPit=!0,s.getTile(3,3).hasPit=!0,s.getTile(4,4).hasPit=!0,s.getTile(1,3).hasWumpus=!0,s.getTile(2,3).hasGold=!0,s.sensorUpdate(),hv("#mode-game").on("click",function(){s.godsight=!1}),hv("#mode-god").on("click",function(){s.godsight=!0}),hv("html").on("keydown",function(n){37===n.which||n.which==="A".charCodeAt(0)?(s.agent.move(Sm.Left),s.modelFilter.render()):38===n.which||n.which==="W".charCodeAt(0)?(s.agent.move(Sm.Up),s.modelFilter.render()):39===n.which||n.which==="D".charCodeAt(0)?(s.agent.move(Sm.Right),s.modelFilter.render()):(40===n.which||n.which==="S".charCodeAt(0))&&(s.agent.move(Sm.Down),s.modelFilter.render())})},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-illustrations-artificialintelligence-logicalagent"]],decls:168,vars:0,consts:[[1,"container"],["id","content",1,"row"],[1,"display-4"],["href","https://en.wikipedia.org/wiki/Partially_observable_Markov_decision_process"],["href","https://aima.cs.berkeley.edu/"],[1,"col-lg-12"],[1,"table","table-bordered","table-dark","text-center"],["scope","col","colspan","2",1,"text-center"],["scope","col",1,"text-center"],["scope","row",1,"text-center"],[2,"background-color","#55ff66","min-width","30px"],[2,"background-color","#ff0000"],[2,"background-color","#000000"],[2,"background-color","#660000"],[1,"col-lg-8"],["id","drawing",2,"margin","50px"],[1,"col-lg-4",2,"padding","50px"],["id","mode-game",1,"btn","btn-success",2,"margin","10px"],["id","mode-god",1,"btn","btn-danger",2,"margin","10px"],[2,"border","solid black","margin-top","50px","padding","20px"],[2,"margin-bottom","20px"],["id","agent-console"],[2,"padding-left","30px","padding-right","30px"],["id","drawing-models",1,"col-lg-10","offset-lg-1",2,"margin-top","20px","margin-bottom","20px"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Model Filtering"),v.qZA(),v.TgZ(4,"p"),v._uU(5," Classical Artificial Intelligence, from long before the era of Deep Neural Networks, was all about search. Ever since we realized that computers could crunch through massive amounts of data, we thought that we will put together rules that the computer would search through and achieve true intelligence. This would span everything from using simple integration formulae and substitution rules together with some heuristics to make the computers do Calculus. The same with playing games like Pacman, heuristics and some general rules couple with search should help us behave near optimally, as it does. Even today, when we have robots moving around the real world, after the perception is done by a neural network, the planning of where to go and what to do is done through search. "),v.qZA(),v.TgZ(6,"p"),v._uU(7," Model filtering is a form of search, where we maintain a set of possible states we are in, and as we explore the world we keep updating this set of belief states. This is the simplest (computationally inefficient, yet complete) solution we have to solving "),v.TgZ(8,"a",3),v._uU(9,"Partially Observable Markov Decision Processes (POMDP)"),v.qZA(),v._uU(10,". These are processes where we are supposed to try to behave optimally in the world, but some part of the state of the world is hidden from us. In the following blog and illustrations, we see an example of how the a simple game can be navigated with Model Filtering. This illustrations is derived from the "),v.TgZ(11,"a",4),v._uU(12,"Artificial Intelligence: A modern approach by Stuart Russel and Peter Norwig"),v.qZA(),v._uU(13,". "),v.qZA(),v.TgZ(14,"div",5),v.TgZ(15,"h1"),v._uU(16,"Wumpus World"),v.qZA(),v.TgZ(17,"p"),v._uU(18," The Wumpus world is a cave with a Monster and Deep Pits. But a huge pile of Gold lights up the cave and entices Logical Agents to pursue a journey of great risks to find the Gold. Take this journey with me and help me reason out the world, won't you? "),v.qZA(),v.TgZ(19,"ul"),v.TgZ(20,"li"),v.TgZ(21,"strong"),v._uU(22,"Reward: Gold"),v.qZA(),v._uU(23," - There is a pile of gold - Game ends with +1000 to score."),v.qZA(),v.TgZ(24,"li"),v.TgZ(25,"strong"),v._uU(26,"Penalty: Wumpus"),v.qZA(),v._uU(27," - There is one monster - Game ends with -1000 from score."),v.qZA(),v.TgZ(28,"li"),v.TgZ(29,"strong"),v._uU(30,"Penalty: Pit"),v.qZA(),v._uU(31," - There are many pits in grid - Game ends with -1000 from score."),v.qZA(),v.TgZ(32,"li"),v.TgZ(33,"strong"),v._uU(34,"Sensor: Breeze"),v.qZA(),v._uU(35," - There is a pit in an adjacent tile."),v.qZA(),v.TgZ(36,"li"),v.TgZ(37,"strong"),v._uU(38,"Sensor: Stench"),v.qZA(),v._uU(39," - There is Wumpus in an adjacent tile."),v.qZA(),v.TgZ(40,"li"),v.TgZ(41,"strong"),v._uU(42,"Time Evolution: All Moves"),v.qZA(),v._uU(43," - Score decreased by 1 point after every move."),v.qZA(),v.TgZ(44,"li"),v.TgZ(45,"strong"),v._uU(46,"Time Evolution: Up Move"),v.qZA(),v._uU(47," - Score decreased by 10 points after every move."),v.qZA(),v.qZA(),v.TgZ(48,"h4"),v._uU(49,"Use "),v.TgZ(50,"kbd"),v._uU(51,"w"),v.qZA(),v._uU(52,", "),v.TgZ(53,"kbd"),v._uU(54,"a"),v.qZA(),v._uU(55,", "),v.TgZ(56,"kbd"),v._uU(57,"s"),v.qZA(),v._uU(58,", and "),v.TgZ(59,"kbd"),v._uU(60,"d"),v.qZA(),v._uU(61," to play this game."),v.qZA(),v.TgZ(62,"table",6),v.TgZ(63,"thead"),v.TgZ(64,"tr"),v.TgZ(65,"th",7),v._uU(66,"Color"),v.qZA(),v.TgZ(67,"th",8),v._uU(68,"Measurement"),v.qZA(),v.TgZ(69,"th",8),v._uU(70,"Meaning"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(71,"tbody"),v.TgZ(72,"tr"),v.TgZ(73,"th",9),v._uU(74,"Green"),v.qZA(),v._UZ(75,"td",10),v.TgZ(76,"td"),v._uU(77,"Nothing"),v.qZA(),v.TgZ(78,"td"),v._uU(79,"Feels like fresh safe air, doesn't it!"),v.qZA(),v.qZA(),v.TgZ(80,"tr"),v.TgZ(81,"th",9),v._uU(82,"Red"),v.qZA(),v._UZ(83,"td",11),v.TgZ(84,"td"),v._uU(85,"Stench"),v.qZA(),v.TgZ(86,"td"),v._uU(87,"Wumpus is close by, adjacent to your cell"),v.qZA(),v.qZA(),v.TgZ(88,"tr"),v.TgZ(89,"th",9),v._uU(90,"Black"),v.qZA(),v._UZ(91,"td",12),v.TgZ(92,"td"),v._uU(93,"Breeze"),v.qZA(),v.TgZ(94,"td"),v._uU(95,"There is a Pit in one of the Adjacent cells"),v.qZA(),v.qZA(),v.TgZ(96,"tr"),v.TgZ(97,"th",9),v._uU(98,"Brown"),v.qZA(),v._UZ(99,"td",13),v.TgZ(100,"td"),v._uU(101,"Stenchy Breeze"),v.qZA(),v.TgZ(102,"td"),v._uU(103,"This is dangerous. You feel both a pit and the Wumpus."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(104,"div",14),v._UZ(105,"div",15),v.qZA(),v.TgZ(106,"div",16),v.TgZ(107,"h4"),v._uU(108,"You can play the Game in two modes."),v.qZA(),v.TgZ(109,"button",17),v._uU(110," See only the Measurements "),v.qZA(),v._UZ(111,"br"),v.TgZ(112,"button",18),v._uU(113," See the entire state of the Board "),v.qZA(),v.TgZ(114,"div",19),v.TgZ(115,"h3"),v.TgZ(116,"div",20),v.TgZ(117,"strong"),v._uU(118,"The UserAgent:"),v.qZA(),v.qZA(),v.TgZ(119,"div",21),v.TgZ(120,"span"),v._uU(121,"I feel safe here, nothing around."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(122,"div",5),v.TgZ(123,"h1"),v._uU(124,"Model Filtering"),v.qZA(),v.TgZ(125,"p",22),v._uU(126," When going through the grid, the agent develops models of the world, of where the dangers might lie and tries to find the safe moves by contradicting these models using its knowledge base, which it has collected from the measurements it makes. Our visualization for this is the following. "),v.qZA(),v.TgZ(127,"ul"),v.TgZ(128,"li"),v._uU(129,"The agent constructs two models for each possible move, one for Wumpus and one for a Pit being in the square it's trying to go to. All models are labelled at the top."),v.qZA(),v.TgZ(130,"li"),v._uU(131,"When checking a model, the agent puts itself in the square it would have been in after the move, and assumes that Wumpus/Pit is there. ("),v.TgZ(132,"strong"),v._uU(133,"The agent is the pink dot"),v.qZA(),v._uU(134,")"),v.qZA(),v.TgZ(135,"li"),v._uU(136,"If checking for Wumpus, it labels all squares that would have a stench with "),v.TgZ(137,"strong"),v._uU(138,"red"),v.qZA(),v._uU(139,", and all other squared with "),v.TgZ(140,"strong"),v._uU(141,"green"),v.qZA(),v._uU(142,", for they would never have stench (only one Wumpus)"),v.qZA(),v.TgZ(143,"li"),v._uU(144,"If checking for Pits, it labels all the square where a breeze is expected with "),v.TgZ(145,"strong"),v._uU(146,"grey"),v.qZA(),v._uU(147," and lets be all other squares cause they provide no usable information."),v.qZA(),v.TgZ(148,"li"),v._uU(149,"Finally, it validates whether the measurements (shown on the rim, "),v.TgZ(150,"strong"),v._uU(151,"see legend above"),v.qZA(),v._uU(152,") are consistant with what it expected for the model."),v.qZA(),v.TgZ(153,"li"),v._uU(154,"If there is an incosistancy, that square is marked with a "),v.TgZ(155,"strong"),v._uU(156,"White X"),v.qZA(),v._uU(157,", and the model is declared invalid (red-band). Otherwise the models is valid (green-band)."),v.qZA(),v.TgZ(158,"li"),v._uU(159,"If either the model with a Pit, or the one with Wumpus cannot be refuted, then the move is unsafe to make, more exploration is needed to expand knowledge base."),v.qZA(),v.TgZ(160,"li"),v._uU(161,"The agent should keep executing all the possible moves that are safe and unexplored to eventually find the gold!"),v.qZA(),v.qZA(),v.qZA(),v._UZ(162,"div",23),v.TgZ(163,"div",5),v.TgZ(164,"h1"),v._uU(165,"Using Propositional Logic"),v.qZA(),v.TgZ(166,"p"),v._uU(167,"A Theorem prover can take up the observations and constraints on the environment, and use And/Or statements to prove which of the squares are safe to go to. This will be implemented soon, more details on Artificial Intelligence, A Modern Approach."),v.qZA(),v.qZA(),v.qZA(),v.qZA())},styles:[""]}),i}(),$ee=J(8968);function d4(i,s){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),n.push.apply(n,r)}return n}for(var zw={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Gw={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yl=1001,Ao=1003,ec=1006,vA=1008,Mm=1009,Am=1015,qw=1016,pA=1020,Yw=1022,Xu=1023,Kw=1026,mA=1027,$w=2400,Xw=2401,Mu=3e3,g_=3001,gA=35044,yA=35048,xm=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,[{key:"addEventListener",value:function(n,r){void 0===this._listeners&&(this._listeners={});var a=this._listeners;void 0===a[n]&&(a[n]=[]),-1===a[n].indexOf(r)&&a[n].push(r)}},{key:"hasEventListener",value:function(n,r){if(void 0===this._listeners)return!1;var a=this._listeners;return void 0!==a[n]&&-1!==a[n].indexOf(r)}},{key:"removeEventListener",value:function(n,r){if(void 0!==this._listeners){var o=this._listeners[n];if(void 0!==o){var u=o.indexOf(r);-1!==u&&o.splice(u,1)}}}},{key:"dispatchEvent",value:function(n){if(void 0!==this._listeners){var a=this._listeners[n.type];if(void 0!==a){n.target=this;for(var o=a.slice(0),u=0,c=o.length;u<c;u++)o[u].call(this,n);n.target=null}}}}]),i}(),Jw=Math.PI/180,_A=180/Math.PI,fu=[],bA=0;bA<256;bA++)fu[bA]=(bA<16?"0":"")+bA.toString(16);var Ane="undefined"!=typeof crypto&&"randomUUID"in crypto;function Yc(){if(Ane)return crypto.randomUUID().toUpperCase();var i=4294967295*Math.random()|0,s=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(fu[255&i]+fu[i>>8&255]+fu[i>>16&255]+fu[i>>24&255]+"-"+fu[255&s]+fu[s>>8&255]+"-"+fu[s>>16&15|64]+fu[s>>24&255]+"-"+fu[63&n|128]+fu[n>>8&255]+"-"+fu[n>>16&255]+fu[n>>24&255]+fu[255&r]+fu[r>>8&255]+fu[r>>16&255]+fu[r>>24&255]).toUpperCase()}function hu(i,s,n){return Math.max(s,Math.min(n,i))}function wA(i,s,n){return(1-n)*i+n*s}function c3(i){return 0==(i&i-1)&&0!==i}function V4(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}var Yt=function(i){function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,s),this.x=n,this.y=r}return(0,D.Z)(s,[{key:"width",get:function(){return this.x},set:function(r){this.x=r}},{key:"height",get:function(){return this.y},set:function(r){this.y=r}},{key:"set",value:function(r,a){return this.x=r,this.y=a,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setComponent",value:function(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this}},{key:"add",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,a)):(this.x+=r.x,this.y+=r.y,this)}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this}},{key:"addVectors",value:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this}},{key:"addScaledVector",value:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this}},{key:"sub",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,a)):(this.x-=r.x,this.y-=r.y,this)}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this}},{key:"subVectors",value:function(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"applyMatrix3",value:function(r){var a=this.x,o=this.y,u=r.elements;return this.x=u[0]*a+u[3]*o+u[6],this.y=u[1]*a+u[4]*o+u[7],this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}},{key:"clamp",value:function(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this}},{key:"clampScalar",value:function(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this}},{key:"clampLength",value:function(r,a){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(a,o)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y}},{key:"cross",value:function(r){return this.x*r.y-this.y*r.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var a=this.x-r.x,o=this.y-r.y;return a*a+o*o}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this}},{key:"lerpVectors",value:function(r,a,o){return this.x=r.x+(a.x-r.x)*o,this.y=r.y+(a.y-r.y)*o,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y}},{key:"fromArray",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[a],this.y=r[a+1],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[a]=this.x,r[a+1]=this.y,r}},{key:"fromBufferAttribute",value:function(r,a,o){return void 0!==o&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(a),this.y=r.getY(a),this}},{key:"rotateAround",value:function(r,a){var o=Math.cos(a),u=Math.sin(a),c=this.x-r.x,d=this.y-r.y;return this.x=c*o-d*u+r.x,this.y=c*u+d*o+r.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:i,value:Ze().mark(function n(){return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.x;case 2:return a.next=4,this.y;case 4:case"end":return a.stop()}},n,this)})}]),s}(Symbol.iterator);Yt.prototype.isVector2=!0;var du=function(){function i(){(0,M.Z)(this,i),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,D.Z)(i,[{key:"set",value:function(n,r,a,o,u,c,d,m,_){var b=this.elements;return b[0]=n,b[1]=o,b[2]=d,b[3]=r,b[4]=u,b[5]=m,b[6]=a,b[7]=c,b[8]=_,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(n){var r=this.elements,a=n.elements;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this}},{key:"extractBasis",value:function(n,r,a){return n.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(n){var r=n.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}},{key:"multiply",value:function(n){return this.multiplyMatrices(this,n)}},{key:"premultiply",value:function(n){return this.multiplyMatrices(n,this)}},{key:"multiplyMatrices",value:function(n,r){var a=n.elements,o=r.elements,u=this.elements,c=a[0],d=a[3],m=a[6],_=a[1],b=a[4],E=a[7],T=a[2],I=a[5],N=a[8],W=o[0],U=o[3],H=o[6],te=o[1],ue=o[4],le=o[7],he=o[2],se=o[5],ye=o[8];return u[0]=c*W+d*te+m*he,u[3]=c*U+d*ue+m*se,u[6]=c*H+d*le+m*ye,u[1]=_*W+b*te+E*he,u[4]=_*U+b*ue+E*se,u[7]=_*H+b*le+E*ye,u[2]=T*W+I*te+N*he,u[5]=T*U+I*ue+N*se,u[8]=T*H+I*le+N*ye,this}},{key:"multiplyScalar",value:function(n){var r=this.elements;return r[0]*=n,r[3]*=n,r[6]*=n,r[1]*=n,r[4]*=n,r[7]*=n,r[2]*=n,r[5]*=n,r[8]*=n,this}},{key:"determinant",value:function(){var n=this.elements,r=n[0],a=n[1],o=n[2],u=n[3],c=n[4],d=n[5],m=n[6],_=n[7],b=n[8];return r*c*b-r*d*_-a*u*b+a*d*m+o*u*_-o*c*m}},{key:"invert",value:function(){var n=this.elements,r=n[0],a=n[1],o=n[2],u=n[3],c=n[4],d=n[5],m=n[6],_=n[7],b=n[8],E=b*c-d*_,T=d*m-b*u,I=_*u-c*m,N=r*E+a*T+o*I;if(0===N)return this.set(0,0,0,0,0,0,0,0,0);var W=1/N;return n[0]=E*W,n[1]=(o*_-b*a)*W,n[2]=(d*a-o*c)*W,n[3]=T*W,n[4]=(b*r-o*m)*W,n[5]=(o*u-d*r)*W,n[6]=I*W,n[7]=(a*m-_*r)*W,n[8]=(c*r-a*u)*W,this}},{key:"transpose",value:function(){var n,r=this.elements;return n=r[1],r[1]=r[3],r[3]=n,n=r[2],r[2]=r[6],r[6]=n,n=r[5],r[5]=r[7],r[7]=n,this}},{key:"getNormalMatrix",value:function(n){return this.setFromMatrix4(n).invert().transpose()}},{key:"transposeIntoArray",value:function(n){var r=this.elements;return n[0]=r[0],n[1]=r[3],n[2]=r[6],n[3]=r[1],n[4]=r[4],n[5]=r[7],n[6]=r[2],n[7]=r[5],n[8]=r[8],this}},{key:"setUvTransform",value:function(n,r,a,o,u,c,d){var m=Math.cos(u),_=Math.sin(u);return this.set(a*m,a*_,-a*(m*c+_*d)+c+n,-o*_,o*m,-o*(-_*c+m*d)+d+r,0,0,1),this}},{key:"scale",value:function(n,r){var a=this.elements;return a[0]*=n,a[3]*=n,a[6]*=n,a[1]*=r,a[4]*=r,a[7]*=r,this}},{key:"rotate",value:function(n){var r=Math.cos(n),a=Math.sin(n),o=this.elements,u=o[0],c=o[3],d=o[6],m=o[1],_=o[4],b=o[7];return o[0]=r*u+a*m,o[3]=r*c+a*_,o[6]=r*d+a*b,o[1]=-a*u+r*m,o[4]=-a*c+r*_,o[7]=-a*d+r*b,this}},{key:"translate",value:function(n,r){var a=this.elements;return a[0]+=n*a[2],a[3]+=n*a[5],a[6]+=n*a[8],a[1]+=r*a[2],a[4]+=r*a[5],a[7]+=r*a[8],this}},{key:"equals",value:function(n){for(var r=this.elements,a=n.elements,o=0;o<9;o++)if(r[o]!==a[o])return!1;return!0}},{key:"fromArray",value:function(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0;a<9;a++)this.elements[a]=n[a+r];return this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.elements;return n[r]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3],n[r+4]=a[4],n[r+5]=a[5],n[r+6]=a[6],n[r+7]=a[7],n[r+8]=a[8],n}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),i}();function H4(i){if(0===i.length)return-1/0;for(var s=i[0],n=1,r=i.length;n<r;++n)i[n]>s&&(s=i[n]);return s}function YP(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}du.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var ek,tk=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,null,[{key:"getDataURL",value:function(n){if(/^data:/i.test(n.src)||"undefined"==typeof HTMLCanvasElement)return n.src;var r;if(n instanceof HTMLCanvasElement)r=n;else{void 0===ek&&(ek=YP("canvas")),ek.width=n.width,ek.height=n.height;var a=ek.getContext("2d");n instanceof ImageData?a.putImageData(n,0,0):a.drawImage(n,0,0,n.width,n.height),r=ek}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",n),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}}]),i}(),Gne=0,_l=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yl,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ec,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vA,_=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Xu,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Mm,E=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,T=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Mu;return(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,wa.Z)(r),"id",{value:Gne++}),r.uuid=Yc(),r.name="",r.image=a,r.mipmaps=[],r.mapping=o,r.wrapS=u,r.wrapT=c,r.magFilter=d,r.minFilter=m,r.anisotropy=E,r.format=_,r.internalFormat=null,r.type=b,r.offset=new Yt(0,0),r.repeat=new Yt(1,1),r.center=new Yt(0,0),r.rotation=0,r.matrixAutoUpdate=!0,r.matrix=new du,r.generateMipmaps=!0,r.premultiplyAlpha=!1,r.flipY=!0,r.unpackAlignment=4,r.encoding=T,r.version=0,r.onUpdate=null,r.isRenderTargetTexture=!1,r}return(0,D.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){return this.name=a.name,this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this}},{key:"toJSON",value:function(a){var o=void 0===a||"string"==typeof a;if(!o&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var u={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var c=this.image;if(void 0===c.uuid&&(c.uuid=Yc()),!o&&void 0===a.images[c.uuid]){var d;if(Array.isArray(c)){d=[];for(var m=0,_=c.length;m<_;m++)d.push(f3(c[m].isDataTexture?c[m].image:c[m]))}else d=f3(c);a.images[c.uuid]={uuid:c.uuid,url:d}}u.image=c.uuid}return o||(a.textures[this.uuid]=u),u}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(a){if(300!==this.mapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case 1e3:a.x=a.x-Math.floor(a.x);break;case yl:a.x=a.x<0?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case 1e3:a.y=a.y-Math.floor(a.y);break;case yl:a.y=a.y<0?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}},{key:"needsUpdate",set:function(a){!0===a&&this.version++}}]),n}(xm);function f3(i){return"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap?tk.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}_l.DEFAULT_IMAGE=void 0,_l.DEFAULT_MAPPING=300,_l.prototype.isTexture=!0;var La=function(i){function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,M.Z)(this,s),this.x=n,this.y=r,this.z=a,this.w=o}return(0,D.Z)(s,[{key:"width",get:function(){return this.z},set:function(r){this.z=r}},{key:"height",get:function(){return this.w},set:function(r){this.w=r}},{key:"set",value:function(r,a,o,u){return this.x=r,this.y=a,this.z=o,this.w=u,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setW",value:function(r){return this.w=r,this}},{key:"setComponent",value:function(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0!==r.w?r.w:1,this}},{key:"add",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,a)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}},{key:"addVectors",value:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this.w=r.w+a.w,this}},{key:"addScaledVector",value:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a,this.w+=r.w*a,this}},{key:"sub",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,a)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}},{key:"subVectors",value:function(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this.z=r.z-a.z,this.w=r.w-a.w,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}},{key:"applyMatrix4",value:function(r){var a=this.x,o=this.y,u=this.z,c=this.w,d=r.elements;return this.x=d[0]*a+d[4]*o+d[8]*u+d[12]*c,this.y=d[1]*a+d[5]*o+d[9]*u+d[13]*c,this.z=d[2]*a+d[6]*o+d[10]*u+d[14]*c,this.w=d[3]*a+d[7]*o+d[11]*u+d[15]*c,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"setAxisAngleFromQuaternion",value:function(r){this.w=2*Math.acos(r.w);var a=Math.sqrt(1-r.w*r.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/a,this.y=r.y/a,this.z=r.z/a),this}},{key:"setAxisAngleFromRotationMatrix",value:function(r){var a,o,u,c,d=.01,m=.1,_=r.elements,b=_[0],E=_[4],T=_[8],I=_[1],N=_[5],W=_[9],U=_[2],H=_[6],te=_[10];if(Math.abs(E-I)<d&&Math.abs(T-U)<d&&Math.abs(W-H)<d){if(Math.abs(E+I)<m&&Math.abs(T+U)<m&&Math.abs(W+H)<m&&Math.abs(b+N+te-3)<m)return this.set(1,0,0,0),this;a=Math.PI;var ue=(b+1)/2,le=(N+1)/2,he=(te+1)/2,se=(E+I)/4,ye=(T+U)/4,Ue=(W+H)/4;return ue>le&&ue>he?ue<d?(o=0,u=.707106781,c=.707106781):(u=se/(o=Math.sqrt(ue)),c=ye/o):le>he?le<d?(o=.707106781,u=0,c=.707106781):(o=se/(u=Math.sqrt(le)),c=Ue/u):he<d?(o=.707106781,u=.707106781,c=0):(o=ye/(c=Math.sqrt(he)),u=Ue/c),this.set(o,u,c,a),this}var Ve=Math.sqrt((H-W)*(H-W)+(T-U)*(T-U)+(I-E)*(I-E));return Math.abs(Ve)<.001&&(Ve=1),this.x=(H-W)/Ve,this.y=(T-U)/Ve,this.z=(I-E)/Ve,this.w=Math.acos((b+N+te-1)/2),this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}},{key:"clamp",value:function(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this.z=Math.max(r.z,Math.min(a.z,this.z)),this.w=Math.max(r.w,Math.min(a.w,this.w)),this}},{key:"clampScalar",value:function(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this.z=Math.max(r,Math.min(a,this.z)),this.w=Math.max(r,Math.min(a,this.w)),this}},{key:"clampLength",value:function(r,a){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(a,o)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this.z+=(r.z-this.z)*a,this.w+=(r.w-this.w)*a,this}},{key:"lerpVectors",value:function(r,a,o){return this.x=r.x+(a.x-r.x)*o,this.y=r.y+(a.y-r.y)*o,this.z=r.z+(a.z-r.z)*o,this.w=r.w+(a.w-r.w)*o,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}},{key:"fromArray",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[a],this.y=r[a+1],this.z=r[a+2],this.w=r[a+3],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[a]=this.x,r[a+1]=this.y,r[a+2]=this.z,r[a+3]=this.w,r}},{key:"fromBufferAttribute",value:function(r,a,o){return void 0!==o&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(a),this.y=r.getY(a),this.z=r.getZ(a),this.w=r.getW(a),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:i,value:Ze().mark(function n(){return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.x;case 2:return a.next=4,this.y;case 4:return a.next=6,this.z;case 6:return a.next=8,this.w;case 8:case"end":return a.stop()}},n,this)})}]),s}(Symbol.iterator);La.prototype.isVector4=!0;var sd=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,M.Z)(this,n),(o=s.call(this)).width=r,o.height=a,o.depth=1,o.scissor=new La(0,0,r,a),o.scissorTest=!1,o.viewport=new La(0,0,r,a),o.texture=new _l(void 0,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),o.texture.isRenderTargetTexture=!0,o.texture.image={width:r,height:a,depth:1},o.texture.generateMipmaps=void 0!==u.generateMipmaps&&u.generateMipmaps,o.texture.internalFormat=void 0!==u.internalFormat?u.internalFormat:null,o.texture.minFilter=void 0!==u.minFilter?u.minFilter:ec,o.depthBuffer=void 0===u.depthBuffer||u.depthBuffer,o.stencilBuffer=void 0!==u.stencilBuffer&&u.stencilBuffer,o.depthTexture=void 0!==u.depthTexture?u.depthTexture:null,o}return(0,D.Z)(n,[{key:"setTexture",value:function(a){a.image={width:this.width,height:this.height,depth:this.depth},this.texture=a}},{key:"setSize",value:function(a,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==a||this.height!==o||this.depth!==u)&&(this.width=a,this.height=o,this.depth=u,this.texture.image.width=a,this.texture.image.height=o,this.texture.image.depth=u,this.dispose()),this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){return this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.image=function(i){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?d4(Object(n),!0).forEach(function(r){(0,ti.Z)(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}({},this.texture.image),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(xm);sd.prototype.isWebGLRenderTarget=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;(0,M.Z)(this,n);var c=(u=s.call(this,r,a)).texture;u.texture=[];for(var d=0;d<o;d++)u.texture[d]=c.clone();return u}return(0,D.Z)(n,[{key:"setSize",value:function(a,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==a||this.height!==o||this.depth!==u){this.width=a,this.height=o,this.depth=u;for(var c=0,d=this.texture.length;c<d;c++)this.texture[c].image.width=a,this.texture[c].image.height=o,this.texture[c].image.depth=u;this.dispose()}return this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o),this}},{key:"copy",value:function(a){this.dispose(),this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this.texture.length=0;for(var o=0,u=a.texture.length;o<u;o++)this.texture[o]=a.texture[o].clone();return this}}]),n}(sd).prototype.isWebGLMultipleRenderTargets=!0;var z4=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a,o)).samples=4,u}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.samples=a.samples,this}}]),n}(sd);z4.prototype.isWebGLMultisampleRenderTarget=!0;var Xo=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,M.Z)(this,i),this._x=s,this._y=n,this._z=r,this._w=a}return(0,D.Z)(i,[{key:"x",get:function(){return this._x},set:function(n){this._x=n,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(n){this._z=n,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(n){this._w=n,this._onChangeCallback()}},{key:"set",value:function(n,r,a,o){return this._x=n,this._y=r,this._z=a,this._w=o,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(n,r){if(!n||!n.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var a=n._x,o=n._y,u=n._z,c=n._order,d=Math.cos,m=Math.sin,_=d(a/2),b=d(o/2),E=d(u/2),T=m(a/2),I=m(o/2),N=m(u/2);switch(c){case"XYZ":this._x=T*b*E+_*I*N,this._y=_*I*E-T*b*N,this._z=_*b*N+T*I*E,this._w=_*b*E-T*I*N;break;case"YXZ":this._x=T*b*E+_*I*N,this._y=_*I*E-T*b*N,this._z=_*b*N-T*I*E,this._w=_*b*E+T*I*N;break;case"ZXY":this._x=T*b*E-_*I*N,this._y=_*I*E+T*b*N,this._z=_*b*N+T*I*E,this._w=_*b*E-T*I*N;break;case"ZYX":this._x=T*b*E-_*I*N,this._y=_*I*E+T*b*N,this._z=_*b*N-T*I*E,this._w=_*b*E+T*I*N;break;case"YZX":this._x=T*b*E+_*I*N,this._y=_*I*E+T*b*N,this._z=_*b*N-T*I*E,this._w=_*b*E-T*I*N;break;case"XZY":this._x=T*b*E-_*I*N,this._y=_*I*E-T*b*N,this._z=_*b*N+T*I*E,this._w=_*b*E+T*I*N;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return!1!==r&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(n,r){var a=r/2,o=Math.sin(a);return this._x=n.x*o,this._y=n.y*o,this._z=n.z*o,this._w=Math.cos(a),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(n){var r=n.elements,a=r[0],o=r[4],u=r[8],c=r[1],d=r[5],m=r[9],_=r[2],b=r[6],E=r[10],T=a+d+E;if(T>0){var I=.5/Math.sqrt(T+1);this._w=.25/I,this._x=(b-m)*I,this._y=(u-_)*I,this._z=(c-o)*I}else if(a>d&&a>E){var N=2*Math.sqrt(1+a-d-E);this._w=(b-m)/N,this._x=.25*N,this._y=(o+c)/N,this._z=(u+_)/N}else if(d>E){var W=2*Math.sqrt(1+d-a-E);this._w=(u-_)/W,this._x=(o+c)/W,this._y=.25*W,this._z=(m+b)/W}else{var U=2*Math.sqrt(1+E-a-d);this._w=(c-o)/U,this._x=(u+_)/U,this._y=(m+b)/U,this._z=.25*U}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(n,r){var a=n.dot(r)+1;return a<Number.EPSILON?(a=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=a):(this._x=0,this._y=-n.z,this._z=n.y,this._w=a)):(this._x=n.y*r.z-n.z*r.y,this._y=n.z*r.x-n.x*r.z,this._z=n.x*r.y-n.y*r.x,this._w=a),this.normalize()}},{key:"angleTo",value:function(n){return 2*Math.acos(Math.abs(hu(this.dot(n),-1,1)))}},{key:"rotateTowards",value:function(n,r){var a=this.angleTo(n);if(0===a)return this;var o=Math.min(1,r/a);return this.slerp(n,o),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var n=this.length();return 0===n?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(n=1/n),this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}},{key:"multiply",value:function(n,r){return void 0!==r?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(n,r)):this.multiplyQuaternions(this,n)}},{key:"premultiply",value:function(n){return this.multiplyQuaternions(n,this)}},{key:"multiplyQuaternions",value:function(n,r){var a=n._x,o=n._y,u=n._z,c=n._w,d=r._x,m=r._y,_=r._z,b=r._w;return this._x=a*b+c*d+o*_-u*m,this._y=o*b+c*m+u*d-a*_,this._z=u*b+c*_+a*m-o*d,this._w=c*b-a*d-o*m-u*_,this._onChangeCallback(),this}},{key:"slerp",value:function(n,r){if(0===r)return this;if(1===r)return this.copy(n);var a=this._x,o=this._y,u=this._z,c=this._w,d=c*n._w+a*n._x+o*n._y+u*n._z;if(d<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,d=-d):this.copy(n),d>=1)return this._w=c,this._x=a,this._y=o,this._z=u,this;var m=1-d*d;if(m<=Number.EPSILON){var _=1-r;return this._w=_*c+r*this._w,this._x=_*a+r*this._x,this._y=_*o+r*this._y,this._z=_*u+r*this._z,this.normalize(),this._onChangeCallback(),this}var b=Math.sqrt(m),E=Math.atan2(b,d),T=Math.sin((1-r)*E)/b,I=Math.sin(r*E)/b;return this._w=c*T+this._w*I,this._x=a*T+this._x*I,this._y=o*T+this._y*I,this._z=u*T+this._z*I,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(n,r,a){this.copy(n).slerp(r,a)}},{key:"random",value:function(){var n=Math.random(),r=Math.sqrt(1-n),a=Math.sqrt(n),o=2*Math.PI*Math.random(),u=2*Math.PI*Math.random();return this.set(r*Math.cos(o),a*Math.sin(u),a*Math.cos(u),r*Math.sin(o))}},{key:"equals",value:function(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}},{key:"fromArray",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=n[r],this._y=n[r+1],this._z=n[r+2],this._w=n[r+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n[r]=this._x,n[r+1]=this._y,n[r+2]=this._z,n[r+3]=this._w,n}},{key:"fromBufferAttribute",value:function(n,r){return this._x=n.getX(r),this._y=n.getY(r),this._z=n.getZ(r),this._w=n.getW(r),this}},{key:"_onChange",value:function(n){return this._onChangeCallback=n,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(n,r,a,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),a.slerpQuaternions(n,r,o)}},{key:"slerpFlat",value:function(n,r,a,o,u,c,d){var m=a[o+0],_=a[o+1],b=a[o+2],E=a[o+3],T=u[c+0],I=u[c+1],N=u[c+2],W=u[c+3];if(0===d)return n[r+0]=m,n[r+1]=_,n[r+2]=b,void(n[r+3]=E);if(1===d)return n[r+0]=T,n[r+1]=I,n[r+2]=N,void(n[r+3]=W);if(E!==W||m!==T||_!==I||b!==N){var U=1-d,H=m*T+_*I+b*N+E*W,te=H>=0?1:-1,ue=1-H*H;if(ue>Number.EPSILON){var le=Math.sqrt(ue),he=Math.atan2(le,H*te);U=Math.sin(U*he)/le,d=Math.sin(d*he)/le}var se=d*te;if(m=m*U+T*se,_=_*U+I*se,b=b*U+N*se,E=E*U+W*se,U===1-d){var ye=1/Math.sqrt(m*m+_*_+b*b+E*E);m*=ye,_*=ye,b*=ye,E*=ye}}n[r]=m,n[r+1]=_,n[r+2]=b,n[r+3]=E}},{key:"multiplyQuaternionsFlat",value:function(n,r,a,o,u,c){var d=a[o],m=a[o+1],_=a[o+2],b=a[o+3],E=u[c],T=u[c+1],I=u[c+2],N=u[c+3];return n[r]=d*N+b*E+m*I-_*T,n[r+1]=m*N+b*T+_*E-d*I,n[r+2]=_*N+b*I+d*T-m*E,n[r+3]=b*N-d*E-m*T-_*I,n}}]),i}();Xo.prototype.isQuaternion=!0;var xe=function(i){function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,M.Z)(this,s),this.x=n,this.y=r,this.z=a}return(0,D.Z)(s,[{key:"set",value:function(r,a,o){return void 0===o&&(o=this.z),this.x=r,this.y=a,this.z=o,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setComponent",value:function(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}},{key:"add",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,a)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this)}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this}},{key:"addVectors",value:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this}},{key:"addScaledVector",value:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a,this}},{key:"sub",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,a)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this)}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this}},{key:"subVectors",value:function(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this.z=r.z-a.z,this}},{key:"multiply",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,a)):(this.x*=r.x,this.y*=r.y,this.z*=r.z,this)}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this}},{key:"multiplyVectors",value:function(r,a){return this.x=r.x*a.x,this.y=r.y*a.y,this.z=r.z*a.z,this}},{key:"applyEuler",value:function(r){return r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(G4.setFromEuler(r))}},{key:"applyAxisAngle",value:function(r,a){return this.applyQuaternion(G4.setFromAxisAngle(r,a))}},{key:"applyMatrix3",value:function(r){var a=this.x,o=this.y,u=this.z,c=r.elements;return this.x=c[0]*a+c[3]*o+c[6]*u,this.y=c[1]*a+c[4]*o+c[7]*u,this.z=c[2]*a+c[5]*o+c[8]*u,this}},{key:"applyNormalMatrix",value:function(r){return this.applyMatrix3(r).normalize()}},{key:"applyMatrix4",value:function(r){var a=this.x,o=this.y,u=this.z,c=r.elements,d=1/(c[3]*a+c[7]*o+c[11]*u+c[15]);return this.x=(c[0]*a+c[4]*o+c[8]*u+c[12])*d,this.y=(c[1]*a+c[5]*o+c[9]*u+c[13])*d,this.z=(c[2]*a+c[6]*o+c[10]*u+c[14])*d,this}},{key:"applyQuaternion",value:function(r){var a=this.x,o=this.y,u=this.z,c=r.x,d=r.y,m=r.z,_=r.w,b=_*a+d*u-m*o,E=_*o+m*a-c*u,T=_*u+c*o-d*a,I=-c*a-d*o-m*u;return this.x=b*_+I*-c+E*-m-T*-d,this.y=E*_+I*-d+T*-c-b*-m,this.z=T*_+I*-m+b*-d-E*-c,this}},{key:"project",value:function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}},{key:"unproject",value:function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}},{key:"transformDirection",value:function(r){var a=this.x,o=this.y,u=this.z,c=r.elements;return this.x=c[0]*a+c[4]*o+c[8]*u,this.y=c[1]*a+c[5]*o+c[9]*u,this.z=c[2]*a+c[6]*o+c[10]*u,this.normalize()}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}},{key:"clamp",value:function(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this.z=Math.max(r.z,Math.min(a.z,this.z)),this}},{key:"clampScalar",value:function(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this.z=Math.max(r,Math.min(a,this.z)),this}},{key:"clampLength",value:function(r,a){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(a,o)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this.z+=(r.z-this.z)*a,this}},{key:"lerpVectors",value:function(r,a,o){return this.x=r.x+(a.x-r.x)*o,this.y=r.y+(a.y-r.y)*o,this.z=r.z+(a.z-r.z)*o,this}},{key:"cross",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,a)):this.crossVectors(this,r)}},{key:"crossVectors",value:function(r,a){var o=r.x,u=r.y,c=r.z,d=a.x,m=a.y,_=a.z;return this.x=u*_-c*m,this.y=c*d-o*_,this.z=o*m-u*d,this}},{key:"projectOnVector",value:function(r){var a=r.lengthSq();if(0===a)return this.set(0,0,0);var o=r.dot(this)/a;return this.copy(r).multiplyScalar(o)}},{key:"projectOnPlane",value:function(r){return h3.copy(this).projectOnVector(r),this.sub(h3)}},{key:"reflect",value:function(r){return this.sub(h3.copy(r).multiplyScalar(2*this.dot(r)))}},{key:"angleTo",value:function(r){var a=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===a)return Math.PI/2;var o=this.dot(r)/a;return Math.acos(hu(o,-1,1))}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var a=this.x-r.x,o=this.y-r.y,u=this.z-r.z;return a*a+o*o+u*u}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}},{key:"setFromSpherical",value:function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}},{key:"setFromSphericalCoords",value:function(r,a,o){var u=Math.sin(a)*r;return this.x=u*Math.sin(o),this.y=Math.cos(a)*r,this.z=u*Math.cos(o),this}},{key:"setFromCylindrical",value:function(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}},{key:"setFromCylindricalCoords",value:function(r,a,o){return this.x=r*Math.sin(a),this.y=o,this.z=r*Math.cos(a),this}},{key:"setFromMatrixPosition",value:function(r){var a=r.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}},{key:"setFromMatrixScale",value:function(r){var a=this.setFromMatrixColumn(r,0).length(),o=this.setFromMatrixColumn(r,1).length(),u=this.setFromMatrixColumn(r,2).length();return this.x=a,this.y=o,this.z=u,this}},{key:"setFromMatrixColumn",value:function(r,a){return this.fromArray(r.elements,4*a)}},{key:"setFromMatrix3Column",value:function(r,a){return this.fromArray(r.elements,3*a)}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}},{key:"fromArray",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[a],this.y=r[a+1],this.z=r[a+2],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[a]=this.x,r[a+1]=this.y,r[a+2]=this.z,r}},{key:"fromBufferAttribute",value:function(r,a,o){return void 0!==o&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(a),this.y=r.getY(a),this.z=r.getZ(a),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var r=2*(Math.random()-.5),a=Math.random()*Math.PI*2,o=Math.sqrt(1-Math.pow(r,2));return this.x=o*Math.cos(a),this.y=o*Math.sin(a),this.z=r,this}},{key:i,value:Ze().mark(function n(){return Ze().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.x;case 2:return a.next=4,this.y;case 4:return a.next=6,this.z;case 6:case"end":return a.stop()}},n,this)})}]),s}(Symbol.iterator);xe.prototype.isVector3=!0;var h3=new xe,G4=new Xo,Kc=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe(-1/0,-1/0,-1/0);(0,M.Z)(this,i),this.min=s,this.max=n}return(0,D.Z)(i,[{key:"set",value:function(n,r){return this.min.copy(n),this.max.copy(r),this}},{key:"setFromArray",value:function(n){for(var r=1/0,a=1/0,o=1/0,u=-1/0,c=-1/0,d=-1/0,m=0,_=n.length;m<_;m+=3){var b=n[m],E=n[m+1],T=n[m+2];b<r&&(r=b),E<a&&(a=E),T<o&&(o=T),b>u&&(u=b),E>c&&(c=E),T>d&&(d=T)}return this.min.set(r,a,o),this.max.set(u,c,d),this}},{key:"setFromBufferAttribute",value:function(n){for(var r=1/0,a=1/0,o=1/0,u=-1/0,c=-1/0,d=-1/0,m=0,_=n.count;m<_;m++){var b=n.getX(m),E=n.getY(m),T=n.getZ(m);b<r&&(r=b),E<a&&(a=E),T<o&&(o=T),b>u&&(u=b),E>c&&(c=E),T>d&&(d=T)}return this.min.set(r,a,o),this.max.set(u,c,d),this}},{key:"setFromPoints",value:function(n){this.makeEmpty();for(var r=0,a=n.length;r<a;r++)this.expandByPoint(n[r]);return this}},{key:"setFromCenterAndSize",value:function(n,r){var a=kA.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(a),this.max.copy(n).add(a),this}},{key:"setFromObject",value:function(n){return this.makeEmpty(),this.expandByObject(n)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.min.copy(n.min),this.max.copy(n.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(n){return this.min.min(n),this.max.max(n),this}},{key:"expandByVector",value:function(n){return this.min.sub(n),this.max.add(n),this}},{key:"expandByScalar",value:function(n){return this.min.addScalar(-n),this.max.addScalar(n),this}},{key:"expandByObject",value:function(n){n.updateWorldMatrix(!1,!1);var r=n.geometry;void 0!==r&&(null===r.boundingBox&&r.computeBoundingBox(),d3.copy(r.boundingBox),d3.applyMatrix4(n.matrixWorld),this.union(d3));for(var a=n.children,o=0,u=a.length;o<u;o++)this.expandByObject(a[o]);return this}},{key:"containsPoint",value:function(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y||n.z<this.min.z||n.z>this.max.z)}},{key:"containsBox",value:function(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}},{key:"getParameter",value:function(n,r){return r.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y||n.max.z<this.min.z||n.min.z>this.max.z)}},{key:"intersectsSphere",value:function(n){return this.clampPoint(n.center,kA),kA.distanceToSquared(n.center)<=n.radius*n.radius}},{key:"intersectsPlane",value:function(n){var r,a;return n.normal.x>0?(r=n.normal.x*this.min.x,a=n.normal.x*this.max.x):(r=n.normal.x*this.max.x,a=n.normal.x*this.min.x),n.normal.y>0?(r+=n.normal.y*this.min.y,a+=n.normal.y*this.max.y):(r+=n.normal.y*this.max.y,a+=n.normal.y*this.min.y),n.normal.z>0?(r+=n.normal.z*this.min.z,a+=n.normal.z*this.max.z):(r+=n.normal.z*this.max.z,a+=n.normal.z*this.min.z),r<=-n.constant&&a>=-n.constant}},{key:"intersectsTriangle",value:function(n){if(this.isEmpty())return!1;this.getCenter(EA),KP.subVectors(this.max,EA),nk.subVectors(n.a,EA),rk.subVectors(n.b,EA),ik.subVectors(n.c,EA),Im.subVectors(rk,nk),Dm.subVectors(ik,rk),y_.subVectors(nk,ik);var r=[0,-Im.z,Im.y,0,-Dm.z,Dm.y,0,-y_.z,y_.y,Im.z,0,-Im.x,Dm.z,0,-Dm.x,y_.z,0,-y_.x,-Im.y,Im.x,0,-Dm.y,Dm.x,0,-y_.y,y_.x,0];return!(!v3(r,nk,rk,ik,KP)||(r=[1,0,0,0,1,0,0,0,1],!v3(r,nk,rk,ik,KP)))&&($P.crossVectors(Im,Dm),v3(r=[$P.x,$P.y,$P.z],nk,rk,ik,KP))}},{key:"clampPoint",value:function(n,r){return r.copy(n).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(n){return kA.copy(n).clamp(this.min,this.max).sub(n).length()}},{key:"getBoundingSphere",value:function(n){return this.getCenter(n.center),n.radius=.5*this.getSize(kA).length(),n}},{key:"intersect",value:function(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(n){return this.min.min(n.min),this.max.max(n.max),this}},{key:"applyMatrix4",value:function(n){return this.isEmpty()||(vv[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),vv[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),vv[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),vv[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),vv[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),vv[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),vv[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),vv[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(vv)),this}},{key:"translate",value:function(n){return this.min.add(n),this.max.add(n),this}},{key:"equals",value:function(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}]),i}();Kc.prototype.isBox3=!0;var vv=[new xe,new xe,new xe,new xe,new xe,new xe,new xe,new xe],kA=new xe,d3=new Kc,nk=new xe,rk=new xe,ik=new xe,Im=new xe,Dm=new xe,y_=new xe,EA=new xe,KP=new xe,$P=new xe,__=new xe;function v3(i,s,n,r,a){for(var o=0,u=i.length-3;o<=u;o+=3){__.fromArray(i,o);var c=a.x*Math.abs(__.x)+a.y*Math.abs(__.y)+a.z*Math.abs(__.z),d=s.dot(__),m=n.dot(__),_=r.dot(__);if(Math.max(-Math.max(d,m,_),Math.min(d,m,_))>c)return!1}return!0}var Wne=new Kc,j4=new xe,p3=new xe,m3=new xe,ak=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,M.Z)(this,i),this.center=s,this.radius=n}return(0,D.Z)(i,[{key:"set",value:function(n,r){return this.center.copy(n),this.radius=r,this}},{key:"setFromPoints",value:function(n,r){var a=this.center;void 0!==r?a.copy(r):Wne.setFromPoints(n).getCenter(a);for(var o=0,u=0,c=n.length;u<c;u++)o=Math.max(o,a.distanceToSquared(n[u]));return this.radius=Math.sqrt(o),this}},{key:"copy",value:function(n){return this.center.copy(n.center),this.radius=n.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(n){return n.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(n){var r=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=r*r}},{key:"intersectsBox",value:function(n){return n.intersectsSphere(this)}},{key:"intersectsPlane",value:function(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(n,r){var a=this.center.distanceToSquared(n);return r.copy(n),a>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}},{key:"getBoundingBox",value:function(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}},{key:"applyMatrix4",value:function(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}},{key:"translate",value:function(n){return this.center.add(n),this}},{key:"expandByPoint",value:function(n){m3.subVectors(n,this.center);var r=m3.lengthSq();if(r>this.radius*this.radius){var a=Math.sqrt(r),o=.5*(a-this.radius);this.center.add(m3.multiplyScalar(o/a)),this.radius+=o}return this}},{key:"union",value:function(n){return p3.subVectors(n.center,this.center).normalize().multiplyScalar(n.radius),this.expandByPoint(j4.copy(n.center).add(p3)),this.expandByPoint(j4.copy(n.center).sub(p3)),this}},{key:"equals",value:function(n){return n.center.equals(this.center)&&n.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}(),pv=new xe,g3=new xe,XP=new xe,Rm=new xe,y3=new xe,QP=new xe,_3=new xe,sk=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe(0,0,-1);(0,M.Z)(this,i),this.origin=s,this.direction=n}return(0,D.Z)(i,[{key:"set",value:function(n,r){return this.origin.copy(n),this.direction.copy(r),this}},{key:"copy",value:function(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}},{key:"at",value:function(n,r){return r.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"lookAt",value:function(n){return this.direction.copy(n).sub(this.origin).normalize(),this}},{key:"recast",value:function(n){return this.origin.copy(this.at(n,pv)),this}},{key:"closestPointToPoint",value:function(n,r){r.subVectors(n,this.origin);var a=r.dot(this.direction);return a<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(a).add(this.origin)}},{key:"distanceToPoint",value:function(n){return Math.sqrt(this.distanceSqToPoint(n))}},{key:"distanceSqToPoint",value:function(n){var r=pv.subVectors(n,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(n):(pv.copy(this.direction).multiplyScalar(r).add(this.origin),pv.distanceToSquared(n))}},{key:"distanceSqToSegment",value:function(n,r,a,o){g3.copy(n).add(r).multiplyScalar(.5),XP.copy(r).sub(n).normalize(),Rm.copy(this.origin).sub(g3);var E,T,I,N,u=.5*n.distanceTo(r),c=-this.direction.dot(XP),d=Rm.dot(this.direction),m=-Rm.dot(XP),_=Rm.lengthSq(),b=Math.abs(1-c*c);if(b>0)if(T=c*d-m,N=u*b,(E=c*m-d)>=0)if(T>=-N)if(T<=N){var W=1/b;I=(E*=W)*(E+c*(T*=W)+2*d)+T*(c*E+T+2*m)+_}else T=u,I=-(E=Math.max(0,-(c*T+d)))*E+T*(T+2*m)+_;else T=-u,I=-(E=Math.max(0,-(c*T+d)))*E+T*(T+2*m)+_;else T<=-N?I=-(E=Math.max(0,-(-c*u+d)))*E+(T=E>0?-u:Math.min(Math.max(-u,-m),u))*(T+2*m)+_:T<=N?(E=0,I=(T=Math.min(Math.max(-u,-m),u))*(T+2*m)+_):I=-(E=Math.max(0,-(c*u+d)))*E+(T=E>0?u:Math.min(Math.max(-u,-m),u))*(T+2*m)+_;else T=c>0?-u:u,I=-(E=Math.max(0,-(c*T+d)))*E+T*(T+2*m)+_;return a&&a.copy(this.direction).multiplyScalar(E).add(this.origin),o&&o.copy(XP).multiplyScalar(T).add(g3),I}},{key:"intersectSphere",value:function(n,r){pv.subVectors(n.center,this.origin);var a=pv.dot(this.direction),o=pv.dot(pv)-a*a,u=n.radius*n.radius;if(o>u)return null;var c=Math.sqrt(u-o),d=a-c,m=a+c;return d<0&&m<0?null:this.at(d<0?m:d,r)}},{key:"intersectsSphere",value:function(n){return this.distanceSqToPoint(n.center)<=n.radius*n.radius}},{key:"distanceToPlane",value:function(n){var r=n.normal.dot(this.direction);if(0===r)return 0===n.distanceToPoint(this.origin)?0:null;var a=-(this.origin.dot(n.normal)+n.constant)/r;return a>=0?a:null}},{key:"intersectPlane",value:function(n,r){var a=this.distanceToPlane(n);return null===a?null:this.at(a,r)}},{key:"intersectsPlane",value:function(n){var r=n.distanceToPoint(this.origin);return 0===r||n.normal.dot(this.direction)*r<0}},{key:"intersectBox",value:function(n,r){var a,o,u,c,d,m,_=1/this.direction.x,b=1/this.direction.y,E=1/this.direction.z,T=this.origin;return _>=0?(a=(n.min.x-T.x)*_,o=(n.max.x-T.x)*_):(a=(n.max.x-T.x)*_,o=(n.min.x-T.x)*_),b>=0?(u=(n.min.y-T.y)*b,c=(n.max.y-T.y)*b):(u=(n.max.y-T.y)*b,c=(n.min.y-T.y)*b),a>c||u>o||((u>a||a!=a)&&(a=u),(c<o||o!=o)&&(o=c),E>=0?(d=(n.min.z-T.z)*E,m=(n.max.z-T.z)*E):(d=(n.max.z-T.z)*E,m=(n.min.z-T.z)*E),a>m||d>o)||((d>a||a!=a)&&(a=d),(m<o||o!=o)&&(o=m),o<0)?null:this.at(a>=0?a:o,r)}},{key:"intersectsBox",value:function(n){return null!==this.intersectBox(n,pv)}},{key:"intersectTriangle",value:function(n,r,a,o,u){y3.subVectors(r,n),QP.subVectors(a,n),_3.crossVectors(y3,QP);var d,c=this.direction.dot(_3);if(c>0){if(o)return null;d=1}else{if(!(c<0))return null;d=-1,c=-c}Rm.subVectors(this.origin,n);var m=d*this.direction.dot(QP.crossVectors(Rm,QP));if(m<0)return null;var _=d*this.direction.dot(y3.cross(Rm));if(_<0||m+_>c)return null;var b=-d*Rm.dot(_3);return b<0?null:this.at(b/c,u)}},{key:"applyMatrix4",value:function(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}},{key:"equals",value:function(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}(),Cr=function(){function i(){(0,M.Z)(this,i),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,D.Z)(i,[{key:"set",value:function(n,r,a,o,u,c,d,m,_,b,E,T,I,N,W,U){var H=this.elements;return H[0]=n,H[4]=r,H[8]=a,H[12]=o,H[1]=u,H[5]=c,H[9]=d,H[13]=m,H[2]=_,H[6]=b,H[10]=E,H[14]=T,H[3]=I,H[7]=N,H[11]=W,H[15]=U,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new i).fromArray(this.elements)}},{key:"copy",value:function(n){var r=this.elements,a=n.elements;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],this}},{key:"copyPosition",value:function(n){var r=this.elements,a=n.elements;return r[12]=a[12],r[13]=a[13],r[14]=a[14],this}},{key:"setFromMatrix3",value:function(n){var r=n.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(n,r,a){return n.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(n,r,a){return this.set(n.x,r.x,a.x,0,n.y,r.y,a.y,0,n.z,r.z,a.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(n){var r=this.elements,a=n.elements,o=1/ok.setFromMatrixColumn(n,0).length(),u=1/ok.setFromMatrixColumn(n,1).length(),c=1/ok.setFromMatrixColumn(n,2).length();return r[0]=a[0]*o,r[1]=a[1]*o,r[2]=a[2]*o,r[3]=0,r[4]=a[4]*u,r[5]=a[5]*u,r[6]=a[6]*u,r[7]=0,r[8]=a[8]*c,r[9]=a[9]*c,r[10]=a[10]*c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromEuler",value:function(n){n&&n.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=this.elements,a=n.x,o=n.y,u=n.z,c=Math.cos(a),d=Math.sin(a),m=Math.cos(o),_=Math.sin(o),b=Math.cos(u),E=Math.sin(u);if("XYZ"===n.order){var T=c*b,I=c*E,N=d*b,W=d*E;r[0]=m*b,r[4]=-m*E,r[8]=_,r[1]=I+N*_,r[5]=T-W*_,r[9]=-d*m,r[2]=W-T*_,r[6]=N+I*_,r[10]=c*m}else if("YXZ"===n.order){var U=m*b,H=m*E,te=_*b,ue=_*E;r[0]=U+ue*d,r[4]=te*d-H,r[8]=c*_,r[1]=c*E,r[5]=c*b,r[9]=-d,r[2]=H*d-te,r[6]=ue+U*d,r[10]=c*m}else if("ZXY"===n.order){var le=m*b,he=m*E,se=_*b,ye=_*E;r[0]=le-ye*d,r[4]=-c*E,r[8]=se+he*d,r[1]=he+se*d,r[5]=c*b,r[9]=ye-le*d,r[2]=-c*_,r[6]=d,r[10]=c*m}else if("ZYX"===n.order){var Ue=c*b,Ve=c*E,Fe=d*b,et=d*E;r[0]=m*b,r[4]=Fe*_-Ve,r[8]=Ue*_+et,r[1]=m*E,r[5]=et*_+Ue,r[9]=Ve*_-Fe,r[2]=-_,r[6]=d*m,r[10]=c*m}else if("YZX"===n.order){var Ye=c*m,tt=c*_,wt=d*m,pt=d*_;r[0]=m*b,r[4]=pt-Ye*E,r[8]=wt*E+tt,r[1]=E,r[5]=c*b,r[9]=-d*b,r[2]=-_*b,r[6]=tt*E+wt,r[10]=Ye-pt*E}else if("XZY"===n.order){var Mt=c*m,$t=c*_,_n=d*m,fn=d*_;r[0]=m*b,r[4]=-E,r[8]=_*b,r[1]=Mt*E+fn,r[5]=c*b,r[9]=$t*E-_n,r[2]=_n*E-$t,r[6]=d*b,r[10]=fn*E+Mt}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(n){return this.compose(qne,n,Yne)}},{key:"lookAt",value:function(n,r,a){var o=this.elements;return tc.subVectors(n,r),0===tc.lengthSq()&&(tc.z=1),tc.normalize(),Pm.crossVectors(a,tc),0===Pm.lengthSq()&&(1===Math.abs(a.z)?tc.x+=1e-4:tc.z+=1e-4,tc.normalize(),Pm.crossVectors(a,tc)),Pm.normalize(),JP.crossVectors(tc,Pm),o[0]=Pm.x,o[4]=JP.x,o[8]=tc.x,o[1]=Pm.y,o[5]=JP.y,o[9]=tc.y,o[2]=Pm.z,o[6]=JP.z,o[10]=tc.z,this}},{key:"multiply",value:function(n,r){return void 0!==r?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(n,r)):this.multiplyMatrices(this,n)}},{key:"premultiply",value:function(n){return this.multiplyMatrices(n,this)}},{key:"multiplyMatrices",value:function(n,r){var a=n.elements,o=r.elements,u=this.elements,c=a[0],d=a[4],m=a[8],_=a[12],b=a[1],E=a[5],T=a[9],I=a[13],N=a[2],W=a[6],U=a[10],H=a[14],te=a[3],ue=a[7],le=a[11],he=a[15],se=o[0],ye=o[4],Ue=o[8],Ve=o[12],Fe=o[1],et=o[5],Ye=o[9],tt=o[13],wt=o[2],pt=o[6],Mt=o[10],$t=o[14],_n=o[3],fn=o[7],tn=o[11],un=o[15];return u[0]=c*se+d*Fe+m*wt+_*_n,u[4]=c*ye+d*et+m*pt+_*fn,u[8]=c*Ue+d*Ye+m*Mt+_*tn,u[12]=c*Ve+d*tt+m*$t+_*un,u[1]=b*se+E*Fe+T*wt+I*_n,u[5]=b*ye+E*et+T*pt+I*fn,u[9]=b*Ue+E*Ye+T*Mt+I*tn,u[13]=b*Ve+E*tt+T*$t+I*un,u[2]=N*se+W*Fe+U*wt+H*_n,u[6]=N*ye+W*et+U*pt+H*fn,u[10]=N*Ue+W*Ye+U*Mt+H*tn,u[14]=N*Ve+W*tt+U*$t+H*un,u[3]=te*se+ue*Fe+le*wt+he*_n,u[7]=te*ye+ue*et+le*pt+he*fn,u[11]=te*Ue+ue*Ye+le*Mt+he*tn,u[15]=te*Ve+ue*tt+le*$t+he*un,this}},{key:"multiplyScalar",value:function(n){var r=this.elements;return r[0]*=n,r[4]*=n,r[8]*=n,r[12]*=n,r[1]*=n,r[5]*=n,r[9]*=n,r[13]*=n,r[2]*=n,r[6]*=n,r[10]*=n,r[14]*=n,r[3]*=n,r[7]*=n,r[11]*=n,r[15]*=n,this}},{key:"determinant",value:function(){var n=this.elements,r=n[0],a=n[4],o=n[8],u=n[12],c=n[1],d=n[5],m=n[9],_=n[13],b=n[2],E=n[6],T=n[10],I=n[14];return n[3]*(+u*m*E-o*_*E-u*d*T+a*_*T+o*d*I-a*m*I)+n[7]*(+r*m*I-r*_*T+u*c*T-o*c*I+o*_*b-u*m*b)+n[11]*(+r*_*E-r*d*I-u*c*E+a*c*I+u*d*b-a*_*b)+n[15]*(-o*d*b-r*m*E+r*d*T+o*c*E-a*c*T+a*m*b)}},{key:"transpose",value:function(){var r,n=this.elements;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[6],n[6]=n[9],n[9]=r,r=n[3],n[3]=n[12],n[12]=r,r=n[7],n[7]=n[13],n[13]=r,r=n[11],n[11]=n[14],n[14]=r,this}},{key:"setPosition",value:function(n,r,a){var o=this.elements;return n.isVector3?(o[12]=n.x,o[13]=n.y,o[14]=n.z):(o[12]=n,o[13]=r,o[14]=a),this}},{key:"invert",value:function(){var n=this.elements,r=n[0],a=n[1],o=n[2],u=n[3],c=n[4],d=n[5],m=n[6],_=n[7],b=n[8],E=n[9],T=n[10],I=n[11],N=n[12],W=n[13],U=n[14],H=n[15],te=E*U*_-W*T*_+W*m*I-d*U*I-E*m*H+d*T*H,ue=N*T*_-b*U*_-N*m*I+c*U*I+b*m*H-c*T*H,le=b*W*_-N*E*_+N*d*I-c*W*I-b*d*H+c*E*H,he=N*E*m-b*W*m-N*d*T+c*W*T+b*d*U-c*E*U,se=r*te+a*ue+o*le+u*he;if(0===se)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var ye=1/se;return n[0]=te*ye,n[1]=(W*T*u-E*U*u-W*o*I+a*U*I+E*o*H-a*T*H)*ye,n[2]=(d*U*u-W*m*u+W*o*_-a*U*_-d*o*H+a*m*H)*ye,n[3]=(E*m*u-d*T*u-E*o*_+a*T*_+d*o*I-a*m*I)*ye,n[4]=ue*ye,n[5]=(b*U*u-N*T*u+N*o*I-r*U*I-b*o*H+r*T*H)*ye,n[6]=(N*m*u-c*U*u-N*o*_+r*U*_+c*o*H-r*m*H)*ye,n[7]=(c*T*u-b*m*u+b*o*_-r*T*_-c*o*I+r*m*I)*ye,n[8]=le*ye,n[9]=(N*E*u-b*W*u-N*a*I+r*W*I+b*a*H-r*E*H)*ye,n[10]=(c*W*u-N*d*u+N*a*_-r*W*_-c*a*H+r*d*H)*ye,n[11]=(b*d*u-c*E*u-b*a*_+r*E*_+c*a*I-r*d*I)*ye,n[12]=he*ye,n[13]=(b*W*o-N*E*o+N*a*T-r*W*T-b*a*U+r*E*U)*ye,n[14]=(N*d*o-c*W*o-N*a*m+r*W*m+c*a*U-r*d*U)*ye,n[15]=(c*E*o-b*d*o+b*a*m-r*E*m-c*a*T+r*d*T)*ye,this}},{key:"scale",value:function(n){var r=this.elements,a=n.x,o=n.y,u=n.z;return r[0]*=a,r[4]*=o,r[8]*=u,r[1]*=a,r[5]*=o,r[9]*=u,r[2]*=a,r[6]*=o,r[10]*=u,r[3]*=a,r[7]*=o,r[11]*=u,this}},{key:"getMaxScaleOnAxis",value:function(){var n=this.elements;return Math.sqrt(Math.max(n[0]*n[0]+n[1]*n[1]+n[2]*n[2],n[4]*n[4]+n[5]*n[5]+n[6]*n[6],n[8]*n[8]+n[9]*n[9]+n[10]*n[10]))}},{key:"makeTranslation",value:function(n,r,a){return this.set(1,0,0,n,0,1,0,r,0,0,1,a,0,0,0,1),this}},{key:"makeRotationX",value:function(n){var r=Math.cos(n),a=Math.sin(n);return this.set(1,0,0,0,0,r,-a,0,0,a,r,0,0,0,0,1),this}},{key:"makeRotationY",value:function(n){var r=Math.cos(n),a=Math.sin(n);return this.set(r,0,a,0,0,1,0,0,-a,0,r,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(n){var r=Math.cos(n),a=Math.sin(n);return this.set(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(n,r){var a=Math.cos(r),o=Math.sin(r),u=1-a,c=n.x,d=n.y,m=n.z,_=u*c,b=u*d;return this.set(_*c+a,_*d-o*m,_*m+o*d,0,_*d+o*m,b*d+a,b*m-o*c,0,_*m-o*d,b*m+o*c,u*m*m+a,0,0,0,0,1),this}},{key:"makeScale",value:function(n,r,a){return this.set(n,0,0,0,0,r,0,0,0,0,a,0,0,0,0,1),this}},{key:"makeShear",value:function(n,r,a,o,u,c){return this.set(1,a,u,0,n,1,c,0,r,o,1,0,0,0,0,1),this}},{key:"compose",value:function(n,r,a){var o=this.elements,u=r._x,c=r._y,d=r._z,m=r._w,_=u+u,b=c+c,E=d+d,T=u*_,I=u*b,N=u*E,W=c*b,U=c*E,H=d*E,te=m*_,ue=m*b,le=m*E,he=a.x,se=a.y,ye=a.z;return o[0]=(1-(W+H))*he,o[1]=(I+le)*he,o[2]=(N-ue)*he,o[3]=0,o[4]=(I-le)*se,o[5]=(1-(T+H))*se,o[6]=(U+te)*se,o[7]=0,o[8]=(N+ue)*ye,o[9]=(U-te)*ye,o[10]=(1-(T+W))*ye,o[11]=0,o[12]=n.x,o[13]=n.y,o[14]=n.z,o[15]=1,this}},{key:"decompose",value:function(n,r,a){var o=this.elements,u=ok.set(o[0],o[1],o[2]).length(),c=ok.set(o[4],o[5],o[6]).length(),d=ok.set(o[8],o[9],o[10]).length();this.determinant()<0&&(u=-u),n.x=o[12],n.y=o[13],n.z=o[14],Ff.copy(this);var _=1/u,b=1/c,E=1/d;return Ff.elements[0]*=_,Ff.elements[1]*=_,Ff.elements[2]*=_,Ff.elements[4]*=b,Ff.elements[5]*=b,Ff.elements[6]*=b,Ff.elements[8]*=E,Ff.elements[9]*=E,Ff.elements[10]*=E,r.setFromRotationMatrix(Ff),a.x=u,a.y=c,a.z=d,this}},{key:"makePerspective",value:function(n,r,a,o,u,c){void 0===c&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var d=this.elements,_=2*u/(a-o),b=(r+n)/(r-n),E=(a+o)/(a-o),T=-(c+u)/(c-u),I=-2*c*u/(c-u);return d[0]=2*u/(r-n),d[4]=0,d[8]=b,d[12]=0,d[1]=0,d[5]=_,d[9]=E,d[13]=0,d[2]=0,d[6]=0,d[10]=T,d[14]=I,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}},{key:"makeOrthographic",value:function(n,r,a,o,u,c){var d=this.elements,m=1/(r-n),_=1/(a-o),b=1/(c-u),E=(r+n)*m,T=(a+o)*_,I=(c+u)*b;return d[0]=2*m,d[4]=0,d[8]=0,d[12]=-E,d[1]=0,d[5]=2*_,d[9]=0,d[13]=-T,d[2]=0,d[6]=0,d[10]=-2*b,d[14]=-I,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}},{key:"equals",value:function(n){for(var r=this.elements,a=n.elements,o=0;o<16;o++)if(r[o]!==a[o])return!1;return!0}},{key:"fromArray",value:function(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0;a<16;a++)this.elements[a]=n[a+r];return this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.elements;return n[r]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3],n[r+4]=a[4],n[r+5]=a[5],n[r+6]=a[6],n[r+7]=a[7],n[r+8]=a[8],n[r+9]=a[9],n[r+10]=a[10],n[r+11]=a[11],n[r+12]=a[12],n[r+13]=a[13],n[r+14]=a[14],n[r+15]=a[15],n}}]),i}();Cr.prototype.isMatrix4=!0;var ok=new xe,Ff=new Cr,qne=new xe(0,0,0),Yne=new xe(1,1,1),Pm=new xe,JP=new xe,tc=new xe,W4=new Cr,q4=new Xo,eO=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.DefaultOrder;(0,M.Z)(this,i),this._x=s,this._y=n,this._z=r,this._order=a}return(0,D.Z)(i,[{key:"x",get:function(){return this._x},set:function(n){this._x=n,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(n){this._z=n,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(n){this._order=n,this._onChangeCallback()}},{key:"set",value:function(n,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=n,this._y=r,this._z=a,this._order=o,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.elements,u=o[0],c=o[4],d=o[8],m=o[1],_=o[5],b=o[9],E=o[2],T=o[6],I=o[10];switch(r){case"XYZ":this._y=Math.asin(hu(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-b,I),this._z=Math.atan2(-c,u)):(this._x=Math.atan2(T,_),this._z=0);break;case"YXZ":this._x=Math.asin(-hu(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(d,I),this._z=Math.atan2(m,_)):(this._y=Math.atan2(-E,u),this._z=0);break;case"ZXY":this._x=Math.asin(hu(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-E,I),this._z=Math.atan2(-c,_)):(this._y=0,this._z=Math.atan2(m,u));break;case"ZYX":this._y=Math.asin(-hu(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(T,I),this._z=Math.atan2(m,u)):(this._x=0,this._z=Math.atan2(-c,_));break;case"YZX":this._z=Math.asin(hu(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-b,_),this._y=Math.atan2(-E,u)):(this._x=0,this._y=Math.atan2(d,I));break;case"XZY":this._z=Math.asin(-hu(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(T,_),this._y=Math.atan2(d,u)):(this._x=Math.atan2(-b,I),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===a&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(n,r,a){return W4.makeRotationFromQuaternion(n),this.setFromRotationMatrix(W4,r,a)}},{key:"setFromVector3",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(n.x,n.y,n.z,r)}},{key:"reorder",value:function(n){return q4.setFromEuler(this),this.setFromQuaternion(q4,n)}},{key:"equals",value:function(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}},{key:"fromArray",value:function(n){return this._x=n[0],this._y=n[1],this._z=n[2],void 0!==n[3]&&(this._order=n[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n[r]=this._x,n[r+1]=this._y,n[r+2]=this._z,n[r+3]=this._order,n}},{key:"toVector3",value:function(n){return n?n.set(this._x,this._y,this._z):new xe(this._x,this._y,this._z)}},{key:"_onChange",value:function(n){return this._onChangeCallback=n,this}},{key:"_onChangeCallback",value:function(){}}]),i}();eO.prototype.isEuler=!0,eO.DefaultOrder="XYZ",eO.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Kne=function(){function i(){(0,M.Z)(this,i),this.mask=1}return(0,D.Z)(i,[{key:"set",value:function(n){this.mask=1<<n|0}},{key:"enable",value:function(n){this.mask|=1<<n|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(n){this.mask^=1<<n|0}},{key:"disable",value:function(n){this.mask&=~(1<<n|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(n){return 0!=(this.mask&n.mask)}}]),i}(),$ne=0,Y4=new xe,uk=new Xo,mv=new Cr,tO=new xe,CA=new xe,Xne=new xe,Qne=new Xo,K4=new xe(1,0,0),$4=new xe(0,1,0),X4=new xe(0,0,1),Jne={type:"added"},Q4={type:"removed"},Na=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,wa.Z)(r),"id",{value:$ne++}),r.uuid=Yc(),r.name="",r.type="Object3D",r.parent=null,r.children=[],r.up=n.DefaultUp.clone();var a=new xe,o=new eO,u=new Xo,c=new xe(1,1,1);return o._onChange(function(){u.setFromEuler(o,!1)}),u._onChange(function(){o.setFromQuaternion(u,void 0,!1)}),Object.defineProperties((0,wa.Z)(r),{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:u},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new Cr},normalMatrix:{value:new du}}),r.matrix=new Cr,r.matrixWorld=new Cr,r.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,r.matrixWorldNeedsUpdate=!1,r.layers=new Kne,r.visible=!0,r.castShadow=!1,r.receiveShadow=!1,r.frustumCulled=!0,r.renderOrder=0,r.animations=[],r.userData={},r}return(0,D.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(a){return this.quaternion.premultiply(a),this}},{key:"setRotationFromAxisAngle",value:function(a,o){this.quaternion.setFromAxisAngle(a,o)}},{key:"setRotationFromEuler",value:function(a){this.quaternion.setFromEuler(a,!0)}},{key:"setRotationFromMatrix",value:function(a){this.quaternion.setFromRotationMatrix(a)}},{key:"setRotationFromQuaternion",value:function(a){this.quaternion.copy(a)}},{key:"rotateOnAxis",value:function(a,o){return uk.setFromAxisAngle(a,o),this.quaternion.multiply(uk),this}},{key:"rotateOnWorldAxis",value:function(a,o){return uk.setFromAxisAngle(a,o),this.quaternion.premultiply(uk),this}},{key:"rotateX",value:function(a){return this.rotateOnAxis(K4,a)}},{key:"rotateY",value:function(a){return this.rotateOnAxis($4,a)}},{key:"rotateZ",value:function(a){return this.rotateOnAxis(X4,a)}},{key:"translateOnAxis",value:function(a,o){return Y4.copy(a).applyQuaternion(this.quaternion),this.position.add(Y4.multiplyScalar(o)),this}},{key:"translateX",value:function(a){return this.translateOnAxis(K4,a)}},{key:"translateY",value:function(a){return this.translateOnAxis($4,a)}},{key:"translateZ",value:function(a){return this.translateOnAxis(X4,a)}},{key:"localToWorld",value:function(a){return a.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(a){return a.applyMatrix4(mv.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(a,o,u){a.isVector3?tO.copy(a):tO.set(a,o,u);var c=this.parent;this.updateWorldMatrix(!0,!1),CA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?mv.lookAt(CA,tO,this.up):mv.lookAt(tO,CA,this.up),this.quaternion.setFromRotationMatrix(mv),c&&(mv.extractRotation(c.matrixWorld),uk.setFromRotationMatrix(mv),this.quaternion.premultiply(uk.invert()))}},{key:"add",value:function(a){if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(Jne)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}},{key:"remove",value:function(a){if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}var u=this.children.indexOf(a);return-1!==u&&(a.parent=null,this.children.splice(u,1),a.dispatchEvent(Q4)),this}},{key:"removeFromParent",value:function(){var a=this.parent;return null!==a&&a.remove(this),this}},{key:"clear",value:function(){for(var a=0;a<this.children.length;a++){var o=this.children[a];o.parent=null,o.dispatchEvent(Q4)}return this.children.length=0,this}},{key:"attach",value:function(a){return this.updateWorldMatrix(!0,!1),mv.copy(this.matrixWorld).invert(),null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),mv.multiply(a.parent.matrixWorld)),a.applyMatrix4(mv),this.add(a),a.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(a){return this.getObjectByProperty("id",a)}},{key:"getObjectByName",value:function(a){return this.getObjectByProperty("name",a)}},{key:"getObjectByProperty",value:function(a,o){if(this[a]===o)return this;for(var u=0,c=this.children.length;u<c;u++){var m=this.children[u].getObjectByProperty(a,o);if(void 0!==m)return m}}},{key:"getWorldPosition",value:function(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(CA,a,Xne),a}},{key:"getWorldScale",value:function(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(CA,Qne,a),a}},{key:"getWorldDirection",value:function(a){this.updateWorldMatrix(!0,!1);var o=this.matrixWorld.elements;return a.set(o[8],o[9],o[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(a){a(this);for(var o=this.children,u=0,c=o.length;u<c;u++)o[u].traverse(a)}},{key:"traverseVisible",value:function(a){if(!1!==this.visible){a(this);for(var o=this.children,u=0,c=o.length;u<c;u++)o[u].traverseVisible(a)}}},{key:"traverseAncestors",value:function(a){var o=this.parent;null!==o&&(a(o),o.traverseAncestors(a))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var o=this.children,u=0,c=o.length;u<c;u++)o[u].updateMatrixWorld(a)}},{key:"updateWorldMatrix",value:function(a,o){var u=this.parent;if(!0===a&&null!==u&&u.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===o)for(var c=this.children,d=0,m=c.length;d<m;d++)c[d].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(a){var o=void 0===a||"string"==typeof a,u={};o&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var c={};function d(et,Ye){return void 0===et[Ye.uuid]&&(et[Ye.uuid]=Ye.toJSON(a)),Ye.uuid}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),!0===this.castShadow&&(c.castShadow=!0),!0===this.receiveShadow&&(c.receiveShadow=!0),!1===this.visible&&(c.visible=!1),!1===this.frustumCulled&&(c.frustumCulled=!1),0!==this.renderOrder&&(c.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),c.layers=this.layers.mask,c.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(c.matrixAutoUpdate=!1),this.isInstancedMesh&&(c.type="InstancedMesh",c.count=this.count,c.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(c.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?c.background=this.background.toJSON():this.background.isTexture&&(c.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&(c.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){c.geometry=d(a.geometries,this.geometry);var m=this.geometry.parameters;if(void 0!==m&&void 0!==m.shapes){var _=m.shapes;if(Array.isArray(_))for(var b=0,E=_.length;b<E;b++)d(a.shapes,_[b]);else d(a.shapes,_)}}if(this.isSkinnedMesh&&(c.bindMode=this.bindMode,c.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(d(a.skeletons,this.skeleton),c.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var I=[],N=0,W=this.material.length;N<W;N++)I.push(d(a.materials,this.material[N]));c.material=I}else c.material=d(a.materials,this.material);if(this.children.length>0){c.children=[];for(var U=0;U<this.children.length;U++)c.children.push(this.children[U].toJSON(a).object)}if(this.animations.length>0){c.animations=[];for(var H=0;H<this.animations.length;H++)c.animations.push(d(a.animations,this.animations[H]))}if(o){var ue=Fe(a.geometries),le=Fe(a.materials),he=Fe(a.textures),se=Fe(a.images),ye=Fe(a.shapes),Ue=Fe(a.skeletons),Ve=Fe(a.animations);ue.length>0&&(u.geometries=ue),le.length>0&&(u.materials=le),he.length>0&&(u.textures=he),se.length>0&&(u.images=se),ye.length>0&&(u.shapes=ye),Ue.length>0&&(u.skeletons=Ue),Ve.length>0&&(u.animations=Ve)}return u.object=c,u;function Fe(et){var Ye=[];for(var tt in et){var wt=et[tt];delete wt.metadata,Ye.push(wt)}return Ye}}},{key:"clone",value:function(a){return(new this.constructor).copy(this,a)}},{key:"copy",value:function(a){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===o)for(var u=0;u<a.children.length;u++){var c=a.children[u];this.add(c.clone())}return this}}]),n}(xm);Na.DefaultUp=new xe(0,1,0),Na.DefaultMatrixAutoUpdate=!0,Na.prototype.isObject3D=!0;var Zf=new xe,gv=new xe,b3=new xe,yv=new xe,lk=new xe,ck=new xe,J4=new xe,w3=new xe,k3=new xe,E3=new xe,bl=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xe;(0,M.Z)(this,i),this.a=s,this.b=n,this.c=r}return(0,D.Z)(i,[{key:"set",value:function(n,r,a){return this.a.copy(n),this.b.copy(r),this.c.copy(a),this}},{key:"setFromPointsAndIndices",value:function(n,r,a,o){return this.a.copy(n[r]),this.b.copy(n[a]),this.c.copy(n[o]),this}},{key:"setFromAttributeAndIndices",value:function(n,r,a,o){return this.a.fromBufferAttribute(n,r),this.b.fromBufferAttribute(n,a),this.c.fromBufferAttribute(n,o),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}},{key:"getArea",value:function(){return Zf.subVectors(this.c,this.b),gv.subVectors(this.a,this.b),.5*Zf.cross(gv).length()}},{key:"getMidpoint",value:function(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(n){return i.getNormal(this.a,this.b,this.c,n)}},{key:"getPlane",value:function(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(n,r){return i.getBarycoord(n,this.a,this.b,this.c,r)}},{key:"getUV",value:function(n,r,a,o,u){return i.getUV(n,this.a,this.b,this.c,r,a,o,u)}},{key:"containsPoint",value:function(n){return i.containsPoint(n,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(n){return i.isFrontFacing(this.a,this.b,this.c,n)}},{key:"intersectsBox",value:function(n){return n.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(n,r){var c,d,a=this.a,o=this.b,u=this.c;lk.subVectors(o,a),ck.subVectors(u,a),w3.subVectors(n,a);var m=lk.dot(w3),_=ck.dot(w3);if(m<=0&&_<=0)return r.copy(a);k3.subVectors(n,o);var b=lk.dot(k3),E=ck.dot(k3);if(b>=0&&E<=b)return r.copy(o);var T=m*E-b*_;if(T<=0&&m>=0&&b<=0)return c=m/(m-b),r.copy(a).addScaledVector(lk,c);E3.subVectors(n,u);var I=lk.dot(E3),N=ck.dot(E3);if(N>=0&&I<=N)return r.copy(u);var W=I*_-m*N;if(W<=0&&_>=0&&N<=0)return d=_/(_-N),r.copy(a).addScaledVector(ck,d);var U=b*N-I*E;if(U<=0&&E-b>=0&&I-N>=0)return J4.subVectors(u,o),d=(E-b)/(E-b+(I-N)),r.copy(o).addScaledVector(J4,d);var H=1/(U+W+T);return c=W*H,d=T*H,r.copy(a).addScaledVector(lk,c).addScaledVector(ck,d)}},{key:"equals",value:function(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}],[{key:"getNormal",value:function(n,r,a,o){o.subVectors(a,r),Zf.subVectors(n,r),o.cross(Zf);var u=o.lengthSq();return u>0?o.multiplyScalar(1/Math.sqrt(u)):o.set(0,0,0)}},{key:"getBarycoord",value:function(n,r,a,o,u){Zf.subVectors(o,r),gv.subVectors(a,r),b3.subVectors(n,r);var c=Zf.dot(Zf),d=Zf.dot(gv),m=Zf.dot(b3),_=gv.dot(gv),b=gv.dot(b3),E=c*_-d*d;if(0===E)return u.set(-2,-1,-1);var T=1/E,I=(_*m-d*b)*T,N=(c*b-d*m)*T;return u.set(1-I-N,N,I)}},{key:"containsPoint",value:function(n,r,a,o){return this.getBarycoord(n,r,a,o,yv),yv.x>=0&&yv.y>=0&&yv.x+yv.y<=1}},{key:"getUV",value:function(n,r,a,o,u,c,d,m){return this.getBarycoord(n,r,a,o,yv),m.set(0,0),m.addScaledVector(u,yv.x),m.addScaledVector(c,yv.y),m.addScaledVector(d,yv.z),m}},{key:"isFrontFacing",value:function(n,r,a,o){return Zf.subVectors(a,r),gv.subVectors(n,r),Zf.cross(gv).dot(o)<0}}]),i}(),ere=0,vu=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,wa.Z)(r),"id",{value:ere++}),r.uuid=Yc(),r.name="",r.type="Material",r.fog=!0,r.blending=1,r.side=0,r.vertexColors=!1,r.opacity=1,r.format=Xu,r.transparent=!1,r.blendSrc=204,r.blendDst=205,r.blendEquation=100,r.blendSrcAlpha=null,r.blendDstAlpha=null,r.blendEquationAlpha=null,r.depthFunc=3,r.depthTest=!0,r.depthWrite=!0,r.stencilWriteMask=255,r.stencilFunc=519,r.stencilRef=0,r.stencilFuncMask=255,r.stencilFail=7680,r.stencilZFail=7680,r.stencilZPass=7680,r.stencilWrite=!1,r.clippingPlanes=null,r.clipIntersection=!1,r.clipShadows=!1,r.shadowSide=null,r.colorWrite=!0,r.precision=null,r.polygonOffset=!1,r.polygonOffsetFactor=0,r.polygonOffsetUnits=0,r.dithering=!1,r.alphaToCoverage=!1,r.premultipliedAlpha=!1,r.visible=!0,r.toneMapped=!0,r.userData={},r.version=0,r._alphaTest=0,r}return(0,D.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(a){if(void 0!==a)for(var o in a){var u=a[o];if(void 0!==u)if("shading"!==o){var c=this[o];void 0!==c?c&&c.isColor?c.set(u):c&&c.isVector3&&u&&u.isVector3?c.copy(u):this[o]=u:console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===u;else console.warn("THREE.Material: '"+o+"' parameter is undefined.")}}},{key:"toJSON",value:function(a){var o=void 0===a||"string"==typeof a;o&&(a={textures:{},images:{}});var u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function c(_){var b=[];for(var E in _){var T=_[E];delete T.metadata,b.push(T)}return b}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),this.color&&this.color.isColor&&(u.color=this.color.getHex()),void 0!==this.roughness&&(u.roughness=this.roughness),void 0!==this.metalness&&(u.metalness=this.metalness),void 0!==this.sheen&&(u.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(u.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(u.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(u.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(u.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(u.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(u.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(u.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(u.shininess=this.shininess),void 0!==this.clearcoat&&(u.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(u.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(u.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,u.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(u.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(u.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(u.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(u.lightMap=this.lightMap.toJSON(a).uuid,u.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(u.aoMap=this.aoMap.toJSON(a).uuid,u.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(u.bumpMap=this.bumpMap.toJSON(a).uuid,u.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(u.normalMap=this.normalMap.toJSON(a).uuid,u.normalMapType=this.normalMapType,u.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(u.displacementMap=this.displacementMap.toJSON(a).uuid,u.displacementScale=this.displacementScale,u.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(u.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(u.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(u.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(u.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(u.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(u.specularTintMap=this.specularTintMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(u.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(u.combine=this.combine)),void 0!==this.envMapIntensity&&(u.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(u.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(u.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(u.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.transmission&&(u.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(u.transmissionMap=this.transmissionMap.toJSON(a).uuid),void 0!==this.thickness&&(u.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(u.thicknessMap=this.thicknessMap.toJSON(a).uuid),void 0!==this.attenuationDistance&&(u.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(u.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(u.size=this.size),null!==this.shadowSide&&(u.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(u.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(u.blending=this.blending),0!==this.side&&(u.side=this.side),this.vertexColors&&(u.vertexColors=!0),this.opacity<1&&(u.opacity=this.opacity),this.format!==Xu&&(u.format=this.format),!0===this.transparent&&(u.transparent=this.transparent),u.depthFunc=this.depthFunc,u.depthTest=this.depthTest,u.depthWrite=this.depthWrite,u.colorWrite=this.colorWrite,u.stencilWrite=this.stencilWrite,u.stencilWriteMask=this.stencilWriteMask,u.stencilFunc=this.stencilFunc,u.stencilRef=this.stencilRef,u.stencilFuncMask=this.stencilFuncMask,u.stencilFail=this.stencilFail,u.stencilZFail=this.stencilZFail,u.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(u.rotation=this.rotation),!0===this.polygonOffset&&(u.polygonOffset=!0),0!==this.polygonOffsetFactor&&(u.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(u.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(u.linewidth=this.linewidth),void 0!==this.dashSize&&(u.dashSize=this.dashSize),void 0!==this.gapSize&&(u.gapSize=this.gapSize),void 0!==this.scale&&(u.scale=this.scale),!0===this.dithering&&(u.dithering=!0),this.alphaTest>0&&(u.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(u.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(u.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(u.wireframe=this.wireframe),this.wireframeLinewidth>1&&(u.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(u.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(u.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(u.flatShading=this.flatShading),!1===this.visible&&(u.visible=!1),!1===this.toneMapped&&(u.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(u.userData=this.userData),o){var d=c(a.textures),m=c(a.images);d.length>0&&(u.textures=d),m.length>0&&(u.images=m)}return u}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){this.name=a.name,this.fog=a.fog,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.format=a.format,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;var o=a.clippingPlanes,u=null;if(null!==o){var c=o.length;u=new Array(c);for(var d=0;d!==c;++d)u[d]=o[d].clone()}return this.clippingPlanes=u,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(a){!0===a&&this.version++}}]),n}(xm);vu.prototype.isMaterial=!0;var e6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bf={h:0,s:0,l:0},nO={h:0,s:0,l:0};function C3(i,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+6*(s-i)*n:n<.5?s:n<2/3?i+6*(s-i)*(2/3-n):i}function S3(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function T3(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}var lr=function(){function i(s,n,r){return(0,M.Z)(this,i),void 0===n&&void 0===r?this.set(s):this.setRGB(s,n,r)}return(0,D.Z)(i,[{key:"set",value:function(n){return n&&n.isColor?this.copy(n):"number"==typeof n?this.setHex(n):"string"==typeof n&&this.setStyle(n),this}},{key:"setScalar",value:function(n){return this.r=n,this.g=n,this.b=n,this}},{key:"setHex",value:function(n){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(255&n)/255,this}},{key:"setRGB",value:function(n,r,a){return this.r=n,this.g=r,this.b=a,this}},{key:"setHSL",value:function(n,r,a){if(n=function(i,s){return(i%s+s)%s}(n,1),r=hu(r,0,1),a=hu(a,0,1),0===r)this.r=this.g=this.b=a;else{var o=a<=.5?a*(1+r):a+r-a*r,u=2*a-o;this.r=C3(u,o,n+1/3),this.g=C3(u,o,n),this.b=C3(u,o,n-1/3)}return this}},{key:"setStyle",value:function(n){function r(T){void 0!==T&&parseFloat(T)<1&&console.warn("THREE.Color: Alpha component of "+n+" will be ignored.")}var a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(n)){var o,c=a[2];switch(a[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){var d=parseFloat(o[1])/360,m=parseInt(o[2],10)/100,_=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(d,m,_)}}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(n)){var b=a[1],E=b.length;if(3===E)return this.r=parseInt(b.charAt(0)+b.charAt(0),16)/255,this.g=parseInt(b.charAt(1)+b.charAt(1),16)/255,this.b=parseInt(b.charAt(2)+b.charAt(2),16)/255,this;if(6===E)return this.r=parseInt(b.charAt(0)+b.charAt(1),16)/255,this.g=parseInt(b.charAt(2)+b.charAt(3),16)/255,this.b=parseInt(b.charAt(4)+b.charAt(5),16)/255,this}return n&&n.length>0?this.setColorName(n):this}},{key:"setColorName",value:function(n){var r=e6[n.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+n),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}},{key:"copyGammaToLinear",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(n.r,r),this.g=Math.pow(n.g,r),this.b=Math.pow(n.b,r),this}},{key:"copyLinearToGamma",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=r>0?1/r:1;return this.r=Math.pow(n.r,a),this.g=Math.pow(n.g,a),this.b=Math.pow(n.b,a),this}},{key:"convertGammaToLinear",value:function(n){return this.copyGammaToLinear(this,n),this}},{key:"convertLinearToGamma",value:function(n){return this.copyLinearToGamma(this,n),this}},{key:"copySRGBToLinear",value:function(n){return this.r=S3(n.r),this.g=S3(n.g),this.b=S3(n.b),this}},{key:"copyLinearToSRGB",value:function(n){return this.r=T3(n.r),this.g=T3(n.g),this.b=T3(n.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(n){var d,m,r=this.r,a=this.g,o=this.b,u=Math.max(r,a,o),c=Math.min(r,a,o),_=(c+u)/2;if(c===u)d=0,m=0;else{var b=u-c;switch(m=_<=.5?b/(u+c):b/(2-u-c),u){case r:d=(a-o)/b+(a<o?6:0);break;case a:d=(o-r)/b+2;break;case o:d=(r-a)/b+4}d/=6}return n.h=d,n.s=m,n.l=_,n}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(n,r,a){return this.getHSL(Bf),Bf.h+=n,Bf.s+=r,Bf.l+=a,this.setHSL(Bf.h,Bf.s,Bf.l),this}},{key:"add",value:function(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}},{key:"addColors",value:function(n,r){return this.r=n.r+r.r,this.g=n.g+r.g,this.b=n.b+r.b,this}},{key:"addScalar",value:function(n){return this.r+=n,this.g+=n,this.b+=n,this}},{key:"sub",value:function(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}},{key:"multiply",value:function(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}},{key:"multiplyScalar",value:function(n){return this.r*=n,this.g*=n,this.b*=n,this}},{key:"lerp",value:function(n,r){return this.r+=(n.r-this.r)*r,this.g+=(n.g-this.g)*r,this.b+=(n.b-this.b)*r,this}},{key:"lerpColors",value:function(n,r,a){return this.r=n.r+(r.r-n.r)*a,this.g=n.g+(r.g-n.g)*a,this.b=n.b+(r.b-n.b)*a,this}},{key:"lerpHSL",value:function(n,r){this.getHSL(Bf),n.getHSL(nO);var a=wA(Bf.h,nO.h,r),o=wA(Bf.s,nO.s,r),u=wA(Bf.l,nO.l,r);return this.setHSL(a,o,u),this}},{key:"equals",value:function(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}},{key:"fromArray",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=n[r],this.g=n[r+1],this.b=n[r+2],this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n[r]=this.r,n[r+1]=this.g,n[r+2]=this.b,n}},{key:"fromBufferAttribute",value:function(n,r){return this.r=n.getX(r),this.g=n.getY(r),this.b=n.getZ(r),!0===n.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),i}();lr.NAMES=e6,lr.prototype.isColor=!0,lr.prototype.r=1,lr.prototype.g=1,lr.prototype.b=1;var rO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshBasicMaterial",a.color=new lr(16777215),a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.specularMap=null,a.alphaMap=null,a.envMap=null,a.combine=0,a.reflectivity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}]),n}(vu);rO.prototype.isMeshBasicMaterial=!0;var Ha=new xe,iO=new Yt,fo=function(){function i(s,n,r){if((0,M.Z)(this,i),Array.isArray(s))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=s,this.itemSize=n,this.count=void 0!==s?s.length/n:0,this.normalized=!0===r,this.usage=gA,this.updateRange={offset:0,count:-1},this.version=0}return(0,D.Z)(i,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(n){!0===n&&this.version++}},{key:"setUsage",value:function(n){return this.usage=n,this}},{key:"copy",value:function(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this}},{key:"copyAt",value:function(n,r,a){n*=this.itemSize,a*=r.itemSize;for(var o=0,u=this.itemSize;o<u;o++)this.array[n+o]=r.array[a+o];return this}},{key:"copyArray",value:function(n){return this.array.set(n),this}},{key:"copyColorsArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var c=n[o];void 0===c&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),c=new lr),r[a++]=c.r,r[a++]=c.g,r[a++]=c.b}return this}},{key:"copyVector2sArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var c=n[o];void 0===c&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),c=new Yt),r[a++]=c.x,r[a++]=c.y}return this}},{key:"copyVector3sArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var c=n[o];void 0===c&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),c=new xe),r[a++]=c.x,r[a++]=c.y,r[a++]=c.z}return this}},{key:"copyVector4sArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var c=n[o];void 0===c&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),c=new La),r[a++]=c.x,r[a++]=c.y,r[a++]=c.z,r[a++]=c.w}return this}},{key:"applyMatrix3",value:function(n){if(2===this.itemSize)for(var r=0,a=this.count;r<a;r++)iO.fromBufferAttribute(this,r),iO.applyMatrix3(n),this.setXY(r,iO.x,iO.y);else if(3===this.itemSize)for(var o=0,u=this.count;o<u;o++)Ha.fromBufferAttribute(this,o),Ha.applyMatrix3(n),this.setXYZ(o,Ha.x,Ha.y,Ha.z);return this}},{key:"applyMatrix4",value:function(n){for(var r=0,a=this.count;r<a;r++)Ha.x=this.getX(r),Ha.y=this.getY(r),Ha.z=this.getZ(r),Ha.applyMatrix4(n),this.setXYZ(r,Ha.x,Ha.y,Ha.z);return this}},{key:"applyNormalMatrix",value:function(n){for(var r=0,a=this.count;r<a;r++)Ha.x=this.getX(r),Ha.y=this.getY(r),Ha.z=this.getZ(r),Ha.applyNormalMatrix(n),this.setXYZ(r,Ha.x,Ha.y,Ha.z);return this}},{key:"transformDirection",value:function(n){for(var r=0,a=this.count;r<a;r++)Ha.x=this.getX(r),Ha.y=this.getY(r),Ha.z=this.getZ(r),Ha.transformDirection(n),this.setXYZ(r,Ha.x,Ha.y,Ha.z);return this}},{key:"set",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(n,r),this}},{key:"getX",value:function(n){return this.array[n*this.itemSize]}},{key:"setX",value:function(n,r){return this.array[n*this.itemSize]=r,this}},{key:"getY",value:function(n){return this.array[n*this.itemSize+1]}},{key:"setY",value:function(n,r){return this.array[n*this.itemSize+1]=r,this}},{key:"getZ",value:function(n){return this.array[n*this.itemSize+2]}},{key:"setZ",value:function(n,r){return this.array[n*this.itemSize+2]=r,this}},{key:"getW",value:function(n){return this.array[n*this.itemSize+3]}},{key:"setW",value:function(n,r){return this.array[n*this.itemSize+3]=r,this}},{key:"setXY",value:function(n,r,a){return this.array[0+(n*=this.itemSize)]=r,this.array[n+1]=a,this}},{key:"setXYZ",value:function(n,r,a,o){return this.array[0+(n*=this.itemSize)]=r,this.array[n+1]=a,this.array[n+2]=o,this}},{key:"setXYZW",value:function(n,r,a,o,u){return this.array[0+(n*=this.itemSize)]=r,this.array[n+1]=a,this.array[n+2]=o,this.array[n+3]=u,this}},{key:"onUpload",value:function(n){return this.onUploadCallback=n,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(n.name=this.name),this.usage!==gA&&(n.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(n.updateRange=this.updateRange),n}}]),i}();fo.prototype.isBufferAttribute=!0;var M3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Uint16Array(r),a,o)}return n}(fo),A3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Uint32Array(r),a,o)}return n}(fo);(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Uint16Array(r),a,o)}return n})(fo).prototype.isFloat16BufferAttribute=!0;var Fr=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Float32Array(r),a,o)}return n}(fo),ure=0,$c=new Cr,x3=new Na,fk=new xe,nc=new Kc,SA=new Kc,Qo=new xe,Fi=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,wa.Z)(r),"id",{value:ure++}),r.uuid=Yc(),r.name="",r.type="BufferGeometry",r.index=null,r.attributes={},r.morphAttributes={},r.morphTargetsRelative=!1,r.groups=[],r.boundingBox=null,r.boundingSphere=null,r.drawRange={start:0,count:1/0},r.userData={},r}return(0,D.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(a){return this.index=Array.isArray(a)?new(H4(a)>65535?A3:M3)(a,1):a,this}},{key:"getAttribute",value:function(a){return this.attributes[a]}},{key:"setAttribute",value:function(a,o){return this.attributes[a]=o,this}},{key:"deleteAttribute",value:function(a){return delete this.attributes[a],this}},{key:"hasAttribute",value:function(a){return void 0!==this.attributes[a]}},{key:"addGroup",value:function(a,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:a,count:o,materialIndex:u})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(a,o){this.drawRange.start=a,this.drawRange.count=o}},{key:"applyMatrix4",value:function(a){var o=this.attributes.position;void 0!==o&&(o.applyMatrix4(a),o.needsUpdate=!0);var u=this.attributes.normal;if(void 0!==u){var c=(new du).getNormalMatrix(a);u.applyNormalMatrix(c),u.needsUpdate=!0}var d=this.attributes.tangent;return void 0!==d&&(d.transformDirection(a),d.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(a){return $c.makeRotationFromQuaternion(a),this.applyMatrix4($c),this}},{key:"rotateX",value:function(a){return $c.makeRotationX(a),this.applyMatrix4($c),this}},{key:"rotateY",value:function(a){return $c.makeRotationY(a),this.applyMatrix4($c),this}},{key:"rotateZ",value:function(a){return $c.makeRotationZ(a),this.applyMatrix4($c),this}},{key:"translate",value:function(a,o,u){return $c.makeTranslation(a,o,u),this.applyMatrix4($c),this}},{key:"scale",value:function(a,o,u){return $c.makeScale(a,o,u),this.applyMatrix4($c),this}},{key:"lookAt",value:function(a){return x3.lookAt(a),x3.updateMatrix(),this.applyMatrix4(x3.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(fk).negate(),this.translate(fk.x,fk.y,fk.z),this}},{key:"setFromPoints",value:function(a){for(var o=[],u=0,c=a.length;u<c;u++){var d=a[u];o.push(d.x,d.y,d.z||0)}return this.setAttribute("position",new Fr(o,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Kc);var a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new xe(-1/0,-1/0,-1/0),new xe(1/0,1/0,1/0));if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),o)for(var u=0,c=o.length;u<c;u++)nc.setFromBufferAttribute(o[u]),this.morphTargetsRelative?(Qo.addVectors(this.boundingBox.min,nc.min),this.boundingBox.expandByPoint(Qo),Qo.addVectors(this.boundingBox.max,nc.max),this.boundingBox.expandByPoint(Qo)):(this.boundingBox.expandByPoint(nc.min),this.boundingBox.expandByPoint(nc.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new ak);var a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new xe,1/0);if(a){var u=this.boundingSphere.center;if(nc.setFromBufferAttribute(a),o)for(var c=0,d=o.length;c<d;c++)SA.setFromBufferAttribute(o[c]),this.morphTargetsRelative?(Qo.addVectors(nc.min,SA.min),nc.expandByPoint(Qo),Qo.addVectors(nc.max,SA.max),nc.expandByPoint(Qo)):(nc.expandByPoint(SA.min),nc.expandByPoint(SA.max));nc.getCenter(u);for(var _=0,b=0,E=a.count;b<E;b++)Qo.fromBufferAttribute(a,b),_=Math.max(_,u.distanceToSquared(Qo));if(o)for(var T=0,I=o.length;T<I;T++)for(var N=o[T],W=this.morphTargetsRelative,U=0,H=N.count;U<H;U++)Qo.fromBufferAttribute(N,U),W&&(fk.fromBufferAttribute(a,U),Qo.add(fk)),_=Math.max(_,u.distanceToSquared(Qo));this.boundingSphere.radius=Math.sqrt(_),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var a=this.index,o=this.attributes;if(null!==a&&void 0!==o.position&&void 0!==o.normal&&void 0!==o.uv){var u=a.array,c=o.position.array,d=o.normal.array,m=o.uv.array,_=c.length/3;void 0===o.tangent&&this.setAttribute("tangent",new fo(new Float32Array(4*_),4));for(var b=o.tangent.array,E=[],T=[],I=0;I<_;I++)E[I]=new xe,T[I]=new xe;var N=new xe,W=new xe,U=new xe,H=new Yt,te=new Yt,ue=new Yt,le=new xe,he=new xe,ye=this.groups;0===ye.length&&(ye=[{start:0,count:u.length}]);for(var Ue=0,Ve=ye.length;Ue<Ve;++Ue)for(var Fe=ye[Ue],et=Fe.start,tt=et,wt=et+Fe.count;tt<wt;tt+=3)se(u[tt+0],u[tt+1],u[tt+2]);for(var pt=new xe,Mt=new xe,$t=new xe,_n=new xe,tn=0,un=ye.length;tn<un;++tn)for(var Pn=ye[tn],Tr=Pn.start,Je=Tr,on=Tr+Pn.count;Je<on;Je+=3)fn(u[Je+0]),fn(u[Je+1]),fn(u[Je+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function se(Nn,sn,In){N.fromArray(c,3*Nn),W.fromArray(c,3*sn),U.fromArray(c,3*In),H.fromArray(m,2*Nn),te.fromArray(m,2*sn),ue.fromArray(m,2*In),W.sub(N),U.sub(N),te.sub(H),ue.sub(H);var Mn=1/(te.x*ue.y-ue.x*te.y);!isFinite(Mn)||(le.copy(W).multiplyScalar(ue.y).addScaledVector(U,-te.y).multiplyScalar(Mn),he.copy(U).multiplyScalar(te.x).addScaledVector(W,-ue.x).multiplyScalar(Mn),E[Nn].add(le),E[sn].add(le),E[In].add(le),T[Nn].add(he),T[sn].add(he),T[In].add(he))}function fn(Nn){$t.fromArray(d,3*Nn),_n.copy($t);var sn=E[Nn];pt.copy(sn),pt.sub($t.multiplyScalar($t.dot(sn))).normalize(),Mt.crossVectors(_n,sn);var Mn=Mt.dot(T[Nn])<0?-1:1;b[4*Nn]=pt.x,b[4*Nn+1]=pt.y,b[4*Nn+2]=pt.z,b[4*Nn+3]=Mn}}},{key:"computeVertexNormals",value:function(){var a=this.index,o=this.getAttribute("position");if(void 0!==o){var u=this.getAttribute("normal");if(void 0===u)u=new fo(new Float32Array(3*o.count),3),this.setAttribute("normal",u);else for(var c=0,d=u.count;c<d;c++)u.setXYZ(c,0,0,0);var m=new xe,_=new xe,b=new xe,E=new xe,T=new xe,I=new xe,N=new xe,W=new xe;if(a)for(var U=0,H=a.count;U<H;U+=3){var te=a.getX(U+0),ue=a.getX(U+1),le=a.getX(U+2);m.fromBufferAttribute(o,te),_.fromBufferAttribute(o,ue),b.fromBufferAttribute(o,le),N.subVectors(b,_),W.subVectors(m,_),N.cross(W),E.fromBufferAttribute(u,te),T.fromBufferAttribute(u,ue),I.fromBufferAttribute(u,le),E.add(N),T.add(N),I.add(N),u.setXYZ(te,E.x,E.y,E.z),u.setXYZ(ue,T.x,T.y,T.z),u.setXYZ(le,I.x,I.y,I.z)}else for(var he=0,se=o.count;he<se;he+=3)m.fromBufferAttribute(o,he+0),_.fromBufferAttribute(o,he+1),b.fromBufferAttribute(o,he+2),N.subVectors(b,_),W.subVectors(m,_),N.cross(W),u.setXYZ(he+0,N.x,N.y,N.z),u.setXYZ(he+1,N.x,N.y,N.z),u.setXYZ(he+2,N.x,N.y,N.z);this.normalizeNormals(),u.needsUpdate=!0}}},{key:"merge",value:function(a,o){if(a&&a.isBufferGeometry){void 0===o&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var u=this.attributes;for(var c in u)if(void 0!==a.attributes[c])for(var m=u[c].array,_=a.attributes[c],b=_.array,E=_.itemSize*o,T=Math.min(b.length,m.length-E),I=0,N=E;I<T;I++,N++)m[N]=b[I];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)}},{key:"normalizeNormals",value:function(){for(var a=this.attributes.normal,o=0,u=a.count;o<u;o++)Qo.fromBufferAttribute(a,o),Qo.normalize(),a.setXYZ(o,Qo.x,Qo.y,Qo.z)}},{key:"toNonIndexed",value:function(){function a(se,ye){for(var Ue=se.array,Ve=se.itemSize,Fe=se.normalized,et=new Ue.constructor(ye.length*Ve),Ye=0,tt=0,wt=0,pt=ye.length;wt<pt;wt++){Ye=se.isInterleavedBufferAttribute?ye[wt]*se.data.stride+se.offset:ye[wt]*Ve;for(var Mt=0;Mt<Ve;Mt++)et[tt++]=Ue[Ye++]}return new fo(et,Ve,Fe)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var o=new n,u=this.index.array,c=this.attributes;for(var d in c){var _=a(c[d],u);o.setAttribute(d,_)}var b=this.morphAttributes;for(var E in b){for(var T=[],I=b[E],N=0,W=I.length;N<W;N++){var H=a(I[N],u);T.push(H)}o.morphAttributes[E]=T}o.morphTargetsRelative=this.morphTargetsRelative;for(var te=this.groups,ue=0,le=te.length;ue<le;ue++){var he=te[ue];o.addGroup(he.start,he.count,he.materialIndex)}return o}},{key:"toJSON",value:function(){var a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),void 0!==this.parameters){var o=this.parameters;for(var u in o)void 0!==o[u]&&(a[u]=o[u]);return a}a.data={attributes:{}};var c=this.index;null!==c&&(a.data.index={type:c.array.constructor.name,array:Array.prototype.slice.call(c.array)});var d=this.attributes;for(var m in d)a.data.attributes[m]=d[m].toJSON(a.data);var b={},E=!1;for(var T in this.morphAttributes){for(var I=this.morphAttributes[T],N=[],W=0,U=I.length;W<U;W++)N.push(I[W].toJSON(a.data));N.length>0&&(b[T]=N,E=!0)}E&&(a.data.morphAttributes=b,a.data.morphTargetsRelative=this.morphTargetsRelative);var te=this.groups;te.length>0&&(a.data.groups=JSON.parse(JSON.stringify(te)));var ue=this.boundingSphere;return null!==ue&&(a.data.boundingSphere={center:ue.center.toArray(),radius:ue.radius}),a}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var o={};this.name=a.name;var u=a.index;null!==u&&this.setIndex(u.clone(o));var c=a.attributes;for(var d in c)this.setAttribute(d,c[d].clone(o));var _=a.morphAttributes;for(var b in _){for(var E=[],T=_[b],I=0,N=T.length;I<N;I++)E.push(T[I].clone(o));this.morphAttributes[b]=E}this.morphTargetsRelative=a.morphTargetsRelative;for(var W=a.groups,U=0,H=W.length;U<H;U++){var te=W[U];this.addGroup(te.start,te.count,te.materialIndex)}var ue=a.boundingBox;null!==ue&&(this.boundingBox=ue.clone());var le=a.boundingSphere;return null!==le&&(this.boundingSphere=le.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,void 0!==a.parameters&&(this.parameters=Object.assign({},a.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(xm);Fi.prototype.isBufferGeometry=!0;var t6=new Cr,hk=new sk,I3=new ak,Om=new xe,Lm=new xe,Nm=new xe,D3=new xe,R3=new xe,P3=new xe,aO=new xe,sO=new xe,oO=new xe,uO=new Yt,lO=new Yt,cO=new Yt,O3=new xe,fO=new xe,Au=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fi,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rO;return(0,M.Z)(this,n),(r=s.call(this)).type="Mesh",r.geometry=a,r.material=o,r.updateMorphTargets(),r}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}},{key:"updateMorphTargets",value:function(){var a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,u=Object.keys(o);if(u.length>0){var c=o[u[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var d=0,m=c.length;d<m;d++){var _=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=d}}}}else{var b=a.morphTargets;void 0!==b&&b.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(a,o){var m,u=this.geometry,c=this.material,d=this.matrixWorld;if(void 0!==c&&(null===u.boundingSphere&&u.computeBoundingSphere(),I3.copy(u.boundingSphere),I3.applyMatrix4(d),!1!==a.ray.intersectsSphere(I3)&&(t6.copy(d).invert(),hk.copy(a.ray).applyMatrix4(t6),null===u.boundingBox||!1!==hk.intersectsBox(u.boundingBox))))if(u.isBufferGeometry){var _=u.index,b=u.attributes.position,E=u.morphAttributes.position,T=u.morphTargetsRelative,I=u.attributes.uv,N=u.attributes.uv2,W=u.groups,U=u.drawRange;if(null!==_)if(Array.isArray(c))for(var H=0,te=W.length;H<te;H++)for(var ue=W[H],le=c[ue.materialIndex],ye=Math.max(ue.start,U.start),Ue=Math.min(_.count,Math.min(ue.start+ue.count,U.start+U.count));ye<Ue;ye+=3){var Ve=_.getX(ye),Fe=_.getX(ye+1),et=_.getX(ye+2);(m=hO(this,le,a,hk,b,E,T,I,N,Ve,Fe,et))&&(m.faceIndex=Math.floor(ye/3),m.face.materialIndex=ue.materialIndex,o.push(m))}else for(var wt=Math.max(0,U.start),pt=Math.min(_.count,U.start+U.count);wt<pt;wt+=3){var Mt=_.getX(wt),$t=_.getX(wt+1),_n=_.getX(wt+2);(m=hO(this,c,a,hk,b,E,T,I,N,Mt,$t,_n))&&(m.faceIndex=Math.floor(wt/3),o.push(m))}else if(void 0!==b)if(Array.isArray(c))for(var fn=0,tn=W.length;fn<tn;fn++)for(var un=W[fn],Pn=c[un.materialIndex],Je=Math.max(un.start,U.start),on=Math.min(b.count,Math.min(un.start+un.count,U.start+U.count));Je<on;Je+=3)(m=hO(this,Pn,a,hk,b,E,T,I,N,Je,Je+1,Je+2))&&(m.faceIndex=Math.floor(Je/3),m.face.materialIndex=un.materialIndex,o.push(m));else for(var Ht=Math.max(0,U.start),an=Math.min(b.count,U.start+U.count);Ht<an;Ht+=3)(m=hO(this,c,a,hk,b,E,T,I,N,Ht,Ht+1,Ht+2))&&(m.faceIndex=Math.floor(Ht/3),o.push(m))}else u.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Na);function hO(i,s,n,r,a,o,u,c,d,m,_,b){Om.fromBufferAttribute(a,m),Lm.fromBufferAttribute(a,_),Nm.fromBufferAttribute(a,b);var E=i.morphTargetInfluences;if(o&&E){aO.set(0,0,0),sO.set(0,0,0),oO.set(0,0,0);for(var T=0,I=o.length;T<I;T++){var N=E[T],W=o[T];0!==N&&(D3.fromBufferAttribute(W,m),R3.fromBufferAttribute(W,_),P3.fromBufferAttribute(W,b),u?(aO.addScaledVector(D3,N),sO.addScaledVector(R3,N),oO.addScaledVector(P3,N)):(aO.addScaledVector(D3.sub(Om),N),sO.addScaledVector(R3.sub(Lm),N),oO.addScaledVector(P3.sub(Nm),N)))}Om.add(aO),Lm.add(sO),Nm.add(oO)}i.isSkinnedMesh&&(i.boneTransform(m,Om),i.boneTransform(_,Lm),i.boneTransform(b,Nm));var U=function(i,s,n,r,a,o,u,c){if(null===(1===s.side?r.intersectTriangle(u,o,a,!0,c):r.intersectTriangle(a,o,u,2!==s.side,c)))return null;fO.copy(c),fO.applyMatrix4(i.matrixWorld);var m=n.ray.origin.distanceTo(fO);return m<n.near||m>n.far?null:{distance:m,point:fO.clone(),object:i}}(i,s,n,r,Om,Lm,Nm,O3);if(U){c&&(uO.fromBufferAttribute(c,m),lO.fromBufferAttribute(c,_),cO.fromBufferAttribute(c,b),U.uv=bl.getUV(O3,Om,Lm,Nm,uO,lO,cO,new Yt)),d&&(uO.fromBufferAttribute(d,m),lO.fromBufferAttribute(d,_),cO.fromBufferAttribute(d,b),U.uv2=bl.getUV(O3,Om,Lm,Nm,uO,lO,cO,new Yt));var H={a:m,b:_,c:b,normal:new xe,materialIndex:0};bl.getNormal(Om,Lm,Nm,H.normal),U.face=H}return U}Au.prototype.isMesh=!0;var dk=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,M.Z)(this,n),(r=s.call(this)).type="BoxGeometry",r.parameters={width:a,height:o,depth:u,widthSegments:c,heightSegments:d,depthSegments:m};var _=(0,wa.Z)(r);c=Math.floor(c),d=Math.floor(d),m=Math.floor(m);var b=[],E=[],T=[],I=[],N=0,W=0;function U(H,te,ue,le,he,se,ye,Ue,Ve,Fe,et){for(var Ye=se/Ve,tt=ye/Fe,wt=se/2,pt=ye/2,Mt=Ue/2,$t=Ve+1,_n=Fe+1,fn=0,tn=0,un=new xe,Pn=0;Pn<_n;Pn++)for(var Tr=Pn*tt-pt,nr=0;nr<$t;nr++)un[H]=(nr*Ye-wt)*le,un[te]=Tr*he,un[ue]=Mt,E.push(un.x,un.y,un.z),un[H]=0,un[te]=0,un[ue]=Ue>0?1:-1,T.push(un.x,un.y,un.z),I.push(nr/Ve),I.push(1-Pn/Fe),fn+=1;for(var on=0;on<Fe;on++)for(var Nn=0;Nn<Ve;Nn++){var In=N+Nn+$t*(on+1),Mn=N+(Nn+1)+$t*(on+1),Cn=N+(Nn+1)+$t*on;b.push(N+Nn+$t*on,In,Cn),b.push(In,Mn,Cn),tn+=6}_.addGroup(W,tn,et),W+=tn,N+=fn}return U("z","y","x",-1,-1,u,o,a,m,d,0),U("z","y","x",1,-1,u,o,-a,m,d,1),U("x","z","y",1,1,a,u,o,c,m,2),U("x","z","y",1,-1,a,u,-o,c,m,3),U("x","y","z",1,-1,a,o,u,c,d,4),U("x","y","z",-1,-1,a,o,-u,c,d,5),r.setIndex(b),r.setAttribute("position",new Fr(E,3)),r.setAttribute("normal",new Fr(T,3)),r.setAttribute("uv",new Fr(I,2)),r}return(0,D.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}]),n}(Fi);function vk(i){var s={};for(var n in i)for(var r in s[n]={},i[n]){var a=i[n][r];s[n][r]=a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.clone():Array.isArray(a)?a.slice():a}return s}function xu(i){for(var s={},n=0;n<i.length;n++){var r=vk(i[n]);for(var a in r)s[a]=r[a]}return s}var cre={clone:vk,merge:xu},Fm=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="ShaderMaterial",a.defines={},a.uniforms={},a.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",a.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",a.linewidth=1,a.wireframe=!1,a.wireframeLinewidth=1,a.fog=!1,a.lights=!1,a.clipping=!1,a.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},a.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},a.index0AttributeName=void 0,a.uniformsNeedUpdate=!1,a.glslVersion=null,void 0!==r&&(void 0!==r.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),a.setValues(r)),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=vk(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);for(var u in o.glslVersion=this.glslVersion,o.uniforms={},this.uniforms){var d=this.uniforms[u].value;o.uniforms[u]=d&&d.isTexture?{type:"t",value:d.toJSON(a).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;var m={};for(var _ in this.extensions)!0===this.extensions[_]&&(m[_]=!0);return Object.keys(m).length>0&&(o.extensions=m),o}}]),n}(vu);Fm.prototype.isShaderMaterial=!0;var dO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Camera",r.matrixWorldInverse=new Cr,r.projectionMatrix=new Cr,r.projectionMatrixInverse=new Cr,r}return(0,D.Z)(n,[{key:"copy",value:function(a,o){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a,o),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(a){this.updateWorldMatrix(!0,!1);var o=this.matrixWorld.elements;return a.set(-o[8],-o[9],-o[10]).normalize()}},{key:"updateMatrixWorld",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"updateMatrixWorld",this).call(this,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(a,o){(0,_e.Z)((0,de.Z)(n.prototype),"updateWorldMatrix",this).call(this,a,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Na);dO.prototype.isCamera=!0;var Qu=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,M.Z)(this,n),(r=s.call(this)).type="PerspectiveCamera",r.fov=a,r.zoom=1,r.near=u,r.far=c,r.focus=10,r.aspect=o,r.view=null,r.filmGauge=35,r.filmOffset=0,r.updateProjectionMatrix(),r}return(0,D.Z)(n,[{key:"copy",value:function(a,o){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a,o),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}},{key:"setFocalLength",value:function(a){var o=.5*this.getFilmHeight()/a;this.fov=2*_A*Math.atan(o),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var a=Math.tan(.5*Jw*this.fov);return.5*this.getFilmHeight()/a}},{key:"getEffectiveFOV",value:function(){return 2*_A*Math.atan(Math.tan(.5*Jw*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(a,o,u,c,d,m){this.aspect=a/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=u,this.view.offsetY=c,this.view.width=d,this.view.height=m,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var a=this.near,o=a*Math.tan(.5*Jw*this.fov)/this.zoom,u=2*o,c=this.aspect*u,d=-.5*c,m=this.view;if(null!==this.view&&this.view.enabled){var _=m.fullWidth,b=m.fullHeight;d+=m.offsetX*c/_,o-=m.offsetY*u/b,c*=m.width/_,u*=m.height/b}var E=this.filmOffset;0!==E&&(d+=a*E/this.getFilmWidth()),this.projectionMatrix.makePerspective(d,d+c,o,o-u,a,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}]),n}(dO);Qu.prototype.isPerspectiveCamera=!0;var L3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;if((0,M.Z)(this,n),(u=s.call(this)).type="CubeCamera",!0!==o.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),(0,$ee.Z)(u);u.renderTarget=o;var c=new Qu(90,1,r,a);c.layers=u.layers,c.up.set(0,-1,0),c.lookAt(new xe(1,0,0)),u.add(c);var d=new Qu(90,1,r,a);d.layers=u.layers,d.up.set(0,-1,0),d.lookAt(new xe(-1,0,0)),u.add(d);var m=new Qu(90,1,r,a);m.layers=u.layers,m.up.set(0,0,1),m.lookAt(new xe(0,1,0)),u.add(m);var _=new Qu(90,1,r,a);_.layers=u.layers,_.up.set(0,0,-1),_.lookAt(new xe(0,-1,0)),u.add(_);var b=new Qu(90,1,r,a);b.layers=u.layers,b.up.set(0,-1,0),b.lookAt(new xe(0,0,1)),u.add(b);var E=new Qu(90,1,r,a);return E.layers=u.layers,E.up.set(0,-1,0),E.lookAt(new xe(0,0,-1)),u.add(E),u}return(0,D.Z)(n,[{key:"update",value:function(a,o){null===this.parent&&this.updateMatrixWorld();var u=this.renderTarget,c=(0,ke.Z)(this.children,6),d=c[0],m=c[1],_=c[2],b=c[3],E=c[4],T=c[5],I=a.xr.enabled,N=a.getRenderTarget();a.xr.enabled=!1;var W=u.texture.generateMipmaps;u.texture.generateMipmaps=!1,a.setRenderTarget(u,0),a.render(o,d),a.setRenderTarget(u,1),a.render(o,m),a.setRenderTarget(u,2),a.render(o,_),a.setRenderTarget(u,3),a.render(o,b),a.setRenderTarget(u,4),a.render(o,E),u.texture.generateMipmaps=W,a.setRenderTarget(u,5),a.render(o,T),a.setRenderTarget(N),a.xr.enabled=I}}]),n}(Na),vO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d,m,_,b,E){var T;return(0,M.Z)(this,n),(T=s.call(this,r=void 0!==r?r:[],a=void 0!==a?a:301,o,u,c,d,m,_,b,E)).flipY=!1,T}return(0,D.Z)(n,[{key:"images",get:function(){return this.image},set:function(a){this.image=a}}]),n}(_l);vO.prototype.isCubeTexture=!0;var N3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),Number.isInteger(a)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),a=o),(u=s.call(this,r,r,a)).texture=new vO(void 0,(a=a||{}).mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),u.texture.isRenderTargetTexture=!0,u.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,u.texture.minFilter=void 0!==a.minFilter?a.minFilter:ec,u.texture._needsFlipEnvMap=!1,u}return(0,D.Z)(n,[{key:"fromEquirectangularTexture",value:function(a,o){this.texture.type=o.type,this.texture.format=Xu,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;var c=new dk(5,5,5),d=new Fm({name:"CubemapFromEquirect",uniforms:vk({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});d.uniforms.tEquirect.value=o;var m=new Au(c,d),_=o.minFilter;return o.minFilter===vA&&(o.minFilter=ec),new L3(1,10,this).update(a,m),o.minFilter=_,m.geometry.dispose(),m.material.dispose(),this}},{key:"clear",value:function(a,o,u,c){for(var d=a.getRenderTarget(),m=0;m<6;m++)a.setRenderTarget(this,m),a.clear(o,u,c);a.setRenderTarget(d)}}]),n}(sd);N3.prototype.isWebGLCubeRenderTarget=!0;var F3=new xe,dre=new xe,vre=new du,_v=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,i),this.normal=s,this.constant=n}return(0,D.Z)(i,[{key:"set",value:function(n,r){return this.normal.copy(n),this.constant=r,this}},{key:"setComponents",value:function(n,r,a,o){return this.normal.set(n,r,a),this.constant=o,this}},{key:"setFromNormalAndCoplanarPoint",value:function(n,r){return this.normal.copy(n),this.constant=-r.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(n,r,a){var o=F3.subVectors(a,r).cross(dre.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}},{key:"copy",value:function(n){return this.normal.copy(n.normal),this.constant=n.constant,this}},{key:"normalize",value:function(){var n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(n){return this.normal.dot(n)+this.constant}},{key:"distanceToSphere",value:function(n){return this.distanceToPoint(n.center)-n.radius}},{key:"projectPoint",value:function(n,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(n)).add(n)}},{key:"intersectLine",value:function(n,r){var a=n.delta(F3),o=this.normal.dot(a);if(0===o)return 0===this.distanceToPoint(n.start)?r.copy(n.start):null;var u=-(n.start.dot(this.normal)+this.constant)/o;return u<0||u>1?null:r.copy(a).multiplyScalar(u).add(n.start)}},{key:"intersectsLine",value:function(n){var r=this.distanceToPoint(n.start),a=this.distanceToPoint(n.end);return r<0&&a>0||a<0&&r>0}},{key:"intersectsBox",value:function(n){return n.intersectsPlane(this)}},{key:"intersectsSphere",value:function(n){return n.intersectsPlane(this)}},{key:"coplanarPoint",value:function(n){return n.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(n,r){var a=r||vre.getNormalMatrix(n),o=this.coplanarPoint(F3).applyMatrix4(n),u=this.normal.applyMatrix3(a).normalize();return this.constant=-o.dot(u),this}},{key:"translate",value:function(n){return this.constant-=n.dot(this.normal),this}},{key:"equals",value:function(n){return n.normal.equals(this.normal)&&n.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}();_v.prototype.isPlane=!0;var gk=new ak,pO=new xe,mO=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _v,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _v,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new _v,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new _v,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new _v,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new _v;(0,M.Z)(this,i),this.planes=[s,n,r,a,o,u]}return(0,D.Z)(i,[{key:"set",value:function(n,r,a,o,u,c){var d=this.planes;return d[0].copy(n),d[1].copy(r),d[2].copy(a),d[3].copy(o),d[4].copy(u),d[5].copy(c),this}},{key:"copy",value:function(n){for(var r=this.planes,a=0;a<6;a++)r[a].copy(n.planes[a]);return this}},{key:"setFromProjectionMatrix",value:function(n){var r=this.planes,a=n.elements,o=a[0],u=a[1],c=a[2],d=a[3],m=a[4],_=a[5],b=a[6],E=a[7],T=a[8],I=a[9],N=a[10],W=a[11],U=a[12],H=a[13],te=a[14],ue=a[15];return r[0].setComponents(d-o,E-m,W-T,ue-U).normalize(),r[1].setComponents(d+o,E+m,W+T,ue+U).normalize(),r[2].setComponents(d+u,E+_,W+I,ue+H).normalize(),r[3].setComponents(d-u,E-_,W-I,ue-H).normalize(),r[4].setComponents(d-c,E-b,W-N,ue-te).normalize(),r[5].setComponents(d+c,E+b,W+N,ue+te).normalize(),this}},{key:"intersectsObject",value:function(n){var r=n.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),gk.copy(r.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(gk)}},{key:"intersectsSprite",value:function(n){return gk.center.set(0,0,0),gk.radius=.7071067811865476,gk.applyMatrix4(n.matrixWorld),this.intersectsSphere(gk)}},{key:"intersectsSphere",value:function(n){for(var r=this.planes,a=n.center,o=-n.radius,u=0;u<6;u++)if(r[u].distanceToPoint(a)<o)return!1;return!0}},{key:"intersectsBox",value:function(n){for(var r=this.planes,a=0;a<6;a++){var o=r[a];if(pO.x=o.normal.x>0?n.max.x:n.min.x,pO.y=o.normal.y>0?n.max.y:n.min.y,pO.z=o.normal.z>0?n.max.z:n.min.z,o.distanceToPoint(pO)<0)return!1}return!0}},{key:"containsPoint",value:function(n){for(var r=this.planes,a=0;a<6;a++)if(r[a].distanceToPoint(n)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}();function n6(){var i=null,s=!1,n=null,r=null;function a(o,u){n(o,u),r=i.requestAnimationFrame(a)}return{start:function(){!0!==s&&null!==n&&(r=i.requestAnimationFrame(a),s=!0)},stop:function(){i.cancelAnimationFrame(r),s=!1},setAnimationLoop:function(u){n=u},setContext:function(u){i=u}}}function pre(i,s){var n=s.isWebGL2,r=new WeakMap;return{get:function(m){return m.isInterleavedBufferAttribute&&(m=m.data),r.get(m)},remove:function(m){m.isInterleavedBufferAttribute&&(m=m.data);var _=r.get(m);_&&(i.deleteBuffer(_.buffer),r.delete(m))},update:function(m,_){if(m.isGLBufferAttribute){var b=r.get(m);(!b||b.version<m.version)&&r.set(m,{buffer:m.buffer,type:m.type,bytesPerElement:m.elementSize,version:m.version})}else{m.isInterleavedBufferAttribute&&(m=m.data);var E=r.get(m);void 0===E?r.set(m,function(m,_){var b=m.array,E=m.usage,T=i.createBuffer();i.bindBuffer(_,T),i.bufferData(_,b,E),m.onUploadCallback();var I=5126;return b instanceof Float32Array?I=5126:b instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):b instanceof Uint16Array?m.isFloat16BufferAttribute?n?I=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):I=5123:b instanceof Int16Array?I=5122:b instanceof Uint32Array?I=5125:b instanceof Int32Array?I=5124:b instanceof Int8Array?I=5120:(b instanceof Uint8Array||b instanceof Uint8ClampedArray)&&(I=5121),{buffer:T,type:I,bytesPerElement:b.BYTES_PER_ELEMENT,version:m.version}}(m,_)):E.version<m.version&&(function(m,_,b){var E=_.array,T=_.updateRange;i.bindBuffer(b,m),-1===T.count?i.bufferSubData(b,0,E):(n?i.bufferSubData(b,T.offset*E.BYTES_PER_ELEMENT,E,T.offset,T.count):i.bufferSubData(b,T.offset*E.BYTES_PER_ELEMENT,E.subarray(T.offset,T.offset+T.count)),T.count=-1)}(E.buffer,m,_),E.version=m.version)}}}}var Z3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,M.Z)(this,n),(r=s.call(this)).type="PlaneGeometry",r.parameters={width:a,height:o,widthSegments:u,heightSegments:c};for(var d=a/2,m=o/2,_=Math.floor(u),b=Math.floor(c),E=_+1,T=b+1,I=a/_,N=o/b,W=[],U=[],H=[],te=[],ue=0;ue<T;ue++)for(var le=ue*N-m,he=0;he<E;he++){var se=he*I-d;U.push(se,-le,0),H.push(0,0,1),te.push(he/_),te.push(1-ue/b)}for(var ye=0;ye<b;ye++)for(var Ue=0;Ue<_;Ue++){var Ve=Ue+E*ye,Fe=Ue+E*(ye+1),et=Ue+1+E*(ye+1),Ye=Ue+1+E*ye;W.push(Ve,Fe,Ye),W.push(Fe,et,Ye)}return r.setIndex(W),r.setAttribute("position",new Fr(U,3)),r.setAttribute("normal",new Fr(H,3)),r.setAttribute("uv",new Fr(te,2)),r}return(0,D.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.width,a.height,a.widthSegments,a.heightSegments)}}]),n}(Fi),ki={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenTint * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ln={common:{diffuse:{value:new lr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new du},uv2Transform:{value:new du},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new du}},sprite:{diffuse:{value:new lr(16777215)},opacity:{value:1},center:{value:new Yt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new du}}},od={basic:{uniforms:xu([Ln.common,Ln.specularmap,Ln.envmap,Ln.aomap,Ln.lightmap,Ln.fog]),vertexShader:ki.meshbasic_vert,fragmentShader:ki.meshbasic_frag},lambert:{uniforms:xu([Ln.common,Ln.specularmap,Ln.envmap,Ln.aomap,Ln.lightmap,Ln.emissivemap,Ln.fog,Ln.lights,{emissive:{value:new lr(0)}}]),vertexShader:ki.meshlambert_vert,fragmentShader:ki.meshlambert_frag},phong:{uniforms:xu([Ln.common,Ln.specularmap,Ln.envmap,Ln.aomap,Ln.lightmap,Ln.emissivemap,Ln.bumpmap,Ln.normalmap,Ln.displacementmap,Ln.fog,Ln.lights,{emissive:{value:new lr(0)},specular:{value:new lr(1118481)},shininess:{value:30}}]),vertexShader:ki.meshphong_vert,fragmentShader:ki.meshphong_frag},standard:{uniforms:xu([Ln.common,Ln.envmap,Ln.aomap,Ln.lightmap,Ln.emissivemap,Ln.bumpmap,Ln.normalmap,Ln.displacementmap,Ln.roughnessmap,Ln.metalnessmap,Ln.fog,Ln.lights,{emissive:{value:new lr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ki.meshphysical_vert,fragmentShader:ki.meshphysical_frag},toon:{uniforms:xu([Ln.common,Ln.aomap,Ln.lightmap,Ln.emissivemap,Ln.bumpmap,Ln.normalmap,Ln.displacementmap,Ln.gradientmap,Ln.fog,Ln.lights,{emissive:{value:new lr(0)}}]),vertexShader:ki.meshtoon_vert,fragmentShader:ki.meshtoon_frag},matcap:{uniforms:xu([Ln.common,Ln.bumpmap,Ln.normalmap,Ln.displacementmap,Ln.fog,{matcap:{value:null}}]),vertexShader:ki.meshmatcap_vert,fragmentShader:ki.meshmatcap_frag},points:{uniforms:xu([Ln.points,Ln.fog]),vertexShader:ki.points_vert,fragmentShader:ki.points_frag},dashed:{uniforms:xu([Ln.common,Ln.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ki.linedashed_vert,fragmentShader:ki.linedashed_frag},depth:{uniforms:xu([Ln.common,Ln.displacementmap]),vertexShader:ki.depth_vert,fragmentShader:ki.depth_frag},normal:{uniforms:xu([Ln.common,Ln.bumpmap,Ln.normalmap,Ln.displacementmap,{opacity:{value:1}}]),vertexShader:ki.meshnormal_vert,fragmentShader:ki.meshnormal_frag},sprite:{uniforms:xu([Ln.sprite,Ln.fog]),vertexShader:ki.sprite_vert,fragmentShader:ki.sprite_frag},background:{uniforms:{uvTransform:{value:new du},t2D:{value:null}},vertexShader:ki.background_vert,fragmentShader:ki.background_frag},cube:{uniforms:xu([Ln.envmap,{opacity:{value:1}}]),vertexShader:ki.cube_vert,fragmentShader:ki.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ki.equirect_vert,fragmentShader:ki.equirect_frag},distanceRGBA:{uniforms:xu([Ln.common,Ln.displacementmap,{referencePosition:{value:new xe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ki.distanceRGBA_vert,fragmentShader:ki.distanceRGBA_frag},shadow:{uniforms:xu([Ln.lights,Ln.fog,{color:{value:new lr(0)},opacity:{value:1}}]),vertexShader:ki.shadow_vert,fragmentShader:ki.shadow_frag}};function Hae(i,s,n,r,a){var c,d,o=new lr(0),u=0,m=null,_=0,b=null;function T(I,N){n.buffers.color.setClear(I.r,I.g,I.b,N,a)}return{getClearColor:function(){return o},setClearColor:function(N){var W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(N),T(o,u=W)},getClearAlpha:function(){return u},setClearAlpha:function(N){T(o,u=N)},render:function(I,N){var W=!1,U=!0===N.isScene?N.background:null;U&&U.isTexture&&(U=s.get(U));var H=i.xr,te=H.getSession&&H.getSession();te&&"additive"===te.environmentBlendMode&&(U=null),null===U?T(o,u):U&&U.isColor&&(T(U,1),W=!0),(i.autoClear||W)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),U&&(U.isCubeTexture||306===U.mapping)?(void 0===d&&((d=new Au(new dk(1,1,1),new Fm({name:"BackgroundCubeMaterial",uniforms:vk(od.cube.uniforms),vertexShader:od.cube.vertexShader,fragmentShader:od.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(ue,le,he){this.matrixWorld.copyPosition(he.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=U,d.material.uniforms.flipEnvMap.value=U.isCubeTexture&&!1===U.isRenderTargetTexture?-1:1,(m!==U||_!==U.version||b!==i.toneMapping)&&(d.material.needsUpdate=!0,m=U,_=U.version,b=i.toneMapping),I.unshift(d,d.geometry,d.material,0,0,null)):U&&U.isTexture&&(void 0===c&&((c=new Au(new Z3(2,2),new Fm({name:"BackgroundMaterial",uniforms:vk(od.background.uniforms),vertexShader:od.background.vertexShader,fragmentShader:od.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=U,!0===U.matrixAutoUpdate&&U.updateMatrix(),c.material.uniforms.uvTransform.value.copy(U.matrix),(m!==U||_!==U.version||b!==i.toneMapping)&&(c.material.needsUpdate=!0,m=U,_=U.version,b=i.toneMapping),I.unshift(c,c.geometry,c.material,0,0,null))}}}function zae(i,s,n,r){var a=i.getParameter(34921),o=r.isWebGL2?null:s.get("OES_vertex_array_object"),u=r.isWebGL2||null!==o,c={},d=N(null),m=d;function E(Ye){return r.isWebGL2?i.bindVertexArray(Ye):o.bindVertexArrayOES(Ye)}function T(Ye){return r.isWebGL2?i.deleteVertexArray(Ye):o.deleteVertexArrayOES(Ye)}function N(Ye){for(var tt=[],wt=[],pt=[],Mt=0;Mt<a;Mt++)tt[Mt]=0,wt[Mt]=0,pt[Mt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:tt,enabledAttributes:wt,attributeDivisors:pt,object:Ye,attributes:{},index:null}}function H(){for(var Ye=m.newAttributes,tt=0,wt=Ye.length;tt<wt;tt++)Ye[tt]=0}function te(Ye){ue(Ye,0)}function ue(Ye,tt){var pt=m.enabledAttributes,Mt=m.attributeDivisors;m.newAttributes[Ye]=1,0===pt[Ye]&&(i.enableVertexAttribArray(Ye),pt[Ye]=1),Mt[Ye]!==tt&&((r.isWebGL2?i:s.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ye,tt),Mt[Ye]=tt)}function le(){for(var Ye=m.newAttributes,tt=m.enabledAttributes,wt=0,pt=tt.length;wt<pt;wt++)tt[wt]!==Ye[wt]&&(i.disableVertexAttribArray(wt),tt[wt]=0)}function he(Ye,tt,wt,pt,Mt,$t){!0!==r.isWebGL2||5124!==wt&&5125!==wt?i.vertexAttribPointer(Ye,tt,wt,pt,Mt,$t):i.vertexAttribIPointer(Ye,tt,wt,Mt,$t)}function Fe(){et(),m!==d&&E((m=d).object)}function et(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:function(Ye,tt,wt,pt,Mt){var $t=!1;if(u){var _n=function(Ye,tt,wt){var pt=!0===wt.wireframe,Mt=c[Ye.id];void 0===Mt&&(c[Ye.id]=Mt={});var $t=Mt[tt.id];void 0===$t&&(Mt[tt.id]=$t={});var _n=$t[pt];return void 0===_n&&(_n=N(r.isWebGL2?i.createVertexArray():o.createVertexArrayOES()),$t[pt]=_n),_n}(pt,wt,tt);m!==_n&&E((m=_n).object),($t=function(Ye,tt){var wt=m.attributes,pt=Ye.attributes,Mt=0;for(var $t in pt){var _n=wt[$t],fn=pt[$t];if(void 0===_n||_n.attribute!==fn||_n.data!==fn.data)return!0;Mt++}return m.attributesNum!==Mt||m.index!==tt}(pt,Mt))&&function(Ye,tt){var wt={},pt=Ye.attributes,Mt=0;for(var $t in pt){var _n=pt[$t],fn={};fn.attribute=_n,_n.data&&(fn.data=_n.data),wt[$t]=fn,Mt++}m.attributes=wt,m.attributesNum=Mt,m.index=tt}(pt,Mt)}else{var fn=!0===tt.wireframe;(m.geometry!==pt.id||m.program!==wt.id||m.wireframe!==fn)&&(m.geometry=pt.id,m.program=wt.id,m.wireframe=fn,$t=!0)}!0===Ye.isInstancedMesh&&($t=!0),null!==Mt&&n.update(Mt,34963),$t&&(function(Ye,tt,wt,pt){if(!1!==r.isWebGL2||!Ye.isInstancedMesh&&!pt.isInstancedBufferGeometry||null!==s.get("ANGLE_instanced_arrays")){H();var Mt=pt.attributes,$t=wt.getAttributes(),_n=tt.defaultAttributeValues;for(var fn in $t){var tn=$t[fn];if(tn.location>=0){var un=Mt[fn];if(void 0===un&&("instanceMatrix"===fn&&Ye.instanceMatrix&&(un=Ye.instanceMatrix),"instanceColor"===fn&&Ye.instanceColor&&(un=Ye.instanceColor)),void 0!==un){var Pn=un.normalized,Tr=un.itemSize,nr=n.get(un);if(void 0===nr)continue;var Je=nr.buffer,on=nr.type,Nn=nr.bytesPerElement;if(un.isInterleavedBufferAttribute){var sn=un.data,In=sn.stride,Mn=un.offset;if(sn&&sn.isInstancedInterleavedBuffer){for(var Cn=0;Cn<tn.locationSize;Cn++)ue(tn.location+Cn,sn.meshPerAttribute);!0!==Ye.isInstancedMesh&&void 0===pt._maxInstanceCount&&(pt._maxInstanceCount=sn.meshPerAttribute*sn.count)}else for(var Ht=0;Ht<tn.locationSize;Ht++)te(tn.location+Ht);i.bindBuffer(34962,Je);for(var an=0;an<tn.locationSize;an++)he(tn.location+an,Tr/tn.locationSize,on,Pn,In*Nn,(Mn+Tr/tn.locationSize*an)*Nn)}else{if(un.isInstancedBufferAttribute){for(var hn=0;hn<tn.locationSize;hn++)ue(tn.location+hn,un.meshPerAttribute);!0!==Ye.isInstancedMesh&&void 0===pt._maxInstanceCount&&(pt._maxInstanceCount=un.meshPerAttribute*un.count)}else for(var gr=0;gr<tn.locationSize;gr++)te(tn.location+gr);i.bindBuffer(34962,Je);for(var ni=0;ni<tn.locationSize;ni++)he(tn.location+ni,Tr/tn.locationSize,on,Pn,Tr*Nn,Tr/tn.locationSize*ni*Nn)}}else if(void 0!==_n){var Vi=_n[fn];if(void 0!==Vi)switch(Vi.length){case 2:i.vertexAttrib2fv(tn.location,Vi);break;case 3:i.vertexAttrib3fv(tn.location,Vi);break;case 4:i.vertexAttrib4fv(tn.location,Vi);break;default:i.vertexAttrib1fv(tn.location,Vi)}}}}le()}}(Ye,tt,wt,pt),null!==Mt&&i.bindBuffer(34963,n.get(Mt).buffer))},reset:Fe,resetDefaultState:et,dispose:function(){for(var Ye in Fe(),c){var tt=c[Ye];for(var wt in tt){var pt=tt[wt];for(var Mt in pt)T(pt[Mt].object),delete pt[Mt];delete tt[wt]}delete c[Ye]}},releaseStatesOfGeometry:function(Ye){if(void 0!==c[Ye.id]){var tt=c[Ye.id];for(var wt in tt){var pt=tt[wt];for(var Mt in pt)T(pt[Mt].object),delete pt[Mt];delete tt[wt]}delete c[Ye.id]}},releaseStatesOfProgram:function(Ye){for(var tt in c){var wt=c[tt];if(void 0!==wt[Ye.id]){var pt=wt[Ye.id];for(var Mt in pt)T(pt[Mt].object),delete pt[Mt];delete wt[Ye.id]}}},initAttributes:H,enableAttribute:te,disableUnusedAttributes:le}}function Gae(i,s,n,r){var o,a=r.isWebGL2;this.setMode=function(m){o=m},this.render=function(m,_){i.drawArrays(o,m,_),n.update(_,o,1)},this.renderInstances=function(m,_,b){if(0!==b){var E,T;if(a)E=i,T="drawArraysInstanced";else if(T="drawArraysInstancedANGLE",null===(E=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[T](o,m,_,b),n.update(_,o,b)}}}function jae(i,s,n){var r;function o(se){if("highp"===se){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";se="mediump"}return"mediump"===se&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var u="undefined"!=typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&i instanceof WebGL2ComputeRenderingContext,c=void 0!==n.precision?n.precision:"highp",d=o(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);var m=u||s.has("WEBGL_draw_buffers"),_=!0===n.logarithmicDepthBuffer,b=i.getParameter(34930),E=i.getParameter(35660),T=i.getParameter(3379),I=i.getParameter(34076),N=i.getParameter(34921),W=i.getParameter(36347),U=i.getParameter(36348),H=i.getParameter(36349),te=E>0,ue=u||s.has("OES_texture_float");return{isWebGL2:u,drawBuffers:m,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===s.has("EXT_texture_filter_anisotropic")){var se=s.get("EXT_texture_filter_anisotropic");r=i.getParameter(se.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,precision:c,logarithmicDepthBuffer:_,maxTextures:b,maxVertexTextures:E,maxTextureSize:T,maxCubemapSize:I,maxAttributes:N,maxVertexUniforms:W,maxVaryings:U,maxFragmentUniforms:H,vertexTextures:te,floatFragmentTextures:ue,floatVertexTextures:te&&ue,maxSamples:u?i.getParameter(36183):0}}function Wae(i){var s=this,n=null,r=0,a=!1,o=!1,u=new _v,c=new du,d={value:null,needsUpdate:!1};function m(){d.value!==n&&(d.value=n,d.needsUpdate=r>0),s.numPlanes=r,s.numIntersection=0}function _(b,E,T,I){var N=null!==b?b.length:0,W=null;if(0!==N){if(W=d.value,!0!==I||null===W){var U=T+4*N,H=E.matrixWorldInverse;c.getNormalMatrix(H),(null===W||W.length<U)&&(W=new Float32Array(U));for(var te=0,ue=T;te!==N;++te,ue+=4)u.copy(b[te]).applyMatrix4(H,c),u.normal.toArray(W,ue),W[ue+3]=u.constant}d.value=W,d.needsUpdate=!0}return s.numPlanes=N,s.numIntersection=0,W}this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(b,E,T){var I=0!==b.length||E||0!==r||a;return a=E,n=_(b,T,0),r=b.length,I},this.beginShadows=function(){o=!0,_(null)},this.endShadows=function(){o=!1,m()},this.setState=function(b,E,T){var I=b.clippingPlanes,N=b.clipIntersection,W=b.clipShadows,U=i.get(b);if(!a||null===I||0===I.length||o&&!W)o?_(null):m();else{var H=o?0:r,te=4*H,ue=U.clippingState||null;d.value=ue,ue=_(I,E,te,T);for(var le=0;le!==te;++le)ue[le]=n[le];U.clippingState=ue,this.numIntersection=N?this.numPlanes:0,this.numPlanes+=H}}}function qae(i){var s=new WeakMap;function n(u,c){return 303===c?u.mapping=301:304===c&&(u.mapping=302),u}function a(u){var c=u.target;c.removeEventListener("dispose",a);var d=s.get(c);void 0!==d&&(s.delete(c),d.dispose())}return{get:function(u){if(u&&u.isTexture&&!1===u.isRenderTargetTexture){var c=u.mapping;if(303===c||304===c){if(s.has(u))return n(s.get(u).texture,u.mapping);var m=u.image;if(m&&m.height>0){var _=i.getRenderTarget(),b=new N3(m.height/2);return b.fromEquirectangularTexture(i,u),s.set(u,b),i.setRenderTarget(_),u.addEventListener("dispose",a),n(b.texture,u.mapping)}return null}}return u},dispose:function(){s=new WeakMap}}}od.physical={uniforms:xu([od.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Yt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new lr(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new lr(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new lr(1,1,1)},specularTintMap:{value:null}}]),vertexShader:ki.meshphysical_vert,fragmentShader:ki.meshphysical_frag};var B3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,M.Z)(this,n),(r=s.call(this)).type="OrthographicCamera",r.zoom=1,r.view=null,r.left=a,r.right=o,r.top=u,r.bottom=c,r.near=d,r.far=m,r.updateProjectionMatrix(),r}return(0,D.Z)(n,[{key:"copy",value:function(a,o){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a,o),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this}},{key:"setViewOffset",value:function(a,o,u,c,d,m){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=u,this.view.offsetY=c,this.view.width=d,this.view.height=m,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var a=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),u=(this.right+this.left)/2,c=(this.top+this.bottom)/2,d=u-a,m=u+a,_=c+o,b=c-o;if(null!==this.view&&this.view.enabled){var E=(this.right-this.left)/this.view.fullWidth/this.zoom,T=(this.top-this.bottom)/this.view.fullHeight/this.zoom;m=(d+=E*this.view.offsetX)+E*this.view.width,b=(_-=T*this.view.offsetY)-T*this.view.height}this.projectionMatrix.makeOrthographic(d,m,_,b,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}]),n}(dO);B3.prototype.isOrthographicCamera=!0;var TA=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).type="RawShaderMaterial",a}return n}(Fm);TA.prototype.isRawShaderMaterial=!0;var ud=Math.pow(2,8),r6=[.125,.215,.35,.446,.526,.582],i6=5+r6.length,Bm=((0,ti.Z)(dv={},Mu,0),(0,ti.Z)(dv,g_,1),(0,ti.Z)(dv,3002,2),(0,ti.Z)(dv,3004,3),(0,ti.Z)(dv,3005,4),(0,ti.Z)(dv,3006,5),(0,ti.Z)(dv,3007,6),dv),U3=new B3,V3=$ae(),MA=V3._lodPlanes,a6=V3._sizeLods,gO=V3._sigmas,s6=new lr,H3=null,b_=(1+Math.sqrt(5))/2,bk=1/b_,o6=[new xe(1,1,1),new xe(-1,1,1),new xe(1,1,-1),new xe(-1,1,-1),new xe(0,b_,bk),new xe(0,b_,-bk),new xe(bk,0,b_),new xe(-bk,0,b_),new xe(b_,bk,0),new xe(-b_,bk,0)],Yae=function(){function i(s){(0,M.Z)(this,i),this._renderer=s,this._pingPongRenderTarget=null,this._blurMaterial=function(i){var s=new Float32Array(20),n=new xe(0,1,0);return new TA({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Bm[Mu]},outputEncoding:{value:Bm[Mu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,D.Z)(i,[{key:"fromScene",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;H3=this._renderer.getRenderTarget();var u=this._allocateTargets();return this._sceneToCubeUV(n,a,o,u),r>0&&this._blur(u,0,0,r),this._applyPMREM(u),this._cleanup(u),u}},{key:"fromEquirectangular",value:function(n){return this._fromTexture(n)}},{key:"fromCubemap",value:function(n){return this._fromTexture(n)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=c6(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=l6(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var n=0;n<MA.length;n++)MA[n].dispose()}},{key:"_cleanup",value:function(n){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(H3),n.scissorTest=!1,yO(n,0,0,n.width,n.height)}},{key:"_fromTexture",value:function(n){H3=this._renderer.getRenderTarget();var r=this._allocateTargets(n);return this._textureToCubeUV(n,r),this._applyPMREM(r),this._cleanup(r),r}},{key:"_allocateTargets",value:function(n){var r={magFilter:Ao,minFilter:Ao,generateMipmaps:!1,type:Mm,format:1023,encoding:Kae(n)?n.encoding:3002,depthBuffer:!1},a=u6(r);return a.depthBuffer=!n,this._pingPongRenderTarget=u6(r),a}},{key:"_compileMaterial",value:function(n){var r=new Au(MA[0],n);this._renderer.compile(r,U3)}},{key:"_sceneToCubeUV",value:function(n,r,a,o){var d=new Qu(90,1,r,a),m=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],b=this._renderer,E=b.autoClear,T=b.outputEncoding,I=b.toneMapping;b.getClearColor(s6),b.toneMapping=0,b.outputEncoding=Mu,b.autoClear=!1;var N=new rO({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),W=new Au(new dk,N),U=!1,H=n.background;H?H.isColor&&(N.color.copy(H),n.background=null,U=!0):(N.color.copy(s6),U=!0);for(var te=0;te<6;te++){var ue=te%3;0==ue?(d.up.set(0,m[te],0),d.lookAt(_[te],0,0)):1==ue?(d.up.set(0,0,m[te]),d.lookAt(0,_[te],0)):(d.up.set(0,m[te],0),d.lookAt(0,0,_[te])),yO(o,ue*ud,te>2?ud:0,ud,ud),b.setRenderTarget(o),U&&b.render(W,d),b.render(n,d)}W.geometry.dispose(),W.material.dispose(),b.toneMapping=I,b.outputEncoding=T,b.autoClear=E,n.background=H}},{key:"_setEncoding",value:function(n,r){n.value=!0===this._renderer.capabilities.isWebGL2&&r.format===Xu&&r.type===Mm&&r.encoding===g_?Bm[Mu]:Bm[r.encoding]}},{key:"_textureToCubeUV",value:function(n,r){var a=this._renderer;n.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=c6()):null==this._equirectShader&&(this._equirectShader=l6());var o=n.isCubeTexture?this._cubemapShader:this._equirectShader,u=new Au(MA[0],o),c=o.uniforms;c.envMap.value=n,n.isCubeTexture||c.texelSize.value.set(1/n.image.width,1/n.image.height),this._setEncoding(c.inputEncoding,n),this._setEncoding(c.outputEncoding,r.texture),yO(r,0,0,3*ud,2*ud),a.setRenderTarget(r),a.render(u,U3)}},{key:"_applyPMREM",value:function(n){var r=this._renderer,a=r.autoClear;r.autoClear=!1;for(var o=1;o<i6;o++){var u=Math.sqrt(gO[o]*gO[o]-gO[o-1]*gO[o-1]);this._blur(n,o-1,o,u,o6[(o-1)%o6.length])}r.autoClear=a}},{key:"_blur",value:function(n,r,a,o,u){var c=this._pingPongRenderTarget;this._halfBlur(n,c,r,a,o,"latitudinal",u),this._halfBlur(c,n,a,a,o,"longitudinal",u)}},{key:"_halfBlur",value:function(n,r,a,o,u,c,d){var m=this._renderer,_=this._blurMaterial;"latitudinal"!==c&&"longitudinal"!==c&&console.error("blur direction must be either latitudinal or longitudinal!");var E=new Au(MA[o],_),T=_.uniforms,I=a6[a]-1,N=isFinite(u)?Math.PI/(2*I):2*Math.PI/39,W=u/N,U=isFinite(u)?1+Math.floor(3*W):20;U>20&&console.warn("sigmaRadians, ".concat(u,", is too large and will clip, as it requested ").concat(U," samples when the maximum is set to ").concat(20));for(var H=[],te=0,ue=0;ue<20;++ue){var le=ue/W,he=Math.exp(-le*le/2);H.push(he),0==ue?te+=he:ue<U&&(te+=2*he)}for(var se=0;se<H.length;se++)H[se]=H[se]/te;T.envMap.value=n.texture,T.samples.value=U,T.weights.value=H,T.latitudinal.value="latitudinal"===c,d&&(T.poleAxis.value=d),T.dTheta.value=N,T.mipInt.value=8-a,this._setEncoding(T.inputEncoding,n.texture),this._setEncoding(T.outputEncoding,n.texture);var ye=a6[o];yO(r,3*Math.max(0,ud-2*ye),(0===o?0:2*ud)+2*ye*(o>4?o-8+4:0),3*ye,2*ye),m.setRenderTarget(r),m.render(E,U3)}}]),i}();function Kae(i){return void 0!==i&&i.type===Mm&&(i.encoding===Mu||i.encoding===g_||3007===i.encoding)}function $ae(){for(var i=[],s=[],n=[],r=8,a=0;a<i6;a++){var o=Math.pow(2,r);s.push(o);var u=1/o;a>4?u=r6[a-8+4-1]:0==a&&(u=0),n.push(u);for(var c=1/(o-1),d=-c/2,m=1+c/2,_=[d,d,m,d,m,m,d,d,m,m,d,m],W=new Float32Array(108),U=new Float32Array(72),H=new Float32Array(36),te=0;te<6;te++){var ue=te%3*2/3-1,le=te>2?0:-1;W.set([ue,le,0,ue+2/3,le,0,ue+2/3,le+1,0,ue,le,0,ue+2/3,le+1,0,ue,le+1,0],18*te),U.set(_,12*te),H.set([te,te,te,te,te,te],6*te)}var ye=new Fi;ye.setAttribute("position",new fo(W,3)),ye.setAttribute("uv",new fo(U,2)),ye.setAttribute("faceIndex",new fo(H,1)),i.push(ye),r>4&&r--}return{_lodPlanes:i,_sizeLods:s,_sigmas:n}}function u6(i){var s=new sd(3*ud,3*ud,i);return s.texture.mapping=306,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function yO(i,s,n,r,a){i.viewport.set(s,n,r,a),i.scissor.set(s,n,r,a)}function l6(){var i=new Yt(1,1);return new TA({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:i},inputEncoding:{value:Bm[Mu]},outputEncoding:{value:Bm[Mu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function c6(){return new TA({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Bm[Mu]},outputEncoding:{value:Bm[Mu]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function Qae(i){var s=new WeakMap,n=null;function o(c){var d=c.target;d.removeEventListener("dispose",o);var m=s.get(d);void 0!==m&&(s.delete(d),m.dispose())}return{get:function(c){if(c&&c.isTexture&&!1===c.isRenderTargetTexture){var d=c.mapping,m=303===d||304===d,_=301===d||302===d;if(m||_){if(s.has(c))return s.get(c).texture;var b=c.image;if(m&&b&&b.height>0||_&&b&&function(c){for(var d=0,_=0;_<6;_++)void 0!==c[_]&&d++;return 6===d}(b)){var E=i.getRenderTarget();null===n&&(n=new Yae(i));var T=m?n.fromEquirectangular(c):n.fromCubemap(c);return s.set(c,T),i.setRenderTarget(E),c.addEventListener("dispose",o),T.texture}return null}}return c},dispose:function(){s=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Jae(i){var s={};function n(r){if(void 0!==s[r])return s[r];var a;switch(r){case"WEBGL_depth_texture":a=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=i.getExtension(r)}return s[r]=a,a}return{has:function(a){return null!==n(a)},init:function(a){a.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(a){var o=n(a);return null===o&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),o}}}function ese(i,s,n,r){var a={},o=new WeakMap;function u(b){var E=b.target;for(var T in null!==E.index&&s.remove(E.index),E.attributes)s.remove(E.attributes[T]);E.removeEventListener("dispose",u),delete a[E.id];var I=o.get(E);I&&(s.remove(I),o.delete(E)),r.releaseStatesOfGeometry(E),!0===E.isInstancedBufferGeometry&&delete E._maxInstanceCount,n.memory.geometries--}function m(b){var E=[],T=b.index,I=b.attributes.position,N=0;if(null!==T){var W=T.array;N=T.version;for(var U=0,H=W.length;U<H;U+=3){var te=W[U+0],ue=W[U+1],le=W[U+2];E.push(te,ue,ue,le,le,te)}}else{N=I.version;for(var se=0,ye=I.array.length/3-1;se<ye;se+=3){var Ue=se+0,Ve=se+1,Fe=se+2;E.push(Ue,Ve,Ve,Fe,Fe,Ue)}}var et=new(H4(E)>65535?A3:M3)(E,1);et.version=N;var Ye=o.get(b);Ye&&s.remove(Ye),o.set(b,et)}return{get:function(b,E){return!0===a[E.id]||(E.addEventListener("dispose",u),a[E.id]=!0,n.memory.geometries++),E},update:function(b){var E=b.attributes;for(var T in E)s.update(E[T],34962);var I=b.morphAttributes;for(var N in I)for(var W=I[N],U=0,H=W.length;U<H;U++)s.update(W[U],34962)},getWireframeAttribute:function(b){var E=o.get(b);if(E){var T=b.index;null!==T&&E.version<T.version&&m(b)}else m(b);return o.get(b)}}}function tse(i,s,n,r){var o,c,d,a=r.isWebGL2;this.setMode=function(E){o=E},this.setIndex=function(E){c=E.type,d=E.bytesPerElement},this.render=function(E,T){i.drawElements(o,T,c,E*d),n.update(T,o,1)},this.renderInstances=function(E,T,I){if(0!==I){var N,W;if(a)N=i,W="drawElementsInstanced";else if(W="drawElementsInstancedANGLE",null===(N=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");N[W](o,T,c,E*d,I),n.update(T,o,I)}}}function nse(i){var n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(o,u,c){switch(n.calls++,u){case 4:n.triangles+=c*(o/3);break;case 1:n.lines+=c*(o/2);break;case 3:n.lines+=c*(o-1);break;case 2:n.lines+=c*o;break;case 0:n.points+=c*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u)}}}}var j3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),(r=s.call(this,null)).image={data:a,width:o,height:u,depth:c},r.magFilter=Ao,r.minFilter=Ao,r.wrapR=yl,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r.needsUpdate=!0,r}return n}(_l);function rse(i,s){return i[0]-s[0]}function ise(i,s){return Math.abs(s[1])-Math.abs(i[1])}function f6(i,s){var n=1,r=s.isInterleavedBufferAttribute?s.data.array:s.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),i.divideScalar(n)}function ase(i,s,n){for(var r={},a=new Float32Array(8),o=new WeakMap,u=new xe,c=[],d=0;d<8;d++)c[d]=[d,0];return{update:function(_,b,E,T){var I=_.morphTargetInfluences;if(!0===s.isWebGL2){var N=b.morphAttributes.position.length,W=o.get(b);if(void 0===W||W.count!==N){void 0!==W&&W.texture.dispose();var U=void 0!==b.morphAttributes.normal,H=b.morphAttributes.position,te=b.morphAttributes.normal||[],le=!0===U?2:1,he=b.attributes.position.count*le,se=1;he>s.maxTextureSize&&(se=Math.ceil(he/s.maxTextureSize),he=s.maxTextureSize);var ye=new Float32Array(he*se*4*N),Ue=new j3(ye,he,se,N);Ue.format=Xu,Ue.type=Am;for(var Ve=4*le,Fe=0;Fe<N;Fe++)for(var et=H[Fe],Ye=te[Fe],tt=he*se*4*Fe,wt=0;wt<et.count;wt++){u.fromBufferAttribute(et,wt),!0===et.normalized&&f6(u,et);var pt=wt*Ve;ye[tt+pt+0]=u.x,ye[tt+pt+1]=u.y,ye[tt+pt+2]=u.z,ye[tt+pt+3]=0,!0===U&&(u.fromBufferAttribute(Ye,wt),!0===Ye.normalized&&f6(u,Ye),ye[tt+pt+4]=u.x,ye[tt+pt+5]=u.y,ye[tt+pt+6]=u.z,ye[tt+pt+7]=0)}W={count:N,texture:Ue,size:new Yt(he,se)},o.set(b,W)}for(var Mt=0,$t=0;$t<I.length;$t++)Mt+=I[$t];var _n=b.morphTargetsRelative?1:1-Mt;T.getUniforms().setValue(i,"morphTargetBaseInfluence",_n),T.getUniforms().setValue(i,"morphTargetInfluences",I),T.getUniforms().setValue(i,"morphTargetsTexture",W.texture,n),T.getUniforms().setValue(i,"morphTargetsTextureSize",W.size)}else{var fn=void 0===I?0:I.length,tn=r[b.id];if(void 0===tn||tn.length!==fn){tn=[];for(var un=0;un<fn;un++)tn[un]=[un,0];r[b.id]=tn}for(var Pn=0;Pn<fn;Pn++){var Tr=tn[Pn];Tr[0]=Pn,Tr[1]=I[Pn]}tn.sort(ise);for(var nr=0;nr<8;nr++)nr<fn&&tn[nr][1]?(c[nr][0]=tn[nr][0],c[nr][1]=tn[nr][1]):(c[nr][0]=Number.MAX_SAFE_INTEGER,c[nr][1]=0);c.sort(rse);for(var Je=b.morphAttributes.position,on=b.morphAttributes.normal,Nn=0,sn=0;sn<8;sn++){var In=c[sn],Mn=In[0],Cn=In[1];Mn!==Number.MAX_SAFE_INTEGER&&Cn?(Je&&b.getAttribute("morphTarget"+sn)!==Je[Mn]&&b.setAttribute("morphTarget"+sn,Je[Mn]),on&&b.getAttribute("morphNormal"+sn)!==on[Mn]&&b.setAttribute("morphNormal"+sn,on[Mn]),a[sn]=Cn,Nn+=Cn):(Je&&!0===b.hasAttribute("morphTarget"+sn)&&b.deleteAttribute("morphTarget"+sn),on&&!0===b.hasAttribute("morphNormal"+sn)&&b.deleteAttribute("morphNormal"+sn),a[sn]=0)}var Ht=b.morphTargetsRelative?1:1-Nn;T.getUniforms().setValue(i,"morphTargetBaseInfluence",Ht),T.getUniforms().setValue(i,"morphTargetInfluences",a)}}}}function sse(i,s,n,r){var a=new WeakMap;function c(d){var m=d.target;m.removeEventListener("dispose",c),n.remove(m.instanceMatrix),null!==m.instanceColor&&n.remove(m.instanceColor)}return{update:function(d){var m=r.render.frame,b=s.get(d,d.geometry);return a.get(b)!==m&&(s.update(b),a.set(b,m)),d.isInstancedMesh&&(!1===d.hasEventListener("dispose",c)&&d.addEventListener("dispose",c),n.update(d.instanceMatrix,34962),null!==d.instanceColor&&n.update(d.instanceColor,34962)),b},dispose:function(){a=new WeakMap}}}j3.prototype.isDataTexture2DArray=!0;var h6=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),(r=s.call(this,null)).image={data:a,width:o,height:u,depth:c},r.magFilter=Ao,r.minFilter=Ao,r.wrapR=yl,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r.needsUpdate=!0,r}return n}(_l);h6.prototype.isDataTexture3D=!0;var d6=new _l,ose=new j3,use=new h6,v6=new vO,p6=[],m6=[],g6=new Float32Array(16),y6=new Float32Array(9),_6=new Float32Array(4);function wk(i,s,n){var r=i[0];if(r<=0||r>0)return i;var a=s*n,o=p6[a];if(void 0===o&&(o=new Float32Array(a),p6[a]=o),0!==s){r.toArray(o,0);for(var u=1,c=0;u!==s;++u)i[u].toArray(o,c+=n)}return o}function Ju(i,s){if(i.length!==s.length)return!1;for(var n=0,r=i.length;n<r;n++)if(i[n]!==s[n])return!1;return!0}function Iu(i,s){for(var n=0,r=s.length;n<r;n++)i[n]=s[n]}function b6(i,s){var n=m6[s];void 0===n&&(n=new Int32Array(s),m6[s]=n);for(var r=0;r!==s;++r)n[r]=i.allocateTextureUnit();return n}function lse(i,s){var n=this.cache;n[0]!==s&&(i.uniform1f(this.addr,s),n[0]=s)}function cse(i,s){var n=this.cache;if(void 0!==s.x)(n[0]!==s.x||n[1]!==s.y)&&(i.uniform2f(this.addr,s.x,s.y),n[0]=s.x,n[1]=s.y);else{if(Ju(n,s))return;i.uniform2fv(this.addr,s),Iu(n,s)}}function fse(i,s){var n=this.cache;if(void 0!==s.x)(n[0]!==s.x||n[1]!==s.y||n[2]!==s.z)&&(i.uniform3f(this.addr,s.x,s.y,s.z),n[0]=s.x,n[1]=s.y,n[2]=s.z);else if(void 0!==s.r)(n[0]!==s.r||n[1]!==s.g||n[2]!==s.b)&&(i.uniform3f(this.addr,s.r,s.g,s.b),n[0]=s.r,n[1]=s.g,n[2]=s.b);else{if(Ju(n,s))return;i.uniform3fv(this.addr,s),Iu(n,s)}}function hse(i,s){var n=this.cache;if(void 0!==s.x)(n[0]!==s.x||n[1]!==s.y||n[2]!==s.z||n[3]!==s.w)&&(i.uniform4f(this.addr,s.x,s.y,s.z,s.w),n[0]=s.x,n[1]=s.y,n[2]=s.z,n[3]=s.w);else{if(Ju(n,s))return;i.uniform4fv(this.addr,s),Iu(n,s)}}function dse(i,s){var n=this.cache,r=s.elements;if(void 0===r){if(Ju(n,s))return;i.uniformMatrix2fv(this.addr,!1,s),Iu(n,s)}else{if(Ju(n,r))return;_6.set(r),i.uniformMatrix2fv(this.addr,!1,_6),Iu(n,r)}}function vse(i,s){var n=this.cache,r=s.elements;if(void 0===r){if(Ju(n,s))return;i.uniformMatrix3fv(this.addr,!1,s),Iu(n,s)}else{if(Ju(n,r))return;y6.set(r),i.uniformMatrix3fv(this.addr,!1,y6),Iu(n,r)}}function pse(i,s){var n=this.cache,r=s.elements;if(void 0===r){if(Ju(n,s))return;i.uniformMatrix4fv(this.addr,!1,s),Iu(n,s)}else{if(Ju(n,r))return;g6.set(r),i.uniformMatrix4fv(this.addr,!1,g6),Iu(n,r)}}function mse(i,s){var n=this.cache;n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s)}function gse(i,s){var n=this.cache;Ju(n,s)||(i.uniform2iv(this.addr,s),Iu(n,s))}function yse(i,s){var n=this.cache;Ju(n,s)||(i.uniform3iv(this.addr,s),Iu(n,s))}function _se(i,s){var n=this.cache;Ju(n,s)||(i.uniform4iv(this.addr,s),Iu(n,s))}function bse(i,s){var n=this.cache;n[0]!==s&&(i.uniform1ui(this.addr,s),n[0]=s)}function wse(i,s){var n=this.cache;Ju(n,s)||(i.uniform2uiv(this.addr,s),Iu(n,s))}function kse(i,s){var n=this.cache;Ju(n,s)||(i.uniform3uiv(this.addr,s),Iu(n,s))}function Ese(i,s){var n=this.cache;Ju(n,s)||(i.uniform4uiv(this.addr,s),Iu(n,s))}function Cse(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.safeSetTexture2D(s||d6,a)}function Sse(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(s||use,a)}function Tse(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.safeSetTextureCube(s||v6,a)}function Mse(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(s||ose,a)}function xse(i,s){i.uniform1fv(this.addr,s)}function Ise(i,s){var n=wk(s,this.size,2);i.uniform2fv(this.addr,n)}function Dse(i,s){var n=wk(s,this.size,3);i.uniform3fv(this.addr,n)}function Rse(i,s){var n=wk(s,this.size,4);i.uniform4fv(this.addr,n)}function Pse(i,s){var n=wk(s,this.size,4);i.uniformMatrix2fv(this.addr,!1,n)}function Ose(i,s){var n=wk(s,this.size,9);i.uniformMatrix3fv(this.addr,!1,n)}function Lse(i,s){var n=wk(s,this.size,16);i.uniformMatrix4fv(this.addr,!1,n)}function Nse(i,s){i.uniform1iv(this.addr,s)}function Fse(i,s){i.uniform2iv(this.addr,s)}function Zse(i,s){i.uniform3iv(this.addr,s)}function Bse(i,s){i.uniform4iv(this.addr,s)}function Use(i,s){i.uniform1uiv(this.addr,s)}function Vse(i,s){i.uniform2uiv(this.addr,s)}function Hse(i,s){i.uniform3uiv(this.addr,s)}function zse(i,s){i.uniform4uiv(this.addr,s)}function Gse(i,s,n){var r=s.length,a=b6(n,r);i.uniform1iv(this.addr,a);for(var o=0;o!==r;++o)n.safeSetTexture2D(s[o]||d6,a[o])}function jse(i,s,n){var r=s.length,a=b6(n,r);i.uniform1iv(this.addr,a);for(var o=0;o!==r;++o)n.safeSetTextureCube(s[o]||v6,a[o])}function qse(i,s,n){this.id=i,this.addr=n,this.cache=[],this.setValue=function(i){switch(i){case 5126:return lse;case 35664:return cse;case 35665:return fse;case 35666:return hse;case 35674:return dse;case 35675:return vse;case 35676:return pse;case 5124:case 35670:return mse;case 35667:case 35671:return gse;case 35668:case 35672:return yse;case 35669:case 35673:return _se;case 5125:return bse;case 36294:return wse;case 36295:return kse;case 36296:return Ese;case 35678:case 36198:case 36298:case 36306:case 35682:return Cse;case 35679:case 36299:case 36307:return Sse;case 35680:case 36300:case 36308:case 36293:return Tse;case 36289:case 36303:case 36311:case 36292:return Mse}}(s.type)}function w6(i,s,n){this.id=i,this.addr=n,this.cache=[],this.size=s.size,this.setValue=function(i){switch(i){case 5126:return xse;case 35664:return Ise;case 35665:return Dse;case 35666:return Rse;case 35674:return Pse;case 35675:return Ose;case 35676:return Lse;case 5124:case 35670:return Nse;case 35667:case 35671:return Fse;case 35668:case 35672:return Zse;case 35669:case 35673:return Bse;case 5125:return Use;case 36294:return Vse;case 36295:return Hse;case 36296:return zse;case 35678:case 36198:case 36298:case 36306:case 35682:return Gse;case 35680:case 36300:case 36308:case 36293:return jse}}(s.type)}function k6(i){this.id=i,this.seq=[],this.map={}}w6.prototype.updateCache=function(i){var s=this.cache;i instanceof Float32Array&&s.length!==i.length&&(this.cache=new Float32Array(i.length)),Iu(s,i)},k6.prototype.setValue=function(i,s,n){for(var r=this.seq,a=0,o=r.length;a!==o;++a){var u=r[a];u.setValue(i,s[u.id],n)}};var W3=/(\w+)(\])?(\[|\.)?/g;function E6(i,s){i.seq.push(s),i.map[s.id]=s}function Yse(i,s,n){var r=i.name,a=r.length;for(W3.lastIndex=0;;){var o=W3.exec(r),c=o[1],m=o[3];if("]"===o[2]&&(c|=0),void 0===m||"["===m&&W3.lastIndex+2===a){E6(n,void 0===m?new qse(c,i,s):new w6(c,i,s));break}var b=n.map[c];void 0===b&&E6(n,b=new k6(c)),n=b}}function Um(i,s){this.seq=[],this.map={};for(var n=i.getProgramParameter(s,35718),r=0;r<n;++r){var a=i.getActiveUniform(s,r);Yse(a,i.getUniformLocation(s,a.name),this)}}function C6(i,s,n){var r=i.createShader(s);return i.shaderSource(r,n),i.compileShader(r),r}Um.prototype.setValue=function(i,s,n,r){var a=this.map[s];void 0!==a&&a.setValue(i,n,r)},Um.prototype.setOptional=function(i,s,n){var r=s[n];void 0!==r&&this.setValue(i,n,r)},Um.upload=function(i,s,n,r){for(var a=0,o=s.length;a!==o;++a){var u=s[a],c=n[u.id];!1!==c.needsUpdate&&u.setValue(i,c.value,r)}},Um.seqWithValue=function(i,s){for(var n=[],r=0,a=i.length;r!==a;++r){var o=i[r];o.id in s&&n.push(o)}return n};var Kse=0;function S6(i){switch(i){case Mu:return["Linear","( value )"];case g_:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function T6(i,s,n){var r=i.getShaderParameter(s,35713),a=i.getShaderInfoLog(s).trim();return r&&""===a?"":n.toUpperCase()+"\n\n"+a+"\n\n"+function(i){for(var s=i.split("\n"),n=0;n<s.length;n++)s[n]=n+1+": "+s[n];return s.join("\n")}(i.getShaderSource(s))}function kk(i,s){var n=S6(s);return"vec4 "+i+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Xse(i,s){var n=S6(s);return"vec4 "+i+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Qse(i,s){var n;switch(s){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",s),n="Linear"}return"vec3 "+i+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function AA(i){return""!==i}function M6(i,s){return i.replace(/NUM_DIR_LIGHTS/g,s.numDirLights).replace(/NUM_SPOT_LIGHTS/g,s.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,s.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,s.numPointLights).replace(/NUM_HEMI_LIGHTS/g,s.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,s.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,s.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,s.numPointLightShadows)}function A6(i,s){return i.replace(/NUM_CLIPPING_PLANES/g,s.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,s.numClippingPlanes-s.numClipIntersection)}var noe=/^[ \t]*#include +<([\w\d./]+)>/gm;function q3(i){return i.replace(noe,roe)}function roe(i,s){var n=ki[s];if(void 0===n)throw new Error("Can not resolve #include <"+s+">");return q3(n)}var ioe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,aoe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function x6(i){return i.replace(aoe,I6).replace(ioe,soe)}function soe(i,s,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),I6(0,s,n,r)}function I6(i,s,n,r){for(var a="",o=parseInt(s);o<parseInt(n);o++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function D6(i){var s="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?s+="\n#define HIGH_PRECISION":"mediump"===i.precision?s+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(s+="\n#define LOW_PRECISION"),s}function foe(i,s,n,r){var W,U,a=i.getContext(),o=n.defines,u=n.vertexShader,c=n.fragmentShader,d=function(i){var s="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?s="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?s="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(s="SHADOWMAP_TYPE_VSM"),s}(n),m=function(i){var s="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:s="ENVMAP_TYPE_CUBE";break;case 306:case 307:s="ENVMAP_TYPE_CUBE_UV"}return s}(n),_=function(i){var s="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case 302:case 307:s="ENVMAP_MODE_REFRACTION"}return s}(n),b=function(i){var s="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:s="ENVMAP_BLENDING_MULTIPLY";break;case 1:s="ENVMAP_BLENDING_MIX";break;case 2:s="ENVMAP_BLENDING_ADD"}return s}(n),E=i.gammaFactor>0?i.gammaFactor:1,T=n.isWebGL2?"":function(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(AA).join("\n")}(n),I=function(i){var s=[];for(var n in i){var r=i[n];!1!==r&&s.push("#define "+n+" "+r)}return s.join("\n")}(o),N=a.createProgram(),H=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((W=[I].filter(AA).join("\n")).length>0&&(W+="\n"),(U=[T,I].filter(AA).join("\n")).length>0&&(U+="\n")):(W=[D6(n),"#define SHADER_NAME "+n.shaderName,I,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+E,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+_:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(AA).join("\n"),U=[T,D6(n),"#define SHADER_NAME "+n.shaderName,I,"#define GAMMA_FACTOR "+E,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.envMap?"#define "+_:"",n.envMap?"#define "+b:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+d:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?ki.tonemapping_pars_fragment:"",0!==n.toneMapping?Qse("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===Yw?"#define OPAQUE":"",ki.encodings_pars_fragment,n.map?kk("mapTexelToLinear",n.mapEncoding):"",n.matcap?kk("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?kk("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?kk("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?kk("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?kk("lightMapTexelToLinear",n.lightMapEncoding):"",Xse("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(AA).join("\n")),u=A6(u=M6(u=q3(u),n),n),c=A6(c=M6(c=q3(c),n),n),u=x6(u),c=x6(c),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(H="#version 300 es\n",W=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+W,U=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+U);var tt,wt,ue=H+U+c,le=C6(a,35633,H+W+u),he=C6(a,35632,ue);if(a.attachShader(N,le),a.attachShader(N,he),void 0!==n.index0AttributeName?a.bindAttribLocation(N,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(N,0,"position"),a.linkProgram(N),i.debug.checkShaderErrors){var se=a.getProgramInfoLog(N).trim(),ye=a.getShaderInfoLog(le).trim(),Ue=a.getShaderInfoLog(he).trim(),Ve=!0,Fe=!0;if(!1===a.getProgramParameter(N,35714)){Ve=!1;var et=T6(a,le,"vertex"),Ye=T6(a,he,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(N,35715)+"\n\nProgram Info Log: "+se+"\n"+et+"\n"+Ye)}else""!==se?console.warn("THREE.WebGLProgram: Program Info Log:",se):(""===ye||""===Ue)&&(Fe=!1);Fe&&(this.diagnostics={runnable:Ve,programLog:se,vertexShader:{log:ye,prefix:W},fragmentShader:{log:Ue,prefix:U}})}return a.deleteShader(le),a.deleteShader(he),this.getUniforms=function(){return void 0===tt&&(tt=new Um(a,N)),tt},this.getAttributes=function(){return void 0===wt&&(wt=function(i,s){for(var n={},r=i.getProgramParameter(s,35721),a=0;a<r;a++){var o=i.getActiveAttrib(s,a),u=o.name,c=1;35674===o.type&&(c=2),35675===o.type&&(c=3),35676===o.type&&(c=4),n[u]={type:o.type,location:i.getAttribLocation(s,u),locationSize:c}}return n}(a,N)),wt},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(N),this.program=void 0},this.name=n.shaderName,this.id=Kse++,this.cacheKey=s,this.usedTimes=1,this.program=N,this.vertexShader=le,this.fragmentShader=he,this}function hoe(i,s,n,r,a,o,u){var c=[],d=a.isWebGL2,m=a.logarithmicDepthBuffer,_=a.floatVertexTextures,b=a.maxVertexUniforms,E=a.vertexTextures,T=a.precision,I={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},N=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function U(se){var ye;return se&&se.isTexture?ye=se.encoding:se&&se.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ye=se.texture.encoding):ye=Mu,d&&se&&se.isTexture&&se.format===Xu&&se.type===Mm&&se.encoding===g_&&(ye=Mu),ye}return{getParameters:function(se,ye,Ue,Ve,Fe){var Mt,$t,et=Ve.fog,tt=(se.isMeshStandardMaterial?n:s).get(se.envMap||(se.isMeshStandardMaterial?Ve.environment:null)),wt=I[se.type],pt=Fe.isSkinnedMesh?function(se){var Ue=se.skeleton.bones;if(_)return 1024;var Fe=Math.floor((b-20)/4),et=Math.min(Fe,Ue.length);return et<Ue.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Ue.length+" bones. This GPU supports "+et+"."),0):et}(Fe):0;if(null!==se.precision&&(T=a.getMaxPrecision(se.precision))!==se.precision&&console.warn("THREE.WebGLProgram.getParameters:",se.precision,"not supported, using",T,"instead."),wt){var _n=od[wt];Mt=_n.vertexShader,$t=_n.fragmentShader}else Mt=se.vertexShader,$t=se.fragmentShader;var fn=i.getRenderTarget(),tn=se.alphaTest>0,un=se.clearcoat>0;return{isWebGL2:d,shaderID:wt,shaderName:se.type,vertexShader:Mt,fragmentShader:$t,defines:se.defines,isRawShaderMaterial:!0===se.isRawShaderMaterial,glslVersion:se.glslVersion,precision:T,instancing:!0===Fe.isInstancedMesh,instancingColor:!0===Fe.isInstancedMesh&&null!==Fe.instanceColor,supportsVertexTextures:E,outputEncoding:null!==fn?U(fn.texture):i.outputEncoding,map:!!se.map,mapEncoding:U(se.map),matcap:!!se.matcap,matcapEncoding:U(se.matcap),envMap:!!tt,envMapMode:tt&&tt.mapping,envMapEncoding:U(tt),envMapCubeUV:!!tt&&(306===tt.mapping||307===tt.mapping),lightMap:!!se.lightMap,lightMapEncoding:U(se.lightMap),aoMap:!!se.aoMap,emissiveMap:!!se.emissiveMap,emissiveMapEncoding:U(se.emissiveMap),bumpMap:!!se.bumpMap,normalMap:!!se.normalMap,objectSpaceNormalMap:1===se.normalMapType,tangentSpaceNormalMap:0===se.normalMapType,clearcoat:un,clearcoatMap:un&&!!se.clearcoatMap,clearcoatRoughnessMap:un&&!!se.clearcoatRoughnessMap,clearcoatNormalMap:un&&!!se.clearcoatNormalMap,displacementMap:!!se.displacementMap,roughnessMap:!!se.roughnessMap,metalnessMap:!!se.metalnessMap,specularMap:!!se.specularMap,specularIntensityMap:!!se.specularIntensityMap,specularTintMap:!!se.specularTintMap,specularTintMapEncoding:U(se.specularTintMap),alphaMap:!!se.alphaMap,alphaTest:tn,gradientMap:!!se.gradientMap,sheen:se.sheen>0,transmission:se.transmission>0,transmissionMap:!!se.transmissionMap,thicknessMap:!!se.thicknessMap,combine:se.combine,vertexTangents:!!se.normalMap&&!!Fe.geometry&&!!Fe.geometry.attributes.tangent,vertexColors:se.vertexColors,vertexAlphas:!0===se.vertexColors&&!!Fe.geometry&&!!Fe.geometry.attributes.color&&4===Fe.geometry.attributes.color.itemSize,vertexUvs:!!(se.map||se.bumpMap||se.normalMap||se.specularMap||se.alphaMap||se.emissiveMap||se.roughnessMap||se.metalnessMap||se.clearcoatMap||se.clearcoatRoughnessMap||se.clearcoatNormalMap||se.displacementMap||se.transmissionMap||se.thicknessMap||se.specularIntensityMap||se.specularTintMap),uvsVertexOnly:!(se.map||se.bumpMap||se.normalMap||se.specularMap||se.alphaMap||se.emissiveMap||se.roughnessMap||se.metalnessMap||se.clearcoatNormalMap||se.transmission>0||se.transmissionMap||se.thicknessMap||se.specularIntensityMap||se.specularTintMap||!se.displacementMap),fog:!!et,useFog:se.fog,fogExp2:et&&et.isFogExp2,flatShading:!!se.flatShading,sizeAttenuation:se.sizeAttenuation,logarithmicDepthBuffer:m,skinning:!0===Fe.isSkinnedMesh&&pt>0,maxBones:pt,useVertexTexture:_,morphTargets:!!Fe.geometry&&!!Fe.geometry.morphAttributes.position,morphNormals:!!Fe.geometry&&!!Fe.geometry.morphAttributes.normal,morphTargetsCount:Fe.geometry&&Fe.geometry.morphAttributes.position?Fe.geometry.morphAttributes.position.length:0,numDirLights:ye.directional.length,numPointLights:ye.point.length,numSpotLights:ye.spot.length,numRectAreaLights:ye.rectArea.length,numHemiLights:ye.hemi.length,numDirLightShadows:ye.directionalShadowMap.length,numPointLightShadows:ye.pointShadowMap.length,numSpotLightShadows:ye.spotShadowMap.length,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,format:se.format,dithering:se.dithering,shadowMapEnabled:i.shadowMap.enabled&&Ue.length>0,shadowMapType:i.shadowMap.type,toneMapping:se.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:se.premultipliedAlpha,doubleSided:2===se.side,flipSided:1===se.side,depthPacking:void 0!==se.depthPacking&&se.depthPacking,index0AttributeName:se.index0AttributeName,extensionDerivatives:se.extensions&&se.extensions.derivatives,extensionFragDepth:se.extensions&&se.extensions.fragDepth,extensionDrawBuffers:se.extensions&&se.extensions.drawBuffers,extensionShaderTextureLOD:se.extensions&&se.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:se.customProgramCacheKey()}},getProgramCacheKey:function(se){var ye=[];if(se.shaderID?ye.push(se.shaderID):(ye.push(se.fragmentShader),ye.push(se.vertexShader)),void 0!==se.defines)for(var Ue in se.defines)ye.push(Ue),ye.push(se.defines[Ue]);if(!1===se.isRawShaderMaterial){for(var Ve=0;Ve<N.length;Ve++)ye.push(se[N[Ve]]);ye.push(i.outputEncoding),ye.push(i.gammaFactor)}return ye.push(se.customProgramCacheKey),ye.join()},getUniforms:function(se){var ye=I[se.type];return ye?cre.clone(od[ye].uniforms):se.uniforms},acquireProgram:function(se,ye){for(var Ue,Ve=0,Fe=c.length;Ve<Fe;Ve++){var et=c[Ve];if(et.cacheKey===ye){++(Ue=et).usedTimes;break}}return void 0===Ue&&(Ue=new foe(i,ye,se,o),c.push(Ue)),Ue},releaseProgram:function(se){if(0==--se.usedTimes){var ye=c.indexOf(se);c[ye]=c[c.length-1],c.pop(),se.destroy()}},programs:c}}function doe(){var i=new WeakMap;return{get:function(o){var u=i.get(o);return void 0===u&&i.set(o,u={}),u},remove:function(o){i.delete(o)},update:function(o,u,c){i.get(o)[u]=c},dispose:function(){i=new WeakMap}}}function voe(i,s){return i.groupOrder!==s.groupOrder?i.groupOrder-s.groupOrder:i.renderOrder!==s.renderOrder?i.renderOrder-s.renderOrder:i.program!==s.program?i.program.id-s.program.id:i.material.id!==s.material.id?i.material.id-s.material.id:i.z!==s.z?i.z-s.z:i.id-s.id}function R6(i,s){return i.groupOrder!==s.groupOrder?i.groupOrder-s.groupOrder:i.renderOrder!==s.renderOrder?i.renderOrder-s.renderOrder:i.z!==s.z?s.z-i.z:i.id-s.id}function P6(i){var s=[],n=0,r=[],a=[],o=[],u={id:-1};function d(T,I,N,W,U,H){var te=s[n],ue=i.get(N);return void 0===te?s[n]=te={id:T.id,object:T,geometry:I,material:N,program:ue.program||u,groupOrder:W,renderOrder:T.renderOrder,z:U,group:H}:(te.id=T.id,te.object=T,te.geometry=I,te.material=N,te.program=ue.program||u,te.groupOrder=W,te.renderOrder=T.renderOrder,te.z=U,te.group=H),n++,te}return{opaque:r,transmissive:a,transparent:o,init:function(){n=0,r.length=0,a.length=0,o.length=0},push:function(T,I,N,W,U,H){var te=d(T,I,N,W,U,H);N.transmission>0?a.push(te):!0===N.transparent?o.push(te):r.push(te)},unshift:function(T,I,N,W,U,H){var te=d(T,I,N,W,U,H);N.transmission>0?a.unshift(te):!0===N.transparent?o.unshift(te):r.unshift(te)},finish:function(){for(var T=n,I=s.length;T<I;T++){var N=s[T];if(null===N.id)break;N.id=null,N.object=null,N.geometry=null,N.material=null,N.program=null,N.group=null}},sort:function(T,I){r.length>1&&r.sort(T||voe),a.length>1&&a.sort(I||R6),o.length>1&&o.sort(I||R6)}}}function poe(i){var s=new WeakMap;return{get:function(a,o){var u;return!1===s.has(a)?(u=new P6(i),s.set(a,[u])):o>=s.get(a).length?(u=new P6(i),s.get(a).push(u)):u=s.get(a)[o],u},dispose:function(){s=new WeakMap}}}function moe(){var i={};return{get:function(n){if(void 0!==i[n.id])return i[n.id];var r;switch(n.type){case"DirectionalLight":r={direction:new xe,color:new lr};break;case"SpotLight":r={position:new xe,direction:new xe,color:new lr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new xe,color:new lr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new xe,skyColor:new lr,groundColor:new lr};break;case"RectAreaLight":r={color:new lr,position:new xe,halfWidth:new xe,halfHeight:new xe}}return i[n.id]=r,r}}}var yoe=0;function _oe(i,s){return(s.castShadow?1:0)-(i.castShadow?1:0)}function boe(i,s){for(var n=new moe,r=function(){var i={};return{get:function(n){if(void 0!==i[n.id])return i[n.id];var r;switch(n.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt,shadowCameraNear:1,shadowCameraFar:1e3}}return i[n.id]=r,r}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)a.probe.push(new xe);var u=new xe,c=new Cr,d=new Cr;return{setup:function(b,E){for(var T=0,I=0,N=0,W=0;W<9;W++)a.probe[W].set(0,0,0);var U=0,H=0,te=0,ue=0,le=0,he=0,se=0,ye=0;b.sort(_oe);for(var Ue=!0!==E?Math.PI:1,Ve=0,Fe=b.length;Ve<Fe;Ve++){var et=b[Ve],Ye=et.color,tt=et.intensity,wt=et.distance,pt=et.shadow&&et.shadow.map?et.shadow.map.texture:null;if(et.isAmbientLight)T+=Ye.r*tt*Ue,I+=Ye.g*tt*Ue,N+=Ye.b*tt*Ue;else if(et.isLightProbe)for(var Mt=0;Mt<9;Mt++)a.probe[Mt].addScaledVector(et.sh.coefficients[Mt],tt);else if(et.isDirectionalLight){var $t=n.get(et);if($t.color.copy(et.color).multiplyScalar(et.intensity*Ue),et.castShadow){var _n=et.shadow,fn=r.get(et);fn.shadowBias=_n.bias,fn.shadowNormalBias=_n.normalBias,fn.shadowRadius=_n.radius,fn.shadowMapSize=_n.mapSize,a.directionalShadow[U]=fn,a.directionalShadowMap[U]=pt,a.directionalShadowMatrix[U]=et.shadow.matrix,he++}a.directional[U]=$t,U++}else if(et.isSpotLight){var tn=n.get(et);if(tn.position.setFromMatrixPosition(et.matrixWorld),tn.color.copy(Ye).multiplyScalar(tt*Ue),tn.distance=wt,tn.coneCos=Math.cos(et.angle),tn.penumbraCos=Math.cos(et.angle*(1-et.penumbra)),tn.decay=et.decay,et.castShadow){var un=et.shadow,Pn=r.get(et);Pn.shadowBias=un.bias,Pn.shadowNormalBias=un.normalBias,Pn.shadowRadius=un.radius,Pn.shadowMapSize=un.mapSize,a.spotShadow[te]=Pn,a.spotShadowMap[te]=pt,a.spotShadowMatrix[te]=et.shadow.matrix,ye++}a.spot[te]=tn,te++}else if(et.isRectAreaLight){var Tr=n.get(et);Tr.color.copy(Ye).multiplyScalar(tt),Tr.halfWidth.set(.5*et.width,0,0),Tr.halfHeight.set(0,.5*et.height,0),a.rectArea[ue]=Tr,ue++}else if(et.isPointLight){var nr=n.get(et);if(nr.color.copy(et.color).multiplyScalar(et.intensity*Ue),nr.distance=et.distance,nr.decay=et.decay,et.castShadow){var Je=et.shadow,on=r.get(et);on.shadowBias=Je.bias,on.shadowNormalBias=Je.normalBias,on.shadowRadius=Je.radius,on.shadowMapSize=Je.mapSize,on.shadowCameraNear=Je.camera.near,on.shadowCameraFar=Je.camera.far,a.pointShadow[H]=on,a.pointShadowMap[H]=pt,a.pointShadowMatrix[H]=et.shadow.matrix,se++}a.point[H]=nr,H++}else if(et.isHemisphereLight){var Nn=n.get(et);Nn.skyColor.copy(et.color).multiplyScalar(tt*Ue),Nn.groundColor.copy(et.groundColor).multiplyScalar(tt*Ue),a.hemi[le]=Nn,le++}}ue>0&&(s.isWebGL2||!0===i.has("OES_texture_float_linear")?(a.rectAreaLTC1=Ln.LTC_FLOAT_1,a.rectAreaLTC2=Ln.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=Ln.LTC_HALF_1,a.rectAreaLTC2=Ln.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=T,a.ambient[1]=I,a.ambient[2]=N;var sn=a.hash;(sn.directionalLength!==U||sn.pointLength!==H||sn.spotLength!==te||sn.rectAreaLength!==ue||sn.hemiLength!==le||sn.numDirectionalShadows!==he||sn.numPointShadows!==se||sn.numSpotShadows!==ye)&&(a.directional.length=U,a.spot.length=te,a.rectArea.length=ue,a.point.length=H,a.hemi.length=le,a.directionalShadow.length=he,a.directionalShadowMap.length=he,a.pointShadow.length=se,a.pointShadowMap.length=se,a.spotShadow.length=ye,a.spotShadowMap.length=ye,a.directionalShadowMatrix.length=he,a.pointShadowMatrix.length=se,a.spotShadowMatrix.length=ye,sn.directionalLength=U,sn.pointLength=H,sn.spotLength=te,sn.rectAreaLength=ue,sn.hemiLength=le,sn.numDirectionalShadows=he,sn.numPointShadows=se,sn.numSpotShadows=ye,a.version=yoe++)},setupView:function(b,E){for(var T=0,I=0,N=0,W=0,U=0,H=E.matrixWorldInverse,te=0,ue=b.length;te<ue;te++){var le=b[te];if(le.isDirectionalLight){var he=a.directional[T];he.direction.setFromMatrixPosition(le.matrixWorld),u.setFromMatrixPosition(le.target.matrixWorld),he.direction.sub(u),he.direction.transformDirection(H),T++}else if(le.isSpotLight){var se=a.spot[N];se.position.setFromMatrixPosition(le.matrixWorld),se.position.applyMatrix4(H),se.direction.setFromMatrixPosition(le.matrixWorld),u.setFromMatrixPosition(le.target.matrixWorld),se.direction.sub(u),se.direction.transformDirection(H),N++}else if(le.isRectAreaLight){var ye=a.rectArea[W];ye.position.setFromMatrixPosition(le.matrixWorld),ye.position.applyMatrix4(H),d.identity(),c.copy(le.matrixWorld),c.premultiply(H),d.extractRotation(c),ye.halfWidth.set(.5*le.width,0,0),ye.halfHeight.set(0,.5*le.height,0),ye.halfWidth.applyMatrix4(d),ye.halfHeight.applyMatrix4(d),W++}else if(le.isPointLight){var Ue=a.point[I];Ue.position.setFromMatrixPosition(le.matrixWorld),Ue.position.applyMatrix4(H),I++}else if(le.isHemisphereLight){var Ve=a.hemi[U];Ve.direction.setFromMatrixPosition(le.matrixWorld),Ve.direction.transformDirection(H),Ve.direction.normalize(),U++}}},state:a}}function O6(i,s){var n=new boe(i,s),r=[],a=[];return{init:function(){r.length=0,a.length=0},state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:function(b){n.setup(r,b)},setupLightsView:function(b){n.setupView(r,b)},pushLight:function(b){r.push(b)},pushShadow:function(b){a.push(b)}}}function woe(i,s){var n=new WeakMap;return{get:function(o){var c,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(o)?(c=new O6(i,s),n.set(o,[c])):u>=n.get(o).length?(c=new O6(i,s),n.get(o).push(c)):c=n.get(o)[u],c},dispose:function(){n=new WeakMap}}}var Y3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshDepthMaterial",a.depthPacking=3200,a.map=null,a.alphaMap=null,a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.wireframe=!1,a.wireframeLinewidth=1,a.fog=!1,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}]),n}(vu);Y3.prototype.isMeshDepthMaterial=!0;var K3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshDistanceMaterial",a.referencePosition=new xe,a.nearDistance=1,a.farDistance=1e3,a.map=null,a.alphaMap=null,a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.fog=!1,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}]),n}(vu);function L6(i,s,n){var r=new mO,a=new Yt,o=new Yt,u=new La,c=new Y3({depthPacking:3201}),d=new K3,m={},_=n.maxTextureSize,b={0:1,1:0,2:2},E=new Fm({uniforms:{shadow_pass:{value:null},resolution:{value:new Yt},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=E.clone();T.defines.HORIZONTAL_PASS=1;var I=new Fi;I.setAttribute("position",new fo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var N=new Au(I,E),W=this;function U(ue,le){var he=s.update(N);E.uniforms.shadow_pass.value=ue.map.texture,E.uniforms.resolution.value=ue.mapSize,E.uniforms.radius.value=ue.radius,E.uniforms.samples.value=ue.blurSamples,i.setRenderTarget(ue.mapPass),i.clear(),i.renderBufferDirect(le,null,he,E,N,null),T.uniforms.shadow_pass.value=ue.mapPass.texture,T.uniforms.resolution.value=ue.mapSize,T.uniforms.radius.value=ue.radius,T.uniforms.samples.value=ue.blurSamples,i.setRenderTarget(ue.map),i.clear(),i.renderBufferDirect(le,null,he,T,N,null)}function H(ue,le,he,se,ye,Ue,Ve){var Fe=null,et=!0===se.isPointLight?ue.customDistanceMaterial:ue.customDepthMaterial;if(Fe=void 0!==et?et:!0===se.isPointLight?d:c,i.localClippingEnabled&&!0===he.clipShadows&&0!==he.clippingPlanes.length||he.displacementMap&&0!==he.displacementScale||he.alphaMap&&he.alphaTest>0){var Ye=Fe.uuid,tt=he.uuid,wt=m[Ye];void 0===wt&&(m[Ye]=wt={});var pt=wt[tt];void 0===pt&&(pt=Fe.clone(),wt[tt]=pt),Fe=pt}return Fe.visible=he.visible,Fe.wireframe=he.wireframe,Fe.side=3===Ve?null!==he.shadowSide?he.shadowSide:he.side:null!==he.shadowSide?he.shadowSide:b[he.side],Fe.alphaMap=he.alphaMap,Fe.alphaTest=he.alphaTest,Fe.clipShadows=he.clipShadows,Fe.clippingPlanes=he.clippingPlanes,Fe.clipIntersection=he.clipIntersection,Fe.displacementMap=he.displacementMap,Fe.displacementScale=he.displacementScale,Fe.displacementBias=he.displacementBias,Fe.wireframeLinewidth=he.wireframeLinewidth,Fe.linewidth=he.linewidth,!0===se.isPointLight&&!0===Fe.isMeshDistanceMaterial&&(Fe.referencePosition.setFromMatrixPosition(se.matrixWorld),Fe.nearDistance=ye,Fe.farDistance=Ue),Fe}function te(ue,le,he,se,ye){if(!1!==ue.visible){if(ue.layers.test(le.layers)&&(ue.isMesh||ue.isLine||ue.isPoints)&&(ue.castShadow||ue.receiveShadow&&3===ye)&&(!ue.frustumCulled||r.intersectsObject(ue))){ue.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,ue.matrixWorld);var Ve=s.update(ue),Fe=ue.material;if(Array.isArray(Fe))for(var et=Ve.groups,Ye=0,tt=et.length;Ye<tt;Ye++){var wt=et[Ye],pt=Fe[wt.materialIndex];if(pt&&pt.visible){var Mt=H(ue,0,pt,se,he.near,he.far,ye);i.renderBufferDirect(he,null,Ve,Mt,ue,wt)}}else if(Fe.visible){var $t=H(ue,0,Fe,se,he.near,he.far,ye);i.renderBufferDirect(he,null,Ve,$t,ue,null)}}for(var _n=ue.children,fn=0,tn=_n.length;fn<tn;fn++)te(_n[fn],le,he,se,ye)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(ue,le,he){if(!1!==W.enabled&&(!1!==W.autoUpdate||!1!==W.needsUpdate)&&0!==ue.length){var se=i.getRenderTarget(),ye=i.getActiveCubeFace(),Ue=i.getActiveMipmapLevel(),Ve=i.state;Ve.setBlending(0),Ve.buffers.color.setClear(1,1,1,1),Ve.buffers.depth.setTest(!0),Ve.setScissorTest(!1);for(var Fe=0,et=ue.length;Fe<et;Fe++){var Ye=ue[Fe],tt=Ye.shadow;if(void 0!==tt){if(!1!==tt.autoUpdate||!1!==tt.needsUpdate){a.copy(tt.mapSize);var wt=tt.getFrameExtents();if(a.multiply(wt),o.copy(tt.mapSize),(a.x>_||a.y>_)&&(a.x>_&&(o.x=Math.floor(_/wt.x),a.x=o.x*wt.x,tt.mapSize.x=o.x),a.y>_&&(o.y=Math.floor(_/wt.y),a.y=o.y*wt.y,tt.mapSize.y=o.y)),null===tt.map&&!tt.isPointLightShadow&&3===this.type){var pt={minFilter:ec,magFilter:ec,format:Xu};tt.map=new sd(a.x,a.y,pt),tt.map.texture.name=Ye.name+".shadowMap",tt.mapPass=new sd(a.x,a.y,pt),tt.camera.updateProjectionMatrix()}null===tt.map&&(tt.map=new sd(a.x,a.y,{minFilter:Ao,magFilter:Ao,format:Xu}),tt.map.texture.name=Ye.name+".shadowMap",tt.camera.updateProjectionMatrix()),i.setRenderTarget(tt.map),i.clear();for(var $t=tt.getViewportCount(),_n=0;_n<$t;_n++){var fn=tt.getViewport(_n);u.set(o.x*fn.x,o.y*fn.y,o.x*fn.z,o.y*fn.w),Ve.viewport(u),tt.updateMatrices(Ye,_n),r=tt.getFrustum(),te(le,he,tt.camera,Ye,this.type)}!tt.isPointLightShadow&&3===this.type&&U(tt,he),tt.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",Ye,"has no shadow.")}W.needsUpdate=!1,i.setRenderTarget(se,ye,Ue)}}}function Coe(i,s,n){var r,a,o=n.isWebGL2,m=new function(){var bt=!1,Un=new La,Xn=null,Ur=new La(0,0,0,0);return{setMask:function(Bn){Xn!==Bn&&!bt&&(i.colorMask(Bn,Bn,Bn,Bn),Xn=Bn)},setLocked:function(Bn){bt=Bn},setClear:function(Bn,dt,Vn,fi,ri){!0===ri&&(Bn*=fi,dt*=fi,Vn*=fi),Un.set(Bn,dt,Vn,fi),!1===Ur.equals(Un)&&(i.clearColor(Bn,dt,Vn,fi),Ur.copy(Un))},reset:function(){bt=!1,Xn=null,Ur.set(-1,0,0,0)}}},_=new function(){var bt=!1,Un=null,Xn=null,Ur=null;return{setTest:function(Bn){Bn?Je(2929):on(2929)},setMask:function(Bn){Un!==Bn&&!bt&&(i.depthMask(Bn),Un=Bn)},setFunc:function(Bn){if(Xn!==Bn){if(Bn)switch(Bn){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);Xn=Bn}},setLocked:function(Bn){bt=Bn},setClear:function(Bn){Ur!==Bn&&(i.clearDepth(Bn),Ur=Bn)},reset:function(){bt=!1,Un=null,Xn=null,Ur=null}}},b=new function(){var bt=!1,Un=null,Xn=null,Ur=null,Sr=null,Bn=null,dt=null,Vn=null,fi=null;return{setTest:function(qr){bt||(qr?Je(2960):on(2960))},setMask:function(qr){Un!==qr&&!bt&&(i.stencilMask(qr),Un=qr)},setFunc:function(qr,ga,Cs){(Xn!==qr||Ur!==ga||Sr!==Cs)&&(i.stencilFunc(qr,ga,Cs),Xn=qr,Ur=ga,Sr=Cs)},setOp:function(qr,ga,Cs){(Bn!==qr||dt!==ga||Vn!==Cs)&&(i.stencilOp(qr,ga,Cs),Bn=qr,dt=ga,Vn=Cs)},setLocked:function(qr){bt=qr},setClear:function(qr){fi!==qr&&(i.clearStencil(qr),fi=qr)},reset:function(){bt=!1,Un=null,Xn=null,Ur=null,Sr=null,Bn=null,dt=null,Vn=null,fi=null}}},E={},T=null,I={},N=null,W=!1,U=null,H=null,te=null,ue=null,le=null,he=null,se=null,ye=!1,Ue=null,Ve=null,Fe=null,et=null,Ye=null,tt=i.getParameter(35661),wt=!1,pt=0,Mt=i.getParameter(7938);-1!==Mt.indexOf("WebGL")?(pt=parseFloat(/^WebGL (\d)/.exec(Mt)[1]),wt=pt>=1):-1!==Mt.indexOf("OpenGL ES")&&(pt=parseFloat(/^OpenGL ES (\d)/.exec(Mt)[1]),wt=pt>=2);var $t=null,_n={},fn=i.getParameter(3088),tn=i.getParameter(2978),un=(new La).fromArray(fn),Pn=(new La).fromArray(tn);function Tr(bt,Un,Xn){var Ur=new Uint8Array(4),Sr=i.createTexture();i.bindTexture(bt,Sr),i.texParameteri(bt,10241,9728),i.texParameteri(bt,10240,9728);for(var Bn=0;Bn<Xn;Bn++)i.texImage2D(Un+Bn,0,6408,1,1,0,6408,5121,Ur);return Sr}var nr={};function Je(bt){!0!==E[bt]&&(i.enable(bt),E[bt]=!0)}function on(bt){!1!==E[bt]&&(i.disable(bt),E[bt]=!1)}nr[3553]=Tr(3553,3553,1),nr[34067]=Tr(34067,34069,6),m.setClear(0,0,0,1),_.setClear(1),b.setClear(0),Je(2929),_.setFunc(3),gr(!1),ni(1),Je(2884),an(0);var Mn=((0,ti.Z)(r={},100,32774),(0,ti.Z)(r,101,32778),(0,ti.Z)(r,102,32779),r);if(o)Mn[103]=32775,Mn[104]=32776;else{var Cn=s.get("EXT_blend_minmax");null!==Cn&&(Mn[103]=Cn.MIN_EXT,Mn[104]=Cn.MAX_EXT)}var Ht=((0,ti.Z)(a={},200,0),(0,ti.Z)(a,201,1),(0,ti.Z)(a,202,768),(0,ti.Z)(a,204,770),(0,ti.Z)(a,210,776),(0,ti.Z)(a,208,774),(0,ti.Z)(a,206,772),(0,ti.Z)(a,203,769),(0,ti.Z)(a,205,771),(0,ti.Z)(a,209,775),(0,ti.Z)(a,207,773),a);function an(bt,Un,Xn,Ur,Sr,Bn,dt,Vn){if(0!==bt){if(!1===W&&(Je(3042),W=!0),5===bt)Sr=Sr||Un,Bn=Bn||Xn,dt=dt||Ur,(Un!==H||Sr!==le)&&(i.blendEquationSeparate(Mn[Un],Mn[Sr]),H=Un,le=Sr),(Xn!==te||Ur!==ue||Bn!==he||dt!==se)&&(i.blendFuncSeparate(Ht[Xn],Ht[Ur],Ht[Bn],Ht[dt]),te=Xn,ue=Ur,he=Bn,se=dt),U=bt,ye=null;else if(bt!==U||Vn!==ye){if((100!==H||100!==le)&&(i.blendEquation(32774),H=100,le=100),Vn)switch(bt){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,0,769,771);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",bt)}else switch(bt){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFunc(0,769);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",bt)}te=null,ue=null,he=null,se=null,U=bt,ye=Vn}}else!0===W&&(on(3042),W=!1)}function gr(bt){Ue!==bt&&(i.frontFace(bt?2304:2305),Ue=bt)}function ni(bt){0!==bt?(Je(2884),bt!==Ve&&i.cullFace(1===bt?1029:2===bt?1028:1032)):on(2884),Ve=bt}function Ke(bt,Un,Xn){bt?(Je(32823),(et!==Un||Ye!==Xn)&&(i.polygonOffset(Un,Xn),et=Un,Ye=Xn)):on(32823)}function Xt(bt){void 0===bt&&(bt=33984+tt-1),$t!==bt&&(i.activeTexture(bt),$t=bt)}return{buffers:{color:m,depth:_,stencil:b},enable:Je,disable:on,bindFramebuffer:function(bt,Un){return null===Un&&null!==T&&(Un=T),I[bt]!==Un&&(i.bindFramebuffer(bt,Un),I[bt]=Un,o&&(36009===bt&&(I[36160]=Un),36160===bt&&(I[36009]=Un)),!0)},bindXRFramebuffer:function(bt){bt!==T&&(i.bindFramebuffer(36160,bt),T=bt)},useProgram:function(bt){return N!==bt&&(i.useProgram(bt),N=bt,!0)},setBlending:an,setMaterial:function(bt,Un){2===bt.side?on(2884):Je(2884);var Xn=1===bt.side;Un&&(Xn=!Xn),gr(Xn),1===bt.blending&&!1===bt.transparent?an(0):an(bt.blending,bt.blendEquation,bt.blendSrc,bt.blendDst,bt.blendEquationAlpha,bt.blendSrcAlpha,bt.blendDstAlpha,bt.premultipliedAlpha),_.setFunc(bt.depthFunc),_.setTest(bt.depthTest),_.setMask(bt.depthWrite),m.setMask(bt.colorWrite);var Ur=bt.stencilWrite;b.setTest(Ur),Ur&&(b.setMask(bt.stencilWriteMask),b.setFunc(bt.stencilFunc,bt.stencilRef,bt.stencilFuncMask),b.setOp(bt.stencilFail,bt.stencilZFail,bt.stencilZPass)),Ke(bt.polygonOffset,bt.polygonOffsetFactor,bt.polygonOffsetUnits),!0===bt.alphaToCoverage?Je(32926):on(32926)},setFlipSided:gr,setCullFace:ni,setLineWidth:function(bt){bt!==Fe&&(wt&&i.lineWidth(bt),Fe=bt)},setPolygonOffset:Ke,setScissorTest:function(bt){bt?Je(3089):on(3089)},activeTexture:Xt,bindTexture:function(bt,Un){null===$t&&Xt();var Xn=_n[$t];void 0===Xn&&(_n[$t]=Xn={type:void 0,texture:void 0}),(Xn.type!==bt||Xn.texture!==Un)&&(i.bindTexture(bt,Un||nr[bt]),Xn.type=bt,Xn.texture=Un)},unbindTexture:function(){var bt=_n[$t];void 0!==bt&&void 0!==bt.type&&(i.bindTexture(bt.type,null),bt.type=void 0,bt.texture=void 0)},compressedTexImage2D:function(){try{i.compressedTexImage2D.apply(i,arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}},texImage2D:function(){try{i.texImage2D.apply(i,arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}},texImage3D:function(){try{i.texImage3D.apply(i,arguments)}catch(bt){console.error("THREE.WebGLState:",bt)}},scissor:function(bt){!1===un.equals(bt)&&(i.scissor(bt.x,bt.y,bt.z,bt.w),un.copy(bt))},viewport:function(bt){!1===Pn.equals(bt)&&(i.viewport(bt.x,bt.y,bt.z,bt.w),Pn.copy(bt))},reset:function(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===o&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),E={},$t=null,_n={},T=null,I={},N=null,W=!1,U=null,H=null,te=null,ue=null,le=null,he=null,se=null,ye=!1,Ue=null,Ve=null,Fe=null,et=null,Ye=null,un.set(0,0,i.canvas.width,i.canvas.height),Pn.set(0,0,i.canvas.width,i.canvas.height),m.reset(),_.reset(),b.reset()}}}function Soe(i,s,n,r,a,o,u){var c,d,N,m=a.isWebGL2,_=a.maxTextures,b=a.maxCubemapSize,E=a.maxTextureSize,T=a.maxSamples,I=new WeakMap,W=!1;try{W="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Ke){}function U(Ke,Pe){return W?new OffscreenCanvas(Ke,Pe):YP("canvas")}function H(Ke,Pe,Xt,kn){var Dn=1;if((Ke.width>kn||Ke.height>kn)&&(Dn=kn/Math.max(Ke.width,Ke.height)),Dn<1||!0===Pe){if("undefined"!=typeof HTMLImageElement&&Ke instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&Ke instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&Ke instanceof ImageBitmap){var Hn=Pe?V4:Math.floor,cr=Hn(Dn*Ke.width),ir=Hn(Dn*Ke.height);void 0===N&&(N=U(cr,ir));var Zr=Xt?U(cr,ir):N;return Zr.width=cr,Zr.height=ir,Zr.getContext("2d").drawImage(Ke,0,0,cr,ir),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ke.width+"x"+Ke.height+") to ("+cr+"x"+ir+")."),Zr}return"data"in Ke&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ke.width+"x"+Ke.height+")."),Ke}return Ke}function te(Ke){return c3(Ke.width)&&c3(Ke.height)}function le(Ke,Pe){return Ke.generateMipmaps&&Pe&&Ke.minFilter!==Ao&&Ke.minFilter!==ec}function he(Ke,Pe,Xt,kn){var Dn=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;i.generateMipmap(Ke);var Hn=r.get(Pe);Hn.__maxMipLevel=Math.log2(Math.max(Xt,kn,Dn))}function se(Ke,Pe,Xt,kn){if(!1===m)return Pe;if(null!==Ke){if(void 0!==i[Ke])return i[Ke];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ke+"'")}var Dn=Pe;return 6403===Pe&&(5126===Xt&&(Dn=33326),5131===Xt&&(Dn=33325),5121===Xt&&(Dn=33321)),6407===Pe&&(5126===Xt&&(Dn=34837),5131===Xt&&(Dn=34843),5121===Xt&&(Dn=32849)),6408===Pe&&(5126===Xt&&(Dn=34836),5131===Xt&&(Dn=34842),5121===Xt&&(Dn=kn===g_?35907:32856)),(33325===Dn||33326===Dn||34842===Dn||34836===Dn)&&s.get("EXT_color_buffer_float"),Dn}function ye(Ke){return Ke===Ao||1004===Ke||1005===Ke?9728:9729}function Ue(Ke){var Pe=Ke.target;Pe.removeEventListener("dispose",Ue),function(Ke){var Pe=r.get(Ke);void 0!==Pe.__webglInit&&(i.deleteTexture(Pe.__webglTexture),r.remove(Ke))}(Pe),Pe.isVideoTexture&&I.delete(Pe),u.memory.textures--}function Ve(Ke){var Pe=Ke.target;Pe.removeEventListener("dispose",Ve),function(Ke){var Pe=Ke.texture,Xt=r.get(Ke),kn=r.get(Pe);if(Ke){if(void 0!==kn.__webglTexture&&(i.deleteTexture(kn.__webglTexture),u.memory.textures--),Ke.depthTexture&&Ke.depthTexture.dispose(),Ke.isWebGLCubeRenderTarget)for(var Dn=0;Dn<6;Dn++)i.deleteFramebuffer(Xt.__webglFramebuffer[Dn]),Xt.__webglDepthbuffer&&i.deleteRenderbuffer(Xt.__webglDepthbuffer[Dn]);else i.deleteFramebuffer(Xt.__webglFramebuffer),Xt.__webglDepthbuffer&&i.deleteRenderbuffer(Xt.__webglDepthbuffer),Xt.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Xt.__webglMultisampledFramebuffer),Xt.__webglColorRenderbuffer&&i.deleteRenderbuffer(Xt.__webglColorRenderbuffer),Xt.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Xt.__webglDepthRenderbuffer);if(Ke.isWebGLMultipleRenderTargets)for(var Hn=0,cr=Pe.length;Hn<cr;Hn++){var ir=r.get(Pe[Hn]);ir.__webglTexture&&(i.deleteTexture(ir.__webglTexture),u.memory.textures--),r.remove(Pe[Hn])}r.remove(Pe),r.remove(Ke)}}(Pe)}var Ye=0;function pt(Ke,Pe){var Xt=r.get(Ke);if(Ke.isVideoTexture&&function(Ke){var Pe=u.render.frame;I.get(Ke)!==Pe&&(I.set(Ke,Pe),Ke.update())}(Ke),Ke.version>0&&Xt.__version!==Ke.version){var kn=Ke.image;if(void 0===kn)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==kn.complete)return void Tr(Xt,Ke,Pe);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+Pe),n.bindTexture(3553,Xt.__webglTexture)}function _n(Ke,Pe){var Xt=r.get(Ke);Ke.version>0&&Xt.__version!==Ke.version?function(Ke,Pe,Xt){if(6===Pe.image.length){Pn(Ke,Pe),n.activeTexture(33984+Xt),n.bindTexture(34067,Ke.__webglTexture),i.pixelStorei(37440,Pe.flipY),i.pixelStorei(37441,Pe.premultiplyAlpha),i.pixelStorei(3317,Pe.unpackAlignment),i.pixelStorei(37443,0);for(var kn=Pe&&(Pe.isCompressedTexture||Pe.image[0].isCompressedTexture),Dn=Pe.image[0]&&Pe.image[0].isDataTexture,Hn=[],cr=0;cr<6;cr++)Hn[cr]=kn||Dn?Dn?Pe.image[cr].image:Pe.image[cr]:H(Pe.image[cr],!1,!0,b);var Un,ir=Hn[0],Zr=te(ir)||m,Xr=o.convert(Pe.format),Ii=o.convert(Pe.type),bt=se(Pe.internalFormat,Xr,Ii,Pe.encoding);if(un(34067,Pe,Zr),kn){for(var Xn=0;Xn<6;Xn++){Un=Hn[Xn].mipmaps;for(var Ur=0;Ur<Un.length;Ur++){var Sr=Un[Ur];Pe.format!==Xu&&Pe.format!==Yw?null!==Xr?n.compressedTexImage2D(34069+Xn,Ur,bt,Sr.width,Sr.height,0,Sr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+Xn,Ur,bt,Sr.width,Sr.height,0,Xr,Ii,Sr.data)}}Ke.__maxMipLevel=Un.length-1}else{Un=Pe.mipmaps;for(var Bn=0;Bn<6;Bn++)if(Dn){n.texImage2D(34069+Bn,0,bt,Hn[Bn].width,Hn[Bn].height,0,Xr,Ii,Hn[Bn].data);for(var dt=0;dt<Un.length;dt++){var fi=Un[dt].image[Bn].image;n.texImage2D(34069+Bn,dt+1,bt,fi.width,fi.height,0,Xr,Ii,fi.data)}}else{n.texImage2D(34069+Bn,0,bt,Xr,Ii,Hn[Bn]);for(var ri=0;ri<Un.length;ri++)n.texImage2D(34069+Bn,ri+1,bt,Xr,Ii,Un[ri].image[Bn])}Ke.__maxMipLevel=Un.length}le(Pe,Zr)&&he(34067,Pe,ir.width,ir.height),Ke.__version=Pe.version,Pe.onUpdate&&Pe.onUpdate(Pe)}}(Xt,Ke,Pe):(n.activeTexture(33984+Pe),n.bindTexture(34067,Xt.__webglTexture))}var fn=((0,ti.Z)(c={},1e3,10497),(0,ti.Z)(c,yl,33071),(0,ti.Z)(c,1002,33648),c),tn=((0,ti.Z)(d={},Ao,9728),(0,ti.Z)(d,1004,9984),(0,ti.Z)(d,1005,9986),(0,ti.Z)(d,ec,9729),(0,ti.Z)(d,1007,9985),(0,ti.Z)(d,vA,9987),d);function un(Ke,Pe,Xt){if(Xt?(i.texParameteri(Ke,10242,fn[Pe.wrapS]),i.texParameteri(Ke,10243,fn[Pe.wrapT]),(32879===Ke||35866===Ke)&&i.texParameteri(Ke,32882,fn[Pe.wrapR]),i.texParameteri(Ke,10240,tn[Pe.magFilter]),i.texParameteri(Ke,10241,tn[Pe.minFilter])):(i.texParameteri(Ke,10242,33071),i.texParameteri(Ke,10243,33071),(32879===Ke||35866===Ke)&&i.texParameteri(Ke,32882,33071),(Pe.wrapS!==yl||Pe.wrapT!==yl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(Ke,10240,ye(Pe.magFilter)),i.texParameteri(Ke,10241,ye(Pe.minFilter)),Pe.minFilter!==Ao&&Pe.minFilter!==ec&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===s.has("EXT_texture_filter_anisotropic")){var kn=s.get("EXT_texture_filter_anisotropic");if(Pe.type===Am&&!1===s.has("OES_texture_float_linear")||!1===m&&Pe.type===qw&&!1===s.has("OES_texture_half_float_linear"))return;(Pe.anisotropy>1||r.get(Pe).__currentAnisotropy)&&(i.texParameterf(Ke,kn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Pe.anisotropy,a.getMaxAnisotropy())),r.get(Pe).__currentAnisotropy=Pe.anisotropy)}}function Pn(Ke,Pe){void 0===Ke.__webglInit&&(Ke.__webglInit=!0,Pe.addEventListener("dispose",Ue),Ke.__webglTexture=i.createTexture(),u.memory.textures++)}function Tr(Ke,Pe,Xt){var kn=3553;Pe.isDataTexture2DArray&&(kn=35866),Pe.isDataTexture3D&&(kn=32879),Pn(Ke,Pe),n.activeTexture(33984+Xt),n.bindTexture(kn,Ke.__webglTexture),i.pixelStorei(37440,Pe.flipY),i.pixelStorei(37441,Pe.premultiplyAlpha),i.pixelStorei(3317,Pe.unpackAlignment),i.pixelStorei(37443,0);var Dn=function(Ke){return!m&&(Ke.wrapS!==yl||Ke.wrapT!==yl||Ke.minFilter!==Ao&&Ke.minFilter!==ec)}(Pe)&&!1===te(Pe.image),Hn=H(Pe.image,Dn,!1,E),cr=te(Hn)||m,ir=o.convert(Pe.format),Zr=o.convert(Pe.type),Xr=se(Pe.internalFormat,ir,Zr,Pe.encoding);un(kn,Pe,cr);var Ii,bt=Pe.mipmaps;if(Pe.isDepthTexture)Xr=6402,m?Xr=Pe.type===Am?36012:1014===Pe.type?33190:Pe.type===pA?35056:33189:Pe.type===Am&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Pe.format===Kw&&6402===Xr&&1012!==Pe.type&&1014!==Pe.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Pe.type=1012,Zr=o.convert(Pe.type)),Pe.format===mA&&6402===Xr&&(Xr=34041,Pe.type!==pA&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Pe.type=pA,Zr=o.convert(Pe.type))),n.texImage2D(3553,0,Xr,Hn.width,Hn.height,0,ir,Zr,null);else if(Pe.isDataTexture)if(bt.length>0&&cr){for(var Un=0,Xn=bt.length;Un<Xn;Un++)n.texImage2D(3553,Un,Xr,(Ii=bt[Un]).width,Ii.height,0,ir,Zr,Ii.data);Pe.generateMipmaps=!1,Ke.__maxMipLevel=bt.length-1}else n.texImage2D(3553,0,Xr,Hn.width,Hn.height,0,ir,Zr,Hn.data),Ke.__maxMipLevel=0;else if(Pe.isCompressedTexture){for(var Ur=0,Sr=bt.length;Ur<Sr;Ur++)Ii=bt[Ur],Pe.format!==Xu&&Pe.format!==Yw?null!==ir?n.compressedTexImage2D(3553,Ur,Xr,Ii.width,Ii.height,0,Ii.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,Ur,Xr,Ii.width,Ii.height,0,ir,Zr,Ii.data);Ke.__maxMipLevel=bt.length-1}else if(Pe.isDataTexture2DArray)n.texImage3D(35866,0,Xr,Hn.width,Hn.height,Hn.depth,0,ir,Zr,Hn.data),Ke.__maxMipLevel=0;else if(Pe.isDataTexture3D)n.texImage3D(32879,0,Xr,Hn.width,Hn.height,Hn.depth,0,ir,Zr,Hn.data),Ke.__maxMipLevel=0;else if(bt.length>0&&cr){for(var Bn=0,dt=bt.length;Bn<dt;Bn++)n.texImage2D(3553,Bn,Xr,ir,Zr,Ii=bt[Bn]);Pe.generateMipmaps=!1,Ke.__maxMipLevel=bt.length-1}else n.texImage2D(3553,0,Xr,ir,Zr,Hn),Ke.__maxMipLevel=0;le(Pe,cr)&&he(kn,Pe,Hn.width,Hn.height),Ke.__version=Pe.version,Pe.onUpdate&&Pe.onUpdate(Pe)}function Je(Ke,Pe,Xt,kn,Dn){var Hn=o.convert(Xt.format),cr=o.convert(Xt.type),ir=se(Xt.internalFormat,Hn,cr,Xt.encoding);32879===Dn||35866===Dn?n.texImage3D(Dn,0,ir,Pe.width,Pe.height,Pe.depth,0,Hn,cr,null):n.texImage2D(Dn,0,ir,Pe.width,Pe.height,0,Hn,cr,null),n.bindFramebuffer(36160,Ke),i.framebufferTexture2D(36160,kn,Dn,r.get(Xt).__webglTexture,0),n.bindFramebuffer(36160,null)}function on(Ke,Pe,Xt){if(i.bindRenderbuffer(36161,Ke),Pe.depthBuffer&&!Pe.stencilBuffer){var kn=33189;if(Xt){var Dn=Pe.depthTexture;Dn&&Dn.isDepthTexture&&(Dn.type===Am?kn=36012:1014===Dn.type&&(kn=33190));var Hn=Ht(Pe);i.renderbufferStorageMultisample(36161,Hn,kn,Pe.width,Pe.height)}else i.renderbufferStorage(36161,kn,Pe.width,Pe.height);i.framebufferRenderbuffer(36160,36096,36161,Ke)}else if(Pe.depthBuffer&&Pe.stencilBuffer){if(Xt){var cr=Ht(Pe);i.renderbufferStorageMultisample(36161,cr,35056,Pe.width,Pe.height)}else i.renderbufferStorage(36161,34041,Pe.width,Pe.height);i.framebufferRenderbuffer(36160,33306,36161,Ke)}else{var ir=!0===Pe.isWebGLMultipleRenderTargets?Pe.texture[0]:Pe.texture,Zr=o.convert(ir.format),Xr=o.convert(ir.type),Ii=se(ir.internalFormat,Zr,Xr,ir.encoding);if(Xt){var bt=Ht(Pe);i.renderbufferStorageMultisample(36161,bt,Ii,Pe.width,Pe.height)}else i.renderbufferStorage(36161,Ii,Pe.width,Pe.height)}i.bindRenderbuffer(36161,null)}function Ht(Ke){return m&&Ke.isWebGLMultisampleRenderTarget?Math.min(T,Ke.samples):0}var hn=!1,gr=!1;this.allocateTextureUnit=function(){var Ke=Ye;return Ke>=_&&console.warn("THREE.WebGLTextures: Trying to use "+Ke+" texture units while this GPU supports only "+_),Ye+=1,Ke},this.resetTextureUnits=function(){Ye=0},this.setTexture2D=pt,this.setTexture2DArray=function(Ke,Pe){var Xt=r.get(Ke);Ke.version>0&&Xt.__version!==Ke.version?Tr(Xt,Ke,Pe):(n.activeTexture(33984+Pe),n.bindTexture(35866,Xt.__webglTexture))},this.setTexture3D=function(Ke,Pe){var Xt=r.get(Ke);Ke.version>0&&Xt.__version!==Ke.version?Tr(Xt,Ke,Pe):(n.activeTexture(33984+Pe),n.bindTexture(32879,Xt.__webglTexture))},this.setTextureCube=_n,this.setupRenderTarget=function(Ke){var Pe=Ke.texture,Xt=r.get(Ke),kn=r.get(Pe);Ke.addEventListener("dispose",Ve),!0!==Ke.isWebGLMultipleRenderTargets&&(kn.__webglTexture=i.createTexture(),kn.__version=Pe.version,u.memory.textures++);var Dn=!0===Ke.isWebGLCubeRenderTarget,Hn=!0===Ke.isWebGLMultipleRenderTargets,cr=!0===Ke.isWebGLMultisampleRenderTarget,ir=Pe.isDataTexture3D||Pe.isDataTexture2DArray,Zr=te(Ke)||m;if(m&&Pe.format===Yw&&(Pe.type===Am||Pe.type===qw)&&(Pe.format=Xu,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Dn){Xt.__webglFramebuffer=[];for(var Xr=0;Xr<6;Xr++)Xt.__webglFramebuffer[Xr]=i.createFramebuffer()}else if(Xt.__webglFramebuffer=i.createFramebuffer(),Hn)if(a.drawBuffers)for(var Ii=Ke.texture,bt=0,Un=Ii.length;bt<Un;bt++){var Xn=r.get(Ii[bt]);void 0===Xn.__webglTexture&&(Xn.__webglTexture=i.createTexture(),u.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(cr)if(m){Xt.__webglMultisampledFramebuffer=i.createFramebuffer(),Xt.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,Xt.__webglColorRenderbuffer);var Ur=o.convert(Pe.format),Sr=o.convert(Pe.type),Bn=se(Pe.internalFormat,Ur,Sr,Pe.encoding),dt=Ht(Ke);i.renderbufferStorageMultisample(36161,dt,Bn,Ke.width,Ke.height),n.bindFramebuffer(36160,Xt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,Xt.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),Ke.depthBuffer&&(Xt.__webglDepthRenderbuffer=i.createRenderbuffer(),on(Xt.__webglDepthRenderbuffer,Ke,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Dn){n.bindTexture(34067,kn.__webglTexture),un(34067,Pe,Zr);for(var Vn=0;Vn<6;Vn++)Je(Xt.__webglFramebuffer[Vn],Ke,Pe,36064,34069+Vn);le(Pe,Zr)&&he(34067,Pe,Ke.width,Ke.height),n.unbindTexture()}else if(Hn){for(var fi=Ke.texture,ri=0,qr=fi.length;ri<qr;ri++){var ga=fi[ri],Cs=r.get(ga);n.bindTexture(3553,Cs.__webglTexture),un(3553,ga,Zr),Je(Xt.__webglFramebuffer,Ke,ga,36064+ri,3553),le(ga,Zr)&&he(3553,ga,Ke.width,Ke.height)}n.unbindTexture()}else{var pu=3553;ir&&(m?pu=Pe.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(pu,kn.__webglTexture),un(pu,Pe,Zr),Je(Xt.__webglFramebuffer,Ke,Pe,36064,pu),le(Pe,Zr)&&he(pu,Pe,Ke.width,Ke.height,Ke.depth),n.unbindTexture()}Ke.depthBuffer&&function(Ke){var Pe=r.get(Ke),Xt=!0===Ke.isWebGLCubeRenderTarget;if(Ke.depthTexture){if(Xt)throw new Error("target.depthTexture not supported in Cube render targets");!function(Ke,Pe){if(Pe&&Pe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,Ke),!Pe.depthTexture||!Pe.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Pe.depthTexture).__webglTexture||Pe.depthTexture.image.width!==Pe.width||Pe.depthTexture.image.height!==Pe.height)&&(Pe.depthTexture.image.width=Pe.width,Pe.depthTexture.image.height=Pe.height,Pe.depthTexture.needsUpdate=!0),pt(Pe.depthTexture,0);var kn=r.get(Pe.depthTexture).__webglTexture;if(Pe.depthTexture.format===Kw)i.framebufferTexture2D(36160,36096,3553,kn,0);else{if(Pe.depthTexture.format!==mA)throw new Error("Unknown depthTexture format");i.framebufferTexture2D(36160,33306,3553,kn,0)}}(Pe.__webglFramebuffer,Ke)}else if(Xt){Pe.__webglDepthbuffer=[];for(var kn=0;kn<6;kn++)n.bindFramebuffer(36160,Pe.__webglFramebuffer[kn]),Pe.__webglDepthbuffer[kn]=i.createRenderbuffer(),on(Pe.__webglDepthbuffer[kn],Ke,!1)}else n.bindFramebuffer(36160,Pe.__webglFramebuffer),Pe.__webglDepthbuffer=i.createRenderbuffer(),on(Pe.__webglDepthbuffer,Ke,!1);n.bindFramebuffer(36160,null)}(Ke)},this.updateRenderTargetMipmap=function(Ke){for(var Pe=te(Ke)||m,Xt=!0===Ke.isWebGLMultipleRenderTargets?Ke.texture:[Ke.texture],kn=0,Dn=Xt.length;kn<Dn;kn++){var Hn=Xt[kn];if(le(Hn,Pe)){var cr=Ke.isWebGLCubeRenderTarget?34067:3553,ir=r.get(Hn).__webglTexture;n.bindTexture(cr,ir),he(cr,Hn,Ke.width,Ke.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(Ke){if(Ke.isWebGLMultisampleRenderTarget)if(m){var Pe=Ke.width,Xt=Ke.height,kn=16384;Ke.depthBuffer&&(kn|=256),Ke.stencilBuffer&&(kn|=1024);var Dn=r.get(Ke);n.bindFramebuffer(36008,Dn.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Dn.__webglFramebuffer),i.blitFramebuffer(0,0,Pe,Xt,0,0,Pe,Xt,kn,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,Dn.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(Ke,Pe){Ke&&Ke.isWebGLRenderTarget&&(!1===hn&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),hn=!0),Ke=Ke.texture),pt(Ke,Pe)},this.safeSetTextureCube=function(Ke,Pe){Ke&&Ke.isWebGLCubeRenderTarget&&(!1===gr&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),gr=!0),Ke=Ke.texture),_n(Ke,Pe)}}function Toe(i,s,n){var r=n.isWebGL2;return{convert:function(o){var u;if(o===Mm)return 5121;if(1017===o)return 32819;if(1018===o)return 32820;if(1019===o)return 33635;if(1010===o)return 5120;if(1011===o)return 5122;if(1012===o)return 5123;if(1013===o)return 5124;if(1014===o)return 5125;if(o===Am)return 5126;if(o===qw)return r?5131:null!==(u=s.get("OES_texture_half_float"))?u.HALF_FLOAT_OES:null;if(1021===o)return 6406;if(o===Yw)return 6407;if(o===Xu)return 6408;if(1024===o)return 6409;if(1025===o)return 6410;if(o===Kw)return 6402;if(o===mA)return 34041;if(1028===o)return 6403;if(1029===o)return 36244;if(1030===o)return 33319;if(1031===o)return 33320;if(1032===o)return 36248;if(1033===o)return 36249;if(33776===o||33777===o||33778===o||33779===o){if(null===(u=s.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===o)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(null===(u=s.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===o)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return null!==(u=s.get("WEBGL_compressed_texture_etc1"))?u.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===o||37496===o)&&null!==(u=s.get("WEBGL_compressed_texture_etc"))){if(37492===o)return u.COMPRESSED_RGB8_ETC2;if(37496===o)return u.COMPRESSED_RGBA8_ETC2_EAC}return 37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o||37840===o||37841===o||37842===o||37843===o||37844===o||37845===o||37846===o||37847===o||37848===o||37849===o||37850===o||37851===o||37852===o||37853===o?null!==(u=s.get("WEBGL_compressed_texture_astc"))?o:null:36492===o?null!==(u=s.get("EXT_texture_compression_bptc"))?o:null:o===pA?r?34042:null!==(u=s.get("WEBGL_depth_texture"))?u.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}K3.prototype.isMeshDistanceMaterial=!0;var N6=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,M.Z)(this,n),(r=s.call(this)).cameras=a,r}return n}(Qu);N6.prototype.isArrayCamera=!0;var xA=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Group",r}return n}(Na);xA.prototype.isGroup=!0;var Moe={type:"move"},$3=function(){function i(){(0,M.Z)(this,i),this._targetRay=null,this._grip=null,this._hand=null}return(0,D.Z)(i,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new xA,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new xA,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new xe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new xe),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new xA,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new xe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new xe),this._grip}},{key:"dispatchEvent",value:function(n){return null!==this._targetRay&&this._targetRay.dispatchEvent(n),null!==this._grip&&this._grip.dispatchEvent(n),null!==this._hand&&this._hand.dispatchEvent(n),this}},{key:"disconnect",value:function(n){return this.dispatchEvent({type:"disconnected",data:n}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(n,r,a){var o=null,u=null,c=null,d=this._targetRay,m=this._grip,_=this._hand;if(n&&"visible-blurred"!==r.session.visibilityState)if(null!==d&&null!==(o=r.getPose(n.targetRaySpace,a))&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(Moe)),_&&n.hand){c=!0;var E,b=(0,Re.Z)(n.hand.values());try{for(b.s();!(E=b.n()).done;){var T=E.value,I=r.getJointPose(T,a);if(void 0===_.joints[T.jointName]){var N=new xA;N.matrixAutoUpdate=!1,N.visible=!1,_.joints[T.jointName]=N,_.add(N)}var W=_.joints[T.jointName];null!==I&&(W.matrix.fromArray(I.transform.matrix),W.matrix.decompose(W.position,W.rotation,W.scale),W.jointRadius=I.radius),W.visible=null!==I}}catch(he){b.e(he)}finally{b.f()}var te=_.joints["index-finger-tip"].position.distanceTo(_.joints["thumb-tip"].position);_.inputState.pinching&&te>.025?(_.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!_.inputState.pinching&&te<=.015&&(_.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else null!==m&&n.gripSpace&&null!==(u=r.getPose(n.gripSpace,a))&&(m.matrix.fromArray(u.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),u.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(u.linearVelocity)):m.hasLinearVelocity=!1,u.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(u.angularVelocity)):m.hasAngularVelocity=!1);return null!==d&&(d.visible=null!==o),null!==m&&(m.visible=null!==u),null!==_&&(_.visible=null!==c),this}}]),i}(),Aoe=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;(0,M.Z)(this,n),o=s.call(this);var u=(0,wa.Z)(o),c=r.state,d=null,m=1,_=null,b="local-floor",E=null,T=null,I=null,N=null,W=null,U=!1,H=null,te=null,ue=null,le=null,he=null,se=null,ye=[],Ue=new Map,Ve=new Qu;Ve.layers.enable(1),Ve.viewport=new La;var Fe=new Qu;Fe.layers.enable(2),Fe.viewport=new La;var et=[Ve,Fe],Ye=new N6;Ye.layers.enable(1),Ye.layers.enable(2);var tt=null,wt=null;function pt(Je){var on=Ue.get(Je.inputSource);on&&on.dispatchEvent({type:Je.type,data:Je.inputSource})}function Mt(){Ue.forEach(function(Je,on){Je.disconnect(on)}),Ue.clear(),tt=null,wt=null,c.bindXRFramebuffer(null),r.setRenderTarget(r.getRenderTarget()),I&&a.deleteFramebuffer(I),H&&a.deleteFramebuffer(H),te&&a.deleteRenderbuffer(te),ue&&a.deleteRenderbuffer(ue),I=null,H=null,te=null,ue=null,W=null,N=null,T=null,d=null,nr.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}function $t(Je){for(var on=d.inputSources,Nn=0;Nn<ye.length;Nn++)Ue.set(on[Nn],ye[Nn]);for(var sn=0;sn<Je.removed.length;sn++){var In=Je.removed[sn],Mn=Ue.get(In);Mn&&(Mn.dispatchEvent({type:"disconnected",data:In}),Ue.delete(In))}for(var Cn=0;Cn<Je.added.length;Cn++){var Ht=Je.added[Cn],an=Ue.get(Ht);an&&an.dispatchEvent({type:"connected",data:Ht})}}o.cameraAutoUpdate=!0,o.enabled=!1,o.isPresenting=!1,o.getController=function(Je){var on=ye[Je];return void 0===on&&(on=new $3,ye[Je]=on),on.getTargetRaySpace()},o.getControllerGrip=function(Je){var on=ye[Je];return void 0===on&&(on=new $3,ye[Je]=on),on.getGripSpace()},o.getHand=function(Je){var on=ye[Je];return void 0===on&&(on=new $3,ye[Je]=on),on.getHandSpace()},o.setFramebufferScaleFactor=function(Je){m=Je,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},o.setReferenceSpaceType=function(Je){b=Je,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},o.getReferenceSpace=function(){return _},o.getBaseLayer=function(){return null!==N?N:W},o.getBinding=function(){return T},o.getFrame=function(){return le},o.getSession=function(){return d},o.setSession=function(){var Je=(0,Ut.Z)(Ze().mark(function on(Nn){var sn,Cn,Ht;return Ze().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:if(null===(d=Nn)){hn.next=22;break}if(d.addEventListener("select",pt),d.addEventListener("selectstart",pt),d.addEventListener("selectend",pt),d.addEventListener("squeeze",pt),d.addEventListener("squeezestart",pt),d.addEventListener("squeezeend",pt),d.addEventListener("end",Mt),d.addEventListener("inputsourceschange",$t),!0===(sn=a.getContextAttributes()).xrCompatible){hn.next=14;break}return hn.next=14,a.makeXRCompatible();case 14:return void 0===d.renderState.layers?(W=new XRWebGLLayer(d,a,{antialias:sn.antialias,alpha:sn.alpha,depth:sn.depth,stencil:sn.stencil,framebufferScaleFactor:m}),d.updateRenderState({baseLayer:W})):a instanceof WebGLRenderingContext?(W=new XRWebGLLayer(d,a,{antialias:!0,alpha:sn.alpha,depth:sn.depth,stencil:sn.stencil,framebufferScaleFactor:m}),d.updateRenderState({layers:[W]})):(U=sn.antialias,Cn=null,sn.depth&&(se=256,sn.stencil&&(se|=1024),he=sn.stencil?33306:36096,Cn=sn.stencil?35056:33190),Ht={colorFormat:sn.alpha?32856:32849,depthFormat:Cn,scaleFactor:m},T=new XRWebGLBinding(d,a),N=T.createProjectionLayer(Ht),I=a.createFramebuffer(),d.updateRenderState({layers:[N]}),U&&(H=a.createFramebuffer(),te=a.createRenderbuffer(),a.bindRenderbuffer(36161,te),a.renderbufferStorageMultisample(36161,4,32856,N.textureWidth,N.textureHeight),c.bindFramebuffer(36160,H),a.framebufferRenderbuffer(36160,36064,36161,te),a.bindRenderbuffer(36161,null),null!==Cn&&(ue=a.createRenderbuffer(),a.bindRenderbuffer(36161,ue),a.renderbufferStorageMultisample(36161,4,Cn,N.textureWidth,N.textureHeight),a.framebufferRenderbuffer(36160,he,36161,ue),a.bindRenderbuffer(36161,null)),c.bindFramebuffer(36160,null))),hn.next=17,d.requestReferenceSpace(b);case 17:_=hn.sent,nr.setContext(d),nr.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"});case 22:case"end":return hn.stop()}},on)}));return function(on){return Je.apply(this,arguments)}}();var _n=new xe,fn=new xe;function un(Je,on){null===on?Je.matrixWorld.copy(Je.matrix):Je.matrixWorld.multiplyMatrices(on.matrixWorld,Je.matrix),Je.matrixWorldInverse.copy(Je.matrixWorld).invert()}o.updateCamera=function(Je){if(null!==d){Ye.near=Fe.near=Ve.near=Je.near,Ye.far=Fe.far=Ve.far=Je.far,(tt!==Ye.near||wt!==Ye.far)&&(d.updateRenderState({depthNear:Ye.near,depthFar:Ye.far}),tt=Ye.near,wt=Ye.far);var on=Je.parent,Nn=Ye.cameras;un(Ye,on);for(var sn=0;sn<Nn.length;sn++)un(Nn[sn],on);Ye.matrixWorld.decompose(Ye.position,Ye.quaternion,Ye.scale),Je.position.copy(Ye.position),Je.quaternion.copy(Ye.quaternion),Je.scale.copy(Ye.scale),Je.matrix.copy(Ye.matrix),Je.matrixWorld.copy(Ye.matrixWorld);for(var In=Je.children,Mn=0,Cn=In.length;Mn<Cn;Mn++)In[Mn].updateMatrixWorld(!0);2===Nn.length?function(Je,on,Nn){_n.setFromMatrixPosition(on.matrixWorld),fn.setFromMatrixPosition(Nn.matrixWorld);var sn=_n.distanceTo(fn),In=on.projectionMatrix.elements,Mn=Nn.projectionMatrix.elements,Cn=In[14]/(In[10]-1),Ht=In[14]/(In[10]+1),an=(In[9]+1)/In[5],hn=(In[9]-1)/In[5],gr=(In[8]-1)/In[0],ni=(Mn[8]+1)/Mn[0],Vi=Cn*gr,Ke=Cn*ni,Pe=sn/(-gr+ni),Xt=Pe*-gr;on.matrixWorld.decompose(Je.position,Je.quaternion,Je.scale),Je.translateX(Xt),Je.translateZ(Pe),Je.matrixWorld.compose(Je.position,Je.quaternion,Je.scale),Je.matrixWorldInverse.copy(Je.matrixWorld).invert();var kn=Cn+Pe,Dn=Ht+Pe;Je.projectionMatrix.makePerspective(Vi-Xt,Ke+(sn-Xt),an*Ht/Dn*kn,hn*Ht/Dn*kn,kn,Dn)}(Ye,Ve,Fe):Ye.projectionMatrix.copy(Ve.projectionMatrix)}},o.getCamera=function(){return Ye},o.getFoveation=function(){return null!==N?N.fixedFoveation:null!==W?W.fixedFoveation:void 0},o.setFoveation=function(Je){null!==N&&(N.fixedFoveation=Je),null!==W&&void 0!==W.fixedFoveation&&(W.fixedFoveation=Je)};var Pn=null,nr=new n6;return nr.setAnimationLoop(function(Je,on){if(E=on.getViewerPose(_),le=on,null!==E){var Nn=E.views;null!==W&&c.bindXRFramebuffer(W.framebuffer);var sn=!1;Nn.length!==Ye.cameras.length&&(Ye.cameras.length=0,sn=!0);for(var In=0;In<Nn.length;In++){var Mn=Nn[In],Cn=null;if(null!==W)Cn=W.getViewport(Mn);else{var Ht=T.getViewSubImage(N,Mn);c.bindXRFramebuffer(I),void 0!==Ht.depthStencilTexture&&a.framebufferTexture2D(36160,he,3553,Ht.depthStencilTexture,0),a.framebufferTexture2D(36160,36064,3553,Ht.colorTexture,0),Cn=Ht.viewport}var an=et[In];an.matrix.fromArray(Mn.transform.matrix),an.projectionMatrix.fromArray(Mn.projectionMatrix),an.viewport.set(Cn.x,Cn.y,Cn.width,Cn.height),0===In&&Ye.matrix.copy(an.matrix),!0===sn&&Ye.cameras.push(an)}U&&(c.bindXRFramebuffer(H),null!==se&&a.clear(se))}for(var hn=d.inputSources,gr=0;gr<ye.length;gr++)ye[gr].update(hn[gr],on,_);if(Pn&&Pn(Je,on),U){var Ke=N.textureWidth,Pe=N.textureHeight;c.bindFramebuffer(36008,H),c.bindFramebuffer(36009,I),a.invalidateFramebuffer(36008,[he]),a.invalidateFramebuffer(36009,[he]),a.blitFramebuffer(0,0,Ke,Pe,0,0,Ke,Pe,16384,9728),a.invalidateFramebuffer(36008,[36064]),c.bindFramebuffer(36008,null),c.bindFramebuffer(36009,null),c.bindFramebuffer(36160,H)}le=null}),o.setAnimationLoop=function(Je){Pn=Je},o.dispose=function(){},o}return n}(xm);function xoe(i){function r(U,H){U.opacity.value=H.opacity,H.color&&U.diffuse.value.copy(H.color),H.emissive&&U.emissive.value.copy(H.emissive).multiplyScalar(H.emissiveIntensity),H.map&&(U.map.value=H.map),H.alphaMap&&(U.alphaMap.value=H.alphaMap),H.specularMap&&(U.specularMap.value=H.specularMap),H.alphaTest>0&&(U.alphaTest.value=H.alphaTest);var le,he,te=i.get(H).envMap;if(te){U.envMap.value=te,U.flipEnvMap.value=te.isCubeTexture&&!1===te.isRenderTargetTexture?-1:1,U.reflectivity.value=H.reflectivity,U.ior.value=H.ior,U.refractionRatio.value=H.refractionRatio;var ue=i.get(te).__maxMipLevel;void 0!==ue&&(U.maxMipLevel.value=ue)}H.lightMap&&(U.lightMap.value=H.lightMap,U.lightMapIntensity.value=H.lightMapIntensity),H.aoMap&&(U.aoMap.value=H.aoMap,U.aoMapIntensity.value=H.aoMapIntensity),H.map?le=H.map:H.specularMap?le=H.specularMap:H.displacementMap?le=H.displacementMap:H.normalMap?le=H.normalMap:H.bumpMap?le=H.bumpMap:H.roughnessMap?le=H.roughnessMap:H.metalnessMap?le=H.metalnessMap:H.alphaMap?le=H.alphaMap:H.emissiveMap?le=H.emissiveMap:H.clearcoatMap?le=H.clearcoatMap:H.clearcoatNormalMap?le=H.clearcoatNormalMap:H.clearcoatRoughnessMap?le=H.clearcoatRoughnessMap:H.specularIntensityMap?le=H.specularIntensityMap:H.specularTintMap?le=H.specularTintMap:H.transmissionMap?le=H.transmissionMap:H.thicknessMap&&(le=H.thicknessMap),void 0!==le&&(le.isWebGLRenderTarget&&(le=le.texture),!0===le.matrixAutoUpdate&&le.updateMatrix(),U.uvTransform.value.copy(le.matrix)),H.aoMap?he=H.aoMap:H.lightMap&&(he=H.lightMap),void 0!==he&&(he.isWebGLRenderTarget&&(he=he.texture),!0===he.matrixAutoUpdate&&he.updateMatrix(),U.uv2Transform.value.copy(he.matrix))}function b(U,H){U.roughness.value=H.roughness,U.metalness.value=H.metalness,H.roughnessMap&&(U.roughnessMap.value=H.roughnessMap),H.metalnessMap&&(U.metalnessMap.value=H.metalnessMap),H.emissiveMap&&(U.emissiveMap.value=H.emissiveMap),H.bumpMap&&(U.bumpMap.value=H.bumpMap,U.bumpScale.value=H.bumpScale,1===H.side&&(U.bumpScale.value*=-1)),H.normalMap&&(U.normalMap.value=H.normalMap,U.normalScale.value.copy(H.normalScale),1===H.side&&U.normalScale.value.negate()),H.displacementMap&&(U.displacementMap.value=H.displacementMap,U.displacementScale.value=H.displacementScale,U.displacementBias.value=H.displacementBias),i.get(H).envMap&&(U.envMapIntensity.value=H.envMapIntensity)}return{refreshFogUniforms:function(U,H){U.fogColor.value.copy(H.color),H.isFog?(U.fogNear.value=H.near,U.fogFar.value=H.far):H.isFogExp2&&(U.fogDensity.value=H.density)},refreshMaterialUniforms:function(U,H,te,ue,le){H.isMeshBasicMaterial?r(U,H):H.isMeshLambertMaterial?(r(U,H),function(U,H){H.emissiveMap&&(U.emissiveMap.value=H.emissiveMap)}(U,H)):H.isMeshToonMaterial?(r(U,H),function(U,H){H.gradientMap&&(U.gradientMap.value=H.gradientMap),H.emissiveMap&&(U.emissiveMap.value=H.emissiveMap),H.bumpMap&&(U.bumpMap.value=H.bumpMap,U.bumpScale.value=H.bumpScale,1===H.side&&(U.bumpScale.value*=-1)),H.normalMap&&(U.normalMap.value=H.normalMap,U.normalScale.value.copy(H.normalScale),1===H.side&&U.normalScale.value.negate()),H.displacementMap&&(U.displacementMap.value=H.displacementMap,U.displacementScale.value=H.displacementScale,U.displacementBias.value=H.displacementBias)}(U,H)):H.isMeshPhongMaterial?(r(U,H),function(U,H){U.specular.value.copy(H.specular),U.shininess.value=Math.max(H.shininess,1e-4),H.emissiveMap&&(U.emissiveMap.value=H.emissiveMap),H.bumpMap&&(U.bumpMap.value=H.bumpMap,U.bumpScale.value=H.bumpScale,1===H.side&&(U.bumpScale.value*=-1)),H.normalMap&&(U.normalMap.value=H.normalMap,U.normalScale.value.copy(H.normalScale),1===H.side&&U.normalScale.value.negate()),H.displacementMap&&(U.displacementMap.value=H.displacementMap,U.displacementScale.value=H.displacementScale,U.displacementBias.value=H.displacementBias)}(U,H)):H.isMeshStandardMaterial?(r(U,H),H.isMeshPhysicalMaterial?function(U,H,te){b(U,H),U.ior.value=H.ior,H.sheen>0&&(U.sheenTint.value.copy(H.sheenTint).multiplyScalar(H.sheen),U.sheenRoughness.value=H.sheenRoughness),H.clearcoat>0&&(U.clearcoat.value=H.clearcoat,U.clearcoatRoughness.value=H.clearcoatRoughness,H.clearcoatMap&&(U.clearcoatMap.value=H.clearcoatMap),H.clearcoatRoughnessMap&&(U.clearcoatRoughnessMap.value=H.clearcoatRoughnessMap),H.clearcoatNormalMap&&(U.clearcoatNormalScale.value.copy(H.clearcoatNormalScale),U.clearcoatNormalMap.value=H.clearcoatNormalMap,1===H.side&&U.clearcoatNormalScale.value.negate())),H.transmission>0&&(U.transmission.value=H.transmission,U.transmissionSamplerMap.value=te.texture,U.transmissionSamplerSize.value.set(te.width,te.height),H.transmissionMap&&(U.transmissionMap.value=H.transmissionMap),U.thickness.value=H.thickness,H.thicknessMap&&(U.thicknessMap.value=H.thicknessMap),U.attenuationDistance.value=H.attenuationDistance,U.attenuationTint.value.copy(H.attenuationTint)),U.specularIntensity.value=H.specularIntensity,U.specularTint.value.copy(H.specularTint),H.specularIntensityMap&&(U.specularIntensityMap.value=H.specularIntensityMap),H.specularTintMap&&(U.specularTintMap.value=H.specularTintMap)}(U,H,le):b(U,H)):H.isMeshMatcapMaterial?(r(U,H),function(U,H){H.matcap&&(U.matcap.value=H.matcap),H.bumpMap&&(U.bumpMap.value=H.bumpMap,U.bumpScale.value=H.bumpScale,1===H.side&&(U.bumpScale.value*=-1)),H.normalMap&&(U.normalMap.value=H.normalMap,U.normalScale.value.copy(H.normalScale),1===H.side&&U.normalScale.value.negate()),H.displacementMap&&(U.displacementMap.value=H.displacementMap,U.displacementScale.value=H.displacementScale,U.displacementBias.value=H.displacementBias)}(U,H)):H.isMeshDepthMaterial?(r(U,H),function(U,H){H.displacementMap&&(U.displacementMap.value=H.displacementMap,U.displacementScale.value=H.displacementScale,U.displacementBias.value=H.displacementBias)}(U,H)):H.isMeshDistanceMaterial?(r(U,H),function(U,H){H.displacementMap&&(U.displacementMap.value=H.displacementMap,U.displacementScale.value=H.displacementScale,U.displacementBias.value=H.displacementBias),U.referencePosition.value.copy(H.referencePosition),U.nearDistance.value=H.nearDistance,U.farDistance.value=H.farDistance}(U,H)):H.isMeshNormalMaterial?(r(U,H),function(U,H){H.bumpMap&&(U.bumpMap.value=H.bumpMap,U.bumpScale.value=H.bumpScale,1===H.side&&(U.bumpScale.value*=-1)),H.normalMap&&(U.normalMap.value=H.normalMap,U.normalScale.value.copy(H.normalScale),1===H.side&&U.normalScale.value.negate()),H.displacementMap&&(U.displacementMap.value=H.displacementMap,U.displacementScale.value=H.displacementScale,U.displacementBias.value=H.displacementBias)}(U,H)):H.isLineBasicMaterial?(function(U,H){U.diffuse.value.copy(H.color),U.opacity.value=H.opacity}(U,H),H.isLineDashedMaterial&&function(U,H){U.dashSize.value=H.dashSize,U.totalSize.value=H.dashSize+H.gapSize,U.scale.value=H.scale}(U,H)):H.isPointsMaterial?function(U,H,te,ue){var le;U.diffuse.value.copy(H.color),U.opacity.value=H.opacity,U.size.value=H.size*te,U.scale.value=.5*ue,H.map&&(U.map.value=H.map),H.alphaMap&&(U.alphaMap.value=H.alphaMap),H.alphaTest>0&&(U.alphaTest.value=H.alphaTest),H.map?le=H.map:H.alphaMap&&(le=H.alphaMap),void 0!==le&&(!0===le.matrixAutoUpdate&&le.updateMatrix(),U.uvTransform.value.copy(le.matrix))}(U,H,te,ue):H.isSpriteMaterial?function(U,H){var te;U.diffuse.value.copy(H.color),U.opacity.value=H.opacity,U.rotation.value=H.rotation,H.map&&(U.map.value=H.map),H.alphaMap&&(U.alphaMap.value=H.alphaMap),H.alphaTest>0&&(U.alphaTest.value=H.alphaTest),H.map?te=H.map:H.alphaMap&&(te=H.alphaMap),void 0!==te&&(!0===te.matrixAutoUpdate&&te.updateMatrix(),U.uvTransform.value.copy(te.matrix))}(U,H):H.isShadowMaterial?(U.color.value.copy(H.color),U.opacity.value=H.opacity):H.isShaderMaterial&&(H.uniformsNeedUpdate=!1)}}}function Ioe(){var i=YP("canvas");return i.style.display="block",i}function ka(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=void 0!==i.canvas?i.canvas:Ioe(),n=void 0!==i.context?i.context:null,r=void 0!==i.alpha&&i.alpha,a=void 0===i.depth||i.depth,o=void 0===i.stencil||i.stencil,u=void 0!==i.antialias&&i.antialias,c=void 0===i.premultipliedAlpha||i.premultipliedAlpha,d=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,m=void 0!==i.powerPreference?i.powerPreference:"default",_=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat,b=null,E=null,T=[],I=[];this.domElement=s,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Mu,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var N=this,W=!1,U=0,H=0,te=null,ue=-1,le=null,he=new La,se=new La,ye=null,Ue=s.width,Ve=s.height,Fe=1,et=null,Ye=null,tt=new La(0,0,Ue,Ve),wt=new La(0,0,Ue,Ve),pt=!1,Mt=[],$t=new mO,_n=!1,fn=!1,tn=null,un=new Cr,Pn=new xe,Tr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function nr(){return null===te?Fe:1}var In,Mn,Cn,Ht,an,hn,gr,ni,Vi,Ke,Pe,Xt,kn,Dn,Hn,cr,ir,Zr,Xr,Ii,bt,Un,Xn,Je=n;function on(De,At){for(var Pt=0;Pt<De.length;Pt++){var Qt=s.getContext(De[Pt],At);if(null!==Qt)return Qt}return null}try{var Nn={alpha:r,depth:a,stencil:o,antialias:u,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:m,failIfMajorPerformanceCaveat:_};if(s.addEventListener("webglcontextlost",Bn,!1),s.addEventListener("webglcontextrestored",dt,!1),null===Je){var sn=["webgl2","webgl","experimental-webgl"];if(!0===N.isWebGL1Renderer&&sn.shift(),null===(Je=on(sn,Nn)))throw on(sn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Je.getShaderPrecisionFormat&&(Je.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(De){throw console.error("THREE.WebGLRenderer: "+De.message),De}function Ur(){In=new Jae(Je),Mn=new jae(Je,In,i),In.init(Mn),Un=new Toe(Je,In,Mn),Cn=new Coe(Je,In,Mn),Mt[0]=1029,Ht=new nse(Je),an=new doe,hn=new Soe(Je,In,Cn,an,Mn,Un,Ht),gr=new qae(N),ni=new Qae(N),Vi=new pre(Je,Mn),Xn=new zae(Je,In,Vi,Mn),Ke=new ese(Je,Vi,Ht,Xn),Pe=new sse(Je,Ke,Vi,Ht),Xr=new ase(Je,Mn,hn),cr=new Wae(an),Xt=new hoe(N,gr,ni,In,Mn,Xn,cr),kn=new xoe(an),Dn=new poe(an),Hn=new woe(In,Mn),Zr=new Hae(N,gr,Cn,Pe,c),ir=new L6(N,Pe,Mn),Ii=new Gae(Je,In,Ht,Mn),bt=new tse(Je,In,Ht,Mn),Ht.programs=Xt.programs,N.capabilities=Mn,N.extensions=In,N.properties=an,N.renderLists=Dn,N.shadowMap=ir,N.state=Cn,N.info=Ht}Ur();var Sr=new Aoe(N,Je);function Bn(De){De.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1;var De=Ht.autoReset,At=ir.enabled,Pt=ir.autoUpdate,Dt=ir.needsUpdate,Qt=ir.type;Ur(),Ht.autoReset=De,ir.enabled=At,ir.autoUpdate=Pt,ir.needsUpdate=Dt,ir.type=Qt}function Vn(De){var At=De.target;At.removeEventListener("dispose",Vn),fi(At)}function fi(De){ri(De),an.remove(De)}function ri(De){var At=an.get(De).programs;void 0!==At&&At.forEach(function(Pt){Xt.releaseProgram(Pt)})}function qr(De,At){De.render(function(Pt){N.renderBufferImmediate(Pt,At)})}this.xr=Sr,this.getContext=function(){return Je},this.getContextAttributes=function(){return Je.getContextAttributes()},this.forceContextLoss=function(){var De=In.get("WEBGL_lose_context");De&&De.loseContext()},this.forceContextRestore=function(){var De=In.get("WEBGL_lose_context");De&&De.restoreContext()},this.getPixelRatio=function(){return Fe},this.setPixelRatio=function(De){void 0!==De&&(Fe=De,this.setSize(Ue,Ve,!1))},this.getSize=function(De){return De.set(Ue,Ve)},this.setSize=function(De,At,Pt){Sr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ue=De,Ve=At,s.width=Math.floor(De*Fe),s.height=Math.floor(At*Fe),!1!==Pt&&(s.style.width=De+"px",s.style.height=At+"px"),this.setViewport(0,0,De,At))},this.getDrawingBufferSize=function(De){return De.set(Ue*Fe,Ve*Fe).floor()},this.setDrawingBufferSize=function(De,At,Pt){Ue=De,Ve=At,Fe=Pt,s.width=Math.floor(De*Pt),s.height=Math.floor(At*Pt),this.setViewport(0,0,De,At)},this.getCurrentViewport=function(De){return De.copy(he)},this.getViewport=function(De){return De.copy(tt)},this.setViewport=function(De,At,Pt,Dt){De.isVector4?tt.set(De.x,De.y,De.z,De.w):tt.set(De,At,Pt,Dt),Cn.viewport(he.copy(tt).multiplyScalar(Fe).floor())},this.getScissor=function(De){return De.copy(wt)},this.setScissor=function(De,At,Pt,Dt){De.isVector4?wt.set(De.x,De.y,De.z,De.w):wt.set(De,At,Pt,Dt),Cn.scissor(se.copy(wt).multiplyScalar(Fe).floor())},this.getScissorTest=function(){return pt},this.setScissorTest=function(De){Cn.setScissorTest(pt=De)},this.setOpaqueSort=function(De){et=De},this.setTransparentSort=function(De){Ye=De},this.getClearColor=function(De){return De.copy(Zr.getClearColor())},this.setClearColor=function(){Zr.setClearColor.apply(Zr,arguments)},this.getClearAlpha=function(){return Zr.getClearAlpha()},this.setClearAlpha=function(){Zr.setClearAlpha.apply(Zr,arguments)},this.clear=function(De,At,Pt){var Dt=0;(void 0===De||De)&&(Dt|=16384),(void 0===At||At)&&(Dt|=256),(void 0===Pt||Pt)&&(Dt|=1024),Je.clear(Dt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){s.removeEventListener("webglcontextlost",Bn,!1),s.removeEventListener("webglcontextrestored",dt,!1),Dn.dispose(),Hn.dispose(),an.dispose(),gr.dispose(),ni.dispose(),Pe.dispose(),Xn.dispose(),Sr.dispose(),Sr.removeEventListener("sessionstart",pu),Sr.removeEventListener("sessionend",xo),tn&&(tn.dispose(),tn=null),Qs.stop()},this.renderBufferImmediate=function(De,At){Xn.initAttributes();var Pt=an.get(De);De.hasPositions&&!Pt.position&&(Pt.position=Je.createBuffer()),De.hasNormals&&!Pt.normal&&(Pt.normal=Je.createBuffer()),De.hasUvs&&!Pt.uv&&(Pt.uv=Je.createBuffer()),De.hasColors&&!Pt.color&&(Pt.color=Je.createBuffer());var Dt=At.getAttributes();De.hasPositions&&(Je.bindBuffer(34962,Pt.position),Je.bufferData(34962,De.positionArray,35048),Xn.enableAttribute(Dt.position.location),Je.vertexAttribPointer(Dt.position.location,3,5126,!1,0,0)),De.hasNormals&&(Je.bindBuffer(34962,Pt.normal),Je.bufferData(34962,De.normalArray,35048),Xn.enableAttribute(Dt.normal.location),Je.vertexAttribPointer(Dt.normal.location,3,5126,!1,0,0)),De.hasUvs&&(Je.bindBuffer(34962,Pt.uv),Je.bufferData(34962,De.uvArray,35048),Xn.enableAttribute(Dt.uv.location),Je.vertexAttribPointer(Dt.uv.location,2,5126,!1,0,0)),De.hasColors&&(Je.bindBuffer(34962,Pt.color),Je.bufferData(34962,De.colorArray,35048),Xn.enableAttribute(Dt.color.location),Je.vertexAttribPointer(Dt.color.location,3,5126,!1,0,0)),Xn.disableUnusedAttributes(),Je.drawArrays(4,0,De.count),De.count=0},this.renderBufferDirect=function(De,At,Pt,Dt,Qt,yr){null===At&&(At=Tr);var Rr=Qt.isMesh&&Qt.matrixWorld.determinant()<0,Di=HO(De,At,Pt,Dt,Qt);Cn.setMaterial(Dt,Rr);var ai=Pt.index,mi=Pt.attributes.position;if(null===ai){if(void 0===mi||0===mi.count)return}else if(0===ai.count)return;var zn=1;!0===Dt.wireframe&&(ai=Ke.getWireframeAttribute(Pt),zn=2),Xn.setup(Qt,Dt,Di,Pt,ai);var Qn,_r=Ii;null!==ai&&(Qn=Vi.get(ai),(_r=bt).setIndex(Qn));var Ei=null!==ai?ai.count:mi.count,Jn=Pt.drawRange.start*zn,ji=Pt.drawRange.count*zn,ya=null!==yr?yr.start*zn:0,Zi=null!==yr?yr.count*zn:1/0,Ga=Math.max(Jn,ya),Jo=Math.min(Ei,Jn+ji,ya+Zi)-1,ho=Math.max(0,Jo-Ga+1);if(0!==ho){if(Qt.isMesh)!0===Dt.wireframe?(Cn.setLineWidth(Dt.wireframeLinewidth*nr()),_r.setMode(1)):_r.setMode(4);else if(Qt.isLine){var Vf=Dt.linewidth;void 0===Vf&&(Vf=1),Cn.setLineWidth(Vf*nr()),_r.setMode(Qt.isLineSegments?1:Qt.isLineLoop?2:3)}else Qt.isPoints?_r.setMode(0):Qt.isSprite&&_r.setMode(4);if(Qt.isInstancedMesh)_r.renderInstances(Ga,ho,Qt.count);else if(Pt.isInstancedBufferGeometry){var Ss=Math.min(Pt.instanceCount,Pt._maxInstanceCount);_r.renderInstances(Ga,ho,Ss)}else _r.render(Ga,ho)}},this.compile=function(De,At){(E=Hn.get(De)).init(),I.push(E),De.traverseVisible(function(Pt){Pt.isLight&&Pt.layers.test(At.layers)&&(E.pushLight(Pt),Pt.castShadow&&E.pushShadow(Pt))}),E.setupLights(N.physicallyCorrectLights),De.traverse(function(Pt){var Dt=Pt.material;if(Dt)if(Array.isArray(Dt))for(var Qt=0;Qt<Dt.length;Qt++)Fk(Dt[Qt],De,Pt);else Fk(Dt,De,Pt)}),I.pop(),E=null};var ga=null;function Cs(De){ga&&ga(De)}function pu(){Qs.stop()}function xo(){Qs.start()}var Qs=new n6;function jA(De,At,Pt,Dt){if(!1!==De.visible){if(De.layers.test(At.layers))if(De.isGroup)Pt=De.renderOrder;else if(De.isLOD)!0===De.autoUpdate&&De.update(At);else if(De.isLight)E.pushLight(De),De.castShadow&&E.pushShadow(De);else if(De.isSprite){if(!De.frustumCulled||$t.intersectsSprite(De)){Dt&&Pn.setFromMatrixPosition(De.matrixWorld).applyMatrix4(un);var yr=Pe.update(De),Rr=De.material;Rr.visible&&b.push(De,yr,Rr,Pt,Pn.z,null)}}else if(De.isImmediateRenderObject)Dt&&Pn.setFromMatrixPosition(De.matrixWorld).applyMatrix4(un),b.push(De,null,De.material,Pt,Pn.z,null);else if((De.isMesh||De.isLine||De.isPoints)&&(De.isSkinnedMesh&&De.skeleton.frame!==Ht.render.frame&&(De.skeleton.update(),De.skeleton.frame=Ht.render.frame),!De.frustumCulled||$t.intersectsObject(De))){Dt&&Pn.setFromMatrixPosition(De.matrixWorld).applyMatrix4(un);var Di=Pe.update(De),ai=De.material;if(Array.isArray(ai))for(var mi=Di.groups,zn=0,Qn=mi.length;zn<Qn;zn++){var _r=mi[zn],Ei=ai[_r.materialIndex];Ei&&Ei.visible&&b.push(De,Di,Ei,Pt,Pn.z,_r)}else ai.visible&&b.push(De,Di,ai,Pt,Pn.z,null)}for(var Jn=De.children,ji=0,ya=Jn.length;ji<ya;ji++)jA(Jn[ji],At,Pt,Dt)}}function Nk(De,At,Pt,Dt){var Qt=De.opaque,yr=De.transmissive,Rr=De.transparent;E.setupLightsView(Pt),yr.length>0&&VO(Qt,At,Pt),Dt&&Cn.viewport(he.copy(Dt)),Qt.length>0&&bv(Qt,At,Pt),yr.length>0&&bv(yr,At,Pt),Rr.length>0&&bv(Rr,At,Pt)}function VO(De,At,Pt){null===tn&&(tn=new(!0===u&&!0===Mn.isWebGL2?z4:sd)(1024,1024,{generateMipmaps:!0,type:null!==Un.convert(qw)?qw:Mm,minFilter:vA,magFilter:Ao,wrapS:yl,wrapT:yl}));var yr=N.getRenderTarget();N.setRenderTarget(tn),N.clear();var Rr=N.toneMapping;N.toneMapping=0,bv(De,At,Pt),N.toneMapping=Rr,hn.updateMultisampleRenderTarget(tn),hn.updateRenderTargetMipmap(tn),N.setRenderTarget(yr)}function bv(De,At,Pt){for(var Dt=!0===At.isScene?At.overrideMaterial:null,Qt=0,yr=De.length;Qt<yr;Qt++){var Rr=De[Qt],Di=Rr.object,ai=Rr.geometry,mi=null===Dt?Rr.material:Dt,zn=Rr.group;Di.layers.test(Pt.layers)&&RU(Di,At,Pt,ai,mi,zn)}}function RU(De,At,Pt,Dt,Qt,yr){if(De.onBeforeRender(N,At,Pt,Dt,Qt,yr),De.modelViewMatrix.multiplyMatrices(Pt.matrixWorldInverse,De.matrixWorld),De.normalMatrix.getNormalMatrix(De.modelViewMatrix),Qt.onBeforeRender(N,At,Pt,Dt,De,yr),De.isImmediateRenderObject){var Rr=HO(Pt,At,Dt,Qt,De);Cn.setMaterial(Qt),Xn.reset(),qr(De,Rr)}else!0===Qt.transparent&&2===Qt.side?(Qt.side=1,Qt.needsUpdate=!0,N.renderBufferDirect(Pt,At,Dt,Qt,De,yr),Qt.side=0,Qt.needsUpdate=!0,N.renderBufferDirect(Pt,At,Dt,Qt,De,yr),Qt.side=2):N.renderBufferDirect(Pt,At,Dt,Qt,De,yr);De.onAfterRender(N,At,Pt,Dt,Qt,yr)}function Fk(De,At,Pt){!0!==At.isScene&&(At=Tr);var Dt=an.get(De),Qt=E.state.lights,Rr=Qt.state.version,Di=Xt.getParameters(De,Qt.state,E.state.shadowsArray,At,Pt),ai=Xt.getProgramCacheKey(Di),mi=Dt.programs;Dt.environment=De.isMeshStandardMaterial?At.environment:null,Dt.fog=At.fog,Dt.envMap=(De.isMeshStandardMaterial?ni:gr).get(De.envMap||Dt.environment),void 0===mi&&(De.addEventListener("dispose",Vn),mi=new Map,Dt.programs=mi);var zn=mi.get(ai);if(void 0!==zn){if(Dt.currentProgram===zn&&Dt.lightsStateVersion===Rr)return k_(De,Di),zn}else Di.uniforms=Xt.getUniforms(De),De.onBuild(Di,N),De.onBeforeCompile(Di,N),zn=Xt.acquireProgram(Di,ai),mi.set(ai,zn),Dt.uniforms=Di.uniforms;var Qn=Dt.uniforms;(!De.isShaderMaterial&&!De.isRawShaderMaterial||!0===De.clipping)&&(Qn.clippingPlanes=cr.uniform),k_(De,Di),Dt.needsLights=Zk(De),Dt.lightsStateVersion=Rr,Dt.needsLights&&(Qn.ambientLightColor.value=Qt.state.ambient,Qn.lightProbe.value=Qt.state.probe,Qn.directionalLights.value=Qt.state.directional,Qn.directionalLightShadows.value=Qt.state.directionalShadow,Qn.spotLights.value=Qt.state.spot,Qn.spotLightShadows.value=Qt.state.spotShadow,Qn.rectAreaLights.value=Qt.state.rectArea,Qn.ltc_1.value=Qt.state.rectAreaLTC1,Qn.ltc_2.value=Qt.state.rectAreaLTC2,Qn.pointLights.value=Qt.state.point,Qn.pointLightShadows.value=Qt.state.pointShadow,Qn.hemisphereLights.value=Qt.state.hemi,Qn.directionalShadowMap.value=Qt.state.directionalShadowMap,Qn.directionalShadowMatrix.value=Qt.state.directionalShadowMatrix,Qn.spotShadowMap.value=Qt.state.spotShadowMap,Qn.spotShadowMatrix.value=Qt.state.spotShadowMatrix,Qn.pointShadowMap.value=Qt.state.pointShadowMap,Qn.pointShadowMatrix.value=Qt.state.pointShadowMatrix);var _r=zn.getUniforms(),Ei=Um.seqWithValue(_r.seq,Qn);return Dt.currentProgram=zn,Dt.uniformsList=Ei,zn}function k_(De,At){var Pt=an.get(De);Pt.outputEncoding=At.outputEncoding,Pt.instancing=At.instancing,Pt.skinning=At.skinning,Pt.morphTargets=At.morphTargets,Pt.morphNormals=At.morphNormals,Pt.morphTargetsCount=At.morphTargetsCount,Pt.numClippingPlanes=At.numClippingPlanes,Pt.numIntersection=At.numClipIntersection,Pt.vertexAlphas=At.vertexAlphas,Pt.vertexTangents=At.vertexTangents}function HO(De,At,Pt,Dt,Qt){!0!==At.isScene&&(At=Tr),hn.resetTextureUnits();var yr=At.fog,Di=null===te?N.outputEncoding:te.texture.encoding,ai=(Dt.isMeshStandardMaterial?ni:gr).get(Dt.envMap||(Dt.isMeshStandardMaterial?At.environment:null)),mi=!0===Dt.vertexColors&&!!Pt&&!!Pt.attributes.color&&4===Pt.attributes.color.itemSize,zn=!!Dt.normalMap&&!!Pt&&!!Pt.attributes.tangent,Qn=!!Pt&&!!Pt.morphAttributes.position,_r=!!Pt&&!!Pt.morphAttributes.normal,Ei=Pt&&Pt.morphAttributes.position?Pt.morphAttributes.position.length:0,Jn=an.get(Dt),ji=E.state.lights;!0!==_n||!0!==fn&&De===le||cr.setState(Dt,De,De===le&&Dt.id===ue);var Zi=!1;Dt.version===Jn.__version?(Jn.needsLights&&Jn.lightsStateVersion!==ji.state.version||Jn.outputEncoding!==Di||Qt.isInstancedMesh&&!1===Jn.instancing||!Qt.isInstancedMesh&&!0===Jn.instancing||Qt.isSkinnedMesh&&!1===Jn.skinning||!Qt.isSkinnedMesh&&!0===Jn.skinning||Jn.envMap!==ai||Dt.fog&&Jn.fog!==yr||void 0!==Jn.numClippingPlanes&&(Jn.numClippingPlanes!==cr.numPlanes||Jn.numIntersection!==cr.numIntersection)||Jn.vertexAlphas!==mi||Jn.vertexTangents!==zn||Jn.morphTargets!==Qn||Jn.morphNormals!==_r||!0===Mn.isWebGL2&&Jn.morphTargetsCount!==Ei)&&(Zi=!0):(Zi=!0,Jn.__version=Dt.version);var Ga=Jn.currentProgram;!0===Zi&&(Ga=Fk(Dt,At,Qt));var Jo=!1,ho=!1,Vf=!1,Ss=Ga.getUniforms(),qm=Jn.uniforms;if(Cn.useProgram(Ga.program)&&(Jo=!0,ho=!0,Vf=!0),Dt.id!==ue&&(ue=Dt.id,ho=!0),Jo||le!==De){if(Ss.setValue(Je,"projectionMatrix",De.projectionMatrix),Mn.logarithmicDepthBuffer&&Ss.setValue(Je,"logDepthBufFC",2/(Math.log(De.far+1)/Math.LN2)),le!==De&&(le=De,ho=!0,Vf=!0),Dt.isShaderMaterial||Dt.isMeshPhongMaterial||Dt.isMeshToonMaterial||Dt.isMeshStandardMaterial||Dt.envMap){var WA=Ss.map.cameraPosition;void 0!==WA&&WA.setValue(Je,Pn.setFromMatrixPosition(De.matrixWorld))}(Dt.isMeshPhongMaterial||Dt.isMeshToonMaterial||Dt.isMeshLambertMaterial||Dt.isMeshBasicMaterial||Dt.isMeshStandardMaterial||Dt.isShaderMaterial)&&Ss.setValue(Je,"isOrthographic",!0===De.isOrthographicCamera),(Dt.isMeshPhongMaterial||Dt.isMeshToonMaterial||Dt.isMeshLambertMaterial||Dt.isMeshBasicMaterial||Dt.isMeshStandardMaterial||Dt.isShaderMaterial||Dt.isShadowMaterial||Qt.isSkinnedMesh)&&Ss.setValue(Je,"viewMatrix",De.matrixWorldInverse)}if(Qt.isSkinnedMesh){Ss.setOptional(Je,Qt,"bindMatrix"),Ss.setOptional(Je,Qt,"bindMatrixInverse");var wv=Qt.skeleton;wv&&(Mn.floatVertexTextures?(null===wv.boneTexture&&wv.computeBoneTexture(),Ss.setValue(Je,"boneTexture",wv.boneTexture,hn),Ss.setValue(Je,"boneTextureSize",wv.boneTextureSize)):Ss.setOptional(Je,wv,"boneMatrices"))}return!!Pt&&(void 0!==Pt.morphAttributes.position||void 0!==Pt.morphAttributes.normal)&&Xr.update(Qt,Pt,Dt,Ga),(ho||Jn.receiveShadow!==Qt.receiveShadow)&&(Jn.receiveShadow=Qt.receiveShadow,Ss.setValue(Je,"receiveShadow",Qt.receiveShadow)),ho&&(Ss.setValue(Je,"toneMappingExposure",N.toneMappingExposure),Jn.needsLights&&zO(qm,Vf),yr&&Dt.fog&&kn.refreshFogUniforms(qm,yr),kn.refreshMaterialUniforms(qm,Dt,Fe,Ve,tn),Um.upload(Je,Jn.uniformsList,qm,hn)),Dt.isShaderMaterial&&!0===Dt.uniformsNeedUpdate&&(Um.upload(Je,Jn.uniformsList,qm,hn),Dt.uniformsNeedUpdate=!1),Dt.isSpriteMaterial&&Ss.setValue(Je,"center",Qt.center),Ss.setValue(Je,"modelViewMatrix",Qt.modelViewMatrix),Ss.setValue(Je,"normalMatrix",Qt.normalMatrix),Ss.setValue(Je,"modelMatrix",Qt.matrixWorld),Ga}function zO(De,At){De.ambientLightColor.needsUpdate=At,De.lightProbe.needsUpdate=At,De.directionalLights.needsUpdate=At,De.directionalLightShadows.needsUpdate=At,De.pointLights.needsUpdate=At,De.pointLightShadows.needsUpdate=At,De.spotLights.needsUpdate=At,De.spotLightShadows.needsUpdate=At,De.rectAreaLights.needsUpdate=At,De.hemisphereLights.needsUpdate=At}function Zk(De){return De.isMeshLambertMaterial||De.isMeshToonMaterial||De.isMeshPhongMaterial||De.isMeshStandardMaterial||De.isShadowMaterial||De.isShaderMaterial&&!0===De.lights}Qs.setAnimationLoop(Cs),"undefined"!=typeof window&&Qs.setContext(window),this.setAnimationLoop=function(De){ga=De,Sr.setAnimationLoop(De),null===De?Qs.stop():Qs.start()},Sr.addEventListener("sessionstart",pu),Sr.addEventListener("sessionend",xo),this.render=function(De,At){if(void 0===At||!0===At.isCamera){if(!0!==W){if(!0===De.autoUpdate&&De.updateMatrixWorld(),null===At.parent&&At.updateMatrixWorld(),!0===Sr.enabled&&!0===Sr.isPresenting&&(!0===Sr.cameraAutoUpdate&&Sr.updateCamera(At),At=Sr.getCamera()),!0===De.isScene&&De.onBeforeRender(N,De,At,te),(E=Hn.get(De,I.length)).init(),I.push(E),un.multiplyMatrices(At.projectionMatrix,At.matrixWorldInverse),$t.setFromProjectionMatrix(un),_n=cr.init(this.clippingPlanes,fn=this.localClippingEnabled,At),(b=Dn.get(De,T.length)).init(),T.push(b),jA(De,At,0,N.sortObjects),b.finish(),!0===N.sortObjects&&b.sort(et,Ye),!0===_n&&cr.beginShadows(),ir.render(E.state.shadowsArray,De,At),!0===_n&&cr.endShadows(),!0===this.info.autoReset&&this.info.reset(),Zr.render(b,De),E.setupLights(N.physicallyCorrectLights),At.isArrayCamera)for(var Dt=At.cameras,Qt=0,yr=Dt.length;Qt<yr;Qt++){var Rr=Dt[Qt];Nk(b,De,Rr,Rr.viewport)}else Nk(b,De,At);null!==te&&(hn.updateMultisampleRenderTarget(te),hn.updateRenderTargetMipmap(te)),!0===De.isScene&&De.onAfterRender(N,De,At),Cn.buffers.depth.setTest(!0),Cn.buffers.depth.setMask(!0),Cn.buffers.color.setMask(!0),Cn.setPolygonOffset(!1),Xn.resetDefaultState(),ue=-1,le=null,I.pop(),E=I.length>0?I[I.length-1]:null,T.pop(),b=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return te},this.setRenderTarget=function(De){var At=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Pt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;te=De,U=At,H=Pt,De&&void 0===an.get(De).__webglFramebuffer&&hn.setupRenderTarget(De);var Dt=null,Qt=!1,yr=!1;if(De){var Rr=De.texture;(Rr.isDataTexture3D||Rr.isDataTexture2DArray)&&(yr=!0);var Di=an.get(De).__webglFramebuffer;De.isWebGLCubeRenderTarget?(Dt=Di[At],Qt=!0):Dt=De.isWebGLMultisampleRenderTarget?an.get(De).__webglMultisampledFramebuffer:Di,he.copy(De.viewport),se.copy(De.scissor),ye=De.scissorTest}else he.copy(tt).multiplyScalar(Fe).floor(),se.copy(wt).multiplyScalar(Fe).floor(),ye=pt;var ai=Cn.bindFramebuffer(36160,Dt);if(ai&&Mn.drawBuffers){var mi=!1;if(De)if(De.isWebGLMultipleRenderTargets){var zn=De.texture;if(Mt.length!==zn.length||36064!==Mt[0]){for(var Qn=0,_r=zn.length;Qn<_r;Qn++)Mt[Qn]=36064+Qn;Mt.length=zn.length,mi=!0}}else(1!==Mt.length||36064!==Mt[0])&&(Mt[0]=36064,Mt.length=1,mi=!0);else(1!==Mt.length||1029!==Mt[0])&&(Mt[0]=1029,Mt.length=1,mi=!0);mi&&(Mn.isWebGL2?Je.drawBuffers(Mt):In.get("WEBGL_draw_buffers").drawBuffersWEBGL(Mt))}if(Cn.viewport(he),Cn.scissor(se),Cn.setScissorTest(ye),Qt){var Ei=an.get(De.texture);Je.framebufferTexture2D(36160,36064,34069+At,Ei.__webglTexture,Pt)}else if(yr){var Jn=an.get(De.texture),ji=At||0;Je.framebufferTextureLayer(36160,36064,Jn.__webglTexture,Pt||0,ji)}ue=-1},this.readRenderTargetPixels=function(De,At,Pt,Dt,Qt,yr,Rr){if(De&&De.isWebGLRenderTarget){var Di=an.get(De).__webglFramebuffer;if(De.isWebGLCubeRenderTarget&&void 0!==Rr&&(Di=Di[Rr]),Di){Cn.bindFramebuffer(36160,Di);try{var ai=De.texture,mi=ai.format,zn=ai.type;if(mi!==Xu&&Un.convert(mi)!==Je.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var Qn=zn===qw&&(In.has("EXT_color_buffer_half_float")||Mn.isWebGL2&&In.has("EXT_color_buffer_float"));if(!(zn===Mm||Un.convert(zn)===Je.getParameter(35738)||zn===Am&&(Mn.isWebGL2||In.has("OES_texture_float")||In.has("WEBGL_color_buffer_float"))||Qn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Je.checkFramebufferStatus(36160)?At>=0&&At<=De.width-Dt&&Pt>=0&&Pt<=De.height-Qt&&Je.readPixels(At,Pt,Dt,Qt,Un.convert(mi),Un.convert(zn),yr):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var _r=null!==te?an.get(te).__webglFramebuffer:null;Cn.bindFramebuffer(36160,_r)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(De,At){var Pt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Dt=Math.pow(2,-Pt),Qt=Math.floor(At.image.width*Dt),yr=Math.floor(At.image.height*Dt),Rr=Un.convert(At.format);Mn.isWebGL2&&(6407===Rr&&(Rr=32849),6408===Rr&&(Rr=32856)),hn.setTexture2D(At,0),Je.copyTexImage2D(3553,Pt,Rr,De.x,De.y,Qt,yr,0),Cn.unbindTexture()},this.copyTextureToTexture=function(De,At,Pt){var Dt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,Qt=At.image.width,yr=At.image.height,Rr=Un.convert(Pt.format),Di=Un.convert(Pt.type);hn.setTexture2D(Pt,0),Je.pixelStorei(37440,Pt.flipY),Je.pixelStorei(37441,Pt.premultiplyAlpha),Je.pixelStorei(3317,Pt.unpackAlignment),At.isDataTexture?Je.texSubImage2D(3553,Dt,De.x,De.y,Qt,yr,Rr,Di,At.image.data):At.isCompressedTexture?Je.compressedTexSubImage2D(3553,Dt,De.x,De.y,At.mipmaps[0].width,At.mipmaps[0].height,Rr,At.mipmaps[0].data):Je.texSubImage2D(3553,Dt,De.x,De.y,Rr,Di,At.image),0===Dt&&Pt.generateMipmaps&&Je.generateMipmap(3553),Cn.unbindTexture()},this.copyTextureToTexture3D=function(De,At,Pt,Dt){var Qt=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(N.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var zn,yr=De.max.x-De.min.x+1,Rr=De.max.y-De.min.y+1,Di=De.max.z-De.min.z+1,ai=Un.convert(Dt.format),mi=Un.convert(Dt.type);if(Dt.isDataTexture3D)hn.setTexture3D(Dt,0),zn=32879;else{if(!Dt.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");hn.setTexture2DArray(Dt,0),zn=35866}Je.pixelStorei(37440,Dt.flipY),Je.pixelStorei(37441,Dt.premultiplyAlpha),Je.pixelStorei(3317,Dt.unpackAlignment);var Qn=Je.getParameter(3314),_r=Je.getParameter(32878),Ei=Je.getParameter(3316),Jn=Je.getParameter(3315),ji=Je.getParameter(32877),ya=Pt.isCompressedTexture?Pt.mipmaps[0]:Pt.image;Je.pixelStorei(3314,ya.width),Je.pixelStorei(32878,ya.height),Je.pixelStorei(3316,De.min.x),Je.pixelStorei(3315,De.min.y),Je.pixelStorei(32877,De.min.z),Pt.isDataTexture||Pt.isDataTexture3D?Je.texSubImage3D(zn,Qt,At.x,At.y,At.z,yr,Rr,Di,ai,mi,ya.data):Pt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Je.compressedTexSubImage3D(zn,Qt,At.x,At.y,At.z,yr,Rr,Di,ai,ya.data)):Je.texSubImage3D(zn,Qt,At.x,At.y,At.z,yr,Rr,Di,ai,mi,ya),Je.pixelStorei(3314,Qn),Je.pixelStorei(32878,_r),Je.pixelStorei(3316,Ei),Je.pixelStorei(3315,Jn),Je.pixelStorei(32877,ji),0===Qt&&Dt.generateMipmaps&&Je.generateMipmap(zn),Cn.unbindTexture()}},this.initTexture=function(De){hn.setTexture2D(De,0),Cn.unbindTexture()},this.resetState=function(){U=0,H=0,te=null,Cn.reset(),Xn.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n})(ka).prototype.isWebGL1Renderer=!0,function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,M.Z)(this,i),this.name="",this.color=new lr(s),this.density=n}return(0,D.Z)(i,[{key:"clone",value:function(){return new i(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),i}().prototype.isFogExp2=!0,function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,M.Z)(this,i),this.name="",this.color=new lr(s),this.near=n,this.far=r}return(0,D.Z)(i,[{key:"clone",value:function(){return new i(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),i}().prototype.isFog=!0;var X3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Scene",r.background=null,r.environment=null,r.fog=null,r.overrideMaterial=null,r.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,wa.Z)(r)})),r}return(0,D.Z)(n,[{key:"copy",value:function(a,o){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a,o),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);return null!==this.fog&&(o.object.fog=this.fog.toJSON()),o}}]),n}(Na);X3.prototype.isScene=!0;var IA=function(){function i(s,n){(0,M.Z)(this,i),this.array=s,this.stride=n,this.count=void 0!==s?s.length/n:0,this.usage=gA,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Yc()}return(0,D.Z)(i,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(n){!0===n&&this.version++}},{key:"setUsage",value:function(n){return this.usage=n,this}},{key:"copy",value:function(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}},{key:"copyAt",value:function(n,r,a){n*=this.stride,a*=r.stride;for(var o=0,u=this.stride;o<u;o++)this.array[n+o]=r.array[a+o];return this}},{key:"set",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(n,r),this}},{key:"clone",value:function(n){void 0===n.arrayBuffers&&(n.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yc()),void 0===n.arrayBuffers[this.array.buffer._uuid]&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var r=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),a=new this.constructor(r,this.stride);return a.setUsage(this.usage),a}},{key:"onUpload",value:function(n){return this.onUploadCallback=n,this}},{key:"toJSON",value:function(n){return void 0===n.arrayBuffers&&(n.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Yc()),void 0===n.arrayBuffers[this.array.buffer._uuid]&&(n.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),i}();IA.prototype.isInterleavedBuffer=!0;var Xs=new xe,Q3=function(){function i(s,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,M.Z)(this,i),this.name="",this.data=s,this.itemSize=n,this.offset=r,this.normalized=!0===a}return(0,D.Z)(i,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(n){this.data.needsUpdate=n}},{key:"applyMatrix4",value:function(n){for(var r=0,a=this.data.count;r<a;r++)Xs.x=this.getX(r),Xs.y=this.getY(r),Xs.z=this.getZ(r),Xs.applyMatrix4(n),this.setXYZ(r,Xs.x,Xs.y,Xs.z);return this}},{key:"applyNormalMatrix",value:function(n){for(var r=0,a=this.count;r<a;r++)Xs.x=this.getX(r),Xs.y=this.getY(r),Xs.z=this.getZ(r),Xs.applyNormalMatrix(n),this.setXYZ(r,Xs.x,Xs.y,Xs.z);return this}},{key:"transformDirection",value:function(n){for(var r=0,a=this.count;r<a;r++)Xs.x=this.getX(r),Xs.y=this.getY(r),Xs.z=this.getZ(r),Xs.transformDirection(n),this.setXYZ(r,Xs.x,Xs.y,Xs.z);return this}},{key:"setX",value:function(n,r){return this.data.array[n*this.data.stride+this.offset]=r,this}},{key:"setY",value:function(n,r){return this.data.array[n*this.data.stride+this.offset+1]=r,this}},{key:"setZ",value:function(n,r){return this.data.array[n*this.data.stride+this.offset+2]=r,this}},{key:"setW",value:function(n,r){return this.data.array[n*this.data.stride+this.offset+3]=r,this}},{key:"getX",value:function(n){return this.data.array[n*this.data.stride+this.offset]}},{key:"getY",value:function(n){return this.data.array[n*this.data.stride+this.offset+1]}},{key:"getZ",value:function(n){return this.data.array[n*this.data.stride+this.offset+2]}},{key:"getW",value:function(n){return this.data.array[n*this.data.stride+this.offset+3]}},{key:"setXY",value:function(n,r,a){return this.data.array[(n=n*this.data.stride+this.offset)+0]=r,this.data.array[n+1]=a,this}},{key:"setXYZ",value:function(n,r,a,o){return this.data.array[(n=n*this.data.stride+this.offset)+0]=r,this.data.array[n+1]=a,this.data.array[n+2]=o,this}},{key:"setXYZW",value:function(n,r,a,o,u){return this.data.array[(n=n*this.data.stride+this.offset)+0]=r,this.data.array[n+1]=a,this.data.array[n+2]=o,this.data.array[n+3]=u,this}},{key:"clone",value:function(n){if(void 0===n){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var r=[],a=0;a<this.count;a++)for(var o=a*this.data.stride+this.offset,u=0;u<this.itemSize;u++)r.push(this.data.array[o+u]);return new fo(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===n.interleavedBuffers&&(n.interleavedBuffers={}),void 0===n.interleavedBuffers[this.data.uuid]&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new i(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(n){if(void 0===n){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var r=[],a=0;a<this.count;a++)for(var o=a*this.data.stride+this.offset,u=0;u<this.itemSize;u++)r.push(this.data.array[o+u]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===n.interleavedBuffers&&(n.interleavedBuffers={}),void 0===n.interleavedBuffers[this.data.uuid]&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),i}();Q3.prototype.isInterleavedBufferAttribute=!0;var J3=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="SpriteMaterial",a.color=new lr(16777215),a.map=null,a.alphaMap=null,a.rotation=0,a.sizeAttenuation=!0,a.transparent=!0,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this}}]),n}(vu);J3.prototype.isSpriteMaterial=!0;var Ek,DA=new xe,Ck=new xe,Sk=new xe,Tk=new Yt,RA=new Yt,F6=new Cr,_O=new xe,PA=new xe,bO=new xe,Z6=new Yt,eU=new Yt,B6=new Yt;function wO(i,s,n,r,a,o){Tk.subVectors(i,n).addScalar(.5).multiply(r),void 0!==a?(RA.x=o*Tk.x-a*Tk.y,RA.y=a*Tk.x+o*Tk.y):RA.copy(Tk),i.copy(s),i.x+=RA.x,i.y+=RA.y,i.applyMatrix4(F6)}(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;if((0,M.Z)(this,n),(a=s.call(this)).type="Sprite",void 0===Ek){Ek=new Fi;var o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),u=new IA(o,5);Ek.setIndex([0,1,2,0,2,3]),Ek.setAttribute("position",new Q3(u,3,0,!1)),Ek.setAttribute("uv",new Q3(u,2,3,!1))}return a.geometry=Ek,a.material=void 0!==r?r:new J3,a.center=new Yt(.5,.5),a}return(0,D.Z)(n,[{key:"raycast",value:function(a,o){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ck.setFromMatrixScale(this.matrixWorld),F6.copy(a.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld),Sk.setFromMatrixPosition(this.modelViewMatrix),a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ck.multiplyScalar(-Sk.z);var c,d,u=this.material.rotation;0!==u&&(d=Math.cos(u),c=Math.sin(u));var m=this.center;wO(_O.set(-.5,-.5,0),Sk,m,Ck,c,d),wO(PA.set(.5,-.5,0),Sk,m,Ck,c,d),wO(bO.set(.5,.5,0),Sk,m,Ck,c,d),Z6.set(0,0),eU.set(1,0),B6.set(1,1);var _=a.ray.intersectTriangle(_O,PA,bO,!1,DA);if(null!==_||(wO(PA.set(-.5,.5,0),Sk,m,Ck,c,d),eU.set(0,1),null!==(_=a.ray.intersectTriangle(_O,bO,PA,!1,DA)))){var b=a.ray.origin.distanceTo(DA);b<a.near||b>a.far||o.push({distance:b,point:DA.clone(),uv:bl.getUV(DA,_O,PA,bO,Z6,eU,B6,new Yt),face:null,object:this})}}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),void 0!==a.center&&this.center.copy(a.center),this.material=a.material,this}}]),n})(Na).prototype.isSprite=!0;var V6=new xe,H6=new La,z6=new La,Ooe=new xe,G6=new Cr,j6=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="SkinnedMesh",o.bindMode="attached",o.bindMatrix=new Cr,o.bindMatrixInverse=new Cr,o}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.bindMode=a.bindMode,this.bindMatrix.copy(a.bindMatrix),this.bindMatrixInverse.copy(a.bindMatrixInverse),this.skeleton=a.skeleton,this}},{key:"bind",value:function(a,o){this.skeleton=a,void 0===o&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var a=new La,o=this.geometry.attributes.skinWeight,u=0,c=o.count;u<c;u++){a.x=o.getX(u),a.y=o.getY(u),a.z=o.getZ(u),a.w=o.getW(u);var d=1/a.manhattanLength();d!==1/0?a.multiplyScalar(d):a.set(1,0,0,0),o.setXYZW(u,a.x,a.y,a.z,a.w)}}},{key:"updateMatrixWorld",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"updateMatrixWorld",this).call(this,a),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(a,o){var u=this.skeleton,c=this.geometry;H6.fromBufferAttribute(c.attributes.skinIndex,a),z6.fromBufferAttribute(c.attributes.skinWeight,a),V6.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var d=0;d<4;d++){var m=z6.getComponent(d);if(0!==m){var _=H6.getComponent(d);G6.multiplyMatrices(u.bones[_].matrixWorld,u.boneInverses[_]),o.addScaledVector(Ooe.copy(V6).applyMatrix4(G6),m)}}return o.applyMatrix4(this.bindMatrixInverse)}}]),n}(Au);j6.prototype.isSkinnedMesh=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Bone",r}return n}(Na).prototype.isBone=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,m=arguments.length>5?arguments[5]:void 0,_=arguments.length>6?arguments[6]:void 0,b=arguments.length>7?arguments[7]:void 0,E=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Ao,T=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ao,I=arguments.length>10?arguments[10]:void 0,N=arguments.length>11?arguments[11]:void 0;return(0,M.Z)(this,n),(r=s.call(this,null,m,_,b,E,T,c,d,I,N)).image={data:a,width:o,height:u},r.magFilter=E,r.minFilter=T,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r.needsUpdate=!0,r}return n}(_l).prototype.isDataTexture=!0;var tU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),"number"==typeof o&&(c=o,o=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(u=s.call(this,r,a,o)).meshPerAttribute=c,u}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.meshPerAttribute=a.meshPerAttribute,this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.meshPerAttribute=this.meshPerAttribute,a.isInstancedBufferAttribute=!0,a}}]),n}(fo);tU.prototype.isInstancedBufferAttribute=!0;var W6=new Cr,q6=new Cr,kO=[],OA=new Au;(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).instanceMatrix=new tU(new Float32Array(16*o),16),u.instanceColor=null,u.count=o,u.frustumCulled=!1,u}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.instanceMatrix.copy(a.instanceMatrix),null!==a.instanceColor&&(this.instanceColor=a.instanceColor.clone()),this.count=a.count,this}},{key:"getColorAt",value:function(a,o){o.fromArray(this.instanceColor.array,3*a)}},{key:"getMatrixAt",value:function(a,o){o.fromArray(this.instanceMatrix.array,16*a)}},{key:"raycast",value:function(a,o){var u=this.matrixWorld,c=this.count;if(OA.geometry=this.geometry,OA.material=this.material,void 0!==OA.material)for(var d=0;d<c;d++){this.getMatrixAt(d,W6),q6.multiplyMatrices(u,W6),OA.matrixWorld=q6,OA.raycast(a,kO);for(var m=0,_=kO.length;m<_;m++){var b=kO[m];b.instanceId=d,b.object=this,o.push(b)}kO.length=0}}},{key:"setColorAt",value:function(a,o){null===this.instanceColor&&(this.instanceColor=new tU(new Float32Array(3*this.instanceMatrix.count),3)),o.toArray(this.instanceColor.array,3*a)}},{key:"setMatrixAt",value:function(a,o){o.toArray(this.instanceMatrix.array,16*a)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n})(Au).prototype.isInstancedMesh=!0;var Vm=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="LineBasicMaterial",a.color=new lr(16777215),a.linewidth=1,a.linecap="round",a.linejoin="round",a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this}}]),n}(vu);Vm.prototype.isLineBasicMaterial=!0;var Y6=new xe,K6=new xe,$6=new Cr,nU=new sk,EO=new ak,rU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fi,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vm;return(0,M.Z)(this,n),(r=s.call(this)).type="Line",r.geometry=a,r.material=o,r.updateMorphTargets(),r}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.material=a.material,this.geometry=a.geometry,this}},{key:"computeLineDistances",value:function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var o=a.attributes.position,u=[0],c=1,d=o.count;c<d;c++)Y6.fromBufferAttribute(o,c-1),K6.fromBufferAttribute(o,c),u[c]=u[c-1],u[c]+=Y6.distanceTo(K6);a.setAttribute("lineDistance",new Fr(u,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(a,o){var u=this.geometry,c=this.matrixWorld,d=a.params.Line.threshold,m=u.drawRange;if(null===u.boundingSphere&&u.computeBoundingSphere(),EO.copy(u.boundingSphere),EO.applyMatrix4(c),EO.radius+=d,!1!==a.ray.intersectsSphere(EO)){$6.copy(c).invert(),nU.copy(a.ray).applyMatrix4($6);var _=d/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_,E=new xe,T=new xe,I=new xe,N=new xe,W=this.isLineSegments?2:1;if(u.isBufferGeometry){var U=u.index,te=u.attributes.position;if(null!==U)for(var he=Math.max(0,m.start),se=Math.min(U.count,m.start+m.count)-1;he<se;he+=W){var ye=U.getX(he),Ue=U.getX(he+1);if(E.fromBufferAttribute(te,ye),T.fromBufferAttribute(te,Ue),!(nU.distanceSqToSegment(E,T,N,I)>b)){N.applyMatrix4(this.matrixWorld);var Fe=a.ray.origin.distanceTo(N);Fe<a.near||Fe>a.far||o.push({distance:Fe,point:I.clone().applyMatrix4(this.matrixWorld),index:he,face:null,faceIndex:null,object:this})}}else for(var tt=Math.max(0,m.start),wt=Math.min(te.count,m.start+m.count)-1;tt<wt;tt+=W)if(E.fromBufferAttribute(te,tt),T.fromBufferAttribute(te,tt+1),!(nU.distanceSqToSegment(E,T,N,I)>b)){N.applyMatrix4(this.matrixWorld);var Mt=a.ray.origin.distanceTo(N);Mt<a.near||Mt>a.far||o.push({distance:Mt,point:I.clone().applyMatrix4(this.matrixWorld),index:tt,face:null,faceIndex:null,object:this})}}else u.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,u=Object.keys(o);if(u.length>0){var c=o[u[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var d=0,m=c.length;d<m;d++){var _=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=d}}}}else{var b=a.morphTargets;void 0!==b&&b.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Na);rU.prototype.isLine=!0;var X6=new xe,Q6=new xe,LA=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="LineSegments",o}return(0,D.Z)(n,[{key:"computeLineDistances",value:function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var o=a.attributes.position,u=[],c=0,d=o.count;c<d;c+=2)X6.fromBufferAttribute(o,c),Q6.fromBufferAttribute(o,c+1),u[c]=0===c?0:u[c-1],u[c+1]=u[c]+X6.distanceTo(Q6);a.setAttribute("lineDistance",new Fr(u,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(rU);LA.prototype.isLineSegments=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="LineLoop",o}return n}(rU).prototype.isLineLoop=!0;var Mk=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="PointsMaterial",a.color=new lr(16777215),a.map=null,a.alphaMap=null,a.size=1,a.sizeAttenuation=!0,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this}}]),n}(vu);Mk.prototype.isPointsMaterial=!0;var J6=new Cr,iU=new sk,CO=new ak,SO=new xe;function e5(i,s,n,r,a,o,u){var c=iU.distanceSqToPoint(i);if(c<n){var d=new xe;iU.closestPointToPoint(i,d),d.applyMatrix4(r);var m=a.ray.origin.distanceTo(d);if(m<a.near||m>a.far)return;o.push({distance:m,distanceToRay:Math.sqrt(c),point:d,index:s,face:null,object:u})}}(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fi,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mk;return(0,M.Z)(this,n),(r=s.call(this)).type="Points",r.geometry=a,r.material=o,r.updateMorphTargets(),r}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.material=a.material,this.geometry=a.geometry,this}},{key:"raycast",value:function(a,o){var u=this.geometry,c=this.matrixWorld,d=a.params.Points.threshold,m=u.drawRange;if(null===u.boundingSphere&&u.computeBoundingSphere(),CO.copy(u.boundingSphere),CO.applyMatrix4(c),CO.radius+=d,!1!==a.ray.intersectsSphere(CO)){J6.copy(c).invert(),iU.copy(a.ray).applyMatrix4(J6);var _=d/((this.scale.x+this.scale.y+this.scale.z)/3),b=_*_;if(u.isBufferGeometry){var E=u.index,I=u.attributes.position;if(null!==E)for(var U=Math.max(0,m.start),H=Math.min(E.count,m.start+m.count);U<H;U++){var te=E.getX(U);SO.fromBufferAttribute(I,te),e5(SO,te,b,c,a,o,this)}else for(var he=Math.max(0,m.start),se=Math.min(I.count,m.start+m.count);he<se;he++)SO.fromBufferAttribute(I,he),e5(SO,he,b,c,a,o,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,u=Object.keys(o);if(u.length>0){var c=o[u[0]];if(void 0!==c){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var d=0,m=c.length;d<m;d++){var _=c[d].name||String(d);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=d}}}}else{var b=a.morphTargets;void 0!==b&&b.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n})(Na).prototype.isPoints=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d,m,_,b){var E;(0,M.Z)(this,n),(E=s.call(this,r,a,o,u,c,d,m,_,b)).format=void 0!==m?m:Yw,E.minFilter=void 0!==d?d:ec,E.magFilter=void 0!==c?c:ec,E.generateMipmaps=!1;var T=(0,wa.Z)(E);return"requestVideoFrameCallback"in r&&r.requestVideoFrameCallback(function I(){T.needsUpdate=!0,r.requestVideoFrameCallback(I)}),E}return(0,D.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var a=this.image;!1=="requestVideoFrameCallback"in a&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(_l).prototype.isVideoTexture=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d,m,_,b,E,T,I){var N;return(0,M.Z)(this,n),(N=s.call(this,null,d,m,_,b,E,u,c,T,I)).image={width:a,height:o},N.mipmaps=r,N.flipY=!1,N.generateMipmaps=!1,N}return n}(_l).prototype.isCompressedTexture=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d,m,_,b){var E;return(0,M.Z)(this,n),(E=s.call(this,r,a,o,u,c,d,m,_,b)).needsUpdate=!0,E}return n}(_l).prototype.isCanvasTexture=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d,m,_,b,E){var T;if((0,M.Z)(this,n),(E=void 0!==E?E:Kw)!==Kw&&E!==mA)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===o&&E===Kw&&(o=1012),void 0===o&&E===mA&&(o=pA),(T=s.call(this,null,u,c,d,m,_,E,o,b)).image={width:r,height:a},T.magFilter=void 0!==m?m:Ao,T.minFilter=void 0!==_?_:Ao,T.flipY=!1,T.generateMipmaps=!1,T}return n}(_l).prototype.isDepthTexture=!0;var Ak=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,M.Z)(this,n),(r=s.call(this)).type="PolyhedronGeometry",r.parameters={vertices:a,indices:o,radius:u,detail:c};var d=[],m=[];function _(le){for(var he=new xe,se=new xe,ye=new xe,Ue=0;Ue<o.length;Ue+=3)W(o[Ue+0],he),W(o[Ue+1],se),W(o[Ue+2],ye),b(he,se,ye,le)}function b(le,he,se,ye){for(var Ue=ye+1,Ve=[],Fe=0;Fe<=Ue;Fe++){Ve[Fe]=[];for(var et=le.clone().lerp(se,Fe/Ue),Ye=he.clone().lerp(se,Fe/Ue),tt=Ue-Fe,wt=0;wt<=tt;wt++)Ve[Fe][wt]=0===wt&&Fe===Ue?et:et.clone().lerp(Ye,wt/tt)}for(var pt=0;pt<Ue;pt++)for(var Mt=0;Mt<2*(Ue-pt)-1;Mt++){var $t=Math.floor(Mt/2);Mt%2==0?(N(Ve[pt][$t+1]),N(Ve[pt+1][$t]),N(Ve[pt][$t])):(N(Ve[pt][$t+1]),N(Ve[pt+1][$t+1]),N(Ve[pt+1][$t]))}}function E(le){for(var he=new xe,se=0;se<d.length;se+=3)he.x=d[se+0],he.y=d[se+1],he.z=d[se+2],he.normalize().multiplyScalar(le),d[se+0]=he.x,d[se+1]=he.y,d[se+2]=he.z}function T(){for(var le=new xe,he=0;he<d.length;he+=3){le.x=d[he+0],le.y=d[he+1],le.z=d[he+2];var se=te(le)/2/Math.PI+.5,ye=ue(le)/Math.PI+.5;m.push(se,1-ye)}U(),I()}function I(){for(var le=0;le<m.length;le+=6){var he=m[le+0],se=m[le+2],ye=m[le+4],Ue=Math.max(he,se,ye),Ve=Math.min(he,se,ye);Ue>.9&&Ve<.1&&(he<.2&&(m[le+0]+=1),se<.2&&(m[le+2]+=1),ye<.2&&(m[le+4]+=1))}}function N(le){d.push(le.x,le.y,le.z)}function W(le,he){var se=3*le;he.x=a[se+0],he.y=a[se+1],he.z=a[se+2]}function U(){for(var le=new xe,he=new xe,se=new xe,ye=new xe,Ue=new Yt,Ve=new Yt,Fe=new Yt,et=0,Ye=0;et<d.length;et+=9,Ye+=6){le.set(d[et+0],d[et+1],d[et+2]),he.set(d[et+3],d[et+4],d[et+5]),se.set(d[et+6],d[et+7],d[et+8]),Ue.set(m[Ye+0],m[Ye+1]),Ve.set(m[Ye+2],m[Ye+3]),Fe.set(m[Ye+4],m[Ye+5]),ye.copy(le).add(he).add(se).divideScalar(3);var tt=te(ye);H(Ue,Ye+0,le,tt),H(Ve,Ye+2,he,tt),H(Fe,Ye+4,se,tt)}}function H(le,he,se,ye){ye<0&&1===le.x&&(m[he]=le.x-1),0===se.x&&0===se.z&&(m[he]=ye/2/Math.PI+.5)}function te(le){return Math.atan2(le.z,-le.x)}function ue(le){return Math.atan2(-le.y,Math.sqrt(le.x*le.x+le.z*le.z))}return _(c),E(u),T(),r.setAttribute("position",new Fr(d,3)),r.setAttribute("normal",new Fr(d.slice(),3)),r.setAttribute("uv",new Fr(m,2)),0===c?r.computeVertexNormals():r.normalizeNormals(),r}return(0,D.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.vertices,a.indices,a.radius,a.details)}}]),n}(Fi),Xc=(new xe,new xe,new xe,new bl,function(){function i(){(0,M.Z)(this,i),this.type="Curve",this.arcLengthDivisions=200}return(0,D.Z)(i,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(n,r){var a=this.getUtoTmapping(n);return this.getPoint(a,r)}},{key:"getPoints",value:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,r=[],a=0;a<=n;a++)r.push(this.getPoint(a/n));return r}},{key:"getSpacedPoints",value:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,r=[],a=0;a<=n;a++)r.push(this.getPointAt(a/n));return r}},{key:"getLength",value:function(){var n=this.getLengths();return n[n.length-1]}},{key:"getLengths",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a,r=[],o=this.getPoint(0),u=0;r.push(0);for(var c=1;c<=n;c++)u+=(a=this.getPoint(c/n)).distanceTo(o),r.push(u),o=a;return this.cacheArcLengths=r,r}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(n,r){var c,a=this.getLengths(),o=0,u=a.length;c=r||n*a[u-1];for(var _,d=0,m=u-1;d<=m;)if((_=a[o=Math.floor(d+(m-d)/2)]-c)<0)d=o+1;else{if(!(_>0)){m=o;break}m=o-1}if(a[o=m]===c)return o/(u-1);var b=a[o];return(o+(c-b)/(a[o+1]-b))/(u-1)}},{key:"getTangent",value:function(n,r){var a=1e-4,o=n-a,u=n+a;o<0&&(o=0),u>1&&(u=1);var c=this.getPoint(o),d=this.getPoint(u),m=r||(c.isVector2?new Yt:new xe);return m.copy(d).sub(c).normalize(),m}},{key:"getTangentAt",value:function(n,r){var a=this.getUtoTmapping(n);return this.getTangent(a,r)}},{key:"computeFrenetFrames",value:function(n,r){for(var a=new xe,o=[],u=[],c=[],d=new xe,m=new Cr,_=0;_<=n;_++)o[_]=this.getTangentAt(_/n,new xe);u[0]=new xe,c[0]=new xe;var E=Number.MAX_VALUE,T=Math.abs(o[0].x),I=Math.abs(o[0].y),N=Math.abs(o[0].z);T<=E&&(E=T,a.set(1,0,0)),I<=E&&(E=I,a.set(0,1,0)),N<=E&&a.set(0,0,1),d.crossVectors(o[0],a).normalize(),u[0].crossVectors(o[0],d),c[0].crossVectors(o[0],u[0]);for(var W=1;W<=n;W++){if(u[W]=u[W-1].clone(),c[W]=c[W-1].clone(),d.crossVectors(o[W-1],o[W]),d.length()>Number.EPSILON){d.normalize();var U=Math.acos(hu(o[W-1].dot(o[W]),-1,1));u[W].applyMatrix4(m.makeRotationAxis(d,U))}c[W].crossVectors(o[W],u[W])}if(!0===r){var H=Math.acos(hu(u[0].dot(u[n]),-1,1));H/=n,o[0].dot(d.crossVectors(u[0],u[n]))>0&&(H=-H);for(var te=1;te<=n;te++)u[te].applyMatrix4(m.makeRotationAxis(o[te],H*te)),c[te].crossVectors(o[te],u[te])}return{tangents:o,normals:u,binormals:c}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}},{key:"toJSON",value:function(){var n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}},{key:"fromJSON",value:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}]),i}()),AO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,_=arguments.length>6&&void 0!==arguments[6]&&arguments[6],b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,M.Z)(this,n),(r=s.call(this)).type="EllipseCurve",r.aX=a,r.aY=o,r.xRadius=u,r.yRadius=c,r.aStartAngle=d,r.aEndAngle=m,r.aClockwise=_,r.aRotation=b,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a,o){for(var u=o||new Yt,c=2*Math.PI,d=this.aEndAngle-this.aStartAngle,m=Math.abs(d)<Number.EPSILON;d<0;)d+=c;for(;d>c;)d-=c;d<Number.EPSILON&&(d=m?0:c),!0===this.aClockwise&&!m&&(d===c?d=-c:d-=c);var _=this.aStartAngle+a*d,b=this.aX+this.xRadius*Math.cos(_),E=this.aY+this.yRadius*Math.sin(_);if(0!==this.aRotation){var T=Math.cos(this.aRotation),I=Math.sin(this.aRotation),N=b-this.aX,W=E-this.aY;b=N*T-W*I+this.aX,E=N*I+W*T+this.aY}return u.set(b,E)}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}]),n}(Xc);AO.prototype.isEllipseCurve=!0;var a5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u,c,d){var m;return(0,M.Z)(this,n),(m=s.call(this,r,a,o,o,u,c,d)).type="ArcCurve",m}return n}(AO);function uU(){var i=0,s=0,n=0,r=0;function a(o,u,c,d){i=o,s=c,n=-3*o+3*u-2*c-d,r=2*o-2*u+c+d}return{initCatmullRom:function(u,c,d,m,_){a(c,d,_*(d-u),_*(m-c))},initNonuniformCatmullRom:function(u,c,d,m,_,b,E){var T=(c-u)/_-(d-u)/(_+b)+(d-c)/b,I=(d-c)/b-(m-c)/(b+E)+(m-d)/E;a(c,d,T*=b,I*=b)},calc:function(u){var c=u*u;return i+s*u+n*c+r*(c*u)}}}a5.prototype.isArcCurve=!0;var xO=new xe,lU=new uU,cU=new uU,fU=new uU,s5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,M.Z)(this,n),(r=s.call(this)).type="CatmullRomCurve3",r.points=a,r.closed=o,r.curveType=u,r.tension=c,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var E,T,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe,u=o,c=this.points,d=c.length,m=(d-(this.closed?0:1))*a,_=Math.floor(m),b=m-_;this.closed?_+=_>0?0:(Math.floor(Math.abs(_)/d)+1)*d:0===b&&_===d-1&&(_=d-2,b=1),this.closed||_>0?E=c[(_-1)%d]:(xO.subVectors(c[0],c[1]).add(c[0]),E=xO);var I=c[_%d],N=c[(_+1)%d];if(this.closed||_+2<d?T=c[(_+2)%d]:(xO.subVectors(c[d-1],c[d-2]).add(c[d-1]),T=xO),"centripetal"===this.curveType||"chordal"===this.curveType){var W="chordal"===this.curveType?.5:.25,U=Math.pow(E.distanceToSquared(I),W),H=Math.pow(I.distanceToSquared(N),W),te=Math.pow(N.distanceToSquared(T),W);H<1e-4&&(H=1),U<1e-4&&(U=H),te<1e-4&&(te=H),lU.initNonuniformCatmullRom(E.x,I.x,N.x,T.x,U,H,te),cU.initNonuniformCatmullRom(E.y,I.y,N.y,T.y,U,H,te),fU.initNonuniformCatmullRom(E.z,I.z,N.z,T.z,U,H,te)}else"catmullrom"===this.curveType&&(lU.initCatmullRom(E.x,I.x,N.x,T.x,this.tension),cU.initCatmullRom(E.y,I.y,N.y,T.y,this.tension),fU.initCatmullRom(E.z,I.z,N.z,T.z,this.tension));return u.set(lU.calc(b),cU.calc(b),fU.calc(b)),u}},{key:"copy",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++)this.points.push(a.points[o].clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);a.points=[];for(var o=0,u=this.points.length;o<u;o++)a.points.push(this.points[o].toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}},{key:"fromJSON",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++){var c=a.points[o];this.points.push((new xe).fromArray(c))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}]),n}(Xc);function o5(i,s,n,r,a){var o=.5*(r-s),u=.5*(a-n),c=i*i;return(2*n-2*r+o+u)*(i*c)+(-3*n+3*r-2*o-u)*c+o*i+n}function NA(i,s,n,r){return function(i,s){var n=1-i;return n*n*s}(i,s)+function(i,s){return 2*(1-i)*i*s}(i,n)+function(i,s){return i*i*s}(i,r)}function FA(i,s,n,r,a){return function(i,s){var n=1-i;return n*n*n*s}(i,s)+function(i,s){var n=1-i;return 3*n*n*i*s}(i,n)+function(i,s){return 3*(1-i)*i*i*s}(i,r)+function(i,s){return i*i*i*s}(i,a)}s5.prototype.isCatmullRomCurve3=!0;var hU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yt,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Yt;return(0,M.Z)(this,n),(r=s.call(this)).type="CubicBezierCurve",r.v0=a,r.v1=o,r.v2=u,r.v3=c,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,u=o,c=this.v0,d=this.v1,m=this.v2,_=this.v3;return u.set(FA(a,c.x,d.x,m.x,_.x),FA(a,c.y,d.y,m.y,_.y)),u}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}]),n}(Xc);hU.prototype.isCubicBezierCurve=!0;var u5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xe,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new xe;return(0,M.Z)(this,n),(r=s.call(this)).type="CubicBezierCurve3",r.v0=a,r.v1=o,r.v2=u,r.v3=c,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe,u=o,c=this.v0,d=this.v1,m=this.v2,_=this.v3;return u.set(FA(a,c.x,d.x,m.x,_.x),FA(a,c.y,d.y,m.y,_.y),FA(a,c.z,d.z,m.z,_.z)),u}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}]),n}(Xc);u5.prototype.isCubicBezierCurve3=!0;var IO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt;return(0,M.Z)(this,n),(r=s.call(this)).type="LineCurve",r.v1=a,r.v2=o,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,u=o;return 1===a?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(a).add(this.v1)),u}},{key:"getPointAt",value:function(a,o){return this.getPoint(a,o)}},{key:"getTangent",value:function(a,o){var u=o||new Yt;return u.copy(this.v2).sub(this.v1).normalize(),u}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Xc);IO.prototype.isLineCurve=!0;var $oe=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe;return(0,M.Z)(this,n),(r=s.call(this)).type="LineCurve3",r.isLineCurve3=!0,r.v1=a,r.v2=o,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe,u=o;return 1===a?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(a).add(this.v1)),u}},{key:"getPointAt",value:function(a,o){return this.getPoint(a,o)}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Xc),dU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yt;return(0,M.Z)(this,n),(r=s.call(this)).type="QuadraticBezierCurve",r.v0=a,r.v1=o,r.v2=u,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,u=o,c=this.v0,d=this.v1,m=this.v2;return u.set(NA(a,c.x,d.x,m.x),NA(a,c.y,d.y,m.y)),u}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Xc);dU.prototype.isQuadraticBezierCurve=!0;var vU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new xe;return(0,M.Z)(this,n),(r=s.call(this)).type="QuadraticBezierCurve3",r.v0=a,r.v1=o,r.v2=u,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe,u=o,c=this.v0,d=this.v1,m=this.v2;return u.set(NA(a,c.x,d.x,m.x),NA(a,c.y,d.y,m.y),NA(a,c.z,d.z,m.z)),u}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Xc);vU.prototype.isQuadraticBezierCurve3=!0;var pU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,M.Z)(this,n),(r=s.call(this)).type="SplineCurve",r.points=a,r}return(0,D.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,u=o,c=this.points,d=(c.length-1)*a,m=Math.floor(d),_=d-m,b=c[0===m?m:m-1],E=c[m],T=c[m>c.length-2?c.length-1:m+1],I=c[m>c.length-3?c.length-1:m+2];return u.set(o5(_,b.x,E.x,T.x,I.x),o5(_,b.y,E.y,T.y,I.y)),u}},{key:"copy",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++)this.points.push(a.points[o].clone());return this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);a.points=[];for(var o=0,u=this.points.length;o<u;o++)a.points.push(this.points[o].toArray());return a}},{key:"fromJSON",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++){var c=a.points[o];this.points.push((new Yt).fromArray(c))}return this}}]),n}(Xc);pU.prototype.isSplineCurve=!0;var mU=Object.freeze({__proto__:null,ArcCurve:a5,CatmullRomCurve3:s5,CubicBezierCurve:hU,CubicBezierCurve3:u5,EllipseCurve:AO,LineCurve:IO,LineCurve3:$oe,QuadraticBezierCurve:dU,QuadraticBezierCurve3:vU,SplineCurve:pU}),gU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="Path",a.currentPoint=new Yt,r&&a.setFromPoints(r),a}return(0,D.Z)(n,[{key:"setFromPoints",value:function(a){this.moveTo(a[0].x,a[0].y);for(var o=1,u=a.length;o<u;o++)this.lineTo(a[o].x,a[o].y);return this}},{key:"moveTo",value:function(a,o){return this.currentPoint.set(a,o),this}},{key:"lineTo",value:function(a,o){var u=new IO(this.currentPoint.clone(),new Yt(a,o));return this.curves.push(u),this.currentPoint.set(a,o),this}},{key:"quadraticCurveTo",value:function(a,o,u,c){var d=new dU(this.currentPoint.clone(),new Yt(a,o),new Yt(u,c));return this.curves.push(d),this.currentPoint.set(u,c),this}},{key:"bezierCurveTo",value:function(a,o,u,c,d,m){var _=new hU(this.currentPoint.clone(),new Yt(a,o),new Yt(u,c),new Yt(d,m));return this.curves.push(_),this.currentPoint.set(d,m),this}},{key:"splineThru",value:function(a){var o=[this.currentPoint.clone()].concat(a),u=new pU(o);return this.curves.push(u),this.currentPoint.copy(a[a.length-1]),this}},{key:"arc",value:function(a,o,u,c,d,m){return this.absarc(a+this.currentPoint.x,o+this.currentPoint.y,u,c,d,m),this}},{key:"absarc",value:function(a,o,u,c,d,m){return this.absellipse(a,o,u,u,c,d,m),this}},{key:"ellipse",value:function(a,o,u,c,d,m,_,b){return this.absellipse(a+this.currentPoint.x,o+this.currentPoint.y,u,c,d,m,_,b),this}},{key:"absellipse",value:function(a,o,u,c,d,m,_,b){var E=new AO(a,o,u,c,d,m,_,b);if(this.curves.length>0){var T=E.getPoint(0);T.equals(this.currentPoint)||this.lineTo(T.x,T.y)}this.curves.push(E);var I=E.getPoint(1);return this.currentPoint.copy(I),this}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.currentPoint.copy(a.currentPoint),this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return a.currentPoint=this.currentPoint.toArray(),a}},{key:"fromJSON",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.currentPoint.fromArray(a.currentPoint),this}}]),n}(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="CurvePath",r.curves=[],r.autoClose=!1,r}return(0,D.Z)(n,[{key:"add",value:function(a){this.curves.push(a)}},{key:"closePath",value:function(){var a=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);a.equals(o)||this.curves.push(new IO(o,a))}},{key:"getPoint",value:function(a,o){for(var u=a*this.getLength(),c=this.getCurveLengths(),d=0;d<c.length;){if(c[d]>=u){var m=c[d]-u,_=this.curves[d],b=_.getLength();return _.getPointAt(0===b?0:1-m/b,o)}d++}return null}},{key:"getLength",value:function(){var a=this.getCurveLengths();return a[a.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],o=0,u=0,c=this.curves.length;u<c;u++)o+=this.curves[u].getLength(),a.push(o);return this.cacheLengths=a,a}},{key:"getSpacedPoints",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,o=[],u=0;u<=a;u++)o.push(this.getPoint(u/a));return this.autoClose&&o.push(o[0]),o}},{key:"getPoints",value:function(){for(var u,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,o=[],c=0,d=this.curves;c<d.length;c++)for(var m=d[c],_=m&&m.isEllipseCurve?2*a:m&&(m.isLineCurve||m.isLineCurve3)?1:m&&m.isSplineCurve?a*m.points.length:a,b=m.getPoints(_),E=0;E<b.length;E++){var T=b[E];u&&u.equals(T)||(o.push(T),u=T)}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}},{key:"copy",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.curves=[];for(var o=0,u=a.curves.length;o<u;o++)this.curves.push(a.curves[o].clone());return this.autoClose=a.autoClose,this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);a.autoClose=this.autoClose,a.curves=[];for(var o=0,u=this.curves.length;o<u;o++)a.curves.push(this.curves[o].toJSON());return a}},{key:"fromJSON",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.autoClose=a.autoClose,this.curves=[];for(var o=0,u=a.curves.length;o<u;o++){var c=a.curves[o];this.curves.push((new mU[c.type]).fromJSON(c))}return this}}]),n}(Xc)),ZA=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).uuid=Yc(),a.type="Shape",a.holes=[],a}return(0,D.Z)(n,[{key:"getPointsHoles",value:function(a){for(var o=[],u=0,c=this.holes.length;u<c;u++)o[u]=this.holes[u].getPoints(a);return o}},{key:"extractPoints",value:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}},{key:"copy",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.holes=[];for(var o=0,u=a.holes.length;o<u;o++)this.holes.push(a.holes[o].clone());return this}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);a.uuid=this.uuid,a.holes=[];for(var o=0,u=this.holes.length;o<u;o++)a.holes.push(this.holes[o].toJSON());return a}},{key:"fromJSON",value:function(a){(0,_e.Z)((0,de.Z)(n.prototype),"fromJSON",this).call(this,a),this.uuid=a.uuid,this.holes=[];for(var o=0,u=a.holes.length;o<u;o++){var c=a.holes[o];this.holes.push((new gU).fromJSON(c))}return this}}]),n}(gU);function l5(i,s,n,r,a){var o,u;if(a===function(i,s,n,r){for(var a=0,o=s,u=n-r;o<n;o+=r)a+=(i[u]-i[o])*(i[o+1]+i[u+1]),u=o;return a}(i,s,n,r)>0)for(o=s;o<n;o+=r)u=h5(o,i[o],i[o+1],u);else for(o=n-r;o>=s;o-=r)u=h5(o,i[o],i[o+1],u);return u&&DO(u,u.next)&&(VA(u),u=u.next),u}function Hm(i,s){if(!i)return i;s||(s=i);var r,n=i;do{if(r=!1,n.steiner||!DO(n,n.next)&&0!==Es(n.prev,n,n.next))n=n.next;else{if(VA(n),(n=s=n.prev)===n.next)break;r=!0}}while(r||n!==s);return s}function BA(i,s,n,r,a,o,u){if(i){!u&&o&&function(i,s,n,r){var a=i;do{null===a.z&&(a.z=yU(a.x,a.y,s,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,function(i){var s,n,r,a,o,u,c,d,m=1;do{for(n=i,i=null,o=null,u=0;n;){for(u++,r=n,c=0,s=0;s<m&&(c++,r=r.nextZ);s++);for(d=m;c>0||d>0&&r;)0!==c&&(0===d||!r||n.z<=r.z)?(a=n,n=n.nextZ,c--):(a=r,r=r.nextZ,d--),o?o.nextZ=a:i=a,a.prevZ=o,o=a;n=r}o.nextZ=null,m*=2}while(u>1)}(a)}(i,r,a,o);for(var d,m,c=i;i.prev!==i.next;)if(d=i.prev,m=i.next,o?eue(i,r,a,o):Joe(i))s.push(d.i/n),s.push(i.i/n),s.push(m.i/n),VA(i),i=m.next,c=m.next;else if((i=m)===c){u?1===u?BA(i=tue(Hm(i),s,n),s,n,r,a,o,2):2===u&&nue(i,s,n,r,a,o):BA(Hm(i),s,n,r,a,o,1);break}}}function Joe(i){var s=i.prev,n=i,r=i.next;if(Es(s,n,r)>=0)return!1;for(var a=i.next.next;a!==i.prev;){if(Ik(s.x,s.y,n.x,n.y,r.x,r.y,a.x,a.y)&&Es(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function eue(i,s,n,r){var a=i.prev,o=i,u=i.next;if(Es(a,o,u)>=0)return!1;for(var m=a.x>o.x?a.x>u.x?a.x:u.x:o.x>u.x?o.x:u.x,_=a.y>o.y?a.y>u.y?a.y:u.y:o.y>u.y?o.y:u.y,b=yU(a.x<o.x?a.x<u.x?a.x:u.x:o.x<u.x?o.x:u.x,a.y<o.y?a.y<u.y?a.y:u.y:o.y<u.y?o.y:u.y,s,n,r),E=yU(m,_,s,n,r),T=i.prevZ,I=i.nextZ;T&&T.z>=b&&I&&I.z<=E;){if(T!==i.prev&&T!==i.next&&Ik(a.x,a.y,o.x,o.y,u.x,u.y,T.x,T.y)&&Es(T.prev,T,T.next)>=0||(T=T.prevZ,I!==i.prev&&I!==i.next&&Ik(a.x,a.y,o.x,o.y,u.x,u.y,I.x,I.y)&&Es(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;T&&T.z>=b;){if(T!==i.prev&&T!==i.next&&Ik(a.x,a.y,o.x,o.y,u.x,u.y,T.x,T.y)&&Es(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;I&&I.z<=E;){if(I!==i.prev&&I!==i.next&&Ik(a.x,a.y,o.x,o.y,u.x,u.y,I.x,I.y)&&Es(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function tue(i,s,n){var r=i;do{var a=r.prev,o=r.next.next;!DO(a,o)&&c5(a,r,r.next,o)&&UA(a,o)&&UA(o,a)&&(s.push(a.i/n),s.push(r.i/n),s.push(o.i/n),VA(r),VA(r.next),r=i=o),r=r.next}while(r!==i);return Hm(r)}function nue(i,s,n,r,a,o){var u=i;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&fue(u,c)){var d=f5(u,c);return u=Hm(u,u.next),d=Hm(d,d.next),BA(u,s,n,r,a,o),void BA(d,s,n,r,a,o)}c=c.next}u=u.next}while(u!==i)}function rue(i,s,n,r){var o,u,m,a=[];for(o=0,u=s.length;o<u;o++)(m=l5(i,s[o]*r,o<u-1?s[o+1]*r:i.length,r,!1))===m.next&&(m.steiner=!0),a.push(cue(m));for(a.sort(iue),o=0;o<a.length;o++)aue(a[o],n),n=Hm(n,n.next);return n}function iue(i,s){return i.x-s.x}function aue(i,s){if(s=function(i,s){var u,n=s,r=i.x,a=i.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var c=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(c<=r&&c>o){if(o=c,c===r){if(a===n.y)return n;if(a===n.next.y)return n.next}u=n.x<n.next.x?n:n.next}}n=n.next}while(n!==s);if(!u)return null;if(r===o)return u;var E,d=u,m=u.x,_=u.y,b=1/0;n=u;do{r>=n.x&&n.x>=m&&r!==n.x&&Ik(a<_?r:o,a,m,_,a<_?o:r,a,n.x,n.y)&&(E=Math.abs(a-n.y)/(r-n.x),UA(n,i)&&(E<b||E===b&&(n.x>u.x||n.x===u.x&&oue(u,n)))&&(u=n,b=E)),n=n.next}while(n!==d);return u}(i,s)){var n=f5(s,i);Hm(s,s.next),Hm(n,n.next)}}function oue(i,s){return Es(i.prev,i,s.prev)<0&&Es(s.next,i,i.next)<0}function yU(i,s,n,r,a){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-n)*a)|i<<8))|i<<4))|i<<2))|i<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-r)*a)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function cue(i){var s=i,n=i;do{(s.x<n.x||s.x===n.x&&s.y<n.y)&&(n=s),s=s.next}while(s!==i);return n}function Ik(i,s,n,r,a,o,u,c){return(a-u)*(s-c)-(i-u)*(o-c)>=0&&(i-u)*(r-c)-(n-u)*(s-c)>=0&&(n-u)*(o-c)-(a-u)*(r-c)>=0}function fue(i,s){return i.next.i!==s.i&&i.prev.i!==s.i&&!function(i,s){var n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==s.i&&n.next.i!==s.i&&c5(n,n.next,i,s))return!0;n=n.next}while(n!==i);return!1}(i,s)&&(UA(i,s)&&UA(s,i)&&function(i,s){var n=i,r=!1,a=(i.x+s.x)/2,o=(i.y+s.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&a<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==i);return r}(i,s)&&(Es(i.prev,i,s.prev)||Es(i,s.prev,s))||DO(i,s)&&Es(i.prev,i,i.next)>0&&Es(s.prev,s,s.next)>0)}function Es(i,s,n){return(s.y-i.y)*(n.x-s.x)-(s.x-i.x)*(n.y-s.y)}function DO(i,s){return i.x===s.x&&i.y===s.y}function c5(i,s,n,r){var a=PO(Es(i,s,n)),o=PO(Es(i,s,r)),u=PO(Es(n,r,i)),c=PO(Es(n,r,s));return!!(a!==o&&u!==c||0===a&&RO(i,n,s)||0===o&&RO(i,r,s)||0===u&&RO(n,i,r)||0===c&&RO(n,s,r))}function RO(i,s,n){return s.x<=Math.max(i.x,n.x)&&s.x>=Math.min(i.x,n.x)&&s.y<=Math.max(i.y,n.y)&&s.y>=Math.min(i.y,n.y)}function PO(i){return i>0?1:i<0?-1:0}function UA(i,s){return Es(i.prev,i,i.next)<0?Es(i,s,i.next)>=0&&Es(i,i.prev,s)>=0:Es(i,s,i.prev)<0||Es(i,i.next,s)<0}function f5(i,s){var n=new _U(i.i,i.x,i.y),r=new _U(s.i,s.x,s.y),a=i.next,o=s.prev;return i.next=s,s.prev=i,n.next=a,a.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function h5(i,s,n,r){var a=new _U(i,s,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function VA(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function _U(i,s,n){this.i=i,this.x=s,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Dk=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,null,[{key:"area",value:function(n){for(var r=n.length,a=0,o=r-1,u=0;u<r;o=u++)a+=n[o].x*n[u].y-n[u].x*n[o].y;return.5*a}},{key:"isClockWise",value:function(n){return i.area(n)<0}},{key:"triangulateShape",value:function(n,r){var a=[],o=[],u=[];d5(n),v5(a,n);var c=n.length;r.forEach(d5);for(var d=0;d<r.length;d++)o.push(c),c+=r[d].length,v5(a,r[d]);for(var m=function(s,n){var d,m,_,b,E,T,I,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=n&&n.length,o=a?n[0]*r:s.length,u=l5(s,0,o,r,!0),c=[];if(!u||u.next===u.prev)return c;if(a&&(u=rue(s,n,u,r)),s.length>80*r){d=_=s[0],m=b=s[1];for(var N=r;N<o;N+=r)(E=s[N])<d&&(d=E),(T=s[N+1])<m&&(m=T),E>_&&(_=E),T>b&&(b=T);I=0!==(I=Math.max(_-d,b-m))?1/I:0}return BA(u,c,r,d,m,I),c}(a,o),_=0;_<m.length;_+=3)u.push(m.slice(_,_+3));return u}}]),i}();function d5(i){var s=i.length;s>2&&i[s-1].equals(i[0])&&i.pop()}function v5(i,s){for(var n=0;n<s.length;n++)i.push(s[n].x),i.push(s[n].y)}var Rk=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ZA([new Yt(.5,.5),new Yt(-.5,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,M.Z)(this,n),(r=s.call(this)).type="ExtrudeGeometry",r.parameters={shapes:a,options:o},a=Array.isArray(a)?a:[a];for(var u=(0,wa.Z)(r),c=[],d=[],m=0,_=a.length;m<_;m++){var b=a[m];E(b)}function E(T){var I=[],N=void 0!==o.curveSegments?o.curveSegments:12,W=void 0!==o.steps?o.steps:1,U=void 0!==o.depth?o.depth:1,H=void 0===o.bevelEnabled||o.bevelEnabled,te=void 0!==o.bevelThickness?o.bevelThickness:.2,ue=void 0!==o.bevelSize?o.bevelSize:te-.1,le=void 0!==o.bevelOffset?o.bevelOffset:0,he=void 0!==o.bevelSegments?o.bevelSegments:3,se=o.extrudePath,ye=void 0!==o.UVGenerator?o.UVGenerator:pue;void 0!==o.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),U=o.amount);var Ue,Fe,et,Ye,tt,Ve=!1;se&&(Ue=se.getSpacedPoints(W),Ve=!0,H=!1,Fe=se.computeFrenetFrames(W,!1),et=new xe,Ye=new xe,tt=new xe),H||(he=0,te=0,ue=0,le=0);var wt=T.extractPoints(N),pt=wt.shape,Mt=wt.holes;if(!Dk.isClockWise(pt)){pt=pt.reverse();for(var _n=0,fn=Mt.length;_n<fn;_n++){var tn=Mt[_n];Dk.isClockWise(tn)&&(Mt[_n]=tn.reverse())}}for(var un=Dk.triangulateShape(pt,Mt),Pn=pt,Tr=0,nr=Mt.length;Tr<nr;Tr++)pt=pt.concat(Mt[Tr]);function on(zn,Qn,_r){return Qn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Qn.clone().multiplyScalar(_r).add(zn)}var Nn=pt.length,sn=un.length;function In(zn,Qn,_r){var Ei,Jn,ji,ya=zn.x-Qn.x,Zi=zn.y-Qn.y,Ga=_r.x-zn.x,Jo=_r.y-zn.y,ho=ya*ya+Zi*Zi;if(Math.abs(ya*Jo-Zi*Ga)>Number.EPSILON){var Ss=Math.sqrt(ho),qm=Math.sqrt(Ga*Ga+Jo*Jo),WA=Qn.x-Zi/Ss,wv=Qn.y+ya/Ss,J5=((_r.x-Jo/qm-WA)*Jo-(_r.y+Ga/qm-wv)*Ga)/(ya*Jo-Zi*Ga),eq=(Ei=WA+ya*J5-zn.x)*Ei+(Jn=wv+Zi*J5-zn.y)*Jn;if(eq<=2)return new Yt(Ei,Jn);ji=Math.sqrt(eq/2)}else{var GO=!1;ya>Number.EPSILON?Ga>Number.EPSILON&&(GO=!0):ya<-Number.EPSILON?Ga<-Number.EPSILON&&(GO=!0):Math.sign(Zi)===Math.sign(Jo)&&(GO=!0),GO?(Ei=-Zi,Jn=ya,ji=Math.sqrt(ho)):(Ei=ya,Jn=Zi,ji=Math.sqrt(ho/2))}return new Yt(Ei/ji,Jn/ji)}for(var Mn=[],Cn=0,Ht=Pn.length,an=Ht-1,hn=Cn+1;Cn<Ht;Cn++,an++,hn++)an===Ht&&(an=0),hn===Ht&&(hn=0),Mn[Cn]=In(Pn[Cn],Pn[an],Pn[hn]);for(var ni,gr=[],Vi=Mn.concat(),Ke=0,Pe=Mt.length;Ke<Pe;Ke++){var Xt=Mt[Ke];ni=[];for(var kn=0,Dn=Xt.length,Hn=Dn-1,cr=kn+1;kn<Dn;kn++,Hn++,cr++)Hn===Dn&&(Hn=0),cr===Dn&&(cr=0),ni[kn]=In(Xt[kn],Xt[Hn],Xt[cr]);gr.push(ni),Vi=Vi.concat(ni)}for(var ir=0;ir<he;ir++){for(var Zr=ir/he,Xr=te*Math.cos(Zr*Math.PI/2),Ii=ue*Math.sin(Zr*Math.PI/2)+le,bt=0,Un=Pn.length;bt<Un;bt++){var Xn=on(Pn[bt],Mn[bt],Ii);yr(Xn.x,Xn.y,-Xr)}for(var Ur=0,Sr=Mt.length;Ur<Sr;Ur++){var Bn=Mt[Ur];ni=gr[Ur];for(var dt=0,Vn=Bn.length;dt<Vn;dt++){var fi=on(Bn[dt],ni[dt],Ii);yr(fi.x,fi.y,-Xr)}}}for(var ri=ue+le,qr=0;qr<Nn;qr++){var ga=H?on(pt[qr],Vi[qr],ri):pt[qr];Ve?(Ye.copy(Fe.normals[0]).multiplyScalar(ga.x),et.copy(Fe.binormals[0]).multiplyScalar(ga.y),tt.copy(Ue[0]).add(Ye).add(et),yr(tt.x,tt.y,tt.z)):yr(ga.x,ga.y,0)}for(var Cs=1;Cs<=W;Cs++)for(var pu=0;pu<Nn;pu++){var xo=H?on(pt[pu],Vi[pu],ri):pt[pu];Ve?(Ye.copy(Fe.normals[Cs]).multiplyScalar(xo.x),et.copy(Fe.binormals[Cs]).multiplyScalar(xo.y),tt.copy(Ue[Cs]).add(Ye).add(et),yr(tt.x,tt.y,tt.z)):yr(xo.x,xo.y,U/W*Cs)}for(var Qs=he-1;Qs>=0;Qs--){for(var jA=Qs/he,Nk=te*Math.cos(jA*Math.PI/2),VO=ue*Math.sin(jA*Math.PI/2)+le,bv=0,RU=Pn.length;bv<RU;bv++){var Fk=on(Pn[bv],Mn[bv],VO);yr(Fk.x,Fk.y,U+Nk)}for(var k_=0,HO=Mt.length;k_<HO;k_++){var zO=Mt[k_];ni=gr[k_];for(var Zk=0,De=zO.length;Zk<De;Zk++){var At=on(zO[Zk],ni[Zk],VO);Ve?yr(At.x,At.y+Ue[W-1].y,Ue[W-1].x+Nk):yr(At.x,At.y,U+Nk)}}}function Qt(zn,Qn){for(var _r=zn.length;--_r>=0;){var Ei=_r,Jn=_r-1;Jn<0&&(Jn=zn.length-1);for(var ji=0,ya=W+2*he;ji<ya;ji++){var Zi=Nn*ji,Ga=Nn*(ji+1);Di(Qn+Ei+Zi,Qn+Jn+Zi,Qn+Jn+Ga,Qn+Ei+Ga)}}}function yr(zn,Qn,_r){I.push(zn),I.push(Qn),I.push(_r)}function Rr(zn,Qn,_r){ai(zn),ai(Qn),ai(_r);var Ei=c.length/3,Jn=ye.generateTopUV(u,c,Ei-3,Ei-2,Ei-1);mi(Jn[0]),mi(Jn[1]),mi(Jn[2])}function Di(zn,Qn,_r,Ei){ai(zn),ai(Qn),ai(Ei),ai(Qn),ai(_r),ai(Ei);var Jn=c.length/3,ji=ye.generateSideWallUV(u,c,Jn-6,Jn-3,Jn-2,Jn-1);mi(ji[0]),mi(ji[1]),mi(ji[3]),mi(ji[1]),mi(ji[2]),mi(ji[3])}function ai(zn){c.push(I[3*zn+0]),c.push(I[3*zn+1]),c.push(I[3*zn+2])}function mi(zn){d.push(zn.x),d.push(zn.y)}(function(){var zn=c.length/3;if(H){for(var Qn=0,_r=Nn*Qn,Ei=0;Ei<sn;Ei++){var Jn=un[Ei];Rr(Jn[2]+_r,Jn[1]+_r,Jn[0]+_r)}_r=Nn*(Qn=W+2*he);for(var ji=0;ji<sn;ji++){var ya=un[ji];Rr(ya[0]+_r,ya[1]+_r,ya[2]+_r)}}else{for(var Zi=0;Zi<sn;Zi++){var Ga=un[Zi];Rr(Ga[2],Ga[1],Ga[0])}for(var Jo=0;Jo<sn;Jo++){var ho=un[Jo];Rr(ho[0]+Nn*W,ho[1]+Nn*W,ho[2]+Nn*W)}}u.addGroup(zn,c.length/3-zn,0)})(),function(){var zn=c.length/3,Qn=0;Qt(Pn,Qn),Qn+=Pn.length;for(var _r=0,Ei=Mt.length;_r<Ei;_r++){var Jn=Mt[_r];Qt(Jn,Qn),Qn+=Jn.length}u.addGroup(zn,c.length/3-zn,1)}()}return r.setAttribute("position",new Fr(c,3)),r.setAttribute("uv",new Fr(d,2)),r.computeVertexNormals(),r}return(0,D.Z)(n,[{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return function(i,s,n){if(n.shapes=[],Array.isArray(i))for(var r=0,a=i.length;r<a;r++)n.shapes.push(i[r].uuid);else n.shapes.push(i.uuid);return void 0!==s.extrudePath&&(n.options.extrudePath=s.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,a)}}],[{key:"fromJSON",value:function(a,o){for(var u=[],c=0,d=a.shapes.length;c<d;c++)u.push(o[a.shapes[c]]);var _=a.options.extrudePath;return void 0!==_&&(a.options.extrudePath=(new mU[_.type]).fromJSON(_)),new n(u,a.options)}}]),n}(Fi),pue={generateTopUV:function(s,n,r,a,o){var d=n[3*a],m=n[3*a+1],_=n[3*o],b=n[3*o+1];return[new Yt(n[3*r],n[3*r+1]),new Yt(d,m),new Yt(_,b)]},generateSideWallUV:function(s,n,r,a,o,u){var c=n[3*r],d=n[3*r+1],m=n[3*r+2],_=n[3*a],b=n[3*a+1],E=n[3*a+2],T=n[3*o],I=n[3*o+1],N=n[3*o+2],W=n[3*u],U=n[3*u+1],H=n[3*u+2];return Math.abs(d-b)<Math.abs(c-_)?[new Yt(c,1-m),new Yt(_,1-E),new Yt(T,1-N),new Yt(W,1-H)]:[new Yt(d,1-m),new Yt(b,1-E),new Yt(I,1-N),new Yt(U,1-H)]}},bU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,n);var u=(1+Math.sqrt(5))/2,c=[-1,u,0,1,u,0,-1,-u,0,1,-u,0,0,-1,u,0,1,u,0,-1,-u,0,1,-u,u,0,-1,u,0,1,-u,0,-1,-u,0,1],d=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(r=s.call(this,c,d,a,o)).type="IcosahedronGeometry",r.parameters={radius:a,detail:o},r}return(0,D.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.radius,a.detail)}}]),n}(Ak),wU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ZA([new Yt(0,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,M.Z)(this,n),(r=s.call(this)).type="ShapeGeometry",r.parameters={shapes:a,curveSegments:o};var u=[],c=[],d=[],m=[],_=0,b=0;if(!1===Array.isArray(a))T(a);else for(var E=0;E<a.length;E++)T(a[E]),r.addGroup(_,b,E),_+=b,b=0;function T(I){var N=c.length/3,W=I.extractPoints(o),U=W.shape,H=W.holes;!1===Dk.isClockWise(U)&&(U=U.reverse());for(var te=0,ue=H.length;te<ue;te++){var le=H[te];!0===Dk.isClockWise(le)&&(H[te]=le.reverse())}for(var he=Dk.triangulateShape(U,H),se=0,ye=H.length;se<ye;se++)U=U.concat(H[se]);for(var Ve=0,Fe=U.length;Ve<Fe;Ve++){var et=U[Ve];c.push(et.x,et.y,0),d.push(0,0,1),m.push(et.x,et.y)}for(var Ye=0,tt=he.length;Ye<tt;Ye++){var wt=he[Ye];u.push(wt[0]+N,wt[1]+N,wt[2]+N),b+=3}}return r.setIndex(u),r.setAttribute("position",new Fr(c,3)),r.setAttribute("normal",new Fr(d,3)),r.setAttribute("uv",new Fr(m,2)),r}return(0,D.Z)(n,[{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this);return function(i,s){if(s.shapes=[],Array.isArray(i))for(var n=0,r=i.length;n<r;n++)s.shapes.push(i[n].uuid);else s.shapes.push(i.uuid);return s}(this.parameters.shapes,a)}}],[{key:"fromJSON",value:function(a,o){for(var u=[],c=0,d=a.shapes.length;c<d;c++)u.push(o[a.shapes[c]]);return new n(u,a.curveSegments)}}]),n}(Fi);(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="ShadowMaterial",a.color=new lr(0),a.transparent=!0,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this}}]),n})(vu).prototype.isShadowMaterial=!0;var kU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={STANDARD:""},a.type="MeshStandardMaterial",a.color=new lr(16777215),a.roughness=1,a.metalness=0,a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new lr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new Yt(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.roughnessMap=null,a.metalnessMap=null,a.alphaMap=null,a.envMap=null,a.envMapIntensity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.flatShading=!1,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}]),n}(vu);kU.prototype.isMeshStandardMaterial=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={STANDARD:"",PHYSICAL:""},a.type="MeshPhysicalMaterial",a.clearcoatMap=null,a.clearcoatRoughness=0,a.clearcoatRoughnessMap=null,a.clearcoatNormalScale=new Yt(1,1),a.clearcoatNormalMap=null,a.ior=1.5,Object.defineProperty((0,wa.Z)(a),"reflectivity",{get:function(){return hu(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(u){this.ior=(1+.4*u)/(1-.4*u)}}),a.sheenTint=new lr(0),a.sheenRoughness=1,a.transmissionMap=null,a.thickness=.01,a.thicknessMap=null,a.attenuationDistance=0,a.attenuationTint=new lr(1,1,1),a.specularIntensity=1,a.specularIntensityMap=null,a.specularTint=new lr(1,1,1),a.specularTintMap=null,a._sheen=0,a._clearcoat=0,a._transmission=0,a.setValues(r),a}return(0,D.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(a){this._sheen>0!=a>0&&this.version++,this._sheen=a}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(a){this._clearcoat>0!=a>0&&this.version++,this._clearcoat=a}},{key:"transmission",get:function(){return this._transmission},set:function(a){this._transmission>0!=a>0&&this.version++,this._transmission=a}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.ior=a.ior,this.sheen=a.sheen,this.sheenTint.copy(a.sheenTint),this.sheenRoughness=a.sheenRoughness,this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this.thickness=a.thickness,this.thicknessMap=a.thicknessMap,this.attenuationDistance=a.attenuationDistance,this.attenuationTint.copy(a.attenuationTint),this.specularIntensity=a.specularIntensity,this.specularIntensityMap=a.specularIntensityMap,this.specularTint.copy(a.specularTint),this.specularTintMap=a.specularTintMap,this}}]),n}(kU).prototype.isMeshPhysicalMaterial=!0;var OO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshPhongMaterial",a.color=new lr(16777215),a.specular=new lr(1118481),a.shininess=30,a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new lr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new Yt(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.specularMap=null,a.alphaMap=null,a.envMap=null,a.combine=0,a.reflectivity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.flatShading=!1,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}]),n}(vu);OO.prototype.isMeshPhongMaterial=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={TOON:""},a.type="MeshToonMaterial",a.color=new lr(16777215),a.map=null,a.gradientMap=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new lr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new Yt(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.alphaMap=null,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}]),n}(vu).prototype.isMeshToonMaterial=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshNormalMaterial",a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new Yt(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.wireframe=!1,a.wireframeLinewidth=1,a.fog=!1,a.flatShading=!1,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.flatShading=a.flatShading,this}}]),n}(vu).prototype.isMeshNormalMaterial=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshLambertMaterial",a.color=new lr(16777215),a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new lr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.specularMap=null,a.alphaMap=null,a.envMap=null,a.combine=0,a.reflectivity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}]),n}(vu).prototype.isMeshLambertMaterial=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={MATCAP:""},a.type="MeshMatcapMaterial",a.color=new lr(16777215),a.matcap=null,a.map=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new Yt(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.alphaMap=null,a.flatShading=!1,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.flatShading=a.flatShading,this}}]),n}(vu).prototype.isMeshMatcapMaterial=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="LineDashedMaterial",a.scale=1,a.dashSize=3,a.gapSize=1,a.setValues(r),a}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this}}]),n}(Vm).prototype.isLineDashedMaterial=!0;var cs={arraySlice:function(s,n,r){return cs.isTypedArray(s)?new s.constructor(s.subarray(n,void 0!==r?r:s.length)):s.slice(n,r)},convertArray:function(s,n,r){return!s||!r&&s.constructor===n?s:"number"==typeof n.BYTES_PER_ELEMENT?new n(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){for(var r=s.length,a=new Array(r),o=0;o!==r;++o)a[o]=o;return a.sort(function(u,c){return s[u]-s[c]}),a},sortedArray:function(s,n,r){for(var a=s.length,o=new s.constructor(a),u=0,c=0;c!==a;++u)for(var d=r[u]*n,m=0;m!==n;++m)o[c++]=s[d+m];return o},flattenJSON:function(s,n,r,a){for(var o=1,u=s[0];void 0!==u&&void 0===u[a];)u=s[o++];if(void 0!==u){var c=u[a];if(void 0!==c)if(Array.isArray(c))do{void 0!==(c=u[a])&&(n.push(u.time),r.push.apply(r,c)),u=s[o++]}while(void 0!==u);else if(void 0!==c.toArray)do{void 0!==(c=u[a])&&(n.push(u.time),c.toArray(r,r.length)),u=s[o++]}while(void 0!==u);else do{void 0!==(c=u[a])&&(n.push(u.time),r.push(c)),u=s[o++]}while(void 0!==u)}},subclip:function(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,u=s.clone();u.name=n;for(var c=[],d=0;d<u.tracks.length;++d){for(var m=u.tracks[d],_=m.getValueSize(),b=[],E=[],T=0;T<m.times.length;++T){var I=m.times[T]*o;if(!(I<r||I>=a)){b.push(m.times[T]);for(var N=0;N<_;++N)E.push(m.values[T*_+N])}}0!==b.length&&(m.times=cs.convertArray(b,m.times.constructor),m.values=cs.convertArray(E,m.values.constructor),c.push(m))}u.tracks=c;for(var W=1/0,U=0;U<u.tracks.length;++U)W>u.tracks[U].times[0]&&(W=u.tracks[U].times[0]);for(var H=0;H<u.tracks.length;++H)u.tracks[H].shift(-1*W);return u.resetDuration(),u},makeClipAdditive:function(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;a<=0&&(a=30);for(var o=r.tracks.length,u=n/a,c=function(b){var E=r.tracks[b],T=E.ValueTypeName;if("bool"===T||"string"===T)return"continue";var I=s.tracks.find(function($t){return $t.name===E.name&&$t.ValueTypeName===T});if(void 0===I)return"continue";var N=0,W=E.getValueSize();E.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(N=W/3);var U=0,H=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(U=H/3);var te=E.times.length-1,ue=void 0;if(u<=E.times[0])ue=cs.arraySlice(E.values,N,W-N);else if(u>=E.times[te]){var se=te*W+N;ue=cs.arraySlice(E.values,se,se+W-N)}else{var Ue=E.createInterpolant(),Ve=N,Fe=W-N;Ue.evaluate(u),ue=cs.arraySlice(Ue.resultBuffer,Ve,Fe)}"quaternion"===T&&(new Xo).fromArray(ue).normalize().conjugate().toArray(ue);for(var Ye=I.times.length,tt=0;tt<Ye;++tt){var wt=tt*H+U;if("quaternion"===T)Xo.multiplyQuaternionsFlat(I.values,wt,ue,0,I.values,wt);else for(var pt=H-2*U,Mt=0;Mt<pt;++Mt)I.values[wt+Mt]-=ue[Mt]}},d=0;d<o;++d)c(d);return s.blendMode=2501,s}},zm=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.parameterPositions=s,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,D.Z)(i,[{key:"evaluate",value:function(n){var r=this.parameterPositions,a=this._cachedIndex,o=r[a],u=r[a-1];e:{t:{var c;n:{r:if(!(n<o)){for(var d=a+2;;){if(void 0===o){if(n<u)break r;return this._cachedIndex=a=r.length,this.afterEnd_(a-1,n,u)}if(a===d)break;if(u=o,n<(o=r[++a]))break t}c=r.length;break n}if(n>=u)break e;var m=r[1];n<m&&(a=2,u=m);for(var _=a-2;;){if(void 0===u)return this._cachedIndex=0,this.beforeStart_(0,n,o);if(a===_)break;if(o=u,n>=(u=r[--a-1]))break t}c=a,a=0}for(;a<c;){var b=a+c>>>1;n<r[b]?c=b:a=b+1}if(o=r[a],void 0===(u=r[a-1]))return this._cachedIndex=0,this.beforeStart_(0,n,o);if(void 0===o)return this._cachedIndex=a=r.length,this.afterEnd_(a-1,u,n)}this._cachedIndex=a,this.intervalChanged_(a,u,o)}return this.interpolate_(a,u,n,o)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(n){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,u=n*o,c=0;c!==o;++c)r[c]=a[u+c];return r}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),i}();zm.prototype.beforeStart_=zm.prototype.copySampleValue_,zm.prototype.afterEnd_=zm.prototype.copySampleValue_;var yue=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){var c;return(0,M.Z)(this,n),(c=s.call(this,r,a,o,u))._weightPrev=-0,c._offsetPrev=-0,c._weightNext=-0,c._offsetNext=-0,c.DefaultSettings_={endingStart:$w,endingEnd:$w},c}return(0,D.Z)(n,[{key:"intervalChanged_",value:function(a,o,u){var c=this.parameterPositions,d=a-2,m=a+1,_=c[d],b=c[m];if(void 0===_)switch(this.getSettings_().endingStart){case Xw:d=a,_=2*o-u;break;case 2402:_=o+c[d=c.length-2]-c[d+1];break;default:d=a,_=u}if(void 0===b)switch(this.getSettings_().endingEnd){case Xw:m=a,b=2*u-o;break;case 2402:m=1,b=u+c[1]-c[0];break;default:m=a-1,b=o}var E=.5*(u-o),T=this.valueSize;this._weightPrev=E/(o-_),this._weightNext=E/(b-u),this._offsetPrev=d*T,this._offsetNext=m*T}},{key:"interpolate_",value:function(a,o,u,c){for(var d=this.resultBuffer,m=this.sampleValues,_=this.valueSize,b=a*_,E=b-_,T=this._offsetPrev,I=this._offsetNext,N=this._weightPrev,W=this._weightNext,U=(u-o)/(c-o),H=U*U,te=H*U,ue=-N*te+2*N*H-N*U,le=(1+N)*te+(-1.5-2*N)*H+(-.5+N)*U+1,he=(-1-W)*te+(1.5+W)*H+.5*U,se=W*te-W*H,ye=0;ye!==_;++ye)d[ye]=ue*m[T+ye]+le*m[E+ye]+he*m[b+ye]+se*m[I+ye];return d}}]),n}(zm),R5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){return(0,M.Z)(this,n),s.call(this,r,a,o,u)}return(0,D.Z)(n,[{key:"interpolate_",value:function(a,o,u,c){for(var d=this.resultBuffer,m=this.sampleValues,_=this.valueSize,b=a*_,E=b-_,T=(u-o)/(c-o),I=1-T,N=0;N!==_;++N)d[N]=m[E+N]*I+m[b+N]*T;return d}}]),n}(zm),_ue=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){return(0,M.Z)(this,n),s.call(this,r,a,o,u)}return(0,D.Z)(n,[{key:"interpolate_",value:function(a){return this.copySampleValue_(a-1)}}]),n}(zm),ld=function(){function i(s,n,r,a){if((0,M.Z)(this,i),void 0===s)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+s);this.name=s,this.times=cs.convertArray(n,this.TimeBufferType),this.values=cs.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return(0,D.Z)(i,[{key:"InterpolantFactoryMethodDiscrete",value:function(n){return new _ue(this.times,this.values,this.getValueSize(),n)}},{key:"InterpolantFactoryMethodLinear",value:function(n){return new R5(this.times,this.values,this.getValueSize(),n)}},{key:"InterpolantFactoryMethodSmooth",value:function(n){return new yue(this.times,this.values,this.getValueSize(),n)}},{key:"setInterpolation",value:function(n){var r;switch(n){case 2300:r=this.InterpolantFactoryMethodDiscrete;break;case 2301:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){var a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(n===this.DefaultInterpolation)throw new Error(a);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=r,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(n){if(0!==n)for(var r=this.times,a=0,o=r.length;a!==o;++a)r[a]+=n;return this}},{key:"scale",value:function(n){if(1!==n)for(var r=this.times,a=0,o=r.length;a!==o;++a)r[a]*=n;return this}},{key:"trim",value:function(n,r){for(var a=this.times,o=a.length,u=0,c=o-1;u!==o&&a[u]<n;)++u;for(;-1!==c&&a[c]>r;)--c;if(++c,0!==u||c!==o){u>=c&&(u=(c=Math.max(c,1))-1);var d=this.getValueSize();this.times=cs.arraySlice(a,u,c),this.values=cs.arraySlice(this.values,u*d,c*d)}return this}},{key:"validate",value:function(){var n=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);var a=this.times,o=this.values,u=a.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);for(var c=null,d=0;d!==u;d++){var m=a[d];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,m),n=!1;break}if(null!==c&&c>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,m,c),n=!1;break}c=m}if(void 0!==o&&cs.isTypedArray(o))for(var _=0,b=o.length;_!==b;++_){var E=o[_];if(isNaN(E)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_,E),n=!1;break}}return n}},{key:"optimize",value:function(){for(var n=cs.arraySlice(this.times),r=cs.arraySlice(this.values),a=this.getValueSize(),o=2302===this.getInterpolation(),u=n.length-1,c=1,d=1;d<u;++d){var m=!1,_=n[d];if(_!==n[d+1]&&(1!==d||_!==n[0]))if(o)m=!0;else for(var E=d*a,T=E-a,I=E+a,N=0;N!==a;++N){var W=r[E+N];if(W!==r[T+N]||W!==r[I+N]){m=!0;break}}if(m){if(d!==c){n[c]=n[d];for(var U=d*a,H=c*a,te=0;te!==a;++te)r[H+te]=r[U+te]}++c}}if(u>0){n[c]=n[u];for(var ue=u*a,le=c*a,he=0;he!==a;++he)r[le+he]=r[ue+he];++c}return c!==n.length?(this.times=cs.arraySlice(n,0,c),this.values=cs.arraySlice(r,0,c*a)):(this.times=n,this.values=r),this}},{key:"clone",value:function(){var n=cs.arraySlice(this.times,0),r=cs.arraySlice(this.values,0),o=new(0,this.constructor)(this.name,n,r);return o.createInterpolant=this.createInterpolant,o}}],[{key:"toJSON",value:function(n){var a,r=n.constructor;if(r.toJSON!==this.toJSON)a=r.toJSON(n);else{a={name:n.name,times:cs.convertArray(n.times,Array),values:cs.convertArray(n.values,Array)};var o=n.getInterpolation();o!==n.DefaultInterpolation&&(a.interpolation=o)}return a.type=n.ValueTypeName,a}}]),i}();ld.prototype.TimeBufferType=Float32Array,ld.prototype.ValueBufferType=Float32Array,ld.prototype.DefaultInterpolation=2301;var Pk=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ld);Pk.prototype.ValueTypeName="bool",Pk.prototype.ValueBufferType=Array,Pk.prototype.DefaultInterpolation=2300,Pk.prototype.InterpolantFactoryMethodLinear=void 0,Pk.prototype.InterpolantFactoryMethodSmooth=void 0;var P5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ld);P5.prototype.ValueTypeName="color";var LO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ld);LO.prototype.ValueTypeName="number";var bue=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o,u){return(0,M.Z)(this,n),s.call(this,r,a,o,u)}return(0,D.Z)(n,[{key:"interpolate_",value:function(a,o,u,c){for(var d=this.resultBuffer,m=this.sampleValues,_=this.valueSize,b=(u-o)/(c-o),E=a*_,T=E+_;E!==T;E+=4)Xo.slerpFlat(d,0,m,E-_,m,E,b);return d}}]),n}(zm),HA=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,D.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(a){return new bue(this.times,this.values,this.getValueSize(),a)}}]),n}(ld);HA.prototype.ValueTypeName="quaternion",HA.prototype.DefaultInterpolation=2301,HA.prototype.InterpolantFactoryMethodSmooth=void 0;var Ok=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ld);Ok.prototype.ValueTypeName="string",Ok.prototype.ValueBufferType=Array,Ok.prototype.DefaultInterpolation=2300,Ok.prototype.InterpolantFactoryMethodLinear=void 0,Ok.prototype.InterpolantFactoryMethodSmooth=void 0;var NO=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ld);NO.prototype.ValueTypeName="vector";var O5=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;(0,M.Z)(this,i),this.name=s,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=Yc(),this.duration<0&&this.resetDuration()}return(0,D.Z)(i,[{key:"resetDuration",value:function(){for(var r=0,a=0,o=this.tracks.length;a!==o;++a){var u=this.tracks[a];r=Math.max(r,u.times[u.times.length-1])}return this.duration=r,this}},{key:"trim",value:function(){for(var n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var n=!0,r=0;r<this.tracks.length;r++)n=n&&this.tracks[r].validate();return n}},{key:"optimize",value:function(){for(var n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}},{key:"clone",value:function(){for(var n=[],r=0;r<this.tracks.length;r++)n.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,n,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(n){for(var r=[],a=n.tracks,o=1/(n.fps||1),u=0,c=a.length;u!==c;++u)r.push(kue(a[u]).scale(o));var d=new this(n.name,n.duration,r,n.blendMode);return d.uuid=n.uuid,d}},{key:"toJSON",value:function(n){for(var r=[],a=n.tracks,o={name:n.name,duration:n.duration,tracks:r,uuid:n.uuid,blendMode:n.blendMode},u=0,c=a.length;u!==c;++u)r.push(ld.toJSON(a[u]));return o}},{key:"CreateFromMorphTargetSequence",value:function(n,r,a,o){for(var u=r.length,c=[],d=0;d<u;d++){var m=[],_=[];m.push((d+u-1)%u,d,(d+1)%u),_.push(0,1,0);var b=cs.getKeyframeOrder(m);m=cs.sortedArray(m,1,b),_=cs.sortedArray(_,1,b),!o&&0===m[0]&&(m.push(u),_.push(_[0])),c.push(new LO(".morphTargetInfluences["+r[d].name+"]",m,_).scale(1/a))}return new this(n,-1,c)}},{key:"findByName",value:function(n,r){var a=n;Array.isArray(n)||(a=n.geometry&&n.geometry.animations||n.animations);for(var u=0;u<a.length;u++)if(a[u].name===r)return a[u];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(n,r,a){for(var o={},u=/^([\w-]*?)([\d]+)$/,c=0,d=n.length;c<d;c++){var m=n[c],_=m.name.match(u);if(_&&_.length>1){var b=_[1],E=o[b];E||(o[b]=E=[]),E.push(m)}}var T=[];for(var I in o)T.push(this.CreateFromMorphTargetSequence(I,o[I],r,a));return T}},{key:"parseAnimation",value:function(n,r){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var a=function(ye,Ue,Ve,Fe,et){if(0!==Ve.length){var Ye=[],tt=[];cs.flattenJSON(Ve,Ye,tt,Fe),0!==Ye.length&&et.push(new ye(Ue,Ye,tt))}},o=[],u=n.name||"default",c=n.fps||30,d=n.blendMode,m=n.length||-1,_=n.hierarchy||[],b=0;b<_.length;b++){var E=_[b].keys;if(E&&0!==E.length)if(E[0].morphTargets){var T={},I=void 0;for(I=0;I<E.length;I++)if(E[I].morphTargets)for(var N=0;N<E[I].morphTargets.length;N++)T[E[I].morphTargets[N]]=-1;for(var W in T){for(var U=[],H=[],te=0;te!==E[I].morphTargets.length;++te){var ue=E[I];U.push(ue.time),H.push(ue.morphTarget===W?1:0)}o.push(new LO(".morphTargetInfluence["+W+"]",U,H))}m=T.length*(c||1)}else{var le=".bones["+r[b].name+"]";a(NO,le+".position",E,"pos",o),a(HA,le+".quaternion",E,"rot",o),a(NO,le+".scale",E,"scl",o)}}return 0===o.length?null:new this(u,m,o,d)}}]),i}();function kue(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var s=function(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return LO;case"vector":case"vector2":case"vector3":case"vector4":return NO;case"color":return P5;case"quaternion":return HA;case"bool":case"boolean":return Pk;case"string":return Ok}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){var n=[],r=[];cs.flattenJSON(i.keys,n,r,"value"),i.times=n,i.values=r}return void 0!==s.parse?s.parse(i):new s(i.name,i.times,i.values,i.interpolation)}var Lk={enabled:!1,files:{},add:function(s,n){!1!==this.enabled&&(this.files[s]=n)},get:function(s){if(!1!==this.enabled)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}},Cue=new function i(s,n,r){(0,M.Z)(this,i);var a=this,o=!1,u=0,c=0,d=void 0,m=[];this.onStart=void 0,this.onLoad=s,this.onProgress=n,this.onError=r,this.itemStart=function(_){c++,!1===o&&void 0!==a.onStart&&a.onStart(_,u,c),o=!0},this.itemEnd=function(_){u++,void 0!==a.onProgress&&a.onProgress(_,u,c),u===c&&(o=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(_){void 0!==a.onError&&a.onError(_)},this.resolveURL=function(_){return d?d(_):_},this.setURLModifier=function(_){return d=_,this},this.addHandler=function(_,b){return m.push(_,b),this},this.removeHandler=function(_){var b=m.indexOf(_);return-1!==b&&m.splice(b,2),this},this.getHandler=function(_){for(var b=0,E=m.length;b<E;b+=2){var T=m[b],I=m[b+1];if(T.global&&(T.lastIndex=0),T.test(_))return I}return null}},Gm=function(){function i(s){(0,M.Z)(this,i),this.manager=void 0!==s?s:Cue,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,D.Z)(i,[{key:"load",value:function(){}},{key:"loadAsync",value:function(n,r){var a=this;return new Promise(function(o,u){a.load(n,o,r,u)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(n){return this.crossOrigin=n,this}},{key:"setWithCredentials",value:function(n){return this.withCredentials=n,this}},{key:"setPath",value:function(n){return this.path=n,this}},{key:"setResourcePath",value:function(n){return this.resourcePath=n,this}},{key:"setRequestHeader",value:function(n){return this.requestHeader=n,this}}]),i}(),Uf={},L5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,D.Z)(n,[{key:"load",value:function(a,o,u,c){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var d=this,m=Lk.get(a);if(void 0!==m)return d.manager.itemStart(a),setTimeout(function(){o&&o(m),d.manager.itemEnd(a)},0),m;if(void 0===Uf[a]){var E,b=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(b){var T=b[1],I=!!b[2],N=b[3];N=decodeURIComponent(N),I&&(N=atob(N));try{var W,U=(this.responseType||"").toLowerCase();switch(U){case"arraybuffer":case"blob":for(var H=new Uint8Array(N.length),te=0;te<N.length;te++)H[te]=N.charCodeAt(te);W="blob"===U?new Blob([H.buffer],{type:T}):H.buffer;break;case"document":var ue=new DOMParser;W=ue.parseFromString(N,T);break;case"json":W=JSON.parse(N);break;default:W=N}setTimeout(function(){o&&o(W),d.manager.itemEnd(a)},0)}catch(he){setTimeout(function(){c&&c(he),d.manager.itemError(a),d.manager.itemEnd(a)},0)}}else{for(var le in Uf[a]=[],Uf[a].push({onLoad:o,onProgress:u,onError:c}),(E=new XMLHttpRequest).open("GET",a,!0),E.addEventListener("load",function(he){var se=this.response,ye=Uf[a];if(delete Uf[a],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Lk.add(a,se);for(var Ue=0,Ve=ye.length;Ue<Ve;Ue++){var Fe=ye[Ue];Fe.onLoad&&Fe.onLoad(se)}d.manager.itemEnd(a)}else{for(var et=0,Ye=ye.length;et<Ye;et++){var tt=ye[et];tt.onError&&tt.onError(he)}d.manager.itemError(a),d.manager.itemEnd(a)}},!1),E.addEventListener("progress",function(he){for(var se=Uf[a],ye=0,Ue=se.length;ye<Ue;ye++){var Ve=se[ye];Ve.onProgress&&Ve.onProgress(he)}},!1),E.addEventListener("error",function(he){var se=Uf[a];delete Uf[a];for(var ye=0,Ue=se.length;ye<Ue;ye++){var Ve=se[ye];Ve.onError&&Ve.onError(he)}d.manager.itemError(a),d.manager.itemEnd(a)},!1),E.addEventListener("abort",function(he){var se=Uf[a];delete Uf[a];for(var ye=0,Ue=se.length;ye<Ue;ye++){var Ve=se[ye];Ve.onError&&Ve.onError(he)}d.manager.itemError(a),d.manager.itemEnd(a)},!1),void 0!==this.responseType&&(E.responseType=this.responseType),void 0!==this.withCredentials&&(E.withCredentials=this.withCredentials),E.overrideMimeType&&E.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)E.setRequestHeader(le,this.requestHeader[le]);E.send(null)}return d.manager.itemStart(a),E}Uf[a].push({onLoad:o,onProgress:u,onError:c})}},{key:"setResponseType",value:function(a){return this.responseType=a,this}},{key:"setMimeType",value:function(a){return this.mimeType=a,this}}]),n}(Gm),N5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,D.Z)(n,[{key:"load",value:function(a,o,u,c){void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var d=this,m=Lk.get(a);if(void 0!==m)return d.manager.itemStart(a),setTimeout(function(){o&&o(m),d.manager.itemEnd(a)},0),m;var _=YP("img");function b(){_.removeEventListener("load",b,!1),_.removeEventListener("error",E,!1),Lk.add(a,this),o&&o(this),d.manager.itemEnd(a)}function E(T){_.removeEventListener("load",b,!1),_.removeEventListener("error",E,!1),c&&c(T),d.manager.itemError(a),d.manager.itemEnd(a)}return _.addEventListener("load",b,!1),_.addEventListener("error",E,!1),"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(_.crossOrigin=this.crossOrigin),d.manager.itemStart(a),_.src=a,_}}]),n}(Gm),Sue=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,D.Z)(n,[{key:"load",value:function(a,o,u,c){var d=new vO,m=new N5(this.manager);m.setCrossOrigin(this.crossOrigin),m.setPath(this.path);var _=0;function b(T){m.load(a[T],function(I){d.images[T]=I,6==++_&&(d.needsUpdate=!0,o&&o(d))},void 0,c)}for(var E=0;E<a.length;++E)b(E);return d}}]),n}(Gm),Mue=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,D.Z)(n,[{key:"load",value:function(a,o,u,c){var d=new _l,m=new N5(this.manager);return m.setCrossOrigin(this.crossOrigin),m.setPath(this.path),m.load(a,function(_){d.image=_,d.needsUpdate=!0,void 0!==o&&o(d)},u,c),d}}]),n}(Gm),cd=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,M.Z)(this,n),(a=s.call(this)).type="Light",a.color=new lr(r),a.intensity=o,a}return(0,D.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,void 0!==this.groundColor&&(o.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(o.object.distance=this.distance),void 0!==this.angle&&(o.object.angle=this.angle),void 0!==this.decay&&(o.object.decay=this.decay),void 0!==this.penumbra&&(o.object.penumbra=this.penumbra),void 0!==this.shadow&&(o.object.shadow=this.shadow.toJSON()),o}}]),n}(Na);cd.prototype.isLight=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,o)).type="HemisphereLight",u.position.copy(Na.DefaultUp),u.updateMatrix(),u.groundColor=new lr(a),u}return(0,D.Z)(n,[{key:"copy",value:function(a){return cd.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}]),n}(cd).prototype.isHemisphereLight=!0;var F5=new Cr,Z5=new xe,B5=new xe,EU=function(){function i(s){(0,M.Z)(this,i),this.camera=s,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yt(512,512),this.map=null,this.mapPass=null,this.matrix=new Cr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mO,this._frameExtents=new Yt(1,1),this._viewportCount=1,this._viewports=[new La(0,0,1,1)]}return(0,D.Z)(i,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(n){var r=this.camera,a=this.matrix;Z5.setFromMatrixPosition(n.matrixWorld),r.position.copy(Z5),B5.setFromMatrixPosition(n.target.matrixWorld),r.lookAt(B5),r.updateMatrixWorld(),F5.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(F5),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(r.projectionMatrix),a.multiply(r.matrixWorldInverse)}},{key:"getViewport",value:function(n){return this._viewports[n]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var n={};return 0!==this.bias&&(n.bias=this.bias),0!==this.normalBias&&(n.normalBias=this.normalBias),1!==this.radius&&(n.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}]),i}(),U5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this,new Qu(50,1,.5,500))).focus=1,r}return(0,D.Z)(n,[{key:"updateMatrices",value:function(a){var o=this.camera,u=2*_A*a.angle*this.focus,c=this.mapSize.width/this.mapSize.height,d=a.distance||o.far;(u!==o.fov||c!==o.aspect||d!==o.far)&&(o.fov=u,o.aspect=c,o.far=d,o.updateProjectionMatrix()),(0,_e.Z)((0,de.Z)(n.prototype),"updateMatrices",this).call(this,a)}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.focus=a.focus,this}}]),n}(EU);U5.prototype.isSpotLightShadow=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="SpotLight",o.position.copy(Na.DefaultUp),o.updateMatrix(),o.target=new Na,o.distance=u,o.angle=c,o.penumbra=d,o.decay=m,o.shadow=new U5,o}return(0,D.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}]),n}(cd).prototype.isSpotLight=!0;var V5=new Cr,zA=new xe,CU=new xe,H5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this,new Qu(90,1,.5,500)))._frameExtents=new Yt(4,2),r._viewportCount=6,r._viewports=[new La(2,1,1,1),new La(0,1,1,1),new La(3,1,1,1),new La(1,1,1,1),new La(3,0,1,1),new La(1,0,1,1)],r._cubeDirections=[new xe(1,0,0),new xe(-1,0,0),new xe(0,0,1),new xe(0,0,-1),new xe(0,1,0),new xe(0,-1,0)],r._cubeUps=[new xe(0,1,0),new xe(0,1,0),new xe(0,1,0),new xe(0,1,0),new xe(0,0,1),new xe(0,0,-1)],r}return(0,D.Z)(n,[{key:"updateMatrices",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=this.camera,c=this.matrix,d=a.distance||u.far;d!==u.far&&(u.far=d,u.updateProjectionMatrix()),zA.setFromMatrixPosition(a.matrixWorld),u.position.copy(zA),CU.copy(u.position),CU.add(this._cubeDirections[o]),u.up.copy(this._cubeUps[o]),u.lookAt(CU),u.updateMatrixWorld(),c.makeTranslation(-zA.x,-zA.y,-zA.z),V5.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(V5)}}]),n}(EU);H5.prototype.isPointLightShadow=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="PointLight",o.distance=u,o.decay=c,o.shadow=new H5,o}return(0,D.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}]),n}(cd).prototype.isPointLight=!0;var z5=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){return(0,M.Z)(this,n),s.call(this,new B3(-5,5,5,-5,.5,500))}return n}(EU);z5.prototype.isDirectionalLightShadow=!0;var SU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="DirectionalLight",o.position.copy(Na.DefaultUp),o.updateMatrix(),o.target=new Na,o.shadow=new z5,o}return(0,D.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}]),n}(cd);SU.prototype.isDirectionalLight=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="AmbientLight",o}return n}(cd).prototype.isAmbientLight=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="RectAreaLight",o.width=u,o.height=c,o}return(0,D.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(a){this.intensity=a/(this.width*this.height*Math.PI)}},{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.width=a.width,this.height=a.height,this}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.width=this.width,o.object.height=this.height,o}}]),n}(cd).prototype.isRectAreaLight=!0;var G5=function(){function i(){(0,M.Z)(this,i),this.coefficients=[];for(var s=0;s<9;s++)this.coefficients.push(new xe)}return(0,D.Z)(i,[{key:"set",value:function(n){for(var r=0;r<9;r++)this.coefficients[r].copy(n[r]);return this}},{key:"zero",value:function(){for(var n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}},{key:"getAt",value:function(n,r){var a=n.x,o=n.y,u=n.z,c=this.coefficients;return r.copy(c[0]).multiplyScalar(.282095),r.addScaledVector(c[1],.488603*o),r.addScaledVector(c[2],.488603*u),r.addScaledVector(c[3],.488603*a),r.addScaledVector(c[4],a*o*1.092548),r.addScaledVector(c[5],o*u*1.092548),r.addScaledVector(c[6],.315392*(3*u*u-1)),r.addScaledVector(c[7],a*u*1.092548),r.addScaledVector(c[8],.546274*(a*a-o*o)),r}},{key:"getIrradianceAt",value:function(n,r){var a=n.x,o=n.y,u=n.z,c=this.coefficients;return r.copy(c[0]).multiplyScalar(.886227),r.addScaledVector(c[1],1.023328*o),r.addScaledVector(c[2],1.023328*u),r.addScaledVector(c[3],1.023328*a),r.addScaledVector(c[4],.858086*a*o),r.addScaledVector(c[5],.858086*o*u),r.addScaledVector(c[6],.743125*u*u-.247708),r.addScaledVector(c[7],.858086*a*u),r.addScaledVector(c[8],.429043*(a*a-o*o)),r}},{key:"add",value:function(n){for(var r=0;r<9;r++)this.coefficients[r].add(n.coefficients[r]);return this}},{key:"addScaledSH",value:function(n,r){for(var a=0;a<9;a++)this.coefficients[a].addScaledVector(n.coefficients[a],r);return this}},{key:"scale",value:function(n){for(var r=0;r<9;r++)this.coefficients[r].multiplyScalar(n);return this}},{key:"lerp",value:function(n,r){for(var a=0;a<9;a++)this.coefficients[a].lerp(n.coefficients[a],r);return this}},{key:"equals",value:function(n){for(var r=0;r<9;r++)if(!this.coefficients[r].equals(n.coefficients[r]))return!1;return!0}},{key:"copy",value:function(n){return this.set(n.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.coefficients,o=0;o<9;o++)a[o].fromArray(n,r+3*o);return this}},{key:"toArray",value:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.coefficients,o=0;o<9;o++)a[o].toArray(n,r+3*o);return n}}],[{key:"getBasisAt",value:function(n,r){var a=n.x,o=n.y,u=n.z;r[0]=.282095,r[1]=.488603*o,r[2]=.488603*u,r[3]=.488603*a,r[4]=1.092548*a*o,r[5]=1.092548*o*u,r[6]=.315392*(3*u*u-1),r[7]=1.092548*a*u,r[8]=.546274*(a*a-o*o)}}]),i}();G5.prototype.isSphericalHarmonics3=!0;var TU=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new G5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,M.Z)(this,n),(r=s.call(this,void 0,o)).sh=a,r}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.sh.copy(a.sh),this}},{key:"fromJSON",value:function(a){return this.intensity=a.intensity,this.sh.fromArray(a.sh),this}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.sh=this.sh.toArray(),o}}]),n}(cd);TU.prototype.isLightProbe=!0;var Pue=function(){function i(){(0,M.Z)(this,i)}return(0,D.Z)(i,null,[{key:"decodeText",value:function(n){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(n);for(var r="",a=0,o=n.length;a<o;a++)r+=String.fromCharCode(n[a]);try{return decodeURIComponent(escape(r))}catch(u){return r}}},{key:"extractUrlBase",value:function(n){var r=n.lastIndexOf("/");return-1===r?"./":n.substr(0,r+1)}}]),i}();(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="InstancedBufferGeometry",r.instanceCount=1/0,r}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.instanceCount=a.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var a=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,this);return a.instanceCount=this.instanceCount,a.isInstancedBufferGeometry=!0,a}}]),n})(Fi).prototype.isInstancedBufferGeometry=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),a=s.call(this,r),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),a.options={premultiplyAlpha:"none"},a}return(0,D.Z)(n,[{key:"setOptions",value:function(a){return this.options=a,this}},{key:"load",value:function(a,o,u,c){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var d=this,m=Lk.get(a);if(void 0!==m)return d.manager.itemStart(a),setTimeout(function(){o&&o(m),d.manager.itemEnd(a)},0),m;var _={};_.credentials="anonymous"===this.crossOrigin?"same-origin":"include",_.headers=this.requestHeader,fetch(a,_).then(function(b){return b.blob()}).then(function(b){return createImageBitmap(b,Object.assign(d.options,{colorSpaceConversion:"none"}))}).then(function(b){Lk.add(a,b),o&&o(b),d.manager.itemEnd(a)}).catch(function(b){c&&c(b),d.manager.itemError(a),d.manager.itemEnd(a)}),d.manager.itemStart(a)}}]),n}(Gm).prototype.isImageBitmapLoader=!0;var FO,Fue=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,D.Z)(n,[{key:"load",value:function(a,o,u,c){var d=this,m=new L5(this.manager);m.setResponseType("arraybuffer"),m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(a,function(_){try{var b=_.slice(0);(void 0===FO&&(FO=new(window.AudioContext||window.webkitAudioContext)),FO).decodeAudioData(b,function(T){o(T)})}catch(T){c?c(T):console.error(T),d.manager.itemError(a)}},u,c)}}]),n}(Gm);(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,M.Z)(this,n),o=s.call(this,void 0,u);var c=(new lr).set(r),d=(new lr).set(a),m=new xe(c.r,c.g,c.b),_=new xe(d.r,d.g,d.b),b=Math.sqrt(Math.PI),E=b*Math.sqrt(.75);return o.sh.coefficients[0].copy(m).add(_).multiplyScalar(b),o.sh.coefficients[1].copy(m).sub(_).multiplyScalar(E),o}return n})(TU).prototype.isHemisphereLightProbe=!0,function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,M.Z)(this,n),a=s.call(this,void 0,o);var u=(new lr).set(r);return a.sh.coefficients[0].set(u.r,u.g,u.b).multiplyScalar(2*Math.sqrt(Math.PI)),a}return n}(TU).prototype.isAmbientLightProbe=!0;var Uue=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="Audio",a.listener=r,a.context=r.context,a.gain=a.context.createGain(),a.gain.connect(r.getInput()),a.autoplay=!1,a.buffer=null,a.detune=0,a.loop=!1,a.loopStart=0,a.loopEnd=0,a.offset=0,a.duration=void 0,a.playbackRate=1,a.isPlaying=!1,a.hasPlaybackControl=!0,a.source=null,a.sourceType="empty",a._startedAt=0,a._progress=0,a._connected=!1,a.filters=[],a}return(0,D.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this}},{key:"setMediaElementSource",value:function(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this}},{key:"setMediaStreamSource",value:function(a){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(a),this.connect(),this}},{key:"setBuffer",value:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+a;var o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,o=this.filters.length;a<o;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,o=this.filters.length;a<o;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(a){return a||(a=[]),!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice(),this}},{key:"setDetune",value:function(a){if(this.detune=a,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(a){return this.setFilters(a?[a]:[])}},{key:"setPlaybackRate",value:function(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(a){return this.loopStart=a,this}},{key:"setLoopEnd",value:function(a){return this.loopEnd=a,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}]),n}(Na),Vue=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,M.Z)(this,i),this.analyser=s.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),s.getOutput().connect(this.analyser)}return(0,D.Z)(i,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var n=0,r=this.getFrequencyData(),a=0;a<r.length;a++)n+=r[a];return n/r.length}}]),i}(),Hue=function(){function i(s,n,r){var a,o,u;switch((0,M.Z)(this,i),this.binding=s,this.valueSize=r,n){case"quaternion":a=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,D.Z)(i,[{key:"accumulate",value:function(n,r){var a=this.buffer,o=this.valueSize,u=n*o+o,c=this.cumulativeWeight;if(0===c){for(var d=0;d!==o;++d)a[u+d]=a[d];c=r}else this._mixBufferRegion(a,u,0,r/(c+=r),o);this.cumulativeWeight=c}},{key:"accumulateAdditive",value:function(n){var r=this.buffer,a=this.valueSize,o=a*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,o,0,n,a),this.cumulativeWeightAdditive+=n}},{key:"apply",value:function(n){var r=this.valueSize,a=this.buffer,o=n*r+r,u=this.cumulativeWeight,c=this.cumulativeWeightAdditive,d=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1&&this._mixBufferRegion(a,o,r*this._origIndex,1-u,r),c>0&&this._mixBufferRegionAdditive(a,o,this._addIndex*r,1,r);for(var _=r,b=r+r;_!==b;++_)if(a[_]!==a[_+r]){d.setValue(a,o);break}}},{key:"saveOriginalState",value:function(){var r=this.buffer,a=this.valueSize,o=a*this._origIndex;this.binding.getValue(r,o);for(var u=a,c=o;u!==c;++u)r[u]=r[o+u%a];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var n=this._addIndex*this.valueSize,r=n+this.valueSize,a=n;a<r;a++)this.buffer[a]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var n=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize,a=0;a<this.valueSize;a++)this.buffer[r+a]=this.buffer[n+a]}},{key:"_select",value:function(n,r,a,o,u){if(o>=.5)for(var c=0;c!==u;++c)n[r+c]=n[a+c]}},{key:"_slerp",value:function(n,r,a,o){Xo.slerpFlat(n,r,n,r,n,a,o)}},{key:"_slerpAdditive",value:function(n,r,a,o,u){var c=this._workIndex*u;Xo.multiplyQuaternionsFlat(n,c,n,r,n,a),Xo.slerpFlat(n,r,n,r,n,c,o)}},{key:"_lerp",value:function(n,r,a,o,u){for(var c=1-o,d=0;d!==u;++d){var m=r+d;n[m]=n[m]*c+n[a+d]*o}}},{key:"_lerpAdditive",value:function(n,r,a,o,u){for(var c=0;c!==u;++c){var d=r+c;n[d]=n[d]+n[a+c]*o}}}]),i}(),MU="\\[\\]\\.:\\/",zue=new RegExp("["+MU+"]","g"),AU="[^"+MU+"]",Gue="[^"+MU.replace("\\.","")+"]",jue=/((?:WC+[\/:])*)/.source.replace("WC",AU),Wue=/(WCOD+)?/.source.replace("WCOD",Gue),que=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AU),Yue=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AU),Kue=new RegExp("^"+jue+Wue+que+Yue+"$"),$ue=["material","materials","bones"],Xue=function(){function i(s,n,r){(0,M.Z)(this,i);var a=r||za.parseTrackName(n);this._targetGroup=s,this._bindings=s.subscribe_(n,a)}return(0,D.Z)(i,[{key:"getValue",value:function(n,r){this.bind();var o=this._bindings[this._targetGroup.nCachedObjects_];void 0!==o&&o.getValue(n,r)}},{key:"setValue",value:function(n,r){for(var a=this._bindings,o=this._targetGroup.nCachedObjects_,u=a.length;o!==u;++o)a[o].setValue(n,r)}},{key:"bind",value:function(){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].bind()}},{key:"unbind",value:function(){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].unbind()}}]),i}(),za=function(){function i(s,n,r){(0,M.Z)(this,i),this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(s,this.parsedPath.nodeName)||s,this.rootNode=s,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,D.Z)(i,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(n,r){n[r]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)n[r++]=a[o]}},{key:"_getValue_arrayElement",value:function(n,r){n[r]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(n,r){this.resolvedProperty.toArray(n,r)}},{key:"_setValue_direct",value:function(n,r){this.targetObject[this.propertyName]=n[r]}},{key:"_setValue_direct_setNeedsUpdate",value:function(n,r){this.targetObject[this.propertyName]=n[r],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(n,r){this.targetObject[this.propertyName]=n[r],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)a[o]=n[r++]}},{key:"_setValue_array_setNeedsUpdate",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)a[o]=n[r++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)a[o]=n[r++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(n,r){this.resolvedProperty[this.propertyIndex]=n[r]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(n,r){this.resolvedProperty[this.propertyIndex]=n[r],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(n,r){this.resolvedProperty[this.propertyIndex]=n[r],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(n,r){this.resolvedProperty.fromArray(n,r)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(n,r){this.resolvedProperty.fromArray(n,r),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(n,r){this.resolvedProperty.fromArray(n,r),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(n,r){this.bind(),this.getValue(n,r)}},{key:"_setValue_unbound",value:function(n,r){this.bind(),this.setValue(n,r)}},{key:"bind",value:function(){var n=this.node,r=this.parsedPath,a=r.objectName,o=r.propertyName,u=r.propertyIndex;if(n||(n=i.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,n){if(a){var c=r.objectIndex;switch(a){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(var d=0;d<n.length;d++)if(n[d].name===c){c=d;break}break;default:if(void 0===n[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[a]}if(void 0!==c){if(void 0===n[c])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[c]}}var m=n[o];if(void 0!==m){var b=this.Versioning.None;this.targetObject=n,void 0!==n.needsUpdate?b=this.Versioning.NeedsUpdate:void 0!==n.matrixWorldNeedsUpdate&&(b=this.Versioning.MatrixWorldNeedsUpdate);var E=this.BindingType.Direct;if(void 0!==u){if("morphTargetInfluences"===o){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==n.morphTargetDictionary[u]&&(u=n.morphTargetDictionary[u])}E=this.BindingType.ArrayElement,this.resolvedProperty=m,this.propertyIndex=u}else void 0!==m.fromArray&&void 0!==m.toArray?(E=this.BindingType.HasFromToArray,this.resolvedProperty=m):Array.isArray(m)?(E=this.BindingType.EntireArray,this.resolvedProperty=m):this.propertyName=o;this.getValue=this.GetterByBindingType[E],this.setValue=this.SetterByBindingTypeAndVersioning[E][b]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+o+" but it wasn't found.",n)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(n,r,a){return n&&n.isAnimationObjectGroup?new i.Composite(n,r,a):new i(n,r,a)}},{key:"sanitizeNodeName",value:function(n){return n.replace(/\s/g,"_").replace(zue,"")}},{key:"parseTrackName",value:function(n){var r=Kue.exec(n);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+n);var a={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},o=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){var u=a.nodeName.substring(o+1);-1!==$ue.indexOf(u)&&(a.nodeName=a.nodeName.substring(0,o),a.objectName=u)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return a}},{key:"findNode",value:function(n,r){if(!r||""===r||"."===r||-1===r||r===n.name||r===n.uuid)return n;if(n.skeleton){var a=n.skeleton.getBoneByName(r);if(void 0!==a)return a}if(n.children){var u=function c(d){for(var m=0;m<d.length;m++){var _=d[m];if(_.name===r||_.uuid===r)return _;var b=c(_.children);if(b)return b}return null}(n.children);if(u)return u}return null}}]),i}();za.Composite=Xue,za.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},za.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},za.prototype.GetterByBindingType=[za.prototype._getValue_direct,za.prototype._getValue_array,za.prototype._getValue_arrayElement,za.prototype._getValue_toArray],za.prototype.SetterByBindingTypeAndVersioning=[[za.prototype._setValue_direct,za.prototype._setValue_direct_setNeedsUpdate,za.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[za.prototype._setValue_array,za.prototype._setValue_array_setNeedsUpdate,za.prototype._setValue_array_setMatrixWorldNeedsUpdate],[za.prototype._setValue_arrayElement,za.prototype._setValue_arrayElement_setNeedsUpdate,za.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[za.prototype._setValue_fromArray,za.prototype._setValue_fromArray_setNeedsUpdate,za.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],function(){function i(){(0,M.Z)(this,i),this.uuid=Yc(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var s={};this._indicesByUUID=s;for(var n=0,r=arguments.length;n!==r;++n)s[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}return(0,D.Z)(i,[{key:"add",value:function(){for(var n=this._objects,r=this._indicesByUUID,a=this._paths,o=this._parsedPaths,u=this._bindings,c=u.length,d=void 0,m=n.length,_=this.nCachedObjects_,b=0,E=arguments.length;b!==E;++b){var T=arguments[b],I=T.uuid,N=r[I];if(void 0===N){N=m++,r[I]=N,n.push(T);for(var W=0,U=c;W!==U;++W)u[W].push(new za(T,a[W],o[W]))}else if(N<_){d=n[N];var H=--_,te=n[H];r[te.uuid]=N,n[N]=te,r[I]=H,n[H]=T;for(var ue=0,le=c;ue!==le;++ue){var he=u[ue],se=he[H],ye=he[N];he[N]=se,void 0===ye&&(ye=new za(T,a[ue],o[ue])),he[H]=ye}}else n[N]!==d&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=_}},{key:"remove",value:function(){for(var n=this._objects,r=this._indicesByUUID,a=this._bindings,o=a.length,u=this.nCachedObjects_,c=0,d=arguments.length;c!==d;++c){var m=arguments[c],_=m.uuid,b=r[_];if(void 0!==b&&b>=u){var E=u++,T=n[E];r[T.uuid]=b,n[b]=T,r[_]=E,n[E]=m;for(var I=0,N=o;I!==N;++I){var W=a[I],U=W[E],H=W[b];W[b]=U,W[E]=H}}}this.nCachedObjects_=u}},{key:"uncache",value:function(){for(var n=this._objects,r=this._indicesByUUID,a=this._bindings,o=a.length,u=this.nCachedObjects_,c=n.length,d=0,m=arguments.length;d!==m;++d){var _=arguments[d],b=_.uuid,E=r[b];if(void 0!==E)if(delete r[b],E<u){var T=--u,I=n[T],N=--c,W=n[N];r[I.uuid]=E,n[E]=I,r[W.uuid]=T,n[T]=W,n.pop();for(var U=0,H=o;U!==H;++U){var te=a[U],ue=te[T],le=te[N];te[E]=ue,te[T]=le,te.pop()}}else{var he=--c,se=n[he];he>0&&(r[se.uuid]=E),n[E]=se,n.pop();for(var ye=0,Ue=o;ye!==Ue;++ye){var Ve=a[ye];Ve[E]=Ve[he],Ve.pop()}}}this.nCachedObjects_=u}},{key:"subscribe_",value:function(n,r){var a=this._bindingsIndicesByPath,o=a[n],u=this._bindings;if(void 0!==o)return u[o];var c=this._paths,d=this._parsedPaths,m=this._objects,b=this.nCachedObjects_,E=new Array(m.length);a[n]=o=u.length,c.push(n),d.push(r),u.push(E);for(var T=b,I=m.length;T!==I;++T)E[T]=new za(m[T],n,r);return E}},{key:"unsubscribe_",value:function(n){var r=this._bindingsIndicesByPath,a=r[n];if(void 0!==a){var o=this._paths,u=this._parsedPaths,c=this._bindings,d=c.length-1,m=c[d];r[n[d]]=a,c[a]=m,c.pop(),u[a]=u[d],u.pop(),o[a]=o[d],o.pop()}}}]),i}().prototype.isAnimationObjectGroup=!0;var Jue=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,M.Z)(this,i),this._mixer=s,this._clip=n,this._localRoot=r,this.blendMode=a;for(var o=n.tracks,u=o.length,c=new Array(u),d={endingStart:$w,endingEnd:$w},m=0;m!==u;++m){var _=o[m].createInterpolant(null);c[m]=_,_.settings=d}this._interpolantSettings=d,this._interpolants=c,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,D.Z)(i,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(n){return this._startTime=n,this}},{key:"setLoop",value:function(n,r){return this.loop=n,this.repetitions=r,this}},{key:"setEffectiveWeight",value:function(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(n){return this._scheduleFading(n,0,1)}},{key:"fadeOut",value:function(n){return this._scheduleFading(n,1,0)}},{key:"crossFadeFrom",value:function(n,r,a){if(n.fadeOut(r),this.fadeIn(r),a){var o=this._clip.duration,u=n._clip.duration,d=o/u;n.warp(1,u/o,r),this.warp(d,1,r)}return this}},{key:"crossFadeTo",value:function(n,r,a){return n.crossFadeFrom(this,r,a)}},{key:"stopFading",value:function(){var n=this._weightInterpolant;return null!==n&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}},{key:"setEffectiveTimeScale",value:function(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}},{key:"syncWith",value:function(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}},{key:"halt",value:function(n){return this.warp(this._effectiveTimeScale,0,n)}},{key:"warp",value:function(n,r,a){var o=this._mixer,u=o.time,c=this.timeScale,d=this._timeScaleInterpolant;null===d&&(d=o._lendControlInterpolant(),this._timeScaleInterpolant=d);var m=d.parameterPositions,_=d.sampleValues;return m[0]=u,m[1]=u+a,_[0]=n/c,_[1]=r/c,this}},{key:"stopWarping",value:function(){var n=this._timeScaleInterpolant;return null!==n&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(n,r,a,o){if(this.enabled){var u=this._startTime;if(null!==u){var c=(n-u)*a;if(c<0||0===a)return;this._startTime=null,r=a*c}r*=this._updateTimeScale(n);var d=this._updateTime(r),m=this._updateWeight(n);if(m>0){var _=this._interpolants,b=this._propertyBindings;switch(this.blendMode){case 2501:for(var E=0,T=_.length;E!==T;++E)_[E].evaluate(d),b[E].accumulateAdditive(m);break;case 2500:default:for(var I=0,N=_.length;I!==N;++I)_[I].evaluate(d),b[I].accumulate(o,m)}}}else this._updateWeight(n)}},{key:"_updateWeight",value:function(n){var r=0;if(this.enabled){r=this.weight;var a=this._weightInterpolant;if(null!==a){var o=a.evaluate(n)[0];r*=o,n>a.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=r,r}},{key:"_updateTimeScale",value:function(n){var r=0;if(!this.paused){r=this.timeScale;var a=this._timeScaleInterpolant;null!==a&&(r*=a.evaluate(n)[0],n>a.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}},{key:"_updateTime",value:function(n){var r=this._clip.duration,a=this.loop,o=this.time+n,u=this._loopCount,c=2202===a;if(0===n)return-1===u?o:c&&1==(1&u)?r-o:o;if(2200===a){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=r)o=r;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(-1===u&&(n>=0?(u=0,this._setEndings(!0,0===this.repetitions,c)):this._setEndings(0===this.repetitions,!0,c)),o>=r||o<0){var d=Math.floor(o/r);o-=r*d,u+=Math.abs(d);var m=this.repetitions-u;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o=n>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(1===m){var _=n<0;this._setEndings(_,!_,c)}else this._setEndings(!1,!1,c);this._loopCount=u,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d})}}else this.time=o;if(c&&1==(1&u))return r-o}return o}},{key:"_setEndings",value:function(n,r,a){var o=this._interpolantSettings;a?(o.endingStart=Xw,o.endingEnd=Xw):(o.endingStart=n?this.zeroSlopeAtStart?Xw:$w:2402,o.endingEnd=r?this.zeroSlopeAtEnd?Xw:$w:2402)}},{key:"_scheduleFading",value:function(n,r,a){var o=this._mixer,u=o.time,c=this._weightInterpolant;null===c&&(c=o._lendControlInterpolant(),this._weightInterpolant=c);var d=c.parameterPositions,m=c.sampleValues;return d[0]=u,m[0]=r,d[1]=u+n,m[1]=a,this}}]),i}();(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._root=r,a._initMemoryManager(),a._accuIndex=0,a.time=0,a.timeScale=1,a}return(0,D.Z)(n,[{key:"_bindAction",value:function(a,o){var u=a._localRoot||this._root,c=a._clip.tracks,d=c.length,m=a._propertyBindings,_=a._interpolants,b=u.uuid,E=this._bindingsByRootAndName,T=E[b];void 0===T&&(E[b]=T={});for(var I=0;I!==d;++I){var N=c[I],W=N.name,U=T[W];if(void 0!==U)m[I]=U;else{if(void 0!==(U=m[I])){null===U._cacheIndex&&(++U.referenceCount,this._addInactiveBinding(U,b,W));continue}++(U=new Hue(za.create(u,W,o&&o._propertyBindings[I].binding.parsedPath),N.ValueTypeName,N.getValueSize())).referenceCount,this._addInactiveBinding(U,b,W),m[I]=U}_[I].resultBuffer=U.buffer}}},{key:"_activateAction",value:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var o=(a._localRoot||this._root).uuid,u=a._clip.uuid,c=this._actionsByClip[u];this._bindAction(a,c&&c.knownActions[0]),this._addInactiveAction(a,u,o)}for(var d=a._propertyBindings,m=0,_=d.length;m!==_;++m){var b=d[m];0==b.useCount++&&(this._lendBinding(b),b.saveOriginalState())}this._lendAction(a)}}},{key:"_deactivateAction",value:function(a){if(this._isActiveAction(a)){for(var o=a._propertyBindings,u=0,c=o.length;u!==c;++u){var d=o[u];0==--d.useCount&&(d.restoreOriginalState(),this._takeBackBinding(d))}this._takeBackAction(a)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(a){var o=a._cacheIndex;return null!==o&&o<this._nActiveActions}},{key:"_addInactiveAction",value:function(a,o,u){var c=this._actions,d=this._actionsByClip,m=d[o];if(void 0===m)m={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,d[o]=m;else{var _=m.knownActions;a._byClipCacheIndex=_.length,_.push(a)}a._cacheIndex=c.length,c.push(a),m.actionByRoot[u]=a}},{key:"_removeInactiveAction",value:function(a){var o=this._actions,u=o[o.length-1],c=a._cacheIndex;u._cacheIndex=c,o[c]=u,o.pop(),a._cacheIndex=null;var d=a._clip.uuid,m=this._actionsByClip,_=m[d],b=_.knownActions,E=b[b.length-1],T=a._byClipCacheIndex;E._byClipCacheIndex=T,b[T]=E,b.pop(),a._byClipCacheIndex=null,delete _.actionByRoot[(a._localRoot||this._root).uuid],0===b.length&&delete m[d],this._removeInactiveBindingsForAction(a)}},{key:"_removeInactiveBindingsForAction",value:function(a){for(var o=a._propertyBindings,u=0,c=o.length;u!==c;++u){var d=o[u];0==--d.referenceCount&&this._removeInactiveBinding(d)}}},{key:"_lendAction",value:function(a){var o=this._actions,u=a._cacheIndex,c=this._nActiveActions++,d=o[c];a._cacheIndex=c,o[c]=a,d._cacheIndex=u,o[u]=d}},{key:"_takeBackAction",value:function(a){var o=this._actions,u=a._cacheIndex,c=--this._nActiveActions,d=o[c];a._cacheIndex=c,o[c]=a,d._cacheIndex=u,o[u]=d}},{key:"_addInactiveBinding",value:function(a,o,u){var c=this._bindingsByRootAndName,d=this._bindings,m=c[o];void 0===m&&(c[o]=m={}),m[u]=a,a._cacheIndex=d.length,d.push(a)}},{key:"_removeInactiveBinding",value:function(a){var o=this._bindings,u=a.binding,c=u.rootNode.uuid,d=u.path,m=this._bindingsByRootAndName,_=m[c],b=o[o.length-1],E=a._cacheIndex;b._cacheIndex=E,o[E]=b,o.pop(),delete _[d],0===Object.keys(_).length&&delete m[c]}},{key:"_lendBinding",value:function(a){var o=this._bindings,u=a._cacheIndex,c=this._nActiveBindings++,d=o[c];a._cacheIndex=c,o[c]=a,d._cacheIndex=u,o[u]=d}},{key:"_takeBackBinding",value:function(a){var o=this._bindings,u=a._cacheIndex,c=--this._nActiveBindings,d=o[c];a._cacheIndex=c,o[c]=a,d._cacheIndex=u,o[u]=d}},{key:"_lendControlInterpolant",value:function(){var a=this._controlInterpolants,o=this._nActiveControlInterpolants++,u=a[o];return void 0===u&&((u=new R5(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=o,a[o]=u),u}},{key:"_takeBackControlInterpolant",value:function(a){var o=this._controlInterpolants,u=a.__cacheIndex,c=--this._nActiveControlInterpolants,d=o[c];a.__cacheIndex=c,o[c]=a,d.__cacheIndex=u,o[u]=d}},{key:"clipAction",value:function(a,o,u){var c=o||this._root,d=c.uuid,m="string"==typeof a?O5.findByName(c,a):a,_=null!==m?m.uuid:a,b=this._actionsByClip[_],E=null;if(void 0===u&&(u=null!==m?m.blendMode:2500),void 0!==b){var T=b.actionByRoot[d];if(void 0!==T&&T.blendMode===u)return T;E=b.knownActions[0],null===m&&(m=E._clip)}if(null===m)return null;var I=new Jue(this,m,o,u);return this._bindAction(I,E),this._addInactiveAction(I,_,d),I}},{key:"existingAction",value:function(a,o){var u=o||this._root,c=u.uuid,d="string"==typeof a?O5.findByName(u,a):a,_=this._actionsByClip[d?d.uuid:a];return void 0!==_&&_.actionByRoot[c]||null}},{key:"stopAllAction",value:function(){for(var a=this._actions,u=this._nActiveActions-1;u>=0;--u)a[u].stop();return this}},{key:"update",value:function(a){for(var o=this._actions,u=this._nActiveActions,c=this.time+=a*=this.timeScale,d=Math.sign(a),m=this._accuIndex^=1,_=0;_!==u;++_)o[_]._update(c,a,d,m);for(var E=this._bindings,T=this._nActiveBindings,I=0;I!==T;++I)E[I].apply(m);return this}},{key:"setTime",value:function(a){this.time=0;for(var o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(a)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(a){var o=this._actions,u=a.uuid,c=this._actionsByClip,d=c[u];if(void 0!==d){for(var m=d.knownActions,_=0,b=m.length;_!==b;++_){var E=m[_];this._deactivateAction(E);var T=E._cacheIndex,I=o[o.length-1];E._cacheIndex=null,E._byClipCacheIndex=null,I._cacheIndex=T,o[T]=I,o.pop(),this._removeInactiveBindingsForAction(E)}delete c[u]}}},{key:"uncacheRoot",value:function(a){var o=a.uuid,u=this._actionsByClip;for(var c in u){var m=u[c].actionByRoot[o];void 0!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}var b=this._bindingsByRootAndName[o];if(void 0!==b)for(var E in b){var T=b[E];T.restoreOriginalState(),this._removeInactiveBinding(T)}}},{key:"uncacheAction",value:function(a,o){var u=this.existingAction(a,o);null!==u&&(this._deactivateAction(u),this._removeInactiveAction(u))}}]),n})(xm).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var tle=function(){function i(s){(0,M.Z)(this,i),"string"==typeof s&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),s=arguments[1]),this.value=s}return(0,D.Z)(i,[{key:"clone",value:function(){return new i(void 0===this.value.clone?this.value:this.value.clone())}}]),i}();(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,M.Z)(this,n),(o=s.call(this,r,a)).meshPerAttribute=u,o}return(0,D.Z)(n,[{key:"copy",value:function(a){return(0,_e.Z)((0,de.Z)(n.prototype),"copy",this).call(this,a),this.meshPerAttribute=a.meshPerAttribute,this}},{key:"clone",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"clone",this).call(this,a);return o.meshPerAttribute=this.meshPerAttribute,o}},{key:"toJSON",value:function(a){var o=(0,_e.Z)((0,de.Z)(n.prototype),"toJSON",this).call(this,a);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}]),n})(IA).prototype.isInstancedInterleavedBuffer=!0,function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.buffer=s,this.type=n,this.itemSize=r,this.elementSize=a,this.count=o,this.version=0}return(0,D.Z)(i,[{key:"needsUpdate",set:function(n){!0===n&&this.version++}},{key:"setBuffer",value:function(n){return this.buffer=n,this}},{key:"setType",value:function(n,r){return this.type=n,this.elementSize=r,this}},{key:"setItemSize",value:function(n){return this.itemSize=n,this}},{key:"setCount",value:function(n){return this.count=n,this}}]),i}().prototype.isGLBufferAttribute=!0;var j5=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,M.Z)(this,i),this.radius=s,this.phi=n,this.theta=r,this}return(0,D.Z)(i,[{key:"set",value:function(n,r,a){return this.radius=n,this.phi=r,this.theta=a,this}},{key:"copy",value:function(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}},{key:"makeSafe",value:function(){var n=1e-6;return this.phi=Math.max(n,Math.min(Math.PI-n,this.phi)),this}},{key:"setFromVector3",value:function(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}},{key:"setFromCartesianCoords",value:function(n,r,a){return this.radius=Math.sqrt(n*n+r*r+a*a),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,a),this.phi=Math.acos(hu(r/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}(),W5=new Yt,GA=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt(-1/0,-1/0);(0,M.Z)(this,i),this.min=s,this.max=n}return(0,D.Z)(i,[{key:"set",value:function(n,r){return this.min.copy(n),this.max.copy(r),this}},{key:"setFromPoints",value:function(n){this.makeEmpty();for(var r=0,a=n.length;r<a;r++)this.expandByPoint(n[r]);return this}},{key:"setFromCenterAndSize",value:function(n,r){var a=W5.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(a),this.max.copy(n).add(a),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.min.copy(n.min),this.max.copy(n.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(n){return this.min.min(n),this.max.max(n),this}},{key:"expandByVector",value:function(n){return this.min.sub(n),this.max.add(n),this}},{key:"expandByScalar",value:function(n){return this.min.addScalar(-n),this.max.addScalar(n),this}},{key:"containsPoint",value:function(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y)}},{key:"containsBox",value:function(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}},{key:"getParameter",value:function(n,r){return r.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y)}},{key:"clampPoint",value:function(n,r){return r.copy(n).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(n){return W5.copy(n).clamp(this.min,this.max).sub(n).length()}},{key:"intersect",value:function(n){return this.min.max(n.min),this.max.min(n.max),this}},{key:"union",value:function(n){return this.min.min(n.min),this.max.max(n.max),this}},{key:"translate",value:function(n){return this.min.add(n),this.max.add(n),this}},{key:"equals",value:function(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}]),i}();GA.prototype.isBox2=!0;var q5=new xe,ZO=new xe,ale=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new xe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xe;(0,M.Z)(this,i),this.start=s,this.end=n}return(0,D.Z)(i,[{key:"set",value:function(n,r){return this.start.copy(n),this.end.copy(r),this}},{key:"copy",value:function(n){return this.start.copy(n.start),this.end.copy(n.end),this}},{key:"getCenter",value:function(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(n){return n.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(n,r){return this.delta(r).multiplyScalar(n).add(this.start)}},{key:"closestPointToPointParameter",value:function(n,r){q5.subVectors(n,this.start),ZO.subVectors(this.end,this.start);var a=ZO.dot(ZO),u=ZO.dot(q5)/a;return r&&(u=hu(u,0,1)),u}},{key:"closestPointToPoint",value:function(n,r,a){var o=this.closestPointToPointParameter(n,r);return this.delta(a).multiplyScalar(o).add(this.start)}},{key:"applyMatrix4",value:function(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}},{key:"equals",value:function(n){return n.start.equals(this.start)&&n.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}();(function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).material=r,a.render=function(){},a.hasPositions=!1,a.hasNormals=!1,a.hasColors=!1,a.hasUvs=!1,a.positionArray=null,a.normalArray=null,a.colorArray=null,a.uvArray=null,a.count=0,a}return n})(Na).prototype.isImmediateRenderObject=!0;var jm=new xe,BO=new Cr,xU=new Cr,ole=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r){var a;(0,M.Z)(this,n);for(var o=Y5(r),u=new Fi,c=[],d=[],m=new lr(0,0,1),_=new lr(0,1,0),b=0;b<o.length;b++){var E=o[b];E.parent&&E.parent.isBone&&(c.push(0,0,0),c.push(0,0,0),d.push(m.r,m.g,m.b),d.push(_.r,_.g,_.b))}u.setAttribute("position",new Fr(c,3)),u.setAttribute("color",new Fr(d,3));var T=new Vm({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(a=s.call(this,u,T)).type="SkeletonHelper",a.isSkeletonHelper=!0,a.root=r,a.bones=o,a.matrix=r.matrixWorld,a.matrixAutoUpdate=!1,a}return(0,D.Z)(n,[{key:"updateMatrixWorld",value:function(a){var o=this.bones,u=this.geometry,c=u.getAttribute("position");xU.copy(this.root.matrixWorld).invert();for(var d=0,m=0;d<o.length;d++){var _=o[d];_.parent&&_.parent.isBone&&(BO.multiplyMatrices(xU,_.matrixWorld),jm.setFromMatrixPosition(BO),c.setXYZ(m,jm.x,jm.y,jm.z),BO.multiplyMatrices(xU,_.parent.matrixWorld),jm.setFromMatrixPosition(BO),c.setXYZ(m+1,jm.x,jm.y,jm.z),m+=2)}u.getAttribute("position").needsUpdate=!0,(0,_e.Z)((0,de.Z)(n.prototype),"updateMatrixWorld",this).call(this,a)}}]),n}(LA);function Y5(i){var s=[];i&&i.isBone&&s.push(i);for(var n=0;n<i.children.length;n++)s.push.apply(s,Y5(i.children[n]));return s}var ule=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,M.Z)(this,n),u=new lr(u),c=new lr(c);for(var d=o/2,m=a/o,_=a/2,b=[],E=[],T=0,I=0,N=-_;T<=o;T++,N+=m){b.push(-_,0,N,_,0,N),b.push(N,0,-_,N,0,_);var W=T===d?u:c;W.toArray(E,I),W.toArray(E,I+=3),W.toArray(E,I+=3),W.toArray(E,I+=3),I+=3}var U=new Fi;U.setAttribute("position",new Fr(b,3)),U.setAttribute("color",new Fr(E,3));var H=new Vm({vertexColors:!0,toneMapped:!1});return(r=s.call(this,U,H)).type="GridHelper",r}return n}(LA),fle=new Float32Array(1);new Int32Array(fle.buffer),Xc.create=function(i,s){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(Xc.prototype),i.prototype.constructor=i,i.prototype.getPoint=s,i},gU.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)},ule.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ole.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Gm.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Pue.extractUrlBase(i)},Gm.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},GA.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},GA.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},GA.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},GA.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)},Kc.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},Kc.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Kc.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},Kc.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},Kc.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)},ak.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},mO.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)},ale.prototype.center=function(i){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(i)},du.prototype.flattenToArrayOffset=function(i,s){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,s)},du.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},du.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},du.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},du.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},du.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},Cr.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},Cr.prototype.flattenToArrayOffset=function(i,s){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,s)},Cr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new xe).setFromMatrixColumn(this,3)},Cr.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},Cr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Cr.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Cr.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Cr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Cr.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},Cr.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Cr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Cr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Cr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Cr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Cr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Cr.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Cr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Cr.prototype.makeFrustum=function(i,s,n,r,a,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,s,r,n,a,o)},Cr.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},_v.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)},Xo.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)},Xo.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},sk.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},sk.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},sk.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},bl.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},bl.prototype.barycoordFromPoint=function(i,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,s)},bl.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},bl.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},bl.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)},bl.barycoordFromPoint=function(i,s,n,r,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),bl.getBarycoord(i,s,n,r,a)},bl.normal=function(i,s,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),bl.getNormal(i,s,n,r)},ZA.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},ZA.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Rk(this,i)},ZA.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new wU(this,i)},Yt.prototype.fromAttribute=function(i,s,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,s,n)},Yt.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},Yt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},xe.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},xe.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},xe.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},xe.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},xe.prototype.getColumnFromMatrix=function(i,s){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(s,i)},xe.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},xe.prototype.fromAttribute=function(i,s,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,s,n)},xe.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},xe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},La.prototype.fromAttribute=function(i,s,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,s,n)},La.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Na.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},Na.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Na.prototype.translate=function(i,s){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(s,i)},Na.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Na.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(Na.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(s){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=s}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Au.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Au.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),j6.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Qu.prototype.setLens=function(i,s){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==s&&(this.filmGauge=s),this.setFocalLength(i)},Object.defineProperties(cd.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(s){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=s}},shadowCameraLeft:{set:function(s){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=s}},shadowCameraRight:{set:function(s){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=s}},shadowCameraTop:{set:function(s){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=s}},shadowCameraBottom:{set:function(s){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=s}},shadowCameraNear:{set:function(s){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=s}},shadowCameraFar:{set:function(s){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=s}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(s){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=s}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(s){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=s}},shadowMapHeight:{set:function(s){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=s}}}),Object.defineProperties(fo.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===yA},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(yA)}}}),fo.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?yA:gA),this},fo.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},fo.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Fi.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},Fi.prototype.addAttribute=function(i,s){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),s&&s.isBufferAttribute||s&&s.isInterleavedBufferAttribute?"index"===i?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(s),this):this.setAttribute(i,s):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new fo(arguments[1],arguments[2])))},Fi.prototype.addDrawCall=function(i,s,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,s)},Fi.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Fi.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Fi.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)},Fi.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(Fi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),IA.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?yA:gA),this},IA.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Rk.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Rk.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Rk.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},X3.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},tle.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(vu.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new lr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===s}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(s){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=s}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Fm.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(s){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=s}}}),ka.prototype.clearTarget=function(i,s,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(s,n,r)},ka.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},ka.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ka.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ka.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ka.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ka.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ka.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ka.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ka.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ka.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ka.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ka.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ka.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ka.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},ka.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ka.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ka.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ka.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ka.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ka.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ka.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ka.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ka.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ka.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ka.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=s}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=s}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(s){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===s?g_:Mu}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(L6.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(sd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=s}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=s}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=s}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=s}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(s){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=s}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(s){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=s}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(s){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=s}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(s){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=s}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(s){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=s}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(s){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=s}}}),Uue.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var s=this;return(new Fue).load(i,function(r){s.setBuffer(r)}),this},Vue.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},L3.prototype.updateCubeMap=function(i,s){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,s)},L3.prototype.clear=function(i,s,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,s,n,r)},tk.crossOrigin=void 0,tk.loadTexture=function(i,s,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new Mue;a.setCrossOrigin(this.crossOrigin);var o=a.load(i,n,void 0,r);return s&&(o.mapping=s),o},tk.loadTextureCube=function(i,s,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new Sue;a.setCrossOrigin(this.crossOrigin);var o=a.load(i,n,void 0,r);return s&&(o.mapping=s),o},tk.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},tk.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"133"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="133");var K5={type:"change"},IU={type:"start"},DU={type:"end"},hle=function(i){(0,S.Z)(n,i);var s=(0,re.Z)(n);function n(r,a){var o,dt,Vn,fi,ri,qr,ga;(0,M.Z)(this,n),o=s.call(this),void 0===a&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),a===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.object=r,o.domElement=a,o.domElement.style.touchAction="none",o.enabled=!0,o.target=new xe,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.05,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.panSpeed=1,o.screenSpacePanning=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},o.mouseButtons={LEFT:zw.ROTATE,MIDDLE:zw.DOLLY,RIGHT:zw.PAN},o.touches={ONE:Gw.ROTATE,TWO:Gw.DOLLY_PAN},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o._domElementKeyEvents=null,o.getPolarAngle=function(){return _.phi},o.getAzimuthalAngle=function(){return _.theta},o.getDistance=function(){return this.object.position.distanceTo(this.target)},o.listenToKeyEvents=function(dt){dt.addEventListener("keydown",Zr),this._domElementKeyEvents=dt},o.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},o.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(K5),u.update(),d=c.NONE},o.update=(dt=new xe,Vn=(new Xo).setFromUnitVectors(r.up,new xe(0,1,0)),fi=Vn.clone().invert(),ri=new xe,qr=new Xo,ga=2*Math.PI,function(){var pu=u.object.position;dt.copy(pu).sub(u.target),dt.applyQuaternion(Vn),_.setFromVector3(dt),u.autoRotate&&d===c.NONE&&et(2*Math.PI/60/60*u.autoRotateSpeed),u.enableDamping?(_.theta+=b.theta*u.dampingFactor,_.phi+=b.phi*u.dampingFactor):(_.theta+=b.theta,_.phi+=b.phi);var xo=u.minAzimuthAngle,Qs=u.maxAzimuthAngle;return isFinite(xo)&&isFinite(Qs)&&(xo<-Math.PI?xo+=ga:xo>Math.PI&&(xo-=ga),Qs<-Math.PI?Qs+=ga:Qs>Math.PI&&(Qs-=ga),_.theta=xo<=Qs?Math.max(xo,Math.min(Qs,_.theta)):_.theta>(xo+Qs)/2?Math.max(xo,_.theta):Math.min(Qs,_.theta)),_.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,_.phi)),_.makeSafe(),_.radius*=E,_.radius=Math.max(u.minDistance,Math.min(u.maxDistance,_.radius)),!0===u.enableDamping?u.target.addScaledVector(T,u.dampingFactor):u.target.add(T),dt.setFromSpherical(_),dt.applyQuaternion(fi),pu.copy(u.target).add(dt),u.object.lookAt(u.target),!0===u.enableDamping?(b.theta*=1-u.dampingFactor,b.phi*=1-u.dampingFactor,T.multiplyScalar(1-u.dampingFactor)):(b.set(0,0,0),T.set(0,0,0)),E=1,!!(I||ri.distanceToSquared(u.object.position)>m||8*(1-qr.dot(u.object.quaternion))>m)&&(u.dispatchEvent(K5),ri.copy(u.object.position),qr.copy(u.object.quaternion),I=!1,!0)}),o.dispose=function(){u.domElement.removeEventListener("contextmenu",Un),u.domElement.removeEventListener("pointerdown",Ke),u.domElement.removeEventListener("pointercancel",kn),u.domElement.removeEventListener("wheel",ir),u.domElement.removeEventListener("pointermove",Pe),u.domElement.removeEventListener("pointerup",Xt),null!==u._domElementKeyEvents&&u._domElementKeyEvents.removeEventListener("keydown",Zr)};var u=(0,wa.Z)(o),c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=c.NONE,m=1e-6,_=new j5,b=new j5,E=1,T=new xe,I=!1,N=new Yt,W=new Yt,U=new Yt,H=new Yt,te=new Yt,ue=new Yt,le=new Yt,he=new Yt,se=new Yt,ye=[],Ue={};function Fe(){return Math.pow(.95,u.zoomSpeed)}function et(dt){b.theta-=dt}function Ye(dt){b.phi-=dt}var tt=function(){var dt=new xe;return function(fi,ri){dt.setFromMatrixColumn(ri,0),dt.multiplyScalar(-fi),T.add(dt)}}(),wt=function(){var dt=new xe;return function(fi,ri){!0===u.screenSpacePanning?dt.setFromMatrixColumn(ri,1):(dt.setFromMatrixColumn(ri,0),dt.crossVectors(u.object.up,dt)),dt.multiplyScalar(fi),T.add(dt)}}(),pt=function(){var dt=new xe;return function(fi,ri){var qr=u.domElement;if(u.object.isPerspectiveCamera){dt.copy(u.object.position).sub(u.target);var Cs=dt.length();Cs*=Math.tan(u.object.fov/2*Math.PI/180),tt(2*fi*Cs/qr.clientHeight,u.object.matrix),wt(2*ri*Cs/qr.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(tt(fi*(u.object.right-u.object.left)/u.object.zoom/qr.clientWidth,u.object.matrix),wt(ri*(u.object.top-u.object.bottom)/u.object.zoom/qr.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function Mt(dt){u.object.isPerspectiveCamera?E/=dt:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*dt)),u.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function $t(dt){u.object.isPerspectiveCamera?E*=dt:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/dt)),u.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function _n(dt){N.set(dt.clientX,dt.clientY)}function tn(dt){H.set(dt.clientX,dt.clientY)}function Nn(){1===ye.length?N.set(ye[0].pageX,ye[0].pageY):N.set(.5*(ye[0].pageX+ye[1].pageX),.5*(ye[0].pageY+ye[1].pageY))}function sn(){1===ye.length?H.set(ye[0].pageX,ye[0].pageY):H.set(.5*(ye[0].pageX+ye[1].pageX),.5*(ye[0].pageY+ye[1].pageY))}function In(){var dt=ye[0].pageX-ye[1].pageX,Vn=ye[0].pageY-ye[1].pageY,fi=Math.sqrt(dt*dt+Vn*Vn);le.set(0,fi)}function Ht(dt){if(1==ye.length)W.set(dt.pageX,dt.pageY);else{var Vn=Bn(dt);W.set(.5*(dt.pageX+Vn.x),.5*(dt.pageY+Vn.y))}U.subVectors(W,N).multiplyScalar(u.rotateSpeed);var qr=u.domElement;et(2*Math.PI*U.x/qr.clientHeight),Ye(2*Math.PI*U.y/qr.clientHeight),N.copy(W)}function an(dt){if(1===ye.length)te.set(dt.pageX,dt.pageY);else{var Vn=Bn(dt);te.set(.5*(dt.pageX+Vn.x),.5*(dt.pageY+Vn.y))}ue.subVectors(te,H).multiplyScalar(u.panSpeed),pt(ue.x,ue.y),H.copy(te)}function hn(dt){var Vn=Bn(dt),fi=dt.pageX-Vn.x,ri=dt.pageY-Vn.y,qr=Math.sqrt(fi*fi+ri*ri);he.set(0,qr),se.set(0,Math.pow(he.y/le.y,u.zoomSpeed)),Mt(se.y),le.copy(he)}function Ke(dt){!1!==u.enabled&&(0===ye.length&&(u.domElement.setPointerCapture(dt.pointerId),u.domElement.addEventListener("pointermove",Pe),u.domElement.addEventListener("pointerup",Xt)),function(dt){ye.push(dt)}(dt),"touch"===dt.pointerType?function(dt){switch(Sr(dt),ye.length){case 1:switch(u.touches.ONE){case Gw.ROTATE:if(!1===u.enableRotate)return;Nn(),d=c.TOUCH_ROTATE;break;case Gw.PAN:if(!1===u.enablePan)return;sn(),d=c.TOUCH_PAN;break;default:d=c.NONE}break;case 2:switch(u.touches.TWO){case Gw.DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;u.enableZoom&&In(),u.enablePan&&sn(),d=c.TOUCH_DOLLY_PAN;break;case Gw.DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;u.enableZoom&&In(),u.enableRotate&&Nn(),d=c.TOUCH_DOLLY_ROTATE;break;default:d=c.NONE}break;default:d=c.NONE}d!==c.NONE&&u.dispatchEvent(IU)}(dt):function(dt){var Vn;switch(dt.button){case 0:Vn=u.mouseButtons.LEFT;break;case 1:Vn=u.mouseButtons.MIDDLE;break;case 2:Vn=u.mouseButtons.RIGHT;break;default:Vn=-1}switch(Vn){case zw.DOLLY:if(!1===u.enableZoom)return;(function(dt){le.set(dt.clientX,dt.clientY)})(dt),d=c.DOLLY;break;case zw.ROTATE:if(dt.ctrlKey||dt.metaKey||dt.shiftKey){if(!1===u.enablePan)return;tn(dt),d=c.PAN}else{if(!1===u.enableRotate)return;_n(dt),d=c.ROTATE}break;case zw.PAN:if(dt.ctrlKey||dt.metaKey||dt.shiftKey){if(!1===u.enableRotate)return;_n(dt),d=c.ROTATE}else{if(!1===u.enablePan)return;tn(dt),d=c.PAN}break;default:d=c.NONE}d!==c.NONE&&u.dispatchEvent(IU)}(dt))}function Pe(dt){!1!==u.enabled&&("touch"===dt.pointerType?function(dt){switch(Sr(dt),d){case c.TOUCH_ROTATE:if(!1===u.enableRotate)return;Ht(dt),u.update();break;case c.TOUCH_PAN:if(!1===u.enablePan)return;an(dt),u.update();break;case c.TOUCH_DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;(function(dt){u.enableZoom&&hn(dt),u.enablePan&&an(dt)})(dt),u.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;(function(dt){u.enableZoom&&hn(dt),u.enableRotate&&Ht(dt)})(dt),u.update();break;default:d=c.NONE}}(dt):function(dt){if(!1!==u.enabled)switch(d){case c.ROTATE:if(!1===u.enableRotate)return;!function(dt){W.set(dt.clientX,dt.clientY),U.subVectors(W,N).multiplyScalar(u.rotateSpeed);var Vn=u.domElement;et(2*Math.PI*U.x/Vn.clientHeight),Ye(2*Math.PI*U.y/Vn.clientHeight),N.copy(W),u.update()}(dt);break;case c.DOLLY:if(!1===u.enableZoom)return;!function(dt){he.set(dt.clientX,dt.clientY),se.subVectors(he,le),se.y>0?Mt(Fe()):se.y<0&&$t(Fe()),le.copy(he),u.update()}(dt);break;case c.PAN:if(!1===u.enablePan)return;!function(dt){te.set(dt.clientX,dt.clientY),ue.subVectors(te,H).multiplyScalar(u.panSpeed),pt(ue.x,ue.y),H.copy(te),u.update()}(dt)}}(dt))}function Xt(dt){!1!==u.enabled&&(u.dispatchEvent(DU),d=c.NONE,Ur(dt),0===ye.length&&(u.domElement.releasePointerCapture(dt.pointerId),u.domElement.removeEventListener("pointermove",Pe),u.domElement.removeEventListener("pointerup",Xt)))}function kn(dt){Ur(dt)}function ir(dt){!1===u.enabled||!1===u.enableZoom||d!==c.NONE&&d!==c.ROTATE||(dt.preventDefault(),u.dispatchEvent(IU),function(dt){dt.deltaY<0?$t(Fe()):dt.deltaY>0&&Mt(Fe()),u.update()}(dt),u.dispatchEvent(DU))}function Zr(dt){!1===u.enabled||!1===u.enablePan||function(dt){var Vn=!1;switch(dt.code){case u.keys.UP:pt(0,u.keyPanSpeed),Vn=!0;break;case u.keys.BOTTOM:pt(0,-u.keyPanSpeed),Vn=!0;break;case u.keys.LEFT:pt(u.keyPanSpeed,0),Vn=!0;break;case u.keys.RIGHT:pt(-u.keyPanSpeed,0),Vn=!0}Vn&&(dt.preventDefault(),u.update())}(dt)}function Un(dt){!1!==u.enabled&&dt.preventDefault()}function Ur(dt){delete Ue[dt.pointerId];for(var Vn=0;Vn<ye.length;Vn++)if(ye[Vn].pointerId==dt.pointerId)return void ye.splice(Vn,1)}function Sr(dt){var Vn=Ue[dt.pointerId];void 0===Vn&&(Vn=new Yt,Ue[dt.pointerId]=Vn),Vn.set(dt.pageX,dt.pageY)}function Bn(dt){return Ue[(dt.pointerId===ye[0].pointerId?ye[1]:ye[0]).pointerId]}return u.domElement.addEventListener("contextmenu",Un),u.domElement.addEventListener("pointerdown",Ke),u.domElement.addEventListener("pointercancel",kn),u.domElement.addEventListener("wheel",ir,{passive:!1}),o.update(),o}return n}(xm),Wm=new(function(){function i(s,n,r){this.atoms=s,this.bonds=n,this.coordinates=r}return i.prototype.colorOfAtom=function(s){},i.prototype.addAtom=function(s,n){return this.atoms.push(s),this.coordinates.push(n),this},i.prototype.addBond=function(s,n,r){return this.bonds.push([s,n,r]),this},i.prototype.getGeometry=function(s){var n=new xe(this.coordinates[s][0],this.coordinates[s][1],this.coordinates[s][2]);return{color:{C:3355443,H:14540253,O:16711680}[this.atoms[s]],coordinates:n}},i}())(["C","C","H","O","H","H","H","H","H"],[[0,1,1],[0,3,1],[3,2,1],[0,4,1],[0,5,1],[1,6,1],[1,7,1],[1,8,1]],[[.011,-.566,0],[-1.285,.246,-0],[1.925,-.229,-0],[1.13,.322,0],[.046,-1.195,.89],[.046,-1.195,-.89],[-2.139,-.432,0],[-1.32,.875,.89],[-1.32,.875,-.89]]),vle=["canvas"],ple=function(){function i(){}return Object.defineProperty(i.prototype,"canvas",{get:function(){return this.canvasRef.nativeElement},enumerable:!1,configurable:!0}),i.prototype.update=function(){},i.prototype.stage=function(){this.scene=new X3,this.scene.background=new lr(0),this.camera=new Qu(1.5,this.canvas.clientWidth/this.canvas.clientHeight,1,1e3),this.camera.position.z=200;for(var s=0;s<Wm.atoms.length;s++){var n=new OO({color:Wm.getGeometry(s).color}),r=new bU(1,3),a=new Au(r,n);a.position.copy(Wm.getGeometry(s).coordinates),a.scale.multiplyScalar(.2),this.scene.add(a)}for(var o=new dk(1,1,1),u=0;u<Wm.bonds.length;u+=1){var c=new Au(o,new OO({color:16777215})),d=Wm.getGeometry(Wm.bonds[u][0]).coordinates,m=Wm.getGeometry(Wm.bonds[u][1]).coordinates;c.position.copy(d),c.position.lerp(m,.5),c.scale.set(.01,.01,d.distanceTo(m)),c.lookAt(m),this.scene.add(c)}var _=new SU(16777215,.8);_.position.set(1,1,1),this.scene.add(_);var b=new SU(16777215,.5);b.position.set(-1,-1,1),this.scene.add(b)},i.prototype.animate=function(){this.renderer=new ka({canvas:this.canvas,alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),new hle(this.camera,this.renderer.domElement);var n=this;!function r(){requestAnimationFrame(r),n.update(),n.renderer.render(n.scene,n.camera)}()},i.prototype.ngOnInit=function(){},i.prototype.ngAfterViewInit=function(){this.stage(),this.animate()},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-illustrations-molecularchemistry-moleculerender"]],viewQuery:function(n,r){var a;(1&n&&v.Gf(vle,5),2&n)&&(v.iGM(a=v.CRH())&&(r.canvasRef=a.first))},decls:6,vars:0,consts:[[1,"container"],["id","content",1,"row"],[1,"display-4"],["id","canvas"],["canvas",""]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Molecule Rendering"),v.qZA(),v._UZ(4,"canvas",3,4),v.qZA(),v.qZA())},styles:["#canvas[_ngcontent-%COMP%]{width:100%;height:500px}"]}),i}();function mle(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"button",6),v.NdJ("click",function(){var u=v.CHM(n).$implicit;return v.oxw().selectedDemo=u}),v._uU(1),v.qZA()}if(2&i){var r=s.$implicit;v.xp6(1),v.hij(" ",r," ")}}function gle(i,s){1&i&&v._UZ(0,"app-illustrations-artificialintelligence-logicalagent")}function yle(i,s){1&i&&v._UZ(0,"app-illustrations-molecularchemistry-moleculerender")}var _le=function(){function i(){this.modulesList=["Artificial Intelligence / Model Filtering","Molecular Chemistry / Molecule Render"],this.selectedDemo=this.modulesList[0]}return i.prototype.ngOnInit=function(){},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-illustrations"]],inputs:{selectedDemo:"selectedDemo"},decls:12,vars:5,consts:[["id","illustrations-topic"],["color","secondary"],["mat-button","",3,"matMenuTriggerFor"],["menuTopic","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(n,r){if(1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"mat-toolbar",1),v.TgZ(2,"mat-toolbar-row"),v.TgZ(3,"button",2),v._uU(4),v.qZA(),v.TgZ(5,"mat-menu",null,3),v.YNc(7,mle,2,1,"button",4),v.qZA(),v.TgZ(8,"span"),v._uU(9,"\u2713"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.YNc(10,gle,1,0,"app-illustrations-artificialintelligence-logicalagent",5),v.YNc(11,yle,1,0,"app-illustrations-molecularchemistry-moleculerender",5)),2&n){var a=v.MAs(6);v.xp6(3),v.Q6J("matMenuTriggerFor",a),v.xp6(1),v.Oqu(r.selectedDemo),v.xp6(3),v.Q6J("ngForOf",r.modulesList),v.xp6(3),v.Q6J("ngIf","Artificial Intelligence / Model Filtering"==r.selectedDemo),v.xp6(1),v.Q6J("ngIf","Molecular Chemistry / Molecule Render"==r.selectedDemo)}},directives:[B9,QG,hB,Q$,Y$,nl,As,dP,Kee,ple],styles:["div#illustrations-topic[_ngcontent-%COMP%]{margin-bottom:50px}"]}),i}();function ble(i,s){if(1&i&&(v.TgZ(0,"div",6),v.TgZ(1,"mat-card"),v.TgZ(2,"mat-card-header"),v._UZ(3,"img",7),v.TgZ(4,"mat-card-title"),v._uU(5),v.qZA(),v.TgZ(6,"mat-card-subtitle"),v._uU(7),v.qZA(),v.qZA(),v._UZ(8,"img",8),v.TgZ(9,"mat-card-content"),v.TgZ(10,"p"),v._uU(11),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&i){var n=s.$implicit;v.xp6(3),v.s9C("src",n.logo,v.LSH),v.xp6(2),v.Oqu(n.name),v.xp6(2),v.Oqu(n.subtitle),v.xp6(1),v.s9C("src",n.logo,v.LSH),v.xp6(3),v.hij(" ",n.description," ")}}function wle(i,s){if(1&i&&(v.TgZ(0,"div",9),v.TgZ(1,"mat-card"),v.TgZ(2,"mat-card-header"),v._UZ(3,"img",10),v.TgZ(4,"mat-card-title"),v._uU(5),v.qZA(),v.TgZ(6,"mat-card-subtitle"),v._uU(7),v.qZA(),v.qZA(),v.TgZ(8,"mat-card-content"),v.TgZ(9,"p"),v._uU(10),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&i){var n=s.$implicit;v.xp6(3),v.s9C("src",n.logo,v.LSH),v.xp6(2),v.Oqu(n.name),v.xp6(2),v.Oqu(n.subtitle),v.xp6(3),v.hij(" ",n.description," ")}}var kle=function(){function i(){this.teams=[new fd("ACLimitExceeded","assets/teams/logo_aclimitexceeded.png","This is our Competitive Programming teams. Currently it's composed of Me, Gaurang Tandon, and Dixit Garg. We love to study and practice pretty algorithmic problems. We ranked 30th on ICPC-Amrita regionals last year and hope to do a lot better this time around.","Algorithmic Theory"),new fd("BayesianMechanics","assets/teams/logo_bayesianmechanics.png","A Big group of machine learning enthusiasts, this is me, Kanish, Gaurang, Yoogottam, Jai, and hopefully soon, Bhuvanesh. The purpose of this team if competive ML, but since everyone has college research in ML theory, we hope our work will be well inspired.","Machine Learning"),new fd("OccamsRazor","assets/teams/logo_occamsrazor.png","Now to our Hackathon Team. This one has me, Kanish, Gaurang, Avni, Arpan and Akshat. First assembled to make the Library App for the Smart India Hackathon (which we won), we stuck around and await the next development opportunities that come our way.","Software Development"),new fd("BowsersCastle","assets/teams/logo_bowserscastle.png","With Kalp and Yoogottam at the head, this is our CTF group. We started off with a reasonable performance at PicoCTF, and we keep attempting CTFs on and off with a dream of someday performing well at Google CTF.","Security Engineering"),new fd("OptimisticOptimizations","assets/teams/logo_optimisticoptimizations.png","Me, Gaurang, Arpan and Yoogottam started off as a team with Google Hashcode in the first year of college. While we have not made a lot of efforts here, it's an annual tradition to pour in some effort into learning how to best approximate and fail at Hashcode (after an honest try, ofc).","Approximation Algorithms"),new fd("PhymlqGroup","assets/teams/logo_phymlqgroup.png","We are just 3 friends and classmate, that's me, Jai and Kalp with shared interests in the same research topics in the intersection of Machine Learning and Physics, mostly on the particle physics side.","Computational Physics Research")],this.projects=[new fd("Qubit Routing","assets/teams/icon_quantumcomputation.jpg","The task of Quantum Compilation entails mapping the logical qubits to the physical qubits on the device, and evolving said mapping using swap gates, so that all operations in the logical circuit become local (on physically neighboring qubits).","Reinforcement Learning"),new fd("Particle Tagging","assets/teams/icon_hadroncollider.jpg","Collisions of particles in accelerators lead to showers of smaller particles, coming from a single source collision we call them a jet. Classifying the source of these jets (collisions of what types of particles lead to this) is an interesting task in learning from structures in the images (extremely sparse, hence this is a graph task) that they leave on the calorimeters.","Graph Convolutional Networks"),new fd("Food Segmentation","assets/teams/icon_foodsegmentation.png","This is the AICrowd challenge. That's standard semantic segmentation, but on a dataset that is much harder than usual, has class imbalances and poor annotations. Low on theory, but this is still an interesting real world ML task out there.","Semantic Segmentation"),new fd("Ensemble Biological Sensors","assets/teams/icon_biologicalsensors.jpg","A small project in my Systems Biology course, it constitutes an interesting question. Is the dynamic range of fold change sensors enhanced by ensemble behavior. And how do ensembles of sensors affect sensing in general. Insipired from a paper on a similar idea by Prof. Steven Frank.","Differential Equation Modelling")]}return i.prototype.ngOnInit=function(){},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-projects"]],decls:11,vars:2,consts:[[1,"container"],[1,"row","page-heading"],[1,"display-2"],[1,"row"],["class","col-lg-6 card-container",4,"ngFor","ngForOf"],["class","col-lg-4 card-container",4,"ngFor","ngForOf"],[1,"col-lg-6","card-container"],["mat-card-avatar","","alt","Project Icon",3,"src"],["mat-card-image","","height","200px","alt","Project Icon",3,"src"],[1,"col-lg-4","card-container"],["mat-card-avatar","","alt","Team Logo",3,"src"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Projects I am excited by:"),v.qZA(),v.qZA(),v.TgZ(4,"div",3),v.YNc(5,ble,12,5,"div",4),v.qZA(),v.TgZ(6,"div",1),v.TgZ(7,"h1",2),v._uU(8,"Teams I am a part of:"),v.qZA(),v.qZA(),v.TgZ(9,"div",3),v.YNc(10,wle,11,4,"div",5),v.qZA(),v.qZA()),2&n&&(v.xp6(5),v.Q6J("ngForOf",r.projects),v.xp6(5),v.Q6J("ngForOf",r.teams))},directives:[nl,cB,fB,qG,uB,lB,WG,I9],styles:["div.card-container[_ngcontent-%COMP%]{padding:20px}a[_ngcontent-%COMP%]:hover{text-decoration:none}img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}"]}),i}(),fd=function(){return function(s,n,r,a){this.name=s,this.logo=n,this.description=r,this.subtitle=a}}(),Ele=J(282),$5=function(){function i(s,n,r){var a=this;this.afAuth=s,this.db=n,this.router=r,this.authState=null,this.afAuth.authState.subscribe(function(o){a.authState=o})}return Object.defineProperty(i.prototype,"authenticated",{get:function(){return null!==this.authState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUser",{get:function(){return this.authenticated?this.authState:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUserId",{get:function(){return this.authenticated?this.authState.uid:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUserAnonymous",{get:function(){return!!this.authenticated&&this.authState.isAnonymous},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUserDisplayName",{get:function(){return this.authState?this.currentUserAnonymous?"Anonymous":this.authState.displayName||"User without a Name":"Guest"},enumerable:!1,configurable:!0}),i.prototype.googleLogin=function(){var s=new Ele.N;return this.socialSignIn(s)},i.prototype.socialSignIn=function(s){var n=this;return this.afAuth.signInWithPopup(s).then(function(r){n.authState=r.user,n.updateUserData()}).catch(function(r){return console.log(r)})},i.prototype.signOut=function(){this.afAuth.signOut(),this.router.navigate(["/"])},i.prototype.updateUserData=function(){var n={email:this.authState.email,name:this.authState.displayName};this.db.object("users/"+this.currentUserId).update(n).catch(function(r){return console.log(r)})},i.\u0275fac=function(n){return new(n||i)(v.LFG(Kh),v.LFG(cG),v.LFG(Tu))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}();function Cle(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div"),v.TgZ(1,"h1",2),v._uU(2),v.qZA(),v._UZ(3,"img",3),v.TgZ(4,"div"),v.TgZ(5,"button",4),v.NdJ("click",function(){return v.CHM(n),v.oxw().signOutWithGoogle()}),v._UZ(6,"span",5),v.TgZ(7,"span",6),v._uU(8,"Sign Out from your Google account"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(9,"div",7),v._uU(10,"The Google account you logged in with does not have an associated username or registered privaledges. If you have an account here, please login with your IIIT account."),v.qZA(),v.qZA()}if(2&i){var r=v.oxw();v.xp6(2),v.hij("Howdy, ",r.auth.currentUser.displayName,""),v.xp6(1),v.Q6J("src",r.auth.currentUser.photoURL||"https://api.adorable.io/avatars/109/fire.png",v.LSH)}}function Sle(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div"),v.TgZ(1,"h1",2),v._uU(2,"Howdy There!"),v.qZA(),v.TgZ(3,"div"),v.TgZ(4,"button",4),v.NdJ("click",function(){return v.CHM(n),v.oxw().signInWithGoogle()}),v._UZ(5,"span",5),v.TgZ(6,"span",6),v._uU(7,"Login with Google"),v.qZA(),v.qZA(),v.qZA(),v.qZA()}}var X5=function(){function i(s,n){this.auth=s,this.router=n}return i.prototype.ngOnInit=function(){},i.prototype.afterSignIn=function(){this.router.navigate(["/"])},i.prototype.signOutWithGoogle=function(){this.auth.signOut()},i.prototype.signInWithGoogle=function(){var s=this;this.auth.googleLogin().then(function(){return s.afterSignIn()})},i.\u0275fac=function(n){return new(n||i)(v.Y36($5),v.Y36(Tu))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-profile"]],decls:3,vars:2,consts:[[1,"container","text-center"],[4,"ngIf"],[1,"display-3"],["width","200px",1,"img-thumbnail",3,"src"],["mat-button","","id","google-signin",1,"btn",3,"click"],[1,"icon"],[1,"label"],[1,"display-5"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.YNc(1,Cle,11,2,"div",1),v.YNc(2,Sle,8,0,"div",1),v.qZA()),2&n&&(v.xp6(1),v.Q6J("ngIf",r.auth.currentUser),v.xp6(1),v.Q6J("ngIf",!r.auth.currentUser))},directives:[As,hB],styles:["#google-signin[_ngcontent-%COMP%]{margin:20px;padding:10px}#google-signin[_ngcontent-%COMP%]   span.icon[_ngcontent-%COMP%]{background:url(https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg) transparent 5px 50% no-repeat;display:inline-block;vertical-align:middle;width:50px;height:50px;margin-right:20px}.container[_ngcontent-%COMP%]{margin-top:20px}"]}),i}(),Mle=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:Bee},{path:"friends",component:zee},{path:"illustrations",component:_le},{path:"projects",component:kle},{path:"login",component:X5},{path:"profile",component:X5},{path:"blog",component:function(){function i(s){this.sanitizer=s,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl("https://animeshsinha1309.github.io/notes-blog/")}return i.\u0275fac=function(n){return new(n||i)(v.Y36(Bt))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-blog"]],decls:1,vars:1,consts:[[2,"width","100%","height","100vh","border","none",3,"src"]],template:function(n,r){1&n&&v._UZ(0,"iframe",0),2&n&&v.Q6J("src",r.safeUrl,v.uOi)},styles:[""]}),i}()}],Ale=function(){function i(){}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[c4.forRoot(Mle)],c4]}),i}(),Q5_firebase={apiKey:"AIzaSyBEqX5EXqhTsEDf5ujduEhushEXxVDQoZc",authDomain:"animesh-researchwebwebsite.firebaseapp.com",databaseURL:"https://animesh-researchwebwebsite.firebaseio.com",projectId:"animesh-researchwebwebsite",storageBucket:"animesh-researchwebwebsite.appspot.com",messagingSenderId:"413085083843"},w_=function(){return{exact:!0}};function xle(i,s){1&i&&(v.TgZ(0,"li",6),v.TgZ(1,"a",14),v._uU(2,"Login"),v.qZA(),v.qZA()),2&i&&v.Q6J("routerLinkActiveOptions",v.DdM(1,w_))}function Ile(i,s){1&i&&(v.TgZ(0,"li",6),v.TgZ(1,"a",15),v._uU(2,"My Profile"),v.qZA(),v.qZA()),2&i&&v.Q6J("routerLinkActiveOptions",v.DdM(1,w_))}var Dle=function(){function i(s){this.auth=s,this.title="ResearchWebsite"}return i.\u0275fac=function(n){return new(n||i)(v.Y36($5))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-root"]],decls:26,vars:12,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","sticky-top"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],["routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],["routerLink","/home",1,"nav-link"],["routerLink","/illustrations",1,"nav-link"],["routerLink","/friends",1,"nav-link"],["routerLink","/projects",1,"nav-link"],["routerLink","/blog",1,"nav-link"],[1,"navbar-nav","ml-auto"],["class","nav-item","routerLinkActive","active",3,"routerLinkActiveOptions",4,"ngIf"],["routerLink","/login",1,"nav-link"],["routerLink","/profile",1,"nav-link"]],template:function(n,r){1&n&&(v.TgZ(0,"nav",0),v.TgZ(1,"a",1),v._uU(2,"Hi, I am Animesh!"),v.qZA(),v.TgZ(3,"button",2),v._UZ(4,"span",3),v.qZA(),v.TgZ(5,"div",4),v.TgZ(6,"ul",5),v.TgZ(7,"li",6),v.TgZ(8,"a",7),v._uU(9,"Home"),v.qZA(),v.qZA(),v.TgZ(10,"li",6),v.TgZ(11,"a",8),v._uU(12,"Illustrations"),v.qZA(),v.qZA(),v.TgZ(13,"li",6),v.TgZ(14,"a",9),v._uU(15,"Friends"),v.qZA(),v.qZA(),v.TgZ(16,"li",6),v.TgZ(17,"a",10),v._uU(18,"Projects"),v.qZA(),v.qZA(),v.TgZ(19,"li",6),v.TgZ(20,"a",11),v._uU(21,"Blog"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(22,"ul",12),v.YNc(23,xle,3,2,"li",13),v.YNc(24,Ile,3,2,"li",13),v.qZA(),v.qZA(),v.qZA(),v._UZ(25,"router-outlet")),2&n&&(v.xp6(7),v.Q6J("routerLinkActiveOptions",v.DdM(7,w_)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(8,w_)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(9,w_)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(10,w_)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(11,w_)),v.xp6(4),v.Q6J("ngIf",!r.auth.currentUser),v.xp6(1),v.Q6J("ngIf",r.auth.currentUser))},directives:[a4,LP,As,XB],styles:['@import"https://fonts.googleapis.com/css?family=Open+Sans";nav.navbar[_ngcontent-%COMP%]{padding:20px;font-family:"Open Sans",sans-serif}nav.navbar[_ngcontent-%COMP%]   a.navbar-brand[_ngcontent-%COMP%]{font-weight:bold;padding-left:20px;padding-right:20px}nav.navbar[_ngcontent-%COMP%]   li.nav-item[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}']}),i}(),Rle=function(){function i(){}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i,bootstrap:[Dle]}),i.\u0275inj=v.cJS({providers:[HT],imports:[[ds,Ale,oL,D9,L9,U9,J$,xX,$X,fQ,SQ,ku.hO.initializeApp(Q5_firebase),eK,Zc,KF,fR]]}),i}();$a().bootstrapModule(Rle).catch(function(i){return console.error(i)})},8774:function(rn,mt,J){rn.exports=J(5579)},4762:function(rn,mt,J){"use strict";J.d(mt,{pi:function(){return D},_T:function(){return M},mG:function(){return ke},Jh:function(){return v},XA:function(){return ne},CR:function(){return Oe},ev:function(){return Ae}});var D=function(){return(D=Object.assign||function(Ot){for(var Ct,Zt=1,z=arguments.length;Zt<z;Zt++)for(var k in Ct=arguments[Zt])Object.prototype.hasOwnProperty.call(Ct,k)&&(Ot[k]=Ct[k]);return Ot}).apply(this,arguments)};function M(xt,Ot){var Ct={};for(var Zt in xt)Object.prototype.hasOwnProperty.call(xt,Zt)&&Ot.indexOf(Zt)<0&&(Ct[Zt]=xt[Zt]);if(null!=xt&&"function"==typeof Object.getOwnPropertySymbols){var z=0;for(Zt=Object.getOwnPropertySymbols(xt);z<Zt.length;z++)Ot.indexOf(Zt[z])<0&&Object.prototype.propertyIsEnumerable.call(xt,Zt[z])&&(Ct[Zt[z]]=xt[Zt[z]])}return Ct}function ke(xt,Ot,Ct,Zt){return new(Ct||(Ct=Promise))(function(k,B){function X(nt){try{Ie(Zt.next(nt))}catch(_t){B(_t)}}function ge(nt){try{Ie(Zt.throw(nt))}catch(_t){B(_t)}}function Ie(nt){nt.done?k(nt.value):function(k){return k instanceof Ct?k:new Ct(function(B){B(k)})}(nt.value).then(X,ge)}Ie((Zt=Zt.apply(xt,Ot||[])).next())})}function v(xt,Ot){var Zt,z,k,B,Ct={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return B={next:X(0),throw:X(1),return:X(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function X(Ie){return function(nt){return function(Ie){if(Zt)throw new TypeError("Generator is already executing.");for(;Ct;)try{if(Zt=1,z&&(k=2&Ie[0]?z.return:Ie[0]?z.throw||((k=z.return)&&k.call(z),0):z.next)&&!(k=k.call(z,Ie[1])).done)return k;switch(z=0,k&&(Ie=[2&Ie[0],k.value]),Ie[0]){case 0:case 1:k=Ie;break;case 4:return Ct.label++,{value:Ie[1],done:!1};case 5:Ct.label++,z=Ie[1],Ie=[0];continue;case 7:Ie=Ct.ops.pop(),Ct.trys.pop();continue;default:if(!(k=(k=Ct.trys).length>0&&k[k.length-1])&&(6===Ie[0]||2===Ie[0])){Ct=0;continue}if(3===Ie[0]&&(!k||Ie[1]>k[0]&&Ie[1]<k[3])){Ct.label=Ie[1];break}if(6===Ie[0]&&Ct.label<k[1]){Ct.label=k[1],k=Ie;break}if(k&&Ct.label<k[2]){Ct.label=k[2],Ct.ops.push(Ie);break}k[2]&&Ct.ops.pop(),Ct.trys.pop();continue}Ie=Ot.call(xt,Ct)}catch(nt){Ie=[6,nt],z=0}finally{Zt=k=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}([Ie,nt])}}}function ne(xt){var Ot="function"==typeof Symbol&&Symbol.iterator,Ct=Ot&&xt[Ot],Zt=0;if(Ct)return Ct.call(xt);if(xt&&"number"==typeof xt.length)return{next:function(){return xt&&Zt>=xt.length&&(xt=void 0),{value:xt&&xt[Zt++],done:!xt}}};throw new TypeError(Ot?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oe(xt,Ot){var Ct="function"==typeof Symbol&&xt[Symbol.iterator];if(!Ct)return xt;var z,B,Zt=Ct.call(xt),k=[];try{for(;(void 0===Ot||Ot-- >0)&&!(z=Zt.next()).done;)k.push(z.value)}catch(X){B={error:X}}finally{try{z&&!z.done&&(Ct=Zt.return)&&Ct.call(Zt)}finally{if(B)throw B.error}}return k}function Ae(xt,Ot,Ct){if(Ct||2===arguments.length)for(var k,Zt=0,z=Ot.length;Zt<z;Zt++)(k||!(Zt in Ot))&&(k||(k=Array.prototype.slice.call(Ot,0,Zt)),k[Zt]=Ot[Zt]);return xt.concat(k||Array.prototype.slice.call(Ot))}},2988:function(rn,mt,J){"use strict";function _e(de,D){(null==D||D>de.length)&&(D=de.length);for(var M=0,S=new Array(D);M<D;M++)S[M]=de[M];return S}J.d(mt,{Z:function(){return _e}})},1718:function(rn,mt,J){"use strict";function _e(de){if(Array.isArray(de))return de}J.d(mt,{Z:function(){return _e}})},6518:function(rn,mt,J){"use strict";function _e(de){if(void 0===de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return de}J.d(mt,{Z:function(){return _e}})},8239:function(rn,mt,J){"use strict";function _e(D,M,S,re,Re,ke,v){try{var be=D[ke](v),we=be.value}catch(ne){return void S(ne)}be.done?M(we):Promise.resolve(we).then(re,Re)}function de(D){return function(){var M=this,S=arguments;return new Promise(function(re,Re){var ke=D.apply(M,S);function v(we){_e(ke,re,Re,v,be,"next",we)}function be(we){_e(ke,re,Re,v,be,"throw",we)}v(void 0)})}}J.d(mt,{Z:function(){return de}})},5134:function(rn,mt,J){"use strict";function _e(de,D){if(!(de instanceof D))throw new TypeError("Cannot call a class as a function")}J.d(mt,{Z:function(){return _e}})},4768:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return D}});var _e=J(2007),de=J(1197);function D(M,S,re){return(D=(0,de.Z)()?Reflect.construct:function(ke,v,be){var we=[null];we.push.apply(we,v);var Oe=new(Function.bind.apply(ke,we));return be&&(0,_e.Z)(Oe,be.prototype),Oe}).apply(null,arguments)}},7289:function(rn,mt,J){"use strict";function _e(D,M){for(var S=0;S<M.length;S++){var re=M[S];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(D,re.key,re)}}function de(D,M,S){return M&&_e(D.prototype,M),S&&_e(D,S),D}J.d(mt,{Z:function(){return de}})},6054:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return de}});var _e=J(2491);function de(D,M){var S="undefined"!=typeof Symbol&&D[Symbol.iterator]||D["@@iterator"];if(!S){if(Array.isArray(D)||(S=(0,_e.Z)(D))||M&&D&&"number"==typeof D.length){S&&(D=S);var re=0,Re=function(){};return{s:Re,n:function(){return re>=D.length?{done:!0}:{done:!1,value:D[re++]}},e:function(ne){throw ne},f:Re}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var be,ke=!0,v=!1;return{s:function(){S=S.call(D)},n:function(){var ne=S.next();return ke=ne.done,ne},e:function(ne){v=!0,be=ne},f:function(){try{!ke&&null!=S.return&&S.return()}finally{if(v)throw be}}}}},9727:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return M}});var _e=J(9187),de=J(1197),D=J(8968);function M(S){var re=(0,de.Z)();return function(){var v,ke=(0,_e.Z)(S);if(re){var be=(0,_e.Z)(this).constructor;v=Reflect.construct(ke,arguments,be)}else v=ke.apply(this,arguments);return(0,D.Z)(this,v)}}},3512:function(rn,mt,J){"use strict";function _e(de,D,M){return D in de?Object.defineProperty(de,D,{value:M,enumerable:!0,configurable:!0,writable:!0}):de[D]=M,de}J.d(mt,{Z:function(){return _e}})},7528:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return D}});var _e=J(9187);function D(M,S,re){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(ke,v,be){var we=function(M,S){for(;!Object.prototype.hasOwnProperty.call(M,S)&&null!==(M=(0,_e.Z)(M)););return M}(ke,v);if(we){var ne=Object.getOwnPropertyDescriptor(we,v);return ne.get?ne.get.call(be):ne.value}})(M,S,re||M)}},9187:function(rn,mt,J){"use strict";function _e(de){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(de)}J.d(mt,{Z:function(){return _e}})},1885:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return de}});var _e=J(2007);function de(D,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(M&&M.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),M&&(0,_e.Z)(D,M)}},1197:function(rn,mt,J){"use strict";function _e(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(de){return!1}}J.d(mt,{Z:function(){return _e}})},8967:function(rn,mt,J){"use strict";function _e(de){if("undefined"!=typeof Symbol&&null!=de[Symbol.iterator]||null!=de["@@iterator"])return Array.from(de)}J.d(mt,{Z:function(){return _e}})},700:function(rn,mt,J){"use strict";function _e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}J.d(mt,{Z:function(){return _e}})},8968:function(rn,mt,J){"use strict";function _e(M){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(re){return typeof re}:function(re){return re&&"function"==typeof Symbol&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re})(M)}J.d(mt,{Z:function(){return D}});var de=J(6518);function D(M,S){return!S||"object"!==_e(S)&&"function"!=typeof S?(0,de.Z)(M):S}},2007:function(rn,mt,J){"use strict";function _e(de,D){return(_e=Object.setPrototypeOf||function(S,re){return S.__proto__=re,S})(de,D)}J.d(mt,{Z:function(){return _e}})},3740:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return S}});var _e=J(1718),D=J(2491),M=J(700);function S(re,Re){return(0,_e.Z)(re)||function(re,Re){var ke=null==re?null:"undefined"!=typeof Symbol&&re[Symbol.iterator]||re["@@iterator"];if(null!=ke){var ne,Oe,v=[],be=!0,we=!1;try{for(ke=ke.call(re);!(be=(ne=ke.next()).done)&&(v.push(ne.value),!Re||v.length!==Re);be=!0);}catch(Q){we=!0,Oe=Q}finally{try{!be&&null!=ke.return&&ke.return()}finally{if(we)throw Oe}}return v}}(re,Re)||(0,D.Z)(re,Re)||(0,M.Z)()}},8251:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return S}});var _e=J(1718),de=J(8967),D=J(2491),M=J(700);function S(re){return(0,_e.Z)(re)||(0,de.Z)(re)||(0,D.Z)(re)||(0,M.Z)()}},6837:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return re}});var _e=J(2988),D=J(8967),M=J(2491);function re(Re){return function(Re){if(Array.isArray(Re))return(0,_e.Z)(Re)}(Re)||(0,D.Z)(Re)||(0,M.Z)(Re)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2491:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return de}});var _e=J(2988);function de(D,M){if(D){if("string"==typeof D)return(0,_e.Z)(D,M);var S=Object.prototype.toString.call(D).slice(8,-1);if("Object"===S&&D.constructor&&(S=D.constructor.name),"Map"===S||"Set"===S)return Array.from(D);if("Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return(0,_e.Z)(D,M)}}},3693:function(rn,mt,J){"use strict";J.d(mt,{Z:function(){return S}});var _e=J(9187),de=J(2007),M=J(4768);function S(re){var Re="function"==typeof Map?new Map:void 0;return(S=function(v){if(null===v||!function(re){return-1!==Function.toString.call(re).indexOf("[native code]")}(v))return v;if("function"!=typeof v)throw new TypeError("Super expression must either be null or a function");if(void 0!==Re){if(Re.has(v))return Re.get(v);Re.set(v,be)}function be(){return(0,M.Z)(v,arguments,(0,_e.Z)(this).constructor)}return be.prototype=Object.create(v.prototype,{constructor:{value:be,enumerable:!1,writable:!0,configurable:!0}}),(0,de.Z)(be,v)})(re)}}},function(rn){rn(rn.s=8181)}]);