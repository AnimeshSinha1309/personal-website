(self.webpackChunkpersonal_website=self.webpackChunkpersonal_website||[]).push([[179],{8255:function(vn){function Ct(ne){return Promise.resolve().then(function(){var Se=new Error("Cannot find module '"+ne+"'");throw Se.code="MODULE_NOT_FOUND",Se})}Ct.keys=function(){return[]},Ct.resolve=Ct,Ct.id=8255,vn.exports=Ct},5366:function(vn,Ct,ne){"use strict";ne.d(Ct,{deG:function(){return pk},tb:function(){return Iw},AFp:function(){return HI},ip1:function(){return nA},CZH:function(){return Bp},hGG:function(){return TP},z2F:function(){return b_},sBO:function(){return tS},Sil:function(){return Lm},_Vd:function(){return _m},EJc:function(){return Pw},SBq:function(){return Rp},qLn:function(){return nl},vpe:function(){return Lh},gxx:function(){return db},tBr:function(){return Ru},XFs:function(){return jn},GSi:function(){return kL},OlP:function(){return ps},zs3:function(){return Co},ZZ4:function(){return Jb},aQg:function(){return ew},soG:function(){return Om},LVF:function(){return Sc},YKP:function(){return VM},v3s:function(){return _P},h0i:function(){return Sd},PXZ:function(){return gP},R0b:function(){return Nh},FiY:function(){return $l},Lbi:function(){return rA},g9A:function(){return Nd},n_E:function(){return ww},Qsj:function(){return GD},FYo:function(){return bf},JOm:function(){return Fk},Tiy:function(){return qy},q3G:function(){return wp},tp0:function(){return Xl},EAV:function(){return Sz},Rgc:function(){return $y},dDg:function(){return sP},DyG:function(){return Yl},q4F:function(){return qD},GfV:function(){return wf},s_b:function(){return nw},ifc:function(){return wa},eFA:function(){return U2},G48:function(){return hP},Gpc:function(){return mn},f3M:function(){return v0},X6Q:function(){return Rw},_c5:function(){return nZ},VLi:function(){return Nm},c2e:function(){return jI},zSh:function(){return cf},wAp:function(){return au},vHH:function(){return Rt},EiD:function(){return S1},mCW:function(){return Fn},qzn:function(){return z},JVY:function(){return U},pB0:function(){return re},eBb:function(){return O},L6k:function(){return H},LAX:function(){return X},cg1:function(){return mD},Tjo:function(){return Q2},kL8:function(){return gD},yhl:function(){return B},dqk:function(){return gt},sIi:function(){return Si},CqO:function(){return ru},QGY:function(){return YC},F4k:function(){return Jx},zlt:function(){return Md},RDi:function(){return vo},AaK:function(){return lt},z3N:function(){return Bc},qOj:function(){return Un},TTD:function(){return De},_Bn:function(){return Kb},xp6:function(){return wu},uIk:function(){return DC},ekj:function(){return Fb},Suo:function(){return HS},Xpm:function(){return $e},lG2:function(){return Mi},Yz7:function(){return Xr},cJS:function(){return Qs},oAB:function(){return Tn},Yjl:function(){return Os},Y36:function(){return em},_UZ:function(){return qC},BQk:function(){return Tb},ynx:function(){return md},qZA:function(){return pf},TgZ:function(){return vd},EpF:function(){return nm},n5z:function(){return op},Ikx:function(){return Nb},LFG:function(){return vs},$8M:function(){return pv},NdJ:function(){return rm},CRH:function(){return GS},O4$:function(){return xn},oxw:function(){return KC},ALo:function(){return wI},lcZ:function(){return o_},xi3:function(){return BS},Hsn:function(){return $C},F$t:function(){return vf},Q6J:function(){return jC},s9C:function(){return Ib},MGl:function(){return Ty},DdM:function(){return Id},iGM:function(){return SI},MAs:function(){return Eb},CHM:function(){return qo},oJD:function(){return T1},uOi:function(){return T0},LSH:function(){return qg},kYT:function(){return cr},Udp:function(){return sD},WFA:function(){return im},d8E:function(){return En},YNc:function(){return TC},_uU:function(){return lM},Oqu:function(){return Lb},hij:function(){return Fy},Gf:function(){return zS}});var Se=ne(9333),ye=ne(9187),R=ne(6518),M=ne(2787),Ve=(ne(3512),ne(8251),ne(6054)),Te=ne(8398),v=ne(4768),Ae=ne(7289),xe=ne(5134),ce=ne(1885),Be=ne(9727),ae=ne(3455),be=ne(7570),Ne=ne(5959),He=ne(8318),et=ne(1906),tt=ne(1055);function We(c){for(var h in c)if(c[h]===We)return h;throw Error("Could not find renamed property on target object.")}function pt(c,h){for(var d in h)h.hasOwnProperty(d)&&!c.hasOwnProperty(d)&&(c[d]=h[d])}function lt(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(lt).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return"".concat(c.overriddenName);if(c.name)return"".concat(c.name);var h=c.toString();if(null==h)return""+h;var d=h.indexOf("\n");return-1===d?h:h.substring(0,d)}function ee(c,h){return null==c||""===c?null===h?"":h:null==h||""===h?c:c+" "+h}var Dn=We({__forward_ref__:We});function mn(c){return c.__forward_ref__=mn,c.toString=function(){return lt(this())},c}function nn(c){return Vt(c)?c():c}function Vt(c){return"function"==typeof c&&c.hasOwnProperty(Dn)&&c.__forward_ref__===mn}var Rt=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g,_){var E;return(0,xe.Z)(this,d),(E=h.call(this,function(c,h){var d=c?"NG0".concat(c,": "):"";return"".concat(d).concat(h)}(g,_))).code=g,E}return d}((0,ae.Z)(Error));function k(c){return"string"==typeof c?c:null==c?"":String(c)}function j(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():k(c)}function at(c,h){var d=h?" in ".concat(h):"";throw new Rt("201","No provider for ".concat(j(c)," found").concat(d))}function Ir(c,h,d,g){throw new Error("ASSERTION ERROR: ".concat(c)+(null==g?"":" [Expected=> ".concat(d," ").concat(g," ").concat(h," <=Actual]")))}function Xr(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Qs(c){return{providers:c.providers||[],imports:c.imports||[]}}function ls(c){return Es(c,sa)||Es(c,Er)}function Es(c,h){return c.hasOwnProperty(h)?c[h]:null}function aa(c){return c&&(c.hasOwnProperty(is)||c.hasOwnProperty(ur))?c[is]:null}var ri,sa=We({"\u0275prov":We}),is=We({"\u0275inj":We}),Er=We({ngInjectableDef:We}),ur=We({ngInjectorDef:We}),jn=function(c){return c[c.Default=0]="Default",c[c.Host=1]="Host",c[c.Self=2]="Self",c[c.SkipSelf=4]="SkipSelf",c[c.Optional=8]="Optional",c}({});function pi(){return ri}function ii(c){var h=ri;return ri=c,h}function Or(c,h,d){var g=ls(c);return g&&"root"==g.providedIn?void 0===g.value?g.value=g.factory():g.value:d&jn.Optional?null:void 0!==h?h:void at(lt(c),"Injector")}function Wi(c){return{toString:c}.toString()}var cs=function(c){return c[c.OnPush=0]="OnPush",c[c.Default=1]="Default",c}({}),wa=function(c){return c[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",c}({}),Zi="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,Et="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ot="undefined"!=typeof global&&global,gt=Zi||ot||Tt||Et,Nn={},Mn=[],ai=We({"\u0275cmp":We}),In=We({"\u0275dir":We}),xi=We({"\u0275pipe":We}),oa=We({"\u0275mod":We}),Ga=We({"\u0275loc":We}),wt=We({"\u0275fac":We}),Ft=We({__NG_ELEMENT_ID__:We}),Je=0;function $e(c){return Wi(function(){var d={},g={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===cs.OnPush,directiveDefs:null,pipeDefs:null,selectors:c.selectors||Mn,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||wa.Emulated,id:"c",styles:c.styles||Mn,_:null,setInput:null,schemas:c.schemas||null,tView:null},_=c.directives,E=c.features,S=c.pipes;return g.id+=Je++,g.inputs=Ha(c.inputs,d),g.outputs=Ha(c.outputs),E&&E.forEach(function(F){return F(g)}),g.directiveDefs=_?function(){return("function"==typeof _?_():_).map(rn)}:null,g.pipeDefs=S?function(){return("function"==typeof S?S():S).map(Jt)}:null,g})}function kt(c,h,d){var g=c.\u0275cmp;g.directiveDefs=function(){return h.map(rn)},g.pipeDefs=function(){return d.map(Jt)}}function rn(c){return Yr(c)||function(c){return c[In]||null}(c)}function Jt(c){return function(c){return c[xi]||null}(c)}var on={};function Tn(c){return Wi(function(){var h={type:c.type,bootstrap:c.bootstrap||Mn,declarations:c.declarations||Mn,imports:c.imports||Mn,exports:c.exports||Mn,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null};return null!=c.id&&(on[c.id]=c.type),h})}function cr(c,h){return Wi(function(){var d=Pa(c,!0);d.declarations=h.declarations||Mn,d.imports=h.imports||Mn,d.exports=h.exports||Mn})}function Ha(c,h){if(null==c)return Nn;var d={};for(var g in c)if(c.hasOwnProperty(g)){var _=c[g],E=_;Array.isArray(_)&&(E=_[1],_=_[0]),d[_]=g,h&&(h[_]=E)}return d}var Mi=$e;function Os(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,onDestroy:c.type.prototype.ngOnDestroy||null}}function Yr(c){return c[ai]||null}function Pa(c,h){var d=c[oa]||null;if(!d&&!0===h)throw new Error("Type ".concat(lt(c)," does not have '\u0275mod' property."));return d}function $a(c){return Array.isArray(c)&&"object"==typeof c[1]}function Ns(c){return Array.isArray(c)&&!0===c[1]}function $h(c){return 0!=(8&c.flags)}function Nr(c){return 2==(2&c.flags)}function po(c){return 1==(1&c.flags)}function Gr(c){return null!==c.template}function oh(c){return 0!=(512&c[2])}function he(c,h){return c.hasOwnProperty(wt)?c[wt]:null}var _e=function(){function c(h,d,g){(0,xe.Z)(this,c),this.previousValue=h,this.currentValue=d,this.firstChange=g}return(0,Ae.Z)(c,[{key:"isFirstChange",value:function(){return this.firstChange}}]),c}();function De(){return Me}function Me(c){return c.type.prototype.ngOnChanges&&(c.setInput=ut),Qe}function Qe(){var c=sn(this),h=null==c?void 0:c.current;if(h){var d=c.previous;if(d===Nn)c.previous=h;else for(var g in h)d[g]=h[g];c.current=null,this.ngOnChanges(h)}}function ut(c,h,d,g){var _=sn(c)||function(c,h){return c[At]=h}(c,{previous:Nn,current:null}),E=_.current||(_.current={}),S=_.previous,F=this.declaredInputs[d],G=S[F];E[F]=new _e(G&&G.currentValue,h,S===Nn),c[g]=h}De.ngInherit=!0;var At="__ngSimpleChanges__";function sn(c){return c[At]||null}var hr="http://www.w3.org/2000/svg",Oi="http://www.w3.org/1998/MathML/",ja=void 0;function vo(c){ja=c}function ui(){return void 0!==ja?ja:"undefined"!=typeof document?document:void 0}function Bn(c){return!!c.listen}var la={createRenderer:function(h,d){return ui()}};function Zr(c){for(;Array.isArray(c);)c=c[0];return c}function mo(c,h){return Zr(h[c])}function gi(c,h){return Zr(h[c.index])}function Io(c,h){return c.data[h]}function Ca(c,h){return c[h]}function Cs(c,h){var d=h[c];return $a(d)?d:d[0]}function Mu(c){return 4==(4&c[2])}function _l(c){return 128==(128&c[2])}function Bs(c,h){return null==h?null:c[h]}function mc(c){c[18]=0}function go(c,h){c[5]+=h;for(var d=c,g=c[3];null!==g&&(1===h&&1===d[5]||-1===h&&0===d[5]);)g[5]+=h,d=g,g=g[3]}var kr={lFrame:Dl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function gc(){return kr.bindingsEnabled}function bl(){kr.bindingsEnabled=!0}function wl(){kr.bindingsEnabled=!1}function tn(){return kr.lFrame.lView}function wi(){return kr.lFrame.tView}function qo(c){return kr.lFrame.contextLView=c,c[8]}function _a(){for(var c=ch();null!==c&&64===c.type;)c=c.parent;return c}function ch(){return kr.lFrame.currentTNode}function Ju(){var c=kr.lFrame,h=c.currentTNode;return c.isParent?h:h.parent}function Ds(c,h){var d=kr.lFrame;d.currentTNode=c,d.isParent=h}function La(){return kr.lFrame.isParent}function Fc(){kr.lFrame.isParent=!1}function _o(){return kr.isInCheckNoChangesMode}function Ei(c){kr.isInCheckNoChangesMode=c}function ds(){var c=kr.lFrame,h=c.bindingRootIndex;return-1===h&&(h=c.bindingRootIndex=c.tView.bindingStartIndex),h}function Da(){return kr.lFrame.bindingIndex}function Js(c){return kr.lFrame.bindingIndex=c}function Yo(){return kr.lFrame.bindingIndex++}function Po(c){var h=kr.lFrame,d=h.bindingIndex;return h.bindingIndex=h.bindingIndex+c,d}function zl(c){kr.lFrame.inI18n=c}function Hl(c,h){var d=kr.lFrame;d.bindingIndex=d.bindingRootIndex=c,Gl(h)}function Gl(c){kr.lFrame.currentDirectiveIndex=c}function jl(c){var h=kr.lFrame.currentDirectiveIndex;return-1===h?null:c[h]}function hh(){return kr.lFrame.currentQueryIndex}function Cl(c){kr.lFrame.currentQueryIndex=c}function fh(c){var h=c[1];return 2===h.type?h.declTNode:1===h.type?c[6]:null}function dh(c,h,d){if(d&jn.SkipSelf){for(var g=h,_=c;!(null!==(g=g.parent)||d&jn.Host||null===(g=fh(_))||(_=_[15],10&g.type)););if(null===g)return!1;h=g,c=_}var E=kr.lFrame=bo();return E.currentTNode=h,E.lView=c,!0}function Ko(c){var h=bo(),d=c[1];kr.lFrame=h,h.currentTNode=d.firstChild,h.lView=c,h.tView=d,h.contextLView=c,h.bindingIndex=d.bindingStartIndex,h.inI18n=!1}function bo(){var c=kr.lFrame,h=null===c?null:c.child;return null===h?Dl(c):h}function Dl(c){var h={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=h),h}function Vf(){var c=kr.lFrame;return kr.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}var Xe=Vf;function Pe(){var c=Vf();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function dt(c){return(kr.lFrame.contextLView=function(c,h){for(;c>0;)h=h[15],c--;return h}(c,kr.lFrame.contextLView))[8]}function yt(){return kr.lFrame.selectedIndex}function $t(c){kr.lFrame.selectedIndex=c}function Xt(){var c=kr.lFrame;return Io(c.tView,c.selectedIndex)}function xn(){kr.lFrame.currentNamespace=hr}function zn(){kr.lFrame.currentNamespace=Oi}function fr(){kr.lFrame.currentNamespace=null}function Li(c,h){for(var d=h.directiveStart,g=h.directiveEnd;d<g;d++){var E=c.data[d].type.prototype,S=E.ngAfterContentInit,F=E.ngAfterContentChecked,G=E.ngAfterViewInit,te=E.ngAfterViewChecked,de=E.ngOnDestroy;S&&(c.contentHooks||(c.contentHooks=[])).push(-d,S),F&&((c.contentHooks||(c.contentHooks=[])).push(d,F),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(d,F)),G&&(c.viewHooks||(c.viewHooks=[])).push(-d,G),te&&((c.viewHooks||(c.viewHooks=[])).push(d,te),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(d,te)),null!=de&&(c.destroyHooks||(c.destroyHooks=[])).push(d,de)}}function ca(c,h,d){ss(c,h,3,d)}function Rr(c,h,d,g){(3&c[2])===d&&ss(c,h,d,g)}function Sa(c,h){var d=c[2];(3&d)===h&&(d&=2047,c[2]=d+=1)}function ss(c,h,d,g){for(var E=null!=g?g:-1,S=h.length-1,F=0,G=void 0!==g?65535&c[18]:0;G<S;G++)if("number"==typeof h[G+1]){if(F=h[G],null!=g&&F>=g)break}else h[G]<0&&(c[18]+=65536),(F<E||-1==E)&&(ha(c,d,h,G),c[18]=(4294901760&c[18])+G+2),G++}function ha(c,h,d,g){var _=d[g]<0,E=d[g+1],F=c[_?-d[g]:d[g]];if(_){if(c[2]>>11<c[18]>>16&&(3&c[2])===h){c[2]+=2048;try{E.call(F)}finally{}}}else try{E.call(F)}finally{}}var $o=function c(h,d,g){(0,xe.Z)(this,c),this.factory=h,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=g};function A(c,h,d){for(var g=Bn(c),_=0;_<d.length;){var E=d[_];if("number"==typeof E){if(0!==E)break;_++;var S=d[_++],F=d[_++],G=d[_++];g?c.setAttribute(h,F,G,S):h.setAttributeNS(S,F,G)}else{var te=E,de=d[++_];D(te)?g&&c.setProperty(h,te,de):g?c.setAttribute(h,te,de):h.setAttribute(te,de),_++}}return _}function y(c){return 3===c||4===c||6===c}function D(c){return 64===c.charCodeAt(0)}function N(c,h){if(null!==h&&0!==h.length)if(null===c||0===c.length)c=h.slice();else for(var d=-1,g=0;g<h.length;g++){var _=h[g];"number"==typeof _?d=_:0===d||Q(c,d,_,null,-1===d||2===d?h[++g]:null)}return c}function Q(c,h,d,g,_){var E=0,S=c.length;if(-1===h)S=-1;else for(;E<c.length;){var F=c[E++];if("number"==typeof F){if(F===h){S=-1;break}if(F>h){S=E-1;break}}}for(;E<c.length;){var G=c[E];if("number"==typeof G)break;if(G===d){if(null===g)return void(null!==_&&(c[E+1]=_));if(g===c[E+1])return void(c[E+2]=_)}E++,null!==g&&E++,null!==_&&E++}-1!==S&&(c.splice(S,0,h),E=S+1),c.splice(E++,0,d),null!==g&&c.splice(E++,0,g),null!==_&&c.splice(E++,0,_)}function le(c){return-1!==c}function Ie(c){return 32767&c}function Mt(c,h){for(var d=function(c){return c>>16}(c),g=h;d>0;)g=g[15],d--;return g}var Ht=!0;function wn(c){var h=Ht;return Ht=c,h}var da=0;function Qa(c,h){var d=yc(c,h);if(-1!==d)return d;var g=h[1];g.firstCreatePass&&(c.injectorIndex=h.length,Iu(g.data,c),Iu(h,null),Iu(g.blueprint,null));var _=eo(c,h),E=c.injectorIndex;if(le(_))for(var S=Ie(_),F=Mt(_,h),G=F[1].data,te=0;te<8;te++)h[E+te]=F[S+te]|G[S+te];return h[E+8]=_,E}function Iu(c,h){c.push(0,0,0,0,0,0,0,0,h)}function yc(c,h){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===h[c.injectorIndex+8]?-1:c.injectorIndex}function eo(c,h){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;for(var d=0,g=null,_=h;null!==_;){var E=_[1],S=E.type;if(null===(g=2===S?E.declTNode:1===S?_[6]:null))return-1;if(d++,_=_[15],-1!==g.injectorIndex)return g.injectorIndex|d<<16}return-1}function mu(c,h,d){!function(c,h,d){var g;"string"==typeof d?g=d.charCodeAt(0)||0:d.hasOwnProperty(Ft)&&(g=d[Ft]),null==g&&(g=d[Ft]=da++);var _=255&g;h.data[c+(_>>5)]|=1<<_}(c,h,d)}function el(c,h,d){if(d&jn.Optional)return c;at(h,"NodeInjector")}function fv(c,h,d,g){if(d&jn.Optional&&void 0===g&&(g=null),0==(d&(jn.Self|jn.Host))){var _=c[9],E=ii(void 0);try{return _?_.get(h,g,d&jn.Optional):Or(h,g,d&jn.Optional)}finally{ii(E)}}return el(g,h,d)}function dv(c,h,d){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jn.Default,_=arguments.length>4?arguments[4]:void 0;if(null!==c){var E=Hf(d);if("function"==typeof E){if(!dh(h,c,g))return g&jn.Host?el(_,d,g):fv(h,d,g,_);try{var S=E(g);if(null!=S||g&jn.Optional)return S;at(d)}finally{Xe()}}else if("number"==typeof E){var F=null,G=yc(c,h),te=-1,de=g&jn.Host?h[16][6]:null;for((-1===G||g&jn.SkipSelf)&&(-1!==(te=-1===G?eo(c,h):h[G+8])&&Kr(g,!1)?(F=h[1],G=Ie(te),h=Mt(te,h)):G=-1);-1!==G;){var Ce=h[1];if(Oc(E,G,Ce.data)){var Ee=Pg(G,h,d,F,g,de);if(Ee!==Ss)return Ee}-1!==(te=h[G+8])&&Kr(g,h[1].data[G+8]===de)&&Oc(E,G,h)?(F=Ce,G=Ie(te),h=Mt(te,h)):G=-1}}}return fv(h,d,g,_)}var Ss={};function sp(){return new ph(_a(),tn())}function Pg(c,h,d,g,_,E){var S=h[1],F=S.data[c+8],de=nf(F,S,d,null==g?Nr(F)&&Ht:g!=S&&0!=(3&F.type),_&jn.Host&&E===F);return null!==de?Sl(h,S,de,F):Ss}function nf(c,h,d,g,_){for(var E=c.providerIndexes,S=h.data,F=1048575&E,G=c.directiveStart,de=E>>20,Ee=_?F+de:c.directiveEnd,Oe=g?F:F+de;Oe<Ee;Oe++){var Ye=S[Oe];if(Oe<G&&d===Ye||Oe>=G&&Ye.type===d)return Oe}if(_){var mt=S[G];if(mt&&Gr(mt)&&mt.type===d)return G}return null}function Sl(c,h,d,g){var _=c[d],E=h.data;if(function(c){return c instanceof $o}(_)){var S=_;S.resolving&&function(c,h){throw new Rt("200","Circular dependency in DI detected for ".concat(c).concat(""))}(j(E[d]));var F=wn(S.canSeeViewProviders);S.resolving=!0;var G=S.injectImpl?ii(S.injectImpl):null;dh(c,g,jn.Default);try{_=c[d]=S.factory(void 0,E,c,g),h.firstCreatePass&&d>=g.directiveStart&&function(c,h,d){var g=h.type.prototype,E=g.ngOnInit,S=g.ngDoCheck;if(g.ngOnChanges){var F=Me(h);(d.preOrderHooks||(d.preOrderHooks=[])).push(c,F),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(c,F)}E&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-c,E),S&&((d.preOrderHooks||(d.preOrderHooks=[])).push(c,S),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(c,S))}(d,E[d],h)}finally{null!==G&&ii(G),wn(F),S.resolving=!1,Xe()}}return _}function Hf(c){if("string"==typeof c)return c.charCodeAt(0)||0;var h=c.hasOwnProperty(Ft)?c[Ft]:void 0;return"number"==typeof h?h>=0?255&h:sp:h}function Oc(c,h,d){return!!(d[h+(c>>5)]&1<<c)}function Kr(c,h){return!(c&jn.Self||c&jn.Host&&h)}var ph=function(){function c(h,d){(0,xe.Z)(this,c),this._tNode=h,this._lView=d}return(0,Ae.Z)(c,[{key:"get",value:function(d,g){return dv(this._tNode,this._lView,d,void 0,g)}}]),c}();function op(c){return Wi(function(){for(var h=c.prototype.constructor,d=h[wt]||_c(h),g=Object.prototype,_=Object.getPrototypeOf(c.prototype).constructor;_&&_!==g;){var E=_[wt]||_c(_);if(E&&E!==d)return E;_=Object.getPrototypeOf(_)}return function(S){return new S}})}function _c(c){return Vt(c)?function(){var h=_c(nn(c));return h&&h()}:he(c)}function pv(c){return function(c,h){if("class"===h)return c.classes;if("style"===h)return c.styles;var d=c.attrs;if(d)for(var g=d.length,_=0;_<g;){var E=d[_];if(y(E))break;if(0===E)_+=2;else if("number"==typeof E)for(_++;_<g&&"string"==typeof d[_];)_++;else{if(E===h)return d[_+1];_+=2}}return null}(_a(),c)}var ql="__annotations__",vh="__parameters__",mh="__prop__metadata__";function Ro(c,h,d,g,_){return Wi(function(){var E=Gf(h);function S(){for(var F=arguments.length,G=new Array(F),te=0;te<F;te++)G[te]=arguments[te];if(this instanceof S)return E.call.apply(E,[this].concat(G)),this;var de=(0,v.Z)(S,G);return function(Ee){return _&&_.apply(void 0,[Ee].concat(G)),(Ee.hasOwnProperty(ql)?Ee[ql]:Object.defineProperty(Ee,ql,{value:[]})[ql]).push(de),g&&g(Ee),Ee}}return d&&(S.prototype=Object.create(d.prototype)),S.prototype.ngMetadataName=c,S.annotationCls=S,S})}function Gf(c){return function(){if(c){var d=c.apply(void 0,arguments);for(var g in d)this[g]=d[g]}}}function Lc(c,h,d){return Wi(function(){var g=Gf(h);function _(){for(var E=arguments.length,S=new Array(E),F=0;F<E;F++)S[F]=arguments[F];if(this instanceof _)return g.apply(this,S),this;var G=(0,v.Z)(_,S);return te.annotation=G,te;function te(de,Ce,Ee){for(var Oe=de.hasOwnProperty(vh)?de[vh]:Object.defineProperty(de,vh,{value:[]})[vh];Oe.length<=Ee;)Oe.push(null);return(Oe[Ee]=Oe[Ee]||[]).push(G),de}}return d&&(_.prototype=Object.create(d.prototype)),_.prototype.ngMetadataName=c,_.annotationCls=_,_})}var dk=function(){return Lc("Attribute",function(c){return{attributeName:c,__NG_ELEMENT_ID__:function(){return pv(c)}}})}(),ps=function(){function c(h,d){(0,xe.Z)(this,c),this._desc=h,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=Xr({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}return(0,Ae.Z)(c,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),c}(),pk=new ps("AnalyzeForEntryComponents");function to(c){var h=gt.ng;if(h&&h.\u0275compilerFacade)return h.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}var Yl=Function;function yh(c){return"function"==typeof c}function gu(c,h){void 0===h&&(h=c);for(var d=0;d<c.length;d++){var g=c[d];Array.isArray(g)?(h===c&&(h=c.slice(0,d)),gu(g,h)):h!==c&&h.push(g)}return h}function yu(c,h){c.forEach(function(d){return Array.isArray(d)?yu(d,h):h(d)})}function jf(c,h,d){h>=c.length?c.push(d):c.splice(h,0,d)}function Nc(c,h){return h>=c.length-1?c.pop():c.splice(h,1)[0]}function Pu(c,h){for(var d=[],g=0;g<c;g++)d.push(h);return d}function Fu(c,h,d){var g=_u(c,h);return g>=0?c[1|g]=d:function(c,h,d,g){var _=c.length;if(_==h)c.push(d,g);else if(1===_)c.push(g,c[0]),c[0]=d;else{for(_--,c.push(c[_-1],c[_]);_>h;)c[_]=c[_-2],_--;c[h]=d,c[h+1]=g}}(c,g=~g,h,d),g}function qf(c,h){var d=_u(c,h);if(d>=0)return c[1|d]}function _u(c,h){return function(c,h,d){for(var g=0,_=c.length>>d;_!==g;){var E=g+(_-g>>1),S=c[E<<d];if(h===S)return E<<d;S>h?_=E:g=E+1}return~(_<<d)}(c,h,1)}var Ng=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\))\)/,cp=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,d0=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Kf=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/,fp=function(){function c(h){(0,xe.Z)(this,c),this._reflect=h||gt.Reflect}return(0,Ae.Z)(c,[{key:"isReflectionEnabled",value:function(){return!0}},{key:"factory",value:function(d){return function(){for(var g=arguments.length,_=new Array(g),E=0;E<g;E++)_[E]=arguments[E];return(0,v.Z)(d,_)}}},{key:"_zipTypesAndAnnotations",value:function(d,g){var _;_=Pu(void 0===d?g.length:d.length);for(var E=0;E<_.length;E++)_[E]=void 0===d?[]:d[E]&&d[E]!=Object?[d[E]]:[],g&&null!=g[E]&&(_[E]=_[E].concat(g[E]));return _}},{key:"_ownParameters",value:function(d,g){if(function(c){return Ng.test(c)||Kf.test(c)||cp.test(c)&&!d0.test(c)}(d.toString()))return null;if(d.parameters&&d.parameters!==g.parameters)return d.parameters;var E=d.ctorParameters;if(E&&E!==g.ctorParameters){var S="function"==typeof E?E():E,F=S.map(function(Ce){return Ce&&Ce.type}),G=S.map(function(Ce){return Ce&&dp(Ce.decorators)});return this._zipTypesAndAnnotations(F,G)}var te=d.hasOwnProperty(vh)&&d[vh],de=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",d);return de||te?this._zipTypesAndAnnotations(de,te):Pu(d.length)}},{key:"parameters",value:function(d){if(!yh(d))return[];var g=$f(d),_=this._ownParameters(d,g);return!_&&g!==Object&&(_=this.parameters(g)),_||[]}},{key:"_ownAnnotations",value:function(d,g){if(d.annotations&&d.annotations!==g.annotations){var _=d.annotations;return"function"==typeof _&&_.annotations&&(_=_.annotations),_}return d.decorators&&d.decorators!==g.decorators?dp(d.decorators):d.hasOwnProperty(ql)?d[ql]:null}},{key:"annotations",value:function(d){if(!yh(d))return[];var g=$f(d),_=this._ownAnnotations(d,g)||[];return(g!==Object?this.annotations(g):[]).concat(_)}},{key:"_ownPropMetadata",value:function(d,g){if(d.propMetadata&&d.propMetadata!==g.propMetadata){var _=d.propMetadata;return"function"==typeof _&&_.propMetadata&&(_=_.propMetadata),_}if(d.propDecorators&&d.propDecorators!==g.propDecorators){var E=d.propDecorators,S={};return Object.keys(E).forEach(function(F){S[F]=dp(E[F])}),S}return d.hasOwnProperty(mh)?d[mh]:null}},{key:"propMetadata",value:function(d){if(!yh(d))return{};var g=$f(d),_={};if(g!==Object){var E=this.propMetadata(g);Object.keys(E).forEach(function(F){_[F]=E[F]})}var S=this._ownPropMetadata(d,g);return S&&Object.keys(S).forEach(function(F){var G=[];_.hasOwnProperty(F)&&G.push.apply(G,(0,Te.Z)(_[F])),G.push.apply(G,(0,Te.Z)(S[F])),_[F]=G}),_}},{key:"ownPropMetadata",value:function(d){return yh(d)&&this._ownPropMetadata(d,$f(d))||{}}},{key:"hasLifecycleHook",value:function(d,g){return d instanceof Yl&&g in d.prototype}},{key:"guards",value:function(d){return{}}},{key:"getter",value:function(d){return new Function("o","return o."+d+";")}},{key:"setter",value:function(d){return new Function("o","v","return o."+d+" = v;")}},{key:"method",value:function(d){var g="if (!o.".concat(d,") throw new Error('\"").concat(d,"\" is undefined');\n        return o.").concat(d,".apply(o, args);");return new Function("o","args",g)}},{key:"importUri",value:function(d){return"object"==typeof d&&d.filePath?d.filePath:"./".concat(lt(d))}},{key:"resourceUri",value:function(d){return"./".concat(lt(d))}},{key:"resolveIdentifier",value:function(d,g,_,E){return E}},{key:"resolveEnum",value:function(d,g){return d[g]}}]),c}();function dp(c){return c?c.map(function(h){return(0,v.Z)(h.type.annotationCls,(0,Te.Z)(h.args?h.args:[]))}):[]}function $f(c){var h=c.prototype?Object.getPrototypeOf(c.prototype):null;return(h?h.constructor:null)||Object}var Xf={},Oo="__NG_DI_FLAG__",bh="ngTempTokenPath",Zg=/\n/gm,pp="__source",wh=We({provide:String,useValue:We}),rf=void 0;function af(c){var h=rf;return rf=c,h}function gk(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jn.Default;if(void 0===rf)throw new Error("inject() must be called from an injection context");return null===rf?Or(c,void 0,h):rf.get(c,h&jn.Optional?null:void 0,h)}function vs(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jn.Default;return(pi()||gk)(nn(c),h)}function bv(c){throw new Error("invalid")}var v0=vs;function sf(c){for(var h=[],d=0;d<c.length;d++){var g=nn(c[d]);if(Array.isArray(g)){if(0===g.length)throw new Error("Arguments array must have arguments.");for(var _=void 0,E=jn.Default,S=0;S<g.length;S++){var F=g[S],G=Bg(F);"number"==typeof G?-1===G?_=F.token:E|=G:_=F}h.push(vs(_,E))}else h.push(vs(g))}return h}function Jf(c,h){return c[Oo]=h,c.prototype[Oo]=h,c}function Bg(c){return c[Oo]}function yk(c,h,d,g){var _=c[bh];throw h[pp]&&_.unshift(h[pp]),c.message=function(c,h,d){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.substr(2):c;var _=lt(h);if(Array.isArray(h))_=h.map(lt).join(" -> ");else if("object"==typeof h){var E=[];for(var S in h)if(h.hasOwnProperty(S)){var F=h[S];E.push(S+":"+("string"==typeof F?JSON.stringify(F):lt(F)))}_="{".concat(E.join(", "),"}")}return"".concat(d).concat(g?"("+g+")":"","[").concat(_,"]: ").concat(c.replace(Zg,"\n  "))}("\n"+c.message,_,d,g),c.ngTokenPath=_,c[bh]=null,c}var Ev,nd,Ru=Jf(Lc("Inject",function(h){return{token:h}}),-1),$l=Jf(Lc("Optional"),8),ed=Jf(Lc("Self"),2),Xl=Jf(Lc("SkipSelf"),4),bk=Jf(Lc("Host"),1),mp=null;function wv(c){return m0((mp=mp||new fp).parameters(c))}function m0(c){return c.map(function(h){return function(c){var h={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(c)&&c.length>0)for(var d=0;d<c.length;d++){var g=c[d];if(void 0!==g){var _=Object.getPrototypeOf(g);if(g instanceof $l||"Optional"===_.ngMetadataName)h.optional=!0;else if(g instanceof Xl||"SkipSelf"===_.ngMetadataName)h.skipSelf=!0;else if(g instanceof ed||"Self"===_.ngMetadataName)h.self=!0;else if(g instanceof bk||"Host"===_.ngMetadataName)h.host=!0;else if(g instanceof Ru)h.token=g.token;else if(g instanceof dk){if(void 0===g.attributeName)throw new Error("Attribute name must be defined.");h.attribute=g.attributeName}else h.token=g}}else h.token=void 0===c||Array.isArray(c)&&0===c.length?null:c;return h}(h)})}function Hg(){if(void 0===Ev&&(Ev=null,gt.trustedTypes))try{Ev=gt.trustedTypes.createPolicy("angular",{createHTML:function(h){return h},createScript:function(h){return h},createScriptURL:function(h){return h}})}catch(c){}return Ev}function td(c){var h;return(null===(h=Hg())||void 0===h?void 0:h.createHTML(c))||c}function Gg(){if(void 0===nd&&(nd=null,gt.trustedTypes))try{nd=gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(h){return h},createScript:function(h){return h},createScriptURL:function(h){return h}})}catch(c){}return nd}function jg(c){var h;return(null===(h=Gg())||void 0===h?void 0:h.createHTML(c))||c}function E0(c){var h;return(null===(h=Gg())||void 0===h?void 0:h.createScript(c))||c}function k0(c){var h;return(null===(h=Gg())||void 0===h?void 0:h.createScriptURL(c))||c}var Eh=function(){function c(h){(0,xe.Z)(this,c),this.changingThisBreaksApplicationSecurity=h}return(0,Ae.Z)(c,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),c}(),Ck=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(){return(0,xe.Z)(this,d),h.apply(this,arguments)}return(0,Ae.Z)(d,[{key:"getTypeName",value:function(){return"HTML"}}]),d}(Eh),Dk=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(){return(0,xe.Z)(this,d),h.apply(this,arguments)}return(0,Ae.Z)(d,[{key:"getTypeName",value:function(){return"Style"}}]),d}(Eh),C0=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(){return(0,xe.Z)(this,d),h.apply(this,arguments)}return(0,Ae.Z)(d,[{key:"getTypeName",value:function(){return"Script"}}]),d}(Eh),Sk=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(){return(0,xe.Z)(this,d),h.apply(this,arguments)}return(0,Ae.Z)(d,[{key:"getTypeName",value:function(){return"URL"}}]),d}(Eh),D0=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(){return(0,xe.Z)(this,d),h.apply(this,arguments)}return(0,Ae.Z)(d,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),d}(Eh);function Bc(c){return c instanceof Eh?c.changingThisBreaksApplicationSecurity:c}function z(c,h){var d=B(c);if(null!=d&&d!==h){if("ResourceURL"===d&&"URL"===h)return!0;throw new Error("Required a safe ".concat(h,", got a ").concat(d," (see https://g.co/ng/security#xss)"))}return d===h}function B(c){return c instanceof Eh&&c.getTypeName()||null}function U(c){return new Ck(c)}function H(c){return new Dk(c)}function O(c){return new C0(c)}function X(c){return new Sk(c)}function re(c){return new D0(c)}function ue(c){var h=new Fe(c);return function(){try{return!!(new window.DOMParser).parseFromString(td(""),"text/html")}catch(c){return!1}}()?new ge(h):h}var ge=function(){function c(h){(0,xe.Z)(this,c),this.inertDocumentHelper=h}return(0,Ae.Z)(c,[{key:"getInertBodyElement",value:function(d){d="<body><remove></remove>"+d;try{var g=(new window.DOMParser).parseFromString(td(d),"text/html").body;return null===g?this.inertDocumentHelper.getInertBodyElement(d):(g.removeChild(g.firstChild),g)}catch(_){return null}}}]),c}(),Fe=function(){function c(h){if((0,xe.Z)(this,c),this.defaultDoc=h,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var d=this.inertDocument.createElement("html");this.inertDocument.appendChild(d);var g=this.inertDocument.createElement("body");d.appendChild(g)}}return(0,Ae.Z)(c,[{key:"getInertBodyElement",value:function(d){var g=this.inertDocument.createElement("template");if("content"in g)return g.innerHTML=td(d),g;var _=this.inertDocument.createElement("body");return _.innerHTML=td(d),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(_),_}},{key:"stripCustomNsAttrs",value:function(d){for(var g=d.attributes,_=g.length-1;0<_;_--){var S=g.item(_).name;("xmlns:ns1"===S||0===S.indexOf("ns1:"))&&d.removeAttribute(S)}for(var F=d.firstChild;F;)F.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(F),F=F.nextSibling}}]),c}(),Pt=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Fn(c){return(c=String(c)).match(Pt)||c.match(Pn)?c:"unsafe:"+c}function Ar(c){return(c=String(c)).split(",").map(function(h){return Fn(h.trim())}).join(", ")}function Na(c){var g,h={},d=(0,Ve.Z)(c.split(","));try{for(d.s();!(g=d.n()).done;)h[g.value]=!0}catch(E){d.e(E)}finally{d.f()}return h}function pa(){for(var c={},h=arguments.length,d=new Array(h),g=0;g<h;g++)d[g]=arguments[g];for(var _=0,E=d;_<E.length;_++){var S=E[_];for(var F in S)S.hasOwnProperty(F)&&(c[F]=!0)}return c}var Wg,Al=Na("area,br,col,hr,img,wbr"),si=Na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),js=Na("rp,rt"),no=pa(js,si),os=pa(Al,pa(si,Na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pa(js,Na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),no),kv=Na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bp=Na("srcset"),Ak=pa(kv,bp,Na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xO=Na("script,style,template"),Tk=function(){function c(){(0,xe.Z)(this,c),this.sanitizedSomething=!1,this.buf=[]}return(0,Ae.Z)(c,[{key:"sanitizeChildren",value:function(d){for(var g=d.firstChild,_=!0;g;)if(g.nodeType===Node.ELEMENT_NODE?_=this.startElement(g):g.nodeType===Node.TEXT_NODE?this.chars(g.nodeValue):this.sanitizedSomething=!0,_&&g.firstChild)g=g.firstChild;else for(;g;){g.nodeType===Node.ELEMENT_NODE&&this.endElement(g);var E=this.checkClobberedElement(g,g.nextSibling);if(E){g=E;break}g=this.checkClobberedElement(g,g.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(d){var g=d.nodeName.toLowerCase();if(!os.hasOwnProperty(g))return this.sanitizedSomething=!0,!xO.hasOwnProperty(g);this.buf.push("<"),this.buf.push(g);for(var _=d.attributes,E=0;E<_.length;E++){var S=_.item(E),F=S.name,G=F.toLowerCase();if(Ak.hasOwnProperty(G)){var te=S.value;kv[G]&&(te=Fn(te)),bp[G]&&(te=Ar(te)),this.buf.push(" ",F,'="',xk(te),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(d){var g=d.nodeName.toLowerCase();os.hasOwnProperty(g)&&!Al.hasOwnProperty(g)&&(this.buf.push("</"),this.buf.push(g),this.buf.push(">"))}},{key:"chars",value:function(d){this.buf.push(xk(d))}},{key:"checkClobberedElement",value:function(d,g){if(g&&(d.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(d.outerHTML));return g}}]),c}(),MO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,IO=/([^\#-~ |!])/g;function xk(c){return c.replace(/&/g,"&amp;").replace(MO,function(h){return"&#"+(1024*(h.charCodeAt(0)-55296)+(h.charCodeAt(1)-56320)+65536)+";"}).replace(IO,function(h){return"&#"+h.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function S1(c,h){var d=null;try{Wg=Wg||ue(c);var g=h?String(h):"";d=Wg.getInertBodyElement(g);var _=5,E=g;do{if(0===_)throw new Error("Failed to sanitize html because the input is unstable");_--,g=E,E=d.innerHTML,d=Wg.getInertBodyElement(g)}while(g!==E);return td((new Tk).sanitizeChildren(Mk(d)||d))}finally{if(d)for(var G=Mk(d)||d;G.firstChild;)G.removeChild(G.firstChild)}}function Mk(c){return"content"in c&&function(c){return c.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===c.nodeName}(c)?c.content:null}var wp=function(c){return c[c.NONE=0]="NONE",c[c.HTML=1]="HTML",c[c.STYLE=2]="STYLE",c[c.SCRIPT=3]="SCRIPT",c[c.URL=4]="URL",c[c.RESOURCE_URL=5]="RESOURCE_URL",c}({});function T1(c){var h=Yg();return h?jg(h.sanitize(wp.HTML,c)||""):z(c,"HTML")?jg(Bc(c)):S1(ui(),k(c))}function x1(c){var h=Yg();return h?h.sanitize(wp.STYLE,c)||"":z(c,"Style")?Bc(c):k(c)}function qg(c){var h=Yg();return h?h.sanitize(wp.URL,c)||"":z(c,"URL")?Bc(c):Fn(k(c))}function T0(c){var h=Yg();if(h)return k0(h.sanitize(wp.RESOURCE_URL,c)||"");if(z(c,"ResourceURL"))return k0(Bc(c));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function x0(c){var h=Yg();if(h)return E0(h.sanitize(wp.SCRIPT,c)||"");if(z(c,"Script"))return E0(Bc(c));throw new Error("unsafe value used in a script context")}function Ik(c){return td(c[0])}function PO(c){return function(c){var h;return(null===(h=Hg())||void 0===h?void 0:h.createScriptURL(c))||c}(c[0])}function RO(c,h,d){return function(c,h){return"src"===h&&("embed"===c||"frame"===c||"iframe"===c||"media"===c||"script"===c)||"href"===h&&("base"===c||"link"===c)?T0:qg}(h,d)(c)}function Yg(){var c=tn();return c&&c[12]}var I1="__ngContext__";function Ou(c,h){c[I1]=h}function P1(c){var h=function(c){return c[I1]||null}(c);return h?Array.isArray(h)?h:h.lView:null}function F0(c){return c.ngOriginalError}function UO(c){for(var h=arguments.length,d=new Array(h>1?h-1:0),g=1;g<h;g++)d[g-1]=arguments[g];c.error.apply(c,d)}var nl=function(){function c(){(0,xe.Z)(this,c),this._console=console}return(0,Ae.Z)(c,[{key:"handleError",value:function(d){var g=this._findOriginalError(d),_=this._findContext(d),E=function(c){return c&&c.ngErrorLogger||UO}(d);E(this._console,"ERROR",d),g&&E(this._console,"ORIGINAL ERROR",g),_&&E(this._console,"ERROR CONTEXT",_)}},{key:"_findContext",value:function(d){return d?function(c){return c.ngDebugContext}(d)||this._findContext(F0(d)):null}},{key:"_findOriginalError",value:function(d){for(var g=d&&F0(d);g&&F0(g);)g=F0(g);return g||null}}]),c}(),j1=/^>|^->|<!--|-->|--!>|<!-$/g,VO=/(<|>)/;var W1=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gt)}();function Pk(c){return c.ownerDocument.defaultView}function O0(c){return c.ownerDocument}function rl(c){return c.ownerDocument.body}function Jl(c){return c instanceof Function?c():c}var Rk,Fk=function(c){return c[c.Important=1]="Important",c[c.DashCase=2]="DashCase",c}({});function rd(c,h){return Rk(c,h)}function Za(c){var h=c[3];return Ns(h)?h[3]:h}function Tl(c){return Ok(c[13])}function $1(c){return Ok(c[4])}function Ok(c){for(;null!==c&&!Ns(c);)c=c[4];return c}function Qt(c,h,d,g,_){if(null!=g){var E,S=!1;Ns(g)?E=g:$a(g)&&(S=!0,g=g[0]);var F=Zr(g);0===c&&null!==d?null==_?Q1(h,d,F):kp(h,d,F,_||null,!0):1===c&&null!==d?kp(h,d,F,_||null,!0):2===c?Lu(h,F,S):3===c&&h.destroyNode(F),null!=E&&function(c,h,d,g,_){var E=d[7];E!==Zr(d)&&Qt(h,c,g,E,_);for(var F=10;F<d.length;F++){var G=d[F];Lo(G[1],G,c,h,g,E)}}(h,c,E,d,_)}}function Lk(c,h){return Bn(c)?c.createText(h):c.createTextNode(h)}function id(c,h,d){Bn(c)?c.setValue(h,d):h.textContent=d}function Ke(c,h){return c.createComment(function(c){return c.replace(j1,function(h){return h.replace(VO,"\u200b$1\u200b")})}(h))}function ad(c,h,d){return Bn(c)?c.createElement(h,d):null===d?c.createElement(h):c.createElementNS(d,h)}function L0(c,h){var d=c[9],g=d.indexOf(h),_=h[3];1024&h[2]&&(h[2]&=-1025,go(_,-1)),d.splice(g,1)}function Qr(c,h){if(!(c.length<=10)){var d=10+h,g=c[d];if(g){var _=g[17];null!==_&&_!==c&&L0(_,g),h>0&&(c[d-1][4]=g[4]);var E=Nc(c,10+h);!function(c,h){Lo(c,h,h[11],2,null,null),h[0]=null,h[6]=null}(g[1],g);var S=E[19];null!==S&&S.detachView(E[1]),g[3]=null,g[4]=null,g[2]&=-129}return g}}function Kg(c,h){if(!(256&h[2])){var d=h[11];Bn(d)&&d.destroyNode&&Lo(c,h,d,3,null,null),function(c){var h=c[13];if(!h)return $g(c[1],c);for(;h;){var d=null;if($a(h))d=h[13];else{var g=h[10];g&&(d=g)}if(!d){for(;h&&!h[4]&&h!==c;)$a(h)&&$g(h[1],h),h=h[3];null===h&&(h=c),$a(h)&&$g(h[1],h),d=h&&h[4]}h=d}}(h)}}function $g(c,h){if(!(256&h[2])){h[2]&=-129,h[2]|=256,function(c,h){var d;if(null!=c&&null!=(d=c.destroyHooks))for(var g=0;g<d.length;g+=2){var _=h[d[g]];if(!(_ instanceof $o)){var E=d[g+1];if(Array.isArray(E))for(var S=0;S<E.length;S+=2){var F=_[E[S]],G=E[S+1];try{G.call(F)}finally{}}else try{E.call(_)}finally{}}}}(c,h),function(c,h){var d=c.cleanup,g=h[7],_=-1;if(null!==d)for(var E=0;E<d.length-1;E+=2)if("string"==typeof d[E]){var S=d[E+1],F="function"==typeof S?S(h):Zr(h[S]),G=g[_=d[E+2]],te=d[E+3];"boolean"==typeof te?F.removeEventListener(d[E],G,te):te>=0?g[_=te]():g[_=-te].unsubscribe(),E+=2}else{var de=g[_=d[E+1]];d[E].call(de)}if(null!==g){for(var Ce=_+1;Ce<g.length;Ce++)(0,g[Ce])();h[7]=null}}(c,h),1===h[1].type&&Bn(h[11])&&h[11].destroy();var d=h[17];if(null!==d&&Ns(h[3])){d!==h[3]&&L0(d,h);var g=h[19];null!==g&&g.detachView(c)}}}function N0(c,h,d){return X1(c,h.parent,d)}function X1(c,h,d){for(var g=h;null!==g&&40&g.type;)g=(h=g).parent;if(null===g)return d[0];if(2&g.flags){var _=c.data[g.directiveStart].encapsulation;if(_===wa.None||_===wa.Emulated)return null}return gi(g,d)}function kp(c,h,d,g,_){Bn(c)?c.insertBefore(h,d,g,_):h.insertBefore(d,g,_)}function Q1(c,h,d){Bn(c)?c.appendChild(h,d):h.appendChild(d)}function Xo(c,h,d,g,_){null!==g?kp(c,h,d,g,_):Q1(c,h,d)}function wo(c,h){return Bn(c)?c.parentNode(h):h.parentNode}function J1(c,h,d){return Nk(c,h,d)}function ex(c,h,d){return 40&c.type?gi(c,d):null}var B0,Nk=ex;function tx(c,h){Nk=c,B0=h}function Qg(c,h,d,g){var _=N0(c,g,h),E=h[11],F=J1(g.parent||h[6],g,h);if(null!=_)if(Array.isArray(d))for(var G=0;G<d.length;G++)Xo(E,_,d[G],F,!1);else Xo(E,_,d,F,!1);void 0!==B0&&B0(E,g,h,d,_)}function Sv(c,h){if(null!==h){var d=h.type;if(3&d)return gi(h,c);if(4&d)return U0(-1,c[h.index]);if(8&d){var g=h.child;if(null!==g)return Sv(c,g);var _=c[h.index];return Ns(_)?U0(-1,_):Zr(_)}if(32&d)return rd(h,c)()||Zr(c[h.index]);var F=Jg(c,h);return null!==F?Array.isArray(F)?F[0]:Sv(Za(c[16]),F):Sv(c,h.next)}return null}function Jg(c,h){return null!==h?c[16][6].projection[h.projection]:null}function U0(c,h){var d=10+c+1;if(d<h.length){var g=h[d],_=g[1].firstChild;if(null!==_)return Sv(g,_)}return h[7]}function Lu(c,h,d){var g=wo(c,h);g&&function(c,h,d,g){Bn(c)?c.removeChild(h,d,g):h.removeChild(d)}(c,g,h,d)}function ey(c,h,d,g,_,E,S){for(;null!=d;){var F=g[d.index],G=d.type;if(S&&0===h&&(F&&Ou(Zr(F),g),d.flags|=4),64!=(64&d.flags))if(8&G)ey(c,h,d.child,g,_,E,!1),Qt(h,c,_,F,E);else if(32&G){for(var te=rd(d,g),de=void 0;de=te();)Qt(h,c,_,de,E);Qt(h,c,_,F,E)}else 16&G?Zk(c,h,g,d,_,E):Qt(h,c,_,F,E);d=S?d.projectionNext:d.next}}function Lo(c,h,d,g,_,E){ey(d,g,c.firstChild,h,_,E,!1)}function nx(c,h,d){Zk(h[11],0,h,d,N0(c,d,h),J1(d.parent||h[6],d,h))}function Zk(c,h,d,g,_,E){var S=d[16],G=S[6].projection[g.projection];if(Array.isArray(G))for(var te=0;te<G.length;te++)Qt(h,c,_,G[te],E);else ey(c,h,G,S[3],_,E,!0)}function Uk(c,h,d){Bn(c)?c.setAttribute(h,"style",d):h.style.cssText=d}function V0(c,h,d){Bn(c)?""===d?c.removeAttribute(h,"class"):c.setAttribute(h,"class",d):h.className=d}function z0(c,h,d){for(var g=c.length;;){var _=c.indexOf(h,d);if(-1===_)return _;if(0===_||c.charCodeAt(_-1)<=32){var E=h.length;if(_+E===g||c.charCodeAt(_+E)<=32)return _}d=_+1}}var ix="ng-template";function Av(c,h,d){for(var g=0;g<c.length;){var _=c[g++];if(d&&"class"===_){if(-1!==z0((_=c[g]).toLowerCase(),h,0))return!0}else if(1===_){for(;g<c.length&&"string"==typeof(_=c[g++]);)if(_.toLowerCase()===h)return!0;return!1}}return!1}function Vk(c){return 4===c.type&&c.value!==ix}function zk(c,h,d){return h===(4!==c.type||d?c.value:ix)}function ax(c,h,d){for(var g=4,_=c.attrs||[],E=function(c){for(var h=0;h<c.length;h++)if(y(c[h]))return h;return c.length}(_),S=!1,F=0;F<h.length;F++){var G=h[F];if("number"!=typeof G){if(!S)if(4&g){if(g=2|1&g,""!==G&&!zk(c,G,d)||""===G&&1===h.length){if(Uc(g))return!1;S=!0}}else{var te=8&g?G:h[++F];if(8&g&&null!==c.attrs){if(!Av(c.attrs,te,d)){if(Uc(g))return!1;S=!0}continue}var Ce=sx(8&g?"class":G,_,Vk(c),d);if(-1===Ce){if(Uc(g))return!1;S=!0;continue}if(""!==te){var Ee;Ee=Ce>E?"":_[Ce+1].toLowerCase();var Oe=8&g?Ee:null;if(Oe&&-1!==z0(Oe,te,0)||2&g&&te!==Ee){if(Uc(g))return!1;S=!0}}}}else{if(!S&&!Uc(g)&&!Uc(G))return!1;if(S&&Uc(G))continue;S=!1,g=G|1&g}}return Uc(g)||S}function Uc(c){return 0==(1&c)}function sx(c,h,d,g){if(null===h)return-1;var _=0;if(g||!d){for(var E=!1;_<h.length;){var S=h[_];if(S===c)return _;if(3===S||6===S)E=!0;else{if(1===S||2===S){for(var F=h[++_];"string"==typeof F;)F=h[++_];continue}if(4===S)break;if(0===S){_+=4;continue}}_+=E?1:2}return-1}return function(c,h){var d=c.indexOf(4);if(d>-1)for(d++;d<c.length;){var g=c[d];if("number"==typeof g)return-1;if(g===h)return d;d++}return-1}(h,c)}function ty(c,h){for(var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=0;g<h.length;g++)if(ax(c,h[g],d))return!0;return!1}function WO(c,h){e:for(var d=0;d<h.length;d++){var g=h[d];if(c.length===g.length){for(var _=0;_<c.length;_++)if(c[_]!==g[_])continue e;return!0}}return!1}function ox(c,h){return c?":not("+h.trim()+")":h}function Wk(c){for(var h=c[0],d=1,g=2,_="",E=!1;d<c.length;){var S=c[d];if("string"==typeof S)if(2&g){var F=c[++d];_+="["+S+(F.length>0?'="'+F+'"':"")+"]"}else 8&g?_+="."+S:4&g&&(_+=" "+S);else""!==_&&!Uc(S)&&(h+=ox(E,_),_=""),g=S,E=E||!Uc(g);d++}return""!==_&&(h+=ox(E,_)),h}var li={};function wu(c){Tv(wi(),tn(),yt()+c,_o())}function Tv(c,h,d,g){if(!g)if(3==(3&h[2])){var E=c.preOrderCheckHooks;null!==E&&ca(h,E,d)}else{var S=c.preOrderHooks;null!==S&&Rr(h,S,0,d)}$t(d)}function H0(c,h){return c<<17|h<<2}function il(c){return c>>17&32767}function xv(c){return 2|c}function bc(c){return(131068&c)>>2}function ny(c,h){return-131069&c|h<<2}function ry(c){return 1|c}function od(c,h){var d=c.contentQueries;if(null!==d)for(var g=0;g<d.length;g+=2){var E=d[g+1];if(-1!==E){var S=c.data[E];Cl(d[g]),S.contentQueries(2,h[E],E)}}}function Iv(c,h,d,g,_,E,S,F,G,te){var de=h.blueprint.slice();return de[0]=_,de[2]=140|g,mc(de),de[3]=de[15]=c,de[8]=d,de[10]=S||c&&c[10],de[11]=F||c&&c[11],de[12]=G||c&&c[12]||null,de[9]=te||c&&c[9]||null,de[6]=E,de[16]=2==h.type?c[16]:de,de}function Dh(c,h,d,g,_){var E=c.data[h];if(null===E)E=Y0(c,h,d,g,_),kr.lFrame.inI18n&&(E.flags|=64);else if(64&E.type){E.type=d,E.value=g,E.attrs=_;var S=Ju();E.injectorIndex=null===S?-1:S.injectorIndex}return Ds(E,!0),E}function Y0(c,h,d,g,_){var E=ch(),S=La(),G=c.data[h]=function(c,h,d,g,_,E){return{type:d,index:g,insertBeforeIndex:null,injectorIndex:h?h.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:_,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:h,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?E:E&&E.parent,d,h,g,_);return null===c.firstChild&&(c.firstChild=G),null!==E&&(S?null==E.child&&null!==G.parent&&(E.child=G):null===E.next&&(E.next=G)),G}function Eo(c,h,d,g){if(0===d)return-1;for(var _=h.length,E=0;E<d;E++)h.push(g),c.blueprint.push(g),c.data.push(null);return _}function Pv(c,h,d){Ko(h);try{var g=c.viewQuery;null!==g&&hC(1,g,d);var _=c.template;null!==_&&eC(c,h,_,1,d),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&od(c,h),c.staticViewQueries&&hC(2,c.viewQuery,d);var E=c.components;null!==E&&function(c,h){for(var d=0;d<h.length;d++)sL(c,h[d])}(h,E)}catch(S){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),S}finally{h[2]&=-5,Pe()}}function Sh(c,h,d,g){var _=h[2];if(256!=(256&_)){Ko(h);var E=_o();try{mc(h),Js(c.bindingStartIndex),null!==d&&eC(c,h,d,2,g);var S=3==(3&_);if(!E)if(S){var F=c.preOrderCheckHooks;null!==F&&ca(h,F,null)}else{var G=c.preOrderHooks;null!==G&&Rr(h,G,0,null),Sa(h,0)}if(function(c){for(var h=Tl(c);null!==h;h=$1(h))if(h[2])for(var d=h[9],g=0;g<d.length;g++){var _=d[g];0==(1024&_[2])&&go(_[3],1),_[2]|=1024}}(h),function(c){for(var h=Tl(c);null!==h;h=$1(h))for(var d=10;d<h.length;d++){var g=h[d],_=g[1];_l(g)&&Sh(_,g,_.template,g[8])}}(h),null!==c.contentQueries&&od(c,h),!E)if(S){var te=c.contentCheckHooks;null!==te&&ca(h,te)}else{var de=c.contentHooks;null!==de&&Rr(h,de,1),Sa(h,1)}!function(c,h){var d=c.hostBindingOpCodes;if(null!==d)try{for(var g=0;g<d.length;g++){var _=d[g];if(_<0)$t(~_);else{var E=_,S=d[++g],F=d[++g];Hl(S,E),F(2,h[E])}}}finally{$t(-1)}}(c,h);var Ce=c.components;null!==Ce&&function(c,h){for(var d=0;d<h.length;d++)aL(c,h[d])}(h,Ce);var Ee=c.viewQuery;if(null!==Ee&&hC(2,Ee,g),!E)if(S){var Oe=c.viewCheckHooks;null!==Oe&&ca(h,Oe)}else{var Ye=c.viewHooks;null!==Ye&&Rr(h,Ye,2),Sa(h,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),E||(h[2]&=-73),1024&h[2]&&(h[2]&=-1025,go(h[3],-1))}finally{Pe()}}}function K0(c,h,d,g){var _=h[10],E=!_o(),S=Mu(h);try{E&&!S&&_.begin&&_.begin(),S&&Pv(c,h,g),Sh(c,h,d,g)}finally{E&&!S&&_.end&&_.end()}}function eC(c,h,d,g,_){var E=yt(),S=2&g;try{$t(-1),S&&h.length>20&&Tv(c,h,20,_o()),d(g,_)}finally{$t(E)}}function $0(c,h,d){if($h(h))for(var _=h.directiveEnd,E=h.directiveStart;E<_;E++){var S=c.data[E];S.contentQueries&&S.contentQueries(1,d[E],E)}}function X0(c,h,d){!gc()||(function(c,h,d,g){var _=d.directiveStart,E=d.directiveEnd;c.firstCreatePass||Qa(d,h),Ou(g,h);for(var S=d.initialInputs,F=_;F<E;F++){var G=c.data[F],te=Gr(G);te&&ab(h,d,G);var de=Sl(h,c,F,d);Ou(de,h),null!==S&&As(0,F-_,de,G,0,S),te&&(Cs(d.index,h)[8]=de)}}(c,h,d,gi(d,h)),128==(128&d.flags)&&function(c,h,d){var g=d.directiveStart,_=d.directiveEnd,S=d.index,F=kr.lFrame.currentDirectiveIndex;try{$t(S);for(var G=g;G<_;G++){var te=c.data[G],de=h[G];Gl(G),(null!==te.hostBindings||0!==te.hostVars||null!==te.hostAttrs)&&ib(te,de)}}finally{$t(-1),Gl(F)}}(c,h,d))}function Q0(c,h){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gi,g=h.localNames;if(null!==g)for(var _=h.index+1,E=0;E<g.length;E+=2){var S=g[E+1],F=-1===S?d(h,c):c[S];c[_++]=F}}function Fv(c){var h=c.tView;return null===h||h.incompleteFirstPass?c.tView=Rv(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):h}function Rv(c,h,d,g,_,E,S,F,G,te){var de=20+g,Ce=de+_,Ee=function(c,h){for(var d=[],g=0;g<h;g++)d.push(g<c?null:li);return d}(de,Ce),Oe="function"==typeof te?te():te;return Ee[1]={type:c,blueprint:Ee,template:d,queries:null,viewQuery:F,declTNode:h,data:Ee.slice().fill(null,de),bindingStartIndex:de,expandoStartIndex:Ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:G,consts:Oe,incompleteFirstPass:!1}}function rC(c,h,d,g){var _=Dx(h);null===d?_.push(g):(_.push(d),c.firstCreatePass&&fC(c).push(g,_.length-1))}function eb(c,h,d){for(var g in c)if(c.hasOwnProperty(g)){var _=c[g];(d=null===d?{}:d).hasOwnProperty(g)?d[g].push(h,_):d[g]=[h,_]}return d}function xl(c,h,d,g,_,E,S,F){var de,G=gi(h,d),te=h.inputs;!F&&null!=te&&(de=te[g])?(fb(c,d,de,g,_),Nr(h)&&function(c,h){var d=Cs(h,c);16&d[2]||(d[2]|=64)}(d,h.index)):3&h.type&&(g=function(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(g),_=null!=S?S(_,h.value||"",g):_,Bn(E)?E.setProperty(G,g,_):D(g)||(G.setProperty?G.setProperty(g,_):G[g]=_))}function lf(c,h,d,g){var _=!1;if(gc()){var E=function(c,h,d){var g=c.directiveRegistry,_=null;if(g)for(var E=0;E<g.length;E++){var S=g[E];ty(d,S.selectors,!1)&&(_||(_=[]),mu(Qa(d,h),c,S.type),Gr(S)?(uC(c,d),_.unshift(S)):_.push(S))}return _}(c,h,d),S=null===g?null:{"":-1};if(null!==E){_=!0,Ah(d,c.data.length,E.length);for(var F=0;F<E.length;F++){var G=E[F];G.providersResolver&&G.providersResolver(G)}for(var te=!1,de=!1,Ce=Eo(c,h,E.length,null),Ee=0;Ee<E.length;Ee++){var Oe=E[Ee];d.mergedAttrs=N(d.mergedAttrs,Oe.hostAttrs),cy(c,d,h,Ce,Oe),Sp(Ce,Oe,S),null!==Oe.contentQueries&&(d.flags|=8),(null!==Oe.hostBindings||null!==Oe.hostAttrs||0!==Oe.hostVars)&&(d.flags|=128);var Ye=Oe.type.prototype;!te&&(Ye.ngOnChanges||Ye.ngOnInit||Ye.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(d.index),te=!0),!de&&(Ye.ngOnChanges||Ye.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(d.index),de=!0),Ce++}!function(c,h){for(var g=h.directiveEnd,_=c.data,E=h.attrs,S=[],F=null,G=null,te=h.directiveStart;te<g;te++){var de=_[te],Ce=de.inputs,Ee=null===E||Vk(h)?null:ob(Ce,E);S.push(Ee),F=eb(Ce,te,F),G=eb(de.outputs,te,G)}null!==F&&(F.hasOwnProperty("class")&&(h.flags|=16),F.hasOwnProperty("style")&&(h.flags|=32)),h.initialInputs=S,h.inputs=F,h.outputs=G}(c,d)}S&&function(c,h,d){if(h)for(var g=c.localNames=[],_=0;_<h.length;_+=2){var E=d[h[_+1]];if(null==E)throw new Rt("301","Export of name '".concat(h[_+1],"' not found!"));g.push(h[_],E)}}(d,g,S)}return d.mergedAttrs=N(d.mergedAttrs,d.attrs),_}function rb(c,h,d,g,_,E){var S=E.hostBindings;if(S){var F=c.hostBindingOpCodes;null===F&&(F=c.hostBindingOpCodes=[]);var G=~h.index;(function(c){for(var h=c.length;h>0;){var d=c[--h];if("number"==typeof d&&d<0)return d}return 0})(F)!=G&&F.push(G),F.push(g,_,S)}}function ib(c,h){null!==c.hostBindings&&c.hostBindings(1,h)}function uC(c,h){h.flags|=2,(c.components||(c.components=[])).push(h.index)}function Sp(c,h,d){if(d){if(h.exportAs)for(var g=0;g<h.exportAs.length;g++)d[h.exportAs[g]]=c;Gr(h)&&(d[""]=c)}}function Ah(c,h,d){c.flags|=1,c.directiveStart=h,c.directiveEnd=h+d,c.providerIndexes=h}function cy(c,h,d,g,_){c.data[g]=_;var E=_.factory||(_.factory=he(_.type)),S=new $o(E,Gr(_),null);c.blueprint[g]=S,d[g]=S,rb(c,h,0,g,Eo(c,d,_.hostVars,li),_)}function ab(c,h,d){var g=gi(h,c),_=Fv(d),E=c[10],S=lb(c,Iv(c,_,null,d.onPush?64:16,g,h,E,E.createRenderer(g,d),null,null));c[h.index]=S}function ec(c,h,d,g,_,E){var S=gi(c,h);sb(h[11],S,E,c.value,d,g,_)}function sb(c,h,d,g,_,E,S){if(null==E)Bn(c)?c.removeAttribute(h,_,d):h.removeAttribute(_);else{var F=null==S?k(E):S(E,g||"",_);Bn(c)?c.setAttribute(h,_,F,d):d?h.setAttributeNS(d,_,F):h.setAttribute(_,F)}}function As(c,h,d,g,_,E){var S=E[h];if(null!==S)for(var F=g.setInput,G=0;G<S.length;){var te=S[G++],de=S[G++],Ce=S[G++];null!==F?g.setInput(d,Ce,te,de):d[de]=Ce}}function ob(c,h){for(var d=null,g=0;g<h.length;){var _=h[g];if(0!==_)if(5!==_){if("number"==typeof _)break;c.hasOwnProperty(_)&&(null===d&&(d=[]),d.push(_,c[_],h[g+1])),g+=2}else g+=2;else g+=4}return d}function Ex(c,h,d,g){return new Array(c,!0,!1,h,null,0,g,d,null,null)}function aL(c,h){var d=Cs(h,c);if(_l(d)){var g=d[1];80&d[2]?Sh(g,d,g.template,d[8]):d[5]>0&&ub(d)}}function ub(c){for(var h=Tl(c);null!==h;h=$1(h))for(var d=10;d<h.length;d++){var g=h[d];if(1024&g[2]){var _=g[1];Sh(_,g,_.template,g[8])}else g[5]>0&&ub(g)}var S=c[1].components;if(null!==S)for(var F=0;F<S.length;F++){var G=Cs(S[F],c);_l(G)&&G[5]>0&&ub(G)}}function sL(c,h){var d=Cs(h,c),g=d[1];(function(c,h){for(var d=h.length;d<c.blueprint.length;d++)h.push(c.blueprint[d])})(g,d),Pv(g,d,d[8])}function lb(c,h){return c[13]?c[14][4]=h:c[13]=h,c[14]=h,h}function lC(c){for(;c;){c[2]|=64;var h=Za(c);if(oh(c)&&!h)return c;c=h}return null}function cb(c,h,d){var g=h[10];g.begin&&g.begin();try{Sh(c,h,c.template,d)}catch(_){throw hb(h,_),_}finally{g.end&&g.end()}}function cC(c){!function(c){for(var h=0;h<c.components.length;h++){var d=c.components[h],g=P1(d),_=g[1];K0(_,g,_.template,d)}}(c[8])}function hC(c,h,d){Cl(0),h(c,d)}var Cx=function(){return Promise.resolve(null)}();function Dx(c){return c[7]||(c[7]=[])}function fC(c){return c.cleanup||(c.cleanup=[])}function dC(c,h,d){return(null===c||Gr(c))&&(d=function(c){for(;Array.isArray(c);){if("object"==typeof c[1])return c;c=c[0]}return null}(d[h.index])),d[11]}function hb(c,h){var d=c[9],g=d?d.get(nl,null):null;g&&g.handleError(h)}function fb(c,h,d,g,_){for(var E=0;E<d.length;){var S=d[E++],F=d[E++],G=h[S],te=c.data[S];null!==te.setInput?te.setInput(G,_,g,F):G[F]=_}}function xh(c,h,d){var g=mo(h,c);id(c[11],g,d)}function py(c,h,d){var g=d?c.styles:null,_=d?c.classes:null,E=0;if(null!==h)for(var S=0;S<h.length;S++){var F=h[S];"number"==typeof F?E=F:1==E?_=ee(_,F):2==E&&(g=ee(g,F+": "+h[++S]+";"))}d?c.styles=g:c.stylesWithoutHost=g,d?c.classes=_:c.classesWithoutHost=_}var db=new ps("INJECTOR",-1),vy=function(){function c(){(0,xe.Z)(this,c)}return(0,Ae.Z)(c,[{key:"get",value:function(d){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xf;if(g===Xf){var _=new Error("NullInjectorError: No provider for ".concat(lt(d),"!"));throw _.name="NullInjectorError",_}return g}}]),c}(),cf=new ps("Set Injector scope."),ud={},vC={},pb=void 0;function Zv(){return void 0===pb&&(pb=new vy),pb}function Sx(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=arguments.length>3?arguments[3]:void 0;return new ko(c,d,h||Zv(),g)}var ko=function(){function c(h,d,g){var _=this,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,xe.Z)(this,c),this.parent=g,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var S=[];d&&yu(d,function(G){return _.processProvider(G,h,d)}),yu([h],function(G){return _.processInjectorType(G,[],S)}),this.records.set(db,Bv(void 0,this));var F=this.records.get(cf);this.scope=null!=F?F.value:null,this.source=E||("object"==typeof h?null:lt(h))}return(0,Ae.Z)(c,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(d){return d.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(d){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xf,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jn.Default;this.assertNotDestroyed();var E=af(this),S=ii(void 0);try{if(!(_&jn.SkipSelf)){var F=this.records.get(d);if(void 0===F){var G=hL(d)&&ls(d);F=G&&this.injectableDefInScope(G)?Bv(vb(d),ud):null,this.records.set(d,F)}if(null!=F)return this.hydrate(d,F)}var te=_&jn.Self?Zv():this.parent;return te.get(d,g=_&jn.Optional&&g===Xf?null:g)}catch(Ce){if("NullInjectorError"===Ce.name){var de=Ce[bh]=Ce[bh]||[];if(de.unshift(lt(d)),E)throw Ce;return yk(Ce,d,"R3InjectorError",this.source)}throw Ce}finally{ii(S),af(E)}}},{key:"_resolveInjectorDefTypes",value:function(){var d=this;this.injectorDefTypes.forEach(function(g){return d.get(g)})}},{key:"toString",value:function(){var d=[];return this.records.forEach(function(_,E){return d.push(lt(E))}),"R3Injector[".concat(d.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(d,g,_){var E=this;if(!(d=nn(d)))return!1;var S=aa(d),F=null==S&&d.ngModule||void 0,G=void 0===F?d:F,Ce=-1!==_.indexOf(G);if(void 0!==F&&(S=aa(F)),null==S)return!1;if(null!=S.imports&&!Ce){var Ee;_.push(G);try{yu(S.imports,function(qt){E.processInjectorType(qt,g,_)&&(void 0===Ee&&(Ee=[]),Ee.push(qt))})}finally{}if(void 0!==Ee)for(var Oe=function(qn){var oi=Ee[qn],Ai=oi.ngModule,Aa=oi.providers;yu(Aa,function(xs){return E.processProvider(xs,Ai,Aa||Mn)})},Ye=0;Ye<Ee.length;Ye++)Oe(Ye)}this.injectorDefTypes.add(G);var mt=he(G)||function(){return new G};this.records.set(G,Bv(mt,ud));var Ut=S.providers;if(null!=Ut&&!Ce){var Cn=d;yu(Ut,function(qt){return E.processProvider(qt,Cn,Ut)})}return void 0!==F&&void 0!==d.providers}},{key:"processProvider",value:function(d,g,_){var E=hf(d=nn(d))?d:nn(d&&d.provide),S=function(c,h,d){return mC(c)?Bv(void 0,c.useValue):Bv(Ax(c),ud)}(d);if(hf(d)||!0!==d.multi)this.records.get(E);else{var F=this.records.get(E);F||((F=Bv(void 0,ud,!0)).factory=function(){return sf(F.multi)},this.records.set(E,F)),E=d,F.multi.push(d)}this.records.set(E,S)}},{key:"hydrate",value:function(d,g){return g.value===ud&&(g.value=vC,g.value=g.factory()),"object"==typeof g.value&&g.value&&function(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(g.value)&&this.onDestroy.add(g.value),g.value}},{key:"injectableDefInScope",value:function(d){if(!d.providedIn)return!1;var g=nn(d.providedIn);return"string"==typeof g?"any"===g||g===this.scope:this.injectorDefTypes.has(g)}}]),c}();function vb(c){var h=ls(c),d=null!==h?h.factory:he(c);if(null!==d)return d;if(c instanceof ps)throw new Error("Token ".concat(lt(c)," is missing a \u0275prov definition."));if(c instanceof Function)return function(c){var h=c.length;if(h>0){var d=Pu(h,"?");throw new Error("Can't resolve all parameters for ".concat(lt(c),": (").concat(d.join(", "),")."))}var g=function(c){var h=c&&(c[sa]||c[Er]);if(h){var d=function(c){if(c.hasOwnProperty("name"))return c.name;var h=(""+c).match(/^function\s*([^\s(]+)/);return null===h?"":h[1]}(c);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(d,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(d,'" class.')),h}return null}(c);return null!==g?function(){return g.factory(c)}:function(){return new c}}(c);throw new Error("unreachable")}function Ax(c,h,d){var g=void 0;if(hf(c)){var _=nn(c);return he(_)||vb(_)}if(mC(c))g=function(){return nn(c.useValue)};else if(function(c){return!(!c||!c.useFactory)}(c))g=function(){return c.useFactory.apply(c,(0,Te.Z)(sf(c.deps||[])))};else if(function(c){return!(!c||!c.useExisting)}(c))g=function(){return vs(nn(c.useExisting))};else{var E=nn(c&&(c.useClass||c.provide));if(!function(c){return!!c.deps}(c))return he(E)||vb(E);g=function(){return(0,v.Z)(E,(0,Te.Z)(sf(c.deps)))}}return g}function Bv(c,h){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:c,value:h,multi:d?[]:void 0}}function mC(c){return null!==c&&"object"==typeof c&&wh in c}function hf(c){return"function"==typeof c}function hL(c){return"function"==typeof c||"object"==typeof c&&c instanceof ps}var gC=function(c,h,d){return function(c){var _=Sx(c,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0);return _._resolveInjectorDefTypes(),_}({name:d},h,c,d)},Co=function(){var c=function(){function h(){(0,xe.Z)(this,h)}return(0,Ae.Z)(h,null,[{key:"create",value:function(g,_){return Array.isArray(g)?gC(g,_,""):gC(g.providers,g.parent,g.name||"")}}]),h}();return c.THROW_IF_NOT_FOUND=Xf,c.NULL=new vy,c.\u0275prov=Xr({token:c,providedIn:"any",factory:function(){return vs(db)}}),c.__NG_ELEMENT_ID__=-1,c}();function Sr(c,h){Li(P1(c)[1],_a())}function zx(c){return Object.getPrototypeOf(c.prototype).constructor}function Un(c){for(var h=zx(c.type),d=!0,g=[c];h;){var _=void 0;if(Gr(c))_=h.\u0275cmp||h.\u0275dir;else{if(h.\u0275cmp)throw new Error("Directives cannot inherit Components");_=h.\u0275dir}if(_){if(d){g.push(_);var E=c;E.inputs=pn(c.inputs),E.declaredInputs=pn(c.declaredInputs),E.outputs=pn(c.outputs);var S=_.hostBindings;S&&yL(c,S);var F=_.viewQuery,G=_.contentQueries;if(F&&eu(c,F),G&&Hx(c,G),pt(c.inputs,_.inputs),pt(c.declaredInputs,_.declaredInputs),pt(c.outputs,_.outputs),Gr(_)&&_.data.animation){var te=c.data;te.animation=(te.animation||[]).concat(_.data.animation)}}var de=_.features;if(de)for(var Ce=0;Ce<de.length;Ce++){var Ee=de[Ce];Ee&&Ee.ngInherit&&Ee(c),Ee===Un&&(d=!1)}}h=Object.getPrototypeOf(h)}!function(c){for(var h=0,d=null,g=c.length-1;g>=0;g--){var _=c[g];_.hostVars=h+=_.hostVars,_.hostAttrs=N(_.hostAttrs,d=N(d,_.hostAttrs))}}(g)}function pn(c){return c===Nn?{}:c===Mn?[]:c}function eu(c,h){var d=c.viewQuery;c.viewQuery=d?function(g,_){h(g,_),d(g,_)}:h}function Hx(c,h){var d=c.contentQueries;c.contentQueries=d?function(g,_,E){h(g,_,E),d(g,_,E)}:h}function yL(c,h){var d=c.hostBindings;c.hostBindings=d?function(g,_){h(g,_),d(g,_)}:h}var _L=["providersResolver"],bL=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function wL(c){var d,h=zx(c.type);d=Gr(c)?h.\u0275cmp:h.\u0275dir;var E,g=c,_=(0,Ve.Z)(_L);try{for(_.s();!(E=_.n()).done;){var S=E.value;g[S]=d[S]}}catch(de){_.e(de)}finally{_.f()}if(Gr(d)){var G,F=(0,Ve.Z)(bL);try{for(F.s();!(G=F.n()).done;){var te=G.value;g[te]=d[te]}}catch(de){F.e(de)}finally{F.f()}}}var wb=null;function tu(){if(!wb){var c=gt.Symbol;if(c&&c.iterator)wb=c.iterator;else for(var h=Object.getOwnPropertyNames(Map.prototype),d=0;d<h.length;++d){var g=h[d];"entries"!==g&&"size"!==g&&Map.prototype[g]===Map.prototype.entries&&(wb=g)}}return wb}var cd=function(){function c(h){(0,xe.Z)(this,c),this.wrapped=h}return(0,Ae.Z)(c,null,[{key:"wrap",value:function(d){return new c(d)}},{key:"unwrap",value:function(d){return c.isWrapped(d)?d.wrapped:d}},{key:"isWrapped",value:function(d){return d instanceof c}}]),c}();function Si(c){return!!Nu(c)&&(Array.isArray(c)||!(c instanceof Map)&&tu()in c)}function Nu(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function $r(c,h,d){return c[h]=d}function Gv(c,h){return c[h]}function Ys(c,h,d){return!Object.is(c[h],d)&&(c[h]=d,!0)}function hd(c,h,d,g){var _=Ys(c,h,d);return Ys(c,h+1,g)||_}function by(c,h,d,g,_){var E=hd(c,h,d,g);return Ys(c,h+2,_)||E}function yi(c,h,d,g,_,E){var S=hd(c,h,d,g);return hd(c,h+2,_,E)||S}function DC(c,h,d,g){var _=tn();return Ys(_,Yo(),h)&&(wi(),ec(Xt(),_,c,h,d,g)),DC}function Zu(c,h){for(var d=!1,g=Da(),_=1;_<h.length;_+=2)d=Ys(c,g++,h[_])||d;if(Js(g),!d)return li;for(var E=h[0],S=1;S<h.length;S+=2)E+=k(h[S])+h[S+1];return E}function zc(c,h,d,g){return Ys(c,Yo(),d)?h+k(d)+g:li}function jv(c,h,d,g,_,E){var F=hd(c,Da(),d,_);return Po(2),F?h+k(d)+g+k(_)+E:li}function nu(c,h,d,g,_,E,S,F){var te=by(c,Da(),d,_,S);return Po(3),te?h+k(d)+g+k(_)+E+k(S)+F:li}function Wv(c,h,d,g,_,E,S,F,G,te){var Ce=yi(c,Da(),d,_,S,G);return Po(4),Ce?h+k(d)+g+k(_)+E+k(S)+F+k(G)+te:li}function nc(c,h,d,g,_,E,S,F,G,te,de,Ce){var Ee=Da(),Oe=yi(c,Ee,d,_,S,G);return Oe=Ys(c,Ee+4,de)||Oe,Po(5),Oe?h+k(d)+g+k(_)+E+k(S)+F+k(G)+te+k(de)+Ce:li}function ms(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe){var Ye=Da(),mt=yi(c,Ye,d,_,S,G);return mt=hd(c,Ye+4,de,Ee)||mt,Po(6),mt?h+k(d)+g+k(_)+E+k(S)+F+k(G)+te+k(de)+Ce+k(Ee)+Oe:li}function Hc(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt){var Ut=Da(),Cn=yi(c,Ut,d,_,S,G);return Cn=by(c,Ut+4,de,Ee,Ye)||Cn,Po(7),Cn?h+k(d)+g+k(_)+E+k(S)+F+k(G)+te+k(de)+Ce+k(Ee)+Oe+k(Ye)+mt:li}function fd(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn){var qt=Da(),qn=yi(c,qt,d,_,S,G);return qn=yi(c,qt+4,de,Ee,Ye,Ut)||qn,Po(8),qn?h+k(d)+g+k(_)+E+k(S)+F+k(G)+te+k(de)+Ce+k(Ee)+Oe+k(Ye)+mt+k(Ut)+Cn:li}function SC(c,h,d,g,_,E){var S=tn(),F=zc(S,h,d,g);return F!==li&&ec(Xt(),S,c,F,_,E),SC}function qv(c,h,d,g,_,E,S,F){var G=tn(),te=jv(G,h,d,g,_,E);return te!==li&&ec(Xt(),G,c,te,S,F),qv}function dd(c,h,d,g,_,E,S,F,G,te){var de=tn(),Ce=nu(de,h,d,g,_,E,S,F);return Ce!==li&&ec(Xt(),de,c,Ce,G,te),dd}function wy(c,h,d,g,_,E,S,F,G,te,de,Ce){var Ee=tn(),Oe=Wv(Ee,h,d,g,_,E,S,F,G,te);return Oe!==li&&ec(Xt(),Ee,c,Oe,de,Ce),wy}function AC(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe){var Ye=tn(),mt=nc(Ye,h,d,g,_,E,S,F,G,te,de,Ce);return mt!==li&&ec(Xt(),Ye,c,mt,Ee,Oe),AC}function Fr(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt){var Ut=tn(),Cn=ms(Ut,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe);return Cn!==li&&ec(Xt(),Ut,c,Cn,Ye,mt),Fr}function pd(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn){var qt=tn(),qn=Hc(qt,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt);return qn!==li&&ec(Xt(),qt,c,qn,Ut,Cn),pd}function Gc(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn,qt,qn){var oi=tn(),Ai=fd(oi,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn);return Ai!==li&&ec(Xt(),oi,c,Ai,qt,qn),Gc}function Yv(c,h,d,g){var _=tn(),E=Zu(_,h);return E!==li&&ec(Xt(),_,c,E,d,g),Yv}function TC(c,h,d,g,_,E,S,F){var G=tn(),te=wi(),de=c+20,Ce=te.firstCreatePass?function(c,h,d,g,_,E,S,F,G){var te=h.consts,de=Dh(h,c,4,S||null,Bs(te,F));lf(h,d,de,Bs(te,G)),Li(h,de);var Ce=de.tViews=Rv(2,de,g,_,E,h.directiveRegistry,h.pipeRegistry,null,h.schemas,te);return null!==h.queries&&(h.queries.template(h,de),Ce.queries=h.queries.embeddedTView(de)),de}(de,te,G,h,d,g,_,E,S):te.data[de];Ds(Ce,!1);var Ee=G[11].createComment("");Qg(te,G,Ee,Ce),Ou(Ee,G),lb(G,G[de]=Ex(Ee,G,Ee,Ce)),po(Ce)&&X0(te,G,Ce),null!=S&&Q0(G,Ce,F)}function Eb(c){return Ca(kr.lFrame.contextLView,20+c)}var Ey={"\u0275\u0275defineInjectable":Xr,"\u0275\u0275defineInjector":Qs,"\u0275\u0275inject":vs,"\u0275\u0275invalidFactoryDep":bv,resolveForwardRef:nn},Wx=We({provide:String,useValue:We});function PC(c){return void 0!==c.useClass}function $v(c){return void 0!==c.useFactory}var kL=Ro("Injectable",void 0,void 0,void 0,function(h,d){return CL(h,d)}),CL=function(c,h){var d=null,g=null;c.hasOwnProperty(sa)||Object.defineProperty(c,sa,{get:function(){if(null===d){var E=to();d=E.compileInjectable(Ey,"ng:///".concat(c.name,"/\u0275prov.js"),function(c,h){var d=h||{providedIn:null},g={name:c.name,type:c,typeArgumentCount:0,providedIn:d.providedIn};return(PC(d)||$v(d))&&void 0!==d.deps&&(g.deps=m0(d.deps)),PC(d)?g.useClass=d.useClass:function(c){return Wx in c}(d)?g.useValue=d.useValue:$v(d)?g.useFactory=d.useFactory:function(c){return void 0!==c.useExisting}(d)&&(g.useExisting=d.useExisting),g}(c,h))}return d}}),c.hasOwnProperty(wt)||Object.defineProperty(c,wt,{get:function(){if(null===g){var E=to();g=E.compileFactory(Ey,"ng:///".concat(c.name,"/\u0275fac.js"),{name:c.name,type:c,typeArgumentCount:0,deps:wv(c),target:E.FactoryTarget.Injectable})}return g},configurable:!0})};function em(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jn.Default,d=tn();if(null===d)return vs(c,h);var g=_a();return dv(g,d,nn(c),h)}function Ab(){throw new Error("invalid")}function jC(c,h,d){var g=tn();return Ys(g,Yo(),h)&&xl(wi(),Xt(),g,c,h,g[11],d,!1),jC}function WC(c,h,d,g,_){var S=_?"class":"style";fb(c,d,h.inputs[S],S,g)}function vd(c,h,d,g){var _=tn(),E=wi(),S=20+c,F=_[11],G=_[S]=ad(F,h,kr.lFrame.currentNamespace),te=E.firstCreatePass?function(c,h,d,g,_,E,S){var F=h.consts,te=Dh(h,c,2,_,Bs(F,E));return lf(h,d,te,Bs(F,S)),null!==te.attrs&&py(te,te.attrs,!1),null!==te.mergedAttrs&&py(te,te.mergedAttrs,!0),null!==h.queries&&h.queries.elementStart(h,te),te}(S,E,_,0,h,d,g):E.data[S];Ds(te,!0);var de=te.mergedAttrs;null!==de&&A(F,G,de);var Ce=te.classes;null!==Ce&&V0(F,G,Ce);var Ee=te.styles;null!==Ee&&Uk(F,G,Ee),64!=(64&te.flags)&&Qg(E,_,G,te),0===kr.lFrame.elementDepthCount&&Ou(G,_),kr.lFrame.elementDepthCount++,po(te)&&(X0(E,_,te),$0(E,te,_)),null!==g&&Q0(_,te)}function pf(){var c=_a();La()?Fc():Ds(c=c.parent,!1);var h=c;kr.lFrame.elementDepthCount--;var d=wi();d.firstCreatePass&&(Li(d,c),$h(c)&&d.queries.elementEnd(c)),null!=h.classesWithoutHost&&function(c){return 0!=(16&c.flags)}(h)&&WC(d,h,tn(),h.classesWithoutHost,!0),null!=h.stylesWithoutHost&&function(c){return 0!=(32&c.flags)}(h)&&WC(d,h,tn(),h.stylesWithoutHost,!1)}function qC(c,h,d,g){vd(c,h,d,g),pf()}function md(c,h,d){var g=tn(),_=wi(),E=c+20,S=_.firstCreatePass?function(c,h,d,g,_){var E=h.consts,S=Bs(E,g),F=Dh(h,c,8,"ng-container",S);return null!==S&&py(F,S,!0),lf(h,d,F,Bs(E,_)),null!==h.queries&&h.queries.elementStart(h,F),F}(E,_,g,h,d):_.data[E];Ds(S,!0);var F=g[E]=g[11].createComment("");Qg(_,g,F,S),Ou(F,g),po(S)&&(X0(_,g,S),$0(_,S,g)),null!=d&&Q0(g,S)}function Tb(){var c=_a(),h=wi();La()?Fc():Ds(c=c.parent,!1),h.firstCreatePass&&(Li(h,c),$h(c)&&h.queries.elementEnd(c))}function Qx(c,h,d){md(c,h,d),Tb()}function nm(){return tn()}function YC(c){return!!c&&"function"==typeof c.then}function Jx(c){return!!c&&"function"==typeof c.subscribe}var ru=Jx;function rm(c,h,d,g){var _=tn(),E=wi(),S=_a();return xb(E,_,_[11],S,c,h,!!d,g),rm}function im(c,h){var d=_a(),g=tn(),_=wi();return xb(_,g,dC(jl(_.data),d,g),d,c,h,!1),im}function xb(c,h,d,g,_,E,S,F){var G=po(g),de=c.firstCreatePass&&fC(c),Ce=h[8],Ee=Dx(h),Oe=!0;if(3&g.type||F){var Ye=gi(g,h),mt=F?F(Ye):Ye,Ut=Ee.length,Cn=F?function(Tf){return F(Zr(Tf[g.index]))}:g.index;if(Bn(d)){var qt=null;if(!F&&G&&(qt=function(c,h,d,g){var _=c.cleanup;if(null!=_)for(var E=0;E<_.length-1;E+=2){var S=_[E];if(S===d&&_[E+1]===g){var F=h[7],G=_[E+2];return F.length>G?F[G]:null}"string"==typeof S&&(E+=2)}return null}(c,h,_,g.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=E,qt.__ngLastListenerFn__=E,Oe=!1;else{E=Mb(g,h,Ce,E,!1);var oi=d.listen(mt,_,E);Ee.push(E,oi),de&&de.push(_,Cn,Ut,Ut+1)}}else E=Mb(g,h,Ce,E,!0),mt.addEventListener(_,E,S),Ee.push(E),de&&de.push(_,Cn,Ut,S)}else E=Mb(g,h,Ce,E,!1);var Aa,Ai=g.outputs;if(Oe&&null!==Ai&&(Aa=Ai[_])){var xs=Aa.length;if(xs)for(var Vo=0;Vo<xs;Vo+=2){var Hd=h[Aa[Vo]][Aa[Vo+1]].subscribe(E),th=Ee.length;Ee.push(E,Hd),de&&de.push(_,g.index,th,-(th+1))}}}function eM(c,h,d,g){try{return!1!==d(g)}catch(_){return hb(c,_),!1}}function Mb(c,h,d,g,_){return function E(S){if(S===Function)return g;var F=2&c.flags?Cs(c.index,h):h;0==(32&h[2])&&lC(F);for(var G=eM(h,0,g,S),te=E.__ngNextListenerFn__;te;)G=eM(h,0,te,S)&&G,te=te.__ngNextListenerFn__;return _&&!1===G&&(S.preventDefault(),S.returnValue=!1),G}}function KC(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return dt(c)}function Ay(c,h){for(var d=null,g=function(c){var h=c.attrs;if(null!=h){var d=h.indexOf(5);if(0==(1&d))return h[d+1]}return null}(c),_=0;_<h.length;_++){var E=h[_];if("*"!==E){if(null===g?ty(c,E,!0):WO(g,E))return _}else d=_}return d}function vf(c){var h=tn()[16][6];if(!h.projection)for(var g=h.projection=Pu(c?c.length:1,null),_=g.slice(),E=h.child;null!==E;){var S=c?Ay(E,c):0;null!==S&&(_[S]?_[S].projectionNext=E:g[S]=E,_[S]=E),E=E.next}}function $C(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2?arguments[2]:void 0,g=tn(),_=wi(),E=Dh(_,20+c,16,null,d||null);null===E.projection&&(E.projection=h),Fc(),64!=(64&E.flags)&&nx(_,g,E)}function Ib(c,h,d){return Ty(c,"",h,"",d),Ib}function Ty(c,h,d,g,_){var E=tn(),S=zc(E,h,d,g);return S!==li&&xl(wi(),Xt(),E,c,S,E[11],_,!1),Ty}function am(c,h,d,g,_,E,S){var F=tn(),G=jv(F,h,d,g,_,E);return G!==li&&xl(wi(),Xt(),F,c,G,F[11],S,!1),am}function Pb(c,h,d,g,_,E,S,F,G){var te=tn(),de=nu(te,h,d,g,_,E,S,F);return de!==li&&xl(wi(),Xt(),te,c,de,te[11],G,!1),Pb}function tM(c,h,d,g,_,E,S,F,G,te,de){var Ce=tn(),Ee=Wv(Ce,h,d,g,_,E,S,F,G,te);return Ee!==li&&xl(wi(),Xt(),Ce,c,Ee,Ce[11],de,!1),tM}function so(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee){var Oe=tn(),Ye=nc(Oe,h,d,g,_,E,S,F,G,te,de,Ce);return Ye!==li&&xl(wi(),Xt(),Oe,c,Ye,Oe[11],Ee,!1),so}function $i(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye){var mt=tn(),Ut=ms(mt,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe);return Ut!==li&&xl(wi(),Xt(),mt,c,Ut,mt[11],Ye,!1),$i}function XC(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut){var Cn=tn(),qt=Hc(Cn,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt);return qt!==li&&xl(wi(),Xt(),Cn,c,qt,Cn[11],Ut,!1),XC}function QC(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn,qt){var qn=tn(),oi=fd(qn,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn);return oi!==li&&xl(wi(),Xt(),qn,c,oi,qn[11],qt,!1),QC}function Cu(c,h,d){var g=tn(),_=Zu(g,h);return _!==li&&xl(wi(),Xt(),g,c,_,g[11],d,!1),Cu}function eD(c,h,d,g,_){for(var E=c[d+1],S=null===h,F=g?il(E):bc(E),G=!1;0!==F&&(!1===G||S);){var de=c[F+1];IL(c[F],h)&&(G=!0,c[F+1]=g?ry(de):xv(de)),F=g?il(de):bc(de)}G&&(c[d+1]=g?xv(E):ry(E))}function IL(c,h){return null===c||null==h||(Array.isArray(c)?c[1]:c)===h||!(!Array.isArray(c)||"string"!=typeof h)&&_u(c,h)>=0}var Ba={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nM(c){return c.substring(Ba.key,Ba.keyEnd)}function tD(c){return c.substring(Ba.value,Ba.valueEnd)}function nD(c,h){var d=Ba.textEnd;return d===h?-1:(h=Ba.keyEnd=function(c,h,d){for(;h<d&&c.charCodeAt(h)>32;)h++;return h}(c,Ba.key=h,d),mf(c,h,d))}function Ua(c,h){var d=Ba.textEnd,g=Ba.key=mf(c,h,d);return d===g?-1:(g=Ba.keyEnd=function(c,h,d){for(var g;h<d&&(45===(g=c.charCodeAt(h))||95===g||(-33&g)>=65&&(-33&g)<=90||g>=48&&g<=57);)h++;return h}(c,g,d),g=xy(c,g,d),g=Ba.value=mf(c,g,d),g=Ba.valueEnd=function(c,h,d){for(var g=-1,_=-1,E=-1,S=h,F=S;S<d;){var G=c.charCodeAt(S++);if(59===G)return F;34===G||39===G?F=S=aD(c,G,S,d):h===S-4&&85===E&&82===_&&76===g&&40===G?F=S=aD(c,41,S,d):G>32&&(F=S),E=_,_=g,g=-33&G}return F}(c,g,d),xy(c,g,d))}function rM(c){Ba.key=0,Ba.keyEnd=0,Ba.value=0,Ba.valueEnd=0,Ba.textEnd=c.length}function mf(c,h,d){for(;h<d&&c.charCodeAt(h)<=32;)h++;return h}function xy(c,h,d,g){return(h=mf(c,h,d))<d&&h++,h}function aD(c,h,d,g){for(var _=-1,E=d;E<g;){var S=c.charCodeAt(E++);if(S==h&&92!==_)return E;_=92==S&&92===_?0:S}throw new Error}function sD(c,h,d){return al(c,h,d,!1),sD}function Fb(c,h){return al(c,h,null,!0),Fb}function jc(c){kc(uD,OL,c,!1)}function OL(c,h){for(var d=function(c){return rM(c),Ua(c,mf(c,0,Ba.textEnd))}(h);d>=0;d=Ua(h,d))uD(c,nM(h),tD(h))}function LL(c){kc(Fu,Mh,c,!0)}function Mh(c,h){for(var d=function(c){return rM(c),nD(c,mf(c,0,Ba.textEnd))}(h);d>=0;d=nD(h,d))Fu(c,nM(h),!0)}function al(c,h,d,g){var _=tn(),E=wi(),S=Po(2);E.firstUpdatePass&&Zo(E,c,S,g),h!==li&&Ys(_,S,h)&&lD(E,E.data[yt()],_,_[11],c,_[S+1]=function(c,h){return null==c||("string"==typeof h?c+=h:"object"==typeof c&&(c=lt(Bc(c)))),c}(h,d),g,S)}function kc(c,h,d,g){var _=wi(),E=Po(2);_.firstUpdatePass&&Zo(_,null,E,g);var S=tn();if(d!==li&&Ys(S,E,d)){var F=_.data[yt()];if(cD(F,g)&&!aM(_,E)){var te=g?F.classesWithoutHost:F.stylesWithoutHost;null!==te&&(d=ee(te,d||"")),WC(_,F,S,d,g)}else!function(c,h,d,g,_,E,S,F){_===li&&(_=Mn);for(var G=0,te=0,de=0<_.length?_[0]:null,Ce=0<E.length?E[0]:null;null!==de||null!==Ce;){var Ee=G<_.length?_[G+1]:void 0,Oe=te<E.length?E[te+1]:void 0,Ye=null,mt=void 0;de===Ce?(G+=2,te+=2,Ee!==Oe&&(Ye=Ce,mt=Oe)):null===Ce||null!==de&&de<Ce?(G+=2,Ye=de):(te+=2,Ye=Ce,mt=Oe),null!==Ye&&lD(c,h,d,g,Ye,mt,S,F),de=G<_.length?_[G]:null,Ce=te<E.length?E[te]:null}}(_,F,S,S[11],S[E+1],S[E+1]=function(c,h,d){if(null==d||""===d)return Mn;var g=[],_=Bc(d);if(Array.isArray(_))for(var E=0;E<_.length;E++)c(g,_[E],!0);else if("object"==typeof _)for(var S in _)_.hasOwnProperty(S)&&c(g,S,_[S]);else"string"==typeof _&&h(g,_);return g}(c,h,d),g,E)}}function aM(c,h){return h>=c.expandoStartIndex}function Zo(c,h,d,g){var _=c.data;if(null===_[d+1]){var E=_[yt()],S=aM(c,d);cD(E,g)&&null===h&&!S&&(h=!1),h=function(c,h,d,g){var _=jl(c),E=g?h.residualClasses:h.residualStyles;if(null===_)0===(g?h.classBindings:h.styleBindings)&&(d=sm(d=Iy(null,c,h,d,g),h.attrs,g),E=null);else{var F=h.directiveStylingLast;if(-1===F||c[F]!==_)if(d=Iy(_,c,h,d,g),null===E){var te=function(c,h,d){var g=d?h.classBindings:h.styleBindings;if(0!==bc(g))return c[il(g)]}(c,h,g);void 0!==te&&Array.isArray(te)&&function(c,h,d,g){c[il(d?h.classBindings:h.styleBindings)]=g}(c,h,g,te=sm(te=Iy(null,c,h,te[1],g),h.attrs,g))}else E=function(c,h,d){for(var g=void 0,_=h.directiveEnd,E=1+h.directiveStylingLast;E<_;E++)g=sm(g,c[E].hostAttrs,d);return sm(g,h.attrs,d)}(c,h,g)}return void 0!==E&&(g?h.residualClasses=E:h.residualStyles=E),d}(_,E,h,g),function(c,h,d,g,_,E){var S=E?h.classBindings:h.styleBindings,F=il(S),G=bc(S);c[g]=d;var de,te=!1;if(Array.isArray(d)?(null===(de=d[1])||_u(d,de)>0)&&(te=!0):de=d,_)if(0!==G){var Oe=il(c[F+1]);c[g+1]=H0(Oe,F),0!==Oe&&(c[Oe+1]=ny(c[Oe+1],g)),c[F+1]=function(c,h){return 131071&c|h<<17}(c[F+1],g)}else c[g+1]=H0(F,0),0!==F&&(c[F+1]=ny(c[F+1],g)),F=g;else c[g+1]=H0(G,0),0===F?F=g:c[G+1]=ny(c[G+1],g),G=g;te&&(c[g+1]=xv(c[g+1])),eD(c,de,g,!0),eD(c,de,g,!1),function(c,h,d,g,_){var E=_?c.residualClasses:c.residualStyles;null!=E&&"string"==typeof h&&_u(E,h)>=0&&(d[g+1]=ry(d[g+1]))}(h,de,c,g,E),S=H0(F,G),E?h.classBindings=S:h.styleBindings=S}(_,E,h,d,S,g)}}function Iy(c,h,d,g,_){var E=null,S=d.directiveEnd,F=d.directiveStylingLast;for(-1===F?F=d.directiveStart:F++;F<S&&(g=sm(g,(E=h[F]).hostAttrs,_),E!==c);)F++;return null!==c&&(d.directiveStylingLast=F),g}function sm(c,h,d){var g=d?1:2,_=-1;if(null!==h)for(var E=0;E<h.length;E++){var S=h[E];"number"==typeof S?_=S:_===g&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),Fu(c,S,!!d||h[++E]))}return void 0===c?null:c}function uD(c,h,d){Fu(c,h,Bc(d))}function lD(c,h,d,g,_,E,S,F){if(3&h.type){var G=c.data,te=G[F+1];Rb(function(c){return 1==(1&c)}(te)?uM(G,h,d,_,bc(te),S):void 0)||(Rb(E)||function(c){return 2==(2&c)}(te)&&(E=uM(G,null,d,_,F,S)),function(c,h,d,g,_){var E=Bn(c);if(h)_?E?c.addClass(d,g):d.classList.add(g):E?c.removeClass(d,g):d.classList.remove(g);else{var S=-1===g.indexOf("-")?void 0:Fk.DashCase;if(null==_)E?c.removeStyle(d,g,S):d.style.removeProperty(g);else{var F="string"==typeof _&&_.endsWith("!important");F&&(_=_.slice(0,-10),S|=Fk.Important),E?c.setStyle(d,g,_,S):d.style.setProperty(g,_,F?"important":"")}}}(g,S,mo(yt(),d),_,E))}}function uM(c,h,d,g,_,E){for(var S=null===h,F=void 0;_>0;){var G=c[_],te=Array.isArray(G),de=te?G[1]:G,Ce=null===de,Ee=d[_+1];Ee===li&&(Ee=Ce?Mn:void 0);var Oe=Ce?qf(Ee,g):de===g?Ee:void 0;if(te&&!Rb(Oe)&&(Oe=qf(G,g)),Rb(Oe)&&(F=Oe,S))return F;var Ye=c[_+1];_=S?il(Ye):bc(Ye)}if(null!==h){var mt=E?h.residualClasses:h.residualStyles;null!=mt&&(F=qf(mt,g))}return F}function Rb(c){return void 0!==c}function cD(c,h){return 0!=(c.flags&(h?16:32))}function lM(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=tn(),g=wi(),_=c+20,E=g.firstCreatePass?Dh(g,_,1,h,null):g.data[_],S=d[_]=Lk(d[11],h);Qg(g,d,S,E),Ds(E,!1)}function Lb(c){return Fy("",c,""),Lb}function Fy(c,h,d){var g=tn(),_=zc(g,c,h,d);return _!==li&&xh(g,yt(),_),Fy}function hD(c,h,d,g,_){var E=tn(),S=jv(E,c,h,d,g,_);return S!==li&&xh(E,yt(),S),hD}function cM(c,h,d,g,_,E,S){var F=tn(),G=nu(F,c,h,d,g,_,E,S);return G!==li&&xh(F,yt(),G),cM}function fD(c,h,d,g,_,E,S,F,G){var te=tn(),de=Wv(te,c,h,d,g,_,E,S,F,G);return de!==li&&xh(te,yt(),de),fD}function dD(c,h,d,g,_,E,S,F,G,te,de){var Ce=tn(),Ee=nc(Ce,c,h,d,g,_,E,S,F,G,te,de);return Ee!==li&&xh(Ce,yt(),Ee),dD}function pD(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee){var Oe=tn(),Ye=ms(Oe,c,h,d,g,_,E,S,F,G,te,de,Ce,Ee);return Ye!==li&&xh(Oe,yt(),Ye),pD}function hM(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye){var mt=tn(),Ut=Hc(mt,c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye);return Ut!==li&&xh(mt,yt(),Ut),hM}function fM(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut){var Cn=tn(),qt=fd(Cn,c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut);return qt!==li&&xh(Cn,yt(),qt),fM}function Ip(c){var h=tn(),d=Zu(h,c);return d!==li&&xh(h,yt(),d),Ip}function om(c,h,d){kc(Fu,Mh,zc(tn(),c,h,d),!0)}function NL(c,h,d,g,_){kc(Fu,Mh,jv(tn(),c,h,d,g,_),!0)}function ZL(c,h,d,g,_,E,S){kc(Fu,Mh,nu(tn(),c,h,d,g,_,E,S),!0)}function BL(c,h,d,g,_,E,S,F,G){kc(Fu,Mh,Wv(tn(),c,h,d,g,_,E,S,F,G),!0)}function dM(c,h,d,g,_,E,S,F,G,te,de){kc(Fu,Mh,nc(tn(),c,h,d,g,_,E,S,F,G,te,de),!0)}function Wc(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee){kc(Fu,Mh,ms(tn(),c,h,d,g,_,E,S,F,G,te,de,Ce,Ee),!0)}function UL(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye){kc(Fu,Mh,Hc(tn(),c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye),!0)}function pM(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut){kc(Fu,Mh,fd(tn(),c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut),!0)}function gf(c){kc(Fu,Mh,Zu(tn(),c),!0)}function VL(c,h,d){jc(zc(tn(),c,h,d))}function qc(c,h,d,g,_){jc(jv(tn(),c,h,d,g,_))}function um(c,h,d,g,_,E,S){jc(nu(tn(),c,h,d,g,_,E,S))}function gs(c,h,d,g,_,E,S,F,G){jc(Wv(tn(),c,h,d,g,_,E,S,F,G))}function ic(c,h,d,g,_,E,S,F,G,te,de){jc(nc(tn(),c,h,d,g,_,E,S,F,G,te,de))}function zL(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee){jc(ms(tn(),c,h,d,g,_,E,S,F,G,te,de,Ce,Ee))}function HL(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye){jc(Hc(tn(),c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye))}function Ks(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut){jc(fd(tn(),c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut))}function yd(c){jc(Zu(tn(),c))}function sl(c,h,d,g,_){return al(c,zc(tn(),h,d,g),_,!1),sl}function iu(c,h,d,g,_,E,S){return al(c,jv(tn(),h,d,g,_,E),S,!1),iu}function Cc(c,h,d,g,_,E,S,F,G){return al(c,nu(tn(),h,d,g,_,E,S,F),G,!1),Cc}function lm(c,h,d,g,_,E,S,F,G,te,de){return al(c,Wv(tn(),h,d,g,_,E,S,F,G,te),de,!1),lm}function _d(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee){return al(c,nc(tn(),h,d,g,_,E,S,F,G,te,de,Ce),Ee,!1),_d}function Ry(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye){return al(c,ms(tn(),h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe),Ye,!1),Ry}function Oy(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut){return al(c,Hc(tn(),h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt),Ut,!1),Oy}function vM(c,h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn,qt){return al(c,fd(tn(),h,d,g,_,E,S,F,G,te,de,Ce,Ee,Oe,Ye,mt,Ut,Cn),qt,!1),vM}function vD(c,h,d){return al(c,Zu(tn(),h),d,!1),vD}function Nb(c,h,d){var g=tn();return Ys(g,Yo(),h)&&xl(wi(),Xt(),g,c,h,g[11],d,!0),Nb}function En(c,h,d){var g=tn();if(Ys(g,Yo(),h)){var E=wi(),S=Xt();xl(E,S,g,c,h,dC(jl(E.data),S,g),d,!0)}return En}var bd=void 0,GL=["en",[["a","p"],["AM","PM"],bd],[["AM","PM"],bd,bd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bd,"{1} 'at' {0}",bd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(c){var h=Math.floor(Math.abs(c)),d=c.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===d?1:5}],Ph={};function mD(c){var h=function(c){return c.toLowerCase().replace(/_/g,"-")}(c),d=Zb(h);if(d)return d;var g=h.split("-")[0];if(d=Zb(g))return d;if("en"===g)return GL;throw new Error('Missing locale data for the locale "'.concat(c,'".'))}function gD(c){return mD(c)[au.PluralCase]}function Zb(c){return c in Ph||(Ph[c]=gt.ng&&gt.ng.common&&gt.ng.common.locales&&gt.ng.common.locales[c]),Ph[c]}var au=function(c){return c[c.LocaleId=0]="LocaleId",c[c.DayPeriodsFormat=1]="DayPeriodsFormat",c[c.DayPeriodsStandalone=2]="DayPeriodsStandalone",c[c.DaysFormat=3]="DaysFormat",c[c.DaysStandalone=4]="DaysStandalone",c[c.MonthsFormat=5]="MonthsFormat",c[c.MonthsStandalone=6]="MonthsStandalone",c[c.Eras=7]="Eras",c[c.FirstDayOfWeek=8]="FirstDayOfWeek",c[c.WeekendRange=9]="WeekendRange",c[c.DateFormat=10]="DateFormat",c[c.TimeFormat=11]="TimeFormat",c[c.DateTimeFormat=12]="DateTimeFormat",c[c.NumberSymbols=13]="NumberSymbols",c[c.NumberFormats=14]="NumberFormats",c[c.CurrencyCode=15]="CurrencyCode",c[c.CurrencySymbol=16]="CurrencySymbol",c[c.CurrencyName=17]="CurrencyName",c[c.Currencies=18]="Currencies",c[c.Directionality=19]="Directionality",c[c.PluralCase=20]="PluralCase",c[c.ExtraData=21]="ExtraData",c}({}),WL=["zero","one","two","few","many"],Ly="en-US",Ny={marker:"element"},dm={marker:"ICU"},Ml=function(c){return c[c.SHIFT=2]="SHIFT",c[c.APPEND_EAGERLY=1]="APPEND_EAGERLY",c[c.COMMENT=2]="COMMENT",c}({}),Pp=Ly;function wd(c){(function(c,h){null==c&&Ir(h,c,null,"!=")})(c,"Expected localeId to be defined"),"string"==typeof c&&(Pp=c.toLowerCase().replace(/_/g,"-"))}function bD(c,h,d){var g=h.insertBeforeIndex,_=Array.isArray(g)?g[0]:g;return null===_?ex(c,0,d):Zr(d[_])}function Ub(c,h,d,g,_){var E=h.insertBeforeIndex;if(Array.isArray(E)){var S=g,F=null;if(3&h.type||(F=S,S=_),null!==S&&0==(2&h.flags))for(var G=1;G<E.length;G++)kp(c,S,d[E[G]],F,!1)}}function mM(c,h){if(c.push(h),c.length>1)for(var d=c.length-2;d>=0;d--){var g=c[d];wD(g)||gM(g,h)&&null===qL(g)&&ED(g,h.index)}}function wD(c){return!(64&c.type)}function gM(c,h){return wD(h)||c.index>h.index}function qL(c){var h=c.insertBeforeIndex;return Array.isArray(h)?h[0]:h}function ED(c,h){var d=c.insertBeforeIndex;Array.isArray(d)?d[0]=h:(tx(bD,Ub),c.insertBeforeIndex=h)}function Uy(c,h){var d=c.data[h];return null===d||"string"==typeof d?null:d.hasOwnProperty("currentCaseLViewIndex")?d:d.value}function Fh(c,h,d){var g=Y0(c,d,64,null,null);return mM(h,g),g}function Vy(c,h){var d=h[c.currentCaseLViewIndex];return null===d?d:d<0?~d:d}function zy(c){return c>>>17}function bM(c){return(131070&c)>>>1}var Rh=0,pm=0;function vm(c,h,d,g){for(var _=c[11],E=0;E<h.length;E++){var S=h[E++],F=h[E],te=(S&Ml.APPEND_EAGERLY)===Ml.APPEND_EAGERLY,de=S>>>Ml.SHIFT,Ce=c[de];null===Ce&&(Ce=c[de]=(S&Ml.COMMENT)===Ml.COMMENT?_.createComment(F):Lk(_,F)),te&&null!==d&&kp(_,d,Ce,g,!1)}}function CD(c,h,d,g){for(var S,_=d[11],E=null,F=0;F<h.length;F++){var G=h[F];if("string"==typeof G){var te=h[++F];null===d[te]&&(d[te]=Lk(_,G))}else if("number"==typeof G)switch(1&G){case 0:var de=zy(G);null===E&&(E=de,S=wo(_,g));var Ce=void 0,Ee=void 0;if(de===E?(Ce=g,Ee=S):(Ce=null,Ee=Zr(d[de])),null!==Ee){var Oe=bM(G);kp(_,Ee,d[Oe],Ce,!1);var mt=Uy(c,Oe);if(null!==mt&&"object"==typeof mt){var Ut=Vy(mt,d);null!==Ut&&CD(c,mt.create[Ut],d,d[mt.anchorIdx])}}break;case 1:var qt=h[++F],qn=h[++F];sb(_,mo(G>>>1,d),null,null,qt,qn,null);break;default:throw new Error('Unable to determine the type of mutate operation for "'.concat(G,'"'))}else switch(G){case dm:var oi=h[++F],Ai=h[++F];null===d[Ai]&&Ou(d[Ai]=Ke(_,oi),d);break;case Ny:var xs=h[++F],Vo=h[++F];null===d[Vo]&&Ou(d[Vo]=ad(_,xs,null),d)}}}function yf(c,h,d,g,_){for(var E=0;E<d.length;E++){var S=d[E],F=d[++E];if(S&_)for(var G="",te=E+1;te<=E+F;te++){var de=d[te];if("string"==typeof de)G+=de;else if("number"==typeof de)if(de<0)G+=k(h[g-de]);else{var Ce=de>>>2;switch(3&de){case 1:var Ee=d[++te],Oe=d[++te],Ye=c.data[Ce];"string"==typeof Ye?sb(h[11],h[Ce],null,Ye,Ee,G,Oe):xl(c,Ye,h,Ee,G,h[11],Oe,!1);break;case 0:var mt=h[Ce];null!==mt&&id(h[11],mt,G);break;case 2:DD(c,Uy(c,Ce),h,G);break;case 3:kd(c,Uy(c,Ce),g,h)}}}else{var Ut=d[E+1];if(Ut>0&&3==(3&Ut)){var qt=Uy(c,Ut>>>2);h[qt.currentCaseLViewIndex]<0&&kd(c,qt,g,h)}}E+=F}}function kd(c,h,d,g){var _=g[h.currentCaseLViewIndex];if(null!==_){var E=Rh;_<0&&(_=g[h.currentCaseLViewIndex]=~_,E=-1),yf(c,g,h.update[_],d,E)}}function DD(c,h,d,g){var _=function(c,h){var d=c.cases.indexOf(h);if(-1===d)switch(c.type){case 1:var g=function(c,h){var d=gD(h)(parseInt(c,10)),g=WL[d];return void 0!==g?g:"other"}(h,Pp);-1===(d=c.cases.indexOf(g))&&"other"!==g&&(d=c.cases.indexOf("other"));break;case 0:d=c.cases.indexOf("other")}return-1===d?null:d}(h,g);if(Vy(h,d)!==_&&(SD(c,h,d),d[h.currentCaseLViewIndex]=null===_?null:~_,null!==_)){var S=d[h.anchorIdx];S&&CD(c,h.create[_],d,S)}}function SD(c,h,d){var g=Vy(h,d);if(null!==g)for(var _=h.remove[g],E=0;E<_.length;E++){var S=_[E];if(S>0){var F=mo(S,d);null!==F&&Lu(d[11],F)}else SD(c,Uy(c,~S),d)}}function $L(){var d,g,c=[],h=-1;function E(F,G){h=0;var te=Vy(F,G);g=null!==te?F.remove[te]:Mn}function S(){if(h<g.length){var F=g[h++];return F>0?d[F]:(c.push(h,g),E(d[1].data[~F],d),S())}return 0===c.length?null:(g=c.pop(),h=c.pop(),S())}return function(F,G){for(d=G;c.length;)c.pop();return E(F.value,G),S}}var zb=/\ufffd(\d+):?\d*\ufffd/gi,XL=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,wM=/\ufffd(\d+)\ufffd/,_f=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,QL=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,EM=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,xD=/\uE500/g;function Gy(c,h,d,g,_,E){for(var S=Ju(),F=[],G=[],te=[[]],de=function(c){return c.replace(xD," ")}(_=function(c,h){if(function(c){return-1===c}(h))return PD(c);var d=c.indexOf(":".concat(h).concat("\ufffd"))+2+h.toString().length,g=c.search(new RegExp("".concat("\ufffd","\\/\\*\\d+:").concat(h).concat("\ufffd")));return PD(c.substring(d,g))}(_,E)).split(EM),Ce=0;Ce<de.length;Ce++){var Ee=de[Ce];if(0==(1&Ce))for(var Oe=Gb(Ee),Ye=0;Ye<Oe.length;Ye++){var mt=Oe[Ye];if(0==(1&Ye))""!==mt&&MD(c,S,te[0],F,G,d,mt);else{var Cn=mt;if("object"!=typeof Cn)throw new Error('Unable to parse ICU expression in "'.concat(_,'" message.'));Hb(c,d,G,h,Cn,jy(c,S,te[0],d,F,"",!0).index)}}else{var oi=47===Ee.charCodeAt(0),Aa=(Ee.charCodeAt(oi?1:0),20+Number.parseInt(Ee.substring(oi?2:1)));if(oi)te.shift(),Ds(Ju(),!1);else{var xs=Fh(c,te[0],Aa);te.unshift([]),Ds(xs,!0)}}}c.data[g]={create:F,update:G}}function jy(c,h,d,g,_,E,S){var F=Eo(c,g,1,null),G=F<<Ml.SHIFT,te=Ju();h===te&&(te=null),null===te&&(G|=Ml.APPEND_EAGERLY),S&&(G|=Ml.COMMENT,function(c){void 0===Rk&&(Rk=c())}($L)),_.push(G,null===E?"":E);var de=Y0(c,F,S?32:1,null===E?"":E,null);mM(d,de);var Ce=de.index;return Ds(de,!1),null!==te&&h!==te&&function(c,h){var d=c.insertBeforeIndex;null===d?(tx(bD,Ub),d=c.insertBeforeIndex=[null,h]):(function(c,h,d){c!=h&&Ir(d,c,h,"==")}(Array.isArray(d),!0,"Expecting array here"),d.push(h))}(te,Ce),de}function MD(c,h,d,g,_,E,S){var F=S.match(zb),G=jy(c,h,d,E,g,F?null:S,!1);F&&Fp(_,S,G.index,null,0,null)}function Fp(c,h,d,g,_,E){var S=c.length,F=S+1;c.push(null,null);for(var G=S+2,te=h.split(zb),de=0,Ce=0;Ce<te.length;Ce++){var Ee=te[Ce];if(1&Ce){var Oe=_+parseInt(Ee,10);c.push(-1-Oe),de|=ID(Oe)}else""!==Ee&&c.push(Ee)}return c.push(d<<2|(g?1:0)),g&&c.push(g,E),c[S]=de,c[F]=c.length-G,de}function tN(c){for(var h=0,d=0;d<c.length;d++){var g=c[d];"number"==typeof g&&g<0&&h++}return h}function ID(c){return 1<<Math.min(c,31)}function PD(c){for(var h,E,d="",g=0,_=!1;null!==(h=QL.exec(c));)_?h[0]==="".concat("\ufffd","/*").concat(E).concat("\ufffd")&&(g=h.index,_=!1):(d+=c.substring(g,h.index+h[0].length),E=h[1],_=!0);return d+c.substr(g)}function Hb(c,h,d,g,_,E){var S=0,F={type:_.type,currentCaseLViewIndex:Eo(c,h,1,null),anchorIdx:E,cases:[],create:[],remove:[],update:[]};(function(c,h,d){c.push(ID(h.mainBinding),2,-1-h.mainBinding,d<<2|2)})(d,_,E),function(c,h,d){var g=c.data[h];null===g?c.data[h]=d:g.value=d}(c,E,F);for(var G=_.values,te=0;te<G.length;te++){for(var de=G[te],Ce=[],Ee=0;Ee<de.length;Ee++){var Oe=de[Ee];if("string"!=typeof Oe){var Ye=Ce.push(Oe)-1;de[Ee]="\x3c!--\ufffd".concat(Ye,"\ufffd--\x3e")}}S=iN(c,F,h,d,g,_.cases[te],de.join(""),Ce)|S}S&&function(c,h,d){c.push(h,1,d<<2|3)}(d,S,E)}function rN(c){for(var h=[],d=[],g=1,_=0,E=Gb(c=c.replace(_f,function(te,de,Ce){return g="select"===Ce?0:1,_=parseInt(de.substr(1),10),""})),S=0;S<E.length;){var F=E[S++].trim();1===g&&(F=F.replace(/\s*(?:=)?(\w+)\s*/,"$1")),F.length&&h.push(F);var G=Gb(E[S++]);h.length>d.length&&d.push(G)}return{type:g,mainBinding:_,cases:h,values:d}}function Gb(c){if(!c)return[];var E,h=0,d=[],g=[],_=/[{}]/g;for(_.lastIndex=0;E=_.exec(c);){var S=E.index;if("}"==E[0]){if(d.pop(),0==d.length){var F=c.substring(h,S);_f.test(F)?g.push(rN(F)):g.push(F),h=S+1}}else{if(0==d.length){var G=c.substring(h,S);g.push(G),h=S+1}d.push("{")}}var te=c.substring(h);return g.push(te),g}function iN(c,h,d,g,_,E,S,F){var G=[],te=[],de=[];h.cases.push(E),h.create.push(G),h.remove.push(te),h.update.push(de);var Ee=ue(ui()).getInertBodyElement(S),Oe=Mk(Ee)||Ee;return Oe?FD(c,h,d,g,G,te,de,Oe,_,F,0):0}function FD(c,h,d,g,_,E,S,F,G,te,de){for(var Ce=0,Ee=F.firstChild;Ee;){var Oe=Eo(c,d,1,null);switch(Ee.nodeType){case Node.ELEMENT_NODE:var Ye=Ee,mt=Ye.tagName.toLowerCase();if(os.hasOwnProperty(mt)){ym(_,Ny,mt,G,Oe),c.data[Oe]=mt;for(var Ut=Ye.attributes,Cn=0;Cn<Ut.length;Cn++){var qt=Ut.item(Cn),qn=qt.name.toLowerCase();qt.value.match(zb)?Ak.hasOwnProperty(qn)&&Fp(S,qt.value,Oe,qt.name,0,kv[qn]?Fn:bp[qn]?Ar:null):DM(_,Oe,qt)}Ce=FD(c,h,d,g,_,E,S,Ee,Oe,te,de+1)|Ce,CM(E,Oe,de)}break;case Node.TEXT_NODE:var Ai=Ee.textContent||"",Aa=Ai.match(zb);ym(_,null,Aa?"":Ai,G,Oe),CM(E,Oe,de),Aa&&(Ce=Fp(S,Ai,Oe,null,0,null)|Ce);break;case Node.COMMENT_NODE:var xs=wM.exec(Ee.textContent||"");if(xs){var ou=te[parseInt(xs[1],10)];ym(_,dm,"",G,Oe),Hb(c,d,g,G,ou,Oe),mm(E,Oe,de)}}Ee=Ee.nextSibling}return Ce}function CM(c,h,d){0===d&&c.push(h)}function mm(c,h,d){0===d&&(c.push(~h),c.push(h))}function ym(c,h,d,g,_){null!==h&&c.push(h),c.push(d,_,function(c,h,d){return 0|h<<17|d<<1}(0,g,_))}function DM(c,h,d){c.push(h<<1|1,d.name,d.value)}var aN=/\[(\ufffd.+?\ufffd?)\]/,LD=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,sN=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,ND=/{([A-Z0-9_]+)}/g,oN=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,ZD=/\/\*/,uN=/\d+\:(\d+)/;function BD(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c;if(aN.test(c)){var g={},_=[0];d=d.replace(LD,function(E,S,F){var G=S||F,te=g[G]||[];if(te.length||(G.split("|").forEach(function(Cn){var qt=Cn.match(uN),qn=qt?parseInt(qt[1],10):0,oi=ZD.test(Cn);te.push([qn,oi,Cn])}),g[G]=te),!te.length)throw new Error("i18n postprocess: unmatched placeholder - ".concat(G));for(var de=_[_.length-1],Ce=0,Ee=0;Ee<te.length;Ee++)if(te[Ee][0]===de){Ce=Ee;break}var Oe=(0,M.Z)(te[Ce],3),Ye=Oe[0],Ut=Oe[2];return Oe[1]?_.pop():de!==Ye&&_.push(Ye),te.splice(Ce,1),Ut})}return Object.keys(h).length&&(d=(d=(d=d.replace(sN,function(E,S,F,G,te,de){return h.hasOwnProperty(F)?"".concat(S).concat(h[F]).concat(de):E})).replace(ND,function(E,S){return h.hasOwnProperty(S)?h[S]:E})).replace(oN,function(E,S){if(h.hasOwnProperty(S)){var F=h[S];if(!F.length)throw new Error("i18n postprocess: unmatched ICU - ".concat(E," with key: ").concat(S));return F.shift()}return E})),d}function Bo(c,h){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,g=wi(),_=tn(),E=20+c,S=Bs(g.consts,h),F=Ju();g.firstCreatePass&&Gy(g,null===F?0:F.index,_,E,S,d);var G=g.data[E],te=F===_[6]?null:F,de=X1(g,te,_),Ce=F&&8&F.type?_[F.index]:null;vm(_,G.create,de,Ce),zl(!0)}function SM(){zl(!1)}function lN(c,h,d){Bo(c,h,d),SM()}function cN(c,h){var d=wi();!function(c,h,d){var _=_a().index,E=[];if(c.firstCreatePass&&null===c.data[h]){for(var S=0;S<d.length;S+=2){var F=d[S],G=d[S+1];if(""!==G){if(XL.test(G))throw new Error('ICU expressions are not supported in attributes. Message: "'.concat(G,'".'));Fp(E,G,_,F,tN(E),null)}}c.data[h]=E}}(d,c+20,Bs(d.consts,h))}function AM(c){return function(c){c&&(Rh|=1<<Math.min(pm,31)),pm++}(Ys(tn(),Yo(),c)),AM}function hN(c){!function(c,h,d){if(pm>0){var g=c.data[d];yf(c,h,Array.isArray(g)?g:g.update,Da()-pm-1,Rh)}Rh=0,pm=0}(wi(),tn(),c+20)}function fN(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return BD(c,h)}function dN(c,h,d){var g=wi();if(g.firstCreatePass){var _=Gr(c);jb(d,g.data,g.blueprint,_,!0),jb(h,g.data,g.blueprint,_,!1)}}function jb(c,h,d,g,_){if(c=nn(c),Array.isArray(c))for(var E=0;E<c.length;E++)jb(c[E],h,d,g,_);else{var S=wi(),F=tn(),G=hf(c)?c:nn(c.provide),te=Ax(c),de=_a(),Ce=1048575&de.providerIndexes,Ee=de.directiveStart,Oe=de.providerIndexes>>20;if(hf(c)||!c.multi){var Ye=new $o(te,_,em),mt=Yb(G,h,_?Ce:Ce+Oe,Ee);-1===mt?(mu(Qa(de,F),S,G),Wb(S,c,h.length),h.push(G),de.directiveStart++,de.directiveEnd++,_&&(de.providerIndexes+=1048576),d.push(Ye),F.push(Ye)):(d[mt]=Ye,F[mt]=Ye)}else{var Ut=Yb(G,h,Ce+Oe,Ee),Cn=Yb(G,h,Ce,Ce+Oe),qn=Cn>=0&&d[Cn];if(_&&!qn||!_&&!(Ut>=0&&d[Ut])){mu(Qa(de,F),S,G);var oi=function(c,h,d,g,_){var E=new $o(c,d,em);return E.multi=[],E.index=h,E.componentProviders=0,qb(E,_,g&&!d),E}(_?TM:UD,d.length,_,g,te);!_&&qn&&(d[Cn].providerFactory=oi),Wb(S,c,h.length,0),h.push(G),de.directiveStart++,de.directiveEnd++,_&&(de.providerIndexes+=1048576),d.push(oi),F.push(oi)}else Wb(S,c,Ut>-1?Ut:Cn,qb(d[_?Cn:Ut],te,!_&&g));!_&&g&&qn&&d[Cn].componentProviders++}}}function Wb(c,h,d,g){var _=hf(h);if(_||function(c){return!!c.useClass}(h)){var S=(h.useClass||h).prototype.ngOnDestroy;if(S){var F=c.destroyHooks||(c.destroyHooks=[]);if(!_&&h.multi){var G=F.indexOf(d);-1===G?F.push(d,[g,S]):F[G+1].push(g,S)}else F.push(d,S)}}}function qb(c,h,d){return d&&c.componentProviders++,c.multi.push(h)-1}function Yb(c,h,d,g){for(var _=d;_<g;_++)if(h[_]===c)return _;return-1}function UD(c,h,d,g){return VD(this.multi,[])}function TM(c,h,d,g){var E,_=this.multi;if(this.providerFactory){var S=this.providerFactory.componentProviders,F=Sl(d,d[1],this.providerFactory.index,g);VD(_,E=F.slice(0,S));for(var G=S;G<F.length;G++)E.push(F[G])}else VD(_,E=[]);return E}function VD(c,h){for(var d=0;d<c.length;d++)h.push((0,c[d])());return h}function Kb(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(d){d.providersResolver=function(g,_){return dN(g,_?_(c):c,h)}}}var xM=function c(){(0,xe.Z)(this,c)},MM=function c(){(0,xe.Z)(this,c)},pN=function(){function c(){(0,xe.Z)(this,c)}return(0,Ae.Z)(c,[{key:"resolveComponentFactory",value:function(d){throw function(c){var h=Error("No component factory found for ".concat(lt(c),". Did you add it to @NgModule.entryComponents?"));return h.ngComponent=c,h}(d)}}]),c}(),_m=function(){var c=function h(){(0,xe.Z)(this,h)};return c.NULL=new pN,c}();function bm(){}function wm(c,h){return new Rp(gi(c,h))}var mN=function(){return wm(_a(),tn())},Rp=function(){var c=function h(d){(0,xe.Z)(this,h),this.nativeElement=d};return c.__NG_ELEMENT_ID__=mN,c}();function Em(c){return c instanceof Rp?c.nativeElement:c}var bf=function c(){(0,xe.Z)(this,c)},GD=function(){var c=function h(){(0,xe.Z)(this,h)};return c.__NG_ELEMENT_ID__=function(){return jD()},c}(),jD=function(){var c=tn(),d=Cs(_a().index,c);return function(c){return c[11]}($a(d)?d:c)},qy=function(){var c=function h(){(0,xe.Z)(this,h)};return c.\u0275prov=Xr({token:c,providedIn:"root",factory:function(){return null}}),c}(),wf=function c(h){(0,xe.Z)(this,c),this.full=h,this.major=h.split(".")[0],this.minor=h.split(".")[1],this.patch=h.split(".").slice(2).join(".")},qD=new wf("12.2.8"),LM=function(){function c(){(0,xe.Z)(this,c)}return(0,Ae.Z)(c,[{key:"supports",value:function(d){return Si(d)}},{key:"create",value:function(d){return new KD(d)}}]),c}(),YD=function(h,d){return d},KD=function(){function c(h){(0,xe.Z)(this,c),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=h||YD}return(0,Ae.Z)(c,[{key:"forEachItem",value:function(d){var g;for(g=this._itHead;null!==g;g=g._next)d(g)}},{key:"forEachOperation",value:function(d){for(var g=this._itHead,_=this._removalsHead,E=0,S=null;g||_;){var F=!_||g&&g.currentIndex<Qb(_,E,S)?g:_,G=Qb(F,E,S),te=F.currentIndex;if(F===_)E--,_=_._nextRemoved;else if(g=g._next,null==F.previousIndex)E++;else{S||(S=[]);var de=G-E,Ce=te-E;if(de!=Ce){for(var Ee=0;Ee<de;Ee++){var Oe=Ee<S.length?S[Ee]:S[Ee]=0,Ye=Oe+Ee;Ce<=Ye&&Ye<de&&(S[Ee]=Oe+1)}S[F.previousIndex]=Ce-de}}G!==te&&d(F,G,te)}}},{key:"forEachPreviousItem",value:function(d){var g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)d(g)}},{key:"forEachAddedItem",value:function(d){var g;for(g=this._additionsHead;null!==g;g=g._nextAdded)d(g)}},{key:"forEachMovedItem",value:function(d){var g;for(g=this._movesHead;null!==g;g=g._nextMoved)d(g)}},{key:"forEachRemovedItem",value:function(d){var g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)d(g)}},{key:"forEachIdentityChange",value:function(d){var g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)d(g)}},{key:"diff",value:function(d){if(null==d&&(d=[]),!Si(d))throw new Error("Error trying to diff '".concat(lt(d),"'. Only arrays and iterables are allowed"));return this.check(d)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(d){var g=this;this._reset();var S,F,G,_=this._itHead,E=!1;if(Array.isArray(d)){this.length=d.length;for(var te=0;te<this.length;te++)G=this._trackByFn(te,F=d[te]),null!==_&&Object.is(_.trackById,G)?(E&&(_=this._verifyReinsertion(_,F,G,te)),Object.is(_.item,F)||this._addIdentityChange(_,F)):(_=this._mismatch(_,F,G,te),E=!0),_=_._next}else S=0,function(c,h){if(Array.isArray(c))for(var d=0;d<c.length;d++)h(c[d]);else for(var _,g=c[tu()]();!(_=g.next()).done;)h(_.value)}(d,function(de){G=g._trackByFn(S,de),null!==_&&Object.is(_.trackById,G)?(E&&(_=g._verifyReinsertion(_,de,G,S)),Object.is(_.item,de)||g._addIdentityChange(_,de)):(_=g._mismatch(_,de,G,S),E=!0),_=_._next,S++}),this.length=S;return this._truncate(_),this.collection=d,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(d,g,_,E){var S;return null===d?S=this._itTail:(S=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(_,null))?(Object.is(d.item,g)||this._addIdentityChange(d,g),this._reinsertAfter(d,S,E)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(_,E))?(Object.is(d.item,g)||this._addIdentityChange(d,g),this._moveAfter(d,S,E)):d=this._addAfter(new gN(g,_),S,E),d}},{key:"_verifyReinsertion",value:function(d,g,_,E){var S=null===this._unlinkedRecords?null:this._unlinkedRecords.get(_,null);return null!==S?d=this._reinsertAfter(S,d._prev,E):d.currentIndex!=E&&(d.currentIndex=E,this._addToMoves(d,E)),d}},{key:"_truncate",value:function(d){for(;null!==d;){var g=d._next;this._addToRemovals(this._unlink(d)),d=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(d,g,_){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);var E=d._prevRemoved,S=d._nextRemoved;return null===E?this._removalsHead=S:E._nextRemoved=S,null===S?this._removalsTail=E:S._prevRemoved=E,this._insertAfter(d,g,_),this._addToMoves(d,_),d}},{key:"_moveAfter",value:function(d,g,_){return this._unlink(d),this._insertAfter(d,g,_),this._addToMoves(d,_),d}},{key:"_addAfter",value:function(d,g,_){return this._insertAfter(d,g,_),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}},{key:"_insertAfter",value:function(d,g,_){var E=null===g?this._itHead:g._next;return d._next=E,d._prev=g,null===E?this._itTail=d:E._prev=d,null===g?this._itHead=d:g._next=d,null===this._linkedRecords&&(this._linkedRecords=new Yy),this._linkedRecords.put(d),d.currentIndex=_,d}},{key:"_remove",value:function(d){return this._addToRemovals(this._unlink(d))}},{key:"_unlink",value:function(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);var g=d._prev,_=d._next;return null===g?this._itHead=_:g._next=_,null===_?this._itTail=g:_._prev=g,d}},{key:"_addToMoves",value:function(d,g){return d.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}},{key:"_addToRemovals",value:function(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Yy),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}},{key:"_addIdentityChange",value:function(d,g){return d.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}]),c}(),gN=function c(h,d){(0,xe.Z)(this,c),this.item=h,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},$D=function(){function c(){(0,xe.Z)(this,c),this._head=null,this._tail=null}return(0,Ae.Z)(c,[{key:"add",value:function(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}},{key:"get",value:function(d,g){var _;for(_=this._head;null!==_;_=_._nextDup)if((null===g||g<=_.currentIndex)&&Object.is(_.trackById,d))return _;return null}},{key:"remove",value:function(d){var g=d._prevDup,_=d._nextDup;return null===g?this._head=_:g._nextDup=_,null===_?this._tail=g:_._prevDup=g,null===this._head}}]),c}(),Yy=function(){function c(){(0,xe.Z)(this,c),this.map=new Map}return(0,Ae.Z)(c,[{key:"put",value:function(d){var g=d.trackById,_=this.map.get(g);_||(_=new $D,this.map.set(g,_)),_.add(d)}},{key:"get",value:function(d,g){var E=this.map.get(d);return E?E.get(d,g):null}},{key:"remove",value:function(d){var g=d.trackById;return this.map.get(g).remove(d)&&this.map.delete(g),d}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),c}();function Qb(c,h,d){var g=c.previousIndex;if(null===g)return g;var _=0;return d&&g<d.length&&(_=d[g]),g+h+_}var XD=function(){function c(){(0,xe.Z)(this,c)}return(0,Ae.Z)(c,[{key:"supports",value:function(d){return d instanceof Map||Nu(d)}},{key:"create",value:function(){return new km}}]),c}(),km=function(){function c(){(0,xe.Z)(this,c),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return(0,Ae.Z)(c,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(d){var g;for(g=this._mapHead;null!==g;g=g._next)d(g)}},{key:"forEachPreviousItem",value:function(d){var g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)d(g)}},{key:"forEachChangedItem",value:function(d){var g;for(g=this._changesHead;null!==g;g=g._nextChanged)d(g)}},{key:"forEachAddedItem",value:function(d){var g;for(g=this._additionsHead;null!==g;g=g._nextAdded)d(g)}},{key:"forEachRemovedItem",value:function(d){var g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)d(g)}},{key:"diff",value:function(d){if(d){if(!(d instanceof Map||Nu(d)))throw new Error("Error trying to diff '".concat(lt(d),"'. Only maps and objects are allowed"))}else d=new Map;return this.check(d)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(d){var g=this;this._reset();var _=this._mapHead;if(this._appendAfter=null,this._forEach(d,function(S,F){if(_&&_.key===F)g._maybeAddToChanges(_,S),g._appendAfter=_,_=_._next;else{var G=g._getOrCreateRecordForKey(F,S);_=g._insertBeforeOrAppend(_,G)}}),_){_._prev&&(_._prev._next=null),this._removalsHead=_;for(var E=_;null!==E;E=E._nextRemoved)E===this._mapHead&&(this._mapHead=null),this._records.delete(E.key),E._nextRemoved=E._next,E.previousValue=E.currentValue,E.currentValue=null,E._prev=null,E._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(d,g){if(d){var _=d._prev;return g._next=d,g._prev=_,d._prev=g,_&&(_._next=g),d===this._mapHead&&(this._mapHead=g),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}},{key:"_getOrCreateRecordForKey",value:function(d,g){if(this._records.has(d)){var _=this._records.get(d);this._maybeAddToChanges(_,g);var E=_._prev,S=_._next;return E&&(E._next=S),S&&(S._prev=E),_._next=null,_._prev=null,_}var F=new QD(d);return this._records.set(d,F),F.currentValue=g,this._addToAdditions(F),F}},{key:"_reset",value:function(){if(this.isDirty){var d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(d,g){Object.is(g,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=g,this._addToChanges(d))}},{key:"_addToAdditions",value:function(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}},{key:"_addToChanges",value:function(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}},{key:"_forEach",value:function(d,g){d instanceof Map?d.forEach(g):Object.keys(d).forEach(function(_){return g(d[_],_)})}}]),c}(),QD=function c(h){(0,xe.Z)(this,c),this.key=h,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function NM(){return new Jb([new LM])}var Jb=function(){var c=function(){function h(d){(0,xe.Z)(this,h),this.factories=d}return(0,Ae.Z)(h,[{key:"find",value:function(g){var _=this.factories.find(function(E){return E.supports(g)});if(null!=_)return _;throw new Error("Cannot find a differ supporting object '".concat(g,"' of type '").concat(function(c){return c.name||typeof c}(g),"'"))}}],[{key:"create",value:function(g,_){if(null!=_){var E=_.factories.slice();g=g.concat(E)}return new h(g)}},{key:"extend",value:function(g){return{provide:h,useFactory:function(E){return h.create(g,E||NM())},deps:[[h,new Xl,new $l]]}}}]),h}();return c.\u0275prov=Xr({token:c,providedIn:"root",factory:NM}),c}();function JD(){return new ew([new XD])}var ew=function(){var c=function(){function h(d){(0,xe.Z)(this,h),this.factories=d}return(0,Ae.Z)(h,[{key:"find",value:function(g){var _=this.factories.find(function(E){return E.supports(g)});if(_)return _;throw new Error("Cannot find a differ supporting object '".concat(g,"'"))}}],[{key:"create",value:function(g,_){if(_){var E=_.factories.slice();g=g.concat(E)}return new h(g)}},{key:"extend",value:function(g){return{provide:h,useFactory:function(E){return h.create(g,E||JD())},deps:[[h,new Xl,new $l]]}}}]),h}();return c.\u0275prov=Xr({token:c,providedIn:"root",factory:JD}),c}();function Cm(c,h,d,g){for(var _=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==d;){var E=h[d.index];if(null!==E&&g.push(Zr(E)),Ns(E))for(var S=10;S<E.length;S++){var F=E[S],G=F[1].firstChild;null!==G&&Cm(F[1],F,G,g)}var te=d.type;if(8&te)Cm(c,h,d.child,g);else if(32&te)for(var de=rd(d,h),Ce=void 0;Ce=de();)g.push(Ce);else if(16&te){var Ee=Jg(h,d);if(Array.isArray(Ee))g.push.apply(g,(0,Te.Z)(Ee));else{var Oe=Za(h[16]);Cm(Oe[1],Oe,Ee,g,!0)}}d=_?d.projectionNext:d.next}return g}var Ky=function(){function c(h,d){(0,xe.Z)(this,c),this._lView=h,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}return(0,Ae.Z)(c,[{key:"rootNodes",get:function(){var d=this._lView,g=d[1];return Cm(g,d,g.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(d){this._lView[8]=d}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var d=this._lView[3];if(Ns(d)){var g=d[8],_=g?g.indexOf(this):-1;_>-1&&(Qr(d,_),Nc(g,_))}this._attachedToViewContainer=!1}Kg(this._lView[1],this._lView)}},{key:"onDestroy",value:function(d){rC(this._lView[1],this._lView,null,d)}},{key:"markForCheck",value:function(){lC(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){cb(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(c,h,d){Ei(!0);try{cb(c,h,d)}finally{Ei(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){this._appRef=null,function(c,h){Lo(c,h,h[11],2,null,null)}(this._lView[1],this._lView)}},{key:"attachToAppRef",value:function(d){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=d}}]),c}(),eS=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g){var _;return(0,xe.Z)(this,d),(_=h.call(this,g))._view=g,_}return(0,Ae.Z)(d,[{key:"detectChanges",value:function(){cC(this._view)}},{key:"checkNoChanges",value:function(){!function(c){Ei(!0);try{cC(c)}finally{Ei(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),d}(Ky),_N=function(c){return function(c,h,d){if(Nr(c)&&!d){var g=Cs(c.index,h);return new Ky(g,g)}return 47&c.type?new Ky(h[16],h):null}(_a(),tn(),16==(16&c))},tS=function(){var c=function h(){(0,xe.Z)(this,h)};return c.__NG_ELEMENT_ID__=_N,c}(),Dm=[new XD],bN=new Jb([new LM]),Sm=new ew(Dm),tw=function(){return Am(_a(),tn())},$y=function(){var c=function h(){(0,xe.Z)(this,h)};return c.__NG_ELEMENT_ID__=tw,c}(),iS=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g,_,E){var S;return(0,xe.Z)(this,d),(S=h.call(this))._declarationLView=g,S._declarationTContainer=_,S.elementRef=E,S}return(0,Ae.Z)(d,[{key:"createEmbeddedView",value:function(_){var E=this._declarationTContainer.tViews,S=Iv(this._declarationLView,E,_,16,null,E.declTNode,null,null,null,null);S[17]=this._declarationLView[this._declarationTContainer.index];var G=this._declarationLView[19];return null!==G&&(S[19]=G.createEmbeddedView(E)),Pv(E,S,_),new Ky(S)}}]),d}($y);function Am(c,h){return 4&c.type?new iS(h,c,wm(c,h)):null}var Sd=function c(){(0,xe.Z)(this,c)},VM=function c(){(0,xe.Z)(this,c)},sS=function(){return lS(_a(),tn())},nw=function(){var c=function h(){(0,xe.Z)(this,h)};return c.__NG_ELEMENT_ID__=sS,c}(),oS=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g,_,E){var S;return(0,xe.Z)(this,d),(S=h.call(this))._lContainer=g,S._hostTNode=_,S._hostLView=E,S}return(0,Ae.Z)(d,[{key:"element",get:function(){return wm(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new ph(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var _=eo(this._hostTNode,this._hostLView);if(le(_)){var E=Mt(_,this._hostLView),S=Ie(_);return new ph(E[1].data[S+8],E)}return new ph(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(_){var E=uS(this._lContainer);return null!==E&&E[_]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(_,E,S){var F=_.createEmbeddedView(E||{});return this.insert(F,S),F}},{key:"createComponent",value:function(_,E,S,F,G){var te=S||this.parentInjector;if(!G&&null==_.ngModule&&te){var de=te.get(Sd,null);de&&(G=de)}var Ce=_.create(te,F,void 0,G);return this.insert(Ce.hostView,E),Ce}},{key:"insert",value:function(_,E){var S=_._lView,F=S[1];if(function(c){return Ns(c[3])}(S)){var G=this.indexOf(_);if(-1!==G)this.detach(G);else{var te=S[3],de=new oS(te,te[6],te[3]);de.detach(de.indexOf(_))}}var Ce=this._adjustIndex(E),Ee=this._lContainer;!function(c,h,d,g){var _=10+g,E=d.length;g>0&&(d[_-1][4]=h),g<E-10?(h[4]=d[_],jf(d,10+g,h)):(d.push(h),h[4]=null),h[3]=d;var S=h[17];null!==S&&d!==S&&function(c,h){var d=c[9];h[16]!==h[3][3][16]&&(c[2]=!0),null===d?c[9]=[h]:d.push(h)}(S,h);var F=h[19];null!==F&&F.insertView(c),h[2]|=128}(F,S,Ee,Ce);var Oe=U0(Ce,Ee),Ye=S[11],mt=wo(Ye,Ee[7]);return null!==mt&&function(c,h,d,g,_,E){g[0]=_,g[6]=h,Lo(c,g,d,1,_,E)}(F,Ee[6],Ye,S,mt,Oe),_.attachToViewContainerRef(),jf(rw(Ee),Ce,_),_}},{key:"move",value:function(_,E){return this.insert(_,E)}},{key:"indexOf",value:function(_){var E=uS(this._lContainer);return null!==E?E.indexOf(_):-1}},{key:"remove",value:function(_){var E=this._adjustIndex(_,-1),S=Qr(this._lContainer,E);S&&(Nc(rw(this._lContainer),E),Kg(S[1],S))}},{key:"detach",value:function(_){var E=this._adjustIndex(_,-1),S=Qr(this._lContainer,E);return S&&null!=Nc(rw(this._lContainer),E)?new Ky(S):null}},{key:"_adjustIndex",value:function(_){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==_?this.length+E:_}}]),d}(nw);function uS(c){return c[8]}function rw(c){return c[8]||(c[8]=[])}function lS(c,h){var d,g=h[c.index];if(Ns(g))d=g;else{var _;if(8&c.type)_=Zr(g);else{var E=h[11];_=E.createComment("");var S=gi(c,h);kp(E,wo(E,S),_,function(c,h){return Bn(c)?c.nextSibling(h):h.nextSibling}(E,S),!1)}h[c.index]=d=Ex(g,h,_,c),lb(h,d)}return new oS(d,c,h)}var s_={},pI=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g){var _;return(0,xe.Z)(this,d),(_=h.call(this)).ngModule=g,_}return(0,Ae.Z)(d,[{key:"resolveComponentFactory",value:function(_){var E=Yr(_);return new mI(E,this.ngModule)}}]),d}(_m);function vI(c){var h=[];for(var d in c)c.hasOwnProperty(d)&&h.push({propName:c[d],templateName:d});return h}var oz=new ps("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return W1}}),mI=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g,_){var E;return(0,xe.Z)(this,d),(E=h.call(this)).componentDef=g,E.ngModule=_,E.componentType=g.type,E.selector=function(c){return c.map(Wk).join(",")}(g.selectors),E.ngContentSelectors=g.ngContentSelectors?g.ngContentSelectors:[],E.isBoundToModule=!!_,E}return(0,Ae.Z)(d,[{key:"inputs",get:function(){return vI(this.componentDef.inputs)}},{key:"outputs",get:function(){return vI(this.componentDef.outputs)}},{key:"create",value:function(_,E,S,F){var qt,qn,G=(F=F||this.ngModule)?function(c,h){return{get:function(g,_,E){var S=c.get(g,s_,E);return S!==s_||_===s_?S:h.get(g,_,E)}}}(_,F.injector):_,te=G.get(bf,la),de=G.get(qy,null),Ce=te.createRenderer(null,this.componentDef),Ee=this.componentDef.selectors[0][0]||"div",Oe=S?function(c,h,d){if(Bn(c))return c.selectRootElement(h,d===wa.ShadowDom);var _="string"==typeof h?c.querySelector(h):h;return _.textContent="",_}(Ce,S,this.componentDef.encapsulation):ad(te.createRenderer(null,this.componentDef),Ee,function(c){var h=c.toLowerCase();return"svg"===h?hr:"math"===h?Oi:null}(Ee)),Ye=this.componentDef.onPush?576:528,mt=function(c,h){return{components:[],scheduler:c||W1,clean:Cx,playerHandler:h||null,flags:0}}(),Ut=Rv(0,null,null,1,0,null,null,null,null,null),Cn=Iv(null,Ut,mt,Ye,null,null,te,Ce,de,G);Ko(Cn);try{var oi=function(c,h,d,g,_,E){var S=d[1];d[20]=c;var G=Dh(S,20,2,"#host",null),te=G.mergedAttrs=h.hostAttrs;null!==te&&(py(G,te,!0),null!==c&&(A(_,c,te),null!==G.classes&&V0(_,c,G.classes),null!==G.styles&&Uk(_,c,G.styles)));var de=g.createRenderer(c,h),Ce=Iv(d,Fv(h),null,h.onPush?64:16,d[20],G,g,de,E||null,null);return S.firstCreatePass&&(mu(Qa(G,d),S,h.type),uC(S,G),Ah(G,d.length,1)),lb(d,Ce),d[20]=Ce}(Oe,this.componentDef,Cn,te,Ce);if(Oe)if(S)A(Ce,Oe,["ng-version",qD.full]);else{var Ai=function(c){for(var h=[],d=[],g=1,_=2;g<c.length;){var E=c[g];if("string"==typeof E)2===_?""!==E&&h.push(E,c[++g]):8===_&&d.push(E);else{if(!Uc(_))break;_=E}g++}return{attrs:h,classes:d}}(this.componentDef.selectors[0]),Aa=Ai.attrs,xs=Ai.classes;Aa&&A(Ce,Oe,Aa),xs&&xs.length>0&&V0(Ce,Oe,xs.join(" "))}if(qn=Io(Ut,20),void 0!==E)for(var Vo=qn.projection=[],ou=0;ou<this.ngContentSelectors.length;ou++){var Bh=E[ou];Vo.push(null!=Bh?Array.from(Bh):null)}qt=function(c,h,d,g,_){var E=d[1],S=function(c,h,d){var g=_a();c.firstCreatePass&&(d.providersResolver&&d.providersResolver(d),cy(c,g,h,Eo(c,h,1,null),d));var E=Sl(h,c,g.directiveStart,g);Ou(E,h);var S=gi(g,h);return S&&Ou(S,h),E}(E,d,h);if(g.components.push(S),c[8]=S,_&&_.forEach(function(de){return de(S,h)}),h.contentQueries){var F=_a();h.contentQueries(1,S,F.directiveStart)}var G=_a();return!E.firstCreatePass||null===h.hostBindings&&null===h.hostAttrs||($t(G.index),rb(d[1],G,0,G.directiveStart,G.directiveEnd,h),ib(h,S)),S}(oi,this.componentDef,Cn,mt,[Sr]),Pv(Ut,Cn,null)}finally{Pe()}return new uz(this.componentType,qt,wm(qn,Cn),Cn,qn)}}]),d}(MM),uz=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g,_,E,S,F){var G;return(0,xe.Z)(this,d),(G=h.call(this)).location=E,G._rootLView=S,G._tNode=F,G.instance=_,G.hostView=G.changeDetectorRef=new eS(S),G.componentType=g,G}return(0,Ae.Z)(d,[{key:"injector",get:function(){return new ph(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(_){this.hostView.onDestroy(_)}}]),d}(xM);function Md(c,h,d,g){return Wi(function(){var _=c;if(null!==h)if(_.hasOwnProperty("decorators")&&void 0!==_.decorators){var E;(E=_.decorators).push.apply(E,(0,Te.Z)(h))}else _.decorators=h;null!==d&&(_.ctorParameters=d),null!==g&&(_.propDecorators=_.hasOwnProperty("propDecorators")&&void 0!==_.propDecorators?Object.assign(Object.assign({},_.propDecorators),g):g)})}var Dc=new Map;var _I=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g,_){var E;(0,xe.Z)(this,d),(E=h.call(this))._parent=_,E._bootstrapComponents=[],E.injector=(0,R.Z)(E),E.destroyCbs=[],E.componentFactoryResolver=new pI((0,R.Z)(E));var S=Pa(g),F=function(c){return c[Ga]||null}(g);return F&&wd(F),E._bootstrapComponents=Jl(S.bootstrap),E._r3Injector=Sx(g,_,[{provide:Sd,useValue:(0,R.Z)(E)},{provide:_m,useValue:E.componentFactoryResolver}],lt(g)),E._r3Injector._resolveInjectorDefTypes(),E.instance=E.get(g),E}return(0,Ae.Z)(d,[{key:"get",value:function(_){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Co.THROW_IF_NOT_FOUND,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jn.Default;return _===Co||_===Sd||_===db?this:this._r3Injector.get(_,E,S)}},{key:"destroy",value:function(){var _=this._r3Injector;!_.destroyed&&_.destroy(),this.destroyCbs.forEach(function(E){return E()}),this.destroyCbs=null}},{key:"onDestroy",value:function(_){this.destroyCbs.push(_)}}]),d}(Sd),PS=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(g){var _;return(0,xe.Z)(this,d),(_=h.call(this)).moduleType=g,null!==Pa(g)&&function(c){var h=new Set;!function d(g){var _=Pa(g,!0),E=_.id;null!==E&&(function(c,h,d){if(h&&h!==d)throw new Error("Duplicate module registered for ".concat(c," - ").concat(lt(h)," vs ").concat(lt(h.name)))}(E,Dc.get(E),g),Dc.set(E,g));var te,F=Jl(_.imports),G=(0,Ve.Z)(F);try{for(G.s();!(te=G.n()).done;){var de=te.value;h.has(de)||(h.add(de),d(de))}}catch(Ce){G.e(Ce)}finally{G.f()}}(c)}(g),_}return(0,Ae.Z)(d,[{key:"create",value:function(_){return new _I(this.moduleType,_)}}]),d}(VM);function Id(c,h,d){var g=ds()+c,_=tn();return _[g]===li?$r(_,g,d?h.call(d):h()):Gv(_,g)}function gw(c,h,d,g){return Pd(tn(),ds(),c,h,d,g)}function FS(c,h,d,g,_){return LS(tn(),ds(),c,h,d,g,_)}function bI(c,h,d,g,_,E){return NS(tn(),ds(),c,h,d,g,_,E)}function YN(c,h,d,g,_,E,S){return yw(tn(),ds(),c,h,d,g,_,E,S)}function KN(c,h,d,g,_,E,S,F){var G=ds()+c,te=tn(),de=yi(te,G,d,g,_,E);return Ys(te,G+4,S)||de?$r(te,G+5,F?h.call(F,d,g,_,E,S):h(d,g,_,E,S)):Gv(te,G+5)}function $N(c,h,d,g,_,E,S,F,G){var te=ds()+c,de=tn(),Ce=yi(de,te,d,g,_,E);return hd(de,te+4,S,F)||Ce?$r(de,te+6,G?h.call(G,d,g,_,E,S,F):h(d,g,_,E,S,F)):Gv(de,te+6)}function XN(c,h,d,g,_,E,S,F,G,te){var de=ds()+c,Ce=tn(),Ee=yi(Ce,de,d,g,_,E);return by(Ce,de+4,S,F,G)||Ee?$r(Ce,de+7,te?h.call(te,d,g,_,E,S,F,G):h(d,g,_,E,S,F,G)):Gv(Ce,de+7)}function RS(c,h,d,g,_,E,S,F,G,te,de){var Ce=ds()+c,Ee=tn(),Oe=yi(Ee,Ce,d,g,_,E);return yi(Ee,Ce+4,S,F,G,te)||Oe?$r(Ee,Ce+8,de?h.call(de,d,g,_,E,S,F,G,te):h(d,g,_,E,S,F,G,te)):Gv(Ee,Ce+8)}function OS(c,h,d,g){return _w(tn(),ds(),c,h,d,g)}function Fm(c,h){var d=c[h];return d===li?void 0:d}function Pd(c,h,d,g,_,E){var S=h+d;return Ys(c,S,_)?$r(c,S+1,E?g.call(E,_):g(_)):Fm(c,S+1)}function LS(c,h,d,g,_,E,S){var F=h+d;return hd(c,F,_,E)?$r(c,F+2,S?g.call(S,_,E):g(_,E)):Fm(c,F+2)}function NS(c,h,d,g,_,E,S,F){var G=h+d;return by(c,G,_,E,S)?$r(c,G+3,F?g.call(F,_,E,S):g(_,E,S)):Fm(c,G+3)}function yw(c,h,d,g,_,E,S,F,G){var te=h+d;return yi(c,te,_,E,S,F)?$r(c,te+4,G?g.call(G,_,E,S,F):g(_,E,S,F)):Fm(c,te+4)}function _w(c,h,d,g,_,E){for(var S=h+d,F=!1,G=0;G<_.length;G++)Ys(c,S++,_[G])&&(F=!0);return F?$r(c,S,g.apply(E,_)):Fm(c,S)}function wI(c,h){var g,d=wi(),_=c+20;d.firstCreatePass?(g=function(c,h){if(h)for(var d=h.length-1;d>=0;d--){var g=h[d];if(c===g.name)return g}throw new Rt("302","The pipe '".concat(c,"' could not be found!"))}(h,d.pipeRegistry),d.data[_]=g,g.onDestroy&&(d.destroyHooks||(d.destroyHooks=[])).push(_,g.onDestroy)):g=d.data[_];var E=g.factory||(g.factory=he(g.type)),S=ii(em);try{var F=wn(!1),G=E();return wn(F),function(c,h,d,g){d>=c.data.length&&(c.data[d]=null,c.blueprint[d]=null),h[d]=g}(d,tn(),_,G),G}finally{ii(S)}}function o_(c,h,d){var g=c+20,_=tn(),E=Ca(_,g);return oc(_,Xc(_,g)?Pd(_,ds(),h,E.transform,d,E):E.transform(d))}function BS(c,h,d,g){var _=c+20,E=tn(),S=Ca(E,_);return oc(E,Xc(E,_)?LS(E,ds(),h,S.transform,d,g,S):S.transform(d,g))}function u_(c,h,d,g,_){var E=c+20,S=tn(),F=Ca(S,E);return oc(S,Xc(S,E)?NS(S,ds(),h,F.transform,d,g,_,F):F.transform(d,g,_))}function QN(c,h,d,g,_,E){var S=c+20,F=tn(),G=Ca(F,S);return oc(F,Xc(F,S)?yw(F,ds(),h,G.transform,d,g,_,E,G):G.transform(d,g,_,E))}function bw(c,h,d){var g=c+20,_=tn(),E=Ca(_,g);return oc(_,Xc(_,g)?_w(_,ds(),h,E.transform,d,E):E.transform.apply(E,d))}function Xc(c,h){return c[1].data[h].pure}function oc(c,h){return cd.isWrapped(h)&&(h=cd.unwrap(h),c[Da()]=li),h}function Oh(c){return function(h){setTimeout(c,void 0,h)}}var Lh=function(c){(0,ce.Z)(d,c);var h=(0,Be.Z)(d);function d(){var g,_=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,xe.Z)(this,d),(g=h.call(this)).__isAsync=_,g}return(0,Ae.Z)(d,[{key:"emit",value:function(_){(0,Se.Z)((0,ye.Z)(d.prototype),"next",this).call(this,_)}},{key:"subscribe",value:function(_,E,S){var F,G,te,de=_,Ce=E||function(){return null},Ee=S;if(_&&"object"==typeof _){var Oe=_;de=null===(F=Oe.next)||void 0===F?void 0:F.bind(Oe),Ce=null===(G=Oe.error)||void 0===G?void 0:G.bind(Oe),Ee=null===(te=Oe.complete)||void 0===te?void 0:te.bind(Oe)}this.__isAsync&&(Ce=Oh(Ce),de&&(de=Oh(de)),Ee&&(Ee=Oh(Ee)));var Ye=(0,Se.Z)((0,ye.Z)(d.prototype),"subscribe",this).call(this,{next:de,error:Ce,complete:Ee});return _ instanceof be.w&&_.add(Ye),Ye}}]),d}(Ne.xQ);function EI(){return this._results[tu()]()}var ww=function(){function c(){var h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,xe.Z)(this,c),this._emitDistinctChangesOnly=h,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var d=tu(),g=c.prototype;g[d]||(g[d]=EI)}return(0,Ae.Z)(c,[{key:"changes",get:function(){return this._changes||(this._changes=new Lh)}},{key:"get",value:function(d){return this._results[d]}},{key:"map",value:function(d){return this._results.map(d)}},{key:"filter",value:function(d){return this._results.filter(d)}},{key:"find",value:function(d){return this._results.find(d)}},{key:"reduce",value:function(d,g){return this._results.reduce(d,g)}},{key:"forEach",value:function(d){this._results.forEach(d)}},{key:"some",value:function(d){return this._results.some(d)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(d,g){var _=this;_.dirty=!1;var E=gu(d);(this._changesDetected=!function(c,h,d){if(c.length!==h.length)return!1;for(var g=0;g<c.length;g++){var _=c[g],E=h[g];if(d&&(_=d(_),E=d(E)),E!==_)return!1}return!0}(_._results,E,g))&&(_._results=E,_.length=E.length,_.last=E[this.length-1],_.first=E[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),c}();Symbol;var JN=function(){function c(h){(0,xe.Z)(this,c),this.queryList=h,this.matches=null}return(0,Ae.Z)(c,[{key:"clone",value:function(){return new c(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),c}(),e2=function(){function c(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,xe.Z)(this,c),this.queries=h}return(0,Ae.Z)(c,[{key:"createEmbeddedView",value:function(d){var g=d.queries;if(null!==g){for(var _=null!==d.contentQueries?d.contentQueries[0]:g.length,E=[],S=0;S<_;S++){var F=g.getByIndex(S);E.push(this.queries[F.indexInDeclarationView].clone())}return new c(E)}return null}},{key:"insertView",value:function(d){this.dirtyQueriesWithMatches(d)}},{key:"detachView",value:function(d){this.dirtyQueriesWithMatches(d)}},{key:"dirtyQueriesWithMatches",value:function(d){for(var g=0;g<this.queries.length;g++)null!==jS(d,g).matches&&this.queries[g].setDirty()}}]),c}(),kI=function c(h,d){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,xe.Z)(this,c),this.predicate=h,this.flags=d,this.read=g},CI=function(){function c(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,xe.Z)(this,c),this.queries=h}return(0,Ae.Z)(c,[{key:"elementStart",value:function(d,g){for(var _=0;_<this.queries.length;_++)this.queries[_].elementStart(d,g)}},{key:"elementEnd",value:function(d){for(var g=0;g<this.queries.length;g++)this.queries[g].elementEnd(d)}},{key:"embeddedTView",value:function(d){for(var g=null,_=0;_<this.length;_++){var E=null!==g?g.length:0,S=this.getByIndex(_).embeddedTView(d,E);S&&(S.indexInDeclarationView=_,null!==g?g.push(S):g=[S])}return null!==g?new c(g):null}},{key:"template",value:function(d,g){for(var _=0;_<this.queries.length;_++)this.queries[_].template(d,g)}},{key:"getByIndex",value:function(d){return this.queries[d]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(d){this.queries.push(d)}}]),c}(),t2=function(){function c(h){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,xe.Z)(this,c),this.metadata=h,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}return(0,Ae.Z)(c,[{key:"elementStart",value:function(d,g){this.isApplyingToNode(g)&&this.matchTNode(d,g)}},{key:"elementEnd",value:function(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(d,g){this.elementStart(d,g)}},{key:"embeddedTView",value:function(d,g){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,g),new c(this.metadata)):null}},{key:"isApplyingToNode",value:function(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var g=this._declarationNodeIndex,_=d.parent;null!==_&&8&_.type&&_.index!==g;)_=_.parent;return g===(null!==_?_.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(d,g){var _=this.metadata.predicate;if(Array.isArray(_))for(var E=0;E<_.length;E++){var S=_[E];this.matchTNodeWithReadOption(d,g,n2(g,S)),this.matchTNodeWithReadOption(d,g,nf(g,d,S,!1,!1))}else _===$y?4&g.type&&this.matchTNodeWithReadOption(d,g,-1):this.matchTNodeWithReadOption(d,g,nf(g,d,_,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(d,g,_){if(null!==_){var E=this.metadata.read;if(null!==E)if(E===Rp||E===nw||E===$y&&4&g.type)this.addMatch(g.index,-2);else{var S=nf(g,d,E,!1,!1);null!==S&&this.addMatch(g.index,S)}else this.addMatch(g.index,_)}}},{key:"addMatch",value:function(d,g){null===this.matches?this.matches=[d,g]:this.matches.push(d,g)}}]),c}();function n2(c,h){var d=c.localNames;if(null!==d)for(var g=0;g<d.length;g+=2)if(d[g]===h)return d[g+1];return null}function r2(c,h,d,g){return-1===d?function(c,h){return 11&c.type?wm(c,h):4&c.type?Am(c,h):null}(h,c):-2===d?function(c,h,d){return d===Rp?wm(h,c):d===$y?Am(h,c):d===nw?lS(h,c):void 0}(c,h,g):Sl(c,c[1],d,h)}function US(c,h,d,g){var _=h[19].queries[g];if(null===_.matches){for(var E=c.data,S=d.matches,F=[],G=0;G<S.length;G+=2){var te=S[G];F.push(te<0?null:r2(h,E[te],S[G+1],d.metadata.read))}_.matches=F}return _.matches}function VS(c,h,d,g){var _=c.queries.getByIndex(d),E=_.matches;if(null!==E)for(var S=US(c,h,_,d),F=0;F<E.length;F+=2){var G=E[F];if(G>0)g.push(S[F/2]);else{for(var te=E[F+1],de=h[-G],Ce=10;Ce<de.length;Ce++){var Ee=de[Ce];Ee[17]===Ee[3]&&VS(Ee[1],Ee,te,g)}if(null!==de[9])for(var Oe=de[9],Ye=0;Ye<Oe.length;Ye++){var mt=Oe[Ye];VS(mt[1],mt,te,g)}}}return g}function SI(c){var h=tn(),d=wi(),g=hh();Cl(g+1);var _=jS(d,g);if(c.dirty&&Mu(h)===(2==(2&_.metadata.flags))){if(null===_.matches)c.reset([]);else{var E=_.crossesNgTemplate?VS(d,h,g,[]):US(d,h,_,g);c.reset(E,Em),c.notifyOnChanges()}return!0}return!1}function zS(c,h,d){var g=wi();g.firstCreatePass&&(h_(g,new kI(c,h,d),-1),2==(2&h)&&(g.staticViewQueries=!0)),Ew(g,tn(),h)}function HS(c,h,d,g){var _=wi();if(_.firstCreatePass){var E=_a();h_(_,new kI(h,d,g),E.index),function(c,h){var d=c.contentQueries||(c.contentQueries=[]);h!==(d.length?d[d.length-1]:-1)&&d.push(c.queries.length-1,h)}(_,c),2==(2&d)&&(_.staticContentQueries=!0)}Ew(_,tn(),d)}function GS(){return c=tn(),h=hh(),c[19].queries[h].queryList;var c,h}function Ew(c,h,d){var g=new ww(4==(4&d));rC(c,h,g,g.destroy),null===h[19]&&(h[19]=new e2),h[19].queries.push(new JN(g))}function h_(c,h,d){null===c.queries&&(c.queries=new CI),c.queries.track(new t2(h,d))}function jS(c,h){return c.queries.getByIndex(h)}function Rd(c,h){return Am(c,h)}var oo=function(){return{"\u0275\u0275attribute":DC,"\u0275\u0275attributeInterpolate1":SC,"\u0275\u0275attributeInterpolate2":qv,"\u0275\u0275attributeInterpolate3":dd,"\u0275\u0275attributeInterpolate4":wy,"\u0275\u0275attributeInterpolate5":AC,"\u0275\u0275attributeInterpolate6":Fr,"\u0275\u0275attributeInterpolate7":pd,"\u0275\u0275attributeInterpolate8":Gc,"\u0275\u0275attributeInterpolateV":Yv,"\u0275\u0275defineComponent":$e,"\u0275\u0275defineDirective":Mi,"\u0275\u0275defineInjectable":Xr,"\u0275\u0275defineInjector":Qs,"\u0275\u0275defineNgModule":Tn,"\u0275\u0275definePipe":Os,"\u0275\u0275directiveInject":em,"\u0275\u0275getInheritedFactory":op,"\u0275\u0275inject":vs,"\u0275\u0275injectAttribute":pv,"\u0275\u0275invalidFactory":Ab,"\u0275\u0275invalidFactoryDep":bv,"\u0275\u0275templateRefExtractor":Rd,"\u0275\u0275NgOnChangesFeature":De,"\u0275\u0275ProvidersFeature":Kb,"\u0275\u0275CopyDefinitionFeature":wL,"\u0275\u0275InheritDefinitionFeature":Un,"\u0275\u0275nextContext":KC,"\u0275\u0275namespaceHTML":fr,"\u0275\u0275namespaceMathML":zn,"\u0275\u0275namespaceSVG":xn,"\u0275\u0275enableBindings":bl,"\u0275\u0275disableBindings":wl,"\u0275\u0275elementStart":vd,"\u0275\u0275elementEnd":pf,"\u0275\u0275element":qC,"\u0275\u0275elementContainerStart":md,"\u0275\u0275elementContainerEnd":Tb,"\u0275\u0275elementContainer":Qx,"\u0275\u0275pureFunction0":Id,"\u0275\u0275pureFunction1":gw,"\u0275\u0275pureFunction2":FS,"\u0275\u0275pureFunction3":bI,"\u0275\u0275pureFunction4":YN,"\u0275\u0275pureFunction5":KN,"\u0275\u0275pureFunction6":$N,"\u0275\u0275pureFunction7":XN,"\u0275\u0275pureFunction8":RS,"\u0275\u0275pureFunctionV":OS,"\u0275\u0275getCurrentView":nm,"\u0275\u0275restoreView":qo,"\u0275\u0275listener":rm,"\u0275\u0275projection":$C,"\u0275\u0275syntheticHostProperty":En,"\u0275\u0275syntheticHostListener":im,"\u0275\u0275pipeBind1":o_,"\u0275\u0275pipeBind2":BS,"\u0275\u0275pipeBind3":u_,"\u0275\u0275pipeBind4":QN,"\u0275\u0275pipeBindV":bw,"\u0275\u0275projectionDef":vf,"\u0275\u0275hostProperty":Nb,"\u0275\u0275property":jC,"\u0275\u0275propertyInterpolate":Ib,"\u0275\u0275propertyInterpolate1":Ty,"\u0275\u0275propertyInterpolate2":am,"\u0275\u0275propertyInterpolate3":Pb,"\u0275\u0275propertyInterpolate4":tM,"\u0275\u0275propertyInterpolate5":so,"\u0275\u0275propertyInterpolate6":$i,"\u0275\u0275propertyInterpolate7":XC,"\u0275\u0275propertyInterpolate8":QC,"\u0275\u0275propertyInterpolateV":Cu,"\u0275\u0275pipe":wI,"\u0275\u0275queryRefresh":SI,"\u0275\u0275viewQuery":zS,"\u0275\u0275loadQuery":GS,"\u0275\u0275contentQuery":HS,"\u0275\u0275reference":Eb,"\u0275\u0275classMap":LL,"\u0275\u0275classMapInterpolate1":om,"\u0275\u0275classMapInterpolate2":NL,"\u0275\u0275classMapInterpolate3":ZL,"\u0275\u0275classMapInterpolate4":BL,"\u0275\u0275classMapInterpolate5":dM,"\u0275\u0275classMapInterpolate6":Wc,"\u0275\u0275classMapInterpolate7":UL,"\u0275\u0275classMapInterpolate8":pM,"\u0275\u0275classMapInterpolateV":gf,"\u0275\u0275styleMap":jc,"\u0275\u0275styleMapInterpolate1":VL,"\u0275\u0275styleMapInterpolate2":qc,"\u0275\u0275styleMapInterpolate3":um,"\u0275\u0275styleMapInterpolate4":gs,"\u0275\u0275styleMapInterpolate5":ic,"\u0275\u0275styleMapInterpolate6":zL,"\u0275\u0275styleMapInterpolate7":HL,"\u0275\u0275styleMapInterpolate8":Ks,"\u0275\u0275styleMapInterpolateV":yd,"\u0275\u0275styleProp":sD,"\u0275\u0275stylePropInterpolate1":sl,"\u0275\u0275stylePropInterpolate2":iu,"\u0275\u0275stylePropInterpolate3":Cc,"\u0275\u0275stylePropInterpolate4":lm,"\u0275\u0275stylePropInterpolate5":_d,"\u0275\u0275stylePropInterpolate6":Ry,"\u0275\u0275stylePropInterpolate7":Oy,"\u0275\u0275stylePropInterpolate8":vM,"\u0275\u0275stylePropInterpolateV":vD,"\u0275\u0275classProp":Fb,"\u0275\u0275advance":wu,"\u0275\u0275template":TC,"\u0275\u0275text":lM,"\u0275\u0275textInterpolate":Lb,"\u0275\u0275textInterpolate1":Fy,"\u0275\u0275textInterpolate2":hD,"\u0275\u0275textInterpolate3":cM,"\u0275\u0275textInterpolate4":fD,"\u0275\u0275textInterpolate5":dD,"\u0275\u0275textInterpolate6":pD,"\u0275\u0275textInterpolate7":hM,"\u0275\u0275textInterpolate8":fM,"\u0275\u0275textInterpolateV":Ip,"\u0275\u0275i18n":lN,"\u0275\u0275i18nAttributes":cN,"\u0275\u0275i18nExp":AM,"\u0275\u0275i18nStart":Bo,"\u0275\u0275i18nEnd":SM,"\u0275\u0275i18nApply":hN,"\u0275\u0275i18nPostprocess":fN,"\u0275\u0275resolveWindow":Pk,"\u0275\u0275resolveDocument":O0,"\u0275\u0275resolveBody":rl,"\u0275\u0275setComponentScope":kt,"\u0275\u0275setNgModuleScope":cr,"\u0275\u0275sanitizeHtml":T1,"\u0275\u0275sanitizeStyle":x1,"\u0275\u0275sanitizeResourceUrl":T0,"\u0275\u0275sanitizeScript":x0,"\u0275\u0275sanitizeUrl":qg,"\u0275\u0275sanitizeUrlOrResourceUrl":RO,"\u0275\u0275trustConstantHtml":Ik,"\u0275\u0275trustConstantResourceUrl":PO,forwardRef:mn,resolveForwardRef:nn}}(),f_=[];function TI(c,h){f_.push({moduleType:c,ngModule:h})}function h2(c,h){var g=gu(h.declarations||Mn),_=null;Object.defineProperty(c,oa,{configurable:!0,get:function(){if(null===_){var G=to();(_=G.compileNgModule(oo,"ng:///".concat(c.name,"/\u0275mod.js"),{type:c,bootstrap:gu(h.bootstrap||Mn).map(nn),declarations:g.map(nn),imports:gu(h.imports||Mn).map(nn).map(RI),exports:gu(h.exports||Mn).map(nn).map(RI),schemas:h.schemas?gu(h.schemas):null,id:h.id||null})).schemas||(_.schemas=[])}return _}});var E=null;Object.defineProperty(c,wt,{get:function(){if(null===E){var G=to();E=G.compileFactory(oo,"ng:///".concat(c.name,"/\u0275fac.js"),{name:c.name,type:c,deps:wv(c),target:G.FactoryTarget.NgModule,typeArgumentCount:0})}return E},configurable:!1});var S=null;Object.defineProperty(c,is,{get:function(){if(null===S){var G={name:c.name,type:c,providers:h.providers||Mn,imports:[(h.imports||Mn).map(nn),(h.exports||Mn).map(nn)]},te=to();S=te.compileInjector(oo,"ng:///".concat(c.name,"/\u0275inj.js"),G)}return S},configurable:!1})}function RI(c){return function(c){return void 0!==c.ngModule}(c)?c.ngModule:c}var Sc=Ro("NgModule",function(h){return h},void 0,void 0,function(h,d){return S2(h,d)}),S2=function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h2(c,h),TI(c,h)},nA=new ps("Application Initializer"),Bp=function(){var c=function(){function h(d){var g=this;(0,xe.Z)(this,h),this.appInits=d,this.resolve=bm,this.reject=bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(_,E){g.resolve=_,g.reject=E})}return(0,Ae.Z)(h,[{key:"runInitializers",value:function(){var g=this;if(!this.initialized){var _=[],E=function(){g.done=!0,g.resolve()};if(this.appInits)for(var S=function(te){var de=g.appInits[te]();if(YC(de))_.push(de);else if(ru(de)){var Ce=new Promise(function(Ee,Oe){de.subscribe({complete:Ee,error:Oe})});_.push(Ce)}},F=0;F<this.appInits.length;F++)S(F);Promise.all(_).then(function(){E()}).catch(function(G){g.reject(G)}),0===_.length&&E(),this.initialized=!0}}}]),h}();return c.\u0275fac=function(d){return new(d||c)(vs(nA,8))},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}(),HI=new ps("AppId"),T2={provide:HI,useFactory:function(){return"".concat(Mw()).concat(Mw()).concat(Mw())},deps:[]};function Mw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Nd=new ps("Platform Initializer"),rA=new ps("Platform ID"),Iw=new ps("appBootstrapListener"),jI=function(){var c=function(){function h(){(0,xe.Z)(this,h)}return(0,Ae.Z)(h,[{key:"log",value:function(g){console.log(g)}},{key:"warn",value:function(g){console.warn(g)}}]),h}();return c.\u0275fac=function(d){return new(d||c)},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}(),Om=new ps("LocaleId"),Pw=new ps("DefaultCurrencyCode"),x2=function c(h,d){(0,xe.Z)(this,c),this.ngModuleFactory=h,this.componentFactories=d},aA=function(h){return new PS(h)},sA=aA,I2=function(h){return Promise.resolve(aA(h))},QI=function(h){var d=aA(h),_=Jl(Pa(h).declarations).reduce(function(E,S){var F=Yr(S);return F&&E.push(new mI(F)),E},[]);return new x2(d,_)},JI=QI,F2=function(h){return Promise.resolve(QI(h))},Lm=function(){var c=function(){function h(){(0,xe.Z)(this,h),this.compileModuleSync=sA,this.compileModuleAsync=I2,this.compileModuleAndAllComponentsSync=JI,this.compileModuleAndAllComponentsAsync=F2}return(0,Ae.Z)(h,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(g){}},{key:"getModuleId",value:function(g){}}]),h}();return c.\u0275fac=function(d){return new(d||c)},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}(),O2=function(){return Promise.resolve(0)}();function Fw(c){"undefined"==typeof Zone?O2.then(function(){c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}var Nh=function(){function c(h){var d=h.enableLongStackTrace,g=void 0!==d&&d,_=h.shouldCoalesceEventChangeDetection,E=void 0!==_&&_,S=h.shouldCoalesceRunChangeDetection,F=void 0!==S&&S;if((0,xe.Z)(this,c),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Lh(!1),this.onMicrotaskEmpty=new Lh(!1),this.onStable=new Lh(!1),this.onError=new Lh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var G=this;G._nesting=0,G._outer=G._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(G._inner=G._inner.fork(new Zone.TaskTrackingZoneSpec)),g&&Zone.longStackTraceZoneSpec&&(G._inner=G._inner.fork(Zone.longStackTraceZoneSpec)),G.shouldCoalesceEventChangeDetection=!F&&E,G.shouldCoalesceRunChangeDetection=F,G.lastRequestAnimationFrameId=-1,G.nativeRequestAnimationFrame=function(){var c=gt.requestAnimationFrame,h=gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&c&&h){var d=c[Zone.__symbol__("OriginalDelegate")];d&&(c=d);var g=h[Zone.__symbol__("OriginalDelegate")];g&&(h=g)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:h}}().nativeRequestAnimationFrame,function(c){var h=function(){!function(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(gt,function(){c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){c.lastRequestAnimationFrameId=-1,Up(c),c.isCheckStableRunning=!0,Bd(c),c.isCheckStableRunning=!1},void 0,function(){},function(){})),c.fakeTopEventTask.invoke()}),Up(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(g,_,E,S,F,G){try{return iP(c),g.invokeTask(E,S,F,G)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===S.type||c.shouldCoalesceRunChangeDetection)&&h(),aP(c)}},onInvoke:function(g,_,E,S,F,G,te){try{return iP(c),g.invoke(E,S,F,G,te)}finally{c.shouldCoalesceRunChangeDetection&&h(),aP(c)}},onHasTask:function(g,_,E,S){g.hasTask(E,S),_===E&&("microTask"==S.change?(c._hasPendingMicrotasks=S.microTask,Up(c),Bd(c)):"macroTask"==S.change&&(c.hasPendingMacrotasks=S.macroTask))},onHandleError:function(g,_,E,S){return g.handleError(E,S),c.runOutsideAngular(function(){return c.onError.emit(S)}),!1}})}(G)}return(0,Ae.Z)(c,[{key:"run",value:function(d,g,_){return this._inner.run(d,g,_)}},{key:"runTask",value:function(d,g,_,E){var S=this._inner,F=S.scheduleEventTask("NgZoneEvent: "+E,d,ol,bm,bm);try{return S.runTask(F,g,_)}finally{S.cancelTask(F)}}},{key:"runGuarded",value:function(d,g,_){return this._inner.runGuarded(d,g,_)}},{key:"runOutsideAngular",value:function(d){return this._outer.run(d)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!c.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(c.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),c}(),ol={};function Bd(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(function(){return c.onStable.emit(null)})}finally{c.isStable=!0}}}function Up(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function iP(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function aP(c){c._nesting--,Bd(c)}var L2=function(){function c(){(0,xe.Z)(this,c),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Lh,this.onMicrotaskEmpty=new Lh,this.onStable=new Lh,this.onError=new Lh}return(0,Ae.Z)(c,[{key:"run",value:function(d,g,_){return d.apply(g,_)}},{key:"runGuarded",value:function(d,g,_){return d.apply(g,_)}},{key:"runOutsideAngular",value:function(d){return d()}},{key:"runTask",value:function(d,g,_,E){return d.apply(g,_)}}]),c}(),sP=function(){var c=function(){function h(d){var g=this;(0,xe.Z)(this,h),this._ngZone=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),d.run(function(){g.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return(0,Ae.Z)(h,[{key:"_watchAngularEvents",value:function(){var g=this;this._ngZone.onUnstable.subscribe({next:function(){g._didWork=!0,g._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){g._ngZone.onStable.subscribe({next:function(){Nh.assertNotInAngularZone(),Fw(function(){g._isZoneStable=!0,g._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var g=this;if(this.isStable())Fw(function(){for(;0!==g._callbacks.length;){var E=g._callbacks.pop();clearTimeout(E.timeoutId),E.doneCb(g._didWork)}g._didWork=!1});else{var _=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(E){return!E.updateCb||!E.updateCb(_)||(clearTimeout(E.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(g){return{source:g.source,creationLocation:g.creationLocation,data:g.data}}):[]}},{key:"addCallback",value:function(g,_,E){var S=this,F=-1;_&&_>0&&(F=setTimeout(function(){S._callbacks=S._callbacks.filter(function(G){return G.timeoutId!==F}),g(S._didWork,S.getPendingTasks())},_)),this._callbacks.push({doneCb:g,timeoutId:F,updateCb:E})}},{key:"whenStable",value:function(g,_,E){if(E&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,_,E),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(g,_,E){return[]}}]),h}();return c.\u0275fac=function(d){return new(d||c)(vs(Nh))},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}(),lA=function(){var c=function(){function h(){(0,xe.Z)(this,h),this._applications=new Map,uP.addToWindow(this)}return(0,Ae.Z)(h,[{key:"registerApplication",value:function(g,_){this._applications.set(g,_)}},{key:"unregisterApplication",value:function(g){this._applications.delete(g)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(g){return this._applications.get(g)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(g){var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return uP.findTestabilityInTree(this,g,_)}}]),h}();return c.\u0275fac=function(d){return new(d||c)},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}();function Nm(c){uP=c}var uP=new(function(){function c(){(0,xe.Z)(this,c)}return(0,Ae.Z)(c,[{key:"addToWindow",value:function(d){}},{key:"findTestabilityInTree",value:function(d,g,_){return null}}]),c}()),lP=!0,cP=!1;function Rw(){return cP=!0,lP}function hP(){if(cP)throw new Error("Cannot enable prod mode after platform setup.");lP=!1}var Ac,N2=function(c,h,d){var g=new PS(d);return Promise.resolve(g)},cA=new ps("AllowMultipleToken"),gP=function c(h,d){(0,xe.Z)(this,c),this.name=h,this.token=d};function B2(c){if(Ac&&!Ac.destroyed&&!Ac.injector.get(cA,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ac=c.get(z2);var h=c.get(Nd,null);return h&&h.forEach(function(d){return d()}),Ac}function U2(c,h){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],g="Platform: ".concat(h),_=new ps(g);return function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],S=V2();if(!S||S.injector.get(cA,!1))if(c)c(d.concat(E).concat({provide:_,useValue:!0}));else{var F=d.concat(E).concat({provide:_,useValue:!0},{provide:cf,useValue:"platform"});B2(Co.create({providers:F,name:g}))}return bz(_)}}function bz(c){var h=V2();if(!h)throw new Error("No platform exists!");if(!h.injector.get(c,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return h}function V2(){return Ac&&!Ac.destroyed?Ac:null}var z2=function(){var c=function(){function h(d){(0,xe.Z)(this,h),this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return(0,Ae.Z)(h,[{key:"bootstrapModuleFactory",value:function(g,_){var E=this,te=function(c,h){return"noop"===c?new L2:("zone.js"===c?void 0:c)||new Nh({enableLongStackTrace:Rw(),shouldCoalesceEventChangeDetection:!!(null==h?void 0:h.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==h?void 0:h.ngZoneRunCoalescing)})}(_?_.ngZone:void 0,{ngZoneEventCoalescing:_&&_.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:_&&_.ngZoneRunCoalescing||!1}),de=[{provide:Nh,useValue:te}];return te.run(function(){var Ce=Co.create({providers:de,parent:E.injector,name:g.moduleType.name}),Ee=g.create(Ce),Oe=Ee.injector.get(nl,null);if(!Oe)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return te.runOutsideAngular(function(){var Ye=te.onError.subscribe({next:function(Ut){Oe.handleError(Ut)}});Ee.onDestroy(function(){Ow(E._modules,Ee),Ye.unsubscribe()})}),function(c,h,d){try{var g=((Ye=Ee.injector.get(Bp)).runInitializers(),Ye.donePromise.then(function(){return wd(Ee.injector.get(Om,Ly)||Ly),E._moduleDoBootstrap(Ee),Ee}));return YC(g)?g.catch(function(_){throw h.runOutsideAngular(function(){return c.handleError(_)}),_}):g}catch(_){throw h.runOutsideAngular(function(){return c.handleError(_)}),_}var Ye}(Oe,te)})}},{key:"bootstrapModule",value:function(g){var _=this,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],S=yP({},E);return N2(0,0,g).then(function(F){return _.bootstrapModuleFactory(F,S)})}},{key:"_moduleDoBootstrap",value:function(g){var _=g.injector.get(b_);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(function(E){return _.bootstrap(E)});else{if(!g.instance.ngDoBootstrap)throw new Error("The module ".concat(lt(g.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");g.instance.ngDoBootstrap(_)}this._modules.push(g)}},{key:"onDestroy",value:function(g){this._destroyListeners.push(g)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(g){return g.destroy()}),this._destroyListeners.forEach(function(g){return g()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),h}();return c.\u0275fac=function(d){return new(d||c)(vs(Co))},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}();function yP(c,h){return Array.isArray(h)?h.reduce(yP,c):Object.assign(Object.assign({},c),h)}var b_=function(){var c=function(){function h(d,g,_,E,S){var F=this;(0,xe.Z)(this,h),this._zone=d,this._injector=g,this._exceptionHandler=_,this._componentFactoryResolver=E,this._initStatus=S,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){F._zone.run(function(){F.tick()})}});var G=new He.y(function(de){F._stable=F._zone.isStable&&!F._zone.hasPendingMacrotasks&&!F._zone.hasPendingMicrotasks,F._zone.runOutsideAngular(function(){de.next(F._stable),de.complete()})}),te=new He.y(function(de){var Ce;F._zone.runOutsideAngular(function(){Ce=F._zone.onStable.subscribe(function(){Nh.assertNotInAngularZone(),Fw(function(){!F._stable&&!F._zone.hasPendingMacrotasks&&!F._zone.hasPendingMicrotasks&&(F._stable=!0,de.next(!0))})})});var Ee=F._zone.onUnstable.subscribe(function(){Nh.assertInAngularZone(),F._stable&&(F._stable=!1,F._zone.runOutsideAngular(function(){de.next(!1)}))});return function(){Ce.unsubscribe(),Ee.unsubscribe()}});this.isStable=(0,et.T)(G,te.pipe((0,tt.B)()))}return(0,Ae.Z)(h,[{key:"bootstrap",value:function(g,_){var S,E=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");S=g instanceof MM?g:this._componentFactoryResolver.resolveComponentFactory(g),this.componentTypes.push(S.componentType);var F=function(c){return c.isBoundToModule}(S)?void 0:this._injector.get(Sd),te=S.create(Co.NULL,[],_||S.selector,F),de=te.location.nativeElement,Ce=te.injector.get(sP,null),Ee=Ce&&te.injector.get(lA);return Ce&&Ee&&Ee.registerApplication(de,Ce),te.onDestroy(function(){E.detachView(te.hostView),Ow(E.components,te),Ee&&Ee.unregisterApplication(de)}),this._loadComponent(te),te}},{key:"tick",value:function(){var g=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var E,_=(0,Ve.Z)(this._views);try{for(_.s();!(E=_.n()).done;)E.value.detectChanges()}catch(de){_.e(de)}finally{_.f()}}catch(de){this._zone.runOutsideAngular(function(){return g._exceptionHandler.handleError(de)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(g){var _=g;this._views.push(_),_.attachToAppRef(this)}},{key:"detachView",value:function(g){var _=g;Ow(this._views,_),_.detachFromAppRef()}},{key:"_loadComponent",value:function(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(Iw,[]).concat(this._bootstrapListeners).forEach(function(E){return E(g)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(g){return g.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),h}();return c.\u0275fac=function(d){return new(d||c)(vs(Nh),vs(Co),vs(nl),vs(_m),vs(Bp))},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}();function Ow(c,h){var d=c.indexOf(h);d>-1&&c.splice(d,1)}var _P=function c(){(0,xe.Z)(this,c)},W2=function c(){(0,xe.Z)(this,c)},Dz={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Sz=function(){var c=function(){function h(d,g){(0,xe.Z)(this,h),this._compiler=d,this._config=g||Dz}return(0,Ae.Z)(h,[{key:"load",value:function(g){return this.loadAndCompile(g)}},{key:"loadAndCompile",value:function(g){var _=this,E=g.split("#"),S=(0,M.Z)(E,2),F=S[0],G=S[1];return void 0===G&&(G="default"),ne(8255)(F).then(function(te){return te[G]}).then(function(te){return Ja(te,F,G)}).then(function(te){return _._compiler.compileModuleAsync(te)})}},{key:"loadFactory",value:function(g){var _=g.split("#"),E=(0,M.Z)(_,2),S=E[0],F=E[1],G="NgFactory";return void 0===F&&(F="default",G=""),ne(8255)(this._config.factoryPathPrefix+S+this._config.factoryPathSuffix).then(function(te){return te[F+G]}).then(function(te){return Ja(te,S,F)})}}]),h}();return c.\u0275fac=function(d){return new(d||c)(vs(Lm),vs(W2,8))},c.\u0275prov=Xr({token:c,factory:c.\u0275fac}),c}();function Ja(c,h,d){if(!c)throw new Error("Cannot find '".concat(d,"' in '").concat(h,"'"));return c}var Q2=function(c){return null},nZ=U2(null,"core",[{provide:rA,useValue:"unknown"},{provide:z2,deps:[Co]},{provide:lA,deps:[]},{provide:jI,deps:[]}]),SP=[{provide:b_,useClass:b_,deps:[Nh,Co,nl,_m,Bp]},{provide:oz,deps:[Nh],useFactory:function(c){var h=[];return c.onStable.subscribe(function(){for(;h.length;)h.pop()()}),function(d){h.push(d)}}},{provide:Bp,useClass:Bp,deps:[[new $l,nA]]},{provide:Lm,useClass:Lm,deps:[]},T2,{provide:Jb,useFactory:function(){return bN},deps:[]},{provide:ew,useFactory:function(){return Sm},deps:[]},{provide:Om,useFactory:function(c){return wd(c=c||"undefined"!=typeof $localize&&$localize.locale||Ly),c},deps:[[new Ru(Om),new $l,new Xl]]},{provide:Pw,useValue:"USD"}],TP=function(){var c=function h(d){(0,xe.Z)(this,h)};return c.\u0275fac=function(d){return new(d||c)(vs(b_))},c.\u0275mod=Tn({type:c}),c.\u0275inj=Qs({providers:SP}),c}()},9748:function(vn,Ct,ne){"use strict";ne.d(Ct,{hO:function(){return Ne},xv:function(){return ce},Dh:function(){return xe},GT:function(){return v},on:function(){return Be},pX:function(){return Te}});var Se=ne(7289),ye=ne(5134),R=ne(8398),M=ne(5366),x=ne(9001),oe=ne(5271);vn=ne.hmd(vn);var Ve=["ngOnDestroy"],Te=function(et,tt,We){var pt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(et,{get:function(ee,Dn){return We.runOutsideAngular(function(){var mn;if(et[Dn])return(null===(mn=null==pt?void 0:pt.spy)||void 0===mn?void 0:mn.get)&&pt.spy.get(Dn,et[Dn]),et[Dn];if(Ve.indexOf(Dn)>-1)return function(){};var nn=tt.toPromise().then(function(Vt){var Nt=Vt&&Vt[Dn];return"function"==typeof Nt?Nt.bind(Vt):Nt&&Nt.then?Nt.then(function(Rt){return We.run(function(){return Rt})}):We.run(function(){return Nt})});return new Proxy(function(){},{get:function(Nt,Rt){return nn[Rt]},apply:function(Nt,Rt,Bt){return nn.then(function(K){var k,j=K&&K.apply(void 0,(0,R.Z)(Bt));return(null===(k=null==pt?void 0:pt.spy)||void 0===k?void 0:k.apply)&&pt.spy.apply(Dn,Bt,j),j})}})})}})},v=function(et,tt){tt.forEach(function(We){Object.getOwnPropertyNames(We.prototype||We).forEach(function(pt){Object.defineProperty(et.prototype,pt,Object.getOwnPropertyDescriptor(We.prototype||We,pt))})})},Ae=function He(et){return(0,ye.Z)(this,He),et},xe=new M.OlP("angularfire2.app.options"),ce=new M.OlP("angularfire2.app.name");function Be(He,et,tt){var pt="object"==typeof tt&&tt||{};pt.name=pt.name||"string"==typeof tt&&tt||"[DEFAULT]";var ee=x.Z.apps.filter(function(mn){return mn&&mn.name===pt.name})[0]||et.runOutsideAngular(function(){return x.Z.initializeApp(He,pt)});try{if(JSON.stringify(He)!==JSON.stringify(ee.options)){var Dn=!!vn.hot;ae("error","".concat(ee.name," Firebase App already initialized with different options").concat(Dn?", you may need to reload as Firebase is not HMR aware.":"."))}}catch(mn){}return new Ae(ee)}var ae=function(et){if((0,M.X6Q)()&&"undefined"!=typeof console){for(var tt,We=arguments.length,pt=new Array(We>1?We-1:0),lt=1;lt<We;lt++)pt[lt-1]=arguments[lt];(tt=console)[et].apply(tt,pt)}},be={provide:Ae,useFactory:Be,deps:[xe,M.R0b,[new M.FiY,ce]]},Ne=function(){var He=function(){function et(tt){(0,ye.Z)(this,et),x.Z.registerVersion("angularfire",oe.q4.full,"core"),x.Z.registerVersion("angularfire",oe.q4.full,"app-compat"),x.Z.registerVersion("angular",M.q4F.full,tt.toString())}return(0,Se.Z)(et,null,[{key:"initializeApp",value:function(We,pt){return{ngModule:et,providers:[{provide:xe,useValue:We},{provide:ce,useValue:pt}]}}}]),et}();return He.\u0275fac=function(tt){return new(tt||He)(M.LFG(M.Lbi))},He.\u0275mod=M.oAB({type:He}),He.\u0275inj=M.cJS({providers:[be]}),He}()},5271:function(vn,Ct,ne){"use strict";ne.d(Ct,{q4:function(){return ae},iC:function(){return K},HU:function(){return mn},cc:function(){return He}});var Se=ne(5134),ye=ne(7289),R=ne(2787),M=ne(5366);(0,ne(7092).registerVersion)("firebase","9.1.1","app");var Te=ne(8489),v=ne(8569),Ae=ne(6599),xe=ne(3482),ce=ne(45);vn=ne.hmd(vn);var ae=new M.GfV("7.0.4"),be=!!vn.hot,Ne=function(Le){if((0,M.X6Q)()&&"undefined"!=typeof console){for(var at,bt=arguments.length,nt=new Array(bt>1?bt-1:0),Ot=1;Ot<bt;Ot++)nt[Ot-1]=arguments[Ot];(at=console)[Le].apply(at,nt)}};function He(we,Le,at,bt,nt){var Ot=globalThis.\u0275AngularfireInstanceCache.find(function(ji){return ji[0]===we})||[],On=(0,R.Z)(Ot,3),rr=On[1],ni=On[2];if(rr)return function(we,Le){try{return we.toString()===Le.toString()}catch(at){return we===Le}}(nt,ni)||(Ne("error","".concat(Le," was already initialized on the ").concat(at," Firebase App with different settings.").concat(be?" You may need to reload as Firebase is not HMR aware.":"")),Ne("warn",{is:nt,was:ni})),rr;var mi=bt();return globalThis.\u0275AngularfireInstanceCache.push([we,mi,nt]),mi}function lt(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);var ee=function(){function we(Le){var at=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te.N;(0,Se.Z)(this,we),this.zone=Le,this.delegate=at}return(0,ye.Z)(we,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(at,bt,nt){var Ot=this.zone;return this.delegate.schedule(function(ni){var mi=this;Ot.runGuarded(function(){at.apply(mi,[ni])})},bt,nt)}}]),we}(),Dn=function(){function we(Le){(0,Se.Z)(this,we),this.zone=Le,this.task=null}return(0,ye.Z)(we,[{key:"call",value:function(at,bt){var nt=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",lt,{},lt,lt)}),bt.pipe((0,Ae.b)({next:nt,complete:nt,error:nt})).subscribe(at).add(nt)}},{key:"unscheduleTask",value:function(){var at=this;setTimeout(function(){null!=at.task&&"scheduled"===at.task.state&&(at.task.invoke(),at.task=null)},10)}}]),we}(),mn=function(){var we=function Le(at){(0,Se.Z)(this,Le),this.ngZone=at,this.outsideAngular=at.runOutsideAngular(function(){return new ee(Zone.current)}),this.insideAngular=at.run(function(){return new ee(Zone.current,v.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)};return we.\u0275fac=function(at){return new(at||we)(M.LFG(M.R0b))},we.\u0275prov=M.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we}();function nn(){var we=globalThis.\u0275AngularFireScheduler;if(!we)throw new Error("AngularFireModule has not been provided");return we}function K(we){return nn(),function(we){return function(at){return(at=at.lift(new Dn(we.ngZone))).pipe((0,xe.R)(we.outsideAngular),(0,ce.QV)(we.insideAngular))}}(nn())(we)}},1932:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return We}});var Te,Se=ne(3512),ye=ne(5134),R=ne(7289),M=ne(5725),x=ne(5119),oe=ne(7092),Ve=ne(2134),v=function(){function pt(lt,ee){var Dn=this;(0,ye.Z)(this,pt),this._delegate=lt,this.firebase=ee,(0,oe._addComponent)(lt,new x.wA("app-compat",function(){return Dn},"PUBLIC")),this.container=lt.container}return(0,R.Z)(pt,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(ee){this._delegate.automaticDataCollectionEnabled=ee}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var ee=this;return new Promise(function(Dn){ee._delegate.checkDestroyed(),Dn()}).then(function(){return ee.firebase.INTERNAL.removeApp(ee.name),(0,oe.deleteApp)(ee._delegate)})}},{key:"_getService",value:function(ee){var mn,Dn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var nn=this._delegate.container.getProvider(ee);return!nn.isInitialized()&&"EXPLICIT"===(null===(mn=nn.getComponent())||void 0===mn?void 0:mn.instantiationMode)&&nn.initialize(),nn.getImmediate({identifier:Dn})}},{key:"_removeServiceInstance",value:function(ee){var Dn=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(ee).clearInstance(Dn)}},{key:"_addComponent",value:function(ee){(0,oe._addComponent)(this._delegate,ee)}},{key:"_addOrOverwriteComponent",value:function(ee){(0,oe._addOrOverwriteComponent)(this._delegate,ee)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),pt}(),Ae=((0,Se.Z)(Te={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,Se.Z)(Te,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Te),xe=new M.LL("app-compat","Firebase",Ae),ae=function Be(){var pt=function(pt){var lt={},ee={__esModule:!0,initializeApp:function(Bt){var k=oe.initializeApp(Bt,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if((0,M.r3)(lt,k.name))return lt[k.name];var j=new pt(k,ee);return lt[k.name]=j,j},app:mn,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function(Bt){var K=Bt.name,k=K.replace("-compat","");if(oe._registerComponent(Bt)&&"PUBLIC"===Bt.type){var j=function(){var we=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn();if("function"!=typeof we[k])throw xe.create("invalid-app-argument",{appName:K});return we[k]()};void 0!==Bt.serviceProps&&(0,M.ZB)(j,Bt.serviceProps),ee[k]=j,pt.prototype[k]=function(){for(var ie=this._getService.bind(this,K),we=arguments.length,Le=new Array(we),at=0;at<we;at++)Le[at]=arguments[at];return ie.apply(this,Bt.multipleInstances?Le:[])}}return"PUBLIC"===Bt.type?ee[k]:null},removeApp:function(Bt){delete lt[Bt]},useAsService:function(Bt,K){return"serverAuth"===K?null:K},modularAPIs:oe}};function mn(Bt){if(!(0,M.r3)(lt,Bt=Bt||oe._DEFAULT_ENTRY_NAME))throw xe.create("no-app",{appName:Bt});return lt[Bt]}return ee.default=ee,Object.defineProperty(ee,"apps",{get:function(){return Object.keys(lt).map(function(Bt){return lt[Bt]})}}),mn.App=pt,ee}(v);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function(ee){(0,M.ZB)(pt,ee)},createSubscribe:M.ne,ErrorFactory:M.LL,deepExtend:M.ZB}),pt}(),be=new Ve.Yd("@firebase/app-compat");if((0,M.jU)()&&void 0!==self.firebase){be.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&be.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var We=ae;(0,oe.registerVersion)("@firebase/app-compat","0.1.3",undefined)},7092:function(vn,Ct,ne){"use strict";ne.r(Ct),ne.d(Ct,{FirebaseError:function(){return Ae.ZR},SDK_VERSION:function(){return Xr},_DEFAULT_ENTRY_NAME:function(){return ni},_addComponent:function(){return jo},_addOrOverwriteComponent:function(){return pc},_apps:function(){return ji},_clearComponents:function(){return Ir},_components:function(){return Ti},_getProvider:function(){return rs},_registerComponent:function(){return So},_removeServiceInstance:function(){return bi},deleteApp:function(){return Es},getApp:function(){return Qs},getApps:function(){return ls},initializeApp:function(){return Ia},onLog:function(){return aa},registerVersion:function(){return Hs},setLogLevel:function(){return sa}});var xe,ce,Se=ne(8239),ye=ne(6054),R=ne(3512),M=ne(5134),x=ne(7289),oe=ne(8774),Ve=ne.n(oe),Te=ne(5119),v=ne(2134),Ae=ne(5725),Be=function(){function Er(ur){(0,M.Z)(this,Er),this.container=ur}return(0,x.Z)(Er,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(ri){if(function(Er){var ur=Er.getComponent();return"VERSION"===(null==ur?void 0:ur.type)}(ri)){var pi=ri.getImmediate();return"".concat(pi.library,"/").concat(pi.version)}return null}).filter(function(ri){return ri}).join(" ")}}]),Er}(),be="@firebase/app",He=new v.Yd("@firebase/app"),ni="[DEFAULT]",mi=((0,R.Z)(xe={},be,"fire-core"),(0,R.Z)(xe,"@firebase/app-compat","fire-core-compat"),(0,R.Z)(xe,"@firebase/analytics","fire-analytics"),(0,R.Z)(xe,"@firebase/analytics-compat","fire-analytics-compat"),(0,R.Z)(xe,"@firebase/app-check","fire-app-check"),(0,R.Z)(xe,"@firebase/app-check-compat","fire-app-check-compat"),(0,R.Z)(xe,"@firebase/auth","fire-auth"),(0,R.Z)(xe,"@firebase/auth-compat","fire-auth-compat"),(0,R.Z)(xe,"@firebase/database","fire-rtdb"),(0,R.Z)(xe,"@firebase/database-compat","fire-rtdb-compat"),(0,R.Z)(xe,"@firebase/functions","fire-fn"),(0,R.Z)(xe,"@firebase/functions-compat","fire-fn-compat"),(0,R.Z)(xe,"@firebase/installations","fire-iid"),(0,R.Z)(xe,"@firebase/installations-compat","fire-iid-compat"),(0,R.Z)(xe,"@firebase/messaging","fire-fcm"),(0,R.Z)(xe,"@firebase/messaging-compat","fire-fcm-compat"),(0,R.Z)(xe,"@firebase/performance","fire-perf"),(0,R.Z)(xe,"@firebase/performance-compat","fire-perf-compat"),(0,R.Z)(xe,"@firebase/remote-config","fire-rc"),(0,R.Z)(xe,"@firebase/remote-config-compat","fire-rc-compat"),(0,R.Z)(xe,"@firebase/storage","fire-gcs"),(0,R.Z)(xe,"@firebase/storage-compat","fire-gcs-compat"),(0,R.Z)(xe,"@firebase/firestore","fire-fst"),(0,R.Z)(xe,"@firebase/firestore-compat","fire-fst-compat"),(0,R.Z)(xe,"fire-js","fire-js"),(0,R.Z)(xe,"firebase","fire-js-all"),xe),ji=new Map,Ti=new Map;function jo(Er,ur){try{Er.container.addComponent(ur)}catch(jn){He.debug("Component ".concat(ur.name," failed to register with FirebaseApp ").concat(Er.name),jn)}}function pc(Er,ur){Er.container.addOrOverwriteComponent(ur)}function So(Er){var ur=Er.name;if(Ti.has(ur))return He.debug("There were multiple attempts to register component ".concat(ur,".")),!1;Ti.set(ur,Er);var ri,jn=(0,ye.Z)(ji.values());try{for(jn.s();!(ri=jn.n()).done;)jo(ri.value,Er)}catch(ii){jn.e(ii)}finally{jn.f()}return!0}function rs(Er,ur){return Er.container.getProvider(ur)}function bi(Er,ur){var jn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ni;rs(Er,ur).clearInstance(jn)}function Ir(){Ti.clear()}var or=((0,R.Z)(ce={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,R.Z)(ce,"bad-app-name","Illegal App name: '{$appName}"),(0,R.Z)(ce,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,R.Z)(ce,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,R.Z)(ce,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,R.Z)(ce,"invalid-log-argument","First argument to `onLog` must be null or a function."),ce),Ma=new Ae.LL("app","Firebase",or),ml=function(){function Er(ur,jn,ri){var pi=this;(0,M.Z)(this,Er),this._isDeleted=!1,this._options=Object.assign({},ur),this._config=Object.assign({},jn),this._name=jn.name,this._automaticDataCollectionEnabled=jn.automaticDataCollectionEnabled,this._container=ri,this.container.addComponent(new Te.wA("app",function(){return pi},"PUBLIC"))}return(0,x.Z)(Er,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(jn){this.checkDestroyed(),this._automaticDataCollectionEnabled=jn}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(jn){this._isDeleted=jn}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ma.create("app-deleted",{appName:this._name})}}]),Er}(),Xr="9.1.1";function Ia(Er){var ur=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof ur){var jn=ur;ur={name:jn}}var ri=Object.assign({name:ni,automaticDataCollectionEnabled:!1},ur),pi=ri.name;if("string"!=typeof pi||!pi)throw Ma.create("bad-app-name",{appName:String(pi)});var ii=ji.get(pi);if(ii){if((0,Ae.vZ)(Er,ii.options)&&(0,Ae.vZ)(ri,ii.config))return ii;throw Ma.create("duplicate-app",{appName:pi})}var Wi,Or=new Te.H0(pi),lr=(0,ye.Z)(Ti.values());try{for(lr.s();!(Wi=lr.n()).done;){var cs=Wi.value;Or.addComponent(cs)}}catch(Wo){lr.e(Wo)}finally{lr.f()}var Rs=new ml(Er,ri,Or);return ji.set(pi,Rs),Rs}function Qs(){var Er=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni,ur=ji.get(Er);if(!ur)throw Ma.create("no-app",{appName:Er});return ur}function ls(){return Array.from(ji.values())}function Es(Er){return ia.apply(this,arguments)}function ia(){return(ia=(0,Se.Z)(Ve().mark(function Er(ur){var jn;return Ve().wrap(function(pi){for(;;)switch(pi.prev=pi.next){case 0:if(!ji.has(jn=ur.name)){pi.next=6;break}return ji.delete(jn),pi.next=5,Promise.all(ur.container.getProviders().map(function(ii){return ii.delete()}));case 5:ur.isDeleted=!0;case 6:case"end":return pi.stop()}},Er)}))).apply(this,arguments)}function Hs(Er,ur,jn){var ri,pi=null!==(ri=mi[Er])&&void 0!==ri?ri:Er;jn&&(pi+="-".concat(jn));var ii=pi.match(/\s|\//),Or=ur.match(/\s|\//);if(ii||Or){var lr=['Unable to register library "'.concat(pi,'" with version "').concat(ur,'":')];return ii&&lr.push('library name "'.concat(pi,'" contains illegal characters (whitespace or "/")')),ii&&Or&&lr.push("and"),Or&&lr.push('version name "'.concat(ur,'" contains illegal characters (whitespace or "/")')),void He.warn(lr.join(" "))}So(new Te.wA("".concat(pi,"-version"),function(){return{library:pi,version:ur}},"VERSION"))}function aa(Er,ur){if(null!==Er&&"function"!=typeof Er)throw Ma.create("invalid-log-argument");(0,v.Am)(Er,ur)}function sa(Er){(0,v.Ub)(Er)}So(new Te.wA("platform-logger",function(ur){return new Be(ur)},"PRIVATE")),Hs(be,"0.7.2",undefined),Hs("fire-js","")},282:function(vn,Ct,ne){"use strict";ne.d(Ct,{$:function(){return Ul},A:function(){return mn},E:function(){return Fa},G:function(){return $n},I:function(){return Ku},K:function(){return $e},L:function(){return Uf},M:function(){return q},N:function(){return J},P:function(){return to},Q:function(){return he},R:function(){return pk},T:function(){return P},V:function(){return ut},W:function(){return cn},X:function(){return mo},Y:function(){return Mo},Z:function(){return Ca},_:function(){return qi},a:function(){return Ig},a0:function(){return lh},a1:function(){return gc},a2:function(){return wl},a3:function(){return wi},a4:function(){return _a},a5:function(){return Ju},a6:function(){return Ds},a7:function(){return Fc},a8:function(){return Rc},a9:function(){return ds},aA:function(){return Qf},aB:function(){return d0},aC:function(){return ir},aG:function(){return D},aJ:function(){return De},aa:function(){return Js},ab:function(){return Po},ae:function(){return kl},af:function(){return jl},ag:function(){return hh},aj:function(){return vo},ak:function(){return dt},am:function(){return Li},an:function(){return Us},ao:function(){return hs},ap:function(){return On},aq:function(){return Bi},ar:function(){return Mi},as:function(){return ie},at:function(){return yp},au:function(){return Jf},av:function(){return we},aw:function(){return nt},ax:function(){return ni},ay:function(){return kt},az:function(){return vs},b:function(){return hv},c:function(){return Pu},d:function(){return lp},e:function(){return yv},f:function(){return fp},g:function(){return bh},h:function(){return p0},i:function(){return Pg},j:function(){return mk},k:function(){return jg},l:function(){return h0},m:function(){return Eh},o:function(){return lt},r:function(){return f0},s:function(){return l0},u:function(){return up},z:function(){return Nt}});var We,Se=ne(9333),ye=ne(9187),R=ne(6518),M=ne(1885),x=ne(9727),oe=ne(6054),Ve=ne(2787),Te=ne(8239),v=ne(5134),Ae=ne(7289),xe=ne(8398),ce=ne(3512),Be=ne(8774),ae=ne.n(Be),be=ne(5725),Ne=ne(7092),He=ne(4762),et=ne(2134),tt=ne(5119),lt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},mn={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function Vt(){return(0,ce.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Nt=function(){var z;return(0,ce.Z)(z={},"admin-restricted-operation","This operation is restricted to administrators only."),(0,ce.Z)(z,"argument-error",""),(0,ce.Z)(z,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,ce.Z)(z,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,ce.Z)(z,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,ce.Z)(z,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,ce.Z)(z,"cordova-not-ready","Cordova framework is not ready."),(0,ce.Z)(z,"cors-unsupported","This browser is not supported."),(0,ce.Z)(z,"credential-already-in-use","This credential is already associated with a different user account."),(0,ce.Z)(z,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,ce.Z)(z,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,ce.Z)(z,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,ce.Z)(z,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,ce.Z)(z,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,ce.Z)(z,"email-already-in-use","The email address is already in use by another account."),(0,ce.Z)(z,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,ce.Z)(z,"expired-action-code","The action code has expired."),(0,ce.Z)(z,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,ce.Z)(z,"internal-error","An internal AuthError has occurred."),(0,ce.Z)(z,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,ce.Z)(z,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,ce.Z)(z,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,ce.Z)(z,"invalid-auth-event","An internal AuthError has occurred."),(0,ce.Z)(z,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,ce.Z)(z,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,ce.Z)(z,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,ce.Z)(z,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,ce.Z)(z,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,ce.Z)(z,"invalid-email","The email address is badly formatted."),(0,ce.Z)(z,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,ce.Z)(z,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,ce.Z)(z,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,ce.Z)(z,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,ce.Z)(z,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,ce.Z)(z,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,ce.Z)(z,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,ce.Z)(z,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,ce.Z)(z,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,ce.Z)(z,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,ce.Z)(z,"wrong-password","The password is invalid or the user does not have a password."),(0,ce.Z)(z,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,ce.Z)(z,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,ce.Z)(z,"invalid-provider-id","The specified provider ID is invalid."),(0,ce.Z)(z,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,ce.Z)(z,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,ce.Z)(z,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,ce.Z)(z,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,ce.Z)(z,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,ce.Z)(z,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,ce.Z)(z,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,ce.Z)(z,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,ce.Z)(z,"missing-continue-uri","A continue URL must be provided in the request."),(0,ce.Z)(z,"missing-iframe-start","An internal AuthError has occurred."),(0,ce.Z)(z,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,ce.Z)(z,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,ce.Z)(z,"missing-multi-factor-info","No second factor identifier is provided."),(0,ce.Z)(z,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,ce.Z)(z,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,ce.Z)(z,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,ce.Z)(z,"app-deleted","This instance of FirebaseApp has been deleted."),(0,ce.Z)(z,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,ce.Z)(z,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,ce.Z)(z,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,ce.Z)(z,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,ce.Z)(z,"no-auth-event","An internal AuthError has occurred."),(0,ce.Z)(z,"no-such-provider","User was not linked to an account with the given provider."),(0,ce.Z)(z,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,ce.Z)(z,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,ce.Z)(z,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,ce.Z)(z,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,ce.Z)(z,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,ce.Z)(z,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,ce.Z)(z,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,ce.Z)(z,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,ce.Z)(z,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,ce.Z)(z,"rejected-credential","The request contains malformed or mismatching credentials."),(0,ce.Z)(z,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,ce.Z)(z,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,ce.Z)(z,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,ce.Z)(z,"timeout","The operation has timed out."),(0,ce.Z)(z,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,ce.Z)(z,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,ce.Z)(z,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,ce.Z)(z,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,ce.Z)(z,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,ce.Z)(z,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,ce.Z)(z,"unverified-email","The operation requires a verified email."),(0,ce.Z)(z,"user-cancelled","The user did not grant your application the permissions it requested."),(0,ce.Z)(z,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,ce.Z)(z,"user-disabled","The user account has been disabled by an administrator."),(0,ce.Z)(z,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,ce.Z)(z,"user-signed-out",""),(0,ce.Z)(z,"weak-password","The password must be 6 characters long or more."),(0,ce.Z)(z,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,ce.Z)(z,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),z},Rt=Vt,Bt=new be.LL("auth","Firebase",Vt()),k=new et.Yd("@firebase/auth");function j(z){if(k.logLevel<=et.in.ERROR){for(var B=arguments.length,U=new Array(B>1?B-1:0),H=1;H<B;H++)U[H-1]=arguments[H];k.error.apply(k,["Auth (".concat(Ne.SDK_VERSION,"): ").concat(z)].concat(U))}}function ie(z){for(var B=arguments.length,U=new Array(B>1?B-1:0),H=1;H<B;H++)U[H-1]=arguments[H];throw bt.apply(void 0,[z].concat(U))}function we(z){for(var B=arguments.length,U=new Array(B>1?B-1:0),H=1;H<B;H++)U[H-1]=arguments[H];return bt.apply(void 0,[z].concat(U))}function Le(z,B,U){var H=Object.assign(Object.assign({},Rt()),(0,ce.Z)({},B,U));return new be.LL("auth","Firebase",H).create(B,{appName:z.name})}function at(z,B,U){if(!(B instanceof U))throw U.name!==B.constructor.name&&ie(z,"argument-error"),Le(z,"argument-error","Type of ".concat(B.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function bt(z){for(var B=arguments.length,U=new Array(B>1?B-1:0),H=1;H<B;H++)U[H-1]=arguments[H];if("string"!=typeof z){var O,X=U[0],re=(0,xe.Z)(U.slice(1));return re[0]&&(re[0].appName=z.name),(O=z._errorFactory).create.apply(O,[X].concat((0,xe.Z)(re)))}return Bt.create.apply(Bt,[z].concat(U))}function nt(z,B){if(!z){for(var U=arguments.length,H=new Array(U>2?U-2:0),O=2;O<U;O++)H[O-2]=arguments[O];throw bt.apply(void 0,[B].concat(H))}}function Ot(z){var B="INTERNAL ASSERTION FAILED: "+z;throw j(B),new Error(B)}function On(z,B){z||Ot(B)}var rr=new Map;function ni(z){On(z instanceof Function,"Expected a class definition");var B=rr.get(z);return B?(On(B instanceof z,"Instance stored in cache mismatched with class"),B):(B=new z,rr.set(z,B),B)}function Ti(){var z;return"undefined"!=typeof self&&(null===(z=self.location)||void 0===z?void 0:z.href)||""}function jo(){return"http:"===pc()||"https:"===pc()}function pc(){var z;return"undefined"!=typeof self&&(null===(z=self.location)||void 0===z?void 0:z.protocol)||null}var bi=function(){function z(B,U){(0,v.Z)(this,z),this.shortDelay=B,this.longDelay=U,On(U>B,"Short delay should be less than long delay!"),this.isMobile=(0,be.uI)()||(0,be.b$)()}return(0,Ae.Z)(z,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jo()||(0,be.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),z}();function Ir(z,B){On(z.emulator,"Emulator should always be set here");var U=z.emulator.url;return B?"".concat(U).concat(B.startsWith("/")?B.slice(1):B):U}var or=function(){function z(){(0,v.Z)(this,z)}return(0,Ae.Z)(z,null,[{key:"initialize",value:function(U,H,O){this.fetchImpl=U,H&&(this.headersImpl=H),O&&(this.responseImpl=O)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),z}(),Ma=((0,ce.Z)(We={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,ce.Z)(We,"MISSING_CUSTOM_TOKEN","internal-error"),(0,ce.Z)(We,"INVALID_IDENTIFIER","invalid-email"),(0,ce.Z)(We,"MISSING_CONTINUE_URI","internal-error"),(0,ce.Z)(We,"INVALID_PASSWORD","wrong-password"),(0,ce.Z)(We,"MISSING_PASSWORD","internal-error"),(0,ce.Z)(We,"EMAIL_EXISTS","email-already-in-use"),(0,ce.Z)(We,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,ce.Z)(We,"INVALID_IDP_RESPONSE","invalid-credential"),(0,ce.Z)(We,"INVALID_PENDING_TOKEN","invalid-credential"),(0,ce.Z)(We,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,ce.Z)(We,"MISSING_REQ_TYPE","internal-error"),(0,ce.Z)(We,"EMAIL_NOT_FOUND","user-not-found"),(0,ce.Z)(We,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,ce.Z)(We,"EXPIRED_OOB_CODE","expired-action-code"),(0,ce.Z)(We,"INVALID_OOB_CODE","invalid-action-code"),(0,ce.Z)(We,"MISSING_OOB_CODE","internal-error"),(0,ce.Z)(We,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,ce.Z)(We,"INVALID_ID_TOKEN","invalid-user-token"),(0,ce.Z)(We,"TOKEN_EXPIRED","user-token-expired"),(0,ce.Z)(We,"USER_NOT_FOUND","user-token-expired"),(0,ce.Z)(We,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,ce.Z)(We,"INVALID_CODE","invalid-verification-code"),(0,ce.Z)(We,"INVALID_SESSION_INFO","invalid-verification-id"),(0,ce.Z)(We,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,ce.Z)(We,"MISSING_SESSION_INFO","missing-verification-id"),(0,ce.Z)(We,"SESSION_EXPIRED","code-expired"),(0,ce.Z)(We,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,ce.Z)(We,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,ce.Z)(We,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,ce.Z)(We,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,ce.Z)(We,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,ce.Z)(We,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,ce.Z)(We,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,ce.Z)(We,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,ce.Z)(We,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,ce.Z)(We,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,ce.Z)(We,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),We),ml=new bi(3e4,6e4);function Xr(z,B){return z.tenantId&&!B.tenantId?Object.assign(Object.assign({},B),{tenantId:z.tenantId}):B}function Ia(z,B,U,H){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,Te.Z)(ae().mark(function z(B,U,H,O){var re=arguments;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.abrupt("return",ls(B,re.length>4&&void 0!==re[4]?re[4]:{},function(){var Fe={},St={};O&&("GET"===U?St=O:Fe={body:JSON.stringify(O)});var Pt=(0,be.xO)(Object.assign({key:B.config.apiKey},St)).slice(1),pr=new(or.headers());return pr.set("Content-Type","application/json"),pr.set("X-Client-Version",B._getSdkClientVersion()),B.languageCode&&pr.set("X-Firebase-Locale",B.languageCode),or.fetch()(aa(B,B.config.apiHost,H,Pt),Object.assign({method:U,headers:pr,referrerPolicy:"no-referrer"},Fe))}));case 2:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function ls(z,B,U){return Es.apply(this,arguments)}function Es(){return(Es=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X,re,ue,Fe,St,Pt,pr,Pn;return ae().wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return B._canInitEmulator=!1,O=Object.assign(Object.assign({},Ma),U),Ar.prev=2,X=new sa(B),Ar.next=6,Promise.race([H(),X.promise]);case 6:return re=Ar.sent,X.clearNetworkTimeout(),Ar.next=10,re.json();case 10:if(!("needConfirmation"in(ue=Ar.sent))){Ar.next=13;break}throw is(B,"account-exists-with-different-credential",ue);case 13:if(!re.ok||"errorMessage"in ue){Ar.next=17;break}return Ar.abrupt("return",ue);case 17:if(Fe=(re.ok?ue.errorMessage:ue.error.message).split(" : "),St=(0,Ve.Z)(Fe,2),pr=St[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==(Pt=St[0])){Ar.next=23;break}throw is(B,"credential-already-in-use",ue);case 23:if("EMAIL_EXISTS"!==Pt){Ar.next=25;break}throw is(B,"email-already-in-use",ue);case 25:if(Pn=O[Pt]||Pt.toLowerCase().replace(/[_\s]+/g,"-"),!pr){Ar.next=30;break}throw Le(B,Pn,pr);case 30:ie(B,Pn);case 31:Ar.next=38;break;case 33:if(Ar.prev=33,Ar.t0=Ar.catch(2),!(Ar.t0 instanceof be.ZR)){Ar.next=37;break}throw Ar.t0;case 37:ie(B,"network-request-failed");case 38:case"end":return Ar.stop()}},z,null,[[2,33]])}))).apply(this,arguments)}function ia(z,B,U,H){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,Te.Z)(ae().mark(function z(B,U,H,O){var X,re,ue=arguments;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return X=ue.length>4&&void 0!==ue[4]?ue[4]:{},Fe.next=3,Ia(B,U,H,O,X);case 3:return"mfaPendingCredential"in(re=Fe.sent)&&ie(B,"multi-factor-auth-required",{serverResponse:re}),Fe.abrupt("return",re);case 6:case"end":return Fe.stop()}},z)}))).apply(this,arguments)}function aa(z,B,U,H){var O="".concat(B).concat(U,"?").concat(H);return z.config.emulator?Ir(z.config,O):"".concat(z.config.apiScheme,"://").concat(O)}var sa=function(){function z(B){var U=this;(0,v.Z)(this,z),this.auth=B,this.timer=null,this.promise=new Promise(function(H,O){U.timer=setTimeout(function(){return O(we(U.auth,"timeout"))},ml.get())})}return(0,Ae.Z)(z,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),z}();function is(z,B,U){var H={appName:z.name};U.email&&(H.email=U.email),U.phoneNumber&&(H.phoneNumber=U.phoneNumber);var O=we(z,B,H);return O.customData._tokenResponse=U,O}function Er(z,B){return ur.apply(this,arguments)}function ur(){return(ur=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:delete",U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function jn(z,B){return ri.apply(this,arguments)}function ri(){return(ri=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:update",U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function pi(z,B){return ii.apply(this,arguments)}function ii(){return(ii=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:lookup",U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function Or(z){if(z)try{var B=new Date(Number(z));if(!isNaN(B.getTime()))return B.toUTCString()}catch(U){}}function cs(){return(cs=(0,Te.Z)(ae().mark(function z(B){var U,H,O,X,re,ue,ge=arguments;return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return U=ge.length>1&&void 0!==ge[1]&&ge[1],H=(0,be.m9)(B),St.next=4,H.getIdToken(U);case 4:return nt((X=Wo(O=St.sent))&&X.exp&&X.auth_time&&X.iat,H.auth,"internal-error"),ue=null==(re="object"==typeof X.firebase?X.firebase:void 0)?void 0:re.sign_in_provider,St.abrupt("return",{claims:X,token:O,authTime:Or(Rs(X.auth_time)),issuedAtTime:Or(Rs(X.iat)),expirationTime:Or(Rs(X.exp)),signInProvider:ue||null,signInSecondFactor:(null==re?void 0:re.sign_in_second_factor)||null});case 10:case"end":return St.stop()}},z)}))).apply(this,arguments)}function Rs(z){return 1e3*Number(z)}function Wo(z){var B=z.split("."),U=(0,Ve.Z)(B,3),O=U[1];if(void 0===U[0]||void 0===O||void 0===U[2])return j("JWT malformed, contained fewer than 3 sections"),null;try{var re=(0,be.tV)(O);return re?JSON.parse(re):(j("Failed to decode base64 JWT payload"),null)}catch(ue){return j("Caught error parsing JWT payload as JSON",ue),null}}function Zi(z,B){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Te.Z)(ae().mark(function z(B,U){var O=arguments;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!(O.length>2&&void 0!==O[2]&&O[2])){re.next=3;break}return re.abrupt("return",U);case 3:return re.prev=3,re.next=6,U;case 6:return re.abrupt("return",re.sent);case 9:if(re.prev=9,re.t0=re.catch(3),!(re.t0 instanceof be.ZR&&Et(re.t0))){re.next=15;break}if(B.auth.currentUser!==B){re.next=15;break}return re.next=15,B.auth.signOut();case 15:throw re.t0;case 16:case"end":return re.stop()}},z,null,[[3,9]])}))).apply(this,arguments)}function Et(z){var B=z.code;return B==="auth/".concat("user-disabled")||B==="auth/".concat("user-token-expired")}var ot=function(){function z(B){(0,v.Z)(this,z),this.user=B,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,Ae.Z)(z,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(U){var H;if(U){var O=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),O}this.errorBackoff=3e4;var re=(null!==(H=this.user.stsTokenManager.expirationTime)&&void 0!==H?H:0)-Date.now()-3e5;return Math.max(0,re)}},{key:"schedule",value:function(){var U=this,H=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var O=this.getInterval(H);this.timerId=setTimeout((0,Te.Z)(ae().mark(function X(){return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,U.iteration();case 2:case"end":return ue.stop()}},X)})),O)}}},{key:"iteration",value:(B=(0,Te.Z)(ae().mark(function H(){return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.prev=0,X.next=3,this.user.getIdToken(!0);case 3:X.next=9;break;case 5:return X.prev=5,X.t0=X.catch(0),X.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),X.abrupt("return");case 9:this.schedule();case 10:case"end":return X.stop()}},H,this,[[0,5]])})),function(){return B.apply(this,arguments)})}]),z;var B}(),gt=function(){function z(B,U){(0,v.Z)(this,z),this.createdAt=B,this.lastLoginAt=U,this._initializeTime()}return(0,Ae.Z)(z,[{key:"_initializeTime",value:function(){this.lastSignInTime=Or(this.lastLoginAt),this.creationTime=Or(this.createdAt)}},{key:"_copy",value:function(U){this.createdAt=U.createdAt,this.lastLoginAt=U.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),z}();function Yt(z){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,Te.Z)(ae().mark(function z(B){var U,H,O,X,re,ue,ge,St,Pt,pr;return ae().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return H=B.auth,Fn.next=3,B.getIdToken();case 3:return O=Fn.sent,Fn.next=6,Zi(B,pi(H,{idToken:O}));case 6:nt(null==(X=Fn.sent)?void 0:X.users.length,H,"internal-error"),B._notifyReloadListener(re=X.users[0]),ue=(null===(U=re.providerUserInfo)||void 0===U?void 0:U.length)?In(re.providerUserInfo):[],ge=ai(B.providerData,ue),St=!(B.email&&re.passwordHash||(null==ge?void 0:ge.length)),Pt=!!B.isAnonymous&&St,pr={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:ge,metadata:new gt(re.createdAt,re.lastLoginAt),isAnonymous:Pt},Object.assign(B,pr);case 17:case"end":return Fn.stop()}},z)}))).apply(this,arguments)}function Mn(){return(Mn=(0,Te.Z)(ae().mark(function z(B){var U;return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return U=(0,be.m9)(B),O.next=3,Yt(U);case 3:return O.next=5,U.auth._persistUserIfCurrent(U);case 5:U.auth._notifyListenersIfCurrent(U);case 6:case"end":return O.stop()}},z)}))).apply(this,arguments)}function ai(z,B){var U=z.filter(function(H){return!B.some(function(O){return O.providerId===H.providerId})});return[].concat((0,xe.Z)(U),(0,xe.Z)(B))}function In(z){return z.map(function(B){var U=B.providerId,H=(0,He._T)(B,["providerId"]);return{providerId:U,uid:H.rawId||"",displayName:H.displayName||null,email:H.email||null,phoneNumber:H.phoneNumber||null,photoURL:H.photoUrl||null}})}function xi(z,B){return oa.apply(this,arguments)}function oa(){return(oa=(0,Te.Z)(ae().mark(function z(B,U){var H;return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,ls(B,{},function(){var re=(0,be.xO)({grant_type:"refresh_token",refresh_token:U}).slice(1),ue=B.config,St=aa(B,ue.tokenApiHost,"/v1/token","key=".concat(ue.apiKey));return or.fetch()(St,{method:"POST",headers:{"X-Client-Version":B._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:re})});case 2:return X.abrupt("return",{accessToken:(H=X.sent).access_token,expiresIn:H.expires_in,refreshToken:H.refresh_token});case 4:case"end":return X.stop()}},z)}))).apply(this,arguments)}var Ga=function(){function z(){(0,v.Z)(this,z),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,Ae.Z)(z,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(U){nt(U.idToken,"internal-error"),nt(void 0!==U.idToken,"internal-error"),nt(void 0!==U.refreshToken,"internal-error");var H="expiresIn"in U&&void 0!==U.expiresIn?Number(U.expiresIn):function(z){var B=Wo(z);return nt(B,"internal-error"),nt(void 0!==B.exp,"internal-error"),nt(void 0!==B.iat,"internal-error"),Number(B.exp)-Number(B.iat)}(U.idToken);this.updateTokensAndExpiration(U.idToken,U.refreshToken,H)}},{key:"getToken",value:(B=(0,Te.Z)(ae().mark(function H(O){var X,re=arguments;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(X=re.length>1&&void 0!==re[1]&&re[1],nt(!this.accessToken||this.refreshToken,O,"user-token-expired"),X||!this.accessToken||this.isExpired){ge.next=4;break}return ge.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){ge.next=8;break}return ge.next=7,this.refresh(O,this.refreshToken);case 7:return ge.abrupt("return",this.accessToken);case 8:return ge.abrupt("return",null);case 9:case"end":return ge.stop()}},H,this)})),function(H){return B.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var B=(0,Te.Z)(ae().mark(function H(O,X){var re;return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,xi(O,X);case 2:this.updateTokensAndExpiration((re=Pt.sent).accessToken,re.refreshToken,Number(re.expiresIn));case 7:case"end":return Pt.stop()}},H,this)}));return function(H,O){return B.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(U,H,O){this.refreshToken=H||null,this.accessToken=U||null,this.expirationTime=Date.now()+1e3*O}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(U){this.accessToken=U.accessToken,this.refreshToken=U.refreshToken,this.expirationTime=U.expirationTime}},{key:"_clone",value:function(){return Object.assign(new z,this.toJSON())}},{key:"_performRefresh",value:function(){return Ot("not implemented")}}],[{key:"fromJSON",value:function(U,H){var O=H.refreshToken,X=H.accessToken,re=H.expirationTime,ue=new z;return O&&(nt("string"==typeof O,"internal-error",{appName:U}),ue.refreshToken=O),X&&(nt("string"==typeof X,"internal-error",{appName:U}),ue.accessToken=X),re&&(nt("number"==typeof re,"internal-error",{appName:U}),ue.expirationTime=re),ue}}]),z;var B}();function wt(z,B){nt("string"==typeof z||void 0===z,"internal-error",{appName:B})}var Ft=function(){function z(B){(0,v.Z)(this,z);var U=B.uid,H=B.auth,O=B.stsTokenManager,X=(0,He._T)(B,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ot(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=U,this.auth=H,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.metadata=new gt(X.createdAt||void 0,X.lastLoginAt||void 0)}return(0,Ae.Z)(z,[{key:"getIdToken",value:(B=(0,Te.Z)(ae().mark(function H(O){var X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,Zi(this,this.stsTokenManager.getToken(this.auth,O));case 2:if(nt(X=ue.sent,this.auth,"internal-error"),this.accessToken===X){ue.next=9;break}return this.accessToken=X,ue.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return ue.abrupt("return",X);case 10:case"end":return ue.stop()}},H,this)})),function(H){return B.apply(this,arguments)})},{key:"getIdTokenResult",value:function(U){return function(z){return cs.apply(this,arguments)}(this,U)}},{key:"reload",value:function(){return function(z){return Mn.apply(this,arguments)}(this)}},{key:"_assign",value:function(U){this!==U&&(nt(this.uid===U.uid,this.auth,"internal-error"),this.displayName=U.displayName,this.photoURL=U.photoURL,this.email=U.email,this.emailVerified=U.emailVerified,this.phoneNumber=U.phoneNumber,this.isAnonymous=U.isAnonymous,this.tenantId=U.tenantId,this.providerData=U.providerData.map(function(H){return Object.assign({},H)}),this.metadata._copy(U.metadata),this.stsTokenManager._assign(U.stsTokenManager))}},{key:"_clone",value:function(U){return new z(Object.assign(Object.assign({},this),{auth:U,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(U){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=U,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(U){this.reloadListener?this.reloadListener(U):this.reloadUserInfo=U}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X,re,ue=arguments;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(X=ue.length>1&&void 0!==ue[1]&&ue[1],re=!1,O.idToken&&O.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(O),re=!0),!X){Fe.next=6;break}return Fe.next=6,Yt(this);case 6:return Fe.next=8,this.auth._persistUserIfCurrent(this);case 8:re&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return Fe.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"delete",value:function(){var B=(0,Te.Z)(ae().mark(function H(){var O;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,this.getIdToken();case 2:return O=re.sent,re.next=5,Zi(this,Er(this.auth,{idToken:O}));case 5:return this.stsTokenManager.clearRefreshToken(),re.abrupt("return",this.auth.signOut());case 7:case"end":return re.stop()}},H,this)}));return function(){return B.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(U){return Object.assign({},U)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(U,H){var O,X,re,ue,ge,Fe,St,Pt,pr=null!==(O=H.displayName)&&void 0!==O?O:void 0,Pn=null!==(X=H.email)&&void 0!==X?X:void 0,Fn=null!==(re=H.phoneNumber)&&void 0!==re?re:void 0,Ar=null!==(ue=H.photoURL)&&void 0!==ue?ue:void 0,Na=null!==(ge=H.tenantId)&&void 0!==ge?ge:void 0,pa=null!==(Fe=H._redirectEventId)&&void 0!==Fe?Fe:void 0,Al=null!==(St=H.createdAt)&&void 0!==St?St:void 0,si=null!==(Pt=H.lastLoginAt)&&void 0!==Pt?Pt:void 0,js=H.uid,no=H.emailVerified,tl=H.isAnonymous,_p=H.providerData,os=H.stsTokenManager;nt(js&&os,U,"internal-error");var kv=Ga.fromJSON(this.name,os);nt("string"==typeof js,U,"internal-error"),wt(pr,U.name),wt(Pn,U.name),nt("boolean"==typeof no,U,"internal-error"),nt("boolean"==typeof tl,U,"internal-error"),wt(Fn,U.name),wt(Ar,U.name),wt(Na,U.name),wt(pa,U.name),wt(Al,U.name),wt(si,U.name);var bp=new z({uid:js,auth:U,email:Pn,emailVerified:no,displayName:pr,isAnonymous:tl,photoURL:Ar,phoneNumber:Fn,tenantId:Na,stsTokenManager:kv,createdAt:Al,lastLoginAt:si});return _p&&Array.isArray(_p)&&(bp.providerData=_p.map(function(S0){return Object.assign({},S0)})),pa&&(bp._redirectEventId=pa),bp}},{key:"_fromIdTokenResponse",value:function(){var B=(0,Te.Z)(ae().mark(function H(O,X){var re,ue,ge,Fe=arguments;return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return re=Fe.length>2&&void 0!==Fe[2]&&Fe[2],(ue=new Ga).updateFromServerResponse(X),ge=new z({uid:X.localId,auth:O,stsTokenManager:ue,isAnonymous:re}),Pt.next=6,Yt(ge);case 6:return Pt.abrupt("return",ge);case 7:case"end":return Pt.stop()}},H)}));return function(H,O){return B.apply(this,arguments)}}()}]),z;var B}(),$e=function(){var z=function(){function B(){(0,v.Z)(this,B),this.type="NONE",this.storage={}}return(0,Ae.Z)(B,[{key:"_isAvailable",value:(U=(0,Te.Z)(ae().mark(function O(){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.abrupt("return",!0);case 1:case"end":return re.stop()}},O)})),function(){return U.apply(this,arguments)})},{key:"_set",value:function(){var U=(0,Te.Z)(ae().mark(function O(X,re){return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:this.storage[X]=re;case 1:case"end":return ge.stop()}},O,this)}));return function(O,X){return U.apply(this,arguments)}}()},{key:"_get",value:function(){var U=(0,Te.Z)(ae().mark(function O(X){var re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.abrupt("return",void 0===(re=this.storage[X])?null:re);case 2:case"end":return ge.stop()}},O,this)}));return function(O){return U.apply(this,arguments)}}()},{key:"_remove",value:function(){var U=(0,Te.Z)(ae().mark(function O(X){return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:delete this.storage[X];case 1:case"end":return ue.stop()}},O,this)}));return function(O){return U.apply(this,arguments)}}()},{key:"_addListener",value:function(H,O){}},{key:"_removeListener",value:function(H,O){}}]),B;var U}();return z.type="NONE",z}();function kt(z,B,U){return"firebase".concat(":",z,":").concat(B,":").concat(U)}var rn=function(){function z(B,U,H){(0,v.Z)(this,z),this.persistence=B,this.auth=U,this.userKey=H;var O=this.auth,X=O.config,re=O.name;this.fullUserKey=kt(this.userKey,X.apiKey,re),this.fullPersistenceKey=kt("persistence",X.apiKey,re),this.boundEventHandler=U._onStorageEvent.bind(U),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,Ae.Z)(z,[{key:"setCurrentUser",value:function(U){return this.persistence._set(this.fullUserKey,U.toJSON())}},{key:"getCurrentUser",value:(B=(0,Te.Z)(ae().mark(function H(){var O;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,this.persistence._get(this.fullUserKey);case 2:return re.abrupt("return",(O=re.sent)?Ft._fromJSON(this.auth,O):null);case 4:case"end":return re.stop()}},H,this)})),function(){return B.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(this.persistence!==O){ue.next=2;break}return ue.abrupt("return");case 2:return ue.next=4,this.getCurrentUser();case 4:return X=ue.sent,ue.next=7,this.removeCurrentUser();case 7:if(this.persistence=O,!X){ue.next=10;break}return ue.abrupt("return",this.setCurrentUser(X));case 10:case"end":return ue.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var B=(0,Te.Z)(ae().mark(function H(O,X){var re,ue,ge,Fe,St,Pt,pr,Pn,Fn,Ar,Na,pa=arguments;return ae().wrap(function(si){for(;;)switch(si.prev=si.next){case 0:if(re=pa.length>2&&void 0!==pa[2]?pa[2]:"authUser",X.length){si.next=3;break}return si.abrupt("return",new z(ni($e),O,re));case 3:return si.next=5,Promise.all(X.map(function(){var js=(0,Te.Z)(ae().mark(function no(tl){return ae().wrap(function(os){for(;;)switch(os.prev=os.next){case 0:return os.next=2,tl._isAvailable();case 2:if(!os.sent){os.next=4;break}return os.abrupt("return",tl);case 4:return os.abrupt("return",void 0);case 5:case"end":return os.stop()}},no)}));return function(no){return js.apply(this,arguments)}}()));case 5:ue=si.sent.filter(function(js){return js}),ge=ue[0]||ni($e),Fe=kt(re,O.config.apiKey,O.name),St=null,Pt=(0,oe.Z)(X),si.prev=10,Pt.s();case 12:if((pr=Pt.n()).done){si.next=29;break}return Pn=pr.value,si.prev=14,si.next=17,Pn._get(Fe);case 17:if(!(Fn=si.sent)){si.next=23;break}return Ar=Ft._fromJSON(O,Fn),Pn!==ge&&(St=Ar),ge=Pn,si.abrupt("break",29);case 23:si.next=27;break;case 25:si.prev=25,si.t0=si.catch(14);case 27:si.next=12;break;case 29:si.next=34;break;case 31:si.prev=31,si.t1=si.catch(10),Pt.e(si.t1);case 34:return si.prev=34,Pt.f(),si.finish(34);case 37:if(Na=ue.filter(function(js){return js._shouldAllowMigration}),ge._shouldAllowMigration&&Na.length){si.next=40;break}return si.abrupt("return",new z(ge,O,re));case 40:if(ge=Na[0],!St){si.next=44;break}return si.next=44,ge._set(Fe,St.toJSON());case 44:return si.next=46,Promise.all(X.map(function(){var js=(0,Te.Z)(ae().mark(function no(tl){return ae().wrap(function(os){for(;;)switch(os.prev=os.next){case 0:if(tl===ge){os.next=8;break}return os.prev=1,os.next=4,tl._remove(Fe);case 4:os.next=8;break;case 6:os.prev=6,os.t0=os.catch(1);case 8:case"end":return os.stop()}},no,null,[[1,6]])}));return function(no){return js.apply(this,arguments)}}()));case 46:return si.abrupt("return",new z(ge,O,re));case 47:case"end":return si.stop()}},H,null,[[10,31,34,37],[14,25]])}));return function(H,O){return B.apply(this,arguments)}}()}]),z;var B}();function Jt(z){var B=z.toLowerCase();if(B.includes("opera/")||B.includes("opr/")||B.includes("opios/"))return"Opera";if(Ha(B))return"IEMobile";if(B.includes("msie")||B.includes("trident/"))return"IE";if(B.includes("edge/"))return"Edge";if(on(B))return"Firefox";if(B.includes("silk/"))return"Silk";if(Os(B))return"Blackberry";if(Yr(B))return"Webos";if(Tn(B))return"Safari";if((B.includes("chrome/")||cr(B))&&!B.includes("edge/"))return"Chrome";if(Mi(B))return"Android";var H=z.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==H?void 0:H.length)?H[1]:"Other"}function on(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/firefox\//i.test(z)}function Tn(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)(),B=z.toLowerCase();return B.includes("safari/")&&!B.includes("chrome/")&&!B.includes("crios/")&&!B.includes("android")}function cr(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/crios\//i.test(z)}function Ha(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/iemobile/i.test(z)}function Mi(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/android/i.test(z)}function Os(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/blackberry/i.test(z)}function Yr(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/webos/i.test(z)}function Bi(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/iphone|ipad|ipod/i.test(z)}function hs(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(z)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(z)}function Pa(){var B,z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return Bi(z)&&!!(null===(B=window.navigator)||void 0===B?void 0:B.standalone)}function Nl(){return(0,be.w1)()&&10===document.documentMode}function Ea(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,be.z$)();return Bi(z)||Mi(z)||Yr(z)||Os(z)||/windows phone/i.test(z)||Ha(z)}function Dr(z){var U,B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(z){case"Browser":U=Jt((0,be.z$)());break;case"Worker":U="".concat(Jt((0,be.z$)()),"-").concat(z);break;default:U=z}var H=B.length?B.join(","):"FirebaseCore-web";return"".concat(U,"/","JsCore","/").concat(Ne.SDK_VERSION,"/").concat(H)}var Ii=function(){function z(B,U){(0,v.Z)(this,z),this.app=B,this.config=U,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ri(this),this.idTokenSubscription=new Ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=B.name,this.clientVersion=U.sdkClientVersion}return(0,Ae.Z)(z,[{key:"_initializeWithPersistence",value:function(U,H){var O=this;return H&&(this._popupRedirectResolver=ni(H)),this._initializationPromise=this.queue((0,Te.Z)(ae().mark(function X(){var re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(!O._deleted){ge.next=2;break}return ge.abrupt("return");case 2:return ge.next=4,rn.create(O,U);case 4:if(O.persistenceManager=ge.sent,!O._deleted){ge.next=7;break}return ge.abrupt("return");case 7:if(!(null===(re=O._popupRedirectResolver)||void 0===re?void 0:re._shouldInitProactively)){ge.next=10;break}return ge.next=10,O._popupRedirectResolver._initialize(O);case 10:return ge.next=12,O.initializeCurrentUser(H);case 12:if(!O._deleted){ge.next=14;break}return ge.abrupt("return");case 14:O._isInitialized=!0;case 15:case"end":return ge.stop()}},X)}))),this._initializationPromise}},{key:"_onStorageEvent",value:(B=(0,Te.Z)(ae().mark(function H(){var O;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this._deleted){re.next=2;break}return re.abrupt("return");case 2:return re.next=4,this.assertedPersistence.getCurrentUser();case 4:if(O=re.sent,this.currentUser||O){re.next=7;break}return re.abrupt("return");case 7:if(!this.currentUser||!O||this.currentUser.uid!==O.uid){re.next=12;break}return this._currentUser._assign(O),re.next=11,this.currentUser.getIdToken();case 11:return re.abrupt("return");case 12:return re.next=14,this._updateCurrentUser(O);case 14:case"end":return re.stop()}},H,this)})),function(){return B.apply(this,arguments)})},{key:"initializeCurrentUser",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X,re,ue,ge,Fe;return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,this.assertedPersistence.getCurrentUser();case 2:if(re=Pt.sent,!O||!this.config.authDomain){Pt.next=12;break}return Pt.next=6,this.getOrInitRedirectPersistenceManager();case 6:return ue=null===(X=this.redirectUser)||void 0===X?void 0:X._redirectEventId,ge=null==re?void 0:re._redirectEventId,Pt.next=10,this.tryRedirectSignIn(O);case 10:Fe=Pt.sent,(!ue||ue===ge)&&(null==Fe?void 0:Fe.user)&&(re=Fe.user);case 12:if(re){Pt.next=14;break}return Pt.abrupt("return",this.directlySetCurrentUser(null));case 14:if(re._redirectEventId){Pt.next=16;break}return Pt.abrupt("return",this.reloadAndSetCurrentUserOrClear(re));case 16:return nt(this._popupRedirectResolver,this,"argument-error"),Pt.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==re._redirectEventId){Pt.next=21;break}return Pt.abrupt("return",this.directlySetCurrentUser(re));case 21:return Pt.abrupt("return",this.reloadAndSetCurrentUserOrClear(re));case 22:case"end":return Pt.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return X=null,ue.prev=1,ue.next=4,this._popupRedirectResolver._completeRedirectFn(this,O,!0);case 4:X=ue.sent,ue.next=11;break;case 7:return ue.prev=7,ue.t0=ue.catch(1),ue.next=11,this._setRedirectUser(null);case 11:return ue.abrupt("return",X);case 12:case"end":return ue.stop()}},H,this,[[1,7]])}));return function(H){return B.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,re.next=3,Yt(O);case 3:re.next=9;break;case 5:if(re.prev=5,re.t0=re.catch(0),re.t0.code==="auth/".concat("network-request-failed")){re.next=9;break}return re.abrupt("return",this.directlySetCurrentUser(null));case 9:return re.abrupt("return",this.directlySetCurrentUser(O));case 10:case"end":return re.stop()}},H,this,[[0,5]])}));return function(H){return B.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var z=navigator;return z.languages&&z.languages[0]||z.language||null}()}},{key:"_delete",value:function(){var B=(0,Te.Z)(ae().mark(function H(){return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:this._deleted=!0;case 1:case"end":return X.stop()}},H,this)}));return function(){return B.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return(X=O?(0,be.m9)(O):null)&&nt(X.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),ue.abrupt("return",this._updateCurrentUser(X&&X._clone(this)));case 3:case"end":return ue.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X=this;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(!this._deleted){ue.next=2;break}return ue.abrupt("return");case 2:return O&&nt(this.tenantId===O.tenantId,this,"tenant-id-mismatch"),ue.abrupt("return",this.queue((0,Te.Z)(ae().mark(function ge(){return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return St.next=2,X.directlySetCurrentUser(O);case 2:X.notifyAuthListeners();case 3:case"end":return St.stop()}},ge)}))));case 4:case"end":return ue.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"signOut",value:function(){var B=(0,Te.Z)(ae().mark(function H(){return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){X.next=3;break}return X.next=3,this._setRedirectUser(null);case 3:return X.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return X.stop()}},H,this)}));return function(){return B.apply(this,arguments)}}()},{key:"setPersistence",value:function(U){var H=this;return this.queue((0,Te.Z)(ae().mark(function O(){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,H.assertedPersistence.setPersistence(ni(U));case 2:case"end":return re.stop()}},O)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(U){this._errorFactory=new be.LL("auth","Firebase",U())}},{key:"onAuthStateChanged",value:function(U,H,O){return this.registerStateListener(this.authStateSubscription,U,H,O)}},{key:"onIdTokenChanged",value:function(U,H,O){return this.registerStateListener(this.idTokenSubscription,U,H,O)}},{key:"toJSON",value:function(){var U;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(U=this._currentUser)||void 0===U?void 0:U.toJSON()}}},{key:"_setRedirectUser",value:function(){var B=(0,Te.Z)(ae().mark(function H(O,X){var re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,this.getOrInitRedirectPersistenceManager(X);case 2:return re=ge.sent,ge.abrupt("return",null===O?re.removeCurrentUser():re.setCurrentUser(O));case 4:case"end":return ge.stop()}},H,this)}));return function(H,O){return B.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(this.redirectPersistenceManager){ue.next=9;break}return nt(X=O&&ni(O)||this._popupRedirectResolver,this,"argument-error"),ue.next=5,rn.create(this,[ni(X._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=ue.sent,ue.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=ue.sent;case 9:return ue.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return ue.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(!this._isInitialized){ge.next=3;break}return ge.next=3,this.queue((0,Te.Z)(ae().mark(function Fe(){return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:case"end":return Pt.stop()}},Fe)})));case 3:if((null===(X=this._currentUser)||void 0===X?void 0:X._redirectEventId)!==O){ge.next=5;break}return ge.abrupt("return",this._currentUser);case 5:if((null===(re=this.redirectUser)||void 0===re?void 0:re._redirectEventId)!==O){ge.next=7;break}return ge.abrupt("return",this.redirectUser);case 7:return ge.abrupt("return",null);case 8:case"end":return ge.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X=this;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(O!==this.currentUser){ue.next=2;break}return ue.abrupt("return",this.queue((0,Te.Z)(ae().mark(function ge(){return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return St.abrupt("return",X.directlySetCurrentUser(O));case 1:case"end":return St.stop()}},ge)}))));case 2:case"end":return ue.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(U){U===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var U,H;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var O=null!==(H=null===(U=this.currentUser)||void 0===U?void 0:U.uid)&&void 0!==H?H:null;this.lastNotifiedUid!==O&&(this.lastNotifiedUid=O,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(U,H,O,X){var re=this;if(this._deleted)return function(){};var ue="function"==typeof H?H:H.next.bind(H),ge=this._isInitialized?Promise.resolve():this._initializationPromise;return nt(ge,this,"internal-error"),ge.then(function(){return ue(re.currentUser)}),"function"==typeof H?U.addObserver(H,O,X):U.addObserver(H)}},{key:"directlySetCurrentUser",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(this.currentUser&&this.currentUser!==O&&(this._currentUser._stopProactiveRefresh(),O&&this.isProactiveRefreshEnabled&&O._startProactiveRefresh()),this.currentUser=O,!O){re.next=7;break}return re.next=5,this.assertedPersistence.setCurrentUser(O);case 5:re.next=9;break;case 7:return re.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return re.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"queue",value:function(U){return this.operations=this.operations.then(U,U),this.operations}},{key:"assertedPersistence",get:function(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(U){!U||this.frameworks.includes(U)||(this.frameworks.push(U),this.frameworks.sort(),this.clientVersion=Dr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),z;var B}();function ir(z){return(0,be.m9)(z)}var Ri=function(){function z(B){var U=this;(0,v.Z)(this,z),this.auth=B,this.observer=null,this.addObserver=(0,be.ne)(function(H){return U.observer=H})}return(0,Ae.Z)(z,[{key:"next",get:function(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),z}();function Fa(z,B,U){var H=ir(z);nt(H._canInitEmulator,H,"emulator-config-failed"),nt(/^https?:\/\//.test(B),H,"invalid-emulator-scheme");var O=!!(null==U?void 0:U.disableWarnings),X=Gs(B),re=function(z){var B=Gs(z),U=/(\/\/)?([^?#/]+)/.exec(z.substr(B.length));if(!U)return{host:"",port:null};var H=U[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(H);if(O){var X=O[1];return{host:X,port:xu(H.substr(X.length+1))}}var re=H.split(":"),ue=(0,Ve.Z)(re,2);return{host:ue[0],port:xu(ue[1])}}(B),ue=re.host,ge=re.port,Fe=null===ge?"":":".concat(ge);H.config.emulator={url:"".concat(X,"//").concat(ue).concat(Fe,"/")},H.settings.appVerificationDisabledForTesting=!0,H.emulatorConfig=Object.freeze({host:ue,port:ge,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:O})}),function(z){function B(){var U=document.createElement("p"),H=U.style;U.innerText="Running in emulator mode. Do not use with production credentials.",H.position="fixed",H.width="100%",H.backgroundColor="#ffffff",H.border=".1em solid #000000",H.color="#b50000",H.bottom="0px",H.left="0px",H.margin="0px",H.zIndex="10000",H.textAlign="center",U.classList.add("firebase-emulator-warning"),document.body.appendChild(U)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!z&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",B):B())}(O)}function Gs(z){var B=z.indexOf(":");return B<0?"":z.substr(0,B+1)}function xu(z){if(!z)return null;var B=Number(z);return isNaN(B)?null:B}var $n=function(){function z(B,U){(0,v.Z)(this,z),this.providerId=B,this.signInMethod=U}return(0,Ae.Z)(z,[{key:"toJSON",value:function(){return Ot("not implemented")}},{key:"_getIdTokenResponse",value:function(U){return Ot("not implemented")}},{key:"_linkToIdToken",value:function(U,H){return Ot("not implemented")}},{key:"_getReauthenticationResolver",value:function(U){return Ot("not implemented")}}]),z}();function Zl(z,B){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:resetPassword",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function as(z,B){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:update",U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function Ls(z,B){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:update",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function Ui(z,B){return ya.apply(this,arguments)}function ya(){return(ya=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",ia(B,"POST","/v1/accounts:signInWithPassword",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function vi(z,B){return qu.apply(this,arguments)}function qu(){return(qu=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:sendOobCode",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function sh(z,B){return fu.apply(this,arguments)}function fu(){return(fu=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",vi(B,U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function gl(z,B){return du.apply(this,arguments)}function du(){return(du=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",vi(B,U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function Yu(z,B){return pu.apply(this,arguments)}function pu(){return(pu=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",vi(B,U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function fs(z,B){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",vi(B,U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function $a(z,B){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",ia(B,"POST","/v1/accounts:signInWithEmailLink",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function $h(z,B){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",ia(B,"POST","/v1/accounts:signInWithEmailLink",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}var po=function(z){(0,M.Z)(U,z);var H,B=(0,x.Z)(U);function U(H,O,X){var re,ue=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,v.Z)(this,U),(re=B.call(this,"password",X))._email=H,re._password=O,re._tenantId=ue,re}return(0,Ae.Z)(U,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(H=(0,Te.Z)(ae().mark(function X(re){return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:ge.t0=this.signInMethod,ge.next="password"===ge.t0?3:"emailLink"===ge.t0?4:5;break;case 3:return ge.abrupt("return",Ui(re,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return ge.abrupt("return",$a(re,{email:this._email,oobCode:this._password}));case 5:ie(re,"internal-error");case 6:case"end":return ge.stop()}},X,this)})),function(X){return H.apply(this,arguments)})},{key:"_linkToIdToken",value:function(){var H=(0,Te.Z)(ae().mark(function X(re,ue){return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:Fe.t0=this.signInMethod,Fe.next="password"===Fe.t0?3:"emailLink"===Fe.t0?4:5;break;case 3:return Fe.abrupt("return",as(re,{idToken:ue,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return Fe.abrupt("return",$h(re,{idToken:ue,email:this._email,oobCode:this._password}));case 5:ie(re,"internal-error");case 6:case"end":return Fe.stop()}},X,this)}));return function(X,re){return H.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(O){return this._getIdTokenResponse(O)}}],[{key:"_fromEmailAndPassword",value:function(O,X){return new U(O,X,"password")}},{key:"_fromEmailAndCode",value:function(O,X){var re=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new U(O,X,"emailLink",re)}},{key:"fromJSON",value:function(O){var X="string"==typeof O?JSON.parse(O):O;if((null==X?void 0:X.email)&&(null==X?void 0:X.password)){if("password"===X.signInMethod)return this._fromEmailAndPassword(X.email,X.password);if("emailLink"===X.signInMethod)return this._fromEmailAndCode(X.email,X.password,X.tenantId)}return null}}]),U}($n);function Gr(z,B){return oh.apply(this,arguments)}function oh(){return(oh=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",ia(B,"POST","/v1/accounts:signInWithIdp",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}var Ku=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(){var H;return(0,v.Z)(this,U),(H=B.apply(this,arguments)).pendingToken=null,H}return(0,Ae.Z)(U,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(O){return Gr(O,this.buildRequest())}},{key:"_linkToIdToken",value:function(O,X){var re=this.buildRequest();return re.idToken=X,Gr(O,re)}},{key:"_getReauthenticationResolver",value:function(O){var X=this.buildRequest();return X.autoCreate=!1,Gr(O,X)}},{key:"buildRequest",value:function(){var O={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)O.pendingToken=this.pendingToken;else{var X={};this.idToken&&(X.id_token=this.idToken),this.accessToken&&(X.access_token=this.accessToken),this.secret&&(X.oauth_token_secret=this.secret),X.providerId=this.providerId,this.nonce&&!this.pendingToken&&(X.nonce=this.nonce),O.postBody=(0,be.xO)(X)}return O}}],[{key:"_fromParams",value:function(O){var X=new U(O.providerId,O.signInMethod);return O.idToken||O.accessToken?(O.idToken&&(X.idToken=O.idToken),O.accessToken&&(X.accessToken=O.accessToken),O.nonce&&!O.pendingToken&&(X.nonce=O.nonce),O.pendingToken&&(X.pendingToken=O.pendingToken)):O.oauthToken&&O.oauthTokenSecret?(X.accessToken=O.oauthToken,X.secret=O.oauthTokenSecret):ie("argument-error"),X}},{key:"fromJSON",value:function(O){var X="string"==typeof O?JSON.parse(O):O,re=X.providerId,ue=X.signInMethod,ge=(0,He._T)(X,["providerId","signInMethod"]);if(!re||!ue)return null;var Fe=new U(re,ue);return Object.assign(Fe,ge),Fe}}]),U}($n);function uh(z,B){return vu.apply(this,arguments)}function vu(){return(vu=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:sendVerificationCode",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function yl(){return(yl=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",ia(B,"POST","/v1/accounts:signInWithPhoneNumber",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function $u(){return($u=(0,Te.Z)(ae().mark(function z(B,U){var H;return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,ia(B,"POST","/v1/accounts:signInWithPhoneNumber",Xr(B,U));case 2:if(!(H=X.sent).temporaryProof){X.next=5;break}throw is(B,"account-exists-with-different-credential",H);case 5:return X.abrupt("return",H);case 6:case"end":return X.stop()}},z)}))).apply(this,arguments)}var Qh=(0,ce.Z)({},"USER_NOT_FOUND","user-not-found");function Jh(){return(Jh=(0,Te.Z)(ae().mark(function z(B,U){var H;return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return H=Object.assign(Object.assign({},U),{operation:"REAUTH"}),X.abrupt("return",ia(B,"POST","/v1/accounts:signInWithPhoneNumber",Xr(B,H),Qh));case 2:case"end":return X.stop()}},z)}))).apply(this,arguments)}var ef=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H){var O;return(0,v.Z)(this,U),(O=B.call(this,"phone","phone")).params=H,O}return(0,Ae.Z)(U,[{key:"_getIdTokenResponse",value:function(O){return function(z,B){return yl.apply(this,arguments)}(O,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(O,X){return function(z,B){return $u.apply(this,arguments)}(O,Object.assign({idToken:X},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(O){return function(z,B){return Jh.apply(this,arguments)}(O,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var O=this.params,X=O.temporaryProof,re=O.phoneNumber;return X&&re?{temporaryProof:X,phoneNumber:re}:{sessionInfo:O.verificationId,code:O.verificationCode}}},{key:"toJSON",value:function(){var O={providerId:this.providerId};return this.params.phoneNumber&&(O.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(O.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(O.verificationCode=this.params.verificationCode),this.params.verificationId&&(O.verificationId=this.params.verificationId),O}}],[{key:"_fromVerification",value:function(O,X){return new U({verificationId:O,verificationCode:X})}},{key:"_fromTokenResponse",value:function(O,X){return new U({phoneNumber:O,temporaryProof:X})}},{key:"fromJSON",value:function(O){"string"==typeof O&&(O=JSON.parse(O));var re=O.verificationId,ue=O.verificationCode,ge=O.phoneNumber,Fe=O.temporaryProof;return ue||re||ge||Fe?new U({verificationId:re,verificationCode:ue,phoneNumber:ge,temporaryProof:Fe}):null}}]),U}($n),Bl=function(){function z(B){(0,v.Z)(this,z);var U,H,O,X,re,ue,ge=(0,be.zd)((0,be.pd)(B)),Fe=null!==(U=ge.apiKey)&&void 0!==U?U:null,St=null!==(H=ge.oobCode)&&void 0!==H?H:null,Pt=function(z){switch(z){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=ge.mode)&&void 0!==O?O:null);nt(Fe&&St&&Pt,"argument-error"),this.apiKey=Fe,this.operation=Pt,this.code=St,this.continueUrl=null!==(X=ge.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(re=ge.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(ue=ge.tenantId)&&void 0!==ue?ue:null}return(0,Ae.Z)(z,null,[{key:"parseLink",value:function(U){var H=function(z){var B=(0,be.zd)((0,be.pd)(z)).link,U=B?(0,be.zd)((0,be.pd)(B)).deep_link_id:null,H=(0,be.zd)((0,be.pd)(z)).deep_link_id;return(H?(0,be.zd)((0,be.pd)(H)).link:null)||H||U||B||z}(U);try{return new z(H)}catch(O){return null}}}]),z}(),Uf=function(){var z=function(){function B(){(0,v.Z)(this,B),this.providerId=B.PROVIDER_ID}return(0,Ae.Z)(B,null,[{key:"credential",value:function(H,O){return po._fromEmailAndPassword(H,O)}},{key:"credentialWithLink",value:function(H,O){var X=Bl.parseLink(O);return nt(X,"argument-error"),po._fromEmailAndCode(H,X.code,X.tenantId)}}]),B}();return z.PROVIDER_ID="password",z.EMAIL_PASSWORD_SIGN_IN_METHOD="password",z.EMAIL_LINK_SIGN_IN_METHOD="emailLink",z}(),ks=function(){function z(B){(0,v.Z)(this,z),this.providerId=B,this.defaultLanguageCode=null,this.customParameters={}}return(0,Ae.Z)(z,[{key:"setDefaultLanguage",value:function(U){this.defaultLanguageCode=U}},{key:"setCustomParameters",value:function(U){return this.customParameters=U,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),z}(),$=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(){var H;return(0,v.Z)(this,U),(H=B.apply(this,arguments)).scopes=[],H}return(0,Ae.Z)(U,[{key:"addScope",value:function(O){return this.scopes.includes(O)||this.scopes.push(O),this}},{key:"getScopes",value:function(){return(0,xe.Z)(this.scopes)}}]),U}(ks),P=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(){return(0,v.Z)(this,U),B.apply(this,arguments)}return(0,Ae.Z)(U,[{key:"credential",value:function(O){return this._credential(O)}},{key:"_credential",value:function(O){return nt(O.idToken||O.accessToken,"argument-error"),Ku._fromParams(Object.assign(Object.assign({},O),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(O){var X="string"==typeof O?JSON.parse(O):O;return nt("providerId"in X&&"signInMethod"in X,"argument-error"),Ku._fromParams(X)}},{key:"credentialFromResult",value:function(O){return U.oauthCredentialFromTaggedObject(O)}},{key:"credentialFromError",value:function(O){return U.oauthCredentialFromTaggedObject(O.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(O){var X=O._tokenResponse;if(!X)return null;var re=X.oauthIdToken,ue=X.oauthAccessToken,Fe=X.pendingToken,St=X.nonce,Pt=X.providerId;if(!ue&&!X.oauthTokenSecret&&!re&&!Fe||!Pt)return null;try{return new U(Pt)._credential({idToken:re,accessToken:ue,rawNonce:St,pendingToken:Fe})}catch(pr){return null}}}]),U}($),q=function(){var z=function(B){(0,M.Z)(H,B);var U=(0,x.Z)(H);function H(){return(0,v.Z)(this,H),U.call(this,"facebook.com")}return(0,Ae.Z)(H,null,[{key:"credential",value:function(X){return Ku._fromParams({providerId:H.PROVIDER_ID,signInMethod:H.FACEBOOK_SIGN_IN_METHOD,accessToken:X})}},{key:"credentialFromResult",value:function(X){return H.credentialFromTaggedObject(X)}},{key:"credentialFromError",value:function(X){return H.credentialFromTaggedObject(X.customData||{})}},{key:"credentialFromTaggedObject",value:function(X){var re=X._tokenResponse;if(!re||!("oauthAccessToken"in re)||!re.oauthAccessToken)return null;try{return H.credential(re.oauthAccessToken)}catch(ue){return null}}}]),H}($);return z.FACEBOOK_SIGN_IN_METHOD="facebook.com",z.PROVIDER_ID="facebook.com",z}(),J=function(){var z=function(B){(0,M.Z)(H,B);var U=(0,x.Z)(H);function H(){var O;return(0,v.Z)(this,H),(O=U.call(this,"google.com")).addScope("profile"),O}return(0,Ae.Z)(H,null,[{key:"credential",value:function(X,re){return Ku._fromParams({providerId:H.PROVIDER_ID,signInMethod:H.GOOGLE_SIGN_IN_METHOD,idToken:X,accessToken:re})}},{key:"credentialFromResult",value:function(X){return H.credentialFromTaggedObject(X)}},{key:"credentialFromError",value:function(X){return H.credentialFromTaggedObject(X.customData||{})}},{key:"credentialFromTaggedObject",value:function(X){var re=X._tokenResponse;if(!re)return null;var ue=re.oauthIdToken,ge=re.oauthAccessToken;if(!ue&&!ge)return null;try{return H.credential(ue,ge)}catch(Fe){return null}}}]),H}($);return z.GOOGLE_SIGN_IN_METHOD="google.com",z.PROVIDER_ID="google.com",z}(),he=function(){var z=function(B){(0,M.Z)(H,B);var U=(0,x.Z)(H);function H(){return(0,v.Z)(this,H),U.call(this,"github.com")}return(0,Ae.Z)(H,null,[{key:"credential",value:function(X){return Ku._fromParams({providerId:H.PROVIDER_ID,signInMethod:H.GITHUB_SIGN_IN_METHOD,accessToken:X})}},{key:"credentialFromResult",value:function(X){return H.credentialFromTaggedObject(X)}},{key:"credentialFromError",value:function(X){return H.credentialFromTaggedObject(X.customData||{})}},{key:"credentialFromTaggedObject",value:function(X){var re=X._tokenResponse;if(!re||!("oauthAccessToken"in re)||!re.oauthAccessToken)return null;try{return H.credential(re.oauthAccessToken)}catch(ue){return null}}}]),H}($);return z.GITHUB_SIGN_IN_METHOD="github.com",z.PROVIDER_ID="github.com",z}(),De=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H,O){var X;return(0,v.Z)(this,U),(X=B.call(this,H,H)).pendingToken=O,X}return(0,Ae.Z)(U,[{key:"_getIdTokenResponse",value:function(O){return Gr(O,this.buildRequest())}},{key:"_linkToIdToken",value:function(O,X){var re=this.buildRequest();return re.idToken=X,Gr(O,re)}},{key:"_getReauthenticationResolver",value:function(O){var X=this.buildRequest();return X.autoCreate=!1,Gr(O,X)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(O){var X="string"==typeof O?JSON.parse(O):O,re=X.providerId,ue=X.signInMethod,ge=X.pendingToken;return re&&ue&&ge&&re===ue?new U(re,ge):null}},{key:"_create",value:function(O,X){return new U(O,X)}}]),U}($n),ut=function(){var z=function(B){(0,M.Z)(H,B);var U=(0,x.Z)(H);function H(){return(0,v.Z)(this,H),U.call(this,"twitter.com")}return(0,Ae.Z)(H,null,[{key:"credential",value:function(X,re){return Ku._fromParams({providerId:H.PROVIDER_ID,signInMethod:H.TWITTER_SIGN_IN_METHOD,oauthToken:X,oauthTokenSecret:re})}},{key:"credentialFromResult",value:function(X){return H.credentialFromTaggedObject(X)}},{key:"credentialFromError",value:function(X){return H.credentialFromTaggedObject(X.customData||{})}},{key:"credentialFromTaggedObject",value:function(X){var re=X._tokenResponse;if(!re)return null;var ue=re.oauthAccessToken,ge=re.oauthTokenSecret;if(!ue||!ge)return null;try{return H.credential(ue,ge)}catch(Fe){return null}}}]),H}($);return z.TWITTER_SIGN_IN_METHOD="twitter.com",z.PROVIDER_ID="twitter.com",z}();function At(z,B){return sn.apply(this,arguments)}function sn(){return(sn=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",ia(B,"POST","/v1/accounts:signUp",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}var an=function(){function z(B){(0,v.Z)(this,z),this.user=B.user,this.providerId=B.providerId,this._tokenResponse=B._tokenResponse,this.operationType=B.operationType}return(0,Ae.Z)(z,null,[{key:"_fromIdTokenResponse",value:(B=(0,Te.Z)(ae().mark(function H(O,X,re){var ue,ge,Fe,St,Pt=arguments;return ae().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:return ue=Pt.length>3&&void 0!==Pt[3]&&Pt[3],Pn.next=3,Ft._fromIdTokenResponse(O,re,ue);case 3:return ge=Pn.sent,Fe=vt(re),St=new z({user:ge,providerId:Fe,_tokenResponse:re,operationType:X}),Pn.abrupt("return",St);case 7:case"end":return Pn.stop()}},H)})),function(H,O,X){return B.apply(this,arguments)})},{key:"_forOperation",value:function(){var B=(0,Te.Z)(ae().mark(function H(O,X,re){var ue;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,O._updateTokensIfNecessary(re,!0);case 2:return ue=vt(re),Fe.abrupt("return",new z({user:O,providerId:ue,_tokenResponse:re,operationType:X}));case 4:case"end":return Fe.stop()}},H)}));return function(H,O,X){return B.apply(this,arguments)}}()}]),z;var B}();function vt(z){return z.providerId?z.providerId:"phoneNumber"in z?"phone":null}function cn(z){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,Te.Z)(ae().mark(function z(B){var U,H,O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return H=ir(B),ue.next=3,H._initializationPromise;case 3:if(!(null===(U=H.currentUser)||void 0===U?void 0:U.isAnonymous)){ue.next=5;break}return ue.abrupt("return",new an({user:H.currentUser,providerId:null,operationType:"signIn"}));case 5:return ue.next=7,At(H,{returnSecureToken:!0});case 7:return O=ue.sent,ue.next=10,an._fromIdTokenResponse(H,"signIn",O,!0);case 10:return X=ue.sent,ue.next=13,H._updateCurrentUser(X.user);case 13:return ue.abrupt("return",X);case 14:case"end":return ue.stop()}},z)}))).apply(this,arguments)}var hr=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H,O,X,re){var ue,ge;return(0,v.Z)(this,U),(ue=B.call(this,O.code,O.message)).operationType=X,ue.user=re,ue.name="FirebaseError",Object.setPrototypeOf((0,R.Z)(ue),U.prototype),ue.appName=H.name,ue.code=O.code,ue.tenantId=null!==(ge=H.tenantId)&&void 0!==ge?ge:void 0,ue.serverResponse=O.customData.serverResponse,ue}return(0,Ae.Z)(U,null,[{key:"_fromErrorAndOperation",value:function(O,X,re,ue){return new U(O,X,re,ue)}}]),U}(be.ZR);function Oi(z,B,U,H){return("reauthenticate"===B?U._getReauthenticationResolver(z):U._getIdTokenResponse(z)).catch(function(X){throw X.code==="auth/".concat("multi-factor-auth-required")?hr._fromErrorAndOperation(z,X,B,H):X})}function ja(z){return new Set(z.map(function(B){return B.providerId}).filter(function(B){return!!B}))}function vo(z,B){return ui.apply(this,arguments)}function ui(){return(ui=(0,Te.Z)(ae().mark(function z(B,U){var H,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return H=(0,be.m9)(B),ge.next=3,Xu(!0,H,U);case 3:return ge.t0=jn,ge.t1=H.auth,ge.next=7,H.getIdToken();case 7:return ge.t2=ge.sent,ge.t3=[U],ge.t4={idToken:ge.t2,deleteProvider:ge.t3},ge.next=12,(0,ge.t0)(ge.t1,ge.t4);case 12:return re=ja(ge.sent.providerUserInfo||[]),H.providerData=H.providerData.filter(function(Fe){return re.has(Fe.providerId)}),re.has("phone")||(H.phoneNumber=null),ge.next=19,H.auth._persistUserIfCurrent(H);case 19:return ge.abrupt("return",H);case 20:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function ka(z,B){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,Te.Z)(ae().mark(function z(B,U){var H,X=arguments;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return H=X.length>2&&void 0!==X[2]&&X[2],ue.t0=Zi,ue.t1=B,ue.t2=U,ue.t3=B.auth,ue.next=7,B.getIdToken();case 7:return ue.t4=ue.sent,ue.t5=ue.t2._linkToIdToken.call(ue.t2,ue.t3,ue.t4),ue.t6=H,ue.next=12,(0,ue.t0)(ue.t1,ue.t5,ue.t6);case 12:return ue.abrupt("return",an._forOperation(B,"link",ue.sent));case 14:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function Xu(z,B,U){return la.apply(this,arguments)}function la(){return(la=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,Yt(U);case 2:O=ja(U.providerData),X=!1===B?"provider-already-linked":"no-such-provider",nt(O.has(H)===B,U.auth,X);case 5:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function Oa(z,B){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,Te.Z)(ae().mark(function z(B,U){var H,O,X,re,ue,Fe=arguments;return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return H=Fe.length>2&&void 0!==Fe[2]&&Fe[2],O=B.auth,X="reauthenticate",Pt.prev=3,Pt.next=6,Zi(B,Oi(O,X,U,B),H);case 6:return nt((re=Pt.sent).idToken,O,"internal-error"),nt(ue=Wo(re.idToken),O,"internal-error"),nt(B.uid===ue.sub,O,"user-mismatch"),Pt.abrupt("return",an._forOperation(B,X,re));case 15:throw Pt.prev=15,Pt.t0=Pt.catch(3),(null==Pt.t0?void 0:Pt.t0.code)==="auth/".concat("user-not-found")&&ie(O,"user-mismatch"),Pt.t0;case 19:case"end":return Pt.stop()}},z,null,[[3,15]])}))).apply(this,arguments)}function To(z,B){return xo.apply(this,arguments)}function xo(){return(xo=(0,Te.Z)(ae().mark(function z(B,U){var H,O,X,re,ue=arguments;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return H=ue.length>2&&void 0!==ue[2]&&ue[2],O="signIn",Fe.next=4,Oi(B,O,U);case 4:return X=Fe.sent,Fe.next=7,an._fromIdTokenResponse(B,O,X);case 7:if(re=Fe.sent,H){Fe.next=11;break}return Fe.next=11,B._updateCurrentUser(re.user);case 11:return Fe.abrupt("return",re);case 12:case"end":return Fe.stop()}},z)}))).apply(this,arguments)}function mo(z,B){return gi.apply(this,arguments)}function gi(){return(gi=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",To(ir(B),U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function Mo(z,B){return Io.apply(this,arguments)}function Io(){return(Io=(0,Te.Z)(ae().mark(function z(B,U){var H;return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return H=(0,be.m9)(B),X.next=3,Xu(!1,H,U.providerId);case 3:return X.abrupt("return",ka(H,U));case 4:case"end":return X.stop()}},z)}))).apply(this,arguments)}function Ca(z,B){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Oa((0,be.m9)(B),U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function Mu(z,B){return _l.apply(this,arguments)}function _l(){return(_l=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",ia(B,"POST","/v1/accounts:signInWithCustomToken",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function qi(z,B){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,Te.Z)(ae().mark(function z(B,U){var H,O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return H=ir(B),ue.next=3,Mu(H,{token:U,returnSecureToken:!0});case 3:return O=ue.sent,ue.next=6,an._fromIdTokenResponse(H,"signIn",O);case 6:return X=ue.sent,ue.next=9,H._updateCurrentUser(X.user);case 9:return ue.abrupt("return",X);case 10:case"end":return ue.stop()}},z)}))).apply(this,arguments)}var mc=function(){function z(B,U){(0,v.Z)(this,z),this.factorId=B,this.uid=U.mfaEnrollmentId,this.enrollmentTime=new Date(U.enrolledAt).toUTCString(),this.displayName=U.displayName}return(0,Ae.Z)(z,null,[{key:"_fromServerResponse",value:function(U,H){return"phoneInfo"in H?go._fromServerResponse(U,H):ie(U,"internal-error")}}]),z}(),go=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H){var O;return(0,v.Z)(this,U),(O=B.call(this,"phone",H)).phoneNumber=H.phoneInfo,O}return(0,Ae.Z)(U,null,[{key:"_fromServerResponse",value:function(O,X){return new U(X)}}]),U}(mc);function kr(z,B,U){var H;nt((null===(H=U.url)||void 0===H?void 0:H.length)>0,z,"invalid-continue-uri"),nt(void 0===U.dynamicLinkDomain||U.dynamicLinkDomain.length>0,z,"invalid-dynamic-link-domain"),B.continueUrl=U.url,B.dynamicLinkDomain=U.dynamicLinkDomain,B.canHandleCodeInApp=U.handleCodeInApp,U.iOS&&(nt(U.iOS.bundleId.length>0,z,"missing-ios-bundle-id"),B.iOSBundleId=U.iOS.bundleId),U.android&&(nt(U.android.packageName.length>0,z,"missing-android-pkg-name"),B.androidInstallApp=U.android.installApp,B.androidMinimumVersionCode=U.android.minimumVersion,B.androidPackageName=U.android.packageName)}function Ul(z,B,U){return yo.apply(this,arguments)}function yo(){return(yo=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return O=(0,be.m9)(B),X={requestType:"PASSWORD_RESET",email:U},H&&kr(O,X,H),ue.next=5,gl(O,X);case 5:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function lh(z,B,U){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,Te.Z)(ae().mark(function z(B,U,H){return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Zl((0,be.m9)(B),{oobCode:U,newPassword:H});case 2:case"end":return X.stop()}},z)}))).apply(this,arguments)}function gc(z,B){return bl.apply(this,arguments)}function bl(){return(bl=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,Ls((0,be.m9)(B),{oobCode:U});case 2:case"end":return O.stop()}},z)}))).apply(this,arguments)}function wl(z,B){return tn.apply(this,arguments)}function tn(){return(tn=(0,Te.Z)(ae().mark(function z(B,U){var H,O,X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return H=(0,be.m9)(B),ge.next=3,Zl(H,{oobCode:U});case 3:nt(X=(O=ge.sent).requestType,H,"internal-error"),ge.t0=X,ge.next="EMAIL_SIGNIN"===ge.t0?9:"VERIFY_AND_CHANGE_EMAIL"===ge.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===ge.t0?12:13;break;case 9:return ge.abrupt("break",14);case 10:return nt(O.newEmail,H,"internal-error"),ge.abrupt("break",14);case 12:nt(O.mfaInfo,H,"internal-error");case 13:nt(O.email,H,"internal-error");case 14:return re=null,O.mfaInfo&&(re=mc._fromServerResponse(ir(H),O.mfaInfo)),ge.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.newEmail:O.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===O.requestType?O.email:O.newEmail)||null,multiFactorInfo:re},operation:X});case 17:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function wi(z,B){return qo.apply(this,arguments)}function qo(){return(qo=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,wl((0,be.m9)(B),U);case 2:return re.abrupt("return",re.sent.data.email);case 5:case"end":return re.stop()}},z)}))).apply(this,arguments)}function _a(z,B,U){return ch.apply(this,arguments)}function ch(){return(ch=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return O=ir(B),ge.next=3,At(O,{returnSecureToken:!0,email:U,password:H});case 3:return X=ge.sent,ge.next=6,an._fromIdTokenResponse(O,"signIn",X);case 6:return re=ge.sent,ge.next=9,O._updateCurrentUser(re.user);case 9:return ge.abrupt("return",re);case 10:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function Ju(z,B,U){return mo((0,be.m9)(z),Uf.credential(B,U))}function Ds(z,B,U){return La.apply(this,arguments)}function La(){return(La=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return O=(0,be.m9)(B),X={requestType:"EMAIL_SIGNIN",email:U},nt(H.handleCodeInApp,O,"argument-error"),H&&kr(O,X,H),ue.next=6,Yu(O,X);case 6:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function Fc(z,B){var U=Bl.parseLink(B);return"EMAIL_SIGNIN"===(null==U?void 0:U.operation)}function Rc(z,B,U){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return O=(0,be.m9)(B),nt((X=Uf.credentialWithLink(U,H||Ti()))._tenantId===(O.tenantId||null),O,"tenant-id-mismatch"),ue.abrupt("return",mo(O,X));case 4:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function _o(z,B){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:createAuthUri",Xr(B,U)));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function ds(z,B){return Da.apply(this,arguments)}function Da(){return(Da=(0,Te.Z)(ae().mark(function z(B,U){var H,O;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return H=jo()?Ti():"http://localhost",O={identifier:U,continueUri:H},ge.next=4,_o((0,be.m9)(B),O);case 4:return ge.abrupt("return",ge.sent.signinMethods||[]);case 7:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function Js(z,B){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,Te.Z)(ae().mark(function z(B,U){var H,X;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return H=(0,be.m9)(B),Fe.next=3,B.getIdToken();case 3:return X={requestType:"VERIFY_EMAIL",idToken:Fe.sent},U&&kr(H.auth,X,U),Fe.next=8,sh(H.auth,X);case 8:if(Fe.sent.email===B.email){Fe.next=13;break}return Fe.next=13,B.reload();case 13:case"end":return Fe.stop()}},z)}))).apply(this,arguments)}function Po(z,B,U){return El.apply(this,arguments)}function El(){return(El=(0,Te.Z)(ae().mark(function z(B,U,H){var O,re;return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return O=(0,be.m9)(B),St.next=3,B.getIdToken();case 3:return re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:St.sent,newEmail:U},H&&kr(O.auth,re,H),St.next=8,fs(O.auth,re);case 8:if(St.sent.email===B.email){St.next=13;break}return St.next=13,B.reload();case 13:case"end":return St.stop()}},z)}))).apply(this,arguments)}function zl(z,B){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Ia(B,"POST","/v1/accounts:update",U));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function kl(z,B){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,Te.Z)(ae().mark(function z(B,U){var H,O,X,ue,ge,Fe;return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(O=U.photoURL,void 0!==(H=U.displayName)||void 0!==O){Pt.next=3;break}return Pt.abrupt("return");case 3:return X=(0,be.m9)(B),Pt.next=6,X.getIdToken();case 6:return ue={idToken:Pt.sent,displayName:H,photoUrl:O,returnSecureToken:!0},Pt.next=10,Zi(X,zl(X.auth,ue));case 10:return X.displayName=(ge=Pt.sent).displayName||null,X.photoURL=ge.photoUrl||null,(Fe=X.providerData.find(function(pr){return"password"===pr.providerId}))&&(Fe.displayName=X.displayName,Fe.photoURL=X.photoURL),Pt.next=17,X._updateTokensIfNecessary(ge);case 17:case"end":return Pt.stop()}},z)}))).apply(this,arguments)}function jl(z,B){return Cl((0,be.m9)(z),B,null)}function hh(z,B){return Cl((0,be.m9)(z),null,B)}function Cl(z,B,U){return fh.apply(this,arguments)}function fh(){return(fh=(0,Te.Z)(ae().mark(function z(B,U,H){var O,re,ue;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return O=B.auth,Fe.next=3,B.getIdToken();case 3:return re={idToken:Fe.sent,returnSecureToken:!0},U&&(re.email=U),H&&(re.password=H),Fe.next=9,Zi(B,as(O,re));case 9:return ue=Fe.sent,Fe.next=12,B._updateTokensIfNecessary(ue,!0);case 12:case"end":return Fe.stop()}},z)}))).apply(this,arguments)}var Ko=function z(B,U){var H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,v.Z)(this,z),this.isNewUser=B,this.providerId=U,this.profile=H},bo=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H,O,X,re){var ue;return(0,v.Z)(this,U),(ue=B.call(this,H,O,X)).username=re,ue}return U}(Ko),Dl=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H,O){return(0,v.Z)(this,U),B.call(this,H,"facebook.com",O)}return U}(Ko),Vf=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H,O){return(0,v.Z)(this,U),B.call(this,H,"github.com",O,"string"==typeof(null==O?void 0:O.login)?null==O?void 0:O.login:null)}return U}(bo),Xe=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H,O){return(0,v.Z)(this,U),B.call(this,H,"google.com",O)}return U}(Ko),Pe=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H,O,X){return(0,v.Z)(this,U),B.call(this,H,"twitter.com",O,X)}return U}(bo);function dt(z){var U=z._tokenResponse;return z.user.isAnonymous&&!U?{providerId:null,isNewUser:!1,profile:null}:function(z){var B,U;if(!z)return null;var H=z.providerId,O=z.rawUserInfo?JSON.parse(z.rawUserInfo):{},X=z.isNewUser||"identitytoolkit#SignupNewUserResponse"===z.kind;if(!H&&(null==z?void 0:z.idToken)){var re=null===(U=null===(B=Wo(z.idToken))||void 0===B?void 0:B.firebase)||void 0===U?void 0:U.sign_in_provider;if(re)return new Ko(X,"anonymous"!==re&&"custom"!==re?re:null)}if(!H)return null;switch(H){case"facebook.com":return new Dl(X,O);case"github.com":return new Vf(X,O);case"google.com":return new Xe(X,O);case"twitter.com":return new Pe(X,O,z.screenName||null);case"custom":case"anonymous":return new Ko(X,null);default:return new Ko(X,H,O)}}(U)}var Pr=function(){function z(B,U){(0,v.Z)(this,z),this.type=B,this.credential=U}return(0,Ae.Z)(z,[{key:"toJSON",value:function(){return{multiFactorSession:(0,ce.Z)({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(U){return new z("enroll",U)}},{key:"_fromMfaPendingCredential",value:function(U){return new z("signin",U)}},{key:"fromJSON",value:function(U){var H,O;if(null==U?void 0:U.multiFactorSession){if(null===(H=U.multiFactorSession)||void 0===H?void 0:H.pendingCredential)return z._fromMfaPendingCredential(U.multiFactorSession.pendingCredential);if(null===(O=U.multiFactorSession)||void 0===O?void 0:O.idToken)return z._fromIdtoken(U.multiFactorSession.idToken)}return null}}]),z}(),fi=function(){function z(B,U,H){(0,v.Z)(this,z),this.session=B,this.hints=U,this.signInResolver=H}return(0,Ae.Z)(z,[{key:"resolveSignIn",value:(B=(0,Te.Z)(ae().mark(function H(O){return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.abrupt("return",this.signInResolver(O));case 2:case"end":return ue.stop()}},H,this)})),function(H){return B.apply(this,arguments)})}],[{key:"_fromError",value:function(U,H){var O=ir(U),X=(H.serverResponse.mfaInfo||[]).map(function(ue){return mc._fromServerResponse(O,ue)});nt(H.serverResponse.mfaPendingCredential,O,"internal-error");var re=Pr._fromMfaPendingCredential(H.serverResponse.mfaPendingCredential);return new z(re,X,function(){var ue=(0,Te.Z)(ae().mark(function ge(Fe){var St,Pt,pr;return ae().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return Fn.next=2,Fe._process(O,re);case 2:St=Fn.sent,delete H.serverResponse.mfaInfo,delete H.serverResponse.mfaPendingCredential,Pt=Object.assign(Object.assign({},H.serverResponse),{idToken:St.idToken,refreshToken:St.refreshToken}),Fn.t0=H.operationType,Fn.next="signIn"===Fn.t0?9:"reauthenticate"===Fn.t0?15:17;break;case 9:return Fn.next=11,an._fromIdTokenResponse(O,H.operationType,Pt);case 11:return pr=Fn.sent,Fn.next=14,O._updateCurrentUser(pr.user);case 14:return Fn.abrupt("return",pr);case 15:return nt(H.user,O,"internal-error"),Fn.abrupt("return",an._forOperation(H.user,H.operationType,Pt));case 17:ie(O,"internal-error");case 18:case"end":return Fn.stop()}},ge)}));return function(ge){return ue.apply(this,arguments)}}())}}]),z;var B}();function Li(z,B){var U,H=(0,be.m9)(z),O=B;return nt(B.operationType,H,"argument-error"),nt(null===(U=O.serverResponse)||void 0===U?void 0:U.mfaPendingCredential,H,"argument-error"),fi._fromError(H,O)}function ca(z,B){return Ia(z,"POST","/v2/accounts/mfaEnrollment:start",Xr(z,B))}function Sa(z,B){return Ia(z,"POST","/v2/accounts/mfaEnrollment:withdraw",Xr(z,B))}var ss=function(){function z(B){var U=this;(0,v.Z)(this,z),this.user=B,this.enrolledFactors=[],B._onReload(function(H){H.mfaInfo&&(U.enrolledFactors=H.mfaInfo.map(function(O){return mc._fromServerResponse(B.auth,O)}))})}return(0,Ae.Z)(z,[{key:"getSession",value:(B=(0,Te.Z)(ae().mark(function H(){return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.t0=Pr,X.next=3,this.user.getIdToken();case 3:return X.t1=X.sent,X.abrupt("return",X.t0._fromIdtoken.call(X.t0,X.t1));case 5:case"end":return X.stop()}},H,this)})),function(){return B.apply(this,arguments)})},{key:"enroll",value:function(){var B=(0,Te.Z)(ae().mark(function H(O,X){var re,ue,ge;return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return re=O,St.next=3,this.getSession();case 3:return ue=St.sent,St.next=6,Zi(this.user,re._process(this.user.auth,ue,X));case 6:return ge=St.sent,St.next=9,this.user._updateTokensIfNecessary(ge);case 9:return St.abrupt("return",this.user.reload());case 10:case"end":return St.stop()}},H,this)}));return function(H,O){return B.apply(this,arguments)}}()},{key:"unenroll",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X,re,ue;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return X="string"==typeof O?O:O.uid,Fe.next=3,this.user.getIdToken();case 3:return re=Fe.sent,Fe.next=6,Zi(this.user,Sa(this.user.auth,{idToken:re,mfaEnrollmentId:X}));case 6:return ue=Fe.sent,this.enrolledFactors=this.enrolledFactors.filter(function(St){return St.uid!==X}),Fe.next=10,this.user._updateTokensIfNecessary(ue);case 10:return Fe.prev=10,Fe.next=13,this.user.reload();case 13:Fe.next=19;break;case 15:if(Fe.prev=15,Fe.t0=Fe.catch(10),Fe.t0.code==="auth/".concat("user-token-expired")){Fe.next=19;break}throw Fe.t0;case 19:case"end":return Fe.stop()}},H,this,[[10,15]])}));return function(H){return B.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(U){return new z(U)}}]),z;var B}(),ha=new WeakMap;function Us(z){var B=(0,be.m9)(z);return ha.has(B)||ha.set(B,ss._fromUser(B)),ha.get(B)}var $o="__sak",Wl=function(){function z(B,U){(0,v.Z)(this,z),this.storage=B,this.type=U}return(0,Ae.Z)(z,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem($o,"1"),this.storage.removeItem($o),Promise.resolve(!0)):Promise.resolve(!1)}catch(U){return Promise.resolve(!1)}}},{key:"_set",value:function(U,H){return this.storage.setItem(U,JSON.stringify(H)),Promise.resolve()}},{key:"_get",value:function(U){var H=this.storage.getItem(U);return Promise.resolve(H?JSON.parse(H):null)}},{key:"_remove",value:function(U){return this.storage.removeItem(U),Promise.resolve()}}]),z}(),hv=function(){var z=function(B){(0,M.Z)(H,B);var O,U=(0,x.Z)(H);function H(){var O;return(0,v.Z)(this,H),(O=U.call(this,window.localStorage,"LOCAL")).boundEventHandler=function(X,re){return O.onStorageEvent(X,re)},O.listeners={},O.localCache={},O.pollTimer=null,O.safariLocalStorageNotSynced=function(){var z=(0,be.z$)();return Tn(z)||Bi(z)}()&&function(){try{return!(!window||window===window.top)}catch(z){return!1}}(),O.fallbackToPolling=Ea(),O._shouldAllowMigration=!0,O}return(0,Ae.Z)(H,[{key:"forAllChangedKeys",value:function(X){for(var re=0,ue=Object.keys(this.listeners);re<ue.length;re++){var ge=ue[re],Fe=this.storage.getItem(ge),St=this.localCache[ge];Fe!==St&&X(ge,St,Fe)}}},{key:"onStorageEvent",value:function(X){var re=this,ue=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(X.key){var ge=X.key;if(ue?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var Fe=this.storage.getItem(ge);if(X.newValue!==Fe)null!==X.newValue?this.storage.setItem(ge,X.newValue):this.storage.removeItem(ge);else if(this.localCache[ge]===X.newValue&&!ue)return}var St=function(){var Pn=re.storage.getItem(ge);!ue&&re.localCache[ge]===Pn||re.notifyListeners(ge,Pn)},Pt=this.storage.getItem(ge);Nl()&&Pt!==X.newValue&&X.newValue!==X.oldValue?setTimeout(St,10):St()}else this.forAllChangedKeys(function(pr,Pn,Fn){re.notifyListeners(pr,Fn)})}},{key:"notifyListeners",value:function(X,re){this.localCache[X]=re;var ue=this.listeners[X];if(ue)for(var ge=0,Fe=Array.from(ue);ge<Fe.length;ge++)(0,Fe[ge])(re&&JSON.parse(re))}},{key:"startPolling",value:function(){var X=this;this.stopPolling(),this.pollTimer=setInterval(function(){X.forAllChangedKeys(function(re,ue,ge){X.onStorageEvent(new StorageEvent("storage",{key:re,oldValue:ue,newValue:ge}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(X,re){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[X]||(this.listeners[X]=new Set,this.localCache[X]=this.storage.getItem(X)),this.listeners[X].add(re)}},{key:"_removeListener",value:function(X,re){this.listeners[X]&&(this.listeners[X].delete(re),0===this.listeners[X].size&&delete this.listeners[X]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(O=(0,Te.Z)(ae().mark(function re(ue,ge){return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return St.next=2,(0,Se.Z)((0,ye.Z)(H.prototype),"_set",this).call(this,ue,ge);case 2:this.localCache[ue]=JSON.stringify(ge);case 3:case"end":return St.stop()}},re,this)})),function(re,ue){return O.apply(this,arguments)})},{key:"_get",value:function(){var O=(0,Te.Z)(ae().mark(function re(ue){var ge;return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return St.next=2,(0,Se.Z)((0,ye.Z)(H.prototype),"_get",this).call(this,ue);case 2:return ge=St.sent,this.localCache[ue]=JSON.stringify(ge),St.abrupt("return",ge);case 5:case"end":return St.stop()}},re,this)}));return function(re){return O.apply(this,arguments)}}()},{key:"_remove",value:function(){var O=(0,Te.Z)(ae().mark(function re(ue){return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,(0,Se.Z)((0,ye.Z)(H.prototype),"_remove",this).call(this,ue);case 2:delete this.localCache[ue];case 3:case"end":return Fe.stop()}},re,this)}));return function(re){return O.apply(this,arguments)}}()}]),H}(Wl);return z.type="LOCAL",z}(),Ig=function(){var z=function(B){(0,M.Z)(H,B);var U=(0,x.Z)(H);function H(){return(0,v.Z)(this,H),U.call(this,window.sessionStorage,"SESSION")}return(0,Ae.Z)(H,[{key:"_addListener",value:function(X,re){}},{key:"_removeListener",value:function(X,re){}}]),H}(Wl);return z.type="SESSION",z}();function A(z){return Promise.all(z.map(function(){var B=(0,Te.Z)(ae().mark(function U(H){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,re.next=3,H;case 3:return re.abrupt("return",{fulfilled:!0,value:re.sent});case 7:return re.prev=7,re.t0=re.catch(0),re.abrupt("return",{fulfilled:!1,reason:re.t0});case 10:case"end":return re.stop()}},U,null,[[0,7]])}));return function(U){return B.apply(this,arguments)}}()))}var y=function(){var z=function(){function B(U){(0,v.Z)(this,B),this.eventTarget=U,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,Ae.Z)(B,[{key:"isListeningto",value:function(H){return this.eventTarget===H}},{key:"handleEvent",value:(U=(0,Te.Z)(ae().mark(function O(X){var re,ue,ge,Fe,St,Pt,pr;return ae().wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:if(ge=(ue=(re=X).data).eventId,St=ue.data,null==(Pt=this.handlersMap[Fe=ue.eventType])?void 0:Pt.size){Ar.next=5;break}return Ar.abrupt("return");case 5:return re.ports[0].postMessage({status:"ack",eventId:ge,eventType:Fe}),pr=Array.from(Pt).map(function(){var Na=(0,Te.Z)(ae().mark(function pa(Al){return ae().wrap(function(js){for(;;)switch(js.prev=js.next){case 0:return js.abrupt("return",Al(re.origin,St));case 1:case"end":return js.stop()}},pa)}));return function(pa){return Na.apply(this,arguments)}}()),Ar.next=9,A(pr);case 9:re.ports[0].postMessage({status:"done",eventId:ge,eventType:Fe,response:Ar.sent});case 11:case"end":return Ar.stop()}},O,this)})),function(O){return U.apply(this,arguments)})},{key:"_subscribe",value:function(H,O){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[H]||(this.handlersMap[H]=new Set),this.handlersMap[H].add(O)}},{key:"_unsubscribe",value:function(H,O){this.handlersMap[H]&&O&&this.handlersMap[H].delete(O),(!O||0===this.handlersMap[H].size)&&delete this.handlersMap[H],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(H){var O=this.receivers.find(function(re){return re.isListeningto(H)});if(O)return O;var X=new B(H);return this.receivers.push(X),X}}]),B;var U}();return z.receivers=[],z}();function D(){for(var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,U="",H=0;H<B;H++)U+=Math.floor(10*Math.random());return z+U}var N=function(){function z(B){(0,v.Z)(this,z),this.target=B,this.handlers=new Set}return(0,Ae.Z)(z,[{key:"removeMessageHandler",value:function(U){U.messageChannel&&(U.messageChannel.port1.removeEventListener("message",U.onMessage),U.messageChannel.port1.close()),this.handlers.delete(U)}},{key:"_send",value:(B=(0,Te.Z)(ae().mark(function H(O,X){var ue,ge,Fe,St,re=this,Pt=arguments;return ae().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:if(ue=Pt.length>2&&void 0!==Pt[2]?Pt[2]:50,ge="undefined"!=typeof MessageChannel?new MessageChannel:null){Pn.next=4;break}throw new Error("connection_unavailable");case 4:return Pn.abrupt("return",new Promise(function(Fn,Ar){var Na=D("",20);ge.port1.start();var pa=setTimeout(function(){Ar(new Error("unsupported_event"))},ue);re.handlers.add(St={messageChannel:ge,onMessage:function(si){var js=si;if(js.data.eventId===Na)switch(js.data.status){case"ack":clearTimeout(pa),Fe=setTimeout(function(){Ar(new Error("timeout"))},3e3);break;case"done":clearTimeout(Fe),Fn(js.data.response);break;default:clearTimeout(pa),clearTimeout(Fe),Ar(new Error("invalid_response"))}}}),ge.port1.addEventListener("message",St.onMessage),re.target.postMessage({eventType:O,eventId:Na,data:X},[ge.port2])}).finally(function(){St&&re.removeMessageHandler(St)}));case 5:case"end":return Pn.stop()}},H)})),function(H,O){return B.apply(this,arguments)})}]),z;var B}();function Q(){return window}function le(z){Q().location.href=z}function Ie(){return void 0!==Q().WorkerGlobalScope&&"function"==typeof Q().importScripts}function it(){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,Te.Z)(ae().mark(function z(){return ae().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(null==navigator?void 0:navigator.serviceWorker){H.next=2;break}return H.abrupt("return",null);case 2:return H.prev=2,H.next=5,navigator.serviceWorker.ready;case 5:return H.abrupt("return",H.sent.active);case 9:return H.prev=9,H.t0=H.catch(2),H.abrupt("return",null);case 12:case"end":return H.stop()}},z,null,[[2,9]])}))).apply(this,arguments)}function Ht(){var z;return(null===(z=null==navigator?void 0:navigator.serviceWorker)||void 0===z?void 0:z.controller)||null}var dr="firebaseLocalStorageDb",fa="firebaseLocalStorage",da="fbase_key",Xa=function(){function z(B){(0,v.Z)(this,z),this.request=B}return(0,Ae.Z)(z,[{key:"toPromise",value:function(){var U=this;return new Promise(function(H,O){U.request.addEventListener("success",function(){H(U.request.result)}),U.request.addEventListener("error",function(){O(U.request.error)})})}}]),z}();function Qa(z,B){return z.transaction([fa],B?"readwrite":"readonly").objectStore(fa)}function Iu(){var z=indexedDB.deleteDatabase(dr);return new Xa(z).toPromise()}function yc(){var z=indexedDB.open(dr,1);return new Promise(function(B,U){z.addEventListener("error",function(){U(z.error)}),z.addEventListener("upgradeneeded",function(){var H=z.result;try{H.createObjectStore(fa,{keyPath:da})}catch(O){U(O)}}),z.addEventListener("success",(0,Te.Z)(ae().mark(function H(){var O;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if((O=z.result).objectStoreNames.contains(fa)){re.next=12;break}return O.close(),re.next=5,Iu();case 5:return re.t0=B,re.next=8,yc();case 8:re.t1=re.sent,(0,re.t0)(re.t1),re.next=13;break;case 12:B(O);case 13:case"end":return re.stop()}},H)})))})}function eo(z,B,U){return mu.apply(this,arguments)}function mu(){return(mu=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return X=Qa(B,!0).put(((0,ce.Z)(O={},da,U),(0,ce.Z)(O,"value",H),O)),ue.abrupt("return",new Xa(X).toPromise());case 2:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function s0(z,B){return el.apply(this,arguments)}function el(){return(el=(0,Te.Z)(ae().mark(function z(B,U){var H,O;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return H=Qa(B,!1).get(U),re.next=3,new Xa(H).toPromise();case 3:return re.abrupt("return",void 0===(O=re.sent)?null:O.value);case 5:case"end":return re.stop()}},z)}))).apply(this,arguments)}function fv(z,B){var U=Qa(z,!0).delete(B);return new Xa(U).toPromise()}var Pg=function(){var z=function(){function B(){(0,v.Z)(this,B),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return(0,Ae.Z)(B,[{key:"_openDb",value:(U=(0,Te.Z)(ae().mark(function O(){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!this.db){re.next=2;break}return re.abrupt("return",this.db);case 2:return re.next=4,yc();case 4:return this.db=re.sent,re.abrupt("return",this.db);case 6:case"end":return re.stop()}},O,this)})),function(){return U.apply(this,arguments)})},{key:"_withRetries",value:function(){var U=(0,Te.Z)(ae().mark(function O(X){var re,ue;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:re=0;case 1:return Fe.prev=2,Fe.next=5,this._openDb();case 5:return ue=Fe.sent,Fe.next=8,X(ue);case 8:return Fe.abrupt("return",Fe.sent);case 11:if(Fe.prev=11,Fe.t0=Fe.catch(2),!(re++>3)){Fe.next=15;break}throw Fe.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:Fe.next=1;break;case 18:case"end":return Fe.stop()}},O,this,[[2,11]])}));return function(O){return U.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var U=(0,Te.Z)(ae().mark(function O(){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.abrupt("return",Ie()?this.initializeReceiver():this.initializeSender());case 1:case"end":return re.stop()}},O,this)}));return function(){return U.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var U=(0,Te.Z)(ae().mark(function O(){var X=this;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:this.receiver=y._getInstance(Ie()?self:null),this.receiver._subscribe("keyChanged",function(){var ge=(0,Te.Z)(ae().mark(function Fe(St,Pt){return ae().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return Fn.next=2,X._poll();case 2:return Fn.abrupt("return",{keyProcessed:Fn.sent.includes(Pt.key)});case 4:case"end":return Fn.stop()}},Fe)}));return function(Fe,St){return ge.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var ge=(0,Te.Z)(ae().mark(function Fe(St,Pt){return ae().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:return Pn.abrupt("return",["keyChanged"]);case 1:case"end":return Pn.stop()}},Fe)}));return function(Fe,St){return ge.apply(this,arguments)}}());case 3:case"end":return ue.stop()}},O,this)}));return function(){return U.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var U=(0,Te.Z)(ae().mark(function O(){var X,re,ue;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,it();case 2:if(this.activeServiceWorker=Fe.sent,this.activeServiceWorker){Fe.next=5;break}return Fe.abrupt("return");case 5:return this.sender=new N(this.activeServiceWorker),Fe.next=8,this.sender._send("ping",{},800);case 8:if(ue=Fe.sent){Fe.next=11;break}return Fe.abrupt("return");case 11:(null===(X=ue[0])||void 0===X?void 0:X.fulfilled)&&(null===(re=ue[0])||void 0===re?void 0:re.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return Fe.stop()}},O,this)}));return function(){return U.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var U=(0,Te.Z)(ae().mark(function O(X){return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(this.sender&&this.activeServiceWorker&&Ht()===this.activeServiceWorker){ue.next=2;break}return ue.abrupt("return");case 2:return ue.prev=2,ue.next=5,this.sender._send("keyChanged",{key:X},this.serviceWorkerReceiverAvailable?800:50);case 5:ue.next=9;break;case 7:ue.prev=7,ue.t0=ue.catch(2);case 9:case"end":return ue.stop()}},O,this,[[2,7]])}));return function(O){return U.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var U=(0,Te.Z)(ae().mark(function O(){var X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(ue.prev=0,indexedDB){ue.next=3;break}return ue.abrupt("return",!1);case 3:return ue.next=5,yc();case 5:return X=ue.sent,ue.next=8,eo(X,$o,"1");case 8:return ue.next=10,fv(X,$o);case 10:return ue.abrupt("return",!0);case 13:ue.prev=13,ue.t0=ue.catch(0);case 15:return ue.abrupt("return",!1);case 16:case"end":return ue.stop()}},O,null,[[0,13]])}));return function(){return U.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var U=(0,Te.Z)(ae().mark(function O(X){return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return this.pendingWrites++,ue.prev=1,ue.next=4,X();case 4:return ue.prev=4,this.pendingWrites--,ue.finish(4);case 7:case"end":return ue.stop()}},O,this,[[1,,4,7]])}));return function(O){return U.apply(this,arguments)}}()},{key:"_set",value:function(){var U=(0,Te.Z)(ae().mark(function O(X,re){var ue=this;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.abrupt("return",this._withPendingWrite((0,Te.Z)(ae().mark(function St(){return ae().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return pr.next=2,ue._withRetries(function(Pn){return eo(Pn,X,re)});case 2:return ue.localCache[X]=re,pr.abrupt("return",ue.notifyServiceWorker(X));case 4:case"end":return pr.stop()}},St)}))));case 1:case"end":return Fe.stop()}},O,this)}));return function(O,X){return U.apply(this,arguments)}}()},{key:"_get",value:function(){var U=(0,Te.Z)(ae().mark(function O(X){var re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,this._withRetries(function(Fe){return s0(Fe,X)});case 2:return this.localCache[X]=re=ge.sent,ge.abrupt("return",re);case 5:case"end":return ge.stop()}},O,this)}));return function(O){return U.apply(this,arguments)}}()},{key:"_remove",value:function(){var U=(0,Te.Z)(ae().mark(function O(X){var re=this;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.abrupt("return",this._withPendingWrite((0,Te.Z)(ae().mark(function Fe(){return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.next=2,re._withRetries(function(pr){return fv(pr,X)});case 2:return delete re.localCache[X],Pt.abrupt("return",re.notifyServiceWorker(X));case 4:case"end":return Pt.stop()}},Fe)}))));case 1:case"end":return ge.stop()}},O,this)}));return function(O){return U.apply(this,arguments)}}()},{key:"_poll",value:function(){var U=(0,Te.Z)(ae().mark(function O(){var X,re,ue,ge,Fe,St,Pt,pr,Pn,Fn,Ar;return ae().wrap(function(pa){for(;;)switch(pa.prev=pa.next){case 0:return pa.next=2,this._withRetries(function(Al){var si=Qa(Al,!1).getAll();return new Xa(si).toPromise()});case 2:if(X=pa.sent){pa.next=5;break}return pa.abrupt("return",[]);case 5:if(0===this.pendingWrites){pa.next=7;break}return pa.abrupt("return",[]);case 7:re=[],ue=new Set,ge=(0,oe.Z)(X);try{for(ge.s();!(Fe=ge.n()).done;)pr=(St=Fe.value).value,ue.add(Pt=St.fbase_key),JSON.stringify(this.localCache[Pt])!==JSON.stringify(pr)&&(this.notifyListeners(Pt,pr),re.push(Pt))}catch(Al){ge.e(Al)}finally{ge.f()}for(Pn=0,Fn=Object.keys(this.localCache);Pn<Fn.length;Pn++)this.localCache[Ar=Fn[Pn]]&&!ue.has(Ar)&&(this.notifyListeners(Ar,null),re.push(Ar));return pa.abrupt("return",re);case 13:case"end":return pa.stop()}},O,this)}));return function(){return U.apply(this,arguments)}}()},{key:"notifyListeners",value:function(H,O){this.localCache[H]=O;var X=this.listeners[H];if(X)for(var re=0,ue=Array.from(X);re<ue.length;re++)(0,ue[re])(O)}},{key:"startPolling",value:function(){var H=this;this.stopPolling(),this.pollTimer=setInterval((0,Te.Z)(ae().mark(function O(){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.abrupt("return",H._poll());case 1:case"end":return re.stop()}},O)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(H,O){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[H]||(this.listeners[H]=new Set,this._get(H)),this.listeners[H].add(O)}},{key:"_removeListener",value:function(H,O){this.listeners[H]&&(this.listeners[H].delete(O),0===this.listeners[H].size&&delete this.listeners[H]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),B;var U}();return z.type="LOCAL",z}();function nf(z,B){return Ia(z,"POST","/v2/accounts/mfaSignIn:start",Xr(z,B))}function Hf(z){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,Te.Z)(ae().mark(function z(B){return ae().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Ia(B,"GET","/v1/recaptchaParams");case 2:if(H.t0=H.sent.recaptchaSiteKey,H.t0){H.next=5;break}H.t0="";case 5:return H.abrupt("return",H.t0);case 6:case"end":return H.stop()}},z)}))).apply(this,arguments)}function ph(z){return new Promise(function(B,U){var H=document.createElement("script");H.setAttribute("src",z),H.onload=B,H.onerror=function(O){var X=we("internal-error");X.customData=O,U(X)},H.type="text/javascript",H.charset="UTF-8",function(){var z,B;return null!==(B=null===(z=document.getElementsByTagName("head"))||void 0===z?void 0:z[0])&&void 0!==B?B:document}().appendChild(H)})}function op(z){return"__".concat(z).concat(Math.floor(1e6*Math.random()))}var ql=1e12,vh=function(){function z(B){(0,v.Z)(this,z),this.auth=B,this.counter=ql,this._widgets=new Map}return(0,Ae.Z)(z,[{key:"render",value:function(U,H){var O=this.counter;return this._widgets.set(O,new mh(U,this.auth.name,H||{})),this.counter++,O}},{key:"reset",value:function(U){var H,O=U||ql;null===(H=this._widgets.get(O))||void 0===H||H.delete(),this._widgets.delete(O)}},{key:"getResponse",value:function(U){var H;return(null===(H=this._widgets.get(U||ql))||void 0===H?void 0:H.getResponse())||""}},{key:"execute",value:(B=(0,Te.Z)(ae().mark(function H(O){var X;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return null===(X=this._widgets.get(O||ql))||void 0===X||X.execute(),ge.abrupt("return","");case 3:case"end":return ge.stop()}},H,this)})),function(H){return B.apply(this,arguments)})}]),z;var B}(),mh=function(){function z(B,U,H){var O=this;(0,v.Z)(this,z),this.params=H,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){O.execute()};var X="string"==typeof B?document.getElementById(B):B;nt(X,"argument-error",{appName:U}),this.container=X,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,Ae.Z)(z,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var U=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){U.responseToken=function(z){for(var B=[],U="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",H=0;H<50;H++)B.push(U.charAt(Math.floor(Math.random()*U.length)));return B.join("")}();var H=U.params,O=H.callback,X=H["expired-callback"];if(O)try{O(U.responseToken)}catch(re){}U.timerId=window.setTimeout(function(){if(U.timerId=null,U.responseToken=null,X)try{X()}catch(re){}U.isVisible&&U.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),z}(),Gf=op("rcb"),Lc=new bi(3e4,6e4),SO="https://www.google.com/recaptcha/api.js?",o0=function(){function z(){(0,v.Z)(this,z),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Q().grecaptcha}return(0,Ae.Z)(z,[{key:"load",value:function(U){var H=this,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return nt(k1(O),U,"argument-error"),this.shouldResolveImmediately(O)?Promise.resolve(Q().grecaptcha):new Promise(function(X,re){var ue=Q().setTimeout(function(){re(we(U,"network-request-failed"))},Lc.get());Q()[Gf]=function(){Q().clearTimeout(ue),delete Q()[Gf];var Fe=Q().grecaptcha;if(Fe){var St=Fe.render;Fe.render=function(Pt,pr){var Pn=St(Pt,pr);return H.counter++,Pn},H.hostLanguage=O,X(Fe)}else re(we(U,"internal-error"))},ph("".concat(SO,"?").concat((0,be.xO)({onload:Gf,render:"explicit",hl:O}))).catch(function(){clearTimeout(ue),re(we(U,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(U){return!!Q().grecaptcha&&(U===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),z}();function k1(z){return z.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(z)}var u0=function(){function z(){(0,v.Z)(this,z)}return(0,Ae.Z)(z,[{key:"load",value:(B=(0,Te.Z)(ae().mark(function H(O){return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.abrupt("return",new vh(O));case 1:case"end":return re.stop()}},H)})),function(H){return B.apply(this,arguments)})},{key:"clearedOneInstance",value:function(){}}]),z;var B}(),dk="recaptcha",ps={theme:"light",type:"image"},pk=function(){function z(B){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ps),H=arguments.length>2?arguments[2]:void 0;(0,v.Z)(this,z),this.parameters=U,this.type=dk,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ir(H),this.isInvisible="invisible"===this.parameters.size,nt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var O="string"==typeof B?document.getElementById(B):B;nt(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new u0:new o0,this.validateStartingState()}return(0,Ae.Z)(z,[{key:"verify",value:(B=(0,Te.Z)(ae().mark(function H(){var X,re,ue,O=this;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return this.assertNotDestroyed(),Fe.next=3,this.render();case 3:if(X=Fe.sent,re=this.getAssertedRecaptcha(),!(ue=re.getResponse(X))){Fe.next=8;break}return Fe.abrupt("return",ue);case 8:return Fe.abrupt("return",new Promise(function(St){O.tokenChangeListeners.add(function pr(Pn){!Pn||(O.tokenChangeListeners.delete(pr),St(Pn))}),O.isInvisible&&re.execute(X)}));case 9:case"end":return Fe.stop()}},H,this)})),function(){return B.apply(this,arguments)})},{key:"render",value:function(){var U=this;try{this.assertNotDestroyed()}catch(H){return Promise.reject(H)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(H){throw U.renderPromise=null,H})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var U=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(H){U.container.removeChild(H)})}},{key:"validateStartingState",value:function(){nt(!this.parameters.sitekey,this.auth,"argument-error"),nt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),nt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(U){var H=this;return function(O){if(H.tokenChangeListeners.forEach(function(re){return re(O)}),"function"==typeof U)U(O);else if("string"==typeof U){var X=Q()[U];"function"==typeof X&&X(O)}}}},{key:"assertNotDestroyed",value:function(){nt(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var B=(0,Te.Z)(ae().mark(function H(){var O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,this.init();case 2:return this.widgetId||(O=this.container,this.isInvisible||(X=document.createElement("div"),O.appendChild(X),O=X),this.widgetId=this.getAssertedRecaptcha().render(O,this.parameters)),ue.abrupt("return",this.widgetId);case 4:case"end":return ue.stop()}},H,this)}));return function(){return B.apply(this,arguments)}}()},{key:"init",value:function(){var B=(0,Te.Z)(ae().mark(function H(){var O;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return nt(jo()&&!Ie(),this.auth,"internal-error"),re.next=3,gh();case 3:return re.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=re.sent,re.next=8,Hf(this.auth);case 8:nt(O=re.sent,this.auth,"internal-error"),this.parameters.sitekey=O;case 11:case"end":return re.stop()}},H,this)}));return function(){return B.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return nt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),z;var B}();function gh(){var z=null;return new Promise(function(B){"complete"!==document.readyState?(z=function(){return B()},window.addEventListener("load",z)):B()}).catch(function(B){throw z&&window.removeEventListener("load",z),B})}var Fg=function(){function z(B,U){(0,v.Z)(this,z),this.verificationId=B,this.onConfirmation=U}return(0,Ae.Z)(z,[{key:"confirm",value:function(U){var H=ef._fromVerification(this.verificationId,U);return this.onConfirmation(H)}}]),z}();function l0(z,B,U){return c0.apply(this,arguments)}function c0(){return(c0=(0,Te.Z)(ae().mark(function z(B,U,H){var O;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return O=ir(B),ue.next=3,mv(O,U,(0,be.m9)(H));case 3:return ue.abrupt("return",new Fg(ue.sent,function(ge){return mo(O,ge)}));case 5:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function h0(z,B,U){return vv.apply(this,arguments)}function vv(){return(vv=(0,Te.Z)(ae().mark(function z(B,U,H){var O;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return O=(0,be.m9)(B),ue.next=3,Xu(!1,O,"phone");case 3:return ue.next=5,mv(O.auth,U,(0,be.m9)(H));case 5:return ue.abrupt("return",new Fg(ue.sent,function(ge){return Mo(O,ge)}));case 7:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function f0(z,B,U){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,Te.Z)(ae().mark(function z(B,U,H){var O;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return O=(0,be.m9)(B),ue.next=3,mv(O.auth,U,(0,be.m9)(H));case 3:return ue.abrupt("return",new Fg(ue.sent,function(ge){return Ca(O,ge)}));case 5:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function mv(z,B,U){return gv.apply(this,arguments)}function gv(){return(gv=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X,re,ue,Fe;return ae().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:return Fn.next=2,H.verify();case 2:if(X=Fn.sent,Fn.prev=3,nt("string"==typeof X,B,"argument-error"),nt(H.type===dk,B,"argument-error"),!("session"in(re="string"==typeof U?{phoneNumber:U}:U))){Fn.next=26;break}if(ue=re.session,!("phoneNumber"in re)){Fn.next=17;break}return nt("enroll"===ue.type,B,"internal-error"),Fn.next=13,ca(B,{idToken:ue.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:X}});case 13:return Fn.abrupt("return",Fn.sent.phoneSessionInfo.sessionInfo);case 17:return nt("signin"===ue.type,B,"internal-error"),nt(Fe=(null===(O=re.multiFactorHint)||void 0===O?void 0:O.uid)||re.multiFactorUid,B,"missing-multi-factor-info"),Fn.next=22,nf(B,{mfaPendingCredential:ue.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:X}});case 22:return Fn.abrupt("return",Fn.sent.phoneResponseInfo.sessionInfo);case 24:Fn.next=31;break;case 26:return Fn.next=28,uh(B,{phoneNumber:re.phoneNumber,recaptchaToken:X});case 28:return Fn.abrupt("return",Fn.sent.sessionInfo);case 31:return Fn.prev=31,H._reset(),Fn.finish(31);case 34:case"end":return Fn.stop()}},z,null,[[3,,31,34]])}))).apply(this,arguments)}function up(z,B){return Og.apply(this,arguments)}function Og(){return(Og=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,ka((0,be.m9)(B),U);case 2:case"end":return O.stop()}},z)}))).apply(this,arguments)}var to=function(){var z=function(){function B(U){(0,v.Z)(this,B),this.providerId=B.PROVIDER_ID,this.auth=ir(U)}return(0,Ae.Z)(B,[{key:"verifyPhoneNumber",value:function(H,O){return mv(this.auth,H,(0,be.m9)(O))}}],[{key:"credential",value:function(H,O){return ef._fromVerification(H,O)}},{key:"credentialFromResult",value:function(H){return B.credentialFromTaggedObject(H)}},{key:"credentialFromError",value:function(H){return B.credentialFromTaggedObject(H.customData||{})}},{key:"credentialFromTaggedObject",value:function(H){var O=H._tokenResponse;if(!O)return null;var X=O.phoneNumber,re=O.temporaryProof;return X&&re?ef._fromTokenResponse(X,re):null}}]),B}();return z.PROVIDER_ID="phone",z.PHONE_SIGN_IN_METHOD="phone",z}();function Yl(z,B){return B?ni(B):(nt(z._popupRedirectResolver,z,"argument-error"),z._popupRedirectResolver)}var yh=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H){var O;return(0,v.Z)(this,U),(O=B.call(this,"custom","custom")).params=H,O}return(0,Ae.Z)(U,[{key:"_getIdTokenResponse",value:function(O){return Gr(O,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(O,X){return Gr(O,this._buildIdpRequest(X))}},{key:"_getReauthenticationResolver",value:function(O){return Gr(O,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(O){var X={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return O&&(X.idToken=O),X}}]),U}($n);function AO(z){return To(z.auth,new yh(z),z.bypassAuthState)}function C1(z){var U=z.user;return nt(U,z.auth,"internal-error"),Oa(U,new yh(z),z.bypassAuthState)}function gu(z){return yu.apply(this,arguments)}function yu(){return(yu=(0,Te.Z)(ae().mark(function z(B){var H;return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return nt(H=B.user,B.auth,"internal-error"),X.abrupt("return",ka(H,new yh(B),B.bypassAuthState));case 3:case"end":return X.stop()}},z)}))).apply(this,arguments)}var jf=function(){function z(B,U,H,O){var X=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,v.Z)(this,z),this.auth=B,this.resolver=H,this.user=O,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(U)?U:[U]}return(0,Ae.Z)(z,[{key:"execute",value:function(){var U=this;return new Promise(function(){var H=(0,Te.Z)(ae().mark(function O(X,re){return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return U.pendingPromise={resolve:X,reject:re},ge.prev=1,ge.next=4,U.resolver._initialize(U.auth);case 4:return U.eventManager=ge.sent,ge.next=7,U.onExecution();case 7:U.eventManager.registerConsumer(U),ge.next=13;break;case 10:ge.prev=10,ge.t0=ge.catch(1),U.reject(ge.t0);case 13:case"end":return ge.stop()}},O,null,[[1,10]])}));return function(O,X){return H.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(B=(0,Te.Z)(ae().mark(function H(O){var X,re,ue,ge,Fe,St,Pt;return ae().wrap(function(Pn){for(;;)switch(Pn.prev=Pn.next){case 0:if(X=O.urlResponse,re=O.sessionId,ue=O.postBody,ge=O.tenantId,St=O.type,!(Fe=O.error)){Pn.next=4;break}return this.reject(Fe),Pn.abrupt("return");case 4:return Pt={auth:this.auth,requestUri:X,sessionId:re,tenantId:ge||void 0,postBody:ue||void 0,user:this.user,bypassAuthState:this.bypassAuthState},Pn.prev=5,Pn.t0=this,Pn.next=9,this.getIdpTask(St)(Pt);case 9:Pn.t1=Pn.sent,Pn.t0.resolve.call(Pn.t0,Pn.t1),Pn.next=16;break;case 13:Pn.prev=13,Pn.t2=Pn.catch(5),this.reject(Pn.t2);case 16:case"end":return Pn.stop()}},H,this,[[5,13]])})),function(H){return B.apply(this,arguments)})},{key:"onError",value:function(U){this.reject(U)}},{key:"getIdpTask",value:function(U){switch(U){case"signInViaPopup":case"signInViaRedirect":return AO;case"linkViaPopup":case"linkViaRedirect":return gu;case"reauthViaPopup":case"reauthViaRedirect":return C1;default:ie(this.auth,"internal-error")}}},{key:"resolve",value:function(U){On(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(U),this.unregisterAndCleanUp()}},{key:"reject",value:function(U){On(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(U),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),z;var B}(),Nc=new bi(2e3,1e4);function Pu(z,B,U){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return O=ir(B),at(B,U,ks),X=Yl(O,H),re=new Kl(O,"signInViaPopup",U,X),ge.abrupt("return",re.executeNotNull());case 5:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function yv(z,B,U){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return at((O=(0,be.m9)(B)).auth,U,ks),X=Yl(O.auth,H),re=new Kl(O.auth,"reauthViaPopup",U,X,O),ge.abrupt("return",re.executeNotNull());case 5:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function lp(z,B,U){return vk.apply(this,arguments)}function vk(){return(vk=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return at((O=(0,be.m9)(B)).auth,U,ks),X=Yl(O.auth,H),re=new Kl(O.auth,"linkViaPopup",U,X,O),ge.abrupt("return",re.executeNotNull());case 5:case"end":return ge.stop()}},z)}))).apply(this,arguments)}var Kl=function(){var z=function(B){(0,M.Z)(H,B);var O,U=(0,x.Z)(H);function H(O,X,re,ue,ge){var Fe;return(0,v.Z)(this,H),(Fe=U.call(this,O,X,ue,ge)).provider=re,Fe.authWindow=null,Fe.pollId=null,H.currentPopupAction&&H.currentPopupAction.cancel(),H.currentPopupAction=(0,R.Z)(Fe),Fe}return(0,Ae.Z)(H,[{key:"executeNotNull",value:(O=(0,Te.Z)(ae().mark(function re(){var ue;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,this.execute();case 2:return nt(ue=Fe.sent,this.auth,"internal-error"),Fe.abrupt("return",ue);case 5:case"end":return Fe.stop()}},re,this)})),function(){return O.apply(this,arguments)})},{key:"onExecution",value:function(){var O=(0,Te.Z)(ae().mark(function re(){var ge,ue=this;return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return On(1===this.filter.length,"Popup operations only handle one event"),ge=D(),St.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],ge);case 4:this.authWindow=St.sent,this.authWindow.associatedEvent=ge,this.resolver._originValidation(this.auth).catch(function(Pt){ue.reject(Pt)}),this.resolver._isIframeWebStorageSupported(this.auth,function(Pt){Pt||ue.reject(we(ue.auth,"web-storage-unsupported"))}),this.pollUserCancellation();case 9:case"end":return St.stop()}},re,this)}));return function(){return O.apply(this,arguments)}}()},{key:"eventId",get:function(){var X;return(null===(X=this.authWindow)||void 0===X?void 0:X.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(we(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,H.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var X=this;!function ue(){var ge,Fe;X.pollId=(null===(Fe=null===(ge=X.authWindow)||void 0===ge?void 0:ge.window)||void 0===Fe?void 0:Fe.closed)?window.setTimeout(function(){X.pollId=null,X.reject(we(X.auth,"popup-closed-by-user"))},2e3):window.setTimeout(ue,Nc.get())}()}}]),H}(jf);return z.currentPopupAction=null,z}(),qf=new Map,_u=function(z){(0,M.Z)(U,z);var H,B=(0,x.Z)(U);function U(H,O){var X,re=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,v.Z)(this,U),(X=B.call(this,H,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],O,void 0,re)).eventId=null,X}return(0,Ae.Z)(U,[{key:"execute",value:(H=(0,Te.Z)(ae().mark(function X(){var re,ge;return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:if(re=qf.get(this.auth._key())){St.next=21;break}return St.prev=2,St.next=5,Yf(this.resolver,this.auth);case 5:if(!St.sent){St.next=12;break}return St.next=9,(0,Se.Z)((0,ye.Z)(U.prototype),"execute",this).call(this);case 9:St.t0=St.sent,St.next=13;break;case 12:St.t0=null;case 13:ge=St.t0,re=function(){return Promise.resolve(ge)},St.next=20;break;case 17:St.prev=17,St.t1=St.catch(2),re=function(){return Promise.reject(St.t1)};case 20:qf.set(this.auth._key(),re);case 21:return St.abrupt("return",re());case 22:case"end":return St.stop()}},X,this,[[2,17]])})),function(){return H.apply(this,arguments)})},{key:"onAuthEvent",value:function(){var H=(0,Te.Z)(ae().mark(function X(re){var ue;return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if("signInViaRedirect"!==re.type){Fe.next=4;break}return Fe.abrupt("return",(0,Se.Z)((0,ye.Z)(U.prototype),"onAuthEvent",this).call(this,re));case 4:if("unknown"!==re.type){Fe.next=7;break}return this.resolve(null),Fe.abrupt("return");case 7:if(!re.eventId){Fe.next=17;break}return Fe.next=10,this.auth._redirectUserForId(re.eventId);case 10:if(!(ue=Fe.sent)){Fe.next=16;break}return this.user=ue,Fe.abrupt("return",(0,Se.Z)((0,ye.Z)(U.prototype),"onAuthEvent",this).call(this,re));case 16:this.resolve(null);case 17:case"end":return Fe.stop()}},X,this)}));return function(X){return H.apply(this,arguments)}}()},{key:"onExecution",value:function(){var H=(0,Te.Z)(ae().mark(function X(){return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:case"end":return ue.stop()}},X)}));return function(){return H.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),U}(jf);function Yf(z,B){return _h.apply(this,arguments)}function _h(){return(_h=(0,Te.Z)(ae().mark(function z(B,U){var H,O;return ae().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return H=hp(U),re.next=3,Kf(B)._get(H);case 3:return re.t0=re.sent,O="true"===re.t0,re.next=7,Kf(B)._remove(H);case 7:return re.abrupt("return",O);case 8:case"end":return re.stop()}},z)}))).apply(this,arguments)}function Ng(z,B){return cp.apply(this,arguments)}function cp(){return(cp=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Kf(B)._set(hp(U),"true"));case 1:case"end":return O.stop()}},z)}))).apply(this,arguments)}function d0(){qf.clear()}function Kf(z){return ni(z._redirectPersistence)}function hp(z){return kt("pendingRedirect",z.config.apiKey,z.name)}function fp(z,B,U){return function(z,B,U){return $f.apply(this,arguments)}(z,B,U)}function $f(){return($f=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return O=ir(B),at(B,U,ks),X=Yl(O,H),ue.next=5,Ng(X,O);case 5:return ue.abrupt("return",X._openRedirect(O,U,"signInViaRedirect"));case 6:case"end":return ue.stop()}},z)}))).apply(this,arguments)}function p0(z,B,U){return function(z,B,U){return Oo.apply(this,arguments)}(z,B,U)}function Oo(){return(Oo=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return at((O=(0,be.m9)(B)).auth,U,ks),X=Yl(O.auth,H),ge.next=5,Ng(X,O.auth);case 5:return ge.next=7,rf(O);case 7:return ge.abrupt("return",X._openRedirect(O.auth,U,"reauthViaRedirect",ge.sent));case 9:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function bh(z,B,U){return function(z,B,U){return Zg.apply(this,arguments)}(z,B,U)}function Zg(){return(Zg=(0,Te.Z)(ae().mark(function z(B,U,H){var O,X;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return at((O=(0,be.m9)(B)).auth,U,ks),X=Yl(O.auth,H),ge.next=5,Xu(!1,O,U.providerId);case 5:return ge.next=7,Ng(X,O.auth);case 7:return ge.next=9,rf(O);case 9:return ge.abrupt("return",X._openRedirect(O.auth,U,"linkViaRedirect",ge.sent));case 11:case"end":return ge.stop()}},z)}))).apply(this,arguments)}function mk(z,B){return pp.apply(this,arguments)}function pp(){return(pp=(0,Te.Z)(ae().mark(function z(B,U){return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,ir(B)._initializationPromise;case 2:return O.abrupt("return",Qf(B,U,!1));case 3:case"end":return O.stop()}},z)}))).apply(this,arguments)}function Qf(z,B){return wh.apply(this,arguments)}function wh(){return(wh=(0,Te.Z)(ae().mark(function z(B,U){var H,O,X,re,ue,ge=arguments;return ae().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:return H=ge.length>2&&void 0!==ge[2]&&ge[2],O=ir(B),X=Yl(O,U),re=new _u(O,X,H),St.next=6,re.execute();case 6:if(!(ue=St.sent)||H){St.next=13;break}return delete ue.user._redirectEventId,St.next=11,O._persistUserIfCurrent(ue.user);case 11:return St.next=13,O._setRedirectUser(null,U);case 13:return St.abrupt("return",ue);case 14:case"end":return St.stop()}},z)}))).apply(this,arguments)}function rf(z){return af.apply(this,arguments)}function af(){return(af=(0,Te.Z)(ae().mark(function z(B){var U;return ae().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return U=D("".concat(B.uid,":::")),B._redirectEventId=U,O.next=4,B.auth._setRedirectUser(B);case 4:return O.next=6,B.auth._persistUserIfCurrent(B);case 6:return O.abrupt("return",U);case 7:case"end":return O.stop()}},z)}))).apply(this,arguments)}var vs=function(){function z(B){(0,v.Z)(this,z),this.auth=B,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,Ae.Z)(z,[{key:"registerConsumer",value:function(U){this.consumers.add(U),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,U)&&(this.sendToConsumer(this.queuedRedirectEvent,U),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(U){this.consumers.delete(U)}},{key:"onEvent",value:function(U){var H=this;if(this.hasEventBeenHandled(U))return!1;var O=!1;return this.consumers.forEach(function(X){H.isEventForConsumer(U,X)&&(O=!0,H.sendToConsumer(U,X),H.saveEventToCache(U))}),this.hasHandledPotentialRedirect||!function(z){switch(z.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v0(z);default:return!1}}(U)||(this.hasHandledPotentialRedirect=!0,O||(this.queuedRedirectEvent=U,O=!0)),O}},{key:"sendToConsumer",value:function(U,H){var O;if(U.error&&!v0(U)){var X=(null===(O=U.error.code)||void 0===O?void 0:O.split("auth/")[1])||"internal-error";H.onError(we(this.auth,X))}else H.onAuthEvent(U)}},{key:"isEventForConsumer",value:function(U,H){var O=null===H.eventId||!!U.eventId&&U.eventId===H.eventId;return H.filter.includes(U.type)&&O}},{key:"hasEventBeenHandled",value:function(U){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bv(U))}},{key:"saveEventToCache",value:function(U){this.cachedEventUids.add(bv(U)),this.lastProcessedEventTime=Date.now()}}]),z}();function bv(z){return[z.type,z.eventId,z.sessionId,z.tenantId].filter(function(B){return B}).join("-")}function v0(z){var U=z.error;return"unknown"===z.type&&(null==U?void 0:U.code)==="auth/".concat("no-auth-event")}function Jf(z){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,Te.Z)(ae().mark(function z(B){var H=arguments;return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",Ia(B,"GET","/v1/projects",H.length>1&&void 0!==H[1]?H[1]:{}));case 2:case"end":return X.stop()}},z)}))).apply(this,arguments)}var yk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vp=/^https?/;function Ru(){return(Ru=(0,Te.Z)(ae().mark(function z(B){var O,X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if(!B.config.emulator){ge.next=2;break}return ge.abrupt("return");case 2:return ge.next=4,Jf(B);case 4:O=(0,oe.Z)(ge.sent.authorizedDomains),ge.prev=7,O.s();case 9:if((X=O.n()).done){ge.next=20;break}if(re=X.value,ge.prev=11,!$l(re)){ge.next=14;break}return ge.abrupt("return");case 14:ge.next=18;break;case 16:ge.prev=16,ge.t0=ge.catch(11);case 18:ge.next=9;break;case 20:ge.next=25;break;case 22:ge.prev=22,ge.t1=ge.catch(7),O.e(ge.t1);case 25:return ge.prev=25,O.f(),ge.finish(25);case 28:ie(B,"unauthorized-domain");case 29:case"end":return ge.stop()}},z,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function $l(z){var B=Ti(),U=new URL(B),H=U.protocol,O=U.hostname;if(z.startsWith("chrome-extension://")){var X=new URL(z);return""===X.hostname&&""===O?"chrome-extension:"===H&&z.replace("chrome-extension://","")===B.replace("chrome-extension://",""):"chrome-extension:"===H&&X.hostname===O}if(!vp.test(H))return!1;if(yk.test(z))return O===z;var re=z.replace(/\./g,"\\.");return new RegExp("^(.+\\."+re+"|"+re+")$","i").test(O)}var ed=new bi(3e4,6e4);function Xl(){var z=Q().___jsl;if(null==z?void 0:z.H)for(var B=0,U=Object.keys(z.H);B<U.length;B++){var H=U[B];if(z.H[H].r=z.H[H].r||[],z.H[H].L=z.H[H].L||[],z.H[H].r=(0,xe.Z)(z.H[H].L),z.CP)for(var O=0;O<z.CP.length;O++)z.CP[O]=null}}var mp=null;function Ug(z){return mp=mp||function(z){return new Promise(function(B,U){var H,O,X;function re(){Xl(),gapi.load("gapi.iframes",{callback:function(){B(gapi.iframes.getContext())},ontimeout:function(){Xl(),U(we(z,"network-request-failed"))},timeout:ed.get()})}if(null===(O=null===(H=Q().gapi)||void 0===H?void 0:H.iframes)||void 0===O?void 0:O.Iframe)B(gapi.iframes.getContext());else{if(!(null===(X=Q().gapi)||void 0===X?void 0:X.load)){var ue=op("iframefcb");return Q()[ue]=function(){gapi.load?re():U(we(z,"network-request-failed"))},ph("https://apis.google.com/js/api.js?onload=".concat(ue))}re()}}).catch(function(B){throw mp=null,B})}(z)}var wv=new bi(5e3,15e3),wk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Zc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gp(z){var B=z.config;nt(B.authDomain,z,"auth-domain-config-required");var U=B.emulator?Ir(B,"emulator/auth/iframe"):"https://".concat(z.config.authDomain,"/").concat("__/auth/iframe"),H={apiKey:B.apiKey,appName:z.name,v:Ne.SDK_VERSION},O=Zc.get(z.config.apiHost);O&&(H.eid=O);var X=z._getFrameworks();return X.length&&(H.fw=X.join(",")),"".concat(U,"?").concat((0,be.xO)(H).slice(1))}function y0(z){return _0.apply(this,arguments)}function _0(){return(_0=(0,Te.Z)(ae().mark(function z(B){var U,H;return ae().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Ug(B);case 2:return U=X.sent,nt(H=Q().gapi,B,"internal-error"),X.abrupt("return",U.open({where:document.body,url:gp(B),messageHandlersFilter:H.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wk,dontclear:!0},function(re){return new Promise(function(){var ue=(0,Te.Z)(ae().mark(function ge(Fe,St){var Pt,pr,Pn;return ae().wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return Pn=function(){Q().clearTimeout(pr),Fe(re)},Ar.next=3,re.restyle({setHideOnLeave:!1});case 3:Pt=we(B,"network-request-failed"),pr=Q().setTimeout(function(){St(Pt)},wv.get()),re.ping(Pn).then(Pn,function(){St(Pt)});case 6:case"end":return Ar.stop()}},ge)}));return function(ge,Fe){return ue.apply(this,arguments)}}())}));case 6:case"end":return X.stop()}},z)}))).apply(this,arguments)}var Vg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D1="http://localhost",b0=function(){function z(B){(0,v.Z)(this,z),this.window=B,this.associatedEvent=null}return(0,Ae.Z)(z,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(U){}}}]),z}();function Ev(z,B,U){var H=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,O=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,X=Math.max((window.screen.availHeight-O)/2,0).toString(),re=Math.max((window.screen.availWidth-H)/2,0).toString(),ue="",ge=Object.assign(Object.assign({},Vg),{width:H.toString(),height:O.toString(),top:X,left:re}),Fe=(0,be.z$)().toLowerCase();U&&(ue=cr(Fe)?"_blank":U),on(Fe)&&(B=B||D1,ge.scrollbars="yes");var St=Object.entries(ge).reduce(function(pr,Pn){var Fn=(0,Ve.Z)(Pn,2),Ar=Fn[0],Na=Fn[1];return"".concat(pr).concat(Ar,"=").concat(Na,",")},"");if(Pa(Fe)&&"_self"!==ue)return Hg(B||"",ue),new b0(null);var Pt=window.open(B||"",ue,St);nt(Pt,z,"popup-blocked");try{Pt.focus()}catch(pr){}return new b0(Pt)}function Hg(z,B){var U=document.createElement("a");U.href=z,U.target=B;var H=document.createEvent("MouseEvent");H.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),U.dispatchEvent(H)}function yp(z,B,U,H,O,X){nt(z.config.authDomain,z,"auth-domain-config-required"),nt(z.config.apiKey,z,"invalid-api-key");var re={apiKey:z.config.apiKey,appName:z.name,authType:U,redirectUrl:H,v:Ne.SDK_VERSION,eventId:O};if(B instanceof ks){B.setDefaultLanguage(z.languageCode),re.providerId=B.providerId||"",(0,be.xb)(B.getCustomParameters())||(re.customParameters=JSON.stringify(B.getCustomParameters()));for(var ue=0,ge=Object.entries(X||{});ue<ge.length;ue++){var Fe=(0,Ve.Z)(ge[ue],2);re[Fe[0]]=Fe[1]}}if(B instanceof $){var pr=B.getScopes().filter(function(pa){return""!==pa});pr.length>0&&(re.scopes=pr.join(","))}z.tenantId&&(re.tid=z.tenantId);for(var Pn=re,Fn=0,Ar=Object.keys(Pn);Fn<Ar.length;Fn++){var Na=Ar[Fn];void 0===Pn[Na]&&delete Pn[Na]}return"".concat(function(z){var B=z.config;return B.emulator?Ir(B,"emulator/auth/handler"):"https://".concat(B.authDomain,"/").concat("__/auth/handler")}(z),"?").concat((0,be.xO)(Pn).slice(1))}var z,nd="webStorageSupport",jg=function(){function z(){(0,v.Z)(this,z),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ig,this._completeRedirectFn=Qf}return(0,Ae.Z)(z,[{key:"_openPopup",value:(B=(0,Te.Z)(ae().mark(function H(O,X,re,ue){var ge,Fe;return ae().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return On(null===(ge=this.eventManagers[O._key()])||void 0===ge?void 0:ge.manager,"_initialize() not called before _openPopup()"),Fe=yp(O,X,re,Ti(),ue),Pt.abrupt("return",Ev(O,Fe,D()));case 3:case"end":return Pt.stop()}},H,this)})),function(H,O,X,re){return B.apply(this,arguments)})},{key:"_openRedirect",value:function(){var B=(0,Te.Z)(ae().mark(function H(O,X,re,ue){return ae().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Fe.next=2,this._originValidation(O);case 2:return le(yp(O,X,re,Ti(),ue)),Fe.abrupt("return",new Promise(function(){}));case 4:case"end":return Fe.stop()}},H,this)}));return function(H,O,X,re){return B.apply(this,arguments)}}()},{key:"_initialize",value:function(U){var H=U._key();if(this.eventManagers[H]){var O=this.eventManagers[H],X=O.manager,re=O.promise;return X?Promise.resolve(X):(On(re,"If manager is not set, promise should be"),re)}var ue=this.initAndGetManager(U);return this.eventManagers[H]={promise:ue},ue}},{key:"initAndGetManager",value:function(){var B=(0,Te.Z)(ae().mark(function H(O){var X,re;return ae().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,y0(O);case 2:return X=ge.sent,re=new vs(O),X.register("authEvent",function(Fe){return nt(null==Fe?void 0:Fe.authEvent,O,"invalid-auth-event"),{status:re.onEvent(Fe.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[O._key()]={manager:re},this.iframes[O._key()]=X,ge.abrupt("return",re);case 8:case"end":return ge.stop()}},H,this)}));return function(H){return B.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(U,H){this.iframes[U._key()].send(nd,{type:nd},function(X){var re,ue=null===(re=null==X?void 0:X[0])||void 0===re?void 0:re[nd];void 0!==ue&&H(!!ue),ie(U,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(U){var H=U._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function(z){return Ru.apply(this,arguments)}(U)),this.originValidationPromises[H]}},{key:"_shouldInitProactively",get:function(){return Ea()||Tn()||Bi()}}]),z;var B}(),k0=function(z){(0,M.Z)(U,z);var B=(0,x.Z)(U);function U(H){var O;return(0,v.Z)(this,U),(O=B.call(this,"phone")).credential=H,O}return(0,Ae.Z)(U,[{key:"_finalizeEnroll",value:function(O,X,re){return function(z,B){return Ia(z,"POST","/v2/accounts/mfaEnrollment:finalize",Xr(z,B))}(O,{idToken:X,displayName:re,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(O,X){return function(z,B){return Ia(z,"POST","/v2/accounts/mfaSignIn:finalize",Xr(z,B))}(O,{mfaPendingCredential:X,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(O){return new U(O)}}]),U}(function(){function z(B){(0,v.Z)(this,z),this.factorId=B}return(0,Ae.Z)(z,[{key:"_process",value:function(U,H,O){switch(H.type){case"enroll":return this._finalizeEnroll(U,H.credential,O);case"signin":return this._finalizeSignIn(U,H.credential);default:return Ot("unexpected MultiFactorSessionType")}}}]),z}()),Eh=function(){var z=function(){function B(){(0,v.Z)(this,B)}return(0,Ae.Z)(B,null,[{key:"assertion",value:function(H){return k0._fromCredential(H)}}]),B}();return z.FACTOR_ID="phone",z}(),C0=function(){function z(B){(0,v.Z)(this,z),this.auth=B,this.internalListeners=new Map}return(0,Ae.Z)(z,[{key:"getUid",value:function(){var U;return this.assertAuthConfigured(),(null===(U=this.auth.currentUser)||void 0===U?void 0:U.uid)||null}},{key:"getToken",value:(B=(0,Te.Z)(ae().mark(function H(O){return ae().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return this.assertAuthConfigured(),ue.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){ue.next=5;break}return ue.abrupt("return",null);case 5:return ue.next=7,this.auth.currentUser.getIdToken(O);case 7:return ue.abrupt("return",{accessToken:ue.sent});case 9:case"end":return ue.stop()}},H,this)})),function(H){return B.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(U){if(this.assertAuthConfigured(),!this.internalListeners.has(U)){var H=this.auth.onIdTokenChanged(function(O){var X;U((null===(X=O)||void 0===X?void 0:X.stsTokenManager.accessToken)||null)});this.internalListeners.set(U,H),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(U){this.assertAuthConfigured();var H=this.internalListeners.get(U);!H||(this.internalListeners.delete(U),H(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),z;var B}();z="Browser",(0,Ne._registerComponent)(new tt.wA("auth",function(B,U){var H=U.options,O=B.getProvider("app").getImmediate(),X=O.options,re=X.apiKey,ue=X.authDomain;return function(ge){nt(re&&!re.includes(":"),"invalid-api-key",{appName:ge.name}),nt(!(null==ue?void 0:ue.includes(":")),"argument-error",{appName:ge.name});var Fe={apiKey:re,authDomain:ue,clientPlatform:z,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dr(z)},St=new Ii(ge,Fe);return function(z,B){var U=(null==B?void 0:B.persistence)||[],H=(Array.isArray(U)?U:[U]).map(ni);(null==B?void 0:B.errorMap)&&z._updateErrorMap(B.errorMap),z._initializeWithPersistence(H,null==B?void 0:B.popupRedirectResolver)}(St,H),St}(O)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(B,U,H){B.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new tt.wA("auth-internal",function(B){var U=ir(B.getProvider("auth").getImmediate());return new C0(U)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)("@firebase/auth","0.18.1",void 0)},5119:function(vn,Ct,ne){"use strict";ne.d(Ct,{wA:function(){return R},H0:function(){return Te},zt:function(){return x}});var Se=ne(4762),ye=ne(5725),R=function(){function v(Ae,xe,ce){this.name=Ae,this.instanceFactory=xe,this.type=ce,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v.prototype.setInstantiationMode=function(Ae){return this.instantiationMode=Ae,this},v.prototype.setMultipleInstances=function(Ae){return this.multipleInstances=Ae,this},v.prototype.setServiceProps=function(Ae){return this.serviceProps=Ae,this},v.prototype.setInstanceCreatedCallback=function(Ae){return this.onInstanceCreated=Ae,this},v}(),M="[DEFAULT]",x=function(){function v(Ae,xe){this.name=Ae,this.container=xe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v.prototype.get=function(Ae){var xe=this.normalizeInstanceIdentifier(Ae);if(!this.instancesDeferred.has(xe)){var ce=new ye.BH;if(this.instancesDeferred.set(xe,ce),this.isInitialized(xe)||this.shouldAutoInitialize())try{var Be=this.getOrInitializeService({instanceIdentifier:xe});Be&&ce.resolve(Be)}catch(ae){}}return this.instancesDeferred.get(xe).promise},v.prototype.getImmediate=function(Ae){var xe,ce=this.normalizeInstanceIdentifier(null==Ae?void 0:Ae.identifier),Be=null!==(xe=null==Ae?void 0:Ae.optional)&&void 0!==xe&&xe;if(!this.isInitialized(ce)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:ce})}catch(ae){if(Be)return null;throw ae}},v.prototype.getComponent=function(){return this.component},v.prototype.setComponent=function(Ae){var xe,ce;if(Ae.name!==this.name)throw Error("Mismatching Component "+Ae.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=Ae,this.shouldAutoInitialize()){if(function(v){return"EAGER"===v.instantiationMode}(Ae))try{this.getOrInitializeService({instanceIdentifier:M})}catch(We){}try{for(var Be=(0,Se.XA)(this.instancesDeferred.entries()),ae=Be.next();!ae.done;ae=Be.next()){var be=(0,Se.CR)(ae.value,2),He=be[1],et=this.normalizeInstanceIdentifier(be[0]);try{var tt=this.getOrInitializeService({instanceIdentifier:et});He.resolve(tt)}catch(We){}}}catch(We){xe={error:We}}finally{try{ae&&!ae.done&&(ce=Be.return)&&ce.call(Be)}finally{if(xe)throw xe.error}}}},v.prototype.clearInstance=function(Ae){void 0===Ae&&(Ae=M),this.instancesDeferred.delete(Ae),this.instancesOptions.delete(Ae),this.instances.delete(Ae)},v.prototype.delete=function(){return(0,Se.mG)(this,void 0,void 0,function(){var Ae;return(0,Se.Jh)(this,function(xe){switch(xe.label){case 0:return Ae=Array.from(this.instances.values()),[4,Promise.all((0,Se.ev)((0,Se.ev)([],(0,Se.CR)(Ae.filter(function(ce){return"INTERNAL"in ce}).map(function(ce){return ce.INTERNAL.delete()}))),(0,Se.CR)(Ae.filter(function(ce){return"_delete"in ce}).map(function(ce){return ce._delete()}))))];case 1:return xe.sent(),[2]}})})},v.prototype.isComponentSet=function(){return null!=this.component},v.prototype.isInitialized=function(Ae){return void 0===Ae&&(Ae=M),this.instances.has(Ae)},v.prototype.getOptions=function(Ae){return void 0===Ae&&(Ae=M),this.instancesOptions.get(Ae)||{}},v.prototype.initialize=function(Ae){var xe,ce;void 0===Ae&&(Ae={});var Be=Ae.options,ae=void 0===Be?{}:Be,be=this.normalizeInstanceIdentifier(Ae.instanceIdentifier);if(this.isInitialized(be))throw Error(this.name+"("+be+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Ne=this.getOrInitializeService({instanceIdentifier:be,options:ae});try{for(var He=(0,Se.XA)(this.instancesDeferred.entries()),et=He.next();!et.done;et=He.next()){var tt=(0,Se.CR)(et.value,2),pt=tt[1];be===this.normalizeInstanceIdentifier(tt[0])&&pt.resolve(Ne)}}catch(ee){xe={error:ee}}finally{try{et&&!et.done&&(ce=He.return)&&ce.call(He)}finally{if(xe)throw xe.error}}return Ne},v.prototype.onInit=function(Ae,xe){var ce,Be=this.normalizeInstanceIdentifier(xe),ae=null!==(ce=this.onInitCallbacks.get(Be))&&void 0!==ce?ce:new Set;ae.add(Ae),this.onInitCallbacks.set(Be,ae);var be=this.instances.get(Be);return be&&Ae(be,Be),function(){ae.delete(Ae)}},v.prototype.invokeOnInitCallbacks=function(Ae,xe){var ce,Be,ae=this.onInitCallbacks.get(xe);if(ae)try{for(var be=(0,Se.XA)(ae),Ne=be.next();!Ne.done;Ne=be.next()){var He=Ne.value;try{He(Ae,xe)}catch(et){}}}catch(et){ce={error:et}}finally{try{Ne&&!Ne.done&&(Be=be.return)&&Be.call(be)}finally{if(ce)throw ce.error}}},v.prototype.getOrInitializeService=function(Ae){var xe=Ae.instanceIdentifier,ce=Ae.options,Be=void 0===ce?{}:ce,ae=this.instances.get(xe);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:oe(xe),options:Be}),this.instances.set(xe,ae),this.instancesOptions.set(xe,Be),this.invokeOnInitCallbacks(ae,xe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,xe,ae)}catch(be){}return ae||null},v.prototype.normalizeInstanceIdentifier=function(Ae){return void 0===Ae&&(Ae=M),this.component?this.component.multipleInstances?Ae:M:Ae},v.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},v}();function oe(v){return v===M?void 0:v}var Te=function(){function v(Ae){this.name=Ae,this.providers=new Map}return v.prototype.addComponent=function(Ae){var xe=this.getProvider(Ae.name);if(xe.isComponentSet())throw new Error("Component "+Ae.name+" has already been registered with "+this.name);xe.setComponent(Ae)},v.prototype.addOrOverwriteComponent=function(Ae){this.getProvider(Ae.name).isComponentSet()&&this.providers.delete(Ae.name),this.addComponent(Ae)},v.prototype.getProvider=function(Ae){if(this.providers.has(Ae))return this.providers.get(Ae);var xe=new x(Ae,this);return this.providers.set(Ae,xe),xe},v.prototype.getProviders=function(){return Array.from(this.providers.values())},v}()},2134:function(vn,Ct,ne){"use strict";ne.d(Ct,{in:function(){return Ve},Yd:function(){return ce},Ub:function(){return Be},Am:function(){return ae}});var x,Se=ne(6054),ye=ne(5134),R=ne(7289),M=ne(3512),oe=[],Ve=function(be){return be[be.DEBUG=0]="DEBUG",be[be.VERBOSE=1]="VERBOSE",be[be.INFO=2]="INFO",be[be.WARN=3]="WARN",be[be.ERROR=4]="ERROR",be[be.SILENT=5]="SILENT",be}({}),Te={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},v=Ve.INFO,Ae=((0,M.Z)(x={},Ve.DEBUG,"log"),(0,M.Z)(x,Ve.VERBOSE,"log"),(0,M.Z)(x,Ve.INFO,"info"),(0,M.Z)(x,Ve.WARN,"warn"),(0,M.Z)(x,Ve.ERROR,"error"),x),xe=function(Ne,He){if(!(He<Ne.logLevel)){var et=(new Date).toISOString(),tt=Ae[He];if(!tt)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(He,")"));for(var We,pt=arguments.length,lt=new Array(pt>2?pt-2:0),ee=2;ee<pt;ee++)lt[ee-2]=arguments[ee];(We=console)[tt].apply(We,["[".concat(et,"]  ").concat(Ne.name,":")].concat(lt))}},ce=function(){function be(Ne){(0,ye.Z)(this,be),this.name=Ne,this._logLevel=v,this._logHandler=xe,this._userLogHandler=null,oe.push(this)}return(0,R.Z)(be,[{key:"logLevel",get:function(){return this._logLevel},set:function(He){if(!(He in Ve))throw new TypeError('Invalid value "'.concat(He,'" assigned to `logLevel`'));this._logLevel=He}},{key:"setLogLevel",value:function(He){this._logLevel="string"==typeof He?Te[He]:He}},{key:"logHandler",get:function(){return this._logHandler},set:function(He){if("function"!=typeof He)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=He}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(He){this._userLogHandler=He}},{key:"debug",value:function(){for(var He=arguments.length,et=new Array(He),tt=0;tt<He;tt++)et[tt]=arguments[tt];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.DEBUG].concat(et)),this._logHandler.apply(this,[this,Ve.DEBUG].concat(et))}},{key:"log",value:function(){for(var He=arguments.length,et=new Array(He),tt=0;tt<He;tt++)et[tt]=arguments[tt];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.VERBOSE].concat(et)),this._logHandler.apply(this,[this,Ve.VERBOSE].concat(et))}},{key:"info",value:function(){for(var He=arguments.length,et=new Array(He),tt=0;tt<He;tt++)et[tt]=arguments[tt];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.INFO].concat(et)),this._logHandler.apply(this,[this,Ve.INFO].concat(et))}},{key:"warn",value:function(){for(var He=arguments.length,et=new Array(He),tt=0;tt<He;tt++)et[tt]=arguments[tt];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.WARN].concat(et)),this._logHandler.apply(this,[this,Ve.WARN].concat(et))}},{key:"error",value:function(){for(var He=arguments.length,et=new Array(He),tt=0;tt<He;tt++)et[tt]=arguments[tt];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.ERROR].concat(et)),this._logHandler.apply(this,[this,Ve.ERROR].concat(et))}}]),be}();function Be(be){oe.forEach(function(Ne){Ne.setLogLevel(be)})}function ae(be,Ne){var et,He=(0,Se.Z)(oe);try{var tt=function(){var lt=null;Ne&&Ne.level&&(lt=Te[Ne.level]),et.value.userLogHandler=null===be?null:function(ee,Dn){for(var mn=arguments.length,nn=new Array(mn>2?mn-2:0),Vt=2;Vt<mn;Vt++)nn[Vt-2]=arguments[Vt];var Nt=nn.map(function(Rt){if(null==Rt)return null;if("string"==typeof Rt)return Rt;if("number"==typeof Rt||"boolean"==typeof Rt)return Rt.toString();if(Rt instanceof Error)return Rt.message;try{return JSON.stringify(Rt)}catch(Bt){return null}}).filter(function(Rt){return Rt}).join(" ");Dn>=(null!=lt?lt:ee.logLevel)&&be({level:Ve[Dn].toLowerCase(),message:Nt,args:nn,type:ee.name})}};for(He.s();!(et=He.n()).done;)tt()}catch(We){He.e(We)}finally{He.f()}}},5725:function(vn,Ct,ne){"use strict";ne.d(Ct,{BH:function(){return pt},LL:function(){return Ot},ZR:function(){return nt},gQ:function(){return ls},hu:function(){return Ae},g5:function(){return xe},US:function(){return ae},tV:function(){return He},h$:function(){return be},r3:function(){return rs},Sg:function(){return lt},ne:function(){return Es},p$:function(){return et},vZ:function(){return Ma},ZB:function(){return tt},gK:function(){return Er},pd:function(){return Qs},m9:function(){return Zi},z$:function(){return ee},GJ:function(){return So},jU:function(){return nn},ru:function(){return Vt},d:function(){return Rt},xb:function(){return Ir},w1:function(){return Bt},hl:function(){return ie},uI:function(){return Dn},UG:function(){return mn},Yr:function(){return k},b$:function(){return Nt},G6:function(){return j},Mn:function(){return K},w9:function(){return pc},cI:function(){return ni},UI:function(){return or},xO:function(){return Xr},zd:function(){return Ia},DV:function(){return bi},ug:function(){return ii},dS:function(){return pi},Pz:function(){return mi},Dv:function(){return is},Wj:function(){return jn},lb:function(){return ri}});var Se=ne(6054),ye=ne(2787),R=ne(6518),M=ne(1885),x=ne(9727),oe=ne(3455),Ve=ne(5134),Te=ne(7289),Ae=function(Et,ot){if(!Et)throw xe(ot)},xe=function(Et){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Et)},ce=function(Et){for(var ot=[],gt=0,Yt=0;Yt<Et.length;Yt++){var Gt=Et.charCodeAt(Yt);Gt<128?ot[gt++]=Gt:Gt<2048?(ot[gt++]=Gt>>6|192,ot[gt++]=63&Gt|128):55296==(64512&Gt)&&Yt+1<Et.length&&56320==(64512&Et.charCodeAt(Yt+1))?(Gt=65536+((1023&Gt)<<10)+(1023&Et.charCodeAt(++Yt)),ot[gt++]=Gt>>18|240,ot[gt++]=Gt>>12&63|128,ot[gt++]=Gt>>6&63|128,ot[gt++]=63&Gt|128):(ot[gt++]=Gt>>12|224,ot[gt++]=Gt>>6&63|128,ot[gt++]=63&Gt|128)}return ot},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(Et,ot){if(!Array.isArray(Et))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var gt=ot?this.byteToCharMapWebSafe_:this.byteToCharMap_,Yt=[],Gt=0;Gt<Et.length;Gt+=3){var Nn=Et[Gt],Mn=Gt+1<Et.length,ai=Mn?Et[Gt+1]:0,In=Gt+2<Et.length,xi=In?Et[Gt+2]:0,wt=(15&ai)<<2|xi>>6,Ft=63&xi;In||(Ft=64,Mn||(wt=64)),Yt.push(gt[Nn>>2],gt[(3&Nn)<<4|ai>>4],gt[wt],gt[Ft])}return Yt.join("")},encodeString:function(Et,ot){return this.HAS_NATIVE_SUPPORT&&!ot?btoa(Et):this.encodeByteArray(ce(Et),ot)},decodeString:function(Et,ot){return this.HAS_NATIVE_SUPPORT&&!ot?atob(Et):function(Et){for(var ot=[],gt=0,Yt=0;gt<Et.length;){var Gt=Et[gt++];if(Gt<128)ot[Yt++]=String.fromCharCode(Gt);else if(Gt>191&&Gt<224){var Nn=Et[gt++];ot[Yt++]=String.fromCharCode((31&Gt)<<6|63&Nn)}else if(Gt>239&&Gt<365){var xi=((7&Gt)<<18|(63&Et[gt++])<<12|(63&Et[gt++])<<6|63&Et[gt++])-65536;ot[Yt++]=String.fromCharCode(55296+(xi>>10)),ot[Yt++]=String.fromCharCode(56320+(1023&xi))}else{var oa=Et[gt++],Ga=Et[gt++];ot[Yt++]=String.fromCharCode((15&Gt)<<12|(63&oa)<<6|63&Ga)}}return ot.join("")}(this.decodeStringToByteArray(Et,ot))},decodeStringToByteArray:function(Et,ot){this.init_();for(var gt=ot?this.charToByteMapWebSafe_:this.charToByteMap_,Yt=[],Gt=0;Gt<Et.length;){var Nn=gt[Et.charAt(Gt++)],ai=Gt<Et.length?gt[Et.charAt(Gt)]:0,xi=++Gt<Et.length?gt[Et.charAt(Gt)]:64,Ga=++Gt<Et.length?gt[Et.charAt(Gt)]:64;if(++Gt,null==Nn||null==ai||null==xi||null==Ga)throw Error();Yt.push(Nn<<2|ai>>4),64!==xi&&(Yt.push(ai<<4&240|xi>>2),64!==Ga&&Yt.push(xi<<6&192|Ga))}return Yt},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var Et=0;Et<this.ENCODED_VALS.length;Et++)this.byteToCharMap_[Et]=this.ENCODED_VALS.charAt(Et),this.charToByteMap_[this.byteToCharMap_[Et]]=Et,this.byteToCharMapWebSafe_[Et]=this.ENCODED_VALS_WEBSAFE.charAt(Et),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Et]]=Et,Et>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Et)]=Et,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Et)]=Et)}}},be=function(Et){var ot=ce(Et);return ae.encodeByteArray(ot,!0)},Ne=function(Et){return be(Et).replace(/\./g,"")},He=function(Et){try{return ae.decodeString(Et,!0)}catch(ot){console.error("base64Decode failed: ",ot)}return null};function et(Tt){return tt(void 0,Tt)}function tt(Tt,Et){if(!(Et instanceof Object))return Et;switch(Et.constructor){case Date:return new Date(Et.getTime());case Object:void 0===Tt&&(Tt={});break;case Array:Tt=[];break;default:return Et}for(var gt in Et)!Et.hasOwnProperty(gt)||!We(gt)||(Tt[gt]=tt(Tt[gt],Et[gt]));return Tt}function We(Tt){return"__proto__"!==Tt}var pt=function(){function Tt(){var Et=this;(0,Ve.Z)(this,Tt),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(ot,gt){Et.resolve=ot,Et.reject=gt})}return(0,Te.Z)(Tt,[{key:"wrapCallback",value:function(ot){var gt=this;return function(Yt,Gt){Yt?gt.reject(Yt):gt.resolve(Gt),"function"==typeof ot&&(gt.promise.catch(function(){}),1===ot.length?ot(Yt):ot(Yt,Gt))}}}]),Tt}();function lt(Tt,Et){if(Tt.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var gt=Et||"demo-project",Yt=Tt.iat||0,Gt=Tt.sub||Tt.user_id;if(!Gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var Nn=Object.assign({iss:"https://securetoken.google.com/".concat(gt),aud:gt,iat:Yt,exp:Yt+3600,auth_time:Yt,sub:Gt,user_id:Gt,firebase:{sign_in_provider:"custom",identities:{}}},Tt);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(Nn)),""].join(".")}function ee(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Dn(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ee())}function mn(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Tt){return!1}}function nn(){return"object"==typeof self&&self.self===self}function Vt(){var Tt="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Tt&&void 0!==Tt.id}function Nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Rt(){return ee().indexOf("Electron/")>=0}function Bt(){var Tt=ee();return Tt.indexOf("MSIE ")>=0||Tt.indexOf("Trident/")>=0}function K(){return ee().indexOf("MSAppHost/")>=0}function k(){return!1}function j(){return!mn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){return"object"==typeof indexedDB}var nt=function(Tt){(0,M.Z)(ot,Tt);var Et=(0,x.Z)(ot);function ot(gt,Yt,Gt){var Nn;return(0,Ve.Z)(this,ot),(Nn=Et.call(this,Yt)).code=gt,Nn.customData=Gt,Nn.name="FirebaseError",Object.setPrototypeOf((0,R.Z)(Nn),ot.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,R.Z)(Nn),Ot.prototype.create),Nn}return ot}((0,oe.Z)(Error)),Ot=function(){function Tt(Et,ot,gt){(0,Ve.Z)(this,Tt),this.service=Et,this.serviceName=ot,this.errors=gt}return(0,Te.Z)(Tt,[{key:"create",value:function(ot){var gt=(arguments.length<=1?void 0:arguments[1])||{},Yt="".concat(this.service,"/").concat(ot),Gt=this.errors[ot],Nn=Gt?On(Gt,gt):"Error",Mn="".concat(this.serviceName,": ").concat(Nn," (").concat(Yt,")."),ai=new nt(Yt,Mn,gt);return ai}}]),Tt}();function On(Tt,Et){return Tt.replace(rr,function(ot,gt){var Yt=Et[gt];return null!=Yt?String(Yt):"<".concat(gt,"?>")})}var rr=/\{\$([^}]+)}/g;function ni(Tt){return JSON.parse(Tt)}function mi(Tt){return JSON.stringify(Tt)}var ji=function(Et){var ot={},gt={},Yt={},Gt="";try{var Nn=Et.split(".");ot=ni(He(Nn[0])||""),gt=ni(He(Nn[1])||""),Gt=Nn[2],Yt=gt.d||{},delete gt.d}catch(Mn){}return{header:ot,claims:gt,data:Yt,signature:Gt}},pc=function(Et){var gt=ji(Et).claims;return!!gt&&"object"==typeof gt&&gt.hasOwnProperty("iat")},So=function(Et){var ot=ji(Et).claims;return"object"==typeof ot&&!0===ot.admin};function rs(Tt,Et){return Object.prototype.hasOwnProperty.call(Tt,Et)}function bi(Tt,Et){if(Object.prototype.hasOwnProperty.call(Tt,Et))return Tt[Et]}function Ir(Tt){for(var Et in Tt)if(Object.prototype.hasOwnProperty.call(Tt,Et))return!1;return!0}function or(Tt,Et,ot){var gt={};for(var Yt in Tt)Object.prototype.hasOwnProperty.call(Tt,Yt)&&(gt[Yt]=Et.call(ot,Tt[Yt],Yt,Tt));return gt}function Ma(Tt,Et){if(Tt===Et)return!0;for(var ot=Object.keys(Tt),gt=Object.keys(Et),Yt=0,Gt=ot;Yt<Gt.length;Yt++){var Nn=Gt[Yt];if(!gt.includes(Nn))return!1;var Mn=Tt[Nn],ai=Et[Nn];if(ml(Mn)&&ml(ai)){if(!Ma(Mn,ai))return!1}else if(Mn!==ai)return!1}for(var In=0,xi=gt;In<xi.length;In++)if(!ot.includes(xi[In]))return!1;return!0}function ml(Tt){return null!==Tt&&"object"==typeof Tt}function Xr(Tt){for(var Et=[],ot=function(){var Nn=(0,ye.Z)(Yt[gt],2),Mn=Nn[0],ai=Nn[1];Array.isArray(ai)?ai.forEach(function(In){Et.push(encodeURIComponent(Mn)+"="+encodeURIComponent(In))}):Et.push(encodeURIComponent(Mn)+"="+encodeURIComponent(ai))},gt=0,Yt=Object.entries(Tt);gt<Yt.length;gt++)ot();return Et.length?"&"+Et.join("&"):""}function Ia(Tt){var Et={};return Tt.replace(/^\?/,"").split("&").forEach(function(gt){if(gt){var Yt=gt.split("="),Gt=(0,ye.Z)(Yt,2),Mn=Gt[1];Et[decodeURIComponent(Gt[0])]=decodeURIComponent(Mn)}}),Et}function Qs(Tt){var Et=Tt.indexOf("?");if(!Et)return"";var ot=Tt.indexOf("#",Et);return Tt.substring(Et,ot>0?ot:void 0)}var ls=function(){function Tt(){(0,Ve.Z)(this,Tt),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var Et=1;Et<this.blockSize;++Et)this.pad_[Et]=0;this.reset()}return(0,Te.Z)(Tt,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(ot,gt){gt||(gt=0);var Yt=this.W_;if("string"==typeof ot)for(var Gt=0;Gt<16;Gt++)Yt[Gt]=ot.charCodeAt(gt)<<24|ot.charCodeAt(gt+1)<<16|ot.charCodeAt(gt+2)<<8|ot.charCodeAt(gt+3),gt+=4;else for(var Nn=0;Nn<16;Nn++)Yt[Nn]=ot[gt]<<24|ot[gt+1]<<16|ot[gt+2]<<8|ot[gt+3],gt+=4;for(var Mn=16;Mn<80;Mn++){var ai=Yt[Mn-3]^Yt[Mn-8]^Yt[Mn-14]^Yt[Mn-16];Yt[Mn]=4294967295&(ai<<1|ai>>>31)}for(var Ft,Je,In=this.chain_[0],xi=this.chain_[1],oa=this.chain_[2],Ga=this.chain_[3],wt=this.chain_[4],$e=0;$e<80;$e++){$e<40?$e<20?(Ft=Ga^xi&(oa^Ga),Je=1518500249):(Ft=xi^oa^Ga,Je=1859775393):$e<60?(Ft=xi&oa|Ga&(xi|oa),Je=2400959708):(Ft=xi^oa^Ga,Je=3395469782);var kt=(In<<5|In>>>27)+Ft+wt+Je+Yt[$e]&4294967295;wt=Ga,Ga=oa,oa=4294967295&(xi<<30|xi>>>2),xi=In,In=kt}this.chain_[0]=this.chain_[0]+In&4294967295,this.chain_[1]=this.chain_[1]+xi&4294967295,this.chain_[2]=this.chain_[2]+oa&4294967295,this.chain_[3]=this.chain_[3]+Ga&4294967295,this.chain_[4]=this.chain_[4]+wt&4294967295}},{key:"update",value:function(ot,gt){if(null!=ot){void 0===gt&&(gt=ot.length);for(var Yt=gt-this.blockSize,Gt=0,Nn=this.buf_,Mn=this.inbuf_;Gt<gt;){if(0===Mn)for(;Gt<=Yt;)this.compress_(ot,Gt),Gt+=this.blockSize;if("string"==typeof ot){for(;Gt<gt;)if(Nn[Mn]=ot.charCodeAt(Gt),++Gt,++Mn===this.blockSize){this.compress_(Nn),Mn=0;break}}else for(;Gt<gt;)if(Nn[Mn]=ot[Gt],++Gt,++Mn===this.blockSize){this.compress_(Nn),Mn=0;break}}this.inbuf_=Mn,this.total_+=gt}}},{key:"digest",value:function(){var ot=[],gt=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Yt=this.blockSize-1;Yt>=56;Yt--)this.buf_[Yt]=255&gt,gt/=256;this.compress_(this.buf_);for(var Gt=0,Nn=0;Nn<5;Nn++)for(var Mn=24;Mn>=0;Mn-=8)ot[Gt]=this.chain_[Nn]>>Mn&255,++Gt;return ot}}]),Tt}();function Es(Tt,Et){var ot=new ia(Tt,Et);return ot.subscribe.bind(ot)}var ia=function(){function Tt(Et,ot){var gt=this;(0,Ve.Z)(this,Tt),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ot,this.task.then(function(){Et(gt)}).catch(function(Yt){gt.error(Yt)})}return(0,Te.Z)(Tt,[{key:"next",value:function(ot){this.forEachObserver(function(gt){gt.next(ot)})}},{key:"error",value:function(ot){this.forEachObserver(function(gt){gt.error(ot)}),this.close(ot)}},{key:"complete",value:function(){this.forEachObserver(function(ot){ot.complete()}),this.close()}},{key:"subscribe",value:function(ot,gt,Yt){var Nn,Gt=this;if(void 0===ot&&void 0===gt&&void 0===Yt)throw new Error("Missing Observer.");void 0===(Nn=function(Tt,Et){if("object"!=typeof Tt||null===Tt)return!1;var gt,ot=(0,Se.Z)(["next","error","complete"]);try{for(ot.s();!(gt=ot.n()).done;){var Yt=gt.value;if(Yt in Tt&&"function"==typeof Tt[Yt])return!0}}catch(Gt){ot.e(Gt)}finally{ot.f()}return!1}(ot)?ot:{next:ot,error:gt,complete:Yt}).next&&(Nn.next=sa),void 0===Nn.error&&(Nn.error=sa),void 0===Nn.complete&&(Nn.complete=sa);var Mn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{Gt.finalError?Nn.error(Gt.finalError):Nn.complete()}catch(ai){}}),this.observers.push(Nn),Mn}},{key:"unsubscribeOne",value:function(ot){void 0===this.observers||void 0===this.observers[ot]||(delete this.observers[ot],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(ot){if(!this.finalized)for(var gt=0;gt<this.observers.length;gt++)this.sendOne(gt,ot)}},{key:"sendOne",value:function(ot,gt){var Yt=this;this.task.then(function(){if(void 0!==Yt.observers&&void 0!==Yt.observers[ot])try{gt(Yt.observers[ot])}catch(Gt){"undefined"!=typeof console&&console.error&&console.error(Gt)}})}},{key:"close",value:function(ot){var gt=this;this.finalized||(this.finalized=!0,void 0!==ot&&(this.finalError=ot),this.task.then(function(){gt.observers=void 0,gt.onNoObservers=void 0}))}}]),Tt}();function sa(){}var is=function(Et,ot,gt,Yt){var Gt;if(Yt<ot?Gt="at least "+ot:Yt>gt&&(Gt=0===gt?"none":"no more than "+gt),Gt)throw new Error(Et+" failed: Was called with "+Yt+(1===Yt?" argument.":" arguments.")+" Expects "+Gt+".")};function Er(Tt,Et){return"".concat(Tt," failed: ").concat(Et," argument ")}function jn(Tt,Et,ot,gt){if((!gt||ot)&&"function"!=typeof ot)throw new Error(Er(Tt,Et)+"must be a valid function.")}function ri(Tt,Et,ot,gt){if((!gt||ot)&&("object"!=typeof ot||null===ot))throw new Error(Er(Tt,Et)+"must be a valid context object.")}var pi=function(Et){for(var ot=[],gt=0,Yt=0;Yt<Et.length;Yt++){var Gt=Et.charCodeAt(Yt);if(Gt>=55296&&Gt<=56319){var Nn=Gt-55296;Yt++,Ae(Yt<Et.length,"Surrogate pair missing trail surrogate."),Gt=65536+(Nn<<10)+(Et.charCodeAt(Yt)-56320)}Gt<128?ot[gt++]=Gt:Gt<2048?(ot[gt++]=Gt>>6|192,ot[gt++]=63&Gt|128):Gt<65536?(ot[gt++]=Gt>>12|224,ot[gt++]=Gt>>6&63|128,ot[gt++]=63&Gt|128):(ot[gt++]=Gt>>18|240,ot[gt++]=Gt>>12&63|128,ot[gt++]=Gt>>6&63|128,ot[gt++]=63&Gt|128)}return ot},ii=function(Et){for(var ot=0,gt=0;gt<Et.length;gt++){var Yt=Et.charCodeAt(gt);Yt<128?ot++:Yt<2048?ot+=2:Yt>=55296&&Yt<=56319?(ot+=4,gt++):ot+=3}return ot};function Zi(Tt){return Tt&&Tt._delegate?Tt._delegate:Tt}},9001:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return Se.Z}});var Se=ne(1932);Se.Z.registerVersion("firebase","9.1.1","app-compat")},3121:function(vn,Ct,ne){"use strict";ne.r(Ct);var Se=ne(5134),ye=ne(7289),R=ne(8239),M=ne(8774),x=ne.n(M),oe=ne(1932),Ve=ne(8251),Te=ne(9333),v=ne(9187),Ae=ne(1885),xe=ne(9727),ce=ne(282),Be=ne(5725),Ne=(ne(7092),ne(2134),ne(5119));function He(){return window}function tt(wt,Ft,Je){return We.apply(this,arguments)}function We(){return(We=(0,R.Z)(x().mark(function wt(Ft,Je,$e){var kt,rn,Jt,on,Tn;return x().wrap(function(Ha){for(;;)switch(Ha.prev=Ha.next){case 0:return rn=He(),Jt=rn.BuildInfo,(0,ce.ap)(Je.sessionId,"AuthEvent did not contain a session ID"),Ha.next=4,Vt(Je.sessionId);case 4:return on=Ha.sent,Tn={},(0,ce.aq)()?Tn.ibi=Jt.packageName:(0,ce.ar)()?Tn.apn=Jt.packageName:(0,ce.as)(Ft,"operation-not-supported-in-this-environment"),Jt.displayName&&(Tn.appDisplayName=Jt.displayName),Tn.sessionId=on,Ha.abrupt("return",(0,ce.at)(Ft,$e,Je.type,void 0,null!==(kt=Je.eventId)&&void 0!==kt?kt:void 0,Tn));case 10:case"end":return Ha.stop()}},wt)}))).apply(this,arguments)}function lt(){return(lt=(0,R.Z)(x().mark(function wt(Ft){var Je,$e,kt;return x().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Je=He(),$e=Je.BuildInfo,kt={},(0,ce.aq)()?kt.iosBundleId=$e.packageName:(0,ce.ar)()?kt.androidPackageName=$e.packageName:(0,ce.as)(Ft,"operation-not-supported-in-this-environment"),Jt.next=5,(0,ce.au)(Ft,kt);case 5:case"end":return Jt.stop()}},wt)}))).apply(this,arguments)}function ee(wt){var Je=He().cordova;return new Promise(function($e){Je.plugins.browsertab.isAvailable(function(kt){var rn=null;kt?Je.plugins.browsertab.openUrl(wt):rn=Je.InAppBrowser.open(wt,(0,ce.ao)()?"_blank":"_system","location=yes"),$e(rn)})})}function Dn(wt,Ft,Je){return mn.apply(this,arguments)}function mn(){return(mn=(0,R.Z)(x().mark(function wt(Ft,Je,$e){var kt,rn,Jt;return x().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return kt=He(),rn=kt.cordova,Jt=function(){},Tn.prev=2,Tn.next=5,new Promise(function(cr,Ha){var Mi=null;function Os(){var hs;cr();var Pa=null===(hs=rn.plugins.browsertab)||void 0===hs?void 0:hs.close;"function"==typeof Pa&&Pa(),"function"==typeof(null==$e?void 0:$e.close)&&$e.close()}function Yr(){Mi||(Mi=window.setTimeout(function(){Ha((0,ce.av)(Ft,"redirect-cancelled-by-user"))},2e3))}function Bi(){"visible"===(null==document?void 0:document.visibilityState)&&Yr()}Je.addPassiveListener(Os),document.addEventListener("resume",Yr,!1),(0,ce.ar)()&&document.addEventListener("visibilitychange",Bi,!1),Jt=function(){Je.removePassiveListener(Os),document.removeEventListener("resume",Yr,!1),document.removeEventListener("visibilitychange",Bi,!1),Mi&&window.clearTimeout(Mi)}});case 5:return Tn.prev=5,Jt(),Tn.finish(5);case 8:case"end":return Tn.stop()}},wt,null,[[2,,5,8]])}))).apply(this,arguments)}function nn(wt){var Ft,Je,$e,kt,rn,Jt,on,Tn,cr,Ha,Mi=He();(0,ce.aw)("function"==typeof(null===(Ft=null==Mi?void 0:Mi.universalLinks)||void 0===Ft?void 0:Ft.subscribe),wt,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ce.aw)(void 0!==(null===(Je=null==Mi?void 0:Mi.BuildInfo)||void 0===Je?void 0:Je.packageName),wt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ce.aw)("function"==typeof(null===(rn=null===(kt=null===($e=null==Mi?void 0:Mi.cordova)||void 0===$e?void 0:$e.plugins)||void 0===kt?void 0:kt.browsertab)||void 0===rn?void 0:rn.openUrl),wt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ce.aw)("function"==typeof(null===(Tn=null===(on=null===(Jt=null==Mi?void 0:Mi.cordova)||void 0===Jt?void 0:Jt.plugins)||void 0===on?void 0:on.browsertab)||void 0===Tn?void 0:Tn.isAvailable),wt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ce.aw)("function"==typeof(null===(Ha=null===(cr=null==Mi?void 0:Mi.cordova)||void 0===cr?void 0:cr.InAppBrowser)||void 0===Ha?void 0:Ha.open),wt,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Vt(wt){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,R.Z)(x().mark(function wt(Ft){var Je,kt;return x().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Je=Rt(Ft),Jt.next=3,crypto.subtle.digest("SHA-256",Je);case 3:return kt=Array.from(new Uint8Array(Jt.sent)),Jt.abrupt("return",kt.map(function(on){return on.toString(16).padStart(2,"0")}).join(""));case 6:case"end":return Jt.stop()}},wt)}))).apply(this,arguments)}function Rt(wt){if((0,ce.ap)(/[0-9a-zA-Z]+/.test(wt),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(wt);for(var Ft=new ArrayBuffer(wt.length),Je=new Uint8Array(Ft),$e=0;$e<wt.length;$e++)Je[$e]=wt.charCodeAt($e);return Je}var K=function(wt){(0,Ae.Z)(Je,wt);var $e,Ft=(0,xe.Z)(Je);function Je(){var $e;return(0,Se.Z)(this,Je),($e=Ft.apply(this,arguments)).passiveListeners=new Set,$e.initPromise=new Promise(function(kt){$e.resolveInialized=kt}),$e}return(0,ye.Z)(Je,[{key:"addPassiveListener",value:function(kt){this.passiveListeners.add(kt)}},{key:"removePassiveListener",value:function(kt){this.passiveListeners.delete(kt)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(kt){return this.resolveInialized(),this.passiveListeners.forEach(function(rn){return rn(kt)}),(0,Te.Z)((0,v.Z)(Je.prototype),"onEvent",this).call(this,kt)}},{key:"initialized",value:($e=(0,R.Z)(x().mark(function rn(){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,this.initPromise;case 2:case"end":return on.stop()}},rn,this)})),function(){return $e.apply(this,arguments)})}]),Je}(ce.az);function k(wt,Ft){var Je=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:Ft,eventId:Je,urlResponse:null,sessionId:at(),postBody:null,tenantId:wt.tenantId,error:(0,ce.av)(wt,"no-auth-event")}}function j(wt,Ft){return bt()._set(nt(wt),Ft)}function ie(wt){return we.apply(this,arguments)}function we(){return(we=(0,R.Z)(x().mark(function wt(Ft){var Je;return x().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.next=2,bt()._get(nt(Ft));case 2:if(!(Je=kt.sent)){kt.next=6;break}return kt.next=6,bt()._remove(nt(Ft));case 6:return kt.abrupt("return",Je);case 7:case"end":return kt.stop()}},wt)}))).apply(this,arguments)}function Le(wt,Ft){var Je,$e,kt=function(wt){var Ft=rr(wt),Je=Ft.link?decodeURIComponent(Ft.link):void 0,$e=rr(Je).link,kt=Ft.deep_link_id?decodeURIComponent(Ft.deep_link_id):void 0;return rr(kt).link||kt||$e||Je||wt}(Ft);if(kt.includes("/__/auth/callback")){var rn=rr(kt),Jt=rn.firebaseError?function(wt){try{return JSON.parse(wt)}catch(Ft){return null}}(decodeURIComponent(rn.firebaseError)):null,on=null===($e=null===(Je=null==Jt?void 0:Jt.code)||void 0===Je?void 0:Je.split("auth/"))||void 0===$e?void 0:$e[1],Tn=on?(0,ce.av)(on):null;return Tn?{type:wt.type,eventId:wt.eventId,tenantId:wt.tenantId,error:Tn,urlResponse:null,sessionId:null,postBody:null}:{type:wt.type,eventId:wt.eventId,tenantId:wt.tenantId,sessionId:wt.sessionId,urlResponse:kt,postBody:null}}return null}function at(){for(var wt=[],Ft="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",Je=0;Je<20;Je++){var $e=Math.floor(Math.random()*Ft.length);wt.push(Ft.charAt($e))}return wt.join("")}function bt(){return(0,ce.ax)(ce.b)}function nt(wt){return(0,ce.ay)("authEvent",wt.config.apiKey,wt.name)}function rr(wt){if(!(null==wt?void 0:wt.includes("?")))return{};var Ft=wt.split("?"),kt=(0,Ve.Z)(Ft).slice(1);return(0,Be.zd)(kt.join("?"))}var ji=function(){function wt(){(0,Se.Z)(this,wt),this._redirectPersistence=ce.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ce.aA}return(0,ye.Z)(wt,[{key:"_initialize",value:(Ft=(0,R.Z)(x().mark(function $e(kt){var rn,Jt;return x().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return rn=kt._key(),(Jt=this.eventManagers.get(rn))||(Jt=new K(kt),this.eventManagers.set(rn,Jt),this.attachCallbackListeners(kt,Jt)),Tn.abrupt("return",Jt);case 4:case"end":return Tn.stop()}},$e,this)})),function($e){return Ft.apply(this,arguments)})},{key:"_openPopup",value:function(Je){(0,ce.as)(Je,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var Ft=(0,R.Z)(x().mark(function $e(kt,rn,Jt,on){var Tn,cr,Ha;return x().wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:return nn(kt),Yr.next=3,this._initialize(kt);case 3:return Tn=Yr.sent,Yr.next=6,Tn.initialized();case 6:return Tn.resetRedirect(),(0,ce.aB)(),Yr.next=10,this._originValidation(kt);case 10:return cr=k(kt,Jt,on),Yr.next=13,j(kt,cr);case 13:return Yr.next=15,tt(kt,cr,rn);case 15:return Ha=Yr.sent,Yr.next=18,ee(Ha);case 18:return Yr.abrupt("return",Dn(kt,Tn,Yr.sent));case 20:case"end":return Yr.stop()}},$e,this)}));return function($e,kt,rn,Jt){return Ft.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(Je,$e){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(Je){var $e=Je._key();return this.originValidationPromises[$e]||(this.originValidationPromises[$e]=function(wt){return lt.apply(this,arguments)}(Je)),this.originValidationPromises[$e]}},{key:"attachCallbackListeners",value:function(Je,$e){var kt=He(),rn=kt.universalLinks,Jt=kt.handleOpenURL,on=kt.BuildInfo,Tn=setTimeout((0,R.Z)(x().mark(function Os(){return x().wrap(function(Bi){for(;;)switch(Bi.prev=Bi.next){case 0:return Bi.next=2,ie(Je);case 2:$e.onEvent(Ti());case 3:case"end":return Bi.stop()}},Os)})),500),cr=function(){var Os=(0,R.Z)(x().mark(function Yr(Bi){var hs,Pa;return x().wrap(function(Ea){for(;;)switch(Ea.prev=Ea.next){case 0:return clearTimeout(Tn),Ea.next=3,ie(Je);case 3:Pa=null,(hs=Ea.sent)&&(null==Bi?void 0:Bi.url)&&(Pa=Le(hs,Bi.url)),$e.onEvent(Pa||Ti());case 7:case"end":return Ea.stop()}},Yr)}));return function(Bi){return Os.apply(this,arguments)}}();void 0!==rn&&"function"==typeof rn.subscribe&&rn.subscribe(null,cr);var Ha=Jt,Mi="".concat(on.packageName.toLowerCase(),"://");He().handleOpenURL=function(){var Os=(0,R.Z)(x().mark(function Yr(Bi){return x().wrap(function(Pa){for(;;)switch(Pa.prev=Pa.next){case 0:if(Bi.toLowerCase().startsWith(Mi)&&cr({url:Bi}),"function"==typeof Ha)try{Ha(Bi)}catch(Nl){console.error(Nl)}case 2:case"end":return Pa.stop()}},Yr)}));return function(Yr){return Os.apply(this,arguments)}}()}}]),wt;var Ft}();function Ti(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ce.av)("no-auth-event")}}function bi(){var wt;return(null===(wt=null==self?void 0:self.location)||void 0===wt?void 0:wt.protocol)||null}function or(){var wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Be.z$)();return!("file:"!==bi()&&"ionic:"!==bi()||!wt.toLowerCase().match(/iphone|ipad|ipod|android/))}function ml(){return(0,Be.w1)()&&11===(null==document?void 0:document.documentMode)}function Xr(){var wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Be.z$)();return/Edge\/\d+/.test(wt)}function Qs(){try{var wt=self.localStorage,Ft=ce.aG();if(wt)return wt.setItem(Ft,"1"),wt.removeItem(Ft),!function(){var wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Be.z$)();return ml()||Xr(wt)}()||(0,Be.hl)()}catch(Je){return ls()&&(0,Be.hl)()}return!1}function ls(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Es(){return("http:"===bi()||"https:"===bi()||(0,Be.ru)()||or())&&!((0,Be.b$)()||(0,Be.UG)())&&Qs()&&!ls()}function ia(){return or()&&"undefined"!=typeof document}function Hs(){return aa.apply(this,arguments)}function aa(){return(aa=(0,R.Z)(x().mark(function wt(){return x().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(ia()){Je.next=2;break}return Je.abrupt("return",!1);case 2:return Je.abrupt("return",new Promise(function($e){var kt=setTimeout(function(){$e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(kt),$e(!0)})}));case 3:case"end":return Je.stop()}},wt)}))).apply(this,arguments)}var sa={LOCAL:"local",NONE:"none",SESSION:"session"},is=ce.aw,Er="persistence";function ur(wt,Ft){is(Object.values(sa).includes(Ft),wt,"invalid-persistence-type"),(0,Be.b$)()?is(Ft!==sa.SESSION,wt,"unsupported-persistence-type"):(0,Be.UG)()?is(Ft===sa.NONE,wt,"unsupported-persistence-type"):ls()?is(Ft===sa.NONE||Ft===sa.LOCAL&&(0,Be.hl)(),wt,"unsupported-persistence-type"):is(Ft===sa.NONE||Qs(),wt,"unsupported-persistence-type")}function jn(wt){return ri.apply(this,arguments)}function ri(){return(ri=(0,R.Z)(x().mark(function wt(Ft){var Je,$e;return x().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,Ft._initializationPromise;case 2:Je=ii(),$e=ce.ay(Er,Ft.config.apiKey,Ft.name),(null==Je?void 0:Je.sessionStorage)&&Je.sessionStorage.setItem($e,Ft._getPersistence());case 5:case"end":return rn.stop()}},wt)}))).apply(this,arguments)}function ii(){return"undefined"!=typeof window?window:null}var Or=ce.aw,lr=function(){function wt(){(0,Se.Z)(this,wt),this.browserResolver=ce.ax(ce.k),this.cordovaResolver=ce.ax(ji),this.underlyingResolver=null,this._redirectPersistence=ce.a,this._completeRedirectFn=ce.aA}return(0,ye.Z)(wt,[{key:"_initialize",value:(Ft=(0,R.Z)(x().mark(function $e(kt){return x().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:return Jt.next=2,this.selectUnderlyingResolver();case 2:return Jt.abrupt("return",this.assertedUnderlyingResolver._initialize(kt));case 3:case"end":return Jt.stop()}},$e,this)})),function($e){return Ft.apply(this,arguments)})},{key:"_openPopup",value:function(){var Ft=(0,R.Z)(x().mark(function $e(kt,rn,Jt,on){return x().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return cr.next=2,this.selectUnderlyingResolver();case 2:return cr.abrupt("return",this.assertedUnderlyingResolver._openPopup(kt,rn,Jt,on));case 3:case"end":return cr.stop()}},$e,this)}));return function($e,kt,rn,Jt){return Ft.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var Ft=(0,R.Z)(x().mark(function $e(kt,rn,Jt,on){return x().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:return cr.next=2,this.selectUnderlyingResolver();case 2:return cr.abrupt("return",this.assertedUnderlyingResolver._openRedirect(kt,rn,Jt,on));case 3:case"end":return cr.stop()}},$e,this)}));return function($e,kt,rn,Jt){return Ft.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(Je,$e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Je,$e)}},{key:"_originValidation",value:function(Je){return this.assertedUnderlyingResolver._originValidation(Je)}},{key:"_shouldInitProactively",get:function(){return ia()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Or(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var Ft=(0,R.Z)(x().mark(function $e(){return x().wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:if(!this.underlyingResolver){Jt.next=2;break}return Jt.abrupt("return");case 2:return Jt.next=4,Hs();case 4:this.underlyingResolver=Jt.sent?this.cordovaResolver:this.browserResolver;case 6:case"end":return Jt.stop()}},$e,this)}));return function(){return Ft.apply(this,arguments)}}()}]),wt;var Ft}();function Wi(wt){return wt.unwrap()}function Rs(wt){return wa(wt)}function Wo(wt,Ft){var Je,$e=null===(Je=Ft.customData)||void 0===Je?void 0:Je._tokenResponse;if("auth/multi-factor-auth-required"===Ft.code)Ft.resolver=new gt(wt,ce.am(wt,Ft));else if($e){var rn=wa(Ft),Jt=Ft;rn&&(Jt.credential=rn,Jt.tenantId=$e.tenantId||void 0,Jt.email=$e.email||void 0,Jt.phoneNumber=$e.phoneNumber||void 0)}}function wa(wt){var Je=(wt instanceof Be.ZR?wt.customData:wt)._tokenResponse;if(!Je)return null;if(!(wt instanceof Be.ZR)&&"temporaryProof"in Je&&"phoneNumber"in Je)return ce.P.credentialFromResult(wt);var kt,$e=Je.providerId;if(!$e||$e===ce.o.PASSWORD)return null;switch($e){case ce.o.GOOGLE:kt=ce.N;break;case ce.o.FACEBOOK:kt=ce.M;break;case ce.o.GITHUB:kt=ce.Q;break;case ce.o.TWITTER:kt=ce.V;break;default:var rn=Je.oauthIdToken,Jt=Je.oauthAccessToken,Tn=Je.pendingToken,cr=Je.nonce;return Jt||Je.oauthTokenSecret||rn||Tn?Tn?$e.startsWith("saml.")?ce.aJ._create($e,Tn):ce.I._fromParams({providerId:$e,signInMethod:$e,pendingToken:Tn,idToken:rn,accessToken:Jt}):new ce.T($e).credential({idToken:rn,accessToken:Jt,rawNonce:cr}):null}return wt instanceof Be.ZR?kt.credentialFromError(wt):kt.credentialFromResult(wt)}function Zi(wt,Ft){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,R.Z)(x().mark(function wt(Ft,Je){var $e,kt,Jt;return x().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return Tn.prev=0,Tn.next=3,Je;case 3:$e=Tn.sent,Tn.next=10;break;case 6:throw Tn.prev=6,Tn.t0=Tn.catch(0),Tn.t0 instanceof Be.ZR&&Wo(Ft,Tn.t0),Tn.t0;case 10:return Jt=(kt=$e).user,Tn.abrupt("return",{operationType:kt.operationType,credential:Rs($e),additionalUserInfo:ce.ak($e),user:Yt.getOrCreate(Jt)});case 12:case"end":return Tn.stop()}},wt,null,[[0,6]])}))).apply(this,arguments)}function Et(wt,Ft){return ot.apply(this,arguments)}function ot(){return(ot=(0,R.Z)(x().mark(function wt(Ft,Je){var $e;return x().wrap(function(rn){for(;;)switch(rn.prev=rn.next){case 0:return rn.next=2,Je;case 2:return rn.abrupt("return",{verificationId:($e=rn.sent).verificationId,confirm:function(on){return Zi(Ft,$e.confirm(on))}});case 4:case"end":return rn.stop()}},wt)}))).apply(this,arguments)}var gt=function(){function wt(Ft,Je){(0,Se.Z)(this,wt),this.resolver=Je,this.auth=function(wt){return wt.wrapped()}(Ft)}return(0,ye.Z)(wt,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(Je){return Zi(Wi(this.auth),this.resolver.resolveSignIn(Je))}}]),wt}(),Yt=function(){var wt=function(){function Ft(Je){(0,Se.Z)(this,Ft),this._delegate=Je,this.multiFactor=ce.an(Je)}return(0,ye.Z)(Ft,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function($e){return this._delegate.getIdTokenResult($e)}},{key:"getIdToken",value:function($e){return this._delegate.getIdToken($e)}},{key:"linkAndRetrieveDataWithCredential",value:function($e){return this.linkWithCredential($e)}},{key:"linkWithCredential",value:(Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.abrupt("return",Zi(this.auth,ce.Y(this._delegate,rn)));case 1:case"end":return on.stop()}},kt,this)})),function(kt){return Je.apply(this,arguments)})},{key:"linkWithPhoneNumber",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn,Jt){return x().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return Tn.abrupt("return",Et(this.auth,ce.l(this._delegate,rn,Jt)));case 1:case"end":return Tn.stop()}},kt,this)}));return function(kt,rn){return Je.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.abrupt("return",Zi(this.auth,ce.d(this._delegate,rn,lr)));case 1:case"end":return on.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,jn(ce.aC(this.auth));case 2:return on.abrupt("return",ce.g(this._delegate,rn,lr));case 3:case"end":return on.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function($e){return this.reauthenticateWithCredential($e)}},{key:"reauthenticateWithCredential",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.abrupt("return",Zi(this.auth,ce.Z(this._delegate,rn)));case 1:case"end":return on.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function($e,kt){return Et(this.auth,ce.r(this._delegate,$e,kt))}},{key:"reauthenticateWithPopup",value:function($e){return Zi(this.auth,ce.e(this._delegate,$e,lr))}},{key:"reauthenticateWithRedirect",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,jn(ce.aC(this.auth));case 2:return on.abrupt("return",ce.h(this._delegate,rn,lr));case 3:case"end":return on.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function($e){return ce.aa(this._delegate,$e)}},{key:"unlink",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return on.next=2,ce.aj(this._delegate,rn);case 2:return on.abrupt("return",this);case 3:case"end":return on.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"updateEmail",value:function($e){return ce.af(this._delegate,$e)}},{key:"updatePassword",value:function($e){return ce.ag(this._delegate,$e)}},{key:"updatePhoneNumber",value:function($e){return ce.u(this._delegate,$e)}},{key:"updateProfile",value:function($e){return ce.ae(this._delegate,$e)}},{key:"verifyBeforeUpdateEmail",value:function($e,kt){return ce.ab(this._delegate,$e,kt)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function($e){return Ft.USER_MAP.has($e)||Ft.USER_MAP.set($e,new Ft($e)),Ft.USER_MAP.get($e)}}]),Ft;var Je}();return wt.USER_MAP=new WeakMap,wt}(),Gt=ce.aw,Nn=function(){var wt=function(){function Ft(Je,$e){if((0,Se.Z)(this,Ft),this.app=Je,$e.isInitialized())return this._delegate=$e.getImmediate(),void this.linkUnderlyingAuth();var kt=Je.options.apiKey;Gt(kt,"invalid-api-key",{appName:Je.name});var rn=[ce.K];if("undefined"!=typeof window){rn=function(wt,Ft){var Je=ii();if(!(null==Je?void 0:Je.sessionStorage))return[];var $e=ce.ay(Er,wt,Ft);switch(Je.sessionStorage.getItem($e)){case sa.NONE:return[ce.K];case sa.LOCAL:return[ce.i,ce.a];case sa.SESSION:return[ce.a];default:return[]}}(kt,Je.name);for(var Jt=0,on=[ce.i,ce.b,ce.a];Jt<on.length;Jt++){var Tn=on[Jt];rn.includes(Tn)||rn.push(Tn)}}Gt(kt,"invalid-api-key",{appName:Je.name});var cr="undefined"!=typeof window?lr:void 0;this._delegate=$e.initialize({options:{persistence:rn,popupRedirectResolver:cr}}),this._delegate._updateErrorMap(ce.z),this.linkUnderlyingAuth()}return(0,ye.Z)(Ft,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Yt.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function($e){this._delegate.languageCode=$e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function($e){this._delegate.tenantId=$e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function($e,kt){ce.E(this._delegate,$e,kt)}},{key:"applyActionCode",value:function($e){return ce.a1(this._delegate,$e)}},{key:"checkActionCode",value:function($e){return ce.a2(this._delegate,$e)}},{key:"confirmPasswordReset",value:function($e,kt){return ce.a0(this._delegate,$e,kt)}},{key:"createUserWithEmailAndPassword",value:(Je=(0,R.Z)(x().mark(function kt(rn,Jt){return x().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return Tn.abrupt("return",Zi(this._delegate,ce.a4(this._delegate,rn,Jt)));case 1:case"end":return Tn.stop()}},kt,this)})),function(kt,rn){return Je.apply(this,arguments)})},{key:"fetchProvidersForEmail",value:function($e){return this.fetchSignInMethodsForEmail($e)}},{key:"fetchSignInMethodsForEmail",value:function($e){return ce.a9(this._delegate,$e)}},{key:"isSignInWithEmailLink",value:function($e){return ce.a7(this._delegate,$e)}},{key:"getRedirectResult",value:function(){var Je=(0,R.Z)(x().mark(function kt(){var rn;return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return Gt(Es(),this._delegate,"operation-not-supported-in-this-environment"),on.next=3,ce.j(this._delegate,lr);case 3:if(rn=on.sent){on.next=6;break}return on.abrupt("return",{credential:null,user:null});case 6:return on.abrupt("return",Zi(this._delegate,Promise.resolve(rn)));case 7:case"end":return on.stop()}},kt,this)}));return function(){return Je.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function($e){!function(wt,Ft){(0,ce.aC)(wt)._logFramework(Ft)}(this._delegate,$e)}},{key:"onAuthStateChanged",value:function($e,kt,rn){var Jt=Mn($e,kt,rn);return this._delegate.onAuthStateChanged(Jt.next,Jt.error,Jt.complete)}},{key:"onIdTokenChanged",value:function($e,kt,rn){var Jt=Mn($e,kt,rn);return this._delegate.onIdTokenChanged(Jt.next,Jt.error,Jt.complete)}},{key:"sendSignInLinkToEmail",value:function($e,kt){return ce.a6(this._delegate,$e,kt)}},{key:"sendPasswordResetEmail",value:function($e,kt){return ce.$(this._delegate,$e,kt||void 0)}},{key:"setPersistence",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){var Jt;return x().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:ur(this._delegate,rn),cr.t0=rn,cr.next=cr.t0===sa.SESSION?4:cr.t0===sa.LOCAL?6:cr.t0===sa.NONE?11:13;break;case 4:return Jt=ce.a,cr.abrupt("break",14);case 6:return cr.next=8,ce.ax(ce.i)._isAvailable();case 8:return Jt=cr.sent?ce.i:ce.b,cr.abrupt("break",14);case 11:return Jt=ce.K,cr.abrupt("break",14);case 13:return cr.abrupt("return",ce.as("argument-error",{appName:this._delegate.name}));case 14:return cr.abrupt("return",this._delegate.setPersistence(Jt));case 15:case"end":return cr.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function($e){return this.signInWithCredential($e)}},{key:"signInAnonymously",value:function(){return Zi(this._delegate,ce.W(this._delegate))}},{key:"signInWithCredential",value:function($e){return Zi(this._delegate,ce.X(this._delegate,$e))}},{key:"signInWithCustomToken",value:function($e){return Zi(this._delegate,ce._(this._delegate,$e))}},{key:"signInWithEmailAndPassword",value:function($e,kt){return Zi(this._delegate,ce.a5(this._delegate,$e,kt))}},{key:"signInWithEmailLink",value:function($e,kt){return Zi(this._delegate,ce.a8(this._delegate,$e,kt))}},{key:"signInWithPhoneNumber",value:function($e,kt){return Et(this._delegate,ce.s(this._delegate,$e,kt))}},{key:"signInWithPopup",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return Gt(Es(),this._delegate,"operation-not-supported-in-this-environment"),on.abrupt("return",Zi(this._delegate,ce.c(this._delegate,rn,lr)));case 2:case"end":return on.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var Je=(0,R.Z)(x().mark(function kt(rn){return x().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:return Gt(Es(),this._delegate,"operation-not-supported-in-this-environment"),on.next=3,jn(this._delegate);case 3:return on.abrupt("return",ce.f(this._delegate,rn,lr));case 4:case"end":return on.stop()}},kt,this)}));return function(kt){return Je.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function($e){return this._delegate.updateCurrentUser($e)}},{key:"verifyPasswordResetCode",value:function($e){return ce.a3(this._delegate,$e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var $e=this;this._delegate.wrapped=function(){return $e}}}]),Ft;var Je}();return wt.Persistence=sa,wt}();function Mn(wt,Ft,Je){var $e=wt;"function"!=typeof wt&&($e=wt.next,Ft=wt.error,Je=wt.complete);var kt=$e;return{next:function(on){return kt(on&&Yt.getOrCreate(on))},error:Ft,complete:Je}}var wt,ai=function(){var wt=function(){function Ft(){(0,Se.Z)(this,Ft),this.providerId="phone",this._delegate=new ce.P(Wi(oe.Z.auth()))}return(0,ye.Z)(Ft,[{key:"verifyPhoneNumber",value:function($e,kt){return this._delegate.verifyPhoneNumber($e,kt)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function($e,kt){return ce.P.credential($e,kt)}}]),Ft}();return wt.PHONE_SIGN_IN_METHOD=ce.P.PHONE_SIGN_IN_METHOD,wt.PROVIDER_ID=ce.P.PROVIDER_ID,wt}(),In=ce.aw,xi=function(){function wt(Ft,Je){var kt,$e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oe.Z.app();(0,Se.Z)(this,wt),In(null===(kt=$e.options)||void 0===kt?void 0:kt.apiKey,"invalid-api-key",{appName:$e.name}),this._delegate=new ce.R(Ft,Je,$e.auth()),this.type=this._delegate.type}return(0,ye.Z)(wt,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),wt}();(wt=oe.Z).INTERNAL.registerComponent(new Ne.wA("auth-compat",function(Ft){var Je=Ft.getProvider("app-compat").getImmediate(),$e=Ft.getProvider("auth");return new Nn(Je,$e)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ce.A.EMAIL_SIGNIN,PASSWORD_RESET:ce.A.PASSWORD_RESET,RECOVER_EMAIL:ce.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ce.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ce.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ce.A.VERIFY_EMAIL}},EmailAuthProvider:ce.L,FacebookAuthProvider:ce.M,GithubAuthProvider:ce.Q,GoogleAuthProvider:ce.N,OAuthProvider:ce.T,PhoneAuthProvider:ai,PhoneMultiFactorGenerator:ce.m,RecaptchaVerifier:xi,TwitterAuthProvider:ce.V,Auth:Nn,AuthCredential:ce.G,Error:Be.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),wt.registerVersion("@firebase/auth-compat","0.1.4")},4173:function(vn,Ct){var Se;!function(ye,R){"use strict";"object"==typeof vn.exports?vn.exports=ye.document?R(ye,!0):function(M){if(!M.document)throw new Error("jQuery requires a window with a document");return R(M)}:R(ye)}("undefined"!=typeof window?window:this,function(ye,R){"use strict";var M=[],x=Object.getPrototypeOf,oe=M.slice,Ve=M.flat?function($){return M.flat.call($)}:function($){return M.concat.apply([],$)},Te=M.push,v=M.indexOf,Ae={},xe=Ae.toString,ce=Ae.hasOwnProperty,Be=ce.toString,ae=Be.call(Object),be={},Ne=function(P){return"function"==typeof P&&"number"!=typeof P.nodeType&&"function"!=typeof P.item},He=function(P){return null!=P&&P===P.window},et=ye.document,tt={type:!0,src:!0,nonce:!0,noModule:!0};function We($,P,q){var J,he,_e=(q=q||et).createElement("script");if(_e.text=$,P)for(J in tt)(he=P[J]||P.getAttribute&&P.getAttribute(J))&&_e.setAttribute(J,he);q.head.appendChild(_e).parentNode.removeChild(_e)}function pt($){return null==$?$+"":"object"==typeof $||"function"==typeof $?Ae[xe.call($)]||"object":typeof $}var ee=function $(P,q){return new $.fn.init(P,q)};function Dn($){var P=!!$&&"length"in $&&$.length,q=pt($);return!Ne($)&&!He($)&&("array"===q||0===P||"number"==typeof P&&P>0&&P-1 in $)}ee.fn=ee.prototype={jquery:"3.6.0",constructor:ee,length:0,toArray:function(){return oe.call(this)},get:function(P){return null==P?oe.call(this):P<0?this[P+this.length]:this[P]},pushStack:function(P){var q=ee.merge(this.constructor(),P);return q.prevObject=this,q},each:function(P){return ee.each(this,P)},map:function(P){return this.pushStack(ee.map(this,function(q,J){return P.call(q,J,q)}))},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(ee.grep(this,function(P,q){return(q+1)%2}))},odd:function(){return this.pushStack(ee.grep(this,function(P,q){return q%2}))},eq:function(P){var q=this.length,J=+P+(P<0?q:0);return this.pushStack(J>=0&&J<q?[this[J]]:[])},end:function(){return this.prevObject||this.constructor()},push:Te,sort:M.sort,splice:M.splice},ee.extend=ee.fn.extend=function(){var $,P,q,J,he,_e,De=arguments[0]||{},Me=1,Qe=arguments.length,ut=!1;for("boolean"==typeof De&&(ut=De,De=arguments[Me]||{},Me++),"object"!=typeof De&&!Ne(De)&&(De={}),Me===Qe&&(De=this,Me--);Me<Qe;Me++)if(null!=($=arguments[Me]))for(P in $)J=$[P],"__proto__"!==P&&De!==J&&(ut&&J&&(ee.isPlainObject(J)||(he=Array.isArray(J)))?(q=De[P],_e=he&&!Array.isArray(q)?[]:he||ee.isPlainObject(q)?q:{},he=!1,De[P]=ee.extend(ut,_e,J)):void 0!==J&&(De[P]=J));return De},ee.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(P){throw new Error(P)},noop:function(){},isPlainObject:function(P){var q,J;return!(!P||"[object Object]"!==xe.call(P)||(q=x(P))&&("function"!=typeof(J=ce.call(q,"constructor")&&q.constructor)||Be.call(J)!==ae))},isEmptyObject:function(P){var q;for(q in P)return!1;return!0},globalEval:function(P,q,J){We(P,{nonce:q&&q.nonce},J)},each:function(P,q){var J,he=0;if(Dn(P))for(J=P.length;he<J&&!1!==q.call(P[he],he,P[he]);he++);else for(he in P)if(!1===q.call(P[he],he,P[he]))break;return P},makeArray:function(P,q){var J=q||[];return null!=P&&(Dn(Object(P))?ee.merge(J,"string"==typeof P?[P]:P):Te.call(J,P)),J},inArray:function(P,q,J){return null==q?-1:v.call(q,P,J)},merge:function(P,q){for(var J=+q.length,he=0,_e=P.length;he<J;he++)P[_e++]=q[he];return P.length=_e,P},grep:function(P,q,J){for(var _e=[],De=0,Me=P.length,Qe=!J;De<Me;De++)!q(P[De],De)!==Qe&&_e.push(P[De]);return _e},map:function(P,q,J){var he,_e,De=0,Me=[];if(Dn(P))for(he=P.length;De<he;De++)null!=(_e=q(P[De],De,J))&&Me.push(_e);else for(De in P)null!=(_e=q(P[De],De,J))&&Me.push(_e);return Ve(Me)},guid:1,support:be}),"function"==typeof Symbol&&(ee.fn[Symbol.iterator]=M[Symbol.iterator]),ee.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function($,P){Ae["[object "+P+"]"]=P.toLowerCase()});var mn=function($){var P,q,J,he,_e,De,Me,Qe,ut,At,sn,an,vt,cn,Wn,hr,Oi,ja,vo,ui="sizzle"+1*new Date,ka=$.document,Bn=0,Xu=0,la=ds(),Oa=ds(),Zr=ds(),To=ds(),xo=function(Pe,dt){return Pe===dt&&(sn=!0),0},mo={}.hasOwnProperty,gi=[],Mo=gi.pop,Io=gi.push,Ca=gi.push,Cs=gi.slice,Mu=function(Pe,dt){for(var Lt=0,yt=Pe.length;Lt<yt;Lt++)if(Pe[Lt]===dt)return Lt;return-1},_l="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",qi="[\\x20\\t\\r\\n\\f]",Bs="(?:\\\\[\\da-fA-F]{1,6}"+qi+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",mc="\\["+qi+"*("+Bs+")(?:"+qi+"*([*^$|!~]?=)"+qi+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Bs+"))|)"+qi+"*\\]",go=":("+Bs+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+mc+")*)|.*)\\)|)",kr=new RegExp(qi+"+","g"),Ul=new RegExp("^"+qi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+qi+"+$","g"),yo=new RegExp("^"+qi+"*,"+qi+"*"),lh=new RegExp("^"+qi+"*([>+~]|"+qi+")"+qi+"*"),Qu=new RegExp(qi+"|>"),gc=new RegExp(go),bl=new RegExp("^"+Bs+"$"),wl={ID:new RegExp("^#("+Bs+")"),CLASS:new RegExp("^\\.("+Bs+")"),TAG:new RegExp("^("+Bs+"|[*])"),ATTR:new RegExp("^"+mc),PSEUDO:new RegExp("^"+go),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+qi+"*(even|odd|(([+-]|)(\\d*)n|)"+qi+"*(?:([+-]|)"+qi+"*(\\d+)|))"+qi+"*\\)|)","i"),bool:new RegExp("^(?:"+_l+")$","i"),needsContext:new RegExp("^"+qi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+qi+"*((?:-\\d)?\\d*)"+qi+"*\\)|)(?=[^-]|$)","i")},tn=/HTML$/i,wi=/^(?:input|select|textarea|button)$/i,qo=/^h\d$/i,_a=/^[^{]+\{\s*\[native \w/,ch=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ju=/[+~]/,Ds=new RegExp("\\\\[\\da-fA-F]{1,6}"+qi+"?|\\\\([^\\r\\n\\f])","g"),La=function(Pe,dt){var Lt="0x"+Pe.slice(1)-65536;return dt||(Lt<0?String.fromCharCode(Lt+65536):String.fromCharCode(Lt>>10|55296,1023&Lt|56320))},Fc=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Rc=function(Pe,dt){return dt?"\0"===Pe?"\ufffd":Pe.slice(0,-1)+"\\"+Pe.charCodeAt(Pe.length-1).toString(16)+" ":"\\"+Pe},Vl=function(){an()},_o=Cl(function(Xe){return!0===Xe.disabled&&"fieldset"===Xe.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Ca.apply(gi=Cs.call(ka.childNodes),ka.childNodes)}catch(Xe){Ca={apply:gi.length?function(Pe,dt){Io.apply(Pe,Cs.call(dt))}:function(Pe,dt){for(var Lt=Pe.length,yt=0;Pe[Lt++]=dt[yt++];);Pe.length=Lt-1}}}function Ei(Xe,Pe,dt,Lt){var yt,$t,Xt,xn,zn,fr,gr,Pr=Pe&&Pe.ownerDocument,fi=Pe?Pe.nodeType:9;if(dt=dt||[],"string"!=typeof Xe||!Xe||1!==fi&&9!==fi&&11!==fi)return dt;if(!Lt&&(an(Pe),Pe=Pe||vt,Wn)){if(11!==fi&&(zn=ch.exec(Xe)))if(yt=zn[1]){if(9===fi){if(!(Xt=Pe.getElementById(yt)))return dt;if(Xt.id===yt)return dt.push(Xt),dt}else if(Pr&&(Xt=Pr.getElementById(yt))&&vo(Pe,Xt)&&Xt.id===yt)return dt.push(Xt),dt}else{if(zn[2])return Ca.apply(dt,Pe.getElementsByTagName(Xe)),dt;if((yt=zn[3])&&q.getElementsByClassName&&Pe.getElementsByClassName)return Ca.apply(dt,Pe.getElementsByClassName(yt)),dt}if(q.qsa&&!To[Xe+" "]&&(!hr||!hr.test(Xe))&&(1!==fi||"object"!==Pe.nodeName.toLowerCase())){if(gr=Xe,Pr=Pe,1===fi&&(Qu.test(Xe)||lh.test(Xe))){for(((Pr=Ju.test(Xe)&&Gl(Pe.parentNode)||Pe)!==Pe||!q.scope)&&((xn=Pe.getAttribute("id"))?xn=xn.replace(Fc,Rc):Pe.setAttribute("id",xn=ui)),$t=(fr=De(Xe)).length;$t--;)fr[$t]=(xn?"#"+xn:":scope")+" "+hh(fr[$t]);gr=fr.join(",")}try{return Ca.apply(dt,Pr.querySelectorAll(gr)),dt}catch(Li){To(Xe,!0)}finally{xn===ui&&Pe.removeAttribute("id")}}}return Qe(Xe.replace(Ul,"$1"),Pe,dt,Lt)}function ds(){var Xe=[];return function Pe(dt,Lt){return Xe.push(dt+" ")>J.cacheLength&&delete Pe[Xe.shift()],Pe[dt+" "]=Lt}}function Da(Xe){return Xe[ui]=!0,Xe}function Js(Xe){var Pe=vt.createElement("fieldset");try{return!!Xe(Pe)}catch(dt){return!1}finally{Pe.parentNode&&Pe.parentNode.removeChild(Pe),Pe=null}}function Yo(Xe,Pe){for(var dt=Xe.split("|"),Lt=dt.length;Lt--;)J.attrHandle[dt[Lt]]=Pe}function Po(Xe,Pe){var dt=Pe&&Xe,Lt=dt&&1===Xe.nodeType&&1===Pe.nodeType&&Xe.sourceIndex-Pe.sourceIndex;if(Lt)return Lt;if(dt)for(;dt=dt.nextSibling;)if(dt===Pe)return-1;return Xe?1:-1}function El(Xe){return function(Pe){return"input"===Pe.nodeName.toLowerCase()&&Pe.type===Xe}}function zl(Xe){return function(Pe){var dt=Pe.nodeName.toLowerCase();return("input"===dt||"button"===dt)&&Pe.type===Xe}}function Hl(Xe){return function(Pe){return"form"in Pe?Pe.parentNode&&!1===Pe.disabled?"label"in Pe?"label"in Pe.parentNode?Pe.parentNode.disabled===Xe:Pe.disabled===Xe:Pe.isDisabled===Xe||Pe.isDisabled!==!Xe&&_o(Pe)===Xe:Pe.disabled===Xe:"label"in Pe&&Pe.disabled===Xe}}function kl(Xe){return Da(function(Pe){return Pe=+Pe,Da(function(dt,Lt){for(var yt,$t=Xe([],dt.length,Pe),Xt=$t.length;Xt--;)dt[yt=$t[Xt]]&&(dt[yt]=!(Lt[yt]=dt[yt]))})})}function Gl(Xe){return Xe&&void 0!==Xe.getElementsByTagName&&Xe}for(P in q=Ei.support={},_e=Ei.isXML=function(Xe){var dt=Xe&&(Xe.ownerDocument||Xe).documentElement;return!tn.test(Xe&&Xe.namespaceURI||dt&&dt.nodeName||"HTML")},an=Ei.setDocument=function(Xe){var Pe,dt,Lt=Xe?Xe.ownerDocument||Xe:ka;return Lt==vt||9!==Lt.nodeType||!Lt.documentElement||(cn=(vt=Lt).documentElement,Wn=!_e(vt),ka!=vt&&(dt=vt.defaultView)&&dt.top!==dt&&(dt.addEventListener?dt.addEventListener("unload",Vl,!1):dt.attachEvent&&dt.attachEvent("onunload",Vl)),q.scope=Js(function(yt){return cn.appendChild(yt).appendChild(vt.createElement("div")),void 0!==yt.querySelectorAll&&!yt.querySelectorAll(":scope fieldset div").length}),q.attributes=Js(function(yt){return yt.className="i",!yt.getAttribute("className")}),q.getElementsByTagName=Js(function(yt){return yt.appendChild(vt.createComment("")),!yt.getElementsByTagName("*").length}),q.getElementsByClassName=_a.test(vt.getElementsByClassName),q.getById=Js(function(yt){return cn.appendChild(yt).id=ui,!vt.getElementsByName||!vt.getElementsByName(ui).length}),q.getById?(J.filter.ID=function(yt){var $t=yt.replace(Ds,La);return function(Xt){return Xt.getAttribute("id")===$t}},J.find.ID=function(yt,$t){if(void 0!==$t.getElementById&&Wn){var Xt=$t.getElementById(yt);return Xt?[Xt]:[]}}):(J.filter.ID=function(yt){var $t=yt.replace(Ds,La);return function(Xt){var xn=void 0!==Xt.getAttributeNode&&Xt.getAttributeNode("id");return xn&&xn.value===$t}},J.find.ID=function(yt,$t){if(void 0!==$t.getElementById&&Wn){var Xt,xn,zn,fr=$t.getElementById(yt);if(fr){if((Xt=fr.getAttributeNode("id"))&&Xt.value===yt)return[fr];for(zn=$t.getElementsByName(yt),xn=0;fr=zn[xn++];)if((Xt=fr.getAttributeNode("id"))&&Xt.value===yt)return[fr]}return[]}}),J.find.TAG=q.getElementsByTagName?function(yt,$t){return void 0!==$t.getElementsByTagName?$t.getElementsByTagName(yt):q.qsa?$t.querySelectorAll(yt):void 0}:function(yt,$t){var Xt,xn=[],zn=0,fr=$t.getElementsByTagName(yt);if("*"===yt){for(;Xt=fr[zn++];)1===Xt.nodeType&&xn.push(Xt);return xn}return fr},J.find.CLASS=q.getElementsByClassName&&function(yt,$t){if(void 0!==$t.getElementsByClassName&&Wn)return $t.getElementsByClassName(yt)},Oi=[],hr=[],(q.qsa=_a.test(vt.querySelectorAll))&&(Js(function(yt){var $t;cn.appendChild(yt).innerHTML="<a id='"+ui+"'></a><select id='"+ui+"-\r\\' msallowcapture=''><option selected=''></option></select>",yt.querySelectorAll("[msallowcapture^='']").length&&hr.push("[*^$]="+qi+"*(?:''|\"\")"),yt.querySelectorAll("[selected]").length||hr.push("\\["+qi+"*(?:value|"+_l+")"),yt.querySelectorAll("[id~="+ui+"-]").length||hr.push("~="),($t=vt.createElement("input")).setAttribute("name",""),yt.appendChild($t),yt.querySelectorAll("[name='']").length||hr.push("\\["+qi+"*name"+qi+"*="+qi+"*(?:''|\"\")"),yt.querySelectorAll(":checked").length||hr.push(":checked"),yt.querySelectorAll("a#"+ui+"+*").length||hr.push(".#.+[+~]"),yt.querySelectorAll("\\\f"),hr.push("[\\r\\n\\f]")}),Js(function(yt){yt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var $t=vt.createElement("input");$t.setAttribute("type","hidden"),yt.appendChild($t).setAttribute("name","D"),yt.querySelectorAll("[name=d]").length&&hr.push("name"+qi+"*[*^$|!~]?="),2!==yt.querySelectorAll(":enabled").length&&hr.push(":enabled",":disabled"),cn.appendChild(yt).disabled=!0,2!==yt.querySelectorAll(":disabled").length&&hr.push(":enabled",":disabled"),yt.querySelectorAll("*,:x"),hr.push(",.*:")})),(q.matchesSelector=_a.test(ja=cn.matches||cn.webkitMatchesSelector||cn.mozMatchesSelector||cn.oMatchesSelector||cn.msMatchesSelector))&&Js(function(yt){q.disconnectedMatch=ja.call(yt,"*"),ja.call(yt,"[s!='']:x"),Oi.push("!=",go)}),hr=hr.length&&new RegExp(hr.join("|")),Oi=Oi.length&&new RegExp(Oi.join("|")),Pe=_a.test(cn.compareDocumentPosition),vo=Pe||_a.test(cn.contains)?function(yt,$t){var Xt=9===yt.nodeType?yt.documentElement:yt,xn=$t&&$t.parentNode;return yt===xn||!(!xn||1!==xn.nodeType||!(Xt.contains?Xt.contains(xn):yt.compareDocumentPosition&&16&yt.compareDocumentPosition(xn)))}:function(yt,$t){if($t)for(;$t=$t.parentNode;)if($t===yt)return!0;return!1},xo=Pe?function(yt,$t){if(yt===$t)return sn=!0,0;var Xt=!yt.compareDocumentPosition-!$t.compareDocumentPosition;return Xt||(1&(Xt=(yt.ownerDocument||yt)==($t.ownerDocument||$t)?yt.compareDocumentPosition($t):1)||!q.sortDetached&&$t.compareDocumentPosition(yt)===Xt?yt==vt||yt.ownerDocument==ka&&vo(ka,yt)?-1:$t==vt||$t.ownerDocument==ka&&vo(ka,$t)?1:At?Mu(At,yt)-Mu(At,$t):0:4&Xt?-1:1)}:function(yt,$t){if(yt===$t)return sn=!0,0;var Xt,xn=0,zn=yt.parentNode,fr=$t.parentNode,gr=[yt],Pr=[$t];if(!zn||!fr)return yt==vt?-1:$t==vt?1:zn?-1:fr?1:At?Mu(At,yt)-Mu(At,$t):0;if(zn===fr)return Po(yt,$t);for(Xt=yt;Xt=Xt.parentNode;)gr.unshift(Xt);for(Xt=$t;Xt=Xt.parentNode;)Pr.unshift(Xt);for(;gr[xn]===Pr[xn];)xn++;return xn?Po(gr[xn],Pr[xn]):gr[xn]==ka?-1:Pr[xn]==ka?1:0}),vt},Ei.matches=function(Xe,Pe){return Ei(Xe,null,null,Pe)},Ei.matchesSelector=function(Xe,Pe){if(an(Xe),q.matchesSelector&&Wn&&!To[Pe+" "]&&(!Oi||!Oi.test(Pe))&&(!hr||!hr.test(Pe)))try{var dt=ja.call(Xe,Pe);if(dt||q.disconnectedMatch||Xe.document&&11!==Xe.document.nodeType)return dt}catch(Lt){To(Pe,!0)}return Ei(Pe,vt,null,[Xe]).length>0},Ei.contains=function(Xe,Pe){return(Xe.ownerDocument||Xe)!=vt&&an(Xe),vo(Xe,Pe)},Ei.attr=function(Xe,Pe){(Xe.ownerDocument||Xe)!=vt&&an(Xe);var dt=J.attrHandle[Pe.toLowerCase()],Lt=dt&&mo.call(J.attrHandle,Pe.toLowerCase())?dt(Xe,Pe,!Wn):void 0;return void 0!==Lt?Lt:q.attributes||!Wn?Xe.getAttribute(Pe):(Lt=Xe.getAttributeNode(Pe))&&Lt.specified?Lt.value:null},Ei.escape=function(Xe){return(Xe+"").replace(Fc,Rc)},Ei.error=function(Xe){throw new Error("Syntax error, unrecognized expression: "+Xe)},Ei.uniqueSort=function(Xe){var Pe,dt=[],Lt=0,yt=0;if(sn=!q.detectDuplicates,At=!q.sortStable&&Xe.slice(0),Xe.sort(xo),sn){for(;Pe=Xe[yt++];)Pe===Xe[yt]&&(Lt=dt.push(yt));for(;Lt--;)Xe.splice(dt[Lt],1)}return At=null,Xe},he=Ei.getText=function(Xe){var Pe,dt="",Lt=0,yt=Xe.nodeType;if(yt){if(1===yt||9===yt||11===yt){if("string"==typeof Xe.textContent)return Xe.textContent;for(Xe=Xe.firstChild;Xe;Xe=Xe.nextSibling)dt+=he(Xe)}else if(3===yt||4===yt)return Xe.nodeValue}else for(;Pe=Xe[Lt++];)dt+=he(Pe);return dt},(J=Ei.selectors={cacheLength:50,createPseudo:Da,match:wl,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Pe){return Pe[1]=Pe[1].replace(Ds,La),Pe[3]=(Pe[3]||Pe[4]||Pe[5]||"").replace(Ds,La),"~="===Pe[2]&&(Pe[3]=" "+Pe[3]+" "),Pe.slice(0,4)},CHILD:function(Pe){return Pe[1]=Pe[1].toLowerCase(),"nth"===Pe[1].slice(0,3)?(Pe[3]||Ei.error(Pe[0]),Pe[4]=+(Pe[4]?Pe[5]+(Pe[6]||1):2*("even"===Pe[3]||"odd"===Pe[3])),Pe[5]=+(Pe[7]+Pe[8]||"odd"===Pe[3])):Pe[3]&&Ei.error(Pe[0]),Pe},PSEUDO:function(Pe){var dt,Lt=!Pe[6]&&Pe[2];return wl.CHILD.test(Pe[0])?null:(Pe[3]?Pe[2]=Pe[4]||Pe[5]||"":Lt&&gc.test(Lt)&&(dt=De(Lt,!0))&&(dt=Lt.indexOf(")",Lt.length-dt)-Lt.length)&&(Pe[0]=Pe[0].slice(0,dt),Pe[2]=Lt.slice(0,dt)),Pe.slice(0,3))}},filter:{TAG:function(Pe){var dt=Pe.replace(Ds,La).toLowerCase();return"*"===Pe?function(){return!0}:function(Lt){return Lt.nodeName&&Lt.nodeName.toLowerCase()===dt}},CLASS:function(Pe){var dt=la[Pe+" "];return dt||(dt=new RegExp("(^|"+qi+")"+Pe+"("+qi+"|$)"))&&la(Pe,function(Lt){return dt.test("string"==typeof Lt.className&&Lt.className||void 0!==Lt.getAttribute&&Lt.getAttribute("class")||"")})},ATTR:function(Pe,dt,Lt){return function(yt){var $t=Ei.attr(yt,Pe);return null==$t?"!="===dt:!dt||($t+="","="===dt?$t===Lt:"!="===dt?$t!==Lt:"^="===dt?Lt&&0===$t.indexOf(Lt):"*="===dt?Lt&&$t.indexOf(Lt)>-1:"$="===dt?Lt&&$t.slice(-Lt.length)===Lt:"~="===dt?(" "+$t.replace(kr," ")+" ").indexOf(Lt)>-1:"|="===dt&&($t===Lt||$t.slice(0,Lt.length+1)===Lt+"-"))}},CHILD:function(Pe,dt,Lt,yt,$t){var Xt="nth"!==Pe.slice(0,3),xn="last"!==Pe.slice(-4),zn="of-type"===dt;return 1===yt&&0===$t?function(fr){return!!fr.parentNode}:function(fr,gr,Pr){var fi,Li,ca,Rr,Sa,ss,ha=Xt!==xn?"nextSibling":"previousSibling",Us=fr.parentNode,$o=zn&&fr.nodeName.toLowerCase(),Wl=!Pr&&!zn,Fo=!1;if(Us){if(Xt){for(;ha;){for(Rr=fr;Rr=Rr[ha];)if(zn?Rr.nodeName.toLowerCase()===$o:1===Rr.nodeType)return!1;ss=ha="only"===Pe&&!ss&&"nextSibling"}return!0}if(ss=[xn?Us.firstChild:Us.lastChild],xn&&Wl){for(Fo=(Sa=(fi=(Li=(ca=(Rr=Us)[ui]||(Rr[ui]={}))[Rr.uniqueID]||(ca[Rr.uniqueID]={}))[Pe]||[])[0]===Bn&&fi[1])&&fi[2],Rr=Sa&&Us.childNodes[Sa];Rr=++Sa&&Rr&&Rr[ha]||(Fo=Sa=0)||ss.pop();)if(1===Rr.nodeType&&++Fo&&Rr===fr){Li[Pe]=[Bn,Sa,Fo];break}}else if(Wl&&(Fo=Sa=(fi=(Li=(ca=(Rr=fr)[ui]||(Rr[ui]={}))[Rr.uniqueID]||(ca[Rr.uniqueID]={}))[Pe]||[])[0]===Bn&&fi[1]),!1===Fo)for(;(Rr=++Sa&&Rr&&Rr[ha]||(Fo=Sa=0)||ss.pop())&&((zn?Rr.nodeName.toLowerCase()!==$o:1!==Rr.nodeType)||!++Fo||(Wl&&((Li=(ca=Rr[ui]||(Rr[ui]={}))[Rr.uniqueID]||(ca[Rr.uniqueID]={}))[Pe]=[Bn,Fo]),Rr!==fr)););return(Fo-=$t)===yt||Fo%yt==0&&Fo/yt>=0}}},PSEUDO:function(Pe,dt){var Lt,yt=J.pseudos[Pe]||J.setFilters[Pe.toLowerCase()]||Ei.error("unsupported pseudo: "+Pe);return yt[ui]?yt(dt):yt.length>1?(Lt=[Pe,Pe,"",dt],J.setFilters.hasOwnProperty(Pe.toLowerCase())?Da(function($t,Xt){for(var xn,zn=yt($t,dt),fr=zn.length;fr--;)$t[xn=Mu($t,zn[fr])]=!(Xt[xn]=zn[fr])}):function($t){return yt($t,0,Lt)}):yt}},pseudos:{not:Da(function(Xe){var Pe=[],dt=[],Lt=Me(Xe.replace(Ul,"$1"));return Lt[ui]?Da(function(yt,$t,Xt,xn){for(var zn,fr=Lt(yt,null,xn,[]),gr=yt.length;gr--;)(zn=fr[gr])&&(yt[gr]=!($t[gr]=zn))}):function(yt,$t,Xt){return Pe[0]=yt,Lt(Pe,null,Xt,dt),Pe[0]=null,!dt.pop()}}),has:Da(function(Xe){return function(Pe){return Ei(Xe,Pe).length>0}}),contains:Da(function(Xe){return Xe=Xe.replace(Ds,La),function(Pe){return(Pe.textContent||he(Pe)).indexOf(Xe)>-1}}),lang:Da(function(Xe){return bl.test(Xe||"")||Ei.error("unsupported lang: "+Xe),Xe=Xe.replace(Ds,La).toLowerCase(),function(Pe){var dt;do{if(dt=Wn?Pe.lang:Pe.getAttribute("xml:lang")||Pe.getAttribute("lang"))return(dt=dt.toLowerCase())===Xe||0===dt.indexOf(Xe+"-")}while((Pe=Pe.parentNode)&&1===Pe.nodeType);return!1}}),target:function(Pe){var dt=$.location&&$.location.hash;return dt&&dt.slice(1)===Pe.id},root:function(Pe){return Pe===cn},focus:function(Pe){return Pe===vt.activeElement&&(!vt.hasFocus||vt.hasFocus())&&!!(Pe.type||Pe.href||~Pe.tabIndex)},enabled:Hl(!1),disabled:Hl(!0),checked:function(Pe){var dt=Pe.nodeName.toLowerCase();return"input"===dt&&!!Pe.checked||"option"===dt&&!!Pe.selected},selected:function(Pe){return!0===Pe.selected},empty:function(Pe){for(Pe=Pe.firstChild;Pe;Pe=Pe.nextSibling)if(Pe.nodeType<6)return!1;return!0},parent:function(Pe){return!J.pseudos.empty(Pe)},header:function(Pe){return qo.test(Pe.nodeName)},input:function(Pe){return wi.test(Pe.nodeName)},button:function(Pe){var dt=Pe.nodeName.toLowerCase();return"input"===dt&&"button"===Pe.type||"button"===dt},text:function(Pe){var dt;return"input"===Pe.nodeName.toLowerCase()&&"text"===Pe.type&&(null==(dt=Pe.getAttribute("type"))||"text"===dt.toLowerCase())},first:kl(function(){return[0]}),last:kl(function(Xe,Pe){return[Pe-1]}),eq:kl(function(Xe,Pe,dt){return[dt<0?dt+Pe:dt]}),even:kl(function(Xe,Pe){for(var dt=0;dt<Pe;dt+=2)Xe.push(dt);return Xe}),odd:kl(function(Xe,Pe){for(var dt=1;dt<Pe;dt+=2)Xe.push(dt);return Xe}),lt:kl(function(Xe,Pe,dt){for(var Lt=dt<0?dt+Pe:dt>Pe?Pe:dt;--Lt>=0;)Xe.push(Lt);return Xe}),gt:kl(function(Xe,Pe,dt){for(var Lt=dt<0?dt+Pe:dt;++Lt<Pe;)Xe.push(Lt);return Xe})}}).pseudos.nth=J.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})J.pseudos[P]=El(P);for(P in{submit:!0,reset:!0})J.pseudos[P]=zl(P);function jl(){}function hh(Xe){for(var Pe=0,dt=Xe.length,Lt="";Pe<dt;Pe++)Lt+=Xe[Pe].value;return Lt}function Cl(Xe,Pe,dt){var Lt=Pe.dir,yt=Pe.next,$t=yt||Lt,Xt=dt&&"parentNode"===$t,xn=Xu++;return Pe.first?function(zn,fr,gr){for(;zn=zn[Lt];)if(1===zn.nodeType||Xt)return Xe(zn,fr,gr);return!1}:function(zn,fr,gr){var Pr,fi,Li,ca=[Bn,xn];if(gr){for(;zn=zn[Lt];)if((1===zn.nodeType||Xt)&&Xe(zn,fr,gr))return!0}else for(;zn=zn[Lt];)if(1===zn.nodeType||Xt)if(fi=(Li=zn[ui]||(zn[ui]={}))[zn.uniqueID]||(Li[zn.uniqueID]={}),yt&&yt===zn.nodeName.toLowerCase())zn=zn[Lt]||zn;else{if((Pr=fi[$t])&&Pr[0]===Bn&&Pr[1]===xn)return ca[2]=Pr[2];if(fi[$t]=ca,ca[2]=Xe(zn,fr,gr))return!0}return!1}}function fh(Xe){return Xe.length>1?function(Pe,dt,Lt){for(var yt=Xe.length;yt--;)if(!Xe[yt](Pe,dt,Lt))return!1;return!0}:Xe[0]}function Ko(Xe,Pe,dt,Lt,yt){for(var $t,Xt=[],xn=0,zn=Xe.length,fr=null!=Pe;xn<zn;xn++)($t=Xe[xn])&&(!dt||dt($t,Lt,yt))&&(Xt.push($t),fr&&Pe.push(xn));return Xt}function bo(Xe,Pe,dt,Lt,yt,$t){return Lt&&!Lt[ui]&&(Lt=bo(Lt)),yt&&!yt[ui]&&(yt=bo(yt,$t)),Da(function(Xt,xn,zn,fr){var gr,Pr,fi,Li=[],ca=[],Rr=xn.length,Sa=Xt||function(Xe,Pe,dt){for(var Lt=0,yt=Pe.length;Lt<yt;Lt++)Ei(Xe,Pe[Lt],dt);return dt}(Pe||"*",zn.nodeType?[zn]:zn,[]),ss=!Xe||!Xt&&Pe?Sa:Ko(Sa,Li,Xe,zn,fr),ha=dt?yt||(Xt?Xe:Rr||Lt)?[]:xn:ss;if(dt&&dt(ss,ha,zn,fr),Lt)for(gr=Ko(ha,ca),Lt(gr,[],zn,fr),Pr=gr.length;Pr--;)(fi=gr[Pr])&&(ha[ca[Pr]]=!(ss[ca[Pr]]=fi));if(Xt){if(yt||Xe){if(yt){for(gr=[],Pr=ha.length;Pr--;)(fi=ha[Pr])&&gr.push(ss[Pr]=fi);yt(null,ha=[],gr,fr)}for(Pr=ha.length;Pr--;)(fi=ha[Pr])&&(gr=yt?Mu(Xt,fi):Li[Pr])>-1&&(Xt[gr]=!(xn[gr]=fi))}}else ha=Ko(ha===xn?ha.splice(Rr,ha.length):ha),yt?yt(null,xn,ha,fr):Ca.apply(xn,ha)})}function Dl(Xe){for(var Pe,dt,Lt,yt=Xe.length,$t=J.relative[Xe[0].type],Xt=$t||J.relative[" "],xn=$t?1:0,zn=Cl(function(Pr){return Pr===Pe},Xt,!0),fr=Cl(function(Pr){return Mu(Pe,Pr)>-1},Xt,!0),gr=[function(Pr,fi,Li){var ca=!$t&&(Li||fi!==ut)||((Pe=fi).nodeType?zn(Pr,fi,Li):fr(Pr,fi,Li));return Pe=null,ca}];xn<yt;xn++)if(dt=J.relative[Xe[xn].type])gr=[Cl(fh(gr),dt)];else{if((dt=J.filter[Xe[xn].type].apply(null,Xe[xn].matches))[ui]){for(Lt=++xn;Lt<yt&&!J.relative[Xe[Lt].type];Lt++);return bo(xn>1&&fh(gr),xn>1&&hh(Xe.slice(0,xn-1).concat({value:" "===Xe[xn-2].type?"*":""})).replace(Ul,"$1"),dt,xn<Lt&&Dl(Xe.slice(xn,Lt)),Lt<yt&&Dl(Xe=Xe.slice(Lt)),Lt<yt&&hh(Xe))}gr.push(dt)}return fh(gr)}return jl.prototype=J.filters=J.pseudos,J.setFilters=new jl,De=Ei.tokenize=function(Xe,Pe){var dt,Lt,yt,$t,Xt,xn,zn,fr=Oa[Xe+" "];if(fr)return Pe?0:fr.slice(0);for(Xt=Xe,xn=[],zn=J.preFilter;Xt;){for($t in(!dt||(Lt=yo.exec(Xt)))&&(Lt&&(Xt=Xt.slice(Lt[0].length)||Xt),xn.push(yt=[])),dt=!1,(Lt=lh.exec(Xt))&&(dt=Lt.shift(),yt.push({value:dt,type:Lt[0].replace(Ul," ")}),Xt=Xt.slice(dt.length)),J.filter)(Lt=wl[$t].exec(Xt))&&(!zn[$t]||(Lt=zn[$t](Lt)))&&(dt=Lt.shift(),yt.push({value:dt,type:$t,matches:Lt}),Xt=Xt.slice(dt.length));if(!dt)break}return Pe?Xt.length:Xt?Ei.error(Xe):Oa(Xe,xn).slice(0)},Me=Ei.compile=function(Xe,Pe){var dt,Lt=[],yt=[],$t=Zr[Xe+" "];if(!$t){for(Pe||(Pe=De(Xe)),dt=Pe.length;dt--;)($t=Dl(Pe[dt]))[ui]?Lt.push($t):yt.push($t);($t=Zr(Xe,function(Xe,Pe){var dt=Pe.length>0,Lt=Xe.length>0,yt=function(Xt,xn,zn,fr,gr){var Pr,fi,Li,ca=0,Rr="0",Sa=Xt&&[],ss=[],ha=ut,Us=Xt||Lt&&J.find.TAG("*",gr),$o=Bn+=null==ha?1:Math.random()||.1,Wl=Us.length;for(gr&&(ut=xn==vt||xn||gr);Rr!==Wl&&null!=(Pr=Us[Rr]);Rr++){if(Lt&&Pr){for(fi=0,!xn&&Pr.ownerDocument!=vt&&(an(Pr),zn=!Wn);Li=Xe[fi++];)if(Li(Pr,xn||vt,zn)){fr.push(Pr);break}gr&&(Bn=$o)}dt&&((Pr=!Li&&Pr)&&ca--,Xt&&Sa.push(Pr))}if(ca+=Rr,dt&&Rr!==ca){for(fi=0;Li=Pe[fi++];)Li(Sa,ss,xn,zn);if(Xt){if(ca>0)for(;Rr--;)Sa[Rr]||ss[Rr]||(ss[Rr]=Mo.call(fr));ss=Ko(ss)}Ca.apply(fr,ss),gr&&!Xt&&ss.length>0&&ca+Pe.length>1&&Ei.uniqueSort(fr)}return gr&&(Bn=$o,ut=ha),Sa};return dt?Da(yt):yt}(yt,Lt))).selector=Xe}return $t},Qe=Ei.select=function(Xe,Pe,dt,Lt){var yt,$t,Xt,xn,zn,fr="function"==typeof Xe&&Xe,gr=!Lt&&De(Xe=fr.selector||Xe);if(dt=dt||[],1===gr.length){if(($t=gr[0]=gr[0].slice(0)).length>2&&"ID"===(Xt=$t[0]).type&&9===Pe.nodeType&&Wn&&J.relative[$t[1].type]){if(!(Pe=(J.find.ID(Xt.matches[0].replace(Ds,La),Pe)||[])[0]))return dt;fr&&(Pe=Pe.parentNode),Xe=Xe.slice($t.shift().value.length)}for(yt=wl.needsContext.test(Xe)?0:$t.length;yt--&&!J.relative[xn=(Xt=$t[yt]).type];)if((zn=J.find[xn])&&(Lt=zn(Xt.matches[0].replace(Ds,La),Ju.test($t[0].type)&&Gl(Pe.parentNode)||Pe))){if($t.splice(yt,1),!(Xe=Lt.length&&hh($t)))return Ca.apply(dt,Lt),dt;break}}return(fr||Me(Xe,gr))(Lt,Pe,!Wn,dt,!Pe||Ju.test(Xe)&&Gl(Pe.parentNode)||Pe),dt},q.sortStable=ui.split("").sort(xo).join("")===ui,q.detectDuplicates=!!sn,an(),q.sortDetached=Js(function(Xe){return 1&Xe.compareDocumentPosition(vt.createElement("fieldset"))}),Js(function(Xe){return Xe.innerHTML="<a href='#'></a>","#"===Xe.firstChild.getAttribute("href")})||Yo("type|href|height|width",function(Xe,Pe,dt){if(!dt)return Xe.getAttribute(Pe,"type"===Pe.toLowerCase()?1:2)}),(!q.attributes||!Js(function(Xe){return Xe.innerHTML="<input/>",Xe.firstChild.setAttribute("value",""),""===Xe.firstChild.getAttribute("value")}))&&Yo("value",function(Xe,Pe,dt){if(!dt&&"input"===Xe.nodeName.toLowerCase())return Xe.defaultValue}),Js(function(Xe){return null==Xe.getAttribute("disabled")})||Yo(_l,function(Xe,Pe,dt){var Lt;if(!dt)return!0===Xe[Pe]?Pe.toLowerCase():(Lt=Xe.getAttributeNode(Pe))&&Lt.specified?Lt.value:null}),Ei}(ye);ee.find=mn,(ee.expr=mn.selectors)[":"]=ee.expr.pseudos,ee.uniqueSort=ee.unique=mn.uniqueSort,ee.text=mn.getText,ee.isXMLDoc=mn.isXML,ee.contains=mn.contains,ee.escapeSelector=mn.escape;var nn=function(P,q,J){for(var he=[],_e=void 0!==J;(P=P[q])&&9!==P.nodeType;)if(1===P.nodeType){if(_e&&ee(P).is(J))break;he.push(P)}return he},Vt=function(P,q){for(var J=[];P;P=P.nextSibling)1===P.nodeType&&P!==q&&J.push(P);return J},Nt=ee.expr.match.needsContext;function Rt($,P){return $.nodeName&&$.nodeName.toLowerCase()===P.toLowerCase()}var Bt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function K($,P,q){return Ne(P)?ee.grep($,function(J,he){return!!P.call(J,he,J)!==q}):P.nodeType?ee.grep($,function(J){return J===P!==q}):"string"!=typeof P?ee.grep($,function(J){return v.call(P,J)>-1!==q}):ee.filter(P,$,q)}ee.filter=function($,P,q){var J=P[0];return q&&($=":not("+$+")"),1===P.length&&1===J.nodeType?ee.find.matchesSelector(J,$)?[J]:[]:ee.find.matches($,ee.grep(P,function(he){return 1===he.nodeType}))},ee.fn.extend({find:function(P){var q,J,he=this.length,_e=this;if("string"!=typeof P)return this.pushStack(ee(P).filter(function(){for(q=0;q<he;q++)if(ee.contains(_e[q],this))return!0}));for(J=this.pushStack([]),q=0;q<he;q++)ee.find(P,_e[q],J);return he>1?ee.uniqueSort(J):J},filter:function(P){return this.pushStack(K(this,P||[],!1))},not:function(P){return this.pushStack(K(this,P||[],!0))},is:function(P){return!!K(this,"string"==typeof P&&Nt.test(P)?ee(P):P||[],!1).length}});var k,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ee.fn.init=function($,P,q){var J,he;if(!$)return this;if(q=q||k,"string"==typeof $){if(!(J="<"===$[0]&&">"===$[$.length-1]&&$.length>=3?[null,$,null]:j.exec($))||!J[1]&&P)return!P||P.jquery?(P||q).find($):this.constructor(P).find($);if(J[1]){if(ee.merge(this,ee.parseHTML(J[1],(P=P instanceof ee?P[0]:P)&&P.nodeType?P.ownerDocument||P:et,!0)),Bt.test(J[1])&&ee.isPlainObject(P))for(J in P)Ne(this[J])?this[J](P[J]):this.attr(J,P[J]);return this}return(he=et.getElementById(J[2]))&&(this[0]=he,this.length=1),this}return $.nodeType?(this[0]=$,this.length=1,this):Ne($)?void 0!==q.ready?q.ready($):$(ee):ee.makeArray($,this)}).prototype=ee.fn,k=ee(et);var we=/^(?:parents|prev(?:Until|All))/,Le={children:!0,contents:!0,next:!0,prev:!0};function at($,P){for(;($=$[P])&&1!==$.nodeType;);return $}ee.fn.extend({has:function(P){var q=ee(P,this),J=q.length;return this.filter(function(){for(var he=0;he<J;he++)if(ee.contains(this,q[he]))return!0})},closest:function(P,q){var J,he=0,_e=this.length,De=[],Me="string"!=typeof P&&ee(P);if(!Nt.test(P))for(;he<_e;he++)for(J=this[he];J&&J!==q;J=J.parentNode)if(J.nodeType<11&&(Me?Me.index(J)>-1:1===J.nodeType&&ee.find.matchesSelector(J,P))){De.push(J);break}return this.pushStack(De.length>1?ee.uniqueSort(De):De)},index:function(P){return P?"string"==typeof P?v.call(ee(P),this[0]):v.call(this,P.jquery?P[0]:P):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(P,q){return this.pushStack(ee.uniqueSort(ee.merge(this.get(),ee(P,q))))},addBack:function(P){return this.add(null==P?this.prevObject:this.prevObject.filter(P))}}),ee.each({parent:function(P){var q=P.parentNode;return q&&11!==q.nodeType?q:null},parents:function(P){return nn(P,"parentNode")},parentsUntil:function(P,q,J){return nn(P,"parentNode",J)},next:function(P){return at(P,"nextSibling")},prev:function(P){return at(P,"previousSibling")},nextAll:function(P){return nn(P,"nextSibling")},prevAll:function(P){return nn(P,"previousSibling")},nextUntil:function(P,q,J){return nn(P,"nextSibling",J)},prevUntil:function(P,q,J){return nn(P,"previousSibling",J)},siblings:function(P){return Vt((P.parentNode||{}).firstChild,P)},children:function(P){return Vt(P.firstChild)},contents:function(P){return null!=P.contentDocument&&x(P.contentDocument)?P.contentDocument:(Rt(P,"template")&&(P=P.content||P),ee.merge([],P.childNodes))}},function($,P){ee.fn[$]=function(q,J){var he=ee.map(this,P,q);return"Until"!==$.slice(-5)&&(J=q),J&&"string"==typeof J&&(he=ee.filter(J,he)),this.length>1&&(Le[$]||ee.uniqueSort(he),we.test($)&&he.reverse()),this.pushStack(he)}});var bt=/[^\x20\t\r\n\f]+/g;function Ot($){return $}function On($){throw $}function rr($,P,q,J){var he;try{$&&Ne(he=$.promise)?he.call($).done(P).fail(q):$&&Ne(he=$.then)?he.call($,P,q):P.apply(void 0,[$].slice(J))}catch(_e){q.apply(void 0,[_e])}}ee.Callbacks=function($){$="string"==typeof $?function($){var P={};return ee.each($.match(bt)||[],function(q,J){P[J]=!0}),P}($):ee.extend({},$);var P,q,J,he,_e=[],De=[],Me=-1,Qe=function(){for(he=he||$.once,J=P=!0;De.length;Me=-1)for(q=De.shift();++Me<_e.length;)!1===_e[Me].apply(q[0],q[1])&&$.stopOnFalse&&(Me=_e.length,q=!1);$.memory||(q=!1),P=!1,he&&(_e=q?[]:"")},ut={add:function(){return _e&&(q&&!P&&(Me=_e.length-1,De.push(q)),function sn(an){ee.each(an,function(vt,cn){Ne(cn)?(!$.unique||!ut.has(cn))&&_e.push(cn):cn&&cn.length&&"string"!==pt(cn)&&sn(cn)})}(arguments),q&&!P&&Qe()),this},remove:function(){return ee.each(arguments,function(sn,an){for(var vt;(vt=ee.inArray(an,_e,vt))>-1;)_e.splice(vt,1),vt<=Me&&Me--}),this},has:function(sn){return sn?ee.inArray(sn,_e)>-1:_e.length>0},empty:function(){return _e&&(_e=[]),this},disable:function(){return he=De=[],_e=q="",this},disabled:function(){return!_e},lock:function(){return he=De=[],!q&&!P&&(_e=q=""),this},locked:function(){return!!he},fireWith:function(sn,an){return he||(an=[sn,(an=an||[]).slice?an.slice():an],De.push(an),P||Qe()),this},fire:function(){return ut.fireWith(this,arguments),this},fired:function(){return!!J}};return ut},ee.extend({Deferred:function(P){var q=[["notify","progress",ee.Callbacks("memory"),ee.Callbacks("memory"),2],["resolve","done",ee.Callbacks("once memory"),ee.Callbacks("once memory"),0,"resolved"],["reject","fail",ee.Callbacks("once memory"),ee.Callbacks("once memory"),1,"rejected"]],J="pending",he={state:function(){return J},always:function(){return _e.done(arguments).fail(arguments),this},catch:function(Me){return he.then(null,Me)},pipe:function(){var Me=arguments;return ee.Deferred(function(Qe){ee.each(q,function(ut,At){var sn=Ne(Me[At[4]])&&Me[At[4]];_e[At[1]](function(){var an=sn&&sn.apply(this,arguments);an&&Ne(an.promise)?an.promise().progress(Qe.notify).done(Qe.resolve).fail(Qe.reject):Qe[At[0]+"With"](this,sn?[an]:arguments)})}),Me=null}).promise()},then:function(Me,Qe,ut){var At=0;function sn(an,vt,cn,Wn){return function(){var hr=this,Oi=arguments,ja=function(){var ka,Bn;if(!(an<At)){if((ka=cn.apply(hr,Oi))===vt.promise())throw new TypeError("Thenable self-resolution");Ne(Bn=ka&&("object"==typeof ka||"function"==typeof ka)&&ka.then)?Wn?Bn.call(ka,sn(At,vt,Ot,Wn),sn(At,vt,On,Wn)):(At++,Bn.call(ka,sn(At,vt,Ot,Wn),sn(At,vt,On,Wn),sn(At,vt,Ot,vt.notifyWith))):(cn!==Ot&&(hr=void 0,Oi=[ka]),(Wn||vt.resolveWith)(hr,Oi))}},vo=Wn?ja:function(){try{ja()}catch(ui){ee.Deferred.exceptionHook&&ee.Deferred.exceptionHook(ui,vo.stackTrace),an+1>=At&&(cn!==On&&(hr=void 0,Oi=[ui]),vt.rejectWith(hr,Oi))}};an?vo():(ee.Deferred.getStackHook&&(vo.stackTrace=ee.Deferred.getStackHook()),ye.setTimeout(vo))}}return ee.Deferred(function(an){q[0][3].add(sn(0,an,Ne(ut)?ut:Ot,an.notifyWith)),q[1][3].add(sn(0,an,Ne(Me)?Me:Ot)),q[2][3].add(sn(0,an,Ne(Qe)?Qe:On))}).promise()},promise:function(Me){return null!=Me?ee.extend(Me,he):he}},_e={};return ee.each(q,function(De,Me){var Qe=Me[2],ut=Me[5];he[Me[1]]=Qe.add,ut&&Qe.add(function(){J=ut},q[3-De][2].disable,q[3-De][3].disable,q[0][2].lock,q[0][3].lock),Qe.add(Me[3].fire),_e[Me[0]]=function(){return _e[Me[0]+"With"](this===_e?void 0:this,arguments),this},_e[Me[0]+"With"]=Qe.fireWith}),he.promise(_e),P&&P.call(_e,_e),_e},when:function(P){var q=arguments.length,J=q,he=Array(J),_e=oe.call(arguments),De=ee.Deferred(),Me=function(ut){return function(At){he[ut]=this,_e[ut]=arguments.length>1?oe.call(arguments):At,--q||De.resolveWith(he,_e)}};if(q<=1&&(rr(P,De.done(Me(J)).resolve,De.reject,!q),"pending"===De.state()||Ne(_e[J]&&_e[J].then)))return De.then();for(;J--;)rr(_e[J],Me(J),De.reject);return De.promise()}});var ni=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ee.Deferred.exceptionHook=function($,P){ye.console&&ye.console.warn&&$&&ni.test($.name)&&ye.console.warn("jQuery.Deferred exception: "+$.message,$.stack,P)},ee.readyException=function($){ye.setTimeout(function(){throw $})};var mi=ee.Deferred();function ji(){et.removeEventListener("DOMContentLoaded",ji),ye.removeEventListener("load",ji),ee.ready()}ee.fn.ready=function($){return mi.then($).catch(function(P){ee.readyException(P)}),this},ee.extend({isReady:!1,readyWait:1,ready:function(P){(!0===P?--ee.readyWait:ee.isReady)||(ee.isReady=!0,!(!0!==P&&--ee.readyWait>0)&&mi.resolveWith(et,[ee]))}}),ee.ready.then=mi.then,"complete"===et.readyState||"loading"!==et.readyState&&!et.documentElement.doScroll?ye.setTimeout(ee.ready):(et.addEventListener("DOMContentLoaded",ji),ye.addEventListener("load",ji));var Ti=function $(P,q,J,he,_e,De,Me){var Qe=0,ut=P.length,At=null==J;if("object"===pt(J))for(Qe in _e=!0,J)$(P,q,Qe,J[Qe],!0,De,Me);else if(void 0!==he&&(_e=!0,Ne(he)||(Me=!0),At&&(Me?(q.call(P,he),q=null):(At=q,q=function(an,vt,cn){return At.call(ee(an),cn)})),q))for(;Qe<ut;Qe++)q(P[Qe],J,Me?he:he.call(P[Qe],Qe,q(P[Qe],J)));return _e?P:At?q.call(P):ut?q(P[0],J):De},jo=/^-ms-/,pc=/-([a-z])/g;function So($,P){return P.toUpperCase()}function rs($){return $.replace(jo,"ms-").replace(pc,So)}var bi=function(P){return 1===P.nodeType||9===P.nodeType||!+P.nodeType};function Ir(){this.expando=ee.expando+Ir.uid++}Ir.uid=1,Ir.prototype={cache:function(P){var q=P[this.expando];return q||(q={},bi(P)&&(P.nodeType?P[this.expando]=q:Object.defineProperty(P,this.expando,{value:q,configurable:!0}))),q},set:function(P,q,J){var he,_e=this.cache(P);if("string"==typeof q)_e[rs(q)]=J;else for(he in q)_e[rs(he)]=q[he];return _e},get:function(P,q){return void 0===q?this.cache(P):P[this.expando]&&P[this.expando][rs(q)]},access:function(P,q,J){return void 0===q||q&&"string"==typeof q&&void 0===J?this.get(P,q):(this.set(P,q,J),void 0!==J?J:q)},remove:function(P,q){var J,he=P[this.expando];if(void 0!==he){if(void 0!==q)for((J=(q=Array.isArray(q)?q.map(rs):(q=rs(q))in he?[q]:q.match(bt)||[]).length);J--;)delete he[q[J]];(void 0===q||ee.isEmptyObject(he))&&(P.nodeType?P[this.expando]=void 0:delete P[this.expando])}},hasData:function(P){var q=P[this.expando];return void 0!==q&&!ee.isEmptyObject(q)}};var or=new Ir,Ma=new Ir,ml=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Xr=/[A-Z]/g;function Qs($,P,q){var J;if(void 0===q&&1===$.nodeType)if(J="data-"+P.replace(Xr,"-$&").toLowerCase(),"string"==typeof(q=$.getAttribute(J))){try{q=function($){return"true"===$||"false"!==$&&("null"===$?null:$===+$+""?+$:ml.test($)?JSON.parse($):$)}(q)}catch(he){}Ma.set($,P,q)}else q=void 0;return q}ee.extend({hasData:function(P){return Ma.hasData(P)||or.hasData(P)},data:function(P,q,J){return Ma.access(P,q,J)},removeData:function(P,q){Ma.remove(P,q)},_data:function(P,q,J){return or.access(P,q,J)},_removeData:function(P,q){or.remove(P,q)}}),ee.fn.extend({data:function(P,q){var J,he,_e,De=this[0],Me=De&&De.attributes;if(void 0===P){if(this.length&&(_e=Ma.get(De),1===De.nodeType&&!or.get(De,"hasDataAttrs"))){for(J=Me.length;J--;)Me[J]&&0===(he=Me[J].name).indexOf("data-")&&(he=rs(he.slice(5)),Qs(De,he,_e[he]));or.set(De,"hasDataAttrs",!0)}return _e}return"object"==typeof P?this.each(function(){Ma.set(this,P)}):Ti(this,function(Qe){var ut;if(De&&void 0===Qe)return void 0!==(ut=Ma.get(De,P))||void 0!==(ut=Qs(De,P))?ut:void 0;this.each(function(){Ma.set(this,P,Qe)})},null,q,arguments.length>1,null,!0)},removeData:function(P){return this.each(function(){Ma.remove(this,P)})}}),ee.extend({queue:function(P,q,J){var he;if(P)return he=or.get(P,q=(q||"fx")+"queue"),J&&(!he||Array.isArray(J)?he=or.access(P,q,ee.makeArray(J)):he.push(J)),he||[]},dequeue:function(P,q){var J=ee.queue(P,q=q||"fx"),he=J.length,_e=J.shift(),De=ee._queueHooks(P,q);"inprogress"===_e&&(_e=J.shift(),he--),_e&&("fx"===q&&J.unshift("inprogress"),delete De.stop,_e.call(P,function(){ee.dequeue(P,q)},De)),!he&&De&&De.empty.fire()},_queueHooks:function(P,q){var J=q+"queueHooks";return or.get(P,J)||or.access(P,J,{empty:ee.Callbacks("once memory").add(function(){or.remove(P,[q+"queue",J])})})}}),ee.fn.extend({queue:function(P,q){var J=2;return"string"!=typeof P&&(q=P,P="fx",J--),arguments.length<J?ee.queue(this[0],P):void 0===q?this:this.each(function(){var he=ee.queue(this,P,q);ee._queueHooks(this,P),"fx"===P&&"inprogress"!==he[0]&&ee.dequeue(this,P)})},dequeue:function(P){return this.each(function(){ee.dequeue(this,P)})},clearQueue:function(P){return this.queue(P||"fx",[])},promise:function(P,q){var J,he=1,_e=ee.Deferred(),De=this,Me=this.length,Qe=function(){--he||_e.resolveWith(De,[De])};for("string"!=typeof P&&(q=P,P=void 0),P=P||"fx";Me--;)(J=or.get(De[Me],P+"queueHooks"))&&J.empty&&(he++,J.empty.add(Qe));return Qe(),_e.promise(q)}});var ls=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Es=new RegExp("^(?:([+-])=|)("+ls+")([a-z%]*)$","i"),ia=["Top","Right","Bottom","Left"],Hs=et.documentElement,aa=function(P){return ee.contains(P.ownerDocument,P)},sa={composed:!0};Hs.getRootNode&&(aa=function(P){return ee.contains(P.ownerDocument,P)||P.getRootNode(sa)===P.ownerDocument});var is=function(P,q){return"none"===(P=q||P).style.display||""===P.style.display&&aa(P)&&"none"===ee.css(P,"display")};function Er($,P,q,J){var he,_e,De=20,Me=J?function(){return J.cur()}:function(){return ee.css($,P,"")},Qe=Me(),ut=q&&q[3]||(ee.cssNumber[P]?"":"px"),At=$.nodeType&&(ee.cssNumber[P]||"px"!==ut&&+Qe)&&Es.exec(ee.css($,P));if(At&&At[3]!==ut){for(ut=ut||At[3],At=+(Qe/=2)||1;De--;)ee.style($,P,At+ut),(1-_e)*(1-(_e=Me()/Qe||.5))<=0&&(De=0),At/=_e;ee.style($,P,(At*=2)+ut),q=q||[]}return q&&(At=+At||+Qe||0,he=q[1]?At+(q[1]+1)*q[2]:+q[2],J&&(J.unit=ut,J.start=At,J.end=he)),he}var ur={};function jn($){var P,q=$.ownerDocument,J=$.nodeName,he=ur[J];return he||(P=q.body.appendChild(q.createElement(J)),he=ee.css(P,"display"),P.parentNode.removeChild(P),"none"===he&&(he="block"),ur[J]=he,he)}function ri($,P){for(var q,J,he=[],_e=0,De=$.length;_e<De;_e++)(J=$[_e]).style&&(q=J.style.display,P?("none"===q&&(he[_e]=or.get(J,"display")||null,he[_e]||(J.style.display="")),""===J.style.display&&is(J)&&(he[_e]=jn(J))):"none"!==q&&(he[_e]="none",or.set(J,"display",q)));for(_e=0;_e<De;_e++)null!=he[_e]&&($[_e].style.display=he[_e]);return $}ee.fn.extend({show:function(){return ri(this,!0)},hide:function(){return ri(this)},toggle:function(P){return"boolean"==typeof P?P?this.show():this.hide():this.each(function(){is(this)?ee(this).show():ee(this).hide()})}});var P,q,pi=/^(?:checkbox|radio)$/i,ii=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Or=/^$|^module$|\/(?:java|ecma)script/i;P=et.createDocumentFragment().appendChild(et.createElement("div")),(q=et.createElement("input")).setAttribute("type","radio"),q.setAttribute("checked","checked"),q.setAttribute("name","t"),P.appendChild(q),be.checkClone=P.cloneNode(!0).cloneNode(!0).lastChild.checked,P.innerHTML="<textarea>x</textarea>",be.noCloneChecked=!!P.cloneNode(!0).lastChild.defaultValue,P.innerHTML="<option></option>",be.option=!!P.lastChild;var lr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Wi($,P){var q;return q=void 0!==$.getElementsByTagName?$.getElementsByTagName(P||"*"):void 0!==$.querySelectorAll?$.querySelectorAll(P||"*"):[],void 0===P||P&&Rt($,P)?ee.merge([$],q):q}function cs($,P){for(var q=0,J=$.length;q<J;q++)or.set($[q],"globalEval",!P||or.get(P[q],"globalEval"))}lr.tbody=lr.tfoot=lr.colgroup=lr.caption=lr.thead,lr.th=lr.td,be.option||(lr.optgroup=lr.option=[1,"<select multiple='multiple'>","</select>"]);var Rs=/<|&#?\w+;/;function Wo($,P,q,J,he){for(var _e,De,Me,Qe,ut,At,sn=P.createDocumentFragment(),an=[],vt=0,cn=$.length;vt<cn;vt++)if((_e=$[vt])||0===_e)if("object"===pt(_e))ee.merge(an,_e.nodeType?[_e]:_e);else if(Rs.test(_e)){for(De=De||sn.appendChild(P.createElement("div")),Me=(ii.exec(_e)||["",""])[1].toLowerCase(),De.innerHTML=(Qe=lr[Me]||lr._default)[1]+ee.htmlPrefilter(_e)+Qe[2],At=Qe[0];At--;)De=De.lastChild;ee.merge(an,De.childNodes),(De=sn.firstChild).textContent=""}else an.push(P.createTextNode(_e));for(sn.textContent="",vt=0;_e=an[vt++];)if(J&&ee.inArray(_e,J)>-1)he&&he.push(_e);else if(ut=aa(_e),De=Wi(sn.appendChild(_e),"script"),ut&&cs(De),q)for(At=0;_e=De[At++];)Or.test(_e.type||"")&&q.push(_e);return sn}var wa=/^([^.]*)(?:\.(.+)|)/;function Zi(){return!0}function Tt(){return!1}function Et($,P){return $===function(){try{return et.activeElement}catch($){}}()==("focus"===P)}function gt($,P,q,J,he,_e){var De,Me;if("object"==typeof P){for(Me in"string"!=typeof q&&(J=J||q,q=void 0),P)gt($,Me,q,J,P[Me],_e);return $}if(null==J&&null==he?(he=q,J=q=void 0):null==he&&("string"==typeof q?(he=J,J=void 0):(he=J,J=q,q=void 0)),!1===he)he=Tt;else if(!he)return $;return 1===_e&&(De=he,(he=function(ut){return ee().off(ut),De.apply(this,arguments)}).guid=De.guid||(De.guid=ee.guid++)),$.each(function(){ee.event.add(this,P,he,J,q)})}function Yt($,P,q){q?(or.set($,P,!1),ee.event.add($,P,{namespace:!1,handler:function(he){var _e,De,Me=or.get(this,P);if(1&he.isTrigger&&this[P]){if(Me.length)(ee.event.special[P]||{}).delegateType&&he.stopPropagation();else if(Me=oe.call(arguments),or.set(this,P,Me),_e=q(this,P),this[P](),Me!==(De=or.get(this,P))||_e?or.set(this,P,!1):De={},Me!==De)return he.stopImmediatePropagation(),he.preventDefault(),De&&De.value}else Me.length&&(or.set(this,P,{value:ee.event.trigger(ee.extend(Me[0],ee.Event.prototype),Me.slice(1),this)}),he.stopImmediatePropagation())}})):void 0===or.get($,P)&&ee.event.add($,P,Zi)}ee.event={global:{},add:function(P,q,J,he,_e){var De,Me,Qe,ut,At,sn,an,vt,cn,Wn,hr,Oi=or.get(P);if(bi(P))for(J.handler&&(J=(De=J).handler,_e=De.selector),_e&&ee.find.matchesSelector(Hs,_e),J.guid||(J.guid=ee.guid++),(ut=Oi.events)||(ut=Oi.events=Object.create(null)),(Me=Oi.handle)||(Me=Oi.handle=function(ja){return void 0!==ee&&ee.event.triggered!==ja.type?ee.event.dispatch.apply(P,arguments):void 0}),At=(q=(q||"").match(bt)||[""]).length;At--;)cn=hr=(Qe=wa.exec(q[At])||[])[1],Wn=(Qe[2]||"").split(".").sort(),cn&&(an=ee.event.special[cn]||{},an=ee.event.special[cn=(_e?an.delegateType:an.bindType)||cn]||{},sn=ee.extend({type:cn,origType:hr,data:he,handler:J,guid:J.guid,selector:_e,needsContext:_e&&ee.expr.match.needsContext.test(_e),namespace:Wn.join(".")},De),(vt=ut[cn])||((vt=ut[cn]=[]).delegateCount=0,(!an.setup||!1===an.setup.call(P,he,Wn,Me))&&P.addEventListener&&P.addEventListener(cn,Me)),an.add&&(an.add.call(P,sn),sn.handler.guid||(sn.handler.guid=J.guid)),_e?vt.splice(vt.delegateCount++,0,sn):vt.push(sn),ee.event.global[cn]=!0)},remove:function(P,q,J,he,_e){var De,Me,Qe,ut,At,sn,an,vt,cn,Wn,hr,Oi=or.hasData(P)&&or.get(P);if(Oi&&(ut=Oi.events)){for(At=(q=(q||"").match(bt)||[""]).length;At--;)if(cn=hr=(Qe=wa.exec(q[At])||[])[1],Wn=(Qe[2]||"").split(".").sort(),cn){for(an=ee.event.special[cn]||{},vt=ut[cn=(he?an.delegateType:an.bindType)||cn]||[],Qe=Qe[2]&&new RegExp("(^|\\.)"+Wn.join("\\.(?:.*\\.|)")+"(\\.|$)"),Me=De=vt.length;De--;)sn=vt[De],(_e||hr===sn.origType)&&(!J||J.guid===sn.guid)&&(!Qe||Qe.test(sn.namespace))&&(!he||he===sn.selector||"**"===he&&sn.selector)&&(vt.splice(De,1),sn.selector&&vt.delegateCount--,an.remove&&an.remove.call(P,sn));Me&&!vt.length&&((!an.teardown||!1===an.teardown.call(P,Wn,Oi.handle))&&ee.removeEvent(P,cn,Oi.handle),delete ut[cn])}else for(cn in ut)ee.event.remove(P,cn+q[At],J,he,!0);ee.isEmptyObject(ut)&&or.remove(P,"handle events")}},dispatch:function(P){var q,J,he,_e,De,Me,Qe=new Array(arguments.length),ut=ee.event.fix(P),At=(or.get(this,"events")||Object.create(null))[ut.type]||[],sn=ee.event.special[ut.type]||{};for(Qe[0]=ut,q=1;q<arguments.length;q++)Qe[q]=arguments[q];if(ut.delegateTarget=this,!sn.preDispatch||!1!==sn.preDispatch.call(this,ut)){for(Me=ee.event.handlers.call(this,ut,At),q=0;(_e=Me[q++])&&!ut.isPropagationStopped();)for(ut.currentTarget=_e.elem,J=0;(De=_e.handlers[J++])&&!ut.isImmediatePropagationStopped();)(!ut.rnamespace||!1===De.namespace||ut.rnamespace.test(De.namespace))&&(ut.handleObj=De,ut.data=De.data,void 0!==(he=((ee.event.special[De.origType]||{}).handle||De.handler).apply(_e.elem,Qe))&&!1===(ut.result=he)&&(ut.preventDefault(),ut.stopPropagation()));return sn.postDispatch&&sn.postDispatch.call(this,ut),ut.result}},handlers:function(P,q){var J,he,_e,De,Me,Qe=[],ut=q.delegateCount,At=P.target;if(ut&&At.nodeType&&!("click"===P.type&&P.button>=1))for(;At!==this;At=At.parentNode||this)if(1===At.nodeType&&("click"!==P.type||!0!==At.disabled)){for(De=[],Me={},J=0;J<ut;J++)void 0===Me[_e=(he=q[J]).selector+" "]&&(Me[_e]=he.needsContext?ee(_e,this).index(At)>-1:ee.find(_e,this,null,[At]).length),Me[_e]&&De.push(he);De.length&&Qe.push({elem:At,handlers:De})}return At=this,ut<q.length&&Qe.push({elem:At,handlers:q.slice(ut)}),Qe},addProp:function(P,q){Object.defineProperty(ee.Event.prototype,P,{enumerable:!0,configurable:!0,get:Ne(q)?function(){if(this.originalEvent)return q(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[P]},set:function(he){Object.defineProperty(this,P,{enumerable:!0,configurable:!0,writable:!0,value:he})}})},fix:function(P){return P[ee.expando]?P:new ee.Event(P)},special:{load:{noBubble:!0},click:{setup:function(P){var q=this||P;return pi.test(q.type)&&q.click&&Rt(q,"input")&&Yt(q,"click",Zi),!1},trigger:function(P){var q=this||P;return pi.test(q.type)&&q.click&&Rt(q,"input")&&Yt(q,"click"),!0},_default:function(P){var q=P.target;return pi.test(q.type)&&q.click&&Rt(q,"input")&&or.get(q,"click")||Rt(q,"a")}},beforeunload:{postDispatch:function(P){void 0!==P.result&&P.originalEvent&&(P.originalEvent.returnValue=P.result)}}}},ee.removeEvent=function($,P,q){$.removeEventListener&&$.removeEventListener(P,q)},(ee.Event=function($,P){if(!(this instanceof ee.Event))return new ee.Event($,P);$&&$.type?(this.originalEvent=$,this.type=$.type,this.isDefaultPrevented=$.defaultPrevented||void 0===$.defaultPrevented&&!1===$.returnValue?Zi:Tt,this.target=$.target&&3===$.target.nodeType?$.target.parentNode:$.target,this.currentTarget=$.currentTarget,this.relatedTarget=$.relatedTarget):this.type=$,P&&ee.extend(this,P),this.timeStamp=$&&$.timeStamp||Date.now(),this[ee.expando]=!0}).prototype={constructor:ee.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var P=this.originalEvent;this.isDefaultPrevented=Zi,P&&!this.isSimulated&&P.preventDefault()},stopPropagation:function(){var P=this.originalEvent;this.isPropagationStopped=Zi,P&&!this.isSimulated&&P.stopPropagation()},stopImmediatePropagation:function(){var P=this.originalEvent;this.isImmediatePropagationStopped=Zi,P&&!this.isSimulated&&P.stopImmediatePropagation(),this.stopPropagation()}},ee.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},ee.event.addProp),ee.each({focus:"focusin",blur:"focusout"},function($,P){ee.event.special[$]={setup:function(){return Yt(this,$,Et),!1},trigger:function(){return Yt(this,$),!0},_default:function(){return!0},delegateType:P}}),ee.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function($,P){ee.event.special[$]={delegateType:P,bindType:P,handle:function(J){var he,_e=this,De=J.relatedTarget,Me=J.handleObj;return(!De||De!==_e&&!ee.contains(_e,De))&&(J.type=Me.origType,he=Me.handler.apply(this,arguments),J.type=P),he}}}),ee.fn.extend({on:function(P,q,J,he){return gt(this,P,q,J,he)},one:function(P,q,J,he){return gt(this,P,q,J,he,1)},off:function(P,q,J){var he,_e;if(P&&P.preventDefault&&P.handleObj)return he=P.handleObj,ee(P.delegateTarget).off(he.namespace?he.origType+"."+he.namespace:he.origType,he.selector,he.handler),this;if("object"==typeof P){for(_e in P)this.off(_e,q,P[_e]);return this}return(!1===q||"function"==typeof q)&&(J=q,q=void 0),!1===J&&(J=Tt),this.each(function(){ee.event.remove(this,P,J,q)})}});var Gt=/<script|<style|<link/i,Nn=/checked\s*(?:[^=]|=\s*.checked.)/i,Mn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ai($,P){return Rt($,"table")&&Rt(11!==P.nodeType?P:P.firstChild,"tr")&&ee($).children("tbody")[0]||$}function In($){return $.type=(null!==$.getAttribute("type"))+"/"+$.type,$}function xi($){return"true/"===($.type||"").slice(0,5)?$.type=$.type.slice(5):$.removeAttribute("type"),$}function oa($,P){var q,J,he,De,Me,Qe;if(1===P.nodeType){if(or.hasData($)&&(Qe=or.get($).events))for(he in or.remove(P,"handle events"),Qe)for(q=0,J=Qe[he].length;q<J;q++)ee.event.add(P,he,Qe[he][q]);Ma.hasData($)&&(De=Ma.access($),Me=ee.extend({},De),Ma.set(P,Me))}}function Ga($,P){var q=P.nodeName.toLowerCase();"input"===q&&pi.test($.type)?P.checked=$.checked:("input"===q||"textarea"===q)&&(P.defaultValue=$.defaultValue)}function wt($,P,q,J){P=Ve(P);var he,_e,De,Me,Qe,ut,At=0,sn=$.length,an=sn-1,vt=P[0],cn=Ne(vt);if(cn||sn>1&&"string"==typeof vt&&!be.checkClone&&Nn.test(vt))return $.each(function(Wn){var hr=$.eq(Wn);cn&&(P[0]=vt.call(this,Wn,hr.html())),wt(hr,P,q,J)});if(sn&&(_e=(he=Wo(P,$[0].ownerDocument,!1,$,J)).firstChild,1===he.childNodes.length&&(he=_e),_e||J)){for(Me=(De=ee.map(Wi(he,"script"),In)).length;At<sn;At++)Qe=he,At!==an&&(Qe=ee.clone(Qe,!0,!0),Me&&ee.merge(De,Wi(Qe,"script"))),q.call($[At],Qe,At);if(Me)for(ut=De[De.length-1].ownerDocument,ee.map(De,xi),At=0;At<Me;At++)Or.test((Qe=De[At]).type||"")&&!or.access(Qe,"globalEval")&&ee.contains(ut,Qe)&&(Qe.src&&"module"!==(Qe.type||"").toLowerCase()?ee._evalUrl&&!Qe.noModule&&ee._evalUrl(Qe.src,{nonce:Qe.nonce||Qe.getAttribute("nonce")},ut):We(Qe.textContent.replace(Mn,""),Qe,ut))}return $}function Ft($,P,q){for(var J,he=P?ee.filter(P,$):$,_e=0;null!=(J=he[_e]);_e++)!q&&1===J.nodeType&&ee.cleanData(Wi(J)),J.parentNode&&(q&&aa(J)&&cs(Wi(J,"script")),J.parentNode.removeChild(J));return $}ee.extend({htmlPrefilter:function(P){return P},clone:function(P,q,J){var he,_e,De,Me,Qe=P.cloneNode(!0),ut=aa(P);if(!(be.noCloneChecked||1!==P.nodeType&&11!==P.nodeType||ee.isXMLDoc(P)))for(Me=Wi(Qe),he=0,_e=(De=Wi(P)).length;he<_e;he++)Ga(De[he],Me[he]);if(q)if(J)for(De=De||Wi(P),Me=Me||Wi(Qe),he=0,_e=De.length;he<_e;he++)oa(De[he],Me[he]);else oa(P,Qe);return(Me=Wi(Qe,"script")).length>0&&cs(Me,!ut&&Wi(P,"script")),Qe},cleanData:function(P){for(var q,J,he,_e=ee.event.special,De=0;void 0!==(J=P[De]);De++)if(bi(J)){if(q=J[or.expando]){if(q.events)for(he in q.events)_e[he]?ee.event.remove(J,he):ee.removeEvent(J,he,q.handle);J[or.expando]=void 0}J[Ma.expando]&&(J[Ma.expando]=void 0)}}}),ee.fn.extend({detach:function(P){return Ft(this,P,!0)},remove:function(P){return Ft(this,P)},text:function(P){return Ti(this,function(q){return void 0===q?ee.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=q)})},null,P,arguments.length)},append:function(){return wt(this,arguments,function(P){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ai(this,P).appendChild(P)})},prepend:function(){return wt(this,arguments,function(P){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var q=ai(this,P);q.insertBefore(P,q.firstChild)}})},before:function(){return wt(this,arguments,function(P){this.parentNode&&this.parentNode.insertBefore(P,this)})},after:function(){return wt(this,arguments,function(P){this.parentNode&&this.parentNode.insertBefore(P,this.nextSibling)})},empty:function(){for(var P,q=0;null!=(P=this[q]);q++)1===P.nodeType&&(ee.cleanData(Wi(P,!1)),P.textContent="");return this},clone:function(P,q){return P=null!=P&&P,q=null==q?P:q,this.map(function(){return ee.clone(this,P,q)})},html:function(P){return Ti(this,function(q){var J=this[0]||{},he=0,_e=this.length;if(void 0===q&&1===J.nodeType)return J.innerHTML;if("string"==typeof q&&!Gt.test(q)&&!lr[(ii.exec(q)||["",""])[1].toLowerCase()]){q=ee.htmlPrefilter(q);try{for(;he<_e;he++)1===(J=this[he]||{}).nodeType&&(ee.cleanData(Wi(J,!1)),J.innerHTML=q);J=0}catch(De){}}J&&this.empty().append(q)},null,P,arguments.length)},replaceWith:function(){var P=[];return wt(this,arguments,function(q){var J=this.parentNode;ee.inArray(this,P)<0&&(ee.cleanData(Wi(this)),J&&J.replaceChild(q,this))},P)}}),ee.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function($,P){ee.fn[$]=function(q){for(var J,he=[],_e=ee(q),De=_e.length-1,Me=0;Me<=De;Me++)J=Me===De?this:this.clone(!0),ee(_e[Me])[P](J),Te.apply(he,J.get());return this.pushStack(he)}});var Je=new RegExp("^("+ls+")(?!px)[a-z%]+$","i"),$e=function(P){var q=P.ownerDocument.defaultView;return(!q||!q.opener)&&(q=ye),q.getComputedStyle(P)},kt=function(P,q,J){var he,_e,De={};for(_e in q)De[_e]=P.style[_e],P.style[_e]=q[_e];for(_e in he=J.call(P),q)P.style[_e]=De[_e];return he},rn=new RegExp(ia.join("|"),"i");function Jt($,P,q){var J,he,_e,De,Me=$.style;return(q=q||$e($))&&(""===(De=q.getPropertyValue(P)||q[P])&&!aa($)&&(De=ee.style($,P)),!be.pixelBoxStyles()&&Je.test(De)&&rn.test(P)&&(J=Me.width,he=Me.minWidth,_e=Me.maxWidth,Me.minWidth=Me.maxWidth=Me.width=De,De=q.width,Me.width=J,Me.minWidth=he,Me.maxWidth=_e)),void 0!==De?De+"":De}function on($,P){return{get:function(){if(!$())return(this.get=P).apply(this,arguments);delete this.get}}}!function(){function $(){if(ut){Qe.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",ut.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Hs.appendChild(Qe).appendChild(ut);var At=ye.getComputedStyle(ut);q="1%"!==At.top,Me=12===P(At.marginLeft),ut.style.right="60%",_e=36===P(At.right),J=36===P(At.width),ut.style.position="absolute",he=12===P(ut.offsetWidth/3),Hs.removeChild(Qe),ut=null}}function P(At){return Math.round(parseFloat(At))}var q,J,he,_e,De,Me,Qe=et.createElement("div"),ut=et.createElement("div");!ut.style||(ut.style.backgroundClip="content-box",ut.cloneNode(!0).style.backgroundClip="",be.clearCloneStyle="content-box"===ut.style.backgroundClip,ee.extend(be,{boxSizingReliable:function(){return $(),J},pixelBoxStyles:function(){return $(),_e},pixelPosition:function(){return $(),q},reliableMarginLeft:function(){return $(),Me},scrollboxSize:function(){return $(),he},reliableTrDimensions:function(){var sn,an,vt,cn;return null==De&&(sn=et.createElement("table"),an=et.createElement("tr"),vt=et.createElement("div"),sn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",an.style.cssText="border:1px solid",an.style.height="1px",vt.style.height="9px",vt.style.display="block",Hs.appendChild(sn).appendChild(an).appendChild(vt),cn=ye.getComputedStyle(an),De=parseInt(cn.height,10)+parseInt(cn.borderTopWidth,10)+parseInt(cn.borderBottomWidth,10)===an.offsetHeight,Hs.removeChild(sn)),De}}))}();var Tn=["Webkit","Moz","ms"],cr=et.createElement("div").style,Ha={};function Os($){return ee.cssProps[$]||Ha[$]||($ in cr?$:Ha[$]=function($){for(var P=$[0].toUpperCase()+$.slice(1),q=Tn.length;q--;)if(($=Tn[q]+P)in cr)return $}($)||$)}var Yr=/^(none|table(?!-c[ea]).+)/,Bi=/^--/,hs={position:"absolute",visibility:"hidden",display:"block"},Pa={letterSpacing:"0",fontWeight:"400"};function Nl($,P,q){var J=Es.exec(P);return J?Math.max(0,J[2]-(q||0))+(J[3]||"px"):P}function Ea($,P,q,J,he,_e){var De="width"===P?1:0,Me=0,Qe=0;if(q===(J?"border":"content"))return 0;for(;De<4;De+=2)"margin"===q&&(Qe+=ee.css($,q+ia[De],!0,he)),J?("content"===q&&(Qe-=ee.css($,"padding"+ia[De],!0,he)),"margin"!==q&&(Qe-=ee.css($,"border"+ia[De]+"Width",!0,he))):(Qe+=ee.css($,"padding"+ia[De],!0,he),"padding"!==q?Qe+=ee.css($,"border"+ia[De]+"Width",!0,he):Me+=ee.css($,"border"+ia[De]+"Width",!0,he));return!J&&_e>=0&&(Qe+=Math.max(0,Math.ceil($["offset"+P[0].toUpperCase()+P.slice(1)]-_e-Qe-Me-.5))||0),Qe}function Zn($,P,q){var J=$e($),_e=(!be.boxSizingReliable()||q)&&"border-box"===ee.css($,"boxSizing",!1,J),De=_e,Me=Jt($,P,J),Qe="offset"+P[0].toUpperCase()+P.slice(1);if(Je.test(Me)){if(!q)return Me;Me="auto"}return(!be.boxSizingReliable()&&_e||!be.reliableTrDimensions()&&Rt($,"tr")||"auto"===Me||!parseFloat(Me)&&"inline"===ee.css($,"display",!1,J))&&$.getClientRects().length&&(_e="border-box"===ee.css($,"boxSizing",!1,J),(De=Qe in $)&&(Me=$[Qe])),(Me=parseFloat(Me)||0)+Ea($,P,q||(_e?"border":"content"),De,J,Me)+"px"}function Dr($,P,q,J,he){return new Dr.prototype.init($,P,q,J,he)}ee.extend({cssHooks:{opacity:{get:function(P,q){if(q){var J=Jt(P,"opacity");return""===J?"1":J}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(P,q,J,he){if(P&&3!==P.nodeType&&8!==P.nodeType&&P.style){var _e,De,Me,Qe=rs(q),ut=Bi.test(q),At=P.style;if(ut||(q=Os(Qe)),Me=ee.cssHooks[q]||ee.cssHooks[Qe],void 0===J)return Me&&"get"in Me&&void 0!==(_e=Me.get(P,!1,he))?_e:At[q];if("string"==(De=typeof J)&&(_e=Es.exec(J))&&_e[1]&&(J=Er(P,q,_e),De="number"),null==J||J!=J)return;"number"===De&&!ut&&(J+=_e&&_e[3]||(ee.cssNumber[Qe]?"":"px")),!be.clearCloneStyle&&""===J&&0===q.indexOf("background")&&(At[q]="inherit"),(!Me||!("set"in Me)||void 0!==(J=Me.set(P,J,he)))&&(ut?At.setProperty(q,J):At[q]=J)}},css:function(P,q,J,he){var _e,De,Me,Qe=rs(q);return Bi.test(q)||(q=Os(Qe)),(Me=ee.cssHooks[q]||ee.cssHooks[Qe])&&"get"in Me&&(_e=Me.get(P,!0,J)),void 0===_e&&(_e=Jt(P,q,he)),"normal"===_e&&q in Pa&&(_e=Pa[q]),""===J||J?(De=parseFloat(_e),!0===J||isFinite(De)?De||0:_e):_e}}),ee.each(["height","width"],function($,P){ee.cssHooks[P]={get:function(J,he,_e){if(he)return!Yr.test(ee.css(J,"display"))||J.getClientRects().length&&J.getBoundingClientRect().width?Zn(J,P,_e):kt(J,hs,function(){return Zn(J,P,_e)})},set:function(J,he,_e){var De,Me=$e(J),Qe=!be.scrollboxSize()&&"absolute"===Me.position,At=(Qe||_e)&&"border-box"===ee.css(J,"boxSizing",!1,Me),sn=_e?Ea(J,P,_e,At,Me):0;return At&&Qe&&(sn-=Math.ceil(J["offset"+P[0].toUpperCase()+P.slice(1)]-parseFloat(Me[P])-Ea(J,P,"border",!1,Me)-.5)),sn&&(De=Es.exec(he))&&"px"!==(De[3]||"px")&&(J.style[P]=he,he=ee.css(J,P)),Nl(0,he,sn)}}}),ee.cssHooks.marginLeft=on(be.reliableMarginLeft,function($,P){if(P)return(parseFloat(Jt($,"marginLeft"))||$.getBoundingClientRect().left-kt($,{marginLeft:0},function(){return $.getBoundingClientRect().left}))+"px"}),ee.each({margin:"",padding:"",border:"Width"},function($,P){ee.cssHooks[$+P]={expand:function(J){for(var he=0,_e={},De="string"==typeof J?J.split(" "):[J];he<4;he++)_e[$+ia[he]+P]=De[he]||De[he-2]||De[0];return _e}},"margin"!==$&&(ee.cssHooks[$+P].set=Nl)}),ee.fn.extend({css:function(P,q){return Ti(this,function(J,he,_e){var De,Me,Qe={},ut=0;if(Array.isArray(he)){for(De=$e(J),Me=he.length;ut<Me;ut++)Qe[he[ut]]=ee.css(J,he[ut],!1,De);return Qe}return void 0!==_e?ee.style(J,he,_e):ee.css(J,he)},P,q,arguments.length>1)}}),ee.Tween=Dr,(Dr.prototype={constructor:Dr,init:function(P,q,J,he,_e,De){this.elem=P,this.prop=J,this.easing=_e||ee.easing._default,this.options=q,this.start=this.now=this.cur(),this.end=he,this.unit=De||(ee.cssNumber[J]?"":"px")},cur:function(){var P=Dr.propHooks[this.prop];return P&&P.get?P.get(this):Dr.propHooks._default.get(this)},run:function(P){var q,J=Dr.propHooks[this.prop];return this.pos=q=this.options.duration?ee.easing[this.easing](P,this.options.duration*P,0,1,this.options.duration):P,this.now=(this.end-this.start)*q+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),J&&J.set?J.set(this):Dr.propHooks._default.set(this),this}}).init.prototype=Dr.prototype,(Dr.propHooks={_default:{get:function(P){var q;return 1!==P.elem.nodeType||null!=P.elem[P.prop]&&null==P.elem.style[P.prop]?P.elem[P.prop]:(q=ee.css(P.elem,P.prop,""))&&"auto"!==q?q:0},set:function(P){ee.fx.step[P.prop]?ee.fx.step[P.prop](P):1!==P.elem.nodeType||!ee.cssHooks[P.prop]&&null==P.elem.style[Os(P.prop)]?P.elem[P.prop]=P.now:ee.style(P.elem,P.prop,P.now+P.unit)}}}).scrollTop=Dr.propHooks.scrollLeft={set:function(P){P.elem.nodeType&&P.elem.parentNode&&(P.elem[P.prop]=P.now)}},ee.easing={linear:function(P){return P},swing:function(P){return.5-Math.cos(P*Math.PI)/2},_default:"swing"},(ee.fx=Dr.prototype.init).step={};var Ii,ir,Ri=/^(?:toggle|show|hide)$/,Fa=/queueHooks$/;function Gs(){ir&&(!1===et.hidden&&ye.requestAnimationFrame?ye.requestAnimationFrame(Gs):ye.setTimeout(Gs,ee.fx.interval),ee.fx.tick())}function ua(){return ye.setTimeout(function(){Ii=void 0}),Ii=Date.now()}function xu($,P){var q,J=0,he={height:$};for(P=P?1:0;J<4;J+=2-P)he["margin"+(q=ia[J])]=he["padding"+q]=$;return P&&(he.opacity=he.width=$),he}function Lr($,P,q){for(var J,he=(Ka.tweeners[P]||[]).concat(Ka.tweeners["*"]),_e=0,De=he.length;_e<De;_e++)if(J=he[_e].call(q,P,$))return J}function Ka($,P,q){var J,he,_e=0,De=Ka.prefilters.length,Me=ee.Deferred().always(function(){delete Qe.elem}),Qe=function(){if(he)return!1;for(var an=Ii||ua(),vt=Math.max(0,ut.startTime+ut.duration-an),Wn=1-(vt/ut.duration||0),hr=0,Oi=ut.tweens.length;hr<Oi;hr++)ut.tweens[hr].run(Wn);return Me.notifyWith($,[ut,Wn,vt]),Wn<1&&Oi?vt:(Oi||Me.notifyWith($,[ut,1,0]),Me.resolveWith($,[ut]),!1)},ut=Me.promise({elem:$,props:ee.extend({},P),opts:ee.extend(!0,{specialEasing:{},easing:ee.easing._default},q),originalProperties:P,originalOptions:q,startTime:Ii||ua(),duration:q.duration,tweens:[],createTween:function(an,vt){var cn=ee.Tween($,ut.opts,an,vt,ut.opts.specialEasing[an]||ut.opts.easing);return ut.tweens.push(cn),cn},stop:function(an){var vt=0,cn=an?ut.tweens.length:0;if(he)return this;for(he=!0;vt<cn;vt++)ut.tweens[vt].run(1);return an?(Me.notifyWith($,[ut,1,0]),Me.resolveWith($,[ut,an])):Me.rejectWith($,[ut,an]),this}}),At=ut.props;for(function($,P){var q,J,he,_e,De;for(q in $)if(he=P[J=rs(q)],_e=$[q],Array.isArray(_e)&&(he=_e[1],_e=$[q]=_e[0]),q!==J&&($[J]=_e,delete $[q]),(De=ee.cssHooks[J])&&"expand"in De)for(q in _e=De.expand(_e),delete $[J],_e)q in $||($[q]=_e[q],P[q]=he);else P[J]=he}(At,ut.opts.specialEasing);_e<De;_e++)if(J=Ka.prefilters[_e].call(ut,$,At,ut.opts))return Ne(J.stop)&&(ee._queueHooks(ut.elem,ut.opts.queue).stop=J.stop.bind(J)),J;return ee.map(At,Lr,ut),Ne(ut.opts.start)&&ut.opts.start.call($,ut),ut.progress(ut.opts.progress).done(ut.opts.done,ut.opts.complete).fail(ut.opts.fail).always(ut.opts.always),ee.fx.timer(ee.extend(Qe,{elem:$,anim:ut,queue:ut.opts.queue})),ut}ee.Animation=ee.extend(Ka,{tweeners:{"*":[function($,P){var q=this.createTween($,P);return Er(q.elem,$,Es.exec(P),q),q}]},tweener:function(P,q){Ne(P)?(q=P,P=["*"]):P=P.match(bt);for(var J,he=0,_e=P.length;he<_e;he++)(Ka.tweeners[J=P[he]]=Ka.tweeners[J]||[]).unshift(q)},prefilters:[function($,P,q){var J,he,_e,De,Me,Qe,ut,At,sn="width"in P||"height"in P,an=this,vt={},cn=$.style,Wn=$.nodeType&&is($),hr=or.get($,"fxshow");for(J in q.queue||(null==(De=ee._queueHooks($,"fx")).unqueued&&(De.unqueued=0,Me=De.empty.fire,De.empty.fire=function(){De.unqueued||Me()}),De.unqueued++,an.always(function(){an.always(function(){De.unqueued--,ee.queue($,"fx").length||De.empty.fire()})})),P)if(Ri.test(he=P[J])){if(delete P[J],_e=_e||"toggle"===he,he===(Wn?"hide":"show")){if("show"!==he||!hr||void 0===hr[J])continue;Wn=!0}vt[J]=hr&&hr[J]||ee.style($,J)}if((Qe=!ee.isEmptyObject(P))||!ee.isEmptyObject(vt))for(J in sn&&1===$.nodeType&&(q.overflow=[cn.overflow,cn.overflowX,cn.overflowY],null==(ut=hr&&hr.display)&&(ut=or.get($,"display")),"none"===(At=ee.css($,"display"))&&(ut?At=ut:(ri([$],!0),ut=$.style.display||ut,At=ee.css($,"display"),ri([$]))),("inline"===At||"inline-block"===At&&null!=ut)&&"none"===ee.css($,"float")&&(Qe||(an.done(function(){cn.display=ut}),null==ut&&(ut="none"===(At=cn.display)?"":At)),cn.display="inline-block")),q.overflow&&(cn.overflow="hidden",an.always(function(){cn.overflow=q.overflow[0],cn.overflowX=q.overflow[1],cn.overflowY=q.overflow[2]})),Qe=!1,vt)Qe||(hr?"hidden"in hr&&(Wn=hr.hidden):hr=or.access($,"fxshow",{display:ut}),_e&&(hr.hidden=!Wn),Wn&&ri([$],!0),an.done(function(){for(J in Wn||ri([$]),or.remove($,"fxshow"),vt)ee.style($,J,vt[J])})),Qe=Lr(Wn?hr[J]:0,J,an),J in hr||(hr[J]=Qe.start,Wn&&(Qe.end=Qe.start,Qe.start=0))}],prefilter:function(P,q){q?Ka.prefilters.unshift(P):Ka.prefilters.push(P)}}),ee.speed=function($,P,q){var J=$&&"object"==typeof $?ee.extend({},$):{complete:q||!q&&P||Ne($)&&$,duration:$,easing:q&&P||P&&!Ne(P)&&P};return ee.fx.off?J.duration=0:"number"!=typeof J.duration&&(J.duration=J.duration in ee.fx.speeds?ee.fx.speeds[J.duration]:ee.fx.speeds._default),(null==J.queue||!0===J.queue)&&(J.queue="fx"),J.old=J.complete,J.complete=function(){Ne(J.old)&&J.old.call(this),J.queue&&ee.dequeue(this,J.queue)},J},ee.fn.extend({fadeTo:function(P,q,J,he){return this.filter(is).css("opacity",0).show().end().animate({opacity:q},P,J,he)},animate:function(P,q,J,he){var _e=ee.isEmptyObject(P),De=ee.speed(q,J,he),Me=function(){var ut=Ka(this,ee.extend({},P),De);(_e||or.get(this,"finish"))&&ut.stop(!0)};return Me.finish=Me,_e||!1===De.queue?this.each(Me):this.queue(De.queue,Me)},stop:function(P,q,J){var he=function(De){var Me=De.stop;delete De.stop,Me(J)};return"string"!=typeof P&&(J=q,q=P,P=void 0),q&&this.queue(P||"fx",[]),this.each(function(){var _e=!0,De=null!=P&&P+"queueHooks",Me=ee.timers,Qe=or.get(this);if(De)Qe[De]&&Qe[De].stop&&he(Qe[De]);else for(De in Qe)Qe[De]&&Qe[De].stop&&Fa.test(De)&&he(Qe[De]);for(De=Me.length;De--;)Me[De].elem===this&&(null==P||Me[De].queue===P)&&(Me[De].anim.stop(J),_e=!1,Me.splice(De,1));(_e||!J)&&ee.dequeue(this,P)})},finish:function(P){return!1!==P&&(P=P||"fx"),this.each(function(){var q,J=or.get(this),he=J[P+"queue"],_e=J[P+"queueHooks"],De=ee.timers,Me=he?he.length:0;for(J.finish=!0,ee.queue(this,P,[]),_e&&_e.stop&&_e.stop.call(this,!0),q=De.length;q--;)De[q].elem===this&&De[q].queue===P&&(De[q].anim.stop(!0),De.splice(q,1));for(q=0;q<Me;q++)he[q]&&he[q].finish&&he[q].finish.call(this);delete J.finish})}}),ee.each(["toggle","show","hide"],function($,P){var q=ee.fn[P];ee.fn[P]=function(J,he,_e){return null==J||"boolean"==typeof J?q.apply(this,arguments):this.animate(xu(P,!0),J,he,_e)}}),ee.each({slideDown:xu("show"),slideUp:xu("hide"),slideToggle:xu("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function($,P){ee.fn[$]=function(q,J,he){return this.animate(P,q,J,he)}}),ee.timers=[],ee.fx.tick=function(){var $,P=0,q=ee.timers;for(Ii=Date.now();P<q.length;P++)!($=q[P])()&&q[P]===$&&q.splice(P--,1);q.length||ee.fx.stop(),Ii=void 0},ee.fx.timer=function($){ee.timers.push($),ee.fx.start()},ee.fx.interval=13,ee.fx.start=function(){ir||(ir=!0,Gs())},ee.fx.stop=function(){ir=null},ee.fx.speeds={slow:600,fast:200,_default:400},ee.fn.delay=function($,P){return $=ee.fx&&ee.fx.speeds[$]||$,this.queue(P=P||"fx",function(q,J){var he=ye.setTimeout(q,$);J.stop=function(){ye.clearTimeout(he)}})},function(){var $=et.createElement("input"),q=et.createElement("select").appendChild(et.createElement("option"));$.type="checkbox",be.checkOn=""!==$.value,be.optSelected=q.selected,($=et.createElement("input")).value="t",$.type="radio",be.radioValue="t"===$.value}();var as,Ao=ee.expr.attrHandle;ee.fn.extend({attr:function(P,q){return Ti(this,ee.attr,P,q,arguments.length>1)},removeAttr:function(P){return this.each(function(){ee.removeAttr(this,P)})}}),ee.extend({attr:function(P,q,J){var he,_e,De=P.nodeType;if(3!==De&&8!==De&&2!==De)return void 0===P.getAttribute?ee.prop(P,q,J):((1!==De||!ee.isXMLDoc(P))&&(_e=ee.attrHooks[q.toLowerCase()]||(ee.expr.match.bool.test(q)?as:void 0)),void 0!==J?null===J?void ee.removeAttr(P,q):_e&&"set"in _e&&void 0!==(he=_e.set(P,J,q))?he:(P.setAttribute(q,J+""),J):_e&&"get"in _e&&null!==(he=_e.get(P,q))?he:null==(he=ee.find.attr(P,q))?void 0:he)},attrHooks:{type:{set:function(P,q){if(!be.radioValue&&"radio"===q&&Rt(P,"input")){var J=P.value;return P.setAttribute("type",q),J&&(P.value=J),q}}}},removeAttr:function(P,q){var J,he=0,_e=q&&q.match(bt);if(_e&&1===P.nodeType)for(;J=_e[he++];)P.removeAttribute(J)}}),as={set:function(P,q,J){return!1===q?ee.removeAttr(P,J):P.setAttribute(J,J),J}},ee.each(ee.expr.match.bool.source.match(/\w+/g),function($,P){var q=Ao[P]||ee.find.attr;Ao[P]=function(J,he,_e){var De,Me,Qe=he.toLowerCase();return _e||(Me=Ao[Qe],Ao[Qe]=De,De=null!=q(J,he,_e)?Qe:null,Ao[Qe]=Me),De}});var Ls=/^(?:input|select|textarea|button)$/i,Ra=/^(?:a|area)$/i;function Ui($){return($.match(bt)||[]).join(" ")}function ya($){return $.getAttribute&&$.getAttribute("class")||""}function vi($){return Array.isArray($)?$:"string"==typeof $&&$.match(bt)||[]}ee.fn.extend({prop:function(P,q){return Ti(this,ee.prop,P,q,arguments.length>1)},removeProp:function(P){return this.each(function(){delete this[ee.propFix[P]||P]})}}),ee.extend({prop:function(P,q,J){var he,_e,De=P.nodeType;if(3!==De&&8!==De&&2!==De)return(1!==De||!ee.isXMLDoc(P))&&(_e=ee.propHooks[q=ee.propFix[q]||q]),void 0!==J?_e&&"set"in _e&&void 0!==(he=_e.set(P,J,q))?he:P[q]=J:_e&&"get"in _e&&null!==(he=_e.get(P,q))?he:P[q]},propHooks:{tabIndex:{get:function(P){var q=ee.find.attr(P,"tabindex");return q?parseInt(q,10):Ls.test(P.nodeName)||Ra.test(P.nodeName)&&P.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),be.optSelected||(ee.propHooks.selected={get:function(P){return null},set:function(P){}}),ee.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ee.propFix[this.toLowerCase()]=this}),ee.fn.extend({addClass:function(P){var q,J,he,_e,De,Me,Qe,ut=0;if(Ne(P))return this.each(function(At){ee(this).addClass(P.call(this,At,ya(this)))});if((q=vi(P)).length)for(;J=this[ut++];)if(_e=ya(J),he=1===J.nodeType&&" "+Ui(_e)+" "){for(Me=0;De=q[Me++];)he.indexOf(" "+De+" ")<0&&(he+=De+" ");_e!==(Qe=Ui(he))&&J.setAttribute("class",Qe)}return this},removeClass:function(P){var q,J,he,_e,De,Me,Qe,ut=0;if(Ne(P))return this.each(function(At){ee(this).removeClass(P.call(this,At,ya(this)))});if(!arguments.length)return this.attr("class","");if((q=vi(P)).length)for(;J=this[ut++];)if(_e=ya(J),he=1===J.nodeType&&" "+Ui(_e)+" "){for(Me=0;De=q[Me++];)for(;he.indexOf(" "+De+" ")>-1;)he=he.replace(" "+De+" "," ");_e!==(Qe=Ui(he))&&J.setAttribute("class",Qe)}return this},toggleClass:function(P,q){var J=typeof P,he="string"===J||Array.isArray(P);return"boolean"==typeof q&&he?q?this.addClass(P):this.removeClass(P):Ne(P)?this.each(function(_e){ee(this).toggleClass(P.call(this,_e,ya(this),q),q)}):this.each(function(){var _e,De,Me,Qe;if(he)for(De=0,Me=ee(this),Qe=vi(P);_e=Qe[De++];)Me.hasClass(_e)?Me.removeClass(_e):Me.addClass(_e);else(void 0===P||"boolean"===J)&&((_e=ya(this))&&or.set(this,"__className__",_e),this.setAttribute&&this.setAttribute("class",_e||!1===P?"":or.get(this,"__className__")||""))})},hasClass:function(P){var q,J,he=0;for(q=" "+P+" ";J=this[he++];)if(1===J.nodeType&&(" "+Ui(ya(J))+" ").indexOf(q)>-1)return!0;return!1}});var qu=/\r/g;ee.fn.extend({val:function(P){var q,J,he,_e=this[0];return arguments.length?(he=Ne(P),this.each(function(De){var Me;1===this.nodeType&&(null==(Me=he?P.call(this,De,ee(this).val()):P)?Me="":"number"==typeof Me?Me+="":Array.isArray(Me)&&(Me=ee.map(Me,function(Qe){return null==Qe?"":Qe+""})),(!(q=ee.valHooks[this.type]||ee.valHooks[this.nodeName.toLowerCase()])||!("set"in q)||void 0===q.set(this,Me,"value"))&&(this.value=Me))})):_e?(q=ee.valHooks[_e.type]||ee.valHooks[_e.nodeName.toLowerCase()])&&"get"in q&&void 0!==(J=q.get(_e,"value"))?J:"string"==typeof(J=_e.value)?J.replace(qu,""):null==J?"":J:void 0}}),ee.extend({valHooks:{option:{get:function(P){var q=ee.find.attr(P,"value");return null!=q?q:Ui(ee.text(P))}},select:{get:function(P){var q,J,he,_e=P.options,De=P.selectedIndex,Me="select-one"===P.type,Qe=Me?null:[],ut=Me?De+1:_e.length;for(he=De<0?ut:Me?De:0;he<ut;he++)if(((J=_e[he]).selected||he===De)&&!J.disabled&&(!J.parentNode.disabled||!Rt(J.parentNode,"optgroup"))){if(q=ee(J).val(),Me)return q;Qe.push(q)}return Qe},set:function(P,q){for(var J,he,_e=P.options,De=ee.makeArray(q),Me=_e.length;Me--;)((he=_e[Me]).selected=ee.inArray(ee.valHooks.option.get(he),De)>-1)&&(J=!0);return J||(P.selectedIndex=-1),De}}}}),ee.each(["radio","checkbox"],function(){ee.valHooks[this]={set:function(P,q){if(Array.isArray(q))return P.checked=ee.inArray(ee(P).val(),q)>-1}},be.checkOn||(ee.valHooks[this].get=function($){return null===$.getAttribute("value")?"on":$.value})}),be.focusin="onfocusin"in ye;var sh=/^(?:focusinfocus|focusoutblur)$/,fu=function(P){P.stopPropagation()};ee.extend(ee.event,{trigger:function(P,q,J,he){var _e,De,Me,Qe,ut,At,sn,an,vt=[J||et],cn=ce.call(P,"type")?P.type:P,Wn=ce.call(P,"namespace")?P.namespace.split("."):[];if(De=an=Me=J=J||et,3!==J.nodeType&&8!==J.nodeType&&!sh.test(cn+ee.event.triggered)&&(cn.indexOf(".")>-1&&(Wn=cn.split("."),cn=Wn.shift(),Wn.sort()),ut=cn.indexOf(":")<0&&"on"+cn,(P=P[ee.expando]?P:new ee.Event(cn,"object"==typeof P&&P)).isTrigger=he?2:3,P.namespace=Wn.join("."),P.rnamespace=P.namespace?new RegExp("(^|\\.)"+Wn.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,P.result=void 0,P.target||(P.target=J),q=null==q?[P]:ee.makeArray(q,[P]),sn=ee.event.special[cn]||{},he||!sn.trigger||!1!==sn.trigger.apply(J,q))){if(!he&&!sn.noBubble&&!He(J)){for(sh.test((Qe=sn.delegateType||cn)+cn)||(De=De.parentNode);De;De=De.parentNode)vt.push(De),Me=De;Me===(J.ownerDocument||et)&&vt.push(Me.defaultView||Me.parentWindow||ye)}for(_e=0;(De=vt[_e++])&&!P.isPropagationStopped();)an=De,P.type=_e>1?Qe:sn.bindType||cn,(At=(or.get(De,"events")||Object.create(null))[P.type]&&or.get(De,"handle"))&&At.apply(De,q),(At=ut&&De[ut])&&At.apply&&bi(De)&&(P.result=At.apply(De,q),!1===P.result&&P.preventDefault());return P.type=cn,!he&&!P.isDefaultPrevented()&&(!sn._default||!1===sn._default.apply(vt.pop(),q))&&bi(J)&&ut&&Ne(J[cn])&&!He(J)&&((Me=J[ut])&&(J[ut]=null),ee.event.triggered=cn,P.isPropagationStopped()&&an.addEventListener(cn,fu),J[cn](),P.isPropagationStopped()&&an.removeEventListener(cn,fu),ee.event.triggered=void 0,Me&&(J[ut]=Me)),P.result}},simulate:function(P,q,J){var he=ee.extend(new ee.Event,J,{type:P,isSimulated:!0});ee.event.trigger(he,null,q)}}),ee.fn.extend({trigger:function(P,q){return this.each(function(){ee.event.trigger(P,q,this)})},triggerHandler:function(P,q){var J=this[0];if(J)return ee.event.trigger(P,q,J,!0)}}),be.focusin||ee.each({focus:"focusin",blur:"focusout"},function($,P){var q=function(he){ee.event.simulate(P,he.target,ee.event.fix(he))};ee.event.special[P]={setup:function(){var he=this.ownerDocument||this.document||this,_e=or.access(he,P);_e||he.addEventListener($,q,!0),or.access(he,P,(_e||0)+1)},teardown:function(){var he=this.ownerDocument||this.document||this,_e=or.access(he,P)-1;_e?or.access(he,P,_e):(he.removeEventListener($,q,!0),or.remove(he,P))}}});var gl=ye.location,du={guid:Date.now()},Yu=/\?/;ee.parseXML=function($){var P,q;if(!$||"string"!=typeof $)return null;try{P=(new ye.DOMParser).parseFromString($,"text/xml")}catch(J){}return q=P&&P.getElementsByTagName("parsererror")[0],(!P||q)&&ee.error("Invalid XML: "+(q?ee.map(q.childNodes,function(J){return J.textContent}).join("\n"):$)),P};var pu=/\[\]$/,fs=/\r?\n/g,Pc=/^(?:submit|button|image|reset|file)$/i,$a=/^(?:input|select|textarea|keygen)/i;function Ns($,P,q,J){var he;if(Array.isArray(P))ee.each(P,function(_e,De){q||pu.test($)?J($,De):Ns($+"["+("object"==typeof De&&null!=De?_e:"")+"]",De,q,J)});else if(q||"object"!==pt(P))J($,P);else for(he in P)Ns($+"["+he+"]",P[he],q,J)}ee.param=function($,P){var q,J=[],he=function(De,Me){var Qe=Ne(Me)?Me():Me;J[J.length]=encodeURIComponent(De)+"="+encodeURIComponent(null==Qe?"":Qe)};if(null==$)return"";if(Array.isArray($)||$.jquery&&!ee.isPlainObject($))ee.each($,function(){he(this.name,this.value)});else for(q in $)Ns(q,$[q],P,he);return J.join("&")},ee.fn.extend({serialize:function(){return ee.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var P=ee.prop(this,"elements");return P?ee.makeArray(P):this}).filter(function(){var P=this.type;return this.name&&!ee(this).is(":disabled")&&$a.test(this.nodeName)&&!Pc.test(P)&&(this.checked||!pi.test(P))}).map(function(P,q){var J=ee(this).val();return null==J?null:Array.isArray(J)?ee.map(J,function(he){return{name:q.name,value:he.replace(fs,"\r\n")}}):{name:q.name,value:J.replace(fs,"\r\n")}}).get()}});var $h=/%20/g,Nr=/#.*$/,po=/([?&])_=[^&]*/,Gr=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bf=/^(?:GET|HEAD)$/,Ku=/^\/\//,uh={},vu={},Xh="*/".concat("*"),yl=et.createElement("a");function Zs($){return function(P,q){"string"!=typeof P&&(q=P,P="*");var J,he=0,_e=P.toLowerCase().match(bt)||[];if(Ne(q))for(;J=_e[he++];)"+"===J[0]?(J=J.slice(1)||"*",($[J]=$[J]||[]).unshift(q)):($[J]=$[J]||[]).push(q)}}function $u($,P,q,J){var he={},_e=$===vu;function De(Me){var Qe;return he[Me]=!0,ee.each($[Me]||[],function(ut,At){var sn=At(P,q,J);return"string"!=typeof sn||_e||he[sn]?_e?!(Qe=sn):void 0:(P.dataTypes.unshift(sn),De(sn),!1)}),Qe}return De(P.dataTypes[0])||!he["*"]&&De("*")}function Qh($,P){var q,J,he=ee.ajaxSettings.flatOptions||{};for(q in P)void 0!==P[q]&&((he[q]?$:J||(J={}))[q]=P[q]);return J&&ee.extend(!0,$,J),$}yl.href=gl.href,ee.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gl.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(gl.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xh,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ee.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(P,q){return q?Qh(Qh(P,ee.ajaxSettings),q):Qh(ee.ajaxSettings,P)},ajaxPrefilter:Zs(uh),ajaxTransport:Zs(vu),ajax:function(P,q){"object"==typeof P&&(q=P,P=void 0);var J,he,_e,De,Me,Qe,ut,At,sn,an,vt=ee.ajaxSetup({},q=q||{}),cn=vt.context||vt,Wn=vt.context&&(cn.nodeType||cn.jquery)?ee(cn):ee.event,hr=ee.Deferred(),Oi=ee.Callbacks("once memory"),ja=vt.statusCode||{},vo={},ui={},ka="canceled",Bn={readyState:0,getResponseHeader:function(Oa){var Zr;if(ut){if(!De)for(De={};Zr=Gr.exec(_e);)De[Zr[1].toLowerCase()+" "]=(De[Zr[1].toLowerCase()+" "]||[]).concat(Zr[2]);Zr=De[Oa.toLowerCase()+" "]}return null==Zr?null:Zr.join(", ")},getAllResponseHeaders:function(){return ut?_e:null},setRequestHeader:function(Oa,Zr){return null==ut&&(Oa=ui[Oa.toLowerCase()]=ui[Oa.toLowerCase()]||Oa,vo[Oa]=Zr),this},overrideMimeType:function(Oa){return null==ut&&(vt.mimeType=Oa),this},statusCode:function(Oa){var Zr;if(Oa)if(ut)Bn.always(Oa[Bn.status]);else for(Zr in Oa)ja[Zr]=[ja[Zr],Oa[Zr]];return this},abort:function(Oa){var Zr=Oa||ka;return J&&J.abort(Zr),Xu(0,Zr),this}};if(hr.promise(Bn),vt.url=((P||vt.url||gl.href)+"").replace(Ku,gl.protocol+"//"),vt.type=q.method||q.type||vt.method||vt.type,vt.dataTypes=(vt.dataType||"*").toLowerCase().match(bt)||[""],null==vt.crossDomain){Qe=et.createElement("a");try{Qe.href=vt.url,Qe.href=Qe.href,vt.crossDomain=yl.protocol+"//"+yl.host!=Qe.protocol+"//"+Qe.host}catch(la){vt.crossDomain=!0}}if(vt.data&&vt.processData&&"string"!=typeof vt.data&&(vt.data=ee.param(vt.data,vt.traditional)),$u(uh,vt,q,Bn),ut)return Bn;for(sn in(At=ee.event&&vt.global)&&0==ee.active++&&ee.event.trigger("ajaxStart"),vt.type=vt.type.toUpperCase(),vt.hasContent=!Bf.test(vt.type),he=vt.url.replace(Nr,""),vt.hasContent?vt.data&&vt.processData&&0===(vt.contentType||"").indexOf("application/x-www-form-urlencoded")&&(vt.data=vt.data.replace($h,"+")):(an=vt.url.slice(he.length),vt.data&&(vt.processData||"string"==typeof vt.data)&&(he+=(Yu.test(he)?"&":"?")+vt.data,delete vt.data),!1===vt.cache&&(he=he.replace(po,"$1"),an=(Yu.test(he)?"&":"?")+"_="+du.guid+++an),vt.url=he+an),vt.ifModified&&(ee.lastModified[he]&&Bn.setRequestHeader("If-Modified-Since",ee.lastModified[he]),ee.etag[he]&&Bn.setRequestHeader("If-None-Match",ee.etag[he])),(vt.data&&vt.hasContent&&!1!==vt.contentType||q.contentType)&&Bn.setRequestHeader("Content-Type",vt.contentType),Bn.setRequestHeader("Accept",vt.dataTypes[0]&&vt.accepts[vt.dataTypes[0]]?vt.accepts[vt.dataTypes[0]]+("*"!==vt.dataTypes[0]?", "+Xh+"; q=0.01":""):vt.accepts["*"]),vt.headers)Bn.setRequestHeader(sn,vt.headers[sn]);if(vt.beforeSend&&(!1===vt.beforeSend.call(cn,Bn,vt)||ut))return Bn.abort();if(ka="abort",Oi.add(vt.complete),Bn.done(vt.success),Bn.fail(vt.error),J=$u(vu,vt,q,Bn)){if(Bn.readyState=1,At&&Wn.trigger("ajaxSend",[Bn,vt]),ut)return Bn;vt.async&&vt.timeout>0&&(Me=ye.setTimeout(function(){Bn.abort("timeout")},vt.timeout));try{ut=!1,J.send(vo,Xu)}catch(la){if(ut)throw la;Xu(-1,la)}}else Xu(-1,"No Transport");function Xu(la,Oa,Zr,To){var xo,mo,gi,Mo,Io,Ca=Oa;ut||(ut=!0,Me&&ye.clearTimeout(Me),J=void 0,_e=To||"",Bn.readyState=la>0?4:0,xo=la>=200&&la<300||304===la,Zr&&(Mo=function($,P,q){for(var J,he,_e,De,Me=$.contents,Qe=$.dataTypes;"*"===Qe[0];)Qe.shift(),void 0===J&&(J=$.mimeType||P.getResponseHeader("Content-Type"));if(J)for(he in Me)if(Me[he]&&Me[he].test(J)){Qe.unshift(he);break}if(Qe[0]in q)_e=Qe[0];else{for(he in q){if(!Qe[0]||$.converters[he+" "+Qe[0]]){_e=he;break}De||(De=he)}_e=_e||De}if(_e)return _e!==Qe[0]&&Qe.unshift(_e),q[_e]}(vt,Bn,Zr)),!xo&&ee.inArray("script",vt.dataTypes)>-1&&ee.inArray("json",vt.dataTypes)<0&&(vt.converters["text script"]=function(){}),Mo=function($,P,q,J){var he,_e,De,Me,Qe,ut={},At=$.dataTypes.slice();if(At[1])for(De in $.converters)ut[De.toLowerCase()]=$.converters[De];for(_e=At.shift();_e;)if($.responseFields[_e]&&(q[$.responseFields[_e]]=P),!Qe&&J&&$.dataFilter&&(P=$.dataFilter(P,$.dataType)),Qe=_e,_e=At.shift())if("*"===_e)_e=Qe;else if("*"!==Qe&&Qe!==_e){if(!(De=ut[Qe+" "+_e]||ut["* "+_e]))for(he in ut)if((Me=he.split(" "))[1]===_e&&(De=ut[Qe+" "+Me[0]]||ut["* "+Me[0]])){!0===De?De=ut[he]:!0!==ut[he]&&(_e=Me[0],At.unshift(Me[1]));break}if(!0!==De)if(De&&$.throws)P=De(P);else try{P=De(P)}catch(sn){return{state:"parsererror",error:De?sn:"No conversion from "+Qe+" to "+_e}}}return{state:"success",data:P}}(vt,Mo,Bn,xo),xo?(vt.ifModified&&((Io=Bn.getResponseHeader("Last-Modified"))&&(ee.lastModified[he]=Io),(Io=Bn.getResponseHeader("etag"))&&(ee.etag[he]=Io)),204===la||"HEAD"===vt.type?Ca="nocontent":304===la?Ca="notmodified":(Ca=Mo.state,mo=Mo.data,xo=!(gi=Mo.error))):(gi=Ca,(la||!Ca)&&(Ca="error",la<0&&(la=0))),Bn.status=la,Bn.statusText=(Oa||Ca)+"",xo?hr.resolveWith(cn,[mo,Ca,Bn]):hr.rejectWith(cn,[Bn,Ca,gi]),Bn.statusCode(ja),ja=void 0,At&&Wn.trigger(xo?"ajaxSuccess":"ajaxError",[Bn,vt,xo?mo:gi]),Oi.fireWith(cn,[Bn,Ca]),At&&(Wn.trigger("ajaxComplete",[Bn,vt]),--ee.active||ee.event.trigger("ajaxStop")))}return Bn},getJSON:function(P,q,J){return ee.get(P,q,J,"json")},getScript:function(P,q){return ee.get(P,void 0,q,"script")}}),ee.each(["get","post"],function($,P){ee[P]=function(q,J,he,_e){return Ne(J)&&(_e=_e||he,he=J,J=void 0),ee.ajax(ee.extend({url:q,type:P,dataType:_e,data:J,success:he},ee.isPlainObject(q)&&q))}}),ee.ajaxPrefilter(function($){var P;for(P in $.headers)"content-type"===P.toLowerCase()&&($.contentType=$.headers[P]||"")}),ee._evalUrl=function($,P,q){return ee.ajax({url:$,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(he){ee.globalEval(he,P,q)}})},ee.fn.extend({wrapAll:function(P){var q;return this[0]&&(Ne(P)&&(P=P.call(this[0])),q=ee(P,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&q.insertBefore(this[0]),q.map(function(){for(var J=this;J.firstElementChild;)J=J.firstElementChild;return J}).append(this)),this},wrapInner:function(P){return Ne(P)?this.each(function(q){ee(this).wrapInner(P.call(this,q))}):this.each(function(){var q=ee(this),J=q.contents();J.length?J.wrapAll(P):q.append(P)})},wrap:function(P){var q=Ne(P);return this.each(function(J){ee(this).wrapAll(q?P.call(this,J):P)})},unwrap:function(P){return this.parent(P).not("body").each(function(){ee(this).replaceWith(this.childNodes)}),this}}),ee.expr.pseudos.hidden=function($){return!ee.expr.pseudos.visible($)},ee.expr.pseudos.visible=function($){return!!($.offsetWidth||$.offsetHeight||$.getClientRects().length)},ee.ajaxSettings.xhr=function(){try{return new ye.XMLHttpRequest}catch($){}};var ef={0:200,1223:204},vc=ee.ajaxSettings.xhr();be.cors=!!vc&&"withCredentials"in vc,be.ajax=vc=!!vc,ee.ajaxTransport(function($){var P,q;if(be.cors||vc&&!$.crossDomain)return{send:function(he,_e){var De,Me=$.xhr();if(Me.open($.type,$.url,$.async,$.username,$.password),$.xhrFields)for(De in $.xhrFields)Me[De]=$.xhrFields[De];for(De in $.mimeType&&Me.overrideMimeType&&Me.overrideMimeType($.mimeType),!$.crossDomain&&!he["X-Requested-With"]&&(he["X-Requested-With"]="XMLHttpRequest"),he)Me.setRequestHeader(De,he[De]);P=function(ut){return function(){P&&(P=q=Me.onload=Me.onerror=Me.onabort=Me.ontimeout=Me.onreadystatechange=null,"abort"===ut?Me.abort():"error"===ut?"number"!=typeof Me.status?_e(0,"error"):_e(Me.status,Me.statusText):_e(ef[Me.status]||Me.status,Me.statusText,"text"!==(Me.responseType||"text")||"string"!=typeof Me.responseText?{binary:Me.response}:{text:Me.responseText},Me.getAllResponseHeaders()))}},Me.onload=P(),q=Me.onerror=Me.ontimeout=P("error"),void 0!==Me.onabort?Me.onabort=q:Me.onreadystatechange=function(){4===Me.readyState&&ye.setTimeout(function(){P&&q()})},P=P("abort");try{Me.send($.hasContent&&$.data||null)}catch(Qe){if(P)throw Qe}},abort:function(){P&&P()}}}),ee.ajaxPrefilter(function($){$.crossDomain&&($.contents.script=!1)}),ee.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(P){return ee.globalEval(P),P}}}),ee.ajaxPrefilter("script",function($){void 0===$.cache&&($.cache=!1),$.crossDomain&&($.type="GET")}),ee.ajaxTransport("script",function($){var P,q;if($.crossDomain||$.scriptAttrs)return{send:function(he,_e){P=ee("<script>").attr($.scriptAttrs||{}).prop({charset:$.scriptCharset,src:$.url}).on("load error",q=function(Me){P.remove(),q=null,Me&&_e("error"===Me.type?404:200,Me.type)}),et.head.appendChild(P[0])},abort:function(){q&&q()}}});var $,ip=[],Bl=/(=)\?(?=&|$)|\?\?/;ee.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var P=ip.pop()||ee.expando+"_"+du.guid++;return this[P]=!0,P}}),ee.ajaxPrefilter("json jsonp",function($,P,q){var J,he,_e,De=!1!==$.jsonp&&(Bl.test($.url)?"url":"string"==typeof $.data&&0===($.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bl.test($.data)&&"data");if(De||"jsonp"===$.dataTypes[0])return J=$.jsonpCallback=Ne($.jsonpCallback)?$.jsonpCallback():$.jsonpCallback,De?$[De]=$[De].replace(Bl,"$1"+J):!1!==$.jsonp&&($.url+=(Yu.test($.url)?"&":"?")+$.jsonp+"="+J),$.converters["script json"]=function(){return _e||ee.error(J+" was not called"),_e[0]},$.dataTypes[0]="json",he=ye[J],ye[J]=function(){_e=arguments},q.always(function(){void 0===he?ee(ye).removeProp(J):ye[J]=he,$[J]&&($.jsonpCallback=P.jsonpCallback,ip.push(J)),_e&&Ne(he)&&he(_e[0]),_e=he=void 0}),"script"}),be.createHTMLDocument=(($=et.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$.childNodes.length),ee.parseHTML=function($,P,q){return"string"!=typeof $?[]:("boolean"==typeof P&&(q=P,P=!1),P||(be.createHTMLDocument?((J=(P=et.implementation.createHTMLDocument("")).createElement("base")).href=et.location.href,P.head.appendChild(J)):P=et),_e=!q&&[],(he=Bt.exec($))?[P.createElement(he[1])]:(he=Wo([$],P,_e),_e&&_e.length&&ee(_e).remove(),ee.merge([],he.childNodes)));var J,he,_e},ee.fn.load=function($,P,q){var J,he,_e,De=this,Me=$.indexOf(" ");return Me>-1&&(J=Ui($.slice(Me)),$=$.slice(0,Me)),Ne(P)?(q=P,P=void 0):P&&"object"==typeof P&&(he="POST"),De.length>0&&ee.ajax({url:$,type:he||"GET",dataType:"html",data:P}).done(function(Qe){_e=arguments,De.html(J?ee("<div>").append(ee.parseHTML(Qe)).find(J):Qe)}).always(q&&function(Qe,ut){De.each(function(){q.apply(this,_e||[Qe.responseText,ut,Qe])})}),this},ee.expr.pseudos.animated=function($){return ee.grep(ee.timers,function(P){return $===P.elem}).length},ee.offset={setOffset:function(P,q,J){var he,_e,De,Me,Qe,ut,sn=ee.css(P,"position"),an=ee(P),vt={};"static"===sn&&(P.style.position="relative"),Qe=an.offset(),De=ee.css(P,"top"),ut=ee.css(P,"left"),("absolute"===sn||"fixed"===sn)&&(De+ut).indexOf("auto")>-1?(Me=(he=an.position()).top,_e=he.left):(Me=parseFloat(De)||0,_e=parseFloat(ut)||0),Ne(q)&&(q=q.call(P,J,ee.extend({},Qe))),null!=q.top&&(vt.top=q.top-Qe.top+Me),null!=q.left&&(vt.left=q.left-Qe.left+_e),"using"in q?q.using.call(P,vt):an.css(vt)}},ee.fn.extend({offset:function(P){if(arguments.length)return void 0===P?this:this.each(function(_e){ee.offset.setOffset(this,P,_e)});var q,J,he=this[0];return he?he.getClientRects().length?{top:(q=he.getBoundingClientRect()).top+(J=he.ownerDocument.defaultView).pageYOffset,left:q.left+J.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var P,q,J,he=this[0],_e={top:0,left:0};if("fixed"===ee.css(he,"position"))q=he.getBoundingClientRect();else{for(q=this.offset(),J=he.ownerDocument,P=he.offsetParent||J.documentElement;P&&(P===J.body||P===J.documentElement)&&"static"===ee.css(P,"position");)P=P.parentNode;P&&P!==he&&1===P.nodeType&&((_e=ee(P).offset()).top+=ee.css(P,"borderTopWidth",!0),_e.left+=ee.css(P,"borderLeftWidth",!0))}return{top:q.top-_e.top-ee.css(he,"marginTop",!0),left:q.left-_e.left-ee.css(he,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var P=this.offsetParent;P&&"static"===ee.css(P,"position");)P=P.offsetParent;return P||Hs})}}),ee.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function($,P){var q="pageYOffset"===P;ee.fn[$]=function(J){return Ti(this,function(he,_e,De){var Me;if(He(he)?Me=he:9===he.nodeType&&(Me=he.defaultView),void 0===De)return Me?Me[P]:he[_e];Me?Me.scrollTo(q?Me.pageXOffset:De,q?De:Me.pageYOffset):he[_e]=De},$,J,arguments.length)}}),ee.each(["top","left"],function($,P){ee.cssHooks[P]=on(be.pixelPosition,function(q,J){if(J)return J=Jt(q,P),Je.test(J)?ee(q).position()[P]+"px":J})}),ee.each({Height:"height",Width:"width"},function($,P){ee.each({padding:"inner"+$,content:P,"":"outer"+$},function(q,J){ee.fn[J]=function(he,_e){var De=arguments.length&&(q||"boolean"!=typeof he),Me=q||(!0===he||!0===_e?"margin":"border");return Ti(this,function(Qe,ut,At){var sn;return He(Qe)?0===J.indexOf("outer")?Qe["inner"+$]:Qe.document.documentElement["client"+$]:9===Qe.nodeType?(sn=Qe.documentElement,Math.max(Qe.body["scroll"+$],sn["scroll"+$],Qe.body["offset"+$],sn["offset"+$],sn["client"+$])):void 0===At?ee.css(Qe,ut,Me):ee.style(Qe,ut,At,Me)},P,De?he:void 0,De)}})}),ee.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function($,P){ee.fn[P]=function(q){return this.on(P,q)}}),ee.fn.extend({bind:function(P,q,J){return this.on(P,null,q,J)},unbind:function(P,q){return this.off(P,null,q)},delegate:function(P,q,J,he){return this.on(q,P,J,he)},undelegate:function(P,q,J){return 1===arguments.length?this.off(P,"**"):this.off(q,P||"**",J)},hover:function(P,q){return this.mouseenter(P).mouseleave(q||P)}}),ee.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function($,P){ee.fn[P]=function(q,J){return arguments.length>0?this.on(P,null,q,J):this.trigger(P)}});var Di=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;ee.proxy=function($,P){var q,J,he;if("string"==typeof P&&(q=$[P],P=$,$=q),Ne($))return J=oe.call(arguments,2),(he=function(){return $.apply(P||this,J.concat(oe.call(arguments)))}).guid=$.guid=$.guid||ee.guid++,he},ee.holdReady=function($){$?ee.readyWait++:ee.ready(!0)},ee.isArray=Array.isArray,ee.parseJSON=JSON.parse,ee.nodeName=Rt,ee.isFunction=Ne,ee.isWindow=He,ee.camelCase=rs,ee.type=pt,ee.now=Date.now,ee.isNumeric=function($){var P=ee.type($);return("number"===P||"string"===P)&&!isNaN($-parseFloat($))},ee.trim=function($){return null==$?"":($+"").replace(Di,"")},void 0!==(Se=function(){return ee}.apply(Ct,[]))&&(vn.exports=Se);var Uf=ye.jQuery,ks=ye.$;return ee.noConflict=function($){return ye.$===ee&&(ye.$=ks),$&&ye.jQuery===ee&&(ye.jQuery=Uf),ee},void 0===R&&(ye.jQuery=ye.$=ee),ee})},3219:function(vn,Ct){!function(ne){"use strict";function ye(A){var y,D,N,Q;for(D=1,N=arguments.length;D<N;D++)for(y in Q=arguments[D])A[y]=Q[y];return A}var R=Object.create||function(){function A(){}return function(y){return A.prototype=y,new A}}();function M(A,y){var D=Array.prototype.slice;if(A.bind)return A.bind.apply(A,D.call(arguments,1));var N=D.call(arguments,2);return function(){return A.apply(y,N.length?N.concat(D.call(arguments)):arguments)}}var x=0;function oe(A){return"_leaflet_id"in A||(A._leaflet_id=++x),A._leaflet_id}function Ve(A,y,D){var N,Q,le,Ie;return Ie=function(){N=!1,Q&&(le.apply(D,Q),Q=!1)},le=function(){N?Q=arguments:(A.apply(D,arguments),setTimeout(Ie,y),N=!0)}}function Te(A,y,D){var N=y[1],Q=y[0],le=N-Q;return A===N&&D?A:((A-Q)%le+le)%le+Q}function v(){return!1}function Ae(A,y){if(!1===y)return A;var D=Math.pow(10,void 0===y?6:y);return Math.round(A*D)/D}function xe(A){return A.trim?A.trim():A.replace(/^\s+|\s+$/g,"")}function ce(A){return xe(A).split(/\s+/)}function Be(A,y){for(var D in Object.prototype.hasOwnProperty.call(A,"options")||(A.options=A.options?R(A.options):{}),y)A.options[D]=y[D];return A.options}function ae(A,y,D){var N=[];for(var Q in A)N.push(encodeURIComponent(D?Q.toUpperCase():Q)+"="+encodeURIComponent(A[Q]));return(y&&-1!==y.indexOf("?")?"&":"?")+N.join("&")}var be=/\{ *([\w_ -]+) *\}/g;function Ne(A,y){return A.replace(be,function(D,N){var Q=y[N];if(void 0===Q)throw new Error("No value provided for variable "+D);return"function"==typeof Q&&(Q=Q(y)),Q})}var He=Array.isArray||function(A){return"[object Array]"===Object.prototype.toString.call(A)};function et(A,y){for(var D=0;D<A.length;D++)if(A[D]===y)return D;return-1}var tt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function We(A){return window["webkit"+A]||window["moz"+A]||window["ms"+A]}var pt=0;function lt(A){var y=+new Date,D=Math.max(0,16-(y-pt));return pt=y+D,window.setTimeout(A,D)}var ee=window.requestAnimationFrame||We("RequestAnimationFrame")||lt,Dn=window.cancelAnimationFrame||We("CancelAnimationFrame")||We("CancelRequestAnimationFrame")||function(A){window.clearTimeout(A)};function mn(A,y,D){if(!D||ee!==lt)return ee.call(window,M(A,y));A.call(y)}function nn(A){A&&Dn.call(window,A)}var Vt={__proto__:null,extend:ye,create:R,bind:M,get lastId(){return x},stamp:oe,throttle:Ve,wrapNum:Te,falseFn:v,formatNum:Ae,trim:xe,splitWords:ce,setOptions:Be,getParamString:ae,template:Ne,isArray:He,indexOf:et,emptyImageUrl:tt,requestFn:ee,cancelFn:Dn,requestAnimFrame:mn,cancelAnimFrame:nn};function Nt(){}Nt.extend=function(A){var y=function(){Be(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},D=y.__super__=this.prototype,N=R(D);for(var Q in N.constructor=y,y.prototype=N,this)Object.prototype.hasOwnProperty.call(this,Q)&&"prototype"!==Q&&"__super__"!==Q&&(y[Q]=this[Q]);return A.statics&&ye(y,A.statics),A.includes&&(function(A){if("undefined"!=typeof L&&L&&L.Mixin){A=He(A)?A:[A];for(var y=0;y<A.length;y++)A[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(A.includes),ye.apply(null,[N].concat(A.includes))),ye(N,A),delete N.statics,delete N.includes,N.options&&(N.options=D.options?R(D.options):{},ye(N.options,A.options)),N._initHooks=[],N.callInitHooks=function(){if(!this._initHooksCalled){D.callInitHooks&&D.callInitHooks.call(this),this._initHooksCalled=!0;for(var le=0,Ie=N._initHooks.length;le<Ie;le++)N._initHooks[le].call(this)}},y},Nt.include=function(A){var y=this.prototype.options;return ye(this.prototype,A),A.options&&(this.prototype.options=y,this.mergeOptions(A.options)),this},Nt.mergeOptions=function(A){return ye(this.prototype.options,A),this},Nt.addInitHook=function(A){var y=Array.prototype.slice.call(arguments,1),D="function"==typeof A?A:function(){this[A].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(D),this};var Bt={on:function(y,D,N){if("object"==typeof y)for(var Q in y)this._on(Q,y[Q],D);else for(var le=0,Ie=(y=ce(y)).length;le<Ie;le++)this._on(y[le],D,N);return this},off:function(y,D,N){if(arguments.length)if("object"==typeof y)for(var Q in y)this._off(Q,y[Q],D);else{y=ce(y);for(var le=1===arguments.length,Ie=0,it=y.length;Ie<it;Ie++)le?this._off(y[Ie]):this._off(y[Ie],D,N)}else delete this._events;return this},_on:function(y,D,N,Q){if("function"==typeof D){if(!1===this._listens(y,D,N)){N===this&&(N=void 0);var le={fn:D,ctx:N};Q&&(le.once=!0),this._events=this._events||{},this._events[y]=this._events[y]||[],this._events[y].push(le)}}else console.warn("wrong listener type: "+typeof D)},_off:function(y,D,N){var Q,le,Ie;if(this._events&&(Q=this._events[y])){if(1===arguments.length){if(this._firingCount)for(le=0,Ie=Q.length;le<Ie;le++)Q[le].fn=v;return void delete this._events[y]}if("function"!=typeof D)return void console.warn("wrong listener type: "+typeof D);var it=this._listens(y,D,N);!1!==it&&(this._firingCount&&(Q[it].fn=v,this._events[y]=Q=Q.slice()),Q.splice(it,1))}},fire:function(y,D,N){if(!this.listens(y,N))return this;var Q=ye({},D,{type:y,target:this,sourceTarget:D&&D.sourceTarget||this});if(this._events){var le=this._events[y];if(le){this._firingCount=this._firingCount+1||1;for(var Ie=0,it=le.length;Ie<it;Ie++){var Mt=le[Ie],Ht=Mt.fn;Mt.once&&this.off(y,Ht,Mt.ctx),Ht.call(Mt.ctx||this,Q)}this._firingCount--}}return N&&this._propagateEvent(Q),this},listens:function(y,D,N,Q){"string"!=typeof y&&console.warn('"string" type argument expected');var le=D;"function"!=typeof D&&(Q=!!D,le=void 0,N=void 0);var Ie=this._events&&this._events[y];if(Ie&&Ie.length&&!1!==this._listens(y,le,N))return!0;if(Q)for(var it in this._eventParents)if(this._eventParents[it].listens(y,D,N,Q))return!0;return!1},_listens:function(y,D,N){if(!this._events)return!1;var Q=this._events[y]||[];if(!D)return!!Q.length;N===this&&(N=void 0);for(var le=0,Ie=Q.length;le<Ie;le++)if(Q[le].fn===D&&Q[le].ctx===N)return le;return!1},once:function(y,D,N){if("object"==typeof y)for(var Q in y)this._on(Q,y[Q],D,!0);else for(var le=0,Ie=(y=ce(y)).length;le<Ie;le++)this._on(y[le],D,N,!0);return this},addEventParent:function(y){return this._eventParents=this._eventParents||{},this._eventParents[oe(y)]=y,this},removeEventParent:function(y){return this._eventParents&&delete this._eventParents[oe(y)],this},_propagateEvent:function(y){for(var D in this._eventParents)this._eventParents[D].fire(y.type,ye({layer:y.target,propagatedFrom:y.target},y),!0)}};Bt.addEventListener=Bt.on,Bt.removeEventListener=Bt.clearAllEventListeners=Bt.off,Bt.addOneTimeEventListener=Bt.once,Bt.fireEvent=Bt.fire,Bt.hasEventListeners=Bt.listens;var K=Nt.extend(Bt);function k(A,y,D){this.x=D?Math.round(A):A,this.y=D?Math.round(y):y}var j=Math.trunc||function(A){return A>0?Math.floor(A):Math.ceil(A)};function ie(A,y,D){return A instanceof k?A:He(A)?new k(A[0],A[1]):null==A?A:"object"==typeof A&&"x"in A&&"y"in A?new k(A.x,A.y):new k(A,y,D)}function we(A,y){if(A)for(var D=y?[A,y]:A,N=0,Q=D.length;N<Q;N++)this.extend(D[N])}function Le(A,y){return!A||A instanceof we?A:new we(A,y)}function at(A,y){if(A)for(var D=y?[A,y]:A,N=0,Q=D.length;N<Q;N++)this.extend(D[N])}function bt(A,y){return A instanceof at?A:new at(A,y)}function nt(A,y,D){if(isNaN(A)||isNaN(y))throw new Error("Invalid LatLng object: ("+A+", "+y+")");this.lat=+A,this.lng=+y,void 0!==D&&(this.alt=+D)}function Ot(A,y,D){return A instanceof nt?A:He(A)&&"object"!=typeof A[0]?3===A.length?new nt(A[0],A[1],A[2]):2===A.length?new nt(A[0],A[1]):null:null==A?A:"object"==typeof A&&"lat"in A?new nt(A.lat,"lng"in A?A.lng:A.lon,A.alt):void 0===y?null:new nt(A,y,D)}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(y){return this.clone()._add(ie(y))},_add:function(y){return this.x+=y.x,this.y+=y.y,this},subtract:function(y){return this.clone()._subtract(ie(y))},_subtract:function(y){return this.x-=y.x,this.y-=y.y,this},divideBy:function(y){return this.clone()._divideBy(y)},_divideBy:function(y){return this.x/=y,this.y/=y,this},multiplyBy:function(y){return this.clone()._multiplyBy(y)},_multiplyBy:function(y){return this.x*=y,this.y*=y,this},scaleBy:function(y){return new k(this.x*y.x,this.y*y.y)},unscaleBy:function(y){return new k(this.x/y.x,this.y/y.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(y){var D=(y=ie(y)).x-this.x,N=y.y-this.y;return Math.sqrt(D*D+N*N)},equals:function(y){return(y=ie(y)).x===this.x&&y.y===this.y},contains:function(y){return y=ie(y),Math.abs(y.x)<=Math.abs(this.x)&&Math.abs(y.y)<=Math.abs(this.y)},toString:function(){return"Point("+Ae(this.x)+", "+Ae(this.y)+")"}},we.prototype={extend:function(y){var D,N;if(!y)return this;if(y instanceof k||"number"==typeof y[0]||"x"in y)D=N=ie(y);else if(N=(y=Le(y)).max,!(D=y.min)||!N)return this;return this.min||this.max?(this.min.x=Math.min(D.x,this.min.x),this.max.x=Math.max(N.x,this.max.x),this.min.y=Math.min(D.y,this.min.y),this.max.y=Math.max(N.y,this.max.y)):(this.min=D.clone(),this.max=N.clone()),this},getCenter:function(y){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,y)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(y){var D,N;return(y="number"==typeof y[0]||y instanceof k?ie(y):Le(y))instanceof we?(D=y.min,N=y.max):D=N=y,D.x>=this.min.x&&N.x<=this.max.x&&D.y>=this.min.y&&N.y<=this.max.y},intersects:function(y){y=Le(y);var D=this.min,N=this.max,Q=y.min,le=y.max;return le.x>=D.x&&Q.x<=N.x&&le.y>=D.y&&Q.y<=N.y},overlaps:function(y){y=Le(y);var D=this.min,N=this.max,Q=y.min,le=y.max;return le.x>D.x&&Q.x<N.x&&le.y>D.y&&Q.y<N.y},isValid:function(){return!(!this.min||!this.max)},pad:function(y){var D=this.min,N=this.max,Q=Math.abs(D.x-N.x)*y,le=Math.abs(D.y-N.y)*y;return Le(ie(D.x-Q,D.y-le),ie(N.x+Q,N.y+le))},equals:function(y){return!!y&&(y=Le(y),this.min.equals(y.getTopLeft())&&this.max.equals(y.getBottomRight()))}},at.prototype={extend:function(y){var Q,le,D=this._southWest,N=this._northEast;if(y instanceof nt)Q=y,le=y;else{if(!(y instanceof at))return y?this.extend(Ot(y)||bt(y)):this;if(le=y._northEast,!(Q=y._southWest)||!le)return this}return D||N?(D.lat=Math.min(Q.lat,D.lat),D.lng=Math.min(Q.lng,D.lng),N.lat=Math.max(le.lat,N.lat),N.lng=Math.max(le.lng,N.lng)):(this._southWest=new nt(Q.lat,Q.lng),this._northEast=new nt(le.lat,le.lng)),this},pad:function(y){var D=this._southWest,N=this._northEast,Q=Math.abs(D.lat-N.lat)*y,le=Math.abs(D.lng-N.lng)*y;return new at(new nt(D.lat-Q,D.lng-le),new nt(N.lat+Q,N.lng+le))},getCenter:function(){return new nt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new nt(this.getNorth(),this.getWest())},getSouthEast:function(){return new nt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(y){y="number"==typeof y[0]||y instanceof nt||"lat"in y?Ot(y):bt(y);var Q,le,D=this._southWest,N=this._northEast;return y instanceof at?(Q=y.getSouthWest(),le=y.getNorthEast()):Q=le=y,Q.lat>=D.lat&&le.lat<=N.lat&&Q.lng>=D.lng&&le.lng<=N.lng},intersects:function(y){y=bt(y);var D=this._southWest,N=this._northEast,Q=y.getSouthWest(),le=y.getNorthEast();return le.lat>=D.lat&&Q.lat<=N.lat&&le.lng>=D.lng&&Q.lng<=N.lng},overlaps:function(y){y=bt(y);var D=this._southWest,N=this._northEast,Q=y.getSouthWest(),le=y.getNorthEast();return le.lat>D.lat&&Q.lat<N.lat&&le.lng>D.lng&&Q.lng<N.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(y,D){return!!y&&(y=bt(y),this._southWest.equals(y.getSouthWest(),D)&&this._northEast.equals(y.getNorthEast(),D))},isValid:function(){return!(!this._southWest||!this._northEast)}},nt.prototype={equals:function(y,D){return!!y&&(y=Ot(y),Math.max(Math.abs(this.lat-y.lat),Math.abs(this.lng-y.lng))<=(void 0===D?1e-9:D))},toString:function(y){return"LatLng("+Ae(this.lat,y)+", "+Ae(this.lng,y)+")"},distanceTo:function(y){return rr.distance(this,Ot(y))},wrap:function(){return rr.wrapLatLng(this)},toBounds:function(y){var D=180*y/40075017,N=D/Math.cos(Math.PI/180*this.lat);return bt([this.lat-D,this.lng-N],[this.lat+D,this.lng+N])},clone:function(){return new nt(this.lat,this.lng,this.alt)}};var A,On={latLngToPoint:function(y,D){var N=this.projection.project(y),Q=this.scale(D);return this.transformation._transform(N,Q)},pointToLatLng:function(y,D){var N=this.scale(D),Q=this.transformation.untransform(y,N);return this.projection.unproject(Q)},project:function(y){return this.projection.project(y)},unproject:function(y){return this.projection.unproject(y)},scale:function(y){return 256*Math.pow(2,y)},zoom:function(y){return Math.log(y/256)/Math.LN2},getProjectedBounds:function(y){if(this.infinite)return null;var D=this.projection.bounds,N=this.scale(y);return new we(this.transformation.transform(D.min,N),this.transformation.transform(D.max,N))},infinite:!1,wrapLatLng:function(y){var D=this.wrapLng?Te(y.lng,this.wrapLng,!0):y.lng;return new nt(this.wrapLat?Te(y.lat,this.wrapLat,!0):y.lat,D,y.alt)},wrapLatLngBounds:function(y){var D=y.getCenter(),N=this.wrapLatLng(D),Q=D.lat-N.lat,le=D.lng-N.lng;if(0===Q&&0===le)return y;var Ie=y.getSouthWest(),it=y.getNorthEast();return new at(new nt(Ie.lat-Q,Ie.lng-le),new nt(it.lat-Q,it.lng-le))}},rr=ye({},On,{wrapLng:[-180,180],R:6371e3,distance:function(y,D){var N=Math.PI/180,Q=y.lat*N,le=D.lat*N,Ie=Math.sin((D.lat-y.lat)*N/2),it=Math.sin((D.lng-y.lng)*N/2),Mt=Ie*Ie+Math.cos(Q)*Math.cos(le)*it*it,Ht=2*Math.atan2(Math.sqrt(Mt),Math.sqrt(1-Mt));return this.R*Ht}}),mi={R:6378137,MAX_LATITUDE:85.0511287798,project:function(y){var D=Math.PI/180,N=this.MAX_LATITUDE,Q=Math.max(Math.min(N,y.lat),-N),le=Math.sin(Q*D);return new k(this.R*y.lng*D,this.R*Math.log((1+le)/(1-le))/2)},unproject:function(y){var D=180/Math.PI;return new nt((2*Math.atan(Math.exp(y.y/this.R))-Math.PI/2)*D,y.x*D/this.R)},bounds:(A=6378137*Math.PI,new we([-A,-A],[A,A]))};function ji(A,y,D,N){if(He(A))return this._a=A[0],this._b=A[1],this._c=A[2],void(this._d=A[3]);this._a=A,this._b=y,this._c=D,this._d=N}function Ti(A,y,D,N){return new ji(A,y,D,N)}ji.prototype={transform:function(y,D){return this._transform(y.clone(),D)},_transform:function(y,D){return y.x=(D=D||1)*(this._a*y.x+this._b),y.y=D*(this._c*y.y+this._d),y},untransform:function(y,D){return new k((y.x/(D=D||1)-this._b)/this._a,(y.y/D-this._d)/this._c)}};var jo=ye({},rr,{code:"EPSG:3857",projection:mi,transformation:function(){var A=.5/(Math.PI*mi.R);return Ti(A,.5,-A,.5)}()}),pc=ye({},jo,{code:"EPSG:900913"});function So(A){return document.createElementNS("http://www.w3.org/2000/svg",A)}function rs(A,y){var N,Q,le,Ie,it,Mt,D="";for(N=0,le=A.length;N<le;N++){for(Q=0,Ie=(it=A[N]).length;Q<Ie;Q++)D+=(Q?"L":"M")+(Mt=it[Q]).x+" "+Mt.y;D+=y?In.svg?"z":"x":""}return D||"M0 0"}var bi=document.documentElement.style,Ir="ActiveXObject"in window,or=Ir&&!document.addEventListener,Ma="msLaunchUri"in navigator&&!("documentMode"in document),ml=ai("webkit"),Xr=ai("android"),Ia=ai("android 2")||ai("android 3"),Qs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ls=Xr&&ai("Google")&&Qs<537&&!("AudioNode"in window),Es=!!window.opera,ia=!Ma&&ai("chrome"),Hs=ai("gecko")&&!ml&&!Es&&!Ir,aa=!ia&&ai("safari"),sa=ai("phantom"),is="OTransition"in bi,Er=0===navigator.platform.indexOf("Win"),ur=Ir&&"transition"in bi,jn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ia,ri="MozPerspective"in bi,pi=!window.L_DISABLE_3D&&(ur||jn||ri)&&!is&&!sa,ii="undefined"!=typeof orientation||ai("mobile"),Or=ii&&ml,lr=ii&&jn,Wi=!window.PointerEvent&&window.MSPointerEvent,cs=!(!window.PointerEvent&&!Wi),Rs="ontouchstart"in window||!!window.TouchEvent,Wo=!window.L_NO_TOUCH&&(Rs||cs),wa=ii&&Es,Zi=ii&&Hs,Tt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Et=function(){var A=!1;try{var y=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("testPassiveEventSupport",v,y),window.removeEventListener("testPassiveEventSupport",v,y)}catch(D){}return A}(),ot=!!document.createElement("canvas").getContext,gt=!(!document.createElementNS||!So("svg").createSVGRect),Yt=!!gt&&function(){var A=document.createElement("div");return A.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(A.firstChild&&A.firstChild.namespaceURI)}();function ai(A){return navigator.userAgent.toLowerCase().indexOf(A)>=0}var In={ie:Ir,ielt9:or,edge:Ma,webkit:ml,android:Xr,android23:Ia,androidStock:ls,opera:Es,chrome:ia,gecko:Hs,safari:aa,phantom:sa,opera12:is,win:Er,ie3d:ur,webkit3d:jn,gecko3d:ri,any3d:pi,mobile:ii,mobileWebkit:Or,mobileWebkit3d:lr,msPointer:Wi,pointer:cs,touch:Wo,touchNative:Rs,mobileOpera:wa,mobileGecko:Zi,retina:Tt,passiveEvents:Et,canvas:ot,svg:gt,vml:!gt&&function(){try{var A=document.createElement("div");A.innerHTML='<v:shape adj="1"/>';var y=A.firstChild;return y.style.behavior="url(#default#VML)",y&&"object"==typeof y.adj}catch(D){return!1}}(),inlineSvg:Yt,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},xi=In.msPointer?"MSPointerDown":"pointerdown",oa=In.msPointer?"MSPointerMove":"pointermove",Ga=In.msPointer?"MSPointerUp":"pointerup",wt=In.msPointer?"MSPointerCancel":"pointercancel",Ft={touchstart:xi,touchmove:oa,touchend:Ga,touchcancel:wt},Je={touchstart:function(A,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Zs(y),Mi(A,y)},touchmove:Mi,touchend:Mi,touchcancel:Mi},$e={},kt=!1;function rn(A,y,D){return"touchstart"===y&&(kt||(document.addEventListener(xi,on,!0),document.addEventListener(oa,Tn,!0),document.addEventListener(Ga,cr,!0),document.addEventListener(wt,cr,!0),kt=!0)),Je[y]?(D=Je[y].bind(this,D),A.addEventListener(Ft[y],D,!1),D):(console.warn("wrong event specified:",y),v)}function on(A){$e[A.pointerId]=A}function Tn(A){$e[A.pointerId]&&($e[A.pointerId]=A)}function cr(A){delete $e[A.pointerId]}function Mi(A,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){for(var D in y.touches=[],$e)y.touches.push($e[D]);y.changedTouches=[y],A(y)}}var vi,qu,sh,Yu,pu,Nl=Ls(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ea=Ls(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Zn="webkitTransition"===Ea||"OTransition"===Ea?Ea+"End":"transitionend";function Dr(A){return"string"==typeof A?document.getElementById(A):A}function Ii(A,y){var D=A.style[y]||A.currentStyle&&A.currentStyle[y];if((!D||"auto"===D)&&document.defaultView){var N=document.defaultView.getComputedStyle(A,null);D=N?N[y]:null}return"auto"===D?null:D}function ir(A,y,D){var N=document.createElement(A);return N.className=y||"",D&&D.appendChild(N),N}function Ri(A){var y=A.parentNode;y&&y.removeChild(A)}function Fa(A){for(;A.firstChild;)A.removeChild(A.firstChild)}function Gs(A){var y=A.parentNode;y&&y.lastChild!==A&&y.appendChild(A)}function ua(A){var y=A.parentNode;y&&y.firstChild!==A&&y.insertBefore(A,y.firstChild)}function xu(A,y){if(void 0!==A.classList)return A.classList.contains(y);var D=Ka(A);return D.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(D)}function Lr(A,y){if(void 0!==A.classList)for(var D=ce(y),N=0,Q=D.length;N<Q;N++)A.classList.add(D[N]);else if(!xu(A,y)){var le=Ka(A);Zl(A,(le?le+" ":"")+y)}}function $n(A,y){void 0!==A.classList?A.classList.remove(y):Zl(A,xe((" "+Ka(A)+" ").replace(" "+y+" "," ")))}function Zl(A,y){void 0===A.className.baseVal?A.className=y:A.className.baseVal=y}function Ka(A){return A.correspondingElement&&(A=A.correspondingElement),void 0===A.className.baseVal?A.className:A.className.baseVal}function as(A,y){"opacity"in A.style?A.style.opacity=y:"filter"in A.style&&function(A,y){var D=!1,N="DXImageTransform.Microsoft.Alpha";try{D=A.filters.item(N)}catch(Q){if(1===y)return}y=Math.round(100*y),D?(D.Enabled=100!==y,D.Opacity=y):A.style.filter+=" progid:"+N+"(opacity="+y+")"}(A,y)}function Ls(A){for(var y=document.documentElement.style,D=0;D<A.length;D++)if(A[D]in y)return A[D];return!1}function Ra(A,y,D){var N=y||new k(0,0);A.style[Nl]=(In.ie3d?"translate("+N.x+"px,"+N.y+"px)":"translate3d("+N.x+"px,"+N.y+"px,0)")+(D?" scale("+D+")":"")}function Ui(A,y){A._leaflet_pos=y,In.any3d?Ra(A,y):(A.style.left=y.x+"px",A.style.top=y.y+"px")}function ya(A){return A._leaflet_pos||new k(0,0)}if("onselectstart"in document)vi=function(){Nr(window,"selectstart",Zs)},qu=function(){Gr(window,"selectstart",Zs)};else{var fu=Ls(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);vi=function(){if(fu){var y=document.documentElement.style;sh=y[fu],y[fu]="none"}},qu=function(){fu&&(document.documentElement.style[fu]=sh,sh=void 0)}}function gl(){Nr(window,"dragstart",Zs)}function du(){Gr(window,"dragstart",Zs)}function fs(A){for(;-1===A.tabIndex;)A=A.parentNode;!A.style||(Pc(),Yu=A,pu=A.style.outlineStyle,A.style.outlineStyle="none",Nr(window,"keydown",Pc))}function Pc(){!Yu||(Yu.style.outlineStyle=pu,Yu=void 0,pu=void 0,Gr(window,"keydown",Pc))}function $a(A){do{A=A.parentNode}while(!(A.offsetWidth&&A.offsetHeight||A===document.body));return A}function Ns(A){var y=A.getBoundingClientRect();return{x:y.width/A.offsetWidth||1,y:y.height/A.offsetHeight||1,boundingClientRect:y}}var $h={__proto__:null,TRANSFORM:Nl,TRANSITION:Ea,TRANSITION_END:Zn,get:Dr,getStyle:Ii,create:ir,remove:Ri,empty:Fa,toFront:Gs,toBack:ua,hasClass:xu,addClass:Lr,removeClass:$n,setClass:Zl,getClass:Ka,setOpacity:as,testProp:Ls,setTransform:Ra,setPosition:Ui,getPosition:ya,get disableTextSelection(){return vi},get enableTextSelection(){return qu},disableImageDrag:gl,enableImageDrag:du,preventOutline:fs,restoreOutline:Pc,getSizedParentNode:$a,getScale:Ns};function Nr(A,y,D,N){if(y&&"object"==typeof y)for(var Q in y)Ku(A,Q,y[Q],D);else for(var le=0,Ie=(y=ce(y)).length;le<Ie;le++)Ku(A,y[le],D,N);return this}var po="_leaflet_events";function Gr(A,y,D,N){if(1===arguments.length)oh(A),delete A[po];else if(y&&"object"==typeof y)for(var Q in y)uh(A,Q,y[Q],D);else if(y=ce(y),2===arguments.length)oh(A,function(it){return-1!==et(y,it)});else for(var le=0,Ie=y.length;le<Ie;le++)uh(A,y[le],D,N);return this}function oh(A,y){for(var D in A[po]){var N=D.split(/\d/)[0];(!y||y(N))&&uh(A,N,null,null,D)}}var Bf={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ku(A,y,D,N){var Q=y+oe(D)+(N?"_"+oe(N):"");if(A[po]&&A[po][Q])return this;var le=function(Mt){return D.call(N||A,Mt||window.event)},Ie=le;!In.touchNative&&In.pointer&&0===y.indexOf("touch")?le=rn(A,y,le):In.touch&&"dblclick"===y?le=function(A,y){A.addEventListener("dblclick",y);var N,D=0;function Q(le){if(1===le.detail){if("mouse"!==le.pointerType&&(!le.sourceCapabilities||le.sourceCapabilities.firesTouchEvents)){var Ie=Qh(le);if(!Ie.some(function(Mt){return Mt instanceof HTMLLabelElement&&Mt.attributes.for})||Ie.some(function(Mt){return Mt instanceof HTMLInputElement||Mt instanceof HTMLSelectElement})){var it=Date.now();it-D<=200?2==++N&&y(function(A){var D,N,y={};for(N in A)y[N]=(D=A[N])&&D.bind?D.bind(A):D;return A=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}(le)):N=1,D=it}}}else N=le.detail}return A.addEventListener("click",Q),{dblclick:y,simDblclick:Q}}(A,le):"addEventListener"in A?"touchstart"===y||"touchmove"===y||"wheel"===y||"mousewheel"===y?A.addEventListener(Bf[y]||y,le,!!In.passiveEvents&&{passive:!1}):"mouseenter"===y||"mouseleave"===y?A.addEventListener(Bf[y],le=function(Mt){Mt=Mt||window.event,vc(A,Mt)&&Ie(Mt)},!1):A.addEventListener(y,Ie,!1):A.attachEvent("on"+y,le),A[po]=A[po]||{},A[po][Q]=le}function uh(A,y,D,N,Q){Q=Q||y+oe(D)+(N?"_"+oe(N):"");var le=A[po]&&A[po][Q];if(!le)return this;!In.touchNative&&In.pointer&&0===y.indexOf("touch")?function(A,y,D){Ft[y]?A.removeEventListener(Ft[y],D,!1):console.warn("wrong event specified:",y)}(A,y,le):In.touch&&"dblclick"===y?function(A,y){A.removeEventListener("dblclick",y.dblclick),A.removeEventListener("click",y.simDblclick)}(A,le):"removeEventListener"in A?A.removeEventListener(Bf[y]||y,le,!1):A.detachEvent("on"+y,le),A[po][Q]=null}function vu(A){return A.stopPropagation?A.stopPropagation():A.originalEvent?A.originalEvent._stopped=!0:A.cancelBubble=!0,this}function Xh(A){return Ku(A,"wheel",vu),this}function yl(A){return Nr(A,"mousedown touchstart dblclick contextmenu",vu),A._leaflet_disable_click=!0,this}function Zs(A){return A.preventDefault?A.preventDefault():A.returnValue=!1,this}function $u(A){return Zs(A),vu(A),this}function Qh(A){if(A.composedPath)return A.composedPath();for(var y=[],D=A.target;D;)y.push(D),D=D.parentNode;return y}function rp(A,y){if(!y)return new k(A.clientX,A.clientY);var D=Ns(y),N=D.boundingClientRect;return new k((A.clientX-N.left)/D.x-y.clientLeft,(A.clientY-N.top)/D.y-y.clientTop)}var Jh=In.linux&&In.chrome?window.devicePixelRatio:In.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ef(A){return In.edge?A.wheelDeltaY/2:A.deltaY&&0===A.deltaMode?-A.deltaY/Jh:A.deltaY&&1===A.deltaMode?20*-A.deltaY:A.deltaY&&2===A.deltaMode?60*-A.deltaY:A.deltaX||A.deltaZ?0:A.wheelDelta?(A.wheelDeltaY||A.wheelDelta)/2:A.detail&&Math.abs(A.detail)<32765?20*-A.detail:A.detail?A.detail/-32765*60:0}function vc(A,y){var D=y.relatedTarget;if(!D)return!0;try{for(;D&&D!==A;)D=D.parentNode}catch(N){return!1}return D!==A}var ip={__proto__:null,on:Nr,off:Gr,stopPropagation:vu,disableScrollPropagation:Xh,disableClickPropagation:yl,preventDefault:Zs,stop:$u,getPropagationPath:Qh,getMousePosition:rp,getWheelDelta:ef,isExternalTarget:vc,addListener:Nr,removeListener:Gr},Bl=K.extend({run:function(y,D,N,Q){this.stop(),this._el=y,this._inProgress=!0,this._duration=N||.25,this._easeOutPower=1/Math.max(Q||.5,.2),this._startPos=ya(y),this._offset=D.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=mn(this._animate,this),this._step()},_step:function(y){var D=+new Date-this._startTime,N=1e3*this._duration;D<N?this._runFrame(this._easeOut(D/N),y):(this._runFrame(1),this._complete())},_runFrame:function(y,D){var N=this._startPos.add(this._offset.multiplyBy(y));D&&N._round(),Ui(this._el,N),this.fire("step")},_complete:function(){nn(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(y){return 1-Math.pow(1-y,this._easeOutPower)}}),Di=K.extend({options:{crs:jo,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(y,D){D=Be(this,D),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(y),this._initLayout(),this._onResize=M(this._onResize,this),this._initEvents(),D.maxBounds&&this.setMaxBounds(D.maxBounds),void 0!==D.zoom&&(this._zoom=this._limitZoom(D.zoom)),D.center&&void 0!==D.zoom&&this.setView(Ot(D.center),D.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ea&&In.any3d&&!In.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nr(this._proxy,Zn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(y,D,N){return D=void 0===D?this._zoom:this._limitZoom(D),y=this._limitCenter(Ot(y),D,this.options.maxBounds),N=N||{},this._stop(),this._loaded&&!N.reset&&!0!==N&&(void 0!==N.animate&&(N.zoom=ye({animate:N.animate},N.zoom),N.pan=ye({animate:N.animate,duration:N.duration},N.pan)),this._zoom!==D?this._tryAnimatedZoom&&this._tryAnimatedZoom(y,D,N.zoom):this._tryAnimatedPan(y,N.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(y,D,N.pan&&N.pan.noMoveStart),this)},setZoom:function(y,D){return this._loaded?this.setView(this.getCenter(),y,{zoom:D}):(this._zoom=y,this)},zoomIn:function(y,D){return this.setZoom(this._zoom+(y=y||(In.any3d?this.options.zoomDelta:1)),D)},zoomOut:function(y,D){return this.setZoom(this._zoom-(y=y||(In.any3d?this.options.zoomDelta:1)),D)},setZoomAround:function(y,D,N){var Q=this.getZoomScale(D),le=this.getSize().divideBy(2),it=(y instanceof k?y:this.latLngToContainerPoint(y)).subtract(le).multiplyBy(1-1/Q),Mt=this.containerPointToLatLng(le.add(it));return this.setView(Mt,D,{zoom:N})},_getBoundsCenterZoom:function(y,D){D=D||{},y=y.getBounds?y.getBounds():bt(y);var N=ie(D.paddingTopLeft||D.padding||[0,0]),Q=ie(D.paddingBottomRight||D.padding||[0,0]),le=this.getBoundsZoom(y,!1,N.add(Q));if((le="number"==typeof D.maxZoom?Math.min(D.maxZoom,le):le)===1/0)return{center:y.getCenter(),zoom:le};var Ie=Q.subtract(N).divideBy(2),it=this.project(y.getSouthWest(),le),Mt=this.project(y.getNorthEast(),le);return{center:this.unproject(it.add(Mt).divideBy(2).add(Ie),le),zoom:le}},fitBounds:function(y,D){if(!(y=bt(y)).isValid())throw new Error("Bounds are not valid.");var N=this._getBoundsCenterZoom(y,D);return this.setView(N.center,N.zoom,D)},fitWorld:function(y){return this.fitBounds([[-90,-180],[90,180]],y)},panTo:function(y,D){return this.setView(y,this._zoom,{pan:D})},panBy:function(y,D){if(D=D||{},!(y=ie(y).round()).x&&!y.y)return this.fire("moveend");if(!0!==D.animate&&!this.getSize().contains(y))return this._resetView(this.unproject(this.project(this.getCenter()).add(y)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Bl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),D.noMoveStart||this.fire("movestart"),!1!==D.animate){Lr(this._mapPane,"leaflet-pan-anim");var N=this._getMapPanePos().subtract(y).round();this._panAnim.run(this._mapPane,N,D.duration||.25,D.easeLinearity)}else this._rawPanBy(y),this.fire("move").fire("moveend");return this},flyTo:function(y,D,N){if(!1===(N=N||{}).animate||!In.any3d)return this.setView(y,D,N);this._stop();var Q=this.project(this.getCenter()),le=this.project(y),Ie=this.getSize(),it=this._zoom;y=Ot(y),D=void 0===D?it:D;var Mt=Math.max(Ie.x,Ie.y),Ht=Mt*this.getZoomScale(it,D),wn=le.distanceTo(Q)||1,dr=1.42,Br=dr*dr;function fa(Ss){var Hf=(Ht*Ht-Mt*Mt+(Ss?-1:1)*Br*Br*wn*wn)/(2*(Ss?Ht:Mt)*Br*wn),Oc=Math.sqrt(Hf*Hf+1)-Hf;return Oc<1e-9?-18:Math.log(Oc)}function da(Ss){return(Math.exp(Ss)-Math.exp(-Ss))/2}function Xa(Ss){return(Math.exp(Ss)+Math.exp(-Ss))/2}var Iu=fa(0);function eo(Ss){return Mt*(Xa(Iu)*function(Ss){return da(Ss)/Xa(Ss)}(Iu+dr*Ss)-da(Iu))/Br}var s0=Date.now(),el=(fa(1)-Iu)/dr,fv=N.duration?1e3*N.duration:1e3*el*.8;return this._moveStart(!0,N.noMoveStart),function dv(){var Ss=(Date.now()-s0)/fv,sp=function(Ss){return 1-Math.pow(1-Ss,1.5)}(Ss)*el;Ss<=1?(this._flyToFrame=mn(dv,this),this._move(this.unproject(Q.add(le.subtract(Q).multiplyBy(eo(sp)/wn)),it),this.getScaleZoom(Mt/function(Ss){return Mt*(Xa(Iu)/Xa(Iu+dr*Ss))}(sp),it),{flyTo:!0})):this._move(y,D)._moveEnd(!0)}.call(this),this},flyToBounds:function(y,D){var N=this._getBoundsCenterZoom(y,D);return this.flyTo(N.center,N.zoom,D)},setMaxBounds:function(y){return y=bt(y),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),y.isValid()?(this.options.maxBounds=y,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(y){var D=this.options.minZoom;return this.options.minZoom=y,this._loaded&&D!==y&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(y):this},setMaxZoom:function(y){var D=this.options.maxZoom;return this.options.maxZoom=y,this._loaded&&D!==y&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(y):this},panInsideBounds:function(y,D){this._enforcingBounds=!0;var N=this.getCenter(),Q=this._limitCenter(N,this._zoom,bt(y));return N.equals(Q)||this.panTo(Q,D),this._enforcingBounds=!1,this},panInside:function(y,D){var N=ie((D=D||{}).paddingTopLeft||D.padding||[0,0]),Q=ie(D.paddingBottomRight||D.padding||[0,0]),le=this.project(this.getCenter()),Ie=this.project(y),it=this.getPixelBounds(),Mt=Le([it.min.add(N),it.max.subtract(Q)]),Ht=Mt.getSize();if(!Mt.contains(Ie)){this._enforcingBounds=!0;var wn=Ie.subtract(Mt.getCenter()),dr=Mt.extend(Ie).getSize().subtract(Ht);le.x+=wn.x<0?-dr.x:dr.x,le.y+=wn.y<0?-dr.y:dr.y,this.panTo(this.unproject(le),D),this._enforcingBounds=!1}return this},invalidateSize:function(y){if(!this._loaded)return this;y=ye({animate:!1,pan:!0},!0===y?{animate:!0}:y);var D=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var N=this.getSize(),Q=D.divideBy(2).round(),le=N.divideBy(2).round(),Ie=Q.subtract(le);return Ie.x||Ie.y?(y.animate&&y.pan?this.panBy(Ie):(y.pan&&this._rawPanBy(Ie),this.fire("move"),y.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(M(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:D,newSize:N})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(y){if(y=this._locateOptions=ye({timeout:1e4,watch:!1},y),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var D=M(this._handleGeolocationResponse,this),N=M(this._handleGeolocationError,this);return y.watch?this._locationWatchId=navigator.geolocation.watchPosition(D,N,y):navigator.geolocation.getCurrentPosition(D,N,y),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(y){if(this._container._leaflet_id){var D=y.code,N=y.message||(1===D?"permission denied":2===D?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:D,message:"Geolocation error: "+N+"."})}},_handleGeolocationResponse:function(y){if(this._container._leaflet_id){var Q=new nt(y.coords.latitude,y.coords.longitude),le=Q.toBounds(2*y.coords.accuracy),Ie=this._locateOptions;if(Ie.setView){var it=this.getBoundsZoom(le);this.setView(Q,Ie.maxZoom?Math.min(it,Ie.maxZoom):it)}var Mt={latlng:Q,bounds:le,timestamp:y.timestamp};for(var Ht in y.coords)"number"==typeof y.coords[Ht]&&(Mt[Ht]=y.coords[Ht]);this.fire("locationfound",Mt)}},addHandler:function(y,D){if(!D)return this;var N=this[y]=new D(this);return this._handlers.push(N),this.options[y]&&N.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(D){this._container._leaflet_id=void 0,this._containerId=void 0}var y;for(y in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Ri(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(nn(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[y].remove();for(y in this._panes)Ri(this._panes[y]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(y,D){var Q=ir("div","leaflet-pane"+(y?" leaflet-"+y.replace("Pane","")+"-pane":""),D||this._mapPane);return y&&(this._panes[y]=Q),Q},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var y=this.getPixelBounds();return new at(this.unproject(y.getBottomLeft()),this.unproject(y.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(y,D,N){y=bt(y),N=ie(N||[0,0]);var Q=this.getZoom()||0,le=this.getMinZoom(),Ie=this.getMaxZoom(),it=y.getNorthWest(),Mt=y.getSouthEast(),Ht=this.getSize().subtract(N),wn=Le(this.project(Mt,Q),this.project(it,Q)).getSize(),dr=In.any3d?this.options.zoomSnap:1,Br=Ht.x/wn.x,fa=Ht.y/wn.y,da=D?Math.max(Br,fa):Math.min(Br,fa);return Q=this.getScaleZoom(da,Q),dr&&(Q=Math.round(Q/(dr/100))*(dr/100),Q=D?Math.ceil(Q/dr)*dr:Math.floor(Q/dr)*dr),Math.max(le,Math.min(Ie,Q))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(y,D){var N=this._getTopLeftPoint(y,D);return new we(N,N.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(y){return this.options.crs.getProjectedBounds(void 0===y?this.getZoom():y)},getPane:function(y){return"string"==typeof y?this._panes[y]:y},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(y,D){var N=this.options.crs;return D=void 0===D?this._zoom:D,N.scale(y)/N.scale(D)},getScaleZoom:function(y,D){var N=this.options.crs,Q=N.zoom(y*N.scale(D=void 0===D?this._zoom:D));return isNaN(Q)?1/0:Q},project:function(y,D){return D=void 0===D?this._zoom:D,this.options.crs.latLngToPoint(Ot(y),D)},unproject:function(y,D){return D=void 0===D?this._zoom:D,this.options.crs.pointToLatLng(ie(y),D)},layerPointToLatLng:function(y){var D=ie(y).add(this.getPixelOrigin());return this.unproject(D)},latLngToLayerPoint:function(y){return this.project(Ot(y))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(y){return this.options.crs.wrapLatLng(Ot(y))},wrapLatLngBounds:function(y){return this.options.crs.wrapLatLngBounds(bt(y))},distance:function(y,D){return this.options.crs.distance(Ot(y),Ot(D))},containerPointToLayerPoint:function(y){return ie(y).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(y){return ie(y).add(this._getMapPanePos())},containerPointToLatLng:function(y){var D=this.containerPointToLayerPoint(ie(y));return this.layerPointToLatLng(D)},latLngToContainerPoint:function(y){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ot(y)))},mouseEventToContainerPoint:function(y){return rp(y,this._container)},mouseEventToLayerPoint:function(y){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(y))},mouseEventToLatLng:function(y){return this.layerPointToLatLng(this.mouseEventToLayerPoint(y))},_initContainer:function(y){var D=this._container=Dr(y);if(!D)throw new Error("Map container not found.");if(D._leaflet_id)throw new Error("Map container is already initialized.");Nr(D,"scroll",this._onScroll,this),this._containerId=oe(D)},_initLayout:function(){var y=this._container;this._fadeAnimated=this.options.fadeAnimation&&In.any3d,Lr(y,"leaflet-container"+(In.touch?" leaflet-touch":"")+(In.retina?" leaflet-retina":"")+(In.ielt9?" leaflet-oldie":"")+(In.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var D=Ii(y,"position");"absolute"!==D&&"relative"!==D&&"fixed"!==D&&"sticky"!==D&&(y.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var y=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ui(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Lr(y.markerPane,"leaflet-zoom-hide"),Lr(y.shadowPane,"leaflet-zoom-hide"))},_resetView:function(y,D,N){Ui(this._mapPane,new k(0,0));var Q=!this._loaded;this._loaded=!0,D=this._limitZoom(D),this.fire("viewprereset");var le=this._zoom!==D;this._moveStart(le,N)._move(y,D)._moveEnd(le),this.fire("viewreset"),Q&&this.fire("load")},_moveStart:function(y,D){return y&&this.fire("zoomstart"),D||this.fire("movestart"),this},_move:function(y,D,N,Q){void 0===D&&(D=this._zoom);var le=this._zoom!==D;return this._zoom=D,this._lastCenter=y,this._pixelOrigin=this._getNewPixelOrigin(y),Q?N&&N.pinch&&this.fire("zoom",N):((le||N&&N.pinch)&&this.fire("zoom",N),this.fire("move",N)),this},_moveEnd:function(y){return y&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return nn(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(y){Ui(this._mapPane,this._getMapPanePos().subtract(y))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(y){this._targets={},this._targets[oe(this._container)]=this;var D=y?Gr:Nr;D(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&D(window,"resize",this._onResize,this),In.any3d&&this.options.transform3DLimit&&(y?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){nn(this._resizeRequest),this._resizeRequest=mn(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var y=this._getMapPanePos();Math.max(Math.abs(y.x),Math.abs(y.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(y,D){for(var Q,N=[],le="mouseout"===D||"mouseover"===D,Ie=y.target||y.srcElement,it=!1;Ie;){if((Q=this._targets[oe(Ie)])&&("click"===D||"preclick"===D)&&this._draggableMoved(Q)){it=!0;break}if(Q&&Q.listens(D,!0)&&(le&&!vc(Ie,y)||(N.push(Q),le))||Ie===this._container)break;Ie=Ie.parentNode}return!N.length&&!it&&!le&&this.listens(D,!0)&&(N=[this]),N},_isClickDisabled:function(y){for(;y&&y!==this._container;){if(y._leaflet_disable_click)return!0;y=y.parentNode}},_handleDOMEvent:function(y){var D=y.target||y.srcElement;if(!(!this._loaded||D._leaflet_disable_events||"click"===y.type&&this._isClickDisabled(D))){var N=y.type;"mousedown"===N&&fs(D),this._fireDOMEvent(y,N)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(y,D,N){if("click"===y.type){var Q=ye({},y);Q.type="preclick",this._fireDOMEvent(Q,Q.type,N)}var le=this._findEventTargets(y,D);if(N){for(var Ie=[],it=0;it<N.length;it++)N[it].listens(D,!0)&&Ie.push(N[it]);le=Ie.concat(le)}if(le.length){"contextmenu"===D&&Zs(y);var Mt=le[0],Ht={originalEvent:y};if("keypress"!==y.type&&"keydown"!==y.type&&"keyup"!==y.type){var wn=Mt.getLatLng&&(!Mt._radius||Mt._radius<=10);Ht.containerPoint=wn?this.latLngToContainerPoint(Mt.getLatLng()):this.mouseEventToContainerPoint(y),Ht.layerPoint=this.containerPointToLayerPoint(Ht.containerPoint),Ht.latlng=wn?Mt.getLatLng():this.layerPointToLatLng(Ht.layerPoint)}for(it=0;it<le.length;it++)if(le[it].fire(D,Ht,!0),Ht.originalEvent._stopped||!1===le[it].options.bubblingMouseEvents&&-1!==et(this._mouseEvents,D))return}},_draggableMoved:function(y){return(y=y.dragging&&y.dragging.enabled()?y:this).dragging&&y.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var y=0,D=this._handlers.length;y<D;y++)this._handlers[y].disable()},whenReady:function(y,D){return this._loaded?y.call(D||this,{target:this}):this.on("load",y,D),this},_getMapPanePos:function(){return ya(this._mapPane)||new k(0,0)},_moved:function(){var y=this._getMapPanePos();return y&&!y.equals([0,0])},_getTopLeftPoint:function(y,D){return(y&&void 0!==D?this._getNewPixelOrigin(y,D):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(y,D){var N=this.getSize()._divideBy(2);return this.project(y,D)._subtract(N)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(y,D,N){var Q=this._getNewPixelOrigin(N,D);return this.project(y,D)._subtract(Q)},_latLngBoundsToNewLayerBounds:function(y,D,N){var Q=this._getNewPixelOrigin(N,D);return Le([this.project(y.getSouthWest(),D)._subtract(Q),this.project(y.getNorthWest(),D)._subtract(Q),this.project(y.getSouthEast(),D)._subtract(Q),this.project(y.getNorthEast(),D)._subtract(Q)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(y){return this.latLngToLayerPoint(y).subtract(this._getCenterLayerPoint())},_limitCenter:function(y,D,N){if(!N)return y;var Q=this.project(y,D),le=this.getSize().divideBy(2),Ie=new we(Q.subtract(le),Q.add(le)),it=this._getBoundsOffset(Ie,N,D);return Math.abs(it.x)<=1&&Math.abs(it.y)<=1?y:this.unproject(Q.add(it),D)},_limitOffset:function(y,D){if(!D)return y;var N=this.getPixelBounds(),Q=new we(N.min.add(y),N.max.add(y));return y.add(this._getBoundsOffset(Q,D))},_getBoundsOffset:function(y,D,N){var Q=Le(this.project(D.getNorthEast(),N),this.project(D.getSouthWest(),N)),le=Q.min.subtract(y.min),Ie=Q.max.subtract(y.max);return new k(this._rebound(le.x,-Ie.x),this._rebound(le.y,-Ie.y))},_rebound:function(y,D){return y+D>0?Math.round(y-D)/2:Math.max(0,Math.ceil(y))-Math.max(0,Math.floor(D))},_limitZoom:function(y){var D=this.getMinZoom(),N=this.getMaxZoom(),Q=In.any3d?this.options.zoomSnap:1;return Q&&(y=Math.round(y/Q)*Q),Math.max(D,Math.min(N,y))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$n(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(y,D){var N=this._getCenterOffset(y)._trunc();return!(!0!==(D&&D.animate)&&!this.getSize().contains(N)||(this.panBy(N,D),0))},_createAnimProxy:function(){var y=this._proxy=ir("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(y),this.on("zoomanim",function(D){var N=Nl,Q=this._proxy.style[N];Ra(this._proxy,this.project(D.center,D.zoom),this.getZoomScale(D.zoom,1)),Q===this._proxy.style[N]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ri(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var y=this.getCenter(),D=this.getZoom();Ra(this._proxy,this.project(y,D),this.getZoomScale(D,1))},_catchTransitionEnd:function(y){this._animatingZoom&&y.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(y,D,N){if(this._animatingZoom)return!0;if(N=N||{},!this._zoomAnimated||!1===N.animate||this._nothingToAnimate()||Math.abs(D-this._zoom)>this.options.zoomAnimationThreshold)return!1;var Q=this.getZoomScale(D),le=this._getCenterOffset(y)._divideBy(1-1/Q);return!(!0!==N.animate&&!this.getSize().contains(le)||(mn(function(){this._moveStart(!0,N.noMoveStart||!1)._animateZoom(y,D,!0)},this),0))},_animateZoom:function(y,D,N,Q){!this._mapPane||(N&&(this._animatingZoom=!0,this._animateToCenter=y,this._animateToZoom=D,Lr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:y,zoom:D,noUpdate:Q}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(M(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&$n(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var ks=Nt.extend({options:{position:"topright"},initialize:function(y){Be(this,y)},getPosition:function(){return this.options.position},setPosition:function(y){var D=this._map;return D&&D.removeControl(this),this.options.position=y,D&&D.addControl(this),this},getContainer:function(){return this._container},addTo:function(y){this.remove(),this._map=y;var D=this._container=this.onAdd(y),N=this.getPosition(),Q=y._controlCorners[N];return Lr(D,"leaflet-control"),-1!==N.indexOf("bottom")?Q.insertBefore(D,Q.firstChild):Q.appendChild(D),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ri(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(y){this._map&&y&&y.screenX>0&&y.screenY>0&&this._map.getContainer().focus()}}),$=function(y){return new ks(y)};Di.include({addControl:function(y){return y.addTo(this),this},removeControl:function(y){return y.remove(),this},_initControlPos:function(){var y=this._controlCorners={},D="leaflet-",N=this._controlContainer=ir("div",D+"control-container",this._container);function Q(le,Ie){y[le+Ie]=ir("div",D+le+" "+D+Ie,N)}Q("top","left"),Q("top","right"),Q("bottom","left"),Q("bottom","right")},_clearControlPos:function(){for(var y in this._controlCorners)Ri(this._controlCorners[y]);Ri(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var P=ks.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(y,D,N,Q){return N<Q?-1:Q<N?1:0}},initialize:function(y,D,N){for(var Q in Be(this,N),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,y)this._addLayer(y[Q],Q);for(Q in D)this._addLayer(D[Q],Q,!0)},onAdd:function(y){this._initLayout(),this._update(),this._map=y,y.on("zoomend",this._checkDisabledLayers,this);for(var D=0;D<this._layers.length;D++)this._layers[D].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(y){return ks.prototype.addTo.call(this,y),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(y,D){return this._addLayer(y,D),this._map?this._update():this},addOverlay:function(y,D){return this._addLayer(y,D,!0),this._map?this._update():this},removeLayer:function(y){y.off("add remove",this._onLayerChange,this);var D=this._getLayer(oe(y));return D&&this._layers.splice(this._layers.indexOf(D),1),this._map?this._update():this},expand:function(){Lr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var y=this._map.getSize().y-(this._container.offsetTop+50);return y<this._section.clientHeight?(Lr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=y+"px"):$n(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $n(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var y="leaflet-control-layers",D=this._container=ir("div",y),N=this.options.collapsed;D.setAttribute("aria-haspopup",!0),yl(D),Xh(D);var Q=this._section=ir("section",y+"-list");N&&(this._map.on("click",this.collapse,this),Nr(D,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var le=this._layersLink=ir("a",y+"-toggle",D);le.href="#",le.title="Layers",le.setAttribute("role","button"),Nr(le,{keydown:function(it){13===it.keyCode&&this._expandSafely()},click:function(it){Zs(it),this._expandSafely()}},this),N||this.expand(),this._baseLayersList=ir("div",y+"-base",Q),this._separator=ir("div",y+"-separator",Q),this._overlaysList=ir("div",y+"-overlays",Q),D.appendChild(Q)},_getLayer:function(y){for(var D=0;D<this._layers.length;D++)if(this._layers[D]&&oe(this._layers[D].layer)===y)return this._layers[D]},_addLayer:function(y,D,N){this._map&&y.on("add remove",this._onLayerChange,this),this._layers.push({layer:y,name:D,overlay:N}),this.options.sortLayers&&this._layers.sort(M(function(Q,le){return this.options.sortFunction(Q.layer,le.layer,Q.name,le.name)},this)),this.options.autoZIndex&&y.setZIndex&&(this._lastZIndex++,y.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fa(this._baseLayersList),Fa(this._overlaysList),this._layerControlInputs=[];var y,D,N,Q,le=0;for(N=0;N<this._layers.length;N++)this._addItem(Q=this._layers[N]),D=D||Q.overlay,y=y||!Q.overlay,le+=Q.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(y=y&&le>1)?"":"none"),this._separator.style.display=D&&y?"":"none",this},_onLayerChange:function(y){this._handlingClick||this._update();var D=this._getLayer(oe(y.target)),N=D.overlay?"add"===y.type?"overlayadd":"overlayremove":"add"===y.type?"baselayerchange":null;N&&this._map.fire(N,D)},_createRadioElement:function(y,D){var N='<input type="radio" class="leaflet-control-layers-selector" name="'+y+'"'+(D?' checked="checked"':"")+"/>",Q=document.createElement("div");return Q.innerHTML=N,Q.firstChild},_addItem:function(y){var Q,D=document.createElement("label"),N=this._map.hasLayer(y.layer);y.overlay?((Q=document.createElement("input")).type="checkbox",Q.className="leaflet-control-layers-selector",Q.defaultChecked=N):Q=this._createRadioElement("leaflet-base-layers_"+oe(this),N),this._layerControlInputs.push(Q),Q.layerId=oe(y.layer),Nr(Q,"click",this._onInputClick,this);var le=document.createElement("span");le.innerHTML=" "+y.name;var Ie=document.createElement("span");return D.appendChild(Ie),Ie.appendChild(Q),Ie.appendChild(le),(y.overlay?this._overlaysList:this._baseLayersList).appendChild(D),this._checkDisabledLayers(),D},_onInputClick:function(){if(!this._preventClick){var D,N,y=this._layerControlInputs,Q=[],le=[];this._handlingClick=!0;for(var Ie=y.length-1;Ie>=0;Ie--)N=this._getLayer((D=y[Ie]).layerId).layer,D.checked?Q.push(N):D.checked||le.push(N);for(Ie=0;Ie<le.length;Ie++)this._map.hasLayer(le[Ie])&&this._map.removeLayer(le[Ie]);for(Ie=0;Ie<Q.length;Ie++)this._map.hasLayer(Q[Ie])||this._map.addLayer(Q[Ie]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var D,N,y=this._layerControlInputs,Q=this._map.getZoom(),le=y.length-1;le>=0;le--)N=this._getLayer((D=y[le]).layerId).layer,D.disabled=void 0!==N.options.minZoom&&Q<N.options.minZoom||void 0!==N.options.maxZoom&&Q>N.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var y=this._section;this._preventClick=!0,Nr(y,"click",Zs),this.expand();var D=this;setTimeout(function(){Gr(y,"click",Zs),D._preventClick=!1})}}),J=ks.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(y){var D="leaflet-control-zoom",N=ir("div",D+" leaflet-bar"),Q=this.options;return this._zoomInButton=this._createButton(Q.zoomInText,Q.zoomInTitle,D+"-in",N,this._zoomIn),this._zoomOutButton=this._createButton(Q.zoomOutText,Q.zoomOutTitle,D+"-out",N,this._zoomOut),this._updateDisabled(),y.on("zoomend zoomlevelschange",this._updateDisabled,this),N},onRemove:function(y){y.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(y){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(y.shiftKey?3:1))},_zoomOut:function(y){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(y.shiftKey?3:1))},_createButton:function(y,D,N,Q,le){var Ie=ir("a",N,Q);return Ie.innerHTML=y,Ie.href="#",Ie.title=D,Ie.setAttribute("role","button"),Ie.setAttribute("aria-label",D),yl(Ie),Nr(Ie,"click",$u),Nr(Ie,"click",le,this),Nr(Ie,"click",this._refocusOnMap,this),Ie},_updateDisabled:function(){var y=this._map,D="leaflet-disabled";$n(this._zoomInButton,D),$n(this._zoomOutButton,D),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||y._zoom===y.getMinZoom())&&(Lr(this._zoomOutButton,D),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||y._zoom===y.getMaxZoom())&&(Lr(this._zoomInButton,D),this._zoomInButton.setAttribute("aria-disabled","true"))}});Di.mergeOptions({zoomControl:!0}),Di.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new J,this.addControl(this.zoomControl))});var _e=ks.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(y){var D="leaflet-control-scale",N=ir("div",D),Q=this.options;return this._addScales(Q,D+"-line",N),y.on(Q.updateWhenIdle?"moveend":"move",this._update,this),y.whenReady(this._update,this),N},onRemove:function(y){y.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(y,D,N){y.metric&&(this._mScale=ir("div",D,N)),y.imperial&&(this._iScale=ir("div",D,N))},_update:function(){var y=this._map,D=y.getSize().y/2,N=y.distance(y.containerPointToLatLng([0,D]),y.containerPointToLatLng([this.options.maxWidth,D]));this._updateScales(N)},_updateScales:function(y){this.options.metric&&y&&this._updateMetric(y),this.options.imperial&&y&&this._updateImperial(y)},_updateMetric:function(y){var D=this._getRoundNum(y);this._updateScale(this._mScale,D<1e3?D+" m":D/1e3+" km",D/y)},_updateImperial:function(y){var N,Q,le,D=3.2808399*y;D>5280?(Q=this._getRoundNum(N=D/5280),this._updateScale(this._iScale,Q+" mi",Q/N)):(le=this._getRoundNum(D),this._updateScale(this._iScale,le+" ft",le/D))},_updateScale:function(y,D,N){y.style.width=Math.round(this.options.maxWidth*N)+"px",y.innerHTML=D},_getRoundNum:function(y){var D=Math.pow(10,(Math.floor(y)+"").length-1),N=y/D;return D*(N>=10?10:N>=5?5:N>=3?3:N>=2?2:1)}}),Qe=ks.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(In.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(y){Be(this,y),this._attributions={}},onAdd:function(y){for(var D in y.attributionControl=this,this._container=ir("div","leaflet-control-attribution"),yl(this._container),y._layers)y._layers[D].getAttribution&&this.addAttribution(y._layers[D].getAttribution());return this._update(),y.on("layeradd",this._addAttribution,this),this._container},onRemove:function(y){y.off("layeradd",this._addAttribution,this)},_addAttribution:function(y){y.layer.getAttribution&&(this.addAttribution(y.layer.getAttribution()),y.layer.once("remove",function(){this.removeAttribution(y.layer.getAttribution())},this))},setPrefix:function(y){return this.options.prefix=y,this._update(),this},addAttribution:function(y){return y?(this._attributions[y]||(this._attributions[y]=0),this._attributions[y]++,this._update(),this):this},removeAttribution:function(y){return y?(this._attributions[y]&&(this._attributions[y]--,this._update()),this):this},_update:function(){if(this._map){var y=[];for(var D in this._attributions)this._attributions[D]&&y.push(D);var N=[];this.options.prefix&&N.push(this.options.prefix),y.length&&N.push(y.join(", ")),this._container.innerHTML=N.join(' <span aria-hidden="true">|</span> ')}}});Di.mergeOptions({attributionControl:!0}),Di.addInitHook(function(){this.options.attributionControl&&(new Qe).addTo(this)});ks.Layers=P,ks.Zoom=J,ks.Scale=_e,ks.Attribution=Qe,$.layers=function(y,D,N){return new P(y,D,N)},$.zoom=function(y){return new J(y)},$.scale=function(y){return new _e(y)},$.attribution=function(y){return new Qe(y)};var At=Nt.extend({initialize:function(y){this._map=y},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});At.addTo=function(A,y){return A.addHandler(y,this),this};var sn={Events:Bt},an=In.touch?"touchstart mousedown":"mousedown",vt=K.extend({options:{clickTolerance:3},initialize:function(y,D,N,Q){Be(this,Q),this._element=y,this._dragStartTarget=D||y,this._preventOutline=N},enable:function(){this._enabled||(Nr(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(vt._dragging===this&&this.finishDrag(!0),Gr(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(y){if(this._enabled&&(this._moved=!1,!xu(this._element,"leaflet-zoom-anim"))){if(y.touches&&1!==y.touches.length)return void(vt._dragging===this&&this.finishDrag());if(!(vt._dragging||y.shiftKey||1!==y.which&&1!==y.button&&!y.touches||(vt._dragging=this,this._preventOutline&&fs(this._element),gl(),vi(),this._moving))){this.fire("down");var D=y.touches?y.touches[0]:y,N=$a(this._element);this._startPoint=new k(D.clientX,D.clientY),this._startPos=ya(this._element),this._parentScale=Ns(N);var Q="mousedown"===y.type;Nr(document,Q?"mousemove":"touchmove",this._onMove,this),Nr(document,Q?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(y){if(this._enabled){if(y.touches&&y.touches.length>1)return void(this._moved=!0);var D=y.touches&&1===y.touches.length?y.touches[0]:y,N=new k(D.clientX,D.clientY)._subtract(this._startPoint);!N.x&&!N.y||Math.abs(N.x)+Math.abs(N.y)<this.options.clickTolerance||(N.x/=this._parentScale.x,N.y/=this._parentScale.y,Zs(y),this._moved||(this.fire("dragstart"),this._moved=!0,Lr(document.body,"leaflet-dragging"),this._lastTarget=y.target||y.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Lr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(N),this._moving=!0,this._lastEvent=y,this._updatePosition())}},_updatePosition:function(){var y={originalEvent:this._lastEvent};this.fire("predrag",y),Ui(this._element,this._newPos),this.fire("drag",y)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(y){$n(document.body,"leaflet-dragging"),this._lastTarget&&($n(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Gr(document,"mousemove touchmove",this._onMove,this),Gr(document,"mouseup touchend touchcancel",this._onUp,this),du(),qu();var D=this._moved&&this._moving;this._moving=!1,vt._dragging=!1,D&&this.fire("dragend",{noInertia:y,distance:this._newPos.distanceTo(this._startPos)})}});function cn(A,y,D){var N,le,Ie,it,Mt,Ht,wn,dr,Br,Q=[1,4,2,8];for(le=0,wn=A.length;le<wn;le++)A[le]._code=To(A[le],y);for(it=0;it<4;it++){for(dr=Q[it],N=[],le=0,Ie=(wn=A.length)-1;le<wn;Ie=le++)Ht=A[Ie],(Mt=A[le])._code&dr?Ht._code&dr||((Br=Zr(Ht,Mt,dr,y,D))._code=To(Br,y),N.push(Br)):(Ht._code&dr&&((Br=Zr(Ht,Mt,dr,y,D))._code=To(Br,y),N.push(Br)),N.push(Mt));A=N}return A}function Wn(A,y){var D,N,Q,le,Ie,it,Mt,Ht;if(!A||0===A.length)throw new Error("latlngs not passed");gi(A)||(console.warn("latlngs are not flat! Only the first ring will be used"),A=A[0]);var dr=Ot([0,0]),Br=bt(A);Br.getNorthWest().distanceTo(Br.getSouthWest())*Br.getNorthEast().distanceTo(Br.getNorthWest())<1700&&(dr=hr(A));var da=A.length,Xa=[];for(D=0;D<da;D++){var Qa=Ot(A[D]);Xa.push(y.project(Ot([Qa.lat-dr.lat,Qa.lng-dr.lng])))}for(it=Mt=Ht=0,D=0,N=da-1;D<da;N=D++)Mt+=((Q=Xa[D]).x+(le=Xa[N]).x)*(Ie=Q.y*le.x-le.y*Q.x),Ht+=(Q.y+le.y)*Ie,it+=3*Ie;var Iu=y.unproject(ie(0===it?Xa[0]:[Mt/it,Ht/it]));return Ot([Iu.lat+dr.lat,Iu.lng+dr.lng])}function hr(A){for(var y=0,D=0,N=0,Q=0;Q<A.length;Q++){var le=Ot(A[Q]);y+=le.lat,D+=le.lng,N++}return Ot([y/N,D/N])}var la,Oi={__proto__:null,clipPolygon:cn,polygonCenter:Wn,centroid:hr};function ja(A,y){if(!y||!A.length)return A.slice();var D=y*y;return function(A,y){var D=A.length,Q=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(D);Q[0]=Q[D-1]=1,Bn(A,Q,y,0,D-1);var le,Ie=[];for(le=0;le<D;le++)Q[le]&&Ie.push(A[le]);return Ie}(A=function(A,y){for(var D=[A[0]],N=1,Q=0,le=A.length;N<le;N++)xo(A[N],A[Q])>y&&(D.push(A[N]),Q=N);return Q<le-1&&D.push(A[le-1]),D}(A,D),D)}function vo(A,y,D){return Math.sqrt(mo(A,y,D,!0))}function Bn(A,y,D,N,Q){var Ie,it,Mt,le=0;for(it=N+1;it<=Q-1;it++)(Mt=mo(A[it],A[N],A[Q],!0))>le&&(Ie=it,le=Mt);le>D&&(y[Ie]=1,Bn(A,y,D,N,Ie),Bn(A,y,D,Ie,Q))}function Oa(A,y,D,N,Q){var it,Mt,Ht,le=N?la:To(A,D),Ie=To(y,D);for(la=Ie;;){if(!(le|Ie))return[A,y];if(le&Ie)return!1;Ht=To(Mt=Zr(A,y,it=le||Ie,D,Q),D),it===le?(A=Mt,le=Ht):(y=Mt,Ie=Ht)}}function Zr(A,y,D,N,Q){var Ht,wn,le=y.x-A.x,Ie=y.y-A.y,it=N.min,Mt=N.max;return 8&D?(Ht=A.x+le*(Mt.y-A.y)/Ie,wn=Mt.y):4&D?(Ht=A.x+le*(it.y-A.y)/Ie,wn=it.y):2&D?(Ht=Mt.x,wn=A.y+Ie*(Mt.x-A.x)/le):1&D&&(Ht=it.x,wn=A.y+Ie*(it.x-A.x)/le),new k(Ht,wn,Q)}function To(A,y){var D=0;return A.x<y.min.x?D|=1:A.x>y.max.x&&(D|=2),A.y<y.min.y?D|=4:A.y>y.max.y&&(D|=8),D}function xo(A,y){var D=y.x-A.x,N=y.y-A.y;return D*D+N*N}function mo(A,y,D,N){var Ht,Q=y.x,le=y.y,Ie=D.x-Q,it=D.y-le,Mt=Ie*Ie+it*it;return Mt>0&&((Ht=((A.x-Q)*Ie+(A.y-le)*it)/Mt)>1?(Q=D.x,le=D.y):Ht>0&&(Q+=Ie*Ht,le+=it*Ht)),Ie=A.x-Q,it=A.y-le,N?Ie*Ie+it*it:new k(Q,le)}function gi(A){return!He(A[0])||"object"!=typeof A[0][0]&&void 0!==A[0][0]}function Mo(A){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gi(A)}function Io(A,y){var D,N,Q,le,Ie,it,Mt,Ht;if(!A||0===A.length)throw new Error("latlngs not passed");gi(A)||(console.warn("latlngs are not flat! Only the first ring will be used"),A=A[0]);var wn=Ot([0,0]),dr=bt(A);dr.getNorthWest().distanceTo(dr.getSouthWest())*dr.getNorthEast().distanceTo(dr.getNorthWest())<1700&&(wn=hr(A));var fa=A.length,da=[];for(D=0;D<fa;D++){var Xa=Ot(A[D]);da.push(y.project(Ot([Xa.lat-wn.lat,Xa.lng-wn.lng])))}for(D=0,N=0;D<fa-1;D++)N+=da[D].distanceTo(da[D+1])/2;if(0===N)Ht=da[0];else for(D=0,le=0;D<fa-1;D++)if((le+=Q=(Ie=da[D]).distanceTo(it=da[D+1]))>N){Ht=[it.x-(Mt=(le-N)/Q)*(it.x-Ie.x),it.y-Mt*(it.y-Ie.y)];break}var Qa=y.unproject(ie(Ht));return Ot([Qa.lat+wn.lat,Qa.lng+wn.lng])}var Ca={__proto__:null,simplify:ja,pointToSegmentDistance:vo,closestPointOnSegment:function(A,y,D){return mo(A,y,D)},clipSegment:Oa,_getEdgeIntersection:Zr,_getBitCode:To,_sqClosestPointOnSegment:mo,isFlat:gi,_flat:Mo,polylineCenter:Io},Cs={project:function(y){return new k(y.lng,y.lat)},unproject:function(y){return new nt(y.y,y.x)},bounds:new we([-180,-90],[180,90])},Mu={R:6378137,R_MINOR:6356752.314245179,bounds:new we([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(y){var D=Math.PI/180,N=this.R,Q=y.lat*D,le=this.R_MINOR/N,Ie=Math.sqrt(1-le*le),it=Ie*Math.sin(Q),Mt=Math.tan(Math.PI/4-Q/2)/Math.pow((1-it)/(1+it),Ie/2);return Q=-N*Math.log(Math.max(Mt,1e-10)),new k(y.lng*D*N,Q)},unproject:function(y){for(var wn,D=180/Math.PI,N=this.R,Q=this.R_MINOR/N,le=Math.sqrt(1-Q*Q),Ie=Math.exp(-y.y/N),it=Math.PI/2-2*Math.atan(Ie),Mt=0,Ht=.1;Mt<15&&Math.abs(Ht)>1e-7;Mt++)wn=le*Math.sin(it),wn=Math.pow((1-wn)/(1+wn),le/2),it+=Ht=Math.PI/2-2*Math.atan(Ie*wn)-it;return new nt(it*D,y.x*D/N)}},_l={__proto__:null,LonLat:Cs,Mercator:Mu,SphericalMercator:mi},qi=ye({},rr,{code:"EPSG:3395",projection:Mu,transformation:function(){var A=.5/(Math.PI*Mu.R);return Ti(A,.5,-A,.5)}()}),Bs=ye({},rr,{code:"EPSG:4326",projection:Cs,transformation:Ti(1/180,1,-1/180,.5)}),mc=ye({},On,{projection:Cs,transformation:Ti(1,0,-1,0),scale:function(y){return Math.pow(2,y)},zoom:function(y){return Math.log(y)/Math.LN2},distance:function(y,D){var N=D.lng-y.lng,Q=D.lat-y.lat;return Math.sqrt(N*N+Q*Q)},infinite:!0});On.Earth=rr,On.EPSG3395=qi,On.EPSG3857=jo,On.EPSG900913=pc,On.EPSG4326=Bs,On.Simple=mc;var go=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(y){return y.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(y){return y&&y.removeLayer(this),this},getPane:function(y){return this._map.getPane(y?this.options[y]||y:this.options.pane)},addInteractiveTarget:function(y){return this._map._targets[oe(y)]=this,this},removeInteractiveTarget:function(y){return delete this._map._targets[oe(y)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(y){var D=y.target;if(D.hasLayer(this)){if(this._map=D,this._zoomAnimated=D._zoomAnimated,this.getEvents){var N=this.getEvents();D.on(N,this),this.once("remove",function(){D.off(N,this)},this)}this.onAdd(D),this.fire("add"),D.fire("layeradd",{layer:this})}}});Di.include({addLayer:function(y){if(!y._layerAdd)throw new Error("The provided object is not a Layer.");var D=oe(y);return this._layers[D]||(this._layers[D]=y,y._mapToAdd=this,y.beforeAdd&&y.beforeAdd(this),this.whenReady(y._layerAdd,y)),this},removeLayer:function(y){var D=oe(y);return this._layers[D]?(this._loaded&&y.onRemove(this),delete this._layers[D],this._loaded&&(this.fire("layerremove",{layer:y}),y.fire("remove")),y._map=y._mapToAdd=null,this):this},hasLayer:function(y){return oe(y)in this._layers},eachLayer:function(y,D){for(var N in this._layers)y.call(D,this._layers[N]);return this},_addLayers:function(y){for(var D=0,N=(y=y?He(y)?y:[y]:[]).length;D<N;D++)this.addLayer(y[D])},_addZoomLimit:function(y){(!isNaN(y.options.maxZoom)||!isNaN(y.options.minZoom))&&(this._zoomBoundLayers[oe(y)]=y,this._updateZoomLevels())},_removeZoomLimit:function(y){var D=oe(y);this._zoomBoundLayers[D]&&(delete this._zoomBoundLayers[D],this._updateZoomLevels())},_updateZoomLevels:function(){var y=1/0,D=-1/0,N=this._getZoomSpan();for(var Q in this._zoomBoundLayers){var le=this._zoomBoundLayers[Q].options;y=void 0===le.minZoom?y:Math.min(y,le.minZoom),D=void 0===le.maxZoom?D:Math.max(D,le.maxZoom)}this._layersMaxZoom=D===-1/0?void 0:D,this._layersMinZoom=y===1/0?void 0:y,N!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kr=go.extend({initialize:function(y,D){var N,Q;if(Be(this,D),this._layers={},y)for(N=0,Q=y.length;N<Q;N++)this.addLayer(y[N])},addLayer:function(y){var D=this.getLayerId(y);return this._layers[D]=y,this._map&&this._map.addLayer(y),this},removeLayer:function(y){var D=y in this._layers?y:this.getLayerId(y);return this._map&&this._layers[D]&&this._map.removeLayer(this._layers[D]),delete this._layers[D],this},hasLayer:function(y){return("number"==typeof y?y:this.getLayerId(y))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(y){var N,Q,D=Array.prototype.slice.call(arguments,1);for(N in this._layers)(Q=this._layers[N])[y]&&Q[y].apply(Q,D);return this},onAdd:function(y){this.eachLayer(y.addLayer,y)},onRemove:function(y){this.eachLayer(y.removeLayer,y)},eachLayer:function(y,D){for(var N in this._layers)y.call(D,this._layers[N]);return this},getLayer:function(y){return this._layers[y]},getLayers:function(){var y=[];return this.eachLayer(y.push,y),y},setZIndex:function(y){return this.invoke("setZIndex",y)},getLayerId:function(y){return oe(y)}}),yo=kr.extend({addLayer:function(y){return this.hasLayer(y)?this:(y.addEventParent(this),kr.prototype.addLayer.call(this,y),this.fire("layeradd",{layer:y}))},removeLayer:function(y){return this.hasLayer(y)?(y in this._layers&&(y=this._layers[y]),y.removeEventParent(this),kr.prototype.removeLayer.call(this,y),this.fire("layerremove",{layer:y})):this},setStyle:function(y){return this.invoke("setStyle",y)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var y=new at;for(var D in this._layers){var N=this._layers[D];y.extend(N.getBounds?N.getBounds():N.getLatLng())}return y}}),Qu=Nt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(y){Be(this,y)},createIcon:function(y){return this._createIcon("icon",y)},createShadow:function(y){return this._createIcon("shadow",y)},_createIcon:function(y,D){var N=this._getIconUrl(y);if(!N){if("icon"===y)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var Q=this._createImg(N,D&&"IMG"===D.tagName?D:null);return this._setIconStyles(Q,y),(this.options.crossOrigin||""===this.options.crossOrigin)&&(Q.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),Q},_setIconStyles:function(y,D){var N=this.options,Q=N[D+"Size"];"number"==typeof Q&&(Q=[Q,Q]);var le=ie(Q),Ie=ie("shadow"===D&&N.shadowAnchor||N.iconAnchor||le&&le.divideBy(2,!0));y.className="leaflet-marker-"+D+" "+(N.className||""),Ie&&(y.style.marginLeft=-Ie.x+"px",y.style.marginTop=-Ie.y+"px"),le&&(y.style.width=le.x+"px",y.style.height=le.y+"px")},_createImg:function(y,D){return(D=D||document.createElement("img")).src=y,D},_getIconUrl:function(y){return In.retina&&this.options[y+"RetinaUrl"]||this.options[y+"Url"]}});var bl=Qu.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(y){return"string"!=typeof bl.imagePath&&(bl.imagePath=this._detectIconPath()),(this.options.imagePath||bl.imagePath)+Qu.prototype._getIconUrl.call(this,y)},_stripUrl:function(y){var D=function(Q,le,Ie){var it=le.exec(Q);return it&&it[Ie]};return(y=D(y,/^url\((['"])?(.+)\1\)$/,2))&&D(y,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var y=ir("div","leaflet-default-icon-path",document.body),D=Ii(y,"background-image")||Ii(y,"backgroundImage");if(document.body.removeChild(y),D=this._stripUrl(D))return D;var N=document.querySelector('link[href$="leaflet.css"]');return N?N.href.substring(0,N.href.length-"leaflet.css".length-1):""}}),wl=At.extend({initialize:function(y){this._marker=y},addHooks:function(){var y=this._marker._icon;this._draggable||(this._draggable=new vt(y,y,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Lr(y,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$n(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(y){var D=this._marker,N=D._map,Q=this._marker.options.autoPanSpeed,le=this._marker.options.autoPanPadding,Ie=ya(D._icon),it=N.getPixelBounds(),Mt=N.getPixelOrigin(),Ht=Le(it.min._subtract(Mt).add(le),it.max._subtract(Mt).subtract(le));if(!Ht.contains(Ie)){var wn=ie((Math.max(Ht.max.x,Ie.x)-Ht.max.x)/(it.max.x-Ht.max.x)-(Math.min(Ht.min.x,Ie.x)-Ht.min.x)/(it.min.x-Ht.min.x),(Math.max(Ht.max.y,Ie.y)-Ht.max.y)/(it.max.y-Ht.max.y)-(Math.min(Ht.min.y,Ie.y)-Ht.min.y)/(it.min.y-Ht.min.y)).multiplyBy(Q);N.panBy(wn,{animate:!1}),this._draggable._newPos._add(wn),this._draggable._startPos._add(wn),Ui(D._icon,this._draggable._newPos),this._onDrag(y),this._panRequest=mn(this._adjustPan.bind(this,y))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(y){this._marker.options.autoPan&&(nn(this._panRequest),this._panRequest=mn(this._adjustPan.bind(this,y)))},_onDrag:function(y){var D=this._marker,N=D._shadow,Q=ya(D._icon),le=D._map.layerPointToLatLng(Q);N&&Ui(N,Q),D._latlng=le,y.latlng=le,y.oldLatLng=this._oldLatLng,D.fire("move",y).fire("drag",y)},_onDragEnd:function(y){nn(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",y)}}),tn=go.extend({options:{icon:new bl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(y,D){Be(this,D),this._latlng=Ot(y)},onAdd:function(y){this._zoomAnimated=this._zoomAnimated&&y.options.markerZoomAnimation,this._zoomAnimated&&y.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(y){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&y.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(y){var D=this._latlng;return this._latlng=Ot(y),this.update(),this.fire("move",{oldLatLng:D,latlng:this._latlng})},setZIndexOffset:function(y){return this.options.zIndexOffset=y,this.update()},getIcon:function(){return this.options.icon},setIcon:function(y){return this.options.icon=y,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var y=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(y)}return this},_initIcon:function(){var y=this.options,D="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),N=y.icon.createIcon(this._icon),Q=!1;N!==this._icon&&(this._icon&&this._removeIcon(),Q=!0,y.title&&(N.title=y.title),"IMG"===N.tagName&&(N.alt=y.alt||"")),Lr(N,D),y.keyboard&&(N.tabIndex="0",N.setAttribute("role","button")),this._icon=N,y.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nr(N,"focus",this._panOnFocus,this);var le=y.icon.createShadow(this._shadow),Ie=!1;le!==this._shadow&&(this._removeShadow(),Ie=!0),le&&(Lr(le,D),le.alt=""),this._shadow=le,y.opacity<1&&this._updateOpacity(),Q&&this.getPane().appendChild(this._icon),this._initInteraction(),le&&Ie&&this.getPane(y.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Gr(this._icon,"focus",this._panOnFocus,this),Ri(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ri(this._shadow),this._shadow=null},_setPos:function(y){this._icon&&Ui(this._icon,y),this._shadow&&Ui(this._shadow,y),this._zIndex=y.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(y){this._icon&&(this._icon.style.zIndex=this._zIndex+y)},_animateZoom:function(y){var D=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center).round();this._setPos(D)},_initInteraction:function(){if(this.options.interactive&&(Lr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),wl)){var y=this.options.draggable;this.dragging&&(y=this.dragging.enabled(),this.dragging.disable()),this.dragging=new wl(this),y&&this.dragging.enable()}},setOpacity:function(y){return this.options.opacity=y,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var y=this.options.opacity;this._icon&&as(this._icon,y),this._shadow&&as(this._shadow,y)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var y=this._map;if(y){var D=this.options.icon.options,N=D.iconSize?ie(D.iconSize):ie(0,0),Q=D.iconAnchor?ie(D.iconAnchor):ie(0,0);y.panInside(this._latlng,{paddingTopLeft:Q,paddingBottomRight:N.subtract(Q)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var qo=go.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(y){this._renderer=y.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(y){return Be(this,y),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&y&&Object.prototype.hasOwnProperty.call(y,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_a=qo.extend({options:{fill:!0,radius:10},initialize:function(y,D){Be(this,D),this._latlng=Ot(y),this._radius=this.options.radius},setLatLng:function(y){var D=this._latlng;return this._latlng=Ot(y),this.redraw(),this.fire("move",{oldLatLng:D,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(y){return this.options.radius=this._radius=y,this.redraw()},getRadius:function(){return this._radius},setStyle:function(y){var D=y&&y.radius||this._radius;return qo.prototype.setStyle.call(this,y),this.setRadius(D),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var y=this._radius,D=this._radiusY||y,N=this._clickTolerance(),Q=[y+N,D+N];this._pxBounds=new we(this._point.subtract(Q),this._point.add(Q))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(y){return y.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Ju=_a.extend({initialize:function(y,D,N){if("number"==typeof D&&(D=ye({},N,{radius:D})),Be(this,D),this._latlng=Ot(y),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(y){return this._mRadius=y,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var y=[this._radius,this._radiusY||this._radius];return new at(this._map.layerPointToLatLng(this._point.subtract(y)),this._map.layerPointToLatLng(this._point.add(y)))},setStyle:qo.prototype.setStyle,_project:function(){var y=this._latlng.lng,D=this._latlng.lat,N=this._map,Q=N.options.crs;if(Q.distance===rr.distance){var le=Math.PI/180,Ie=this._mRadius/rr.R/le,it=N.project([D+Ie,y]),Mt=N.project([D-Ie,y]),Ht=it.add(Mt).divideBy(2),wn=N.unproject(Ht).lat,dr=Math.acos((Math.cos(Ie*le)-Math.sin(D*le)*Math.sin(wn*le))/(Math.cos(D*le)*Math.cos(wn*le)))/le;(isNaN(dr)||0===dr)&&(dr=Ie/Math.cos(Math.PI/180*D)),this._point=Ht.subtract(N.getPixelOrigin()),this._radius=isNaN(dr)?0:Ht.x-N.project([wn,y-dr]).x,this._radiusY=Ht.y-it.y}else{var Br=Q.unproject(Q.project(this._latlng).subtract([this._mRadius,0]));this._point=N.latLngToLayerPoint(this._latlng),this._radius=this._point.x-N.latLngToLayerPoint(Br).x}this._updateBounds()}});var La=qo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(y,D){Be(this,D),this._setLatLngs(y)},getLatLngs:function(){return this._latlngs},setLatLngs:function(y){return this._setLatLngs(y),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(y){for(var le,Ie,D=1/0,N=null,Q=mo,it=0,Mt=this._parts.length;it<Mt;it++)for(var Ht=this._parts[it],wn=1,dr=Ht.length;wn<dr;wn++){var Br=Q(y,le=Ht[wn-1],Ie=Ht[wn],!0);Br<D&&(D=Br,N=Q(y,le,Ie))}return N&&(N.distance=Math.sqrt(D)),N},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Io(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(y,D){return D=D||this._defaultShape(),y=Ot(y),D.push(y),this._bounds.extend(y),this.redraw()},_setLatLngs:function(y){this._bounds=new at,this._latlngs=this._convertLatLngs(y)},_defaultShape:function(){return gi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(y){for(var D=[],N=gi(y),Q=0,le=y.length;Q<le;Q++)N?(D[Q]=Ot(y[Q]),this._bounds.extend(D[Q])):D[Q]=this._convertLatLngs(y[Q]);return D},_project:function(){var y=new we;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,y),this._bounds.isValid()&&y.isValid()&&(this._rawPxBounds=y,this._updateBounds())},_updateBounds:function(){var y=this._clickTolerance(),D=new k(y,y);!this._rawPxBounds||(this._pxBounds=new we([this._rawPxBounds.min.subtract(D),this._rawPxBounds.max.add(D)]))},_projectLatlngs:function(y,D,N){var Ie,it,le=y.length;if(y[0]instanceof nt){for(it=[],Ie=0;Ie<le;Ie++)it[Ie]=this._map.latLngToLayerPoint(y[Ie]),N.extend(it[Ie]);D.push(it)}else for(Ie=0;Ie<le;Ie++)this._projectLatlngs(y[Ie],D,N)},_clipPoints:function(){var y=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(y)){if(this.options.noClip)return void(this._parts=this._rings);var N,Q,le,Ie,it,Mt,Ht,D=this._parts;for(N=0,le=0,Ie=this._rings.length;N<Ie;N++)for(Q=0,it=(Ht=this._rings[N]).length;Q<it-1;Q++)(Mt=Oa(Ht[Q],Ht[Q+1],y,Q,!0))&&(D[le]=D[le]||[],D[le].push(Mt[0]),(Mt[1]!==Ht[Q+1]||Q===it-2)&&(D[le].push(Mt[1]),le++))}},_simplifyPoints:function(){for(var y=this._parts,D=this.options.smoothFactor,N=0,Q=y.length;N<Q;N++)y[N]=ja(y[N],D)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(y,D){var N,Q,le,Ie,it,Mt,Ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(N=0,Ie=this._parts.length;N<Ie;N++)for(Q=0,le=(it=(Mt=this._parts[N]).length)-1;Q<it;le=Q++)if((D||0!==Q)&&vo(y,Mt[le],Mt[Q])<=Ht)return!0;return!1}});La._flat=Mo;var Rc=La.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(y){var D=La.prototype._convertLatLngs.call(this,y),N=D.length;return N>=2&&D[0]instanceof nt&&D[0].equals(D[N-1])&&D.pop(),D},_setLatLngs:function(y){La.prototype._setLatLngs.call(this,y),gi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var y=this._renderer._bounds,D=this.options.weight,N=new k(D,D);if(y=new we(y.min.subtract(N),y.max.add(N)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(y)){if(this.options.noClip)return void(this._parts=this._rings);for(var Ie,Q=0,le=this._rings.length;Q<le;Q++)(Ie=cn(this._rings[Q],y,!0)).length&&this._parts.push(Ie)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(y){var N,Q,le,Ie,it,Mt,Ht,wn,D=!1;if(!this._pxBounds||!this._pxBounds.contains(y))return!1;for(Ie=0,Ht=this._parts.length;Ie<Ht;Ie++)for(it=0,Mt=(wn=(N=this._parts[Ie]).length)-1;it<wn;Mt=it++)(Q=N[it]).y>y.y!=(le=N[Mt]).y>y.y&&y.x<(le.x-Q.x)*(y.y-Q.y)/(le.y-Q.y)+Q.x&&(D=!D);return D||La.prototype._containsPoint.call(this,y,!0)}});var _o=yo.extend({initialize:function(y,D){Be(this,D),this._layers={},y&&this.addData(y)},addData:function(y){var N,Q,le,D=He(y)?y:y.features;if(D){for(N=0,Q=D.length;N<Q;N++)((le=D[N]).geometries||le.geometry||le.features||le.coordinates)&&this.addData(le);return this}var Ie=this.options;if(Ie.filter&&!Ie.filter(y))return this;var it=Ei(y,Ie);return it?(it.feature=zl(y),it.defaultOptions=it.options,this.resetStyle(it),Ie.onEachFeature&&Ie.onEachFeature(y,it),this.addLayer(it)):this},resetStyle:function(y){return void 0===y?this.eachLayer(this.resetStyle,this):(y.options=ye({},y.defaultOptions),this._setLayerStyle(y,this.options.style),this)},setStyle:function(y){return this.eachLayer(function(D){this._setLayerStyle(D,y)},this)},_setLayerStyle:function(y,D){y.setStyle&&("function"==typeof D&&(D=D(y.feature)),y.setStyle(D))}});function Ei(A,y){var it,Mt,Ht,wn,D="Feature"===A.type?A.geometry:A,N=D?D.coordinates:null,Q=[],le=y&&y.pointToLayer,Ie=y&&y.coordsToLatLng||Da;if(!N&&!D)return null;switch(D.type){case"Point":return ds(le,A,it=Ie(N),y);case"MultiPoint":for(Ht=0,wn=N.length;Ht<wn;Ht++)it=Ie(N[Ht]),Q.push(ds(le,A,it,y));return new yo(Q);case"LineString":case"MultiLineString":return Mt=Js(N,"LineString"===D.type?0:1,Ie),new La(Mt,y);case"Polygon":case"MultiPolygon":return Mt=Js(N,"Polygon"===D.type?1:2,Ie),new Rc(Mt,y);case"GeometryCollection":for(Ht=0,wn=D.geometries.length;Ht<wn;Ht++){var dr=Ei({geometry:D.geometries[Ht],type:"Feature",properties:A.properties},y);dr&&Q.push(dr)}return new yo(Q);case"FeatureCollection":for(Ht=0,wn=D.features.length;Ht<wn;Ht++){var Br=Ei(D.features[Ht],y);Br&&Q.push(Br)}return new yo(Q);default:throw new Error("Invalid GeoJSON object.")}}function ds(A,y,D,N){return A?A(y,D):new tn(D,N&&N.markersInheritOptions&&N)}function Da(A){return new nt(A[1],A[0],A[2])}function Js(A,y,D){for(var Ie,N=[],Q=0,le=A.length;Q<le;Q++)Ie=y?Js(A[Q],y-1,D):(D||Da)(A[Q]),N.push(Ie);return N}function Yo(A,y){return void 0!==(A=Ot(A)).alt?[Ae(A.lng,y),Ae(A.lat,y),Ae(A.alt,y)]:[Ae(A.lng,y),Ae(A.lat,y)]}function Po(A,y,D,N){for(var Q=[],le=0,Ie=A.length;le<Ie;le++)Q.push(y?Po(A[le],gi(A[le])?0:y-1,D,N):Yo(A[le],N));return!y&&D&&Q.length>0&&Q.push(Q[0].slice()),Q}function El(A,y){return A.feature?ye({},A.feature,{geometry:y}):zl(y)}function zl(A){return"Feature"===A.type||"FeatureCollection"===A.type?A:{type:"Feature",properties:{},geometry:A}}var Hl={toGeoJSON:function(y){return El(this,{type:"Point",coordinates:Yo(this.getLatLng(),y)})}};function kl(A,y){return new _o(A,y)}tn.include(Hl),Ju.include(Hl),_a.include(Hl),La.include({toGeoJSON:function(y){var D=!gi(this._latlngs);return El(this,{type:(D?"Multi":"")+"LineString",coordinates:Po(this._latlngs,D?1:0,!1,y)})}}),Rc.include({toGeoJSON:function(y){var D=!gi(this._latlngs),N=D&&!gi(this._latlngs[0]),Q=Po(this._latlngs,N?2:D?1:0,!0,y);return D||(Q=[Q]),El(this,{type:(N?"Multi":"")+"Polygon",coordinates:Q})}}),kr.include({toMultiPoint:function(y){var D=[];return this.eachLayer(function(N){D.push(N.toGeoJSON(y).geometry.coordinates)}),El(this,{type:"MultiPoint",coordinates:D})},toGeoJSON:function(y){var D=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===D)return this.toMultiPoint(y);var N="GeometryCollection"===D,Q=[];return this.eachLayer(function(le){if(le.toGeoJSON){var Ie=le.toGeoJSON(y);if(N)Q.push(Ie.geometry);else{var it=zl(Ie);"FeatureCollection"===it.type?Q.push.apply(Q,it.features):Q.push(it)}}}),N?El(this,{geometries:Q,type:"GeometryCollection"}):{type:"FeatureCollection",features:Q}}});var Gl=kl,jl=go.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(y,D,N){this._url=y,this._bounds=bt(D),Be(this,N)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Lr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ri(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(y){return this.options.opacity=y,this._image&&this._updateOpacity(),this},setStyle:function(y){return y.opacity&&this.setOpacity(y.opacity),this},bringToFront:function(){return this._map&&Gs(this._image),this},bringToBack:function(){return this._map&&ua(this._image),this},setUrl:function(y){return this._url=y,this._image&&(this._image.src=y),this},setBounds:function(y){return this._bounds=bt(y),this._map&&this._reset(),this},getEvents:function(){var y={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var y="IMG"===this._url.tagName,D=this._image=y?this._url:ir("img");Lr(D,"leaflet-image-layer"),this._zoomAnimated&&Lr(D,"leaflet-zoom-animated"),this.options.className&&Lr(D,this.options.className),D.onselectstart=v,D.onmousemove=v,D.onload=M(this.fire,this,"load"),D.onerror=M(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(D.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),y?this._url=D.src:(D.src=this._url,D.alt=this.options.alt)},_animateZoom:function(y){var D=this._map.getZoomScale(y.zoom),N=this._map._latLngBoundsToNewLayerBounds(this._bounds,y.zoom,y.center).min;Ra(this._image,N,D)},_reset:function(){var y=this._image,D=new we(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),N=D.getSize();Ui(y,D.min),y.style.width=N.x+"px",y.style.height=N.y+"px"},_updateOpacity:function(){as(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var y=this.options.errorOverlayUrl;y&&this._url!==y&&(this._url=y,this._image.src=y)},getCenter:function(){return this._bounds.getCenter()}}),Cl=jl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var y="VIDEO"===this._url.tagName,D=this._image=y?this._url:ir("video");if(Lr(D,"leaflet-image-layer"),this._zoomAnimated&&Lr(D,"leaflet-zoom-animated"),this.options.className&&Lr(D,this.options.className),D.onselectstart=v,D.onmousemove=v,D.onloadeddata=M(this.fire,this,"load"),y){for(var N=D.getElementsByTagName("source"),Q=[],le=0;le<N.length;le++)Q.push(N[le].src);this._url=N.length>0?Q:[D.src]}else{He(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(D.style,"objectFit")&&(D.style.objectFit="fill"),D.autoplay=!!this.options.autoplay,D.loop=!!this.options.loop,D.muted=!!this.options.muted,D.playsInline=!!this.options.playsInline;for(var Ie=0;Ie<this._url.length;Ie++){var it=ir("source");it.src=this._url[Ie],D.appendChild(it)}}}});var dh=jl.extend({_initImage:function(){var y=this._image=this._url;Lr(y,"leaflet-image-layer"),this._zoomAnimated&&Lr(y,"leaflet-zoom-animated"),this.options.className&&Lr(y,this.options.className),y.onselectstart=v,y.onmousemove=v}});var bo=go.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(y,D){y&&(y instanceof nt||He(y))?(this._latlng=Ot(y),Be(this,D)):(Be(this,y),this._source=D),this.options.content&&(this._content=this.options.content)},openOn:function(y){return(y=arguments.length?y:this._source._map).hasLayer(this)||y.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(y){return this._map?this.close():(arguments.length?this._source=y:y=this._source,this._prepareOpen(),this.openOn(y._map)),this},onAdd:function(y){this._zoomAnimated=y._zoomAnimated,this._container||this._initLayout(),y._fadeAnimated&&as(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),y._fadeAnimated&&as(this._container,1),this.bringToFront(),this.options.interactive&&(Lr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(y){y._fadeAnimated?(as(this._container,0),this._removeTimeout=setTimeout(M(Ri,void 0,this._container),200)):Ri(this._container),this.options.interactive&&($n(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(y){return this._latlng=Ot(y),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(y){return this._content=y,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var y={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gs(this._container),this},bringToBack:function(){return this._map&&ua(this._container),this},_prepareOpen:function(y){var D=this._source;if(!D._map)return!1;if(D instanceof yo){D=null;var N=this._source._layers;for(var Q in N)if(N[Q]._map){D=N[Q];break}if(!D)return!1;this._source=D}if(!y)if(D.getCenter)y=D.getCenter();else if(D.getLatLng)y=D.getLatLng();else{if(!D.getBounds)throw new Error("Unable to get source layer LatLng.");y=D.getBounds().getCenter()}return this.setLatLng(y),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var y=this._contentNode,D="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof D)y.innerHTML=D;else{for(;y.hasChildNodes();)y.removeChild(y.firstChild);y.appendChild(D)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var y=this._map.latLngToLayerPoint(this._latlng),D=ie(this.options.offset),N=this._getAnchor();this._zoomAnimated?Ui(this._container,y.add(N)):D=D.add(y).add(N);var Q=this._containerBottom=-D.y,le=this._containerLeft=-Math.round(this._containerWidth/2)+D.x;this._container.style.bottom=Q+"px",this._container.style.left=le+"px"}},_getAnchor:function(){return[0,0]}});Di.include({_initOverlay:function(y,D,N,Q){var le=D;return le instanceof y||(le=new y(Q).setContent(D)),N&&le.setLatLng(N),le}}),go.include({_initOverlay:function(y,D,N,Q){var le=N;return le instanceof y?(Be(le,Q),le._source=this):(le=D&&!Q?D:new y(Q,this)).setContent(N),le}});var Dl=bo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(y){return!(y=arguments.length?y:this._source._map).hasLayer(this)&&y._popup&&y._popup.options.autoClose&&y.removeLayer(y._popup),y._popup=this,bo.prototype.openOn.call(this,y)},onAdd:function(y){bo.prototype.onAdd.call(this,y),y.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qo||this._source.on("preclick",vu))},onRemove:function(y){bo.prototype.onRemove.call(this,y),y.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qo||this._source.off("preclick",vu))},getEvents:function(){var y=bo.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(y.preclick=this.close),this.options.keepInView&&(y.moveend=this._adjustPan),y},_initLayout:function(){var y="leaflet-popup",D=this._container=ir("div",y+" "+(this.options.className||"")+" leaflet-zoom-animated"),N=this._wrapper=ir("div",y+"-content-wrapper",D);if(this._contentNode=ir("div",y+"-content",N),yl(D),Xh(this._contentNode),Nr(D,"contextmenu",vu),this._tipContainer=ir("div",y+"-tip-container",D),this._tip=ir("div",y+"-tip",this._tipContainer),this.options.closeButton){var Q=this._closeButton=ir("a",y+"-close-button",D);Q.setAttribute("role","button"),Q.setAttribute("aria-label","Close popup"),Q.href="#close",Q.innerHTML='<span aria-hidden="true">&#215;</span>',Nr(Q,"click",function(le){Zs(le),this.close()},this)}},_updateLayout:function(){var y=this._contentNode,D=y.style;D.width="",D.whiteSpace="nowrap";var N=y.offsetWidth;N=Math.min(N,this.options.maxWidth),N=Math.max(N,this.options.minWidth),D.width=N+1+"px",D.whiteSpace="",D.height="";var le=this.options.maxHeight,Ie="leaflet-popup-scrolled";le&&y.offsetHeight>le?(D.height=le+"px",Lr(y,Ie)):$n(y,Ie),this._containerWidth=this._container.offsetWidth},_animateZoom:function(y){var D=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center),N=this._getAnchor();Ui(this._container,D.add(N))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var y=this._map,D=parseInt(Ii(this._container,"marginBottom"),10)||0,N=this._container.offsetHeight+D,Q=this._containerWidth,le=new k(this._containerLeft,-N-this._containerBottom);le._add(ya(this._container));var Ie=y.layerPointToContainerPoint(le),it=ie(this.options.autoPanPadding),Mt=ie(this.options.autoPanPaddingTopLeft||it),Ht=ie(this.options.autoPanPaddingBottomRight||it),wn=y.getSize(),dr=0,Br=0;Ie.x+Q+Ht.x>wn.x&&(dr=Ie.x+Q-wn.x+Ht.x),Ie.x-dr-Mt.x<0&&(dr=Ie.x-Mt.x),Ie.y+N+Ht.y>wn.y&&(Br=Ie.y+N-wn.y+Ht.y),Ie.y-Br-Mt.y<0&&(Br=Ie.y-Mt.y),(dr||Br)&&(this.options.keepInView&&(this._autopanning=!0),y.fire("autopanstart").panBy([dr,Br]))}},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Di.mergeOptions({closePopupOnClick:!0}),Di.include({openPopup:function(y,D,N){return this._initOverlay(Dl,y,D,N).openOn(this),this},closePopup:function(y){return(y=arguments.length?y:this._popup)&&y.close(),this}}),go.include({bindPopup:function(y,D){return this._popup=this._initOverlay(Dl,this._popup,y,D),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(y){return this._popup&&(this instanceof yo||(this._popup._source=this),this._popup._prepareOpen(y||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(y){return this._popup&&this._popup.setContent(y),this},getPopup:function(){return this._popup},_openPopup:function(y){if(this._popup&&this._map){$u(y);var D=y.layer||y.target;if(this._popup._source===D&&!(D instanceof qo))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(y.latlng));this._popup._source=D,this.openPopup(y.latlng)}},_movePopup:function(y){this._popup.setLatLng(y.latlng)},_onKeyPress:function(y){13===y.originalEvent.keyCode&&this._openPopup(y)}});var Xe=bo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(y){bo.prototype.onAdd.call(this,y),this.setOpacity(this.options.opacity),y.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(y){bo.prototype.onRemove.call(this,y),y.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var y=bo.prototype.getEvents.call(this);return this.options.permanent||(y.preclick=this.close),y},_initLayout:function(){this._contentNode=this._container=ir("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+oe(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(y){var D,N,Q=this._map,le=this._container,Ie=Q.latLngToContainerPoint(Q.getCenter()),it=Q.layerPointToContainerPoint(y),Mt=this.options.direction,Ht=le.offsetWidth,wn=le.offsetHeight,dr=ie(this.options.offset),Br=this._getAnchor();"top"===Mt?(D=Ht/2,N=wn):"bottom"===Mt?(D=Ht/2,N=0):"center"===Mt?(D=Ht/2,N=wn/2):"right"===Mt?(D=0,N=wn/2):"left"===Mt?(D=Ht,N=wn/2):it.x<Ie.x?(Mt="right",D=0,N=wn/2):(Mt="left",D=Ht+2*(dr.x+Br.x),N=wn/2),y=y.subtract(ie(D,N,!0)).add(dr).add(Br),$n(le,"leaflet-tooltip-right"),$n(le,"leaflet-tooltip-left"),$n(le,"leaflet-tooltip-top"),$n(le,"leaflet-tooltip-bottom"),Lr(le,"leaflet-tooltip-"+Mt),Ui(le,y)},_updatePosition:function(){var y=this._map.latLngToLayerPoint(this._latlng);this._setPosition(y)},setOpacity:function(y){this.options.opacity=y,this._container&&as(this._container,y)},_animateZoom:function(y){var D=this._map._latLngToNewLayerPoint(this._latlng,y.zoom,y.center);this._setPosition(D)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Di.include({openTooltip:function(y,D,N){return this._initOverlay(Xe,y,D,N).openOn(this),this},closeTooltip:function(y){return y.close(),this}}),go.include({bindTooltip:function(y,D){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xe,this._tooltip,y,D),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(y){if(y||!this._tooltipHandlersAdded){var D=y?"off":"on",N={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?N.add=this._openTooltip:(N.mouseover=this._openTooltip,N.mouseout=this.closeTooltip,N.click=this._openTooltip,this._map?this._addFocusListeners():N.add=this._addFocusListeners),this._tooltip.options.sticky&&(N.mousemove=this._moveTooltip),this[D](N),this._tooltipHandlersAdded=!y}},openTooltip:function(y){return this._tooltip&&(this instanceof yo||(this._tooltip._source=this),this._tooltip._prepareOpen(y)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(y){return this._tooltip&&this._tooltip.setContent(y),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(y){var D="function"==typeof y.getElement&&y.getElement();D&&(Nr(D,"focus",function(){this._tooltip._source=y,this.openTooltip()},this),Nr(D,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(y){var D="function"==typeof y.getElement&&y.getElement();D&&D.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(y){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var D=this;return void this._map.once("moveend",function(){D._openOnceFlag=!1,D._openTooltip(y)})}this._tooltip._source=y.layer||y.target,this.openTooltip(this._tooltip.options.sticky?y.latlng:void 0)}},_moveTooltip:function(y){var N,Q,D=y.latlng;this._tooltip.options.sticky&&y.originalEvent&&(N=this._map.mouseEventToContainerPoint(y.originalEvent),Q=this._map.containerPointToLayerPoint(N),D=this._map.layerPointToLatLng(Q)),this._tooltip.setLatLng(D)}});var dt=Qu.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(y){var D=y&&"DIV"===y.tagName?y:document.createElement("div"),N=this.options;if(N.html instanceof Element?(Fa(D),D.appendChild(N.html)):D.innerHTML=!1!==N.html?N.html:"",N.bgPos){var Q=ie(N.bgPos);D.style.backgroundPosition=-Q.x+"px "+-Q.y+"px"}return this._setIconStyles(D,"icon"),D},createShadow:function(){return null}});Qu.Default=bl;var yt=go.extend({options:{tileSize:256,opacity:1,updateWhenIdle:In.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(y){Be(this,y)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(y){y._addZoomLimit(this)},onRemove:function(y){this._removeAllTiles(),Ri(this._container),y._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ua(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(y){return this.options.opacity=y,this._updateOpacity(),this},setZIndex:function(y){return this.options.zIndex=y,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var y=this._clampZoom(this._map.getZoom());y!==this._tileZoom&&(this._tileZoom=y,this._updateLevels()),this._update()}return this},getEvents:function(){var y={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Ve(this._onMoveEnd,this.options.updateInterval,this)),y.move=this._onMove),this._zoomAnimated&&(y.zoomanim=this._animateZoom),y},createTile:function(){return document.createElement("div")},getTileSize:function(){var y=this.options.tileSize;return y instanceof k?y:new k(y,y)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(y){for(var Ie,D=this.getPane().children,N=-y(-1/0,1/0),Q=0,le=D.length;Q<le;Q++)Ie=D[Q].style.zIndex,D[Q]!==this._container&&Ie&&(N=y(N,+Ie));isFinite(N)&&(this.options.zIndex=N+y(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!In.ielt9){as(this._container,this.options.opacity);var y=+new Date,D=!1,N=!1;for(var Q in this._tiles){var le=this._tiles[Q];if(le.current&&le.loaded){var Ie=Math.min(1,(y-le.loaded)/200);as(le.el,Ie),Ie<1?D=!0:(le.active?N=!0:this._onOpaqueTile(le),le.active=!0)}}N&&!this._noPrune&&this._pruneTiles(),D&&(nn(this._fadeFrame),this._fadeFrame=mn(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=ir("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var y=this._tileZoom,D=this.options.maxZoom;if(void 0!==y){for(var N in this._levels)N=Number(N),this._levels[N].el.children.length||N===y?(this._levels[N].el.style.zIndex=D-Math.abs(y-N),this._onUpdateLevel(N)):(Ri(this._levels[N].el),this._removeTilesAtZoom(N),this._onRemoveLevel(N),delete this._levels[N]);var Q=this._levels[y],le=this._map;return Q||((Q=this._levels[y]={}).el=ir("div","leaflet-tile-container leaflet-zoom-animated",this._container),Q.el.style.zIndex=D,Q.origin=le.project(le.unproject(le.getPixelOrigin()),y).round(),Q.zoom=y,this._setZoomTransform(Q,le.getCenter(),le.getZoom()),this._onCreateLevel(Q)),this._level=Q,Q}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var y,D,N=this._map.getZoom();if(N>this.options.maxZoom||N<this.options.minZoom)return void this._removeAllTiles();for(y in this._tiles)(D=this._tiles[y]).retain=D.current;for(y in this._tiles)if((D=this._tiles[y]).current&&!D.active){var Q=D.coords;this._retainParent(Q.x,Q.y,Q.z,Q.z-5)||this._retainChildren(Q.x,Q.y,Q.z,Q.z+2)}for(y in this._tiles)this._tiles[y].retain||this._removeTile(y)}},_removeTilesAtZoom:function(y){for(var D in this._tiles)this._tiles[D].coords.z===y&&this._removeTile(D)},_removeAllTiles:function(){for(var y in this._tiles)this._removeTile(y)},_invalidateAll:function(){for(var y in this._levels)Ri(this._levels[y].el),this._onRemoveLevel(Number(y)),delete this._levels[y];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(y,D,N,Q){var le=Math.floor(y/2),Ie=Math.floor(D/2),it=N-1,Mt=new k(+le,+Ie);Mt.z=+it;var Ht=this._tileCoordsToKey(Mt),wn=this._tiles[Ht];return wn&&wn.active?(wn.retain=!0,!0):(wn&&wn.loaded&&(wn.retain=!0),it>Q&&this._retainParent(le,Ie,it,Q))},_retainChildren:function(y,D,N,Q){for(var le=2*y;le<2*y+2;le++)for(var Ie=2*D;Ie<2*D+2;Ie++){var it=new k(le,Ie);it.z=N+1;var Mt=this._tileCoordsToKey(it),Ht=this._tiles[Mt];Ht&&Ht.active?Ht.retain=!0:(Ht&&Ht.loaded&&(Ht.retain=!0),N+1<Q&&this._retainChildren(le,Ie,N+1,Q))}},_resetView:function(y){var D=y&&(y.pinch||y.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),D,D)},_animateZoom:function(y){this._setView(y.center,y.zoom,!0,y.noUpdate)},_clampZoom:function(y){var D=this.options;return void 0!==D.minNativeZoom&&y<D.minNativeZoom?D.minNativeZoom:void 0!==D.maxNativeZoom&&D.maxNativeZoom<y?D.maxNativeZoom:y},_setView:function(y,D,N,Q){var le=Math.round(D);le=void 0!==this.options.maxZoom&&le>this.options.maxZoom||void 0!==this.options.minZoom&&le<this.options.minZoom?void 0:this._clampZoom(le),(!Q||this.options.updateWhenZooming&&le!==this._tileZoom)&&(this._tileZoom=le,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==le&&this._update(y),N||this._pruneTiles(),this._noPrune=!!N),this._setZoomTransforms(y,D)},_setZoomTransforms:function(y,D){for(var N in this._levels)this._setZoomTransform(this._levels[N],y,D)},_setZoomTransform:function(y,D,N){var Q=this._map.getZoomScale(N,y.zoom),le=y.origin.multiplyBy(Q).subtract(this._map._getNewPixelOrigin(D,N)).round();In.any3d?Ra(y.el,le,Q):Ui(y.el,le)},_resetGrid:function(){var y=this._map,D=y.options.crs,N=this._tileSize=this.getTileSize(),Q=this._tileZoom,le=this._map.getPixelWorldBounds(this._tileZoom);le&&(this._globalTileRange=this._pxBoundsToTileRange(le)),this._wrapX=D.wrapLng&&!this.options.noWrap&&[Math.floor(y.project([0,D.wrapLng[0]],Q).x/N.x),Math.ceil(y.project([0,D.wrapLng[1]],Q).x/N.y)],this._wrapY=D.wrapLat&&!this.options.noWrap&&[Math.floor(y.project([D.wrapLat[0],0],Q).y/N.x),Math.ceil(y.project([D.wrapLat[1],0],Q).y/N.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(y){var D=this._map,N=D._animatingZoom?Math.max(D._animateToZoom,D.getZoom()):D.getZoom(),Q=D.getZoomScale(N,this._tileZoom),le=D.project(y,this._tileZoom).floor(),Ie=D.getSize().divideBy(2*Q);return new we(le.subtract(Ie),le.add(Ie))},_update:function(y){var D=this._map;if(D){var N=this._clampZoom(D.getZoom());if(void 0===y&&(y=D.getCenter()),void 0!==this._tileZoom){var Q=this._getTiledPixelBounds(y),le=this._pxBoundsToTileRange(Q),Ie=le.getCenter(),it=[],Mt=this.options.keepBuffer,Ht=new we(le.getBottomLeft().subtract([Mt,-Mt]),le.getTopRight().add([Mt,-Mt]));if(!(isFinite(le.min.x)&&isFinite(le.min.y)&&isFinite(le.max.x)&&isFinite(le.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var wn in this._tiles){var dr=this._tiles[wn].coords;(dr.z!==this._tileZoom||!Ht.contains(new k(dr.x,dr.y)))&&(this._tiles[wn].current=!1)}if(Math.abs(N-this._tileZoom)>1)return void this._setView(y,N);for(var Br=le.min.y;Br<=le.max.y;Br++)for(var fa=le.min.x;fa<=le.max.x;fa++){var da=new k(fa,Br);if(da.z=this._tileZoom,this._isValidTile(da)){var Xa=this._tiles[this._tileCoordsToKey(da)];Xa?Xa.current=!0:it.push(da)}}if(it.sort(function(Iu,yc){return Iu.distanceTo(Ie)-yc.distanceTo(Ie)}),0!==it.length){this._loading||(this._loading=!0,this.fire("loading"));var Qa=document.createDocumentFragment();for(fa=0;fa<it.length;fa++)this._addTile(it[fa],Qa);this._level.el.appendChild(Qa)}}}},_isValidTile:function(y){var D=this._map.options.crs;if(!D.infinite){var N=this._globalTileRange;if(!D.wrapLng&&(y.x<N.min.x||y.x>N.max.x)||!D.wrapLat&&(y.y<N.min.y||y.y>N.max.y))return!1}if(!this.options.bounds)return!0;var Q=this._tileCoordsToBounds(y);return bt(this.options.bounds).overlaps(Q)},_keyToBounds:function(y){return this._tileCoordsToBounds(this._keyToTileCoords(y))},_tileCoordsToNwSe:function(y){var D=this._map,N=this.getTileSize(),Q=y.scaleBy(N),le=Q.add(N);return[D.unproject(Q,y.z),D.unproject(le,y.z)]},_tileCoordsToBounds:function(y){var D=this._tileCoordsToNwSe(y),N=new at(D[0],D[1]);return this.options.noWrap||(N=this._map.wrapLatLngBounds(N)),N},_tileCoordsToKey:function(y){return y.x+":"+y.y+":"+y.z},_keyToTileCoords:function(y){var D=y.split(":"),N=new k(+D[0],+D[1]);return N.z=+D[2],N},_removeTile:function(y){var D=this._tiles[y];!D||(Ri(D.el),delete this._tiles[y],this.fire("tileunload",{tile:D.el,coords:this._keyToTileCoords(y)}))},_initTile:function(y){Lr(y,"leaflet-tile");var D=this.getTileSize();y.style.width=D.x+"px",y.style.height=D.y+"px",y.onselectstart=v,y.onmousemove=v,In.ielt9&&this.options.opacity<1&&as(y,this.options.opacity)},_addTile:function(y,D){var N=this._getTilePos(y),Q=this._tileCoordsToKey(y),le=this.createTile(this._wrapCoords(y),M(this._tileReady,this,y));this._initTile(le),this.createTile.length<2&&mn(M(this._tileReady,this,y,null,le)),Ui(le,N),this._tiles[Q]={el:le,coords:y,current:!0},D.appendChild(le),this.fire("tileloadstart",{tile:le,coords:y})},_tileReady:function(y,D,N){D&&this.fire("tileerror",{error:D,tile:N,coords:y});var Q=this._tileCoordsToKey(y);(N=this._tiles[Q])&&(N.loaded=+new Date,this._map._fadeAnimated?(as(N.el,0),nn(this._fadeFrame),this._fadeFrame=mn(this._updateOpacity,this)):(N.active=!0,this._pruneTiles()),D||(Lr(N.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:N.el,coords:y})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),In.ielt9||!this._map._fadeAnimated?mn(this._pruneTiles,this):setTimeout(M(this._pruneTiles,this),250)))},_getTilePos:function(y){return y.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(y){var D=new k(this._wrapX?Te(y.x,this._wrapX):y.x,this._wrapY?Te(y.y,this._wrapY):y.y);return D.z=y.z,D},_pxBoundsToTileRange:function(y){var D=this.getTileSize();return new we(y.min.unscaleBy(D).floor(),y.max.unscaleBy(D).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var y in this._tiles)if(!this._tiles[y].loaded)return!1;return!0}});var Xt=yt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(y,D){this._url=y,(D=Be(this,D)).detectRetina&&In.retina&&D.maxZoom>0?(D.tileSize=Math.floor(D.tileSize/2),D.zoomReverse?(D.zoomOffset--,D.minZoom=Math.min(D.maxZoom,D.minZoom+1)):(D.zoomOffset++,D.maxZoom=Math.max(D.minZoom,D.maxZoom-1)),D.minZoom=Math.max(0,D.minZoom)):D.zoomReverse?D.minZoom=Math.min(D.maxZoom,D.minZoom):D.maxZoom=Math.max(D.minZoom,D.maxZoom),"string"==typeof D.subdomains&&(D.subdomains=D.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(y,D){return this._url===y&&void 0===D&&(D=!0),this._url=y,D||this.redraw(),this},createTile:function(y,D){var N=document.createElement("img");return Nr(N,"load",M(this._tileOnLoad,this,D,N)),Nr(N,"error",M(this._tileOnError,this,D,N)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(N.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(N.referrerPolicy=this.options.referrerPolicy),N.alt="",N.src=this.getTileUrl(y),N},getTileUrl:function(y){var D={r:In.retina?"@2x":"",s:this._getSubdomain(y),x:y.x,y:y.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var N=this._globalTileRange.max.y-y.y;this.options.tms&&(D.y=N),D["-y"]=N}return Ne(this._url,ye(D,this.options))},_tileOnLoad:function(y,D){In.ielt9?setTimeout(M(y,this,null,D),0):y(null,D)},_tileOnError:function(y,D,N){var Q=this.options.errorTileUrl;Q&&D.getAttribute("src")!==Q&&(D.src=Q),y(N,D)},_onTileRemove:function(y){y.tile.onload=null},_getZoomForUrl:function(){var y=this._tileZoom;return this.options.zoomReverse&&(y=this.options.maxZoom-y),y+this.options.zoomOffset},_getSubdomain:function(y){var D=Math.abs(y.x+y.y)%this.options.subdomains.length;return this.options.subdomains[D]},_abortLoading:function(){var y,D;for(y in this._tiles)if(this._tiles[y].coords.z!==this._tileZoom&&((D=this._tiles[y].el).onload=v,D.onerror=v,!D.complete)){D.src=tt;var N=this._tiles[y].coords;Ri(D),delete this._tiles[y],this.fire("tileabort",{tile:D,coords:N})}},_removeTile:function(y){var D=this._tiles[y];if(D)return D.el.setAttribute("src",tt),yt.prototype._removeTile.call(this,y)},_tileReady:function(y,D,N){if(this._map&&(!N||N.getAttribute("src")!==tt))return yt.prototype._tileReady.call(this,y,D,N)}});function xn(A,y){return new Xt(A,y)}var zn=Xt.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(y,D){this._url=y;var N=ye({},this.defaultWmsParams);for(var Q in D)Q in this.options||(N[Q]=D[Q]);var le=(D=Be(this,D)).detectRetina&&In.retina?2:1,Ie=this.getTileSize();N.width=Ie.x*le,N.height=Ie.y*le,this.wmsParams=N},onAdd:function(y){this._crs=this.options.crs||y.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,Xt.prototype.onAdd.call(this,y)},getTileUrl:function(y){var D=this._tileCoordsToNwSe(y),N=this._crs,Q=Le(N.project(D[0]),N.project(D[1])),le=Q.min,Ie=Q.max,it=(this._wmsVersion>=1.3&&this._crs===Bs?[le.y,le.x,Ie.y,Ie.x]:[le.x,le.y,Ie.x,Ie.y]).join(","),Mt=Xt.prototype.getTileUrl.call(this,y);return Mt+ae(this.wmsParams,Mt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+it},setParams:function(y,D){return ye(this.wmsParams,y),D||this.redraw(),this}});Xt.WMS=zn,xn.wms=function(A,y){return new zn(A,y)};var gr=go.extend({options:{padding:.1},initialize:function(y){Be(this,y),oe(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Lr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var y={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(y.zoomanim=this._onAnimZoom),y},_onAnimZoom:function(y){this._updateTransform(y.center,y.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(y,D){var N=this._map.getZoomScale(D,this._zoom),Q=this._map.getSize().multiplyBy(.5+this.options.padding),le=this._map.project(this._center,D),Ie=Q.multiplyBy(-N).add(le).subtract(this._map._getNewPixelOrigin(y,D));In.any3d?Ra(this._container,Ie,N):Ui(this._container,Ie)},_reset:function(){for(var y in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[y]._reset()},_onZoomEnd:function(){for(var y in this._layers)this._layers[y]._project()},_updatePaths:function(){for(var y in this._layers)this._layers[y]._update()},_update:function(){var y=this.options.padding,D=this._map.getSize(),N=this._map.containerPointToLayerPoint(D.multiplyBy(-y)).round();this._bounds=new we(N,N.add(D.multiplyBy(1+2*y)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Pr=gr.extend({options:{tolerance:0},getEvents:function(){var y=gr.prototype.getEvents.call(this);return y.viewprereset=this._onViewPreReset,y},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var y=this._container=document.createElement("canvas");Nr(y,"mousemove",this._onMouseMove,this),Nr(y,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nr(y,"mouseout",this._handleMouseOut,this),y._leaflet_disable_events=!0,this._ctx=y.getContext("2d")},_destroyContainer:function(){nn(this._redrawRequest),delete this._ctx,Ri(this._container),Gr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var D in this._redrawBounds=null,this._layers)this._layers[D]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){gr.prototype._update.call(this);var y=this._bounds,D=this._container,N=y.getSize(),Q=In.retina?2:1;Ui(D,y.min),D.width=Q*N.x,D.height=Q*N.y,D.style.width=N.x+"px",D.style.height=N.y+"px",In.retina&&this._ctx.scale(2,2),this._ctx.translate(-y.min.x,-y.min.y),this.fire("update")}},_reset:function(){gr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(y){this._updateDashArray(y),this._layers[oe(y)]=y;var D=y._order={layer:y,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=D),this._drawLast=D,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(y){this._requestRedraw(y)},_removePath:function(y){var D=y._order,N=D.next,Q=D.prev;N?N.prev=Q:this._drawLast=Q,Q?Q.next=N:this._drawFirst=N,delete y._order,delete this._layers[oe(y)],this._requestRedraw(y)},_updatePath:function(y){this._extendRedrawBounds(y),y._project(),y._update(),this._requestRedraw(y)},_updateStyle:function(y){this._updateDashArray(y),this._requestRedraw(y)},_updateDashArray:function(y){if("string"==typeof y.options.dashArray){var Q,le,D=y.options.dashArray.split(/[, ]+/),N=[];for(le=0;le<D.length;le++){if(Q=Number(D[le]),isNaN(Q))return;N.push(Q)}y.options._dashArray=N}else y.options._dashArray=y.options.dashArray},_requestRedraw:function(y){!this._map||(this._extendRedrawBounds(y),this._redrawRequest=this._redrawRequest||mn(this._redraw,this))},_extendRedrawBounds:function(y){if(y._pxBounds){var D=(y.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new we,this._redrawBounds.extend(y._pxBounds.min.subtract([D,D])),this._redrawBounds.extend(y._pxBounds.max.add([D,D]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var y=this._redrawBounds;if(y){var D=y.getSize();this._ctx.clearRect(y.min.x,y.min.y,D.x,D.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var y,D=this._redrawBounds;if(this._ctx.save(),D){var N=D.getSize();this._ctx.beginPath(),this._ctx.rect(D.min.x,D.min.y,N.x,N.y),this._ctx.clip()}this._drawing=!0;for(var Q=this._drawFirst;Q;Q=Q.next)y=Q.layer,(!D||y._pxBounds&&y._pxBounds.intersects(D))&&y._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(y,D){if(this._drawing){var N,Q,le,Ie,it=y._parts,Mt=it.length,Ht=this._ctx;if(Mt){for(Ht.beginPath(),N=0;N<Mt;N++){for(Q=0,le=it[N].length;Q<le;Q++)Ht[Q?"lineTo":"moveTo"]((Ie=it[N][Q]).x,Ie.y);D&&Ht.closePath()}this._fillStroke(Ht,y)}}},_updateCircle:function(y){if(this._drawing&&!y._empty()){var D=y._point,N=this._ctx,Q=Math.max(Math.round(y._radius),1),le=(Math.max(Math.round(y._radiusY),1)||Q)/Q;1!==le&&(N.save(),N.scale(1,le)),N.beginPath(),N.arc(D.x,D.y/le,Q,0,2*Math.PI,!1),1!==le&&N.restore(),this._fillStroke(N,y)}},_fillStroke:function(y,D){var N=D.options;N.fill&&(y.globalAlpha=N.fillOpacity,y.fillStyle=N.fillColor||N.color,y.fill(N.fillRule||"evenodd")),N.stroke&&0!==N.weight&&(y.setLineDash&&y.setLineDash(D.options&&D.options._dashArray||[]),y.globalAlpha=N.opacity,y.lineWidth=N.weight,y.strokeStyle=N.color,y.lineCap=N.lineCap,y.lineJoin=N.lineJoin,y.stroke())},_onClick:function(y){for(var N,Q,D=this._map.mouseEventToLayerPoint(y),le=this._drawFirst;le;le=le.next)(N=le.layer).options.interactive&&N._containsPoint(D)&&("click"!==y.type&&"preclick"!==y.type||!this._map._draggableMoved(N))&&(Q=N);this._fireEvent(!!Q&&[Q],y)},_onMouseMove:function(y){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var D=this._map.mouseEventToLayerPoint(y);this._handleMouseHover(y,D)}},_handleMouseOut:function(y){var D=this._hoveredLayer;D&&($n(this._container,"leaflet-interactive"),this._fireEvent([D],y,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(y,D){if(!this._mouseHoverThrottled){for(var N,Q,le=this._drawFirst;le;le=le.next)(N=le.layer).options.interactive&&N._containsPoint(D)&&(Q=N);Q!==this._hoveredLayer&&(this._handleMouseOut(y),Q&&(Lr(this._container,"leaflet-interactive"),this._fireEvent([Q],y,"mouseover"),this._hoveredLayer=Q)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],y),this._mouseHoverThrottled=!0,setTimeout(M(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(y,D,N){this._map._fireDOMEvent(D,N||D.type,y)},_bringToFront:function(y){var D=y._order;if(D){var N=D.next,Q=D.prev;if(!N)return;N.prev=Q,Q?Q.next=N:N&&(this._drawFirst=N),D.prev=this._drawLast,this._drawLast.next=D,D.next=null,this._drawLast=D,this._requestRedraw(y)}},_bringToBack:function(y){var D=y._order;if(D){var N=D.next,Q=D.prev;if(!Q)return;Q.next=N,N?N.prev=Q:Q&&(this._drawLast=Q),D.prev=null,D.next=this._drawFirst,this._drawFirst.prev=D,this._drawFirst=D,this._requestRedraw(y)}}});function fi(A){return In.canvas?new Pr(A):null}var Li=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(A){return document.createElement("<lvml:"+A+' class="lvml">')}}catch(A){}return function(A){return document.createElement("<"+A+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ca={_initContainer:function(){this._container=ir("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gr.prototype._update.call(this),this.fire("update"))},_initPath:function(y){var D=y._container=Li("shape");Lr(D,"leaflet-vml-shape "+(this.options.className||"")),D.coordsize="1 1",y._path=Li("path"),D.appendChild(y._path),this._updateStyle(y),this._layers[oe(y)]=y},_addPath:function(y){var D=y._container;this._container.appendChild(D),y.options.interactive&&y.addInteractiveTarget(D)},_removePath:function(y){var D=y._container;Ri(D),y.removeInteractiveTarget(D),delete this._layers[oe(y)]},_updateStyle:function(y){var D=y._stroke,N=y._fill,Q=y.options,le=y._container;le.stroked=!!Q.stroke,le.filled=!!Q.fill,Q.stroke?(D||(D=y._stroke=Li("stroke")),le.appendChild(D),D.weight=Q.weight+"px",D.color=Q.color,D.opacity=Q.opacity,D.dashStyle=Q.dashArray?He(Q.dashArray)?Q.dashArray.join(" "):Q.dashArray.replace(/( *, *)/g," "):"",D.endcap=Q.lineCap.replace("butt","flat"),D.joinstyle=Q.lineJoin):D&&(le.removeChild(D),y._stroke=null),Q.fill?(N||(N=y._fill=Li("fill")),le.appendChild(N),N.color=Q.fillColor||Q.color,N.opacity=Q.fillOpacity):N&&(le.removeChild(N),y._fill=null)},_updateCircle:function(y){var D=y._point.round(),N=Math.round(y._radius),Q=Math.round(y._radiusY||N);this._setPath(y,y._empty()?"M0 0":"AL "+D.x+","+D.y+" "+N+","+Q+" 0,23592600")},_setPath:function(y,D){y._path.v=D},_bringToFront:function(y){Gs(y._container)},_bringToBack:function(y){ua(y._container)}},Rr=In.vml?Li:So,Sa=gr.extend({_initContainer:function(){this._container=Rr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Rr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ri(this._container),Gr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){gr.prototype._update.call(this);var y=this._bounds,D=y.getSize(),N=this._container;(!this._svgSize||!this._svgSize.equals(D))&&(this._svgSize=D,N.setAttribute("width",D.x),N.setAttribute("height",D.y)),Ui(N,y.min),N.setAttribute("viewBox",[y.min.x,y.min.y,D.x,D.y].join(" ")),this.fire("update")}},_initPath:function(y){var D=y._path=Rr("path");y.options.className&&Lr(D,y.options.className),y.options.interactive&&Lr(D,"leaflet-interactive"),this._updateStyle(y),this._layers[oe(y)]=y},_addPath:function(y){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(y._path),y.addInteractiveTarget(y._path)},_removePath:function(y){Ri(y._path),y.removeInteractiveTarget(y._path),delete this._layers[oe(y)]},_updatePath:function(y){y._project(),y._update()},_updateStyle:function(y){var D=y._path,N=y.options;!D||(N.stroke?(D.setAttribute("stroke",N.color),D.setAttribute("stroke-opacity",N.opacity),D.setAttribute("stroke-width",N.weight),D.setAttribute("stroke-linecap",N.lineCap),D.setAttribute("stroke-linejoin",N.lineJoin),N.dashArray?D.setAttribute("stroke-dasharray",N.dashArray):D.removeAttribute("stroke-dasharray"),N.dashOffset?D.setAttribute("stroke-dashoffset",N.dashOffset):D.removeAttribute("stroke-dashoffset")):D.setAttribute("stroke","none"),N.fill?(D.setAttribute("fill",N.fillColor||N.color),D.setAttribute("fill-opacity",N.fillOpacity),D.setAttribute("fill-rule",N.fillRule||"evenodd")):D.setAttribute("fill","none"))},_updatePoly:function(y,D){this._setPath(y,rs(y._parts,D))},_updateCircle:function(y){var D=y._point,N=Math.max(Math.round(y._radius),1),le="a"+N+","+(Math.max(Math.round(y._radiusY),1)||N)+" 0 1,0 ",Ie=y._empty()?"M0 0":"M"+(D.x-N)+","+D.y+le+2*N+",0 "+le+2*-N+",0 ";this._setPath(y,Ie)},_setPath:function(y,D){y._path.setAttribute("d",D)},_bringToFront:function(y){Gs(y._path)},_bringToBack:function(y){ua(y._path)}});function ss(A){return In.svg||In.vml?new Sa(A):null}In.vml&&Sa.include(ca),Di.include({getRenderer:function(y){var D=y.options.renderer||this._getPaneRenderer(y.options.pane)||this.options.renderer||this._renderer;return D||(D=this._renderer=this._createRenderer()),this.hasLayer(D)||this.addLayer(D),D},_getPaneRenderer:function(y){if("overlayPane"===y||void 0===y)return!1;var D=this._paneRenderers[y];return void 0===D&&(D=this._createRenderer({pane:y}),this._paneRenderers[y]=D),D},_createRenderer:function(y){return this.options.preferCanvas&&fi(y)||ss(y)}});var ha=Rc.extend({initialize:function(y,D){Rc.prototype.initialize.call(this,this._boundsToLatLngs(y),D)},setBounds:function(y){return this.setLatLngs(this._boundsToLatLngs(y))},_boundsToLatLngs:function(y){return[(y=bt(y)).getSouthWest(),y.getNorthWest(),y.getNorthEast(),y.getSouthEast()]}});Sa.create=Rr,Sa.pointsToPath=rs,_o.geometryToLayer=Ei,_o.coordsToLatLng=Da,_o.coordsToLatLngs=Js,_o.latLngToCoords=Yo,_o.latLngsToCoords=Po,_o.getFeature=El,_o.asFeature=zl,Di.mergeOptions({boxZoom:!0});var $o=At.extend({initialize:function(y){this._map=y,this._container=y._container,this._pane=y._panes.overlayPane,this._resetStateTimeout=0,y.on("unload",this._destroy,this)},addHooks:function(){Nr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Gr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ri(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(y){if(!y.shiftKey||1!==y.which&&1!==y.button)return!1;this._clearDeferredResetState(),this._resetState(),vi(),gl(),this._startPoint=this._map.mouseEventToContainerPoint(y),Nr(document,{contextmenu:$u,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(y){this._moved||(this._moved=!0,this._box=ir("div","leaflet-zoom-box",this._container),Lr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(y);var D=new we(this._point,this._startPoint),N=D.getSize();Ui(this._box,D.min),this._box.style.width=N.x+"px",this._box.style.height=N.y+"px"},_finish:function(){this._moved&&(Ri(this._box),$n(this._container,"leaflet-crosshair")),qu(),du(),Gr(document,{contextmenu:$u,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(y){if((1===y.which||1===y.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(M(this._resetState,this),0);var D=new at(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(D).fire("boxzoomend",{boxZoomBounds:D})}},_onKeyDown:function(y){27===y.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Di.addInitHook("addHandler","boxZoom",$o),Di.mergeOptions({doubleClickZoom:!0});var Wl=At.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(y){var D=this._map,N=D.getZoom(),Q=D.options.zoomDelta,le=y.originalEvent.shiftKey?N-Q:N+Q;"center"===D.options.doubleClickZoom?D.setZoom(le):D.setZoomAround(y.containerPoint,le)}});Di.addInitHook("addHandler","doubleClickZoom",Wl),Di.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fo=At.extend({addHooks:function(){if(!this._draggable){var y=this._map;this._draggable=new vt(y._mapPane,y._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),y.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),y.on("zoomend",this._onZoomEnd,this),y.whenReady(this._onZoomEnd,this))}Lr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$n(this._map._container,"leaflet-grab"),$n(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var y=this._map;if(y._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var D=bt(this._map.options.maxBounds);this._offsetLimit=Le(this._map.latLngToContainerPoint(D.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(D.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;y.fire("movestart").fire("dragstart"),y.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(y){if(this._map.options.inertia){var D=this._lastTime=+new Date,N=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(N),this._times.push(D),this._prunePositions(D)}this._map.fire("move",y).fire("drag",y)},_prunePositions:function(y){for(;this._positions.length>1&&y-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var y=this._map.getSize().divideBy(2),D=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=D.subtract(y).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(y,D){return y-(y-D)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var y=this._draggable._newPos.subtract(this._draggable._startPos),D=this._offsetLimit;y.x<D.min.x&&(y.x=this._viscousLimit(y.x,D.min.x)),y.y<D.min.y&&(y.y=this._viscousLimit(y.y,D.min.y)),y.x>D.max.x&&(y.x=this._viscousLimit(y.x,D.max.x)),y.y>D.max.y&&(y.y=this._viscousLimit(y.y,D.max.y)),this._draggable._newPos=this._draggable._startPos.add(y)}},_onPreDragWrap:function(){var y=this._worldWidth,D=Math.round(y/2),N=this._initialWorldOffset,Q=this._draggable._newPos.x,le=(Q-D+N)%y+D-N,Ie=(Q+D+N)%y-D-N,it=Math.abs(le+N)<Math.abs(Ie+N)?le:Ie;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=it},_onDragEnd:function(y){var D=this._map,N=D.options,Q=!N.inertia||y.noInertia||this._times.length<2;if(D.fire("dragend",y),Q)D.fire("moveend");else{this._prunePositions(+new Date);var le=this._lastPos.subtract(this._positions[0]),it=N.easeLinearity,Mt=le.multiplyBy(it/((this._lastTime-this._times[0])/1e3)),Ht=Mt.distanceTo([0,0]),wn=Math.min(N.inertiaMaxSpeed,Ht),dr=Mt.multiplyBy(wn/Ht),Br=wn/(N.inertiaDeceleration*it),fa=dr.multiplyBy(-Br/2).round();fa.x||fa.y?(fa=D._limitOffset(fa,D.options.maxBounds),mn(function(){D.panBy(fa,{duration:Br,easeLinearity:it,noMoveStart:!0,animate:!0})})):D.fire("moveend")}}});Di.addInitHook("addHandler","dragging",Fo),Di.mergeOptions({keyboard:!0,keyboardPanDelta:80});var tf=At.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(y){this._map=y,this._setPanDelta(y.options.keyboardPanDelta),this._setZoomDelta(y.options.zoomDelta)},addHooks:function(){var y=this._map._container;y.tabIndex<=0&&(y.tabIndex="0"),Nr(y,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Gr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var y=document.body,D=document.documentElement,N=y.scrollTop||D.scrollTop,Q=y.scrollLeft||D.scrollLeft;this._map._container.focus(),window.scrollTo(Q,N)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(y){var Q,le,D=this._panKeys={},N=this.keyCodes;for(Q=0,le=N.left.length;Q<le;Q++)D[N.left[Q]]=[-1*y,0];for(Q=0,le=N.right.length;Q<le;Q++)D[N.right[Q]]=[y,0];for(Q=0,le=N.down.length;Q<le;Q++)D[N.down[Q]]=[0,y];for(Q=0,le=N.up.length;Q<le;Q++)D[N.up[Q]]=[0,-1*y]},_setZoomDelta:function(y){var Q,le,D=this._zoomKeys={},N=this.keyCodes;for(Q=0,le=N.zoomIn.length;Q<le;Q++)D[N.zoomIn[Q]]=y;for(Q=0,le=N.zoomOut.length;Q<le;Q++)D[N.zoomOut[Q]]=-y},_addHooks:function(){Nr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Gr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(y){if(!(y.altKey||y.ctrlKey||y.metaKey)){var Q,D=y.keyCode,N=this._map;if(D in this._panKeys){if(!N._panAnim||!N._panAnim._inProgress)if(Q=this._panKeys[D],y.shiftKey&&(Q=ie(Q).multiplyBy(3)),N.options.maxBounds&&(Q=N._limitOffset(ie(Q),N.options.maxBounds)),N.options.worldCopyJump){var le=N.wrapLatLng(N.unproject(N.project(N.getCenter()).add(Q)));N.panTo(le)}else N.panBy(Q)}else if(D in this._zoomKeys)N.setZoom(N.getZoom()+(y.shiftKey?3:1)*this._zoomKeys[D]);else{if(27!==D||!N._popup||!N._popup.options.closeOnEscapeKey)return;N.closePopup()}$u(y)}}});Di.addInitHook("addHandler","keyboard",tf),Di.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var zf=At.extend({addHooks:function(){Nr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Gr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(y){var D=ef(y),N=this._map.options.wheelDebounceTime;this._delta+=D,this._lastMousePos=this._map.mouseEventToContainerPoint(y),this._startTime||(this._startTime=+new Date);var Q=Math.max(N-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(M(this._performZoom,this),Q),$u(y)},_performZoom:function(){var y=this._map,D=y.getZoom(),N=this._map.options.zoomSnap||0;y._stop();var le=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,Ie=N?Math.ceil(le/N)*N:le,it=y._limitZoom(D+(this._delta>0?Ie:-Ie))-D;this._delta=0,this._startTime=null,it&&("center"===y.options.scrollWheelZoom?y.setZoom(D+it):y.setZoomAround(this._lastMousePos,D+it))}});Di.addInitHook("addHandler","scrollWheelZoom",zf);Di.mergeOptions({tapHold:In.touchNative&&In.safari&&In.mobile,tapTolerance:15});var hv=At.extend({addHooks:function(){Nr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Gr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(y){if(clearTimeout(this._holdTimeout),1===y.touches.length){var D=y.touches[0];this._startPos=this._newPos=new k(D.clientX,D.clientY),this._holdTimeout=setTimeout(M(function(){this._cancel(),this._isTapValid()&&(Nr(document,"touchend",Zs),Nr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",D))},this),600),Nr(document,"touchend touchcancel contextmenu",this._cancel,this),Nr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function A(){Gr(document,"touchend",Zs),Gr(document,"touchend touchcancel",A)},_cancel:function(){clearTimeout(this._holdTimeout),Gr(document,"touchend touchcancel contextmenu",this._cancel,this),Gr(document,"touchmove",this._onMove,this)},_onMove:function(y){var D=y.touches[0];this._newPos=new k(D.clientX,D.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(y,D){var N=new MouseEvent(y,{bubbles:!0,cancelable:!0,view:window,screenX:D.screenX,screenY:D.screenY,clientX:D.clientX,clientY:D.clientY});N._simulated=!0,D.target.dispatchEvent(N)}});Di.addInitHook("addHandler","tapHold",hv),Di.mergeOptions({touchZoom:In.touch,bounceAtZoomLimits:!0});var Mg=At.extend({addHooks:function(){Lr(this._map._container,"leaflet-touch-zoom"),Nr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$n(this._map._container,"leaflet-touch-zoom"),Gr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(y){var D=this._map;if(y.touches&&2===y.touches.length&&!D._animatingZoom&&!this._zooming){var N=D.mouseEventToContainerPoint(y.touches[0]),Q=D.mouseEventToContainerPoint(y.touches[1]);this._centerPoint=D.getSize()._divideBy(2),this._startLatLng=D.containerPointToLatLng(this._centerPoint),"center"!==D.options.touchZoom&&(this._pinchStartLatLng=D.containerPointToLatLng(N.add(Q)._divideBy(2))),this._startDist=N.distanceTo(Q),this._startZoom=D.getZoom(),this._moved=!1,this._zooming=!0,D._stop(),Nr(document,"touchmove",this._onTouchMove,this),Nr(document,"touchend touchcancel",this._onTouchEnd,this),Zs(y)}},_onTouchMove:function(y){if(y.touches&&2===y.touches.length&&this._zooming){var D=this._map,N=D.mouseEventToContainerPoint(y.touches[0]),Q=D.mouseEventToContainerPoint(y.touches[1]),le=N.distanceTo(Q)/this._startDist;if(this._zoom=D.getScaleZoom(le,this._startZoom),!D.options.bounceAtZoomLimits&&(this._zoom<D.getMinZoom()&&le<1||this._zoom>D.getMaxZoom()&&le>1)&&(this._zoom=D._limitZoom(this._zoom)),"center"===D.options.touchZoom){if(this._center=this._startLatLng,1===le)return}else{var Ie=N._add(Q)._divideBy(2)._subtract(this._centerPoint);if(1===le&&0===Ie.x&&0===Ie.y)return;this._center=D.unproject(D.project(this._pinchStartLatLng,this._zoom).subtract(Ie),this._zoom)}this._moved||(D._moveStart(!0,!1),this._moved=!0),nn(this._animRequest);var it=M(D._move,D,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=mn(it,this,!0),Zs(y)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,nn(this._animRequest),Gr(document,"touchmove",this._onTouchMove,this),Gr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Di.addInitHook("addHandler","touchZoom",Mg),Di.BoxZoom=$o,Di.DoubleClickZoom=Wl,Di.Drag=Fo,Di.Keyboard=tf,Di.ScrollWheelZoom=zf,Di.TapHold=hv,Di.TouchZoom=Mg,ne.Bounds=we,ne.Browser=In,ne.CRS=On,ne.Canvas=Pr,ne.Circle=Ju,ne.CircleMarker=_a,ne.Class=Nt,ne.Control=ks,ne.DivIcon=dt,ne.DivOverlay=bo,ne.DomEvent=ip,ne.DomUtil=$h,ne.Draggable=vt,ne.Evented=K,ne.FeatureGroup=yo,ne.GeoJSON=_o,ne.GridLayer=yt,ne.Handler=At,ne.Icon=Qu,ne.ImageOverlay=jl,ne.LatLng=nt,ne.LatLngBounds=at,ne.Layer=go,ne.LayerGroup=kr,ne.LineUtil=Ca,ne.Map=Di,ne.Marker=tn,ne.Mixin=sn,ne.Path=qo,ne.Point=k,ne.PolyUtil=Oi,ne.Polygon=Rc,ne.Polyline=La,ne.Popup=Dl,ne.PosAnimation=Bl,ne.Projection=_l,ne.Rectangle=ha,ne.Renderer=gr,ne.SVG=Sa,ne.SVGOverlay=dh,ne.TileLayer=Xt,ne.Tooltip=Xe,ne.Transformation=ji,ne.Util=Vt,ne.VideoOverlay=Cl,ne.bind=M,ne.bounds=Le,ne.canvas=fi,ne.circle=function(A,y,D){return new Ju(A,y,D)},ne.circleMarker=function(A,y){return new _a(A,y)},ne.control=$,ne.divIcon=function(A){return new dt(A)},ne.extend=ye,ne.featureGroup=function(y,D){return new yo(y,D)},ne.geoJSON=kl,ne.geoJson=Gl,ne.gridLayer=function(A){return new yt(A)},ne.icon=function(A){return new Qu(A)},ne.imageOverlay=function(y,D,N){return new jl(y,D,N)},ne.latLng=Ot,ne.latLngBounds=bt,ne.layerGroup=function(y,D){return new kr(y,D)},ne.map=function(A,y){return new Di(A,y)},ne.marker=function(A,y){return new tn(A,y)},ne.point=ie,ne.polygon=function(A,y){return new Rc(A,y)},ne.polyline=function(A,y){return new La(A,y)},ne.popup=function(y,D){return new Dl(y,D)},ne.rectangle=function(A,y){return new ha(A,y)},ne.setOptions=Be,ne.stamp=oe,ne.svg=ss,ne.svgOverlay=function(A,y,D){return new dh(A,y,D)},ne.tileLayer=xn,ne.tooltip=function(y,D){return new Xe(y,D)},ne.transformation=Ti,ne.version="1.9.4",ne.videoOverlay=function(A,y,D){return new Cl(A,y,D)};var Ig=window.L;ne.noConflict=function(){return window.L=Ig,this},window.L=ne}(Ct)},5579:function(vn){var Ct=function(ne){"use strict";var R,Se=Object.prototype,ye=Se.hasOwnProperty,M="function"==typeof Symbol?Symbol:{},x=M.iterator||"@@iterator",oe=M.asyncIterator||"@@asyncIterator",Ve=M.toStringTag||"@@toStringTag";function Te(k,j,ie){return Object.defineProperty(k,j,{value:ie,enumerable:!0,configurable:!0,writable:!0}),k[j]}try{Te({},"")}catch(k){Te=function(ie,we,Le){return ie[we]=Le}}function v(k,j,ie,we){var at=Object.create((j&&j.prototype instanceof Ne?j:Ne).prototype),bt=new Rt(we||[]);return at._invoke=function(k,j,ie){var we=xe;return function(at,bt){if(we===Be)throw new Error("Generator is already running");if(we===ae){if("throw"===at)throw bt;return K()}for(ie.method=at,ie.arg=bt;;){var nt=ie.delegate;if(nt){var Ot=nn(nt,ie);if(Ot){if(Ot===be)continue;return Ot}}if("next"===ie.method)ie.sent=ie._sent=ie.arg;else if("throw"===ie.method){if(we===xe)throw we=ae,ie.arg;ie.dispatchException(ie.arg)}else"return"===ie.method&&ie.abrupt("return",ie.arg);we=Be;var On=Ae(k,j,ie);if("normal"===On.type){if(we=ie.done?ae:ce,On.arg===be)continue;return{value:On.arg,done:ie.done}}"throw"===On.type&&(we=ae,ie.method="throw",ie.arg=On.arg)}}}(k,ie,bt),at}function Ae(k,j,ie){try{return{type:"normal",arg:k.call(j,ie)}}catch(we){return{type:"throw",arg:we}}}ne.wrap=v;var xe="suspendedStart",ce="suspendedYield",Be="executing",ae="completed",be={};function Ne(){}function He(){}function et(){}var tt={};Te(tt,x,function(){return this});var We=Object.getPrototypeOf,pt=We&&We(We(Bt([])));pt&&pt!==Se&&ye.call(pt,x)&&(tt=pt);var lt=et.prototype=Ne.prototype=Object.create(tt);function ee(k){["next","throw","return"].forEach(function(j){Te(k,j,function(ie){return this._invoke(j,ie)})})}function Dn(k,j){function ie(at,bt,nt,Ot){var On=Ae(k[at],k,bt);if("throw"!==On.type){var rr=On.arg,ni=rr.value;return ni&&"object"==typeof ni&&ye.call(ni,"__await")?j.resolve(ni.__await).then(function(mi){ie("next",mi,nt,Ot)},function(mi){ie("throw",mi,nt,Ot)}):j.resolve(ni).then(function(mi){rr.value=mi,nt(rr)},function(mi){return ie("throw",mi,nt,Ot)})}Ot(On.arg)}var we;this._invoke=function(at,bt){function nt(){return new j(function(Ot,On){ie(at,bt,Ot,On)})}return we=we?we.then(nt,nt):nt()}}function nn(k,j){var ie=k.iterator[j.method];if(ie===R){if(j.delegate=null,"throw"===j.method){if(k.iterator.return&&(j.method="return",j.arg=R,nn(k,j),"throw"===j.method))return be;j.method="throw",j.arg=new TypeError("The iterator does not provide a 'throw' method")}return be}var we=Ae(ie,k.iterator,j.arg);if("throw"===we.type)return j.method="throw",j.arg=we.arg,j.delegate=null,be;var Le=we.arg;return Le?Le.done?(j[k.resultName]=Le.value,j.next=k.nextLoc,"return"!==j.method&&(j.method="next",j.arg=R),j.delegate=null,be):Le:(j.method="throw",j.arg=new TypeError("iterator result is not an object"),j.delegate=null,be)}function Vt(k){var j={tryLoc:k[0]};1 in k&&(j.catchLoc=k[1]),2 in k&&(j.finallyLoc=k[2],j.afterLoc=k[3]),this.tryEntries.push(j)}function Nt(k){var j=k.completion||{};j.type="normal",delete j.arg,k.completion=j}function Rt(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(Vt,this),this.reset(!0)}function Bt(k){if(k){var j=k[x];if(j)return j.call(k);if("function"==typeof k.next)return k;if(!isNaN(k.length)){var ie=-1,we=function Le(){for(;++ie<k.length;)if(ye.call(k,ie))return Le.value=k[ie],Le.done=!1,Le;return Le.value=R,Le.done=!0,Le};return we.next=we}}return{next:K}}function K(){return{value:R,done:!0}}return He.prototype=et,Te(lt,"constructor",et),Te(et,"constructor",He),He.displayName=Te(et,Ve,"GeneratorFunction"),ne.isGeneratorFunction=function(k){var j="function"==typeof k&&k.constructor;return!!j&&(j===He||"GeneratorFunction"===(j.displayName||j.name))},ne.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,et):(k.__proto__=et,Te(k,Ve,"GeneratorFunction")),k.prototype=Object.create(lt),k},ne.awrap=function(k){return{__await:k}},ee(Dn.prototype),Te(Dn.prototype,oe,function(){return this}),ne.AsyncIterator=Dn,ne.async=function(k,j,ie,we,Le){void 0===Le&&(Le=Promise);var at=new Dn(v(k,j,ie,we),Le);return ne.isGeneratorFunction(j)?at:at.next().then(function(bt){return bt.done?bt.value:at.next()})},ee(lt),Te(lt,Ve,"Generator"),Te(lt,x,function(){return this}),Te(lt,"toString",function(){return"[object Generator]"}),ne.keys=function(k){var j=[];for(var ie in k)j.push(ie);return j.reverse(),function we(){for(;j.length;){var Le=j.pop();if(Le in k)return we.value=Le,we.done=!1,we}return we.done=!0,we}},ne.values=Bt,Rt.prototype={constructor:Rt,reset:function(j){if(this.prev=0,this.next=0,this.sent=this._sent=R,this.done=!1,this.delegate=null,this.method="next",this.arg=R,this.tryEntries.forEach(Nt),!j)for(var ie in this)"t"===ie.charAt(0)&&ye.call(this,ie)&&!isNaN(+ie.slice(1))&&(this[ie]=R)},stop:function(){this.done=!0;var ie=this.tryEntries[0].completion;if("throw"===ie.type)throw ie.arg;return this.rval},dispatchException:function(j){if(this.done)throw j;var ie=this;function we(On,rr){return bt.type="throw",bt.arg=j,ie.next=On,rr&&(ie.method="next",ie.arg=R),!!rr}for(var Le=this.tryEntries.length-1;Le>=0;--Le){var at=this.tryEntries[Le],bt=at.completion;if("root"===at.tryLoc)return we("end");if(at.tryLoc<=this.prev){var nt=ye.call(at,"catchLoc"),Ot=ye.call(at,"finallyLoc");if(nt&&Ot){if(this.prev<at.catchLoc)return we(at.catchLoc,!0);if(this.prev<at.finallyLoc)return we(at.finallyLoc)}else if(nt){if(this.prev<at.catchLoc)return we(at.catchLoc,!0)}else{if(!Ot)throw new Error("try statement without catch or finally");if(this.prev<at.finallyLoc)return we(at.finallyLoc)}}}},abrupt:function(j,ie){for(var we=this.tryEntries.length-1;we>=0;--we){var Le=this.tryEntries[we];if(Le.tryLoc<=this.prev&&ye.call(Le,"finallyLoc")&&this.prev<Le.finallyLoc){var at=Le;break}}at&&("break"===j||"continue"===j)&&at.tryLoc<=ie&&ie<=at.finallyLoc&&(at=null);var bt=at?at.completion:{};return bt.type=j,bt.arg=ie,at?(this.method="next",this.next=at.finallyLoc,be):this.complete(bt)},complete:function(j,ie){if("throw"===j.type)throw j.arg;return"break"===j.type||"continue"===j.type?this.next=j.arg:"return"===j.type?(this.rval=this.arg=j.arg,this.method="return",this.next="end"):"normal"===j.type&&ie&&(this.next=ie),be},finish:function(j){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var we=this.tryEntries[ie];if(we.finallyLoc===j)return this.complete(we.completion,we.afterLoc),Nt(we),be}},catch:function(j){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var we=this.tryEntries[ie];if(we.tryLoc===j){var Le=we.completion;if("throw"===Le.type){var at=Le.arg;Nt(we)}return at}}throw new Error("illegal catch attempt")},delegateYield:function(j,ie,we){return this.delegate={iterator:Bt(j),resultName:ie,nextLoc:we},"next"===this.method&&(this.arg=R),be}},ne}(vn.exports);try{regeneratorRuntime=Ct}catch(ne){"object"==typeof globalThis?globalThis.regeneratorRuntime=Ct:Function("r","regeneratorRuntime = r")(Ct)}},3103:function(vn,Ct,ne){"use strict";ne.d(Ct,{P:function(){return Ve}});var Se=ne(5134),ye=ne(7289),R=ne(653),M=ne(878),x=ne(1225),Ve=function(){var Te=function(){function v(Ae,xe,ce){(0,Se.Z)(this,v),this.kind=Ae,this.value=xe,this.error=ce,this.hasValue="N"===Ae}return(0,ye.Z)(v,[{key:"observe",value:function(xe){switch(this.kind){case"N":return xe.next&&xe.next(this.value);case"E":return xe.error&&xe.error(this.error);case"C":return xe.complete&&xe.complete()}}},{key:"do",value:function(xe,ce,Be){switch(this.kind){case"N":return xe&&xe(this.value);case"E":return ce&&ce(this.error);case"C":return Be&&Be()}}},{key:"accept",value:function(xe,ce,Be){return xe&&"function"==typeof xe.next?this.observe(xe):this.do(xe,ce,Be)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,M.of)(this.value);case"E":return(0,x._)(this.error);case"C":return(0,R.c)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(xe){return void 0!==xe?new v("N",xe):v.undefinedValueNotification}},{key:"createError",value:function(xe){return new v("E",void 0,xe)}},{key:"createComplete",value:function(){return v.completeNotification}}]),v}();return Te.completeNotification=new Te("C"),Te.undefinedValueNotification=new Te("N",void 0),Te}()},8318:function(vn,Ct,ne){"use strict";ne.d(Ct,{y:function(){return Be}});var Se=ne(5134),ye=ne(7289),R=ne(6673),x=ne(5331),oe=ne(7498),Te=ne(6197),v=ne(3392);function xe(be){return 0===be.length?v.y:1===be.length?be[0]:function(He){return be.reduce(function(et,tt){return tt(et)},He)}}var ce=ne(1484),Be=function(){var be=function(){function Ne(He){(0,Se.Z)(this,Ne),this._isScalar=!1,He&&(this._subscribe=He)}return(0,ye.Z)(Ne,[{key:"lift",value:function(et){var tt=new Ne;return tt.source=this,tt.operator=et,tt}},{key:"subscribe",value:function(et,tt,We){var pt=this.operator,lt=function(be,Ne,He){if(be){if(be instanceof R.L)return be;if(be[x.b])return be[x.b]()}return be||Ne||He?new R.L(be,Ne,He):new R.L(oe.c)}(et,tt,We);if(lt.add(pt?pt.call(lt,this.source):this.source||ce.v.useDeprecatedSynchronousErrorHandling&&!lt.syncErrorThrowable?this._subscribe(lt):this._trySubscribe(lt)),ce.v.useDeprecatedSynchronousErrorHandling&&lt.syncErrorThrowable&&(lt.syncErrorThrowable=!1,lt.syncErrorThrown))throw lt.syncErrorValue;return lt}},{key:"_trySubscribe",value:function(et){try{return this._subscribe(et)}catch(tt){ce.v.useDeprecatedSynchronousErrorHandling&&(et.syncErrorThrown=!0,et.syncErrorValue=tt),function(be){for(;be;){var et=be.destination;if(be.closed||be.isStopped)return!1;be=et&&et instanceof R.L?et:null}return!0}(et)?et.error(tt):console.warn(tt)}}},{key:"forEach",value:function(et,tt){var We=this;return new(tt=ae(tt))(function(pt,lt){var ee;ee=We.subscribe(function(Dn){try{et(Dn)}catch(mn){lt(mn),ee&&ee.unsubscribe()}},lt,pt)})}},{key:"_subscribe",value:function(et){var tt=this.source;return tt&&tt.subscribe(et)}},{key:Te.L,value:function(){return this}},{key:"pipe",value:function(){for(var et=arguments.length,tt=new Array(et),We=0;We<et;We++)tt[We]=arguments[We];return 0===tt.length?this:xe(tt)(this)}},{key:"toPromise",value:function(et){var tt=this;return new(et=ae(et))(function(We,pt){var lt;tt.subscribe(function(ee){return lt=ee},function(ee){return pt(ee)},function(){return We(lt)})})}}]),Ne}();return be.create=function(Ne){return new be(Ne)},be}();function ae(be){if(be||(be=ce.v.Promise||Promise),!be)throw new Error("no Promise impl found");return be}},7498:function(vn,Ct,ne){"use strict";ne.d(Ct,{c:function(){return R}});var Se=ne(1484),ye=ne(4294),R={closed:!0,next:function(x){},error:function(x){if(Se.v.useDeprecatedSynchronousErrorHandling)throw x;(0,ye.z)(x)},complete:function(){}}},5959:function(vn,Ct,ne){"use strict";ne.d(Ct,{Yc:function(){return Be},xQ:function(){return ae}});var Se=ne(7289),ye=ne(9333),R=ne(9187),M=ne(5134),x=ne(1885),oe=ne(9727),Ve=ne(8318),Te=ne(6673),v=ne(7570),Ae=ne(3895),xe=ne(9291),ce=ne(5331),Be=function(Ne){(0,x.Z)(et,Ne);var He=(0,oe.Z)(et);function et(tt){var We;return(0,M.Z)(this,et),(We=He.call(this,tt)).destination=tt,We}return et}(Te.L),ae=function(){var Ne=function(He){(0,x.Z)(tt,He);var et=(0,oe.Z)(tt);function tt(){var We;return(0,M.Z)(this,tt),(We=et.call(this)).observers=[],We.closed=!1,We.isStopped=!1,We.hasError=!1,We.thrownError=null,We}return(0,Se.Z)(tt,[{key:ce.b,value:function(){return new Be(this)}},{key:"lift",value:function(pt){var lt=new be(this,this);return lt.operator=pt,lt}},{key:"next",value:function(pt){if(this.closed)throw new Ae.N;if(!this.isStopped)for(var lt=this.observers,ee=lt.length,Dn=lt.slice(),mn=0;mn<ee;mn++)Dn[mn].next(pt)}},{key:"error",value:function(pt){if(this.closed)throw new Ae.N;this.hasError=!0,this.thrownError=pt,this.isStopped=!0;for(var lt=this.observers,ee=lt.length,Dn=lt.slice(),mn=0;mn<ee;mn++)Dn[mn].error(pt);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new Ae.N;this.isStopped=!0;for(var pt=this.observers,lt=pt.length,ee=pt.slice(),Dn=0;Dn<lt;Dn++)ee[Dn].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(pt){if(this.closed)throw new Ae.N;return(0,ye.Z)((0,R.Z)(tt.prototype),"_trySubscribe",this).call(this,pt)}},{key:"_subscribe",value:function(pt){if(this.closed)throw new Ae.N;return this.hasError?(pt.error(this.thrownError),v.w.EMPTY):this.isStopped?(pt.complete(),v.w.EMPTY):(this.observers.push(pt),new xe.W(this,pt))}},{key:"asObservable",value:function(){var pt=new Ve.y;return pt.source=this,pt}}]),tt}(Ve.y);return Ne.create=function(He,et){return new be(He,et)},Ne}(),be=function(Ne){(0,x.Z)(et,Ne);var He=(0,oe.Z)(et);function et(tt,We){var pt;return(0,M.Z)(this,et),(pt=He.call(this)).destination=tt,pt.source=We,pt}return(0,Se.Z)(et,[{key:"next",value:function(We){var pt=this.destination;pt&&pt.next&&pt.next(We)}},{key:"error",value:function(We){var pt=this.destination;pt&&pt.error&&this.destination.error(We)}},{key:"complete",value:function(){var We=this.destination;We&&We.complete&&this.destination.complete()}},{key:"_subscribe",value:function(We){return this.source?this.source.subscribe(We):v.w.EMPTY}}]),et}(ae)},9291:function(vn,Ct,ne){"use strict";ne.d(Ct,{W:function(){return oe}});var Se=ne(5134),ye=ne(7289),R=ne(1885),M=ne(9727),oe=function(Ve){(0,R.Z)(v,Ve);var Te=(0,M.Z)(v);function v(Ae,xe){var ce;return(0,Se.Z)(this,v),(ce=Te.call(this)).subject=Ae,ce.subscriber=xe,ce.closed=!1,ce}return(0,ye.Z)(v,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var xe=this.subject,ce=xe.observers;if(this.subject=null,ce&&0!==ce.length&&!xe.isStopped&&!xe.closed){var Be=ce.indexOf(this.subscriber);-1!==Be&&ce.splice(Be,1)}}}}]),v}(ne(7570).w)},6673:function(vn,Ct,ne){"use strict";ne.d(Ct,{L:function(){return ae}});var Se=ne(5134),ye=ne(7289),R=ne(6518),M=ne(9333),x=ne(9187),oe=ne(1885),Ve=ne(9727),Te=ne(5024),v=ne(7498),Ae=ne(7570),xe=ne(5331),ce=ne(1484),Be=ne(4294),ae=function(Ne){(0,oe.Z)(et,Ne);var He=(0,Ve.Z)(et);function et(tt,We,pt){var lt;switch((0,Se.Z)(this,et),(lt=He.call(this)).syncErrorValue=null,lt.syncErrorThrown=!1,lt.syncErrorThrowable=!1,lt.isStopped=!1,arguments.length){case 0:lt.destination=v.c;break;case 1:if(!tt){lt.destination=v.c;break}if("object"==typeof tt){tt instanceof et?(lt.syncErrorThrowable=tt.syncErrorThrowable,lt.destination=tt,tt.add((0,R.Z)(lt))):(lt.syncErrorThrowable=!0,lt.destination=new be((0,R.Z)(lt),tt));break}default:lt.syncErrorThrowable=!0,lt.destination=new be((0,R.Z)(lt),tt,We,pt)}return lt}return(0,ye.Z)(et,[{key:xe.b,value:function(){return this}},{key:"next",value:function(We){this.isStopped||this._next(We)}},{key:"error",value:function(We){this.isStopped||(this.isStopped=!0,this._error(We))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,(0,M.Z)((0,x.Z)(et.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(We){this.destination.next(We)}},{key:"_error",value:function(We){this.destination.error(We),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var We=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=We,this}}],[{key:"create",value:function(We,pt,lt){var ee=new et(We,pt,lt);return ee.syncErrorThrowable=!1,ee}}]),et}(Ae.w),be=function(Ne){(0,oe.Z)(et,Ne);var He=(0,Ve.Z)(et);function et(tt,We,pt,lt){var ee;(0,Se.Z)(this,et),(ee=He.call(this))._parentSubscriber=tt;var Dn,mn=(0,R.Z)(ee);return(0,Te.m)(We)?Dn=We:We&&(Dn=We.next,pt=We.error,lt=We.complete,We!==v.c&&(mn=Object.create(We),(0,Te.m)(mn.unsubscribe)&&ee.add(mn.unsubscribe.bind(mn)),mn.unsubscribe=ee.unsubscribe.bind((0,R.Z)(ee)))),ee._context=mn,ee._next=Dn,ee._error=pt,ee._complete=lt,ee}return(0,ye.Z)(et,[{key:"next",value:function(We){if(!this.isStopped&&this._next){var pt=this._parentSubscriber;ce.v.useDeprecatedSynchronousErrorHandling&&pt.syncErrorThrowable?this.__tryOrSetError(pt,this._next,We)&&this.unsubscribe():this.__tryOrUnsub(this._next,We)}}},{key:"error",value:function(We){if(!this.isStopped){var pt=this._parentSubscriber,lt=ce.v.useDeprecatedSynchronousErrorHandling;if(this._error)lt&&pt.syncErrorThrowable?(this.__tryOrSetError(pt,this._error,We),this.unsubscribe()):(this.__tryOrUnsub(this._error,We),this.unsubscribe());else if(pt.syncErrorThrowable)lt?(pt.syncErrorValue=We,pt.syncErrorThrown=!0):(0,Be.z)(We),this.unsubscribe();else{if(this.unsubscribe(),lt)throw We;(0,Be.z)(We)}}}},{key:"complete",value:function(){var We=this;if(!this.isStopped){var pt=this._parentSubscriber;if(this._complete){var lt=function(){return We._complete.call(We._context)};ce.v.useDeprecatedSynchronousErrorHandling&&pt.syncErrorThrowable?(this.__tryOrSetError(pt,lt),this.unsubscribe()):(this.__tryOrUnsub(lt),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(We,pt){try{We.call(this._context,pt)}catch(lt){if(this.unsubscribe(),ce.v.useDeprecatedSynchronousErrorHandling)throw lt;(0,Be.z)(lt)}}},{key:"__tryOrSetError",value:function(We,pt,lt){if(!ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{pt.call(this._context,lt)}catch(ee){return ce.v.useDeprecatedSynchronousErrorHandling?(We.syncErrorValue=ee,We.syncErrorThrown=!0,!0):((0,Be.z)(ee),!0)}return!1}},{key:"_unsubscribe",value:function(){var We=this._parentSubscriber;this._context=null,this._parentSubscriber=null,We.unsubscribe()}}]),et}(ae)},7570:function(vn,Ct,ne){"use strict";ne.d(Ct,{w:function(){return Te}});var Se=ne(5134),ye=ne(7289),R=ne(8470),M=ne(2056),x=ne(5024),Ve=function(){function Ae(xe){return Error.call(this),this.message=xe?"".concat(xe.length," errors occurred during unsubscription:\n").concat(xe.map(function(ce,Be){return"".concat(Be+1,") ").concat(ce.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=xe,this}return Ae.prototype=Object.create(Error.prototype),Ae}(),Te=function(){var xe,Ae=function(){function xe(ce){(0,Se.Z)(this,xe),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ce&&(this._ctorUnsubscribe=!0,this._unsubscribe=ce)}return(0,ye.Z)(xe,[{key:"unsubscribe",value:function(){var Be;if(!this.closed){var ae=this._parentOrParents,be=this._ctorUnsubscribe,Ne=this._unsubscribe,He=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ae instanceof xe)ae.remove(this);else if(null!==ae)for(var et=0;et<ae.length;++et)ae[et].remove(this);if((0,x.m)(Ne)){be&&(this._unsubscribe=void 0);try{Ne.call(this)}catch(ee){Be=ee instanceof Ve?v(ee.errors):[ee]}}if((0,R.k)(He))for(var We=-1,pt=He.length;++We<pt;){var lt=He[We];if((0,M.K)(lt))try{lt.unsubscribe()}catch(ee){Be=Be||[],ee instanceof Ve?Be=Be.concat(v(ee.errors)):Be.push(ee)}}if(Be)throw new Ve(Be)}}},{key:"add",value:function(Be){var ae=Be;if(!Be)return xe.EMPTY;switch(typeof Be){case"function":ae=new xe(Be);case"object":if(ae===this||ae.closed||"function"!=typeof ae.unsubscribe)return ae;if(this.closed)return ae.unsubscribe(),ae;if(!(ae instanceof xe)){var be=ae;(ae=new xe)._subscriptions=[be]}break;default:throw new Error("unrecognized teardown "+Be+" added to Subscription.")}var He=ae._parentOrParents;if(null===He)ae._parentOrParents=this;else if(He instanceof xe){if(He===this)return ae;ae._parentOrParents=[He,this]}else{if(-1!==He.indexOf(this))return ae;He.push(this)}var et=this._subscriptions;return null===et?this._subscriptions=[ae]:et.push(ae),ae}},{key:"remove",value:function(Be){var ae=this._subscriptions;if(ae){var be=ae.indexOf(Be);-1!==be&&ae.splice(be,1)}}}]),xe}();return Ae.EMPTY=((xe=new Ae).closed=!0,xe),Ae}();function v(Ae){return Ae.reduce(function(xe,ce){return xe.concat(ce instanceof Ve?ce.errors:ce)},[])}},1484:function(vn,Ct,ne){"use strict";ne.d(Ct,{v:function(){return ye}});var Se=!1,ye={Promise:void 0,set useDeprecatedSynchronousErrorHandling(R){if(R){var M=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+M.stack)}else Se&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Se=R},get useDeprecatedSynchronousErrorHandling(){return Se}}},6882:function(vn,Ct,ne){"use strict";ne.d(Ct,{IY:function(){return Te},Ds:function(){return Ae},ft:function(){return ce}});var Se=ne(5134),ye=ne(7289),R=ne(1885),M=ne(9727),x=ne(6673),oe=ne(8318),Ve=ne(6015),Te=function(Be){(0,R.Z)(be,Be);var ae=(0,M.Z)(be);function be(Ne){var He;return(0,Se.Z)(this,be),(He=ae.call(this)).parent=Ne,He}return(0,ye.Z)(be,[{key:"_next",value:function(He){this.parent.notifyNext(He)}},{key:"_error",value:function(He){this.parent.notifyError(He),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),be}(x.L),Ae=function(Be){(0,R.Z)(be,Be);var ae=(0,M.Z)(be);function be(){return(0,Se.Z)(this,be),ae.apply(this,arguments)}return(0,ye.Z)(be,[{key:"notifyNext",value:function(He){this.destination.next(He)}},{key:"notifyError",value:function(He){this.destination.error(He)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),be}(x.L);function ce(Be,ae){if(!ae.closed){if(Be instanceof oe.y)return Be.subscribe(ae);var be;try{be=(0,Ve.s)(Be)(ae)}catch(Ne){ae.error(Ne)}return be}}},2875:function(vn,Ct,ne){"use strict";ne.d(Ct,{c:function(){return ce},N:function(){return Be}});var Se=ne(9333),ye=ne(9187),R=ne(5134),M=ne(7289),x=ne(1885),oe=ne(9727),Ve=ne(5959),Te=ne(8318),Ae=(ne(6673),ne(7570)),xe=ne(1564),ce=function(He){(0,x.Z)(tt,He);var et=(0,oe.Z)(tt);function tt(We,pt){var lt;return(0,R.Z)(this,tt),(lt=et.call(this)).source=We,lt.subjectFactory=pt,lt._refCount=0,lt._isComplete=!1,lt}return(0,M.Z)(tt,[{key:"_subscribe",value:function(pt){return this.getSubject().subscribe(pt)}},{key:"getSubject",value:function(){var pt=this._subject;return(!pt||pt.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var pt=this._connection;return pt||(this._isComplete=!1,(pt=this._connection=new Ae.w).add(this.source.subscribe(new ae(this.getSubject(),this))),pt.closed&&(this._connection=null,pt=Ae.w.EMPTY)),pt}},{key:"refCount",value:function(){return(0,xe.x)()(this)}}]),tt}(Te.y),Be=function(){var He=ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:He._subscribe},_isComplete:{value:He._isComplete,writable:!0},getSubject:{value:He.getSubject},connect:{value:He.connect},refCount:{value:He.refCount}}}(),ae=function(He){(0,x.Z)(tt,He);var et=(0,oe.Z)(tt);function tt(We,pt){var lt;return(0,R.Z)(this,tt),(lt=et.call(this,We)).connectable=pt,lt}return(0,M.Z)(tt,[{key:"_error",value:function(pt){this._unsubscribe(),(0,Se.Z)((0,ye.Z)(tt.prototype),"_error",this).call(this,pt)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),(0,Se.Z)((0,ye.Z)(tt.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var pt=this.connectable;if(pt){this.connectable=null;var lt=pt._connection;pt._refCount=0,pt._subject=null,pt._connection=null,lt&&lt.unsubscribe()}}}]),tt}(Ve.Yc)},653:function(vn,Ct,ne){"use strict";ne.d(Ct,{E:function(){return ye},c:function(){return R}});var Se=ne(8318),ye=new Se.y(function(x){return x.complete()});function R(x){return x?function(x){return new Se.y(function(oe){return x.schedule(function(){return oe.complete()})})}(x):ye}},9764:function(vn,Ct,ne){"use strict";ne.d(Ct,{D:function(){return be}});var Se=ne(8318),ye=ne(6015),R=ne(7570),M=ne(6197),Ve=ne(2570),Te=ne(5686),xe=ne(5168),ce=ne(9653);function be(Ne,He){return He?function(Ne,He){if(null!=Ne){if(function(Ne){return Ne&&"function"==typeof Ne[M.L]}(Ne))return function(Ne,He){return new Se.y(function(et){var tt=new R.w;return tt.add(He.schedule(function(){var We=Ne[M.L]();tt.add(We.subscribe({next:function(lt){tt.add(He.schedule(function(){return et.next(lt)}))},error:function(lt){tt.add(He.schedule(function(){return et.error(lt)}))},complete:function(){tt.add(He.schedule(function(){return et.complete()}))}}))})),tt})}(Ne,He);if((0,xe.t)(Ne))return function(Ne,He){return new Se.y(function(et){var tt=new R.w;return tt.add(He.schedule(function(){return Ne.then(function(We){tt.add(He.schedule(function(){et.next(We),tt.add(He.schedule(function(){return et.complete()}))}))},function(We){tt.add(He.schedule(function(){return et.error(We)}))})})),tt})}(Ne,He);if((0,ce.z)(Ne))return(0,Ve.r)(Ne,He);if(function(Ne){return Ne&&"function"==typeof Ne[Te.hZ]}(Ne)||"string"==typeof Ne)return function(Ne,He){if(!Ne)throw new Error("Iterable cannot be null");return new Se.y(function(et){var We,tt=new R.w;return tt.add(function(){We&&"function"==typeof We.return&&We.return()}),tt.add(He.schedule(function(){We=Ne[Te.hZ](),tt.add(He.schedule(function(){if(!et.closed){var pt,lt;try{var ee=We.next();pt=ee.value,lt=ee.done}catch(Dn){return void et.error(Dn)}lt?et.complete():(et.next(pt),this.schedule())}}))})),tt})}(Ne,He)}throw new TypeError((null!==Ne&&typeof Ne||Ne)+" is not observable")}(Ne,He):Ne instanceof Se.y?Ne:new Se.y((0,ye.s)(Ne))}},9342:function(vn,Ct,ne){"use strict";ne.d(Ct,{n:function(){return M}});var Se=ne(8318),ye=ne(625),R=ne(2570);function M(x,oe){return oe?(0,R.r)(x,oe):new Se.y((0,ye.V)(x))}},1906:function(vn,Ct,ne){"use strict";ne.d(Ct,{T:function(){return x}});var Se=ne(8318),ye=ne(6163),R=ne(7471),M=ne(9342);function x(){for(var oe=Number.POSITIVE_INFINITY,Ve=null,Te=arguments.length,v=new Array(Te),Ae=0;Ae<Te;Ae++)v[Ae]=arguments[Ae];var xe=v[v.length-1];return(0,ye.K)(xe)?(Ve=v.pop(),v.length>1&&"number"==typeof v[v.length-1]&&(oe=v.pop())):"number"==typeof xe&&(oe=v.pop()),null===Ve&&1===v.length&&v[0]instanceof Se.y?v[0]:(0,R.J)(oe)((0,M.n)(v,Ve))}},878:function(vn,Ct,ne){"use strict";ne.d(Ct,{of:function(){return M}});var Se=ne(6163),ye=ne(9342),R=ne(2570);function M(){for(var x=arguments.length,oe=new Array(x),Ve=0;Ve<x;Ve++)oe[Ve]=arguments[Ve];var Te=oe[oe.length-1];return(0,Se.K)(Te)?(oe.pop(),(0,R.r)(oe,Te)):(0,ye.n)(oe)}},1225:function(vn,Ct,ne){"use strict";ne.d(Ct,{_:function(){return ye}});var Se=ne(8318);function ye(M,x){return new Se.y(x?function(oe){return x.schedule(R,0,{error:M,subscriber:oe})}:function(oe){return oe.error(M)})}function R(M){M.subscriber.error(M.error)}},9996:function(vn,Ct,ne){"use strict";ne.d(Ct,{U:function(){return Ve}});var Se=ne(6518),ye=ne(1885),R=ne(9727),M=ne(5134),x=ne(7289),oe=ne(6673);function Ve(Ae,xe){return function(Be){if("function"!=typeof Ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Be.lift(new Te(Ae,xe))}}var Te=function(){function Ae(xe,ce){(0,M.Z)(this,Ae),this.project=xe,this.thisArg=ce}return(0,x.Z)(Ae,[{key:"call",value:function(ce,Be){return Be.subscribe(new v(ce,this.project,this.thisArg))}}]),Ae}(),v=function(Ae){(0,ye.Z)(ce,Ae);var xe=(0,R.Z)(ce);function ce(Be,ae,be){var Ne;return(0,M.Z)(this,ce),(Ne=xe.call(this,Be)).project=ae,Ne.count=0,Ne.thisArg=be||(0,Se.Z)(Ne),Ne}return(0,x.Z)(ce,[{key:"_next",value:function(ae){var be;try{be=this.project.call(this.thisArg,ae,this.count++)}catch(Ne){return void this.destination.error(Ne)}this.destination.next(be)}}]),ce}(oe.L)},7471:function(vn,Ct,ne){"use strict";ne.d(Ct,{J:function(){return R}});var Se=ne(3982),ye=ne(3392);function R(){var M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,Se.zg)(ye.y,M)}},3982:function(vn,Ct,ne){"use strict";ne.d(Ct,{zg:function(){return Te}});var Se=ne(1885),ye=ne(9727),R=ne(5134),M=ne(7289),x=ne(9996),oe=ne(9764),Ve=ne(6882);function Te(ce,Be){var ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof Be?function(be){return be.pipe(Te(function(Ne,He){return(0,oe.D)(ce(Ne,He)).pipe((0,x.U)(function(et,tt){return Be(Ne,et,He,tt)}))},ae))}:("number"==typeof Be&&(ae=Be),function(be){return be.lift(new v(ce,ae))})}var v=function(){function ce(Be){var ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;(0,R.Z)(this,ce),this.project=Be,this.concurrent=ae}return(0,M.Z)(ce,[{key:"call",value:function(ae,be){return be.subscribe(new Ae(ae,this.project,this.concurrent))}}]),ce}(),Ae=function(ce){(0,Se.Z)(ae,ce);var Be=(0,ye.Z)(ae);function ae(be,Ne){var He,et=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return(0,R.Z)(this,ae),(He=Be.call(this,be)).project=Ne,He.concurrent=et,He.hasCompleted=!1,He.buffer=[],He.active=0,He.index=0,He}return(0,M.Z)(ae,[{key:"_next",value:function(Ne){this.active<this.concurrent?this._tryNext(Ne):this.buffer.push(Ne)}},{key:"_tryNext",value:function(Ne){var He,et=this.index++;try{He=this.project(Ne,et)}catch(tt){return void this.destination.error(tt)}this.active++,this._innerSub(He)}},{key:"_innerSub",value:function(Ne){var He=new Ve.IY(this),et=this.destination;et.add(He);var tt=(0,Ve.ft)(Ne,He);tt!==He&&et.add(tt)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(Ne){this.destination.next(Ne)}},{key:"notifyComplete",value:function(){var Ne=this.buffer;this.active--,Ne.length>0?this._next(Ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),ae}(Ve.Ds)},45:function(vn,Ct,ne){"use strict";ne.d(Ct,{QV:function(){return Ve},ht:function(){return v}});var Se=ne(1885),ye=ne(9727),R=ne(5134),M=ne(7289),x=ne(6673),oe=ne(3103);function Ve(xe){var ce=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(ae){return ae.lift(new Te(xe,ce))}}var Te=function(){function xe(ce){var Be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,R.Z)(this,xe),this.scheduler=ce,this.delay=Be}return(0,M.Z)(xe,[{key:"call",value:function(Be,ae){return ae.subscribe(new v(Be,this.scheduler,this.delay))}}]),xe}(),v=function(xe){(0,Se.Z)(Be,xe);var ce=(0,ye.Z)(Be);function Be(ae,be){var Ne,He=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,R.Z)(this,Be),(Ne=ce.call(this,ae)).scheduler=be,Ne.delay=He,Ne}return(0,M.Z)(Be,[{key:"scheduleMessage",value:function(be){this.destination.add(this.scheduler.schedule(Be.dispatch,this.delay,new Ae(be,this.destination)))}},{key:"_next",value:function(be){this.scheduleMessage(oe.P.createNext(be))}},{key:"_error",value:function(be){this.scheduleMessage(oe.P.createError(be)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(oe.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(be){be.notification.observe(be.destination),this.unsubscribe()}}]),Be}(x.L),Ae=function xe(ce,Be){(0,R.Z)(this,xe),this.notification=ce,this.destination=Be}},1564:function(vn,Ct,ne){"use strict";ne.d(Ct,{x:function(){return oe}});var Se=ne(1885),ye=ne(9727),R=ne(5134),M=ne(7289),x=ne(6673);function oe(){return function(Ae){return Ae.lift(new Ve(Ae))}}var Ve=function(){function v(Ae){(0,R.Z)(this,v),this.connectable=Ae}return(0,M.Z)(v,[{key:"call",value:function(xe,ce){var Be=this.connectable;Be._refCount++;var ae=new Te(xe,Be),be=ce.subscribe(ae);return ae.closed||(ae.connection=Be.connect()),be}}]),v}(),Te=function(v){(0,Se.Z)(xe,v);var Ae=(0,ye.Z)(xe);function xe(ce,Be){var ae;return(0,R.Z)(this,xe),(ae=Ae.call(this,ce)).connectable=Be,ae}return(0,M.Z)(xe,[{key:"_unsubscribe",value:function(){var Be=this.connectable;if(Be){this.connectable=null;var ae=Be._refCount;if(ae<=0)this.connection=null;else if(Be._refCount=ae-1,ae>1)this.connection=null;else{var be=this.connection,Ne=Be._connection;this.connection=null,Ne&&(!be||Ne===be)&&Ne.unsubscribe()}}else this.connection=null}}]),xe}(x.L)},1055:function(vn,Ct,ne){"use strict";ne.d(Ct,{B:function(){return v}});ne(5134),ne(7289);var R=ne(2875),oe=ne(1564),Ve=ne(5959);function Te(){return new Ve.xQ}function v(){return function(Ae){return(0,oe.x)()(function(Ae,xe){return function(Be){var ae;ae="function"==typeof Ae?Ae:function(){return Ae};var be=Object.create(Be,R.N);return be.source=Be,be.subjectFactory=ae,be}}(Te)(Ae))}}},3482:function(vn,Ct,ne){"use strict";ne.d(Ct,{R:function(){return v}});var Se=ne(5134),ye=ne(7289),R=ne(1885),M=ne(9727),x=ne(8318),oe=ne(2709),Ve=ne(2293),Te=function(xe){(0,R.Z)(Be,xe);var ce=(0,M.Z)(Be);function Be(ae){var be,Ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,He=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oe.e;return(0,Se.Z)(this,Be),(be=ce.call(this)).source=ae,be.delayTime=Ne,be.scheduler=He,(!(0,Ve.k)(Ne)||Ne<0)&&(be.delayTime=0),(!He||"function"!=typeof He.schedule)&&(be.scheduler=oe.e),be}return(0,ye.Z)(Be,[{key:"_subscribe",value:function(be){return this.scheduler.schedule(Be.dispatch,this.delayTime,{source:this.source,subscriber:be})}}],[{key:"create",value:function(be){var Ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,He=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oe.e;return new Be(be,Ne,He)}},{key:"dispatch",value:function(be){return this.add(be.source.subscribe(be.subscriber))}}]),Be}(x.y);function v(xe){var ce=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(ae){return ae.lift(new Ae(xe,ce))}}var Ae=function(){function xe(ce,Be){(0,Se.Z)(this,xe),this.scheduler=ce,this.delay=Be}return(0,ye.Z)(xe,[{key:"call",value:function(Be,ae){return new Te(ae,this.delay,this.scheduler).subscribe(Be)}}]),xe}()},6599:function(vn,Ct,ne){"use strict";ne.d(Ct,{b:function(){return v}});var Se=ne(6518),ye=ne(1885),R=ne(9727),M=ne(5134),x=ne(7289),oe=ne(6673);function Ve(){}var Te=ne(5024);function v(ce,Be,ae){return function(Ne){return Ne.lift(new Ae(ce,Be,ae))}}var Ae=function(){function ce(Be,ae,be){(0,M.Z)(this,ce),this.nextOrObserver=Be,this.error=ae,this.complete=be}return(0,x.Z)(ce,[{key:"call",value:function(ae,be){return be.subscribe(new xe(ae,this.nextOrObserver,this.error,this.complete))}}]),ce}(),xe=function(ce){(0,ye.Z)(ae,ce);var Be=(0,R.Z)(ae);function ae(be,Ne,He,et){var tt;return(0,M.Z)(this,ae),(tt=Be.call(this,be))._tapNext=Ve,tt._tapError=Ve,tt._tapComplete=Ve,tt._tapError=He||Ve,tt._tapComplete=et||Ve,(0,Te.m)(Ne)?(tt._context=(0,Se.Z)(tt),tt._tapNext=Ne):Ne&&(tt._context=Ne,tt._tapNext=Ne.next||Ve,tt._tapError=Ne.error||Ve,tt._tapComplete=Ne.complete||Ve),tt}return(0,x.Z)(ae,[{key:"_next",value:function(Ne){try{this._tapNext.call(this._context,Ne)}catch(He){return void this.destination.error(He)}this.destination.next(Ne)}},{key:"_error",value:function(Ne){try{this._tapError.call(this._context,Ne)}catch(He){return void this.destination.error(He)}this.destination.error(Ne)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(Ne){return void this.destination.error(Ne)}return this.destination.complete()}}]),ae}(oe.L)},2570:function(vn,Ct,ne){"use strict";ne.d(Ct,{r:function(){return R}});var Se=ne(8318),ye=ne(7570);function R(M,x){return new Se.y(function(oe){var Ve=new ye.w,Te=0;return Ve.add(x.schedule(function(){Te!==M.length?(oe.next(M[Te++]),oe.closed||Ve.add(this.schedule())):oe.complete()})),Ve})}},8277:function(vn,Ct,ne){"use strict";ne.d(Ct,{o:function(){return Ve}});var Se=ne(5134),ye=ne(7289),R=ne(1885),M=ne(9727),Ve=function(Te){(0,R.Z)(Ae,Te);var v=(0,M.Z)(Ae);function Ae(xe,ce){var Be;return(0,Se.Z)(this,Ae),(Be=v.call(this,xe,ce)).scheduler=xe,Be.work=ce,Be.pending=!1,Be}return(0,ye.Z)(Ae,[{key:"schedule",value:function(ce){var Be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=ce;var ae=this.id,be=this.scheduler;return null!=ae&&(this.id=this.recycleAsyncId(be,ae,Be)),this.pending=!0,this.delay=Be,this.id=this.id||this.requestAsyncId(be,this.id,Be),this}},{key:"requestAsyncId",value:function(ce,Be){var ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(ce.flush.bind(ce,this),ae)}},{key:"recycleAsyncId",value:function(ce,Be){var ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==ae&&this.delay===ae&&!1===this.pending)return Be;clearInterval(Be)}},{key:"execute",value:function(ce,Be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var ae=this._execute(ce,Be);if(ae)return ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(ce,Be){var ae=!1,be=void 0;try{this.work(ce)}catch(Ne){ae=!0,be=!!Ne&&Ne||new Error(Ne)}if(ae)return this.unsubscribe(),be}},{key:"_unsubscribe",value:function(){var ce=this.id,Be=this.scheduler,ae=Be.actions,be=ae.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==be&&ae.splice(be,1),null!=ce&&(this.id=this.recycleAsyncId(Be,ce,null)),this.delay=null}}]),Ae}(function(Te){(0,R.Z)(Ae,Te);var v=(0,M.Z)(Ae);function Ae(xe,ce){return(0,Se.Z)(this,Ae),v.call(this)}return(0,ye.Z)(Ae,[{key:"schedule",value:function(ce){return this}}]),Ae}(ne(7570).w))},1098:function(vn,Ct,ne){"use strict";ne.d(Ct,{v:function(){return v}});var Se=ne(5134),ye=ne(7289),R=ne(6518),M=ne(9333),x=ne(9187),oe=ne(1885),Ve=ne(9727),Te=function(){var Ae=function(){function xe(ce){var Be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xe.now;(0,Se.Z)(this,xe),this.SchedulerAction=ce,this.now=Be}return(0,ye.Z)(xe,[{key:"schedule",value:function(Be){var ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,be=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,Be).schedule(be,ae)}}]),xe}();return Ae.now=function(){return Date.now()},Ae}(),v=function(Ae){(0,oe.Z)(ce,Ae);var xe=(0,Ve.Z)(ce);function ce(Be){var ae,be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Te.now;return(0,Se.Z)(this,ce),(ae=xe.call(this,Be,function(){return ce.delegate&&ce.delegate!==(0,R.Z)(ae)?ce.delegate.now():be()})).actions=[],ae.active=!1,ae.scheduled=void 0,ae}return(0,ye.Z)(ce,[{key:"schedule",value:function(ae){var be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Ne=arguments.length>2?arguments[2]:void 0;return ce.delegate&&ce.delegate!==this?ce.delegate.schedule(ae,be,Ne):(0,M.Z)((0,x.Z)(ce.prototype),"schedule",this).call(this,ae,be,Ne)}},{key:"flush",value:function(ae){var be=this.actions;if(this.active)be.push(ae);else{var Ne;this.active=!0;do{if(Ne=ae.execute(ae.state,ae.delay))break}while(ae=be.shift());if(this.active=!1,Ne){for(;ae=be.shift();)ae.unsubscribe();throw Ne}}}}]),ce}(Te)},2709:function(vn,Ct,ne){"use strict";ne.d(Ct,{e:function(){return et},E:function(){return He}});var Se=ne(5134),ye=ne(7289),R=ne(9333),M=ne(9187),x=ne(1885),oe=ne(9727),Ve=1,Te=function(){return Promise.resolve()}(),v={};function Ae(tt){return tt in v&&(delete v[tt],!0)}var xe_setImmediate=function(We){var pt=Ve++;return v[pt]=!0,Te.then(function(){return Ae(pt)&&We()}),pt},xe_clearImmediate=function(We){Ae(We)},ae=function(tt){(0,x.Z)(pt,tt);var We=(0,oe.Z)(pt);function pt(lt,ee){var Dn;return(0,Se.Z)(this,pt),(Dn=We.call(this,lt,ee)).scheduler=lt,Dn.work=ee,Dn}return(0,ye.Z)(pt,[{key:"requestAsyncId",value:function(ee,Dn){var mn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==mn&&mn>0?(0,R.Z)((0,M.Z)(pt.prototype),"requestAsyncId",this).call(this,ee,Dn,mn):(ee.actions.push(this),ee.scheduled||(ee.scheduled=xe_setImmediate(ee.flush.bind(ee,null))))}},{key:"recycleAsyncId",value:function(ee,Dn){var mn=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==mn&&mn>0||null===mn&&this.delay>0)return(0,R.Z)((0,M.Z)(pt.prototype),"recycleAsyncId",this).call(this,ee,Dn,mn);0===ee.actions.length&&(xe_clearImmediate(Dn),ee.scheduled=void 0)}}]),pt}(ne(8277).o),He=new(function(tt){(0,x.Z)(pt,tt);var We=(0,oe.Z)(pt);function pt(){return(0,Se.Z)(this,pt),We.apply(this,arguments)}return(0,ye.Z)(pt,[{key:"flush",value:function(ee){this.active=!0,this.scheduled=void 0;var mn,Dn=this.actions,nn=-1,Vt=Dn.length;ee=ee||Dn.shift();do{if(mn=ee.execute(ee.state,ee.delay))break}while(++nn<Vt&&(ee=Dn.shift()));if(this.active=!1,mn){for(;++nn<Vt&&(ee=Dn.shift());)ee.unsubscribe();throw mn}}}]),pt}(ne(1098).v))(ae),et=He},8569:function(vn,Ct,ne){"use strict";ne.d(Ct,{z:function(){return R},P:function(){return M}});var Se=ne(8277),R=new(ne(1098).v)(Se.o),M=R},8489:function(vn,Ct,ne){"use strict";ne.d(Ct,{c:function(){return ce},N:function(){return xe}});var Se=ne(5134),ye=ne(7289),R=ne(9333),M=ne(9187),x=ne(1885),oe=ne(9727),Te=function(Be){(0,x.Z)(be,Be);var ae=(0,oe.Z)(be);function be(Ne,He){var et;return(0,Se.Z)(this,be),(et=ae.call(this,Ne,He)).scheduler=Ne,et.work=He,et}return(0,ye.Z)(be,[{key:"schedule",value:function(He){var et=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return et>0?(0,R.Z)((0,M.Z)(be.prototype),"schedule",this).call(this,He,et):(this.delay=et,this.state=He,this.scheduler.flush(this),this)}},{key:"execute",value:function(He,et){return et>0||this.closed?(0,R.Z)((0,M.Z)(be.prototype),"execute",this).call(this,He,et):this._execute(He,et)}},{key:"requestAsyncId",value:function(He,et){var tt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==tt&&tt>0||null===tt&&this.delay>0?(0,R.Z)((0,M.Z)(be.prototype),"requestAsyncId",this).call(this,He,et,tt):He.flush(this)}}]),be}(ne(8277).o),xe=new(function(Be){(0,x.Z)(be,Be);var ae=(0,oe.Z)(be);function be(){return(0,Se.Z)(this,be),ae.apply(this,arguments)}return be}(ne(1098).v))(Te),ce=xe},5686:function(vn,Ct,ne){"use strict";function Se(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}ne.d(Ct,{hZ:function(){return ye}});var ye=Se()},6197:function(vn,Ct,ne){"use strict";ne.d(Ct,{L:function(){return Se}});var Se=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},5331:function(vn,Ct,ne){"use strict";ne.d(Ct,{b:function(){return Se}});var Se=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},3895:function(vn,Ct,ne){"use strict";ne.d(Ct,{N:function(){return ye}});var ye=function(){function R(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return R.prototype=Object.create(Error.prototype),R}()},4294:function(vn,Ct,ne){"use strict";function Se(ye){setTimeout(function(){throw ye},0)}ne.d(Ct,{z:function(){return Se}})},3392:function(vn,Ct,ne){"use strict";function Se(ye){return ye}ne.d(Ct,{y:function(){return Se}})},8470:function(vn,Ct,ne){"use strict";ne.d(Ct,{k:function(){return Se}});var Se=function(){return Array.isArray||function(ye){return ye&&"number"==typeof ye.length}}()},9653:function(vn,Ct,ne){"use strict";ne.d(Ct,{z:function(){return Se}});var Se=function(R){return R&&"number"==typeof R.length&&"function"!=typeof R}},5024:function(vn,Ct,ne){"use strict";function Se(ye){return"function"==typeof ye}ne.d(Ct,{m:function(){return Se}})},2293:function(vn,Ct,ne){"use strict";ne.d(Ct,{k:function(){return ye}});var Se=ne(8470);function ye(R){return!(0,Se.k)(R)&&R-parseFloat(R)+1>=0}},2056:function(vn,Ct,ne){"use strict";function Se(ye){return null!==ye&&"object"==typeof ye}ne.d(Ct,{K:function(){return Se}})},5168:function(vn,Ct,ne){"use strict";function Se(ye){return!!ye&&"function"!=typeof ye.subscribe&&"function"==typeof ye.then}ne.d(Ct,{t:function(){return Se}})},6163:function(vn,Ct,ne){"use strict";function Se(ye){return ye&&"function"==typeof ye.schedule}ne.d(Ct,{K:function(){return Se}})},6015:function(vn,Ct,ne){"use strict";ne.d(Ct,{s:function(){return xe}});var Se=ne(625),ye=ne(4294),M=ne(5686),oe=ne(6197),Te=ne(9653),v=ne(5168),Ae=ne(2056),xe=function(Be){if(Be&&"function"==typeof Be[oe.L])return function(Be){return function(ae){var be=Be[oe.L]();if("function"!=typeof be.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return be.subscribe(ae)}}(Be);if((0,Te.z)(Be))return(0,Se.V)(Be);if((0,v.t)(Be))return function(Be){return function(ae){return Be.then(function(be){ae.closed||(ae.next(be),ae.complete())},function(be){return ae.error(be)}).then(null,ye.z),ae}}(Be);if(Be&&"function"==typeof Be[M.hZ])return function(Be){return function(ae){for(var be=Be[M.hZ]();;){var Ne=void 0;try{Ne=be.next()}catch(He){return ae.error(He),ae}if(Ne.done){ae.complete();break}if(ae.next(Ne.value),ae.closed)break}return"function"==typeof be.return&&ae.add(function(){be.return&&be.return()}),ae}}(Be);var ae=(0,Ae.K)(Be)?"an invalid object":"'".concat(Be,"'"),be="You provided ".concat(ae," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(be)}},625:function(vn,Ct,ne){"use strict";ne.d(Ct,{V:function(){return Se}});var Se=function(R){return function(M){for(var x=0,oe=R.length;x<oe&&!M.closed;x++)M.next(R[x]);M.complete()}}},3124:function(vn,Ct,ne){var Se,ye;ye="undefined"!=typeof window?window:this,void 0!==(Se=function(){return function(ye,R){var x=(void 0!==this?this:ye).SVG=function(K){if(x.supported)return K=new x.Doc(K),x.parser.draw||x.prepare(),K};if(x.ns="http://www.w3.org/2000/svg",x.xmlns="http://www.w3.org/2000/xmlns/",x.xlink="http://www.w3.org/1999/xlink",x.svgjs="http://svgjs.com/svgjs",x.supported=!!R.createElementNS&&!!R.createElementNS(x.ns,"svg").createSVGRect,!x.supported)return!1;x.did=1e3,x.eid=function(K){return"Svgjs"+Ne(K)+x.did++},x.create=function(K){var k=R.createElementNS(this.ns,K);return k.setAttribute("id",this.eid(K)),k},x.extend=function(){var K,k,j,ie;for(k=(K=[].slice.call(arguments)).pop(),ie=K.length-1;ie>=0;ie--)if(K[ie])for(j in k)K[ie].prototype[j]=k[j];x.Set&&x.Set.inherit&&x.Set.inherit()},x.invent=function(K){var k="function"==typeof K.create?K.create:function(){this.constructor.call(this,x.create(K.create))};return K.inherit&&(k.prototype=new K.inherit),K.extend&&x.extend(k,K.extend),K.construct&&x.extend(K.parent||x.Container,K.construct),k},x.adopt=function(K){return K?K.instance?K.instance:((k="svg"==K.nodeName?K.parentNode instanceof ye.SVGElement?new x.Nested:new x.Doc:"linearGradient"==K.nodeName?new x.Gradient("linear"):"radialGradient"==K.nodeName?new x.Gradient("radial"):x[Ne(K.nodeName)]?new(x[Ne(K.nodeName)]):new x.Element(K)).type=K.nodeName,k.node=K,K.instance=k,k instanceof x.Doc&&k.namespace().defs(),k.setData(JSON.parse(K.getAttribute("svgjs:data"))||{}),k):null;var k},x.prepare=function(){var K=R.getElementsByTagName("body")[0],k=(K?new x.Doc(K):x.adopt(R.documentElement).nested()).size(2,0);x.parser={body:K||R.documentElement,draw:k.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:k.polyline().node,path:k.path().node,native:x.create("svg")}},x.parser={native:x.create("svg")},R.addEventListener("DOMContentLoaded",function(){x.parser.draw||x.prepare()},!1),x.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},x.utils={map:function(k,j){var ie,we=k.length,Le=[];for(ie=0;ie<we;ie++)Le.push(j(k[ie]));return Le},filter:function(k,j){var ie,we=k.length,Le=[];for(ie=0;ie<we;ie++)j(k[ie])&&Le.push(k[ie]);return Le},radians:function(k){return k%360*Math.PI/180},degrees:function(k){return 180*k/Math.PI%360},filterSVGElements:function(k){return this.filter(k,function(j){return j instanceof ye.SVGElement})}},x.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},x.Color=function(K){var k;this.r=0,this.g=0,this.b=0,K&&("string"==typeof K?x.regex.isRgb.test(K)?(k=x.regex.rgb.exec(K.replace(x.regex.whitespace,"")),this.r=parseInt(k[1]),this.g=parseInt(k[2]),this.b=parseInt(k[3])):x.regex.isHex.test(K)&&(k=x.regex.hex.exec(function(K){return 4==K.length?["#",K.substring(1,2),K.substring(1,2),K.substring(2,3),K.substring(2,3),K.substring(3,4),K.substring(3,4)].join(""):K}(K)),this.r=parseInt(k[1],16),this.g=parseInt(k[2],16),this.b=parseInt(k[3],16)):"object"==typeof K&&(this.r=K.r,this.g=K.g,this.b=K.b))},x.extend(x.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+et(this.r)+et(this.g)+et(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(k){return this.destination=new x.Color(k),this},at:function(k){return this.destination?new x.Color({r:~~(this.r+(this.destination.r-this.r)*(k=k<0?0:k>1?1:k)),g:~~(this.g+(this.destination.g-this.g)*k),b:~~(this.b+(this.destination.b-this.b)*k)}):this}}),x.Color.test=function(K){return x.regex.isHex.test(K+="")||x.regex.isRgb.test(K)},x.Color.isRgb=function(K){return K&&"number"==typeof K.r&&"number"==typeof K.g&&"number"==typeof K.b},x.Color.isColor=function(K){return x.Color.isRgb(K)||x.Color.test(K)},x.Array=function(K,k){0==(K=(K||[]).valueOf()).length&&k&&(K=k.valueOf()),this.value=this.parse(K)},x.extend(x.Array,{morph:function(k){if(this.destination=this.parse(k),this.value.length!=this.destination.length){for(var j=this.value[this.value.length-1],ie=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(ie);for(;this.value.length<this.destination.length;)this.value.push(j)}return this},settle:function(){for(var k=0,j=this.value.length,ie=[];k<j;k++)-1==ie.indexOf(this.value[k])&&ie.push(this.value[k]);return this.value=ie},at:function(k){if(!this.destination)return this;for(var j=0,ie=this.value.length,we=[];j<ie;j++)we.push(this.value[j]+(this.destination[j]-this.value[j])*k);return new x.Array(we)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(k){return k=k.valueOf(),Array.isArray(k)?k:this.split(k)},split:function(k){return k.trim().split(x.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var k=new this.constructor;return k.value=ce(this.value),k}}),x.PointArray=function(K,k){x.Array.call(this,K,k||[[0,0]])},x.PointArray.prototype=new x.Array,x.PointArray.prototype.constructor=x.PointArray,x.extend(x.PointArray,{toString:function(){for(var k=0,j=this.value.length,ie=[];k<j;k++)ie.push(this.value[k].join(","));return ie.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(k){if(!this.destination)return this;for(var j=0,ie=this.value.length,we=[];j<ie;j++)we.push([this.value[j][0]+(this.destination[j][0]-this.value[j][0])*k,this.value[j][1]+(this.destination[j][1]-this.value[j][1])*k]);return new x.PointArray(we)},parse:function(k){var j=[];if(k=k.valueOf(),Array.isArray(k)){if(Array.isArray(k[0]))return k.map(function(Le){return Le.slice()});if(null!=k[0].x)return k.map(function(Le){return[Le.x,Le.y]})}else k=k.trim().split(x.regex.delimiter).map(parseFloat);k.length%2!=0&&k.pop();for(var ie=0,we=k.length;ie<we;ie+=2)j.push([k[ie],k[ie+1]]);return j},move:function(k,j){var ie=this.bbox();if(k-=ie.x,j-=ie.y,!isNaN(k)&&!isNaN(j))for(var we=this.value.length-1;we>=0;we--)this.value[we]=[this.value[we][0]+k,this.value[we][1]+j];return this},size:function(k,j){var ie,we=this.bbox();for(ie=this.value.length-1;ie>=0;ie--)we.width&&(this.value[ie][0]=(this.value[ie][0]-we.x)*k/we.width+we.x),we.height&&(this.value[ie][1]=(this.value[ie][1]-we.y)*j/we.height+we.y);return this},bbox:function(){return x.parser.poly.setAttribute("points",this.toString()),x.parser.poly.getBBox()}});for(var oe={M:function(k,j,ie){return j.x=ie.x=k[0],j.y=ie.y=k[1],["M",j.x,j.y]},L:function(k,j){return j.x=k[0],j.y=k[1],["L",k[0],k[1]]},H:function(k,j){return j.x=k[0],["H",k[0]]},V:function(k,j){return j.y=k[0],["V",k[0]]},C:function(k,j){return j.x=k[4],j.y=k[5],["C",k[0],k[1],k[2],k[3],k[4],k[5]]},S:function(k,j){return j.x=k[2],j.y=k[3],["S",k[0],k[1],k[2],k[3]]},Q:function(k,j){return j.x=k[2],j.y=k[3],["Q",k[0],k[1],k[2],k[3]]},T:function(k,j){return j.x=k[0],j.y=k[1],["T",k[0],k[1]]},Z:function(k,j,ie){return j.x=ie.x,j.y=ie.y,["Z"]},A:function(k,j){return j.x=k[5],j.y=k[6],["A",k[0],k[1],k[2],k[3],k[4],k[5],k[6]]}},Ve="mlhvqtcsaz".split(""),Te=0,v=Ve.length;Te<v;++Te)oe[Ve[Te]]=function(K){return function(k,j,ie){if("H"==K)k[0]=k[0]+j.x;else if("V"==K)k[0]=k[0]+j.y;else if("A"==K)k[5]=k[5]+j.x,k[6]=k[6]+j.y;else for(var we=0,Le=k.length;we<Le;++we)k[we]=k[we]+(we%2?j.y:j.x);return oe[K](k,j,ie)}}(Ve[Te].toUpperCase());x.PathArray=function(K,k){x.Array.call(this,K,k||[["M",0,0]])},x.PathArray.prototype=new x.Array,x.PathArray.prototype.constructor=x.PathArray,x.extend(x.PathArray,{toString:function(){return function(K){for(var k=0,j=K.length,ie="";k<j;k++)ie+=K[k][0],null!=K[k][1]&&(ie+=K[k][1],null!=K[k][2]&&(ie+=" ",ie+=K[k][2],null!=K[k][3]&&(ie+=" ",ie+=K[k][3],ie+=" ",ie+=K[k][4],null!=K[k][5]&&(ie+=" ",ie+=K[k][5],ie+=" ",ie+=K[k][6],null!=K[k][7]&&(ie+=" ",ie+=K[k][7])))));return ie+" "}(this.value)},move:function(k,j){var ie=this.bbox();if(k-=ie.x,j-=ie.y,!isNaN(k)&&!isNaN(j))for(var we,Le=this.value.length-1;Le>=0;Le--)"M"==(we=this.value[Le][0])||"L"==we||"T"==we?(this.value[Le][1]+=k,this.value[Le][2]+=j):"H"==we?this.value[Le][1]+=k:"V"==we?this.value[Le][1]+=j:"C"==we||"S"==we||"Q"==we?(this.value[Le][1]+=k,this.value[Le][2]+=j,this.value[Le][3]+=k,this.value[Le][4]+=j,"C"==we&&(this.value[Le][5]+=k,this.value[Le][6]+=j)):"A"==we&&(this.value[Le][6]+=k,this.value[Le][7]+=j);return this},size:function(k,j){var ie,we,Le=this.bbox();for(ie=this.value.length-1;ie>=0;ie--)"M"==(we=this.value[ie][0])||"L"==we||"T"==we?(this.value[ie][1]=(this.value[ie][1]-Le.x)*k/Le.width+Le.x,this.value[ie][2]=(this.value[ie][2]-Le.y)*j/Le.height+Le.y):"H"==we?this.value[ie][1]=(this.value[ie][1]-Le.x)*k/Le.width+Le.x:"V"==we?this.value[ie][1]=(this.value[ie][1]-Le.y)*j/Le.height+Le.y:"C"==we||"S"==we||"Q"==we?(this.value[ie][1]=(this.value[ie][1]-Le.x)*k/Le.width+Le.x,this.value[ie][2]=(this.value[ie][2]-Le.y)*j/Le.height+Le.y,this.value[ie][3]=(this.value[ie][3]-Le.x)*k/Le.width+Le.x,this.value[ie][4]=(this.value[ie][4]-Le.y)*j/Le.height+Le.y,"C"==we&&(this.value[ie][5]=(this.value[ie][5]-Le.x)*k/Le.width+Le.x,this.value[ie][6]=(this.value[ie][6]-Le.y)*j/Le.height+Le.y)):"A"==we&&(this.value[ie][1]=this.value[ie][1]*k/Le.width,this.value[ie][2]=this.value[ie][2]*j/Le.height,this.value[ie][6]=(this.value[ie][6]-Le.x)*k/Le.width+Le.x,this.value[ie][7]=(this.value[ie][7]-Le.y)*j/Le.height+Le.y);return this},equalCommands:function(k){var j,ie,we;for(k=new x.PathArray(k),we=this.value.length===k.value.length,j=0,ie=this.value.length;we&&j<ie;j++)we=this.value[j][0]===k.value[j][0];return we},morph:function(k){return k=new x.PathArray(k),this.destination=this.equalCommands(k)?k:null,this},at:function(k){if(!this.destination)return this;var at,bt,nt,Ot,j=this.value,ie=this.destination.value,we=[],Le=new x.PathArray;for(at=0,bt=j.length;at<bt;at++){for(we[at]=[j[at][0]],nt=1,Ot=j[at].length;nt<Ot;nt++)we[at][nt]=j[at][nt]+(ie[at][nt]-j[at][nt])*k;"A"===we[at][0]&&(we[at][4]=+(0!=we[at][4]),we[at][5]=+(0!=we[at][5]))}return Le.value=we,Le},parse:function(k){if(k instanceof x.PathArray)return k.valueOf();var Le,On={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};k="string"==typeof k?k.replace(x.regex.numbersWithDots,xe).replace(x.regex.pathLetters," $& ").replace(x.regex.hyphen,"$1 -").trim().split(x.regex.delimiter):k.reduce(function(Ti,jo){return[].concat.call(Ti,jo)},[]);var bt=[],rr=new x.Point,ni=new x.Point,mi=0,ji=k.length;do{x.regex.isPathLetter.test(k[mi])?(Le=k[mi],++mi):"M"==Le?Le="L":"m"==Le&&(Le="l"),bt.push(oe[Le].call(null,k.slice(mi,mi+=On[Le.toUpperCase()]).map(parseFloat),rr,ni))}while(ji>mi);return bt},bbox:function(){return x.parser.path.setAttribute("d",this.toString()),x.parser.path.getBBox()}}),x.Number=x.invent({create:function(k,j){this.value=0,this.unit=j||"","number"==typeof k?this.value=isNaN(k)?0:isFinite(k)?k:k<0?-34e37:34e37:"string"==typeof k?(j=k.match(x.regex.numberAndUnit))&&(this.value=parseFloat(j[1]),"%"==j[5]?this.value/=100:"s"==j[5]&&(this.value*=1e3),this.unit=j[5]):k instanceof x.Number&&(this.value=k.valueOf(),this.unit=k.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(k){return k=new x.Number(k),new x.Number(this+k,this.unit||k.unit)},minus:function(k){return k=new x.Number(k),new x.Number(this-k,this.unit||k.unit)},times:function(k){return k=new x.Number(k),new x.Number(this*k,this.unit||k.unit)},divide:function(k){return k=new x.Number(k),new x.Number(this/k,this.unit||k.unit)},to:function(k){var j=new x.Number(this);return"string"==typeof k&&(j.unit=k),j},morph:function(k){return this.destination=new x.Number(k),k.relative&&(this.destination.value+=this.value),this},at:function(k){return this.destination?new x.Number(this.destination).minus(this).times(k).plus(this):this}}}),x.Element=x.invent({create:function(k){this._stroke=x.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=k)&&(this.type=k.nodeName,this.node.instance=this,this._events=k._events||{},this._stroke=k.getAttribute("stroke")||this._stroke)},extend:{x:function(k){return this.attr("x",k)},y:function(k){return this.attr("y",k)},cx:function(k){return null==k?this.x()+this.width()/2:this.x(k-this.width()/2)},cy:function(k){return null==k?this.y()+this.height()/2:this.y(k-this.height()/2)},move:function(k,j){return this.x(k).y(j)},center:function(k,j){return this.cx(k).cy(j)},width:function(k){return this.attr("width",k)},height:function(k){return this.attr("height",k)},size:function(k,j){var ie=tt(this,k,j);return this.width(new x.Number(ie.width)).height(new x.Number(ie.height))},clone:function(k){this.writeDataToDom();var j=mn(this.node.cloneNode(!0));return k?k.add(j):this.after(j),j},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(k){return this.after(k).remove(),k},addTo:function(k){return k.put(this)},putIn:function(k){return k.add(this)},id:function(k){return this.attr("id",k)},inside:function(k,j){var ie=this.bbox();return k>ie.x&&j>ie.y&&k<ie.x+ie.width&&j<ie.y+ie.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var k=this.attr("class");return null==k?[]:k.trim().split(x.regex.delimiter)},hasClass:function(k){return-1!=this.classes().indexOf(k)},addClass:function(k){if(!this.hasClass(k)){var j=this.classes();j.push(k),this.attr("class",j.join(" "))}return this},removeClass:function(k){return this.hasClass(k)&&this.attr("class",this.classes().filter(function(j){return j!=k}).join(" ")),this},toggleClass:function(k){return this.hasClass(k)?this.removeClass(k):this.addClass(k)},reference:function(k){return x.get(this.attr(k))},parent:function(k){var j=this;if(!j.node.parentNode)return null;if(j=x.adopt(j.node.parentNode),!k)return j;for(;j&&j.node instanceof ye.SVGElement;){if("string"==typeof k?j.matches(k):j instanceof k)return j;if(!j.node.parentNode||"#document"==j.node.parentNode.nodeName||"#document-fragment"==j.node.parentNode.nodeName)return null;j=x.adopt(j.node.parentNode)}},doc:function(){return this instanceof x.Doc?this:this.parent(x.Doc)},parents:function(k){var j=[],ie=this;do{if(!(ie=ie.parent(k))||!ie.node)break;j.push(ie)}while(ie.parent);return j},matches:function(k){return function(K,k){return(K.matches||K.matchesSelector||K.msMatchesSelector||K.mozMatchesSelector||K.webkitMatchesSelector||K.oMatchesSelector).call(K,k)}(this.node,k)},native:function(){return this.node},svg:function(k){var j=R.createElement("svg");if(!(k&&this instanceof x.Parent))return j.appendChild(k=R.createElement("svg")),this.writeDataToDom(),k.appendChild(this.node.cloneNode(!0)),j.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");j.innerHTML="<svg>"+k.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var ie=0,we=j.firstChild.childNodes.length;ie<we;ie++)this.node.appendChild(j.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(k){return this.dom=k,this},is:function(k){return function(K,k){return K instanceof k}(this,k)}}}),x.easing={"-":function(k){return k},"<>":function(k){return-Math.cos(k*Math.PI)/2+.5},">":function(k){return Math.sin(k*Math.PI/2)},"<":function(k){return 1-Math.cos(k*Math.PI/2)}},x.morph=function(K){return function(k,j){return new x.MorphObj(k,j).at(K)}},x.Situation=x.invent({create:function(k){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new x.Number(k.duration).valueOf(),this.delay=new x.Number(k.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=k.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),x.FX=x.invent({create:function(k){this._target=k,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(k,j,ie){"object"==typeof k&&(j=k.ease,ie=k.delay,k=k.duration);var we=new x.Situation({duration:k||1e3,delay:ie||0,ease:x.easing[j||"-"]||j});return this.queue(we),this},delay:function(k){var j=new x.Situation({duration:k,delay:0,ease:x.easing["-"]});return this.queue(j)},target:function(k){return k&&k instanceof x.Element?(this._target=k,this):this._target},timeToAbsPos:function(k){return(k-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(k){return this.situation.duration/this._speed*k+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=ye.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){ye.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(k){return("function"==typeof k||k instanceof x.Situation)&&this.situations.push(k),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof x.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var k,j,ie,we=this.situation;if(we.init)return this;for(k in we.animations)for(ie=this.target()[k](),Array.isArray(ie)||(ie=[ie]),Array.isArray(we.animations[k])||(we.animations[k]=[we.animations[k]]),j=ie.length;j--;)we.animations[k][j]instanceof x.Number&&(ie[j]=new x.Number(ie[j])),we.animations[k][j]=ie[j].morph(we.animations[k][j]);for(k in we.attrs)we.attrs[k]=new x.MorphObj(this.target().attr(k),we.attrs[k]);for(k in we.styles)we.styles[k]=new x.MorphObj(this.target().style(k),we.styles[k]);return we.initialTransformation=this.target().matrixify(),we.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(k,j){var ie=this.active;return this.active=!1,j&&this.clearQueue(),k&&this.situation&&(!ie&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var k=this.situation;this.stop(),this.situation=k,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),this.at("number"==typeof this.situation.loops?this.situation.loops:1,!0)},at:function(k,j){var ie=this.situation.duration/this._speed;return this.absPos=k,j||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*ie,this.situation.finish=this.situation.start+ie,this.step(!0)},speed:function(k){return 0===k?this.pause():k?(this._speed=k,this.at(this.absPos,!0)):this._speed},loop:function(k,j){var ie=this.last();return ie.loops=null==k||k,ie.loop=0,j&&(ie.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(k){var j=this.last();return j.reversed=void 0===k?!j.reversed:k,this},progress:function(k){return k?this.situation.ease(this.pos):this.pos},after:function(k){var j=this.last();return this.target().on("finished.fx",function we(Le){Le.detail.situation==j&&(k.call(this,j),this.off("finished.fx",we))}),this._callStart()},during:function(k){var j=this.last(),ie=function(Le){Le.detail.situation==j&&k.call(this,Le.detail.pos,x.morph(Le.detail.pos),Le.detail.eased,j)};return this.target().off("during.fx",ie).on("during.fx",ie),this.after(function(){this.off("during.fx",ie)}),this._callStart()},afterAll:function(k){var j=function ie(we){k.call(this),this.off("allfinished.fx",ie)};return this.target().off("allfinished.fx",j).on("allfinished.fx",j),this._callStart()},duringAll:function(k){var j=function(we){k.call(this,we.detail.pos,x.morph(we.detail.pos),we.detail.eased,we.detail.situation)};return this.target().off("during.fx",j).on("during.fx",j),this.afterAll(function(){this.off("during.fx",j)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(k,j,ie){return this.last()[ie||"animations"][k]=j,this._callStart()},step:function(k){var j,ie,we;k||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(j=Math.max(this.absPos,0),ie=Math.floor(j),!0===this.situation.loops||ie<this.situation.loops?(this.pos=j-ie,we=this.situation.loop,this.situation.loop=ie):(this.absPos=this.situation.loops,this.pos=1,we=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-we)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Le=this.situation.ease(this.pos);for(var at in this.situation.once)at>this.lastPos&&at<=Le&&(this.situation.once[at].call(this.target(),this.pos,Le),delete this.situation.once[at]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Le,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Le,this):this},eachAt:function(){var k,j,ie,we=this,Le=this.target(),at=this.situation;for(k in at.animations)ie=[].concat(at.animations[k]).map(function(nt){return"string"!=typeof nt&&nt.at?nt.at(at.ease(we.pos),we.pos):nt}),Le[k].apply(Le,ie);for(k in at.attrs)ie=[k].concat(at.attrs[k]).map(function(nt){return"string"!=typeof nt&&nt.at?nt.at(at.ease(we.pos),we.pos):nt}),Le.attr.apply(Le,ie);for(k in at.styles)ie=[k].concat(at.styles[k]).map(function(nt){return"string"!=typeof nt&&nt.at?nt.at(at.ease(we.pos),we.pos):nt}),Le.style.apply(Le,ie);if(at.transforms.length){for(ie=at.initialTransformation,k=0,j=at.transforms.length;k<j;k++){var bt=at.transforms[k];bt instanceof x.Matrix?ie=bt.relative?ie.multiply((new x.Matrix).morph(bt).at(at.ease(this.pos))):ie.morph(bt).at(at.ease(this.pos)):(bt.relative||bt.undo(ie.extract()),ie=ie.multiply(bt.at(at.ease(this.pos))))}Le.matrix(ie)}return this},once:function(k,j,ie){var we=this.last();return ie||(k=we.ease(k)),we.once[k]=j,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:x.Element,construct:{animate:function(k,j,ie){return(this.fx||(this.fx=new x.FX(this))).animate(k,j,ie)},delay:function(k){return(this.fx||(this.fx=new x.FX(this))).delay(k)},stop:function(k,j){return this.fx&&this.fx.stop(k,j),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(k){if(this.fx){if(null==k)return this.fx.speed();this.fx.speed(k)}return this}}}),x.MorphObj=x.invent({create:function(k,j){return x.Color.isColor(j)?new x.Color(k).morph(j):x.regex.delimiter.test(k)?x.regex.pathLetters.test(k)?new x.PathArray(k).morph(j):new x.Array(k).morph(j):x.regex.numberAndUnit.test(j)?new x.Number(k).morph(j):(this.value=k,void(this.destination=j))},extend:{at:function(k,j){return j<1?this.value:this.destination},valueOf:function(){return this.value}}}),x.extend(x.FX,{attr:function(k,j,ie){if("object"==typeof k)for(var we in k)this.attr(we,k[we]);else this.add(k,j,"attrs");return this},style:function(k,j){if("object"==typeof k)for(var ie in k)this.style(ie,k[ie]);else this.add(k,j,"styles");return this},x:function(k,j){if(this.target()instanceof x.G)return this.transform({x:k},j),this;var ie=new x.Number(k);return ie.relative=j,this.add("x",ie)},y:function(k,j){if(this.target()instanceof x.G)return this.transform({y:k},j),this;var ie=new x.Number(k);return ie.relative=j,this.add("y",ie)},cx:function(k){return this.add("cx",new x.Number(k))},cy:function(k){return this.add("cy",new x.Number(k))},move:function(k,j){return this.x(k).y(j)},center:function(k,j){return this.cx(k).cy(j)},size:function(k,j){var ie;return this.target()instanceof x.Text?this.attr("font-size",k):((!k||!j)&&(ie=this.target().bbox()),k||(k=ie.width/ie.height*j),j||(j=ie.height/ie.width*k),this.add("width",new x.Number(k)).add("height",new x.Number(j))),this},width:function(k){return this.add("width",new x.Number(k))},height:function(k){return this.add("height",new x.Number(k))},plot:function(k,j,ie,we){return 4==arguments.length?this.plot([k,j,ie,we]):this.add("plot",new(this.target().morphArray)(k))},leading:function(k){return this.target().leading?this.add("leading",new x.Number(k)):this},viewbox:function(k,j,ie,we){return this.target()instanceof x.Container&&this.add("viewbox",new x.ViewBox(k,j,ie,we)),this},update:function(k){if(this.target()instanceof x.Stop){if("number"==typeof k||k instanceof x.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=k.opacity&&this.attr("stop-opacity",k.opacity),null!=k.color&&this.attr("stop-color",k.color),null!=k.offset&&this.attr("offset",k.offset)}return this}}),x.Box=x.invent({create:function(k,j,ie,we){if("object"==typeof k&&!(k instanceof x.Element))return x.Box.call(this,null!=k.left?k.left:k.x,null!=k.top?k.top:k.y,k.width,k.height);4==arguments.length&&(this.x=k,this.y=j,this.width=ie,this.height=we),nn(this)},extend:{merge:function(k){var j=new this.constructor;return j.x=Math.min(this.x,k.x),j.y=Math.min(this.y,k.y),j.width=Math.max(this.x+this.width,k.x+k.width)-j.x,j.height=Math.max(this.y+this.height,k.y+k.height)-j.y,nn(j)},transform:function(k){var bt,j=1/0,ie=-1/0,we=1/0,Le=-1/0;return[new x.Point(this.x,this.y),new x.Point(this.x2,this.y),new x.Point(this.x,this.y2),new x.Point(this.x2,this.y2)].forEach(function(Ot){Ot=Ot.transform(k),j=Math.min(j,Ot.x),ie=Math.max(ie,Ot.x),we=Math.min(we,Ot.y),Le=Math.max(Le,Ot.y)}),(bt=new this.constructor).x=j,bt.width=ie-j,bt.y=we,bt.height=Le-we,nn(bt),bt}}}),x.BBox=x.invent({create:function(k){if(x.Box.apply(this,[].slice.call(arguments)),k instanceof x.Element){var j;try{if(R.documentElement.contains){if(!R.documentElement.contains(k.node))throw new Exception("Element not in the dom")}else{for(var ie=k.node;ie.parentNode;)ie=ie.parentNode;if(ie!=R)throw new Exception("Element not in the dom")}j=k.node.getBBox()}catch(Le){if(k instanceof x.Shape){var we=k.clone(x.parser.draw.instance).show();j=we.node.getBBox(),we.remove()}else j={x:k.node.clientLeft,y:k.node.clientTop,width:k.node.clientWidth,height:k.node.clientHeight}}x.Box.call(this,j)}},inherit:x.Box,parent:x.Element,construct:{bbox:function(){return new x.BBox(this)}}}),x.BBox.prototype.constructor=x.BBox,x.extend(x.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),x.RBox=x.invent({create:function(k){x.Box.apply(this,[].slice.call(arguments)),k instanceof x.Element&&x.Box.call(this,k.node.getBoundingClientRect())},inherit:x.Box,parent:x.Element,extend:{addOffset:function(){return this.x+=ye.pageXOffset,this.y+=ye.pageYOffset,this}},construct:{rbox:function(k){return k?new x.RBox(this).transform(k.screenCTM().inverse()):new x.RBox(this).addOffset()}}}),x.RBox.prototype.constructor=x.RBox,x.Matrix=x.invent({create:function(k){var j,ie=pt([1,0,0,1,0,0]);for(k=k instanceof x.Element?k.matrixify():"string"==typeof k?pt(k.split(x.regex.delimiter).map(parseFloat)):6==arguments.length?pt([].slice.call(arguments)):Array.isArray(k)?pt(k):"object"==typeof k?k:ie,j=Rt.length-1;j>=0;--j)this[Rt[j]]=null!=k[Rt[j]]?k[Rt[j]]:ie[Rt[j]]},extend:{extract:function(){var k=We(this,0,1),j=We(this,1,0),ie=180/Math.PI*Math.atan2(k.y,k.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(ie*Math.PI/180)+this.f*Math.sin(ie*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(ie*Math.PI/180)+this.e*Math.sin(-ie*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-ie,skewY:180/Math.PI*Math.atan2(j.y,j.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:ie,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new x.Matrix(this)}},clone:function(){return new x.Matrix(this)},morph:function(k){return this.destination=new x.Matrix(k),this},at:function(k){return this.destination?new x.Matrix({a:this.a+(this.destination.a-this.a)*k,b:this.b+(this.destination.b-this.b)*k,c:this.c+(this.destination.c-this.c)*k,d:this.d+(this.destination.d-this.d)*k,e:this.e+(this.destination.e-this.e)*k,f:this.f+(this.destination.f-this.f)*k}):this},multiply:function(k){return new x.Matrix(this.native().multiply((K=k,K instanceof x.Matrix||(K=new x.Matrix(K)),K).native()));var K},inverse:function(){return new x.Matrix(this.native().inverse())},translate:function(k,j){return new x.Matrix(this.native().translate(k||0,j||0))},scale:function(k,j,ie,we){return 1==arguments.length?j=k:3==arguments.length&&(we=ie,ie=j,j=k),this.around(ie,we,new x.Matrix(k,0,0,j,0,0))},rotate:function(k,j,ie){return k=x.utils.radians(k),this.around(j,ie,new x.Matrix(Math.cos(k),Math.sin(k),-Math.sin(k),Math.cos(k),0,0))},flip:function(k,j){return"x"==k?this.scale(-1,1,j,0):"y"==k?this.scale(1,-1,0,j):this.scale(-1,-1,k,null!=j?j:k)},skew:function(k,j,ie,we){return 1==arguments.length?j=k:3==arguments.length&&(we=ie,ie=j,j=k),k=x.utils.radians(k),j=x.utils.radians(j),this.around(ie,we,new x.Matrix(1,Math.tan(j),Math.tan(k),1,0,0))},skewX:function(k,j,ie){return this.skew(k,0,j,ie)},skewY:function(k,j,ie){return this.skew(0,k,j,ie)},around:function(k,j,ie){return this.multiply(new x.Matrix(1,0,0,1,k||0,j||0)).multiply(ie).multiply(new x.Matrix(1,0,0,1,-k||0,-j||0))},native:function(){for(var k=x.parser.native.createSVGMatrix(),j=Rt.length-1;j>=0;j--)k[Rt[j]]=this[Rt[j]];return k},toString:function(){return"matrix("+Nt(this.a)+","+Nt(this.b)+","+Nt(this.c)+","+Nt(this.d)+","+Nt(this.e)+","+Nt(this.f)+")"}},parent:x.Element,construct:{ctm:function(){return new x.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof x.Nested){var k=this.rect(1,1),j=k.node.getScreenCTM();return k.remove(),new x.Matrix(j)}return new x.Matrix(this.node.getScreenCTM())}}}),x.Point=x.invent({create:function(k,j){var we;we=Array.isArray(k)?{x:k[0],y:k[1]}:"object"==typeof k?{x:k.x,y:k.y}:null!=k?{x:k,y:null!=j?j:k}:{x:0,y:0},this.x=we.x,this.y=we.y},extend:{clone:function(){return new x.Point(this)},morph:function(k,j){return this.destination=new x.Point(k,j),this},at:function(k){return this.destination?new x.Point({x:this.x+(this.destination.x-this.x)*k,y:this.y+(this.destination.y-this.y)*k}):this},native:function(){var k=x.parser.native.createSVGPoint();return k.x=this.x,k.y=this.y,k},transform:function(k){return new x.Point(this.native().matrixTransform(k.native()))}}}),x.extend(x.Element,{point:function(k,j){return new x.Point(k,j).transform(this.screenCTM().inverse())}}),x.extend(x.Element,{attr:function(k,j,ie){if(null==k){for(k={},ie=(j=this.node.attributes).length-1;ie>=0;ie--)k[j[ie].nodeName]=x.regex.isNumber.test(j[ie].nodeValue)?parseFloat(j[ie].nodeValue):j[ie].nodeValue;return k}if("object"==typeof k)for(j in k)this.attr(j,k[j]);else if(null===j)this.node.removeAttribute(k);else{if(null==j)return null==(j=this.node.getAttribute(k))?x.defaults.attrs[k]:x.regex.isNumber.test(j)?parseFloat(j):j;"stroke-width"==k?this.attr("stroke",parseFloat(j)>0?this._stroke:null):"stroke"==k&&(this._stroke=j),("fill"==k||"stroke"==k)&&(x.regex.isImage.test(j)&&(j=this.doc().defs().image(j,0,0)),j instanceof x.Image&&(j=this.doc().defs().pattern(0,0,function(){this.add(j)}))),"number"==typeof j?j=new x.Number(j):x.Color.isColor(j)?j=new x.Color(j):Array.isArray(j)&&(j=new x.Array(j)),"leading"==k?this.leading&&this.leading(j):"string"==typeof ie?this.node.setAttributeNS(ie,k,j.toString()):this.node.setAttribute(k,j.toString()),this.rebuild&&("font-size"==k||"x"==k)&&this.rebuild(k,j)}return this}}),x.extend(x.Element,{transform:function(k,j){var we,Le,ie=this;if("object"!=typeof k)return we=new x.Matrix(ie).extract(),"string"==typeof k?we[k]:we;if(we=new x.Matrix(ie),j=!!j||!!k.relative,null!=k.a)we=j?we.multiply(new x.Matrix(k)):new x.Matrix(k);else if(null!=k.rotation)ee(k,ie),we=we.rotate(j?k.rotation:k.rotation-we.extract().rotation,k.cx,k.cy);else if(null!=k.scale||null!=k.scaleX||null!=k.scaleY){if(ee(k,ie),k.scaleX=null!=k.scale?k.scale:null!=k.scaleX?k.scaleX:1,k.scaleY=null!=k.scale?k.scale:null!=k.scaleY?k.scaleY:1,!j){var at=we.extract();k.scaleX=1*k.scaleX/at.scaleX,k.scaleY=1*k.scaleY/at.scaleY}we=we.scale(k.scaleX,k.scaleY,k.cx,k.cy)}else null!=k.skew||null!=k.skewX||null!=k.skewY?(ee(k,ie),k.skewX=null!=k.skew?k.skew:null!=k.skewX?k.skewX:0,k.skewY=null!=k.skew?k.skew:null!=k.skewY?k.skewY:0,j||(at=we.extract(),we=we.multiply((new x.Matrix).skew(at.skewX,at.skewY,k.cx,k.cy).inverse())),we=we.skew(k.skewX,k.skewY,k.cx,k.cy)):k.flip?("x"==k.flip||"y"==k.flip?k.offset=null==k.offset?ie.bbox()["c"+k.flip]:k.offset:null==k.offset?(Le=ie.bbox(),k.flip=Le.cx,k.offset=Le.cy):k.flip=k.offset,we=(new x.Matrix).flip(k.flip,k.offset)):(null!=k.x||null!=k.y)&&(j?we=we.translate(k.x,k.y):(null!=k.x&&(we.e=k.x),null!=k.y&&(we.f=k.y)));return this.attr("transform",we)}}),x.extend(x.FX,{transform:function(k,j){var we,Le,ie=this.target();return"object"!=typeof k?(we=new x.Matrix(ie).extract(),"string"==typeof k?we[k]:we):(j=!!j||!!k.relative,null!=k.a?we=new x.Matrix(k):null!=k.rotation?(ee(k,ie),we=new x.Rotate(k.rotation,k.cx,k.cy)):null!=k.scale||null!=k.scaleX||null!=k.scaleY?(ee(k,ie),k.scaleX=null!=k.scale?k.scale:null!=k.scaleX?k.scaleX:1,k.scaleY=null!=k.scale?k.scale:null!=k.scaleY?k.scaleY:1,we=new x.Scale(k.scaleX,k.scaleY,k.cx,k.cy)):null!=k.skewX||null!=k.skewY?(ee(k,ie),k.skewX=null!=k.skewX?k.skewX:0,k.skewY=null!=k.skewY?k.skewY:0,we=new x.Skew(k.skewX,k.skewY,k.cx,k.cy)):k.flip?("x"==k.flip||"y"==k.flip?k.offset=null==k.offset?ie.bbox()["c"+k.flip]:k.offset:null==k.offset?(Le=ie.bbox(),k.flip=Le.cx,k.offset=Le.cy):k.flip=k.offset,we=(new x.Matrix).flip(k.flip,k.offset)):(null!=k.x||null!=k.y)&&(we=new x.Translate(k.x,k.y)),we?(we.relative=j,this.last().transforms.push(we),this._callStart()):this)}}),x.extend(x.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(x.regex.transforms).slice(0,-1).map(function(j){var ie=j.trim().split("(");return[ie[0],ie[1].split(x.regex.delimiter).map(function(we){return parseFloat(we)})]}).reduce(function(j,ie){return"matrix"==ie[0]?j.multiply(pt(ie[1])):j[ie[0]].apply(j,ie[1])},new x.Matrix)},toParent:function(k){if(this==k)return this;var j=this.screenCTM(),ie=k.screenCTM().inverse();return this.addTo(k).untransform().transform(ie.multiply(j)),this},toDoc:function(){return this.toParent(this.doc())}}),x.Transformation=x.invent({create:function(k,j){if(arguments.length>1&&"boolean"!=typeof j)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(k))for(var ie=0,we=this.arguments.length;ie<we;++ie)this[this.arguments[ie]]=k[ie];else if("object"==typeof k)for(ie=0,we=this.arguments.length;ie<we;++ie)this[this.arguments[ie]]=k[this.arguments[ie]];this.inversed=!1,!0===j&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(k){for(var j=[],ie=0,we=this.arguments.length;ie<we;++ie)j.push(this[this.arguments[ie]]);var Le=this._undo||new x.Matrix;return Le=(new x.Matrix).morph(x.Matrix.prototype[this.method].apply(Le,j)).at(k),this.inversed?Le.inverse():Le},undo:function(k){for(var j=0,ie=this.arguments.length;j<ie;++j)k[this.arguments[j]]=void 0===this[this.arguments[j]]?0:k[this.arguments[j]];return k.cx=this.cx,k.cy=this.cy,this._undo=new(x[Ne(this.method)])(k,!0).at(1),this}}}),x.Translate=x.invent({parent:x.Matrix,inherit:x.Transformation,create:function(k,j){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),x.Rotate=x.invent({parent:x.Matrix,inherit:x.Transformation,create:function(k,j){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(k){var j=(new x.Matrix).rotate((new x.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(k),this.cx,this.cy);return this.inversed?j.inverse():j},undo:function(k){return this._undo=k,this}}}),x.Scale=x.invent({parent:x.Matrix,inherit:x.Transformation,create:function(k,j){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),x.Skew=x.invent({parent:x.Matrix,inherit:x.Transformation,create:function(k,j){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),x.extend(x.Element,{style:function(k,j){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof k)for(j in k)this.style(j,k[j]);else{if(!x.regex.isCss.test(k))return this.node.style[be(k)];for(k=k.split(/\s*;\s*/).filter(function(ie){return!!ie}).map(function(ie){return ie.split(/\s*:\s*/)});j=k.pop();)this.style(j[0],j[1])}else this.node.style[be(k)]=null===j||x.regex.isBlank.test(j)?"":j;return this}}),x.Parent=x.invent({create:function(k){this.constructor.call(this,k)},inherit:x.Element,extend:{children:function(){return x.utils.map(x.utils.filterSVGElements(this.node.childNodes),function(k){return x.adopt(k)})},add:function(k,j){return null==j?this.node.appendChild(k.node):k.node!=this.node.childNodes[j]&&this.node.insertBefore(k.node,this.node.childNodes[j]),this},put:function(k,j){return this.add(k,j),k},has:function(k){return this.index(k)>=0},index:function(k){return[].slice.call(this.node.childNodes).indexOf(k.node)},get:function(k){return x.adopt(this.node.childNodes[k])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(k,j){var ie,we,Le=this.children();for(ie=0,we=Le.length;ie<we;ie++)Le[ie]instanceof x.Element&&k.apply(Le[ie],[ie,Le]),j&&Le[ie]instanceof x.Container&&Le[ie].each(k,j);return this},removeElement:function(k){return this.node.removeChild(k.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),x.extend(x.Parent,{ungroup:function(k,j){return 0===j||this instanceof x.Defs||this.node==x.parser.draw||(k=k||(this instanceof x.Doc?this:this.parent(x.Parent)),j=j||1/0,this.each(function(){return this instanceof x.Defs?this:this instanceof x.Parent?this.ungroup(k,j-1):this.toParent(k)}),this.node.firstChild||this.remove()),this},flatten:function(k,j){return this.ungroup(k,j)}}),x.Container=x.invent({create:function(k){this.constructor.call(this,k)},inherit:x.Parent}),x.ViewBox=x.invent({create:function(k){var we,Le,at,bt,Ot,On,rr,ie=[0,0,0,0],ni=1,mi=1,ji=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(k instanceof x.Element){for(On=k,rr=k,Ot=(k.attr("viewBox")||"").match(ji),at=new x.Number(k.width()),bt=new x.Number(k.height());"%"==at.unit;)ni*=at.value,at=new x.Number(On instanceof x.Doc?On.parent().offsetWidth:On.parent().width()),On=On.parent();for(;"%"==bt.unit;)mi*=bt.value,bt=new x.Number(rr instanceof x.Doc?rr.parent().offsetHeight:rr.parent().height()),rr=rr.parent();this.x=0,this.y=0,this.width=at*ni,this.height=bt*mi,this.zoom=1,Ot&&(we=parseFloat(Ot[0]),Le=parseFloat(Ot[1]),at=parseFloat(Ot[2]),bt=parseFloat(Ot[3]),this.zoom=this.width/this.height>at/bt?this.height/bt:this.width/at,this.x=we,this.y=Le,this.width=at,this.height=bt)}else k="string"==typeof k?k.match(ji).map(function(Ti){return parseFloat(Ti)}):Array.isArray(k)?k:"object"==typeof k?[k.x,k.y,k.width,k.height]:4==arguments.length?[].slice.call(arguments):ie,this.x=k[0],this.y=k[1],this.width=k[2],this.height=k[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(k,j,ie,we){return this.destination=new x.ViewBox(k,j,ie,we),this},at:function(k){return this.destination?new x.ViewBox([this.x+(this.destination.x-this.x)*k,this.y+(this.destination.y-this.y)*k,this.width+(this.destination.width-this.width)*k,this.height+(this.destination.height-this.height)*k]):this}},parent:x.Container,construct:{viewbox:function(k,j,ie,we){return 0==arguments.length?new x.ViewBox(this):this.attr("viewBox",new x.ViewBox(k,j,ie,we))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(K){x.Element.prototype[K]=function(k){return null==k?x.off(this,K):x.on(this,K,k),this}}),x.listenerId=0,x.on=function(K,k,j,ie,we){var Le=j.bind(ie||K),at=K instanceof x.Element?K.node:K;at.instance=at.instance||{_events:{}};var bt=at.instance._events;j._svgjsListenerId||(j._svgjsListenerId=++x.listenerId),k.split(x.regex.delimiter).forEach(function(nt){var Ot=nt.split(".")[0],On=nt.split(".")[1]||"*";bt[Ot]=bt[Ot]||{},bt[Ot][On]=bt[Ot][On]||{},bt[Ot][On][j._svgjsListenerId]=Le,at.addEventListener(Ot,Le,we||!1)})},x.off=function(K,k,j,ie){var we=K instanceof x.Element?K.node:K;if(we.instance&&("function"!=typeof j||(j=j._svgjsListenerId))){var Le=we.instance._events;(k||"").split(x.regex.delimiter).forEach(function(at){var Ot,On,bt=at&&at.split(".")[0],nt=at&&at.split(".")[1];if(j)Le[bt]&&Le[bt][nt||"*"]&&(we.removeEventListener(bt,Le[bt][nt||"*"][j],ie||!1),delete Le[bt][nt||"*"][j]);else if(bt&&nt){if(Le[bt]&&Le[bt][nt]){for(On in Le[bt][nt])x.off(we,[bt,nt].join("."),On);delete Le[bt][nt]}}else if(nt)for(at in Le)for(Ot in Le[at])nt===Ot&&x.off(we,[at,nt].join("."));else if(bt){if(Le[bt]){for(Ot in Le[bt])x.off(we,[bt,Ot].join("."));delete Le[bt]}}else{for(at in Le)x.off(we,at);we.instance._events={}}})}},x.extend(x.Element,{on:function(k,j,ie,we){return x.on(this,k,j,ie,we),this},off:function(k,j){return x.off(this.node,k,j),this},fire:function(k,j){return this.node.dispatchEvent(k instanceof ye.Event?k:k=new x.CustomEvent(k,{detail:j,cancelable:!0})),this._event=k,this},event:function(){return this._event}}),x.Defs=x.invent({create:"defs",inherit:x.Container}),x.G=x.invent({create:"g",inherit:x.Container,extend:{x:function(k){return null==k?this.transform("x"):this.transform({x:k-this.x()},!0)},y:function(k){return null==k?this.transform("y"):this.transform({y:k-this.y()},!0)},cx:function(k){return null==k?this.gbox().cx:this.x(k-this.gbox().width/2)},cy:function(k){return null==k?this.gbox().cy:this.y(k-this.gbox().height/2)},gbox:function(){var k=this.bbox(),j=this.transform();return k.x+=j.x,k.x2+=j.x,k.cx+=j.x,k.y+=j.y,k.y2+=j.y,k.cy+=j.y,k}},construct:{group:function(){return this.put(new x.G)}}}),x.Doc=x.invent({create:function(k){k&&("svg"==(k="string"==typeof k?R.getElementById(k):k).nodeName?this.constructor.call(this,k):(this.constructor.call(this,x.create("svg")),k.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:x.Container,extend:{namespace:function(){return this.attr({xmlns:x.ns,version:"1.1"}).attr("xmlns:xlink",x.xlink,x.xmlns).attr("xmlns:svgjs",x.svgjs,x.xmlns)},defs:function(){var k;return this._defs||(this._defs=(k=this.node.getElementsByTagName("defs")[0])?x.adopt(k):new x.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName&&"#document-fragment"!=this.node.parentNode.nodeName?this.node.parentNode:null},spof:function(){var k=this.node.getScreenCTM();return k&&this.style("left",-k.e%1+"px").style("top",-k.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,x.parser.draw.parentNode||this.node.appendChild(x.parser.draw),this},clone:function(k){this.writeDataToDom();var j=this.node,ie=mn(j.cloneNode(!0));return k?(k.node||k).appendChild(ie.node):j.parentNode.insertBefore(ie.node,j.nextSibling),ie}}}),x.extend(x.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var k=this.position()+1,j=this.parent();return j.removeElement(this).add(this,k),j instanceof x.Doc&&j.node.appendChild(j.defs().node),this},backward:function(){var k=this.position();return k>0&&this.parent().removeElement(this).add(this,k-1),this},front:function(){var k=this.parent();return k.node.appendChild(this.node),k instanceof x.Doc&&k.node.appendChild(k.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(k){k.remove();var j=this.position();return this.parent().add(k,j),this},after:function(k){k.remove();var j=this.position();return this.parent().add(k,j+1),this}}),x.Mask=x.invent({create:function(){this.constructor.call(this,x.create("mask")),this.targets=[]},inherit:x.Container,extend:{remove:function(){for(var k=this.targets.length-1;k>=0;k--)this.targets[k]&&this.targets[k].unmask();return this.targets=[],x.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new x.Mask)}}}),x.extend(x.Element,{maskWith:function(k){return this.masker=k instanceof x.Mask?k:this.parent().mask().add(k),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),x.ClipPath=x.invent({create:function(){this.constructor.call(this,x.create("clipPath")),this.targets=[]},inherit:x.Container,extend:{remove:function(){for(var k=this.targets.length-1;k>=0;k--)this.targets[k]&&this.targets[k].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new x.ClipPath)}}}),x.extend(x.Element,{clipWith:function(k){return this.clipper=k instanceof x.ClipPath?k:this.parent().clip().add(k),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),x.Gradient=x.invent({create:function(k){this.constructor.call(this,x.create(k+"Gradient")),this.type=k},inherit:x.Container,extend:{at:function(k,j,ie){return this.put(new x.Stop).update(k,j,ie)},update:function(k){return this.clear(),"function"==typeof k&&k.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(k,j,ie){return"transform"==k&&(k="gradientTransform"),x.Container.prototype.attr.call(this,k,j,ie)}},construct:{gradient:function(k,j){return this.defs().gradient(k,j)}}}),x.extend(x.Gradient,x.FX,{from:function(k,j){return this.attr("radial"==(this._target||this).type?{fx:new x.Number(k),fy:new x.Number(j)}:{x1:new x.Number(k),y1:new x.Number(j)})},to:function(k,j){return this.attr("radial"==(this._target||this).type?{cx:new x.Number(k),cy:new x.Number(j)}:{x2:new x.Number(k),y2:new x.Number(j)})}}),x.extend(x.Defs,{gradient:function(k,j){return this.put(new x.Gradient(k)).update(j)}}),x.Stop=x.invent({create:"stop",inherit:x.Element,extend:{update:function(k){return("number"==typeof k||k instanceof x.Number)&&(k={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=k.opacity&&this.attr("stop-opacity",k.opacity),null!=k.color&&this.attr("stop-color",k.color),null!=k.offset&&this.attr("offset",new x.Number(k.offset)),this}}}),x.Pattern=x.invent({create:"pattern",inherit:x.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(k){return this.clear(),"function"==typeof k&&k.call(this,this),this},toString:function(){return this.fill()},attr:function(k,j,ie){return"transform"==k&&(k="patternTransform"),x.Container.prototype.attr.call(this,k,j,ie)}},construct:{pattern:function(k,j,ie){return this.defs().pattern(k,j,ie)}}}),x.extend(x.Defs,{pattern:function(k,j,ie){return this.put(new x.Pattern).update(ie).attr({x:0,y:0,width:k,height:j,patternUnits:"userSpaceOnUse"})}}),x.Shape=x.invent({create:function(k){this.constructor.call(this,k)},inherit:x.Element}),x.Bare=x.invent({create:function(k,j){if(this.constructor.call(this,x.create(k)),j)for(var ie in j.prototype)"function"==typeof j.prototype[ie]&&(this[ie]=j.prototype[ie])},inherit:x.Element,extend:{words:function(k){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(R.createTextNode(k)),this}}}),x.extend(x.Parent,{element:function(k,j){return this.put(new x.Bare(k,j))}}),x.Symbol=x.invent({create:"symbol",inherit:x.Container,construct:{symbol:function(){return this.put(new x.Symbol)}}}),x.Use=x.invent({create:"use",inherit:x.Shape,extend:{element:function(k,j){return this.attr("href",(j||"")+"#"+k,x.xlink)}},construct:{use:function(k,j){return this.put(new x.Use).element(k,j)}}}),x.Rect=x.invent({create:"rect",inherit:x.Shape,construct:{rect:function(k,j){return this.put(new x.Rect).size(k,j)}}}),x.Circle=x.invent({create:"circle",inherit:x.Shape,construct:{circle:function(k){return this.put(new x.Circle).rx(new x.Number(k).divide(2)).move(0,0)}}}),x.extend(x.Circle,x.FX,{rx:function(k){return this.attr("r",k)},ry:function(k){return this.rx(k)}}),x.Ellipse=x.invent({create:"ellipse",inherit:x.Shape,construct:{ellipse:function(k,j){return this.put(new x.Ellipse).size(k,j).move(0,0)}}}),x.extend(x.Ellipse,x.Rect,x.FX,{rx:function(k){return this.attr("rx",k)},ry:function(k){return this.attr("ry",k)}}),x.extend(x.Circle,x.Ellipse,{x:function(k){return null==k?this.cx()-this.rx():this.cx(k+this.rx())},y:function(k){return null==k?this.cy()-this.ry():this.cy(k+this.ry())},cx:function(k){return null==k?this.attr("cx"):this.attr("cx",k)},cy:function(k){return null==k?this.attr("cy"):this.attr("cy",k)},width:function(k){return null==k?2*this.rx():this.rx(new x.Number(k).divide(2))},height:function(k){return null==k?2*this.ry():this.ry(new x.Number(k).divide(2))},size:function(k,j){var ie=tt(this,k,j);return this.rx(new x.Number(ie.width).divide(2)).ry(new x.Number(ie.height).divide(2))}}),x.Line=x.invent({create:"line",inherit:x.Shape,extend:{array:function(){return new x.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(k,j,ie,we){return null==k?this.array():(k=void 0!==j?{x1:k,y1:j,x2:ie,y2:we}:new x.PointArray(k).toLine(),this.attr(k))},move:function(k,j){return this.attr(this.array().move(k,j).toLine())},size:function(k,j){var ie=tt(this,k,j);return this.attr(this.array().size(ie.width,ie.height).toLine())}},construct:{line:function(k,j,ie,we){return x.Line.prototype.plot.apply(this.put(new x.Line),null!=k?[k,j,ie,we]:[0,0,0,0])}}}),x.Polyline=x.invent({create:"polyline",inherit:x.Shape,construct:{polyline:function(k){return this.put(new x.Polyline).plot(k||new x.PointArray)}}}),x.Polygon=x.invent({create:"polygon",inherit:x.Shape,construct:{polygon:function(k){return this.put(new x.Polygon).plot(k||new x.PointArray)}}}),x.extend(x.Polyline,x.Polygon,{array:function(){return this._array||(this._array=new x.PointArray(this.attr("points")))},plot:function(k){return null==k?this.array():this.clear().attr("points","string"==typeof k?k:this._array=new x.PointArray(k))},clear:function(){return delete this._array,this},move:function(k,j){return this.attr("points",this.array().move(k,j))},size:function(k,j){var ie=tt(this,k,j);return this.attr("points",this.array().size(ie.width,ie.height))}}),x.extend(x.Line,x.Polyline,x.Polygon,{morphArray:x.PointArray,x:function(k){return null==k?this.bbox().x:this.move(k,this.bbox().y)},y:function(k){return null==k?this.bbox().y:this.move(this.bbox().x,k)},width:function(k){var j=this.bbox();return null==k?j.width:this.size(k,j.height)},height:function(k){var j=this.bbox();return null==k?j.height:this.size(j.width,k)}}),x.Path=x.invent({create:"path",inherit:x.Shape,extend:{morphArray:x.PathArray,array:function(){return this._array||(this._array=new x.PathArray(this.attr("d")))},plot:function(k){return null==k?this.array():this.clear().attr("d","string"==typeof k?k:this._array=new x.PathArray(k))},clear:function(){return delete this._array,this},move:function(k,j){return this.attr("d",this.array().move(k,j))},x:function(k){return null==k?this.bbox().x:this.move(k,this.bbox().y)},y:function(k){return null==k?this.bbox().y:this.move(this.bbox().x,k)},size:function(k,j){var ie=tt(this,k,j);return this.attr("d",this.array().size(ie.width,ie.height))},width:function(k){return null==k?this.bbox().width:this.size(k,this.bbox().height)},height:function(k){return null==k?this.bbox().height:this.size(this.bbox().width,k)}},construct:{path:function(k){return this.put(new x.Path).plot(k||new x.PathArray)}}}),x.Image=x.invent({create:"image",inherit:x.Shape,extend:{load:function(k){if(!k)return this;var j=this,ie=new ye.Image;return x.on(ie,"load",function(){x.off(ie);var we=j.parent(x.Pattern);null!==we&&(0==j.width()&&0==j.height()&&j.size(ie.width,ie.height),we&&0==we.width()&&0==we.height()&&we.size(j.width(),j.height()),"function"==typeof j._loaded&&j._loaded.call(j,{width:ie.width,height:ie.height,ratio:ie.width/ie.height,url:k}))}),x.on(ie,"error",function(we){x.off(ie),"function"==typeof j._error&&j._error.call(j,we)}),this.attr("href",ie.src=this.src=k,x.xlink)},loaded:function(k){return this._loaded=k,this},error:function(k){return this._error=k,this}},construct:{image:function(k,j,ie){return this.put(new x.Image).load(k).size(j||0,ie||j||0)}}}),x.Text=x.invent({create:function(){this.constructor.call(this,x.create("text")),this.dom.leading=new x.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",x.defaults.attrs["font-family"])},inherit:x.Shape,extend:{x:function(k){return null==k?this.attr("x"):this.attr("x",k)},y:function(k){var j=this.attr("y"),ie="number"==typeof j?j-this.bbox().y:0;return null==k?"number"==typeof j?j-ie:j:this.attr("y","number"==typeof k.valueOf()?k+ie:k)},cx:function(k){return null==k?this.bbox().cx:this.x(k-this.bbox().width/2)},cy:function(k){return null==k?this.bbox().cy:this.y(k-this.bbox().height/2)},text:function(k){if(void 0===k){k="";for(var j=this.node.childNodes,ie=0,we=j.length;ie<we;++ie)0!=ie&&3!=j[ie].nodeType&&1==x.adopt(j[ie]).dom.newLined&&(k+="\n"),k+=j[ie].textContent;return k}if(this.clear().build(!0),"function"==typeof k)k.call(this,this);else{ie=0;for(var Le=(k=k.split("\n")).length;ie<Le;ie++)this.tspan(k[ie]).newLine()}return this.build(!1).rebuild()},size:function(k){return this.attr("font-size",k).rebuild()},leading:function(k){return null==k?this.dom.leading:(this.dom.leading=new x.Number(k),this.rebuild())},lines:function(){var k=(this.textPath&&this.textPath()||this).node,j=x.utils.map(x.utils.filterSVGElements(k.childNodes),function(ie){return x.adopt(ie)});return new x.Set(j)},rebuild:function(k){if("boolean"==typeof k&&(this._rebuild=k),this._rebuild){var j=this,ie=0,we=this.dom.leading*new x.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(j.textPath()||this.attr("x",j.attr("x")),"\n"==this.text()?ie+=we:(this.attr("dy",we+ie),ie=0))}),this.fire("rebuild")}return this},build:function(k){return this._build=!!k,this},setData:function(k){return this.dom=k,this.dom.leading=new x.Number(k.leading||1.3),this}},construct:{text:function(k){return this.put(new x.Text).text(k)},plain:function(k){return this.put(new x.Text).plain(k)}}}),x.Tspan=x.invent({create:"tspan",inherit:x.Shape,extend:{text:function(k){return null==k?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof k?k.call(this,this):this.plain(k),this)},dx:function(k){return this.attr("dx",k)},dy:function(k){return this.attr("dy",k)},newLine:function(){var k=this.parent(x.Text);return this.dom.newLined=!0,this.dy(k.dom.leading*k.attr("font-size")).attr("x",k.x())}}}),x.extend(x.Text,x.Tspan,{plain:function(k){return!1===this._build&&this.clear(),this.node.appendChild(R.createTextNode(k)),this},tspan:function(k){var j=(this.textPath&&this.textPath()||this).node,ie=new x.Tspan;return!1===this._build&&this.clear(),j.appendChild(ie.node),ie.text(k)},clear:function(){for(var k=(this.textPath&&this.textPath()||this).node;k.hasChildNodes();)k.removeChild(k.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),x.TextPath=x.invent({create:"textPath",inherit:x.Parent,parent:x.Text,construct:{morphArray:x.PathArray,path:function(k){for(var j=new x.TextPath,ie=this.doc().defs().path(k);this.node.hasChildNodes();)j.node.appendChild(this.node.firstChild);return this.node.appendChild(j.node),j.attr("href","#"+ie,x.xlink),this},array:function(){var k=this.track();return k?k.array():null},plot:function(k){var j=this.track(),ie=null;return j&&(ie=j.plot(k)),null==k?ie:this},track:function(){var k=this.textPath();if(k)return k.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return x.adopt(this.node.firstChild)}}}),x.Nested=x.invent({create:function(){this.constructor.call(this,x.create("svg")),this.style("overflow","visible")},inherit:x.Container,construct:{nested:function(){return this.put(new x.Nested)}}}),x.A=x.invent({create:"a",inherit:x.Container,extend:{to:function(k){return this.attr("href",k,x.xlink)},show:function(k){return this.attr("show",k,x.xlink)},target:function(k){return this.attr("target",k)}},construct:{link:function(k){return this.put(new x.A).to(k)}}}),x.extend(x.Element,{linkTo:function(k){var j=new x.A;return"function"==typeof k?k.call(j,j):j.to(k),this.parent().put(j).put(this)}}),x.Marker=x.invent({create:"marker",inherit:x.Container,extend:{width:function(k){return this.attr("markerWidth",k)},height:function(k){return this.attr("markerHeight",k)},ref:function(k,j){return this.attr("refX",k).attr("refY",j)},update:function(k){return this.clear(),"function"==typeof k&&k.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(k,j,ie){return this.defs().marker(k,j,ie)}}}),x.extend(x.Defs,{marker:function(k,j,ie){return this.put(new x.Marker).size(k,j).ref(k/2,j/2).viewbox(0,0,k,j).attr("orient","auto").update(ie)}}),x.extend(x.Line,x.Polyline,x.Polygon,x.Path,{marker:function(k,j,ie,we){var Le=["marker"];return"all"!=k&&Le.push(k),Le=Le.join("-"),k=arguments[1]instanceof x.Marker?arguments[1]:this.doc().marker(j,ie,we),this.attr(Le,k)}});var Ae={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(k,j){return"color"==j?k:k+"-"+j}};function xe(K,k,j,ie){return j+ie.replace(x.regex.dots," .")}function ce(K){for(var k=K.slice(0),j=k.length;j--;)Array.isArray(k[j])&&(k[j]=ce(k[j]));return k}function be(K){return K.toLowerCase().replace(/-(.)/g,function(k,j){return j.toUpperCase()})}function Ne(K){return K.charAt(0).toUpperCase()+K.slice(1)}function et(K){var k=K.toString(16);return 1==k.length?"0"+k:k}function tt(K,k,j){if(null==k||null==j){var ie=K.bbox();null==k?k=ie.width/ie.height*j:null==j&&(j=ie.height/ie.width*k)}return{width:k,height:j}}function We(K,k,j){return{x:k*K.a+j*K.c+0,y:k*K.b+j*K.d+0}}function pt(K){return{a:K[0],b:K[1],c:K[2],d:K[3],e:K[4],f:K[5]}}function ee(K,k){K.cx=null==K.cx?k.bbox().cx:K.cx,K.cy=null==K.cy?k.bbox().cy:K.cy}function mn(K){for(var k=K.childNodes.length-1;k>=0;k--)K.childNodes[k]instanceof ye.SVGElement&&mn(K.childNodes[k]);return x.adopt(K).id(x.eid(K.nodeName))}function nn(K){return null==K.x&&(K.x=0,K.y=0,K.width=0,K.height=0),K.w=K.width,K.h=K.height,K.x2=K.x+K.width,K.y2=K.y+K.height,K.cx=K.x+K.width/2,K.cy=K.y+K.height/2,K}function Nt(K){return Math.abs(K)>1e-37?K:0}["fill","stroke"].forEach(function(K){var k,j={};j[K]=function(ie){if(void 0===ie)return this;if("string"==typeof ie||x.Color.isRgb(ie)||ie&&"function"==typeof ie.fill)this.attr(K,ie);else for(k=Ae[K].length-1;k>=0;k--)null!=ie[Ae[K][k]]&&this.attr(Ae.prefix(K,Ae[K][k]),ie[Ae[K][k]]);return this},x.extend(x.Element,x.FX,j)}),x.extend(x.Element,x.FX,{rotate:function(k,j,ie){return this.transform({rotation:k,cx:j,cy:ie})},skew:function(k,j,ie,we){return this.transform(1==arguments.length||3==arguments.length?{skew:k,cx:j,cy:ie}:{skewX:k,skewY:j,cx:ie,cy:we})},scale:function(k,j,ie,we){return this.transform(1==arguments.length||3==arguments.length?{scale:k,cx:j,cy:ie}:{scaleX:k,scaleY:j,cx:ie,cy:we})},translate:function(k,j){return this.transform({x:k,y:j})},flip:function(k,j){return this.transform({flip:k||"both",offset:j="number"==typeof k?k:j})},matrix:function(k){return this.attr("transform",new x.Matrix(6==arguments.length?[].slice.call(arguments):k))},opacity:function(k){return this.attr("opacity",k)},dx:function(k){return this.x(new x.Number(k).plus(this instanceof x.FX?0:this.x()),!0)},dy:function(k){return this.y(new x.Number(k).plus(this instanceof x.FX?0:this.y()),!0)},dmove:function(k,j){return this.dx(k).dy(j)}}),x.extend(x.Rect,x.Ellipse,x.Circle,x.Gradient,x.FX,{radius:function(k,j){var ie=(this._target||this).type;return"radial"==ie||"circle"==ie?this.attr("r",new x.Number(k)):this.rx(k).ry(null==j?k:j)}}),x.extend(x.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(k){return this.node.getPointAtLength(k)}}),x.extend(x.Parent,x.Text,x.Tspan,x.FX,{font:function(k,j){if("object"==typeof k)for(j in k)this.font(j,k[j]);return"leading"==k?this.leading(j):this.attr("anchor"==k?"text-anchor":"size"==k||"family"==k||"weight"==k||"stretch"==k||"variant"==k||"style"==k?"font-"+k:k,j)}}),x.Set=x.invent({create:function(k){k instanceof x.Set?this.members=k.members.slice():Array.isArray(k)?this.members=k:this.clear()},extend:{add:function(){var k,j,ie=[].slice.call(arguments);for(k=0,j=ie.length;k<j;k++)this.members.push(ie[k]);return this},remove:function(k){var j=this.index(k);return j>-1&&this.members.splice(j,1),this},each:function(k){for(var j=0,ie=this.members.length;j<ie;j++)k.apply(this.members[j],[j,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(k){return this.index(k)>=0},index:function(k){return this.members.indexOf(k)},get:function(k){return this.members[k]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new x.RBox;var k=this.members[0].rbox(this.members[0].doc());return this.each(function(){k=k.merge(this.rbox(this.doc()))}),k}},construct:{set:function(k){return new x.Set(k)}}}),x.FX.Set=x.invent({create:function(k){this.set=k}}),x.Set.inherit=function(){var k=[];for(var K in x.Shape.prototype)"function"==typeof x.Shape.prototype[K]&&"function"!=typeof x.Set.prototype[K]&&k.push(K);for(var K in k.forEach(function(j){x.Set.prototype[j]=function(){for(var ie=0,we=this.members.length;ie<we;ie++)this.members[ie]&&"function"==typeof this.members[ie][j]&&this.members[ie][j].apply(this.members[ie],arguments);return"animate"==j?this.fx||(this.fx=new x.FX.Set(this)):this}}),k=[],x.FX.prototype)"function"==typeof x.FX.prototype[K]&&"function"!=typeof x.FX.Set.prototype[K]&&k.push(K);k.forEach(function(j){x.FX.Set.prototype[j]=function(){for(var ie=0,we=this.set.members.length;ie<we;ie++)this.set.members[ie].fx[j].apply(this.set.members[ie].fx,arguments);return this}})},x.extend(x.Element,{data:function(k,j,ie){if("object"==typeof k)for(j in k)this.data(j,k[j]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+k))}catch(we){return this.attr("data-"+k)}else this.attr("data-"+k,null===j?null:!0===ie||"string"==typeof j||"number"==typeof j?j:JSON.stringify(j));return this}}),x.extend(x.Element,{remember:function(k,j){if("object"==typeof arguments[0])for(var j in k)this.remember(j,k[j]);else{if(1==arguments.length)return this.memory()[k];this.memory()[k]=j}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var k=arguments.length-1;k>=0;k--)delete this.memory()[arguments[k]];return this},memory:function(){return this._memory||(this._memory={})}}),x.get=function(K){var k=R.getElementById(function(K){var k=(K||"").toString().match(x.regex.reference);if(k)return k[1]}(K)||K);return x.adopt(k)},x.select=function(K,k){return new x.Set(x.utils.map((k||R).querySelectorAll(K),function(j){return x.adopt(j)}))},x.extend(x.Parent,{select:function(k){return x.select(k,this.node)}});var Rt="abcdef".split("");if("function"!=typeof ye.CustomEvent){var Bt=function(k,j){j=j||{bubbles:!1,cancelable:!1,detail:void 0};var ie=R.createEvent("CustomEvent");return ie.initCustomEvent(k,j.bubbles,j.cancelable,j.detail),ie};Bt.prototype=ye.Event.prototype,x.CustomEvent=Bt}else x.CustomEvent=ye.CustomEvent;return function(K){for(var k=0,j=["moz","webkit"],ie=0;ie<j.length&&!ye.requestAnimationFrame;++ie)K.requestAnimationFrame=K[j[ie]+"RequestAnimationFrame"],K.cancelAnimationFrame=K[j[ie]+"CancelAnimationFrame"]||K[j[ie]+"CancelRequestAnimationFrame"];K.requestAnimationFrame=K.requestAnimationFrame||function(we){var Le=(new Date).getTime(),at=Math.max(0,16-(Le-k)),bt=K.setTimeout(function(){we(Le+at)},at);return k=Le+at,bt},K.cancelAnimationFrame=K.cancelAnimationFrame||K.clearTimeout}(ye),x}(ye,ye.document)}.call(Ct,ne,Ct,vn))&&(vn.exports=Se)},9935:function(vn,Ct,ne){"use strict";var Se=ne(9333),ye=ne(9187),R=ne(7289),M=ne(5134),x=ne(1885),oe=ne(9727),Ve=ne(6054),Te=ne(2787),v=ne(5366),Ae=null;function xe(){return Ae}var ae=function i(){(0,M.Z)(this,i)},be=new v.OlP("DocumentToken"),Ne=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,v.Yz7)({factory:He,token:i,providedIn:"platform"}),i}();function He(){return(0,v.LFG)(tt)}var et=new v.OlP("Location Initialized"),tt=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this))._doc=a,o._init(),o}return(0,R.Z)(r,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return xe().getBaseHref(this._doc)}},{key:"onPopState",value:function(o){var u=xe().getGlobalEventTarget(this._doc,"window");return u.addEventListener("popstate",o,!1),function(){return u.removeEventListener("popstate",o)}}},{key:"onHashChange",value:function(o){var u=xe().getGlobalEventTarget(this._doc,"window");return u.addEventListener("hashchange",o,!1),function(){return u.removeEventListener("hashchange",o)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(o){this.location.pathname=o}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(o,u,l){We()?this._history.pushState(o,u,l):this.location.hash=l}},{key:"replaceState",value:function(o,u,l){We()?this._history.replaceState(o,u,l):this.location.hash=l}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(o)}},{key:"getState",value:function(){return this._history.state}}]),r}(Ne);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be))},i.\u0275prov=(0,v.Yz7)({factory:pt,token:i,providedIn:"platform"}),i}();function We(){return!!window.history.pushState}function pt(){return new tt((0,v.LFG)(be))}function lt(i,s){if(0==i.length)return s;if(0==s.length)return i;var n=0;return i.endsWith("/")&&n++,s.startsWith("/")&&n++,2==n?i+s.substring(1):1==n?i+s:i+"/"+s}function ee(i){var s=i.match(/#|\?|$/),n=s&&s.index||i.length;return i.slice(0,n-("/"===i[n-1]?1:0))+i.slice(n)}function Dn(i){return i&&"?"!==i[0]?"?"+i:i}var mn=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,[{key:"historyGo",value:function(r){throw new Error("Not implemented")}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,v.Yz7)({factory:nn,token:i,providedIn:"root"}),i}();function nn(i){var s=(0,v.LFG)(be).location;return new Nt((0,v.LFG)(Ne),s&&s.origin||"")}var Vt=new v.OlP("appBaseHref"),Nt=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o){var u;if((0,M.Z)(this,r),(u=n.call(this))._platformLocation=a,u._removeListenerFns=[],null==o&&(o=u._platformLocation.getBaseHrefFromDOM()),null==o)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return u._baseHref=o,u}return(0,R.Z)(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(o){return lt(this._baseHref,o)}},{key:"path",value:function(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=this._platformLocation.pathname+Dn(this._platformLocation.search),l=this._platformLocation.hash;return l&&o?"".concat(u).concat(l):u}},{key:"pushState",value:function(o,u,l,f){var m=this.prepareExternalUrl(l+Dn(f));this._platformLocation.pushState(o,u,m)}},{key:"replaceState",value:function(o,u,l,f){var m=this.prepareExternalUrl(l+Dn(f));this._platformLocation.replaceState(o,u,m)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var u,l,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(l=(u=this._platformLocation).historyGo)||void 0===l||l.call(u,o)}}]),r}(mn);return i.\u0275fac=function(n){return new(n||i)(v.LFG(Ne),v.LFG(Vt,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Rt=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o){var u;return(0,M.Z)(this,r),(u=n.call(this))._platformLocation=a,u._baseHref="",u._removeListenerFns=[],null!=o&&(u._baseHref=o),u}return(0,R.Z)(r,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var u=this._platformLocation.hash;return null==u&&(u="#"),u.length>0?u.substring(1):u}},{key:"prepareExternalUrl",value:function(o){var u=lt(this._baseHref,o);return u.length>0?"#"+u:u}},{key:"pushState",value:function(o,u,l,f){var m=this.prepareExternalUrl(l+Dn(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(o,u,m)}},{key:"replaceState",value:function(o,u,l,f){var m=this.prepareExternalUrl(l+Dn(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(o,u,m)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var u,l,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(l=(u=this._platformLocation).historyGo)||void 0===l||l.call(u,o)}}]),r}(mn);return i.\u0275fac=function(n){return new(n||i)(v.LFG(Ne),v.LFG(Vt,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Bt=function(){var i=function(){function s(n,r){var a=this;(0,M.Z)(this,s),this._subject=new v.vpe,this._urlChangeListeners=[],this._platformStrategy=n;var o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ee(j(o)),this._platformStrategy.onPopState(function(u){a._subject.emit({url:a.path(!0),pop:!0,state:u.state,type:u.type})})}return(0,R.Z)(s,[{key:"path",value:function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(r))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(r+Dn(a))}},{key:"normalize",value:function(r){return s.stripTrailingSlash(function(i,s){return i&&s.startsWith(i)?s.substring(i.length):s}(this._baseHref,j(r)))}},{key:"prepareExternalUrl",value:function(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}},{key:"go",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(o,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Dn(a)),o)}},{key:"replaceState",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(o,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Dn(a)),o)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var a,o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(o=(a=this._platformStrategy).historyGo)||void 0===o||o.call(a,r)}},{key:"onUrlChange",value:function(r){var a=this;this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(o){a._notifyUrlChangeListeners(o.url,o.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(o){return o(r,a)})}},{key:"subscribe",value:function(r,a,o){return this._subject.subscribe({next:r,error:a,complete:o})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(mn),v.LFG(Ne))},i.normalizeQueryParams=Dn,i.joinWithSlash=lt,i.stripTrailingSlash=ee,i.\u0275prov=(0,v.Yz7)({factory:K,token:i,providedIn:"root"}),i}();function K(){return new Bt((0,v.LFG)(mn),(0,v.LFG)(Ne))}function j(i){return i.replace(/\/index.html$/,"")}var Le=function(i){return i[i.Zero=0]="Zero",i[i.One=1]="One",i[i.Two=2]="Two",i[i.Few=3]="Few",i[i.Many=4]="Many",i[i.Other=5]="Other",i}({}),at=function(i){return i[i.Format=0]="Format",i[i.Standalone=1]="Standalone",i}({}),bt=function(i){return i[i.Narrow=0]="Narrow",i[i.Abbreviated=1]="Abbreviated",i[i.Wide=2]="Wide",i[i.Short=3]="Short",i}({}),nt=function(i){return i[i.Short=0]="Short",i[i.Medium=1]="Medium",i[i.Long=2]="Long",i[i.Full=3]="Full",i}({}),Ot=function(i){return i[i.Decimal=0]="Decimal",i[i.Group=1]="Group",i[i.List=2]="List",i[i.PercentSign=3]="PercentSign",i[i.PlusSign=4]="PlusSign",i[i.MinusSign=5]="MinusSign",i[i.Exponential=6]="Exponential",i[i.SuperscriptingExponent=7]="SuperscriptingExponent",i[i.PerMille=8]="PerMille",i[i.Infinity=9]="Infinity",i[i.NaN=10]="NaN",i[i.TimeSeparator=11]="TimeSeparator",i[i.CurrencyDecimal=12]="CurrencyDecimal",i[i.CurrencyGroup=13]="CurrencyGroup",i}({});function So(i,s){return aa((0,v.cg1)(i)[v.wAp.DateFormat],s)}function rs(i,s){return aa((0,v.cg1)(i)[v.wAp.TimeFormat],s)}function bi(i,s){return aa((0,v.cg1)(i)[v.wAp.DateTimeFormat],s)}function Ir(i,s){var n=(0,v.cg1)(i),r=n[v.wAp.NumberSymbols][s];if(void 0===r){if(s===Ot.CurrencyDecimal)return n[v.wAp.NumberSymbols][Ot.Decimal];if(s===Ot.CurrencyGroup)return n[v.wAp.NumberSymbols][Ot.Group]}return r}var Qs=v.kL8;function ls(i){if(!i[v.wAp.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(i[v.wAp.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function aa(i,s){for(var n=s;n>-1;n--)if(void 0!==i[n])return i[n];throw new Error("Locale data API: locale data undefined")}function sa(i){var s=i.split(":"),n=(0,Te.Z)(s,2);return{hours:+n[0],minutes:+n[1]}}var jn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ri={},pi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ii=function(i){return i[i.Short=0]="Short",i[i.ShortGMT=1]="ShortGMT",i[i.Long=2]="Long",i[i.Extended=3]="Extended",i}({}),Or=function(i){return i[i.FullYear=0]="FullYear",i[i.Month=1]="Month",i[i.Date=2]="Date",i[i.Hours=3]="Hours",i[i.Minutes=4]="Minutes",i[i.Seconds=5]="Seconds",i[i.FractionalSeconds=6]="FractionalSeconds",i[i.Day=7]="Day",i}({}),lr=function(i){return i[i.DayPeriods=0]="DayPeriods",i[i.Days=1]="Days",i[i.Months=2]="Months",i[i.Eras=3]="Eras",i}({});function Wi(i,s,n,r){var a=function(i){if(rn(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){var s=i.split("-").map(function(w){return+w}),n=(0,Te.Z)(s,3),a=n[1],u=n[2];return cs(n[0],(void 0===a?1:a)-1,void 0===u?1:u)}var m,f=parseFloat(i);if(!isNaN(i-f))return new Date(f);if(m=i.match(jn))return function(i){var s=new Date(0),n=0,r=0,a=i[8]?s.setUTCFullYear:s.setFullYear,o=i[8]?s.setUTCHours:s.setHours;i[9]&&(n=Number(i[9]+i[10]),r=Number(i[9]+i[11])),a.call(s,Number(i[1]),Number(i[2])-1,Number(i[3]));var u=Number(i[4]||0)-n,l=Number(i[5]||0)-r,f=Number(i[6]||0),m=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return o.call(s,u,l,f,m),s}(m)}var b=new Date(i);if(!rn(b))throw new Error('Unable to convert "'.concat(i,'" into a date'));return b}(i);s=Rs(n,s)||s;for(var l,u=[];s;){if(!(l=pi.exec(s))){u.push(s);break}var f=(u=u.concat(l.slice(1))).pop();if(!f)break;s=f}var m=a.getTimezoneOffset();r&&(m=wt(r,m),a=function(i,s,n){var a=i.getTimezoneOffset();return function(i,s){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+s),i}(i,-1*(wt(s,a)-a))}(a,r));var b="";return u.forEach(function(w){var C=function(i){if(oa[i])return oa[i];var s;switch(i){case"G":case"GG":case"GGG":s=ot(lr.Eras,bt.Abbreviated);break;case"GGGG":s=ot(lr.Eras,bt.Wide);break;case"GGGGG":s=ot(lr.Eras,bt.Narrow);break;case"y":s=Tt(Or.FullYear,1,0,!1,!0);break;case"yy":s=Tt(Or.FullYear,2,0,!0,!0);break;case"yyy":s=Tt(Or.FullYear,3,0,!1,!0);break;case"yyyy":s=Tt(Or.FullYear,4,0,!1,!0);break;case"Y":s=xi(1);break;case"YY":s=xi(2,!0);break;case"YYY":s=xi(3);break;case"YYYY":s=xi(4);break;case"M":case"L":s=Tt(Or.Month,1,1);break;case"MM":case"LL":s=Tt(Or.Month,2,1);break;case"MMM":s=ot(lr.Months,bt.Abbreviated);break;case"MMMM":s=ot(lr.Months,bt.Wide);break;case"MMMMM":s=ot(lr.Months,bt.Narrow);break;case"LLL":s=ot(lr.Months,bt.Abbreviated,at.Standalone);break;case"LLLL":s=ot(lr.Months,bt.Wide,at.Standalone);break;case"LLLLL":s=ot(lr.Months,bt.Narrow,at.Standalone);break;case"w":s=In(1);break;case"ww":s=In(2);break;case"W":s=In(1,!0);break;case"d":s=Tt(Or.Date,1);break;case"dd":s=Tt(Or.Date,2);break;case"c":case"cc":s=Tt(Or.Day,1);break;case"ccc":s=ot(lr.Days,bt.Abbreviated,at.Standalone);break;case"cccc":s=ot(lr.Days,bt.Wide,at.Standalone);break;case"ccccc":s=ot(lr.Days,bt.Narrow,at.Standalone);break;case"cccccc":s=ot(lr.Days,bt.Short,at.Standalone);break;case"E":case"EE":case"EEE":s=ot(lr.Days,bt.Abbreviated);break;case"EEEE":s=ot(lr.Days,bt.Wide);break;case"EEEEE":s=ot(lr.Days,bt.Narrow);break;case"EEEEEE":s=ot(lr.Days,bt.Short);break;case"a":case"aa":case"aaa":s=ot(lr.DayPeriods,bt.Abbreviated);break;case"aaaa":s=ot(lr.DayPeriods,bt.Wide);break;case"aaaaa":s=ot(lr.DayPeriods,bt.Narrow);break;case"b":case"bb":case"bbb":s=ot(lr.DayPeriods,bt.Abbreviated,at.Standalone,!0);break;case"bbbb":s=ot(lr.DayPeriods,bt.Wide,at.Standalone,!0);break;case"bbbbb":s=ot(lr.DayPeriods,bt.Narrow,at.Standalone,!0);break;case"B":case"BB":case"BBB":s=ot(lr.DayPeriods,bt.Abbreviated,at.Format,!0);break;case"BBBB":s=ot(lr.DayPeriods,bt.Wide,at.Format,!0);break;case"BBBBB":s=ot(lr.DayPeriods,bt.Narrow,at.Format,!0);break;case"h":s=Tt(Or.Hours,1,-12);break;case"hh":s=Tt(Or.Hours,2,-12);break;case"H":s=Tt(Or.Hours,1);break;case"HH":s=Tt(Or.Hours,2);break;case"m":s=Tt(Or.Minutes,1);break;case"mm":s=Tt(Or.Minutes,2);break;case"s":s=Tt(Or.Seconds,1);break;case"ss":s=Tt(Or.Seconds,2);break;case"S":s=Tt(Or.FractionalSeconds,1);break;case"SS":s=Tt(Or.FractionalSeconds,2);break;case"SSS":s=Tt(Or.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":s=Yt(ii.Short);break;case"ZZZZZ":s=Yt(ii.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":s=Yt(ii.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":s=Yt(ii.Long);break;default:return null}return oa[i]=s,s}(w);b+=C?C(a,n,m):"''"===w?"'":w.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function cs(i,s,n){var r=new Date(0);return r.setFullYear(i,s,n),r.setHours(0,0,0),r}function Rs(i,s){var n=function(i){return(0,v.cg1)(i)[v.wAp.LocaleId]}(i);if(ri[n]=ri[n]||{},ri[n][s])return ri[n][s];var r="";switch(s){case"shortDate":r=So(i,nt.Short);break;case"mediumDate":r=So(i,nt.Medium);break;case"longDate":r=So(i,nt.Long);break;case"fullDate":r=So(i,nt.Full);break;case"shortTime":r=rs(i,nt.Short);break;case"mediumTime":r=rs(i,nt.Medium);break;case"longTime":r=rs(i,nt.Long);break;case"fullTime":r=rs(i,nt.Full);break;case"short":var a=Rs(i,"shortTime"),o=Rs(i,"shortDate");r=Wo(bi(i,nt.Short),[a,o]);break;case"medium":var u=Rs(i,"mediumTime"),l=Rs(i,"mediumDate");r=Wo(bi(i,nt.Medium),[u,l]);break;case"long":var f=Rs(i,"longTime"),m=Rs(i,"longDate");r=Wo(bi(i,nt.Long),[f,m]);break;case"full":var b=Rs(i,"fullTime"),w=Rs(i,"fullDate");r=Wo(bi(i,nt.Full),[b,w])}return r&&(ri[n][s]=r),r}function Wo(i,s){return s&&(i=i.replace(/\{([^}]+)}/g,function(n,r){return null!=s&&r in s?s[r]:n})),i}function wa(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o="";(i<0||a&&i<=0)&&(a?i=1-i:(i=-i,o=n));for(var u=String(i);u.length<s;)u="0"+u;return r&&(u=u.substr(u.length-s)),o+u}function Zi(i,s){return wa(i,3).substr(0,s)}function Tt(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(o,u){var l=Et(i,o);if((n>0||l>-n)&&(l+=n),i===Or.Hours)0===l&&-12===n&&(l=12);else if(i===Or.FractionalSeconds)return Zi(l,s);var f=Ir(u,Ot.MinusSign);return wa(l,s,f,r,a)}}function Et(i,s){switch(i){case Or.FullYear:return s.getFullYear();case Or.Month:return s.getMonth();case Or.Date:return s.getDate();case Or.Hours:return s.getHours();case Or.Minutes:return s.getMinutes();case Or.Seconds:return s.getSeconds();case Or.FractionalSeconds:return s.getMilliseconds();case Or.Day:return s.getDay();default:throw new Error('Unknown DateType value "'.concat(i,'".'))}}function ot(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:at.Format,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(a,o){return gt(a,o,i,s,n,r)}}function gt(i,s,n,r,a,o){switch(n){case lr.Months:return function(i,s,n){var r=(0,v.cg1)(i),o=aa([r[v.wAp.MonthsFormat],r[v.wAp.MonthsStandalone]],s);return aa(o,n)}(s,a,r)[i.getMonth()];case lr.Days:return function(i,s,n){var r=(0,v.cg1)(i),o=aa([r[v.wAp.DaysFormat],r[v.wAp.DaysStandalone]],s);return aa(o,n)}(s,a,r)[i.getDay()];case lr.DayPeriods:var u=i.getHours(),l=i.getMinutes();if(o){var f=function(i){var s=(0,v.cg1)(i);return ls(s),(s[v.wAp.ExtraData][2]||[]).map(function(r){return"string"==typeof r?sa(r):[sa(r[0]),sa(r[1])]})}(s),m=function(i,s,n){var r=(0,v.cg1)(i);ls(r);var o=aa([r[v.wAp.ExtraData][0],r[v.wAp.ExtraData][1]],s)||[];return aa(o,n)||[]}(s,a,r),b=f.findIndex(function(C){if(Array.isArray(C)){var T=(0,Te.Z)(C,2),I=T[0],Z=T[1],Y=u>=I.hours&&l>=I.minutes,V=u<Z.hours||u===Z.hours&&l<Z.minutes;if(I.hours<Z.hours){if(Y&&V)return!0}else if(Y||V)return!0}else if(C.hours===u&&C.minutes===l)return!0;return!1});if(-1!==b)return m[b]}return function(i,s,n){var r=(0,v.cg1)(i),o=aa([r[v.wAp.DayPeriodsFormat],r[v.wAp.DayPeriodsStandalone]],s);return aa(o,n)}(s,a,r)[u<12?0:1];case lr.Eras:return function(i,s){return aa((0,v.cg1)(i)[v.wAp.Eras],s)}(s,r)[i.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type ".concat(n))}}function Yt(i){return function(s,n,r){var a=-1*r,o=Ir(n,Ot.MinusSign),u=a>0?Math.floor(a/60):Math.ceil(a/60);switch(i){case ii.Short:return(a>=0?"+":"")+wa(u,2,o)+wa(Math.abs(a%60),2,o);case ii.ShortGMT:return"GMT"+(a>=0?"+":"")+wa(u,1,o);case ii.Long:return"GMT"+(a>=0?"+":"")+wa(u,2,o)+":"+wa(Math.abs(a%60),2,o);case ii.Extended:return 0===r?"Z":(a>=0?"+":"")+wa(u,2,o)+":"+wa(Math.abs(a%60),2,o);default:throw new Error('Unknown zone width "'.concat(i,'"'))}}}function Mn(i){var s=cs(i,0,1).getDay();return cs(i,0,1+(s<=4?4:11)-s)}function ai(i){return cs(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function In(i){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var a;if(s){var o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,u=n.getDate();a=1+Math.floor((u+o)/7)}else{var l=ai(n),f=Mn(l.getFullYear()),m=l.getTime()-f.getTime();a=1+Math.round(m/6048e5)}return wa(a,i,Ir(r,Ot.MinusSign))}}function xi(i){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){return wa(ai(n).getFullYear(),i,Ir(r,Ot.MinusSign),s)}}var oa={};function wt(i,s){i=i.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(n)?s:n}function rn(i){return i instanceof Date&&!isNaN(i.valueOf())}var Fa=function i(){(0,M.Z)(this,i)},ua=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this)).locale=a,o}return(0,R.Z)(r,[{key:"getPluralCategory",value:function(o,u){switch(Qs(u||this.locale)(o)){case Le.Zero:return"zero";case Le.One:return"one";case Le.Two:return"two";case Le.Few:return"few";case Le.Many:return"many";default:return"other"}}}]),r}(Fa);return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.soG))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();function Lr(i,s){s=encodeURIComponent(s);var r,n=(0,Ve.Z)(i.split(";"));try{for(n.s();!(r=n.n()).done;){var a=r.value,o=a.indexOf("="),u=-1==o?[a,""]:[a.slice(0,o),a.slice(o+1)],l=(0,Te.Z)(u,2),m=l[1];if(l[0].trim()===s)return decodeURIComponent(m)}}catch(b){n.e(b)}finally{n.f()}return null}var $n=function(){var i=function(){function s(n,r,a,o){(0,M.Z)(this,s),this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=a,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return(0,R.Z)(s,[{key:"klass",set:function(r){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof r?r.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(r){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof r?r.split(/\s+/):r,this._rawClass&&((0,v.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var r=this._iterableDiffer.diff(this._rawClass);r&&this._applyIterableChanges(r)}else if(this._keyValueDiffer){var a=this._keyValueDiffer.diff(this._rawClass);a&&this._applyKeyValueChanges(a)}}},{key:"_applyKeyValueChanges",value:function(r){var a=this;r.forEachAddedItem(function(o){return a._toggleClass(o.key,o.currentValue)}),r.forEachChangedItem(function(o){return a._toggleClass(o.key,o.currentValue)}),r.forEachRemovedItem(function(o){o.previousValue&&a._toggleClass(o.key,!1)})}},{key:"_applyIterableChanges",value:function(r){var a=this;r.forEachAddedItem(function(o){if("string"!=typeof o.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat((0,v.AaK)(o.item)));a._toggleClass(o.item,!0)}),r.forEachRemovedItem(function(o){return a._toggleClass(o.item,!1)})}},{key:"_applyClasses",value:function(r){var a=this;r&&(Array.isArray(r)||r instanceof Set?r.forEach(function(o){return a._toggleClass(o,!0)}):Object.keys(r).forEach(function(o){return a._toggleClass(o,!!r[o])}))}},{key:"_removeClasses",value:function(r){var a=this;r&&(Array.isArray(r)||r instanceof Set?r.forEach(function(o){return a._toggleClass(o,!1)}):Object.keys(r).forEach(function(o){return a._toggleClass(o,!1)}))}},{key:"_toggleClass",value:function(r,a){var o=this;(r=r.trim())&&r.split(/\s+/g).forEach(function(u){a?o._renderer.addClass(o._ngEl.nativeElement,u):o._renderer.removeClass(o._ngEl.nativeElement,u)})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i}(),Ka=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.$implicit=s,this.ngForOf=n,this.index=r,this.count=a}return(0,R.Z)(i,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),i}(),as=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._viewContainer=n,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return(0,R.Z)(s,[{key:"ngForOf",set:function(r){this._ngForOf=r,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(r){this._trackByFn=r}},{key:"ngForTemplate",set:function(r){r&&(this._template=r)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(o){throw new Error("Cannot find a differ supporting object '".concat(r,"' of type '").concat(function(i){return i.name||typeof i}(r),"'. NgFor only supports binding to Iterables such as Arrays."))}}if(this._differ){var a=this._differ.diff(this._ngForOf);a&&this._applyChanges(a)}}},{key:"_applyChanges",value:function(r){var a=this,o=[];r.forEachOperation(function(b,w,C){if(null==b.previousIndex){var T=a._viewContainer.createEmbeddedView(a._template,new Ka(null,a._ngForOf,-1,-1),null===C?void 0:C),I=new Ao(b,T);o.push(I)}else if(null==C)a._viewContainer.remove(null===w?void 0:w);else if(null!==w){var Z=a._viewContainer.get(w);a._viewContainer.move(Z,C);var Y=new Ao(b,Z);o.push(Y)}});for(var u=0;u<o.length;u++)this._perViewChange(o[u].view,o[u].record);for(var l=0,f=this._viewContainer.length;l<f;l++){var m=this._viewContainer.get(l);m.context.index=l,m.context.count=f,m.context.ngForOf=this._ngForOf}r.forEachIdentityChange(function(b){a._viewContainer.get(b.currentIndex).context.$implicit=b.item})}},{key:"_perViewChange",value:function(r,a){r.context.$implicit=a.item}}],[{key:"ngTemplateContextGuard",value:function(r,a){return!0}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i}(),Ao=function i(s,n){(0,M.Z)(this,i),this.record=s,this.view=n},Ra=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this._viewContainer=n,this._context=new Ui,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}return(0,R.Z)(s,[{key:"ngIf",set:function(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}},{key:"ngIfThen",set:function(r){ya("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(r){ya("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(r,a){return!0}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.s_b),v.Y36(v.Rgc))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i}(),Ui=function i(){(0,M.Z)(this,i),this.$implicit=null,this.ngIf=null};function ya(i,s){if(s&&!s.createEmbeddedView)throw new Error("".concat(i," must be a TemplateRef, but received '").concat((0,v.AaK)(s),"'."))}function $a(i,s){return Error("InvalidPipeArgument: '".concat(s,"' for pipe '").concat((0,v.AaK)(i),"'"))}var vu=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.locale=n}return(0,R.Z)(s,[{key:"transform",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0;if(null==r||""===r||r!=r)return null;try{return Wi(r,a,u||this.locale,o)}catch(l){throw $a(s,l.message)}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.soG,16))},i.\u0275pipe=v.Yjl({name:"date",type:i,pure:!0}),i}(),$=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[{provide:Fa,useClass:ua}]}),i}();function De(i){return"server"===i}var At=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275prov=(0,v.Yz7)({token:i,providedIn:"root",factory:function(){return new sn((0,v.LFG)(be),window)}}),i}(),sn=function(){function i(s,n){(0,M.Z)(this,i),this.document=s,this.window=n,this.offset=function(){return[0,0]}}return(0,R.Z)(i,[{key:"setOffset",value:function(n){this.offset=Array.isArray(n)?function(){return n}:n}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}},{key:"scrollToAnchor",value:function(n){if(this.supportsScrolling()){var r=function(i,s){var n=i.getElementById(s)||i.getElementsByName(s)[0];if(n)return n;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow))for(var r=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT),a=r.currentNode;a;){var o=a.shadowRoot;if(o){var u=o.getElementById(s)||o.querySelector('[name="'.concat(s,'"]'));if(u)return u}a=r.nextNode()}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}}},{key:"setHistoryScrollRestoration",value:function(n){if(this.supportScrollRestoration()){var r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}},{key:"scrollToElement",value:function(n){var r=n.getBoundingClientRect(),a=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(a-u[0],o-u[1])}},{key:"attemptFocus",value:function(n){return n.focus(),this.document.activeElement===n}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var n=an(this.window.history)||an(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(r){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}]),i}();function an(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}var ui,Wn=function i(){(0,M.Z)(this,i)},Oi=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"onAndCancel",value:function(a,o,u){return a.addEventListener(o,u,!1),function(){a.removeEventListener(o,u,!1)}}},{key:"dispatchEvent",value:function(a,o){a.dispatchEvent(o)}},{key:"remove",value:function(a){a.parentNode&&a.parentNode.removeChild(a)}},{key:"createElement",value:function(a,o){return(o=o||this.getDefaultDocument()).createElement(a)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(a){return a.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(a){return a instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(a,o){return"window"===o?window:"document"===o?a:"body"===o?a.body:null}},{key:"getBaseHref",value:function(a){var o=(ja=ja||document.querySelector("base"))?ja.getAttribute("href"):null;return null==o?null:function(i){(ui=ui||document.createElement("a")).setAttribute("href",i);var s=ui.pathname;return"/"===s.charAt(0)?s:"/".concat(s)}(o)}},{key:"resetBaseElement",value:function(){ja=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(a){return Lr(document.cookie,a)}}],[{key:"makeCurrent",value:function(){!function(i){Ae||(Ae=i)}(new n)}}]),n}(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.apply(this,arguments)).supportsDOMEvents=!0,r}return n}(ae)),ja=null,Bn=new v.OlP("TRANSITION_ID"),la=[{provide:v.ip1,useFactory:function(i,s,n){return function(){n.get(v.CZH).donePromise.then(function(){for(var r=xe(),a=s.querySelectorAll('style[ng-transition="'.concat(i,'"]')),o=0;o<a.length;o++)r.remove(a[o])})}},deps:[Bn,be,v.zs3],multi:!0}],Oa=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"addToWindow",value:function(n){v.dqk.getAngularTestability=function(a){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],u=n.findTestabilityInTree(a,o);if(null==u)throw new Error("Could not find testability for element.");return u},v.dqk.getAllAngularTestabilities=function(){return n.getAllTestabilities()},v.dqk.getAllAngularRootElements=function(){return n.getAllRootElements()},v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(function(o){var u=v.dqk.getAllAngularTestabilities(),l=u.length,f=!1,m=function(w){f=f||w,0==--l&&o(f)};u.forEach(function(b){b.whenStable(m)})})}},{key:"findTestabilityInTree",value:function(n,r,a){if(null==r)return null;var o=n.getTestability(r);return null!=o?o:a?xe().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}],[{key:"init",value:function(){(0,v.VLi)(new i)}}]),i}(),Zr=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,[{key:"build",value:function(){return new XMLHttpRequest}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Ul=new v.OlP("EventManagerPlugins"),yo=function(){var i=function(){function s(n,r){var a=this;(0,M.Z)(this,s),this._zone=r,this._eventNameToPlugin=new Map,n.forEach(function(o){return o.manager=a}),this._plugins=n.slice().reverse()}return(0,R.Z)(s,[{key:"addEventListener",value:function(r,a,o){return this._findPluginFor(a).addEventListener(r,a,o)}},{key:"addGlobalEventListener",value:function(r,a,o){return this._findPluginFor(a).addGlobalEventListener(r,a,o)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(r){var a=this._eventNameToPlugin.get(r);if(a)return a;for(var o=this._plugins,u=0;u<o.length;u++){var l=o[u];if(l.supports(r))return this._eventNameToPlugin.set(r,l),l}throw new Error("No event manager plugin found for event ".concat(r))}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Ul),v.LFG(v.R0b))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),lh=function(){function i(s){(0,M.Z)(this,i),this._doc=s}return(0,R.Z)(i,[{key:"addGlobalEventListener",value:function(n,r,a){var o=xe().getGlobalEventTarget(this._doc,n);if(!o)throw new Error("Unsupported event target ".concat(o," for event ").concat(r));return this.addEventListener(o,r,a)}}]),i}(),Qu=function(){var i=function(){function s(){(0,M.Z)(this,s),this._stylesSet=new Set}return(0,R.Z)(s,[{key:"addStyles",value:function(r){var a=this,o=new Set;r.forEach(function(u){a._stylesSet.has(u)||(a._stylesSet.add(u),o.add(u))}),this.onStylesAdded(o)}},{key:"onStylesAdded",value:function(r){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),gc=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this))._doc=a,o._hostNodes=new Map,o._hostNodes.set(a.head,[]),o}return(0,R.Z)(r,[{key:"_addStylesToHost",value:function(o,u,l){var f=this;o.forEach(function(m){var b=f._doc.createElement("style");b.textContent=m,l.push(u.appendChild(b))})}},{key:"addHost",value:function(o){var u=[];this._addStylesToHost(this._stylesSet,o,u),this._hostNodes.set(o,u)}},{key:"removeHost",value:function(o){var u=this._hostNodes.get(o);u&&u.forEach(bl),this._hostNodes.delete(o)}},{key:"onStylesAdded",value:function(o){var u=this;this._hostNodes.forEach(function(l,f){u._addStylesToHost(o,f,l)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(o){return o.forEach(bl)})}}]),r}(Qu);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();function bl(i){xe().remove(i)}var wl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tn=/%COMP%/g,_a="_nghost-".concat("%COMP%"),ch="_ngcontent-".concat("%COMP%");function La(i,s,n){for(var r=0;r<s.length;r++){var a=s[r];Array.isArray(a)?La(i,a,n):(a=a.replace(tn,i),n.push(a))}return n}function Fc(i){return function(s){if("__ngUnwrap__"===s)return i;!1===i(s)&&(s.preventDefault(),s.returnValue=!1)}}var Vl=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this.eventManager=n,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new _o(n)}return(0,R.Z)(s,[{key:"createRenderer",value:function(r,a){if(!r||!a)return this.defaultRenderer;switch(a.encapsulation){case v.ifc.Emulated:var o=this.rendererByCompId.get(a.id);return o||(o=new Js(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,o)),o.applyToHost(r),o;case 1:case v.ifc.ShadowDom:return new Yo(this.eventManager,this.sharedStylesHost,r,a);default:if(!this.rendererByCompId.has(a.id)){var u=La(a.id,a.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(yo),v.LFG(gc),v.LFG(v.AFp))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),_o=function(){function i(s){(0,M.Z)(this,i),this.eventManager=s,this.data=Object.create(null)}return(0,R.Z)(i,[{key:"destroy",value:function(){}},{key:"createElement",value:function(n,r){return r?document.createElementNS(wl[r]||r,n):document.createElement(n)}},{key:"createComment",value:function(n){return document.createComment(n)}},{key:"createText",value:function(n){return document.createTextNode(n)}},{key:"appendChild",value:function(n,r){n.appendChild(r)}},{key:"insertBefore",value:function(n,r,a){n&&n.insertBefore(r,a)}},{key:"removeChild",value:function(n,r){n&&n.removeChild(r)}},{key:"selectRootElement",value:function(n,r){var a="string"==typeof n?document.querySelector(n):n;if(!a)throw new Error('The selector "'.concat(n,'" did not match any elements'));return r||(a.textContent=""),a}},{key:"parentNode",value:function(n){return n.parentNode}},{key:"nextSibling",value:function(n){return n.nextSibling}},{key:"setAttribute",value:function(n,r,a,o){if(o){r=o+":"+r;var u=wl[o];u?n.setAttributeNS(u,r,a):n.setAttribute(r,a)}else n.setAttribute(r,a)}},{key:"removeAttribute",value:function(n,r,a){if(a){var o=wl[a];o?n.removeAttributeNS(o,r):n.removeAttribute("".concat(a,":").concat(r))}else n.removeAttribute(r)}},{key:"addClass",value:function(n,r){n.classList.add(r)}},{key:"removeClass",value:function(n,r){n.classList.remove(r)}},{key:"setStyle",value:function(n,r,a,o){o&(v.JOm.DashCase|v.JOm.Important)?n.style.setProperty(r,a,o&v.JOm.Important?"important":""):n.style[r]=a}},{key:"removeStyle",value:function(n,r,a){a&v.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}},{key:"setProperty",value:function(n,r,a){n[r]=a}},{key:"setValue",value:function(n,r){n.nodeValue=r}},{key:"listen",value:function(n,r,a){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,Fc(a)):this.eventManager.addEventListener(n,r,Fc(a))}}]),i}(),Js=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;(0,M.Z)(this,n),(l=s.call(this,r)).component=o;var f=La(u+"-"+o.id,o.styles,[]);return a.addStyles(f),l.contentAttr=function(i){return ch.replace(tn,i)}(u+"-"+o.id),l.hostAttr=function(i){return _a.replace(tn,i)}(u+"-"+o.id),l}return(0,R.Z)(n,[{key:"applyToHost",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"setAttribute",this).call(this,a,this.hostAttr,"")}},{key:"createElement",value:function(a,o){var u=(0,Se.Z)((0,ye.Z)(n.prototype),"createElement",this).call(this,a,o);return(0,Se.Z)((0,ye.Z)(n.prototype),"setAttribute",this).call(this,u,this.contentAttr,""),u}}]),n}(_o),Yo=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;(0,M.Z)(this,n),(l=s.call(this,r)).sharedStylesHost=a,l.hostEl=o,l.shadowRoot=o.attachShadow({mode:"open"}),l.sharedStylesHost.addHost(l.shadowRoot);for(var f=La(u.id,u.styles,[]),m=0;m<f.length;m++){var b=document.createElement("style");b.textContent=f[m],l.shadowRoot.appendChild(b)}return l}return(0,R.Z)(n,[{key:"nodeOrShadowRoot",value:function(a){return a===this.hostEl?this.shadowRoot:a}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(a,o){return(0,Se.Z)((0,ye.Z)(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(a),o)}},{key:"insertBefore",value:function(a,o,u){return(0,Se.Z)((0,ye.Z)(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(a),o,u)}},{key:"removeChild",value:function(a,o){return(0,Se.Z)((0,ye.Z)(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(a),o)}},{key:"parentNode",value:function(a){return this.nodeOrShadowRoot((0,Se.Z)((0,ye.Z)(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(a)))}}]),n}(_o),Po=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a){return(0,M.Z)(this,r),n.call(this,a)}return(0,R.Z)(r,[{key:"supports",value:function(o){return!0}},{key:"addEventListener",value:function(o,u,l){var f=this;return o.addEventListener(u,l,!1),function(){return f.removeEventListener(o,u,l)}}},{key:"removeEventListener",value:function(o,u,l){return o.removeEventListener(u,l)}}]),r}(lh);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),dh=["alt","control","meta","shift"],bo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dl={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Lt={alt:function(s){return s.altKey},control:function(s){return s.ctrlKey},meta:function(s){return s.metaKey},shift:function(s){return s.shiftKey}},yt=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a){return(0,M.Z)(this,r),n.call(this,a)}return(0,R.Z)(r,[{key:"supports",value:function(o){return null!=r.parseEventName(o)}},{key:"addEventListener",value:function(o,u,l){var f=r.parseEventName(u),m=r.eventCallback(f.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return xe().onAndCancel(o,f.domEventName,m)})}}],[{key:"parseEventName",value:function(o){var u=o.toLowerCase().split("."),l=u.shift();if(0===u.length||"keydown"!==l&&"keyup"!==l)return null;var f=r._normalizeKey(u.pop()),m="";if(dh.forEach(function(w){var C=u.indexOf(w);C>-1&&(u.splice(C,1),m+=w+".")}),m+=f,0!=u.length||0===f.length)return null;var b={};return b.domEventName=l,b.fullKey=m,b}},{key:"getEventFullKey",value:function(o){var u="",l=function(i){var s=i.key;if(null==s){if(null==(s=i.keyIdentifier))return"Unidentified";s.startsWith("U+")&&(s=String.fromCharCode(parseInt(s.substring(2),16)),3===i.location&&Dl.hasOwnProperty(s)&&(s=Dl[s]))}return bo[s]||s}(o);return" "===(l=l.toLowerCase())?l="space":"."===l&&(l="dot"),dh.forEach(function(f){f!=l&&(0,Lt[f])(o)&&(u+=f+".")}),u+=l}},{key:"eventCallback",value:function(o,u,l){return function(f){r.getEventFullKey(f)===o&&l.runGuarded(function(){return u(f)})}}},{key:"_normalizeKey",value:function(o){switch(o){case"esc":return"escape";default:return o}}}]),r}(lh);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Xt=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=(0,v.Yz7)({factory:function(){return(0,v.LFG)(zn)},token:i,providedIn:"root"}),i}(),zn=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this))._doc=a,o}return(0,R.Z)(r,[{key:"sanitize",value:function(o,u){if(null==u)return null;switch(o){case v.q3G.NONE:return u;case v.q3G.HTML:return(0,v.qzn)(u,"HTML")?(0,v.z3N)(u):(0,v.EiD)(this._doc,String(u)).toString();case v.q3G.STYLE:return(0,v.qzn)(u,"Style")?(0,v.z3N)(u):u;case v.q3G.SCRIPT:if((0,v.qzn)(u,"Script"))return(0,v.z3N)(u);throw new Error("unsafe value used in a script context");case v.q3G.URL:return(0,v.yhl)(u),(0,v.qzn)(u,"URL")?(0,v.z3N)(u):(0,v.mCW)(String(u));case v.q3G.RESOURCE_URL:if((0,v.qzn)(u,"ResourceURL"))return(0,v.z3N)(u);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext ".concat(o," (see https://g.co/ng/security#xss)"))}}},{key:"bypassSecurityTrustHtml",value:function(o){return(0,v.JVY)(o)}},{key:"bypassSecurityTrustStyle",value:function(o){return(0,v.L6k)(o)}},{key:"bypassSecurityTrustScript",value:function(o){return(0,v.eBb)(o)}},{key:"bypassSecurityTrustUrl",value:function(o){return(0,v.LAX)(o)}},{key:"bypassSecurityTrustResourceUrl",value:function(o){return(0,v.pB0)(o)}}]),r}(Xt);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be))},i.\u0275prov=(0,v.Yz7)({factory:function(){return function(i){return new zn(i.get(be))}((0,v.LFG)(v.gxx))},token:i,providedIn:"root"}),i}(),ss=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function(){Oi.makeCurrent(),Oa.init()},multi:!0},{provide:be,useFactory:function(){return(0,v.RDi)(document),document},deps:[]}]),ha=[[],{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function(){return new v.qLn},deps:[]},{provide:Ul,useClass:Po,multi:!0,deps:[be,v.R0b,v.Lbi]},{provide:Ul,useClass:yt,multi:!0,deps:[be]},[],{provide:Vl,useClass:Vl,deps:[yo,gc,v.AFp]},{provide:v.FYo,useExisting:Vl},{provide:Qu,useExisting:gc},{provide:gc,useClass:gc,deps:[be]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:yo,useClass:yo,deps:[Ul,v.R0b]},{provide:Wn,useClass:Zr,deps:[]},[]],Us=function(){var i=function(){function s(n){if((0,M.Z)(this,s),n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return(0,R.Z)(s,null,[{key:"withServerTransition",value:function(r){return{ngModule:s,providers:[{provide:v.AFp,useValue:r.appId},{provide:Bn,useExisting:v.AFp},la]}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(i,12))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:ha,imports:[$,v.hGG]}),i}();"undefined"!=typeof window&&window;var Br=function i(){(0,M.Z)(this,i)},fa=function i(){(0,M.Z)(this,i)},da="*";function Xa(i,s){return{type:7,name:i,definitions:s,options:{}}}function Qa(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:s,timings:i}}function yc(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:2,steps:i,options:s}}function eo(i){return{type:6,styles:i,offset:null}}function mu(i,s,n){return{type:0,name:i,styles:s,options:n}}function el(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:1,expr:i,animation:s,options:n}}function nf(i){Promise.resolve(null).then(i)}var Sl=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,i),this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=s+n}return(0,R.Z)(i,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[])}},{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"hasStarted",value:function(){return this._started}},{key:"init",value:function(){}},{key:"play",value:function(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}},{key:"triggerMicrotask",value:function(){var n=this;nf(function(){return n._onFinish()})}},{key:"_onStart",value:function(){this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[]}},{key:"pause",value:function(){}},{key:"restart",value:function(){}},{key:"finish",value:function(){this._onFinish()}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this._started=!1}},{key:"setPosition",value:function(n){this._position=this.totalTime?n*this.totalTime:1}},{key:"getPosition",value:function(){return this.totalTime?this._position/this.totalTime:1}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}}]),i}(),Hf=function(){function i(s){var n=this;(0,M.Z)(this,i),this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=s;var r=0,a=0,o=0,u=this.players.length;0==u?nf(function(){return n._onFinish()}):this.players.forEach(function(l){l.onDone(function(){++r==u&&n._onFinish()}),l.onDestroy(function(){++a==u&&n._onDestroy()}),l.onStart(function(){++o==u&&n._onStart()})}),this.totalTime=this.players.reduce(function(l,f){return Math.max(l,f.totalTime)},0)}return(0,R.Z)(i,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[])}},{key:"init",value:function(){this.players.forEach(function(n){return n.init()})}},{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"_onStart",value:function(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[])}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(function(n){return n.play()})}},{key:"pause",value:function(){this.players.forEach(function(n){return n.pause()})}},{key:"restart",value:function(){this.players.forEach(function(n){return n.restart()})}},{key:"finish",value:function(){this._onFinish(),this.players.forEach(function(n){return n.finish()})}},{key:"destroy",value:function(){this._onDestroy()}},{key:"_onDestroy",value:function(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(function(n){return n.destroy()}),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"reset",value:function(){this.players.forEach(function(n){return n.reset()}),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"setPosition",value:function(n){var r=n*this.totalTime;this.players.forEach(function(a){var o=a.totalTime?Math.min(1,r/a.totalTime):1;a.setPosition(o)})}},{key:"getPosition",value:function(){var n=this.players.reduce(function(r,a){return null===r||a.totalTime>r.totalTime?a:r},null);return null!=n?n.getPosition():0}},{key:"beforeDestroy",value:function(){this.players.forEach(function(n){n.beforeDestroy&&n.beforeDestroy()})}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}}]),i}(),Kr=ne(8398);function ph(){return"undefined"!=typeof window&&void 0!==window.document}function op(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function _c(i){switch(i.length){case 0:return new Sl;case 1:return i[0];default:return new Hf(i)}}function pv(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=[],l=[],f=-1,m=null;if(r.forEach(function(w){var C=w.offset,T=C==f,I=T&&m||{};Object.keys(w).forEach(function(Z){var Y=Z,V=w[Z];if("offset"!==Z)switch(Y=s.normalizePropertyName(Y,u),V){case"!":V=a[Z];break;case da:V=o[Z];break;default:V=s.normalizeStyleValue(Z,Y,V,u)}I[Y]=V}),T||l.push(I),m=I,f=C}),u.length){var b="\n - ";throw new Error("Unable to animate due to the following errors:".concat(b).concat(u.join(b)))}return l}function ql(i,s,n,r){switch(s){case"start":i.onStart(function(){return r(n&&vh(n,"start",i))});break;case"done":i.onDone(function(){return r(n&&vh(n,"done",i))});break;case"destroy":i.onDestroy(function(){return r(n&&vh(n,"destroy",i))})}}function vh(i,s,n){var r=n.totalTime,o=mh(i.element,i.triggerName,i.fromState,i.toState,s||i.phaseName,null==r?i.totalTime:r,!!n.disabled),u=i._data;return null!=u&&(o._data=u),o}function mh(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6?arguments[6]:void 0;return{element:i,triggerName:s,fromState:n,toState:r,phaseName:a,totalTime:o,disabled:!!u}}function Ro(i,s,n){var r;return i instanceof Map?(r=i.get(s))||i.set(s,r=n):(r=i[s])||(r=i[s]=n),r}function Gf(i){var s=i.indexOf(":");return[i.substring(1,s),i.substr(s+1)]}var Lc=function(s,n){return!1},o0=function(s,n){return!1},u0=function(s,n,r){return[]},ps=op();(ps||"undefined"!=typeof Element)&&(Lc=ph()?function(s,n){for(;n&&n!==document.documentElement;){if(n===s)return!0;n=n.parentNode||n.host}return!1}:function(s,n){return s.contains(n)},o0=function(){if(ps||Element.prototype.matches)return function(n,r){return n.matches(r)};var i=Element.prototype,s=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector;return s?function(n,r){return s.apply(n,[r])}:o0}(),u0=function(s,n,r){var a=[];if(r)for(var o=s.querySelectorAll(n),u=0;u<o.length;u++)a.push(o[u]);else{var l=s.querySelector(n);l&&a.push(l)}return a});var gh=null,Fg=!1;function l0(i){gh||(gh=("undefined"!=typeof document?document.body:null)||{},Fg=!!gh.style&&"WebkitAppearance"in gh.style);var s=!0;return gh.style&&!function(i){return"ebkit"==i.substring(1,6)}(i)&&!(s=i in gh.style)&&Fg&&(s="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in gh.style),s}var h0=o0,vv=Lc,f0=u0;function Rg(i){var s={};return Object.keys(i).forEach(function(n){var r=n.replace(/([a-z])([A-Z])/g,"$1-$2");s[r]=i[n]}),s}var mv=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,[{key:"validateStyleProperty",value:function(r){return l0(r)}},{key:"matchesElement",value:function(r,a){return h0(r,a)}},{key:"containsElement",value:function(r,a){return vv(r,a)}},{key:"query",value:function(r,a,o){return f0(r,a,o)}},{key:"computeStyle",value:function(r,a,o){return o||""}},{key:"animate",value:function(r,a,o,u,l){return new Sl(o,u)}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),gv=function(){var i=function s(){(0,M.Z)(this,s)};return i.NOOP=new mv,i}(),Yl="ng-enter",yh="ng-leave",gu="ng-trigger",yu=".ng-trigger",jf="ng-animating",Nc=".ng-animating";function Pu(i){if("number"==typeof i)return i;var s=i.match(/^(-?[\.\d]+)(m?s)/);return!s||s.length<2?0:Wf(parseFloat(s[1]),s[2])}function Wf(i,s){switch(s){case"s":return 1e3*i;default:return i}}function yv(i,s,n){return i.hasOwnProperty("duration")?i:function(i,s,n){var a,o=0,u="";if("string"==typeof i){var l=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return s.push('The provided timing value "'.concat(i,'" is invalid.')),{duration:0,delay:0,easing:""};a=Wf(parseFloat(l[1]),l[2]);var f=l[3];null!=f&&(o=Wf(parseFloat(f),l[4]));var m=l[5];m&&(u=m)}else a=i;if(!n){var b=!1,w=s.length;a<0&&(s.push("Duration values below 0 are not allowed for this animation step."),b=!0),o<0&&(s.push("Delay values below 0 are not allowed for this animation step."),b=!0),b&&s.splice(w,0,'The provided timing value "'.concat(i,'" is invalid.'))}return{duration:a,delay:o,easing:u}}(i,s,n)}function lp(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(i).forEach(function(n){s[n]=i[n]}),s}function Kl(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(s)for(var r in i)n[r]=i[r];else lp(i,n);return n}function Fu(i,s,n){return n?s+":"+n+";":""}function qf(i){for(var s="",n=0;n<i.style.length;n++){var r=i.style.item(n);s+=Fu(0,r,i.style.getPropertyValue(r))}for(var a in i.style)i.style.hasOwnProperty(a)&&!a.startsWith("_")&&(s+=Fu(0,$f(a),i.style[a]));i.setAttribute("style",s)}function _u(i,s,n){i.style&&(Object.keys(s).forEach(function(r){var a=dp(r);n&&!n.hasOwnProperty(r)&&(n[r]=i.style[a]),i.style[a]=s[r]}),op()&&qf(i))}function Yf(i,s){i.style&&(Object.keys(s).forEach(function(n){var r=dp(n);i.style[r]=""}),op()&&qf(i))}function _h(i){return Array.isArray(i)?1==i.length?i[0]:yc(i):i}var cp=new RegExp("".concat("{{","\\s*(.+?)\\s*").concat("}}"),"g");function d0(i){var s=[];if("string"==typeof i){for(var n;n=cp.exec(i);)s.push(n[1]);cp.lastIndex=0}return s}function Kf(i,s,n){var r=i.toString(),a=r.replace(cp,function(o,u){var l=s[u];return s.hasOwnProperty(u)||(n.push("Please provide a value for the animation param ".concat(u)),l=""),l.toString()});return a==r?i:a}function hp(i){for(var s=[],n=i.next();!n.done;)s.push(n.value),n=i.next();return s}var fp=/-+([a-z0-9])/g;function dp(i){return i.replace(fp,function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return n[1].toUpperCase()})}function $f(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function p0(i,s){return 0===i||0===s}function Xf(i,s,n){var r=Object.keys(n);if(r.length&&s.length){var a=s[0],o=[];if(r.forEach(function(f){a.hasOwnProperty(f)||o.push(f),a[f]=n[f]}),o.length)for(var u=function(){var m=s[l];o.forEach(function(b){m[b]=bh(i,b)})},l=1;l<s.length;l++)u()}return s}function Oo(i,s,n){switch(s.type){case 7:return i.visitTrigger(s,n);case 0:return i.visitState(s,n);case 1:return i.visitTransition(s,n);case 2:return i.visitSequence(s,n);case 3:return i.visitGroup(s,n);case 4:return i.visitAnimate(s,n);case 5:return i.visitKeyframes(s,n);case 6:return i.visitStyle(s,n);case 8:return i.visitReference(s,n);case 9:return i.visitAnimateChild(s,n);case 10:return i.visitAnimateRef(s,n);case 11:return i.visitQuery(s,n);case 12:return i.visitStagger(s,n);default:throw new Error("Unable to resolve animation metadata node #".concat(s.type))}}function bh(i,s){return window.getComputedStyle(i)[s]}function Zg(i,s){var n=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(function(r){return function(i,s,n){if(":"==i[0]){var r=function(i,s){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(n,r){return parseFloat(r)>parseFloat(n)};case":decrement":return function(n,r){return parseFloat(r)<parseFloat(n)};default:return s.push('The transition alias value "'.concat(i,'" is not supported')),"* => *"}}(i,n);if("function"==typeof r)return void s.push(r);i=r}var a=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==a||a.length<4)return n.push('The provided transition expression "'.concat(i,'" is not supported')),s;var o=a[1],u=a[2],l=a[3];s.push(rf(o,l)),"<"==u[0]&&!("*"==o&&"*"==l)&&s.push(rf(l,o))}(r,n,s)}):n.push(i),n}var Qf=new Set(["true","1"]),wh=new Set(["false","0"]);function rf(i,s){var n=Qf.has(i)||wh.has(i),r=Qf.has(s)||wh.has(s);return function(a,o){var u="*"==i||i==a,l="*"==s||s==o;return!u&&n&&"boolean"==typeof a&&(u=a?Qf.has(i):wh.has(i)),!l&&r&&"boolean"==typeof o&&(l=o?Qf.has(s):wh.has(s)),u&&l}}var gk=new RegExp("s*".concat(":self","s*,?"),"g");function vs(i,s,n){return new v0(i).build(s,n)}var v0=function(){function i(s){(0,M.Z)(this,i),this._driver=s}return(0,R.Z)(i,[{key:"build",value:function(n,r){var a=new Bg(r);return this._resetContextStyleTimingState(a),Oo(this,_h(n),a)}},{key:"_resetContextStyleTimingState",value:function(n){n.currentQuerySelector="",n.collectedStyles={},n.collectedStyles[""]={},n.currentTime=0}},{key:"visitTrigger",value:function(n,r){var a=this,o=r.queryCount=0,u=r.depCount=0,l=[],f=[];return"@"==n.name.charAt(0)&&r.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),n.definitions.forEach(function(m){if(a._resetContextStyleTimingState(r),0==m.type){var b=m,w=b.name;w.toString().split(/\s*,\s*/).forEach(function(T){b.name=T,l.push(a.visitState(b,r))}),b.name=w}else if(1==m.type){var C=a.visitTransition(m,r);o+=C.queryCount,u+=C.depCount,f.push(C)}else r.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:n.name,states:l,transitions:f,queryCount:o,depCount:u,options:null}}},{key:"visitState",value:function(n,r){var a=this.visitStyle(n.styles,r),o=n.options&&n.options.params||null;if(a.containsDynamicStyles){var u=new Set,l=o||{};if(a.styles.forEach(function(m){if(vp(m)){var b=m;Object.keys(b).forEach(function(w){d0(b[w]).forEach(function(C){l.hasOwnProperty(C)||u.add(C)})})}}),u.size){var f=hp(u.values());r.errors.push('state("'.concat(n.name,'", ...) must define default values for all the following style substitutions: ').concat(f.join(", ")))}}return{type:0,name:n.name,style:a,options:o?{params:o}:null}}},{key:"visitTransition",value:function(n,r){r.queryCount=0,r.depCount=0;var a=Oo(this,_h(n.animation),r);return{type:1,matchers:Zg(n.expr,r.errors),animation:a,queryCount:r.queryCount,depCount:r.depCount,options:Ru(n.options)}}},{key:"visitSequence",value:function(n,r){var a=this;return{type:2,steps:n.steps.map(function(o){return Oo(a,o,r)}),options:Ru(n.options)}}},{key:"visitGroup",value:function(n,r){var a=this,o=r.currentTime,u=0,l=n.steps.map(function(f){r.currentTime=o;var m=Oo(a,f,r);return u=Math.max(u,r.currentTime),m});return r.currentTime=u,{type:3,steps:l,options:Ru(n.options)}}},{key:"visitAnimate",value:function(n,r){var a=function(i,s){var n=null;if(i.hasOwnProperty("duration"))n=i;else if("number"==typeof i)return $l(yv(i,s).duration,0,"");var a=i;if(a.split(/\s+/).some(function(l){return"{"==l.charAt(0)&&"{"==l.charAt(1)})){var u=$l(0,0,"");return u.dynamic=!0,u.strValue=a,u}return $l((n=n||yv(a,s)).duration,n.delay,n.easing)}(n.timings,r.errors);r.currentAnimateTimings=a;var o,u=n.styles?n.styles:eo({});if(5==u.type)o=this.visitKeyframes(u,r);else{var l=n.styles,f=!1;if(!l){f=!0;var m={};a.easing&&(m.easing=a.easing),l=eo(m)}r.currentTime+=a.duration+a.delay;var b=this.visitStyle(l,r);b.isEmptyStep=f,o=b}return r.currentAnimateTimings=null,{type:4,timings:a,style:o,options:null}}},{key:"visitStyle",value:function(n,r){var a=this._makeStyleAst(n,r);return this._validateStyleAst(a,r),a}},{key:"_makeStyleAst",value:function(n,r){var a=[];Array.isArray(n.styles)?n.styles.forEach(function(l){"string"==typeof l?l==da?a.push(l):r.errors.push("The provided style string value ".concat(l," is not allowed.")):a.push(l)}):a.push(n.styles);var o=!1,u=null;return a.forEach(function(l){if(vp(l)){var f=l,m=f.easing;if(m&&(u=m,delete f.easing),!o)for(var b in f)if(f[b].toString().indexOf("{{")>=0){o=!0;break}}}),{type:6,styles:a,easing:u,offset:n.offset,containsDynamicStyles:o,options:null}}},{key:"_validateStyleAst",value:function(n,r){var a=this,o=r.currentAnimateTimings,u=r.currentTime,l=r.currentTime;o&&l>0&&(l-=o.duration+o.delay),n.styles.forEach(function(f){"string"!=typeof f&&Object.keys(f).forEach(function(m){if(a._driver.validateStyleProperty(m)){var b=r.collectedStyles[r.currentQuerySelector],w=b[m],C=!0;w&&(l!=u&&l>=w.startTime&&u<=w.endTime&&(r.errors.push('The CSS property "'.concat(m,'" that exists between the times of "').concat(w.startTime,'ms" and "').concat(w.endTime,'ms" is also being animated in a parallel animation between the times of "').concat(l,'ms" and "').concat(u,'ms"')),C=!1),l=w.startTime),C&&(b[m]={startTime:l,endTime:u}),r.options&&function(i,s,n){var r=s.params||{},a=d0(i);a.length&&a.forEach(function(o){r.hasOwnProperty(o)||n.push("Unable to resolve the local animation param ".concat(o," in the given list of values"))})}(f[m],r.options,r.errors)}else r.errors.push('The provided animation property "'.concat(m,'" is not a supported CSS property for animations'))})})}},{key:"visitKeyframes",value:function(n,r){var a=this,o={type:5,styles:[],options:null};if(!r.currentAnimateTimings)return r.errors.push("keyframes() must be placed inside of a call to animate()"),o;var l=0,f=[],m=!1,b=!1,w=0,C=n.steps.map(function(se){var fe=a._makeStyleAst(se,r),ve=null!=fe.offset?fe.offset:function(i){if("string"==typeof i)return null;var s=null;if(Array.isArray(i))i.forEach(function(r){if(vp(r)&&r.hasOwnProperty("offset")){var a=r;s=parseFloat(a.offset),delete a.offset}});else if(vp(i)&&i.hasOwnProperty("offset")){var n=i;s=parseFloat(n.offset),delete n.offset}return s}(fe.styles),me=0;return null!=ve&&(l++,me=fe.offset=ve),b=b||me<0||me>1,m=m||me<w,w=me,f.push(me),fe});b&&r.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),m&&r.errors.push("Please ensure that all keyframe offsets are in order");var T=n.steps.length,I=0;l>0&&l<T?r.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==l&&(I=1/(T-1));var Z=T-1,Y=r.currentTime,V=r.currentAnimateTimings,W=V.duration;return C.forEach(function(se,fe){var ve=I>0?fe==Z?1:I*fe:f[fe],me=ve*W;r.currentTime=Y+V.delay+me,V.duration=me,a._validateStyleAst(se,r),se.offset=ve,o.styles.push(se)}),o}},{key:"visitReference",value:function(n,r){return{type:8,animation:Oo(this,_h(n.animation),r),options:Ru(n.options)}}},{key:"visitAnimateChild",value:function(n,r){return r.depCount++,{type:9,options:Ru(n.options)}}},{key:"visitAnimateRef",value:function(n,r){return{type:10,animation:this.visitReference(n.animation,r),options:Ru(n.options)}}},{key:"visitQuery",value:function(n,r){var a=r.currentQuerySelector,o=n.options||{};r.queryCount++,r.currentQuery=n;var u=function(i){var s=!!i.split(/\s*,\s*/).find(function(n){return":self"==n});return s&&(i=i.replace(gk,"")),[i=i.replace(/@\*/g,yu).replace(/@\w+/g,function(n){return yu+"-"+n.substr(1)}).replace(/:animating/g,Nc),s]}(n.selector),l=(0,Te.Z)(u,2),f=l[0],m=l[1];r.currentQuerySelector=a.length?a+" "+f:f,Ro(r.collectedStyles,r.currentQuerySelector,{});var b=Oo(this,_h(n.animation),r);return r.currentQuery=null,r.currentQuerySelector=a,{type:11,selector:f,limit:o.limit||0,optional:!!o.optional,includeSelf:m,animation:b,originalSelector:n.selector,options:Ru(n.options)}}},{key:"visitStagger",value:function(n,r){r.currentQuery||r.errors.push("stagger() can only be used inside of query()");var a="full"===n.timings?{duration:0,delay:0,easing:"full"}:yv(n.timings,r.errors,!0);return{type:12,animation:Oo(this,_h(n.animation),r),timings:a,options:null}}}]),i}(),Bg=function i(s){(0,M.Z)(this,i),this.errors=s,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function vp(i){return!Array.isArray(i)&&"object"==typeof i}function Ru(i){return i?(i=lp(i)).params&&(i.params=function(i){return i?lp(i):null}(i.params)):i={},i}function $l(i,s,n){return{duration:i,delay:s,easing:n}}function ed(i,s,n,r,a,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{type:1,element:i,keyframes:s,preStyleProps:n,postStyleProps:r,duration:a,delay:o,totalTime:a+o,easing:u,subTimeline:l}}var Xl=function(){function i(){(0,M.Z)(this,i),this._map=new Map}return(0,R.Z)(i,[{key:"consume",value:function(n){var r=this._map.get(n);return r?this._map.delete(n):r=[],r}},{key:"append",value:function(n,r){var a,o=this._map.get(n);o||this._map.set(n,o=[]),(a=o).push.apply(a,(0,Kr.Z)(r))}},{key:"has",value:function(n){return this._map.has(n)}},{key:"clear",value:function(){this._map.clear()}}]),i}(),Ug=new RegExp(":enter","g"),m0=new RegExp(":leave","g");function g0(i,s,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=arguments.length>7?arguments[7]:void 0,f=arguments.length>8?arguments[8]:void 0,m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];return(new wk).buildKeyframes(i,s,n,r,a,o,u,l,f,m)}var wk=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"buildKeyframes",value:function(n,r,a,o,u,l,f,m,b){var w=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];b=b||new Xl;var C=new gp(n,r,b,o,u,w,[]);C.options=m,C.currentTimeline.setStyles([l],null,C.errors,m),Oo(this,a,C);var T=C.timelines.filter(function(Z){return Z.containsAnimation()});if(T.length&&Object.keys(f).length){var I=T[T.length-1];I.allowOnlyTimelineStyles()||I.setStyles([f],null,C.errors,m)}return T.length?T.map(function(Z){return Z.buildKeyframes()}):[ed(r,[],[],[],0,0,"",!1)]}},{key:"visitTrigger",value:function(n,r){}},{key:"visitState",value:function(n,r){}},{key:"visitTransition",value:function(n,r){}},{key:"visitAnimateChild",value:function(n,r){var a=r.subInstructions.consume(r.element);if(a){var o=r.createSubContext(n.options),u=r.currentTimeline.currentTime,l=this._visitSubInstructions(a,o,o.options);u!=l&&r.transformIntoNewTimeline(l)}r.previousNode=n}},{key:"visitAnimateRef",value:function(n,r){var a=r.createSubContext(n.options);a.transformIntoNewTimeline(),this.visitReference(n.animation,a),r.transformIntoNewTimeline(a.currentTimeline.currentTime),r.previousNode=n}},{key:"_visitSubInstructions",value:function(n,r,a){var u=r.currentTimeline.currentTime,l=null!=a.duration?Pu(a.duration):null,f=null!=a.delay?Pu(a.delay):null;return 0!==l&&n.forEach(function(m){var b=r.appendInstructionToTimeline(m,l,f);u=Math.max(u,b.duration+b.delay)}),u}},{key:"visitReference",value:function(n,r){r.updateOptions(n.options,!0),Oo(this,n.animation,r),r.previousNode=n}},{key:"visitSequence",value:function(n,r){var a=this,o=r.subContextCount,u=r,l=n.options;if(l&&(l.params||l.delay)&&((u=r.createSubContext(l)).transformIntoNewTimeline(),null!=l.delay)){6==u.previousNode.type&&(u.currentTimeline.snapshotCurrentStyles(),u.previousNode=Zc);var f=Pu(l.delay);u.delayNextStep(f)}n.steps.length&&(n.steps.forEach(function(m){return Oo(a,m,u)}),u.currentTimeline.applyStylesToKeyframe(),u.subContextCount>o&&u.transformIntoNewTimeline()),r.previousNode=n}},{key:"visitGroup",value:function(n,r){var a=this,o=[],u=r.currentTimeline.currentTime,l=n.options&&n.options.delay?Pu(n.options.delay):0;n.steps.forEach(function(f){var m=r.createSubContext(n.options);l&&m.delayNextStep(l),Oo(a,f,m),u=Math.max(u,m.currentTimeline.currentTime),o.push(m.currentTimeline)}),o.forEach(function(f){return r.currentTimeline.mergeTimelineCollectedStyles(f)}),r.transformIntoNewTimeline(u),r.previousNode=n}},{key:"_visitTiming",value:function(n,r){if(n.dynamic){var a=n.strValue;return yv(r.params?Kf(a,r.params,r.errors):a,r.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}},{key:"visitAnimate",value:function(n,r){var a=r.currentAnimateTimings=this._visitTiming(n.timings,r),o=r.currentTimeline;a.delay&&(r.incrementTime(a.delay),o.snapshotCurrentStyles());var u=n.style;5==u.type?this.visitKeyframes(u,r):(r.incrementTime(a.duration),this.visitStyle(u,r),o.applyStylesToKeyframe()),r.currentAnimateTimings=null,r.previousNode=n}},{key:"visitStyle",value:function(n,r){var a=r.currentTimeline,o=r.currentAnimateTimings;!o&&a.getCurrentStyleProperties().length&&a.forwardFrame();var u=o&&o.easing||n.easing;n.isEmptyStep?a.applyEmptyStep(u):a.setStyles(n.styles,u,r.errors,r.options),r.previousNode=n}},{key:"visitKeyframes",value:function(n,r){var a=r.currentAnimateTimings,o=r.currentTimeline.duration,u=a.duration,f=r.createSubContext().currentTimeline;f.easing=a.easing,n.styles.forEach(function(m){f.forwardTime((m.offset||0)*u),f.setStyles(m.styles,m.easing,r.errors,r.options),f.applyStylesToKeyframe()}),r.currentTimeline.mergeTimelineCollectedStyles(f),r.transformIntoNewTimeline(o+u),r.previousNode=n}},{key:"visitQuery",value:function(n,r){var a=this,o=r.currentTimeline.currentTime,u=n.options||{},l=u.delay?Pu(u.delay):0;l&&(6===r.previousNode.type||0==o&&r.currentTimeline.getCurrentStyleProperties().length)&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Zc);var f=o,m=r.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!u.optional,r.errors);r.currentQueryTotal=m.length;var b=null;m.forEach(function(w,C){r.currentQueryIndex=C;var T=r.createSubContext(n.options,w);l&&T.delayNextStep(l),w===r.element&&(b=T.currentTimeline),Oo(a,n.animation,T),T.currentTimeline.applyStylesToKeyframe(),f=Math.max(f,T.currentTimeline.currentTime)}),r.currentQueryIndex=0,r.currentQueryTotal=0,r.transformIntoNewTimeline(f),b&&(r.currentTimeline.mergeTimelineCollectedStyles(b),r.currentTimeline.snapshotCurrentStyles()),r.previousNode=n}},{key:"visitStagger",value:function(n,r){var a=r.parentContext,o=r.currentTimeline,u=n.timings,l=Math.abs(u.duration),f=l*(r.currentQueryTotal-1),m=l*r.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":m=f-m;break;case"full":m=a.currentStaggerTime}var w=r.currentTimeline;m&&w.delayNextStep(m);var C=w.currentTime;Oo(this,n.animation,r),r.previousNode=n,a.currentStaggerTime=o.currentTime-C+(o.startTime-a.currentTimeline.startTime)}}]),i}(),Zc={},gp=function(){function i(s,n,r,a,o,u,l,f){(0,M.Z)(this,i),this._driver=s,this.element=n,this.subInstructions=r,this._enterClassName=a,this._leaveClassName=o,this.errors=u,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new y0(this._driver,n,0),l.push(this.currentTimeline)}return(0,R.Z)(i,[{key:"params",get:function(){return this.options.params}},{key:"updateOptions",value:function(n,r){var a=this;if(n){var o=n,u=this.options;null!=o.duration&&(u.duration=Pu(o.duration)),null!=o.delay&&(u.delay=Pu(o.delay));var l=o.params;if(l){var f=u.params;f||(f=this.options.params={}),Object.keys(l).forEach(function(m){(!r||!f.hasOwnProperty(m))&&(f[m]=Kf(l[m],f,a.errors))})}}}},{key:"_copyOptions",value:function(){var n={};if(this.options){var r=this.options.params;if(r){var a=n.params={};Object.keys(r).forEach(function(o){a[o]=r[o]})}}return n}},{key:"createSubContext",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=r||this.element,u=new i(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,a||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(n),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}},{key:"transformIntoNewTimeline",value:function(n){return this.previousNode=Zc,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}},{key:"appendInstructionToTimeline",value:function(n,r,a){var o={duration:null!=r?r:n.duration,delay:this.currentTimeline.currentTime+(null!=a?a:0)+n.delay,easing:""},u=new _0(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,o,n.stretchStartingKeyframe);return this.timelines.push(u),o}},{key:"incrementTime",value:function(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}},{key:"delayNextStep",value:function(n){n>0&&this.currentTimeline.delayNextStep(n)}},{key:"invokeQuery",value:function(n,r,a,o,u,l){var f=[];if(o&&f.push(this.element),n.length>0){n=(n=n.replace(Ug,"."+this._enterClassName)).replace(m0,"."+this._leaveClassName);var b=this._driver.query(this.element,n,1!=a);0!==a&&(b=a<0?b.slice(b.length+a,b.length):b.slice(0,a)),f.push.apply(f,(0,Kr.Z)(b))}return!u&&0==f.length&&l.push('`query("'.concat(r,'")` returned zero elements. (Use `query("').concat(r,'", { optional: true })` if you wish to allow this.)')),f}}]),i}(),y0=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._driver=s,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}return(0,R.Z)(i,[{key:"containsAnimation",value:function(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}},{key:"getCurrentStyleProperties",value:function(){return Object.keys(this._currentKeyframe)}},{key:"currentTime",get:function(){return this.startTime+this.duration}},{key:"delayNextStep",value:function(n){var r=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||r?(this.forwardTime(this.currentTime+n),r&&this.snapshotCurrentStyles()):this.startTime+=n}},{key:"fork",value:function(n,r){return this.applyStylesToKeyframe(),new i(this._driver,n,r||this.currentTime,this._elementTimelineStylesLookup)}},{key:"_loadKeyframe",value:function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}},{key:"forwardFrame",value:function(){this.duration+=1,this._loadKeyframe()}},{key:"forwardTime",value:function(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}},{key:"_updateStyle",value:function(n,r){this._localTimelineStyles[n]=r,this._globalTimelineStyles[n]=r,this._styleSummary[n]={time:this.currentTime,value:r}}},{key:"allowOnlyTimelineStyles",value:function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}},{key:"applyEmptyStep",value:function(n){var r=this;n&&(this._previousKeyframe.easing=n),Object.keys(this._globalTimelineStyles).forEach(function(a){r._backFill[a]=r._globalTimelineStyles[a]||da,r._currentKeyframe[a]=da}),this._currentEmptyStepKeyframe=this._currentKeyframe}},{key:"setStyles",value:function(n,r,a,o){var u=this;r&&(this._previousKeyframe.easing=r);var l=o&&o.params||{},f=function(i,s){var r,n={};return i.forEach(function(a){"*"===a?(r=r||Object.keys(s)).forEach(function(o){n[o]=da}):Kl(a,!1,n)}),n}(n,this._globalTimelineStyles);Object.keys(f).forEach(function(m){var b=Kf(f[m],l,a);u._pendingStyles[m]=b,u._localTimelineStyles.hasOwnProperty(m)||(u._backFill[m]=u._globalTimelineStyles.hasOwnProperty(m)?u._globalTimelineStyles[m]:da),u._updateStyle(m,b)})}},{key:"applyStylesToKeyframe",value:function(){var n=this,r=this._pendingStyles,a=Object.keys(r);0!=a.length&&(this._pendingStyles={},a.forEach(function(o){n._currentKeyframe[o]=r[o]}),Object.keys(this._localTimelineStyles).forEach(function(o){n._currentKeyframe.hasOwnProperty(o)||(n._currentKeyframe[o]=n._localTimelineStyles[o])}))}},{key:"snapshotCurrentStyles",value:function(){var n=this;Object.keys(this._localTimelineStyles).forEach(function(r){var a=n._localTimelineStyles[r];n._pendingStyles[r]=a,n._updateStyle(r,a)})}},{key:"getFinalKeyframe",value:function(){return this._keyframes.get(this.duration)}},{key:"properties",get:function(){var n=[];for(var r in this._currentKeyframe)n.push(r);return n}},{key:"mergeTimelineCollectedStyles",value:function(n){var r=this;Object.keys(n._styleSummary).forEach(function(a){var o=r._styleSummary[a],u=n._styleSummary[a];(!o||u.time>o.time)&&r._updateStyle(a,u.value)})}},{key:"buildKeyframes",value:function(){var n=this;this.applyStylesToKeyframe();var r=new Set,a=new Set,o=1===this._keyframes.size&&0===this.duration,u=[];this._keyframes.forEach(function(w,C){var T=Kl(w,!0);Object.keys(T).forEach(function(I){var Z=T[I];"!"==Z?r.add(I):Z==da&&a.add(I)}),o||(T.offset=C/n.duration),u.push(T)});var l=r.size?hp(r.values()):[],f=a.size?hp(a.values()):[];if(o){var m=u[0],b=lp(m);m.offset=0,b.offset=1,u=[m,b]}return ed(this.element,u,l,f,this.duration,this.startTime,this.easing,!1)}}]),i}(),_0=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f){var m,b=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return(0,M.Z)(this,n),(m=s.call(this,r,a,f.delay)).keyframes=o,m.preStyleProps=u,m.postStyleProps=l,m._stretchStartingKeyframe=b,m.timings={duration:f.duration,delay:f.delay,easing:f.easing},m}return(0,R.Z)(n,[{key:"containsAnimation",value:function(){return this.keyframes.length>1}},{key:"buildKeyframes",value:function(){var a=this.keyframes,o=this.timings,u=o.delay,l=o.duration,f=o.easing;if(this._stretchStartingKeyframe&&u){var m=[],b=l+u,w=u/b,C=Kl(a[0],!1);C.offset=0,m.push(C);var T=Kl(a[0],!1);T.offset=Vg(w),m.push(T);for(var I=a.length-1,Z=1;Z<=I;Z++){var Y=Kl(a[Z],!1);Y.offset=Vg((u+Y.offset*l)/b),m.push(Y)}l=b,u=0,f="",a=m}return ed(this.element,a,this.preStyleProps,this.postStyleProps,l,u,f,!0)}}]),n}(y0);function Vg(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Math.pow(10,s-1);return Math.round(i*n)/n}var zg=function i(){(0,M.Z)(this,i)},b0=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"normalizePropertyName",value:function(a,o){return dp(a)}},{key:"normalizeStyleValue",value:function(a,o,u,l){var f="",m=u.toString().trim();if(Hg[o]&&0!==u&&"0"!==u)if("number"==typeof u)f="px";else{var b=u.match(/^[+-]?[\d\.]+([a-z]*)$/);b&&0==b[1].length&&l.push("Please provide a CSS unit value for ".concat(a,":").concat(u))}return m+f}}]),n}(zg),Hg=function(){return i="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),s={},i.forEach(function(n){return s[n]=!0}),s;var i,s}();function w0(i,s,n,r,a,o,u,l,f,m,b,w,C){return{type:0,element:i,triggerName:s,isRemovalTransition:a,fromState:n,fromStyles:o,toState:r,toStyles:u,timelines:l,queriedElements:f,preStyleProps:m,postStyleProps:b,totalTime:w,errors:C}}var yp={},kk=function(){function i(s,n,r){(0,M.Z)(this,i),this._triggerName=s,this.ast=n,this._stateStyles=r}return(0,R.Z)(i,[{key:"match",value:function(n,r,a,o){return function(i,s,n,r,a){return i.some(function(o){return o(s,n,r,a)})}(this.ast.matchers,n,r,a,o)}},{key:"buildStyles",value:function(n,r,a){var o=this._stateStyles["*"],u=this._stateStyles[n],l=o?o.buildStyles(r,a):{};return u?u.buildStyles(r,a):l}},{key:"build",value:function(n,r,a,o,u,l,f,m,b,w){var C=[],T=this.ast.options&&this.ast.options.params||yp,Z=this.buildStyles(a,f&&f.params||yp,C),Y=m&&m.params||yp,V=this.buildStyles(o,Y,C),W=new Set,se=new Map,fe=new Map,ve="void"===o,me={params:Object.assign(Object.assign({},T),Y)},pe=w?[]:g0(n,r,this.ast.animation,u,l,Z,V,me,b,C),ke=0;if(pe.forEach(function(qe){ke=Math.max(qe.duration+qe.delay,ke)}),C.length)return w0(r,this._triggerName,a,o,ve,Z,V,[],[],se,fe,ke,C);pe.forEach(function(qe){var Ze=qe.element,ct=Ro(se,Ze,{});qe.preStyleProps.forEach(function(ht){return ct[ht]=!0});var rt=Ro(fe,Ze,{});qe.postStyleProps.forEach(function(ht){return rt[ht]=!0}),Ze!==r&&W.add(Ze)});var je=hp(W.values());return w0(r,this._triggerName,a,o,ve,Z,V,pe,je,se,fe,ke)}}]),i}(),Gg=function(){function i(s,n,r){(0,M.Z)(this,i),this.styles=s,this.defaultParams=n,this.normalizer=r}return(0,R.Z)(i,[{key:"buildStyles",value:function(n,r){var a=this,o={},u=lp(this.defaultParams);return Object.keys(n).forEach(function(l){var f=n[l];null!=f&&(u[l]=f)}),this.styles.styles.forEach(function(l){if("string"!=typeof l){var f=l;Object.keys(f).forEach(function(m){var b=f[m];b.length>1&&(b=Kf(b,u,r));var w=a.normalizer.normalizePropertyName(m,r);b=a.normalizer.normalizeStyleValue(m,w,b,r),o[w]=b})}}),o}}]),i}(),E0=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.name=s,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states={},n.states.forEach(function(o){a.states[o.name]=new Gg(o.style,o.options&&o.options.params||{},r)}),Eh(this.states,"true","1"),Eh(this.states,"false","0"),n.transitions.forEach(function(o){a.transitionFactories.push(new kk(s,o,a.states))}),this.fallbackTransition=function(i,s,n){return new kk(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(u,l){return!0}],options:null,queryCount:0,depCount:0},s)}(s,this.states)}return(0,R.Z)(i,[{key:"containsQueries",get:function(){return this.ast.queryCount>0}},{key:"matchTransition",value:function(n,r,a,o){return this.transitionFactories.find(function(l){return l.match(n,r,a,o)})||null}},{key:"matchStyles",value:function(n,r,a){return this.fallbackTransition.buildStyles(n,r,a)}}]),i}();function Eh(i,s,n){i.hasOwnProperty(s)?i.hasOwnProperty(n)||(i[n]=i[s]):i.hasOwnProperty(n)&&(i[s]=i[n])}var Ck=new Xl,Dk=function(){function i(s,n,r){(0,M.Z)(this,i),this.bodyNode=s,this._driver=n,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}return(0,R.Z)(i,[{key:"register",value:function(n,r){var a=[],o=vs(this._driver,r,a);if(a.length)throw new Error("Unable to build the animation due to the following errors: ".concat(a.join("\n")));this._animations[n]=o}},{key:"_buildPlayer",value:function(n,r,a){var o=n.element,u=pv(this._driver,this._normalizer,o,n.keyframes,r,a);return this._driver.animate(o,u,n.duration,n.delay,n.easing,[],!0)}},{key:"create",value:function(n,r){var f,a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=[],l=this._animations[n],m=new Map;if(l?(f=g0(this._driver,r,l,Yl,yh,{},{},o,Ck,u)).forEach(function(C){var T=Ro(m,C.element,{});C.postStyleProps.forEach(function(I){return T[I]=null})}):(u.push("The requested animation doesn't exist or has already been destroyed"),f=[]),u.length)throw new Error("Unable to create the animation due to the following errors: ".concat(u.join("\n")));m.forEach(function(C,T){Object.keys(C).forEach(function(I){C[I]=a._driver.computeStyle(T,I,da)})});var b=f.map(function(C){var T=m.get(C.element);return a._buildPlayer(C,{},T)}),w=_c(b);return this._playersById[n]=w,w.onDestroy(function(){return a.destroy(n)}),this.players.push(w),w}},{key:"destroy",value:function(n){var r=this._getPlayer(n);r.destroy(),delete this._playersById[n];var a=this.players.indexOf(r);a>=0&&this.players.splice(a,1)}},{key:"_getPlayer",value:function(n){var r=this._playersById[n];if(!r)throw new Error("Unable to find the timeline player referenced by ".concat(n));return r}},{key:"listen",value:function(n,r,a,o){var u=mh(r,"","","");return ql(this._getPlayer(n),a,u,o),function(){}}},{key:"command",value:function(n,r,a,o){if("register"!=a)if("create"!=a){var l=this._getPlayer(n);switch(a){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(n)}}else this.create(n,r,o[0]||{});else this.register(n,o[0])}}]),i}(),C0="ng-animate-queued",D0="ng-animate-disabled",Bc=".ng-animate-disabled",z="ng-star-inserted",U=[],H={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},O={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},X="__ng_removed",re=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,M.Z)(this,i),this.namespaceId=n;var r=s&&s.hasOwnProperty("value"),a=r?s.value:s;if(this.value=Pn(a),r){var o=lp(s);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}return(0,R.Z)(i,[{key:"params",get:function(){return this.options.params}},{key:"absorbOptions",value:function(n){var r=n.params;if(r){var a=this.options.params;Object.keys(r).forEach(function(o){null==a[o]&&(a[o]=r[o])})}}}]),i}(),ue="void",ge=new re(ue),Fe=function(){function i(s,n,r){(0,M.Z)(this,i),this.id=s,this.hostElement=n,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+s,no(n,this._hostClassName)}return(0,R.Z)(i,[{key:"listen",value:function(n,r,a,o){var u=this;if(!this._triggers.hasOwnProperty(r))throw new Error('Unable to listen on the animation trigger event "'.concat(a,'" because the animation trigger "').concat(r,"\" doesn't exist!"));if(null==a||0==a.length)throw new Error('Unable to listen on the animation trigger "'.concat(r,'" because the provided event is undefined!'));if(!function(i){return"start"==i||"done"==i}(a))throw new Error('The provided animation trigger event "'.concat(a,'" for the animation trigger "').concat(r,'" is not supported!'));var l=Ro(this._elementListeners,n,[]),f={name:r,phase:a,callback:o};l.push(f);var m=Ro(this._engine.statesByElement,n,{});return m.hasOwnProperty(r)||(no(n,gu),no(n,gu+"-"+r),m[r]=ge),function(){u._engine.afterFlush(function(){var b=l.indexOf(f);b>=0&&l.splice(b,1),u._triggers[r]||delete m[r]})}}},{key:"register",value:function(n,r){return!this._triggers[n]&&(this._triggers[n]=r,!0)}},{key:"_getTrigger",value:function(n){var r=this._triggers[n];if(!r)throw new Error('The provided animation trigger "'.concat(n,'" has not been registered!'));return r}},{key:"trigger",value:function(n,r,a){var o=this,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=this._getTrigger(r),f=new Pt(this.id,r,n),m=this._engine.statesByElement.get(n);m||(no(n,gu),no(n,gu+"-"+r),this._engine.statesByElement.set(n,m={}));var b=m[r],w=new re(a,this.id),C=a&&a.hasOwnProperty("value");!C&&b&&w.absorbOptions(b.options),m[r]=w,b||(b=ge);var T=w.value===ue;if(T||b.value!==w.value){var V=Ro(this._engine.playersByElement,n,[]);V.forEach(function(fe){fe.namespaceId==o.id&&fe.triggerName==r&&fe.queued&&fe.destroy()});var W=l.matchTransition(b.value,w.value,n,w.params),se=!1;if(!W){if(!u)return;W=l.fallbackTransition,se=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:r,transition:W,fromState:b,toState:w,player:f,isFallbackTransition:se}),se||(no(n,C0),f.onStart(function(){tl(n,C0)})),f.onDone(function(){var fe=o.players.indexOf(f);fe>=0&&o.players.splice(fe,1);var ve=o._engine.playersByElement.get(n);if(ve){var me=ve.indexOf(f);me>=0&&ve.splice(me,1)}}),this.players.push(f),V.push(f),f}if(!bp(b.params,w.params)){var I=[],Z=l.matchStyles(b.value,b.params,I),Y=l.matchStyles(w.value,w.params,I);I.length?this._engine.reportError(I):this._engine.afterFlush(function(){Yf(n,Z),_u(n,Y)})}}},{key:"deregister",value:function(n){var r=this;delete this._triggers[n],this._engine.statesByElement.forEach(function(a,o){delete a[n]}),this._elementListeners.forEach(function(a,o){r._elementListeners.set(o,a.filter(function(u){return u.name!=n}))})}},{key:"clearElementCache",value:function(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);var r=this._engine.playersByElement.get(n);r&&(r.forEach(function(a){return a.destroy()}),this._engine.playersByElement.delete(n))}},{key:"_signalRemovalForInnerTriggers",value:function(n,r){var a=this,o=this._engine.driver.query(n,yu,!0);o.forEach(function(u){if(!u[X]){var l=a._engine.fetchNamespacesByElement(u);l.size?l.forEach(function(f){return f.triggerLeaveAnimation(u,r,!1,!0)}):a.clearElementCache(u)}}),this._engine.afterFlushAnimationsDone(function(){return o.forEach(function(u){return a.clearElementCache(u)})})}},{key:"triggerLeaveAnimation",value:function(n,r,a,o){var u=this,l=this._engine.statesByElement.get(n);if(l){var f=[];if(Object.keys(l).forEach(function(m){if(u._triggers[m]){var b=u.trigger(n,m,ue,o);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,n,!0,r),a&&_c(f).onDone(function(){return u._engine.processLeaveNode(n)}),!0}return!1}},{key:"prepareLeaveAnimationListeners",value:function(n){var r=this,a=this._elementListeners.get(n),o=this._engine.statesByElement.get(n);if(a&&o){var u=new Set;a.forEach(function(l){var f=l.name;if(!u.has(f)){u.add(f);var b=r._triggers[f].fallbackTransition,w=o[f]||ge,C=new re(ue),T=new Pt(r.id,f,n);r._engine.totalQueuedPlayers++,r._queue.push({element:n,triggerName:f,transition:b,fromState:w,toState:C,player:T,isFallbackTransition:!0})}})}}},{key:"removeNode",value:function(n,r){var a=this,o=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,r),!this.triggerLeaveAnimation(n,r,!0)){var u=!1;if(o.totalAnimations){var l=o.players.length?o.playersByQueriedElement.get(n):[];if(l&&l.length)u=!0;else for(var f=n;f=f.parentNode;)if(o.statesByElement.get(f)){u=!0;break}}if(this.prepareLeaveAnimationListeners(n),u)o.markElementAsRemoved(this.id,n,!1,r);else{var b=n[X];(!b||b===H)&&(o.afterFlush(function(){return a.clearElementCache(n)}),o.destroyInnerAnimations(n),o._onRemovalComplete(n,r))}}}},{key:"insertNode",value:function(n,r){no(n,this._hostClassName)}},{key:"drainQueuedTransitions",value:function(n){var r=this,a=[];return this._queue.forEach(function(o){var u=o.player;if(!u.destroyed){var l=o.element,f=r._elementListeners.get(l);f&&f.forEach(function(m){if(m.name==o.triggerName){var b=mh(l,o.triggerName,o.fromState.value,o.toState.value);b._data=n,ql(o.player,m.phase,b,m.callback)}}),u.markedForDestroy?r._engine.afterFlush(function(){u.destroy()}):a.push(o)}}),this._queue=[],a.sort(function(o,u){var l=o.transition.ast.depCount,f=u.transition.ast.depCount;return 0==l||0==f?l-f:r._engine.driver.containsElement(o.element,u.element)?1:-1})}},{key:"destroy",value:function(n){this.players.forEach(function(r){return r.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,n)}},{key:"elementContainsData",value:function(n){var r=!1;return this._elementListeners.has(n)&&(r=!0),!!this._queue.find(function(a){return a.element===n})||r}}]),i}(),St=function(){function i(s,n,r){(0,M.Z)(this,i),this.bodyNode=s,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(a,o){}}return(0,R.Z)(i,[{key:"_onRemovalComplete",value:function(n,r){this.onRemovalComplete(n,r)}},{key:"queuedPlayers",get:function(){var n=[];return this._namespaceList.forEach(function(r){r.players.forEach(function(a){a.queued&&n.push(a)})}),n}},{key:"createNamespace",value:function(n,r){var a=new Fe(n,r,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,r)?this._balanceNamespaceList(a,r):(this.newHostElements.set(r,a),this.collectEnterElement(r)),this._namespaceLookup[n]=a}},{key:"_balanceNamespaceList",value:function(n,r){var a=this._namespaceList.length-1;if(a>=0){for(var o=!1,u=a;u>=0;u--)if(this.driver.containsElement(this._namespaceList[u].hostElement,r)){this._namespaceList.splice(u+1,0,n),o=!0;break}o||this._namespaceList.splice(0,0,n)}else this._namespaceList.push(n);return this.namespacesByHostElement.set(r,n),n}},{key:"register",value:function(n,r){var a=this._namespaceLookup[n];return a||(a=this.createNamespace(n,r)),a}},{key:"registerTrigger",value:function(n,r,a){var o=this._namespaceLookup[n];o&&o.register(r,a)&&this.totalAnimations++}},{key:"destroy",value:function(n,r){var a=this;if(n){var o=this._fetchNamespace(n);this.afterFlush(function(){a.namespacesByHostElement.delete(o.hostElement),delete a._namespaceLookup[n];var u=a._namespaceList.indexOf(o);u>=0&&a._namespaceList.splice(u,1)}),this.afterFlushAnimationsDone(function(){return o.destroy(r)})}}},{key:"_fetchNamespace",value:function(n){return this._namespaceLookup[n]}},{key:"fetchNamespacesByElement",value:function(n){var r=new Set,a=this.statesByElement.get(n);if(a)for(var o=Object.keys(a),u=0;u<o.length;u++){var l=a[o[u]].namespaceId;if(l){var f=this._fetchNamespace(l);f&&r.add(f)}}return r}},{key:"trigger",value:function(n,r,a,o){if(Fn(r)){var u=this._fetchNamespace(n);if(u)return u.trigger(r,a,o),!0}return!1}},{key:"insertNode",value:function(n,r,a,o){if(Fn(r)){var u=r[X];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;var l=this.collectedLeaveElements.indexOf(r);l>=0&&this.collectedLeaveElements.splice(l,1)}if(n){var f=this._fetchNamespace(n);f&&f.insertNode(r,a)}o&&this.collectEnterElement(r)}}},{key:"collectEnterElement",value:function(n){this.collectedEnterElements.push(n)}},{key:"markElementAsDisabled",value:function(n,r){r?this.disabledNodes.has(n)||(this.disabledNodes.add(n),no(n,D0)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),tl(n,D0))}},{key:"removeNode",value:function(n,r,a,o){if(Fn(r)){var u=n?this._fetchNamespace(n):null;if(u?u.removeNode(r,o):this.markElementAsRemoved(n,r,!1,o),a){var l=this.namespacesByHostElement.get(r);l&&l.id!==n&&l.removeNode(r,o)}}else this._onRemovalComplete(r,o)}},{key:"markElementAsRemoved",value:function(n,r,a,o){this.collectedLeaveElements.push(r),r[X]={namespaceId:n,setForRemoval:o,hasAnimation:a,removedBeforeQueried:!1}}},{key:"listen",value:function(n,r,a,o,u){return Fn(r)?this._fetchNamespace(n).listen(r,a,o,u):function(){}}},{key:"_buildInstruction",value:function(n,r,a,o,u){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,a,o,n.fromState.options,n.toState.options,r,u)}},{key:"destroyInnerAnimations",value:function(n){var r=this,a=this.driver.query(n,yu,!0);a.forEach(function(o){return r.destroyActiveAnimationsForElement(o)}),0!=this.playersByQueriedElement.size&&(a=this.driver.query(n,Nc,!0)).forEach(function(o){return r.finishActiveQueriedAnimationOnElement(o)})}},{key:"destroyActiveAnimationsForElement",value:function(n){var r=this.playersByElement.get(n);r&&r.forEach(function(a){a.queued?a.markedForDestroy=!0:a.destroy()})}},{key:"finishActiveQueriedAnimationOnElement",value:function(n){var r=this.playersByQueriedElement.get(n);r&&r.forEach(function(a){return a.finish()})}},{key:"whenRenderingDone",value:function(){var n=this;return new Promise(function(r){if(n.players.length)return _c(n.players).onDone(function(){return r()});r()})}},{key:"processLeaveNode",value:function(n){var r=this,a=n[X];if(a&&a.setForRemoval){if(n[X]=H,a.namespaceId){this.destroyInnerAnimations(n);var o=this._fetchNamespace(a.namespaceId);o&&o.clearElementCache(n)}this._onRemovalComplete(n,a.setForRemoval)}this.driver.matchesElement(n,Bc)&&this.markElementAsDisabled(n,!1),this.driver.query(n,Bc,!0).forEach(function(u){r.markElementAsDisabled(u,!1)})}},{key:"flush",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(C,T){return n._balanceNamespaceList(C,T)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var o=0;o<this.collectedEnterElements.length;o++){var u=this.collectedEnterElements[o];no(u,z)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var l=[];try{a=this._flushAnimations(l,r)}finally{for(var f=0;f<l.length;f++)l[f]()}}else for(var m=0;m<this.collectedLeaveElements.length;m++){var b=this.collectedLeaveElements[m];this.processLeaveNode(b)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(C){return C()}),this._flushFns=[],this._whenQuietFns.length){var w=this._whenQuietFns;this._whenQuietFns=[],a.length?_c(a).onDone(function(){w.forEach(function(C){return C()})}):w.forEach(function(C){return C()})}}},{key:"reportError",value:function(n){throw new Error("Unable to process animations due to the following failed trigger transitions\n ".concat(n.join("\n")))}},{key:"_flushAnimations",value:function(n,r){var a=this,o=new Xl,u=[],l=new Map,f=[],m=new Map,b=new Map,w=new Map,C=new Set;this.disabledNodes.forEach(function(en){C.add(en);for(var yn=a.driver.query(en,".ng-animate-queued",!0),An=0;An<yn.length;An++)C.add(yn[An])});var T=this.bodyNode,I=Array.from(this.statesByElement.keys()),Z=Al(I,this.collectedEnterElements),Y=new Map,V=0;Z.forEach(function(en,yn){var An=Yl+V++;Y.set(yn,An),en.forEach(function(Vr){return no(Vr,An)})});for(var W=[],se=new Set,fe=new Set,ve=0;ve<this.collectedLeaveElements.length;ve++){var me=this.collectedLeaveElements[ve],pe=me[X];pe&&pe.setForRemoval&&(W.push(me),se.add(me),pe.hasAnimation?this.driver.query(me,".ng-star-inserted",!0).forEach(function(en){return se.add(en)}):fe.add(me))}var ke=new Map,je=Al(I,Array.from(se));je.forEach(function(en,yn){var An=yh+V++;ke.set(yn,An),en.forEach(function(Vr){return no(Vr,An)})}),n.push(function(){Z.forEach(function(en,yn){var An=Y.get(yn);en.forEach(function(Vr){return tl(Vr,An)})}),je.forEach(function(en,yn){var An=ke.get(yn);en.forEach(function(Vr){return tl(Vr,An)})}),W.forEach(function(en){a.processLeaveNode(en)})});for(var qe=[],Ze=[],ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(r).forEach(function(en){var yn=en.player,An=en.element;if(qe.push(yn),a.collectedEnterElements.length){var Vr=An[X];if(Vr&&Vr.setForMove)return void yn.destroy()}var Pi=!T||!a.driver.containsElement(T,An),ba=ke.get(An),st=Y.get(An),Ge=a._buildInstruction(en,o,st,ba,Pi);if(Ge.errors&&Ge.errors.length)Ze.push(Ge);else{if(Pi)return yn.onStart(function(){return Yf(An,Ge.fromStyles)}),yn.onDestroy(function(){return _u(An,Ge.toStyles)}),void u.push(yn);if(en.isFallbackTransition)return yn.onStart(function(){return Yf(An,Ge.fromStyles)}),yn.onDestroy(function(){return _u(An,Ge.toStyles)}),void u.push(yn);Ge.timelines.forEach(function(Ln){return Ln.stretchStartingKeyframe=!0}),o.append(An,Ge.timelines),f.push({instruction:Ge,player:yn,element:An}),Ge.queriedElements.forEach(function(Ln){return Ro(m,Ln,[]).push(yn)}),Ge.preStyleProps.forEach(function(Ln,Kn){var ar=Object.keys(Ln);if(ar.length){var Mr=b.get(Kn);Mr||b.set(Kn,Mr=new Set),ar.forEach(function(Cr){return Mr.add(Cr)})}}),Ge.postStyleProps.forEach(function(Ln,Kn){var ar=Object.keys(Ln),Mr=w.get(Kn);Mr||w.set(Kn,Mr=new Set),ar.forEach(function(Cr){return Mr.add(Cr)})})}});if(Ze.length){var ht=[];Ze.forEach(function(en){ht.push("@".concat(en.triggerName," has failed due to:\n")),en.errors.forEach(function(yn){return ht.push("- ".concat(yn,"\n"))})}),qe.forEach(function(en){return en.destroy()}),this.reportError(ht)}var It=new Map,_t=new Map;f.forEach(function(en){var yn=en.element;o.has(yn)&&(_t.set(yn,yn),a._beforeAnimationBuild(en.player.namespaceId,en.instruction,It))}),u.forEach(function(en){var yn=en.element;a._getPreviousPlayers(yn,!1,en.namespaceId,en.triggerName,null).forEach(function(Vr){Ro(It,yn,[]).push(Vr),Vr.destroy()})});var Zt=W.filter(function(en){return S0(en,b,w)}),ln=new Map;pa(ln,this.driver,fe,w,da).forEach(function(en){S0(en,b,w)&&Zt.push(en)});var kn=new Map;Z.forEach(function(en,yn){pa(kn,a.driver,new Set(en),b,"!")}),Zt.forEach(function(en){var yn=ln.get(en),An=kn.get(en);ln.set(en,Object.assign(Object.assign({},yn),An))});var dn=[],gn=[],Hn={};f.forEach(function(en){var yn=en.element,An=en.player,Vr=en.instruction;if(o.has(yn)){if(C.has(yn))return An.onDestroy(function(){return _u(yn,Vr.toStyles)}),An.disabled=!0,An.overrideTotalTime(Vr.totalTime),void u.push(An);var Pi=Hn;if(_t.size>1){for(var ba=yn,st=[];ba=ba.parentNode;){var Ge=_t.get(ba);if(Ge){Pi=Ge;break}st.push(ba)}st.forEach(function(Kn){return _t.set(Kn,Pi)})}var hn=a._buildAnimation(An.namespaceId,Vr,It,l,kn,ln);if(An.setRealPlayer(hn),Pi===Hn)dn.push(An);else{var Ln=a.playersByElement.get(Pi);Ln&&Ln.length&&(An.parentPlayer=_c(Ln)),u.push(An)}}else Yf(yn,Vr.fromStyles),An.onDestroy(function(){return _u(yn,Vr.toStyles)}),gn.push(An),C.has(yn)&&u.push(An)}),gn.forEach(function(en){var yn=l.get(en.element);if(yn&&yn.length){var An=_c(yn);en.setRealPlayer(An)}}),u.forEach(function(en){en.parentPlayer?en.syncPlayerEvents(en.parentPlayer):en.destroy()});for(var Ur=0;Ur<W.length;Ur++){var Qn=W[Ur],ft=Qn[X];if(tl(Qn,yh),!ft||!ft.hasAnimation){var bn=[];if(m.size){var Jn=m.get(Qn);Jn&&Jn.length&&bn.push.apply(bn,(0,Kr.Z)(Jn));for(var _n=this.driver.query(Qn,Nc,!0),Yn=0;Yn<_n.length;Yn++){var Gn=m.get(_n[Yn]);Gn&&Gn.length&&bn.push.apply(bn,(0,Kr.Z)(Gn))}}var Vn=bn.filter(function(en){return!en.destroyed});Vn.length?_p(this,Qn,Vn):this.processLeaveNode(Qn)}}return W.length=0,dn.forEach(function(en){a.players.push(en),en.onDone(function(){en.destroy();var yn=a.players.indexOf(en);a.players.splice(yn,1)}),en.play()}),dn}},{key:"elementContainsData",value:function(n,r){var a=!1,o=r[X];return o&&o.setForRemoval&&(a=!0),this.playersByElement.has(r)&&(a=!0),this.playersByQueriedElement.has(r)&&(a=!0),this.statesByElement.has(r)&&(a=!0),this._fetchNamespace(n).elementContainsData(r)||a}},{key:"afterFlush",value:function(n){this._flushFns.push(n)}},{key:"afterFlushAnimationsDone",value:function(n){this._whenQuietFns.push(n)}},{key:"_getPreviousPlayers",value:function(n,r,a,o,u){var l=[];if(r){var f=this.playersByQueriedElement.get(n);f&&(l=f)}else{var m=this.playersByElement.get(n);if(m){var b=!u||u==ue;m.forEach(function(w){w.queued||!b&&w.triggerName!=o||l.push(w)})}}return(a||o)&&(l=l.filter(function(w){return!(a&&a!=w.namespaceId||o&&o!=w.triggerName)})),l}},{key:"_beforeAnimationBuild",value:function(n,r,a){var w,o=this,l=r.element,f=r.isRemovalTransition?void 0:n,m=r.isRemovalTransition?void 0:r.triggerName,b=(0,Ve.Z)(r.timelines);try{var C=function(){var Z=w.value.element,Y=Z!==l,V=Ro(a,Z,[]);o._getPreviousPlayers(Z,Y,f,m,r.toState).forEach(function(se){var fe=se.getRealPlayer();fe.beforeDestroy&&fe.beforeDestroy(),se.destroy(),V.push(se)})};for(b.s();!(w=b.n()).done;)C()}catch(T){b.e(T)}finally{b.f()}Yf(l,r.fromStyles)}},{key:"_buildAnimation",value:function(n,r,a,o,u,l){var f=this,m=r.triggerName,b=r.element,w=[],C=new Set,T=new Set,I=r.timelines.map(function(Y){var V=Y.element;C.add(V);var W=V[X];if(W&&W.removedBeforeQueried)return new Sl(Y.duration,Y.delay);var se=V!==b,fe=function(i){var s=[];return kv(i,s),s}((a.get(V)||U).map(function(qe){return qe.getRealPlayer()})).filter(function(qe){return!!qe.element&&qe.element===V}),ve=u.get(V),me=l.get(V),pe=pv(f.driver,f._normalizer,V,Y.keyframes,ve,me),ke=f._buildPlayer(Y,pe,fe);if(Y.subTimeline&&o&&T.add(V),se){var je=new Pt(n,m,V);je.setRealPlayer(ke),w.push(je)}return ke});w.forEach(function(Y){Ro(f.playersByQueriedElement,Y.element,[]).push(Y),Y.onDone(function(){return function(i,s,n){var r;if(i instanceof Map){if(r=i.get(s)){if(r.length){var a=r.indexOf(n);r.splice(a,1)}0==r.length&&i.delete(s)}}else if(r=i[s]){if(r.length){var o=r.indexOf(n);r.splice(o,1)}0==r.length&&delete i[s]}return r}(f.playersByQueriedElement,Y.element,Y)})}),C.forEach(function(Y){return no(Y,jf)});var Z=_c(I);return Z.onDestroy(function(){C.forEach(function(Y){return tl(Y,jf)}),_u(b,r.toStyles)}),T.forEach(function(Y){Ro(o,Y,[]).push(Z)}),Z}},{key:"_buildPlayer",value:function(n,r,a){return r.length>0?this.driver.animate(n.element,r,n.duration,n.delay,n.easing,a):new Sl(n.duration,n.delay)}}]),i}(),Pt=function(){function i(s,n,r){(0,M.Z)(this,i),this.namespaceId=s,this.triggerName=n,this.element=r,this._player=new Sl,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}return(0,R.Z)(i,[{key:"setRealPlayer",value:function(n){var r=this;this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(function(a){r._queuedCallbacks[a].forEach(function(o){return ql(n,a,void 0,o)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}},{key:"getRealPlayer",value:function(){return this._player}},{key:"overrideTotalTime",value:function(n){this.totalTime=n}},{key:"syncPlayerEvents",value:function(n){var r=this,a=this._player;a.triggerCallback&&n.onStart(function(){return a.triggerCallback("start")}),n.onDone(function(){return r.finish()}),n.onDestroy(function(){return r.destroy()})}},{key:"_queueEvent",value:function(n,r){Ro(this._queuedCallbacks,n,[]).push(r)}},{key:"onDone",value:function(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}},{key:"onStart",value:function(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}},{key:"onDestroy",value:function(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}},{key:"init",value:function(){this._player.init()}},{key:"hasStarted",value:function(){return!this.queued&&this._player.hasStarted()}},{key:"play",value:function(){!this.queued&&this._player.play()}},{key:"pause",value:function(){!this.queued&&this._player.pause()}},{key:"restart",value:function(){!this.queued&&this._player.restart()}},{key:"finish",value:function(){this._player.finish()}},{key:"destroy",value:function(){this.destroyed=!0,this._player.destroy()}},{key:"reset",value:function(){!this.queued&&this._player.reset()}},{key:"setPosition",value:function(n){this.queued||this._player.setPosition(n)}},{key:"getPosition",value:function(){return this.queued?0:this._player.getPosition()}},{key:"triggerCallback",value:function(n){var r=this._player;r.triggerCallback&&r.triggerCallback(n)}}]),i}();function Pn(i){return null!=i?i:null}function Fn(i){return i&&1===i.nodeType}function Na(i,s){var n=i.style.display;return i.style.display=null!=s?s:"none",n}function pa(i,s,n,r,a){var o=[];n.forEach(function(f){return o.push(Na(f))});var u=[];r.forEach(function(f,m){var b={};f.forEach(function(w){var C=b[w]=s.computeStyle(m,w,a);(!C||0==C.length)&&(m[X]=O,u.push(m))}),i.set(m,b)});var l=0;return n.forEach(function(f){return Na(f,o[l++])}),u}function Al(i,s){var n=new Map;if(i.forEach(function(l){return n.set(l,[])}),0==s.length)return n;var a=new Set(s),o=new Map;function u(l){if(!l)return 1;var f=o.get(l);if(f)return f;var m=l.parentNode;return f=n.has(m)?m:a.has(m)?1:u(m),o.set(l,f),f}return s.forEach(function(l){var f=u(l);1!==f&&n.get(f).push(l)}),n}var si="$$classes";function no(i,s){if(i.classList)i.classList.add(s);else{var n=i[si];n||(n=i[si]={}),n[s]=!0}}function tl(i,s){if(i.classList)i.classList.remove(s);else{var n=i[si];n&&delete n[s]}}function _p(i,s,n){_c(n).onDone(function(){return i.processLeaveNode(s)})}function kv(i,s){for(var n=0;n<i.length;n++){var r=i[n];r instanceof Hf?kv(r.players,s):s.push(r)}}function bp(i,s){var n=Object.keys(i),r=Object.keys(s);if(n.length!=r.length)return!1;for(var a=0;a<n.length;a++){var o=n[a];if(!s.hasOwnProperty(o)||i[o]!==s[o])return!1}return!0}function S0(i,s,n){var r=n.get(i);if(!r)return!1;var a=s.get(i);return a?r.forEach(function(o){return a.add(o)}):s.set(i,r),n.delete(i),!0}var A0=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.bodyNode=s,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=function(o,u){},this._transitionEngine=new St(s,n,r),this._timelineEngine=new Dk(s,n,r),this._transitionEngine.onRemovalComplete=function(o,u){return a.onRemovalComplete(o,u)}}return(0,R.Z)(i,[{key:"registerTrigger",value:function(n,r,a,o,u){var l=n+"-"+o,f=this._triggerCache[l];if(!f){var m=[],b=vs(this._driver,u,m);if(m.length)throw new Error('The animation trigger "'.concat(o,'" has failed to build due to the following errors:\n - ').concat(m.join("\n - ")));f=function(i,s,n){return new E0(i,s,n)}(o,b,this._normalizer),this._triggerCache[l]=f}this._transitionEngine.registerTrigger(r,o,f)}},{key:"register",value:function(n,r){this._transitionEngine.register(n,r)}},{key:"destroy",value:function(n,r){this._transitionEngine.destroy(n,r)}},{key:"onInsert",value:function(n,r,a,o){this._transitionEngine.insertNode(n,r,a,o)}},{key:"onRemove",value:function(n,r,a,o){this._transitionEngine.removeNode(n,r,o||!1,a)}},{key:"disableAnimations",value:function(n,r){this._transitionEngine.markElementAsDisabled(n,r)}},{key:"process",value:function(n,r,a,o){if("@"==a.charAt(0)){var u=Gf(a),l=(0,Te.Z)(u,2);this._timelineEngine.command(l[0],r,l[1],o)}else this._transitionEngine.trigger(n,r,a,o)}},{key:"listen",value:function(n,r,a,o,u){if("@"==a.charAt(0)){var l=Gf(a),f=(0,Te.Z)(l,2);return this._timelineEngine.listen(f[0],r,f[1],u)}return this._transitionEngine.listen(n,r,a,o,u)}},{key:"flush",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._transitionEngine.flush(n)}},{key:"players",get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)}},{key:"whenRenderingDone",value:function(){return this._transitionEngine.whenRenderingDone()}}]),i}();function Ak(i,s){var n=null,r=null;return Array.isArray(s)&&s.length?(n=Tk(s[0]),s.length>1&&(r=Tk(s[s.length-1]))):s&&(n=Tk(s)),n||r?new xO(i,n,r):null}var xO=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._element=n,this._startStyles=r,this._endStyles=a,this._state=0;var o=s.initialStylesByElement.get(n);o||s.initialStylesByElement.set(n,o={}),this._initialStyles=o}return(0,R.Z)(s,[{key:"start",value:function(){this._state<1&&(this._startStyles&&_u(this._element,this._startStyles,this._initialStyles),this._state=1)}},{key:"finish",value:function(){this.start(),this._state<2&&(_u(this._element,this._initialStyles),this._endStyles&&(_u(this._element,this._endStyles),this._endStyles=null),this._state=1)}},{key:"destroy",value:function(){this.finish(),this._state<3&&(s.initialStylesByElement.delete(this._element),this._startStyles&&(Yf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Yf(this._element,this._endStyles),this._endStyles=null),_u(this._element,this._initialStyles),this._state=3)}}]),s}();return i.initialStylesByElement=new WeakMap,i}();function Tk(i){for(var s=null,n=Object.keys(i),r=0;r<n.length;r++){var a=n[r];MO(a)&&((s=s||{})[a]=i[a])}return s}function MO(i){return"display"===i||"position"===i}var xk="animation",Wg="animationend",Mk=function(){function i(s,n,r,a,o,u,l){var f=this;(0,M.Z)(this,i),this._element=s,this._name=n,this._duration=r,this._delay=a,this._easing=o,this._fillMode=u,this._onDoneFn=l,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(m){return f._handleCallback(m)}}return(0,R.Z)(i,[{key:"apply",value:function(){(function(i,s){var n=Ik(i,"").trim();n.length&&(function(i,s){for(var n=0,r=0;r<i.length;r++)","===i.charAt(r)&&n++;return n}(n)+1,s="".concat(n,", ").concat(s)),x0(i,"",s)})(this._element,"".concat(this._duration,"ms ").concat(this._easing," ").concat(this._delay,"ms 1 normal ").concat(this._fillMode," ").concat(this._name)),T0(this._element,this._eventFn,!1),this._startTime=Date.now()}},{key:"pause",value:function(){A1(this._element,this._name,"paused")}},{key:"resume",value:function(){A1(this._element,this._name,"running")}},{key:"setPosition",value:function(n){var r=x1(this._element,this._name);this._position=n*this._duration,x0(this._element,"Delay","-".concat(this._position,"ms"),r)}},{key:"getPosition",value:function(){return this._position}},{key:"_handleCallback",value:function(n){var r=n._ngTestManualTimestamp||Date.now(),a=1e3*parseFloat(n.elapsedTime.toFixed(3));n.animationName==this._name&&Math.max(r-this._startTime,0)>=this._delay&&a>=this._duration&&this.finish()}},{key:"finish",value:function(){this._finished||(this._finished=!0,this._onDoneFn(),T0(this._element,this._eventFn,!0))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this.finish(),function(i,s){var r=Ik(i,"").split(","),a=qg(r,s);a>=0&&(r.splice(a,1),x0(i,"",r.join(",")))}(this._element,this._name))}}]),i}();function A1(i,s,n){x0(i,"PlayState",n,x1(i,s))}function x1(i,s){var n=Ik(i,"");return n.indexOf(",")>0?qg(n.split(","),s):qg([n],s)}function qg(i,s){for(var n=0;n<i.length;n++)if(i[n].indexOf(s)>=0)return n;return-1}function T0(i,s,n){n?i.removeEventListener(Wg,s):i.addEventListener(Wg,s)}function x0(i,s,n,r){var a=xk+s;if(null!=r){var o=i.style[a];if(o.length){var u=o.split(",");u[r]=n,n=u.join(",")}}i.style[a]=n}function Ik(i,s){return i.style[xk+s]||""}var OO=function(){function i(s,n,r,a,o,u,l,f){(0,M.Z)(this,i),this.element=s,this.keyframes=n,this.animationName=r,this._duration=a,this._delay=o,this._finalStyles=l,this._specialStyles=f,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=a+o,this._buildStyler()}return(0,R.Z)(i,[{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"destroy",value:function(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"_flushDoneFns",value:function(){this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[]}},{key:"_flushStartFns",value:function(){this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[]}},{key:"finish",value:function(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}},{key:"setPosition",value:function(n){this._styler.setPosition(n)}},{key:"getPosition",value:function(){return this._styler.getPosition()}},{key:"hasStarted",value:function(){return this._state>=2}},{key:"init",value:function(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}},{key:"play",value:function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}},{key:"pause",value:function(){this.init(),this._styler.pause()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"reset",value:function(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}},{key:"_buildStyler",value:function(){var n=this;this._styler=new Mk(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return n.finish()})}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}},{key:"beforeDestroy",value:function(){var n=this;this.init();var r={};if(this.hasStarted()){var a=this._state>=3;Object.keys(this._finalStyles).forEach(function(o){"offset"!=o&&(r[o]=a?n._finalStyles[o]:bh(n.element,o))})}this.currentSnapshot=r}}]),i}(),DV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).element=r,o._startingStyles={},o.__initialized=!1,o._styles=Rg(a),o}return(0,R.Z)(n,[{key:"init",value:function(){var a=this;this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(function(o){a._startingStyles[o]=a.element.style[o]}),(0,Se.Z)((0,ye.Z)(n.prototype),"init",this).call(this))}},{key:"play",value:function(){var a=this;!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(function(o){return a.element.style.setProperty(o,a._styles[o])}),(0,Se.Z)((0,ye.Z)(n.prototype),"play",this).call(this))}},{key:"destroy",value:function(){var a=this;!this._startingStyles||(Object.keys(this._startingStyles).forEach(function(o){var u=a._startingStyles[o];u?a.element.style.setProperty(o,u):a.element.style.removeProperty(o)}),this._startingStyles=null,(0,Se.Z)((0,ye.Z)(n.prototype),"destroy",this).call(this))}}]),n}(Sl),Yg="gen_css_kf_",M0=function(){function i(){(0,M.Z)(this,i),this._count=0}return(0,R.Z)(i,[{key:"validateStyleProperty",value:function(n){return l0(n)}},{key:"matchesElement",value:function(n,r){return h0(n,r)}},{key:"containsElement",value:function(n,r){return vv(n,r)}},{key:"query",value:function(n,r,a){return f0(n,r,a)}},{key:"computeStyle",value:function(n,r,a){return window.getComputedStyle(n)[r]}},{key:"buildKeyframeElement",value:function(n,r,a){a=a.map(function(f){return Rg(f)});var o="@keyframes ".concat(r," {\n"),u="";a.forEach(function(f){u=" ";var m=parseFloat(f.offset);o+="".concat(u).concat(100*m,"% {\n"),u+=" ",Object.keys(f).forEach(function(b){var w=f[b];switch(b){case"offset":return;case"easing":return void(w&&(o+="".concat(u,"animation-timing-function: ").concat(w,";\n")));default:return void(o+="".concat(u).concat(b,": ").concat(w,";\n"))}}),o+="".concat(u,"}\n")}),o+="}\n";var l=document.createElement("style");return l.textContent=o,l}},{key:"animate",value:function(n,r,a,o,u){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],m=l.filter(function(V){return V instanceof OO}),b={};p0(a,o)&&m.forEach(function(V){var W=V.currentSnapshot;Object.keys(W).forEach(function(se){return b[se]=W[se]})});var w=I1(r=Xf(n,r,b));if(0==a)return new DV(n,w);var C="".concat(Yg).concat(this._count++),T=this.buildKeyframeElement(n,C,r),I=M1(n);I.appendChild(T);var Z=Ak(n,r),Y=new OO(n,r,C,a,o,u,w,Z);return Y.onDestroy(function(){return Ou(T)}),Y}}]),i}();function M1(i){var s,n=null===(s=i.getRootNode)||void 0===s?void 0:s.call(i);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head}function I1(i){var s={};return i&&(Array.isArray(i)?i:[i]).forEach(function(r){Object.keys(r).forEach(function(a){"offset"==a||"easing"==a||(s[a]=r[a])})}),s}function Ou(i){i.parentNode.removeChild(i)}var F1=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.element=s,this.keyframes=n,this.options=r,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}return(0,R.Z)(i,[{key:"_onFinish",value:function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(n){return n()}),this._onDoneFns=[])}},{key:"init",value:function(){this._buildPlayer(),this._preparePlayerBeforeStart()}},{key:"_buildPlayer",value:function(){var n=this;if(!this._initialized){this._initialized=!0;var r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:{},this.domPlayer.addEventListener("finish",function(){return n._onFinish()})}}},{key:"_preparePlayerBeforeStart",value:function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}},{key:"_triggerWebAnimation",value:function(n,r,a){return n.animate(r,a)}},{key:"onStart",value:function(n){this._onStartFns.push(n)}},{key:"onDone",value:function(n){this._onDoneFns.push(n)}},{key:"onDestroy",value:function(n){this._onDestroyFns.push(n)}},{key:"play",value:function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(n){return n()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}},{key:"pause",value:function(){this.init(),this.domPlayer.pause()}},{key:"finish",value:function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}},{key:"reset",value:function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}},{key:"_resetDomPlayerState",value:function(){this.domPlayer&&this.domPlayer.cancel()}},{key:"restart",value:function(){this.reset(),this.play()}},{key:"hasStarted",value:function(){return this._started}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(n){return n()}),this._onDestroyFns=[])}},{key:"setPosition",value:function(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}},{key:"getPosition",value:function(){return this.domPlayer.currentTime/this.time}},{key:"totalTime",get:function(){return this._delay+this._duration}},{key:"beforeDestroy",value:function(){var n=this,r={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(a){"offset"!=a&&(r[a]=n._finished?n._finalKeyframe[a]:bh(n.element,a))}),this.currentSnapshot=r}},{key:"triggerCallback",value:function(n){var r="start"==n?this._onStartFns:this._onDoneFns;r.forEach(function(a){return a()}),r.length=0}}]),i}(),LO=function(){function i(){(0,M.Z)(this,i),this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(O1().toString()),this._cssKeyframesDriver=new M0}return(0,R.Z)(i,[{key:"validateStyleProperty",value:function(n){return l0(n)}},{key:"matchesElement",value:function(n,r){return h0(n,r)}},{key:"containsElement",value:function(n,r){return vv(n,r)}},{key:"query",value:function(n,r,a){return f0(n,r,a)}},{key:"computeStyle",value:function(n,r,a){return window.getComputedStyle(n)[r]}},{key:"overrideWebAnimationsSupport",value:function(n){this._isNativeImpl=n}},{key:"animate",value:function(n,r,a,o,u){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],f=arguments.length>6?arguments[6]:void 0,m=!f&&!this._isNativeImpl;if(m)return this._cssKeyframesDriver.animate(n,r,a,o,u,l);var b=0==o?"both":"forwards",w={duration:a,delay:o,fill:b};u&&(w.easing=u);var C={},T=l.filter(function(Z){return Z instanceof F1});p0(a,o)&&T.forEach(function(Z){var Y=Z.currentSnapshot;Object.keys(Y).forEach(function(V){return C[V]=Y[V]})});var I=Ak(n,r=Xf(n,r=r.map(function(Z){return Kl(Z,!1)}),C));return new F1(n,r,w,I)}}]),i}();function O1(){return ph()&&Element.prototype.animate||{}}var L1=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o){var u;return(0,M.Z)(this,r),(u=n.call(this))._nextAnimationId=0,u._renderer=a.createRenderer(o.body,{id:"0",encapsulation:v.ifc.None,styles:[],data:{animation:[]}}),u}return(0,R.Z)(r,[{key:"build",value:function(o){var u=this._nextAnimationId.toString();this._nextAnimationId++;var l=Array.isArray(o)?yc(o):o;return Z1(this._renderer,null,u,"register",[l]),new NO(u,this._renderer)}}]),r}(Br);return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.FYo),v.LFG(be))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),NO=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._id=r,o._renderer=a,o}return(0,R.Z)(n,[{key:"create",value:function(a,o){return new N1(this._id,a,o||{},this._renderer)}}]),n}(fa),N1=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.id=s,this.element=n,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}return(0,R.Z)(i,[{key:"_listen",value:function(n,r){return this._renderer.listen(this.element,"@@".concat(this.id,":").concat(n),r)}},{key:"_command",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return Z1(this._renderer,this.element,this.id,n,a)}},{key:"onDone",value:function(n){this._listen("done",n)}},{key:"onStart",value:function(n){this._listen("start",n)}},{key:"onDestroy",value:function(n){this._listen("destroy",n)}},{key:"init",value:function(){this._command("init")}},{key:"hasStarted",value:function(){return this._started}},{key:"play",value:function(){this._command("play"),this._started=!0}},{key:"pause",value:function(){this._command("pause")}},{key:"restart",value:function(){this._command("restart")}},{key:"finish",value:function(){this._command("finish")}},{key:"destroy",value:function(){this._command("destroy")}},{key:"reset",value:function(){this._command("reset"),this._started=!1}},{key:"setPosition",value:function(n){this._command("setPosition",n)}},{key:"getPosition",value:function(){var n,r;return null!==(r=null===(n=this._renderer.engine.players[+this.id])||void 0===n?void 0:n.getPosition())&&void 0!==r?r:0}}]),i}();function Z1(i,s,n,r,a){return i.setProperty(s,"@@".concat(n,":").concat(r),a)}var B1="@.disabled",U1=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this.delegate=n,this.engine=r,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=function(o,u){u&&u.parentNode(o)&&u.removeChild(o.parentNode,o)}}return(0,R.Z)(s,[{key:"createRenderer",value:function(r,a){var o=this,l=this.delegate.createRenderer(r,a);if(!(r&&a&&a.data&&a.data.animation)){var f=this._rendererCache.get(l);return f||(f=new P0("",l,this.engine),this._rendererCache.set(l,f)),f}var m=a.id,b=a.id+"-"+this._currentId;return this._currentId++,this.engine.register(b,r),a.data.animation.forEach(function T(I){Array.isArray(I)?I.forEach(T):o.engine.registerTrigger(m,b,r,I.name,I)}),new V1(this,b,l,this.engine)}},{key:"begin",value:function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}},{key:"_scheduleCountTask",value:function(){var r=this;this.promise.then(function(){r._microtaskId++})}},{key:"scheduleListenerCallback",value:function(r,a,o){var u=this;r>=0&&r<this._microtaskId?this._zone.run(function(){return a(o)}):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(function(){u._zone.run(function(){u._animationCallbacksBuffer.forEach(function(l){var f=(0,Te.Z)(l,2);(0,f[0])(f[1])}),u._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([a,o]))}},{key:"end",value:function(){var r=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(function(){r._scheduleCountTask(),r.engine.flush(r._microtaskId)}),this.delegate.end&&this.delegate.end()}},{key:"whenRenderingDone",value:function(){return this.engine.whenRenderingDone()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.FYo),v.LFG(A0),v.LFG(v.R0b))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),P0=function(){function i(s,n,r){(0,M.Z)(this,i),this.namespaceId=s,this.delegate=n,this.engine=r,this.destroyNode=this.delegate.destroyNode?function(a){return n.destroyNode(a)}:null}return(0,R.Z)(i,[{key:"data",get:function(){return this.delegate.data}},{key:"destroy",value:function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}},{key:"createElement",value:function(n,r){return this.delegate.createElement(n,r)}},{key:"createComment",value:function(n){return this.delegate.createComment(n)}},{key:"createText",value:function(n){return this.delegate.createText(n)}},{key:"appendChild",value:function(n,r){this.delegate.appendChild(n,r),this.engine.onInsert(this.namespaceId,r,n,!1)}},{key:"insertBefore",value:function(n,r,a){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.delegate.insertBefore(n,r,a),this.engine.onInsert(this.namespaceId,r,n,o)}},{key:"removeChild",value:function(n,r,a){this.engine.onRemove(this.namespaceId,r,this.delegate,a)}},{key:"selectRootElement",value:function(n,r){return this.delegate.selectRootElement(n,r)}},{key:"parentNode",value:function(n){return this.delegate.parentNode(n)}},{key:"nextSibling",value:function(n){return this.delegate.nextSibling(n)}},{key:"setAttribute",value:function(n,r,a,o){this.delegate.setAttribute(n,r,a,o)}},{key:"removeAttribute",value:function(n,r,a){this.delegate.removeAttribute(n,r,a)}},{key:"addClass",value:function(n,r){this.delegate.addClass(n,r)}},{key:"removeClass",value:function(n,r){this.delegate.removeClass(n,r)}},{key:"setStyle",value:function(n,r,a,o){this.delegate.setStyle(n,r,a,o)}},{key:"removeStyle",value:function(n,r,a){this.delegate.removeStyle(n,r,a)}},{key:"setProperty",value:function(n,r,a){"@"==r.charAt(0)&&r==B1?this.disableAnimations(n,!!a):this.delegate.setProperty(n,r,a)}},{key:"setValue",value:function(n,r){this.delegate.setValue(n,r)}},{key:"listen",value:function(n,r,a){return this.delegate.listen(n,r,a)}},{key:"disableAnimations",value:function(n,r){this.engine.disableAnimations(n,r)}}]),i}(),V1=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this,a,o,u)).factory=r,l.namespaceId=a,l}return(0,R.Z)(n,[{key:"setProperty",value:function(a,o,u){"@"==o.charAt(0)?"."==o.charAt(1)&&o==B1?this.disableAnimations(a,u=void 0===u||!!u):this.engine.process(this.namespaceId,a,o.substr(1),u):this.delegate.setProperty(a,o,u)}},{key:"listen",value:function(a,o,u){var l=this;if("@"==o.charAt(0)){var f=function(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(a),m=o.substr(1),b="";if("@"!=m.charAt(0)){var w=function(i){var s=i.indexOf(".");return[i.substring(0,s),i.substr(s+1)]}(m),C=(0,Te.Z)(w,2);m=C[0],b=C[1]}return this.engine.listen(this.namespaceId,f,m,b,function(T){l.factory.scheduleListenerCallback(T._data||-1,u,T)})}return this.delegate.listen(a,o,u)}}]),n}(P0),z1=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o,u){return(0,M.Z)(this,r),n.call(this,a.body,o,u)}return(0,R.Z)(r,[{key:"ngOnDestroy",value:function(){this.flush()}}]),r}(A0);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be),v.LFG(gv),v.LFG(zg))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),nl=new v.OlP("AnimationModuleType"),H1=[{provide:Br,useClass:L1},{provide:zg,useFactory:function(){return new b0}},{provide:A0,useClass:z1},{provide:v.FYo,useFactory:function(i,s,n){return new U1(i,s,n)},deps:[Vl,A0,v.R0b]}],G1=[{provide:gv,useFactory:function(){return"function"==typeof O1()?new LO:new M0}},{provide:nl,useValue:"BrowserAnimations"}].concat(H1),j1=[{provide:gv,useClass:mv},{provide:nl,useValue:"NoopAnimations"}].concat(H1),VO=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,null,[{key:"withConfig",value:function(r){return{ngModule:s,providers:r.disableAnimations?j1:G1}}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:G1,imports:[Us]}),i}(),vr=ne(3512),bu=ne(8569),ro=ne(8318),Ws=ne(9764),wr=ne(878),Wa=ne(5271),R0=ne(7471);function W1(){return(0,R0.J)(1)}function Pk(){return W1()(wr.of.apply(void 0,arguments))}var O0=ne(6163);function rl(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];var r=s[s.length-1];return(0,O0.K)(r)?(s.pop(),function(a){return Pk(s,a,r)}):function(a){return Pk(s,a)}}var qs=ne(6673);function Jl(){return function(i){return i.lift(new TV)}}var TV=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new xV(n))}}]),i}(),xV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).hasPrev=!1,a}return(0,R.Z)(n,[{key:"_next",value:function(a){var o;this.hasPrev?o=[this.prev,a]:this.hasPrev=!0,this.prev=a,o&&this.destination.next(o)}}]),n}(qs.L),Tr=ne(9996);function Dv(i,s){var n=!1;return arguments.length>=2&&(n=!0),function(a){return a.lift(new Fk(i,s,n))}}var Fk=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,M.Z)(this,i),this.accumulator=s,this.seed=n,this.hasSeed=r}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new Rk(n,this.accumulator,this.seed,this.hasSeed))}}]),i}(),Rk=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this,r)).accumulator=a,l._seed=o,l.hasSeed=u,l.index=0,l}return(0,R.Z)(n,[{key:"seed",get:function(){return this._seed},set:function(a){this.hasSeed=!0,this._seed=a}},{key:"_next",value:function(a){if(this.hasSeed)return this._tryNext(a);this.seed=a,this.destination.next(a)}},{key:"_tryNext",value:function(a){var u,o=this.index++;try{u=this.accumulator(this.seed,a,o)}catch(l){this.destination.error(l)}this.seed=u,this.destination.next(u)}}]),n}(qs.L);function rd(i,s){return function(n){return n.lift(new zO(i,s))}}var zO=function(){function i(s,n){(0,M.Z)(this,i),this.compare=s,this.keySelector=n}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new q1(n,this.compare,this.keySelector))}}]),i}(),q1=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).keySelector=o,u.hasKey=!1,"function"==typeof a&&(u.compare=a),u}return(0,R.Z)(n,[{key:"compare",value:function(a,o){return a===o}},{key:"_next",value:function(a){var o;try{var u=this.keySelector;o=u?u(a):a}catch(m){return this.destination.error(m)}var l=!1;if(this.hasKey)try{l=(0,this.compare)(this.key,o)}catch(m){return this.destination.error(m)}else this.hasKey=!0;l||(this.key=o,this.destination.next(a))}}]),n}(qs.L);function Za(i,s){return function(r){return r.lift(new Y1(i,s))}}var mr,Y1=function(){function i(s,n){(0,M.Z)(this,i),this.predicate=s,this.thisArg=n}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new K1(n,this.predicate,this.thisArg))}}]),i}(),K1=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).predicate=a,u.thisArg=o,u.count=0,u}return(0,R.Z)(n,[{key:"_next",value:function(a){var o;try{o=this.predicate.call(this.thisArg,a,this.count++)}catch(u){return void this.destination.error(u)}o&&this.destination.next(a)}}]),n}(qs.L),Tl=ne(9748),Ok=(ne(3121),ne(4768)),HO=ne(1932),Qt=ne(8239),Lk=ne(3455),id=ne(8774),Ke=ne.n(id),ad=ne(7092),Ep=ne(5119),kh=ne(2134),Re=ne(5725),GO="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},of={},L0=L0||{},Qr=GO||self;function Kg(){}function $g(i){var s=typeof i;return"array"==(s="object"!=s?s:i?Array.isArray(i)?"array":s:"null")||"object"==s&&"number"==typeof i.length}function Xg(i){var s=typeof i;return"object"==s&&null!=i||"function"==s}var N0="closure_uid_"+(1e9*Math.random()>>>0),X1=0;function kp(i,s,n){return i.call.apply(i.bind,arguments)}function Q1(i,s,n){if(!i)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,r),i.apply(s,a)}}return function(){return i.apply(s,arguments)}}function Xo(i,s,n){return(Xo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kp:Q1).apply(null,arguments)}function Z0(i,s){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),i.apply(this,r)}}function wo(i,s){function n(){}n.prototype=s.prototype,i.Z=s.prototype,i.prototype=new n,i.prototype.constructor=i,i.Vb=function(r,a,o){for(var u=Array(arguments.length-2),l=2;l<arguments.length;l++)u[l-2]=arguments[l];return s.prototype[a].apply(r,u)}}function sd(){this.s=this.s,this.o=this.o}var ex={};sd.prototype.s=!1,sd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,N0)&&i[N0]||(i[N0]=++X1)}(this);delete ex[i]}},sd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Nk=Array.prototype.indexOf?function(i,s){return Array.prototype.indexOf.call(i,s,void 0)}:function(i,s){if("string"==typeof i)return"string"!=typeof s||1!=s.length?-1:i.indexOf(s,0);for(var n=0;n<i.length;n++)if(n in i&&i[n]===s)return n;return-1},B0=Array.prototype.forEach?function(i,s,n){Array.prototype.forEach.call(i,s,n)}:function(i,s,n){for(var r=i.length,a="string"==typeof i?i.split(""):i,o=0;o<r;o++)o in a&&s.call(n,a[o],o,i)};function Qg(i){return Array.prototype.concat.apply([],arguments)}function Sv(i){var s=i.length;if(0<s){for(var n=Array(s),r=0;r<s;r++)n[r]=i[r];return n}return[]}function Jg(i){return/^[\s\xa0]*$/.test(i)}var Lo,U0=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Lu(i,s){return-1!=i.indexOf(s)}function ey(i,s){return i<s?-1:i>s?1:0}e:{var nx=Qr.navigator;if(nx){var Zk=nx.userAgent;if(Zk){Lo=Zk;break e}}Lo=""}function Bk(i,s,n){for(var r in i)s.call(n,i[r],r,i)}function rx(i){var s={};for(var n in i)s[n]=i[n];return s}var Uk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V0(i,s){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])i[n]=r[n];for(var o=0;o<Uk.length;o++)n=Uk[o],Object.prototype.hasOwnProperty.call(r,n)&&(i[n]=r[n])}}function z0(i){return z0[" "](i),i}z0[" "]=Kg;var ty,i,ix=Lu(Lo,"Opera"),Av=Lu(Lo,"Trident")||Lu(Lo,"MSIE"),Vk=Lu(Lo,"Edge"),zk=Vk||Av,ax=Lu(Lo,"Gecko")&&!(Lu(Lo.toLowerCase(),"webkit")&&!Lu(Lo,"Edge"))&&!(Lu(Lo,"Trident")||Lu(Lo,"MSIE"))&&!Lu(Lo,"Edge"),Uc=Lu(Lo.toLowerCase(),"webkit")&&!Lu(Lo,"Edge");function sx(){var i=Qr.document;return i?i.documentMode:void 0}e:{var Hk="",Gk=(i=Lo,ax?/rv:([^\);]+)(\)|;)/.exec(i):Vk?/Edge\/([\d\.]+)/.exec(i):Av?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Uc?/WebKit\/(\S+)/.exec(i):ix?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Gk&&(Hk=Gk?Gk[1]:""),Av){var jk=sx();if(null!=jk&&jk>parseFloat(Hk)){ty=String(jk);break e}}ty=Hk}var WO={};function ox(){return s=WO,Object.prototype.hasOwnProperty.call(s,9)?s[9]:s[9]=function(){for(var i=0,s=U0(String(ty)).split("."),n=U0("9").split("."),r=Math.max(s.length,n.length),a=0;0==i&&a<r;a++){var o=s[a]||"",u=n[a]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;i=ey(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||ey(0==o[2].length,0==u[2].length)||ey(o[2],u[2]),o=o[3],u=u[3]}while(0==i)}return 0<=i}();var s}var qO=Qr.document&&Av&&(sx()||parseInt(ty,10))||void 0,li=function(){if(!Qr.addEventListener||!Object.defineProperty)return!1;var i=!1,s=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Qr.addEventListener("test",Kg,s),Qr.removeEventListener("test",Kg,s)}catch(n){}return i}();function wu(i,s){this.type=i,this.g=this.target=s,this.defaultPrevented=!1}function Tv(i,s){if(wu.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,r=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=s,s=i.relatedTarget){if(ax){e:{try{z0(s.nodeName);var a=!0;break e}catch(o){}a=!1}a||(s=null)}}else"mouseover"==n?s=i.fromElement:"mouseout"==n&&(s=i.toElement);this.relatedTarget=s,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:H0[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Tv.Z.h.call(this)}}wu.prototype.h=function(){this.defaultPrevented=!0},wo(Tv,wu);var H0={2:"touch",3:"pen",4:"mouse"};Tv.prototype.h=function(){Tv.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var il="closure_listenable_"+(1e6*Math.random()|0),lx=0;function YO(i,s,n,r,a){this.listener=i,this.proxy=null,this.src=s,this.type=n,this.capture=!!r,this.ia=a,this.key=++lx,this.ca=this.fa=!1}function xv(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function bc(i){this.src=i,this.g={},this.h=0}function ny(i,s){var n=s.type;if(n in i.g){var o,r=i.g[n],a=Nk(r,s);(o=0<=a)&&Array.prototype.splice.call(r,a,1),o&&(xv(s),0==i.g[n].length&&(delete i.g[n],i.h--))}}function G0(i,s,n,r){for(var a=0;a<i.length;++a){var o=i[a];if(!o.ca&&o.listener==s&&o.capture==!!n&&o.ia==r)return a}return-1}bc.prototype.add=function(i,s,n,r,a){var o=i.toString();(i=this.g[o])||(i=this.g[o]=[],this.h++);var u=G0(i,s,r,a);return-1<u?(s=i[u],n||(s.fa=!1)):((s=new YO(s,this.src,o,!!r,a)).fa=n,i.push(s)),s};var ry="closure_lm_"+(1e6*Math.random()|0),cx={};function qk(i,s,n,r,a){if(r&&r.once)return iy(i,s,n,r,a);if(Array.isArray(s)){for(var o=0;o<s.length;o++)qk(i,s[o],n,r,a);return null}return n=Yk(n),i&&i[il]?i.N(s,n,Xg(r)?!!r.capture:!!r,a):KO(i,s,n,!1,r,a)}function KO(i,s,n,r,a,o){if(!s)throw Error("Invalid event type");var u=Xg(a)?!!a.capture:!!a,l=j0(i);if(l||(i[ry]=l=new bc(i)),(n=l.add(s,n,r,u,o)).proxy)return n;if(r=function(){var s=XO;return function i(n){return s.call(i.src,i.listener,n)}}(),n.proxy=r,r.src=i,r.listener=n,i.addEventListener)li||(a=u),void 0===a&&(a=!1),i.addEventListener(s.toString(),r,a);else if(i.attachEvent)i.attachEvent($O(s.toString()),r);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(r)}return n}function iy(i,s,n,r,a){if(Array.isArray(s)){for(var o=0;o<s.length;o++)iy(i,s[o],n,r,a);return null}return n=Yk(n),i&&i[il]?i.O(s,n,Xg(r)?!!r.capture:!!r,a):KO(i,s,n,!0,r,a)}function ay(i,s,n,r,a){if(Array.isArray(s))for(var o=0;o<s.length;o++)ay(i,s[o],n,r,a);else r=Xg(r)?!!r.capture:!!r,n=Yk(n),i&&i[il]?(i=i.i,(s=String(s).toString())in i.g&&-1<(n=G0(o=i.g[s],n,r,a))&&(xv(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete i.g[s],i.h--))):i&&(i=j0(i))&&(s=i.g[s.toString()],i=-1,s&&(i=G0(s,n,r,a)),(n=-1<i?s[i]:null)&&sy(n))}function sy(i){if("number"!=typeof i&&i&&!i.ca){var s=i.src;if(s&&s[il])ny(s.i,i);else{var n=i.type,r=i.proxy;s.removeEventListener?s.removeEventListener(n,r,i.capture):s.detachEvent?s.detachEvent($O(n),r):s.addListener&&s.removeListener&&s.removeListener(r),(n=j0(s))?(ny(n,i),0==n.h&&(n.src=null,s[ry]=null)):xv(i)}}}function $O(i){return i in cx?cx[i]:cx[i]="on"+i}function XO(i,s){if(i.ca)i=!0;else{s=new Tv(s,this);var n=i.listener,r=i.ia||i.src;i.fa&&sy(i),i=n.call(r,s)}return i}function j0(i){return(i=i[ry])instanceof bc?i:null}var hx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yk(i){return"function"==typeof i?i:(i[hx]||(i[hx]=function(s){return i.handleEvent(s)}),i[hx])}function Eu(){sd.call(this),this.i=new bc(this),this.P=this,this.I=null}function Qo(i,s){var n,r=i.I;if(r)for(n=[];r;r=r.I)n.push(r);if(i=i.P,r=s.type||s,"string"==typeof s)s=new wu(s,i);else if(s instanceof wu)s.target=s.target||i;else{var a=s;V0(s=new wu(r,i),a)}if(a=!0,n)for(var o=n.length-1;0<=o;o--){var u=s.g=n[o];a=oy(u,r,!0,s)&&a}if(a=oy(u=s.g=i,r,!0,s)&&a,a=oy(u,r,!1,s)&&a,n)for(o=0;o<n.length;o++)a=oy(u=s.g=n[o],r,!1,s)&&a}function oy(i,s,n,r){if(!(s=i.i.g[String(s)]))return!0;s=s.concat();for(var a=!0,o=0;o<s.length;++o){var u=s[o];if(u&&!u.ca&&u.capture==n){var l=u.listener,f=u.ia||u.src;u.fa&&ny(i.i,u),a=!1!==l.call(f,r)&&a}}return a&&!r.defaultPrevented}wo(Eu,sd),Eu.prototype[il]=!0,Eu.prototype.removeEventListener=function(i,s,n,r){ay(this,i,s,n,r)},Eu.prototype.M=function(){if(Eu.Z.M.call(this),this.i){var s,i=this.i;for(s in i.g){for(var n=i.g[s],r=0;r<n.length;r++)xv(n[r]);delete i.g[s],i.h--}}this.I=null},Eu.prototype.N=function(i,s,n,r){return this.i.add(String(i),s,!1,n,r)},Eu.prototype.O=function(i,s,n,r){return this.i.add(String(i),s,!0,n,r)};var Kk=Qr.JSON.stringify;function $k(){var i=JO,s=null;return i.g&&(s=i.g,i.g=i.g.next,i.g||(i.h=null),s.next=null),s}var dx,IV=function(){function i(){(0,M.Z)(this,i),this.h=this.g=null}return(0,R.Z)(i,[{key:"add",value:function(n,r){var a=QO.get();a.set(n,r),this.h?this.h.next=a:this.g=a,this.h=a}}]),i}(),QO=new(function(){function i(s,n){(0,M.Z)(this,i),this.i=s,this.j=n,this.h=0,this.g=null}return(0,R.Z)(i,[{key:"get",value:function(){var n;return 0<this.h?(this.h--,this.g=(n=this.g).next,n.next=null):n=this.i(),n}}]),i}())(function(){return new PV},function(i){return i.reset()}),PV=function(){function i(){(0,M.Z)(this,i),this.next=this.g=this.h=null}return(0,R.Z)(i,[{key:"set",value:function(n,r){this.h=n,this.g=r,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),i}();function FV(i){Qr.setTimeout(function(){throw i},0)}function fx(i,s){dx||function(){var i=Qr.Promise.resolve(void 0);dx=function(){i.then(OV)}}(),px||(dx(),px=!0),JO.add(i,s)}var px=!1,JO=new IV;function OV(){for(var i;i=$k();){try{i.h.call(i.g)}catch(n){FV(n)}var s=QO;s.j(i),100>s.h&&(s.h++,i.next=s.g,s.g=i)}px=!1}function Xk(i,s){Eu.call(this),this.h=i||1,this.g=s||Qr,this.j=Xo(this.kb,this),this.l=Date.now()}function Ch(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function uy(i,s,n){if("function"==typeof i)n&&(i=Xo(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Xo(i.handleEvent,i)}return 2147483647<Number(s)?-1:Qr.setTimeout(i,s||0)}function vx(i){i.g=uy(function(){i.g=null,i.i&&(i.i=!1,vx(i))},i.j);var s=i.h;i.h=null,i.m.apply(null,s)}wo(Xk,Eu),(mr=Xk.prototype).da=!1,mr.S=null,mr.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qo(this,"tick"),this.da&&(Ch(this),this.start()))}},mr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mr.M=function(){Xk.Z.M.call(this),Ch(this),delete this.g};var mx=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).m=r,o.j=a,o.h=null,o.i=!1,o.g=null,o}return(0,R.Z)(n,[{key:"l",value:function(a){this.h=arguments,this.g?this.i=!0:vx(this)}},{key:"M",value:function(){(0,Se.Z)((0,ye.Z)(n.prototype),"M",this).call(this),this.g&&(Qr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sd);function Cp(i){sd.call(this),this.h=i,this.g={}}wo(Cp,sd);var Qk=[];function W0(i,s,n,r){Array.isArray(n)||(n&&(Qk[0]=n.toString()),n=Qk);for(var a=0;a<n.length;a++){var o=qk(s,n[a],r||i.handleEvent,!1,i.h||i);if(!o)break;i.g[o.key]=o}}function gx(i){Bk(i.g,function(s,n){this.g.hasOwnProperty(n)&&sy(s)},i),i.g={}}function Vc(){this.g=!0}function Mv(i,s,n,r){i.info(function(){return"XMLHTTP TEXT ("+s+"): "+function(i,s){if(!i.g)return s;if(!s)return null;try{var n=JSON.parse(s);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var r=n[i];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var o=a[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var u=1;u<a.length;u++)a[u]=""}}}return Kk(n)}catch(l){return s}}(i,n)+(r?" "+r:"")})}Cp.prototype.M=function(){Cp.Z.M.call(this),gx(this)},Cp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vc.prototype.Aa=function(){this.g=!1},Vc.prototype.info=function(){};var od={},_x=null;function q0(){return _x=_x||new Eu}function Iv(i){wu.call(this,od.Ma,i)}function Dh(i){var s=q0();Qo(s,new Iv(s,i))}function Y0(i,s){wu.call(this,od.STAT_EVENT,i),this.stat=s}function Eo(i){var s=q0();Qo(s,new Y0(s,i))}function Pv(i,s){wu.call(this,od.Na,i),this.size=s}function Sh(i,s){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Qr.setTimeout(function(){i()},s)}od.Ma="serverreachability",wo(Iv,wu),od.STAT_EVENT="statevent",wo(Y0,wu),od.Na="timingevent",wo(Pv,wu);var K0={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},eC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $0(){}function Q0(){}$0.prototype.h=null;var J0,Fv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Rv(){wu.call(this,"d")}function tC(){wu.call(this,"c")}function nC(){}function Ov(i,s,n,r){this.l=i,this.j=s,this.m=n,this.X=r||1,this.V=new Cp(this),this.P=nL,this.W=new Xk(i=zk?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new rC}function rC(){this.i=null,this.g="",this.h=!1}wo(Rv,wu),wo(tC,wu),wo(nC,$0),nC.prototype.g=function(){return new XMLHttpRequest},nC.prototype.i=function(){return{}},J0=new nC;var nL=45e3,eb={},tb={};function iC(i,s,n){i.K=1,i.v=ob(Ah(s)),i.s=n,i.U=!0,xl(i,null)}function xl(i,s){i.F=Date.now(),nb(i),i.A=Ah(i.v);var n=i.A,r=i.X;Array.isArray(r)||(r=[String(r)]),kx(n.h,"t",r),i.C=0,n=i.l.H,i.h=new rC,i.g=bC(i.l,n?s:null,!i.s),0<i.O&&(i.L=new mx(Xo(i.Ia,i,i.g),i.O)),W0(i.V,i.g,"readystatechange",i.gb),s=i.H?rx(i.H):{},i.s?(i.u||(i.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,s)):(i.u="GET",i.g.ea(i.A,i.u,null,s)),Dh(1),function(i,s,n,r,a,o){i.info(function(){if(i.g)if(o)for(var u="",l=o.split("&"),f=0;f<l.length;f++){var m=l[f].split("=");if(1<m.length){var b=m[0];m=m[1];var w=b.split("_");u=2<=w.length&&"type"==w[1]?u+(b+"=")+m+"&":u+(b+"=redacted&")}}else u=null;else u=o;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+s+"\n"+n+"\n"+u})}(i.j,i.u,i.A,i.m,i.X,i.s)}function bx(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function wx(i,s,n){for(var a,r=!0;!i.I&&i.C<n.length;){if((a=LV(i,n))==tb){4==s&&(i.o=4,Eo(14),r=!1),Mv(i.j,i.m,null,"[Incomplete Response]");break}if(a==eb){i.o=4,Eo(15),Mv(i.j,i.m,n,"[Invalid Chunk]"),r=!1;break}Mv(i.j,i.m,a,null),rb(i,a)}bx(i)&&a!=tb&&a!=eb&&(i.h.g="",i.C=0),4!=s||0!=n.length||i.h.h||(i.o=1,Eo(16),r=!1),i.i=i.i&&r,r?0<n.length&&!i.aa&&(i.aa=!0,(s=i.l).g==i&&s.$&&!s.L&&(s.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),_C(s),s.L=!0,Eo(11))):(Mv(i.j,i.m,n,"[Invalid Chunked Response]"),lf(i),ly(i))}function LV(i,s){var n=i.C,r=s.indexOf("\n",n);return-1==r?tb:(n=Number(s.substring(n,r)),isNaN(n)?eb:(r+=1)+n>s.length?tb:(s=s.substr(r,n),i.C=r+n,s))}function nb(i){i.Y=Date.now()+i.P,aC(i,i.P)}function aC(i,s){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Sh(Xo(i.eb,i),s)}function sC(i){i.B&&(Qr.clearTimeout(i.B),i.B=null)}function ly(i){0==i.l.G||i.I||Lx(i.l,i)}function lf(i){sC(i);var s=i.L;s&&"function"==typeof s.na&&s.na(),i.L=null,Ch(i.W),gx(i.V),i.g&&(s=i.g,i.g=null,s.abort(),s.na())}function rb(i,s){try{var n=i.l;if(0!=n.G&&(n.g==i||hb(n.i,i)))if(n.I=i.N,!i.J&&hb(n.i,i)&&3==n.G){try{var r=n.Ca.g.parse(s)}catch(Y){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0])e:if(n.u)n.ta=a[1],0<n.ta-n.U&&37500>a[2]&&n.N&&0==n.A&&!n.v&&(n.v=Sh(Xo(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<i.F))break e;yb(n),mb(n)}gb(n),Eo(18)}if(1>=dC(n.i)&&n.ka){try{n.ka()}catch(Y){}n.ka=void 0}}else Ap(n,11)}else if((i.J||n.g==i)&&yb(n),!Jg(s))for(a=n.Ca.g.parse(s),s=0;s<a.length;s++){var o=a[s];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var u=o[3];null!=u&&(n.ma=u,n.h.info("VER="+n.ma));var l=o[4];null!=l&&(n.za=l,n.h.info("SVER="+n.za));var f=o[5];null!=f&&"number"==typeof f&&0<f&&(n.K=r=1.5*f,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var m=i.g;if(m){var b=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(b){var w=r.i;!w.g&&(Lu(b,"spdy")||Lu(b,"quic")||Lu(b,"h2"))&&(w.j=w.l,w.g=new Set,w.h&&(fb(w,w.h),w.h=null))}if(r.D){var C=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.sa=C,As(r.F,r.D,C))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-i.F,n.h.info("Handshake RTT: "+n.O+"ms"));var T=i;if((r=n).oa=Zx(r,r.H?r.la:null,r.W),T.J){xh(r.i,T);var I=T,Z=r.K;Z&&I.setTimeout(Z),I.B&&(sC(I),nb(I)),r.g=T}else Rx(r);0<n.l.length&&Uv(n)}else"stop"!=o[0]&&"close"!=o[0]||Ap(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ap(n,7):Co(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Dh(4)}catch(Y){}}function oC(i,s){if(i.forEach&&"function"==typeof i.forEach)i.forEach(s,void 0);else if($g(i)||"string"==typeof i)B0(i,s,void 0);else{if(i.T&&"function"==typeof i.T)var n=i.T();else if(i.R&&"function"==typeof i.R)n=void 0;else if($g(i)||"string"==typeof i){n=[];for(var r=i.length,a=0;a<r;a++)n.push(a)}else for(a in n=[],r=0,i)n[r++]=a;a=(r=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if($g(i)){for(var s=[],n=i.length,r=0;r<n;r++)s.push(i[r]);return s}for(r in s=[],n=0,i)s[n++]=i[r];return s}(i)).length;for(var o=0;o<a;o++)s.call(void 0,r[o],n&&n[o],i)}}function Lv(i,s){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(i)if(i instanceof Lv)for(n=i.T(),r=0;r<n.length;r++)this.set(n[r],i.get(n[r]));else for(r in i)this.set(r,i[r])}function ib(i){if(i.i!=i.g.length){for(var s=0,n=0;s<i.g.length;){var r=i.g[s];Dp(i.h,r)&&(i.g[n++]=r),s++}i.g.length=n}if(i.i!=i.g.length){var a={};for(n=s=0;s<i.g.length;)Dp(a,r=i.g[s])||(i.g[n++]=r,a[r]=1),s++;i.g.length=n}}function Dp(i,s){return Object.prototype.hasOwnProperty.call(i,s)}(mr=Ov.prototype).setTimeout=function(i){this.P=i},mr.gb=function(i){i=i.target;var s=this.L;s&&3==ff(i)?s.l():this.Ia(i)},mr.Ia=function(i){try{if(i==this.g)e:{var s=ff(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>s)&&(3!=s||zk||this.g&&(this.h.h||this.g.ga()||Ix(this.g)))){this.I||4!=s||7==n||Dh(8==n||0>=r?3:2),sC(this);var a=this.g.ba();this.N=a;t:if(bx(this)){var o=Ix(this.g);i="";var u=o.length,l=4==ff(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){lf(this),ly(this);var f="";break t}this.h.i=new Qr.TextDecoder}for(n=0;n<u;n++)this.h.h=!0,i+=this.h.i.decode(o[n],{stream:l&&n==u-1});o.splice(0,u),this.h.g+=i,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==a,function(i,s,n,r,a,o,u){i.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+s+"\n"+n+"\n"+o+" "+u})}(this.j,this.u,this.A,this.m,this.X,s,a),this.i){if(this.$&&!this.J){t:{if(this.g){var m,b=this.g;if((m=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jg(m)){var w=m;break t}}w=null}if(!(a=w)){this.i=!1,this.o=3,Eo(12),lf(this),ly(this);break e}Mv(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,rb(this,a)}this.U?(wx(this,s,f),zk&&this.i&&3==s&&(W0(this.V,this.W,"tick",this.fb),this.W.start())):(Mv(this.j,this.m,f,null),rb(this,f)),4==s&&lf(this),this.i&&!this.I&&(4==s?Lx(this.l,this):(this.i=!1,nb(this)))}else 400==a&&0<f.indexOf("Unknown SID")?(this.o=3,Eo(12)):(this.o=0,Eo(13)),lf(this),ly(this)}}}catch(C){}},mr.fb=function(){if(this.g){var i=ff(this.g),s=this.g.ga();this.C<s.length&&(sC(this),wx(this,i,s),this.i&&4!=i&&nb(this))}},mr.cancel=function(){this.I=!0,lf(this)},mr.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function(i,s){i.info(function(){return"TIMEOUT: "+s})}(this.j,this.A),2!=this.K&&(Dh(3),Eo(17)),lf(this),this.o=2,ly(this)):aC(this,this.Y-i)},(mr=Lv.prototype).R=function(){ib(this);for(var i=[],s=0;s<this.g.length;s++)i.push(this.h[this.g[s]]);return i},mr.T=function(){return ib(this),this.g.concat()},mr.get=function(i,s){return Dp(this.h,i)?this.h[i]:s},mr.set=function(i,s){Dp(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=s},mr.forEach=function(i,s){for(var n=this.T(),r=0;r<n.length;r++){var a=n[r],o=this.get(a);i.call(s,o,a,this)}};var uC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Sp(i,s){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Sp){this.g=void 0!==s?s:i.g,cy(this,i.j),this.s=i.s,ab(this,i.i),ec(this,i.m),this.l=i.l,s=i.h;var n=new dy;n.i=s.i,s.g&&(n.g=new Lv(s.g),n.h=s.h),sb(this,n),this.o=i.o}else i&&(n=String(i).match(uC))?(this.g=!!s,cy(this,n[1]||"",!0),this.s=hy(n[2]||""),ab(this,n[3]||"",!0),ec(this,n[4]),this.l=hy(n[5]||"",!0),sb(this,n[6]||"",!0),this.o=hy(n[7]||"")):(this.g=!!s,this.h=new dy(null,this.g))}function Ah(i){return new Sp(i)}function cy(i,s,n){i.j=n?hy(s,!0):s,i.j&&(i.j=i.j.replace(/:$/,""))}function ab(i,s,n){i.i=n?hy(s,!0):s}function ec(i,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);i.m=s}else i.m=null}function sb(i,s,n){s instanceof dy?(i.h=s,function(i,s){s&&!i.j&&(Th(i),i.i=null,i.g.forEach(function(n,r){var a=r.toLowerCase();r!=a&&(cb(this,r),kx(this,a,n))},i)),i.j=s}(i.h,i.g)):(n||(s=fy(s,lb)),i.h=new dy(s,i.g))}function As(i,s,n){i.h.set(s,n)}function ob(i){return As(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function hy(i,s){return i?s?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function fy(i,s,n){return"string"==typeof i?(i=encodeURI(i).replace(s,aL),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function aL(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Sp.prototype.toString=function(){var i=[],s=this.j;s&&i.push(fy(s,ub,!0),":");var n=this.i;return(n||"file"==s)&&(i.push("//"),(s=this.s)&&i.push(fy(s,ub,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&i.push("/"),i.push(fy(n,"/"==n.charAt(0)?oL:sL,!0))),(n=this.h.toString())&&i.push("?",n),(n=this.o)&&i.push("#",fy(n,lC)),i.join("")};var ub=/[#\/\?@]/g,sL=/[#\?:]/g,oL=/[#\?]/g,lb=/[#\?@]/g,lC=/#/g;function dy(i,s){this.h=this.g=null,this.i=i||null,this.j=!!s}function Th(i){i.g||(i.g=new Lv,i.h=0,i.i&&function(i,s){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var r=i[n].indexOf("="),a=null;if(0<=r){var o=i[n].substring(0,r);a=i[n].substring(r+1)}else o=i[n];s(o,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(s,n){i.add(decodeURIComponent(s.replace(/\+/g," ")),n)}))}function cb(i,s){Th(i),s=Nv(i,s),Dp(i.g.h,s)&&(i.i=null,i.h-=i.g.get(s).length,Dp((i=i.g).h,s)&&(delete i.h[s],i.i--,i.g.length>2*i.i&&ib(i)))}function cC(i,s){return Th(i),s=Nv(i,s),Dp(i.g.h,s)}function kx(i,s,n){cb(i,s),0<n.length&&(i.i=null,i.g.set(Nv(i,s),Sv(n)),i.h+=n.length)}function Nv(i,s){return s=String(s),i.j&&(s=s.toLowerCase()),s}(mr=dy.prototype).add=function(i,s){Th(this),this.i=null,i=Nv(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(s),this.h+=1,this},mr.forEach=function(i,s){Th(this),this.g.forEach(function(n,r){B0(n,function(a){i.call(s,a,r,this)},this)},this)},mr.T=function(){Th(this);for(var i=this.g.R(),s=this.g.T(),n=[],r=0;r<s.length;r++)for(var a=i[r],o=0;o<a.length;o++)n.push(s[r]);return n},mr.R=function(i){Th(this);var s=[];if("string"==typeof i)cC(this,i)&&(s=Qg(s,this.g.get(Nv(this,i))));else{i=this.g.R();for(var n=0;n<i.length;n++)s=Qg(s,i[n])}return s},mr.set=function(i,s){return Th(this),this.i=null,cC(this,i=Nv(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[s]),this.h+=1,this},mr.get=function(i,s){return i&&0<(i=this.R(i)).length?String(i[0]):s},mr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],s=this.g.T(),n=0;n<s.length;n++){var r=s[n],a=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var u=a;""!==r[o]&&(u+="="+encodeURIComponent(String(r[o]))),i.push(u)}}return this.i=i.join("&")};var ZV=function i(s,n){(0,M.Z)(this,i),this.h=s,this.g=n};function Cx(i){this.l=i||Dx,i=Qr.PerformanceNavigationTiming?0<(i=Qr.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Qr.g&&Qr.g.Ea&&Qr.g.Ea()&&Qr.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Dx=10;function fC(i){return!!i.h||!!i.g&&i.g.size>=i.j}function dC(i){return i.h?1:i.g?i.g.size:0}function hb(i,s){return i.h?i.h==s:!!i.g&&i.g.has(s)}function fb(i,s){i.g?i.g.add(s):i.h=s}function xh(i,s){i.h&&i.h==s?i.h=null:i.g&&i.g.has(s)&&i.g.delete(s)}function py(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var r,s=i.i,n=(0,Ve.Z)(i.g.values());try{for(n.s();!(r=n.n()).done;)s=s.concat(r.value.D)}catch(o){n.e(o)}finally{n.f()}return s}return Sv(i.i)}function pC(){}function uL(){this.g=new pC}function BV(i,s,n){var r=n||"";try{oC(i,function(a,o){var u=a;Xg(a)&&(u=Kk(a)),s.push(r+o+"="+encodeURIComponent(u))})}catch(a){throw s.push(r+"type="+encodeURIComponent("_badmap")),a}}function vy(i,s,n,r,a){try{s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null,a(r)}catch(o){}}function cf(i){this.l=i.$b||null,this.j=i.ib||!1}function ud(i,s){Eu.call(this),this.D=i,this.u=s,this.m=void 0,this.readyState=vC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Cx.prototype.cancel=function(){if(this.i=py(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var s,i=(0,Ve.Z)(this.g.values());try{for(i.s();!(s=i.n()).done;)s.value.cancel()}catch(r){i.e(r)}finally{i.f()}this.g.clear()}},pC.prototype.stringify=function(i){return Qr.JSON.stringify(i,void 0)},pC.prototype.parse=function(i){return Qr.JSON.parse(i,void 0)},wo(cf,$0),cf.prototype.g=function(){return new ud(this.l,this.j)},cf.prototype.i=function(i){return function(){return i}}({}),wo(ud,Eu);var vC=0;function pb(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Zv(i){i.readyState=4,i.l=null,i.j=null,i.A=null,my(i)}function my(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(mr=ud.prototype).open=function(i,s){if(this.readyState!=vC)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=s,this.readyState=1,my(this)},mr.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var s={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(s.body=i),(this.D||Qr).fetch(new Request(this.B,s)).then(this.Va.bind(this),this.ha.bind(this))},mr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zv(this)),this.readyState=vC},mr.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,my(this)),this.g&&(this.readyState=3,my(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Qr.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pb(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},mr.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var s=i.value?i.value:new Uint8Array(0);(s=this.A.decode(s,{stream:!i.done}))&&(this.response=this.responseText+=s)}i.done?Zv(this):my(this),3==this.readyState&&pb(this)}},mr.Ua=function(i){this.g&&(this.response=this.responseText=i,Zv(this))},mr.Ta=function(i){this.g&&(this.response=i,Zv(this))},mr.ha=function(){this.g&&Zv(this)},mr.setRequestHeader=function(i,s){this.v.append(i,s)},mr.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},mr.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],s=this.h.entries(),n=s.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=s.next();return i.join("\r\n")},Object.defineProperty(ud.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(s){this.m=s?"include":"same-origin"}});var Sx=Qr.JSON.parse;function ko(i){Eu.call(this),this.headers=new Lv,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vb,this.K=this.L=!1}wo(ko,Eu);var vb="",lL=/^https?$/i,cL=["POST","PUT"];function Bv(i){return"content-type"==i.toLowerCase()}function mC(i,s){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=s,i.m=5,Tx(i),hf(i)}function Tx(i){i.D||(i.D=!0,Qo(i,"complete"),Qo(i,"error"))}function xx(i){if(i.h&&void 0!==L0&&(!i.C[1]||4!=ff(i)||2!=i.ba()))if(i.v&&4==ff(i))uy(i.Fa,0,i);else if(Qo(i,"readystatechange"),4==ff(i)){i.h=!1;try{var r,s=i.ba();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}if(!(r=n)){var a;if(a=0===s){var o=String(i.H).match(uC)[1]||null;if(!o&&Qr.self&&Qr.self.location){var u=Qr.self.location.protocol;o=u.substr(0,u.length-1)}a=!lL.test(o?o.toLowerCase():"")}r=a}if(r)Qo(i,"complete"),Qo(i,"success");else{i.m=6;try{var l=2<ff(i)?i.g.statusText:""}catch(f){l=""}i.j=l+" ["+i.ba()+"]",Tx(i)}}finally{hf(i)}}}function hf(i,s){if(i.g){Mx(i);var n=i.g,r=i.C[0]?Kg:null;i.g=null,i.C=null,s||Qo(i,"ready");try{n.onreadystatechange=r}catch(a){}}}function Mx(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Qr.clearTimeout(i.A),i.A=null)}function ff(i){return i.g?i.g.readyState:0}function Ix(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case vb:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(s){return null}}function Px(i,s,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(i){var s="";return Bk(i,function(n,r){s+=r,s+=":",s+=n,s+="\r\n"}),s}(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):As(i,s,n))}function gy(i,s,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||s}function gC(i){this.za=0,this.l=[],this.h=new Vc,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gy("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gy("baseRetryDelayMs",5e3,i),this.$a=gy("retryDelaySeedMs",1e4,i),this.Ya=gy("forwardChannelMaxRetries",2,i),this.ra=gy("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Cx(i&&i.concurrentRequestLimit),this.Ca=new uL,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Co(i){if(fL(i),3==i.G){var s=i.V++,n=Ah(i.F);As(n,"SID",i.J),As(n,"RID",s),As(n,"TYPE","terminate"),yy(i,n),(s=new Ov(i,i.h,s,void 0)).K=2,s.v=ob(Ah(n)),n=!1,Qr.navigator&&Qr.navigator.sendBeacon&&(n=Qr.navigator.sendBeacon(s.v.toString(),"")),!n&&Qr.Image&&((new Image).src=s.v,n=!0),n||(s.g=bC(s.l,null),s.g.ea(s.v)),s.F=Date.now(),nb(s)}Nx(i)}function mb(i){i.g&&(_C(i),i.g.cancel(),i.g=null)}function fL(i){mb(i),i.u&&(Qr.clearTimeout(i.u),i.u=null),yb(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Qr.clearTimeout(i.m),i.m=null)}function ld(i,s){i.l.push(new ZV(i.Za++,s)),3==i.G&&Uv(i)}function Uv(i){fC(i.i)||i.m||(i.m=!0,fx(i.Ha,i),i.C=0)}function dL(i,s){var n;n=s?s.m:i.V++;var r=Ah(i.F);As(r,"SID",i.J),As(r,"RID",n),As(r,"AID",i.U),yy(i,r),i.o&&i.s&&Px(r,i.o,i.s),n=new Ov(i,i.h,n,i.C+1),null===i.o&&(n.H=i.s),s&&(i.l=s.D.concat(i.l)),s=Fx(i,n,1e3),n.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),fb(i.i,n),iC(n,r,s)}function yy(i,s){i.j&&oC({},function(n,r){As(s,r,n)})}function Fx(i,s,n){n=Math.min(i.l.length,n);var r=i.j?Xo(i.j.Oa,i.j,i):null;e:for(var a=i.l,o=-1;;){var u=["count="+n];-1==o?0<n?u.push("ofs="+(o=a[0].h)):o=0:u.push("ofs="+o);for(var l=!0,f=0;f<n;f++){var m=a[f].h,b=a[f].g;if(0>(m-=o))o=Math.max(0,a[f].h-100),l=!1;else try{BV(b,u,"req"+m+"_")}catch(w){r&&r(b)}}if(l){r=u.join("&");break e}}return i=i.l.splice(0,n),s.D=i,r}function Rx(i){i.g||i.u||(i.Y=1,fx(i.Ga,i),i.A=0)}function gb(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Sh(Xo(i.Ga,i),Vv(i,i.A)),i.A++,0))}function _C(i){null!=i.B&&(Qr.clearTimeout(i.B),i.B=null)}function Ox(i){i.g=new Ov(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var s=Ah(i.oa);As(s,"RID","rpc"),As(s,"SID",i.J),As(s,"CI",i.N?"0":"1"),As(s,"AID",i.U),yy(i,s),As(s,"TYPE","xmlhttp"),i.o&&i.s&&Px(s,i.o,i.s),i.K&&i.g.setTimeout(i.K);var n=i.g;i=i.la,n.K=1,n.v=ob(Ah(s)),n.s=null,n.U=!0,xl(n,i)}function yb(i){null!=i.v&&(Qr.clearTimeout(i.v),i.v=null)}function Lx(i,s){var n=null;if(i.g==s){yb(i),_C(i),i.g=null;var r=2}else{if(!hb(i.i,s))return;n=s.D,xh(i.i,s),r=1}if(i.I=s.N,0!=i.G)if(s.i)if(1==r){n=s.s?s.s.length:0,s=Date.now()-s.F;var a=i.C;Qo(r=q0(),new Pv(r,n,s,a)),Uv(i)}else Rx(i);else if(3==(a=s.o)||0==a&&0<i.I||!(1==r&&function(i,s){return!(dC(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=s.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Sh(Xo(i.Ha,i,s),Vv(i,i.C)),i.C++,0)))}(i,s)||2==r&&gb(i)))switch(n&&0<n.length&&(s=i.i,s.i=s.i.concat(n)),a){case 1:Ap(i,5);break;case 4:Ap(i,10);break;case 3:Ap(i,6);break;default:Ap(i,2)}}function Vv(i,s){var n=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(n*=2),n*s}function Ap(i,s){if(i.h.info("Error code "+s),2==s){var n=null;i.j&&(n=null);var r=Xo(i.jb,i);n||(n=new Sp("//www.google.com/images/cleardot.gif"),Qr.location&&"http"==Qr.location.protocol||cy(n,"https"),ob(n)),function(i,s){var n=new Vc;if(Qr.Image){var r=new Image;r.onload=Z0(vy,n,r,"TestLoadImage: loaded",!0,s),r.onerror=Z0(vy,n,r,"TestLoadImage: error",!1,s),r.onabort=Z0(vy,n,r,"TestLoadImage: abort",!1,s),r.ontimeout=Z0(vy,n,r,"TestLoadImage: timeout",!1,s),Qr.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=i}else s(!1)}(n.toString(),r)}else Eo(2);i.G=0,i.j&&i.j.va(s),Nx(i),fL(i)}function Nx(i){i.G=0,i.I=-1,i.j&&((0!=py(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Sv(i.l),i.l.length=0),i.j.ua())}function Zx(i,s,n){var r=function(i){return i instanceof Sp?Ah(i):new Sp(i,void 0)}(n);if(""!=r.i)s&&ab(r,s+"."+r.i),ec(r,r.m);else{var a=Qr.location;r=function(i,s,n,r){var a=new Sp(null,void 0);return i&&cy(a,i),s&&ab(a,s),n&&ec(a,n),r&&(a.l=r),a}(a.protocol,s?s+"."+a.hostname:a.hostname,+a.port,n)}return i.aa&&Bk(i.aa,function(o,u){As(r,u,o)}),n=i.sa,(s=i.D)&&n&&As(r,s,n),As(r,"VER",i.ma),yy(i,r),r}function bC(i,s,n){if(s&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(s=new ko(n&&i.Ba&&!i.qa?new cf({ib:!0}):i.qa)).L=i.H,s}function Bx(){}function wC(){if(Av&&!(10<=Number(qO)))throw Error("Environmental error: no available transport.")}function tc(i,s){Eu.call(this),this.g=new gC(s),this.l=i,this.h=s&&s.messageUrlParams||null,i=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(i?i["X-WebChannel-Content-Type"]=s.messageContentType:i={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.ya&&(i?i["X-WebChannel-Client-Profile"]=s.ya:i={"X-WebChannel-Client-Profile":s.ya}),this.g.P=i,(i=s&&s.httpHeadersOverwriteParam)&&!Jg(i)&&(this.g.o=i),this.A=s&&s.supportsCrossDomainXhr||!1,this.v=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!Jg(s)&&(this.g.D=s,null!==(i=this.h)&&s in i&&s in(i=this.h)&&delete i[s]),this.j=new Tp(this)}function Ux(i){Rv.call(this);var s=i.__sm__;if(s){e:{for(var n in s){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,s=null!==s&&i in s?s[i]:void 0),this.data=s}else this.data=i}function pL(){tC.call(this),this.status=1}function Tp(i){this.g=i}(mr=ko.prototype).ea=function(i,s,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);s=s?s.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():J0.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:J0),this.g.onreadystatechange=Xo(this.Fa,this);try{this.F=!0,this.g.open(s,String(i),!0),this.F=!1}catch(o){return void mC(this,o)}i=n||"";var a=new Lv(this.headers);r&&oC(r,function(o,u){a.set(u,o)}),r=function(i){e:{for(var s=Bv,n=i.length,r="string"==typeof i?i.split(""):i,a=0;a<n;a++)if(a in r&&s.call(void 0,r[a],a,i)){s=a;break e}s=-1}return 0>s?null:"string"==typeof i?i.charAt(s):i[s]}(a.T()),n=Qr.FormData&&i instanceof Qr.FormData,!(0<=Nk(cL,s))||r||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(o,u){this.g.setRequestHeader(u,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mx(this),0<this.B&&((this.K=function(i){return Av&&ox()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xo(this.pa,this)):this.A=uy(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(o){mC(this,o)}},mr.pa=function(){void 0!==L0&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qo(this,"timeout"),this.abort(8))},mr.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Qo(this,"complete"),Qo(this,"abort"),hf(this))},mr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hf(this,!0)),ko.Z.M.call(this)},mr.Fa=function(){this.s||(this.F||this.v||this.l?xx(this):this.cb())},mr.cb=function(){xx(this)},mr.ba=function(){try{return 2<ff(this)?this.g.status:-1}catch(i){return-1}},mr.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},mr.Qa=function(i){if(this.g){var s=this.g.responseText;return i&&0==s.indexOf(i)&&(s=s.substring(i.length)),Sx(s)}},mr.Da=function(){return this.m},mr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(mr=gC.prototype).ma=8,mr.G=1,mr.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(s){}},mr.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var s=new Ov(this,this.h,i,void 0),n=this.s;if(this.P&&(n?V0(n=rx(n),this.P):n=this.P),null===this.o&&(s.H=n),this.ja)e:{for(var r=0,a=0;a<this.l.length;a++){var o=this.l[a];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=a;break e}if(4096===r||a===this.l.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=Fx(this,s,r),As(a=Ah(this.F),"RID",i),As(a,"CVER",22),this.D&&As(a,"X-HTTP-Session-Id",this.D),yy(this,a),this.o&&n&&Px(a,this.o,n),fb(this.i,s),this.Ra&&As(a,"TYPE","init"),this.ja?(As(a,"$req",r),As(a,"SID","null"),s.$=!0,iC(s,a,null)):iC(s,a,r),this.G=2}}else 3==this.G&&(i?dL(this,i):0==this.l.length||fC(this.i)||dL(this))},mr.Ga=function(){if(this.u=null,Ox(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Sh(Xo(this.bb,this),i)}},mr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Eo(10),mb(this),Ox(this))},mr.ab=function(){null!=this.v&&(this.v=null,mb(this),gb(this),Eo(19))},mr.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Eo(2)):(this.h.info("Failed to ping google.com"),Eo(1))},(mr=Bx.prototype).xa=function(){},mr.wa=function(){},mr.va=function(){},mr.ua=function(){},mr.Oa=function(){},wC.prototype.g=function(i,s){return new tc(i,s)},wo(tc,Eu),tc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,s=this.l,n=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),fx(Xo(i.hb,i,s))),Eo(0),i.W=s,i.aa=n||{},i.N=i.X,i.F=Zx(i,null,i.W),Uv(i)},tc.prototype.close=function(){Co(this.g)},tc.prototype.u=function(i){if("string"==typeof i){var s={};s.__data__=i,ld(this.g,s)}else this.v?((s={}).__data__=Kk(i),ld(this.g,s)):ld(this.g,i)},tc.prototype.M=function(){this.g.j=null,delete this.j,Co(this.g),delete this.g,tc.Z.M.call(this)},wo(Ux,Rv),wo(pL,tC),wo(Tp,Bx),Tp.prototype.xa=function(){Qo(this.g,"a")},Tp.prototype.wa=function(i){Qo(this.g,new Ux(i))},Tp.prototype.va=function(i){Qo(this.g,new pL(i))},Tp.prototype.ua=function(){Qo(this.g,"b")},wC.prototype.createWebChannel=wC.prototype.g,tc.prototype.send=tc.prototype.u,tc.prototype.open=tc.prototype.m,tc.prototype.close=tc.prototype.close,K0.NO_ERROR=0,K0.TIMEOUT=8,K0.HTTP_ERROR=6,eC.COMPLETE="complete",Q0.EventType=Fv,Fv.OPEN="a",Fv.CLOSE="b",Fv.ERROR="c",Fv.MESSAGE="d",Eu.prototype.listen=Eu.prototype.N,ko.prototype.listenOnce=ko.prototype.O,ko.prototype.getLastError=ko.prototype.La,ko.prototype.getLastErrorCode=ko.prototype.Da,ko.prototype.getStatus=ko.prototype.ba,ko.prototype.getResponseJson=ko.prototype.Qa,ko.prototype.getResponseText=ko.prototype.ga,ko.prototype.send=ko.prototype.ea;var UV=of.createWebChannelTransport=function(){return new wC},vL=of.getStatEventTarget=function(){return q0()},EC=of.ErrorCode=K0,mL=of.EventType=eC,VV=of.Event=od,gL=of.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},kC=of.FetchXmlHttpFactory=cf,_b=of.WebChannel=Q0,Vx=of.XhrIo=ko,Jo=function(){function i(s){(0,M.Z)(this,i),this.uid=s}return(0,R.Z)(i,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(n){return n.uid===this.uid}}]),i}();Jo.UNAUTHENTICATED=new Jo(null),Jo.GOOGLE_CREDENTIALS=new Jo("google-credentials-uid"),Jo.FIRST_PARTY=new Jo("first-party-uid"),Jo.MOCK_USER=new Jo("mock-user");var _y="9.1.0",io=new kh.Yd("@firebase/firestore");function CC(){return io.logLevel}function Rn(i){if(io.logLevel<=kh.in.DEBUG){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a=n.map(bb);io.debug.apply(io,["Firestore (".concat(_y,"): ").concat(i)].concat((0,Kr.Z)(a)))}}function ao(i){if(io.logLevel<=kh.in.ERROR){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a=n.map(bb);io.error.apply(io,["Firestore (".concat(_y,"): ").concat(i)].concat((0,Kr.Z)(a)))}}function zv(i){if(io.logLevel<=kh.in.WARN){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a=n.map(bb);io.warn.apply(io,["Firestore (".concat(_y,"): ").concat(i)].concat((0,Kr.Z)(a)))}}function bb(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(n){return i}}function Sr(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",s="FIRESTORE (".concat(_y,") INTERNAL ASSERTION FAILED: ")+i;throw ao(s),new Error(s)}function Jr(i,s){i||Sr()}function Un(i,s){return i}var Kt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},pn=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,a)).code=r,o.message=a,o.name="FirebaseError",o.toString=function(){return"".concat(o.name,": [code=").concat(o.code,"]: ").concat(o.message)},o}return n}((0,Lk.Z)(Error)),eu=function i(){var s=this;(0,M.Z)(this,i),this.promise=new Promise(function(n,r){s.resolve=n,s.reject=r})},Hx=function i(s,n){(0,M.Z)(this,i),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(s)},yL=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(n,r){n.enqueueRetryable(function(){return r(Jo.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),i}(),_L=function(){function i(s){(0,M.Z)(this,i),this.token=s,this.changeListener=null}return(0,R.Z)(i,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(n,r){var a=this;this.changeListener=r,n.enqueueRetryable(function(){return r(a.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),i}(),bL=function(){function i(s){(0,M.Z)(this,i),this.t=s,this.currentUser=Jo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,R.Z)(i,[{key:"start",value:function(n,r){var a=this,o=this.i,u=function(w){return a.i!==o?(o=a.i,r(w)):Promise.resolve()},l=new eu;this.o=function(){a.i++,a.currentUser=a.u(),l.resolve(),l=new eu,n.enqueueRetryable(function(){return u(a.currentUser)})};var f=function(){var w=l;n.enqueueRetryable((0,Qt.Z)(Ke().mark(function C(){return Ke().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,w.promise;case 2:return I.next=4,u(a.currentUser);case 4:case"end":return I.stop()}},C)})))},m=function(w){Rn("FirebaseCredentialsProvider","Auth detected"),a.auth=w,a.auth.addAuthTokenListener(a.o),f()};this.t.onInit(function(b){return m(b)}),setTimeout(function(){if(!a.auth){var b=a.t.getImmediate({optional:!0});b?m(b):(Rn("FirebaseCredentialsProvider","Auth not yet detected"),l.resolve(),l=new eu)}},0),f()}},{key:"getToken",value:function(){var n=this,r=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(function(o){return n.i!==r?(Rn("FirebaseCredentialsProvider","getToken aborted due to token change."),n.getToken()):o?(Jr("string"==typeof o.accessToken),new Hx(o.accessToken,n.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var n=this.auth&&this.auth.getUid();return Jr(null===n||"string"==typeof n),new Jo(n)}}]),i}(),wL=function(){function i(s,n,r){(0,M.Z)(this,i),this.h=s,this.l=n,this.m=r,this.type="FirstParty",this.user=Jo.FIRST_PARTY}return(0,R.Z)(i,[{key:"authHeaders",get:function(){var n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}]),i}(),wb=function(){function i(s,n,r){(0,M.Z)(this,i),this.h=s,this.l=n,this.m=r}return(0,R.Z)(i,[{key:"getToken",value:function(){return Promise.resolve(new wL(this.h,this.l,this.m))}},{key:"start",value:function(n,r){n.enqueueRetryable(function(){return r(Jo.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),i}(),tu=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.previousValue=s,n&&(n.sequenceNumberHandler=function(a){return r.g(a)},this.p=function(a){return n.writeSequenceNumber(a)})}return(0,R.Z)(i,[{key:"g",value:function(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}},{key:"next",value:function(){var n=++this.previousValue;return this.p&&this.p(n),n}}]),i}();function Gx(i){var s="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(s&&"function"==typeof s.getRandomValues)s.getRandomValues(n);else for(var r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}tu.T=-1;var cd=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,null,[{key:"I",value:function(){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length,a="";a.length<20;)for(var o=Gx(40),u=0;u<o.length;++u)a.length<20&&o[u]<r&&(a+=n.charAt(o[u]%n.length));return a}}]),i}();function Si(i,s){return i<s?-1:i>s?1:0}function Hv(i,s,n){return i.length===s.length&&i.every(function(r,a){return n(r,s[a])})}function jx(i){return i+"\0"}var Nu=function(){function i(s,n){if((0,M.Z)(this,i),this.seconds=s,this.nanoseconds=n,n<0)throw new pn(Kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pn(Kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(s<-62135596800)throw new pn(Kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s);if(s>=253402300800)throw new pn(Kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s)}return(0,R.Z)(i,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(n){return this.seconds===n.seconds?Si(this.nanoseconds,n.nanoseconds):Si(this.seconds,n.seconds)}},{key:"isEqual",value:function(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return i.fromMillis(Date.now())}},{key:"fromDate",value:function(n){return i.fromMillis(n.getTime())}},{key:"fromMillis",value:function(n){var r=Math.floor(n/1e3);return new i(r,Math.floor(1e6*(n-1e3*r)))}}]),i}(),$r=function(){function i(s){(0,M.Z)(this,i),this.timestamp=s}return(0,R.Z)(i,[{key:"compareTo",value:function(n){return this.timestamp._compareTo(n.timestamp)}},{key:"isEqual",value:function(n){return this.timestamp.isEqual(n.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(n){return new i(n)}},{key:"min",value:function(){return new i(new Nu(0,0))}}]),i}();function Gv(i){var s=0;for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&s++;return s}function Ys(i,s){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&s(n,i[n])}function hd(i){for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s))return!1;return!0}var by=function(){function i(s,n,r){(0,M.Z)(this,i),void 0===n?n=0:n>s.length&&Sr(),void 0===r?r=s.length-n:r>s.length-n&&Sr(),this.segments=s,this.offset=n,this.len=r}return(0,R.Z)(i,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(n){return 0===i.comparator(this,n)}},{key:"child",value:function(n){var r=this.segments.slice(this.offset,this.limit());return n instanceof i?n.forEach(function(a){r.push(a)}):r.push(n),this.construct(r)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(n){return this.segments[this.offset+n]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(n){if(n.length<this.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}},{key:"isImmediateParentOf",value:function(n){if(this.length+1!==n.length)return!1;for(var r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}},{key:"forEach",value:function(n){for(var r=this.offset,a=this.limit();r<a;r++)n(this.segments[r])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(n,r){for(var a=Math.min(n.length,r.length),o=0;o<a;o++){var u=n.get(o),l=r.get(o);if(u<l)return-1;if(u>l)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}]),i}(),yi=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"construct",value:function(a,o,u){return new n(a,o,u)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var a=[],o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];for(var f=0,m=u;f<m.length;f++){var b=m[f];if(b.indexOf("//")>=0)throw new pn(Kt.INVALID_ARGUMENT,"Invalid segment (".concat(b,"). Paths must not contain // in them."));a.push.apply(a,(0,Kr.Z)(b.split("/").filter(function(w){return w.length>0})))}return new n(a)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(by),DC=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zu=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"construct",value:function(a,o,u){return new n(a,o,u)}},{key:"canonicalString",value:function(){return this.toArray().map(function(a){return a=a.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(a)||(a="`"+a+"`"),a}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(a){return DC.test(a)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(a){for(var o=[],u="",l=0,f=function(){if(0===u.length)throw new pn(Kt.INVALID_ARGUMENT,"Invalid field path (".concat(a,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));o.push(u),u=""},m=!1;l<a.length;){var b=a[l];if("\\"===b){if(l+1===a.length)throw new pn(Kt.INVALID_ARGUMENT,"Path has trailing escape character: "+a);var w=a[l+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new pn(Kt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+a);u+=w,l+=2}else"`"===b?(m=!m,l++):"."!==b||m?(u+=b,l++):(f(),l++)}if(f(),m)throw new pn(Kt.INVALID_ARGUMENT,"Unterminated ` in path: "+a);return new n(o)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(by),zc=function(){function i(s){(0,M.Z)(this,i),this.fields=s,s.sort(Zu.comparator)}return(0,R.Z)(i,[{key:"covers",value:function(n){var a,r=(0,Ve.Z)(this.fields);try{for(r.s();!(a=r.n()).done;)if(a.value.isPrefixOf(n))return!0}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"isEqual",value:function(n){return Hv(this.fields,n.fields,function(r,a){return r.isEqual(a)})}}]),i}(),nu=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.binaryString=n}return(0,R.Z)(s,[{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(r){for(var a=new Uint8Array(r.length),o=0;o<r.length;o++)a[o]=r.charCodeAt(o);return a}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(r){return Si(this.binaryString,r.binaryString)}},{key:"isEqual",value:function(r){return this.binaryString===r.binaryString}}],[{key:"fromBase64String",value:function(r){return new s(atob(r))}},{key:"fromUint8Array",value:function(r){return new s(function(o){for(var u="",l=0;l<o.length;++l)u+=String.fromCharCode(o[l]);return u}(r))}}]),s}();return i.EMPTY_BYTE_STRING=new i(""),i}(),Wv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(i){if(Jr(!!i),"string"==typeof i){var s=0,n=Wv.exec(i);if(Jr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),s=Number(r)}var a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:s}}return{seconds:ms(i.seconds),nanos:ms(i.nanos)}}function ms(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Hc(i){return"string"==typeof i?nu.fromBase64String(i):nu.fromUint8Array(i)}function fd(i){var s,n;return"server_timestamp"===(null===(n=((null===(s=null==i?void 0:i.mapValue)||void 0===s?void 0:s.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function SC(i){var s=i.mapValue.fields.__previous_value__;return fd(s)?SC(s):s}function qv(i){var s=nc(i.mapValue.fields.__local_write_time__.timestampValue);return new Nu(s.seconds,s.nanos)}function dd(i){return null==i}function wy(i){return 0===i&&1/i==-1/0}function AC(i){return"number"==typeof i&&Number.isInteger(i)&&!wy(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var Fr=function(){function i(s){(0,M.Z)(this,i),this.path=s}return(0,R.Z)(i,[{key:"hasCollectionId",value:function(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}},{key:"isEqual",value:function(n){return null!==n&&0===yi.comparator(this.path,n.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(n){return new i(yi.fromString(n))}},{key:"fromName",value:function(n){return new i(yi.fromString(n).popFirst(5))}},{key:"comparator",value:function(n,r){return yi.comparator(n.path,r.path)}},{key:"isDocumentKey",value:function(n){return n.length%2==0}},{key:"fromSegments",value:function(n){return new i(new yi(n.slice()))}}]),i}();function pd(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?fd(i)?4:10:Sr()}function Gc(i,s){var a,n=pd(i);if(n!==pd(s))return!1;switch(n){case 0:return!0;case 1:return i.booleanValue===s.booleanValue;case 4:return qv(i).isEqual(qv(s));case 3:return function(r,a){if("string"==typeof r.timestampValue&&"string"==typeof a.timestampValue&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;var o=nc(r.timestampValue),u=nc(a.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(i,s);case 5:return i.stringValue===s.stringValue;case 6:return a=s,Hc(i.bytesValue).isEqual(Hc(a.bytesValue));case 7:return i.referenceValue===s.referenceValue;case 8:return function(r,a){return ms(r.geoPointValue.latitude)===ms(a.geoPointValue.latitude)&&ms(r.geoPointValue.longitude)===ms(a.geoPointValue.longitude)}(i,s);case 2:return function(r,a){if("integerValue"in r&&"integerValue"in a)return ms(r.integerValue)===ms(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){var o=ms(r.doubleValue),u=ms(a.doubleValue);return o===u?wy(o)===wy(u):isNaN(o)&&isNaN(u)}return!1}(i,s);case 9:return Hv(i.arrayValue.values||[],s.arrayValue.values||[],Gc);case 10:return function(r,a){var o=r.mapValue.fields||{},u=a.mapValue.fields||{};if(Gv(o)!==Gv(u))return!1;for(var l in o)if(o.hasOwnProperty(l)&&(void 0===u[l]||!Gc(o[l],u[l])))return!1;return!0}(i,s);default:return Sr()}}function Yv(i,s){return void 0!==(i.values||[]).find(function(n){return Gc(n,s)})}function Kv(i,s){var a,o,u,l,n=pd(i),r=pd(s);if(n!==r)return Si(n,r);switch(n){case 0:return 0;case 1:return Si(i.booleanValue,s.booleanValue);case 2:return o=s,(u=ms((a=i).integerValue||a.doubleValue))<(l=ms(o.integerValue||o.doubleValue))?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1;case 3:return TC(i.timestampValue,s.timestampValue);case 4:return TC(qv(i),qv(s));case 5:return Si(i.stringValue,s.stringValue);case 6:return function(a,o){var u=Hc(a),l=Hc(o);return u.compareTo(l)}(i.bytesValue,s.bytesValue);case 7:return function(a,o){for(var u=a.split("/"),l=o.split("/"),f=0;f<u.length&&f<l.length;f++){var m=Si(u[f],l[f]);if(0!==m)return m}return Si(u.length,l.length)}(i.referenceValue,s.referenceValue);case 8:return function(a,o){var u=Si(ms(a.latitude),ms(o.latitude));return 0!==u?u:Si(ms(a.longitude),ms(o.longitude))}(i.geoPointValue,s.geoPointValue);case 9:return function(a,o){for(var u=a.values||[],l=o.values||[],f=0;f<u.length&&f<l.length;++f){var m=Kv(u[f],l[f]);if(m)return m}return Si(u.length,l.length)}(i.arrayValue,s.arrayValue);case 10:return function(a,o){var u=a.fields||{},l=Object.keys(u),f=o.fields||{},m=Object.keys(f);l.sort(),m.sort();for(var b=0;b<l.length&&b<m.length;++b){var w=Si(l[b],m[b]);if(0!==w)return w;var C=Kv(u[l[b]],f[m[b]]);if(0!==C)return C}return Si(l.length,m.length)}(i.mapValue,s.mapValue);default:throw Sr()}}function TC(i,s){if("string"==typeof i&&"string"==typeof s&&i.length===s.length)return Si(i,s);var n=nc(i),r=nc(s),a=Si(n.seconds,r.seconds);return 0!==a?a:Si(n.nanos,r.nanos)}function xC(i){return Eb(i)}function Eb(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(a=nc(i.timestampValue),"time(".concat(a.seconds,",").concat(a.nanos,")")):"stringValue"in i?i.stringValue:"bytesValue"in i?Hc(i.bytesValue).toBase64():"referenceValue"in i?Fr.fromName(i.referenceValue).toString():"geoPointValue"in i?"geo(".concat((s=i.geoPointValue).latitude,",").concat(s.longitude,")"):"arrayValue"in i?function(r){var l,a="[",o=!0,u=(0,Ve.Z)(r.values||[]);try{for(u.s();!(l=u.n()).done;)o?o=!1:a+=",",a+=Eb(l.value)}catch(m){u.e(m)}finally{u.f()}return a+"]"}(i.arrayValue):"mapValue"in i?function(r){var f,a=Object.keys(r.fields||{}).sort(),o="{",u=!0,l=(0,Ve.Z)(a);try{for(l.s();!(f=l.n()).done;){var m=f.value;u?u=!1:o+=",",o+="".concat(m,":").concat(Eb(r.fields[m]))}}catch(b){l.e(b)}finally{l.f()}return o+"}"}(i.mapValue):Sr();var a,s}function Ey(i,s){return{referenceValue:"projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(s.path.canonicalString())}}function MC(i){return!!i&&"integerValue"in i}function IC(i){return!!i&&"arrayValue"in i}function Wx(i){return!!i&&"nullValue"in i}function PC(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function kb(i){return!!i&&"mapValue"in i}function $v(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){var s={mapValue:{fields:{}}};return Ys(i.mapValue.fields,function(a,o){return s.mapValue.fields[a]=$v(o)}),s}if(i.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=$v(i.arrayValue.values[r]);return n}return Object.assign({},i)}var rc=function(){function i(s){(0,M.Z)(this,i),this.value=s}return(0,R.Z)(i,[{key:"field",value:function(n){if(n.isEmpty())return this.value;for(var r=this.value,a=0;a<n.length-1;++a)if(!kb(r=(r.mapValue.fields||{})[n.get(a)]))return null;return(r=(r.mapValue.fields||{})[n.lastSegment()])||null}},{key:"set",value:function(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=$v(r)}},{key:"setAll",value:function(n){var r=this,a=Zu.emptyPath(),o={},u=[];n.forEach(function(f,m){if(!a.isImmediateParentOf(m)){var b=r.getFieldsMap(a);r.applyChanges(b,o,u),o={},u=[],a=m.popLast()}f?o[m.lastSegment()]=$v(f):u.push(m.lastSegment())});var l=this.getFieldsMap(a);this.applyChanges(l,o,u)}},{key:"delete",value:function(n){var r=this.field(n.popLast());kb(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}},{key:"isEqual",value:function(n){return Gc(this.value,n.value)}},{key:"getFieldsMap",value:function(n){var r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(var a=0;a<n.length;++a){var o=r.mapValue.fields[n.get(a)];kb(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},r.mapValue.fields[n.get(a)]=o),r=o}return r.mapValue.fields}},{key:"applyChanges",value:function(n,r,a){Ys(r,function(f,m){return n[f]=m});var u,o=(0,Ve.Z)(a);try{for(o.s();!(u=o.n()).done;)delete n[u.value]}catch(f){o.e(f)}finally{o.f()}}},{key:"clone",value:function(){return new i($v(this.value))}}],[{key:"empty",value:function(){return new i({mapValue:{}})}}]),i}();function qx(i){var s=[];return Ys(i.fields,function(n,r){var a=new Zu([n]);if(kb(r)){var o=qx(r.mapValue).fields;if(0===o.length)s.push(a);else{var l,u=(0,Ve.Z)(o);try{for(u.s();!(l=u.n()).done;)s.push(a.child(l.value))}catch(m){u.e(m)}finally{u.f()}}}else s.push(a)}),new zc(s)}var ku=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.key=s,this.documentType=n,this.version=r,this.data=a,this.documentState=o}return(0,R.Z)(i,[{key:"convertToFoundDocument",value:function(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}},{key:"convertToNoDocument",value:function(n){return this.version=n,this.documentType=2,this.data=rc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(n){return this.version=n,this.documentType=3,this.data=rc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(n){return n instanceof i&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}},{key:"clone",value:function(){return new i(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(n){return new i(n,0,$r.min(),rc.empty(),0)}},{key:"newFoundDocument",value:function(n,r,a){return new i(n,1,r,a,0)}},{key:"newNoDocument",value:function(n,r){return new i(n,2,r,rc.empty(),0)}},{key:"newUnknownDocument",value:function(n,r){return new i(n,3,r,rc.empty(),2)}}]),i}(),EL=function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;(0,M.Z)(this,i),this.path=s,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=u,this.endAt=l,this.A=null};function FC(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new EL(i,s,n,r,a,o,u)}function ky(i){var s=Un(i);if(null===s.A){var n=s.path.canonicalString();null!==s.collectionGroup&&(n+="|cg:"+s.collectionGroup),n+="|f:",n+=s.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+xC(i.value)}(r)}).join(","),n+="|ob:",n+=s.orderBy.map(function(r){return(a=r).field.canonicalString()+a.dir;var a}).join(","),dd(s.limit)||(n+="|l:",n+=s.limit),s.startAt&&(n+="|lb:",n+=NC(s.startAt)),s.endAt&&(n+="|ub:",n+=NC(s.endAt)),s.A=n}return s.A}function RC(i,s){if(i.limit!==s.limit||i.orderBy.length!==s.orderBy.length)return!1;for(var n=0;n<i.orderBy.length;n++)if(!Jv(i.orderBy[n],s.orderBy[n]))return!1;if(i.filters.length!==s.filters.length)return!1;for(var r=0;r<i.filters.length;r++)if((a=i.filters[r]).op!==(o=s.filters[r]).op||!a.field.isEqual(o.field)||!Gc(a.value,o.value))return!1;var a,o;return i.collectionGroup===s.collectionGroup&&!!i.path.isEqual(s.path)&&!!ZC(i.startAt,s.startAt)&&ZC(i.endAt,s.endAt)}function Cb(i){return Fr.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}var wc=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).field=r,u.op=a,u.value=o,u}return(0,R.Z)(n,[{key:"matches",value:function(a){var o=a.data.field(this.field);return"!="===this.op?null!==o&&this.P(Kv(o,this.value)):null!==o&&pd(this.value)===pd(o)&&this.P(Kv(o,this.value))}},{key:"P",value:function(a){switch(this.op){case"<":return a<0;case"<=":return a<=0;case"==":return 0===a;case"!=":return 0!==a;case">":return a>0;case">=":return a>=0;default:return Sr()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(a,o,u){return a.isKeyField()?"in"===o||"not-in"===o?this.R(a,o,u):new DL(a,o,u):"array-contains"===o?new HV(a,u):"in"===o?new GV(a,u):"not-in"===o?new jV(a,u):"array-contains-any"===o?new SL(a,u):new n(a,o,u)}},{key:"R",value:function(a,o,u){return"in"===o?new OC(a,u):new LC(a,u)}}]),n}(function(){return function i(){(0,M.Z)(this,i)}}()),DL=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a,o)).key=Fr.fromName(o.referenceValue),u}return(0,R.Z)(n,[{key:"matches",value:function(a){var o=Fr.comparator(a.key,this.key);return this.P(o)}}]),n}(wc),OC=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,"in",a)).keys=Yx(0,a),o}return(0,R.Z)(n,[{key:"matches",value:function(a){return this.keys.some(function(o){return o.isEqual(a.key)})}}]),n}(wc),LC=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,"not-in",a)).keys=Yx(0,a),o}return(0,R.Z)(n,[{key:"matches",value:function(a){return!this.keys.some(function(o){return o.isEqual(a.key)})}}]),n}(wc);function Yx(i,s){var n;return((null===(n=s.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(r){return Fr.fromName(r.referenceValue)})}var HV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"array-contains",a)}return(0,R.Z)(n,[{key:"matches",value:function(a){var o=a.data.field(this.field);return IC(o)&&Yv(o.arrayValue,this.value)}}]),n}(wc),GV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"in",a)}return(0,R.Z)(n,[{key:"matches",value:function(a){var o=a.data.field(this.field);return null!==o&&Yv(this.value.arrayValue,o)}}]),n}(wc),jV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"not-in",a)}return(0,R.Z)(n,[{key:"matches",value:function(a){if(Yv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var o=a.data.field(this.field);return null!==o&&!Yv(this.value.arrayValue,o)}}]),n}(wc),SL=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,"array-contains-any",a)}return(0,R.Z)(n,[{key:"matches",value:function(a){var o=this,u=a.data.field(this.field);return!(!IC(u)||!u.arrayValue.values)&&u.arrayValue.values.some(function(l){return Yv(o.value.arrayValue,l)})}}]),n}(wc),Xv=function i(s,n){(0,M.Z)(this,i),this.position=s,this.before=n};function NC(i){return"".concat(i.before?"b":"a",":").concat(i.position.map(function(s){return xC(s)}).join(","))}var Qv=function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";(0,M.Z)(this,i),this.field=s,this.dir=n};function Jv(i,s){return i.dir===s.dir&&i.field.isEqual(s.field)}function Kx(i,s,n){for(var r=0,a=0;a<i.position.length;a++){var o=s[a],u=i.position[a];if(r=o.field.isKeyField()?Fr.comparator(Fr.fromName(u.referenceValue),n.key):Kv(u,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return i.before?r<=0:r<0}function ZC(i,s){if(null===i)return null===s;if(null===s||i.before!==s.before||i.position.length!==s.position.length)return!1;for(var n=0;n<i.position.length;n++)if(!Gc(i.position[n],s.position[n]))return!1;return!0}var df=function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;(0,M.Z)(this,i),this.path=s,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=u,this.startAt=l,this.endAt=f,this.V=null,this.S=null};function BC(i,s,n,r,a,o,u,l){return new df(i,s,n,r,a,o,u,l)}function xp(i){return new df(i)}function Db(i){return!dd(i.limit)&&"F"===i.limitType}function Cy(i){return!dd(i.limit)&&"L"===i.limitType}function UC(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function VC(i){var n,s=(0,Ve.Z)(i.filters);try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r.v())return r.field}}catch(a){s.e(a)}finally{s.f()}return null}function zC(i){return null!==i.collectionGroup}function Dy(i){var s=Un(i);if(null===s.V){s.V=[];var n=VC(s),r=UC(s);if(null!==n&&null===r)n.isKeyField()||s.V.push(new Qv(n)),s.V.push(new Qv(Zu.keyField(),"asc"));else{var u,a=!1,o=(0,Ve.Z)(s.explicitOrderBy);try{for(o.s();!(u=o.n()).done;){var l=u.value;s.V.push(l),l.field.isKeyField()&&(a=!0)}}catch(m){o.e(m)}finally{o.f()}if(!a){var f=s.explicitOrderBy.length>0?s.explicitOrderBy[s.explicitOrderBy.length-1].dir:"asc";s.V.push(new Qv(Zu.keyField(),f))}}}return s.V}function Ec(i){var s=Un(i);if(!s.S)if("F"===s.limitType)s.S=FC(s.path,s.collectionGroup,Dy(s),s.filters,s.limit,s.startAt,s.endAt);else{var a,n=[],r=(0,Ve.Z)(Dy(s));try{for(r.s();!(a=r.n()).done;){var o=a.value;n.push(new Qv(o.field,"desc"===o.dir?"asc":"desc"))}}catch(m){r.e(m)}finally{r.f()}var l=s.endAt?new Xv(s.endAt.position,!s.endAt.before):null,f=s.startAt?new Xv(s.startAt.position,!s.startAt.before):null;s.S=FC(s.path,s.collectionGroup,n,s.filters,s.limit,l,f)}return s.S}function HC(i,s,n){return new df(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),s,n,i.startAt,i.endAt)}function Sy(i,s){return RC(Ec(i),Ec(s))&&i.limitType===s.limitType}function GC(i){return"".concat(ky(Ec(i)),"|lt:").concat(i.limitType)}function Sb(i){return"Query(target=".concat(function(i){var s=i.path.canonicalString();return null!==i.collectionGroup&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=", filters: [".concat(i.filters.map(function(n){return"".concat((r=n).field.canonicalString()," ").concat(r.op," ").concat(xC(r.value));var r}).join(", "),"]")),dd(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=", orderBy: [".concat(i.orderBy.map(function(n){return"".concat((r=n).field.canonicalString()," (").concat(r.dir,")");var r}).join(", "),"]")),i.startAt&&(s+=", startAt: "+NC(i.startAt)),i.endAt&&(s+=", endAt: "+NC(i.endAt)),"Target(".concat(s,")")}(Ec(i)),"; limitType=").concat(i.limitType,")")}function Mp(i,s){return s.isFoundDocument()&&(a=(r=s).key.path,null!==(n=i).collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):Fr.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a))&&function(n,r){var o,a=(0,Ve.Z)(n.explicitOrderBy);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(!u.field.isKeyField()&&null===r.data.field(u.field))return!1}}catch(l){a.e(l)}finally{a.f()}return!0}(i,s)&&function(n,r){var o,a=(0,Ve.Z)(n.filters);try{for(a.s();!(o=a.n()).done;)if(!o.value.matches(r))return!1}catch(l){a.e(l)}finally{a.f()}return!0}(i,s)&&function(n,r){return!(n.startAt&&!Kx(n.startAt,Dy(n),r)||n.endAt&&Kx(n.endAt,Dy(n),r))}(i,s);var n,r,a}function AL(i){return function(s,n){var o,r=!1,a=(0,Ve.Z)(Dy(i));try{for(a.s();!(o=a.n()).done;){var u=o.value,l=WV(u,s,n);if(0!==l)return l;r=r||u.field.isKeyField()}}catch(f){a.e(f)}finally{a.f()}return 0}}function WV(i,s,n){var a,u,l,f,r=i.field.isKeyField()?Fr.comparator(s.key,n.key):(u=n,l=s.data.field(a=i.field),f=u.data.field(a),null!==l&&null!==f?Kv(l,f):Sr());switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Sr()}}function TL(i,s){if(i.D){if(isNaN(s))return{doubleValue:"NaN"};if(s===1/0)return{doubleValue:"Infinity"};if(s===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wy(s)?"-0":s}}function xL(i){return{integerValue:""+i}}function em(i,s){return AC(s)?xL(s):TL(i,s)}var Ab=function i(){(0,M.Z)(this,i),this._=void 0};function jC(i,s,n){return i instanceof vd?(o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},(a=s)&&(o.fields.__previous_value__=a),{mapValue:o}):i instanceof pf?qC(i,s):i instanceof tm?Xx(i,s):function(r,a){var o=$x(r,a),u=Tb(o)+Tb(r.C);return MC(o)&&MC(r.C)?xL(u):TL(r.N,u)}(i,s);var r,a,o}function WC(i,s,n){return i instanceof pf?qC(i,s):i instanceof tm?Xx(i,s):n}function $x(i,s){return i instanceof md?MC(n=s)||(r=n)&&"doubleValue"in r?s:{integerValue:0}:null;var r,n}var vd=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(Ab),pf=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).elements=r,a}return n}(Ab);function qC(i,s){var a,n=Qx(s),r=(0,Ve.Z)(i.elements);try{var o=function(){var l=a.value;n.some(function(f){return Gc(f,l)})||n.push(l)};for(r.s();!(a=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}return{arrayValue:{values:n}}}var tm=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).elements=r,a}return n}(Ab);function Xx(i,s){var a,n=Qx(s),r=(0,Ve.Z)(i.elements);try{var o=function(){var l=a.value;n=n.filter(function(f){return!Gc(f,l)})};for(r.s();!(a=r.n()).done;)o()}catch(u){r.e(u)}finally{r.f()}return{arrayValue:{values:n}}}var md=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).N=r,o.C=a,o}return n}(Ab);function Tb(i){return ms(i.integerValue||i.doubleValue)}function Qx(i){return IC(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var nm=function i(s,n){(0,M.Z)(this,i),this.field=s,this.transform=n},Jx=function i(s,n){(0,M.Z)(this,i),this.version=s,this.transformResults=n},ru=function(){function i(s,n){(0,M.Z)(this,i),this.updateTime=s,this.exists=n}return(0,R.Z)(i,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}],[{key:"none",value:function(){return new i}},{key:"exists",value:function(n){return new i(void 0,n)}},{key:"updateTime",value:function(n){return new i(n)}}]),i}();function rm(i,s){return void 0!==i.updateTime?s.isFoundDocument()&&s.version.isEqual(i.updateTime):void 0===i.exists||i.exists===s.isFoundDocument()}var im=function i(){(0,M.Z)(this,i)};function ML(i,s,n){var r,a,o,u,l;i instanceof Ay?(a=s,o=n,u=(r=i).value.clone(),l=Ib(r.fieldTransforms,a,o.transformResults),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()):i instanceof vf?function(r,a,o){if(rm(r.precondition,a)){var u=Ib(r.fieldTransforms,a,o.transformResults),l=a.data;l.setAll($C(r)),l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}else a.convertToUnknownDocument(o.version)}(i,s,n):function(r,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,s,n)}function xb(i,s,n){var a;i instanceof Ay?function(r,a,o){if(rm(r.precondition,a)){var u=r.value.clone(),l=Ty(r.fieldTransforms,o,a);u.setAll(l),a.convertToFoundDocument(KC(a),u).setHasLocalMutations()}}(i,s,n):i instanceof vf?function(r,a,o){if(rm(r.precondition,a)){var u=Ty(r.fieldTransforms,o,a),l=a.data;l.setAll($C(r)),l.setAll(u),a.convertToFoundDocument(KC(a),l).setHasLocalMutations()}}(i,s,n):rm(i.precondition,a=s)&&a.convertToNoDocument($r.min())}function eM(i,s){var a,n=null,r=(0,Ve.Z)(i.fieldTransforms);try{for(r.s();!(a=r.n()).done;){var o=a.value,u=s.data.field(o.field),l=$x(o.transform,u||null);null!=l&&(null==n&&(n=rc.empty()),n.set(o.field,l))}}catch(f){r.e(f)}finally{r.f()}return n||null}function Mb(i,s){return i.type===s.type&&!!i.key.isEqual(s.key)&&!!i.precondition.isEqual(s.precondition)&&(r=s.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===r||n&&r&&Hv(n,r,function(a,o){return function(i,s){return i.field.isEqual(s.field)&&(r=s.transform,(n=i.transform)instanceof pf&&r instanceof pf||n instanceof tm&&r instanceof tm?Hv(n.elements,r.elements,Gc):n instanceof md&&r instanceof md?Gc(n.C,r.C):n instanceof vd&&r instanceof vd);var n,r}(a,o)})))&&(0===i.type?i.value.isEqual(s.value):1!==i.type||i.data.isEqual(s.data)&&i.fieldMask.isEqual(s.fieldMask));var n,r}function KC(i){return i.isFoundDocument()?i.version:$r.min()}var Ay=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,M.Z)(this,n),(u=s.call(this)).key=r,u.value=a,u.precondition=o,u.fieldTransforms=l,u.type=0,u}return n}(im),vf=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,M.Z)(this,n),(l=s.call(this)).key=r,l.data=a,l.fieldMask=o,l.precondition=u,l.fieldTransforms=f,l.type=1,l}return n}(im);function $C(i){var s=new Map;return i.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=i.data.field(n);s.set(n,r)}}),s}function Ib(i,s,n){var r=new Map;Jr(i.length===n.length);for(var a=0;a<n.length;a++){var o=i[a],u=o.transform,l=s.data.field(o.field);r.set(o.field,WC(u,l,n[a]))}return r}function Ty(i,s,n){var o,r=new Map,a=(0,Ve.Z)(i);try{for(a.s();!(o=a.n()).done;){var u=o.value,l=u.transform,f=n.data.field(u.field);r.set(u.field,jC(l,f,s))}}catch(m){a.e(m)}finally{a.f()}return r}var so,$i,am=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).key=r,o.precondition=a,o.type=2,o.fieldTransforms=[],o}return n}(im),Pb=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).key=r,o.precondition=a,o.type=3,o.fieldTransforms=[],o}return n}(im),tM=function i(s){(0,M.Z)(this,i),this.count=s};function XC(i){switch(i){case Kt.OK:return Sr();case Kt.CANCELLED:case Kt.UNKNOWN:case Kt.DEADLINE_EXCEEDED:case Kt.RESOURCE_EXHAUSTED:case Kt.INTERNAL:case Kt.UNAVAILABLE:case Kt.UNAUTHENTICATED:return!1;case Kt.INVALID_ARGUMENT:case Kt.NOT_FOUND:case Kt.ALREADY_EXISTS:case Kt.PERMISSION_DENIED:case Kt.FAILED_PRECONDITION:case Kt.ABORTED:case Kt.OUT_OF_RANGE:case Kt.UNIMPLEMENTED:case Kt.DATA_LOSS:return!0;default:return Sr()}}function QC(i){if(void 0===i)return ao("GRPC error has no .code"),Kt.UNKNOWN;switch(i){case so.OK:return Kt.OK;case so.CANCELLED:return Kt.CANCELLED;case so.UNKNOWN:return Kt.UNKNOWN;case so.DEADLINE_EXCEEDED:return Kt.DEADLINE_EXCEEDED;case so.RESOURCE_EXHAUSTED:return Kt.RESOURCE_EXHAUSTED;case so.INTERNAL:return Kt.INTERNAL;case so.UNAVAILABLE:return Kt.UNAVAILABLE;case so.UNAUTHENTICATED:return Kt.UNAUTHENTICATED;case so.INVALID_ARGUMENT:return Kt.INVALID_ARGUMENT;case so.NOT_FOUND:return Kt.NOT_FOUND;case so.ALREADY_EXISTS:return Kt.ALREADY_EXISTS;case so.PERMISSION_DENIED:return Kt.PERMISSION_DENIED;case so.FAILED_PRECONDITION:return Kt.FAILED_PRECONDITION;case so.ABORTED:return Kt.ABORTED;case so.OUT_OF_RANGE:return Kt.OUT_OF_RANGE;case so.UNIMPLEMENTED:return Kt.UNIMPLEMENTED;case so.DATA_LOSS:return Kt.DATA_LOSS;default:return Sr()}}($i=so||(so={}))[$i.OK=0]="OK",$i[$i.CANCELLED=1]="CANCELLED",$i[$i.UNKNOWN=2]="UNKNOWN",$i[$i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$i[$i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$i[$i.NOT_FOUND=5]="NOT_FOUND",$i[$i.ALREADY_EXISTS=6]="ALREADY_EXISTS",$i[$i.PERMISSION_DENIED=7]="PERMISSION_DENIED",$i[$i.UNAUTHENTICATED=16]="UNAUTHENTICATED",$i[$i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$i[$i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$i[$i.ABORTED=10]="ABORTED",$i[$i.OUT_OF_RANGE=11]="OUT_OF_RANGE",$i[$i.UNIMPLEMENTED=12]="UNIMPLEMENTED",$i[$i.INTERNAL=13]="INTERNAL",$i[$i.UNAVAILABLE=14]="UNAVAILABLE",$i[$i.DATA_LOSS=15]="DATA_LOSS";var Cu=function(){function i(s,n){(0,M.Z)(this,i),this.comparator=s,this.root=n||gd.EMPTY}return(0,R.Z)(i,[{key:"insert",value:function(n,r){return new i(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,gd.BLACK,null,null))}},{key:"remove",value:function(n){return new i(this.comparator,this.root.remove(n,this.comparator).copy(null,null,gd.BLACK,null,null))}},{key:"get",value:function(n){for(var r=this.root;!r.isEmpty();){var a=this.comparator(n,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}},{key:"indexOf",value:function(n){for(var r=0,a=this.root;!a.isEmpty();){var o=this.comparator(n,a.key);if(0===o)return r+a.left.size;o<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(n){return this.root.inorderTraversal(n)}},{key:"forEach",value:function(n){this.inorderTraversal(function(r,a){return n(r,a),!1})}},{key:"toString",value:function(){var n=[];return this.inorderTraversal(function(r,a){return n.push("".concat(r,":").concat(a)),!1}),"{".concat(n.join(", "),"}")}},{key:"reverseTraversal",value:function(n){return this.root.reverseTraversal(n)}},{key:"getIterator",value:function(){return new JC(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(n){return new JC(this.root,n,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new JC(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(n){return new JC(this.root,n,this.comparator,!0)}}]),i}(),JC=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.isReverse=a,this.nodeStack=[];for(var o=1;!s.isEmpty();)if(o=n?r(s.key,n):1,a&&(o*=-1),o<0)s=this.isReverse?s.left:s.right;else{if(0===o){this.nodeStack.push(s);break}this.nodeStack.push(s),s=this.isReverse?s.right:s.left}}return(0,R.Z)(i,[{key:"getNext",value:function(){var n=this.nodeStack.pop(),r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}]),i}(),gd=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.key=s,this.value=n,this.color=null!=r?r:i.RED,this.left=null!=a?a:i.EMPTY,this.right=null!=o?o:i.EMPTY,this.size=this.left.size+1+this.right.size}return(0,R.Z)(i,[{key:"copy",value:function(n,r,a,o,u){return new i(null!=n?n:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=o?o:this.left,null!=u?u:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}},{key:"reverseTraversal",value:function(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(n,r,a){var o=this,u=a(n,o.key);return(o=u<0?o.copy(null,null,null,o.left.insert(n,r,a),null):0===u?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,a))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return i.EMPTY;var n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),(n=n.copy(null,null,null,n.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(n,r){var a,o=this;if(r(n,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(n,r),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===r(n,o.key)){if(o.right.isEmpty())return i.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(n,r))}return o.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}},{key:"moveRedLeft",value:function(){var n=this.colorFlip();return n.right.left.isRed()&&(n=(n=(n=n.copy(null,null,null,null,n.right.rotateRight())).rotateLeft()).colorFlip()),n}},{key:"moveRedRight",value:function(){var n=this.colorFlip();return n.left.left.isRed()&&(n=(n=n.rotateRight()).colorFlip()),n}},{key:"rotateLeft",value:function(){var n=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}},{key:"rotateRight",value:function(){var n=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}},{key:"colorFlip",value:function(){var n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}},{key:"checkMaxDepth",value:function(){var n=this.check();return Math.pow(2,n)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Sr();var n=this.left.check();if(n!==this.right.check())throw Sr();return n+(this.isRed()?0:1)}}]),i}();gd.EMPTY=null,gd.RED=!0,gd.BLACK=!1,gd.EMPTY=new(function(){function i(){(0,M.Z)(this,i),this.size=0}return(0,R.Z)(i,[{key:"key",get:function(){throw Sr()}},{key:"value",get:function(){throw Sr()}},{key:"color",get:function(){throw Sr()}},{key:"left",get:function(){throw Sr()}},{key:"right",get:function(){throw Sr()}},{key:"copy",value:function(n,r,a,o,u){return this}},{key:"insert",value:function(n,r,a){return new gd(n,r)}},{key:"remove",value:function(n,r){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(n){return!1}},{key:"reverseTraversal",value:function(n){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),i}());var No=function(){function i(s){(0,M.Z)(this,i),this.comparator=s,this.data=new Cu(this.comparator)}return(0,R.Z)(i,[{key:"has",value:function(n){return null!==this.data.get(n)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(n){return this.data.indexOf(n)}},{key:"forEach",value:function(n){this.data.inorderTraversal(function(r,a){return n(r),!1})}},{key:"forEachInRange",value:function(n,r){for(var a=this.data.getIteratorFrom(n[0]);a.hasNext();){var o=a.getNext();if(this.comparator(o.key,n[1])>=0)return;r(o.key)}}},{key:"forEachWhile",value:function(n,r){var a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!n(a.getNext().key))return}},{key:"firstAfterOrEqual",value:function(n){var r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}},{key:"getIterator",value:function(){return new eD(this.data.getIterator())}},{key:"getIteratorFrom",value:function(n){return new eD(this.data.getIteratorFrom(n))}},{key:"add",value:function(n){return this.copy(this.data.remove(n).insert(n,!0))}},{key:"delete",value:function(n){return this.has(n)?this.copy(this.data.remove(n)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(n){var r=this;return r.size<n.size&&(r=n,n=this),n.forEach(function(a){r=r.add(a)}),r}},{key:"isEqual",value:function(n){if(!(n instanceof i)||this.size!==n.size)return!1;for(var r=this.data.getIterator(),a=n.data.getIterator();r.hasNext();){var o=r.getNext().key,u=a.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}},{key:"toArray",value:function(){var n=[];return this.forEach(function(r){n.push(r)}),n}},{key:"toString",value:function(){var n=[];return this.forEach(function(r){return n.push(r)}),"SortedSet("+n.toString()+")"}},{key:"copy",value:function(n){var r=new i(this.comparator);return r.data=n,r}}]),i}(),eD=function(){function i(s){(0,M.Z)(this,i),this.iter=s}return(0,R.Z)(i,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),i}(),IL=new Cu(Fr.comparator);function Ba(){return IL}var nM=new Cu(Fr.comparator);function tD(){return nM}var PL=new Cu(Fr.comparator);function nD(){return PL}var FL=new No(Fr.comparator);function Ua(){for(var i=FL,s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];for(var a=0,o=n;a<o.length;a++){var u=o[a];i=i.add(u)}return i}var rM=new No(Si);function mf(){return rM}var rD=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.snapshotVersion=s,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}return(0,R.Z)(i,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(n,r){var a=new Map;return a.set(n,iD.createSynthesizedTargetChangeForCurrentChange(n,r)),new i($r.min(),a,mf(),Ba(),Ua())}}]),i}(),iD=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.resumeToken=s,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}return(0,R.Z)(i,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(n,r){return new i(nu.EMPTY_BYTE_STRING,r,Ua(),Ua(),Ua())}}]),i}(),xy=function i(s,n,r,a){(0,M.Z)(this,i),this.k=s,this.removedTargetIds=n,this.key=r,this.$=a},iM=function i(s,n){(0,M.Z)(this,i),this.targetId=s,this.O=n},aD=function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nu.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,M.Z)(this,i),this.state=s,this.targetIds=n,this.resumeToken=r,this.cause=a},RL=function(){function i(){(0,M.Z)(this,i),this.F=0,this.M=jc(),this.L=nu.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return(0,R.Z)(i,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}},{key:"W",value:function(){var n=Ua(),r=Ua(),a=Ua();return this.M.forEach(function(o,u){switch(u){case 0:n=n.add(o);break;case 2:r=r.add(o);break;case 1:a=a.add(o);break;default:Sr()}}),new iD(this.L,this.B,n,r,a)}},{key:"G",value:function(){this.U=!1,this.M=jc()}},{key:"H",value:function(n,r){this.U=!0,this.M=this.M.insert(n,r)}},{key:"J",value:function(n){this.U=!0,this.M=this.M.remove(n)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),i}(),sD=function(){function i(s){(0,M.Z)(this,i),this.tt=s,this.et=new Map,this.nt=Ba(),this.st=Fb(),this.it=new No(Si)}return(0,R.Z)(i,[{key:"rt",value:function(n){var a,r=(0,Ve.Z)(n.k);try{for(r.s();!(a=r.n()).done;){var o=a.value;n.$&&n.$.isFoundDocument()?this.ot(o,n.$):this.at(o,n.key,n.$)}}catch(m){r.e(m)}finally{r.f()}var l,u=(0,Ve.Z)(n.removedTargetIds);try{for(u.s();!(l=u.n()).done;)this.at(l.value,n.key,n.$)}catch(m){u.e(m)}finally{u.f()}}},{key:"ct",value:function(n){var r=this;this.forEachTarget(n,function(a){var o=r.ut(a);switch(n.state){case 0:r.ht(a)&&o.j(n.resumeToken);break;case 1:o.X(),o.q||o.G(),o.j(n.resumeToken);break;case 2:o.X(),o.q||r.removeTarget(a);break;case 3:r.ht(a)&&(o.Z(),o.j(n.resumeToken));break;case 4:r.ht(a)&&(r.lt(a),o.j(n.resumeToken));break;default:Sr()}})}},{key:"forEachTarget",value:function(n,r){var a=this;n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach(function(o,u){a.ht(u)&&r(u)})}},{key:"ft",value:function(n){var r=n.targetId,a=n.O.count,o=this.dt(r);if(o){var u=o.target;if(Cb(u))if(0===a){var l=new Fr(u.path);this.at(r,l,ku.newNoDocument(l,$r.min()))}else Jr(1===a);else this.wt(r)!==a&&(this.lt(r),this.it=this.it.add(r))}}},{key:"_t",value:function(n){var r=this,a=new Map;this.et.forEach(function(l,f){var m=r.dt(f);if(m){if(l.current&&Cb(m.target)){var b=new Fr(m.target.path);null!==r.nt.get(b)||r.gt(f,b)||r.at(f,b,ku.newNoDocument(b,n))}l.K&&(a.set(f,l.W()),l.G())}});var o=Ua();this.st.forEach(function(l,f){var m=!0;f.forEachWhile(function(b){var w=r.dt(b);return!w||2===w.purpose||(m=!1,!1)}),m&&(o=o.add(l))});var u=new rD(n,a,this.it,this.nt,o);return this.nt=Ba(),this.st=Fb(),this.it=new No(Si),u}},{key:"ot",value:function(n,r){if(this.ht(n)){var a=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,a),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}}},{key:"at",value:function(n,r,a){if(this.ht(n)){var o=this.ut(n);this.gt(n,r)?o.H(r,1):o.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),a&&(this.nt=this.nt.insert(r,a))}}},{key:"removeTarget",value:function(n){this.et.delete(n)}},{key:"wt",value:function(n){var r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}},{key:"Y",value:function(n){this.ut(n).Y()}},{key:"ut",value:function(n){var r=this.et.get(n);return r||(r=new RL,this.et.set(n,r)),r}},{key:"yt",value:function(n){var r=this.st.get(n);return r||(r=new No(Si),this.st=this.st.insert(n,r)),r}},{key:"ht",value:function(n){var r=null!==this.dt(n);return r||Rn("WatchChangeAggregator","Detected inactive target",n),r}},{key:"dt",value:function(n){var r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}},{key:"lt",value:function(n){var r=this;this.et.set(n,new RL),this.tt.getRemoteKeysForTarget(n).forEach(function(a){r.at(n,a,null)})}},{key:"gt",value:function(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}]),i}();function Fb(){return new Cu(Fr.comparator)}function jc(){return new Cu(Fr.comparator)}var OL={asc:"ASCENDING",desc:"DESCENDING"},LL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mh=function i(s,n){(0,M.Z)(this,i),this.databaseId=s,this.D=n};function al(i,s){return i.D?"".concat(new Date(1e3*s.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+s.nanoseconds).slice(-9),"Z"):{seconds:""+s.seconds,nanos:s.nanoseconds}}function kc(i,s){return i.D?s.toBase64():s.toUint8Array()}function aM(i,s){return al(i,s.toTimestamp())}function Zo(i){return Jr(!!i),$r.fromTimestamp((n=nc(i),new Nu(n.seconds,n.nanos)));var n}function oD(i,s){return(n=i,new yi(["projects",n.projectId,"databases",n.database])).child("documents").child(s).canonicalString();var n}function sM(i){var s=yi.fromString(i);return Jr(dM(s)),s}function My(i,s){return oD(i.databaseId,s.path)}function Ih(i,s){var n=sM(s);if(n.get(1)!==i.databaseId.projectId)throw new pn(Kt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new pn(Kt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Fr(uD(n))}function Iy(i,s){return oD(i.databaseId,s)}function sm(i){var s=sM(i);return 4===s.length?yi.emptyPath():uD(s)}function Py(i){return new yi(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function uD(i){return Jr(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function oM(i,s,n){return{name:My(i,s),fields:n.value.mapValue.fields}}function lD(i,s,n){var r=Ih(i,s.name),a=Zo(s.updateTime),o=new rc({mapValue:{fields:s.fields}}),u=ku.newFoundDocument(r,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function uM(i,s){return"found"in s?function(n,r){Jr(!!r.found);var a=Ih(n,r.found.name),o=Zo(r.found.updateTime),u=new rc({mapValue:{fields:r.found.fields}});return ku.newFoundDocument(a,o,u)}(i,s):"missing"in s?function(n,r){Jr(!!r.missing),Jr(!!r.readTime);var a=Ih(n,r.missing),o=Zo(r.readTime);return ku.newNoDocument(a,o)}(i,s):Sr()}function Ob(i,s){var n,a;if(s instanceof Ay)n={update:oM(i,s.key,s.value)};else if(s instanceof am)n={delete:My(i,s.key)};else if(s instanceof vf)n={update:oM(i,s.key,s.data),updateMask:BL(s.fieldMask)};else{if(!(s instanceof Pb))return Sr();n={verify:My(i,s.key)}}return s.fieldTransforms.length>0&&(n.updateTransforms=s.fieldTransforms.map(function(r){return function(a,o){var u=o.transform;if(u instanceof vd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof pf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof tm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof md)return{fieldPath:o.field.canonicalString(),increment:u.C};throw Sr()}(0,r)})),s.precondition.isNone||(n.currentDocument=void 0!==(a=s.precondition).updateTime?{updateTime:aM(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:Sr()),n}function cD(i,s){var m,n=s.currentDocument?void 0!==(m=s.currentDocument).updateTime?ru.updateTime(Zo(m.updateTime)):void 0!==m.exists?ru.exists(m.exists):ru.none():ru.none(),r=s.updateTransforms?s.updateTransforms.map(function(m){return function(b,w){var C=null;"setToServerValue"in w?(Jr("REQUEST_TIME"===w.setToServerValue),C=new vd):"appendMissingElements"in w?C=new pf(w.appendMissingElements.values||[]):"removeAllFromArray"in w?C=new tm(w.removeAllFromArray.values||[]):"increment"in w?C=new md(b,w.increment):Sr();var Z=Zu.fromServerFormat(w.fieldPath);return new nm(Z,C)}(i,m)}):[];if(s.update){var a=Ih(i,s.update.name),o=new rc({mapValue:{fields:s.update.fields}});if(s.updateMask){var u=function(m){return new zc((m.fieldPaths||[]).map(function(w){return Zu.fromServerFormat(w)}))}(s.updateMask);return new vf(a,o,u,n,r)}return new Ay(a,o,n,r)}if(s.delete){var l=Ih(i,s.delete);return new am(l,n)}if(s.verify){var f=Ih(i,s.verify);return new Pb(f,n)}return Sr()}function Lb(i,s){return{documents:[Iy(i,s.path)]}}function Fy(i,s){var n={structuredQuery:{}},r=s.path;null!==s.collectionGroup?(n.parent=Iy(i,r),n.structuredQuery.from=[{collectionId:s.collectionGroup,allDescendants:!0}]):(n.parent=Iy(i,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(l){if(0!==l.length){var f=l.map(function(m){return function(b){if("=="===b.op){if(PC(b.value))return{unaryFilter:{field:Ip(b.field),op:"IS_NAN"}};if(Wx(b.value))return{unaryFilter:{field:Ip(b.field),op:"IS_NULL"}}}else if("!="===b.op){if(PC(b.value))return{unaryFilter:{field:Ip(b.field),op:"IS_NOT_NAN"}};if(Wx(b.value))return{unaryFilter:{field:Ip(b.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ip(b.field),op:fM(b.op),value:b.value}}}(m)});return 1===f.length?f[0]:{compositeFilter:{op:"AND",filters:f}}}}(s.filters);a&&(n.structuredQuery.where=a);var o=function(l){if(0!==l.length)return l.map(function(f){return{field:Ip((m=f).field),direction:hM(m.dir)};var m})}(s.orderBy);o&&(n.structuredQuery.orderBy=o);var f,u=(f=s.limit,i.D||dd(f)?f:{value:f});return null!==u&&(n.structuredQuery.limit=u),s.startAt&&(n.structuredQuery.startAt=dD(s.startAt)),s.endAt&&(n.structuredQuery.endAt=dD(s.endAt)),n}function hD(i){var s=sm(i.parent),n=i.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){Jr(1===r);var o=n.from[0];o.allDescendants?a=o.collectionId:s=s.child(o.collectionId)}var u=[];n.where&&(u=fD(n.where));var l=[];n.orderBy&&(l=n.orderBy.map(function(w){return new Qv(om((C=w).field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));var w,C,f=null;n.limit&&(f=dd(C="object"==typeof(w=n.limit)?w.value:w)?null:C);var m=null;n.startAt&&(m=pD(n.startAt));var b=null;return n.endAt&&(b=pD(n.endAt)),BC(s,a,l,u,f,"F",m,b)}function fD(i){return i?void 0!==i.unaryFilter?[ZL(i)]:void 0!==i.fieldFilter?[NL(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(function(s){return fD(s)}).reduce(function(s,n){return s.concat(n)}):Sr():[]}function dD(i){return{before:i.before,values:i.position}}function pD(i){return new Xv(i.values||[],!!i.before)}function hM(i){return OL[i]}function fM(i){return LL[i]}function Ip(i){return{fieldPath:i.canonicalString()}}function om(i){return Zu.fromServerFormat(i.fieldPath)}function NL(i){return wc.create(om(i.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Sr()}}(i.fieldFilter.op),i.fieldFilter.value)}function ZL(i){switch(i.unaryFilter.op){case"IS_NAN":var s=om(i.unaryFilter.field);return wc.create(s,"==",{doubleValue:NaN});case"IS_NULL":var n=om(i.unaryFilter.field);return wc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=om(i.unaryFilter.field);return wc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=om(i.unaryFilter.field);return wc.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Sr()}}function BL(i){var s=[];return i.fields.forEach(function(n){return s.push(n.canonicalString())}),{fieldPaths:s}}function dM(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Wc(i){for(var s="",n=0;n<i.length;n++)s.length>0&&(s=pM(s)),s=UL(i.get(n),s);return pM(s)}function UL(i,s){for(var n=s,r=i.length,a=0;a<r;a++){var o=i.charAt(a);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function pM(i){return i+"\x01\x01"}function gf(i){var s=i.length;if(Jr(s>=2),2===s)return Jr("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),yi.emptyPath();for(var n=s-2,r=[],a="",o=0;o<s;){var u=i.indexOf("\x01",o);switch((u<0||u>n)&&Sr(),i.charAt(u+1)){case"\x01":var l=i.substring(o,u),f=void 0;0===a.length?f=l:(f=a+=l,a=""),r.push(f);break;case"\x10":a+=i.substring(o,u),a+="\0";break;case"\x11":a+=i.substring(o,u+1);break;default:Sr()}o=u+2}return new yi(r)}var VL=function i(s,n){(0,M.Z)(this,i),this.seconds=s,this.nanoseconds=n},qc=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=a};return i.store="owner",i.key="owner",i}(),um=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=a};return i.store="mutationQueues",i.keyPath="userId",i}(),gs=function i(s,n,r,a,o){(0,M.Z)(this,i),this.userId=s,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=a,this.mutations=o};gs.store="mutations",gs.keyPath="batchId",gs.userMutationsIndex="userMutationsIndex",gs.userMutationsKeyPath=["userId","batchId"];var ic=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,null,[{key:"prefixForUser",value:function(r){return[r]}},{key:"prefixForPath",value:function(r,a){return[r,Wc(a)]}},{key:"key",value:function(r,a,o){return[r,Wc(a),o]}}]),s}();return i.store="documentMutations",i.PLACEHOLDER=new i,i}(),zL=function i(s,n){(0,M.Z)(this,i),this.path=s,this.readTime=n},HL=function i(s,n){(0,M.Z)(this,i),this.path=s,this.version=n},Ks=function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.unknownDocument=s,this.noDocument=n,this.document=r,this.hasCommittedMutations=a,this.readTime=o,this.parentPath=u};Ks.store="remoteDocuments",Ks.readTimeIndex="readTimeIndex",Ks.readTimeIndexPath="readTime",Ks.collectionReadTimeIndex="collectionReadTimeIndex",Ks.collectionReadTimeIndexPath=["parentPath","readTime"];var yd=function(){var i=function s(n){(0,M.Z)(this,s),this.byteSize=n};return i.store="remoteDocumentGlobal",i.key="remoteDocumentGlobalKey",i}(),sl=function i(s,n,r,a,o,u,l){(0,M.Z)(this,i),this.targetId=s,this.canonicalId=n,this.readTime=r,this.resumeToken=a,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=u,this.query=l};sl.store="targets",sl.keyPath="targetId",sl.queryTargetsIndexName="queryTargetsIndex",sl.queryTargetsKeyPath=["canonicalId","targetId"];var iu=function i(s,n,r){(0,M.Z)(this,i),this.targetId=s,this.path=n,this.sequenceNumber=r};iu.store="targetDocuments",iu.keyPath=["targetId","path"],iu.documentTargetsIndex="documentTargetsIndex",iu.documentTargetsKeyPath=["path","targetId"];var Cc=function(){var i=function s(n,r,a,o){(0,M.Z)(this,s),this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=a,this.targetCount=o};return i.key="targetGlobalKey",i.store="targetGlobal",i}(),lm=function(){var i=function s(n,r){(0,M.Z)(this,s),this.collectionId=n,this.parent=r};return i.store="collectionParents",i.keyPath=["collectionId","parent"],i}(),_d=function(){var i=function s(n,r,a,o){(0,M.Z)(this,s),this.clientId=n,this.updateTimeMs=r,this.networkEnabled=a,this.inForeground=o};return i.store="clientMetadata",i.keyPath="clientId",i}(),Ry=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.bundleId=n,this.createTime=r,this.version=a};return i.store="bundles",i.keyPath="bundleId",i}(),Oy=function(){var i=function s(n,r,a){(0,M.Z)(this,s),this.name=n,this.readTime=r,this.bundledQuery=a};return i.store="namedQueries",i.keyPath="name",i}(),vM=[um.store,gs.store,ic.store,Ks.store,sl.store,qc.store,Cc.store,iu.store].concat([_d.store]).concat([yd.store]).concat([lm.store]).concat([Ry.store,Oy.store]),vD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nb=function(){function i(){(0,M.Z)(this,i),this.onCommittedListeners=[]}return(0,R.Z)(i,[{key:"addOnCommittedListener",value:function(n){this.onCommittedListeners.push(n)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(n){return n()})}}]),i}(),En=function(){function i(s){var n=this;(0,M.Z)(this,i),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,s(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return(0,R.Z)(i,[{key:"catch",value:function(n){return this.next(void 0,n)}},{key:"next",value:function(n,r){var a=this;return this.callbackAttached&&Sr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new i(function(o,u){a.nextCallback=function(l){a.wrapSuccess(n,l).next(o,u)},a.catchCallback=function(l){a.wrapFailure(r,l).next(o,u)}})}},{key:"toPromise",value:function(){var n=this;return new Promise(function(r,a){n.next(r,a)})}},{key:"wrapUserFunction",value:function(n){try{var r=n();return r instanceof i?r:i.resolve(r)}catch(a){return i.reject(a)}}},{key:"wrapSuccess",value:function(n,r){return n?this.wrapUserFunction(function(){return n(r)}):i.resolve(r)}},{key:"wrapFailure",value:function(n,r){return n?this.wrapUserFunction(function(){return n(r)}):i.reject(r)}}],[{key:"resolve",value:function(n){return new i(function(r,a){r(n)})}},{key:"reject",value:function(n){return new i(function(r,a){a(n)})}},{key:"waitFor",value:function(n){return new i(function(r,a){var o=0,u=0,l=!1;n.forEach(function(f){++o,f.next(function(){++u,l&&u===o&&r()},function(m){return a(m)})}),l=!0,u===o&&r()})}},{key:"or",value:function(n){var o,r=i.resolve(!1),a=(0,Ve.Z)(n);try{var u=function(){var f=o.value;r=r.next(function(m){return m?i.resolve(m):f()})};for(a.s();!(o=a.n()).done;)u()}catch(l){a.e(l)}finally{a.f()}return r}},{key:"forEach",value:function(n,r){var a=this,o=[];return n.forEach(function(u,l){o.push(r.call(a,u,l))}),this.waitFor(o)}}]),i}(),bd=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.action=s,this.transaction=n,this.aborted=!1,this.Tt=new eu,this.transaction.oncomplete=function(){r.Tt.resolve()},this.transaction.onabort=function(){n.error?r.Tt.reject(new Ph(s,n.error)):r.Tt.resolve()},this.transaction.onerror=function(a){var o=Zb(a.target.error);r.Tt.reject(new Ph(s,o))}}return(0,R.Z)(i,[{key:"It",get:function(){return this.Tt.promise}},{key:"abort",value:function(n){n&&this.Tt.reject(n),this.aborted||(Rn("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(n){var r=this.transaction.objectStore(n);return new mD(r)}}],[{key:"open",value:function(n,r,a,o){try{return new i(r,n.transaction(o,a))}catch(u){throw new Ph(r,u)}}}]),i}(),cm=function(){function i(s,n,r){(0,M.Z)(this,i),this.name=s,this.version=n,this.At=r,12.2===i.Rt((0,Re.z$)())&&ao("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,R.Z)(i,[{key:"Dt",value:(s=(0,Qt.Z)(Ke().mark(function r(a){var o=this;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.t0=this.db,l.t0){l.next=6;break}return Rn("SimpleDb","Opening database:",this.name),l.next=5,new Promise(function(f,m){var b=indexedDB.open(o.name,o.version);b.onsuccess=function(w){f(w.target.result)},b.onblocked=function(){m(new Ph(a,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},b.onerror=function(w){var C=w.target.error;m("VersionError"===C.name?new pn(Kt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new pn(Kt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new Ph(a,C))},b.onupgradeneeded=function(w){Rn("SimpleDb",'Database "'+o.name+'" requires upgrade from version:',w.oldVersion),o.At.Ct(w.target.result,b.transaction,w.oldVersion,o.version).next(function(){Rn("SimpleDb","Database upgrade to version "+o.version+" complete")})}});case 5:this.db=l.sent;case 6:return this.Nt&&(this.db.onversionchange=function(f){return o.Nt(f)}),l.abrupt("return",this.db);case 8:case"end":return l.stop()}},r,this)})),function(r){return s.apply(this,arguments)})},{key:"xt",value:function(n){this.Nt=n,this.db&&(this.db.onversionchange=function(r){return n(r)})}},{key:"runTransaction",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(a,o,u,l){var m,b,w,C,f=this;return Ke().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:m="readonly"===o,b=0;case 2:return++b,I.prev=3,I.delegateYield(Ke().mark(function Z(){var Y,V;return Ke().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,f.Dt(a);case 2:return f.db=se.sent,Y=bd.open(f.db,a,m?"readonly":"readwrite",u),(V=l(Y).catch(function(fe){return Y.abort(fe),En.reject(fe)}).toPromise()).catch(function(){}),se.next=7,Y.It;case 7:return se.t0=V,se.abrupt("return",{v:se.t0});case 9:case"end":return se.stop()}},Z)})(),"t0",5);case 5:if("object"!=typeof(w=I.t0)){I.next=8;break}return I.abrupt("return",w.v);case 8:I.next=15;break;case 10:if(I.prev=10,I.t1=I.catch(3),Rn("SimpleDb","Transaction failed with error:",I.t1.message,"Retrying:",C="FirebaseError"!==I.t1.name&&b<3),this.close(),C){I.next=15;break}return I.abrupt("return",Promise.reject(I.t1));case 15:I.next=2;break;case 17:case"end":return I.stop()}},r,this,[[3,10]])}));return function(r,a,o,u){return s.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(n){return Rn("SimpleDb","Removing database:",n),fm(window.indexedDB.deleteDatabase(n)).toPromise()}},{key:"bt",value:function(){if(!(0,Re.hl)())return!1;if(i.Pt())return!0;var n=(0,Re.z$)(),r=i.Rt(n),a=0<r&&r<10,o=i.vt(n),u=0<o&&o<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||a||u)}},{key:"Pt",value:function(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}},{key:"St",value:function(n,r){return n.store(r)}},{key:"Rt",value:function(n){var r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}},{key:"vt",value:function(n){var r=n.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}}]),i;var s}(),GL=function(){function i(s){(0,M.Z)(this,i),this.kt=s,this.$t=!1,this.Ot=null}return(0,R.Z)(i,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(n){this.kt=n}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(n){this.Ot=n}},{key:"delete",value:function(){return fm(this.kt.delete())}}]),i}(),Ph=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,Kt.UNAVAILABLE,"IndexedDB transaction '".concat(r,"' failed: ").concat(a))).name="IndexedDbTransactionError",o}return n}(pn);function hm(i){return"IndexedDbTransactionError"===i.name}var mD=function(){function i(s){(0,M.Z)(this,i),this.store=s}return(0,R.Z)(i,[{key:"put",value:function(n,r){var a;return void 0!==r?(Rn("SimpleDb","PUT",this.store.name,n,r),a=this.store.put(r,n)):(Rn("SimpleDb","PUT",this.store.name,"<auto-key>",n),a=this.store.put(n)),fm(a)}},{key:"add",value:function(n){return Rn("SimpleDb","ADD",this.store.name,n,n),fm(this.store.add(n))}},{key:"get",value:function(n){var r=this;return fm(this.store.get(n)).next(function(a){return void 0===a&&(a=null),Rn("SimpleDb","GET",r.store.name,n,a),a})}},{key:"delete",value:function(n){return Rn("SimpleDb","DELETE",this.store.name,n),fm(this.store.delete(n))}},{key:"count",value:function(){return Rn("SimpleDb","COUNT",this.store.name),fm(this.store.count())}},{key:"Lt",value:function(n,r){var a=this.cursor(this.options(n,r)),o=[];return this.Bt(a,function(u,l){o.push(l)}).next(function(){return o})}},{key:"Ut",value:function(n,r){Rn("SimpleDb","DELETE ALL",this.store.name);var a=this.options(n,r);a.qt=!1;var o=this.cursor(a);return this.Bt(o,function(u,l,f){return f.delete()})}},{key:"Kt",value:function(n,r){var a;r?a=n:(a={},r=n);var o=this.cursor(a);return this.Bt(o,r)}},{key:"jt",value:function(n){var r=this.cursor({});return new En(function(a,o){r.onerror=function(u){var l=Zb(u.target.error);o(l)},r.onsuccess=function(u){var l=u.target.result;l?n(l.primaryKey,l.value).next(function(f){f?l.continue():a()}):a()}})}},{key:"Bt",value:function(n,r){var a=[];return new En(function(o,u){n.onerror=function(l){u(l.target.error)},n.onsuccess=function(l){var f=l.target.result;if(f){var m=new GL(f),b=r(f.primaryKey,f.value,m);if(b instanceof En){var w=b.catch(function(C){return m.done(),En.reject(C)});a.push(w)}m.isDone?o():null===m.Ft?f.continue():f.continue(m.Ft)}else o()}}).next(function(){return En.waitFor(a)})}},{key:"options",value:function(n,r){var a;return void 0!==n&&("string"==typeof n?a=n:r=n),{index:a,range:r}}},{key:"cursor",value:function(n){var r="next";if(n.reverse&&(r="prev"),n.index){var a=this.store.index(n.index);return n.qt?a.openKeyCursor(n.range,r):a.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}]),i}();function fm(i){return new En(function(s,n){i.onsuccess=function(r){s(r.target.result)},i.onerror=function(r){var a=Zb(r.target.error);n(a)}})}var gD=!1;function Zb(i){var s=cm.Rt((0,Re.z$)());if(s>=12.2&&s<13){var n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){var r=new pn("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return gD||(gD=!0,setTimeout(function(){throw r},0)),r}}return i}var jL=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).Qt=r,o.currentSequenceNumber=a,o}return n}(Nb);function au(i,s){var n=Un(i);return cm.St(n.Qt,s)}var yD=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.batchId=s,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return(0,R.Z)(i,[{key:"applyToRemoteDocument",value:function(n,r){for(var a=r.mutationResults,o=0;o<this.mutations.length;o++){var u=this.mutations[o];u.key.isEqual(n.key)&&ML(u,n,a[o])}}},{key:"applyToLocalView",value:function(n){var a,r=(0,Ve.Z)(this.baseMutations);try{for(r.s();!(a=r.n()).done;){var o=a.value;o.key.isEqual(n.key)&&xb(o,n,this.localWriteTime)}}catch(m){r.e(m)}finally{r.f()}var l,u=(0,Ve.Z)(this.mutations);try{for(u.s();!(l=u.n()).done;){var f=l.value;f.key.isEqual(n.key)&&xb(f,n,this.localWriteTime)}}catch(m){u.e(m)}finally{u.f()}}},{key:"applyToLocalDocumentSet",value:function(n){var r=this;this.mutations.forEach(function(a){var o=n.get(a.key),u=o;r.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument($r.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(n,r){return n.add(r.key)},Ua())}},{key:"isEqual",value:function(n){return this.batchId===n.batchId&&Hv(this.mutations,n.mutations,function(r,a){return Mb(r,a)})&&Hv(this.baseMutations,n.baseMutations,function(r,a){return Mb(r,a)})}}]),i}(),WL=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.batch=s,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return(0,R.Z)(i,null,[{key:"from",value:function(n,r,a){Jr(n.mutations.length===a.length);for(var o=nD(),u=n.mutations,l=0;l<u.length;l++)o=o.insert(u[l].key,a[l].version);return new i(n,r,a,o)}}]),i}(),Bb=function(){function i(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$r.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$r.min(),l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nu.EMPTY_BYTE_STRING;(0,M.Z)(this,i),this.target=s,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=l}return(0,R.Z)(i,[{key:"withSequenceNumber",value:function(n){return new i(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(n,r){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}},{key:"withLastLimboFreeSnapshotVersion",value:function(n){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}]),i}(),Ly=function i(s){(0,M.Z)(this,i),this.Wt=s};function _D(i,s){if(s.document)return lD(i.Wt,s.document,!!s.hasCommittedMutations);if(s.noDocument){var n=Fr.fromSegments(s.noDocument.path),r=Pp(s.noDocument.readTime),a=ku.newNoDocument(n,r);return s.hasCommittedMutations?a.setHasCommittedMutations():a}if(s.unknownDocument){var o=Fr.fromSegments(s.unknownDocument.path),u=Pp(s.unknownDocument.version);return ku.newUnknownDocument(o,u)}return Sr()}function Ny(i,s,n){var C,T,r=dm(n),a=s.key.path.popLast().toArray();if(s.isFoundDocument()){var o={name:My(C=i.Wt,(T=s).key),fields:T.data.value.mapValue.fields,updateTime:al(C,T.version.toTimestamp())};return new Ks(null,null,o,s.hasCommittedMutations,r,a)}if(s.isNoDocument()){var l=s.key.path.toArray(),f=Zy(s.version),m=s.hasCommittedMutations;return new Ks(null,new zL(l,f),null,m,r,a)}if(s.isUnknownDocument()){var b=s.key.path.toArray(),w=Zy(s.version);return new Ks(new HL(b,w),null,null,!0,r,a)}return Sr()}function dm(i){var s=i.toTimestamp();return[s.seconds,s.nanoseconds]}function Ml(i){var s=new Nu(i[0],i[1]);return $r.fromTimestamp(s)}function Zy(i){var s=i.toTimestamp();return new VL(s.seconds,s.nanoseconds)}function Pp(i){var s=new Nu(i.seconds,i.nanoseconds);return $r.fromTimestamp(s)}function wd(i,s){for(var n=(s.baseMutations||[]).map(function(f){return cD(i.Wt,f)}),r=0;r<s.mutations.length-1;++r)r+1<s.mutations.length&&void 0!==s.mutations[r+1].transform&&(s.mutations[r].updateTransforms=s.mutations[r+1].transform.fieldTransforms,s.mutations.splice(r+1,1),++r);var u=s.mutations.map(function(f){return cD(i.Wt,f)}),l=Nu.fromMillis(s.localWriteTimeMs);return new yD(s.batchId,l,n,u)}function By(i){var r,a,s=Pp(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Pp(i.lastLimboFreeSnapshotVersion):$r.min();return void 0!==i.query.documents?(Jr(1===(a=i.query).documents.length),r=Ec(xp(sm(a.documents[0])))):r=Ec(hD(i.query)),new Bb(r,i.targetId,0,i.lastListenSequenceNumber,s,n,nu.fromBase64String(i.resumeToken))}function bD(i,s){var a,n=Zy(s.snapshotVersion),r=Zy(s.lastLimboFreeSnapshotVersion);a=Cb(s.target)?Lb(i.Wt,s.target):Fy(i.Wt,s.target);var o=s.resumeToken.toBase64();return new sl(s.targetId,ky(s.target),n,o,s.sequenceNumber,r,a)}function Ub(i){var s=hD({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?HC(s,s.limit,"L"):s}var mM=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"getBundleMetadata",value:function(n,r){return wD(n).get(r).next(function(a){if(a)return{id:(o=a).bundleId,createTime:Pp(o.createTime),version:o.version};var o})}},{key:"saveBundleMetadata",value:function(n,r){return wD(n).put({bundleId:(a=r).id,createTime:Zy(Zo(a.createTime)),version:a.version});var a}},{key:"getNamedQuery",value:function(n,r){return gM(n).get(r).next(function(a){if(a)return{name:(o=a).name,query:Ub(o.bundledQuery),readTime:Pp(o.readTime)};var o})}},{key:"saveNamedQuery",value:function(n,r){return gM(n).put({name:(a=r).name,readTime:Zy(Zo(a.readTime)),bundledQuery:a.bundledQuery});var a}}]),i}();function wD(i){return au(i,Ry.store)}function gM(i){return au(i,Oy.store)}var qL=function(){function i(){(0,M.Z)(this,i),this.Gt=new ED}return(0,R.Z)(i,[{key:"addToCollectionParentIndex",value:function(n,r){return this.Gt.add(r),En.resolve()}},{key:"getCollectionParents",value:function(n,r){return En.resolve(this.Gt.getEntries(r))}}]),i}(),ED=function(){function i(){(0,M.Z)(this,i),this.index={}}return(0,R.Z)(i,[{key:"add",value:function(n){var r=n.lastSegment(),a=n.popLast(),o=this.index[r]||new No(yi.comparator),u=!o.has(a);return this.index[r]=o.add(a),u}},{key:"has",value:function(n){var r=n.lastSegment(),a=n.popLast(),o=this.index[r];return o&&o.has(a)}},{key:"getEntries",value:function(n){return(this.index[n]||new No(yi.comparator)).toArray()}}]),i}(),Uy=function(){function i(){(0,M.Z)(this,i),this.zt=new ED}return(0,R.Z)(i,[{key:"addToCollectionParentIndex",value:function(n,r){var a=this;if(!this.zt.has(r)){var o=r.lastSegment(),u=r.popLast();n.addOnCommittedListener(function(){a.zt.add(r)});var l={collectionId:o,parent:Wc(u)};return yM(n).put(l)}return En.resolve()}},{key:"getCollectionParents",value:function(n,r){var a=[],o=IDBKeyRange.bound([r,""],[jx(r),""],!1,!0);return yM(n).Lt(o).next(function(u){var f,l=(0,Ve.Z)(u);try{for(l.s();!(f=l.n()).done;){var m=f.value;if(m.collectionId!==r)break;a.push(gf(m.parent))}}catch(b){l.e(b)}finally{l.f()}return a})}}]),i}();function yM(i){return au(i,lm.store)}var _M={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fh=function(){function i(s,n,r){(0,M.Z)(this,i),this.cacheSizeCollectionThreshold=s,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,R.Z)(i,null,[{key:"withCacheSize",value:function(n){return new i(n,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),i}();function Vy(i,s,n){var r=i.store(gs.store),a=i.store(ic.store),o=[],u=IDBKeyRange.only(n.batchId),l=0,f=r.Kt({range:u},function(I,Z,Y){return l++,Y.delete()});o.push(f.next(function(){Jr(1===l)}));var w,m=[],b=(0,Ve.Z)(n.mutations);try{for(b.s();!(w=b.n()).done;){var C=w.value,T=ic.key(s,C.key.path,n.batchId);o.push(a.delete(T)),m.push(C.key)}}catch(I){b.e(I)}finally{b.f()}return En.waitFor(o).next(function(){return m})}function zy(i){if(!i)return 0;var s;if(i.document)s=i.document;else if(i.unknownDocument)s=i.unknownDocument;else{if(!i.noDocument)throw Sr();s=i.noDocument}return JSON.stringify(s).length}Fh.DEFAULT_COLLECTION_PERCENTILE=10,Fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fh.DEFAULT=new Fh(41943040,Fh.DEFAULT_COLLECTION_PERCENTILE,Fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fh.DISABLED=new Fh(-1,0,0);var bM=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.userId=s,this.N=n,this.Ht=r,this.referenceDelegate=a,this.Jt={}}return(0,R.Z)(i,[{key:"checkEmpty",value:function(n){var r=!0,a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ed(n).Kt({index:gs.userMutationsIndex,range:a},function(o,u,l){r=!1,l.done()}).next(function(){return r})}},{key:"addMutationBatch",value:function(n,r,a,o){var u=this,l=Rh(n),f=Ed(n);return f.add({}).next(function(m){Jr("number"==typeof m);var Z,W,se,fe,ve,me,b=new yD(m,r,a,o),w=(W=u.N,se=u.userId,ve=(fe=b).baseMutations.map(function(pe){return Ob(W.Wt,pe)}),me=fe.mutations.map(function(pe){return Ob(W.Wt,pe)}),new gs(se,fe.batchId,fe.localWriteTime.toMillis(),ve,me)),C=[],T=new No(function(W,se){return Si(W.canonicalString(),se.canonicalString())}),I=(0,Ve.Z)(o);try{for(I.s();!(Z=I.n()).done;){var Y=Z.value,V=ic.key(u.userId,Y.key.path,m);T=T.add(Y.key.path.popLast()),C.push(f.put(w)),C.push(l.put(V,ic.PLACEHOLDER))}}catch(W){I.e(W)}finally{I.f()}return T.forEach(function(W){C.push(u.Ht.addToCollectionParentIndex(n,W))}),n.addOnCommittedListener(function(){u.Jt[m]=b.keys()}),En.waitFor(C).next(function(){return b})})}},{key:"lookupMutationBatch",value:function(n,r){var a=this;return Ed(n).get(r).next(function(o){return o?(Jr(o.userId===a.userId),wd(a.N,o)):null})}},{key:"Xt",value:function(n,r){var a=this;return this.Jt[r]?En.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(function(o){if(o){var u=o.keys();return a.Jt[r]=u,u}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(n,r){var a=this,o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]),l=null;return Ed(n).Kt({index:gs.userMutationsIndex,range:u},function(f,m,b){m.userId===a.userId&&(Jr(m.batchId>=o),l=wd(a.N,m)),b.done()}).next(function(){return l})}},{key:"getHighestUnacknowledgedBatchId",value:function(n){var r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),a=-1;return Ed(n).Kt({index:gs.userMutationsIndex,range:r,reverse:!0},function(o,u,l){a=u.batchId,l.done()}).next(function(){return a})}},{key:"getAllMutationBatches",value:function(n){var r=this,a=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ed(n).Lt(gs.userMutationsIndex,a).next(function(o){return o.map(function(u){return wd(r.N,u)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(n,r){var a=this,o=ic.prefixForPath(this.userId,r.path),u=IDBKeyRange.lowerBound(o),l=[];return Rh(n).Kt({range:u},function(f,m,b){var w=(0,Te.Z)(f,3),C=w[0],I=w[2],Z=gf(w[1]);if(C===a.userId&&r.path.isEqual(Z))return Ed(n).get(I).next(function(Y){if(!Y)throw Sr();Jr(Y.userId===a.userId),l.push(wd(a.N,Y))});b.done()}).next(function(){return l})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(n,r){var a=this,o=new No(Si),u=[];return r.forEach(function(l){var f=ic.prefixForPath(a.userId,l.path),m=IDBKeyRange.lowerBound(f),b=Rh(n).Kt({range:m},function(w,C,T){var I=(0,Te.Z)(w,3),Z=I[0],V=I[2],W=gf(I[1]);Z===a.userId&&l.path.isEqual(W)?o=o.add(V):T.done()});u.push(b)}),En.waitFor(u).next(function(){return a.Zt(n,o)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(n,r){var a=this,o=r.path,u=o.length+1,l=ic.prefixForPath(this.userId,o),f=IDBKeyRange.lowerBound(l),m=new No(Si);return Rh(n).Kt({range:f},function(b,w,C){var T=(0,Te.Z)(b,3),I=T[0],Y=T[2],V=gf(T[1]);I===a.userId&&o.isPrefixOf(V)?V.length===u&&(m=m.add(Y)):C.done()}).next(function(){return a.Zt(n,m)})}},{key:"Zt",value:function(n,r){var a=this,o=[],u=[];return r.forEach(function(l){u.push(Ed(n).get(l).next(function(f){if(null===f)throw Sr();Jr(f.userId===a.userId),o.push(wd(a.N,f))}))}),En.waitFor(u).next(function(){return o})}},{key:"removeMutationBatch",value:function(n,r){var a=this;return Vy(n.Qt,this.userId,r).next(function(o){return n.addOnCommittedListener(function(){a.te(r.batchId)}),En.forEach(o,function(u){return a.referenceDelegate.markPotentiallyOrphaned(n,u)})})}},{key:"te",value:function(n){delete this.Jt[n]}},{key:"performConsistencyCheck",value:function(n){var r=this;return this.checkEmpty(n).next(function(a){if(!a)return En.resolve();var o=IDBKeyRange.lowerBound(ic.prefixForUser(r.userId)),u=[];return Rh(n).Kt({range:o},function(l,f,m){if(l[0]===r.userId){var b=gf(l[1]);u.push(b)}else m.done()}).next(function(){Jr(0===u.length)})})}},{key:"containsKey",value:function(n,r){return kD(n,this.userId,r)}},{key:"ee",value:function(n){var r=this;return pm(n).get(this.userId).next(function(a){return a||new um(r.userId,-1,"")})}}],[{key:"Yt",value:function(n,r,a,o){return Jr(""!==n.uid),new i(n.isAuthenticated()?n.uid:"",r,a,o)}}]),i}();function kD(i,s,n){var r=ic.prefixForPath(s,n.path),a=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return Rh(i).Kt({range:o,qt:!0},function(l,f,m){var b=(0,Te.Z)(l,3);b[0]===s&&b[1]===a&&(u=!0),m.done()}).next(function(){return u})}function Ed(i){return au(i,gs.store)}function Rh(i){return au(i,ic.store)}function pm(i){return au(i,um.store)}var Vb=function(){function i(s){(0,M.Z)(this,i),this.ne=s}return(0,R.Z)(i,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new i(0)}},{key:"ie",value:function(){return new i(-1)}}]),i}(),YL=function(){function i(s,n){(0,M.Z)(this,i),this.referenceDelegate=s,this.N=n}return(0,R.Z)(i,[{key:"allocateTargetId",value:function(n){var r=this;return this.re(n).next(function(a){var o=new Vb(a.highestTargetId);return a.highestTargetId=o.next(),r.oe(n,a).next(function(){return a.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(n){return this.re(n).next(function(r){return $r.fromTimestamp(new Nu(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(n){return this.re(n).next(function(r){return r.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(n,r,a){var o=this;return this.re(n).next(function(u){return u.highestListenSequenceNumber=r,a&&(u.lastRemoteSnapshotVersion=a.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),o.oe(n,u)})}},{key:"addTargetData",value:function(n,r){var a=this;return this.ae(n,r).next(function(){return a.re(n).next(function(o){return o.targetCount+=1,a.ce(r,o),a.oe(n,o)})})}},{key:"updateTargetData",value:function(n,r){return this.ae(n,r)}},{key:"removeTargetData",value:function(n,r){var a=this;return this.removeMatchingKeysForTargetId(n,r.targetId).next(function(){return vm(n).delete(r.targetId)}).next(function(){return a.re(n)}).next(function(o){return Jr(o.targetCount>0),o.targetCount-=1,a.oe(n,o)})}},{key:"removeTargets",value:function(n,r,a){var o=this,u=0,l=[];return vm(n).Kt(function(f,m){var b=By(m);b.sequenceNumber<=r&&null===a.get(b.targetId)&&(u++,l.push(o.removeTargetData(n,b)))}).next(function(){return En.waitFor(l)}).next(function(){return u})}},{key:"forEachTarget",value:function(n,r){return vm(n).Kt(function(a,o){var u=By(o);r(u)})}},{key:"re",value:function(n){return CD(n).get(Cc.key).next(function(r){return Jr(null!==r),r})}},{key:"oe",value:function(n,r){return CD(n).put(Cc.key,r)}},{key:"ae",value:function(n,r){return vm(n).put(bD(this.N,r))}},{key:"ce",value:function(n,r){var a=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,a=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,a=!0),a}},{key:"getTargetCount",value:function(n){return this.re(n).next(function(r){return r.targetCount})}},{key:"getTargetData",value:function(n,r){var a=ky(r),o=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]),u=null;return vm(n).Kt({range:o,index:sl.queryTargetsIndexName},function(l,f,m){var b=By(f);RC(r,b.target)&&(u=b,m.done())}).next(function(){return u})}},{key:"addMatchingKeys",value:function(n,r,a){var o=this,u=[],l=yf(n);return r.forEach(function(f){var m=Wc(f.path);u.push(l.put(new iu(a,m))),u.push(o.referenceDelegate.addReference(n,a,f))}),En.waitFor(u)}},{key:"removeMatchingKeys",value:function(n,r,a){var o=this,u=yf(n);return En.forEach(r,function(l){var f=Wc(l.path);return En.waitFor([u.delete([a,f]),o.referenceDelegate.removeReference(n,a,l)])})}},{key:"removeMatchingKeysForTargetId",value:function(n,r){var a=yf(n),o=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(o)}},{key:"getMatchingKeysForTargetId",value:function(n,r){var a=IDBKeyRange.bound([r],[r+1],!1,!0),o=yf(n),u=Ua();return o.Kt({range:a,qt:!0},function(l,f,m){var b=gf(l[1]),w=new Fr(b);u=u.add(w)}).next(function(){return u})}},{key:"containsKey",value:function(n,r){var a=Wc(r.path),o=IDBKeyRange.bound([a],[jx(a)],!1,!0),u=0;return yf(n).Kt({index:iu.documentTargetsIndex,qt:!0,range:o},function(l,f,m){0!==(0,Te.Z)(l,2)[0]&&(u++,m.done())}).next(function(){return u>0})}},{key:"Et",value:function(n,r){return vm(n).get(r).next(function(a){return a?By(a):null})}}]),i}();function vm(i){return au(i,sl.store)}function CD(i){return au(i,Cc.store)}function yf(i){return au(i,iu.store)}function kd(i){return DD.apply(this,arguments)}function DD(){return(DD=(0,Qt.Z)(Ke().mark(function i(s){return Ke().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s.code===Kt.FAILED_PRECONDITION&&s.message===vD){r.next=2;break}throw s;case 2:Rn("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return r.stop()}},i)}))).apply(this,arguments)}function SD(i,s){var n=(0,Te.Z)(i,2),r=n[0],a=n[1],o=(0,Te.Z)(s,2),l=o[1],f=Si(r,o[0]);return 0===f?Si(a,l):f}var KL=function(){function i(s){(0,M.Z)(this,i),this.ue=s,this.buffer=new No(SD),this.he=0}return(0,R.Z)(i,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(n){var r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{var a=this.buffer.last();SD(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),i}(),$L=function(){function i(s,n){(0,M.Z)(this,i),this.garbageCollector=s,this.asyncQueue=n,this.de=!1,this.we=null}return(0,R.Z)(i,[{key:"start",value:function(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(n){var r=this,a=this.de?3e5:6e4;Rn("LruGarbageCollector","Garbage collection scheduled in ".concat(a,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,Qt.Z)(Ke().mark(function o(){return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r.we=null,r.de=!0,l.prev=1,l.next=4,n.collectGarbage(r.garbageCollector);case 4:l.next=14;break;case 6:if(l.prev=6,l.t0=l.catch(1),!hm(l.t0)){l.next=12;break}Rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l.t0),l.next=14;break;case 12:return l.next=14,kd(l.t0);case 14:return l.next=16,r._e(n);case 16:case"end":return l.stop()}},o,null,[[1,6]])})))}}]),i}(),qV=function(){function i(s,n){(0,M.Z)(this,i),this.me=s,this.params=n}return(0,R.Z)(i,[{key:"calculateTargetCount",value:function(n,r){return this.me.ge(n).next(function(a){return Math.floor(r/100*a)})}},{key:"nthSequenceNumber",value:function(n,r){var a=this;if(0===r)return En.resolve(tu.T);var o=new KL(r);return this.me.forEachTarget(n,function(u){return o.fe(u.sequenceNumber)}).next(function(){return a.me.ye(n,function(u){return o.fe(u)})}).next(function(){return o.maxValue})}},{key:"removeTargets",value:function(n,r,a){return this.me.removeTargets(n,r,a)}},{key:"removeOrphanedDocuments",value:function(n,r){return this.me.removeOrphanedDocuments(n,r)}},{key:"collect",value:function(n,r){var a=this;return-1===this.params.cacheSizeCollectionThreshold?(Rn("LruGarbageCollector","Garbage collection skipped; disabled"),En.resolve(_M)):this.getCacheSize(n).next(function(o){return o<a.params.cacheSizeCollectionThreshold?(Rn("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(o," is lower than threshold ").concat(a.params.cacheSizeCollectionThreshold)),_M):a.pe(n,r)})}},{key:"getCacheSize",value:function(n){return this.me.getCacheSize(n)}},{key:"pe",value:function(n,r){var o,u,l,f,m,b,w,a=this,C=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(function(T){return T>a.params.maximumSequenceNumbersToCollect?(Rn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(a.params.maximumSequenceNumbersToCollect," from ").concat(T)),u=a.params.maximumSequenceNumbersToCollect):u=T,f=Date.now(),a.nthSequenceNumber(n,u)}).next(function(T){return o=T,m=Date.now(),a.removeTargets(n,o,r)}).next(function(T){return l=T,b=Date.now(),a.removeOrphanedDocuments(n,o)}).next(function(T){return w=Date.now(),CC()<=kh.in.DEBUG&&Rn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(f-C,"ms\n\tDetermined least recently used ").concat(u," in ")+(m-f)+"ms\n"+"\tRemoved ".concat(l," targets in ")+(b-m)+"ms\n"+"\tRemoved ".concat(T," documents in ")+(w-b)+"ms\n"+"Total Duration: ".concat(w-C,"ms")),En.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:l,documentsRemoved:T})})}}]),i}(),YV=function(){function i(s,n){(0,M.Z)(this,i),this.db=s,this.garbageCollector=new qV(this,n)}return(0,R.Z)(i,[{key:"ge",value:function(n){var r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(function(a){return r.next(function(o){return a+o})})}},{key:"Ee",value:function(n){var r=0;return this.ye(n,function(a){r++}).next(function(){return r})}},{key:"forEachTarget",value:function(n,r){return this.db.getTargetCache().forEachTarget(n,r)}},{key:"ye",value:function(n,r){return this.Te(n,function(a,o){return r(o)})}},{key:"addReference",value:function(n,r,a){return AD(n,a)}},{key:"removeReference",value:function(n,r,a){return AD(n,a)}},{key:"removeTargets",value:function(n,r,a){return this.db.getTargetCache().removeTargets(n,r,a)}},{key:"markPotentiallyOrphaned",value:function(n,r){return AD(n,r)}},{key:"Ie",value:function(n,r){return o=r,u=!1,pm(a=n).jt(function(l){return kD(a,l,o).next(function(f){return f&&(u=!0),En.resolve(!f)})}).next(function(){return u});var a,o,u}},{key:"removeOrphanedDocuments",value:function(n,r){var a=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[],l=0;return this.Te(n,function(f,m){if(m<=r){var b=a.Ie(n,f).next(function(w){if(!w)return l++,o.getEntry(n,f).next(function(){return o.removeEntry(f),yf(n).delete([0,Wc(f.path)])})});u.push(b)}}).next(function(){return En.waitFor(u)}).next(function(){return o.apply(n)}).next(function(){return l})}},{key:"removeTarget",value:function(n,r){var a=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,a)}},{key:"updateLimboDocument",value:function(n,r){return AD(n,r)}},{key:"Te",value:function(n,r){var o,a=yf(n),u=tu.T;return a.Kt({index:iu.documentTargetsIndex},function(l,f){var m=(0,Te.Z)(l,2),C=f.path,T=f.sequenceNumber;0===m[0]?(u!==tu.T&&r(new Fr(gf(o)),u),u=T,o=C):u=tu.T}).next(function(){u!==tu.T&&r(new Fr(gf(o)),u)})}},{key:"getCacheSize",value:function(n){return this.db.getRemoteDocumentCache().getSize(n)}}]),i}();function AD(i,s){return yf(i).put((r=i.currentSequenceNumber,new iu(0,Wc(s.path),r)));var r}var Hy=function(){function i(s,n){(0,M.Z)(this,i),this.mapKeyFn=s,this.equalsFn=n,this.inner={}}return(0,R.Z)(i,[{key:"get",value:function(n){var r=this.mapKeyFn(n),a=this.inner[r];if(void 0!==a){var u,o=(0,Ve.Z)(a);try{for(o.s();!(u=o.n()).done;){var l=(0,Te.Z)(u.value,2),m=l[1];if(this.equalsFn(l[0],n))return m}}catch(b){o.e(b)}finally{o.f()}}}},{key:"has",value:function(n){return void 0!==this.get(n)}},{key:"set",value:function(n,r){var a=this.mapKeyFn(n),o=this.inner[a];if(void 0!==o){for(var u=0;u<o.length;u++)if(this.equalsFn(o[u][0],n))return void(o[u]=[n,r]);o.push([n,r])}else this.inner[a]=[[n,r]]}},{key:"delete",value:function(n){var r=this.mapKeyFn(n),a=this.inner[r];if(void 0===a)return!1;for(var o=0;o<a.length;o++)if(this.equalsFn(a[o][0],n))return 1===a.length?delete this.inner[r]:a.splice(o,1),!0;return!1}},{key:"forEach",value:function(n){Ys(this.inner,function(r,a){var u,o=(0,Ve.Z)(a);try{for(o.s();!(u=o.n()).done;){var l=(0,Te.Z)(u.value,2);n(l[0],l[1])}}catch(b){o.e(b)}finally{o.f()}})}},{key:"isEmpty",value:function(){return hd(this.inner)}}]),i}(),TD=function(){function i(){(0,M.Z)(this,i),this.changes=new Hy(function(s){return s.toString()},function(s,n){return s.isEqual(n)}),this.changesApplied=!1}return(0,R.Z)(i,[{key:"getReadTime",value:function(n){var r=this.changes.get(n);return r?r.readTime:$r.min()}},{key:"addEntry",value:function(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}},{key:"removeEntry",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(n,{document:ku.newInvalidDocument(n),readTime:r})}},{key:"getEntry",value:function(n,r){this.assertNotApplied();var a=this.changes.get(r);return void 0!==a?En.resolve(a.document):this.getFromCache(n,r)}},{key:"getEntries",value:function(n,r){return this.getAllFromCache(n,r)}},{key:"apply",value:function(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}},{key:"assertNotApplied",value:function(){}}]),i}(),zb=function(){function i(s,n){(0,M.Z)(this,i),this.N=s,this.Ht=n}return(0,R.Z)(i,[{key:"addEntry",value:function(n,r,a){return _f(n).put(Cd(r),a)}},{key:"removeEntry",value:function(n,r){var a=_f(n),o=Cd(r);return a.delete(o)}},{key:"updateMetadata",value:function(n,r){var a=this;return this.getMetadata(n).next(function(o){return o.byteSize+=r,a.Ae(n,o)})}},{key:"getEntry",value:function(n,r){var a=this;return _f(n).get(Cd(r)).next(function(o){return a.Re(r,o)})}},{key:"be",value:function(n,r){var a=this;return _f(n).get(Cd(r)).next(function(o){return{document:a.Re(r,o),size:zy(o)}})}},{key:"getEntries",value:function(n,r){var a=this,o=Ba();return this.Pe(n,r,function(u,l){var f=a.Re(u,l);o=o.insert(u,f)}).next(function(){return o})}},{key:"ve",value:function(n,r){var a=this,o=Ba(),u=new Cu(Fr.comparator);return this.Pe(n,r,function(l,f){var m=a.Re(l,f);o=o.insert(l,m),u=u.insert(l,zy(f))}).next(function(){return{documents:o,Ve:u}})}},{key:"Pe",value:function(n,r,a){if(r.isEmpty())return En.resolve();var o=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),u=r.getIterator(),l=u.getNext();return _f(n).Kt({range:o},function(f,m,b){for(var w=Fr.fromSegments(f);l&&Fr.comparator(l,w)<0;)a(l,null),l=u.getNext();l&&l.isEqual(w)&&(a(l,m),l=u.hasNext()?u.getNext():null),l?b.Mt(l.path.toArray()):b.done()}).next(function(){for(;l;)a(l,null),l=u.hasNext()?u.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(n,r,a){var o=this,u=Ba(),l=r.path.length+1,f={};if(a.isEqual($r.min())){var m=r.path.toArray();f.range=IDBKeyRange.lowerBound(m)}else{var b=r.path.toArray(),w=dm(a);f.range=IDBKeyRange.lowerBound([b,w],!0),f.index=Ks.collectionReadTimeIndex}return _f(n).Kt(f,function(C,T,I){if(C.length===l){var Z=_D(o.N,T);r.path.isPrefixOf(Z.key.path)?Mp(r,Z)&&(u=u.insert(Z.key,Z)):I.done()}}).next(function(){return u})}},{key:"newChangeBuffer",value:function(n){return new XL(this,!!n&&n.trackRemovals)}},{key:"getSize",value:function(n){return this.getMetadata(n).next(function(r){return r.byteSize})}},{key:"getMetadata",value:function(n){return wM(n).get(yd.key).next(function(r){return Jr(!!r),r})}},{key:"Ae",value:function(n,r){return wM(n).put(yd.key,r)}},{key:"Re",value:function(n,r){if(r){var a=_D(this.N,r);if(!a.isNoDocument()||!a.version.isEqual($r.min()))return a}return ku.newInvalidDocument(n)}}]),i}(),XL=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).Se=r,o.trackRemovals=a,o.De=new Hy(function(u){return u.toString()},function(u,l){return u.isEqual(l)}),o}return(0,R.Z)(n,[{key:"applyChanges",value:function(a){var o=this,u=[],l=0,f=new No(function(m,b){return Si(m.canonicalString(),b.canonicalString())});return this.changes.forEach(function(m,b){var w=o.De.get(m);if(b.document.isValidDocument()){var C=Ny(o.Se.N,b.document,o.getReadTime(m));f=f.add(m.path.popLast());var T=zy(C);l+=T-w,u.push(o.Se.addEntry(a,m,C))}else if(l-=w,o.trackRemovals){var I=Ny(o.Se.N,ku.newNoDocument(m,$r.min()),o.getReadTime(m));u.push(o.Se.addEntry(a,m,I))}else u.push(o.Se.removeEntry(a,m))}),f.forEach(function(m){u.push(o.Se.Ht.addToCollectionParentIndex(a,m))}),u.push(this.Se.updateMetadata(a,l)),En.waitFor(u)}},{key:"getFromCache",value:function(a,o){var u=this;return this.Se.be(a,o).next(function(l){return u.De.set(o,l.size),l.document})}},{key:"getAllFromCache",value:function(a,o){var u=this;return this.Se.ve(a,o).next(function(l){var f=l.documents;return l.Ve.forEach(function(b,w){u.De.set(b,w)}),f})}}]),n}(TD);function wM(i){return au(i,yd.store)}function _f(i){return au(i,Ks.store)}function Cd(i){return i.path.toArray()}var QL=function(){function i(s){(0,M.Z)(this,i),this.N=s}return(0,R.Z)(i,[{key:"Ct",value:function(n,r,a,o){var u=this;Jr(a<o&&a>=0&&o<=11);var m,l=new bd("createOrUpgrade",r);a<1&&o>=1&&(n.createObjectStore(qc.store),(m=n).createObjectStore(um.store,{keyPath:um.keyPath}),m.createObjectStore(gs.store,{keyPath:gs.keyPath,autoIncrement:!0}).createIndex(gs.userMutationsIndex,gs.userMutationsKeyPath,{unique:!0}),m.createObjectStore(ic.store),EM(n),function(m){m.createObjectStore(Ks.store)}(n));var f=En.resolve();return a<3&&o>=3&&(0!==a&&(function(m){m.deleteObjectStore(iu.store),m.deleteObjectStore(sl.store),m.deleteObjectStore(Cc.store)}(n),EM(n)),f=f.next(function(){return function(m){var b=m.store(Cc.store),w=new Cc(0,0,$r.min().toTimestamp(),0);return b.put(Cc.key,w)}(l)})),a<4&&o>=4&&(0!==a&&(f=f.next(function(){return function(m,b){return b.store(gs.store).Lt().next(function(w){m.deleteObjectStore(gs.store),m.createObjectStore(gs.store,{keyPath:gs.keyPath,autoIncrement:!0}).createIndex(gs.userMutationsIndex,gs.userMutationsKeyPath,{unique:!0});var C=b.store(gs.store),T=w.map(function(I){return C.put(I)});return En.waitFor(T)})}(n,l)})),f=f.next(function(){!function(m){m.createObjectStore(_d.store,{keyPath:_d.keyPath})}(n)})),a<5&&o>=5&&(f=f.next(function(){return u.Ce(l)})),a<6&&o>=6&&(f=f.next(function(){return function(m){m.createObjectStore(yd.store)}(n),u.Ne(l)})),a<7&&o>=7&&(f=f.next(function(){return u.xe(l)})),a<8&&o>=8&&(f=f.next(function(){return u.ke(n,l)})),a<9&&o>=9&&(f=f.next(function(){(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(n),function(m){var b=m.objectStore(Ks.store);b.createIndex(Ks.readTimeIndex,Ks.readTimeIndexPath,{unique:!1}),b.createIndex(Ks.collectionReadTimeIndex,Ks.collectionReadTimeIndexPath,{unique:!1})}(r)})),a<10&&o>=10&&(f=f.next(function(){return u.$e(l)})),a<11&&o>=11&&(f=f.next(function(){(function(m){m.createObjectStore(Ry.store,{keyPath:Ry.keyPath})})(n),function(m){m.createObjectStore(Oy.store,{keyPath:Oy.keyPath})}(n)})),f}},{key:"Ne",value:function(n){var r=0;return n.store(Ks.store).Kt(function(a,o){r+=zy(o)}).next(function(){var a=new yd(r);return n.store(yd.store).put(yd.key,a)})}},{key:"Ce",value:function(n){var r=this,a=n.store(um.store),o=n.store(gs.store);return a.Lt().next(function(u){return En.forEach(u,function(l){var f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return o.Lt(gs.userMutationsIndex,f).next(function(m){return En.forEach(m,function(b){Jr(b.userId===l.userId);var w=wd(r.N,b);return Vy(n,l.userId,w).next(function(){})})})})})}},{key:"xe",value:function(n){var r=n.store(iu.store),a=n.store(Ks.store);return n.store(Cc.store).get(Cc.key).next(function(o){var u=[];return a.Kt(function(l,f){var m=new yi(l),b=[0,Wc(m)];u.push(r.get(b).next(function(w){return w?En.resolve():r.put(new iu(0,Wc(m),o.highestListenSequenceNumber))}))}).next(function(){return En.waitFor(u)})})}},{key:"ke",value:function(n,r){n.createObjectStore(lm.store,{keyPath:lm.keyPath});var a=r.store(lm.store),o=new ED,u=function(f){if(o.add(f)){var m=f.lastSegment(),b=f.popLast();return a.put({collectionId:m,parent:Wc(b)})}};return r.store(Ks.store).Kt({qt:!0},function(l,f){var m=new yi(l);return u(m.popLast())}).next(function(){return r.store(ic.store).Kt({qt:!0},function(l,f){var T=gf((0,Te.Z)(l,3)[1]);return u(T.popLast())})})}},{key:"$e",value:function(n){var r=this,a=n.store(sl.store);return a.Kt(function(o,u){var l=By(u),f=bD(r.N,l);return a.put(f)})}}]),i}();function EM(i){i.createObjectStore(iu.store,{keyPath:iu.keyPath}).createIndex(iu.documentTargetsIndex,iu.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(sl.store,{keyPath:sl.keyPath}).createIndex(sl.queryTargetsIndexName,sl.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(Cc.store)}var xD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JL=function(){function i(s,n,r,a,o,u,l,f,m,b){if((0,M.Z)(this,i),this.allowTabSynchronization=s,this.persistenceKey=n,this.clientId=r,this.Oe=o,this.window=u,this.document=l,this.Fe=m,this.Me=b,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(w){return Promise.resolve()},!i.bt())throw new pn(Kt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YV(this,a),this.We=n+"main",this.N=new Ly(f),this.Ge=new cm(this.We,11,new QL(this.N)),this.ze=new YL(this.referenceDelegate,this.N),this.Ht=new Uy,this.He=new zb(this.N,this.Ht),this.Je=new mM,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===b&&ao("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,R.Z)(i,[{key:"start",value:function(){var n=this;return this.Xe().then(function(){if(!n.isPrimary&&!n.allowTabSynchronization)throw new pn(Kt.FAILED_PRECONDITION,xD);return n.Ze(),n.tn(),n.en(),n.runTransaction("getHighestListenSequenceNumber","readonly",function(r){return n.ze.getHighestSequenceNumber(r)})}).then(function(r){n.Le=new tu(r,n.Fe)}).then(function(){n.Be=!0}).catch(function(r){return n.Ge&&n.Ge.close(),Promise.reject(r)})}},{key:"nn",value:function(n){var r=this;return this.Qe=function(){var a=(0,Qt.Z)(Ke().mark(function o(u){return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!r.started){f.next=2;break}return f.abrupt("return",n(u));case 2:case"end":return f.stop()}},o)}));return function(o){return a.apply(this,arguments)}}(),n(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(n){this.Ge.xt(function(){var r=(0,Qt.Z)(Ke().mark(function a(o){return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.t0=null===o.newVersion,!l.t0){l.next=4;break}return l.next=4,n();case 4:case"end":return l.stop()}},a)}));return function(a){return r.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,Qt.Z)(Ke().mark(function a(){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.t0=r.started,!u.t0){u.next=4;break}return u.next=4,r.Xe();case 4:case"end":return u.stop()}},a)}))))}},{key:"Xe",value:function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(r){return jy(r).put(new _d(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.sn(r).next(function(a){a||(n.isPrimary=!1,n.Oe.enqueueRetryable(function(){return n.Qe(!1)}))})}).next(function(){return n.rn(r)}).next(function(a){return n.isPrimary&&!a?n.on(r).next(function(){return!1}):!!a&&n.an(r).next(function(){return!0})})}).catch(function(r){if(hm(r))return Rn("IndexedDbPersistence","Failed to extend owner lease: ",r),n.isPrimary;if(!n.allowTabSynchronization)throw r;return Rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(function(r){n.isPrimary!==r&&n.Oe.enqueueRetryable(function(){return n.Qe(r)}),n.isPrimary=r})}},{key:"sn",value:function(n){var r=this;return Gy(n).get(qc.key).next(function(a){return En.resolve(r.cn(a))})}},{key:"un",value:function(n){return jy(n).delete(this.clientId)}},{key:"hn",value:(s=(0,Qt.Z)(Ke().mark(function r(){var o,u,l,a=this;return Ke().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!this.isPrimary||this.ln(this.je,18e5)){b.next=6;break}return this.je=Date.now(),b.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(w){var C=au(w,_d.store);return C.Lt().next(function(T){var I=a.fn(T,18e5),Z=T.filter(function(Y){return-1===I.indexOf(Y)});return En.forEach(Z,function(Y){return C.delete(Y.clientId)}).next(function(){return Z})})}).catch(function(){return[]});case 4:if(o=b.sent,this.Ye){u=(0,Ve.Z)(o);try{for(u.s();!(l=u.n()).done;)this.Ye.removeItem(this.dn(l.value.clientId))}catch(w){u.e(w)}finally{u.f()}}case 6:case"end":return b.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"en",value:function(){var n=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return n.Xe().then(function(){return n.hn()}).then(function(){return n.en()})})}},{key:"cn",value:function(n){return!!n&&n.ownerId===this.clientId}},{key:"rn",value:function(n){var r=this;return this.Me?En.resolve(!0):Gy(n).get(qc.key).next(function(a){if(null!==a&&r.ln(a.leaseTimestampMs,5e3)&&!r.wn(a.ownerId)){if(r.cn(a)&&r.networkEnabled)return!0;if(!r.cn(a)){if(!a.allowTabSynchronization)throw new pn(Kt.FAILED_PRECONDITION,xD);return!1}}return!(!r.networkEnabled||!r.inForeground)||jy(n).Lt().next(function(o){return void 0===r.fn(o,5e3).find(function(u){return!(r.clientId===u.clientId||!(!r.networkEnabled&&u.networkEnabled||!r.inForeground&&u.inForeground&&r.networkEnabled===u.networkEnabled))})})}).next(function(a){return r.isPrimary!==a&&Rn("IndexedDbPersistence","Client ".concat(a?"is":"is not"," eligible for a primary lease.")),a})}},{key:"shutdown",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){var a=this;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),u.next=7,this.Ge.runTransaction("shutdown","readwrite",[qc.store,_d.store],function(l){var f=new jL(l,tu.T);return a.on(f).next(function(){return a.un(f)})});case 7:this.Ge.close(),this.yn();case 9:case"end":return u.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"fn",value:function(n,r){var a=this;return n.filter(function(o){return a.ln(o.updateTimeMs,r)&&!a.wn(o.clientId)})}},{key:"pn",value:function(){var n=this;return this.runTransaction("getActiveClients","readonly",function(r){return jy(r).Lt().next(function(a){return n.fn(a,18e5).map(function(o){return o.clientId})})})}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(n){return bM.Yt(n,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(n,r,a){var l,o=this;return Rn("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",vM,function(f){return l=new jL(f,o.Le?o.Le.next():tu.T),"readwrite-primary"===r?o.sn(l).next(function(m){return!!m||o.rn(l)}).next(function(m){if(!m)throw ao("Failed to obtain primary lease for action '".concat(n,"'.")),o.isPrimary=!1,o.Oe.enqueueRetryable(function(){return o.Qe(!1)}),new pn(Kt.FAILED_PRECONDITION,vD);return a(l)}).next(function(m){return o.an(l).next(function(){return m})}):o.En(l).next(function(){return a(l)})}).then(function(f){return l.raiseOnCommittedEvent(),f})}},{key:"En",value:function(n){var r=this;return Gy(n).get(qc.key).next(function(a){if(null!==a&&r.ln(a.leaseTimestampMs,5e3)&&!r.wn(a.ownerId)&&!r.cn(a)&&!(r.Me||r.allowTabSynchronization&&a.allowTabSynchronization))throw new pn(Kt.FAILED_PRECONDITION,xD)})}},{key:"an",value:function(n){var r=new qc(this.clientId,this.allowTabSynchronization,Date.now());return Gy(n).put(qc.key,r)}},{key:"on",value:function(n){var r=this,a=Gy(n);return a.get(qc.key).next(function(o){return r.cn(o)?(Rn("IndexedDbPersistence","Releasing primary lease."),a.delete(qc.key)):En.resolve()})}},{key:"ln",value:function(n,r){var a=Date.now();return!(n<a-r||n>a&&(ao("Detected an update time that is in the future: ".concat(n," > ").concat(a)),1))}},{key:"Ze",value:function(){var n=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){n.Oe.enqueueAndForget(function(){return n.inForeground="visible"===n.document.visibilityState,n.Xe()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var r,n=this;"function"==typeof(null===(r=this.window)||void 0===r?void 0:r.addEventListener)&&(this.Ue=function(){n._n(),(0,Re.G6)()&&navigator.appVersion.match("Version/14")&&n.Oe.enterRestrictedMode(!0),n.Oe.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(n){var r;try{var a=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Rn("IndexedDbPersistence","Client '".concat(n,"' ").concat(a?"is":"is not"," zombied in LocalStorage")),a}catch(o){return ao("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){ao("Failed to set zombie client id.",n)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}},{key:"dn",value:function(n){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(n)}}],[{key:"bt",value:function(){return cm.bt()}}]),i;var s}();function Gy(i){return au(i,qc.store)}function jy(i){return au(i,_d.store)}function MD(i,s){var n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+s+"/"+n+"/"}var eN=function i(s,n){(0,M.Z)(this,i),this.progress=s,this.Tn=n},Fp=function(){function i(s,n,r){(0,M.Z)(this,i),this.He=s,this.In=n,this.Ht=r}return(0,R.Z)(i,[{key:"An",value:function(n,r){var a=this;return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(function(o){return a.Rn(n,r,o)})}},{key:"Rn",value:function(n,r,a){return this.He.getEntry(n,r).next(function(o){var l,u=(0,Ve.Z)(a);try{for(u.s();!(l=u.n()).done;)l.value.applyToLocalView(o)}catch(m){u.e(m)}finally{u.f()}return o})}},{key:"bn",value:function(n,r){n.forEach(function(a,o){var l,u=(0,Ve.Z)(r);try{for(u.s();!(l=u.n()).done;)l.value.applyToLocalView(o)}catch(m){u.e(m)}finally{u.f()}})}},{key:"Pn",value:function(n,r){var a=this;return this.He.getEntries(n,r).next(function(o){return a.vn(n,o).next(function(){return o})})}},{key:"vn",value:function(n,r){var a=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(function(o){return a.bn(r,o)})}},{key:"getDocumentsMatchingQuery",value:function(n,r,a){return Fr.isDocumentKey((o=r).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(n,r.path):zC(r)?this.Sn(n,r,a):this.Dn(n,r,a);var o}},{key:"Vn",value:function(n,r){return this.An(n,new Fr(r)).next(function(a){var o=tD();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}},{key:"Sn",value:function(n,r,a){var o=this,u=r.collectionGroup,l=tD();return this.Ht.getCollectionParents(n,u).next(function(f){return En.forEach(f,function(m){var w,C,b=(w=r,C=m.child(u),new df(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));return o.Dn(n,b,a).next(function(w){w.forEach(function(C,T){l=l.insert(C,T)})})}).next(function(){return l})})}},{key:"Dn",value:function(n,r,a){var u,l,o=this;return this.He.getDocumentsMatchingQuery(n,r,a).next(function(f){return u=f,o.In.getAllMutationBatchesAffectingQuery(n,r)}).next(function(f){return o.Cn(n,l=f,u).next(function(m){u=m;var w,b=(0,Ve.Z)(l);try{for(b.s();!(w=b.n()).done;){var I,C=w.value,T=(0,Ve.Z)(C.mutations);try{for(T.s();!(I=T.n()).done;){var Z=I.value,Y=Z.key,V=u.get(Y);null==V&&(V=ku.newInvalidDocument(Y),u=u.insert(Y,V)),xb(Z,V,C.localWriteTime),V.isFoundDocument()||(u=u.remove(Y))}}catch(W){T.e(W)}finally{T.f()}}}catch(W){b.e(W)}finally{b.f()}})}).next(function(){return u.forEach(function(f,m){Mp(r,m)||(u=u.remove(f))}),u})}},{key:"Cn",value:function(n,r,a){var l,o=Ua(),u=(0,Ve.Z)(r);try{for(u.s();!(l=u.n()).done;){var b,m=(0,Ve.Z)(l.value.mutations);try{for(m.s();!(b=m.n()).done;){var w=b.value;w instanceof vf&&null===a.get(w.key)&&(o=o.add(w.key))}}catch(T){m.e(T)}finally{m.f()}}}catch(T){u.e(T)}finally{u.f()}var C=a;return this.He.getEntries(n,o).next(function(T){return T.forEach(function(I,Z){Z.isFoundDocument()&&(C=C.insert(I,Z))}),C})}}]),i}(),tN=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.targetId=s,this.fromCache=n,this.Nn=r,this.xn=a}return(0,R.Z)(i,null,[{key:"kn",value:function(n,r){var l,a=Ua(),o=Ua(),u=(0,Ve.Z)(r.docChanges);try{for(u.s();!(l=u.n()).done;){var f=l.value;switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:o=o.add(f.doc.key)}}}catch(m){u.e(m)}finally{u.f()}return new i(n,r.fromCache,a,o)}}]),i}(),ID=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"$n",value:function(n){this.On=n}},{key:"getDocumentsMatchingQuery",value:function(n,r,a,o){var l,u=this;return 0===(l=r).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||a.isEqual($r.min())?this.Fn(n,r):this.On.Pn(n,o).next(function(l){var f=u.Mn(r,l);return(Db(r)||Cy(r))&&u.Ln(r.limitType,f,o,a)?u.Fn(n,r):(CC()<=kh.in.DEBUG&&Rn("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Sb(r)),u.On.getDocumentsMatchingQuery(n,r,a).next(function(m){return f.forEach(function(b){m=m.insert(b.key,b)}),m}))})}},{key:"Mn",value:function(n,r){var a=new No(AL(n));return r.forEach(function(o,u){Mp(n,u)&&(a=a.add(u))}),a}},{key:"Ln",value:function(n,r,a,o){if(a.size!==r.size)return!0;var u="F"===n?r.last():r.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}},{key:"Fn",value:function(n,r){return CC()<=kh.in.DEBUG&&Rn("QueryEngine","Using full collection scan to execute query:",Sb(r)),this.On.getDocumentsMatchingQuery(n,r,$r.min())}}]),i}(),nN=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.persistence=s,this.Bn=n,this.N=a,this.Un=new Cu(Si),this.qn=new Hy(function(o){return ky(o)},RC),this.Kn=$r.min(),this.In=s.getMutationQueue(r),this.jn=s.getRemoteDocumentCache(),this.ze=s.getTargetCache(),this.Qn=new Fp(this.jn,this.In,this.persistence.getIndexManager()),this.Je=s.getBundleCache(),this.Bn.$n(this.Qn)}return(0,R.Z)(i,[{key:"collectGarbage",value:function(n){var r=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(a){return n.collect(a,r.Un)})}}]),i}();function PD(i,s,n,r){return new nN(i,s,n,r)}function kM(i,s){return Hb.apply(this,arguments)}function Hb(){return(Hb=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o,u;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=Un(s),a=r.In,o=r.Qn,f.next=4,r.persistence.runTransaction("Handle user change","readonly",function(m){var b;return r.In.getAllMutationBatches(m).next(function(w){return b=w,a=r.persistence.getMutationQueue(n),o=new Fp(r.jn,a,r.persistence.getIndexManager()),a.getAllMutationBatches(m)}).next(function(w){var Y,C=[],T=[],I=Ua(),Z=(0,Ve.Z)(b);try{for(Z.s();!(Y=Z.n()).done;){var V=Y.value;C.push(V.batchId);var se,W=(0,Ve.Z)(V.mutations);try{for(W.s();!(se=W.n()).done;)I=I.add(se.value.key)}catch(Ze){W.e(Ze)}finally{W.f()}}}catch(Ze){Z.e(Ze)}finally{Z.f()}var me,ve=(0,Ve.Z)(w);try{for(ve.s();!(me=ve.n()).done;){var pe=me.value;T.push(pe.batchId);var je,ke=(0,Ve.Z)(pe.mutations);try{for(ke.s();!(je=ke.n()).done;)I=I.add(je.value.key)}catch(Ze){ke.e(Ze)}finally{ke.f()}}}catch(Ze){ve.e(Ze)}finally{ve.f()}return o.Pn(m,I).next(function(Ze){return{Wn:Ze,removedBatchIds:C,addedBatchIds:T}})})});case 4:return u=f.sent,f.abrupt("return",(r.In=a,r.Qn=o,r.Bn.$n(r.Qn),u));case 6:case"end":return f.stop()}},i)}))).apply(this,arguments)}function rN(i,s){var n=Un(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var u,l,f,m,b,w,C,a=s.batch.keys(),o=n.jn.newChangeBuffer({trackRemovals:!0});return(u=n,l=r,f=s,m=o,b=f.batch,w=b.keys(),C=En.resolve(),w.forEach(function(T){C=C.next(function(){return m.getEntry(l,T)}).next(function(I){var Z=f.docVersions.get(T);Jr(null!==Z),I.version.compareTo(Z)<0&&(b.applyToRemoteDocument(I,f),I.isValidDocument()&&m.addEntry(I,f.commitVersion))})}),C.next(function(){return u.In.removeMutationBatch(l,b)})).next(function(){return o.apply(r)}).next(function(){return n.In.performConsistencyCheck(r)}).next(function(){return n.Qn.Pn(r,a)})})}function Gb(i){var s=Un(i);return s.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return s.ze.getLastRemoteSnapshotVersion(n)})}function iN(i,s){var n=Un(i),r=s.snapshotVersion,a=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var u=n.jn.newChangeBuffer({trackRemovals:!0});a=n.Un;var l=[];s.targetChanges.forEach(function(b,w){var Z,Y,V,C=a.get(w);if(C){l.push(n.ze.removeMatchingKeys(o,b.removedDocuments,w).next(function(){return n.ze.addMatchingKeys(o,b.addedDocuments,w)}));var T=b.resumeToken;if(T.approximateByteSize()>0){var I=C.withResumeToken(T,r).withSequenceNumber(o.currentSequenceNumber);a=a.insert(w,I),Z=C,V=b,Jr((Y=I).resumeToken.approximateByteSize()>0),(0===Z.resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0)&&l.push(n.ze.updateTargetData(o,I))}}});var f=Ba();if(s.documentUpdates.forEach(function(b,w){s.resolvedLimboDocuments.has(b)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,b))}),l.push(FD(o,u,s.documentUpdates,r,void 0).next(function(b){f=b})),!r.isEqual($r.min())){var m=n.ze.getLastRemoteSnapshotVersion(o).next(function(b){return n.ze.setTargetsMetadata(o,o.currentSequenceNumber,r)});l.push(m)}return En.waitFor(l).next(function(){return u.apply(o)}).next(function(){return n.Qn.vn(o,f)}).next(function(){return f})}).then(function(o){return n.Un=a,o})}function FD(i,s,n,r,a){var o=Ua();return n.forEach(function(u){return o=o.add(u)}),s.getEntries(i,o).next(function(u){var l=Ba();return n.forEach(function(f,m){var b=u.get(f),w=(null==a?void 0:a.get(f))||r;m.isNoDocument()&&m.version.isEqual($r.min())?(s.removeEntry(f,w),l=l.insert(f,m)):!b.isValidDocument()||m.version.compareTo(b.version)>0||0===m.version.compareTo(b.version)&&b.hasPendingWrites?(s.addEntry(m,w),l=l.insert(f,m)):Rn("LocalStore","Ignoring outdated watch update for ",f,". Current version:",b.version," Watch version:",m.version)}),l})}function CM(i,s){var n=Un(i);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return void 0===s&&(s=-1),n.In.getNextMutationBatchAfterBatchId(r,s)})}function mm(i,s){var n=Un(i);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var a;return n.ze.getTargetData(r,s).next(function(o){return o?En.resolve(a=o):n.ze.allocateTargetId(r).next(function(u){return a=new Bb(s,u,0,r.currentSequenceNumber),n.ze.addTargetData(r,a).next(function(){return a})})})}).then(function(r){var a=n.Un.get(r.targetId);return(null===a||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Un=n.Un.insert(r.targetId,r),n.qn.set(s,r.targetId)),r})}function gm(i,s,n){return RD.apply(this,arguments)}function RD(){return(RD=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o,u;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(a=Un(s),o=a.Un.get(n),u=r?"readwrite":"readwrite-primary",f.prev=1,f.t0=r,f.t0){f.next=6;break}return f.next=6,a.persistence.runTransaction("Release target",u,function(m){return a.persistence.referenceDelegate.removeTarget(m,o)});case 6:f.next=13;break;case 8:if(f.prev=8,f.t1=f.catch(1),hm(f.t1)){f.next=12;break}throw f.t1;case 12:Rn("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(f.t1));case 13:a.Un=a.Un.remove(n),a.qn.delete(o.target);case 14:case"end":return f.stop()}},i,null,[[1,8]])}))).apply(this,arguments)}function ym(i,s,n){var r=Un(i),a=$r.min(),o=Ua();return r.persistence.runTransaction("Execute query","readonly",function(u){return(l=r,f=u,m=Ec(s),b=Un(l),w=b.qn.get(m),void 0!==w?En.resolve(b.Un.get(w)):b.ze.getTargetData(f,m)).next(function(l){if(l)return a=l.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(u,l.targetId).next(function(f){o=f})}).next(function(){return r.Bn.getDocumentsMatchingQuery(u,s,n?a:$r.min(),n?o:Ua())}).next(function(l){return{documents:l,Gn:o}});var l,f,m,b,w})}function DM(i,s){var n=Un(i),r=Un(n.ze),a=n.Un.get(s);return a?Promise.resolve(a.target):n.persistence.runTransaction("Get target data","readonly",function(o){return r.Et(o,s).next(function(u){return u?u.target:null})})}function OD(i){var s=Un(i);return s.persistence.runTransaction("Get new document changes","readonly",function(n){return a=n,o=s.Kn,u=Un(s.jn),l=Ba(),f=dm(o),m=_f(a),b=IDBKeyRange.lowerBound(f,!0),m.Kt({index:Ks.readTimeIndex,range:b},function(w,C){var T=_D(u.N,C);l=l.insert(T.key,T),f=C.readTime}).next(function(){return{Tn:l,readTime:Ml(f)}});var a,o,u,l,f,m,b}).then(function(n){var r=n.Tn;return s.Kn=n.readTime,r})}function aN(i){return LD.apply(this,arguments)}function LD(){return(LD=(0,Qt.Z)(Ke().mark(function i(s){var n;return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=Un(s),a.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",function(o){return l=_f(o),f=$r.min(),l.Kt({index:Ks.readTimeIndex,reverse:!0},function(m,b,w){b.readTime&&(f=Ml(b.readTime)),w.done()}).next(function(){return f});var l,f}).then(function(o){n.Kn=o}));case 2:case"end":return a.stop()}},i)}))).apply(this,arguments)}function sN(i,s,n,r){return ND.apply(this,arguments)}function ND(){return(ND=(0,Qt.Z)(Ke().mark(function i(s,n,r,a){var o,u,l,f,m,b,w,C,T,I;return Ke().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:o=Un(s),u=Ua(),l=Ba(),f=nD(),m=(0,Ve.Z)(r);try{for(m.s();!(b=m.n()).done;)C=n.zn((w=b.value).metadata.name),w.document&&(u=u.add(C)),l=l.insert(C,n.Hn(w)),f=f.insert(C,n.Jn(w.metadata.readTime))}catch(V){m.e(V)}finally{m.f()}return T=o.jn.newChangeBuffer({trackRemovals:!0}),Y.next=7,mm(o,Ec(xp(yi.fromString("__bundle__/docs/".concat(V=a)))));case 7:return I=Y.sent,Y.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",function(V){return FD(V,T,l,$r.min(),f).next(function(W){return T.apply(V),W}).next(function(W){return o.ze.removeMatchingKeysForTargetId(V,I.targetId).next(function(){return o.ze.addMatchingKeys(V,u,I.targetId)}).next(function(){return o.Qn.vn(V,W)}).next(function(){return W})})}));case 9:case"end":return Y.stop()}var V},i)}))).apply(this,arguments)}function oN(i,s){return ZD.apply(this,arguments)}function ZD(){return(ZD=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o,u=arguments;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Ua(),f.next=3,mm(s,Ec(Ub(n.bundledQuery)));case 3:return a=f.sent,o=Un(s),f.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",function(m){var b=Zo(n.readTime);if(a.snapshotVersion.compareTo(b)>=0)return o.Je.saveNamedQuery(m,n);var w=a.withResumeToken(nu.EMPTY_BYTE_STRING,b);return o.Un=o.Un.insert(w.targetId,w),o.ze.updateTargetData(m,w).next(function(){return o.ze.removeMatchingKeysForTargetId(m,a.targetId)}).next(function(){return o.ze.addMatchingKeys(m,r,a.targetId)}).next(function(){return o.Je.saveNamedQuery(m,n)})}));case 6:case"end":return f.stop()}},i)}))).apply(this,arguments)}var uN=function(){function i(s){(0,M.Z)(this,i),this.N=s,this.Yn=new Map,this.Xn=new Map}return(0,R.Z)(i,[{key:"getBundleMetadata",value:function(n,r){return En.resolve(this.Yn.get(r))}},{key:"saveBundleMetadata",value:function(n,r){var a;return this.Yn.set(r.id,{id:(a=r).id,version:a.version,createTime:Zo(a.createTime)}),En.resolve()}},{key:"getNamedQuery",value:function(n,r){return En.resolve(this.Xn.get(r))}},{key:"saveNamedQuery",value:function(n,r){return this.Xn.set(r.name,{name:(a=r).name,query:Ub(a.bundledQuery),readTime:Zo(a.readTime)}),En.resolve();var a}}]),i}(),BD=function(){function i(){(0,M.Z)(this,i),this.Zn=new No(Bo.ts),this.es=new No(Bo.ns)}return(0,R.Z)(i,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(n,r){var a=new Bo(n,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}},{key:"ss",value:function(n,r){var a=this;n.forEach(function(o){return a.addReference(o,r)})}},{key:"removeReference",value:function(n,r){this.rs(new Bo(n,r))}},{key:"os",value:function(n,r){var a=this;n.forEach(function(o){return a.removeReference(o,r)})}},{key:"cs",value:function(n){var r=this,a=new Fr(new yi([])),o=new Bo(a,n),u=new Bo(a,n+1),l=[];return this.es.forEachInRange([o,u],function(f){r.rs(f),l.push(f.key)}),l}},{key:"us",value:function(){var n=this;this.Zn.forEach(function(r){return n.rs(r)})}},{key:"rs",value:function(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}},{key:"hs",value:function(n){var r=new Fr(new yi([])),a=new Bo(r,n),o=new Bo(r,n+1),u=Ua();return this.es.forEachInRange([a,o],function(l){u=u.add(l.key)}),u}},{key:"containsKey",value:function(n){var r=new Bo(n,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&n.isEqual(a.key)}}]),i}(),Bo=function(){function i(s,n){(0,M.Z)(this,i),this.key=s,this.ls=n}return(0,R.Z)(i,null,[{key:"ts",value:function(n,r){return Fr.comparator(n.key,r.key)||Si(n.ls,r.ls)}},{key:"ns",value:function(n,r){return Si(n.ls,r.ls)||Fr.comparator(n.key,r.key)}}]),i}(),SM=function(){function i(s,n){(0,M.Z)(this,i),this.Ht=s,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new No(Bo.ts)}return(0,R.Z)(i,[{key:"checkEmpty",value:function(n){return En.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(n,r,a,o){var u=this.fs;this.fs++;var l=new yD(u,r,a,o);this.In.push(l);var m,f=(0,Ve.Z)(o);try{for(f.s();!(m=f.n()).done;){var b=m.value;this.ds=this.ds.add(new Bo(b.key,u)),this.Ht.addToCollectionParentIndex(n,b.key.path.popLast())}}catch(w){f.e(w)}finally{f.f()}return En.resolve(l)}},{key:"lookupMutationBatch",value:function(n,r){return En.resolve(this.ws(r))}},{key:"getNextMutationBatchAfterBatchId",value:function(n,r){var o=this._s(r+1),u=o<0?0:o;return En.resolve(this.In.length>u?this.In[u]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return En.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(n){return En.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(n,r){var a=this,o=new Bo(r,0),u=new Bo(r,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([o,u],function(f){var m=a.ws(f.ls);l.push(m)}),En.resolve(l)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(n,r){var a=this,o=new No(Si);return r.forEach(function(u){var l=new Bo(u,0),f=new Bo(u,Number.POSITIVE_INFINITY);a.ds.forEachInRange([l,f],function(m){o=o.add(m.ls)})}),En.resolve(this.gs(o))}},{key:"getAllMutationBatchesAffectingQuery",value:function(n,r){var a=r.path,o=a.length+1,u=a;Fr.isDocumentKey(u)||(u=u.child(""));var l=new Bo(new Fr(u),0),f=new No(Si);return this.ds.forEachWhile(function(m){var b=m.key.path;return!!a.isPrefixOf(b)&&(b.length===o&&(f=f.add(m.ls)),!0)},l),En.resolve(this.gs(f))}},{key:"gs",value:function(n){var r=this,a=[];return n.forEach(function(o){var u=r.ws(o);null!==u&&a.push(u)}),a}},{key:"removeMutationBatch",value:function(n,r){var a=this;Jr(0===this.ys(r.batchId,"removed")),this.In.shift();var o=this.ds;return En.forEach(r.mutations,function(u){var l=new Bo(u.key,r.batchId);return o=o.delete(l),a.referenceDelegate.markPotentiallyOrphaned(n,u.key)}).next(function(){a.ds=o})}},{key:"te",value:function(n){}},{key:"containsKey",value:function(n,r){var a=new Bo(r,0),o=this.ds.firstAfterOrEqual(a);return En.resolve(r.isEqual(o&&o.key))}},{key:"performConsistencyCheck",value:function(n){return En.resolve()}},{key:"ys",value:function(n,r){return this._s(n)}},{key:"_s",value:function(n){return 0===this.In.length?0:n-this.In[0].batchId}},{key:"ws",value:function(n){var r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}]),i}(),lN=function(){function i(s,n){(0,M.Z)(this,i),this.Ht=s,this.ps=n,this.docs=new Cu(Fr.comparator),this.size=0}return(0,R.Z)(i,[{key:"addEntry",value:function(n,r,a){var o=r.key,u=this.docs.get(o),l=u?u.size:0,f=this.ps(r);return this.docs=this.docs.insert(o,{document:r.clone(),size:f,readTime:a}),this.size+=f-l,this.Ht.addToCollectionParentIndex(n,o.path.popLast())}},{key:"removeEntry",value:function(n){var r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}},{key:"getEntry",value:function(n,r){var a=this.docs.get(r);return En.resolve(a?a.document.clone():ku.newInvalidDocument(r))}},{key:"getEntries",value:function(n,r){var a=this,o=Ba();return r.forEach(function(u){var l=a.docs.get(u);o=o.insert(u,l?l.document.clone():ku.newInvalidDocument(u))}),En.resolve(o)}},{key:"getDocumentsMatchingQuery",value:function(n,r,a){for(var o=Ba(),u=new Fr(r.path.child("")),l=this.docs.getIteratorFrom(u);l.hasNext();){var f=l.getNext(),b=f.value,w=b.document,C=b.readTime;if(!r.path.isPrefixOf(f.key.path))break;C.compareTo(a)<=0||Mp(r,w)&&(o=o.insert(w.key,w.clone()))}return En.resolve(o)}},{key:"Es",value:function(n,r){return En.forEach(this.docs,function(a){return r(a)})}},{key:"newChangeBuffer",value:function(n){return new cN(this)}},{key:"getSize",value:function(n){return En.resolve(this.size)}}]),i}(),cN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).Se=r,a}return(0,R.Z)(n,[{key:"applyChanges",value:function(a){var o=this,u=[];return this.changes.forEach(function(l,f){f.document.isValidDocument()?u.push(o.Se.addEntry(a,f.document,o.getReadTime(l))):o.Se.removeEntry(l)}),En.waitFor(u)}},{key:"getFromCache",value:function(a,o){return this.Se.getEntry(a,o)}},{key:"getAllFromCache",value:function(a,o){return this.Se.getEntries(a,o)}}]),n}(TD),AM=function(){function i(s){(0,M.Z)(this,i),this.persistence=s,this.Ts=new Hy(function(n){return ky(n)},RC),this.lastRemoteSnapshotVersion=$r.min(),this.highestTargetId=0,this.Is=0,this.As=new BD,this.targetCount=0,this.Rs=Vb.se()}return(0,R.Z)(i,[{key:"forEachTarget",value:function(n,r){return this.Ts.forEach(function(a,o){return r(o)}),En.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(n){return En.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(n){return En.resolve(this.Is)}},{key:"allocateTargetId",value:function(n){return this.highestTargetId=this.Rs.next(),En.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(n,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Is&&(this.Is=r),En.resolve()}},{key:"ae",value:function(n){this.Ts.set(n.target,n);var r=n.targetId;r>this.highestTargetId&&(this.Rs=new Vb(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}},{key:"addTargetData",value:function(n,r){return this.ae(r),this.targetCount+=1,En.resolve()}},{key:"updateTargetData",value:function(n,r){return this.ae(r),En.resolve()}},{key:"removeTargetData",value:function(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,En.resolve()}},{key:"removeTargets",value:function(n,r,a){var o=this,u=0,l=[];return this.Ts.forEach(function(f,m){m.sequenceNumber<=r&&null===a.get(m.targetId)&&(o.Ts.delete(f),l.push(o.removeMatchingKeysForTargetId(n,m.targetId)),u++)}),En.waitFor(l).next(function(){return u})}},{key:"getTargetCount",value:function(n){return En.resolve(this.targetCount)}},{key:"getTargetData",value:function(n,r){var a=this.Ts.get(r)||null;return En.resolve(a)}},{key:"addMatchingKeys",value:function(n,r,a){return this.As.ss(r,a),En.resolve()}},{key:"removeMatchingKeys",value:function(n,r,a){this.As.os(r,a);var o=this.persistence.referenceDelegate,u=[];return o&&r.forEach(function(l){u.push(o.markPotentiallyOrphaned(n,l))}),En.waitFor(u)}},{key:"removeMatchingKeysForTargetId",value:function(n,r){return this.As.cs(r),En.resolve()}},{key:"getMatchingKeysForTargetId",value:function(n,r){var a=this.As.hs(r);return En.resolve(a)}},{key:"containsKey",value:function(n,r){return En.resolve(this.As.containsKey(r))}}]),i}(),hN=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.bs={},this.Le=new tu(0),this.Be=!1,this.Be=!0,this.referenceDelegate=s(this),this.ze=new AM(this),this.Ht=new qL,this.He=new lN(this.Ht,function(a){return r.referenceDelegate.Ps(a)}),this.N=new Ly(n),this.Je=new uN(this.N)}return(0,R.Z)(i,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(n){var r=this.bs[n.toKey()];return r||(r=new SM(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(n,r,a){var o=this;Rn("MemoryPersistence","Starting transaction:",n);var u=new fN(this.Le.next());return this.referenceDelegate.vs(),a(u).next(function(l){return o.referenceDelegate.Vs(u).next(function(){return l})}).toPromise().then(function(l){return u.raiseOnCommittedEvent(),l})}},{key:"Ss",value:function(n,r){return En.or(Object.values(this.bs).map(function(a){return function(){return a.containsKey(n,r)}}))}}]),i}(),fN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).currentSequenceNumber=r,a}return n}(Nb),dN=function(){function i(s){(0,M.Z)(this,i),this.persistence=s,this.Ds=new BD,this.Cs=null}return(0,R.Z)(i,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw Sr()}},{key:"addReference",value:function(n,r,a){return this.Ds.addReference(a,r),this.xs.delete(a.toString()),En.resolve()}},{key:"removeReference",value:function(n,r,a){return this.Ds.removeReference(a,r),this.xs.add(a.toString()),En.resolve()}},{key:"markPotentiallyOrphaned",value:function(n,r){return this.xs.add(r.toString()),En.resolve()}},{key:"removeTarget",value:function(n,r){var a=this;this.Ds.cs(r.targetId).forEach(function(u){return a.xs.add(u.toString())});var o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(n,r.targetId).next(function(u){u.forEach(function(l){return a.xs.add(l.toString())})}).next(function(){return o.removeTargetData(n,r)})}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(n){var r=this,a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return En.forEach(this.xs,function(o){var u=Fr.fromPath(o);return r.ks(n,u).next(function(l){l||a.removeEntry(u)})}).next(function(){return r.Cs=null,a.apply(n)})}},{key:"updateLimboDocument",value:function(n,r){var a=this;return this.ks(n,r).next(function(o){o?a.xs.delete(r.toString()):a.xs.add(r.toString())})}},{key:"Ps",value:function(n){return 0}},{key:"ks",value:function(n,r){var a=this;return En.or([function(){return En.resolve(a.Ds.containsKey(r))},function(){return a.persistence.getTargetCache().containsKey(n,r)},function(){return a.persistence.Ss(n,r)}])}}],[{key:"Ns",value:function(n){return new i(n)}}]),i}();function jb(i,s){return"firestore_clients_".concat(i,"_").concat(s)}function Wb(i,s,n){var r="firestore_mutations_".concat(i,"_").concat(n);return s.isAuthenticated()&&(r+="_".concat(s.uid)),r}function qb(i,s){return"firestore_targets_".concat(i,"_").concat(s)}var Yb=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.user=s,this.batchId=n,this.state=r,this.error=a}return(0,R.Z)(i,[{key:"Os",value:function(){var n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}],[{key:"$s",value:function(n,r,a){var u,o=JSON.parse(a),l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(u=new pn(o.error.code,o.error.message)),l?new i(n,r,o.state,u):(ao("SharedClientState","Failed to parse mutation state for ID '".concat(r,"': ").concat(a)),null)}}]),i}(),UD=function(){function i(s,n,r){(0,M.Z)(this,i),this.targetId=s,this.state=n,this.error=r}return(0,R.Z)(i,[{key:"Os",value:function(){var n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}],[{key:"$s",value:function(n,r){var o,a=JSON.parse(r),u="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return u&&a.error&&(u="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(o=new pn(a.error.code,a.error.message)),u?new i(n,a.state,o):(ao("SharedClientState","Failed to parse target state for ID '".concat(n,"': ").concat(r)),null)}}]),i}(),TM=function(){function i(s,n){(0,M.Z)(this,i),this.clientId=s,this.activeTargetIds=n}return(0,R.Z)(i,null,[{key:"$s",value:function(n,r){for(var a=JSON.parse(r),o="object"==typeof a&&a.activeTargetIds instanceof Array,u=mf(),l=0;o&&l<a.activeTargetIds.length;++l)o=AC(a.activeTargetIds[l]),u=u.add(a.activeTargetIds[l]);return o?new i(n,u):(ao("SharedClientState","Failed to parse client data for instance '".concat(n,"': ").concat(r)),null)}}]),i}(),VD=function(){function i(s,n){(0,M.Z)(this,i),this.clientId=s,this.onlineState=n}return(0,R.Z)(i,null,[{key:"$s",value:function(n){var r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new i(r.clientId,r.onlineState):(ao("SharedClientState","Failed to parse online state: ".concat(n)),null)}}]),i}(),zD=function(){function i(){(0,M.Z)(this,i),this.activeTargetIds=mf()}return(0,R.Z)(i,[{key:"Fs",value:function(n){this.activeTargetIds=this.activeTargetIds.add(n)}},{key:"Ms",value:function(n){this.activeTargetIds=this.activeTargetIds.delete(n)}},{key:"Os",value:function(){var n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}]),i}(),Kb=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.window=s,this.Oe=n,this.persistenceKey=r,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Cu(Si),this.started=!1,this.Ks=[];var u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.js=jb(this.persistenceKey,this.Ls),this.Qs="firestore_sequence_number_".concat(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new zD),this.Ws=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.Hs="firestore_online_state_".concat(this.persistenceKey),this.Js=function(l){return"firestore_bundle_loaded_".concat(l)}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}return(0,R.Z)(i,[{key:"start",value:(s=(0,Qt.Z)(Ke().mark(function r(){var u,l,f,m,b,w,C,T,I,a=this;return Ke().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.syncEngine.pn();case 2:u=(0,Ve.Z)(V.sent),V.prev=4,u.s();case 6:if((l=u.n()).done){V.next=14;break}if((f=l.value)!==this.Ls){V.next=10;break}return V.abrupt("continue",12);case 10:(m=this.getItem(jb(this.persistenceKey,f)))&&(b=TM.$s(f,m))&&(this.qs=this.qs.insert(b.clientId,b));case 12:V.next=6;break;case 14:V.next=19;break;case 16:V.prev=16,V.t0=V.catch(4),u.e(V.t0);case 19:return V.prev=19,u.f(),V.finish(19);case 22:this.Ys(),(w=this.storage.getItem(this.Hs))&&(C=this.Xs(w))&&this.Zs(C),T=(0,Ve.Z)(this.Ks);try{for(T.s();!(I=T.n()).done;)this.Us(I.value)}catch(W){T.e(W)}finally{T.f()}this.Ks=[],this.window.addEventListener("pagehide",function(){return a.shutdown()}),this.started=!0;case 28:case"end":return V.stop()}},r,this,[[4,16,19,22]])})),function(){return s.apply(this,arguments)})},{key:"writeSequenceNumber",value:function(n){this.setItem(this.Qs,JSON.stringify(n))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(n){var r=!1;return this.qs.forEach(function(a,o){o.activeTargetIds.has(n)&&(r=!0)}),r}},{key:"addPendingMutation",value:function(n){this.ei(n,"pending")}},{key:"updateMutationState",value:function(n,r,a){this.ei(n,r,a),this.ni(n)}},{key:"addLocalQueryTarget",value:function(n){var r="not-current";if(this.isActiveQueryTarget(n)){var a=this.storage.getItem(qb(this.persistenceKey,n));if(a){var o=UD.$s(n,a);o&&(r=o.state)}}return this.si.Fs(n),this.Ys(),r}},{key:"removeLocalQueryTarget",value:function(n){this.si.Ms(n),this.Ys()}},{key:"isLocalQueryTarget",value:function(n){return this.si.activeTargetIds.has(n)}},{key:"clearQueryState",value:function(n){this.removeItem(qb(this.persistenceKey,n))}},{key:"updateQueryState",value:function(n,r,a){this.ii(n,r,a)}},{key:"handleUserChange",value:function(n,r,a){var o=this;r.forEach(function(u){o.ni(u)}),this.currentUser=n,a.forEach(function(u){o.addPendingMutation(u)})}},{key:"setOnlineState",value:function(n){this.ri(n)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(n){var r=this.storage.getItem(n);return Rn("SharedClientState","READ",n,r),r}},{key:"setItem",value:function(n,r){Rn("SharedClientState","SET",n,r),this.storage.setItem(n,r)}},{key:"removeItem",value:function(n){Rn("SharedClientState","REMOVE",n),this.storage.removeItem(n)}},{key:"Us",value:function(n){var r=this,a=n;if(a.storageArea===this.storage){if(Rn("SharedClientState","EVENT",a.key,a.newValue),a.key===this.js)return void ao("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Qt.Z)(Ke().mark(function o(){var u,l,f,m,b,w;return Ke().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!r.started){T.next=41;break}if(null===a.key){T.next=39;break}if(!r.Ws.test(a.key)){T.next=11;break}if(null!=a.newValue){T.next=6;break}return u=r.ai(a.key),T.abrupt("return",r.ci(u,null));case 6:if(!(l=r.ui(a.key,a.newValue))){T.next=9;break}return T.abrupt("return",r.ci(l.clientId,l));case 9:T.next=39;break;case 11:if(!r.Gs.test(a.key)){T.next=18;break}if(null===a.newValue){T.next=16;break}if(!(f=r.hi(a.key,a.newValue))){T.next=16;break}return T.abrupt("return",r.li(f));case 16:T.next=39;break;case 18:if(!r.zs.test(a.key)){T.next=25;break}if(null===a.newValue){T.next=23;break}if(!(m=r.fi(a.key,a.newValue))){T.next=23;break}return T.abrupt("return",r.di(m));case 23:T.next=39;break;case 25:if(a.key!==r.Hs){T.next=32;break}if(null===a.newValue){T.next=30;break}if(!(b=r.Xs(a.newValue))){T.next=30;break}return T.abrupt("return",r.Zs(b));case 30:T.next=39;break;case 32:if(a.key!==r.Qs){T.next=37;break}(w=function(I){var Z=tu.T;if(null!=I)try{var Y=JSON.parse(I);Jr("number"==typeof Y),Z=Y}catch(V){ao("SharedClientState","Failed to read sequence number from WebStorage",V)}return Z}(a.newValue))!==tu.T&&r.sequenceNumberHandler(w),T.next=39;break;case 37:if(a.key!==r.Js){T.next=39;break}return T.abrupt("return",r.syncEngine.wi());case 39:T.next=42;break;case 41:r.Ks.push(a);case 42:case"end":return T.stop()}},o)})))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(n,r,a){var o=new Yb(this.currentUser,n,r,a),u=Wb(this.persistenceKey,this.currentUser,n);this.setItem(u,o.Os())}},{key:"ni",value:function(n){var r=Wb(this.persistenceKey,this.currentUser,n);this.removeItem(r)}},{key:"ri",value:function(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}},{key:"ii",value:function(n,r,a){var o=qb(this.persistenceKey,n),u=new UD(n,r,a);this.setItem(o,u.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ai",value:function(n){var r=this.Ws.exec(n);return r?r[1]:null}},{key:"ui",value:function(n,r){var a=this.ai(n);return TM.$s(a,r)}},{key:"hi",value:function(n,r){var a=this.Gs.exec(n),o=Number(a[1]);return Yb.$s(new Jo(void 0!==a[2]?a[2]:null),o,r)}},{key:"fi",value:function(n,r){var a=this.zs.exec(n),o=Number(a[1]);return UD.$s(o,r)}},{key:"Xs",value:function(n){return VD.$s(n)}},{key:"li",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(a){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a.user.uid!==this.currentUser.uid){u.next=2;break}return u.abrupt("return",this.syncEngine._i(a.batchId,a.state,a.error));case 2:Rn("SharedClientState","Ignoring mutation for non-active user ".concat(a.user.uid));case 3:case"end":return u.stop()}},r,this)}));return function(r){return s.apply(this,arguments)}}()},{key:"di",value:function(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}},{key:"ci",value:function(n,r){var a=this,o=r?this.qs.insert(n,r):this.qs.remove(n),u=this.ti(this.qs),l=this.ti(o),f=[],m=[];return l.forEach(function(b){u.has(b)||f.push(b)}),u.forEach(function(b){l.has(b)||m.push(b)}),this.syncEngine.gi(f,m).then(function(){a.qs=o})}},{key:"Zs",value:function(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}},{key:"ti",value:function(n){var r=mf();return n.forEach(function(a,o){r=r.unionWith(o.activeTargetIds)}),r}}],[{key:"bt",value:function(n){return!(!n||!n.localStorage)}}]),i;var s}(),xM=function(){function i(){(0,M.Z)(this,i),this.yi=new zD,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,R.Z)(i,[{key:"addPendingMutation",value:function(n){}},{key:"updateMutationState",value:function(n,r,a){}},{key:"addLocalQueryTarget",value:function(n){return this.yi.Fs(n),this.pi[n]||"not-current"}},{key:"updateQueryState",value:function(n,r,a){this.pi[n]=r}},{key:"removeLocalQueryTarget",value:function(n){this.yi.Ms(n)}},{key:"isLocalQueryTarget",value:function(n){return this.yi.activeTargetIds.has(n)}},{key:"clearQueryState",value:function(n){delete this.pi[n]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(n){return this.yi.activeTargetIds.has(n)}},{key:"start",value:function(){return this.yi=new zD,Promise.resolve()}},{key:"handleUserChange",value:function(n,r,a){}},{key:"setOnlineState",value:function(n){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(n){}},{key:"notifyBundleLoaded",value:function(){}}]),i}(),MM=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"Ei",value:function(n){}},{key:"shutdown",value:function(){}}]),i}(),IM=function(){function i(){var s=this;(0,M.Z)(this,i),this.Ti=function(){return s.Ii()},this.Ai=function(){return s.Ri()},this.bi=[],this.Pi()}return(0,R.Z)(i,[{key:"Ei",value:function(n){this.bi.push(n)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){Rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var r,n=(0,Ve.Z)(this.bi);try{for(n.s();!(r=n.n()).done;)(0,r.value)(0)}catch(o){n.e(o)}finally{n.f()}}},{key:"Ri",value:function(){Rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var r,n=(0,Ve.Z)(this.bi);try{for(n.s();!(r=n.n()).done;)(0,r.value)(1)}catch(o){n.e(o)}finally{n.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),i}(),PM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},KV=function(){function i(s){(0,M.Z)(this,i),this.vi=s.vi,this.Vi=s.Vi}return(0,R.Z)(i,[{key:"Si",value:function(n){this.Di=n}},{key:"Ci",value:function(n){this.Ni=n}},{key:"onMessage",value:function(n){this.xi=n}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(n){this.vi(n)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(n){this.Ni(n)}},{key:"Oi",value:function(n){this.xi(n)}}]),i}(),pN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).forceLongPolling=r.forceLongPolling,a.autoDetectLongPolling=r.autoDetectLongPolling,a.useFetchStreams=r.useFetchStreams,a}return(0,R.Z)(n,[{key:"qi",value:function(a,o,u,l){return new Promise(function(f,m){var b=new Vx;b.listenOnce(mL.COMPLETE,function(){try{switch(b.getLastErrorCode()){case EC.NO_ERROR:var C=b.getResponseJson();Rn("Connection","XHR received:",JSON.stringify(C)),f(C);break;case EC.TIMEOUT:Rn("Connection",'RPC "'+a+'" timed out'),m(new pn(Kt.DEADLINE_EXCEEDED,"Request time out"));break;case EC.HTTP_ERROR:var T=b.getStatus();if(Rn("Connection",'RPC "'+a+'" failed with status:',T,"response text:",b.getResponseText()),T>0){var I=b.getResponseJson().error;if(I&&I.status&&I.message){var Z=(V=I.status.toLowerCase().replace(/_/g,"-"),Object.values(Kt).indexOf(V)>=0?V:Kt.UNKNOWN);m(new pn(Z,I.message))}else m(new pn(Kt.UNKNOWN,"Server responded with status "+b.getStatus()))}else m(new pn(Kt.UNAVAILABLE,"Connection failed."));break;default:Sr()}}finally{Rn("Connection",'RPC "'+a+'" completed.')}var V});var w=JSON.stringify(l);b.send(o,"POST",w,u,15)})}},{key:"ji",value:function(a,o){var u=[this.Fi,"/","google.firestore.v1.Firestore","/",a,"/channel"],l=UV(),f=vL(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new kC({})),this.Ui(m.initMessageHeaders,o),(0,Re.uI)()||(0,Re.b$)()||(0,Re.d)()||(0,Re.w1)()||(0,Re.Mn)()||(0,Re.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");var b=u.join("");Rn("Connection","Creating WebChannel: "+b,m);var w=l.createWebChannel(b,m),C=!1,T=!1,I=new KV({vi:function(V){T?Rn("Connection","Not sending because WebChannel is closed:",V):(C||(Rn("Connection","Opening WebChannel transport."),w.open(),C=!0),Rn("Connection","WebChannel sending:",V),w.send(V))},Vi:function(){return w.close()}}),Z=function(V,W,se){V.listen(W,function(fe){try{se(fe)}catch(ve){setTimeout(function(){throw ve},0)}})};return Z(w,_b.EventType.OPEN,function(){T||Rn("Connection","WebChannel transport opened.")}),Z(w,_b.EventType.CLOSE,function(){T||(T=!0,Rn("Connection","WebChannel transport closed"),I.$i())}),Z(w,_b.EventType.ERROR,function(Y){T||(T=!0,zv("Connection","WebChannel transport errored:",Y),I.$i(new pn(Kt.UNAVAILABLE,"The operation could not be completed")))}),Z(w,_b.EventType.MESSAGE,function(Y){var V;if(!T){var W=Y.data[0];Jr(!!W);var fe=W.error||(null===(V=W[0])||void 0===V?void 0:V.error);if(fe){Rn("Connection","WebChannel received error:",fe);var ve=fe.status,me=function(ke){var je=so[ke];if(void 0!==je)return QC(je)}(ve),pe=fe.message;void 0===me&&(me=Kt.INTERNAL,pe="Unknown error status: "+ve+" with message "+fe.message),T=!0,I.$i(new pn(me,pe)),w.close()}else Rn("Connection","WebChannel received:",W),I.Oi(W)}}),Z(f,VV.STAT_EVENT,function(Y){Y.stat===gL.PROXY?Rn("Connection","Detected buffering proxy"):Y.stat===gL.NOPROXY&&Rn("Connection","Detected no buffering proxy")}),setTimeout(function(){I.ki()},0),I}}]),n}(function(){function i(s){(0,M.Z)(this,i),this.databaseInfo=s,this.databaseId=s.databaseId,this.Fi=(s.ssl?"https":"http")+"://"+s.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,R.Z)(i,[{key:"Li",value:function(n,r,a,o){var u=this.Bi(n,r);Rn("RestConnection","Sending: ",u,a);var l={};return this.Ui(l,o),this.qi(n,u,l,a).then(function(f){return Rn("RestConnection","Received: ",f),f},function(f){throw zv("RestConnection","".concat(n," failed with error: "),f,"url: ",u,"request:",a),f})}},{key:"Ki",value:function(n,r,a,o){return this.Li(n,r,a,o)}},{key:"Ui",value:function(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+_y,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(var a in r.authHeaders)r.authHeaders.hasOwnProperty(a)&&(n[a]=r.authHeaders[a])}},{key:"Bi",value:function(n,r){var a=PM[n];return"".concat(this.Fi,"/v1/").concat(r,":").concat(a)}}]),i}());function _m(){return"undefined"!=typeof window?window:null}function HD(){return"undefined"!=typeof document?document:null}function Wy(i){return new Mh(i,!0)}var bm=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;(0,M.Z)(this,i),this.Oe=s,this.timerId=n,this.Qi=r,this.Wi=a,this.Gi=o,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return(0,R.Z)(i,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(n){var r=this;this.cancel();var a=Math.floor(this.zi+this.Zi()),o=Math.max(0,Date.now()-this.Ji),u=Math.max(0,a-o);u>0&&Rn("ExponentialBackoff","Backing off for ".concat(u," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(a," ms, last attempt: ").concat(o," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,u,function(){return r.Ji=Date.now(),n()}),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),i}(),FM=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.Oe=s,this.er=r,this.nr=a,this.credentialsProvider=o,this.listener=u,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new bm(s,n)}return(0,R.Z)(i,[{key:"ar",value:function(){return 1===this.state||2===this.state||4===this.state}},{key:"cr",value:function(){return 2===this.state}},{key:"start",value:function(){3!==this.state?this.auth():this.ur()}},{key:"stop",value:(s=(0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.t0=this.ar(),!o.t0){o.next=4;break}return o.next=4,this.close(0);case 4:case"end":return o.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"hr",value:function(){this.state=0,this.rr.reset()}},{key:"lr",value:function(){var n=this;this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,function(){return n.dr()}))}},{key:"wr",value:function(n){this._r(),this.stream.send(n)}},{key:"dr",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!this.cr()){o.next=2;break}return o.abrupt("return",this.close(0));case 2:case"end":return o.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"_r",value:function(){this.ir&&(this.ir.cancel(),this.ir=null)}},{key:"close",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(a,o){return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==a?this.rr.reset():o&&o.code===Kt.RESOURCE_EXHAUSTED?(ao(o.toString()),ao("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):o&&o.code===Kt.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=a,l.next=8,this.listener.Ci(o);case 8:case"end":return l.stop()}},r,this)}));return function(r,a){return s.apply(this,arguments)}}()},{key:"mr",value:function(){}},{key:"auth",value:function(){var n=this;this.state=1;var r=this.gr(this.sr),a=this.sr;this.credentialsProvider.getToken().then(function(o){n.sr===a&&n.yr(o)},function(o){r(function(){var u=new pn(Kt.UNKNOWN,"Fetching auth token failed: "+o.message);return n.pr(u)})})}},{key:"yr",value:function(n){var r=this,a=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(function(){a(function(){return r.state=2,r.listener.Si()})}),this.stream.Ci(function(o){a(function(){return r.pr(o)})}),this.stream.onMessage(function(o){a(function(){return r.onMessage(o)})})}},{key:"ur",value:function(){var n=this;this.state=4,this.rr.Xi((0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n.state=0,n.start();case 1:case"end":return o.stop()}},r)})))}},{key:"pr",value:function(n){return Rn("PersistentStream","close with error: ".concat(n)),this.stream=null,this.close(3,n)}},{key:"gr",value:function(n){var r=this;return function(a){r.Oe.enqueueAndForget(function(){return r.sr===n?a():(Rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),i;var s}(),wm=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l){var f;return(0,M.Z)(this,n),(f=s.call(this,r,"listen_stream_connection_backoff","listen_stream_idle",a,o,l)).N=u,f}return(0,R.Z)(n,[{key:"Er",value:function(a){return this.nr.ji("Listen",a)}},{key:"onMessage",value:function(a){this.rr.reset();var o=function(i,s){var n,Ze;if("targetChange"in s){var r="NO_CHANGE"===(Ze=s.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Ze?1:"REMOVE"===Ze?2:"CURRENT"===Ze?3:"RESET"===Ze?4:Sr(),a=s.targetChange.targetIds||[],o=function(Ze,ct){return Ze.D?(Jr(void 0===ct||"string"==typeof ct),nu.fromBase64String(ct||"")):(Jr(void 0===ct||ct instanceof Uint8Array),nu.fromUint8Array(ct||new Uint8Array))}(i,s.targetChange.resumeToken),u=s.targetChange.cause,l=u&&function(Ze){var ct=void 0===Ze.code?Kt.UNKNOWN:QC(Ze.code);return new pn(ct,Ze.message||"")}(u);n=new aD(r,a,o,l||null)}else if("documentChange"in s){var f=s.documentChange,m=Ih(i,f.document.name),b=Zo(f.document.updateTime),w=new rc({mapValue:{fields:f.document.fields}}),C=ku.newFoundDocument(m,b,w);n=new xy(f.targetIds||[],f.removedTargetIds||[],C.key,C)}else if("documentDelete"in s){var Z=s.documentDelete,Y=Ih(i,Z.document),V=Z.readTime?Zo(Z.readTime):$r.min(),W=ku.newNoDocument(Y,V);n=new xy([],Z.removedTargetIds||[],W.key,W)}else if("documentRemove"in s){var fe=s.documentRemove,ve=Ih(i,fe.document);n=new xy([],fe.removedTargetIds||[],ve,null)}else{if(!("filter"in s))return Sr();var pe=s.filter,je=new tM(pe.count||0);n=new iM(pe.targetId,je)}return n}(this.N,a),u=function(l){if(!("targetChange"in l))return $r.min();var f=l.targetChange;return f.targetIds&&f.targetIds.length?$r.min():f.readTime?Zo(f.readTime):$r.min()}(a);return this.listener.Tr(o,u)}},{key:"Ir",value:function(a){var l,f,m,b,o={};o.database=Py(this.N),o.addTarget=(l=this.N,(m=Cb(b=(f=a).target)?{documents:Lb(l,b)}:{query:Fy(l,b)}).targetId=f.targetId,f.resumeToken.approximateByteSize()>0?m.resumeToken=kc(l,f.resumeToken):f.snapshotVersion.compareTo($r.min())>0&&(m.readTime=al(l,f.snapshotVersion.toTimestamp())),m);var u=function(i,s){var n=function(r,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Sr()}}(0,s.purpose);return null==n?null:{"goog-listen-tags":n}}(0,a);u&&(o.labels=u),this.wr(o)}},{key:"Ar",value:function(a){var o={};o.database=Py(this.N),o.removeTarget=a,this.wr(o)}}]),n}(FM),vN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l){var f;return(0,M.Z)(this,n),(f=s.call(this,r,"write_stream_connection_backoff","write_stream_idle",a,o,l)).N=u,f.Rr=!1,f}return(0,R.Z)(n,[{key:"br",get:function(){return this.Rr}},{key:"start",value:function(){this.Rr=!1,this.lastStreamToken=void 0,(0,Se.Z)((0,ye.Z)(n.prototype),"start",this).call(this)}},{key:"mr",value:function(){this.Rr&&this.Pr([])}},{key:"Er",value:function(a){return this.nr.ji("Write",a)}},{key:"onMessage",value:function(a){if(Jr(!!a.streamToken),this.lastStreamToken=a.streamToken,this.Rr){this.rr.reset();var o=function(i,s){return i&&i.length>0?(Jr(void 0!==s),i.map(function(n){return a=s,(o=Zo((r=n).updateTime?r.updateTime:a)).isEqual($r.min())&&(o=Zo(a)),new Jx(o,r.transformResults||[]);var r,a,o})):[]}(a.writeResults,a.commitTime),u=Zo(a.commitTime);return this.listener.vr(u,o)}return Jr(!a.writeResults||0===a.writeResults.length),this.Rr=!0,this.listener.Vr()}},{key:"Sr",value:function(){var a={};a.database=Py(this.N),this.wr(a)}},{key:"Pr",value:function(a){var o=this,u={streamToken:this.lastStreamToken,writes:a.map(function(l){return Ob(o.N,l)})};this.wr(u)}}]),n}(FM),$V=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).credentials=r,u.nr=a,u.N=o,u.Dr=!1,u}return(0,R.Z)(n,[{key:"Cr",value:function(){if(this.Dr)throw new pn(Kt.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(a,o,u){var l=this;return this.Cr(),this.credentials.getToken().then(function(f){return l.nr.Li(a,o,u,f)}).catch(function(f){throw"FirebaseError"===f.name?(f.code===Kt.UNAUTHENTICATED&&l.credentials.invalidateToken(),f):new pn(Kt.UNKNOWN,f.toString())})}},{key:"Ki",value:function(a,o,u){var l=this;return this.Cr(),this.credentials.getToken().then(function(f){return l.nr.Ki(a,o,u,f)}).catch(function(f){throw"FirebaseError"===f.name?(f.code===Kt.UNAUTHENTICATED&&l.credentials.invalidateToken(),f):new pn(Kt.UNKNOWN,f.toString())})}},{key:"terminate",value:function(){this.Dr=!0}}]),n}(function(){return function i(){(0,M.Z)(this,i)}}()),mN=function(){function i(s,n){(0,M.Z)(this,i),this.asyncQueue=s,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}return(0,R.Z)(i,[{key:"Or",value:function(){var n=this;0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return n.kr=null,n.Mr("Backend didn't respond within 10 seconds."),n.Fr("Offline"),Promise.resolve()}))}},{key:"Lr",value:function(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: ".concat(n.toString())),this.Fr("Offline")))}},{key:"set",value:function(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}},{key:"Fr",value:function(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}},{key:"Mr",value:function(n){var r="Could not reach Cloud Firestore backend. ".concat(n,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.$r?(ao(r),this.$r=!1):Rn("OnlineStateTracker",r)}},{key:"Br",value:function(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}]),i}(),Rp=function i(s,n,r,a,o){var u=this;(0,M.Z)(this,i),this.localStore=s,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=o,this.Qr.Ei(function(l){r.enqueueAndForget((0,Qt.Z)(Ke().mark(function f(){return Ke().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(b.t0=wf(u),!b.t0){b.next=5;break}return Rn("RemoteStore","Restarting streams for network reachability change."),b.next=5,function(){var w=(0,Qt.Z)(Ke().mark(function C(T){var I;return Ke().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return(I=Un(T)).Kr.add(4),Y.next=4,bf(I);case 4:return I.Wr.set("Unknown"),I.Kr.delete(4),Y.next=8,Em(I);case 8:case"end":return Y.stop()}},C)}));return function(C){return w.apply(this,arguments)}}()(u);case 5:case"end":return b.stop()}},f)})))}),this.Wr=new mN(r,a)};function Em(i){return RM.apply(this,arguments)}function RM(){return(RM=(0,Qt.Z)(Ke().mark(function i(s){var n,r,a;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!wf(s)){u.next=18;break}n=(0,Ve.Z)(s.jr),u.prev=2,n.s();case 4:if((r=n.n()).done){u.next=10;break}return a=r.value,u.next=8,a(!0);case 8:u.next=4;break;case 10:u.next=15;break;case 12:u.prev=12,u.t0=u.catch(2),n.e(u.t0);case 15:return u.prev=15,n.f(),u.finish(15);case 18:case"end":return u.stop()}},i,null,[[2,12,15,18]])}))).apply(this,arguments)}function bf(i){return GD.apply(this,arguments)}function GD(){return(GD=(0,Qt.Z)(Ke().mark(function i(s){var n,r,a;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=(0,Ve.Z)(s.jr),u.prev=1,n.s();case 3:if((r=n.n()).done){u.next=9;break}return a=r.value,u.next=7,a(!1);case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),n.e(u.t0);case 14:return u.prev=14,n.f(),u.finish(14);case 17:case"end":return u.stop()}},i,null,[[1,11,14,17]])}))).apply(this,arguments)}function $b(i,s){var n=Un(i);n.qr.has(s.targetId)||(n.qr.set(s.targetId,s),qy(n)?WD(n):Dm(n).cr()&&jD(n,s))}function Xb(i,s){var n=Un(i),r=Dm(n);n.qr.delete(s),r.cr()&&OM(n,s),0===n.qr.size&&(r.cr()?r.lr():wf(n)&&n.Wr.set("Unknown"))}function jD(i,s){i.Gr.Y(s.targetId),Dm(i).Ir(s)}function OM(i,s){i.Gr.Y(s),Dm(i).Ar(s)}function WD(i){i.Gr=new sD({getRemoteKeysForTarget:function(n){return i.remoteSyncer.getRemoteKeysForTarget(n)},Et:function(n){return i.qr.get(n)||null}}),Dm(i).start(),i.Wr.Or()}function qy(i){return wf(i)&&!Dm(i).ar()&&i.qr.size>0}function wf(i){return 0===Un(i).Kr.size}function qD(i){i.Gr=void 0}function LM(i){return YD.apply(this,arguments)}function YD(){return(YD=(0,Qt.Z)(Ke().mark(function i(s){return Ke().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:s.qr.forEach(function(a,o){jD(s,a)});case 1:case"end":return r.stop()}},i)}))).apply(this,arguments)}function XV(i,s){return KD.apply(this,arguments)}function KD(){return(KD=(0,Qt.Z)(Ke().mark(function i(s,n){return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:qD(s),qy(s)?(s.Wr.Lr(n),WD(s)):s.Wr.set("Unknown");case 1:case"end":return a.stop()}},i)}))).apply(this,arguments)}function gN(i,s,n){return $D.apply(this,arguments)}function $D(){return($D=(0,Qt.Z)(Ke().mark(function i(s,n,r){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s.Wr.set("Online"),!(n instanceof aD&&2===n.state&&n.cause)){u.next=13;break}return u.prev=1,u.next=4,function(){var l=(0,Qt.Z)(Ke().mark(function f(m,b){var w,C,T,I;return Ke().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:w=b.cause,C=(0,Ve.Z)(b.targetIds),Y.prev=2,C.s();case 4:if((T=C.n()).done){Y.next=14;break}if(Y.t0=m.qr.has(I=T.value),!Y.t0){Y.next=12;break}return Y.next=10,m.remoteSyncer.rejectListen(I,w);case 10:m.qr.delete(I),m.Gr.removeTarget(I);case 12:Y.next=4;break;case 14:Y.next=19;break;case 16:Y.prev=16,Y.t1=Y.catch(2),C.e(Y.t1);case 19:return Y.prev=19,C.f(),Y.finish(19);case 22:case"end":return Y.stop()}},f,null,[[2,16,19,22]])}));return function(f,m){return l.apply(this,arguments)}}()(s,n);case 4:u.next=11;break;case 6:return u.prev=6,u.t0=u.catch(1),Rn("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),u.t0),u.next=11,Yy(s,u.t0);case 11:u.next=29;break;case 13:if(n instanceof xy?s.Gr.rt(n):n instanceof iM?s.Gr.ft(n):s.Gr.ct(n),r.isEqual($r.min())){u.next=29;break}return u.prev=14,u.next=17,Gb(s.localStore);case 17:if(u.t1=r.compareTo(u.sent)>=0,!u.t1){u.next=22;break}return u.next=22,function(l,f){var m=l.Gr._t(f);return m.targetChanges.forEach(function(b,w){if(b.resumeToken.approximateByteSize()>0){var C=l.qr.get(w);C&&l.qr.set(w,C.withResumeToken(b.resumeToken,f))}}),m.targetMismatches.forEach(function(b){var w=l.qr.get(b);if(w){l.qr.set(b,w.withResumeToken(nu.EMPTY_BYTE_STRING,w.snapshotVersion)),OM(l,b);var C=new Bb(w.target,b,1,w.sequenceNumber);jD(l,C)}}),l.remoteSyncer.applyRemoteEvent(m)}(s,r);case 22:u.next=29;break;case 24:return u.prev=24,u.t2=u.catch(14),Rn("RemoteStore","Failed to raise snapshot:",u.t2),u.next=29,Yy(s,u.t2);case 29:case"end":return u.stop()}},i,null,[[1,6],[14,24]])}))).apply(this,arguments)}function Yy(i,s,n){return Qb.apply(this,arguments)}function Qb(){return(Qb=(0,Qt.Z)(Ke().mark(function i(s,n,r){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(hm(n)){o.next=2;break}throw n;case 2:return s.Kr.add(1),o.next=5,bf(s);case 5:s.Wr.set("Offline"),r||(r=function(){return Gb(s.localStore)}),s.asyncQueue.enqueueRetryable((0,Qt.Z)(Ke().mark(function u(){return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return Rn("RemoteStore","Retrying IndexedDB access"),f.next=3,r();case 3:return s.Kr.delete(1),f.next=6,Em(s);case 6:case"end":return f.stop()}},u)})));case 8:case"end":return o.stop()}},i)}))).apply(this,arguments)}function XD(i,s){return s().catch(function(n){return Yy(i,n,s)})}function km(i){return QD.apply(this,arguments)}function QD(){return(QD=(0,Qt.Z)(Ke().mark(function i(s){var n,r,a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=Un(s),r=Dd(n),a=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;case 2:if(!NM(n)){l.next=19;break}return l.prev=3,l.next=6,CM(n.localStore,a);case 6:if(null!==(o=l.sent)){l.next=10;break}return 0===n.Ur.length&&r.lr(),l.abrupt("break",19);case 10:a=o.batchId,Jb(n,o),l.next=17;break;case 13:return l.prev=13,l.t0=l.catch(3),l.next=17,Yy(n,l.t0);case 17:l.next=2;break;case 19:ZM(n)&&JD(n);case 20:case"end":return l.stop()}},i,null,[[3,13]])}))).apply(this,arguments)}function NM(i){return wf(i)&&i.Ur.length<10}function Jb(i,s){i.Ur.push(s);var n=Dd(i);n.cr()&&n.br&&n.Pr(s.mutations)}function ZM(i){return wf(i)&&!Dd(i).ar()&&i.Ur.length>0}function JD(i){Dd(i).start()}function ew(i){return Cm.apply(this,arguments)}function Cm(){return(Cm=(0,Qt.Z)(Ke().mark(function i(s){return Ke().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:Dd(s).Sr();case 1:case"end":return r.stop()}},i)}))).apply(this,arguments)}function Ky(i){return eS.apply(this,arguments)}function eS(){return(eS=(0,Qt.Z)(Ke().mark(function i(s){var n,r,a;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:n=Dd(s),r=(0,Ve.Z)(s.Ur);try{for(r.s();!(a=r.n()).done;)n.Pr(a.value.mutations)}catch(f){r.e(f)}finally{r.f()}case 3:case"end":return l.stop()}},i)}))).apply(this,arguments)}function yN(i,s,n){return BM.apply(this,arguments)}function BM(){return(BM=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=s.Ur.shift(),o=WL.from(a,n,r),l.next=3,XD(s,function(){return s.remoteSyncer.applySuccessfulWrite(o)});case 3:return l.next=5,km(s);case 5:case"end":return l.stop()}},i)}))).apply(this,arguments)}function _N(i,s){return tS.apply(this,arguments)}function tS(){return(tS=(0,Qt.Z)(Ke().mark(function i(s,n){return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.t0=n&&Dd(s).br,!a.t0){a.next=4;break}return a.next=4,function(){var o=(0,Qt.Z)(Ke().mark(function u(l,f){var m,b;return Ke().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!XC(b=f.code)||b===Kt.ABORTED){C.next=7;break}return m=l.Ur.shift(),Dd(l).hr(),C.next=5,XD(l,function(){return l.remoteSyncer.rejectFailedWrite(m.batchId,f)});case 5:return C.next=7,km(l);case 7:case"end":return C.stop()}},u)}));return function(u,l){return o.apply(this,arguments)}}()(s,n);case 4:ZM(s)&&JD(s);case 5:case"end":return a.stop()}},i)}))).apply(this,arguments)}function nS(i,s){return rS.apply(this,arguments)}function rS(){return(rS=(0,Qt.Z)(Ke().mark(function i(s,n){var r;return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=Un(s),!n){o.next=7;break}return r.Kr.delete(2),o.next=5,Em(r);case 5:o.next=13;break;case 7:if(o.t0=n,o.t0){o.next=13;break}return r.Kr.add(2),o.next=12,bf(r);case 12:r.Wr.set("Unknown");case 13:case"end":return o.stop()}},i)}))).apply(this,arguments)}function Dm(i){return i.zr||(i.zr=(s=i.datastore,n=i.asyncQueue,r={Si:LM.bind(null,i),Ci:XV.bind(null,i),Tr:gN.bind(null,i)},(a=Un(s)).Cr(),new wm(n,a.nr,a.credentials,a.N,r)),i.jr.push(function(){var s=(0,Qt.Z)(Ke().mark(function n(r){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r){o.next=4;break}i.zr.hr(),qy(i)?WD(i):i.Wr.set("Unknown"),o.next=7;break;case 4:return o.next=6,i.zr.stop();case 6:qD(i);case 7:case"end":return o.stop()}},n)}));return function(n){return s.apply(this,arguments)}}())),i.zr;var s,n,r,a}function Dd(i){return i.Hr||(i.Hr=(s=i.datastore,n=i.asyncQueue,r={Si:ew.bind(null,i),Ci:_N.bind(null,i),Vr:Ky.bind(null,i),vr:yN.bind(null,i)},(a=Un(s)).Cr(),new vN(n,a.nr,a.credentials,a.N,r)),i.jr.push(function(){var s=(0,Qt.Z)(Ke().mark(function n(r){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r){o.next=6;break}return i.Hr.hr(),o.next=4,km(i);case 4:o.next=9;break;case 6:return o.next=8,i.Hr.stop();case 8:i.Ur.length>0&&(Rn("RemoteStore","Stopping write stream with ".concat(i.Ur.length," pending writes")),i.Ur=[]);case 9:case"end":return o.stop()}},n)}));return function(n){return s.apply(this,arguments)}}())),i.Hr;var s,n,r,a}var bN=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.asyncQueue=s,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new eu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(u){})}return(0,R.Z)(i,[{key:"start",value:function(n){var r=this;this.timerHandle=setTimeout(function(){return r.handleDelayElapsed()},n)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new pn(Kt.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}},{key:"handleDelayElapsed",value:function(){var n=this;this.asyncQueue.enqueueAndForget(function(){return null!==n.timerHandle?(n.clearTimeout(),n.op().then(function(r){return n.deferred.resolve(r)})):Promise.resolve()})}},{key:"clearTimeout",value:function(s){function n(){return s.apply(this,arguments)}return n.toString=function(){return s.toString()},n}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(n,r,a,o,u){var f=new i(n,r,Date.now()+a,o,u);return f.start(a),f}}]),i}();function Sm(i,s){if(ao("AsyncQueue","".concat(s,": ").concat(i)),hm(i))return new pn(Kt.UNAVAILABLE,"".concat(s,": ").concat(i));throw i}var UM=function(){function i(s){(0,M.Z)(this,i),this.comparator=s?function(n,r){return s(n,r)||Fr.comparator(n.key,r.key)}:function(n,r){return Fr.comparator(n.key,r.key)},this.keyedMap=tD(),this.sortedSet=new Cu(this.comparator)}return(0,R.Z)(i,[{key:"has",value:function(n){return null!=this.keyedMap.get(n)}},{key:"get",value:function(n){return this.keyedMap.get(n)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(n){var r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(n){this.sortedSet.inorderTraversal(function(r,a){return n(r),!1})}},{key:"add",value:function(n){var r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}},{key:"delete",value:function(n){var r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}},{key:"isEqual",value:function(n){if(!(n instanceof i)||this.size!==n.size)return!1;for(var r=this.sortedSet.getIterator(),a=n.sortedSet.getIterator();r.hasNext();){var o=r.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}},{key:"toString",value:function(){var n=[];return this.forEach(function(r){n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}},{key:"copy",value:function(n,r){var a=new i;return a.comparator=this.comparator,a.keyedMap=n,a.sortedSet=r,a}}],[{key:"emptySet",value:function(n){return new i(n.comparator)}}]),i}(),wN=function(){function i(){(0,M.Z)(this,i),this.Jr=new Cu(Fr.comparator)}return(0,R.Z)(i,[{key:"track",value:function(n){var r=n.doc.key,a=this.Jr.get(r);a?0!==n.type&&3===a.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==a.type?this.Jr=this.Jr.insert(r,{type:a.type,doc:n.doc}):2===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===a.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===a.type?this.Jr=this.Jr.remove(r):1===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:1,doc:a.doc}):0===n.type&&1===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):Sr():this.Jr=this.Jr.insert(r,n)}},{key:"Yr",value:function(){var n=[];return this.Jr.inorderTraversal(function(r,a){n.push(a)}),n}}]),i}(),tw=function(){function i(s,n,r,a,o,u,l,f){(0,M.Z)(this,i),this.query=s,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=l,this.excludesMetadataChanges=f}return(0,R.Z)(i,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&Sy(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;var r=this.docChanges,a=n.docChanges;if(r.length!==a.length)return!1;for(var o=0;o<r.length;o++)if(r[o].type!==a[o].type||!r[o].doc.isEqual(a[o].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(n,r,a,o){var u=[];return r.forEach(function(l){u.push({type:0,doc:l})}),new i(n,r,UM.emptySet(r),u,a,o,!0,!1)}}]),i}(),$y=function i(){(0,M.Z)(this,i),this.Xr=void 0,this.listeners=[]},EN=function i(){(0,M.Z)(this,i),this.queries=new Hy(function(s){return GC(s)},Sy),this.onlineState="Unknown",this.Zr=new Set};function iS(i,s){return aS.apply(this,arguments)}function aS(){return(aS=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o,u,l;return Ke().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(r=Un(s),o=!1,(u=r.queries.get(a=n.query))||(o=!0,u=new $y),!o){m.next=13;break}return m.prev=3,m.next=6,r.onListen(a);case 6:u.Xr=m.sent,m.next=13;break;case 9:return m.prev=9,m.t0=m.catch(3),l=Sm(m.t0,"Initialization of query '".concat(Sb(n.query),"' failed")),m.abrupt("return",void n.onError(l));case 13:r.queries.set(a,u),u.listeners.push(n),n.eo(r.onlineState),u.Xr&&n.no(u.Xr)&&zM(r);case 14:case"end":return m.stop()}},i,null,[[3,9]])}))).apply(this,arguments)}function Am(i,s){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o,u,l;return Ke().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(r=Un(s),o=!1,(u=r.queries.get(a=n.query))&&(l=u.listeners.indexOf(n))>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length),!o){m.next=6;break}return m.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return m.stop()}},i)}))).apply(this,arguments)}function VM(i,s){var o,n=Un(i),r=!1,a=(0,Ve.Z)(s);try{for(a.s();!(o=a.n()).done;){var u=o.value,f=n.queries.get(u.query);if(f){var b,m=(0,Ve.Z)(f.listeners);try{for(m.s();!(b=m.n()).done;)b.value.no(u)&&(r=!0)}catch(C){m.e(C)}finally{m.f()}f.Xr=u}}}catch(C){a.e(C)}finally{a.f()}r&&zM(n)}function kN(i,s,n){var r=Un(i),a=r.queries.get(s);if(a){var u,o=(0,Ve.Z)(a.listeners);try{for(o.s();!(u=o.n()).done;)u.value.onError(n)}catch(f){o.e(f)}finally{o.f()}}r.queries.delete(s)}function zM(i){i.Zr.forEach(function(s){s.next()})}var sS=function(){function i(s,n,r){(0,M.Z)(this,i),this.query=s,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}return(0,R.Z)(i,[{key:"no",value:function(n){if(!this.options.includeMetadataChanges){var o,r=[],a=(0,Ve.Z)(n.docChanges);try{for(a.s();!(o=a.n()).done;){var u=o.value;3!==u.type&&r.push(u)}}catch(f){a.e(f)}finally{a.f()}n=new tw(n.query,n.docs,n.oldDocs,r,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}var l=!1;return this.io?this.oo(n)&&(this.so.next(n),l=!0):this.ao(n,this.onlineState)&&(this.co(n),l=!0),this.ro=n,l}},{key:"onError",value:function(n){this.so.error(n)}},{key:"eo",value:function(n){this.onlineState=n;var r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}},{key:"ao",value:function(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}},{key:"oo",value:function(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"co",value:function(n){n=tw.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}]),i}(),nw=function(){function i(s,n){(0,M.Z)(this,i),this.payload=s,this.byteLength=n}return(0,R.Z)(i,[{key:"ho",value:function(){return"metadata"in this.payload}}]),i}(),HM=function(){function i(s){(0,M.Z)(this,i),this.N=s}return(0,R.Z)(i,[{key:"zn",value:function(n){return Ih(this.N,n)}},{key:"Hn",value:function(n){return n.metadata.exists?lD(this.N,n.document,!1):ku.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}},{key:"Jn",value:function(n){return Zo(n)}}]),i}(),CN=function(){function i(s,n,r){(0,M.Z)(this,i),this.lo=s,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=oS(s)}return(0,R.Z)(i,[{key:"fo",value:function(n){this.progress.bytesLoaded+=n.byteLength;var r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}},{key:"wo",value:function(n){var u,r=new Map,a=new HM(this.N),o=(0,Ve.Z)(n);try{for(o.s();!(u=o.n()).done;){var l=u.value;if(l.metadata.queries){var b,f=a.zn(l.metadata.name),m=(0,Ve.Z)(l.metadata.queries);try{for(m.s();!(b=m.n()).done;){var w=b.value,C=(r.get(w)||Ua()).add(f);r.set(w,C)}}catch(T){m.e(T)}finally{m.f()}}}}catch(T){o.e(T)}finally{o.f()}return r}},{key:"complete",value:(s=(0,Qt.Z)(Ke().mark(function r(){var a,o,u,l,f;return Ke().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,sN(this.localStore,new HM(this.N),this.documents,this.lo.id);case 2:a=b.sent,o=this.wo(this.documents),u=(0,Ve.Z)(this.queries),b.prev=5,u.s();case 7:if((l=u.n()).done){b.next=13;break}return f=l.value,b.next=11,oN(this.localStore,f,o.get(f.name));case 11:b.next=7;break;case 13:b.next=18;break;case 15:b.prev=15,b.t0=b.catch(5),u.e(b.t0);case 18:return b.prev=18,u.f(),b.finish(18);case 21:return b.abrupt("return",(this.progress.taskState="Success",new eN(Object.assign({},this.progress),a)));case 22:case"end":return b.stop()}},r,this,[[5,15,18,21]])})),function(){return s.apply(this,arguments)})}]),i;var s}();function oS(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}var uS=function i(s){(0,M.Z)(this,i),this.key=s},rw=function i(s){(0,M.Z)(this,i),this.key=s},lS=function(){function i(s,n){(0,M.Z)(this,i),this.query=s,this._o=n,this.mo=null,this.current=!1,this.yo=Ua(),this.mutatedKeys=Ua(),this.po=AL(s),this.Eo=new UM(this.po)}return(0,R.Z)(i,[{key:"To",get:function(){return this._o}},{key:"Io",value:function(n,r){var a=this,o=r?r.Ao:new wN,u=r?r.Eo:this.Eo,l=r?r.mutatedKeys:this.mutatedKeys,f=u,m=!1,b=Db(this.query)&&u.size===this.query.limit?u.last():null,w=Cy(this.query)&&u.size===this.query.limit?u.first():null;if(n.inorderTraversal(function(T,I){var Z=u.get(T),Y=Mp(a.query,I)?I:null,V=!!Z&&a.mutatedKeys.has(Z.key),W=!!Y&&(Y.hasLocalMutations||a.mutatedKeys.has(Y.key)&&Y.hasCommittedMutations),se=!1;Z&&Y?Z.data.isEqual(Y.data)?V!==W&&(o.track({type:3,doc:Y}),se=!0):a.Ro(Z,Y)||(o.track({type:2,doc:Y}),se=!0,(b&&a.po(Y,b)>0||w&&a.po(Y,w)<0)&&(m=!0)):!Z&&Y?(o.track({type:0,doc:Y}),se=!0):Z&&!Y&&(o.track({type:1,doc:Z}),se=!0,(b||w)&&(m=!0)),se&&(Y?(f=f.add(Y),l=W?l.add(T):l.delete(T)):(f=f.delete(T),l=l.delete(T)))}),Db(this.query)||Cy(this.query))for(;f.size>this.query.limit;){var C=Db(this.query)?f.last():f.first();f=f.delete(C.key),l=l.delete(C.key),o.track({type:1,doc:C})}return{Eo:f,Ao:o,Ln:m,mutatedKeys:l}}},{key:"Ro",value:function(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}},{key:"applyChanges",value:function(n,r,a){var o=this,u=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;var l=n.Ao.Yr();l.sort(function(w,C){return I=C.type,(Z=function(V){switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sr()}})(w.type)-Z(I)||o.po(w.doc,C.doc);var I,Z}),this.bo(a);var f=r?this.Po():[],m=0===this.yo.size&&this.current?1:0,b=m!==this.mo;return this.mo=m,0!==l.length||b?{snapshot:new tw(this.query,n.Eo,u,l,n.mutatedKeys,0===m,b,!1),vo:f}:{vo:f}}},{key:"eo",value:function(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new wN,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}},{key:"Vo",value:function(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}},{key:"bo",value:function(n){var r=this;n&&(n.addedDocuments.forEach(function(a){return r._o=r._o.add(a)}),n.modifiedDocuments.forEach(function(a){}),n.removedDocuments.forEach(function(a){return r._o=r._o.delete(a)}),this.current=n.current)}},{key:"Po",value:function(){var n=this;if(!this.current)return[];var r=this.yo;this.yo=Ua(),this.Eo.forEach(function(o){n.Vo(o.key)&&(n.yo=n.yo.add(o.key))});var a=[];return r.forEach(function(o){n.yo.has(o)||a.push(new rw(o))}),this.yo.forEach(function(o){r.has(o)||a.push(new uS(o))}),a}},{key:"So",value:function(n){this._o=n.Gn,this.yo=Ua();var r=this.Io(n.documents);return this.applyChanges(r,!0)}},{key:"Do",value:function(){return tw.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}]),i}(),GM=function i(s,n,r){(0,M.Z)(this,i),this.query=s,this.targetId=n,this.view=r},DN=function i(s){(0,M.Z)(this,i),this.key=s,this.Co=!1},SN=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.localStore=s,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.No={},this.xo=new Hy(function(l){return GC(l)},Sy),this.ko=new Map,this.$o=new Set,this.Oo=new Cu(Fr.comparator),this.Fo=new Map,this.Mo=new BD,this.Lo={},this.Bo=new Map,this.Uo=Vb.ie(),this.onlineState="Unknown",this.qo=void 0}return(0,R.Z)(i,[{key:"isPrimaryClient",get:function(){return!0===this.qo}}]),i}();function jM(i,s){return cS.apply(this,arguments)}function cS(){return(cS=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o,u,l,f;return Ke().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(r=n_(s),!(u=r.xo.get(n))){b.next=6;break}r.sharedClientState.addLocalQueryTarget(a=u.targetId),o=u.view.Do(),b.next=15;break;case 6:return b.next=8,mm(r.localStore,Ec(n));case 8:return f=r.sharedClientState.addLocalQueryTarget((l=b.sent).targetId),a=l.targetId,b.next=13,iw(r,n,a,"current"===f);case 13:o=b.sent,r.isPrimaryClient&&$b(r.remoteStore,l);case 15:return b.abrupt("return",o);case 16:case"end":return b.stop()}},i)}))).apply(this,arguments)}function iw(i,s,n,r){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,Qt.Z)(Ke().mark(function i(s,n,r,a){var o,u,l,f,m,b;return Ke().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return s.Ko=function(T,I,Z){return(Y=(0,Qt.Z)(Ke().mark(function V(W,se,fe,ve){var me,pe,ke;return Ke().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(me=se.view.Io(fe),qe.t0=me.Ln,!qe.t0){qe.next=6;break}return qe.next=5,ym(W.localStore,se.query,!1).then(function(Ze){return se.view.Io(Ze.documents,me)});case 5:me=qe.sent;case 6:return pe=ve&&ve.targetChanges.get(se.targetId),ke=se.view.applyChanges(me,W.isPrimaryClient,pe),qe.abrupt("return",(ys(W,se.targetId,ke.vo),ke.snapshot));case 8:case"end":return qe.stop()}},V)})),function(V,W,se,fe){return Y.apply(this,arguments)})(s,T,I,Z);var Y},C.next=3,ym(s.localStore,n,!0);case 3:return u=new lS(n,(o=C.sent).Gn),l=u.Io(o.documents),f=iD.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==s.onlineState),m=u.applyChanges(l,s.isPrimaryClient,f),ys(s,r,m.vo),b=new GM(n,r,u),C.abrupt("return",(s.xo.set(n,b),s.ko.has(r)?s.ko.get(r).push(n):s.ko.set(r,[n]),m.snapshot));case 11:case"end":return C.stop()}},i)}))).apply(this,arguments)}function aw(i,s){return WM.apply(this,arguments)}function WM(){return(WM=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(r=Un(s),a=r.xo.get(n),!((o=r.ko.get(a.targetId)).length>1)){l.next=3;break}return l.abrupt("return",(r.ko.set(a.targetId,o.filter(function(f){return!Sy(f,n)})),void r.xo.delete(n)));case 3:if(!r.isPrimaryClient){l.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),l.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),l.t0){l.next=9;break}return l.next=9,gm(r.localStore,a.targetId,!1).then(function(){r.sharedClientState.clearQueryState(a.targetId),Xb(r.remoteStore,a.targetId),Mm(r,a.targetId)}).catch(kd);case 9:l.next=14;break;case 11:return Mm(r,a.targetId),l.next=14,gm(r.localStore,a.targetId,!0);case 14:case"end":return l.stop()}},i)}))).apply(this,arguments)}function Xy(i,s,n){return qa.apply(this,arguments)}function qa(){return(qa=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o,u;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a=r_(s),f.prev=1,f.next=4,function(m,b){var I,w=Un(m),C=Nu.now(),T=b.reduce(function(Z,Y){return Z.add(Y.key)},Ua());return w.persistence.runTransaction("Locally write mutations","readwrite",function(Z){return w.Qn.Pn(Z,T).next(function(Y){I=Y;var se,V=[],W=(0,Ve.Z)(b);try{for(W.s();!(se=W.n()).done;){var fe=se.value,ve=eM(fe,I.get(fe.key));null!=ve&&V.push(new vf(fe.key,ve,qx(ve.value.mapValue),ru.exists(!0)))}}catch(me){W.e(me)}finally{W.f()}return w.In.addMutationBatch(Z,C,V,b)})}).then(function(Z){return Z.applyToLocalDocumentSet(I),{batchId:Z.batchId,changes:I}})}(a.localStore,n);case 4:return a.sharedClientState.addPendingMutation((o=f.sent).batchId),b=o.batchId,w=r,C=void 0,(C=(m=a).Lo[m.currentUser.toKey()])||(C=new Cu(Si)),C=C.insert(b,w),m.Lo[m.currentUser.toKey()]=C,f.next=9,Ef(a,o.changes);case 9:return f.next=11,km(a.remoteStore);case 11:f.next=17;break;case 13:f.prev=13,f.t0=f.catch(1),u=Sm(f.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return f.stop()}var m,b,w,C},i,null,[[1,13]])}))).apply(this,arguments)}function Ad(i,s){return Td.apply(this,arguments)}function Td(){return(Td=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=Un(s),u.prev=1,u.next=4,iN(r.localStore,n);case 4:return a=u.sent,n.targetChanges.forEach(function(l,f){var m=r.Fo.get(f);m&&(Jr(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?m.Co=!0:l.modifiedDocuments.size>0?Jr(m.Co):l.removedDocuments.size>0&&(Jr(m.Co),m.Co=!1))}),u.next=8,Ef(r,a,n);case 8:u.next=14;break;case 10:return u.prev=10,u.t0=u.catch(1),u.next=14,kd(u.t0);case 14:case"end":return u.stop()}},i,null,[[1,10]])}))).apply(this,arguments)}function xm(i,s,n){var r=Un(i);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.xo.forEach(function(o,u){var l=u.view.eo(s);l.snapshot&&a.push(l.snapshot)}),function(o,u){var l=Un(o);l.onlineState=u;var f=!1;l.queries.forEach(function(m,b){var C,w=(0,Ve.Z)(b.listeners);try{for(w.s();!(C=w.n()).done;)C.value.eo(u)&&(f=!0)}catch(I){w.e(I)}finally{w.f()}}),f&&zM(l)}(r.eventManager,s),a.length&&r.No.Tr(a),r.onlineState=s,r.isPrimaryClient&&r.sharedClientState.setOnlineState(s)}}function QV(i,s,n){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o,u,l,f,m;return Ke().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if((a=Un(s)).sharedClientState.updateQueryState(n,"rejected",r),o=a.Fo.get(n),!(u=o&&o.key)){w.next=14;break}return l=(l=new Cu(Fr.comparator)).insert(u,ku.newNoDocument(u,$r.min())),f=Ua().add(u),m=new rD($r.min(),new Map,new No(Si),l,f),w.next=9,Ad(a,m);case 9:a.Oo=a.Oo.remove(u),a.Fo.delete(n),fS(a),w.next=16;break;case 14:return w.next=16,gm(a.localStore,n,!1).then(function(){return Mm(a,n,r)}).catch(kd);case 16:case"end":return w.stop()}},i)}))).apply(this,arguments)}function Yc(i,s){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=Un(s),a=n.batch.batchId,l.prev=1,l.next=4,rN(r.localStore,n);case 4:return o=l.sent,hS(r,a,null),KM(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),l.next=10,Ef(r,o);case 10:l.next=16;break;case 12:return l.prev=12,l.t0=l.catch(1),l.next=16,kd(l.t0);case 16:case"end":return l.stop()}},i,null,[[1,12]])}))).apply(this,arguments)}function Jy(i,s,n){return qM.apply(this,arguments)}function qM(){return(qM=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return a=Un(s),l.prev=1,l.next=4,function(f,m){var b=Un(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",function(w){var C;return b.In.lookupMutationBatch(w,m).next(function(T){return Jr(null!==T),C=T.keys(),b.In.removeMutationBatch(w,T)}).next(function(){return b.In.performConsistencyCheck(w)}).next(function(){return b.Qn.Pn(w,C)})})}(a.localStore,n);case 4:return o=l.sent,hS(a,n,r),KM(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),l.next=10,Ef(a,o);case 10:l.next=16;break;case 12:return l.prev=12,l.t0=l.catch(1),l.next=16,kd(l.t0);case 16:case"end":return l.stop()}},i,null,[[1,12]])}))).apply(this,arguments)}function YM(i,s){return sw.apply(this,arguments)}function sw(){return(sw=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o,u;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return wf((r=Un(s)).remoteStore)||Rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),f.prev=2,f.next=5,function(m){var b=Un(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(w){return b.In.getHighestUnacknowledgedBatchId(w)})}(r.localStore);case 5:if(-1!==(a=f.sent)){f.next=8;break}return f.abrupt("return",void n.resolve());case 8:(o=r.Bo.get(a)||[]).push(n),r.Bo.set(a,o),f.next=16;break;case 12:f.prev=12,f.t0=f.catch(2),u=Sm(f.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return f.stop()}},i,null,[[2,12]])}))).apply(this,arguments)}function KM(i,s){(i.Bo.get(s)||[]).forEach(function(n){n.resolve()}),i.Bo.delete(s)}function hS(i,s,n){var r=Un(i),a=r.Lo[r.currentUser.toKey()];if(a){var o=a.get(s);o&&(n?o.reject(n):o.resolve(),a=a.remove(s)),r.Lo[r.currentUser.toKey()]=a}}function Mm(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i.sharedClientState.removeLocalQueryTarget(s);var a,r=(0,Ve.Z)(i.ko.get(s));try{for(r.s();!(a=r.n()).done;){var o=a.value;i.xo.delete(o),n&&i.No.jo(o,n)}}catch(u){r.e(u)}finally{r.f()}i.ko.delete(s),i.isPrimaryClient&&i.Mo.cs(s).forEach(function(u){i.Mo.containsKey(u)||ac(i,u)})}function ac(i,s){i.$o.delete(s.path.canonicalString());var n=i.Oo.get(s);null!==n&&(Xb(i.remoteStore,n),i.Oo=i.Oo.remove(s),i.Fo.delete(n),fS(i))}function ys(i,s,n){var a,r=(0,Ve.Z)(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;o instanceof uS?(i.Mo.addReference(o.key,s),Kc(i,o)):o instanceof rw?(Rn("SyncEngine","Document no longer in limbo: "+o.key),i.Mo.removeReference(o.key,s),i.Mo.containsKey(o.key)||ac(i,o.key)):Sr()}}catch(u){r.e(u)}finally{r.f()}}function Kc(i,s){var n=s.key,r=n.path.canonicalString();i.Oo.get(n)||i.$o.has(r)||(Rn("SyncEngine","New document in limbo: "+n),i.$o.add(r),fS(i))}function fS(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){var s=i.$o.values().next().value;i.$o.delete(s);var n=new Fr(yi.fromString(s)),r=i.Uo.next();i.Fo.set(r,new DN(n)),i.Oo=i.Oo.insert(n,r),$b(i.remoteStore,new Bb(Ec(xp(n.path)),r,2,tu.T))}}function Ef(i,s,n){return ow.apply(this,arguments)}function ow(){return(ow=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o,u,l;return Ke().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(a=Un(s),o=[],u=[],l=[],m.t0=a.xo.isEmpty(),m.t0){m.next=9;break}return a.xo.forEach(function(b,w){l.push(a.Ko(w,n,r).then(function(C){if(C){a.isPrimaryClient&&a.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);var T=tN.kn(w.targetId,C);u.push(T)}}))}),m.next=6,Promise.all(l);case 6:return a.No.Tr(o),m.next=9,function(){var b=(0,Qt.Z)(Ke().mark(function w(C,T){var I,Z,Y,V,W,se,ve;return Ke().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return I=Un(C),pe.prev=1,pe.next=4,I.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(ke){return En.forEach(T,function(je){return En.forEach(je.Nn,function(qe){return I.persistence.referenceDelegate.addReference(ke,je.targetId,qe)}).next(function(){return En.forEach(je.xn,function(qe){return I.persistence.referenceDelegate.removeReference(ke,je.targetId,qe)})})})});case 4:pe.next=11;break;case 6:if(pe.prev=6,pe.t0=pe.catch(1),hm(pe.t0)){pe.next=10;break}throw pe.t0;case 10:Rn("LocalStore","Failed to update sequence numbers: "+pe.t0);case 11:Z=(0,Ve.Z)(T);try{for(Z.s();!(Y=Z.n()).done;)W=(V=Y.value).targetId,V.fromCache||(se=I.Un.get(W),ve=se.withLastLimboFreeSnapshotVersion(se.snapshotVersion),I.Un=I.Un.insert(W,ve))}catch(ke){Z.e(ke)}finally{Z.f()}case 13:case"end":return pe.stop()}},w,null,[[1,6]])}));return function(w,C){return b.apply(this,arguments)}}()(a.localStore,u);case 9:case"end":return m.stop()}},i)}))).apply(this,arguments)}function dS(i,s){return Im.apply(this,arguments)}function Im(){return(Im=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((r=Un(s)).currentUser.isEqual(n)){u.next=11;break}return Rn("SyncEngine","User change. New user:",n.toKey()),u.next=5,kM(r.localStore,n);case 5:return a=u.sent,r.currentUser=n,(l=r).Bo.forEach(function(m){m.forEach(function(b){b.reject(new pn(Kt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Bo.clear(),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),u.next=11,Ef(r,a.Wn);case 11:case"end":return u.stop()}var l},i)}))).apply(this,arguments)}function pS(i,s){var n=Un(i),r=n.Fo.get(s);if(r&&r.Co)return Ua().add(r.key);var a=Ua(),o=n.ko.get(s);if(!o)return a;var l,u=(0,Ve.Z)(o);try{for(u.s();!(l=u.n()).done;){var m=n.xo.get(l.value);a=a.unionWith(m.view.To)}}catch(b){u.e(b)}finally{u.f()}return a}function AN(i,s){return kf.apply(this,arguments)}function kf(){return(kf=(0,Qt.Z)(Ke().mark(function i(s,n){var r,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=Un(s),l.next=3,ym(r.localStore,n.query,!0);case 3:return o=n.view.So(l.sent),l.abrupt("return",(r.isPrimaryClient&&ys(r,n.targetId,o.vo),o));case 6:case"end":return l.stop()}},i)}))).apply(this,arguments)}function TN(i){return uw.apply(this,arguments)}function uw(){return(uw=(0,Qt.Z)(Ke().mark(function i(s){var n;return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=Un(s),a.abrupt("return",OD(n.localStore).then(function(o){return Ef(n,o)}));case 2:case"end":return a.stop()}},i)}))).apply(this,arguments)}function vS(i,s,n,r){return Op.apply(this,arguments)}function Op(){return(Op=(0,Qt.Z)(Ke().mark(function i(s,n,r,a){var o,u;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=Un(s),f.next=3,function(m,b){var w=Un(m),C=Un(w.In);return w.persistence.runTransaction("Lookup mutation documents","readonly",function(T){return C.Xt(T,b).next(function(I){return I?w.Qn.Pn(T,I):En.resolve(null)})})}(o.localStore,n);case 3:if(null===(u=f.sent)){f.next=15;break}if("pending"!==r){f.next=10;break}return f.next=8,km(o.remoteStore);case 8:f.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(hS(o,n,a||null),KM(o,n),b=n,Un(Un(o.localStore).In).te(b)):Sr();case 11:return f.next=13,Ef(o,u);case 13:f.next=16;break;case 15:Rn("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return f.stop()}var b},i)}))).apply(this,arguments)}function mS(i,s){return lw.apply(this,arguments)}function lw(){return(lw=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a,o,u,l,m,b;return Ke().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(n_(r=Un(s)),r_(r),!0!==n||!0===r.qo){C.next=13;break}return a=r.sharedClientState.getAllActiveQueryTargets(),C.next=5,e_(r,a.toArray());case 5:return o=C.sent,r.qo=!0,C.next=9,nS(r.remoteStore,!0);case 9:u=(0,Ve.Z)(o);try{for(u.s();!(l=u.n()).done;)$b(r.remoteStore,l.value)}catch(T){u.e(T)}finally{u.f()}C.next=25;break;case 13:if(!1!==n||!1===r.qo){C.next=25;break}return m=[],b=Promise.resolve(),r.ko.forEach(function(T,I){r.sharedClientState.isLocalQueryTarget(I)?m.push(I):b=b.then(function(){return Mm(r,I),gm(r.localStore,I,!0)}),Xb(r.remoteStore,I)}),C.next=19,b;case 19:return C.next=21,e_(r,m);case 21:return function(T){var I=Un(T);I.Fo.forEach(function(Z,Y){Xb(I.remoteStore,Y)}),I.Mo.us(),I.Fo=new Map,I.Oo=new Cu(Fr.comparator)}(r),r.qo=!1,C.next=25,nS(r.remoteStore,!1);case 25:case"end":return C.stop()}},i)}))).apply(this,arguments)}function e_(i,s,n){return $M.apply(this,arguments)}function $M(){return($M=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o,u,l,f,m,b,w,C,T,Z,Y,V;return Ke().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:a=Un(s),o=[],u=[],l=(0,Ve.Z)(n),se.prev=2,l.s();case 4:if((f=l.n()).done){se.next=45;break}if(b=void 0,!(w=a.ko.get(m=f.value))||0===w.length){se.next=34;break}return se.next=11,mm(a.localStore,Ec(w[0]));case 11:b=se.sent,C=(0,Ve.Z)(w),se.prev=13,C.s();case 15:if((T=C.n()).done){se.next=24;break}return Z=a.xo.get(T.value),se.next=20,AN(a,Z);case 20:(Y=se.sent).snapshot&&u.push(Y.snapshot);case 22:se.next=15;break;case 24:se.next=29;break;case 26:se.prev=26,se.t0=se.catch(13),C.e(se.t0);case 29:return se.prev=29,C.f(),se.finish(29);case 32:se.next=42;break;case 34:return se.next=36,DM(a.localStore,m);case 36:return V=se.sent,se.next=39,mm(a.localStore,V);case 39:return b=se.sent,se.next=42,iw(a,t_(V),m,!1);case 42:o.push(b);case 43:se.next=4;break;case 45:se.next=50;break;case 47:se.prev=47,se.t1=se.catch(2),l.e(se.t1);case 50:return se.prev=50,l.f(),se.finish(50);case 53:return se.abrupt("return",(a.No.Tr(u),o));case 54:case"end":return se.stop()}},i,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function t_(i){return BC(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function XM(i){var s=Un(i);return Un(Un(s.localStore).persistence).pn()}function QM(i,s,n,r){return cw.apply(this,arguments)}function cw(){return(cw=(0,Qt.Z)(Ke().mark(function i(s,n,r,a){var o,u,l;return Ke().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(o=Un(s)).qo){m.next=5;break}Rn("SyncEngine","Ignoring unexpected query state notification."),m.next=21;break;case 5:if(!o.ko.has(n)){m.next=21;break}m.t0=r,m.next="current"===m.t0||"not-current"===m.t0?9:"rejected"===m.t0?16:20;break;case 9:return m.next=11,OD(o.localStore);case 11:return u=m.sent,l=rD.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),m.next=15,Ef(o,u,l);case 15:return m.abrupt("break",21);case 16:return m.next=18,gm(o.localStore,n,!0);case 18:return Mm(o,n,a),m.abrupt("break",21);case 20:Sr();case 21:case"end":return m.stop()}},i)}))).apply(this,arguments)}function hw(i,s,n){return gS.apply(this,arguments)}function gS(){return(gS=(0,Qt.Z)(Ke().mark(function i(s,n,r){var a,o,u,l,f,m,b,w,C;return Ke().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(a=n_(s)).qo){I.next=45;break}o=(0,Ve.Z)(n),I.prev=3,o.s();case 5:if((u=o.n()).done){I.next=21;break}if(!a.ko.has(l=u.value)){I.next=10;break}return Rn("SyncEngine","Adding an already active target "+l),I.abrupt("continue",19);case 10:return I.next=12,DM(a.localStore,l);case 12:return f=I.sent,I.next=15,mm(a.localStore,f);case 15:return m=I.sent,I.next=18,iw(a,t_(f),m.targetId,!1);case 18:$b(a.remoteStore,m);case 19:I.next=5;break;case 21:I.next=26;break;case 23:I.prev=23,I.t0=I.catch(3),o.e(I.t0);case 26:return I.prev=26,o.f(),I.finish(26);case 29:b=(0,Ve.Z)(r),I.prev=30,C=Ke().mark(function Z(){var Y;return Ke().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(W.t0=a.ko.has(Y=w.value),!W.t0){W.next=5;break}return W.next=5,gm(a.localStore,Y,!1).then(function(){Xb(a.remoteStore,Y),Mm(a,Y)}).catch(kd);case 5:case"end":return W.stop()}},Z)}),b.s();case 33:if((w=b.n()).done){I.next=37;break}return I.delegateYield(C(),"t1",35);case 35:I.next=33;break;case 37:I.next=42;break;case 39:I.prev=39,I.t2=I.catch(30),b.e(I.t2);case 42:return I.prev=42,b.f(),I.finish(42);case 45:case"end":return I.stop()}},i,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function n_(i){var s=Un(i);return s.remoteStore.remoteSyncer.applyRemoteEvent=Ad.bind(null,s),s.remoteStore.remoteSyncer.getRemoteKeysForTarget=pS.bind(null,s),s.remoteStore.remoteSyncer.rejectListen=QV.bind(null,s),s.No.Tr=VM.bind(null,s.eventManager),s.No.jo=kN.bind(null,s.eventManager),s}function r_(i){var s=Un(i);return s.remoteStore.remoteSyncer.applySuccessfulWrite=Yc.bind(null,s),s.remoteStore.remoteSyncer.rejectFailedWrite=Jy.bind(null,s),s}function JV(i,s,n){var a,r=Un(i);(a=(0,Qt.Z)(Ke().mark(function o(u,l,f){var m,b,w,C,T;return Ke().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.prev=0,Z.next=3,l.getMetadata();case 3:return m=Z.sent,Z.next=6,function(Y,V){var W=Un(Y),se=Zo(V.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",function(fe){return W.Je.getBundleMetadata(fe,V.id)}).then(function(fe){return!!fe&&fe.createTime.compareTo(se)>=0})}(u.localStore,m);case 6:if(!Z.sent){Z.next=10;break}return Z.next=9,l.close();case 9:return Z.abrupt("return",void f._completeWith((Y=m,{taskState:"Success",documentsLoaded:Y.totalDocuments,bytesLoaded:Y.totalBytes,totalDocuments:Y.totalDocuments,totalBytes:Y.totalBytes})));case 10:return f._updateProgress(oS(m)),b=new CN(m,u.localStore,l.N),Z.next=14,l.Qo();case 14:w=Z.sent;case 15:if(!w){Z.next=25;break}return Z.next=18,b.fo(w);case 18:return(C=Z.sent)&&f._updateProgress(C),Z.next=22,l.Qo();case 22:w=Z.sent;case 23:Z.next=15;break;case 25:return Z.next=27,b.complete();case 27:return T=Z.sent,Z.next=30,Ef(u,T.Tn,void 0);case 30:return Z.next=32,function(Y,V){var W=Un(Y);return W.persistence.runTransaction("Save bundle","readwrite",function(se){return W.Je.saveBundleMetadata(se,V)})}(u.localStore,m);case 32:f._completeWith(T.progress),Z.next=38;break;case 35:Z.prev=35,Z.t0=Z.catch(0),zv("SyncEngine","Loading bundle failed with ".concat(Z.t0)),f._failWith(Z.t0);case 38:case"end":return Z.stop()}var Y},o,null,[[0,35]])})),function(o,u,l){return a.apply(this,arguments)})(r,s,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var xN=function(){function i(){(0,M.Z)(this,i),this.synchronizeTabs=!1}return(0,R.Z)(i,[{key:"initialize",value:(s=(0,Qt.Z)(Ke().mark(function r(a){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return this.N=Wy(a.databaseInfo.databaseId),this.sharedClientState=this.Wo(a),this.persistence=this.Go(a),u.next=5,this.persistence.start();case 5:this.gcScheduler=this.zo(a),this.localStore=this.Ho(a);case 7:case"end":return u.stop()}},r,this)})),function(r){return s.apply(this,arguments)})},{key:"zo",value:function(n){return null}},{key:"Ho",value:function(n){return PD(this.persistence,new ID,n.initialUser,this.N)}},{key:"Go",value:function(n){return new hN(dN.Ns,this.N)}},{key:"Wo",value:function(n){return new xM}},{key:"terminate",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),o.next=3,this.sharedClientState.shutdown();case 3:return o.next=5,this.persistence.shutdown();case 5:case"end":return o.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()}]),i;var s}(),ei=function(i){(0,x.Z)(n,i);var r,s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).Jo=r,u.cacheSizeBytes=a,u.forceOwnership=o,u.synchronizeTabs=!1,u}return(0,R.Z)(n,[{key:"initialize",value:(r=(0,Qt.Z)(Ke().mark(function o(u){var l=this;return Ke().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,Se.Z)((0,ye.Z)(n.prototype),"initialize",this).call(this,u);case 2:return m.next=4,aN(this.localStore);case 4:return m.next=6,this.Jo.initialize(this,u);case 6:return m.next=8,r_(this.Jo.syncEngine);case 8:return m.next=10,km(this.Jo.remoteStore);case 10:return m.next=12,this.persistence.nn(function(){return l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(l.localStore),Promise.resolve()});case 12:case"end":return m.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"Ho",value:function(a){return PD(this.persistence,new ID,a.initialUser,this.N)}},{key:"zo",value:function(a){return new $L(this.persistence.referenceDelegate.garbageCollector,a.asyncQueue)}},{key:"Go",value:function(a){var o=MD(a.databaseInfo.databaseId,a.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?Fh.withCacheSize(this.cacheSizeBytes):Fh.DEFAULT;return new JL(this.synchronizeTabs,o,a.clientId,u,a.asyncQueue,_m(),HD(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Wo",value:function(a){return new xM}}]),n}(xN),ez=function(i){(0,x.Z)(n,i);var r,s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a,!1)).Jo=r,o.cacheSizeBytes=a,o.synchronizeTabs=!0,o}return(0,R.Z)(n,[{key:"initialize",value:(r=(0,Qt.Z)(Ke().mark(function o(u){var f,l=this;return Ke().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,Se.Z)((0,ye.Z)(n.prototype),"initialize",this).call(this,u);case 2:if(f=this.Jo.syncEngine,b.t0=this.sharedClientState instanceof Kb,!b.t0){b.next=8;break}return this.sharedClientState.syncEngine={_i:vS.bind(null,f),mi:QM.bind(null,f),gi:hw.bind(null,f),pn:XM.bind(null,f),wi:TN.bind(null,f)},b.next=8,this.sharedClientState.start();case 8:return b.next=10,this.persistence.nn(function(){var w=(0,Qt.Z)(Ke().mark(function C(T){return Ke().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,mS(l.Jo.syncEngine,T);case 2:l.gcScheduler&&(T&&!l.gcScheduler.started?l.gcScheduler.start(l.localStore):T||l.gcScheduler.stop());case 3:case"end":return Z.stop()}},C)}));return function(C){return w.apply(this,arguments)}}());case 10:case"end":return b.stop()}},o,this)})),function(o){return r.apply(this,arguments)})},{key:"Wo",value:function(a){var o=_m();if(!Kb.bt(o))throw new pn(Kt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var u=MD(a.databaseInfo.databaseId,a.databaseInfo.persistenceKey);return new Kb(o,a.asyncQueue,u,a.clientId,a.initialUser)}}]),n}(ei),Lp=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"initialize",value:(s=(0,Qt.Z)(Ke().mark(function r(a,o){var u=this;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(f.t0=this.localStore,f.t0){f.next=12;break}return this.localStore=a.localStore,this.sharedClientState=a.sharedClientState,this.datastore=this.createDatastore(o),this.remoteStore=this.createRemoteStore(o),this.eventManager=this.createEventManager(o),this.syncEngine=this.createSyncEngine(o,!a.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(m){return xm(u.syncEngine,m,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dS.bind(null,this.syncEngine),f.next=12,nS(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return f.stop()}},r,this)})),function(r,a){return s.apply(this,arguments)})},{key:"createEventManager",value:function(n){return new EN}},{key:"createDatastore",value:function(n){var r=Wy(n.databaseInfo.databaseId),a=new pN(n.databaseInfo);return new $V(n.credentials,a,r)}},{key:"createRemoteStore",value:function(n){var a,o,u,l,f,r=this;return a=this.localStore,o=this.datastore,u=n.asyncQueue,l=function(b){return xm(r.syncEngine,b,0)},f=IM.bt()?new IM:new MM,new Rp(a,o,u,l,f)}},{key:"createSyncEngine",value:function(n,r){return b=r,w=new SN(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions),b&&(w.qo=!0),w;var b,w}},{key:"terminate",value:function(){return(n=(0,Qt.Z)(Ke().mark(function r(a){var o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=Un(a),Rn("RemoteStore","RemoteStore shutting down."),o.Kr.add(5),l.next=5,bf(o);case 5:o.Qr.shutdown(),o.Wr.set("Unknown");case 7:case"end":return l.stop()}},r)})),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}]),i;var s}();function JM(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,Qt.Z)(Ke().mark(function a(){var o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(n<i.byteLength)){l.next=3;break}return o={value:i.slice(n,n+s),done:!1},l.abrupt("return",(n+=s,o));case 3:return l.abrupt("return",{done:!0});case 4:case"end":return l.stop()}},a)}))()},cancel:function(){return(0,Qt.Z)(Ke().mark(function a(){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:case"end":return u.stop()}},a)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var fw=function(){function i(s){(0,M.Z)(this,i),this.observer=s,this.muted=!1}return(0,R.Z)(i,[{key:"next",value:function(n){this.observer.next&&this.Yo(this.observer.next,n)}},{key:"error",value:function(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}},{key:"Xo",value:function(){this.muted=!0}},{key:"Yo",value:function(n,r){var a=this;this.muted||setTimeout(function(){a.muted||n(r)},0)}}]),i}(),MN=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.Zo=s,this.N=n,this.metadata=new eu,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(function(a){a&&a.ho()?r.metadata.resolve(a.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==a?void 0:a.payload))))},function(a){return r.metadata.reject(a)})}return(0,R.Z)(i,[{key:"close",value:function(){return this.Zo.cancel()}},{key:"getMetadata",value:(s=(0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",this.metadata.promise);case 1:case"end":return o.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"Qo",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.getMetadata();case 2:return o.abrupt("return",this.ea());case 3:case"end":return o.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"ea",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){var a,o,u;return Ke().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.na();case 2:if(null!==(a=m.sent)){m.next=5;break}return m.abrupt("return",null);case 5:return o=this.ta.decode(a),u=Number(o),isNaN(u)&&this.sa("length string (".concat(o,") is not valid number")),m.next=9,this.ia(u);case 9:return m.abrupt("return",new nw(JSON.parse(m.sent),a.length+u));case 11:case"end":return m.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"ra",value:function(){return this.buffer.findIndex(function(n){return n==="{".charCodeAt(0)})}},{key:"na",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){var a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(this.ra()<0)){l.next=7;break}return l.next=3,this.oa();case 3:if(!l.sent){l.next=5;break}return l.abrupt("break",7);case 5:l.next=0;break;case 7:if(0!==this.buffer.length){l.next=9;break}return l.abrupt("return",null);case 9:return(a=this.ra())<0&&this.sa("Reached the end of bundle when a length string is expected."),o=this.buffer.slice(0,a),l.abrupt("return",(this.buffer=this.buffer.slice(a),o));case 13:case"end":return l.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"ia",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(a){var o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(this.buffer.length<a)){l.next=8;break}return l.next=3,this.oa();case 3:if(l.t0=l.sent,!l.t0){l.next=6;break}this.sa("Reached the end of bundle when more is expected.");case 6:l.next=0;break;case 8:return o=this.ta.decode(this.buffer.slice(0,a)),l.abrupt("return",(this.buffer=this.buffer.slice(a),o));case 10:case"end":return l.stop()}},r,this)}));return function(r){return s.apply(this,arguments)}}()},{key:"sa",value:function(n){throw this.Zo.cancel(),new Error("Invalid bundle format: ".concat(n))}},{key:"oa",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){var a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.Zo.read();case 2:return(a=l.sent).done||((o=new Uint8Array(this.buffer.length+a.value.length)).set(this.buffer),o.set(a.value,this.buffer.length),this.buffer=o),l.abrupt("return",a.done);case 5:case"end":return l.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()}]),i;var s}(),tz=function(){function i(s){(0,M.Z)(this,i),this.datastore=s,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,R.Z)(i,[{key:"lookup",value:(s=(0,Qt.Z)(Ke().mark(function r(a){var u,o=this;return Ke().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){f.next=2;break}throw new pn(Kt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return f.next=4,function(){var m=(0,Qt.Z)(Ke().mark(function b(w,C){var T,I,Z,Y,V,W;return Ke().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return T=Un(w),I=Py(T.N)+"/documents",Z={documents:C.map(function(ve){return My(T.N,ve)})},fe.next=5,T.Ki("BatchGetDocuments",I,Z);case 5:return Y=fe.sent,V=new Map,Y.forEach(function(ve){var me=uM(T.N,ve);V.set(me.key.toString(),me)}),W=[],fe.abrupt("return",(C.forEach(function(ve){var me=V.get(ve.toString());Jr(!!me),W.push(me)}),W));case 10:case"end":return fe.stop()}},b)}));return function(b,w){return m.apply(this,arguments)}}()(this.datastore,a);case 4:return f.abrupt("return",((u=f.sent).forEach(function(m){return o.recordVersion(m)}),u));case 6:case"end":return f.stop()}},r,this)})),function(r){return s.apply(this,arguments)})},{key:"set",value:function(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}},{key:"update",value:function(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(n.toString())}},{key:"delete",value:function(n){this.write(new am(n,this.precondition(n))),this.writtenDocs.add(n.toString())}},{key:"commit",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){var o,a=this;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){l.next=2;break}throw this.lastWriteError;case 2:return o=this.readVersions,this.mutations.forEach(function(f){o.delete(f.key.toString())}),o.forEach(function(f,m){var b=Fr.fromPath(m);a.mutations.push(new Pb(b,a.precondition(b)))}),l.next=7,function(){var f=(0,Qt.Z)(Ke().mark(function m(b,w){var C,T,I;return Ke().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return C=Un(b),T=Py(C.N)+"/documents",I={writes:w.map(function(V){return Ob(C.N,V)})},Y.next=3,C.Li("Commit",T,I);case 3:case"end":return Y.stop()}},m)}));return function(m,b){return f.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return l.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"recordVersion",value:function(n){var r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw Sr();r=$r.min()}var a=this.readVersions.get(n.key.toString());if(a){if(!r.isEqual(a))throw new pn(Kt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}},{key:"precondition",value:function(n){var r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?ru.updateTime(r):ru.none()}},{key:"preconditionForUpdate",value:function(n){var r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual($r.min()))throw new pn(Kt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ru.updateTime(r)}return ru.exists(!0)}},{key:"write",value:function(n){this.ensureCommitNotCalled(),this.mutations.push(n)}},{key:"ensureCommitNotCalled",value:function(){}}]),i;var s}(),nz=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.asyncQueue=s,this.datastore=n,this.updateFunction=r,this.deferred=a,this.aa=5,this.rr=new bm(this.asyncQueue,"transaction_retry")}return(0,R.Z)(i,[{key:"run",value:function(){this.aa-=1,this.ca()}},{key:"ca",value:function(){var n=this;this.rr.Xi((0,Qt.Z)(Ke().mark(function r(){var a,o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a=new tz(n.datastore),(o=n.ua(a))&&o.then(function(f){n.asyncQueue.enqueueAndForget(function(){return a.commit().then(function(){n.deferred.resolve(f)}).catch(function(m){n.ha(m)})})}).catch(function(f){n.ha(f)});case 2:case"end":return l.stop()}},r)})))}},{key:"ua",value:function(n){try{var r=this.updateFunction(n);return!dd(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(a){return this.deferred.reject(a),null}}},{key:"ha",value:function(n){var r=this;this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(function(){return r.ca(),Promise.resolve()})):this.deferred.reject(n)}},{key:"la",value:function(n){if("FirebaseError"===n.name){var r=n.code;return"aborted"===r||"failed-precondition"===r||!XC(r)}return!1}}]),i}(),rz=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.credentials=s,this.asyncQueue=n,this.databaseInfo=r,this.user=Jo.UNAUTHENTICATED,this.clientId=cd.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(n,function(){var o=(0,Qt.Z)(Ke().mark(function u(l){return Ke().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return Rn("FirestoreClient","Received user=",l.uid),m.next=3,a.credentialListener(l);case 3:a.user=l;case 4:case"end":return m.stop()}},u)}));return function(u){return o.apply(this,arguments)}}())}return(0,R.Z)(i,[{key:"getConfiguration",value:(s=(0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return o.stop()}},r,this)})),function(){return s.apply(this,arguments)})},{key:"setCredentialChangeListener",value:function(n){this.credentialListener=n}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new pn(Kt.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var n=this;this.asyncQueue.enterRestrictedMode();var r=new eu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Qt.Z)(Ke().mark(function a(){var o;return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,l.t0=n.onlineComponents,!l.t0){l.next=5;break}return l.next=5,n.onlineComponents.terminate();case 5:if(l.t1=n.offlineComponents,!l.t1){l.next=9;break}return l.next=9,n.offlineComponents.terminate();case 9:n.credentials.shutdown(),r.resolve(),l.next=17;break;case 13:l.prev=13,l.t2=l.catch(0),o=Sm(l.t2,"Failed to shutdown persistence"),r.reject(o);case 17:case"end":return l.stop()}},a,null,[[0,13]])}))),r.promise}}]),i;var s}();function Bu(i,s){return yS.apply(this,arguments)}function yS(){return(yS=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s.asyncQueue.verifyOperationInProgress(),Rn("FirestoreClient","Initializing OfflineComponentProvider"),u.next=3,s.getConfiguration();case 3:return r=u.sent,u.next=6,n.initialize(r);case 6:a=r.initialUser,s.setCredentialChangeListener(function(){var l=(0,Qt.Z)(Ke().mark(function f(m){return Ke().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(w.t0=a.isEqual(m),w.t0){w.next=5;break}return w.next=4,kM(n.localStore,m);case 4:a=m;case 5:case"end":return w.stop()}},f)}));return function(f){return l.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return s.terminate()}),s.offlineComponents=n;case 8:case"end":return u.stop()}},i)}))).apply(this,arguments)}function eI(i,s){return i_.apply(this,arguments)}function i_(){return(i_=(0,Qt.Z)(Ke().mark(function i(s,n){var r,a;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s.asyncQueue.verifyOperationInProgress(),u.next=3,_S(s);case 3:return r=u.sent,Rn("FirestoreClient","Initializing OnlineComponentProvider"),u.next=7,s.getConfiguration();case 7:return a=u.sent,u.next=10,n.initialize(r,a);case 10:s.setCredentialChangeListener(function(l){return(f=(0,Qt.Z)(Ke().mark(function m(b,w){var C,T;return Ke().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return(C=Un(b)).asyncQueue.verifyOperationInProgress(),Rn("RemoteStore","RemoteStore received new credentials"),T=wf(C),C.Kr.add(3),Z.next=6,bf(C);case 6:return T&&C.Wr.set("Unknown"),Z.next=9,C.remoteSyncer.handleCredentialChange(w);case 9:return C.Kr.delete(3),Z.next=12,Em(C);case 12:case"end":return Z.stop()}},m)})),function(m,b){return f.apply(this,arguments)})(n.remoteStore,l);var f}),s.onlineComponents=n;case 12:case"end":return u.stop()}},i)}))).apply(this,arguments)}function _S(i){return bS.apply(this,arguments)}function bS(){return(bS=(0,Qt.Z)(Ke().mark(function i(s){return Ke().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=s.offlineComponents,r.t0){r.next=5;break}return Rn("FirestoreClient","Using default OfflineComponentProvider"),r.next=5,Bu(s,new xN);case 5:return r.abrupt("return",s.offlineComponents);case 6:case"end":return r.stop()}},i)}))).apply(this,arguments)}function wS(i){return tI.apply(this,arguments)}function tI(){return(tI=(0,Qt.Z)(Ke().mark(function i(s){return Ke().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=s.onlineComponents,r.t0){r.next=5;break}return Rn("FirestoreClient","Using default OnlineComponentProvider"),r.next=5,eI(s,new Lp);case 5:return r.abrupt("return",s.onlineComponents);case 6:case"end":return r.stop()}},i)}))).apply(this,arguments)}function nI(i){return _S(i).then(function(s){return s.persistence})}function ES(i){return _S(i).then(function(s){return s.localStore})}function IN(i){return wS(i).then(function(s){return s.remoteStore})}function kS(i){return wS(i).then(function(s){return s.syncEngine})}function a_(i){return dw.apply(this,arguments)}function dw(){return(dw=(0,Qt.Z)(Ke().mark(function i(s){var n,r;return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,wS(s);case 2:return o.abrupt("return",((r=(n=o.sent).eventManager).onListen=jM.bind(null,n.syncEngine),r.onUnlisten=aw.bind(null,n.syncEngine),r));case 5:case"end":return o.stop()}},i)}))).apply(this,arguments)}function iI(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new eu;return i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function a(){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=function(l,f,m,b,w){var C=new fw({next:function(Z){f.enqueueAndForget(function(){return Am(l,T)});var Y=Z.docs.has(m);!Y&&Z.fromCache?w.reject(new pn(Kt.UNAVAILABLE,"Failed to get document because the client is offline.")):Y&&Z.fromCache&&b&&"server"===b.source?w.reject(new pn(Kt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(Z)},error:function(Z){return w.reject(Z)}}),T=new sS(xp(m.path),C,{includeMetadataChanges:!0,uo:!0});return iS(l,T)},u.next=3,a_(i);case 3:return u.t1=u.sent,u.t2=i.asyncQueue,u.t3=s,u.t4=n,u.t5=r,u.abrupt("return",(0,u.t0)(u.t1,u.t2,u.t3,u.t4,u.t5));case 9:case"end":return u.stop()}},a)}))),r.promise}function FN(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new eu;return i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function a(){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.t0=function(l,f,m,b,w){var C=new fw({next:function(Z){f.enqueueAndForget(function(){return Am(l,T)}),Z.fromCache&&"server"===b.source?w.reject(new pn(Kt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(Z)},error:function(Z){return w.reject(Z)}}),T=new sS(m,C,{includeMetadataChanges:!0,uo:!0});return iS(l,T)},u.next=3,a_(i);case 3:return u.t1=u.sent,u.t2=i.asyncQueue,u.t3=s,u.t4=n,u.t5=r,u.abrupt("return",(0,u.t0)(u.t1,u.t2,u.t3,u.t4,u.t5));case 9:case"end":return u.stop()}},a)}))),r.promise}var ZN=function i(s,n,r,a,o,u,l,f){(0,M.Z)(this,i),this.databaseId=s,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=l,this.useFetchStreams=f},pw=function(){function i(s,n){(0,M.Z)(this,i),this.projectId=s,this.database=n||"(default)"}return(0,R.Z)(i,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(n){return n instanceof i&&n.projectId===this.projectId&&n.database===this.database}}]),i}(),aI=new Map;function CS(i,s,n){if(!n)throw new pn(Kt.INVALID_ARGUMENT,"Function ".concat(i,"() cannot be called with an empty ").concat(s,"."))}function BN(i,s,n,r){if(!0===s&&!0===r)throw new pn(Kt.INVALID_ARGUMENT,"".concat(i," and ").concat(n," cannot be used together."))}function DS(i){if(!Fr.isDocumentKey(i))throw new pn(Kt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(i," has ").concat(i.length,"."))}function sI(i){if(Fr.isDocumentKey(i))throw new pn(Kt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(i," has ").concat(i.length,"."))}function vw(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i="".concat(i.substring(0,20),"...")),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";var s=(n=i).constructor?n.constructor.name:null;return s?"a custom ".concat(s," object"):"an object"}var n;return"function"==typeof i?"a function":Sr()}function va(i,s){if("_delegate"in i&&(i=i._delegate),!(i instanceof s)){if(s.name===i.constructor.name)throw new pn(Kt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vw(i);throw new pn(Kt.INVALID_ARGUMENT,"Expected type '".concat(s.name,"', but it was: ").concat(n))}return i}function oI(i,s){if(s<=0)throw new pn(Kt.INVALID_ARGUMENT,"Function ".concat(i,"() requires a positive number, but it was: ").concat(s,"."))}var uI=function(){function i(s){var n;if((0,M.Z)(this,i),void 0===s.host){if(void 0!==s.ssl)throw new pn(Kt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=s.host,this.ssl=null===(n=s.ssl)||void 0===n||n;if(this.credentials=s.credentials,this.ignoreUndefinedProperties=!!s.ignoreUndefinedProperties,void 0===s.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==s.cacheSizeBytes&&s.cacheSizeBytes<1048576)throw new pn(Kt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=s.cacheSizeBytes}this.experimentalForceLongPolling=!!s.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!s.experimentalAutoDetectLongPolling,this.useFetchStreams=!!s.useFetchStreams,BN("experimentalForceLongPolling",s.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",s.experimentalAutoDetectLongPolling)}return(0,R.Z)(i,[{key:"isEqual",value:function(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}]),i}(),Pm=function(){function i(s,n){(0,M.Z)(this,i),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uI({}),this._settingsFrozen=!1,s instanceof pw?this._databaseId=s:(this._app=s,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new pn(Kt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pw(r.options.projectId)}(s))}return(0,R.Z)(i,[{key:"app",get:function(){if(!this._app)throw new pn(Kt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(n){if(this._settingsFrozen)throw new pn(Kt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uI(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new yL;switch(r.type){case"gapi":var a=r.client;return Jr(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new wb(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new pn(Kt.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return(r=aI.get(this))&&(Rn("ComponentProvider","Removing Datastore"),aI.delete(this),r.terminate()),Promise.resolve();var r}}]),i}();function UN(i,s,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(i=va(i,Pm))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==s&&zv("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},o),{host:"".concat(s,":").concat(n),ssl:!1})),r.mockUserToken){var u,l;if("string"==typeof r.mockUserToken)u=r.mockUserToken,l=Jo.MOCK_USER;else{u=(0,Re.Sg)(r.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);var f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new pn(Kt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Jo(f)}i._credentials=new _L(new Hx(u,l))}}var Vs=function(){function i(s,n,r){(0,M.Z)(this,i),this.converter=n,this._key=r,this.type="document",this.firestore=s}return(0,R.Z)(i,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Np(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(n){return new i(this.firestore,n,this._key)}}]),i}(),sc=function(){function i(s,n,r){(0,M.Z)(this,i),this.converter=n,this._query=r,this.type="query",this.firestore=s}return(0,R.Z)(i,[{key:"withConverter",value:function(n){return new i(this.firestore,n,this._query)}}]),i}(),Np=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a,xp(o)))._path=o,u.type="collection",u}return(0,R.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var a=this._path.popLast();return a.isEmpty()?null:new Vs(this.firestore,null,new Fr(a))}},{key:"withConverter",value:function(a){return new n(this.firestore,a,this._path)}}]),n}(sc);function VN(i,s){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(i=(0,Re.m9)(i),CS("collection","path",s),i instanceof Pm){var o=yi.fromString.apply(yi,[s].concat(r));return sI(o),new Np(i,null,o)}if(!(i instanceof Vs||i instanceof Np))throw new pn(Kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=i._path.child(yi.fromString.apply(yi,[s].concat(r)));return sI(u),new Np(i.firestore,null,u)}function mw(i,s){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(i=(0,Re.m9)(i),1===arguments.length&&(s=cd.I()),CS("doc","path",s),i instanceof Pm){var o=yi.fromString.apply(yi,[s].concat(r));return DS(o),new Vs(i,null,new Fr(o))}if(!(i instanceof Vs||i instanceof Np))throw new pn(Kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var u=i._path.child(yi.fromString.apply(yi,[s].concat(r)));return DS(u),new Vs(i.firestore,i instanceof Np?i.converter:null,new Fr(u))}function lI(i,s){return i=(0,Re.m9)(i),s=(0,Re.m9)(s),(i instanceof Vs||i instanceof Np)&&(s instanceof Vs||s instanceof Np)&&i.firestore===s.firestore&&i.path===s.path&&i.converter===s.converter}function cI(i,s){return i=(0,Re.m9)(i),s=(0,Re.m9)(s),i instanceof sc&&s instanceof sc&&i.firestore===s.firestore&&Sy(i._query,s._query)&&i.converter===s.converter}var zN=function(){function i(){var s=this;(0,M.Z)(this,i),this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new bm(this,"async_queue_retry"),this.Ea=function(){var r=HD();r&&Rn("AsyncQueue","Visibility state changed to "+r.visibilityState),s.rr.tr()};var n=HD();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}return(0,R.Z)(i,[{key:"isShuttingDown",get:function(){return this.wa}},{key:"enqueueAndForget",value:function(n){this.enqueue(n)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(n){this.Ta(),this.Ia(n)}},{key:"enterRestrictedMode",value:function(n){if(!this.wa){this.wa=!0,this.ya=n||!1;var r=HD();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}},{key:"enqueue",value:function(n){var r=this;if(this.Ta(),this.wa)return new Promise(function(){});var a=new eu;return this.Ia(function(){return r.wa&&r.ya?Promise.resolve():(n().then(a.resolve,a.reject),a.promise)}).then(function(){return a.promise})}},{key:"enqueueRetryable",value:function(n){var r=this;this.enqueueAndForget(function(){return r.da.push(n),r.Aa()})}},{key:"Aa",value:(s=(0,Qt.Z)(Ke().mark(function r(){var a=this;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(0===this.da.length){u.next=14;break}return u.prev=1,u.next=4,this.da[0]();case 4:this.da.shift(),this.rr.reset(),u.next=13;break;case 8:if(u.prev=8,u.t0=u.catch(1),hm(u.t0)){u.next=12;break}throw u.t0;case 12:Rn("AsyncQueue","Operation failed with retryable error: "+u.t0);case 13:this.da.length>0&&this.rr.Xi(function(){return a.Aa()});case 14:case"end":return u.stop()}},r,this,[[1,8]])})),function(){return s.apply(this,arguments)})},{key:"Ia",value:function(n){var r=this,a=this.fa.then(function(){return r.ga=!0,n().catch(function(o){throw r.ma=o,r.ga=!1,ao("INTERNAL UNHANDLED ERROR: ",(l=(u=o).message||"",u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l)),o;var u,l}).then(function(o){return r.ga=!1,o})});return this.fa=a,a}},{key:"enqueueAfterDelay",value:function(n,r,a){var o=this;this.Ta(),this.pa.indexOf(n)>-1&&(r=0);var u=bN.createAndSchedule(this,n,r,a,function(l){return o.Ra(l)});return this._a.push(u),u}},{key:"Ta",value:function(){this.ma&&Sr()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ba",value:function(){var s=(0,Qt.Z)(Ke().mark(function r(){var a;return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=this.fa,u.next=3,a;case 3:if(a!==this.fa){u.next=0;break}case 4:case"end":return u.stop()}},r,this)}));return function(){return s.apply(this,arguments)}}()},{key:"Pa",value:function(n){var a,r=(0,Ve.Z)(this._a);try{for(r.s();!(a=r.n()).done;)if(a.value.timerId===n)return!0}catch(u){r.e(u)}finally{r.f()}return!1}},{key:"va",value:function(n){var r=this;return this.ba().then(function(){r._a.sort(function(l,f){return l.targetTimeMs-f.targetTimeMs});var o,a=(0,Ve.Z)(r._a);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(u.skipDelay(),"all"!==n&&u.timerId===n)break}}catch(l){a.e(l)}finally{a.f()}return r.ba()})}},{key:"Va",value:function(n){this.pa.push(n)}},{key:"Ra",value:function(n){var r=this._a.indexOf(n);this._a.splice(r,1)}}]),i;var s}();function AS(i){return function(s,n){if("object"!=typeof s||null===s)return!1;var o,r=s,a=(0,Ve.Z)(["next","error","complete"]);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(u in r&&"function"==typeof r[u])return!0}}catch(l){a.e(l)}finally{a.f()}return!1}(i)}var HN=function(){function i(){(0,M.Z)(this,i),this._progressObserver={},this._taskCompletionResolver=new eu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,R.Z)(i,[{key:"onProgress",value:function(n,r,a){this._progressObserver={next:n,error:r,complete:a}}},{key:"catch",value:function(n){return this._taskCompletionResolver.promise.catch(n)}},{key:"then",value:function(n,r){return this._taskCompletionResolver.promise.then(n,r)}},{key:"_completeWith",value:function(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}},{key:"_failWith",value:function(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}},{key:"_updateProgress",value:function(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}]),i}(),Ts=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="firestore",o._queue=new zN,o._persistenceKey="name"in r?r.name:"[DEFAULT]",o}return(0,R.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||TS(this),this._firestoreClient.terminate()}}]),n}(Pm);function Ji(i){return i._firestoreClient||TS(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function TS(i){var s,o,l,n=i._freezeSettings(),r=(o=(null===(s=i._app)||void 0===s?void 0:s.options.appId)||"",new ZN(i._databaseId,o,i._persistenceKey,(l=n).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams));i._firestoreClient=new rz(i._credentials,i._queue,r)}function fI(i,s,n){var r=new eu;return i.asyncQueue.enqueue((0,Qt.Z)(Ke().mark(function a(){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Bu(i,n);case 3:return u.next=5,eI(i,s);case 5:r.resolve(),u.next=13;break;case 8:if(u.prev=8,u.t0=u.catch(0),"FirebaseError"===(l=u.t0).name?l.code===Kt.FAILED_PRECONDITION||l.code===Kt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code){u.next=12;break}throw u.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u.t0),r.reject(u.t0);case 13:case"end":return u.stop()}var l},a,null,[[0,8]])}))).then(function(){return r.promise})}function gI(i){if(i._initialized||i._terminated)throw new pn(Kt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xd=function(){function i(){(0,M.Z)(this,i);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new pn(Kt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zu(n)}return(0,R.Z)(i,[{key:"isEqual",value:function(n){return this._internalPath.isEqual(n._internalPath)}}]),i}(),Md=function(){function i(s){(0,M.Z)(this,i),this._byteString=s}return(0,R.Z)(i,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(n){return this._byteString.isEqual(n._byteString)}}],[{key:"fromBase64String",value:function(n){try{return new i(nu.fromBase64String(n))}catch(r){throw new pn(Kt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}},{key:"fromUint8Array",value:function(n){return new i(nu.fromUint8Array(n))}}]),i}(),Dc=function i(s){(0,M.Z)(this,i),this._methodName=s},MS=function(){function i(s,n){if((0,M.Z)(this,i),!isFinite(s)||s<-90||s>90)throw new pn(Kt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+s);if(!isFinite(n)||n<-180||n>180)throw new pn(Kt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=s,this._long=n}return(0,R.Z)(i,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(n){return this._lat===n._lat&&this._long===n._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(n){return Si(this._lat,n._lat)||Si(this._long,n._long)}}]),i}(),yI=/^__.*__$/,WN=function(){function i(s,n,r){(0,M.Z)(this,i),this.data=s,this.fieldMask=n,this.fieldTransforms=r}return(0,R.Z)(i,[{key:"toMutation",value:function(n,r){return null!==this.fieldMask?new vf(n,this.data,this.fieldMask,r,this.fieldTransforms):new Ay(n,this.data,r,this.fieldTransforms)}}]),i}(),qN=function(){function i(s,n,r){(0,M.Z)(this,i),this.data=s,this.fieldMask=n,this.fieldTransforms=r}return(0,R.Z)(i,[{key:"toMutation",value:function(n,r){return new vf(n,this.data,this.fieldMask,r,this.fieldTransforms)}}]),i}();function IS(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sr()}}var _I=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.settings=s,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=a,void 0===o&&this.Sa(),this.fieldTransforms=o||[],this.fieldMask=u||[]}return(0,R.Z)(i,[{key:"path",get:function(){return this.settings.path}},{key:"Da",get:function(){return this.settings.Da}},{key:"Ca",value:function(n){return new i(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Na",value:function(n){var r,a=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:a,xa:!1});return o.ka(n),o}},{key:"$a",value:function(n){var r,a=null===(r=this.path)||void 0===r?void 0:r.child(n),o=this.Ca({path:a,xa:!1});return o.Sa(),o}},{key:"Oa",value:function(n){return this.Ca({path:void 0,xa:!0})}},{key:"Fa",value:function(n){return o_(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}},{key:"contains",value:function(n){return void 0!==this.fieldMask.find(function(r){return n.isPrefixOf(r)})||void 0!==this.fieldTransforms.find(function(r){return n.isPrefixOf(r.field)})}},{key:"Sa",value:function(){if(this.path)for(var n=0;n<this.path.length;n++)this.ka(this.path.get(n))}},{key:"ka",value:function(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(IS(this.Da)&&yI.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}]),i}(),PS=function(){function i(s,n,r){(0,M.Z)(this,i),this.databaseId=s,this.ignoreUndefinedProperties=n,this.N=r||Wy(s)}return(0,R.Z)(i,[{key:"Ba",value:function(n,r,a){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _I({Da:n,methodName:r,La:a,path:Zu.emptyPath(),xa:!1,Ma:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),i}();function Id(i){var s=i._freezeSettings(),n=Wy(i._databaseId);return new PS(i._databaseId,!!s.ignoreUndefinedProperties,n)}function gw(i,s,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=i.Ba(o.merge||o.mergeFields?2:0,s,n,a);yw("Data must be an object, but it was:",u,r);var f,m,l=LS(r,u);if(o.merge)f=new zc(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){var C,b=[],w=(0,Ve.Z)(o.mergeFields);try{for(w.s();!(C=w.n()).done;){var T=C.value,I=_w(s,T,n);if(!u.contains(I))throw new pn(Kt.INVALID_ARGUMENT,"Field '".concat(I,"' is specified in your field mask but missing from your input data."));BS(b,I)||b.push(I)}}catch(Z){w.e(Z)}finally{w.f()}f=new zc(b),m=u.fieldTransforms.filter(function(Z){return f.covers(Z.field)})}else f=null,m=u.fieldTransforms;return new WN(new rc(l),f,m)}var FS=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"_toFieldTransform",value:function(a){if(2!==a.Da)throw a.Fa("".concat(this._methodName,1===a.Da?"() can only appear at the top level of your update data":"() cannot be used with set() unless you pass {merge:true}"));return a.fieldMask.push(a.path),null}},{key:"isEqual",value:function(a){return a instanceof n}}]),n}(Dc);function bI(i,s,n){return new _I({Da:3,La:s.settings.La,methodName:i._methodName,xa:n},s.databaseId,s.N,s.ignoreUndefinedProperties)}var YN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"_toFieldTransform",value:function(a){return new nm(a.path,new vd)}},{key:"isEqual",value:function(a){return a instanceof n}}]),n}(Dc),KN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).Ua=a,o}return(0,R.Z)(n,[{key:"_toFieldTransform",value:function(a){var o=bI(this,a,!0),u=this.Ua.map(function(f){return Pd(f,o)}),l=new pf(u);return new nm(a.path,l)}},{key:"isEqual",value:function(a){return this===a}}]),n}(Dc),$N=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).Ua=a,o}return(0,R.Z)(n,[{key:"_toFieldTransform",value:function(a){var o=bI(this,a,!0),u=this.Ua.map(function(f){return Pd(f,o)}),l=new tm(u);return new nm(a.path,l)}},{key:"isEqual",value:function(a){return this===a}}]),n}(Dc),XN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).qa=a,o}return(0,R.Z)(n,[{key:"_toFieldTransform",value:function(a){var o=new md(a.N,em(a.N,this.qa));return new nm(a.path,o)}},{key:"isEqual",value:function(a){return this===a}}]),n}(Dc);function RS(i,s,n,r){var a=i.Ba(1,s,n);yw("Data must be an object, but it was:",a,r);var o=[],u=rc.empty();Ys(r,function(f,m){var b=ZS(s,f,n);m=(0,Re.m9)(m);var w=a.$a(b);if(m instanceof FS)o.push(b);else{var C=Pd(m,w);null!=C&&(o.push(b),u.set(b,C))}});var l=new zc(o);return new qN(u,l,a.fieldTransforms)}function OS(i,s,n,r,a,o){var u=i.Ba(1,s,n),l=[_w(s,r,n)],f=[a];if(o.length%2!=0)throw new pn(Kt.INVALID_ARGUMENT,"Function ".concat(s,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var m=0;m<o.length;m+=2)l.push(_w(s,o[m])),f.push(o[m+1]);for(var b=[],w=rc.empty(),C=l.length-1;C>=0;--C)if(!BS(b,l[C])){var T=l[C],I=f[C];I=(0,Re.m9)(I);var Z=u.$a(T);if(I instanceof FS)b.push(T);else{var Y=Pd(I,Z);null!=Y&&(b.push(T),w.set(T,Y))}}var V=new zc(b);return new qN(w,V,u.fieldTransforms)}function Fm(i,s,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Pd(n,i.Ba(r?4:3,s))}function Pd(i,s){if(NS(i=(0,Re.m9)(i)))return yw("Unsupported field value:",s,i),LS(i,s);if(i instanceof Dc)return function(n,r){if(!IS(r.Da))throw r.Fa("".concat(n._methodName,"() can only be used with update() and set()"));if(!r.path)throw r.Fa("".concat(n._methodName,"() is not currently supported inside arrays"));var a=n._toFieldTransform(r);a&&r.fieldTransforms.push(a)}(i,s),null;if(void 0===i&&s.ignoreUndefinedProperties)return null;if(s.path&&s.fieldMask.push(s.path),i instanceof Array){if(s.settings.xa&&4!==s.Da)throw s.Fa("Nested arrays are not supported");return function(n,r){var l,a=[],o=0,u=(0,Ve.Z)(n);try{for(u.s();!(l=u.n()).done;){var m=Pd(l.value,r.Oa(o));null==m&&(m={nullValue:"NULL_VALUE"}),a.push(m),o++}}catch(b){u.e(b)}finally{u.f()}return{arrayValue:{values:a}}}(i,s)}return function(n,r){if(null===(n=(0,Re.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return em(r.N,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){var a=Nu.fromDate(n);return{timestampValue:al(r.N,a)}}if(n instanceof Nu){var o=new Nu(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:al(r.N,o)}}if(n instanceof MS)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Md)return{bytesValue:kc(r.N,n._byteString)};if(n instanceof Vs){var u=r.databaseId,l=n.firestore._databaseId;if(!l.isEqual(u))throw r.Fa("Document reference is for database ".concat(l.projectId,"/").concat(l.database," but should be for database ").concat(u.projectId,"/").concat(u.database));return{referenceValue:oD(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Fa("Unsupported field value: ".concat(vw(n)))}(i,s)}function LS(i,s){var n={};return hd(i)?s.path&&s.path.length>0&&s.fieldMask.push(s.path):Ys(i,function(r,a){var o=Pd(a,s.Na(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function NS(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Nu||i instanceof MS||i instanceof Md||i instanceof Vs||i instanceof Dc)}function yw(i,s,n){if(!NS(n)||"object"!=typeof(a=n)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){var r=vw(n);throw s.Fa("an object"===r?i+" a custom object":i+" "+r)}var a}function _w(i,s,n){if((s=(0,Re.m9)(s))instanceof xd)return s._internalPath;if("string"==typeof s)return ZS(i,s);throw o_("Field path arguments must be of type string or FieldPath.",i,!1,void 0,n)}var wI=new RegExp("[~\\*/\\[\\]]");function ZS(i,s,n){if(s.search(wI)>=0)throw o_("Invalid field path (".concat(s,"). Paths must not contain '~', '*', '/', '[', or ']'"),i,!1,void 0,n);try{return(0,Ok.Z)(xd,(0,Kr.Z)(s.split(".")))._internalPath}catch(r){throw o_("Invalid field path (".concat(s,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),i,!1,void 0,n)}}function o_(i,s,n,r,a){var o=r&&!r.isEmpty(),u=void 0!==a,l="Function ".concat(s,"() called with invalid data");n&&(l+=" (via `toFirestore()`)"),l+=". ";var f="";return(o||u)&&(f+=" (found",o&&(f+=" in field ".concat(r)),u&&(f+=" in document ".concat(a)),f+=")"),new pn(Kt.INVALID_ARGUMENT,l+i+f)}function BS(i,s){return i.some(function(n){return n.isEqual(s)})}var u_=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this._firestore=s,this._userDataWriter=n,this._key=r,this._document=a,this._converter=o}return(0,R.Z)(i,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Vs(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var n=new QN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(n){if(this._document){var r=this._document.data.field(bw("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}]),i}(),QN=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"data",value:function(){return(0,Se.Z)((0,ye.Z)(n.prototype),"data",this).call(this)}}]),n}(u_);function bw(i,s){return"string"==typeof s?ZS(i,s):s instanceof xd?s._internalPath:s._delegate._internalPath}var Xc=function(){function i(s,n){(0,M.Z)(this,i),this.hasPendingWrites=s,this.fromCache=n}return(0,R.Z)(i,[{key:"isEqual",value:function(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}]),i}(),oc=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f){var m;return(0,M.Z)(this,n),(m=s.call(this,r,a,o,u,f))._firestore=r,m._firestoreImpl=r,m.metadata=l,m}return(0,R.Z)(n,[{key:"exists",value:function(){return(0,Se.Z)((0,ye.Z)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var o=new l_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(o,a)}return this._userDataWriter.convertValue(this._document.data.value,a.serverTimestamps)}}},{key:"get",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var u=this._document.data.field(bw("DocumentSnapshot.get",a));if(null!==u)return this._userDataWriter.convertValue(u,o.serverTimestamps)}}}]),n}(u_),l_=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"data",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Se.Z)((0,ye.Z)(n.prototype),"data",this).call(this,a)}}]),n}(oc),Oh=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._firestore=s,this._userDataWriter=n,this._snapshot=a,this.metadata=new Xc(a.hasPendingWrites,a.fromCache),this.query=r}return(0,R.Z)(i,[{key:"docs",get:function(){var n=[];return this.forEach(function(r){return n.push(r)}),n}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(n,r){var a=this;this._snapshot.docs.forEach(function(o){n.call(r,new l_(a._firestore,a._userDataWriter,o.key,o,new Xc(a._snapshot.mutatedKeys.has(o.key),a._snapshot.fromCache),a.query.converter))})}},{key:"docChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new pn(Kt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){var u=0;return a._snapshot.docChanges.map(function(f){return{type:"added",doc:new l_(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Xc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:u++}})}var l=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(function(f){return o||3!==f.type}).map(function(f){var m=new l_(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Xc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter),b=-1,w=-1;return 0!==f.type&&(b=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(w=(l=l.add(f.doc)).indexOf(f.doc.key)),{type:Lh(f.type),doc:m,oldIndex:b,newIndex:w}})}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}]),i}();function Lh(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sr()}}function EI(i,s){return i instanceof oc&&s instanceof oc?i._firestore===s._firestore&&i._key.isEqual(s._key)&&(null===i._document?null===s._document:i._document.isEqual(s._document))&&i._converter===s._converter:i instanceof Oh&&s instanceof Oh&&i._firestore===s._firestore&&cI(i.query,s.query)&&i.metadata.isEqual(s.metadata)&&i._snapshot.isEqual(s._snapshot)}function ww(i){if(Cy(i)&&0===i.explicitOrderBy.length)throw new pn(Kt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var c_=function i(){(0,M.Z)(this,i)};function Fd(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];for(var a=0,o=n;a<o.length;a++){var u=o[a];i=u._apply(i)}return i}var lz=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).Ka=r,u.ja=a,u.Qa=o,u.type="where",u}return(0,R.Z)(n,[{key:"_apply",value:function(a){var l,m,o=Id(a.firestore),u=function(l,f,m,b,w,C,T){var I;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new pn(Kt.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(C,"' queries on FieldPath.documentId()."));if("in"===C||"not-in"===C){GS(T,C);var V,Z=[],Y=(0,Ve.Z)(T);try{for(Y.s();!(V=Y.n()).done;)Z.push(HS(b,l,V.value))}catch(fe){Y.e(fe)}finally{Y.f()}I={arrayValue:{values:Z}}}else I=HS(b,l,T)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||GS(T,C),I=Fm(m,"where",T,"in"===C||"not-in"===C);var se=wc.create(w,C,I);return function(fe,ve){if(ve.v()){var me=VC(fe);if(null!==me&&!me.isEqual(ve.field))throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(me.toString(),"' and '").concat(ve.field.toString(),"'"));var pe=UC(fe);null!==pe&&AI(0,ve.field,pe)}var ke=function(je,qe){var ct,Ze=(0,Ve.Z)(je.filters);try{for(Ze.s();!(ct=Ze.n()).done;){var rt=ct.value;if(qe.indexOf(rt.op)>=0)return rt.op}}catch(ht){Ze.e(ht)}finally{Ze.f()}return null}(fe,function(je){switch(je){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ve.op));if(null!==ke)throw new pn(Kt.INVALID_ARGUMENT,ke===ve.op?"Invalid query. You cannot use more than one '".concat(ve.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(ve.op.toString(),"' filters with '").concat(ke.toString(),"' filters."))}(l,se),se}(a._query,0,o,a.firestore._databaseId,this.Ka,this.ja,this.Qa);return new sc(a.firestore,a.converter,(m=(l=a._query).filters.concat([u]),new df(l.path,l.collectionGroup,l.explicitOrderBy.slice(),m,l.limit,l.limitType,l.startAt,l.endAt)))}}]),n}(c_),e2=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this)).Ka=r,o.Wa=a,o.type="orderBy",o}return(0,R.Z)(n,[{key:"_apply",value:function(a){var u,f,o=function(u,l,f){if(null!==u.startAt)throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var m=new Qv(l,f);return function(b,w){if(null===UC(b)){var C=VC(b);null!==C&&AI(0,C,w.field)}}(u,m),m}(a._query,this.Ka,this.Wa);return new sc(a.firestore,a.converter,(f=(u=a._query).explicitOrderBy.concat([o]),new df(u.path,u.collectionGroup,f,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)))}}]),n}(c_),CI=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).type=r,u.Ga=a,u.za=o,u}return(0,R.Z)(n,[{key:"_apply",value:function(a){return new sc(a.firestore,a.converter,HC(a._query,this.Ga,this.za))}}]),n}(c_),DI=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).type=r,u.Ha=a,u.Ja=o,u}return(0,R.Z)(n,[{key:"_apply",value:function(a){var u,l,o=zS(a,this.type,this.Ha,this.Ja);return new sc(a.firestore,a.converter,(l=o,new df((u=a._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)))}}]),n}(c_);function r2(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new DI("startAt",s,!0)}function a2(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new DI("startAfter",s,!1)}var US=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).type=r,u.Ha=a,u.Ja=o,u}return(0,R.Z)(n,[{key:"_apply",value:function(a){var u,l,o=zS(a,this.type,this.Ha,this.Ja);return new sc(a.firestore,a.converter,(l=o,new df((u=a._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)))}}]),n}(c_);function VS(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new US("endBefore",s,!0)}function SI(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new US("endAt",s,!1)}function zS(i,s,n,r){if(n[0]=(0,Re.m9)(n[0]),n[0]instanceof u_)return function(o,u,l,f,m){if(!f)throw new pn(Kt.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(l,"()."));var C,b=[],w=(0,Ve.Z)(Dy(o));try{for(w.s();!(C=w.n()).done;){var T=C.value;if(T.field.isKeyField())b.push(Ey(u,f.key));else{var I=f.data.field(T.field);if(fd(I))throw new pn(Kt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){var Z=T.field.canonicalString();throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(Z,"' (used as the orderBy) does not exist."))}b.push(I)}}}catch(Y){w.e(Y)}finally{w.f()}return new Xv(b,m)}(i._query,i.firestore._databaseId,s,n[0]._document,r);var a=Id(i.firestore);return function(o,u,l,f,m,b){var w=o.explicitOrderBy;if(m.length>w.length)throw new pn(Kt.INVALID_ARGUMENT,"Too many arguments provided to ".concat(f,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var C=[],T=0;T<m.length;T++){var I=m[T];if(w[T].field.isKeyField()){if("string"!=typeof I)throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(f,"(), but got a ").concat(typeof I));if(!zC(o)&&-1!==I.indexOf("/"))throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(f,"() must be a plain document ID, but '").concat(I,"' contains a slash."));var Z=o.path.child(yi.fromString(I));if(!Fr.isDocumentKey(Z))throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(f,"() must result in a valid document path, but '").concat(Z,"' is not because it contains an odd number of segments."));var Y=new Fr(Z);C.push(Ey(u,Y))}else{var V=Fm(l,f,I);C.push(V)}}return new Xv(C,b)}(i._query,i.firestore._databaseId,a,s,n,r)}function HS(i,s,n){if("string"==typeof(n=(0,Re.m9)(n))){if(""===n)throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!zC(s)&&-1!==n.indexOf("/"))throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=s.path.child(yi.fromString(n));if(!Fr.isDocumentKey(r))throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ey(i,new Fr(r))}if(n instanceof Vs)return Ey(i,n._key);throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(vw(n),"."))}function GS(i,s){if(!Array.isArray(i)||0===i.length)throw new pn(Kt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(s.toString(),"' filters."));if(i.length>10)throw new pn(Kt.INVALID_ARGUMENT,"Invalid Query. '".concat(s.toString(),"' filters support a maximum of 10 elements in the value array."))}function AI(i,s,n){if(!n.isEqual(s))throw new pn(Kt.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(s.toString(),"' and so you must also use '").concat(s.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ew=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"convertValue",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pd(n)){case 0:return null;case 1:return n.booleanValue;case 2:return ms(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Hc(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw Sr()}}},{key:"convertObject",value:function(n,r){var a=this,o={};return Ys(n.fields,function(u,l){o[u]=a.convertValue(l,r)}),o}},{key:"convertGeoPoint",value:function(n){return new MS(ms(n.latitude),ms(n.longitude))}},{key:"convertArray",value:function(n,r){var a=this;return(n.values||[]).map(function(o){return a.convertValue(o,r)})}},{key:"convertServerTimestamp",value:function(n,r){switch(r){case"previous":var a=SC(n);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(qv(n));default:return null}}},{key:"convertTimestamp",value:function(n){var r=nc(n);return new Nu(r.seconds,r.nanos)}},{key:"convertDocumentKey",value:function(n,r){var a=yi.fromString(n);Jr(dM(a));var o=new pw(a.get(1),a.get(3)),u=new Fr(a.popFirst(5));return o.isEqual(r)||ao("Document ".concat(u," contains a document reference within a different database (").concat(o.projectId,"/").concat(o.database,") which is not supported. It will be treated as a reference in the current database (").concat(r.projectId,"/").concat(r.database,") instead.")),u}}]),i}();function h_(i,s,n){return i?n&&(n.merge||n.mergeFields)?i.toFirestore(s,n):i.toFirestore(s):s}var s2=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).firestore=r,a}return(0,R.Z)(n,[{key:"convertBytes",value:function(a){return new Md(a)}},{key:"convertReference",value:function(a){var o=this.convertDocumentKey(a,this.firestore._databaseId);return new Vs(this.firestore,null,o)}}]),n}(Ew),jS=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Id(s)}return(0,R.Z)(i,[{key:"set",value:function(n,r,a){this._verifyNotCommitted();var o=Rd(n,this._firestore),u=h_(o.converter,r,a),l=gw(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,a);return this._mutations.push(l.toMutation(o._key,ru.none())),this}},{key:"update",value:function(n,r,a){this._verifyNotCommitted();for(var u,o=Rd(n,this._firestore),l=arguments.length,f=new Array(l>3?l-3:0),m=3;m<l;m++)f[m-3]=arguments[m];return u="string"==typeof(r=(0,Re.m9)(r))||r instanceof xd?OS(this._dataReader,"WriteBatch.update",o._key,r,a,f):RS(this._dataReader,"WriteBatch.update",o._key,r),this._mutations.push(u.toMutation(o._key,ru.exists(!0))),this}},{key:"delete",value:function(n){this._verifyNotCommitted();var r=Rd(n,this._firestore);return this._mutations=this._mutations.concat(new am(r._key,ru.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new pn(Kt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),i}();function Rd(i,s){if((i=(0,Re.m9)(i)).firestore!==s)throw new pn(Kt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var oo=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).firestore=r,a}return(0,R.Z)(n,[{key:"convertBytes",value:function(a){return new Md(a)}},{key:"convertReference",value:function(a){var o=this.convertDocumentKey(a,this.firestore._databaseId);return new Vs(this.firestore,null,o)}}]),n}(Ew);function TI(i,s,n){i=va(i,Vs);var r=va(i.firestore,Ts),a=h_(i.converter,s,n);return Od(r,[gw(Id(r),"setDoc",i._key,a,null!==i.converter,n).toMutation(i._key,ru.none())])}function kw(i,s,n){i=va(i,Vs);for(var r=va(i.firestore,Ts),a=Id(r),u=arguments.length,l=new Array(u>3?u-3:0),f=3;f<u;f++)l[f-3]=arguments[f];return Od(r,[("string"==typeof(s=(0,Re.m9)(s))||s instanceof xd?OS(a,"updateDoc",i._key,s,n,l):RS(a,"updateDoc",i._key,s)).toMutation(i._key,ru.exists(!0))])}function MI(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];var a,o,u;i=(0,Re.m9)(i);var l={includeMetadataChanges:!1},f=0;"object"!=typeof n[f]||AS(n[f])||(l=n[f],f++);var w,C,T,Y,V,W,fe,ve,m={includeMetadataChanges:l.includeMetadataChanges};if(AS(n[f])){var b=n[f];n[f]=null===(a=b.next)||void 0===a?void 0:a.bind(b),n[f+1]=null===(o=b.error)||void 0===o?void 0:o.bind(b),n[f+2]=null===(u=b.complete)||void 0===u?void 0:u.bind(b)}if(i instanceof Vs)C=va(i.firestore,Ts),T=xp(i._key.path),w={next:function(V){n[f]&&n[f](Cw(C,i,V))},error:n[f+1],complete:n[f+2]};else{var I=va(i,sc);C=va(I.firestore,Ts),T=I._query;var Z=new oo(C);w={next:function(V){n[f]&&n[f](new Oh(C,Z,I,V))},error:n[f+1],complete:n[f+2]},ww(i._query)}return Y=Ji(C),V=T,W=m,fe=new fw(w),ve=new sS(V,fe,W),Y.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function me(){return Ke().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.t0=iS,ke.next=3,a_(Y);case 3:return ke.t1=ke.sent,ke.t2=ve,ke.abrupt("return",(0,ke.t0)(ke.t1,ke.t2));case 6:case"end":return ke.stop()}},me)}))),function(){fe.Xo(),Y.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function me(){return Ke().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return ke.t0=Am,ke.next=3,a_(Y);case 3:return ke.t1=ke.sent,ke.t2=ve,ke.abrupt("return",(0,ke.t0)(ke.t1,ke.t2));case 6:case"end":return ke.stop()}},me)})))}}function Od(i,s){return n=Ji(i),r=s,a=new eu,n.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function o(){return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=Xy,l.next=3,kS(n);case 3:return l.t1=l.sent,l.t2=r,l.t3=a,l.abrupt("return",(0,l.t0)(l.t1,l.t2,l.t3));case 7:case"end":return l.stop()}},o)}))),a.promise;var n,r,a}function Cw(i,s,n){var r=n.docs.get(s._key),a=new oo(i);return new oc(i,a,s._key,r,new Xc(n.hasPendingWrites,n.fromCache),s.converter)}var II=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a))._firestore=r,o}return(0,R.Z)(n,[{key:"get",value:function(a){var o=this,u=Rd(a,this._firestore),l=new oo(this._firestore);return(0,Se.Z)((0,ye.Z)(n.prototype),"get",this).call(this,a).then(function(f){return new oc(o._firestore,l,u._key,f._document,new Xc(!1,!1),u.converter)})}}]),n}(function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._transaction=n,this._dataReader=Id(s)}return(0,R.Z)(i,[{key:"get",value:function(n){var r=this,a=Rd(n,this._firestore),o=new s2(this._firestore);return this._transaction.lookup([a._key]).then(function(u){if(!u||1!==u.length)return Sr();var l=u[0];if(l.isFoundDocument())return new u_(r._firestore,o,l.key,l,a.converter);if(l.isNoDocument())return new u_(r._firestore,o,a._key,null,a.converter);throw Sr()})}},{key:"set",value:function(n,r,a){var o=Rd(n,this._firestore),u=h_(o.converter,r,a),l=gw(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,a);return this._transaction.set(o._key,l),this}},{key:"update",value:function(n,r,a){for(var u,o=Rd(n,this._firestore),l=arguments.length,f=new Array(l>3?l-3:0),m=3;m<l;m++)f[m-3]=arguments[m];return u="string"==typeof(r=(0,Re.m9)(r))||r instanceof xd?OS(this._dataReader,"Transaction.update",o._key,r,a,f):RS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,u),this}},{key:"delete",value:function(n){var r=Rd(n,this._firestore);return this._transaction.delete(r._key),this}}]),i}());function PI(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new KN("arrayUnion",s)}function f2(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return new $N("arrayRemove",s)}function d_(i,s){if(void 0===s)return{merge:!1};if(void 0!==s.mergeFields&&void 0!==s.merge)throw new pn("invalid-argument","Invalid options passed to function ".concat(i,"(): You cannot ")+'specify both "merge" and "mergeFields".');return s}function OI(){if("undefined"==typeof Uint8Array)throw new pn("unimplemented","Uint8Arrays are not available in this environment.")}function LI(){if("undefined"==typeof atob)throw new pn("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){_y=i})(ad.SDK_VERSION),(0,ad._registerComponent)(new Ep.wA("firestore",function(i,s){var n=s.options,r=i.getProvider("app").getImmediate(),a=new Ts(r,new bL(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),a._setSettings(n),a},"PUBLIC")),(0,ad.registerVersion)("@firebase/firestore","3.1.0",void 0);var KS=function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,R.Z)(i,[{key:"toBase64",value:function(){return LI(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return OI(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(n){return this._delegate.isEqual(n._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(n){return LI(),new i(Md.fromBase64String(n))}},{key:"fromUint8Array",value:function(n){return OI(),new i(Md.fromUint8Array(n))}}]),i}();function Sw(i){return function(i,s){if("object"!=typeof i||null===i)return!1;var a,n=i,r=(0,Ve.Z)(["next","error","complete"]);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o in n&&"function"==typeof n[o])return!0}}catch(u){r.e(u)}finally{r.f()}return!1}(i)}var p2=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"enableIndexedDbPersistence",value:function(n,r){return function(i,s){gI(i=va(i,Ts));var n=Ji(i),r=i._freezeSettings(),a=new Lp;return fI(n,a,new ei(a,r.cacheSizeBytes,null==s?void 0:s.forceOwnership))}(n._delegate,{forceOwnership:r})}},{key:"enableMultiTabIndexedDbPersistence",value:function(n){return function(i){gI(i=va(i,Ts));var s=Ji(i),n=i._freezeSettings(),r=new Lp;return fI(s,r,new ez(r,n.cacheSizeBytes))}(n._delegate)}},{key:"clearIndexedDbPersistence",value:function(n){return function(i){if(i._initialized&&!i._terminated)throw new pn(Kt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var s=new eu;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Qt.Z)(Ke().mark(function n(){return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,function(){var o=(0,Qt.Z)(Ke().mark(function u(l){var f;return Ke().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(cm.bt()){b.next=2;break}return b.abrupt("return",Promise.resolve());case 2:return f=l+"main",b.next=5,cm.delete(f);case 5:case"end":return b.stop()}},u)}));return function(u){return o.apply(this,arguments)}}()(MD(i._databaseId,i._persistenceKey));case 3:s.resolve(),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),s.reject(a.t0);case 9:case"end":return a.stop()}},n,null,[[0,6]])}))),s.promise}(n._delegate)}}]),i}(),$S=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return a.terminate()}},s instanceof pw||(this._appCompat=s)}return(0,R.Z)(i,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(n){var r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&zv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}},{key:"useEmulator",value:function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};UN(this._delegate,n,r,a)}},{key:"enableNetwork",value:function(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Qt.Z)(Ke().mark(function s(){var n,r;return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,nI(i);case 2:return n=o.sent,o.next=5,IN(i);case 5:return r=o.sent,o.abrupt("return",(n.setNetworkEnabled(!0),l=void 0,(l=Un(r)).Kr.delete(0),Em(l)));case 7:case"end":return o.stop()}var l},s)})))}(Ji(i=va(i,Ts)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(i){return function(i){return i.asyncQueue.enqueue((0,Qt.Z)(Ke().mark(function s(){var n,r;return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,nI(i);case 2:return n=o.sent,o.next=5,IN(i);case 5:return r=o.sent,o.abrupt("return",(n.setNetworkEnabled(!1),function(){var u=(0,Qt.Z)(Ke().mark(function l(f){var m;return Ke().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return(m=Un(f)).Kr.add(0),w.next=4,bf(m);case 4:m.Wr.set("Offline");case 5:case"end":return w.stop()}},l)}));return function(l){return u.apply(this,arguments)}}()(r)));case 7:case"end":return o.stop()}},s)})))}(Ji(i=va(i,Ts)))}(this._delegate)}},{key:"enablePersistence",value:function(n){var r=!1,a=!1;return n&&BN("synchronizeTabs",r=!!n.synchronizeTabs,"experimentalForceOwningTab",a=!!n.experimentalForceOwningTab),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(i){return s=Ji(i=va(i,Ts)),n=new eu,s.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=YM,o.next=3,kS(s);case 3:return o.t1=o.sent,o.t2=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2));case 6:case"end":return o.stop()}},r)}))),n.promise;var s,n}(this._delegate)}},{key:"onSnapshotsInSync",value:function(n){return function(i,s){return function(i,s){var n=new fw(s);return i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(u,l){Un(u).Zr.add(l),l.next()},o.next=3,a_(i);case 3:return o.t1=o.sent,o.t2=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2));case 6:case"end":return o.stop()}},r)}))),function(){n.Xo(),i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(u,l){Un(u).Zr.delete(l)},o.next=3,a_(i);case 3:return o.t1=o.sent,o.t2=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2));case 6:case"end":return o.stop()}},r)})))}}(Ji(i=va(i,Ts)),AS(s)?s:{next:s})}(this._delegate,n)}},{key:"app",get:function(){if(!this._appCompat)throw new pn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(n){try{return new Aw(this,VN(this._delegate,n))}catch(r){throw Uu(r,"collection()","Firestore.collection()")}}},{key:"doc",value:function(n){try{return new Cf(this,mw(this._delegate,n))}catch(r){throw Uu(r,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(n){try{return new g_(this,function(i,s){if(i=va(i,Pm),CS("collectionGroup","collection id",s),s.indexOf("/")>=0)throw new pn(Kt.INVALID_ARGUMENT,"Invalid collection ID '".concat(s,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new sc(i,null,(n=s,new df(yi.emptyPath(),n)));var n}(this._delegate,n))}catch(r){throw Uu(r,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(n){var r=this;return function(i,s){return function(i,s){var n=new eu;return i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,wS(i).then(function(f){return f.datastore});case 2:new nz(i.asyncQueue,u.sent,s,n).run();case 4:case"end":return u.stop()}},r)}))),n.promise}(Ji(i),function(n){return s(new II(i,n))})}(this._delegate,function(a){return n(new ZI(r,a))})}},{key:"batch",value:function(){var n=this;return Ji(this._delegate),new XS(new jS(this._delegate,function(r){return Od(n._delegate,r)}))}},{key:"loadBundle",value:function(n){return function(i,s){var n=Ji(i=va(i,Ts)),r=new HN;return function(i,s,n,r){var o,u,f,a=(o=n,u=Wy(s),f=function(f,m){if(f instanceof Uint8Array)return JM(f,m);if(f instanceof ArrayBuffer)return JM(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof o?(new TextEncoder).encode(o):o),new MN(f,u));i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function o(){return Ke().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=JV,l.next=3,kS(i);case 3:l.t1=l.sent,l.t2=a,l.t3=r,(0,l.t0)(l.t1,l.t2,l.t3);case 7:case"end":return l.stop()}},o)})))}(n,i._databaseId,s,r),r}(this._delegate,n)}},{key:"namedQuery",value:function(n){var r=this;return function(i,s){return function(i,s){return i.asyncQueue.enqueue((0,Qt.Z)(Ke().mark(function n(){return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(o,u){var l=Un(o);return l.persistence.runTransaction("Get named query","readonly",function(f){return l.Je.getNamedQuery(f,u)})},a.next=3,ES(i);case 3:return a.t1=a.sent,a.t2=s,a.abrupt("return",(0,a.t0)(a.t1,a.t2));case 6:case"end":return a.stop()}},n)})))}(Ji(i=va(i,Ts)),s).then(function(n){return n?new sc(i,null,n.query):null})}(this._delegate,n).then(function(a){return a?new g_(r,a):null})}}]),i}(),p_=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).firestore=r,a}return(0,R.Z)(n,[{key:"convertBytes",value:function(a){return new KS(new Md(a))}},{key:"convertReference",value:function(a){var o=this.convertDocumentKey(a,this.firestore._databaseId);return Cf.forKey(o,this.firestore,null)}}]),n}(Ew),ZI=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n,this._userDataWriter=new p_(s)}return(0,R.Z)(i,[{key:"get",value:function(n){var r=this,a=Zp(n);return this._delegate.get(a).then(function(o){return new v_(r._firestore,new oc(r._firestore._delegate,r._userDataWriter,o._key,o._document,o.metadata,a.converter))})}},{key:"set",value:function(n,r,a){var o=Zp(n);return a?(d_("Transaction.set",a),this._delegate.set(o,r,a)):this._delegate.set(o,r),this}},{key:"update",value:function(n,r,a){for(var o=arguments.length,u=new Array(o>3?o-3:0),l=3;l<o;l++)u[l-3]=arguments[l];var m,f=Zp(n);return 2===arguments.length?this._delegate.update(f,r):(m=this._delegate).update.apply(m,[f,r,a].concat(u)),this}},{key:"delete",value:function(n){var r=Zp(n);return this._delegate.delete(r),this}}]),i}(),XS=function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,R.Z)(i,[{key:"set",value:function(n,r,a){var o=Zp(n);return a?(d_("WriteBatch.set",a),this._delegate.set(o,r,a)):this._delegate.set(o,r),this}},{key:"update",value:function(n,r,a){for(var o=arguments.length,u=new Array(o>3?o-3:0),l=3;l<o;l++)u[l-3]=arguments[l];var m,f=Zp(n);return 2===arguments.length?this._delegate.update(f,r):(m=this._delegate).update.apply(m,[f,r,a].concat(u)),this}},{key:"delete",value:function(n){var r=Zp(n);return this._delegate.delete(r),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),i}(),QS=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._firestore=n,this._userDataWriter=r,this._delegate=a}return(0,R.Z)(s,[{key:"fromFirestore",value:function(r,a){var o=new l_(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,null);return this._delegate.fromFirestore(new m_(this._firestore,o),null!=a?a:{})}},{key:"toFirestore",value:function(r,a){return a?this._delegate.toFirestore(r,a):this._delegate.toFirestore(r)}}],[{key:"getInstance",value:function(r,a){var o=s.INSTANCES,u=o.get(r);u||(u=new WeakMap,o.set(r,u));var l=u.get(a);return l||(l=new s(r,new p_(r),a),u.set(a,l)),l}}]),s}();return i.INSTANCES=new WeakMap,i}(),Cf=function(){function i(s,n){(0,M.Z)(this,i),this.firestore=s,this._delegate=n,this._userDataWriter=new p_(s)}return(0,R.Z)(i,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Aw(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(n){try{return new Aw(this.firestore,VN(this._delegate,n))}catch(r){throw Uu(r,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(n){return(n=(0,Re.m9)(n))instanceof Vs&&lI(this._delegate,n)}},{key:"set",value:function(n,r){r=d_("DocumentReference.set",r);try{return r?TI(this._delegate,n,r):TI(this._delegate,n)}catch(a){throw Uu(a,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(n,r){for(var a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];try{return 1===arguments.length?kw(this._delegate,n):kw.apply(void 0,[this._delegate,n,r].concat(o))}catch(l){throw Uu(l,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(i){return Od(va(i.firestore,Ts),[new am(i._key,ru.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var n=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var u=JS(a),l=eA(a,function(f){return new v_(n.firestore,new oc(n.firestore._delegate,n._userDataWriter,f._key,f._document,f.metadata,n._delegate.converter))});return MI(this._delegate,u,l)}},{key:"get",value:function(n){var r=this;return("cache"===(null==n?void 0:n.source)?function(i){i=va(i,Vs);var s=va(i.firestore,Ts),n=Ji(s),r=new oo(s);return function(i,s){var n=new eu;return i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(){var u=(0,Qt.Z)(Ke().mark(function l(f,m,b){var w,C;return Ke().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.prev=0,I.next=3,function(Z,Y){var V=Un(Z);return V.persistence.runTransaction("read document","readonly",function(W){return V.Qn.An(W,Y)})}(f,m);case 3:(w=I.sent).isFoundDocument()?b.resolve(w):w.isNoDocument()?b.resolve(null):b.reject(new pn(Kt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),I.next=11;break;case 7:I.prev=7,I.t0=I.catch(0),C=Sm(I.t0,"Failed to get document '".concat(m," from cache")),b.reject(C);case 11:case"end":return I.stop()}},l,null,[[0,7]])}));return function(l,f,m){return u.apply(this,arguments)}}(),o.next=3,ES(i);case 3:return o.t1=o.sent,o.t2=s,o.t3=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2,o.t3));case 7:case"end":return o.stop()}},r)}))),n.promise}(n,i._key).then(function(a){return new oc(s,r,i._key,a,new Xc(null!==a&&a.hasLocalMutations,!0),i.converter)})}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=va(i,Vs);var s=va(i.firestore,Ts);return iI(Ji(s),i._key,{source:"server"}).then(function(n){return Cw(s,i,n)})}(this._delegate):function(i){i=va(i,Vs);var s=va(i.firestore,Ts);return iI(Ji(s),i._key).then(function(n){return Cw(s,i,n)})}(this._delegate)).then(function(o){return new v_(r.firestore,new oc(r.firestore._delegate,r._userDataWriter,o._key,o._document,o.metadata,r._delegate.converter))})}},{key:"withConverter",value:function(n){return new i(this.firestore,this._delegate.withConverter(n?QS.getInstance(this.firestore,n):null))}}],[{key:"forPath",value:function(n,r,a){if(n.length%2!=0)throw new pn("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(n.canonicalString()," has ").concat(n.length));return new i(r,new Vs(r._delegate,a,new Fr(n)))}},{key:"forKey",value:function(n,r,a){return new i(r,new Vs(r._delegate,a,n))}}]),i}();function Uu(i,s,n){return i.message=i.message.replace(s,n),i}function JS(i){var n,s=(0,Ve.Z)(i);try{for(s.s();!(n=s.n()).done;){var r=n.value;if("object"==typeof r&&!Sw(r))return r}}catch(a){s.e(a)}finally{s.f()}return{}}function eA(i,s){var n,r,a;return{next:function(u){a.next&&a.next(s(u))},error:null===(n=(a=Sw(i[0])?i[0]:Sw(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]}).error)||void 0===n?void 0:n.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}var v_=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n}return(0,R.Z)(i,[{key:"ref",get:function(){return new Cf(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(n){return this._delegate.data(n)}},{key:"get",value:function(n,r){return this._delegate.get(n,r)}},{key:"isEqual",value:function(n){return EI(this._delegate,n._delegate)}}]),i}(),m_=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"data",value:function(a){var o=this._delegate.data(a);return function(i,s){i||Sr()}(void 0!==o),o}}]),n}(v_),g_=function(){function i(s,n){(0,M.Z)(this,i),this.firestore=s,this._delegate=n,this._userDataWriter=new p_(s)}return(0,R.Z)(i,[{key:"where",value:function(n,r,a){try{return new i(this.firestore,Fd(this._delegate,function(i,s,n){var r=s,a=bw("where",i);return new lz(a,r,n)}(n,r,a)))}catch(o){throw Uu(o,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(n,r){try{return new i(this.firestore,Fd(this._delegate,function(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r=bw("orderBy",i);return new e2(r,n)}(n,r)))}catch(a){throw Uu(a,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(n){try{return new i(this.firestore,Fd(this._delegate,function(i){return oI("limit",i),new CI("limit",i,"F")}(n)))}catch(r){throw Uu(r,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(n){try{return new i(this.firestore,Fd(this._delegate,function(i){return oI("limitToLast",i),new CI("limitToLast",i,"L")}(n)))}catch(r){throw Uu(r,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new i(this.firestore,Fd(this._delegate,r2.apply(void 0,arguments)))}catch(n){throw Uu(n,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new i(this.firestore,Fd(this._delegate,a2.apply(void 0,arguments)))}catch(n){throw Uu(n,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new i(this.firestore,Fd(this._delegate,VS.apply(void 0,arguments)))}catch(n){throw Uu(n,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new i(this.firestore,Fd(this._delegate,SI.apply(void 0,arguments)))}catch(n){throw Uu(n,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(n){return cI(this._delegate,n._delegate)}},{key:"get",value:function(n){var r=this;return("cache"===(null==n?void 0:n.source)?function(i){i=va(i,sc);var s=va(i.firestore,Ts),n=Ji(s),r=new oo(s);return function(i,s){var n=new eu;return i.asyncQueue.enqueueAndForget((0,Qt.Z)(Ke().mark(function r(){return Ke().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.t0=function(){var u=(0,Qt.Z)(Ke().mark(function l(f,m,b){var w,C,T,I,Z;return Ke().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.prev=0,V.next=3,ym(f,m,!0);case 3:C=new lS(m,(w=V.sent).Gn),T=C.Io(w.documents),I=C.applyChanges(T,!1),b.resolve(I.snapshot),V.next=14;break;case 10:V.prev=10,V.t0=V.catch(0),Z=Sm(V.t0,"Failed to execute query '".concat(m," against cache")),b.reject(Z);case 14:case"end":return V.stop()}},l,null,[[0,10]])}));return function(l,f,m){return u.apply(this,arguments)}}(),o.next=3,ES(i);case 3:return o.t1=o.sent,o.t2=s,o.t3=n,o.abrupt("return",(0,o.t0)(o.t1,o.t2,o.t3));case 7:case"end":return o.stop()}},r)}))),n.promise}(n,i._query).then(function(a){return new Oh(s,r,i,a)})}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=va(i,sc);var s=va(i.firestore,Ts),n=Ji(s),r=new oo(s);return FN(n,i._query,{source:"server"}).then(function(a){return new Oh(s,r,i,a)})}(this._delegate):function(i){i=va(i,sc);var s=va(i.firestore,Ts),n=Ji(s),r=new oo(s);return ww(i._query),FN(n,i._query).then(function(a){return new Oh(s,r,i,a)})}(this._delegate)).then(function(o){return new tA(r.firestore,new Oh(r.firestore._delegate,r._userDataWriter,r._delegate,o._snapshot))})}},{key:"onSnapshot",value:function(){for(var n=this,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var u=JS(a),l=eA(a,function(f){return new tA(n.firestore,new Oh(n.firestore._delegate,n._userDataWriter,n._delegate,f._snapshot))});return MI(this._delegate,u,l)}},{key:"withConverter",value:function(n){return new i(this.firestore,this._delegate.withConverter(n?QS.getInstance(this.firestore,n):null))}}]),i}(),BI=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n}return(0,R.Z)(i,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new m_(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),i}(),tA=function(){function i(s,n){(0,M.Z)(this,i),this._firestore=s,this._delegate=n}return(0,R.Z)(i,[{key:"query",get:function(){return new g_(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var n=this;return this._delegate.docs.map(function(r){return new m_(n._firestore,r)})}},{key:"docChanges",value:function(n){var r=this;return this._delegate.docChanges(n).map(function(a){return new BI(r._firestore,a)})}},{key:"forEach",value:function(n,r){var a=this;this._delegate.forEach(function(o){n.call(r,new m_(a._firestore,o))})}},{key:"isEqual",value:function(n){return EI(this._delegate,n._delegate)}}]),i}(),Aw=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).firestore=r,o._delegate=a,o}return(0,R.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var a=this._delegate.parent;return a?new Cf(this.firestore,a):null}},{key:"doc",value:function(a){try{return new Cf(this.firestore,void 0===a?mw(this._delegate):mw(this._delegate,a))}catch(o){throw Uu(o,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(a){var o=this;return function(i,s){var n=va(i.firestore,Ts),r=mw(i),a=h_(i.converter,s);return Od(n,[gw(Id(i.firestore),"addDoc",r._key,a,null!==i.converter,{}).toMutation(r._key,ru.exists(!1))]).then(function(){return r})}(this._delegate,a).then(function(u){return new Cf(o.firestore,u)})}},{key:"isEqual",value:function(a){return lI(this._delegate,a._delegate)}},{key:"withConverter",value:function(a){return new n(this.firestore,this._delegate.withConverter(a?QS.getInstance(this.firestore,a):null))}}]),n}(g_);function Zp(i){return va(i,Vs)}var fz={Firestore:$S,GeoPoint:MS,Timestamp:Nu,Blob:KS,Transaction:ZI,WriteBatch:XS,DocumentReference:Cf,DocumentSnapshot:v_,Query:g_,QueryDocumentSnapshot:m_,QuerySnapshot:tA,CollectionReference:Aw,FieldPath:function(){function i(){(0,M.Z)(this,i);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];this._delegate=(0,Ok.Z)(xd,n)}return(0,R.Z)(i,[{key:"isEqual",value:function(n){return(n=(0,Re.m9)(n))instanceof xd&&this._delegate._internalPath.isEqual(n._internalPath)}}],[{key:"documentId",value:function(){return new i(Zu.keyField().canonicalString())}}]),i}(),FieldValue:function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,R.Z)(i,[{key:"isEqual",value:function(n){return this._delegate.isEqual(n._delegate)}}],[{key:"serverTimestamp",value:function(){var n=new YN("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new i(n)}},{key:"delete",value:function(){var n=new FS("deleteField");return n._methodName="FieldValue.delete",new i(n)}},{key:"arrayUnion",value:function(){var n=PI.apply(void 0,arguments);return n._methodName="FieldValue.arrayUnion",new i(n)}},{key:"arrayRemove",value:function(){var n=f2.apply(void 0,arguments);return n._methodName="FieldValue.arrayRemove",new i(n)}},{key:"increment",value:function(n){var r=function(i){return new XN("increment",i)}(n);return r._methodName="FieldValue.increment",new i(r)}}]),i}(),setLogLevel:function(i){!function(i){io.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,s){i.INTERNAL.registerComponent(new Ep.wA("firestore-compat",function(n){return function(s,n){return new $S(s,n,new p2)}(n.getProvider("app-compat").getImmediate(),n.getProvider("firestore").getImmediate())},"PUBLIC").setServiceProps(Object.assign({},fz)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(HO.Z);var jr=ne(5959),Ld=ne(1906),Tw=ne(45),Qc=ne(6882);function Uo(i,s){return"function"==typeof s?function(n){return n.pipe(Uo(function(r,a){return(0,Ws.D)(i(r,a)).pipe((0,Tr.U)(function(o,u){return s(r,o,a,u)}))}))}:function(n){return n.lift(new dz(i))}}var dz=function(){function i(s){(0,M.Z)(this,i),this.project=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new pz(n,this.project))}}]),i}(),pz=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).project=a,o.index=0,o}return(0,R.Z)(n,[{key:"_next",value:function(a){var o,u=this.index++;try{o=this.project(a,u)}catch(l){return void this.destination.error(l)}this._innerSub(o)}},{key:"_innerSub",value:function(a){var o=this.innerSubscription;o&&o.unsubscribe();var u=new Qc.IY(this),l=this.destination;l.add(u),this.innerSubscription=(0,Qc.ft)(a,u),this.innerSubscription!==u&&l.add(this.innerSubscription)}},{key:"_complete",value:function(){var a=this.innerSubscription;(!a||a.closed)&&(0,Se.Z)((0,ye.Z)(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&(0,Se.Z)((0,ye.Z)(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(a){this.destination.next(a)}}]),n}(Qc.Ds),vz=ne(8489),Vu=ne(7570),UI=ne(3895),b2=ne(9291),w2=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,u=arguments.length>2?arguments[2]:void 0;return(0,M.Z)(this,n),(r=s.call(this)).scheduler=u,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=a<1?1:a,r._windowTime=o<1?1:o,o===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return(0,R.Z)(n,[{key:"nextInfiniteTimeWindow",value:function(a){if(!this.isStopped){var o=this._events;o.push(a),o.length>this._bufferSize&&o.shift()}(0,Se.Z)((0,ye.Z)(n.prototype),"next",this).call(this,a)}},{key:"nextTimeWindow",value:function(a){this.isStopped||(this._events.push(new mz(this._getNow(),a)),this._trimBufferThenGetEvents()),(0,Se.Z)((0,ye.Z)(n.prototype),"next",this).call(this,a)}},{key:"_subscribe",value:function(a){var m,o=this._infiniteTimeWindow,u=o?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,f=u.length;if(this.closed)throw new UI.N;if(this.isStopped||this.hasError?m=Vu.w.EMPTY:(this.observers.push(a),m=new b2.W(this,a)),l&&a.add(a=new Tw.ht(a,l)),o)for(var b=0;b<f&&!a.closed;b++)a.next(u[b]);else for(var w=0;w<f&&!a.closed;w++)a.next(u[w].value);return this.hasError?a.error(this.thrownError):this.isStopped&&a.complete(),m}},{key:"_getNow",value:function(){return(this.scheduler||vz.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var a=this._getNow(),o=this._bufferSize,u=this._windowTime,l=this._events,f=l.length,m=0;m<f&&!(a-l[m].time<u);)m++;return f>o&&(m=Math.max(m,f-o)),m>0&&l.splice(0,m),l}}]),n}(jr.xQ),mz=function i(s,n){(0,M.Z)(this,i),this.time=s,this.value=n};function VI(i,s,n){var r;return r=i&&"object"==typeof i?i:{bufferSize:i,windowTime:s,refCount:!1,scheduler:n},function(a){return a.lift(function(i){var l,m,s=i.bufferSize,n=void 0===s?Number.POSITIVE_INFINITY:s,r=i.windowTime,a=void 0===r?Number.POSITIVE_INFINITY:r,o=i.refCount,u=i.scheduler,f=0,b=!1,w=!1;return function(T){var I;f++,!l||b?(b=!1,l=new w2(n,a,u),I=l.subscribe(this),m=T.subscribe({next:function(Y){l.next(Y)},error:function(Y){b=!0,l.error(Y)},complete:function(){w=!0,m=void 0,l.complete()}}),w&&(m=void 0)):I=l.subscribe(this),this.add(function(){f--,I.unsubscribe(),I=void 0,m&&!w&&o&&0===f&&(m.unsubscribe(),m=void 0,l=void 0)})}}(r))}}var xw=function(){function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i}(),zI=function(){function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i}(),Df=ne(653);function Sc(i){return function(s){return 0===i?(0,Df.c)():s.lift(new yz(i))}}var yz=function(){function i(s){if((0,M.Z)(this,i),this.total=s,this.total<0)throw new zI}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new C2(n,this.total))}}]),i}(),C2=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).total=a,o.count=0,o}return(0,R.Z)(n,[{key:"_next",value:function(a){var o=this.total,u=++this.count;u<=o&&(this.destination.next(a),u===o&&(this.destination.complete(),this.unsubscribe()))}}]),n}(qs.L);function D2(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(s){return s.lift(new S2(i))}}var S2=function(){function i(s){(0,M.Z)(this,i),this.defaultValue=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new nA(n,this.defaultValue))}}]),i}(),nA=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).defaultValue=a,o.isEmpty=!0,o}return(0,R.Z)(n,[{key:"_next",value:function(a){this.isEmpty=!1,this.destination.next(a)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(qs.L);function Bp(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T2;return function(s){return s.lift(new HI(i))}}var HI=function(){function i(s){(0,M.Z)(this,i),this.errorFactory=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new A2(n,this.errorFactory))}}]),i}(),A2=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).errorFactory=a,o.hasValue=!1,o}return(0,R.Z)(n,[{key:"_next",value:function(a){this.hasValue=!0,this.destination.next(a)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var a;try{a=this.errorFactory()}catch(o){a=o}this.destination.error(a)}}]),n}(qs.L);function T2(){return new xw}var Mw=ne(3392);function Nd(i,s){var n=arguments.length>=2;return function(r){return r.pipe(i?Za(function(a,o){return i(a,o,r)}):Mw.y,Sc(1),n?D2(s):Bp(function(){return new xw}))}}function rA(i,s){return s?Uo(function(){return i},s):Uo(function(){return i})}var Iw=ne(3482),GI=ne(9001),Om=new v.OlP("angularfire2.auth.use-emulator"),Pw=new v.OlP("angularfire2.auth.settings"),WI=new v.OlP("angularfire2.auth.tenant-id"),qI=new v.OlP("angularfire2.auth.langugage-code"),YI=new v.OlP("angularfire2.auth.use-device-language"),iA=new v.OlP("angularfire.auth.persistence"),KI=function(s,n,r,a,o,u,l,f){return(0,Wa.cc)("".concat(s.name,".auth"),"AngularFireAuth",s.name,function(){var m=n.runOutsideAngular(function(){return s.auth()});if(r&&m.useEmulator.apply(m,(0,Kr.Z)(r)),a&&(m.tenantId=a),m.languageCode=o,u&&m.useDeviceLanguage(),l)for(var b=0,w=Object.entries(l);b<w.length;b++){var C=(0,Te.Z)(w[b],2);m.settings[C[0]]=C[1]}return f&&m.setPersistence(f),m},[r,a,o,u,l,f])},Zd=function(){var i=function s(n,r,a,o,u,l,f,m,b,w,C){(0,M.Z)(this,s);var T=new jr.xQ,I=(0,wr.of)(void 0).pipe((0,Tw.QV)(u.outsideAngular),Uo(function(){return o.runOutsideAngular(function(){return Promise.resolve().then(ne.bind(ne,3121))})}),(0,Tr.U)(function(){return(0,Tl.on)(n,o,r)}),(0,Tr.U)(function(se){return KI(se,o,l,m,b,w,f,C)}),VI({bufferSize:1,refCount:!1}));if(De(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,wr.of)(null);else{I.pipe(Nd()).subscribe();var Y=I.pipe(Uo(function(se){return se.getRedirectResult().then(function(fe){return fe},function(){return null})}),Wa.iC,VI({bufferSize:1,refCount:!1})),V=I.pipe(Uo(function(se){return new ro.y(function(fe){return{unsubscribe:o.runOutsideAngular(function(){return se.onAuthStateChanged(function(ve){return fe.next(ve)},function(ve){return fe.error(ve)},function(){return fe.complete()})})}})})),W=I.pipe(Uo(function(se){return new ro.y(function(fe){return{unsubscribe:o.runOutsideAngular(function(){return se.onIdTokenChanged(function(ve){return fe.next(ve)},function(ve){return fe.error(ve)},function(){return fe.complete()})})}})}));this.authState=Y.pipe(rA(V),(0,Iw.R)(u.outsideAngular),(0,Tw.QV)(u.insideAngular)),this.user=Y.pipe(rA(W),(0,Iw.R)(u.outsideAngular),(0,Tw.QV)(u.insideAngular)),this.idToken=this.user.pipe(Uo(function(se){return se?(0,Ws.D)(se.getIdToken()):(0,wr.of)(null)})),this.idTokenResult=this.user.pipe(Uo(function(se){return se?(0,Ws.D)(se.getIdTokenResult()):(0,wr.of)(null)})),this.credential=(0,Ld.T)(Y,T,this.authState.pipe(Za(function(se){return!se}))).pipe((0,Tr.U)(function(se){return(null==se?void 0:se.user)?se:null}),(0,Iw.R)(u.outsideAngular),(0,Tw.QV)(u.insideAngular))}return(0,Tl.pX)(this,I,o,{spy:{apply:function(fe,ve,me){(fe.startsWith("signIn")||fe.startsWith("createUser"))&&me.then(function(pe){return T.next(pe)})}}})};return i.\u0275fac=function(n){return new(n||i)(v.LFG(Tl.Dh),v.LFG(Tl.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Wa.HU),v.LFG(Om,8),v.LFG(Pw,8),v.LFG(WI,8),v.LFG(qI,8),v.LFG(YI,8),v.LFG(iA,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i}();(0,Tl.GT)(Zd,[{name:null,config:null,emulatorConfig:null,app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var x2=function(){var i=function s(){(0,M.Z)(this,s),GI.Z.registerVersion("angularfire",Wa.q4.full,"auth-compat")};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[Zd]}),i}();function M2(i,s){return function(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu.z;return new ro.y(function(n){var r;return null!=s?s.schedule(function(){r=i.onSnapshot({includeMetadataChanges:!0},n)}):r=i.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(i,s)}function sA(i,s){return M2(i,s).pipe((0,Tr.U)(function(n){return{payload:n,type:"query"}}))}function oA(i,s){return sA(i,s).pipe(rl(void 0),Jl(),(0,Tr.U)(function(n){var r=(0,Te.Z)(n,2),a=r[0],o=r[1],u=o.payload.docChanges(),l=u.map(function(f){return{type:f.type,payload:f}});return a&&JSON.stringify(a.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach(function(f,m){var b=u.find(function(C){return C.doc.ref.isEqual(f.ref)}),w=null==a?void 0:a.payload.docs.find(function(C){return C.ref.isEqual(f.ref)});b&&JSON.stringify(b.doc.metadata)===JSON.stringify(f.metadata)||!b&&w&&JSON.stringify(w.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:f}})}),l}))}function $I(i,s,n){return oA(i,n).pipe(Dv(function(r,a){return function(i,s,n){return s.forEach(function(r){n.indexOf(r.type)>-1&&(i=function(i,s){switch(s.type){case"added":if(!i[s.newIndex]||!i[s.newIndex].doc.ref.isEqual(s.doc.ref))return XI(i,s.newIndex,0,s);break;case"modified":if(null==i[s.oldIndex]||i[s.oldIndex].doc.ref.isEqual(s.doc.ref)){if(s.oldIndex!==s.newIndex){var n=i.slice();return n.splice(s.oldIndex,1),n.splice(s.newIndex,0,s),n}return XI(i,s.newIndex,1,s)}break;case"removed":if(i[s.oldIndex]&&i[s.oldIndex].doc.ref.isEqual(s.doc.ref))return XI(i,s.oldIndex,1)}return i}(i,r))}),i}(r,a.map(function(o){return o.payload}),s)},[]),rd(),(0,Tr.U)(function(r){return r.map(function(a){return{type:a.type,payload:a}})}))}function XI(i,s,n){for(var r=i.slice(),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r.splice.apply(r,[s,n].concat(o)),r}function JI(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}var P2=function(){function i(s,n,r){(0,M.Z)(this,i),this.ref=s,this.query=n,this.afs=r}return(0,R.Z)(i,[{key:"stateChanges",value:function(n){var r=oA(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,Tr.U)(function(a){return a.filter(function(o){return n.indexOf(o.type)>-1})}))),r.pipe(rl(void 0),Jl(),Za(function(a){var o=(0,Te.Z)(a,2);return o[1].length>0||!o[0]}),(0,Tr.U)(function(a){return(0,Te.Z)(a,2)[1]}),Wa.iC)}},{key:"auditTrail",value:function(n){return this.stateChanges(n).pipe(Dv(function(r,a){return[].concat((0,Kr.Z)(r),(0,Kr.Z)(a))},[]))}},{key:"snapshotChanges",value:function(n){var r=JI(n);return $I(this.query,r,this.afs.schedulers.outsideAngular).pipe(Wa.iC)}},{key:"valueChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return sA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tr.U)(function(r){return r.payload.docs.map(function(a){return n.idField?Object.assign(Object.assign({},a.data()),(0,vr.Z)({},n.idField,a.id)):a.data()})}),Wa.iC)}},{key:"get",value:function(n){return(0,Ws.D)(this.query.get(n)).pipe(Wa.iC)}},{key:"add",value:function(n){return this.ref.add(n)}},{key:"doc",value:function(n){return new eP(this.ref.doc(n),this.afs)}}]),i}(),eP=function(){function i(s,n){(0,M.Z)(this,i),this.ref=s,this.afs=n}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.ref.set(n,r)}},{key:"update",value:function(n){return this.ref.update(n)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(n,r){var o=Fw(this.ref.collection(n),r);return new P2(o.ref,o.query,this.afs)}},{key:"snapshotChanges",value:function(){return function(i,s){return M2(i,s).pipe(rl(void 0),Jl(),(0,Tr.U)(function(n){var r=(0,Te.Z)(n,2),a=r[0],o=r[1];return o.exists?(null==a?void 0:a.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wa.iC)}},{key:"valueChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,Tr.U)(function(r){var a=r.payload;return n.idField?Object.assign(Object.assign({},a.data()),(0,vr.Z)({},n.idField,a.id)):a.data()}))}},{key:"get",value:function(n){return(0,Ws.D)(this.ref.get(n)).pipe(Wa.iC)}}]),i}(),F2=function(){function i(s,n){(0,M.Z)(this,i),this.query=s,this.afs=n}return(0,R.Z)(i,[{key:"stateChanges",value:function(n){return n&&0!==n.length?oA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tr.U)(function(r){return r.filter(function(a){return n.indexOf(a.type)>-1})}),Za(function(r){return r.length>0}),Wa.iC):oA(this.query,this.afs.schedulers.outsideAngular).pipe(Wa.iC)}},{key:"auditTrail",value:function(n){return this.stateChanges(n).pipe(Dv(function(r,a){return[].concat((0,Kr.Z)(r),(0,Kr.Z)(a))},[]))}},{key:"snapshotChanges",value:function(n){var r=JI(n);return $I(this.query,r,this.afs.schedulers.outsideAngular).pipe(Wa.iC)}},{key:"valueChanges",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=sA(this.query,this.afs.schedulers.outsideAngular);return r.pipe((0,Tr.U)(function(a){return a.payload.docs.map(function(o){return n.idField?Object.assign((0,vr.Z)({},n.idField,o.id),o.data()):o.data()})}),Wa.iC)}},{key:"get",value:function(n){return(0,Ws.D)(this.query.get(n)).pipe(Wa.iC)}}]),i}(),Lm=new v.OlP("angularfire2.enableFirestorePersistence"),tP=new v.OlP("angularfire2.firestore.persistenceSettings"),R2=new v.OlP("angularfire2.firestore.settings"),O2=new v.OlP("angularfire2.firestore.use-emulator");function Fw(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(a){return a},n=s(i);return{query:n,ref:i}}var uA=function(){var i=function(){function s(n,r,a,o,u,l,f,m,b,w,C,T,I,Z,Y,V){(0,M.Z)(this,s),this.schedulers=f;var W=(0,Tl.on)(n,l,r),se=b;w&&KI(W,l,C,I,Z,Y,T,V);var fe=(0,Wa.cc)("".concat(W.name,".firestore"),"AngularFirestore",W.name,function(){var me=l.runOutsideAngular(function(){return W.firestore()});return o&&me.settings(o),se&&me.useEmulator.apply(me,(0,Kr.Z)(se)),a&&!De(u)?[me,l.runOutsideAngular(function(){try{return(0,Ws.D)(me.enablePersistence(m||void 0).then(function(){return!0},function(){return!1}))}catch(je){return"undefined"!=typeof console&&console.warn(je),(0,wr.of)(!1)}})]:[me,(0,wr.of)(!1)]},[o,se,a]),ve=(0,Te.Z)(fe,2);this.firestore=ve[0],this.persistenceEnabled$=ve[1]}return(0,R.Z)(s,[{key:"collection",value:function(r,a){var u=Fw("string"==typeof r?this.firestore.collection(r):r,a),l=u.ref,f=u.query,m=this.schedulers.ngZone.run(function(){return l});return new P2(m,f,this)}},{key:"collectionGroup",value:function(r,a){var o=a||function(l){return l},u=this.firestore.collectionGroup(r);return new F2(o(u),this)}},{key:"doc",value:function(r){var a;a="string"==typeof r?this.firestore.doc(r):r;var o=this.schedulers.ngZone.run(function(){return a});return new eP(o,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Tl.Dh),v.LFG(Tl.xv,8),v.LFG(Lm,8),v.LFG(R2,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Wa.HU),v.LFG(tP,8),v.LFG(O2,8),v.LFG(Zd,8),v.LFG(Om,8),v.LFG(Pw,8),v.LFG(WI,8),v.LFG(qI,8),v.LFG(YI,8),v.LFG(iA,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i}(),Nh=function(){var i=function(){function s(){(0,M.Z)(this,s),GI.Z.registerVersion("angularfire",Wa.q4.full,"fst-compat")}return(0,R.Z)(s,null,[{key:"enablePersistence",value:function(r){return{ngModule:s,providers:[{provide:Lm,useValue:!0},{provide:tP,useValue:r}]}}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[uA]}),i}(),ol=ne(3982);function Bd(i,s){return(0,ol.zg)(i,s,1)}var nP=function i(){(0,M.Z)(this,i)},rP=function i(){(0,M.Z)(this,i)},Up=function(){function i(s){var n=this;(0,M.Z)(this,i),this.normalizedNames=new Map,this.lazyUpdate=null,s?this.lazyInit="string"==typeof s?function(){n.headers=new Map,s.split("\n").forEach(function(r){var a=r.indexOf(":");if(a>0){var o=r.slice(0,a),u=o.toLowerCase(),l=r.slice(a+1).trim();n.maybeSetNormalizedName(o,u),n.headers.has(u)?n.headers.get(u).push(l):n.headers.set(u,[l])}})}:function(){n.headers=new Map,Object.keys(s).forEach(function(r){var a=s[r],o=r.toLowerCase();"string"==typeof a&&(a=[a]),a.length>0&&(n.headers.set(o,a),n.maybeSetNormalizedName(r,o))})}:this.headers=new Map}return(0,R.Z)(i,[{key:"has",value:function(n){return this.init(),this.headers.has(n.toLowerCase())}},{key:"get",value:function(n){this.init();var r=this.headers.get(n.toLowerCase());return r&&r.length>0?r[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(n){return this.init(),this.headers.get(n.toLowerCase())||null}},{key:"append",value:function(n,r){return this.clone({name:n,value:r,op:"a"})}},{key:"set",value:function(n,r){return this.clone({name:n,value:r,op:"s"})}},{key:"delete",value:function(n,r){return this.clone({name:n,value:r,op:"d"})}},{key:"maybeSetNormalizedName",value:function(n,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,n)}},{key:"init",value:function(){var n=this;this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(r){return n.applyUpdate(r)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(n){var r=this;n.init(),Array.from(n.headers.keys()).forEach(function(a){r.headers.set(a,n.headers.get(a)),r.normalizedNames.set(a,n.normalizedNames.get(a))})}},{key:"clone",value:function(n){var r=new i;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([n]),r}},{key:"applyUpdate",value:function(n){var r=n.name.toLowerCase();switch(n.op){case"a":case"s":var a=n.value;if("string"==typeof a&&(a=[a]),0===a.length)return;this.maybeSetNormalizedName(n.name,r);var o=("a"===n.op?this.headers.get(r):void 0)||[];o.push.apply(o,(0,Kr.Z)(a)),this.headers.set(r,o);break;case"d":var u=n.value;if(u){var l=this.headers.get(r);if(!l)return;0===(l=l.filter(function(f){return-1===u.indexOf(f)})).length?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,l)}else this.headers.delete(r),this.normalizedNames.delete(r)}}},{key:"forEach",value:function(n){var r=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(a){return n(r.normalizedNames.get(a),r.headers.get(a))})}}]),i}(),iP=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"encodeKey",value:function(n){return lA(n)}},{key:"encodeValue",value:function(n){return lA(n)}},{key:"decodeKey",value:function(n){return decodeURIComponent(n)}},{key:"decodeValue",value:function(n){return decodeURIComponent(n)}}]),i}();function aP(i,s){var n=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(function(a){var o=a.indexOf("="),u=-1==o?[s.decodeKey(a),""]:[s.decodeKey(a.slice(0,o)),s.decodeValue(a.slice(o+1))],l=(0,Te.Z)(u,2),f=l[0],m=l[1],b=n.get(f)||[];b.push(m),n.set(f,b)}),n}var L2=/%(\d[a-f0-9])/gi,sP={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function lA(i){return encodeURIComponent(i).replace(L2,function(s,n){var r;return null!==(r=sP[n])&&void 0!==r?r:s})}function oP(i){return"".concat(i)}var Nm=function(){function i(){var s=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,M.Z)(this,i),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new iP,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=aP(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(function(r){var a=n.fromObject[r];s.map.set(r,Array.isArray(a)?a:[a])})):this.map=null}return(0,R.Z)(i,[{key:"has",value:function(n){return this.init(),this.map.has(n)}},{key:"get",value:function(n){this.init();var r=this.map.get(n);return r?r[0]:null}},{key:"getAll",value:function(n){return this.init(),this.map.get(n)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(n,r){return this.clone({param:n,value:r,op:"a"})}},{key:"appendAll",value:function(n){var r=[];return Object.keys(n).forEach(function(a){var o=n[a];Array.isArray(o)?o.forEach(function(u){r.push({param:a,value:u,op:"a"})}):r.push({param:a,value:o,op:"a"})}),this.clone(r)}},{key:"set",value:function(n,r){return this.clone({param:n,value:r,op:"s"})}},{key:"delete",value:function(n,r){return this.clone({param:n,value:r,op:"d"})}},{key:"toString",value:function(){var n=this;return this.init(),this.keys().map(function(r){var a=n.encoder.encodeKey(r);return n.map.get(r).map(function(o){return a+"="+n.encoder.encodeValue(o)}).join("&")}).filter(function(r){return""!==r}).join("&")}},{key:"clone",value:function(n){var r=new i({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(n),r}},{key:"init",value:function(){var n=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(r){return n.map.set(r,n.cloneFrom.map.get(r))}),this.updates.forEach(function(r){switch(r.op){case"a":case"s":var a=("a"===r.op?n.map.get(r.param):void 0)||[];a.push(oP(r.value)),n.map.set(r.param,a);break;case"d":if(void 0===r.value){n.map.delete(r.param);break}var o=n.map.get(r.param)||[],u=o.indexOf(oP(r.value));-1!==u&&o.splice(u,1),o.length>0?n.map.set(r.param,o):n.map.delete(r.param)}}),this.cloneFrom=this.updates=null)}}]),i}(),lP=function(){function i(){(0,M.Z)(this,i),this.map=new Map}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.map.set(n,r),this}},{key:"get",value:function(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}},{key:"delete",value:function(n){return this.map.delete(n),this}},{key:"keys",value:function(){return this.map.keys()}}]),i}();function Rw(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function hP(i){return"undefined"!=typeof Blob&&i instanceof Blob}function Ac(i){return"undefined"!=typeof FormData&&i instanceof FormData}var fP=function(){function i(s,n,r,a){var o;if((0,M.Z)(this,i),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=s.toUpperCase(),function(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,o=a):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Up),this.context||(this.context=new lP),this.params){var u=this.params.toString();if(0===u.length)this.urlWithParams=n;else{var l=n.indexOf("?");this.urlWithParams=n+(-1===l?"?":l<n.length-1?"&":"")+u}}else this.params=new Nm,this.urlWithParams=n}return(0,R.Z)(i,[{key:"serializeBody",value:function(){return null===this.body?null:Rw(this.body)||hP(this.body)||Ac(this.body)||function(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Nm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Ac(this.body)?null:hP(this.body)?this.body.type||null:Rw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.method||this.method,o=n.url||this.url,u=n.responseType||this.responseType,l=void 0!==n.body?n.body:this.body,f=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,m=void 0!==n.reportProgress?n.reportProgress:this.reportProgress,b=n.headers||this.headers,w=n.params||this.params,C=null!==(r=n.context)&&void 0!==r?r:this.context;return void 0!==n.setHeaders&&(b=Object.keys(n.setHeaders).reduce(function(T,I){return T.set(I,n.setHeaders[I])},b)),n.setParams&&(w=Object.keys(n.setParams).reduce(function(T,I){return T.set(I,n.setParams[I])},w)),new i(a,o,l,{params:w,headers:b,context:C,reportProgress:m,responseType:u,withCredentials:f})}}]),i}(),y_=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}({}),dP=function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";(0,M.Z)(this,i),this.headers=s.headers||new Up,this.status=void 0!==s.status?s.status:n,this.statusText=s.statusText||r,this.url=s.url||null,this.ok=this.status>=200&&this.status<300},Z2=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,M.Z)(this,n),(r=s.call(this,a)).type=y_.ResponseHeader,r}return(0,R.Z)(n,[{key:"clone",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}]),n}(dP),pP=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,M.Z)(this,n),(r=s.call(this,a)).type=y_.Response,r.body=void 0!==a.body?a.body:null,r}return(0,R.Z)(n,[{key:"clone",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==a.body?a.body:this.body,headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}]),n}(dP),vP=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r,0,"Unknown Error")).name="HttpErrorResponse",a.ok=!1,a.message=a.status>=200&&a.status<300?"Http failure during parsing for ".concat(r.url||"(unknown url)"):"Http failure response for ".concat(r.url||"(unknown url)",": ").concat(r.status," ").concat(r.statusText),a.error=r.error||null,a}return n}(dP);function mP(i,s){return{body:s,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}var __=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.handler=n}return(0,R.Z)(s,[{key:"request",value:function(r,a){var l,o=this,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r instanceof fP)l=r;else{var f=void 0;f=u.headers instanceof Up?u.headers:new Up(u.headers);var m=void 0;u.params&&(m=u.params instanceof Nm?u.params:new Nm({fromObject:u.params})),l=new fP(r,a,void 0!==u.body?u.body:null,{headers:f,context:u.context,params:m,reportProgress:u.reportProgress,responseType:u.responseType||"json",withCredentials:u.withCredentials})}var b=(0,wr.of)(l).pipe(Bd(function(C){return o.handler.handle(C)}));if(r instanceof fP||"events"===u.observe)return b;var w=b.pipe(Za(function(C){return C instanceof pP}));switch(u.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return w.pipe((0,Tr.U)(function(C){if(null!==C.body&&!(C.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return C.body}));case"blob":return w.pipe((0,Tr.U)(function(C){if(null!==C.body&&!(C.body instanceof Blob))throw new Error("Response is not a Blob.");return C.body}));case"text":return w.pipe((0,Tr.U)(function(C){if(null!==C.body&&"string"!=typeof C.body)throw new Error("Response is not a string.");return C.body}));case"json":default:return w.pipe((0,Tr.U)(function(C){return C.body}))}case"response":return w;default:throw new Error("Unreachable: unhandled observe type ".concat(u.observe,"}"))}}},{key:"delete",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",r,a)}},{key:"get",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",r,a)}},{key:"head",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",r,a)}},{key:"jsonp",value:function(r,a){return this.request("JSONP",r,{params:(new Nm).append(a,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",r,a)}},{key:"patch",value:function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",r,mP(o,a))}},{key:"post",value:function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",r,mP(o,a))}},{key:"put",value:function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",r,mP(o,a))}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(nP))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),cA=function(){function i(s,n){(0,M.Z)(this,i),this.next=s,this.interceptor=n}return(0,R.Z)(i,[{key:"handle",value:function(n){return this.interceptor.intercept(n,this.next)}}]),i}(),gP=new v.OlP("HTTP_INTERCEPTORS"),B2=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,[{key:"intercept",value:function(r,a){return a.handle(r)}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),yP=/^\)\]\}',?\n/,Ow=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.xhrFactory=n}return(0,R.Z)(s,[{key:"handle",value:function(r){var a=this;if("JSONP"===r.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ro.y(function(o){var u=a.xhrFactory.build();if(u.open(r.method,r.urlWithParams),r.withCredentials&&(u.withCredentials=!0),r.headers.forEach(function(V,W){return u.setRequestHeader(V,W.join(","))}),r.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){var l=r.detectContentTypeHeader();null!==l&&u.setRequestHeader("Content-Type",l)}if(r.responseType){var f=r.responseType.toLowerCase();u.responseType="json"!==f?f:"text"}var m=r.serializeBody(),b=null,w=function(){if(null!==b)return b;var W=1223===u.status?204:u.status,se=u.statusText||"OK",fe=new Up(u.getAllResponseHeaders()),ve=function(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(u)||r.url;return b=new Z2({headers:fe,status:W,statusText:se,url:ve})},C=function(){var W=w(),se=W.headers,fe=W.status,ve=W.statusText,me=W.url,pe=null;204!==fe&&(pe=void 0===u.response?u.responseText:u.response),0===fe&&(fe=pe?200:0);var ke=fe>=200&&fe<300;if("json"===r.responseType&&"string"==typeof pe){var je=pe;pe=pe.replace(yP,"");try{pe=""!==pe?JSON.parse(pe):null}catch(qe){pe=je,ke&&(ke=!1,pe={error:qe,text:pe})}}ke?(o.next(new pP({body:pe,headers:se,status:fe,statusText:ve,url:me||void 0})),o.complete()):o.error(new vP({error:pe,headers:se,status:fe,statusText:ve,url:me||void 0}))},T=function(W){var se=w(),ve=new vP({error:W,status:u.status||0,statusText:u.statusText||"Unknown Error",url:se.url||void 0});o.error(ve)},I=!1,Z=function(W){I||(o.next(w()),I=!0);var se={type:y_.DownloadProgress,loaded:W.loaded};W.lengthComputable&&(se.total=W.total),"text"===r.responseType&&!!u.responseText&&(se.partialText=u.responseText),o.next(se)},Y=function(W){var se={type:y_.UploadProgress,loaded:W.loaded};W.lengthComputable&&(se.total=W.total),o.next(se)};return u.addEventListener("load",C),u.addEventListener("error",T),u.addEventListener("timeout",T),u.addEventListener("abort",T),r.reportProgress&&(u.addEventListener("progress",Z),null!==m&&u.upload&&u.upload.addEventListener("progress",Y)),u.send(m),o.next({type:y_.Sent}),function(){u.removeEventListener("error",T),u.removeEventListener("abort",T),u.removeEventListener("load",C),u.removeEventListener("timeout",T),r.reportProgress&&(u.removeEventListener("progress",Z),null!==m&&u.upload&&u.upload.removeEventListener("progress",Y)),u.readyState!==u.DONE&&u.abort()}})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Wn))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Lw=new v.OlP("XSRF_COOKIE_NAME"),hA=new v.OlP("XSRF_HEADER_NAME"),_P=function i(){(0,M.Z)(this,i)},kz=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this.doc=n,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return(0,R.Z)(s,[{key:"getToken",value:function(){if("server"===this.platform)return null;var r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Lr(r,this.cookieName),this.lastCookieString=r),this.lastToken}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(be),v.LFG(v.Lbi),v.LFG(Lw))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),bP=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this.tokenService=n,this.headerName=r}return(0,R.Z)(s,[{key:"intercept",value:function(r,a){var o=r.url.toLowerCase();if("GET"===r.method||"HEAD"===r.method||o.startsWith("http://")||o.startsWith("https://"))return a.handle(r);var u=this.tokenService.getToken();return null!==u&&!r.headers.has(this.headerName)&&(r=r.clone({headers:r.headers.set(this.headerName,u)})),a.handle(r)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(_P),v.LFG(hA))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),Cz=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this.backend=n,this.injector=r,this.chain=null}return(0,R.Z)(s,[{key:"handle",value:function(r){if(null===this.chain){var a=this.injector.get(gP,[]);this.chain=a.reduceRight(function(o,u){return new cA(o,u)},this.backend)}return this.chain.handle(r)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(rP),v.LFG(v.zs3))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),j2=function(){var i=function(){function s(){(0,M.Z)(this,s)}return(0,R.Z)(s,null,[{key:"disable",value:function(){return{ngModule:s,providers:[{provide:bP,useClass:B2}]}}},{key:"withOptions",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:s,providers:[r.cookieName?{provide:Lw,useValue:r.cookieName}:[],r.headerName?{provide:hA,useValue:r.headerName}:[]]}}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[bP,{provide:gP,useExisting:bP,multi:!0},{provide:_P,useClass:kz},{provide:Lw,useValue:"XSRF-TOKEN"},{provide:hA,useValue:"X-XSRF-TOKEN"}]}),i}(),W2=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[__,{provide:nP,useClass:Cz},Ow,{provide:rP,useExisting:Ow}],imports:[[j2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i}(),Ja=ne(6518),fA=ne(8470),Az=ne(2056);function dA(i,s){return new ro.y(function(n){var r=i.length;if(0!==r)for(var a=new Array(r),o=0,u=0,l=function(b){var w=(0,Ws.D)(i[b]),C=!1;n.add(w.subscribe({next:function(I){C||(C=!0,u++),a[b]=I},error:function(I){return n.error(I)},complete:function(){(++o===r||!C)&&(u===r&&n.next(s?s.reduce(function(I,Z,Y){return I[Z]=a[Y],I},{}):a),n.complete())}}))},f=0;f<r;f++)l(f);else n.complete()})}var VP=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),Ce=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[VP]]}),i}(),Ee=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[Ce]}),i}(),Cn=ne(1055),qt=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"notifyNext",value:function(a,o,u,l,f){this.destination.next(o)}},{key:"notifyError",value:function(a,o){this.destination.error(a)}},{key:"notifyComplete",value:function(a){this.destination.complete()}}]),n}(qs.L),qn=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).parent=r,u.outerValue=a,u.outerIndex=o,u.index=0,u}return(0,R.Z)(n,[{key:"_next",value:function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)}},{key:"_error",value:function(a){this.parent.notifyError(a,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(qs.L),oi=ne(6015);function Ai(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new qn(i,n,r);if(!a.closed)return s instanceof ro.y?s.subscribe(a):(0,oi.s)(s)(a)}var xs=function(){function i(s,n){(0,M.Z)(this,i),this.observables=s,this.project=n}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new Vo(n,this.observables,this.project))}}]),i}(),Vo=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;(0,M.Z)(this,n),(u=s.call(this,r)).observables=a,u.project=o,u.toRespond=[];var l=a.length;u.values=new Array(l);for(var f=0;f<l;f++)u.toRespond.push(f);for(var m=0;m<l;m++){var b=a[m];u.add(Ai((0,Ja.Z)(u),b,void 0,m))}return u}return(0,R.Z)(n,[{key:"notifyNext",value:function(a,o,u){this.values[u]=o;var l=this.toRespond;if(l.length>0){var f=l.indexOf(u);-1!==f&&l.splice(f,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(a){if(0===this.toRespond.length){var o=[a].concat((0,Kr.Z)(this.values));this.project?this._tryProject(o):this.destination.next(o)}}},{key:"_tryProject",value:function(a){var o;try{o=this.project.apply(this,a)}catch(u){return void this.destination.error(u)}this.destination.next(o)}}]),n}(qt),Bh=function(){function i(s){(0,M.Z)(this,i),this.predicate=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new zd(n,this.predicate))}}]),i}(),zd=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).predicate=a,o.skipping=!0,o.index=0,o}return(0,R.Z)(n,[{key:"_next",value:function(a){var o=this.destination;this.skipping&&this.tryCallPredicate(a),this.skipping||o.next(a)}},{key:"tryCallPredicate",value:function(a){try{var o=this.predicate(a,this.index++);this.skipping=Boolean(o)}catch(u){this.destination.error(u)}}}]),n}(qs.L),th="";function Tf(i){th=i}var Gm=function(){function i(s){(0,M.Z)(this,i),this.domStorage_=s,this.prefix_="firebase:"}return(0,R.Z)(i,[{key:"set",value:function(n,r){null==r?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,Re.Pz)(r))}},{key:"get",value:function(n){var r=this.domStorage_.getItem(this.prefixedName_(n));return null==r?null:(0,Re.cI)(r)}},{key:"remove",value:function(n){this.domStorage_.removeItem(this.prefixedName_(n))}},{key:"prefixedName_",value:function(n){return this.prefix_+n}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),i}(),qw=function(){function i(){(0,M.Z)(this,i),this.cache_={},this.isInMemoryStorage=!0}return(0,R.Z)(i,[{key:"set",value:function(n,r){null==r?delete this.cache_[n]:this.cache_[n]=r}},{key:"get",value:function(n){return(0,Re.r3)(this.cache_,n)?this.cache_[n]:null}},{key:"remove",value:function(n){delete this.cache_[n]}}]),i}(),UA=function(s){try{if("undefined"!=typeof window&&void 0!==window[s]){var n=window[s];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Gm(n)}}catch(r){}return new qw},Wp=UA("localStorage"),VA=UA("sessionStorage"),jm=new kh.Yd("@firebase/database"),YP=function(){var i=1;return function(){return i++}}(),zA=function(s){var n=(0,Re.dS)(s),r=new Re.gQ;r.update(n);var a=r.digest();return Re.US.encodeByteArray(a)},Yw=function i(){for(var s="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?s+=i.apply(null,r):s+="object"==typeof r?(0,Re.Pz)(r):r,s+=" "}return s},qp=null,KP=!0,HA=function(s,n){(0,Re.hu)(!n||!0===s||!1===s,"Can't turn on custom loggers persistently."),!0===s?(jm.logLevel=kh.in.VERBOSE,qp=jm.log.bind(jm),n&&VA.set("logging_enabled",!0)):"function"==typeof s?qp=s:(qp=null,VA.remove("logging_enabled"))},uu=function(){if(!0===KP&&(KP=!1,null===qp&&!0===VA.get("logging_enabled")&&HA(!0)),qp){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];var a=Yw.apply(null,n);qp(a)}},I_=function(s){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];uu.apply(void 0,[s].concat(r))}},TZ=function(){var s="FIREBASE INTERNAL ERROR: "+Yw.apply(void 0,arguments);jm.error(s)},Gd=function(){var s="FIREBASE FATAL ERROR: ".concat(Yw.apply(void 0,arguments));throw jm.error(s),new Error(s)},uc=function(){var s="FIREBASE WARNING: "+Yw.apply(void 0,arguments);jm.warn(s)},$P=function(s){return"number"==typeof s&&(s!=s||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)},Yp="[MIN_NAME]",jd="[MAX_NAME]",P_=function(s,n){if(s===n)return 0;if(s===Yp||n===jd)return-1;if(n===Yp||s===jd)return 1;var r=XP(s),a=XP(n);return null!==r?null!==a?r-a==0?s.length-n.length:r-a:-1:null!==a?1:s<n?-1:1},p7=function(s,n){return s===n?0:s<n?-1:1},GA=function(s,n){if(n&&s in n)return n[s];throw new Error("Missing required key ("+s+") in object: "+(0,Re.Pz)(n))},Yz=function i(s){if("object"!=typeof s||null===s)return(0,Re.Pz)(s);var n=[];for(var r in s)n.push(r);n.sort();for(var a="{",o=0;o<n.length;o++)0!==o&&(a+=","),a+=(0,Re.Pz)(n[o]),a+=":",a+=i(s[n[o]]);return a+"}"},Kz=function(s,n){var r=s.length;if(r<=n)return[s];for(var a=[],o=0;o<r;o+=n)a.push(s.substring(o,o+n>r?r:o+n));return a};function Hu(i,s){for(var n in i)i.hasOwnProperty(n)&&s(n,i[n])}var $z=function(s){(0,Re.hu)(!$P(s),"Invalid JSON number");var o,u,l,f,m,a=1023;0===s?(u=0,l=0,o=1/s==-1/0?1:0):(o=s<0,(s=Math.abs(s))>=Math.pow(2,1-a)?(u=(f=Math.min(Math.floor(Math.log(s)/Math.LN2),a))+a,l=Math.round(s*Math.pow(2,52-f)-Math.pow(2,52))):(u=0,l=Math.round(s/Math.pow(2,-1074))));var b=[];for(m=52;m;m-=1)b.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)b.push(u%2?1:0),u=Math.floor(u/2);b.push(o?1:0),b.reverse();var w=b.join(""),C="";for(m=0;m<64;m+=8){var T=parseInt(w.substr(m,8),2).toString(16);1===T.length&&(T="0"+T),C+=T}return C.toLowerCase()},y7=new RegExp("^-?(0*)\\d{1,10}$"),Xz=-2147483648,xZ=2147483647,XP=function(s){if(y7.test(s)){var n=Number(s);if(n>=Xz&&n<=xZ)return n}return null},Kw=function(s){try{s()}catch(n){setTimeout(function(){throw uc("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},jA=function(s,n){var r=setTimeout(s,n);return"object"==typeof r&&r.unref&&r.unref(),r},b7=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.appName_=s,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(function(a){return r.appCheck=a})}return(0,R.Z)(i,[{key:"getToken",value:function(n){var r=this;return this.appCheck?this.appCheck.getToken(n):new Promise(function(a,o){setTimeout(function(){r.appCheck?r.getToken(n).then(a,o):a(null)},0)})}},{key:"addTokenChangeListener",value:function(n){var r;null===(r=this.appCheckProvider)||void 0===r||r.get().then(function(a){return a.addTokenListener(n)})}},{key:"notifyForInvalidToken",value:function(){uc('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),i}(),w7=function(){function i(s,n,r){var a=this;(0,M.Z)(this,i),this.appName_=s,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(o){return a.auth_=o})}return(0,R.Z)(i,[{key:"getToken",value:function(n){var r=this;return this.auth_?this.auth_.getToken(n).catch(function(a){return a&&"auth/token-not-initialized"===a.code?(uu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)}):new Promise(function(a,o){setTimeout(function(){r.auth_?r.getToken(n).then(a,o):a(null)},0)})}},{key:"addTokenChangeListener",value:function(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(function(r){return r.addAuthTokenListener(n)})}},{key:"removeTokenChangeListener",value:function(n){this.authProvider_.get().then(function(r){return r.removeAuthTokenListener(n)})}},{key:"notifyForInvalidToken",value:function(){var n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';uc(n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')}}]),i}(),WA=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.accessToken=n}return(0,R.Z)(s,[{key:"getToken",value:function(r){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(r){r(this.accessToken)}},{key:"removeTokenChangeListener",value:function(r){}},{key:"notifyForInvalidToken",value:function(){}}]),s}();return i.OWNER="owner",i}(),nH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iH="websocket",aH="long_polling",IZ=function(){function i(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];(0,M.Z)(this,i),this.secure=n,this.namespace=r,this.webSocketOnly=a,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=l,this._host=s.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wp.get("host:"+s)||this._host}return(0,R.Z)(i,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Wp.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}},{key:"toURLString",value:function(){var n=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(n).concat(this.host,"/").concat(r)}}]),i}();function sH(i,s,n){var r;if((0,Re.hu)("string"==typeof s,"typeof type must == string"),(0,Re.hu)("object"==typeof n,"typeof params must == object"),s===iH)r=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(s!==aH)throw new Error("Unknown connection type: "+s);r=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(n.ns=i.namespace);var a=[];return Hu(n,function(o,u){a.push(o+"="+u)}),r+a.join("&")}var C7=function(){function i(){(0,M.Z)(this,i),this.counters_={}}return(0,R.Z)(i,[{key:"incrementCounter",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,Re.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=r}},{key:"get",value:function(){return(0,Re.p$)(this.counters_)}}]),i}(),PZ={},FZ={};function RZ(i){var s=i.toString();return PZ[s]||(PZ[s]=new C7),PZ[s]}var S7=function(){function i(s){(0,M.Z)(this,i),this.onMessage_=s,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return(0,R.Z)(i,[{key:"closeAfter",value:function(n,r){this.closeAfterResponse=n,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(n,r){var a=this;this.pendingResponses[n]=r;for(var o=function(){var f=a.pendingResponses[a.currentResponseNum];delete a.pendingResponses[a.currentResponseNum];for(var m=function(C){f[C]&&Kw(function(){a.onMessage_(f[C])})},b=0;b<f.length;++b)m(b);if(a.currentResponseNum===a.closeAfterResponse)return a.onClose&&(a.onClose(),a.onClose=null),"break";a.currentResponseNum++};this.pendingResponses[this.currentResponseNum]&&"break"!==o(););}}]),i}(),Z7=function(){function i(s,n,r,a,o,u,l){var f=this;(0,M.Z)(this,i),this.connId=s,this.repoInfo=n,this.applicationId=r,this.appCheckToken=a,this.authToken=o,this.transportSessionId=u,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=I_(s),this.stats_=RZ(n),this.urlFn=function(m){return f.appCheckToken&&(m.ac=f.appCheckToken),sH(n,aH,m)}}return(0,R.Z)(i,[{key:"open",value:function(n,r){var a=this;this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new S7(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){a.log_("Timed out trying to connect."),a.onClosed_(),a.connectTimeoutTimer_=null},Math.floor(3e4)),function(s){if((0,Re.Yr)()||"complete"===document.readyState)s();else{var n=!1,r=function a(){document.body?n||(n=!0,s()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&r()}),window.attachEvent("onload",r))}}(function(){if(!a.isClosed_){a.scriptTagHolder=new B7(function(){for(var l=arguments.length,f=new Array(l),m=0;m<l;m++)f[m]=arguments[m];var b=f[0],w=f[1],C=f[2];if(a.incrementIncomingBytes_(f),a.scriptTagHolder)if(a.connectTimeoutTimer_&&(clearTimeout(a.connectTimeoutTimer_),a.connectTimeoutTimer_=null),a.everConnected_=!0,"start"===b)a.id=w,a.password=C;else{if("close"!==b)throw new Error("Unrecognized command received: "+b);w?(a.scriptTagHolder.sendNewPolls=!1,a.myPacketOrderer.closeAfter(w,function(){a.onClosed_()})):a.onClosed_()}},function(){for(var l=arguments.length,f=new Array(l),m=0;m<l;m++)f[m]=arguments[m];var b=f[0],w=f[1];a.incrementIncomingBytes_(f),a.myPacketOrderer.handleResponse(b,w)},function(){a.onClosed_()},a.urlFn);var o={start:"t"};o.ser=Math.floor(1e8*Math.random()),a.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=a.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",a.transportSessionId&&(o.s=a.transportSessionId),a.lastSessionId&&(o.ls=a.lastSessionId),a.applicationId&&(o.p=a.applicationId),a.appCheckToken&&(o.ac=a.appCheckToken),"undefined"!=typeof location&&location.hostname&&nH.test(location.hostname)&&(o.r="f");var u=a.urlFn(o);a.log_("Connecting via long-poll to "+u),a.scriptTagHolder.addTag(u,function(){})}})}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(n){var r=(0,Re.Pz)(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);for(var a=(0,Re.h$)(r),o=Kz(a,1840),u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(n,r){if(!(0,Re.Yr)()){this.myDisconnFrame=document.createElement("iframe");var a={dframe:"t"};a.id=n,a.pw=r,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(n){var r=(0,Re.Pz)(n).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}],[{key:"forceAllow",value:function(){i.forceAllow_=!0}},{key:"forceDisallow",value:function(){i.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!((0,Re.Yr)()||!i.forceAllow_&&(i.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}}]),i}(),B7=function(){function i(s,n,r,a){if((0,M.Z)(this,i),this.onDisconnect=r,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Re.Yr)())this.commandCB=s,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=YP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=s,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=i.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){uu("frame writing exception"),f.stack&&uu(f.stack),uu(f)}}}return(0,R.Z)(i,[{key:"close",value:function(){var n=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==n.myIFrame&&(document.body.removeChild(n.myIFrame),n.myIFrame=null)},Math.floor(0)));var r=this.onDisconnect;r&&(this.onDisconnect=null,r())}},{key:"startLongPoll",value:function(n,r){for(this.myID=n,this.myPW=r,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;for(var r=this.urlFn(n),a="",o=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+a.length<=1870;){var l=this.pendingSegs.shift();a=a+"&seg"+o+"="+l.seg+"&ts"+o+"="+l.ts+"&d"+o+"="+l.d,o++}return this.addLongPollTag_(r+=a,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(n,r,a){this.pendingSegs.push({seg:n,ts:r,d:a}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(n,r){var a=this;this.outstandingRequests.add(r);var o=function(){a.outstandingRequests.delete(r),a.newRequest_()},u=setTimeout(o,Math.floor(25e3));this.addTag(n,function(){clearTimeout(u),o()})}},{key:"addTag",value:function(n,r){var a=this;(0,Re.Yr)()?this.doNodeLongPoll(n,r):setTimeout(function(){try{if(!a.sendNewPolls)return;var o=a.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=n,o.onload=o.onreadystatechange=function(){var u=o.readyState;(!u||"loaded"===u||"complete"===u)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),r())},o.onerror=function(){uu("Long-poll script failed to load: "+n),a.sendNewPolls=!1,a.close()},a.myIFrame.doc.body.appendChild(o)}catch(u){}},Math.floor(1))}}],[{key:"createIFrame_",value:function(){var n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||uu("No IE domain setting required")}catch(o){var a=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}}]),i}(),qA=null;"undefined"!=typeof MozWebSocket?qA=MozWebSocket:"undefined"!=typeof WebSocket&&(qA=WebSocket);var YA=function(){var i=function(){function s(n,r,a,o,u,l,f){(0,M.Z)(this,s),this.connId=n,this.applicationId=a,this.appCheckToken=o,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=I_(this.connId),this.stats_=RZ(r),this.connURL=s.connectionURL_(r,l,f,o),this.nodeAdmin=r.nodeAdmin}return(0,R.Z)(s,[{key:"open",value:function(r,a){var o=this;this.onDisconnect=a,this.onMessage=r,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wp.set("previous_websocket_failure",!0);try{if((0,Re.Yr)()){var u=this.nodeAdmin?"AdminNode":"Node",l={headers:{"User-Agent":"Firebase/".concat("5","/").concat(th,"/").concat(process.platform,"/").concat(u),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);var f=process.env,m=0===this.connURL.indexOf("wss://")?f.HTTPS_PROXY||f.https_proxy:f.HTTP_PROXY||f.http_proxy;m&&(l.proxy={origin:m}),this.mySock=new qA(this.connURL,[],l)}else this.mySock=new qA(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(C){this.log_("Error instantiating WebSocket.");var w=C.message||C.data;return w&&this.log_(w),void this.onClosed_()}this.mySock.onopen=function(){o.log_("Websocket connected."),o.everConnected_=!0},this.mySock.onclose=function(){o.log_("Websocket connection was disconnected."),o.mySock=null,o.onClosed_()},this.mySock.onmessage=function(C){o.handleIncomingFrame(C)},this.mySock.onerror=function(C){o.log_("WebSocket error.  Closing connection.");var T=C.message||C.data;T&&o.log_(T),o.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Wp.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(r){if(this.frames.push(r),this.frames.length===this.totalFrames){var a=this.frames.join("");this.frames=null;var o=(0,Re.cI)(a);this.onMessage(o)}}},{key:"handleNewFrameCount_",value:function(r){this.totalFrames=r,this.frames=[]}},{key:"extractFrameCount_",value:function(r){if((0,Re.hu)(null===this.frames,"We already have a frame buffer"),r.length<=6){var a=Number(r);if(!isNaN(a))return this.handleNewFrameCount_(a),null}return this.handleNewFrameCount_(1),r}},{key:"handleIncomingFrame",value:function(r){if(null!==this.mySock){var a=r.data;if(this.bytesReceived+=a.length,this.stats_.incrementCounter("bytes_received",a.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(a);else{var o=this.extractFrameCount_(a);null!==o&&this.appendFrame_(o)}}}},{key:"send",value:function(r){this.resetKeepAlive();var a=(0,Re.Pz)(r);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);var o=Kz(a,16384);o.length>1&&this.sendString_(String(o.length));for(var u=0;u<o.length;u++)this.sendString_(o[u])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var r=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){r.mySock&&r.sendString_("0"),r.resetKeepAlive()},Math.floor(45e3))}},{key:"sendString_",value:function(r){try{this.mySock.send(r)}catch(a){this.log_("Exception thrown from WebSocket.send():",a.message||a.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(r,a,o,u){var l={v:"5"};return!(0,Re.Yr)()&&"undefined"!=typeof location&&location.hostname&&nH.test(location.hostname)&&(l.r="f"),a&&(l.s=a),o&&(l.ls=o),u&&(l.ac=u),sH(r,iH,l)}},{key:"forceDisallow",value:function(){s.forceDisallow_=!0}},{key:"isAvailable",value:function(){var r=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(r=!0)}return!r&&null!==qA&&!s.forceDisallow_}},{key:"previouslyFailed",value:function(){return Wp.isInMemoryStorage||!0===Wp.get("previous_websocket_failure")}}]),s}();return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i}(),z7=function(){function i(s){(0,M.Z)(this,i),this.initTransports_(s)}return(0,R.Z)(i,[{key:"initTransports_",value:function(n){var r=YA&&YA.isAvailable(),a=r&&!YA.previouslyFailed();if(n.webSocketOnly&&(r||uc("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[YA];else{var l,o=this.transports_=[],u=(0,Ve.Z)(i.ALL_TRANSPORTS);try{for(u.s();!(l=u.n()).done;){var f=l.value;f&&f.isAvailable()&&o.push(f)}}catch(m){u.e(m)}finally{u.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Z7,YA]}}]),i}(),_H=function(){function i(s,n,r,a,o,u,l,f,m,b){(0,M.Z)(this,i),this.id=s,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=a,this.authToken_=o,this.onMessage_=u,this.onReady_=l,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=I_("c:"+this.id+":"),this.transportManager_=new z7(n),this.log_("Connection created"),this.start_()}return(0,R.Z)(i,[{key:"start_",value:function(){var n=this,r=this.transportManager_.initialTransport();this.conn_=new r(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=r.responsesRequiredToBeHealthy||0;var a=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){n.conn_&&n.conn_.open(a,o)},Math.floor(0));var u=r.healthyTimeout||0;u>0&&(this.healthyTimeout_=jA(function(){n.healthyTimeout_=null,n.isHealthy_||(n.conn_&&n.conn_.bytesReceived>102400?(n.log_("Connection exceeded healthy timeout but has received "+n.conn_.bytesReceived+" bytes.  Marking connection healthy."),n.isHealthy_=!0,n.conn_.markConnectionHealthy()):n.conn_&&n.conn_.bytesSent>10240?n.log_("Connection exceeded healthy timeout but has sent "+n.conn_.bytesSent+" bytes.  Leaving connection alive."):(n.log_("Closing unhealthy connection after timeout."),n.close()))},Math.floor(u)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(n){var r=this;return function(a){n===r.conn_?r.onConnectionLost_(a):n===r.secondaryConn_?(r.log_("Secondary connection lost."),r.onSecondaryConnectionLost_()):r.log_("closing an old connection")}}},{key:"connReceiver_",value:function(n){var r=this;return function(a){2!==r.state_&&(n===r.rx_?r.onPrimaryMessageReceived_(a):n===r.secondaryConn_?r.onSecondaryMessageReceived_(a):r.log_("message on old connection"))}}},{key:"sendRequest",value:function(n){this.sendData_({t:"d",d:n})}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(n){if("t"in n){var r=n.t;"a"===r?this.upgradeIfSecondaryHealthy_():"r"===r?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===r&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(n){var r=GA("t",n),a=GA("d",n);if("c"===r)this.onSecondaryControl_(a);else{if("d"!==r)throw new Error("Unknown protocol layer: "+r);this.pendingDataMessages.push(a)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(n){var r=GA("t",n),a=GA("d",n);"c"===r?this.onControl_(a):"d"===r&&this.onDataMessage_(a)}},{key:"onDataMessage_",value:function(n){this.onPrimaryResponse_(),this.onMessage_(n)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(n){var r=GA("t",n);if("d"in n){var a=n.d;if("h"===r)this.onHandshake_(a);else if("n"===r){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===r?this.onConnectionShutdown_(a):"r"===r?this.onReset_(a):"e"===r?TZ("Server Error: "+a):"o"===r?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):TZ("Unknown control packet command: "+r)}}},{key:"onHandshake_",value:function(n){var r=n.ts,a=n.v,o=n.h;this.sessionId=n.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),"5"!==a&&uc("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}},{key:"startUpgrade_",value:function(n){var r=this;this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var a=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,o),jA(function(){r.secondaryConn_&&(r.log_("Timed out trying to upgrade."),r.secondaryConn_.close())},Math.floor(6e4))}},{key:"onReset_",value:function(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(n,r){var a=this;this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jA(function(){a.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}},{key:"onConnectionLost_",value:function(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),i}(),bH=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"put",value:function(n,r,a,o){}},{key:"merge",value:function(n,r,a,o){}},{key:"refreshAuthToken",value:function(n){}},{key:"refreshAppCheckToken",value:function(n){}},{key:"onDisconnectPut",value:function(n,r,a){}},{key:"onDisconnectMerge",value:function(n,r,a){}},{key:"onDisconnectCancel",value:function(n,r){}},{key:"reportStats",value:function(n){}}]),i}(),wH=function(){function i(s){(0,M.Z)(this,i),this.allowedEvents_=s,this.listeners_={},(0,Re.hu)(Array.isArray(s)&&s.length>0,"Requires a non-empty array")}return(0,R.Z)(i,[{key:"trigger",value:function(n){if(Array.isArray(this.listeners_[n])){for(var r=(0,Kr.Z)(this.listeners_[n]),a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];for(var l=0;l<r.length;l++)r[l].callback.apply(r[l].context,o)}}},{key:"on",value:function(n,r,a){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:r,context:a});var o=this.getInitialEvent(n);o&&r.apply(a,o)}},{key:"off",value:function(n,r,a){this.validateEventType_(n);for(var o=this.listeners_[n]||[],u=0;u<o.length;u++)if(o[u].callback===r&&(!a||a===o[u].context))return void o.splice(u,1)}},{key:"validateEventType_",value:function(n){(0,Re.hu)(this.allowedEvents_.find(function(r){return r===n}),"Unknown event: "+n)}}]),i}(),EH=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this,["online"])).online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Re.uI)()&&(window.addEventListener("online",function(){r.online_||(r.online_=!0,r.trigger("online",!0))},!1),window.addEventListener("offline",function(){r.online_&&(r.online_=!1,r.trigger("online",!1))},!1)),r}return(0,R.Z)(n,[{key:"getInitialEvent",value:function(a){return(0,Re.hu)("online"===a,"Unknown event type: "+a),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(wH),Ya=function(){function i(s,n){if((0,M.Z)(this,i),void 0===n){this.pieces_=s.split("/");for(var r=0,a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[r]=this.pieces_[a],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=s,this.pieceNum_=n}return(0,R.Z)(i,[{key:"toString",value:function(){for(var n="",r=this.pieceNum_;r<this.pieces_.length;r++)""!==this.pieces_[r]&&(n+="/"+this.pieces_[r]);return n||"/"}}]),i}();function Va(){return new Ya("")}function zi(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Wm(i){return i.pieces_.length-i.pieceNum_}function _s(i){var s=i.pieceNum_;return s<i.pieces_.length&&s++,new Ya(i.pieces_,s)}function LZ(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function KA(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i.pieces_.slice(i.pieceNum_+s)}function DH(i){if(i.pieceNum_>=i.pieces_.length)return null;for(var s=[],n=i.pieceNum_;n<i.pieces_.length-1;n++)s.push(i.pieces_[n]);return new Ya(s,0)}function $s(i,s){for(var n=[],r=i.pieceNum_;r<i.pieces_.length;r++)n.push(i.pieces_[r]);if(s instanceof Ya)for(var a=s.pieceNum_;a<s.pieces_.length;a++)n.push(s.pieces_[a]);else for(var o=s.split("/"),u=0;u<o.length;u++)o[u].length>0&&n.push(o[u]);return new Ya(n,0)}function Hi(i){return i.pieceNum_>=i.pieces_.length}function lc(i,s){var n=zi(i),r=zi(s);if(null===n)return s;if(n===r)return lc(_s(i),_s(s));throw new Error("INTERNAL ERROR: innerPath ("+s+") is not within outerPath ("+i+")")}function X7(i,s){for(var n=KA(i,0),r=KA(s,0),a=0;a<n.length&&a<r.length;a++){var o=P_(n[a],r[a]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function NZ(i,s){if(Wm(i)!==Wm(s))return!1;for(var n=i.pieceNum_,r=s.pieceNum_;n<=i.pieces_.length;n++,r++)if(i.pieces_[n]!==s.pieces_[r])return!1;return!0}function Uh(i,s){var n=i.pieceNum_,r=s.pieceNum_;if(Wm(i)>Wm(s))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==s.pieces_[r])return!1;++n,++r}return!0}var Q7=function i(s,n){(0,M.Z)(this,i),this.errorPrefix_=n,this.parts_=KA(s,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Re.ug)(this.parts_[r]);SH(this)};function SH(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+F_(i))}function F_(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}var eF,BZ,tq=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a,o;return(0,M.Z)(this,n),r=s.call(this,["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(o="visibilitychange",a="hidden"):void 0!==document.mozHidden?(o="mozvisibilitychange",a="mozHidden"):void 0!==document.msHidden?(o="msvisibilitychange",a="msHidden"):void 0!==document.webkitHidden&&(o="webkitvisibilitychange",a="webkitHidden")),r.visible_=!0,o&&document.addEventListener(o,function(){var u=!document[a];u!==r.visible_&&(r.visible_=u,r.trigger("visible",u))},!1),r}return(0,R.Z)(n,[{key:"getInitialEvent",value:function(a){return(0,Re.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(wH),$A=1e3,R_=function(){var i=function(s){(0,x.Z)(r,s);var a,n=(0,oe.Z)(r);function r(a,o,u,l,f,m,b,w){var C;if((0,M.Z)(this,r),(C=n.call(this)).repoInfo_=a,C.applicationId_=o,C.onDataUpdate_=u,C.onConnectStatus_=l,C.onServerInfoUpdate_=f,C.authTokenProvider_=m,C.appCheckTokenProvider_=b,C.authOverride_=w,C.id=r.nextPersistentConnectionId_++,C.log_=I_("p:"+C.id+":"),C.interruptReasons_={},C.listens=new Map,C.outstandingPuts_=[],C.outstandingGets_=[],C.outstandingPutCount_=0,C.outstandingGetCount_=0,C.onDisconnectRequestQueue_=[],C.connected_=!1,C.reconnectDelay_=$A,C.maxReconnectDelay_=3e5,C.securityDebugCallback_=null,C.lastSessionId=null,C.establishConnectionTimer_=null,C.visible_=!1,C.requestCBHash_={},C.requestNumber_=0,C.realtime_=null,C.authToken_=null,C.appCheckToken_=null,C.forceTokenRefresh_=!1,C.invalidAuthTokenCount_=0,C.invalidAppCheckTokenCount_=0,C.firstConnection_=!0,C.lastConnectionAttemptTime_=null,C.lastConnectionEstablishedTime_=null,w&&!(0,Re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return tq.getInstance().on("visible",C.onVisible_,(0,Ja.Z)(C)),-1===a.host.indexOf("fblocal")&&EH.getInstance().on("online",C.onOnline_,(0,Ja.Z)(C)),C}return(0,R.Z)(r,[{key:"sendRequest",value:function(o,u,l){var f=++this.requestNumber_,m={r:f,a:o,b:u};this.log_((0,Re.Pz)(m)),(0,Re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(m),l&&(this.requestCBHash_[f]=l)}},{key:"get",value:function(o){var u=this;this.initConnection_();var l=new Re.BH,f={p:o._path.toString(),q:o._queryObject},m={action:"g",request:f,onComplete:function(C){var T=C.d;"ok"===C.s?(u.onDataUpdate_(f.p,T,!1,null),l.resolve(T)):l.reject(T)}};this.outstandingGets_.push(m),this.outstandingGetCount_++;var b=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var w=u.outstandingGets_[b];void 0===w||m!==w||(delete u.outstandingGets_[b],u.outstandingGetCount_--,0===u.outstandingGetCount_&&(u.outstandingGets_=[]),u.log_("get "+b+" timed out on connection"),l.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(b),l.promise}},{key:"listen",value:function(o,u,l,f){this.initConnection_();var m=o._queryIdentifier,b=o._path.toString();this.log_("Listen called for "+b+" "+m),this.listens.has(b)||this.listens.set(b,new Map),(0,Re.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Re.hu)(!this.listens.get(b).has(m),"listen() called twice for same path/queryId.");var w={onComplete:f,hashFn:u,query:o,tag:l};this.listens.get(b).set(m,w),this.connected_&&this.sendListen_(w)}},{key:"sendGet_",value:function(o){var u=this,l=this.outstandingGets_[o];this.sendRequest("g",l.request,function(f){delete u.outstandingGets_[o],u.outstandingGetCount_--,0===u.outstandingGetCount_&&(u.outstandingGets_=[]),l.onComplete&&l.onComplete(f)})}},{key:"sendListen_",value:function(o){var u=this,l=o.query,f=l._path.toString(),m=l._queryIdentifier;this.log_("Listen on "+f+" for "+m);var b={p:f};o.tag&&(b.q=l._queryObject,b.t=o.tag),b.h=o.hashFn(),this.sendRequest("q",b,function(C){var T=C.d,I=C.s;r.warnOnListenWarnings_(T,l),(u.listens.get(f)&&u.listens.get(f).get(m))===o&&(u.log_("listen response",C),"ok"!==I&&u.removeListen_(f,m),o.onComplete&&o.onComplete(I,T))})}},{key:"refreshAuthToken",value:function(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(o)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(o){(o&&40===o.length||(0,Re.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})}},{key:"tryAuth",value:function(){var o=this;if(this.connected_&&this.authToken_){var u=this.authToken_,l=(0,Re.w9)(u)?"auth":"gauth",f={cred:u};null===this.authOverride_?f.noauth=!0:"object"==typeof this.authOverride_&&(f.authvar=this.authOverride_),this.sendRequest(l,f,function(m){var b=m.s,w=m.d||"error";o.authToken_===u&&("ok"===b?o.invalidAuthTokenCount_=0:o.onAuthRevoked_(b,w))})}}},{key:"tryAppCheck",value:function(){var o=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(u){var l=u.s,f=u.d||"error";"ok"===l?o.invalidAppCheckTokenCount_=0:o.onAppCheckRevoked_(l,f)})}},{key:"unlisten",value:function(o,u){var l=o._path.toString(),f=o._queryIdentifier;this.log_("Unlisten called for "+l+" "+f),(0,Re.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,f)&&this.connected_&&this.sendUnlisten_(l,f,o._queryObject,u)}},{key:"sendUnlisten_",value:function(o,u,l,f){this.log_("Unlisten on "+o+" for "+u);var m={p:o};f&&(m.q=l,m.t=f),this.sendRequest("n",m)}},{key:"onDisconnectPut",value:function(o,u,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,u,l):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:u,onComplete:l})}},{key:"onDisconnectMerge",value:function(o,u,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,u,l):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:u,onComplete:l})}},{key:"onDisconnectCancel",value:function(o,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,u):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:u})}},{key:"sendOnDisconnect_",value:function(o,u,l,f){var m={p:u,d:l};this.log_("onDisconnect "+o,m),this.sendRequest(o,m,function(b){f&&setTimeout(function(){f(b.s,b.d)},Math.floor(0))})}},{key:"put",value:function(o,u,l,f){this.putInternal("p",o,u,l,f)}},{key:"merge",value:function(o,u,l,f){this.putInternal("m",o,u,l,f)}},{key:"putInternal",value:function(o,u,l,f,m){this.initConnection_();var b={p:u,d:l};void 0!==m&&(b.h=m),this.outstandingPuts_.push({action:o,request:b,onComplete:f}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+u)}},{key:"sendPut_",value:function(o){var u=this,l=this.outstandingPuts_[o].action,f=this.outstandingPuts_[o].request,m=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(l,f,function(b){u.log_(l+" response",b),delete u.outstandingPuts_[o],u.outstandingPutCount_--,0===u.outstandingPutCount_&&(u.outstandingPuts_=[]),m&&m(b.s,b.d)})}},{key:"reportStats",value:function(o){var u=this;if(this.connected_){var l={c:o};this.log_("reportStats",l),this.sendRequest("s",l,function(f){"ok"!==f.s&&u.log_("reportStats","Error sending stats: "+f.d)})}}},{key:"onDataMessage_",value:function(o){if("r"in o){this.log_("from server: "+(0,Re.Pz)(o));var u=o.r,l=this.requestCBHash_[u];l&&(delete this.requestCBHash_[u],l(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}},{key:"onDataPush_",value:function(o,u){this.log_("handleServerMessage",o,u),"d"===o?this.onDataUpdate_(u.p,u.d,!1,u.t):"m"===o?this.onDataUpdate_(u.p,u.d,!0,u.t):"c"===o?this.onListenRevoked_(u.p,u.q):"ac"===o?this.onAuthRevoked_(u.s,u.d):"apc"===o?this.onAppCheckRevoked_(u.s,u.d):"sd"===o?this.onSecurityDebugPacket_(u):TZ("Unrecognized action received from server: "+(0,Re.Pz)(o)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(o,u){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=u,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(o){var u=this;(0,Re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){u.establishConnectionTimer_=null,u.establishConnection_()},Math.floor(o))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$A,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}},{key:"onOnline_",value:function(o){o?(this.log_("Browser went online."),this.reconnectDelay_=$A,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$A),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var u=(new Date).getTime()-this.lastConnectionAttemptTime_,l=Math.max(0,this.reconnectDelay_-u);l=Math.random()*l,this.log_("Trying to reconnect in "+l+"ms"),this.scheduleConnect_(l),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:(a=(0,Qt.Z)(Ke().mark(function u(){var f,m,b,w,C,T,I,Z,V,se,fe,ve,l=this;return Ke().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(!this.shouldReconnect_()){pe.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,f=this.onDataMessage_.bind(this),m=this.onReady_.bind(this),b=this.onRealtimeDisconnect_.bind(this),w=this.id+":"+r.nextConnectionId_++,C=this.lastSessionId,T=!1,I=null,this.realtime_={close:Z=function(){I?I.close():(T=!0,b())},sendRequest:function(je){(0,Re.hu)(I,"sendRequest call when we're not connected not allowed."),I.sendRequest(je)}},V=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,pe.prev=16,pe.next=19,Promise.all([this.authTokenProvider_.getToken(V),this.appCheckTokenProvider_.getToken(V)]);case 19:se=(0,Te.Z)(pe.sent,2),fe=se[0],ve=se[1],T?uu("getToken() completed but was canceled"):(uu("getToken() completed. Creating connection."),this.authToken_=fe&&fe.accessToken,this.appCheckToken_=ve&&ve.token,I=new _H(w,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,f,m,b,function(ke){uc(ke+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},C)),pe.next=30;break;case 26:pe.prev=26,pe.t0=pe.catch(16),this.log_("Failed to get token: "+pe.t0),T||(this.repoInfo_.nodeAdmin&&uc(pe.t0),Z());case 30:case"end":return pe.stop()}},u,this,[[16,26]])})),function(){return a.apply(this,arguments)})},{key:"interrupt",value:function(o){uu("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(o){uu("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,Re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$A,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(o){var u=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:u})}},{key:"cancelSentTransactions_",value:function(){for(var o=0;o<this.outstandingPuts_.length;o++){var u=this.outstandingPuts_[o];u&&"h"in u.request&&u.queued&&(u.onComplete&&u.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(o,u){var l;l=u?u.map(function(m){return Yz(m)}).join("$"):"default";var f=this.removeListen_(o,l);f&&f.onComplete&&f.onComplete("permission_denied")}},{key:"removeListen_",value:function(o,u){var f,l=new Ya(o).toString();if(this.listens.has(l)){var m=this.listens.get(l);f=m.get(u),m.delete(u),0===m.size&&this.listens.delete(l)}else f=void 0;return f}},{key:"onAuthRevoked_",value:function(o,u){uu("Auth token revoked: "+o+"/"+u),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(o,u){uu("App check token revoked: "+o+"/"+u),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var u,o=(0,Ve.Z)(this.listens.values());try{for(o.s();!(u=o.n()).done;){var m,f=(0,Ve.Z)(u.value.values());try{for(f.s();!(m=f.n()).done;)this.sendListen_(m.value)}catch(I){f.e(I)}finally{f.f()}}}catch(I){o.e(I)}finally{o.f()}for(var w=0;w<this.outstandingPuts_.length;w++)this.outstandingPuts_[w]&&this.sendPut_(w);for(;this.onDisconnectRequestQueue_.length;){var C=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(C.action,C.pathString,C.data,C.onComplete)}for(var T=0;T<this.outstandingGets_.length;T++)this.outstandingGets_[T]&&this.sendGet_(T)}},{key:"sendConnectStats_",value:function(){var o={},u="js";(0,Re.Yr)()&&(u=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+u+"."+th.replace(/\./g,"-")]=1,(0,Re.uI)()?o["framework.cordova"]=1:(0,Re.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}},{key:"shouldReconnect_",value:function(){var o=EH.getInstance().currentlyOnline();return(0,Re.xb)(this.interruptReasons_)&&o}}],[{key:"warnOnListenWarnings_",value:function(o,u){if(o&&"object"==typeof o&&(0,Re.r3)(o,"w")){var l=(0,Re.DV)(o,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){var f='".indexOn": "'+u._queryParams.getIndex().toString()+'"',m=u._path.toString();uc("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(f," at ")+"".concat(m," to your security rules for better performance."))}}}}]),r}(bH);return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i}(),ea=function(){function i(s,n){(0,M.Z)(this,i),this.name=s,this.node=n}return(0,R.Z)(i,null,[{key:"Wrap",value:function(n,r){return new i(n,r)}}]),i}(),JP=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(n,r){var a=new ea(Yp,n),o=new ea(Yp,r);return 0!==this.compare(a,o)}},{key:"minPost",value:function(){return ea.MIN}}]),i}(),xH=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"compare",value:function(a,o){return P_(a.name,o.name)}},{key:"isDefinedOn",value:function(a){throw(0,Re.g5)("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(a,o){return!1}},{key:"minPost",value:function(){return ea.MIN}},{key:"maxPost",value:function(){return new ea(jd,eF)}},{key:"makePost",value:function(a,o){return(0,Re.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new ea(a,eF)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return eF},set:function(a){eF=a}}]),n}(JP),Wd=new xH,tF=function(){function i(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;(0,M.Z)(this,i),this.isReverse_=a,this.resultGenerator_=o,this.nodeStack_=[];for(var u=1;!s.isEmpty();)if(s=s,u=n?r(s.key,n):1,a&&(u*=-1),u<0)s=this.isReverse_?s.left:s.right;else{if(0===u){this.nodeStack_.push(s);break}this.nodeStack_.push(s),s=this.isReverse_?s.right:s.left}}return(0,R.Z)(i,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var r,n=this.nodeStack_.pop();if(r=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return r}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}]),i}(),xf=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.key=n,this.value=r,this.color=null!=a?a:s.RED,this.left=null!=o?o:Kp.EMPTY_NODE,this.right=null!=u?u:Kp.EMPTY_NODE}return(0,R.Z)(s,[{key:"copy",value:function(r,a,o,u,l){return new s(null!=r?r:this.key,null!=a?a:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=l?l:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(r){return this.left.inorderTraversal(r)||!!r(this.key,this.value)||this.right.inorderTraversal(r)}},{key:"reverseTraversal",value:function(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(r,a,o){var u=this,l=o(r,u.key);return(u=l<0?u.copy(null,null,null,u.left.insert(r,a,o),null):0===l?u.copy(null,a,null,null,null):u.copy(null,null,null,null,u.right.insert(r,a,o))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Kp.EMPTY_NODE;var r=this;return!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),(r=r.copy(null,null,null,r.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(r,a){var o,u;if(a(r,(o=this).key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(r,a),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===a(r,o.key)){if(o.right.isEmpty())return Kp.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(r,a))}return o.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var r=this;return r.right.isRed_()&&!r.left.isRed_()&&(r=r.rotateLeft_()),r.left.isRed_()&&r.left.left.isRed_()&&(r=r.rotateRight_()),r.left.isRed_()&&r.right.isRed_()&&(r=r.colorFlip_()),r}},{key:"moveRedLeft_",value:function(){var r=this.colorFlip_();return r.right.left.isRed_()&&(r=(r=(r=r.copy(null,null,null,null,r.right.rotateRight_())).rotateLeft_()).colorFlip_()),r}},{key:"moveRedRight_",value:function(){var r=this.colorFlip_();return r.left.left.isRed_()&&(r=(r=r.rotateRight_()).colorFlip_()),r}},{key:"rotateLeft_",value:function(){var r=this.copy(null,null,s.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}},{key:"rotateRight_",value:function(){var r=this.copy(null,null,s.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}},{key:"colorFlip_",value:function(){var r=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,a)}},{key:"checkMaxDepth_",value:function(){var r=this.check_();return Math.pow(2,r)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var r=this.left.check_();if(r!==this.right.check_())throw new Error("Black depths differ");return r+(this.isRed_()?0:1)}}]),s}();return i.RED=!0,i.BLACK=!1,i}(),oq=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"copy",value:function(n,r,a,o,u){return this}},{key:"insert",value:function(n,r,a){return new xf(n,r,null)}},{key:"remove",value:function(n,r){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(n){return!1}},{key:"reverseTraversal",value:function(n){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),i}(),Kp=function(){var i=function(){function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.EMPTY_NODE;(0,M.Z)(this,s),this.comparator_=n,this.root_=r}return(0,R.Z)(s,[{key:"insert",value:function(r,a){return new s(this.comparator_,this.root_.insert(r,a,this.comparator_).copy(null,null,xf.BLACK,null,null))}},{key:"remove",value:function(r){return new s(this.comparator_,this.root_.remove(r,this.comparator_).copy(null,null,xf.BLACK,null,null))}},{key:"get",value:function(r){for(var a,o=this.root_;!o.isEmpty();){if(0===(a=this.comparator_(r,o.key)))return o.value;a<0?o=o.left:a>0&&(o=o.right)}return null}},{key:"getPredecessorKey",value:function(r){for(var a,o=this.root_,u=null;!o.isEmpty();){if(0===(a=this.comparator_(r,o.key))){if(o.left.isEmpty())return u?u.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}a<0?o=o.left:a>0&&(u=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(r){return this.root_.inorderTraversal(r)}},{key:"reverseTraversal",value:function(r){return this.root_.reverseTraversal(r)}},{key:"getIterator",value:function(r){return new tF(this.root_,null,this.comparator_,!1,r)}},{key:"getIteratorFrom",value:function(r,a){return new tF(this.root_,r,this.comparator_,!1,a)}},{key:"getReverseIteratorFrom",value:function(r,a){return new tF(this.root_,r,this.comparator_,!0,a)}},{key:"getReverseIterator",value:function(r){return new tF(this.root_,null,this.comparator_,!0,r)}}]),s}();return i.EMPTY_NODE=new oq,i}();function uq(i,s){return P_(i.name,s.name)}function ZZ(i,s){return P_(i,s)}var PH,FH,RH,UZ,XA,MH=function(s){return"number"==typeof s?"number:"+$z(s):"string:"+s},IH=function(s){if(s.isLeafNode()){var n=s.val();(0,Re.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,Re.r3)(n,".sv"),"Priority must be a string or number.")}else(0,Re.hu)(s===BZ||s.isEmpty(),"priority of unexpected type.");(0,Re.hu)(s===BZ||s.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},$w=function(){var i=function(){function s(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.__childrenNodeConstructor.EMPTY_NODE;(0,M.Z)(this,s),this.value_=n,this.priorityNode_=r,this.lazyHash_=null,(0,Re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),IH(this.priorityNode_)}return(0,R.Z)(s,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(r){return new s(this.value_,r)}},{key:"getImmediateChild",value:function(r){return".priority"===r?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(r){return Hi(r)?this:".priority"===zi(r)?this.priorityNode_:s.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(r,a){return null}},{key:"updateImmediateChild",value:function(r,a){return".priority"===r?this.updatePriority(a):a.isEmpty()&&".priority"!==r?this:s.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(r,a).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(r,a){var o=zi(r);return null===o?a:a.isEmpty()&&".priority"!==o?this:((0,Re.hu)(".priority"!==o||1===Wm(r),".priority must be the last token in a path"),this.updateImmediateChild(o,s.__childrenNodeConstructor.EMPTY_NODE.updateChild(_s(r),a)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(r,a){return!1}},{key:"val",value:function(r){return r&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var r="";this.priorityNode_.isEmpty()||(r+="priority:"+MH(this.priorityNode_.val())+":");var a=typeof this.value_;r+=a+":",r+="number"===a?$z(this.value_):this.value_,this.lazyHash_=zA(r)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(r){return r===s.__childrenNodeConstructor.EMPTY_NODE?1:r instanceof s.__childrenNodeConstructor?-1:((0,Re.hu)(r.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(r))}},{key:"compareToLeafNode_",value:function(r){var a=typeof r.value_,o=typeof this.value_,u=s.VALUE_TYPE_ORDER.indexOf(a),l=s.VALUE_TYPE_ORDER.indexOf(o);return(0,Re.hu)(u>=0,"Unknown leaf type: "+a),(0,Re.hu)(l>=0,"Unknown leaf type: "+o),u===l?"object"===o?0:this.value_<r.value_?-1:this.value_===r.value_?0:1:l-u}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(r){return r===this||!!r.isLeafNode()&&(this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_))}}],[{key:"__childrenNodeConstructor",get:function(){return PH},set:function(r){PH=r}}]),s}();return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i}(),Ms=new(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"compare",value:function(a,o){var u=a.node.getPriority(),l=o.node.getPriority(),f=u.compareTo(l);return 0===f?P_(a.name,o.name):f}},{key:"isDefinedOn",value:function(a){return!a.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(a,o){return!a.getPriority().equals(o.getPriority())}},{key:"minPost",value:function(){return ea.MIN}},{key:"maxPost",value:function(){return new ea(jd,new $w("[PRIORITY-POST]",RH))}},{key:"makePost",value:function(a,o){var u=FH(a);return new ea(o,new $w("[PRIORITY-POST]",u))}},{key:"toString",value:function(){return".priority"}}]),n}(JP)),dq=Math.log(2),pq=function(){function i(s){(0,M.Z)(this,i),this.count=parseInt(Math.log(s+1)/dq,10),this.current_=this.count-1;var a=parseInt(Array(this.count+1).join("1"),2);this.bits_=s+1&a}return(0,R.Z)(i,[{key:"nextBitIsOne",value:function(){var n=!(this.bits_&1<<this.current_);return this.current_--,n}}]),i}(),nF=function(s,n,r,a){s.sort(n);var o=function m(b,w){var T,I,C=w-b;if(0===C)return null;if(1===C)return T=s[b],I=r?r(T):T,new xf(I,T.node,xf.BLACK,null,null);var Z=parseInt(C/2,10)+b,Y=m(b,Z),V=m(Z+1,w);return T=s[Z],I=r?r(T):T,new xf(I,T.node,xf.BLACK,Y,V)},f=function(b){for(var w=null,C=null,T=s.length,I=function(fe,ve){var me=T-fe,pe=T;T-=fe;var ke=o(me+1,pe),je=s[me],qe=r?r(je):je;Z(new xf(qe,je.node,ve,null,ke))},Z=function(fe){w?(w.left=fe,w=fe):(C=fe,w=fe)},Y=0;Y<b.count;++Y){var V=b.nextBitIsOne(),W=Math.pow(2,b.count-(Y+1));V?I(W,xf.BLACK):(I(W,xf.BLACK),I(W,xf.RED))}return C}(new pq(s.length));return new Kp(a||n,f)},Xw={},rF=function(){function i(s,n){(0,M.Z)(this,i),this.indexes_=s,this.indexSet_=n}return(0,R.Z)(i,[{key:"get",value:function(n){var r=(0,Re.DV)(this.indexes_,n);if(!r)throw new Error("No index defined for "+n);return r instanceof Kp?r:null}},{key:"hasIndex",value:function(n){return(0,Re.r3)(this.indexSet_,n.toString())}},{key:"addIndex",value:function(n,r){(0,Re.hu)(n!==Wd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var a=[],o=!1,u=r.getIterator(ea.Wrap),l=u.getNext();l;)o=o||n.isDefinedOn(l.node),a.push(l),l=u.getNext();var f;f=o?nF(a,n.getCompare()):Xw;var m=n.toString(),b=Object.assign({},this.indexSet_);b[m]=n;var w=Object.assign({},this.indexes_);return w[m]=f,new i(w,b)}},{key:"addToIndexes",value:function(n,r){var a=this;return new i((0,Re.UI)(this.indexes_,function(u,l){var f=(0,Re.DV)(a.indexSet_,l);if((0,Re.hu)(f,"Missing index implementation for "+l),u===Xw){if(f.isDefinedOn(n.node)){for(var m=[],b=r.getIterator(ea.Wrap),w=b.getNext();w;)w.name!==n.name&&m.push(w),w=b.getNext();return m.push(n),nF(m,f.getCompare())}return Xw}var C=r.get(n.name),T=u;return C&&(T=T.remove(new ea(n.name,C))),T.insert(n,n.node)}),this.indexSet_)}},{key:"removeFromIndexes",value:function(n,r){return new i((0,Re.UI)(this.indexes_,function(o){if(o===Xw)return o;var u=r.get(n.name);return u?o.remove(new ea(n.name,u)):o}),this.indexSet_)}}],[{key:"Default",get:function(){return(0,Re.hu)(Xw&&Ms,"ChildrenNode.ts has not been loaded"),UZ=UZ||new i({".priority":Xw},{".priority":Ms})}}]),i}(),ki=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this.children_=n,this.priorityNode_=r,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&IH(this.priorityNode_),this.children_.isEmpty()&&(0,Re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return(0,R.Z)(s,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||XA}},{key:"updatePriority",value:function(r){return this.children_.isEmpty()?this:new s(this.children_,r,this.indexMap_)}},{key:"getImmediateChild",value:function(r){if(".priority"===r)return this.getPriority();var a=this.children_.get(r);return null===a?XA:a}},{key:"getChild",value:function(r){var a=zi(r);return null===a?this:this.getImmediateChild(a).getChild(_s(r))}},{key:"hasChild",value:function(r){return null!==this.children_.get(r)}},{key:"updateImmediateChild",value:function(r,a){if((0,Re.hu)(a,"We should always be passing snapshot nodes"),".priority"===r)return this.updatePriority(a);var u,l,o=new ea(r,a);a.isEmpty()?(u=this.children_.remove(r),l=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(r,a),l=this.indexMap_.addToIndexes(o,this.children_));var f=u.isEmpty()?XA:this.priorityNode_;return new s(u,f,l)}},{key:"updateChild",value:function(r,a){var o=zi(r);if(null===o)return a;(0,Re.hu)(".priority"!==zi(r)||1===Wm(r),".priority must be the last token in a path");var u=this.getImmediateChild(o).updateChild(_s(r),a);return this.updateImmediateChild(o,u)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(r){if(this.isEmpty())return null;var a={},o=0,u=0,l=!0;if(this.forEachChild(Ms,function(b,w){a[b]=w.val(r),o++,l&&s.INTEGER_REGEXP_.test(b)?u=Math.max(u,Number(b)):l=!1}),!r&&l&&u<2*o){var f=[];for(var m in a)f[m]=a[m];return f}return r&&!this.getPriority().isEmpty()&&(a[".priority"]=this.getPriority().val()),a}},{key:"hash",value:function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+MH(this.getPriority().val())+":"),this.forEachChild(Ms,function(a,o){var u=o.hash();""!==u&&(r+=":"+a+":"+u)}),this.lazyHash_=""===r?"":zA(r)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(r,a,o){var u=this.resolveIndex_(o);if(u){var l=u.getPredecessorKey(new ea(r,a));return l?l.name:null}return this.children_.getPredecessorKey(r)}},{key:"getFirstChildName",value:function(r){var a=this.resolveIndex_(r);if(a){var o=a.minKey();return o&&o.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(r){var a=this.getFirstChildName(r);return a?new ea(a,this.children_.get(a)):null}},{key:"getLastChildName",value:function(r){var a=this.resolveIndex_(r);if(a){var o=a.maxKey();return o&&o.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(r){var a=this.getLastChildName(r);return a?new ea(a,this.children_.get(a)):null}},{key:"forEachChild",value:function(r,a){var o=this.resolveIndex_(r);return o?o.inorderTraversal(function(u){return a(u.name,u.node)}):this.children_.inorderTraversal(a)}},{key:"getIterator",value:function(r){return this.getIteratorFrom(r.minPost(),r)}},{key:"getIteratorFrom",value:function(r,a){var o=this.resolveIndex_(a);if(o)return o.getIteratorFrom(r,function(f){return f});for(var u=this.children_.getIteratorFrom(r.name,ea.Wrap),l=u.peek();null!=l&&a.compare(l,r)<0;)u.getNext(),l=u.peek();return u}},{key:"getReverseIterator",value:function(r){return this.getReverseIteratorFrom(r.maxPost(),r)}},{key:"getReverseIteratorFrom",value:function(r,a){var o=this.resolveIndex_(a);if(o)return o.getReverseIteratorFrom(r,function(f){return f});for(var u=this.children_.getReverseIteratorFrom(r.name,ea.Wrap),l=u.peek();null!=l&&a.compare(l,r)>0;)u.getNext(),l=u.peek();return u}},{key:"compareTo",value:function(r){return this.isEmpty()?r.isEmpty()?0:-1:r.isLeafNode()||r.isEmpty()?1:r===QA?-1:0}},{key:"withIndex",value:function(r){if(r===Wd||this.indexMap_.hasIndex(r))return this;var a=this.indexMap_.addIndex(r,this.children_);return new s(this.children_,this.priorityNode_,a)}},{key:"isIndexed",value:function(r){return r===Wd||this.indexMap_.hasIndex(r)}},{key:"equals",value:function(r){if(r===this)return!0;if(r.isLeafNode())return!1;var a=r;if(this.getPriority().equals(a.getPriority())){if(this.children_.count()===a.children_.count()){for(var o=this.getIterator(Ms),u=a.getIterator(Ms),l=o.getNext(),f=u.getNext();l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=o.getNext(),f=u.getNext()}return null===l&&null===f}return!1}return!1}},{key:"resolveIndex_",value:function(r){return r===Wd?null:this.indexMap_.get(r.toString())}}],[{key:"EMPTY_NODE",get:function(){return XA||(XA=new s(new Kp(ZZ),null,rF.Default))}}]),s}();return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i}(),QA=new(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.call(this,new Kp(ZZ),ki.EMPTY_NODE,rF.Default)}return(0,R.Z)(n,[{key:"compareTo",value:function(a){return a===this?0:1}},{key:"equals",value:function(a){return a===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(a){return ki.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(ki));function uo(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===i)return ki.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(s=i[".priority"]),(0,Re.hu)(null===s||"string"==typeof s||"number"==typeof s||"object"==typeof s&&".sv"in s,"Invalid priority type found: "+typeof s),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i){var n=i;return new $w(n,uo(s))}if(i instanceof Array){var f=ki.EMPTY_NODE;return Hu(i,function(m,b){if((0,Re.r3)(i,m)&&"."!==m.substring(0,1)){var w=uo(b);(w.isLeafNode()||!w.isEmpty())&&(f=f.updateImmediateChild(m,w))}}),f.updatePriority(uo(s))}var r=[],a=!1,o=i;if(Hu(o,function(m,b){if("."!==m.substring(0,1)){var w=uo(b);w.isEmpty()||(a=a||!w.getPriority().isEmpty(),r.push(new ea(m,w)))}}),0===r.length)return ki.EMPTY_NODE;var u=nF(r,uq,function(m){return m.name},ZZ);if(a){var l=nF(r,Ms.getCompare());return new ki(u,uo(s),new rF({".priority":l},{".priority":Ms}))}return new ki(u,uo(s),rF.Default)}Object.defineProperties(ea,{MIN:{value:new ea(Yp,ki.EMPTY_NODE)},MAX:{value:new ea(jd,QA)}}),xH.__EMPTY_NODE=ki.EMPTY_NODE,$w.__childrenNodeConstructor=ki,function(i){BZ=i}(QA),function(i){RH=i}(QA),function(i){FH=i}(uo);var VZ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).indexPath_=r,(0,Re.hu)(!Hi(r)&&".priority"!==zi(r),"Can't create PathIndex with empty path or .priority key"),a}return(0,R.Z)(n,[{key:"extractChild",value:function(a){return a.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(a){return!a.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(a,o){var u=this.extractChild(a.node),l=this.extractChild(o.node),f=u.compareTo(l);return 0===f?P_(a.name,o.name):f}},{key:"makePost",value:function(a,o){var u=uo(a),l=ki.EMPTY_NODE.updateChild(this.indexPath_,u);return new ea(o,l)}},{key:"maxPost",value:function(){var a=ki.EMPTY_NODE.updateChild(this.indexPath_,QA);return new ea(jd,a)}},{key:"toString",value:function(){return KA(this.indexPath_,0).join("/")}}]),n}(JP),zZ=new(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"compare",value:function(a,o){var u=a.node.compareTo(o.node);return 0===u?P_(a.name,o.name):u}},{key:"isDefinedOn",value:function(a){return!0}},{key:"indexedValueChanged",value:function(a,o){return!a.equals(o)}},{key:"minPost",value:function(){return ea.MIN}},{key:"maxPost",value:function(){return ea.MAX}},{key:"makePost",value:function(a,o){var u=uo(a);return new ea(o,u)}},{key:"toString",value:function(){return".value"}}]),n}(JP)),Qw="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yq=function(){var i=0,s=[];return function(n){var r=n===i;i=n;var a,o=new Array(8);for(a=7;a>=0;a--)o[a]=Qw.charAt(n%64),n=Math.floor(n/64);(0,Re.hu)(0===n,"Cannot push at time == 0");var u=o.join("");if(r){for(a=11;a>=0&&63===s[a];a--)s[a]=0;s[a]++}else for(a=0;a<12;a++)s[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)u+=Qw.charAt(s[a]);return(0,Re.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),NH=function(s){if(s===""+xZ)return"-";var n=XP(s);if(null!=n)return""+(n+1);for(var r=new Array(s.length),a=0;a<r.length;a++)r[a]=s.charAt(a);if(r.length<786)return r.push("-"),r.join("");for(var o=r.length-1;o>=0&&"z"===r[o];)o--;if(-1===o)return jd;var l=Qw.charAt(Qw.indexOf(r[o])+1);return r[o]=l,r.slice(0,o+1).join("")},ZH=function(s){if(s===""+Xz)return Yp;var n=XP(s);if(null!=n)return""+(n-1);for(var r=new Array(s.length),a=0;a<r.length;a++)r[a]=s.charAt(a);return"-"===r[r.length-1]?1===r.length?""+xZ:(delete r[r.length-1],r.join("")):(r[r.length-1]=Qw.charAt(Qw.indexOf(r[r.length-1])-1),r.join("")+"z".repeat(786-r.length))};function BH(i){return{type:"value",snapshotNode:i}}function Jw(i,s){return{type:"child_added",snapshotNode:s,childName:i}}function JA(i,s){return{type:"child_removed",snapshotNode:s,childName:i}}function eT(i,s,n){return{type:"child_changed",snapshotNode:s,childName:i,oldSnap:n}}var GZ=function(){function i(s){(0,M.Z)(this,i),this.index_=s}return(0,R.Z)(i,[{key:"updateChild",value:function(n,r,a,o,u,l){(0,Re.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");var f=n.getImmediateChild(r);return f.getChild(o).equals(a.getChild(o))&&f.isEmpty()===a.isEmpty()||(null!=l&&(a.isEmpty()?n.hasChild(r)?l.trackChildChange(JA(r,f)):(0,Re.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(Jw(r,a)):l.trackChildChange(eT(r,a,f))),n.isLeafNode()&&a.isEmpty())?n:n.updateImmediateChild(r,a).withIndex(this.index_)}},{key:"updateFullNode",value:function(n,r,a){return null!=a&&(n.isLeafNode()||n.forEachChild(Ms,function(o,u){r.hasChild(o)||a.trackChildChange(JA(o,u))}),r.isLeafNode()||r.forEachChild(Ms,function(o,u){if(n.hasChild(o)){var l=n.getImmediateChild(o);l.equals(u)||a.trackChildChange(eT(o,u,l))}else a.trackChildChange(Jw(o,u))})),r.withIndex(this.index_)}},{key:"updatePriority",value:function(n,r){return n.isEmpty()?ki.EMPTY_NODE:n.updatePriority(r)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),i}(),UH=function(){function i(s){(0,M.Z)(this,i),this.indexedFilter_=new GZ(s.getIndex()),this.index_=s.getIndex(),this.startPost_=i.getStartPost_(s),this.endPost_=i.getEndPost_(s)}return(0,R.Z)(i,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(n){return this.index_.compare(this.getStartPost(),n)<=0&&this.index_.compare(n,this.getEndPost())<=0}},{key:"updateChild",value:function(n,r,a,o,u,l){return this.matches(new ea(r,a))||(a=ki.EMPTY_NODE),this.indexedFilter_.updateChild(n,r,a,o,u,l)}},{key:"updateFullNode",value:function(n,r,a){r.isLeafNode()&&(r=ki.EMPTY_NODE);var o=r.withIndex(this.index_);o=o.updatePriority(ki.EMPTY_NODE);var u=this;return r.forEachChild(Ms,function(l,f){u.matches(new ea(l,f))||(o=o.updateImmediateChild(l,ki.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,o,a)}},{key:"updatePriority",value:function(n,r){return n}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(n){if(n.hasStart()){var r=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),r)}return n.getIndex().minPost()}},{key:"getEndPost_",value:function(n){if(n.hasEnd()){var r=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),r)}return n.getIndex().maxPost()}}]),i}(),bq=function(){function i(s){(0,M.Z)(this,i),this.rangedFilter_=new UH(s),this.index_=s.getIndex(),this.limit_=s.getLimit(),this.reverse_=!s.isViewFromLeft()}return(0,R.Z)(i,[{key:"updateChild",value:function(n,r,a,o,u,l){return this.rangedFilter_.matches(new ea(r,a))||(a=ki.EMPTY_NODE),n.getImmediateChild(r).equals(a)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,r,a,o,u,l):this.fullLimitUpdateChild_(n,r,a,u,l)}},{key:"updateFullNode",value:function(n,r,a){var o;if(r.isLeafNode()||r.isEmpty())o=ki.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<r.numChildren()&&r.isIndexed(this.index_)){var u;o=ki.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var l=0;u.hasNext()&&l<this.limit_;){var f=u.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0))break;o=o.updateImmediateChild(f.name,f.node),l++}}else{var b,w,C,T;if(o=(o=r.withIndex(this.index_)).updatePriority(ki.EMPTY_NODE),this.reverse_){T=o.getReverseIterator(this.index_),b=this.rangedFilter_.getEndPost(),w=this.rangedFilter_.getStartPost();var I=this.index_.getCompare();C=function(fe,ve){return I(ve,fe)}}else T=o.getIterator(this.index_),b=this.rangedFilter_.getStartPost(),w=this.rangedFilter_.getEndPost(),C=this.index_.getCompare();for(var Z=0,Y=!1;T.hasNext();){var V=T.getNext();!Y&&C(b,V)<=0&&(Y=!0),Y&&Z<this.limit_&&C(V,w)<=0?Z++:o=o.updateImmediateChild(V.name,ki.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,o,a)}},{key:"updatePriority",value:function(n,r){return n}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(n,r,a,o,u){var l;if(this.reverse_){var f=this.index_.getCompare();l=function(fe,ve){return f(ve,fe)}}else l=this.index_.getCompare();var m=n;(0,Re.hu)(m.numChildren()===this.limit_,"");var b=new ea(r,a),w=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),C=this.rangedFilter_.matches(b);if(m.hasChild(r)){for(var T=m.getImmediateChild(r),I=o.getChildAfterChild(this.index_,w,this.reverse_);null!=I&&(I.name===r||m.hasChild(I.name));)I=o.getChildAfterChild(this.index_,I,this.reverse_);var Z=null==I?1:l(I,b);if(C&&!a.isEmpty()&&Z>=0)return null!=u&&u.trackChildChange(eT(r,a,T)),m.updateImmediateChild(r,a);null!=u&&u.trackChildChange(JA(r,T));var V=m.updateImmediateChild(r,ki.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(null!=u&&u.trackChildChange(Jw(I.name,I.node)),V.updateImmediateChild(I.name,I.node)):V}return a.isEmpty()?n:C&&l(w,b)>=0?(null!=u&&(u.trackChildChange(JA(w.name,w.node)),u.trackChildChange(Jw(r,a))),m.updateImmediateChild(r,a).updateImmediateChild(w.name,ki.EMPTY_NODE)):n}}]),i}(),VH=function(){function i(){(0,M.Z)(this,i),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ms}return(0,R.Z)(i,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return(0,Re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return(0,Re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yp}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return(0,Re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return(0,Re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jd}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return(0,Re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Ms}},{key:"copy",value:function(){var n=new i;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}]),i}();function jZ(i,s,n){var r=i.copy();return r.startSet_=!0,void 0===s&&(s=null),r.indexStartValue_=s,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function WZ(i,s,n){var r=i.copy();return r.endSet_=!0,void 0===s&&(s=null),r.indexEndValue_=s,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function iF(i,s){var n=i.copy();return n.index_=s,n}function zH(i){var n,s={};return i.isDefault()||(i.index_===Ms?n="$priority":i.index_===zZ?n="$value":i.index_===Wd?n="$key":((0,Re.hu)(i.index_ instanceof VZ,"Unrecognized index type!"),n=i.index_.toString()),s.orderBy=(0,Re.Pz)(n),i.startSet_&&(s.startAt=(0,Re.Pz)(i.indexStartValue_),i.startNameSet_&&(s.startAt+=","+(0,Re.Pz)(i.indexStartName_))),i.endSet_&&(s.endAt=(0,Re.Pz)(i.indexEndValue_),i.endNameSet_&&(s.endAt+=","+(0,Re.Pz)(i.indexEndName_))),i.limitSet_&&(i.isViewFromLeft()?s.limitToFirst=i.limit_:s.limitToLast=i.limit_)),s}function HH(i){var s={};if(i.startSet_&&(s.sp=i.indexStartValue_,i.startNameSet_&&(s.sn=i.indexStartName_)),i.endSet_&&(s.ep=i.indexEndValue_,i.endNameSet_&&(s.en=i.indexEndName_)),i.limitSet_){s.l=i.limit_;var n=i.viewFrom_;""===n&&(n=i.isViewFromLeft()?"l":"r"),s.vf=n}return i.index_!==Ms&&(s.i=i.index_.toString()),s}var Sq=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this)).repoInfo_=r,l.onDataUpdate_=a,l.authTokenProvider_=o,l.appCheckTokenProvider_=u,l.log_=I_("p:rest:"),l.listens_={},l}return(0,R.Z)(n,[{key:"reportStats",value:function(a){throw new Error("Method not implemented.")}},{key:"listen",value:function(a,o,u,l){var f=this,m=a._path.toString();this.log_("Listen called for "+m+" "+a._queryIdentifier);var b=n.getListenId_(a,u),w={};this.listens_[b]=w;var C=zH(a._queryParams);this.restRequest_(m+".json",C,function(T,I){var Z=I;404===T&&(Z=null,T=null),null===T&&f.onDataUpdate_(m,Z,!1,u),(0,Re.DV)(f.listens_,b)===w&&l(T?401===T?"permission_denied":"rest_error:"+T:"ok",null)})}},{key:"unlisten",value:function(a,o){var u=n.getListenId_(a,o);delete this.listens_[u]}},{key:"get",value:function(a){var o=this,u=zH(a._queryParams),l=a._path.toString(),f=new Re.BH;return this.restRequest_(l+".json",u,function(m,b){var w=b;404===m&&(w=null,m=null),null===m?(o.onDataUpdate_(l,w,!1,null),f.resolve(w)):f.reject(new Error(w))}),f.promise}},{key:"refreshAuthToken",value:function(a){}},{key:"restRequest_",value:function(a){var o=this,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(f){var m=(0,Te.Z)(f,2),b=m[0],w=m[1];b&&b.accessToken&&(u.auth=b.accessToken),w&&w.token&&(u.ac=w.token);var C=(o.repoInfo_.secure?"https://":"http://")+o.repoInfo_.host+a+"?ns="+o.repoInfo_.namespace+(0,Re.xO)(u);o.log_("Sending REST request for "+C);var T=new XMLHttpRequest;T.onreadystatechange=function(){if(l&&4===T.readyState){o.log_("REST Response for "+C+" received. status:",T.status,"response:",T.responseText);var I=null;if(T.status>=200&&T.status<300){try{I=(0,Re.cI)(T.responseText)}catch(Z){uc("Failed to parse JSON response for "+C+": "+T.responseText)}l(null,I)}else 401!==T.status&&404!==T.status&&uc("Got unsuccessful REST response for "+C+" Status: "+T.status),l(T.status);l=null}},T.open("GET",C,!0),T.send()})}}],[{key:"getListenId_",value:function(a,o){return void 0!==o?"tag$"+o:((0,Re.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}}]),n}(bH),Aq=function(){function i(){(0,M.Z)(this,i),this.rootNode_=ki.EMPTY_NODE}return(0,R.Z)(i,[{key:"getNode",value:function(n){return this.rootNode_.getChild(n)}},{key:"updateSnapshot",value:function(n,r){this.rootNode_=this.rootNode_.updateChild(n,r)}}]),i}();function aF(){return{value:null,children:new Map}}function eE(i,s,n){if(Hi(s))i.value=n,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(s,n);else{var r=zi(s);i.children.has(r)||i.children.set(r,aF()),eE(i.children.get(r),s=_s(s),n)}}function qZ(i,s){if(Hi(s))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;var n=i.value;return i.value=null,n.forEachChild(Ms,function(o,u){eE(i,new Ya(o),u)}),qZ(i,s)}if(i.children.size>0){var r=zi(s);return s=_s(s),i.children.has(r)&&qZ(i.children.get(r),s)&&i.children.delete(r),0===i.children.size}return!0}function YZ(i,s,n){null!==i.value?n(s,i.value):function(i,s){i.children.forEach(function(n,r){s(r,n)})}(i,function(r,a){YZ(a,new Ya(s.toString()+"/"+r),n)})}var xq=function(){function i(s){(0,M.Z)(this,i),this.collection_=s,this.last_=null}return(0,R.Z)(i,[{key:"get",value:function(){var n=this.collection_.get(),r=Object.assign({},n);return this.last_&&Hu(this.last_,function(a,o){r[a]=r[a]-o}),this.last_=n,r}}]),i}(),Pq=function(){function i(s,n){(0,M.Z)(this,i),this.server_=n,this.statsToReport_={},this.statsListener_=new xq(s);var r=1e4+2e4*Math.random();jA(this.reportStats_.bind(this),Math.floor(r))}return(0,R.Z)(i,[{key:"reportStats_",value:function(){var n=this,r=this.statsListener_.get(),a={},o=!1;Hu(r,function(u,l){l>0&&(0,Re.r3)(n.statsToReport_,u)&&(a[u]=l,o=!0)}),o&&this.server_.reportStats(a),jA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),i}(),$p=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}({});function XZ(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var Fq=function(){function i(s,n,r){(0,M.Z)(this,i),this.path=s,this.affectedTree=n,this.revert=r,this.type=$p.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return(0,R.Z)(i,[{key:"operationForChild",value:function(n){if(Hi(this.path)){if(null!=this.affectedTree.value)return(0,Re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var r=this.affectedTree.subtree(new Ya(n));return new i(Va(),r,this.revert)}return(0,Re.hu)(zi(this.path)===n,"operationForChild called for unrelated child."),new i(_s(this.path),this.affectedTree,this.revert)}}]),i}(),jH=function(){function i(s,n){(0,M.Z)(this,i),this.source=s,this.path=n,this.type=$p.LISTEN_COMPLETE}return(0,R.Z)(i,[{key:"operationForChild",value:function(n){return Hi(this.path)?new i(this.source,Va()):new i(this.source,_s(this.path))}}]),i}(),sF=function(){function i(s,n,r){(0,M.Z)(this,i),this.source=s,this.path=n,this.snap=r,this.type=$p.OVERWRITE}return(0,R.Z)(i,[{key:"operationForChild",value:function(n){return Hi(this.path)?new i(this.source,Va(),this.snap.getImmediateChild(n)):new i(this.source,_s(this.path),this.snap)}}]),i}(),QZ=function(){function i(s,n,r){(0,M.Z)(this,i),this.source=s,this.path=n,this.children=r,this.type=$p.MERGE}return(0,R.Z)(i,[{key:"operationForChild",value:function(n){if(Hi(this.path)){var r=this.children.subtree(new Ya(n));return r.isEmpty()?null:r.value?new sF(this.source,Va(),r.value):new i(this.source,Va(),r)}return(0,Re.hu)(zi(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new i(this.source,_s(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),i}(),qm=function(){function i(s,n,r){(0,M.Z)(this,i),this.node_=s,this.fullyInitialized_=n,this.filtered_=r}return(0,R.Z)(i,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(n){if(Hi(n))return this.isFullyInitialized()&&!this.filtered_;var r=zi(n);return this.isCompleteForChild(r)}},{key:"isCompleteForChild",value:function(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}},{key:"getNode",value:function(){return this.node_}}]),i}(),Rq=function i(s){(0,M.Z)(this,i),this.query_=s,this.index_=this.query_._queryParams.getIndex()};function tT(i,s,n,r,a,o){var u=r.filter(function(l){return l.type===n});u.sort(function(l,f){return function(i,s,n){if(null==s.childName||null==n.childName)throw(0,Re.g5)("Should only compare child_ events.");var r=new ea(s.childName,s.snapshotNode),a=new ea(n.childName,n.snapshotNode);return i.index_.compare(r,a)}(i,l,f)}),u.forEach(function(l){var f=function(i,s,n){return"value"===s.type||"child_removed"===s.type||(s.prevName=n.getPredecessorChildName(s.childName,s.snapshotNode,i.index_)),s}(i,l,o);a.forEach(function(m){m.respondsTo(l.type)&&s.push(m.createEvent(f,i.query_))})})}function oF(i,s){return{eventCache:i,serverCache:s}}function nT(i,s,n,r){return oF(new qm(s,n,r),i.serverCache)}function WH(i,s,n,r){return oF(i.eventCache,new qm(s,n,r))}function uF(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function O_(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var JZ,Zq=function(){return JZ||(JZ=new Kp(p7)),JZ},nh=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zq();(0,M.Z)(this,i),this.value=s,this.children=n}return(0,R.Z)(i,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(n,r){if(null!=this.value&&r(this.value))return{path:Va(),value:this.value};if(Hi(n))return null;var a=zi(n),o=this.children.get(a);if(null!==o){var u=o.findRootMostMatchingPathAndValue(_s(n),r);return null!=u?{path:$s(new Ya(a),u.path),value:u.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(n){return this.findRootMostMatchingPathAndValue(n,function(){return!0})}},{key:"subtree",value:function(n){if(Hi(n))return this;var r=zi(n),a=this.children.get(r);return null!==a?a.subtree(_s(n)):new i(null)}},{key:"set",value:function(n,r){if(Hi(n))return new i(r,this.children);var a=zi(n),u=(this.children.get(a)||new i(null)).set(_s(n),r),l=this.children.insert(a,u);return new i(this.value,l)}},{key:"remove",value:function(n){if(Hi(n))return this.children.isEmpty()?new i(null):new i(null,this.children);var r=zi(n),a=this.children.get(r);if(a){var u,o=a.remove(_s(n));return u=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),null===this.value&&u.isEmpty()?new i(null):new i(this.value,u)}return this}},{key:"get",value:function(n){if(Hi(n))return this.value;var r=zi(n),a=this.children.get(r);return a?a.get(_s(n)):null}},{key:"setTree",value:function(n,r){if(Hi(n))return r;var l,a=zi(n),u=(this.children.get(a)||new i(null)).setTree(_s(n),r);return l=u.isEmpty()?this.children.remove(a):this.children.insert(a,u),new i(this.value,l)}},{key:"fold",value:function(n){return this.fold_(Va(),n)}},{key:"fold_",value:function(n,r){var a={};return this.children.inorderTraversal(function(o,u){a[o]=u.fold_($s(n,o),r)}),r(n,this.value,a)}},{key:"findOnPath",value:function(n,r){return this.findOnPath_(n,Va(),r)}},{key:"findOnPath_",value:function(n,r,a){var o=!!this.value&&a(r,this.value);if(o)return o;if(Hi(n))return null;var u=zi(n),l=this.children.get(u);return l?l.findOnPath_(_s(n),$s(r,u),a):null}},{key:"foreachOnPath",value:function(n,r){return this.foreachOnPath_(n,Va(),r)}},{key:"foreachOnPath_",value:function(n,r,a){if(Hi(n))return this;this.value&&a(r,this.value);var o=zi(n),u=this.children.get(o);return u?u.foreachOnPath_(_s(n),$s(r,o),a):new i(null)}},{key:"foreach",value:function(n){this.foreach_(Va(),n)}},{key:"foreach_",value:function(n,r){this.children.inorderTraversal(function(a,o){o.foreach_($s(n,a),r)}),this.value&&r(n,this.value)}},{key:"foreachChild",value:function(n){this.children.inorderTraversal(function(r,a){a.value&&n(r,a.value)})}}],[{key:"fromObject",value:function(n){var r=new i(null);return Hu(n,function(a,o){r=r.set(new Ya(a),o)}),r}}]),i}(),Xp=function(){function i(s){(0,M.Z)(this,i),this.writeTree_=s}return(0,R.Z)(i,null,[{key:"empty",value:function(){return new i(new nh(null))}}]),i}();function rT(i,s,n){if(Hi(s))return new Xp(new nh(n));var r=i.writeTree_.findRootMostValueAndPath(s);if(null!=r){var a=r.path,o=r.value,u=lc(a,s);return o=o.updateChild(u,n),new Xp(i.writeTree_.set(a,o))}var l=new nh(n),f=i.writeTree_.setTree(s,l);return new Xp(f)}function e3(i,s,n){var r=i;return Hu(n,function(a,o){r=rT(r,$s(s,a),o)}),r}function qH(i,s){if(Hi(s))return Xp.empty();var n=i.writeTree_.setTree(s,new nh(null));return new Xp(n)}function t3(i,s){return null!=L_(i,s)}function L_(i,s){var n=i.writeTree_.findRootMostValueAndPath(s);return null!=n?i.writeTree_.get(n.path).getChild(lc(n.path,s)):null}function YH(i){var s=[],n=i.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ms,function(r,a){s.push(new ea(r,a))}):i.writeTree_.children.inorderTraversal(function(r,a){null!=a.value&&s.push(new ea(r,a.value))}),s}function Ym(i,s){if(Hi(s))return i;var n=L_(i,s);return new Xp(null!=n?new nh(n):i.writeTree_.subtree(s))}function n3(i){return i.writeTree_.isEmpty()}function tE(i,s){return KH(Va(),i.writeTree_,s)}function KH(i,s,n){if(null!=s.value)return n.updateChild(i,s.value);var r=null;return s.children.inorderTraversal(function(a,o){".priority"===a?((0,Re.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=KH($s(i,a),o,n)}),!n.getChild(i).isEmpty()&&null!==r&&(n=n.updateChild($s(i,".priority"),r)),n}function lF(i,s){return e4(s,i)}function Vq(i,s){for(var n=0;n<i.allWrites.length;n++){var r=i.allWrites[n];if(r.writeId===s)return r}return null}function zq(i,s){var n=i.allWrites.findIndex(function(m){return m.writeId===s});(0,Re.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=i.allWrites[n];i.allWrites.splice(n,1);for(var a=r.visible,o=!1,u=i.allWrites.length-1;a&&u>=0;){var l=i.allWrites[u];l.visible&&(u>=n&&Hq(l,r.path)?a=!1:Uh(r.path,l.path)&&(o=!0)),u--}return!!a&&(o?(function(i){i.visibleWrites=$H(i.allWrites,jq,Va()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(r.snap?i.visibleWrites=qH(i.visibleWrites,r.path):Hu(r.children,function(m){i.visibleWrites=qH(i.visibleWrites,$s(r.path,m))}),!0))}function Hq(i,s){if(i.snap)return Uh(i.path,s);for(var n in i.children)if(i.children.hasOwnProperty(n)&&Uh($s(i.path,n),s))return!0;return!1}function jq(i){return i.visible}function $H(i,s,n){for(var r=Xp.empty(),a=0;a<i.length;++a){var o=i[a];if(s(o)){var u=o.path,l=void 0;if(o.snap)Uh(n,u)?r=rT(r,l=lc(n,u),o.snap):Uh(u,n)&&(l=lc(u,n),r=rT(r,Va(),o.snap.getChild(l)));else{if(!o.children)throw(0,Re.g5)("WriteRecord should have .snap or .children");if(Uh(n,u))r=e3(r,l=lc(n,u),o.children);else if(Uh(u,n))if(Hi(l=lc(u,n)))r=e3(r,Va(),o.children);else{var f=(0,Re.DV)(o.children,zi(l));if(f){var m=f.getChild(_s(l));r=rT(r,Va(),m)}}}}}return r}function XH(i,s,n,r,a){if(r||a){var f=Ym(i.visibleWrites,s);return!a&&n3(f)?n:a||null!=n||t3(f,Va())?tE($H(i.allWrites,function(T){return(T.visible||a)&&(!r||!~r.indexOf(T.writeId))&&(Uh(T.path,s)||Uh(s,T.path))},s),n||ki.EMPTY_NODE):null}var o=L_(i.visibleWrites,s);if(null!=o)return o;var u=Ym(i.visibleWrites,s);return n3(u)?n:null!=n||t3(u,Va())?tE(u,n||ki.EMPTY_NODE):null}function cF(i,s,n,r){return XH(i.writeTree,i.treePath,s,n,r)}function r3(i,s){return function(i,s,n){var r=ki.EMPTY_NODE,a=L_(i.visibleWrites,s);if(a)return a.isLeafNode()||a.forEachChild(Ms,function(l,f){r=r.updateImmediateChild(l,f)}),r;if(n){var o=Ym(i.visibleWrites,s);return n.forEachChild(Ms,function(l,f){var m=tE(Ym(o,new Ya(l)),f);r=r.updateImmediateChild(l,m)}),YH(o).forEach(function(l){r=r.updateImmediateChild(l.name,l.node)}),r}return YH(Ym(i.visibleWrites,s)).forEach(function(l){r=r.updateImmediateChild(l.name,l.node)}),r}(i.writeTree,i.treePath,s)}function QH(i,s,n,r){return function(i,s,n,r,a){(0,Re.hu)(r||a,"Either existingEventSnap or existingServerSnap must exist");var o=$s(s,n);if(t3(i.visibleWrites,o))return null;var u=Ym(i.visibleWrites,o);return n3(u)?a.getChild(n):tE(u,a.getChild(n))}(i.writeTree,i.treePath,s,n,r)}function hF(i,s){return function(i,s){return L_(i.visibleWrites,s)}(i.writeTree,$s(i.treePath,s))}function i3(i,s,n){return function(i,s,n,r){var a=$s(s,n),o=L_(i.visibleWrites,a);return null!=o?o:r.isCompleteForChild(n)?tE(Ym(i.visibleWrites,a),r.getNode().getImmediateChild(n)):null}(i.writeTree,i.treePath,s,n)}function JH(i,s){return e4($s(i.treePath,s),i.writeTree)}function e4(i,s){return{treePath:i,writeTree:s}}var Jq=function(){function i(){(0,M.Z)(this,i),this.changeMap=new Map}return(0,R.Z)(i,[{key:"trackChildChange",value:function(n){var r=n.type,a=n.childName;(0,Re.hu)("child_added"===r||"child_changed"===r||"child_removed"===r,"Only child changes supported for tracking"),(0,Re.hu)(".priority"!==a,"Only non-priority child changes can be tracked.");var o=this.changeMap.get(a);if(o){var u=o.type;if("child_added"===r&&"child_removed"===u)this.changeMap.set(a,eT(a,n.snapshotNode,o.snapshotNode));else if("child_removed"===r&&"child_added"===u)this.changeMap.delete(a);else if("child_removed"===r&&"child_changed"===u)this.changeMap.set(a,JA(a,o.oldSnap));else if("child_changed"===r&&"child_added"===u)this.changeMap.set(a,Jw(a,n.snapshotNode));else{if("child_changed"!==r||"child_changed"!==u)throw(0,Re.g5)("Illegal combination of changes: "+n+" occurred after "+o);this.changeMap.set(a,eT(a,n.snapshotNode,o.oldSnap))}}else this.changeMap.set(a,n)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),i}(),t4=new(function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"getCompleteChild",value:function(n){return null}},{key:"getChildAfterChild",value:function(n,r,a){return null}}]),i}()),a3=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,M.Z)(this,i),this.writes_=s,this.viewCache_=n,this.optCompleteServerCache_=r}return(0,R.Z)(i,[{key:"getCompleteChild",value:function(n){var r=this.viewCache_.eventCache;if(r.isCompleteForChild(n))return r.getNode().getImmediateChild(n);var a=null!=this.optCompleteServerCache_?new qm(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return i3(this.writes_,n,a)}},{key:"getChildAfterChild",value:function(n,r,a){var o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:O_(this.viewCache_),u=function(i,s,n,r,a,o){return function(i,s,n,r,a,o,u){var l,f=Ym(i.visibleWrites,s),m=L_(f,Va());if(null!=m)l=m;else{if(null==n)return[];l=tE(f,n)}if((l=l.withIndex(u)).isEmpty()||l.isLeafNode())return[];for(var b=[],w=u.getCompare(),C=o?l.getReverseIteratorFrom(r,u):l.getIteratorFrom(r,u),T=C.getNext();T&&b.length<a;)0!==w(T,r)&&b.push(T),T=C.getNext();return b}(i.writeTree,i.treePath,s,n,r,a,o)}(this.writes_,o,r,1,a,n);return 0===u.length?null:u[0]}}]),i}();function n4(i,s,n,r,a,o){var l,f,u=s.eventCache;if(null!=hF(r,n))return s;if(Hi(n))if((0,Re.hu)(s.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),s.serverCache.isFiltered()){var m=O_(s),w=r3(r,m instanceof ki?m:ki.EMPTY_NODE);l=i.filter.updateFullNode(s.eventCache.getNode(),w,o)}else{var C=cF(r,O_(s));l=i.filter.updateFullNode(s.eventCache.getNode(),C,o)}else{var T=zi(n);if(".priority"===T){(0,Re.hu)(1===Wm(n),"Can't have a priority with additional path components");var I=u.getNode(),Z=QH(r,n,I,f=s.serverCache.getNode());l=null!=Z?i.filter.updatePriority(I,Z):u.getNode()}else{var V,Y=_s(n);if(u.isCompleteForChild(T)){f=s.serverCache.getNode();var W=QH(r,n,u.getNode(),f);V=null!=W?u.getNode().getImmediateChild(T).updateChild(Y,W):u.getNode().getImmediateChild(T)}else V=i3(r,T,s.serverCache);l=null!=V?i.filter.updateChild(u.getNode(),T,V,Y,a,o):u.getNode()}}return nT(s,l,u.isFullyInitialized()||Hi(n),i.filter.filtersNodes())}function fF(i,s,n,r,a,o,u,l){var m,f=s.serverCache,b=u?i.filter:i.filter.getIndexedFilter();if(Hi(n))m=b.updateFullNode(f.getNode(),r,null);else if(b.filtersNodes()&&!f.isFiltered()){var w=f.getNode().updateChild(n,r);m=b.updateFullNode(f.getNode(),w,null)}else{var C=zi(n);if(!f.isCompleteForPath(n)&&Wm(n)>1)return s;var T=_s(n),Z=f.getNode().getImmediateChild(C).updateChild(T,r);m=".priority"===C?b.updatePriority(f.getNode(),Z):b.updateChild(f.getNode(),C,Z,T,t4,null)}var Y=WH(s,m,f.isFullyInitialized()||Hi(n),b.filtersNodes());return n4(i,Y,n,a,new a3(a,Y,o),l)}function s3(i,s,n,r,a,o,u){var f,m,l=s.eventCache,b=new a3(a,s,o);if(Hi(n))m=i.filter.updateFullNode(s.eventCache.getNode(),r,u),f=nT(s,m,!0,i.filter.filtersNodes());else{var w=zi(n);if(".priority"===w)m=i.filter.updatePriority(s.eventCache.getNode(),r),f=nT(s,m,l.isFullyInitialized(),l.isFiltered());else{var I,C=_s(n),T=l.getNode().getImmediateChild(w);if(Hi(C))I=r;else{var Z=b.getCompleteChild(w);I=null!=Z?".priority"===LZ(C)&&Z.getChild(DH(C)).isEmpty()?Z:Z.updateChild(C,r):ki.EMPTY_NODE}f=T.equals(I)?s:nT(s,i.filter.updateChild(l.getNode(),w,I,C,b,u),l.isFullyInitialized(),i.filter.filtersNodes())}}return f}function r4(i,s){return i.eventCache.isCompleteForChild(s)}function i4(i,s,n){return n.foreach(function(r,a){s=s.updateChild(r,a)}),s}function o3(i,s,n,r,a,o,u,l){if(s.serverCache.getNode().isEmpty()&&!s.serverCache.isFullyInitialized())return s;var m,f=s;m=Hi(n)?r:new nh(null).setTree(n,r);var b=s.serverCache.getNode();return m.children.inorderTraversal(function(w,C){if(b.hasChild(w)){var I=i4(0,s.serverCache.getNode().getImmediateChild(w),C);f=fF(i,f,new Ya(w),I,a,o,u,l)}}),m.children.inorderTraversal(function(w,C){var T=!s.serverCache.isCompleteForChild(w)&&void 0===C.value;if(!b.hasChild(w)&&!T){var Z=i4(0,s.serverCache.getNode().getImmediateChild(w),C);f=fF(i,f,new Ya(w),Z,a,o,u,l)}}),f}var l9=function(){function i(s,n){(0,M.Z)(this,i),this.query_=s,this.eventRegistrations_=[];var r=this.query_._queryParams,a=new GZ(r.getIndex()),o=function(i){return i.loadsAllData()?new GZ(i.getIndex()):i.hasLimit()?new bq(i):new UH(i)}(r);this.processor_=function(i){return{filter:i}}(o);var u=n.serverCache,l=n.eventCache,f=a.updateFullNode(ki.EMPTY_NODE,u.getNode(),null),m=o.updateFullNode(ki.EMPTY_NODE,l.getNode(),null),b=new qm(f,u.isFullyInitialized(),a.filtersNodes()),w=new qm(m,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=oF(w,b),this.eventGenerator_=new Rq(this.query_)}return(0,R.Z)(i,[{key:"query",get:function(){return this.query_}}]),i}();function f9(i,s){var n=O_(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!Hi(s)&&!n.getImmediateChild(zi(s)).isEmpty())?n.getChild(s):null}function a4(i){return 0===i.eventRegistrations_.length}function s4(i,s,n){var r=[];if(n){(0,Re.hu)(null==s,"A cancel should cancel all event registrations.");var a=i.query._path;i.eventRegistrations_.forEach(function(f){var m=f.createCancelEvent(n,a);m&&r.push(m)})}if(s){for(var o=[],u=0;u<i.eventRegistrations_.length;++u){var l=i.eventRegistrations_[u];if(l.matches(s)){if(s.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(u+1));break}}else o.push(l)}i.eventRegistrations_=o}else i.eventRegistrations_=[];return r}function o4(i,s,n,r){s.type===$p.MERGE&&null!==s.source.queryId&&((0,Re.hu)(O_(i.viewCache_),"We should always have a full cache before handling merges"),(0,Re.hu)(uF(i.viewCache_),"Missing event cache, even though we have a server cache"));var a=i.viewCache_,o=function(i,s,n,r,a){var u,l,o=new Jq;if(n.type===$p.OVERWRITE){var f=n;f.source.fromUser?u=s3(i,s,f.path,f.snap,r,a,o):((0,Re.hu)(f.source.fromServer,"Unknown source."),l=f.source.tagged||s.serverCache.isFiltered()&&!Hi(f.path),u=fF(i,s,f.path,f.snap,r,a,l,o))}else if(n.type===$p.MERGE){var m=n;m.source.fromUser?u=function(i,s,n,r,a,o,u){var l=s;return r.foreach(function(f,m){var b=$s(n,f);r4(s,zi(b))&&(l=s3(i,l,b,m,a,o,u))}),r.foreach(function(f,m){var b=$s(n,f);r4(s,zi(b))||(l=s3(i,l,b,m,a,o,u))}),l}(i,s,m.path,m.children,r,a,o):((0,Re.hu)(m.source.fromServer,"Unknown source."),l=m.source.tagged||s.serverCache.isFiltered(),u=o3(i,s,m.path,m.children,r,a,l,o))}else if(n.type===$p.ACK_USER_WRITE){var b=n;u=b.revert?function(i,s,n,r,a,o){var u;if(null!=hF(r,n))return s;var m,l=new a3(r,s,a),f=s.eventCache.getNode();if(Hi(n)||".priority"===zi(n)){var b;if(s.serverCache.isFullyInitialized())b=cF(r,O_(s));else{var w=s.serverCache.getNode();(0,Re.hu)(w instanceof ki,"serverChildren would be complete if leaf node"),b=r3(r,w)}m=i.filter.updateFullNode(f,b=b,o)}else{var C=zi(n),T=i3(r,C,s.serverCache);null==T&&s.serverCache.isCompleteForChild(C)&&(T=f.getImmediateChild(C)),(m=null!=T?i.filter.updateChild(f,C,T,_s(n),l,o):s.eventCache.getNode().hasChild(C)?i.filter.updateChild(f,C,ki.EMPTY_NODE,_s(n),l,o):f).isEmpty()&&s.serverCache.isFullyInitialized()&&(u=cF(r,O_(s))).isLeafNode()&&(m=i.filter.updateFullNode(m,u,o))}return u=s.serverCache.isFullyInitialized()||null!=hF(r,Va()),nT(s,m,u,i.filter.filtersNodes())}(i,s,b.path,r,a,o):function(i,s,n,r,a,o,u){if(null!=hF(a,n))return s;var l=s.serverCache.isFiltered(),f=s.serverCache;if(null!=r.value){if(Hi(n)&&f.isFullyInitialized()||f.isCompleteForPath(n))return fF(i,s,n,f.getNode().getChild(n),a,o,l,u);if(Hi(n)){var m=new nh(null);return f.getNode().forEachChild(Wd,function(w,C){m=m.set(new Ya(w),C)}),o3(i,s,n,m,a,o,l,u)}return s}var b=new nh(null);return r.foreach(function(w,C){var T=$s(n,w);f.isCompleteForPath(T)&&(b=b.set(w,f.getNode().getChild(T)))}),o3(i,s,n,b,a,o,l,u)}(i,s,b.path,b.affectedTree,r,a,o)}else{if(n.type!==$p.LISTEN_COMPLETE)throw(0,Re.g5)("Unknown operation type: "+n.type);u=function(i,s,n,r,a){var o=s.serverCache;return n4(i,WH(s,o.getNode(),o.isFullyInitialized()||Hi(n),o.isFiltered()),n,r,t4,a)}(i,s,n.path,r,o)}var w=o.getChanges();return function(i,s,n){var r=s.eventCache;if(r.isFullyInitialized()){var a=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=uF(i);(n.length>0||!i.eventCache.isFullyInitialized()||a&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(BH(uF(s)))}}(s,u,w),{viewCache:u,changes:w}}(i.processor_,a,s,n,r);return function(i,s){(0,Re.hu)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,Re.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,o.viewCache),(0,Re.hu)(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=o.viewCache,u4(i,o.changes,o.viewCache.eventCache.getNode(),null)}function u4(i,s,n,r){return function(i,s,n,r){var a=[],o=[];return s.forEach(function(u){"child_changed"===u.type&&i.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(function(i,s){return{type:"child_moved",snapshotNode:s,childName:i}}(u.childName,u.snapshotNode))}),tT(i,a,"child_removed",s,r,n),tT(i,a,"child_added",s,r,n),tT(i,a,"child_moved",o,r,n),tT(i,a,"child_changed",s,r,n),tT(i,a,"value",s,r,n),a}(i.eventGenerator_,s,n,r?[r]:i.eventRegistrations_)}var dF,vF,l4=function i(){(0,M.Z)(this,i),this.views=new Map};function u3(i,s,n,r){var a=s.source.queryId;if(null!==a){var o=i.views.get(a);return(0,Re.hu)(null!=o,"SyncTree gave us an op for an invalid query."),o4(o,s,n,r)}var f,u=[],l=(0,Ve.Z)(i.views.values());try{for(l.s();!(f=l.n()).done;)u=u.concat(o4(f.value,s,n,r))}catch(b){l.e(b)}finally{l.f()}return u}function c4(i,s,n,r,a){var u=i.views.get(s._queryIdentifier);if(!u){var l=cF(n,a?r:null),f=!1;l?f=!0:r instanceof ki?(l=r3(n,r),f=!1):(l=ki.EMPTY_NODE,f=!1);var m=oF(new qm(l,f,!1),new qm(r,a,!1));return new l9(s,m)}return u}function h4(i){var r,s=[],n=(0,Ve.Z)(i.views.values());try{for(n.s();!(r=n.n()).done;){var a=r.value;a.query._queryParams.loadsAllData()||s.push(a)}}catch(o){n.e(o)}finally{n.f()}return s}function Km(i,s){var a,n=null,r=(0,Ve.Z)(i.views.values());try{for(r.s();!(a=r.n()).done;)n=n||f9(a.value,s)}catch(u){r.e(u)}finally{r.f()}return n}function f4(i,s){return s._queryParams.loadsAllData()?pF(i):i.views.get(s._queryIdentifier)}function d4(i,s){return null!=f4(i,s)}function $m(i){return null!=pF(i)}function pF(i){var n,s=(0,Ve.Z)(i.views.values());try{for(s.s();!(n=s.n()).done;){var r=n.value;if(r.query._queryParams.loadsAllData())return r}}catch(a){s.e(a)}finally{s.f()}return null}var E9=1,p4=function i(s){(0,M.Z)(this,i),this.listenProvider_=s,this.syncPointTree_=new nh(null),this.pendingWriteTree_={visibleWrites:Xp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function l3(i,s,n,r,a){return function(i,s,n,r,a){(0,Re.hu)(r>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),i.allWrites.push({path:s,snap:n,writeId:r,visible:a}),a&&(i.visibleWrites=rT(i.visibleWrites,s,n)),i.lastWriteId=r}(i.pendingWriteTree_,s,n,r,a),a?nE(i,new sF({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,n)):[]}function Xm(i,s){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Vq(i.pendingWriteTree_,s),a=zq(i.pendingWriteTree_,s);if(a){var o=new nh(null);return null!=r.snap?o=o.set(Va(),!0):Hu(r.children,function(u){o=o.set(new Ya(u),!0)}),nE(i,new Fq(r.path,o,n))}return[]}function iT(i,s,n){return nE(i,new sF({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,n))}function c3(i,s,n,r){var a=s._path,o=i.syncPointTree_.get(a),u=[];if(o&&("default"===s._queryIdentifier||d4(o,s))){var l=function(i,s,n,r){var a=s._queryIdentifier,o=[],u=[],l=$m(i);if("default"===a){var m,f=(0,Ve.Z)(i.views.entries());try{for(f.s();!(m=f.n()).done;){var b=(0,Te.Z)(m.value,2),w=b[0],C=b[1];u=u.concat(s4(C,n,r)),a4(C)&&(i.views.delete(w),C.query._queryParams.loadsAllData()||o.push(C.query))}}catch(I){f.e(I)}finally{f.f()}}else{var T=i.views.get(a);T&&(u=u.concat(s4(T,n,r)),a4(T)&&(i.views.delete(a),T.query._queryParams.loadsAllData()||o.push(T.query)))}return l&&!$m(i)&&o.push(new((0,Re.hu)(dF,"Reference.ts has not been loaded"),dF)(s._repo,s._path)),{removed:o,events:u}}(o,s,n,r);(function(i){return 0===i.views.size})(o)&&(i.syncPointTree_=i.syncPointTree_.remove(a));var f=l.removed;u=l.events;var m=-1!==f.findIndex(function(W){return W._queryParams.loadsAllData()}),b=i.syncPointTree_.findOnPath(a,function(W,se){return $m(se)});if(m&&!b){var w=i.syncPointTree_.subtree(a);if(!w.isEmpty())for(var C=function(i){return i.fold(function(s,n,r){if(n&&$m(n))return[pF(n)];var o=[];return n&&(o=h4(n)),Hu(r,function(u,l){o=o.concat(l)}),o})}(w),T=0;T<C.length;++T){var I=C[T],Z=I.query,Y=y4(i,I);i.listenProvider_.startListening(aT(Z),gF(i,Z),Y.hashFn,Y.onComplete)}}!b&&f.length>0&&!r&&(m?i.listenProvider_.stopListening(aT(s),null):f.forEach(function(W){var se=i.queryToTagMap.get(yF(W));i.listenProvider_.stopListening(aT(W),se)})),function(i,s){for(var n=0;n<s.length;++n){var r=s[n];if(!r._queryParams.loadsAllData()){var a=yF(r),o=i.queryToTagMap.get(a);i.queryToTagMap.delete(a),i.tagToQueryMap.delete(o)}}}(i,f)}return u}function v4(i,s,n){var r=s._path,a=null,o=!1;i.syncPointTree_.foreachOnPath(r,function(Z,Y){var V=lc(Z,r);a=a||Km(Y,V),o=o||$m(Y)});var l,u=i.syncPointTree_.get(r);u?(o=o||$m(u),a=a||Km(u,Va())):(u=new l4,i.syncPointTree_=i.syncPointTree_.set(r,u)),null!=a?l=!0:(l=!1,a=ki.EMPTY_NODE,i.syncPointTree_.subtree(r).foreachChild(function(Z,Y){var V=Km(Y,Va());V&&(a=a.updateImmediateChild(Z,V))}));var m=d4(u,s);if(!m&&!s._queryParams.loadsAllData()){var b=yF(s);(0,Re.hu)(!i.queryToTagMap.has(b),"View does not exist, but we have a tag");var w=E9++;i.queryToTagMap.set(b,w),i.tagToQueryMap.set(w,b)}var T=function(i,s,n,r,a,o){var u=c4(i,s,r,a,o);return i.views.has(s._queryIdentifier)||i.views.set(s._queryIdentifier,u),function(i,s){i.eventRegistrations_.push(s)}(u,n),function(i,s){var n=i.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ms,function(o,u){r.push(Jw(o,u))}),n.isFullyInitialized()&&r.push(BH(n.getNode())),u4(i,r,n.getNode(),s)}(u,n)}(u,s,n,lF(i.pendingWriteTree_,r),a,l);if(!m&&!o){var I=f4(u,s);T=T.concat(function(i,s,n){var r=s._path,a=gF(i,s),o=y4(i,n),u=i.listenProvider_.startListening(aT(s),a,o.hashFn,o.onComplete),l=i.syncPointTree_.subtree(r);if(a)(0,Re.hu)(!$m(l.value),"If we're adding a query, it shouldn't be shadowed");else for(var f=l.fold(function(w,C,T){if(!Hi(w)&&C&&$m(C))return[pF(C).query];var I=[];return C&&(I=I.concat(h4(C).map(function(Z){return Z.query}))),Hu(T,function(Z,Y){I=I.concat(Y)}),I}),m=0;m<f.length;++m){var b=f[m];i.listenProvider_.stopListening(aT(b),gF(i,b))}return u}(i,s,I))}return T}function mF(i,s,n){var a=i.pendingWriteTree_,o=i.syncPointTree_.findOnPath(s,function(u,l){var m=Km(l,lc(u,s));if(m)return m});return XH(a,s,o,n,!0)}function nE(i,s){return m4(s,i.syncPointTree_,null,lF(i.pendingWriteTree_,Va()))}function m4(i,s,n,r){if(Hi(i.path))return g4(i,s,n,r);var a=s.get(Va());null==n&&null!=a&&(n=Km(a,Va()));var o=[],u=zi(i.path),l=i.operationForChild(u),f=s.children.get(u);if(f&&l){var m=n?n.getImmediateChild(u):null,b=JH(r,u);o=o.concat(m4(l,f,m,b))}return a&&(o=o.concat(u3(a,i,r,n))),o}function g4(i,s,n,r){var a=s.get(Va());null==n&&null!=a&&(n=Km(a,Va()));var o=[];return s.children.inorderTraversal(function(u,l){var f=n?n.getImmediateChild(u):null,m=JH(r,u),b=i.operationForChild(u);b&&(o=o.concat(g4(b,l,f,m)))}),a&&(o=o.concat(u3(a,i,r,n))),o}function y4(i,s){var n=s.query,r=gF(i,n);return{hashFn:function(){return(function(i){return i.viewCache_.serverCache.getNode()}(s)||ki.EMPTY_NODE).hash()},onComplete:function(o){if("ok"===o)return r?function(i,s,n){var r=h3(i,n);if(r){var a=f3(r),o=a.path,u=a.queryId,l=lc(o,s);return d3(i,o,new jH(XZ(u),l))}return[]}(i,n._path,r):function(i,s){return nE(i,new jH({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s))}(i,n._path);var u=function(i,s){var n="Unknown Error";"too_big"===i?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?n="Client doesn't have permission to access the desired data.":"unavailable"===i&&(n="The service is unavailable");var r=new Error(i+" at "+s._path.toString()+": "+n);return r.code=i.toUpperCase(),r}(o,n);return c3(i,n,null,u)}}}function gF(i,s){var n=yF(s);return i.queryToTagMap.get(n)}function yF(i){return i._path.toString()+"$"+i._queryIdentifier}function h3(i,s){return i.tagToQueryMap.get(s)}function f3(i){var s=i.indexOf("$");return(0,Re.hu)(-1!==s&&s<i.length-1,"Bad queryKey."),{queryId:i.substr(s+1),path:new Ya(i.substr(0,s))}}function d3(i,s,n){var r=i.syncPointTree_.get(s);return(0,Re.hu)(r,"Missing sync point for query tag that we're tracking"),u3(r,n,lF(i.pendingWriteTree_,s),null)}function aT(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new((0,Re.hu)(vF,"Reference.ts has not been loaded"),vF)(i._repo,i._path):i}var R9=function(){function i(s){(0,M.Z)(this,i),this.node_=s}return(0,R.Z)(i,[{key:"getImmediateChild",value:function(n){return new i(this.node_.getImmediateChild(n))}},{key:"node",value:function(){return this.node_}}]),i}(),O9=function(){function i(s,n){(0,M.Z)(this,i),this.syncTree_=s,this.path_=n}return(0,R.Z)(i,[{key:"getImmediateChild",value:function(n){var r=$s(this.path_,n);return new i(this.syncTree_,r)}},{key:"node",value:function(){return mF(this.syncTree_,this.path_)}}]),i}(),_4=function(s,n,r){return s&&"object"==typeof s?((0,Re.hu)(".sv"in s,"Unexpected leaf node or priority contents"),"string"==typeof s[".sv"]?N9(s[".sv"],n,r):"object"==typeof s[".sv"]?Z9(s[".sv"],n):void(0,Re.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2))):s},N9=function(s,n,r){switch(s){case"timestamp":return r.timestamp;default:(0,Re.hu)(!1,"Unexpected server value: "+s)}},Z9=function(s,n,r){s.hasOwnProperty("increment")||(0,Re.hu)(!1,"Unexpected server value: "+JSON.stringify(s,null,2));var a=s.increment;"number"!=typeof a&&(0,Re.hu)(!1,"Unexpected increment value: "+a);var o=n.node();if((0,Re.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return a;var l=o.getValue();return"number"!=typeof l?a:l+a},b4=function(s,n,r,a){return v3(n,new O9(r,s),a)},p3=function(s,n,r){return v3(s,new R9(n),r)};function v3(i,s,n){var o,r=i.getPriority().val(),a=_4(r,s.getImmediateChild(".priority"),n);if(i.isLeafNode()){var u=i,l=_4(u.getValue(),s,n);return l!==u.getValue()||a!==u.getPriority().val()?new $w(l,uo(a)):i}var f=i;return o=f,a!==f.getPriority().val()&&(o=o.updatePriority(new $w(a))),f.forEachChild(Ms,function(m,b){var w=v3(b,s.getImmediateChild(m),n);w!==b&&(o=o.updateImmediateChild(m,w))}),o}var m3=function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};(0,M.Z)(this,i),this.name=s,this.parent=n,this.node=r};function _F(i,s){for(var n=s instanceof Ya?s:new Ya(s),r=i,a=zi(n);null!==a;){var o=(0,Re.DV)(r.node.children,a)||{children:{},childCount:0};r=new m3(a,r,o),a=zi(n=_s(n))}return r}function N_(i){return i.node.value}function g3(i,s){i.node.value=s,y3(i)}function w4(i){return i.node.childCount>0}function bF(i,s){Hu(i.node.children,function(n,r){s(new m3(n,i,r))})}function E4(i,s,n,r){n&&!r&&s(i),bF(i,function(a){E4(a,s,!0,r)}),n&&r&&s(i)}function sT(i){return new Ya(null===i.parent?i.name:sT(i.parent)+"/"+i.name)}function y3(i){null!==i.parent&&function(i,s,n){var r=function(i){return void 0===N_(i)&&!w4(i)}(n),a=(0,Re.r3)(i.node.children,s);r&&a?(delete i.node.children[s],i.node.childCount--,y3(i)):!r&&!a&&(i.node.children[s]=n.node,i.node.childCount++,y3(i))}(i.parent,i.name,i)}var z9=/[\[\].#$\/\u0000-\u001F\u007F]/,H9=/[\[\].#$\u0000-\u001F\u007F]/,_3=10485760,wF=function(s){return"string"==typeof s&&0!==s.length&&!z9.test(s)},k4=function(s){return"string"==typeof s&&0!==s.length&&!H9.test(s)},oT=function(s){return null===s||"string"==typeof s||"number"==typeof s&&!$P(s)||s&&"object"==typeof s&&(0,Re.r3)(s,".sv")},qd=function(s,n,r,a){a&&void 0===n||EF((0,Re.gK)(s,"value"),n,r)},EF=function i(s,n,r){var a=r instanceof Ya?new Q7(r,s):r;if(void 0===n)throw new Error(s+"contains undefined "+F_(a));if("function"==typeof n)throw new Error(s+"contains a function "+F_(a)+" with contents = "+n.toString());if($P(n))throw new Error(s+"contains "+n.toString()+" "+F_(a));if("string"==typeof n&&n.length>_3/3&&(0,Re.ug)(n)>_3)throw new Error(s+"contains a string greater than "+_3+" utf8 bytes "+F_(a)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,u=!1;if(Hu(n,function(l,f){if(".value"===l)o=!0;else if(".priority"!==l&&".sv"!==l&&(u=!0,!wF(l)))throw new Error(s+" contains an invalid key ("+l+") "+F_(a)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(i,s){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(s),i.byteLength_+=(0,Re.ug)(s),SH(i)})(a,l),i(s,f,a),function(i){var s=i.parts_.pop();i.byteLength_-=(0,Re.ug)(s),i.parts_.length>0&&(i.byteLength_-=1)}(a)}),o&&u)throw new Error(s+' contains ".value" child '+F_(a)+" in addition to actual children.")}},C4=function(s,n,r,a){if(!a||void 0!==n){var o=(0,Re.gK)(s,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var u=[];Hu(n,function(l,f){var m=new Ya(l);if(EF(o,f,$s(r,m)),".priority"===LZ(m)&&!oT(f))throw new Error(o+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(m)}),function(s,n){var r,a;for(r=0;r<n.length;r++)for(var o=KA(a=n[r]),u=0;u<o.length;u++)if((".priority"!==o[u]||u!==o.length-1)&&!wF(o[u]))throw new Error(s+"contains an invalid key ("+o[u]+") in path "+a.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');n.sort(X7);var l=null;for(r=0;r<n.length;r++){if(a=n[r],null!==l&&Uh(l,a))throw new Error(s+"contains a path "+l.toString()+" that is ancestor of another path "+a.toString());l=a}}(o,u)}},b3=function(s,n,r){if(!r||void 0!==n){if($P(n))throw new Error((0,Re.gK)(s,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!oT(n))throw new Error((0,Re.gK)(s,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},uT=function(s,n,r,a){if(!(a&&void 0===r||wF(r)))throw new Error((0,Re.gK)(s,n)+'was an invalid key = "'+r+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},lT=function(s,n,r,a){if(!(a&&void 0===r||k4(r)))throw new Error((0,Re.gK)(s,n)+'was an invalid path = "'+r+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vh=function(s,n){if(".info"===zi(n))throw new Error(s+" failed = Can't modify data under /.info/")},D4=function(s,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!wF(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(s){return s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),k4(s)}(r))throw new Error((0,Re.gK)(s,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},q9=function i(){(0,M.Z)(this,i),this.eventLists_=[],this.recursionDepth_=0};function kF(i,s){for(var n=null,r=0;r<s.length;r++){var a=s[r],o=a.getPath();null!==n&&!NZ(o,n.path)&&(i.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(a)}n&&i.eventLists_.push(n)}function w3(i,s,n){kF(i,n),S4(i,function(r){return NZ(r,s)})}function zh(i,s,n){kF(i,n),S4(i,function(r){return Uh(r,s)||Uh(s,r)})}function S4(i,s){i.recursionDepth_++;for(var n=!0,r=0;r<i.eventLists_.length;r++){var a=i.eventLists_[r];a&&(s(a.path)?(Y9(i.eventLists_[r]),i.eventLists_[r]=null):n=!1)}n&&(i.eventLists_=[]),i.recursionDepth_--}function Y9(i){for(var s=0;s<i.events.length;s++){var n=i.events[s];if(null!==n){i.events[s]=null;var r=n.getEventRunner();qp&&uu("event: "+n.toString()),Kw(r)}}}var A4="repo_interrupt",$9=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.repoInfo_=s,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new q9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aF(),this.transactionQueueTree_=new m3,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return(0,R.Z)(i,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),i}();function T4(i){var n=i.infoData_.getNode(new Ya(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function cT(i){return(s=(s={timestamp:T4(i)})||{}).timestamp=s.timestamp||(new Date).getTime(),s;var s}function x4(i,s,n,r,a){i.dataUpdateCount++;var o=new Ya(s);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(s,n):n;var u=[];if(a)if(r){var l=(0,Re.UI)(n,function(C){return uo(C)});u=function(i,s,n,r){var a=h3(i,r);if(a){var o=f3(a),u=o.path,l=o.queryId,f=lc(u,s),m=nh.fromObject(n);return d3(i,u,new QZ(XZ(l),f,m))}return[]}(i.serverSyncTree_,o,l,a)}else{var f=uo(n);u=function(i,s,n,r){var a=h3(i,r);if(null!=a){var o=f3(a),u=o.path,l=o.queryId,f=lc(u,s);return d3(i,u,new sF(XZ(l),f,n))}return[]}(i.serverSyncTree_,o,f,a)}else if(r){var m=(0,Re.UI)(n,function(C){return uo(C)});u=function(i,s,n){var r=nh.fromObject(n);return nE(i,new QZ({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,r))}(i.serverSyncTree_,o,m)}else{var b=uo(n);u=iT(i.serverSyncTree_,o,b)}var w=o;u.length>0&&(w=iE(i,o)),zh(i.eventQueue_,w,u)}function M4(i,s){E3(i,"connected",s),!1===s&&function(i){rE(i,"onDisconnectEvents");var s=cT(i),n=aF();YZ(i.onDisconnect_,Va(),function(a,o){var u=b4(a,o,i.serverSyncTree_,s);eE(n,a,u)});var r=[];YZ(n,Va(),function(a,o){r=r.concat(iT(i.serverSyncTree_,a,o));var u=S3(i,a);iE(i,u)}),i.onDisconnect_=aF(),zh(i.eventQueue_,Va(),r)}(i)}function E3(i,s,n){var r=new Ya("/.info/"+s),a=uo(n);i.infoData_.updateSnapshot(r,a);var o=iT(i.infoSyncTree_,r,a);zh(i.eventQueue_,r,o)}function CF(i){return i.nextWriteId_++}function k3(i,s,n,r,a){rE(i,"set",{path:s.toString(),value:n,priority:r});var o=cT(i),u=uo(n,r),l=mF(i.serverSyncTree_,s),f=p3(u,l,o),m=CF(i),b=l3(i.serverSyncTree_,s,f,m,!0);kF(i.eventQueue_,b),i.server_.put(s.toString(),u.val(!0),function(C,T){var I="ok"===C;I||uc("set at "+s+" failed: "+C);var Z=Xm(i.serverSyncTree_,m,!I);zh(i.eventQueue_,s,Z),Qm(0,a,C,T)});var w=S3(i,s);iE(i,w),zh(i.eventQueue_,w,[])}function nY(i,s,n){i.server_.onDisconnectCancel(s.toString(),function(r,a){"ok"===r&&qZ(i.onDisconnect_,s),Qm(0,n,r,a)})}function I4(i,s,n,r){var a=uo(n);i.server_.onDisconnectPut(s.toString(),a.val(!0),function(o,u){"ok"===o&&eE(i.onDisconnect_,s,a),Qm(0,r,o,u)})}function C3(i,s,n){var r;r=".info"===zi(s._path)?c3(i.infoSyncTree_,s,n):c3(i.serverSyncTree_,s,n),w3(i.eventQueue_,s._path,r)}function P4(i){i.persistentConnection_&&i.persistentConnection_.interrupt(A4)}function rE(i){var s="";i.persistentConnection_&&(s=i.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];uu.apply(void 0,[s].concat(r))}function Qm(i,s,n,r){s&&Kw(function(){if("ok"===n)s(null);else{var a=(n||"error").toUpperCase(),o=a;r&&(o+=": "+r);var u=new Error(o);u.code=a,s(u)}})}function D3(i,s,n){return mF(i.serverSyncTree_,s,n)||ki.EMPTY_NODE}function DF(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.transactionQueueTree_;if(s||SF(i,s),N_(s)){var n=R4(i,s);(0,Re.hu)(n.length>0,"Sending zero length transaction queue");var r=n.every(function(a){return 0===a.status});r&&uY(i,sT(s),n)}else w4(s)&&bF(s,function(a){DF(i,a)})}function uY(i,s,n){for(var r=n.map(function(C){return C.currentWriteId}),a=D3(i,s,r),o=a,u=a.hash(),l=0;l<n.length;l++){var f=n[l];(0,Re.hu)(0===f.status,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;var m=lc(s,f.path);o=o.updateChild(m,f.currentOutputSnapshotRaw)}var b=o.val(!0),w=s;i.server_.put(w.toString(),b,function(C){rE(i,"transaction put response",{path:w.toString(),status:C});var T=[];if("ok"===C){for(var I=[],Z=function(ve){n[ve].status=2,T=T.concat(Xm(i.serverSyncTree_,n[ve].currentWriteId)),n[ve].onComplete&&I.push(function(){return n[ve].onComplete(null,!0,n[ve].currentOutputSnapshotResolved)}),n[ve].unwatcher()},Y=0;Y<n.length;Y++)Z(Y);SF(i,_F(i.transactionQueueTree_,s)),DF(i,i.transactionQueueTree_),zh(i.eventQueue_,s,T);for(var V=0;V<I.length;V++)Kw(I[V])}else{if("datastale"===C)for(var W=0;W<n.length;W++)n[W].status=3===n[W].status?4:0;else{uc("transaction at "+w.toString()+" failed: "+C);for(var se=0;se<n.length;se++)n[se].status=4,n[se].abortReason=C}iE(i,s)}},u)}function iE(i,s){var n=F4(i,s),r=sT(n);return function(i,s,n){if(0!==s.length){for(var r=[],a=[],u=s.filter(function(b){return 0===b.status}).map(function(b){return b.currentWriteId}),l=function(w){var C=s[w],T=lc(n,C.path),I=!1,Z=void 0;if((0,Re.hu)(null!==T,"rerunTransactionsUnderNode_: relativePath should not be null."),4===C.status)I=!0,Z=C.abortReason,a=a.concat(Xm(i.serverSyncTree_,C.currentWriteId,!0));else if(0===C.status)if(C.retryCount>=25)I=!0,Z="maxretry",a=a.concat(Xm(i.serverSyncTree_,C.currentWriteId,!0));else{var Y=D3(i,C.path,u);C.currentInputSnapshot=Y;var V=s[w].update(Y.val());if(void 0!==V){EF("transaction failed: Data returned ",V,C.path);var W=uo(V);"object"==typeof V&&null!=V&&(0,Re.r3)(V,".priority")||(W=W.updatePriority(Y.getPriority()));var fe=C.currentWriteId,ve=cT(i),me=p3(W,Y,ve);C.currentOutputSnapshotRaw=W,C.currentOutputSnapshotResolved=me,C.currentWriteId=CF(i),u.splice(u.indexOf(fe),1),a=(a=a.concat(l3(i.serverSyncTree_,C.path,me,C.currentWriteId,C.applyLocally))).concat(Xm(i.serverSyncTree_,fe,!0))}else I=!0,Z="nodata",a=a.concat(Xm(i.serverSyncTree_,C.currentWriteId,!0))}zh(i.eventQueue_,n,a),a=[],I&&(s[w].status=2,setTimeout(s[w].unwatcher,Math.floor(0)),s[w].onComplete&&r.push("nodata"===Z?function(){return s[w].onComplete(null,!1,s[w].currentInputSnapshot)}:function(){return s[w].onComplete(new Error(Z),!1,null)}))},f=0;f<s.length;f++)l(f);SF(i,i.transactionQueueTree_);for(var m=0;m<r.length;m++)Kw(r[m]);DF(i,i.transactionQueueTree_)}}(i,R4(i,n),r),r}function F4(i,s){var n,r=i.transactionQueueTree_;for(n=zi(s);null!==n&&void 0===N_(r);)r=_F(r,n),n=zi(s=_s(s));return r}function R4(i,s){var n=[];return O4(i,s,n),n.sort(function(r,a){return r.order-a.order}),n}function O4(i,s,n){var r=N_(s);if(r)for(var a=0;a<r.length;a++)n.push(r[a]);bF(s,function(o){O4(i,o,n)})}function SF(i,s){var n=N_(s);if(n){for(var r=0,a=0;a<n.length;a++)2!==n[a].status&&(n[r]=n[a],r++);n.length=r,g3(s,n.length>0?n:void 0)}bF(s,function(o){SF(i,o)})}function S3(i,s){var n=sT(F4(i,s)),r=_F(i.transactionQueueTree_,s);return function(i,s,n){for(var r=i.parent;null!==r;){if(s(r))return!0;r=r.parent}}(r,function(a){A3(i,a)}),A3(i,r),E4(r,function(a){A3(i,a)}),n}function A3(i,s){var n=N_(s);if(n){for(var r=[],a=[],o=-1,u=0;u<n.length;u++)3===n[u].status||(1===n[u].status?((0,Re.hu)(o===u-1,"All SENT items should be at beginning of queue."),o=u,n[u].status=3,n[u].abortReason="set"):((0,Re.hu)(0===n[u].status,"Unexpected transaction status in abort"),n[u].unwatcher(),a=a.concat(Xm(i.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&r.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));-1===o?g3(s,void 0):n.length=o+1,zh(i.eventQueue_,sT(s),a);for(var l=0;l<r.length;l++)Kw(r[l])}}var T3=function(s,n){var r=fY(s),a=r.namespace;return"firebase.com"===r.domain&&Gd(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||"undefined"===a)&&"localhost"!==r.domain&&Gd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&uc("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new IZ(r.host,r.secure,a,n,"ws"===r.scheme||"wss"===r.scheme,"",a!==r.subdomain),path:new Ya(r.pathString)}},fY=function(s){var n="",r="",a="",o="",u="",l=!0,f="https",m=443;if("string"==typeof s){var b=s.indexOf("//");b>=0&&(f=s.substring(0,b-1),s=s.substring(b+2));var w=s.indexOf("/");-1===w&&(w=s.length);var C=s.indexOf("?");-1===C&&(C=s.length),n=s.substring(0,Math.min(w,C)),w<C&&(o=function(i){for(var s="",n=i.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var a=n[r];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(o){}s+="/"+a}return s}(s.substring(w,C)));var T=function(i){var s={};"?"===i.charAt(0)&&(i=i.substring(1));var r,n=(0,Ve.Z)(i.split("&"));try{for(n.s();!(r=n.n()).done;){var a=r.value;if(0!==a.length){var o=a.split("=");2===o.length?s[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):uc("Invalid query segment '".concat(a,"' in query '").concat(i,"'"))}}}catch(u){n.e(u)}finally{n.f()}return s}(s.substring(Math.min(s.length,C)));(b=n.indexOf(":"))>=0?(l="https"===f||"wss"===f,m=parseInt(n.substring(b+1),10)):b=n.length;var I=n.slice(0,b);if("localhost"===I.toLowerCase())r="localhost";else if(I.split(".").length<=2)r=I;else{var Z=n.indexOf(".");a=n.substring(0,Z).toLowerCase(),r=n.substring(Z+1),u=a}"ns"in T&&(u=T.ns)}return{host:n,port:m,domain:r,subdomain:a,secure:l,scheme:f,pathString:o,namespace:u}},L4=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.eventType=s,this.eventRegistration=n,this.snapshot=r,this.prevName=a}return(0,R.Z)(i,[{key:"getPath",value:function(){var n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+(0,Re.Pz)(this.snapshot.exportVal())}}]),i}(),N4=function(){function i(s,n,r){(0,M.Z)(this,i),this.eventRegistration=s,this.error=n,this.path=r}return(0,R.Z)(i,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),i}(),Z4=function(){function i(s,n){(0,M.Z)(this,i),this.snapshotCallback=s,this.cancelCallback=n}return(0,R.Z)(i,[{key:"onValue",value:function(n,r){this.snapshotCallback.call(null,n,r)}},{key:"onCancel",value:function(n){return(0,Re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}]),i}(),B4=function(){function i(s,n){(0,M.Z)(this,i),this._repo=s,this._path=n}return(0,R.Z)(i,[{key:"cancel",value:function(){var n=new Re.BH;return nY(this._repo,this._path,n.wrapCallback(function(){})),n.promise}},{key:"remove",value:function(){Vh("OnDisconnect.remove",this._path);var n=new Re.BH;return I4(this._repo,this._path,null,n.wrapCallback(function(){})),n.promise}},{key:"set",value:function(n){Vh("OnDisconnect.set",this._path),qd("OnDisconnect.set",n,this._path,!1);var r=new Re.BH;return I4(this._repo,this._path,n,r.wrapCallback(function(){})),r.promise}},{key:"setWithPriority",value:function(n,r){Vh("OnDisconnect.setWithPriority",this._path),qd("OnDisconnect.setWithPriority",n,this._path,!1),b3("OnDisconnect.setWithPriority",r,!1);var a=new Re.BH;return function(i,s,n,r,a){var o=uo(n,r);i.server_.onDisconnectPut(s.toString(),o.val(!0),function(u,l){"ok"===u&&eE(i.onDisconnect_,s,o),Qm(0,a,u,l)})}(this._repo,this._path,n,r,a.wrapCallback(function(){})),a.promise}},{key:"update",value:function(n){Vh("OnDisconnect.update",this._path),C4("OnDisconnect.update",n,this._path,!1);var r=new Re.BH;return function(i,s,n,r){if((0,Re.xb)(n))return uu("onDisconnect().update() called with empty data.  Don't do anything."),void Qm(0,r,"ok",void 0);i.server_.onDisconnectMerge(s.toString(),n,function(a,o){"ok"===a&&Hu(n,function(u,l){var f=uo(l);eE(i.onDisconnect_,$s(s,u),f)}),Qm(0,r,a,o)})}(this._repo,this._path,n,r.wrapCallback(function(){})),r.promise}}]),i}(),Hh=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._repo=s,this._path=n,this._queryParams=r,this._orderByCalled=a}return(0,R.Z)(i,[{key:"key",get:function(){return Hi(this._path)?null:LZ(this._path)}},{key:"ref",get:function(){return new Yd(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var n=HH(this._queryParams),r=Yz(n);return"{}"===r?"default":r}},{key:"_queryObject",get:function(){return HH(this._queryParams)}},{key:"isEqual",value:function(n){if(!((n=(0,Re.m9)(n))instanceof i))return!1;var r=this._repo===n._repo,a=NZ(this._path,n._path);return r&&a&&this._queryIdentifier===n._queryIdentifier}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(i){for(var s="",n=i.pieceNum_;n<i.pieces_.length;n++)""!==i.pieces_[n]&&(s+="/"+encodeURIComponent(String(i.pieces_[n])));return s||"/"}(this._path)}}]),i}();function AF(i,s){if(!0===i._orderByCalled)throw new Error(s+": You can't combine multiple orderBy calls.")}function Jm(i){var s=null,n=null;if(i.hasStart()&&(s=i.getIndexStartValue()),i.hasEnd()&&(n=i.getIndexEndValue()),i.getIndex()===Wd){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==Yp)throw new Error(r);if("string"!=typeof s)throw new Error(a)}if(i.hasEnd()){if(i.getIndexEndName()!==jd)throw new Error(r);if("string"!=typeof n)throw new Error(a)}}else if(i.getIndex()===Ms){if(null!=s&&!oT(s)||null!=n&&!oT(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Re.hu)(i.getIndex()instanceof VZ||i.getIndex()===zZ,"unknown index type."),null!=s&&"object"==typeof s||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function TF(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Yd=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){return(0,M.Z)(this,n),s.call(this,r,a,new VH,!1)}return(0,R.Z)(n,[{key:"parent",get:function(){var a=DH(this._path);return null===a?null:new n(this._repo,a)}},{key:"root",get:function(){for(var a=this;null!==a.parent;)a=a.parent;return a}}]),n}(Hh),xF=function(){function i(s,n,r){(0,M.Z)(this,i),this._node=s,this.ref=n,this._index=r}return(0,R.Z)(i,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(n){var r=new Ya(n),a=Z_(this.ref,n);return new i(this._node.getChild(r),a,Ms)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(n){var r=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(o,u){return n(new i(u,Z_(r.ref,o),Ms))})}},{key:"hasChild",value:function(n){var r=new Ya(n);return!this._node.getChild(r).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),i}();function U4(i,s){return(i=(0,Re.m9)(i))._checkNotDeleted("ref"),void 0!==s?Z_(i._root,s):i._root}function V4(i,s){(i=(0,Re.m9)(i))._checkNotDeleted("refFromURL");var n=T3(s,i._repo.repoInfo_.nodeAdmin);D4("refFromURL",n);var r=n.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&r.host!==i._repo.repoInfo_.host&&Gd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+i._repo.repoInfo_.host+")"),U4(i,n.path.toString())}function Z_(i,s){return null===zi((i=(0,Re.m9)(i))._path)?((r=s)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),lT("child","path",r,!1)):lT("child","path",s,!1),new Yd(i._repo,$s(i._path,s));var r}function dY(i,s){i=(0,Re.m9)(i),Vh("push",i._path),qd("push",s,i._path,!0);var u,n=T4(i._repo),r=yq(n),a=Z_(i,r),o=Z_(i,r);return u=null!=s?x3(o,s).then(function(){return o}):Promise.resolve(o),a.then=u.then.bind(u),a.catch=u.then.bind(u,void 0),a}function pY(i){return Vh("remove",i._path),x3(i,null)}function x3(i,s){i=(0,Re.m9)(i),Vh("set",i._path),qd("set",s,i._path,!1);var n=new Re.BH;return k3(i._repo,i._path,s,null,n.wrapCallback(function(){})),n.promise}function vY(i,s){i=(0,Re.m9)(i),Vh("setPriority",i._path),b3("setPriority",s,!1);var n=new Re.BH;return k3(i._repo,$s(i._path,".priority"),s,null,n.wrapCallback(function(){})),n.promise}function mY(i,s,n){if(Vh("setWithPriority",i._path),qd("setWithPriority",s,i._path,!1),b3("setWithPriority",n,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";var r=new Re.BH;return k3(i._repo,i._path,s,n,r.wrapCallback(function(){})),r.promise}function gY(i,s){C4("update",s,i._path,!1);var n=new Re.BH;return function(i,s,n,r){rE(i,"update",{path:s.toString(),value:n});var a=!0,o=cT(i),u={};if(Hu(n,function(m,b){a=!1,u[m]=b4($s(s,m),uo(b),i.serverSyncTree_,o)}),a)uu("update() called with empty data.  Don't do anything."),Qm(0,r,"ok",void 0);else{var l=CF(i),f=function(i,s,n,r){!function(i,s,n,r){(0,Re.hu)(r>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:s,children:n,writeId:r,visible:!0}),i.visibleWrites=e3(i.visibleWrites,s,n),i.lastWriteId=r}(i.pendingWriteTree_,s,n,r);var a=nh.fromObject(n);return nE(i,new QZ({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},s,a))}(i.serverSyncTree_,s,u,l);kF(i.eventQueue_,f),i.server_.merge(s.toString(),n,function(m,b){var w="ok"===m;w||uc("update at "+s+" failed: "+m);var C=Xm(i.serverSyncTree_,l,!w),T=C.length>0?iE(i,s):s;zh(i.eventQueue_,T,C),Qm(0,r,m,b)}),Hu(n,function(m){var b=S3(i,$s(s,m));iE(i,b)}),zh(i.eventQueue_,s,[])}}(i._repo,i._path,s,n.wrapCallback(function(){})),n.promise}function yY(i){return function(i,s){var n=function(i,s){var n=s._path,r=null;i.syncPointTree_.foreachOnPath(n,function(m,b){var w=lc(m,n);r=r||Km(b,w)});var a=i.syncPointTree_.get(n);a?r=r||Km(a,Va()):(a=new l4,i.syncPointTree_=i.syncPointTree_.set(n,a));var o=null!=r,u=o?new qm(r,!0,!1):null;return function(i){return uF(i.viewCache_)}(c4(a,s,lF(i.pendingWriteTree_,s._path),o?u.getNode():ki.EMPTY_NODE,o))}(i.serverSyncTree_,s);return null!=n?Promise.resolve(n):i.server_.get(s).then(function(r){var a=uo(r).withIndex(s._queryParams.getIndex()),o=iT(i.serverSyncTree_,s._path,a);return w3(i.eventQueue_,s._path,o),Promise.resolve(a)},function(r){return rE(i,"get for query "+(0,Re.Pz)(s)+" failed: "+r),Promise.reject(new Error(r))})}((i=(0,Re.m9)(i))._repo,i).then(function(s){return new xF(s,new Yd(i._repo,i._path),i._queryParams.getIndex())})}var z4=function(){function i(s){(0,M.Z)(this,i),this.callbackContext=s}return(0,R.Z)(i,[{key:"respondsTo",value:function(n){return"value"===n}},{key:"createEvent",value:function(n,r){var a=r._queryParams.getIndex();return new L4("value",this,new xF(n.snapshotNode,new Yd(r._repo,r._path),a))}},{key:"getEventRunner",value:function(n){var r=this;return"cancel"===n.getEventType()?function(){return r.callbackContext.onCancel(n.error)}:function(){return r.callbackContext.onValue(n.snapshot,null)}}},{key:"createCancelEvent",value:function(n,r){return this.callbackContext.hasCancelCallback?new N4(this,n,r):null}},{key:"matches",value:function(n){return n instanceof i&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),i}(),H4=function(){function i(s,n){(0,M.Z)(this,i),this.eventType=s,this.callbackContext=n}return(0,R.Z)(i,[{key:"respondsTo",value:function(n){var r="children_added"===n?"child_added":n;return this.eventType===("children_removed"===r?"child_removed":r)}},{key:"createCancelEvent",value:function(n,r){return this.callbackContext.hasCancelCallback?new N4(this,n,r):null}},{key:"createEvent",value:function(n,r){(0,Re.hu)(null!=n.childName,"Child events should have a childName.");var a=Z_(new Yd(r._repo,r._path),n.childName),o=r._queryParams.getIndex();return new L4(n.type,this,new xF(n.snapshotNode,a,o),n.prevName)}},{key:"getEventRunner",value:function(n){var r=this;return"cancel"===n.getEventType()?function(){return r.callbackContext.onCancel(n.error)}:function(){return r.callbackContext.onValue(n.snapshot,n.prevName)}}},{key:"matches",value:function(n){return n instanceof i&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),i}();function hT(i,s,n,r,a){var o;if("object"==typeof r&&(o=void 0,a=r),"function"==typeof r&&(o=r),a&&a.onlyOnce){var u=n,l=function(w,C){C3(i._repo,i,m),u(w,C)};l.userCallback=n.userCallback,l.context=n.context,n=l}var f=new Z4(n,o||void 0),m="value"===s?new z4(f):new H4(s,f);return function(i,s,n){var r;r=".info"===zi(s._path)?v4(i.infoSyncTree_,s,n):v4(i.serverSyncTree_,s,n),w3(i.eventQueue_,s._path,r)}(i._repo,i,m),function(){return C3(i._repo,i,m)}}function M3(i,s,n,r){return hT(i,"value",s,n,r)}function G4(i,s,n,r){return hT(i,"child_added",s,n,r)}function j4(i,s,n,r){return hT(i,"child_changed",s,n,r)}function W4(i,s,n,r){return hT(i,"child_moved",s,n,r)}function q4(i,s,n,r){return hT(i,"child_removed",s,n,r)}function Y4(i,s,n){var r=null,a=n?new Z4(n):null;"value"===s?r=new z4(a):s&&(r=new H4(s,a)),C3(i._repo,i,r)}var Mf=function i(){(0,M.Z)(this,i)},K4=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,R.Z)(n,[{key:"_apply",value:function(a){qd("endAt",this._value,a._path,!0);var o=WZ(a._queryParams,this._value,this._key);if(TF(o),Jm(o),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hh(a._repo,a._path,o,a._orderByCalled)}}]),n}(Mf);function _Y(i,s){return uT("endAt","key",s,!0),new K4(i,s)}var bY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,R.Z)(n,[{key:"_apply",value:function(a){qd("endBefore",this._value,a._path,!1);var o=function(i,s,n){var a;return i.index_===Wd?("string"==typeof s&&(s=ZH(s)),a=WZ(i,s,n)):a=WZ(i,s,null==n?Yp:ZH(n)),a.endBeforeSet_=!0,a}(a._queryParams,this._value,this._key);if(TF(o),Jm(o),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Hh(a._repo,a._path,o,a._orderByCalled)}}]),n}(Mf);function wY(i,s){return uT("endBefore","key",s,!0),new bY(i,s)}var $4=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,R.Z)(n,[{key:"_apply",value:function(a){qd("startAt",this._value,a._path,!0);var o=jZ(a._queryParams,this._value,this._key);if(TF(o),Jm(o),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Hh(a._repo,a._path,o,a._orderByCalled)}}]),n}(Mf);function EY(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1?arguments[1]:void 0;return uT("startAt","key",s,!0),new $4(i,s)}var kY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,R.Z)(n,[{key:"_apply",value:function(a){qd("startAfter",this._value,a._path,!1);var o=function(i,s,n){var r;return i.index_===Wd?("string"==typeof s&&(s=NH(s)),r=jZ(i,s,n)):r=jZ(i,s,null==n?jd:NH(n)),r.startAfterSet_=!0,r}(a._queryParams,this._value,this._key);if(TF(o),Jm(o),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Hh(a._repo,a._path,o,a._orderByCalled)}}]),n}(Mf);function CY(i,s){return uT("startAfter","key",s,!0),new kY(i,s)}var DY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._limit=r,a}return(0,R.Z)(n,[{key:"_apply",value:function(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hh(a._repo,a._path,function(i,s){var n=i.copy();return n.limitSet_=!0,n.limit_=s,n.viewFrom_="l",n}(a._queryParams,this._limit),a._orderByCalled)}}]),n}(Mf);function SY(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new DY(i)}var AY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._limit=r,a}return(0,R.Z)(n,[{key:"_apply",value:function(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Hh(a._repo,a._path,function(i,s){var n=i.copy();return n.limitSet_=!0,n.limit_=s,n.viewFrom_="r",n}(a._queryParams,this._limit),a._orderByCalled)}}]),n}(Mf);function TY(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new AY(i)}var xY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._path=r,a}return(0,R.Z)(n,[{key:"_apply",value:function(a){AF(a,"orderByChild");var o=new Ya(this._path);if(Hi(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var u=new VZ(o),l=iF(a._queryParams,u);return Jm(l),new Hh(a._repo,a._path,l,!0)}}]),n}(Mf);function MY(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return lT("orderByChild","path",i,!1),new xY(i)}var IY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"_apply",value:function(a){AF(a,"orderByKey");var o=iF(a._queryParams,Wd);return Jm(o),new Hh(a._repo,a._path,o,!0)}}]),n}(Mf);function PY(){return new IY}var FY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"_apply",value:function(a){AF(a,"orderByPriority");var o=iF(a._queryParams,Ms);return Jm(o),new Hh(a._repo,a._path,o,!0)}}]),n}(Mf);function RY(){return new FY}var OY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"_apply",value:function(a){AF(a,"orderByValue");var o=iF(a._queryParams,zZ);return Jm(o),new Hh(a._repo,a._path,o,!0)}}]),n}(Mf);function LY(){return new OY}var NY=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this))._value=r,o._key=a,o}return(0,R.Z)(n,[{key:"_apply",value:function(a){if(qd("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new K4(this._value,this._key)._apply(new $4(this._value,this._key)._apply(a))}}]),n}(Mf);function ZY(i,s){return uT("equalTo","key",s,!0),new NY(i,s)}function If(i){for(var s=(0,Re.m9)(i),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=0,u=r;o<u.length;o++){var l=u[o];s=l._apply(s)}return s}(function(i){(0,Re.hu)(!dF,"__referenceConstructor has already been defined"),dF=i})(Yd),function(i){(0,Re.hu)(!vF,"__referenceConstructor has already been defined"),vF=i}(Yd);var I3={};function UY(i,s,n,r){i.repoInfo_=new IZ("".concat(s,":").concat(n),!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),r&&(i.authTokenProvider_=r)}function Q4(i,s,n,r,a){var o=r||i.options.databaseURL;void 0===o&&(i.options.projectId||Gd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),uu("Using default host for project ",i.options.projectId),o="".concat(i.options.projectId,"-default-rtdb.firebaseio.com"));var f,u=T3(o,a),l=u.repoInfo,m=void 0;"undefined"!=typeof process&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(f=!0,o="http://".concat(m,"?ns=").concat(l.namespace),l=(u=T3(o,a)).repoInfo):f=!u.repoInfo.secure;var b=a&&f?new WA(WA.OWNER):new w7(i.name,i.options,s);D4("Invalid Firebase Database URL",u),Hi(u.path)||Gd("Database URL must point to the root of a Firebase Database (not including a child path).");var w=function(i,s,n,r){var a=I3[s.name];a||(I3[s.name]=a={});var o=a[i.toURLString()];return o&&Gd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new $9(i,false,n,r),a[i.toURLString()]=o,o}(l,i,b,new b7(i.name,n));return new GY(w,i)}var GY=function(){function i(s,n){(0,M.Z)(this,i),this._repoInternal=s,this.app=n,this.type="database",this._instanceStarted=!1}return(0,R.Z)(i,[{key:"_repo",get:function(){return this._instanceStarted||(function(i,s,n){if(i.stats_=RZ(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new Sq(i.repoInfo_,function(r,a,o,u){x4(i,r,a,o,u)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(function(){return M4(i,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Re.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}i.persistentConnection_=new R_(i.repoInfo_,s,function(r,a,o,u){x4(i,r,a,o,u)},function(r){M4(i,r)},function(r){!function(i,s){Hu(s,function(n,r){E3(i,n,r)})}(i,r)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(function(r){i.server_.refreshAuthToken(r)}),i.appCheckProvider_.addTokenChangeListener(function(r){i.server_.refreshAppCheckToken(r.token)}),i.statsReporter_=function(i,s){var n=i.toString();return FZ[n]||(FZ[n]=s()),FZ[n]}(i.repoInfo_,function(){return new Pq(i.stats_,i.server_)}),i.infoData_=new Aq,i.infoSyncTree_=new p4({startListening:function(a,o,u,l){var f=[],m=i.infoData_.getNode(a._path);return m.isEmpty()||(f=iT(i.infoSyncTree_,a._path,m),setTimeout(function(){l("ok")},0)),f},stopListening:function(){}}),E3(i,"connected",!1),i.serverSyncTree_=new p4({startListening:function(a,o,u,l){return i.server_.listen(a,u,o,function(f,m){var b=l(f,m);zh(i.eventQueue_,a._path,b)}),[]},stopListening:function(a,o){i.server_.unlisten(a,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Yd(this._repo,Va())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(function(i,s){var n=I3[s];(!n||n[i.key]!==i)&&Gd("Database ".concat(s,"(").concat(i.repoInfo_,") has already been deleted.")),P4(i),delete n[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(n){null===this._rootInternal&&Gd("Cannot call "+n+" on a deleted database.")}}]),i}();function jY(i,s,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(i=(0,Re.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&Gd("Cannot call useEmulator() after instance has already been initialized.");var a=i._repoInternal,o=void 0;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Gd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new WA(WA.OWNER);else if(r.mockUserToken){var u="string"==typeof r.mockUserToken?r.mockUserToken:(0,Re.Sg)(r.mockUserToken,i.app.options.projectId);o=new WA(u)}UY(a,s,n,o)}function WY(i){(i=(0,Re.m9)(i))._checkNotDeleted("goOffline"),P4(i._repo)}function qY(i){(i=(0,Re.m9)(i))._checkNotDeleted("goOnline"),function(i){i.persistentConnection_&&i.persistentConnection_.resume(A4)}(i._repo)}function YY(i,s){HA(i,s)}var $Y={".sv":"timestamp"},JY=function(){function i(s,n){(0,M.Z)(this,i),this.committed=s,this.snapshot=n}return(0,R.Z)(i,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),i}();function eK(i,s,n){var r;if(i=(0,Re.m9)(i),Vh("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";var a=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new Re.BH,l=M3(i,function(){});return function(i,s,n,r,a,o){rE(i,"transaction on "+s);var u={path:s,update:n,onComplete:r,status:null,order:YP(),applyLocally:o,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=D3(i,s,void 0);u.currentInputSnapshot=l;var f=u.update(l.val());if(void 0===f)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{EF("transaction failed: Data returned ",f,u.path),u.status=0;var w,m=_F(i.transactionQueueTree_,s),b=N_(m)||[];b.push(u),g3(m,b),"object"==typeof f&&null!==f&&(0,Re.r3)(f,".priority")?(w=(0,Re.DV)(f,".priority"),(0,Re.hu)(oT(w),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):w=(mF(i.serverSyncTree_,s)||ki.EMPTY_NODE).getPriority().val();var T=cT(i),I=uo(f,w),Z=p3(I,l,T);u.currentOutputSnapshotRaw=I,u.currentOutputSnapshotResolved=Z,u.currentWriteId=CF(i);var Y=l3(i.serverSyncTree_,s,Z,u.currentWriteId,u.applyLocally);zh(i.eventQueue_,s,Y),DF(i,i.transactionQueueTree_)}}(i._repo,i._path,s,function(m,b,w){var C=null;m?o.reject(m):(C=new xF(w,new Yd(i._repo,i._path),Ms),o.resolve(new JY(b,C)))},l,a),o.promise}R_.prototype.simpleListen=function(i,s){this.sendRequest("q",{p:i},s)},R_.prototype.echo=function(i,s){this.sendRequest("echo",{d:i},s)},Tf(ad.SDK_VERSION),(0,ad._registerComponent)(new Ep.wA("database",function(s,n){var r=n.instanceIdentifier;return Q4(s.getProvider("app").getImmediate(),s.getProvider("auth-internal"),s.getProvider("app-check-internal"),r)},"PUBLIC").setMultipleInstances(!0)),(0,ad.registerVersion)("@firebase/database","0.12.1",void 0);var rK=new kh.Yd("@firebase/database-compat"),J4=function(s){rK.warn("FIREBASE WARNING: "+s)},iK=function(s,n,r,a){if((!a||void 0!==r)&&"boolean"!=typeof r)throw new Error((0,Re.gK)(s,n)+"must be a boolean.")},aK=function(s,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Re.gK)(s,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},sK=function(){function i(s){(0,M.Z)(this,i),this._delegate=s}return(0,R.Z)(i,[{key:"cancel",value:function(n){(0,Re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Re.Wj)("OnDisconnect.cancel","onComplete",n,!0);var r=this._delegate.cancel();return n&&r.then(function(){return n(null)},function(a){return n(a)}),r}},{key:"remove",value:function(n){(0,Re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Re.Wj)("OnDisconnect.remove","onComplete",n,!0);var r=this._delegate.remove();return n&&r.then(function(){return n(null)},function(a){return n(a)}),r}},{key:"set",value:function(n,r){(0,Re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Re.Wj)("OnDisconnect.set","onComplete",r,!0);var a=this._delegate.set(n);return r&&a.then(function(){return r(null)},function(o){return r(o)}),a}},{key:"setWithPriority",value:function(n,r,a){(0,Re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Re.Wj)("OnDisconnect.setWithPriority","onComplete",a,!0);var o=this._delegate.setWithPriority(n,r);return a&&o.then(function(){return a(null)},function(u){return a(u)}),o}},{key:"update",value:function(n,r){if((0,Re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){for(var a={},o=0;o<n.length;++o)a[""+o]=n[o];n=a,J4("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Re.Wj)("OnDisconnect.update","onComplete",r,!0);var u=this._delegate.update(n);return r&&u.then(function(){return r(null)},function(l){return r(l)}),u}}]),i}(),oK=function(){function i(s,n){(0,M.Z)(this,i),this.committed=s,this.snapshot=n}return(0,R.Z)(i,[{key:"toJSON",value:function(){return(0,Re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),i}(),fT=function(){function i(s,n){(0,M.Z)(this,i),this._database=s,this._delegate=n}return(0,R.Z)(i,[{key:"val",value:function(){return(0,Re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return(0,Re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return(0,Re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return(0,Re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(n){return(0,Re.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),lT("DataSnapshot.child","path",n,!1),new i(this._database,this._delegate.child(n))}},{key:"hasChild",value:function(n){return(0,Re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),lT("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}},{key:"getPriority",value:function(){return(0,Re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(n){var r=this;return(0,Re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Re.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(function(a){return n(new i(r._database,a))})}},{key:"hasChildren",value:function(){return(0,Re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return(0,Re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return(0,Re.Dv)("DataSnapshot.ref",0,0,arguments.length),new B_(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),i}(),e6=function(){function i(s,n){(0,M.Z)(this,i),this.database=s,this._delegate=n}return(0,R.Z)(i,[{key:"on",value:function(n,r,a,o){var l,u=this;(0,Re.Dv)("Query.on",2,4,arguments.length),(0,Re.Wj)("Query.on","callback",r,!1);var f=i.getCancelAndContextArgs_("Query.on",a,o),m=function(C,T){r.call(f.context,new fT(u.database,C),T)};m.userCallback=r,m.context=f.context;var b=null===(l=f.cancel)||void 0===l?void 0:l.bind(f.context);switch(n){case"value":return M3(this._delegate,m,b),r;case"child_added":return G4(this._delegate,m,b),r;case"child_removed":return q4(this._delegate,m,b),r;case"child_changed":return j4(this._delegate,m,b),r;case"child_moved":return W4(this._delegate,m,b),r;default:throw new Error((0,Re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(n,r,a){if((0,Re.Dv)("Query.off",0,3,arguments.length),aK("Query.off",n,!0),(0,Re.Wj)("Query.off","callback",r,!0),(0,Re.lb)("Query.off","context",a,!0),r){var o=function(){};o.userCallback=r,o.context=a,Y4(this._delegate,n,o)}else Y4(this._delegate,n)}},{key:"get",value:function(){var n=this;return yY(this._delegate).then(function(r){return new fT(n.database,r)})}},{key:"once",value:function(n,r,a,o){var u=this;(0,Re.Dv)("Query.once",1,4,arguments.length),(0,Re.Wj)("Query.once","callback",r,!0);var l=i.getCancelAndContextArgs_("Query.once",a,o),f=new Re.BH,m=function(C,T){var I=new fT(u.database,C);r&&r.call(l.context,I,T),f.resolve(I)};m.userCallback=r,m.context=l.context;var b=function(C){l.cancel&&l.cancel.call(l.context,C),f.reject(C)};switch(n){case"value":M3(this._delegate,m,b,{onlyOnce:!0});break;case"child_added":G4(this._delegate,m,b,{onlyOnce:!0});break;case"child_removed":q4(this._delegate,m,b,{onlyOnce:!0});break;case"child_changed":j4(this._delegate,m,b,{onlyOnce:!0});break;case"child_moved":W4(this._delegate,m,b,{onlyOnce:!0});break;default:throw new Error((0,Re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return f.promise}},{key:"limitToFirst",value:function(n){return(0,Re.Dv)("Query.limitToFirst",1,1,arguments.length),new i(this.database,If(this._delegate,SY(n)))}},{key:"limitToLast",value:function(n){return(0,Re.Dv)("Query.limitToLast",1,1,arguments.length),new i(this.database,If(this._delegate,TY(n)))}},{key:"orderByChild",value:function(n){return(0,Re.Dv)("Query.orderByChild",1,1,arguments.length),new i(this.database,If(this._delegate,MY(n)))}},{key:"orderByKey",value:function(){return(0,Re.Dv)("Query.orderByKey",0,0,arguments.length),new i(this.database,If(this._delegate,PY()))}},{key:"orderByPriority",value:function(){return(0,Re.Dv)("Query.orderByPriority",0,0,arguments.length),new i(this.database,If(this._delegate,RY()))}},{key:"orderByValue",value:function(){return(0,Re.Dv)("Query.orderByValue",0,0,arguments.length),new i(this.database,If(this._delegate,LY()))}},{key:"startAt",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Re.Dv)("Query.startAt",0,2,arguments.length),new i(this.database,If(this._delegate,EY(n,r)))}},{key:"startAfter",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Re.Dv)("Query.startAfter",0,2,arguments.length),new i(this.database,If(this._delegate,CY(n,r)))}},{key:"endAt",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Re.Dv)("Query.endAt",0,2,arguments.length),new i(this.database,If(this._delegate,_Y(n,r)))}},{key:"endBefore",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return(0,Re.Dv)("Query.endBefore",0,2,arguments.length),new i(this.database,If(this._delegate,wY(n,r)))}},{key:"equalTo",value:function(n,r){return(0,Re.Dv)("Query.equalTo",1,2,arguments.length),new i(this.database,If(this._delegate,ZY(n,r)))}},{key:"toString",value:function(){return(0,Re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return(0,Re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(n){if((0,Re.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof i)){var r="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(r)}return this._delegate.isEqual(n._delegate)}},{key:"ref",get:function(){return new B_(this.database,new Yd(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(n,r,a){var o={cancel:void 0,context:void 0};if(r&&a)o.cancel=r,(0,Re.Wj)(n,"cancel",o.cancel,!0),o.context=a,(0,Re.lb)(n,"context",o.context,!0);else if(r)if("object"==typeof r&&null!==r)o.context=r;else{if("function"!=typeof r)throw new Error((0,Re.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=r}return o}}]),i}(),B_=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,new Hh(a._repo,a._path,new VH,!1))).database=r,o._delegate=a,o}return(0,R.Z)(n,[{key:"getKey",value:function(){return(0,Re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(a){return(0,Re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new n(this.database,Z_(this._delegate,a))}},{key:"getParent",value:function(){(0,Re.Dv)("Reference.parent",0,0,arguments.length);var a=this._delegate.parent;return a?new n(this.database,a):null}},{key:"getRoot",value:function(){return(0,Re.Dv)("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(a,o){(0,Re.Dv)("Reference.set",1,2,arguments.length),(0,Re.Wj)("Reference.set","onComplete",o,!0);var u=x3(this._delegate,a);return o&&u.then(function(){return o(null)},function(l){return o(l)}),u}},{key:"update",value:function(a,o){if((0,Re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){for(var u={},l=0;l<a.length;++l)u[""+l]=a[l];a=u,J4("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vh("Reference.update",this._delegate._path),(0,Re.Wj)("Reference.update","onComplete",o,!0);var f=gY(this._delegate,a);return o&&f.then(function(){return o(null)},function(m){return o(m)}),f}},{key:"setWithPriority",value:function(a,o,u){(0,Re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Re.Wj)("Reference.setWithPriority","onComplete",u,!0);var l=mY(this._delegate,a,o);return u&&l.then(function(){return u(null)},function(f){return u(f)}),l}},{key:"remove",value:function(a){(0,Re.Dv)("Reference.remove",0,1,arguments.length),(0,Re.Wj)("Reference.remove","onComplete",a,!0);var o=pY(this._delegate);return a&&o.then(function(){return a(null)},function(u){return a(u)}),o}},{key:"transaction",value:function(a,o,u){var l=this;(0,Re.Dv)("Reference.transaction",1,3,arguments.length),(0,Re.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,Re.Wj)("Reference.transaction","onComplete",o,!0),iK("Reference.transaction","applyLocally",u,!0);var f=eK(this._delegate,a,{applyLocally:u}).then(function(m){return new oK(m.committed,new fT(l.database,m.snapshot))});return o&&f.then(function(m){return o(null,m.committed,m.snapshot)},function(m){return o(m,!1,null)}),f}},{key:"setPriority",value:function(a,o){(0,Re.Dv)("Reference.setPriority",1,2,arguments.length),(0,Re.Wj)("Reference.setPriority","onComplete",o,!0);var u=vY(this._delegate,a);return o&&u.then(function(){return o(null)},function(l){return o(l)}),u}},{key:"push",value:function(a,o){var u=this;(0,Re.Dv)("Reference.push",0,2,arguments.length),(0,Re.Wj)("Reference.push","onComplete",o,!0);var l=dY(this._delegate,a),f=l.then(function(b){return new n(u.database,b)});o&&f.then(function(){return o(null)},function(b){return o(b)});var m=new n(this.database,l);return m.then=f.then.bind(f),m.catch=f.catch.bind(f,void 0),m}},{key:"onDisconnect",value:function(){return Vh("Reference.onDisconnect",this._delegate._path),new sK(new B4(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(e6),MF=function(){var i=function(){function s(n,r){var a=this;(0,M.Z)(this,s),this._delegate=n,this.app=r,this.INTERNAL={delete:function(){return a._delegate._delete()}}}return(0,R.Z)(s,[{key:"useEmulator",value:function(r,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jY(this._delegate,r,a,o)}},{key:"ref",value:function(r){if((0,Re.Dv)("database.ref",0,1,arguments.length),r instanceof B_){var a=V4(this._delegate,r.toString());return new B_(this,a)}var o=U4(this._delegate,r);return new B_(this,o)}},{key:"refFromURL",value:function(r){var a="database.refFromURL";(0,Re.Dv)(a,1,1,arguments.length);var o=V4(this._delegate,r);return new B_(this,o)}},{key:"goOffline",value:function(){return(0,Re.Dv)("database.goOffline",0,0,arguments.length),WY(this._delegate)}},{key:"goOnline",value:function(){return(0,Re.Dv)("database.goOnline",0,0,arguments.length),qY(this._delegate)}}]),s}();return i.ServerValue={TIMESTAMP:$Y,increment:function(n){return function(i){return{".sv":{increment:i}}}(n)}},i}(),lK=Object.freeze({__proto__:null,initStandalone:function(i){var s=i.app,n=i.url,a=i.customAuthImpl,o=i.namespace,u=i.nodeAdmin,l=void 0!==u&&u;Tf(i.version);var f=new Ep.zt("auth-internal",new Ep.H0("database-standalone"));return f.setComponent(new Ep.wA("auth-internal",function(){return a},"PRIVATE")),{instance:new MF(Q4(s,f,void 0,n,l),s),namespace:o}}}),cK=MF.ServerValue;function t6(i){return null==i}function n6(i){return"function"==typeof i.set}function r6(i,s){return n6(s)?s:i.ref(s)}function i6(i,s){if(function(i){return"string"==typeof i}(i))return s.stringCase();if(n6(i))return s.firebaseCase();if(function(i){return"function"==typeof i.exportVal}(i))return s.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: ".concat(typeof i))}function dT(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"on",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bu.z;return new ro.y(function(a){var o;return o=i[n](s,function(u,l){r.schedule(function(){a.next({snapshot:u,prevKey:l})}),"once"===n&&r.schedule(function(){return a.complete()})},function(u){r.schedule(function(){return a.error(u)})}),"on"===n?{unsubscribe:function(){null!=o&&i.off(s,o)}}:{unsubscribe:function(){}}}).pipe((0,Tr.U)(function(a){var o=a.snapshot,u=a.prevKey,l=null;return o.exists()&&(l=o.key),{type:s,payload:o,prevKey:u,key:l}}),(0,Cn.B)())}function a6(i,s){for(var n=i.length,r=0;r<n;r++)if(i[r].payload.key===s)return r;return-1}function mK(i,s){var n=s.payload,r=s.prevKey,a=s.key,o=a6(i,a),u=function(i,s){if(t6(s))return 0;var n=a6(i,s);return-1===n?i.length:n+1}(i,r);switch(s.type){case"value":if(s.payload&&s.payload.exists()){var l=null;s.payload.forEach(function(b){var w={payload:b,type:"value",prevKey:l,key:b.key};return l=b.key,i=[].concat((0,Kr.Z)(i),[w]),!1})}return i;case"child_added":if(o>-1){var f=i[o-1];(f&&f.key||null)!==r&&(i=i.filter(function(b){return b.payload.key!==n.key})).splice(u,0,s)}else{if(null==r)return[s].concat((0,Kr.Z)(i));(i=i.slice()).splice(u,0,s)}return i;case"child_removed":return i.filter(function(b){return b.payload.key!==n.key});case"child_changed":return i.map(function(b){return b.payload.key===a?s:b});case"child_moved":if(o>-1){var m=i.splice(o,1)[0];return(i=i.slice()).splice(u,0,m),i}return i;default:return i}}function s6(i){return(t6(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function o6(i,s,n){return function(i,s,n){return dT(i,"value","once",n).pipe(Uo(function(r){var a=[(0,wr.of)(r)];return s.forEach(function(o){return a.push(dT(i,o,"on",n))}),Ld.T.apply(void 0,a).pipe(Dv(mK,[]))}),rd())}(i,s=s6(s),n)}function u6(i,s,n){var r=(s=s6(s)).map(function(a){return dT(i,a,"on",n)});return Ld.T.apply(void 0,(0,Kr.Z)(r))}function l6(i,s){return function(r,a){return i6(r,{stringCase:function(){return i.child(r)[s](a)},firebaseCase:function(){return r[s](a)},snapshotCase:function(){return r.ref[s](a)}})}}function bK(i){return function(n){return n?i6(n,{stringCase:function(){return i.child(n).remove()},firebaseCase:function(){return n.remove()},snapshotCase:function(){return n.ref.remove()}}):i.remove()}}function c6(i,s){return function(){return dT(i,"value","on",s)}}!function(i){i.INTERNAL.registerComponent(new Ep.wA("database-compat",function(s,n){var r=n.instanceIdentifier,a=s.getProvider("app-compat").getImmediate(),o=s.getProvider("database").getImmediate({identifier:r});return new MF(o,a)},"PUBLIC").setServiceProps({Reference:B_,Query:e6,Database:MF,DataSnapshot:fT,enableLogging:YY,INTERNAL:lK,ServerValue:cK}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.1.1")}(HO.Z);var kK=new v.OlP("angularfire2.realtimeDatabaseURL"),CK=new v.OlP("angularfire2.database.use-emulator"),h6=function(){var i=function(){function s(n,r,a,o,u,l,f,m,b,w,C,T,I,Z){(0,M.Z)(this,s),this.schedulers=l;var Y=f,V=(0,Tl.on)(n,u,r);m&&KI(V,u,b,C,T,I,w,Z),this.database=(0,Wa.cc)("".concat(V.name,".database.").concat(a),"AngularFireDatabase",V.name,function(){var W=u.runOutsideAngular(function(){return V.database(a||void 0)});return Y&&W.useEmulator.apply(W,(0,Kr.Z)(Y)),W},[Y])}return(0,R.Z)(s,[{key:"list",value:function(r,a){var o=this,u=this.schedulers.ngZone.runOutsideAngular(function(){return r6(o.database,r)}),l=u;return a&&(l=a(u)),function(i,s){var n=s.schedulers.outsideAngular,r=s.schedulers.ngZone.run(function(){return i.ref});return{query:i,update:l6(r,"update"),set:l6(r,"set"),push:function(o){return r.push(o)},remove:bK(r),snapshotChanges:function(o){return o6(i,o,n).pipe(Wa.iC)},stateChanges:function(o){return u6(i,o,n).pipe(Wa.iC)},auditTrail:function(o){return function(i,s,n){return function(i,s,n){return function(i,s){return dT(i,"value","on",s).pipe((0,Tr.U)(function(n){var r;return n.payload.forEach(function(a){return r=a.key,!1}),{data:n,lastKeyToLoad:r}}))}(i,n).pipe(function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return function(r){var a;return"function"==typeof s[s.length-1]&&(a=s.pop()),r.lift(new xs(s,a))}}(s),(0,Tr.U)(function(a){var o=(0,Te.Z)(a,2),l=o[1],f=o[0].lastKeyToLoad,m=l.map(function(b){return b.key});return{actions:l,lastKeyToLoad:f,loadedKeys:m}}),function(i){return function(s){return s.lift(new Bh(i))}}(function(a){return-1===a.loadedKeys.indexOf(a.lastKeyToLoad)}),(0,Tr.U)(function(a){return a.actions}))}(i,u6(i,s).pipe(Dv(function(a,o){return[].concat((0,Kr.Z)(a),[o])},[])),n)}(i,o,n).pipe(Wa.iC)},valueChanges:function(o,u){return o6(i,o,n).pipe((0,Tr.U)(function(f){return f.map(function(m){return u&&u.idField?Object.assign(Object.assign({},m.payload.val()),(0,vr.Z)({},u.idField,m.key)):m.payload.val()})}),Wa.iC)}}}(l,this)}},{key:"object",value:function(r){var a=this;return function(i,s){return{query:i,snapshotChanges:function(){return c6(i,s.schedulers.outsideAngular)().pipe(Wa.iC)},update:function(r){return i.ref.update(r)},set:function(r){return i.ref.set(r)},remove:function(){return i.ref.remove()},valueChanges:function(){return c6(i,s.schedulers.outsideAngular)().pipe(Wa.iC,(0,Tr.U)(function(a){return a.payload.exists()?a.payload.val():null}))}}}(this.schedulers.ngZone.runOutsideAngular(function(){return r6(a.database,r)}),this)}},{key:"createPushId",value:function(){var r=this;return this.schedulers.ngZone.runOutsideAngular(function(){return r.database.ref()}).push().key}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Tl.Dh),v.LFG(Tl.xv,8),v.LFG(kK,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Wa.HU),v.LFG(CK,8),v.LFG(Zd,8),v.LFG(Om,8),v.LFG(Pw,8),v.LFG(WI,8),v.LFG(qI,8),v.LFG(YI,8),v.LFG(iA,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i}(),DK=function(){var i=function s(){(0,M.Z)(this,s),GI.Z.registerVersion("angularfire",Wa.q4.full,"rtdb-compat")};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[h6]}),i}(),Gh=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._value=r,a}return(0,R.Z)(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"_subscribe",this).call(this,a);return o&&!o.closed&&a.next(this._value),o}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new UI.N;return this._value}},{key:"next",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"next",this).call(this,this._value=a)}}]),n}(jr.xQ);function eg(i){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];return n.length?n.some(function(a){return i[a]}):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}var ll=ne(6599);function N3(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu.P;return function(n){return n.lift(new NK(i,s))}}var NK=function(){function i(s,n){(0,M.Z)(this,i),this.dueTime=s,this.scheduler=n}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new ZK(n,this.dueTime,this.scheduler))}}]),i}(),ZK=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).dueTime=a,u.scheduler=o,u.debouncedSubscription=null,u.lastValue=null,u.hasValue=!1,u}return(0,R.Z)(n,[{key:"_next",value:function(a){this.clearDebounce(),this.lastValue=a,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(BK,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var a=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(a)}}},{key:"clearDebounce",value:function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)}}]),n}(qs.L);function BK(i){i.debouncedNext()}var VK=function(){function i(s){(0,M.Z)(this,i),this.total=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new zK(n,this.total))}}]),i}(),zK=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).total=a,o.count=0,o}return(0,R.Z)(n,[{key:"_next",value:function(a){++this.count>this.total&&this.destination.next(a)}}]),n}(qs.L);function zo(i){return function(s){return s.lift(new HK(i))}}var Z3,HK=function(){function i(s){(0,M.Z)(this,i),this.notifier=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){var a=new GK(n),o=(0,Qc.ft)(this.notifier,new Qc.IY(a));return o&&!a.seenValue?(a.add(o),r.subscribe(a)):a}}]),i}(),GK=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).seenValue=!1,a}return(0,R.Z)(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(Qc.Ds);function Ta(i){return null!=i&&"false"!=="".concat(i)}function d6(i){return Array.isArray(i)?i:[i]}function lu(i){return null==i?"":"string"==typeof i?i:"".concat(i,"px")}function U_(i){return i instanceof v.SBq?i.nativeElement:i}try{Z3="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){Z3=!1}var vT,V_,B3,Do=function(){var i=function s(n){(0,M.Z)(this,s),this._platformId=n,this.isBrowser=this._platformId?function(i){return"browser"===i}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Z3)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT};return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.Lbi))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(v.Lbi))},token:i,providedIn:"root"}),i}(),pT=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}();function FF(i){return function(){if(null==vT&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return vT=!0}}))}finally{vT=vT||!1}return vT}()?i:!!i.capture}function v6(){if(null==V_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return V_=!1;if("scrollBehavior"in document.documentElement.style)V_=!0;else{var i=Element.prototype.scrollTo;V_=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return V_}function YK(i){if(function(){if(null==B3){var i="undefined"!=typeof document?document.head:null;B3=!(!i||!i.createShadowRoot&&!i.attachShadow)}return B3}()){var s=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&s instanceof ShadowRoot)return s}return null}function sE(i){return i.composedPath?i.composedPath()[0]:i.target}var ng="undefined"!=typeof window?window:{};function U3(){return void 0!==ng.__karma__&&!!ng.__karma__||void 0!==ng.jasmine&&!!ng.jasmine||void 0!==ng.jest&&!!ng.jest||void 0!==ng.Mocha&&!!ng.Mocha}var z3=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.apply(this,arguments))._origin="program",r}return(0,R.Z)(n,[{key:"setFocusOrigin",value:function(a){return this._origin=a,this}},{key:"setActiveItem",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"setActiveItem",this).call(this,a),this.activeItem&&this.activeItem.focus(this._origin)}}]),n}(function(){function i(s){var n=this;(0,M.Z)(this,i),this._items=s,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new jr.xQ,this._typeaheadSubscription=Vu.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=function(r){return r.disabled},this._pressedLetters=[],this.tabOut=new jr.xQ,this.change=new jr.xQ,s instanceof v.n_E&&s.changes.subscribe(function(r){if(n._activeItem){var o=r.toArray().indexOf(n._activeItem);o>-1&&o!==n._activeItemIndex&&(n._activeItemIndex=o)}})}return(0,R.Z)(i,[{key:"skipPredicate",value:function(n){return this._skipPredicateFn=n,this}},{key:"withWrap",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._wrap=n,this}},{key:"withVerticalOrientation",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._vertical=n,this}},{key:"withHorizontalOrientation",value:function(n){return this._horizontal=n,this}},{key:"withAllowedModifierKeys",value:function(n){return this._allowedModifierKeys=n,this}},{key:"withTypeAhead",value:function(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,ll.b)(function(a){return n._pressedLetters.push(a)}),N3(r),Za(function(){return n._pressedLetters.length>0}),(0,Tr.U)(function(){return n._pressedLetters.join("")})).subscribe(function(a){for(var o=n._getItemsArray(),u=1;u<o.length+1;u++){var l=(n._activeItemIndex+u)%o.length,f=o[l];if(!n._skipPredicateFn(f)&&0===f.getLabel().toUpperCase().trim().indexOf(a)){n.setActiveItem(l);break}}n._pressedLetters=[]}),this}},{key:"withHomeAndEnd",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._homeAndEnd=n,this}},{key:"setActiveItem",value:function(n){var r=this._activeItem;this.updateActiveItem(n),this._activeItem!==r&&this.change.next(this._activeItemIndex)}},{key:"onKeydown",value:function(n){var r=this,a=n.keyCode,u=["altKey","ctrlKey","metaKey","shiftKey"].every(function(l){return!n[l]||r._allowedModifierKeys.indexOf(l)>-1});switch(a){case 9:return void this.tabOut.next();case 40:if(this._vertical&&u){this.setNextItemActive();break}return;case 38:if(this._vertical&&u){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&u){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&u){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&u){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&u){this.setLastItemActive();break}return;default:return void((u||eg(n,"shiftKey"))&&(n.key&&1===n.key.length?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(a>=65&&a<=90||a>=48&&a<=57)&&this._letterKeyStream.next(String.fromCharCode(a))))}this._pressedLetters=[],n.preventDefault()}},{key:"activeItemIndex",get:function(){return this._activeItemIndex}},{key:"activeItem",get:function(){return this._activeItem}},{key:"isTyping",value:function(){return this._pressedLetters.length>0}},{key:"setFirstItemActive",value:function(){this._setActiveItemByIndex(0,1)}},{key:"setLastItemActive",value:function(){this._setActiveItemByIndex(this._items.length-1,-1)}},{key:"setNextItemActive",value:function(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}},{key:"setPreviousItemActive",value:function(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}},{key:"updateActiveItem",value:function(n){var r=this._getItemsArray(),a="number"==typeof n?n:r.indexOf(n),o=r[a];this._activeItem=null==o?null:o,this._activeItemIndex=a}},{key:"_setActiveItemByDelta",value:function(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}},{key:"_setActiveInWrapMode",value:function(n){for(var r=this._getItemsArray(),a=1;a<=r.length;a++){var o=(this._activeItemIndex+n*a+r.length)%r.length;if(!this._skipPredicateFn(r[o]))return void this.setActiveItem(o)}}},{key:"_setActiveInDefaultMode",value:function(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}},{key:"_setActiveItemByIndex",value:function(n,r){var a=this._getItemsArray();if(a[n]){for(;this._skipPredicateFn(a[n]);)if(!a[n+=r])return;this.setActiveItem(n)}}},{key:"_getItemsArray",value:function(){return this._items instanceof v.n_E?this._items.toArray():this._items}}]),i}());function H3(i){return 0===i.offsetX&&0===i.offsetY}function G3(i){var s=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!s||-1!==s.identifier||null!=s.radiusX&&1!==s.radiusX||null!=s.radiusY&&1!==s.radiusY)}"undefined"!=typeof Element&&Element;var k6=new v.OlP("cdk-input-modality-detector-options"),p$={ignoreKeys:[18,17,224,91,16]},oE=FF({passive:!0,capture:!0}),D6=function(){var i=function(){function s(n,r,a,o){var u=this;(0,M.Z)(this,s),this._platform=n,this._mostRecentTarget=null,this._modality=new Gh(null),this._lastTouchMs=0,this._onKeydown=function(l){var f,m;(null===(m=null===(f=u._options)||void 0===f?void 0:f.ignoreKeys)||void 0===m?void 0:m.some(function(b){return b===l.keyCode}))||(u._modality.next("keyboard"),u._mostRecentTarget=sE(l))},this._onMousedown=function(l){Date.now()-u._lastTouchMs<650||(u._modality.next(H3(l)?"keyboard":"mouse"),u._mostRecentTarget=sE(l))},this._onTouchstart=function(l){G3(l)?u._modality.next("keyboard"):(u._lastTouchMs=Date.now(),u._modality.next("touch"),u._mostRecentTarget=sE(l))},this._options=Object.assign(Object.assign({},p$),o),this.modalityDetected=this._modality.pipe(function(s){return s.lift(new VK(1))}),this.modalityChanged=this.modalityDetected.pipe(rd()),n.isBrowser&&r.runOutsideAngular(function(){a.addEventListener("keydown",u._onKeydown,oE),a.addEventListener("mousedown",u._onMousedown,oE),a.addEventListener("touchstart",u._onTouchstart,oE)})}return(0,R.Z)(s,[{key:"mostRecentModality",get:function(){return this._modality.value}},{key:"ngOnDestroy",value:function(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,oE),document.removeEventListener("mousedown",this._onMousedown,oE),document.removeEventListener("touchstart",this._onTouchstart,oE))}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Do),v.LFG(v.R0b),v.LFG(be),v.LFG(k6,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Do),v.LFG(v.R0b),v.LFG(be),v.LFG(k6,8))},token:i,providedIn:"root"}),i}(),T6=new v.OlP("cdk-focus-monitor-default-options"),OF=FF({passive:!0,capture:!0}),rg=function(){var i=function(){function s(n,r,a,o,u){var l=this;(0,M.Z)(this,s),this._ngZone=n,this._platform=r,this._inputModalityDetector=a,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=function(){l._windowFocused=!0,l._windowFocusTimeoutId=setTimeout(function(){return l._windowFocused=!1})},this._stopInputModalityDetector=new jr.xQ,this._rootNodeFocusAndBlurListener=function(f){for(var m=sE(f),b="focus"===f.type?l._onFocus:l._onBlur,w=m;w;w=w.parentElement)b.call(l,f,w)},this._document=o,this._detectionMode=(null==u?void 0:u.detectionMode)||0}return(0,R.Z)(s,[{key:"monitor",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=U_(r);if(!this._platform.isBrowser||1!==o.nodeType)return(0,wr.of)(null);var u=YK(o)||this._getDocument(),l=this._elementInfo.get(o);if(l)return a&&(l.checkChildren=!0),l.subject;var f={checkChildren:a,subject:new jr.xQ,rootNode:u};return this._elementInfo.set(o,f),this._registerGlobalListeners(f),f.subject}},{key:"stopMonitoring",value:function(r){var a=U_(r),o=this._elementInfo.get(a);o&&(o.subject.complete(),this._setClasses(a),this._elementInfo.delete(a),this._removeGlobalListeners(o))}},{key:"focusVia",value:function(r,a,o){var u=this,l=U_(r);l===this._getDocument().activeElement?this._getClosestElementsInfo(l).forEach(function(m){var b=(0,Te.Z)(m,2);return u._originChanged(b[0],a,b[1])}):(this._setOrigin(a),"function"==typeof l.focus&&l.focus(o))}},{key:"ngOnDestroy",value:function(){var r=this;this._elementInfo.forEach(function(a,o){return r.stopMonitoring(o)})}},{key:"_getDocument",value:function(){return this._document||document}},{key:"_getWindow",value:function(){return this._getDocument().defaultView||window}},{key:"_toggleClass",value:function(r,a,o){o?r.classList.add(a):r.classList.remove(a)}},{key:"_getFocusOrigin",value:function(r){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(r)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}},{key:"_shouldBeAttributedToTouch",value:function(r){return 1===this._detectionMode||!!(null==r?void 0:r.contains(this._inputModalityDetector._mostRecentTarget))}},{key:"_setClasses",value:function(r,a){this._toggleClass(r,"cdk-focused",!!a),this._toggleClass(r,"cdk-touch-focused","touch"===a),this._toggleClass(r,"cdk-keyboard-focused","keyboard"===a),this._toggleClass(r,"cdk-mouse-focused","mouse"===a),this._toggleClass(r,"cdk-program-focused","program"===a)}},{key:"_setOrigin",value:function(r){var a=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._ngZone.runOutsideAngular(function(){a._origin=r,a._originFromTouchInteraction="touch"===r&&o,0===a._detectionMode&&(clearTimeout(a._originTimeoutId),a._originTimeoutId=setTimeout(function(){return a._origin=null},a._originFromTouchInteraction?650:1))})}},{key:"_onFocus",value:function(r,a){var o=this._elementInfo.get(a),u=sE(r);!o||!o.checkChildren&&a!==u||this._originChanged(a,this._getFocusOrigin(u),o)}},{key:"_onBlur",value:function(r,a){var o=this._elementInfo.get(a);!o||o.checkChildren&&r.relatedTarget instanceof Node&&a.contains(r.relatedTarget)||(this._setClasses(a),this._emitOrigin(o.subject,null))}},{key:"_emitOrigin",value:function(r,a){this._ngZone.run(function(){return r.next(a)})}},{key:"_registerGlobalListeners",value:function(r){var a=this;if(this._platform.isBrowser){var o=r.rootNode,u=this._rootNodeFocusListenerCount.get(o)||0;u||this._ngZone.runOutsideAngular(function(){o.addEventListener("focus",a._rootNodeFocusAndBlurListener,OF),o.addEventListener("blur",a._rootNodeFocusAndBlurListener,OF)}),this._rootNodeFocusListenerCount.set(o,u+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(function(){a._getWindow().addEventListener("focus",a._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(zo(this._stopInputModalityDetector)).subscribe(function(l){a._setOrigin(l,!0)}))}}},{key:"_removeGlobalListeners",value:function(r){var a=r.rootNode;if(this._rootNodeFocusListenerCount.has(a)){var o=this._rootNodeFocusListenerCount.get(a);o>1?this._rootNodeFocusListenerCount.set(a,o-1):(a.removeEventListener("focus",this._rootNodeFocusAndBlurListener,OF),a.removeEventListener("blur",this._rootNodeFocusAndBlurListener,OF),this._rootNodeFocusListenerCount.delete(a))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}},{key:"_originChanged",value:function(r,a,o){this._setClasses(r,a),this._emitOrigin(o.subject,a),this._lastFocusOrigin=a}},{key:"_getClosestElementsInfo",value:function(r){var a=[];return this._elementInfo.forEach(function(o,u){(u===r||o.checkChildren&&u.contains(r))&&a.push([u,o])}),a}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.R0b),v.LFG(Do),v.LFG(D6),v.LFG(be,8),v.LFG(T6,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(v.R0b),v.LFG(Do),v.LFG(D6),v.LFG(be,8),v.LFG(T6,8))},token:i,providedIn:"root"}),i}(),x6="cdk-high-contrast-black-on-white",M6="cdk-high-contrast-white-on-black",j3="cdk-high-contrast-active",I6=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this._platform=n,this._document=r}return(0,R.Z)(s,[{key:"getHighContrastMode",value:function(){if(!this._platform.isBrowser)return 0;var r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);var a=this._document.defaultView||window,o=a&&a.getComputedStyle?a.getComputedStyle(r):null,u=(o&&o.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(r),u){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}},{key:"_applyBodyHighContrastModeCssClasses",value:function(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){var r=this._document.body.classList;r.remove(j3),r.remove(x6),r.remove(M6),this._hasCheckedHighContrastMode=!0;var a=this.getHighContrastMode();1===a?(r.add(j3),r.add(x6)):2===a&&(r.add(j3),r.add(M6))}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Do),v.LFG(be))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Do),v.LFG(be))},token:i,providedIn:"root"}),i}(),P6=new v.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,v.f3M)(be)}}),z_=function(){var i=function(){function s(n){if((0,M.Z)(this,s),this.value="ltr",this.change=new v.vpe,n){var o=(n.body?n.body.dir:null)||(n.documentElement?n.documentElement.dir:null);this.value="ltr"===o||"rtl"===o?o:"ltr"}}return(0,R.Z)(s,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(P6,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(P6,8))},token:i,providedIn:"root"}),i}(),gT=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),F6=new v.GfV("12.2.8"),R6=new v.GfV("12.2.8"),C$=new v.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}}),lo=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._hasDoneGlobalChecks=!1,this._document=a,n._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}return(0,R.Z)(s,[{key:"_checkIsEnabled",value:function(r){return!(!(0,v.X6Q)()||U3())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[r])}},{key:"_checkDoctypeIsDefined",value:function(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}},{key:"_checkThemeIsPresent",value:function(){if(this._checkIsEnabled("theme")&&this._document.body&&"function"==typeof getComputedStyle){var r=this._document.createElement("div");r.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(r);var a=getComputedStyle(r);a&&"none"!==a.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(r)}}},{key:"_checkCdkVersionMatch",value:function(){this._checkIsEnabled("version")&&R6.full!==F6.full&&console.warn("The Angular Material version ("+R6.full+") does not match the Angular CDK version ("+F6.full+").\nPlease ensure the versions of these two packages exactly match.")}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(I6),v.LFG(C$,8),v.LFG(be))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[gT],gT]}),i}();function LF(i){return function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(){var a;(0,M.Z)(this,r);for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];return(a=n.call.apply(n,[this].concat(u)))._disabled=!1,a}return(0,R.Z)(r,[{key:"disabled",get:function(){return this._disabled},set:function(o){this._disabled=Ta(o)}}]),r}(i)}function W3(i,s){return function(n){(0,x.Z)(a,n);var r=(0,oe.Z)(a);function a(){var o;(0,M.Z)(this,a);for(var u=arguments.length,l=new Array(u),f=0;f<u;f++)l[f]=arguments[f];return(o=r.call.apply(r,[this].concat(l))).defaultColor=s,o.color=s,o}return(0,R.Z)(a,[{key:"color",get:function(){return this._color},set:function(u){var l=u||this.defaultColor;l!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-".concat(this._color)),l&&this._elementRef.nativeElement.classList.add("mat-".concat(l)),this._color=l)}}]),a}(i)}function uE(i){return function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(){var a;(0,M.Z)(this,r);for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];return(a=n.call.apply(n,[this].concat(u)))._disableRipple=!1,a}return(0,R.Z)(r,[{key:"disableRipple",get:function(){return this._disableRipple},set:function(o){this._disableRipple=Ta(o)}}]),r}(i)}var Z6=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[lo],lo]}),i}(),Z$=function(){function i(s,n,r){(0,M.Z)(this,i),this._renderer=s,this.element=n,this.config=r,this.state=3}return(0,R.Z)(i,[{key:"fadeOut",value:function(){this._renderer.fadeOutRipple(this)}}]),i}(),B6={enterDuration:225,exitDuration:150},q3=FF({passive:!0}),U6=["mousedown","touchstart"],V6=["mouseup","mouseleave","touchend","touchcancel"],U$=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._target=s,this._ngZone=n,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=U_(r))}return(0,R.Z)(i,[{key:"fadeInRipple",value:function(n,r){var a=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),l=Object.assign(Object.assign({},B6),o.animation);o.centered&&(n=u.left+u.width/2,r=u.top+u.height/2);var f=o.radius||z$(n,r,u),m=n-u.left,b=r-u.top,w=l.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left="".concat(m-f,"px"),C.style.top="".concat(b-f,"px"),C.style.height="".concat(2*f,"px"),C.style.width="".concat(2*f,"px"),null!=o.color&&(C.style.backgroundColor=o.color),C.style.transitionDuration="".concat(w,"ms"),this._containerElement.appendChild(C),V$(C),C.style.transform="scale(1)";var T=new Z$(this,C,o);return T.state=0,this._activeRipples.add(T),o.persistent||(this._mostRecentTransientRipple=T),this._runTimeoutOutsideZone(function(){var I=T===a._mostRecentTransientRipple;T.state=1,!o.persistent&&(!I||!a._isPointerDown)&&T.fadeOut()},w),T}},{key:"fadeOutRipple",value:function(n){var r=this._activeRipples.delete(n);if(n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),r){var a=n.element,o=Object.assign(Object.assign({},B6),n.config.animation);a.style.transitionDuration="".concat(o.exitDuration,"ms"),a.style.opacity="0",n.state=2,this._runTimeoutOutsideZone(function(){n.state=3,a.parentNode.removeChild(a)},o.exitDuration)}}},{key:"fadeOutAll",value:function(){this._activeRipples.forEach(function(n){return n.fadeOut()})}},{key:"fadeOutAllNonPersistent",value:function(){this._activeRipples.forEach(function(n){n.config.persistent||n.fadeOut()})}},{key:"setupTriggerEvents",value:function(n){var r=U_(n);!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,this._registerEvents(U6))}},{key:"handleEvent",value:function(n){"mousedown"===n.type?this._onMousedown(n):"touchstart"===n.type?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(V6),this._pointerUpEventsRegistered=!0)}},{key:"_onMousedown",value:function(n){var r=H3(n),a=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!r&&!a&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}},{key:"_onTouchStart",value:function(n){if(!this._target.rippleDisabled&&!G3(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;for(var r=n.changedTouches,a=0;a<r.length;a++)this.fadeInRipple(r[a].clientX,r[a].clientY,this._target.rippleConfig)}}},{key:"_onPointerUp",value:function(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(function(n){!n.config.persistent&&(1===n.state||n.config.terminateOnPointerUp&&0===n.state)&&n.fadeOut()}))}},{key:"_runTimeoutOutsideZone",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._ngZone.runOutsideAngular(function(){return setTimeout(n,r)})}},{key:"_registerEvents",value:function(n){var r=this;this._ngZone.runOutsideAngular(function(){n.forEach(function(a){r._triggerElement.addEventListener(a,r,q3)})})}},{key:"_removeTriggerEvents",value:function(){var n=this;this._triggerElement&&(U6.forEach(function(r){n._triggerElement.removeEventListener(r,n,q3)}),this._pointerUpEventsRegistered&&V6.forEach(function(r){n._triggerElement.removeEventListener(r,n,q3)}))}}]),i}();function V$(i){window.getComputedStyle(i).getPropertyValue("opacity")}function z$(i,s,n){var r=Math.max(Math.abs(i-n.left),Math.abs(i-n.right)),a=Math.max(Math.abs(s-n.top),Math.abs(s-n.bottom));return Math.sqrt(r*r+a*a)}var H$=new v.OlP("mat-ripple-global-options"),G_=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this._elementRef=n,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new U$(this,r,n,a)}return(0,R.Z)(s,[{key:"disabled",get:function(){return this._disabled},set:function(r){r&&this.fadeOutAllNonPersistent(),this._disabled=r,this._setupTriggerEventsIfEnabled()}},{key:"trigger",get:function(){return this._trigger||this._elementRef.nativeElement},set:function(r){this._trigger=r,this._setupTriggerEventsIfEnabled()}},{key:"ngOnInit",value:function(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}},{key:"ngOnDestroy",value:function(){this._rippleRenderer._removeTriggerEvents()}},{key:"fadeOutAll",value:function(){this._rippleRenderer.fadeOutAll()}},{key:"fadeOutAllNonPersistent",value:function(){this._rippleRenderer.fadeOutAllNonPersistent()}},{key:"rippleConfig",get:function(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}},{key:"rippleDisabled",get:function(){return this.disabled||!!this._globalOptions.disabled}},{key:"_setupTriggerEventsIfEnabled",value:function(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}},{key:"launch",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;return"number"==typeof r?this._rippleRenderer.fadeInRipple(r,a,Object.assign(Object.assign({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),r))}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(v.R0b),v.Y36(Do),v.Y36(H$,8),v.Y36(nl,8))},i.\u0275dir=v.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){2&n&&v.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),i}(),ZF=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[lo,pT],lo]}),i}(),Y3=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[lo]]}),i}(),K$=["*",[["mat-card-footer"]]],$$=["*","mat-card-footer"],X$=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Q$=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],W6=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),i}(),K3=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),i}(),$3=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),i}(),q6=function(){var i=function s(){(0,M.Z)(this,s),this.align="start"};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(n,r){2&n&&v.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),i}(),tX=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),i}(),nX=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),i}(),X3=function(){var i=function s(n){(0,M.Z)(this,s),this._animationMode=n};return i.\u0275fac=function(n){return new(n||i)(v.Y36(nl,8))},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(n,r){2&n&&v.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:$$,decls:2,vars:0,template:function(n,r){1&n&&(v.F$t(K$),v.Hsn(0),v.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),i}(),Q3=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:Q$,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(n,r){1&n&&(v.F$t(X$),v.Hsn(0),v.TgZ(1,"div",0),v.Hsn(2,1),v.qZA(),v.Hsn(3,2))},encapsulation:2,changeDetection:0}),i}(),rX=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[lo],lo]}),i}(),Y6=["mat-button",""],K6=["*"],$6=".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n",aX=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],sX=W3(LF(uE(function(){return function i(s){(0,M.Z)(this,i),this._elementRef=s}}()))),BF=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o,u){var l;(0,M.Z)(this,r),(l=n.call(this,a))._focusMonitor=o,l._animationMode=u,l.isRoundButton=l._hasHostAttributes("mat-fab","mat-mini-fab"),l.isIconButton=l._hasHostAttributes("mat-icon-button");var m,f=(0,Ve.Z)(aX);try{for(f.s();!(m=f.n()).done;){var b=m.value;l._hasHostAttributes(b)&&l._getHostElement().classList.add(b)}}catch(w){f.e(w)}finally{f.f()}return a.nativeElement.classList.add("mat-button-base"),l.isRoundButton&&(l.color="accent"),l}return(0,R.Z)(r,[{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"focus",value:function(o,u){o?this._focusMonitor.focusVia(this._getHostElement(),o,u):this._getHostElement().focus(u)}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_isRippleDisabled",value:function(){return this.disableRipple||this.disabled}},{key:"_hasHostAttributes",value:function(){for(var o=this,u=arguments.length,l=new Array(u),f=0;f<u;f++)l[f]=arguments[f];return l.some(function(m){return o._getHostElement().hasAttribute(m)})}}]),r}(sX);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(rg),v.Y36(nl,8))},i.\u0275cmp=v.Xpm({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(n,r){var a;1&n&&v.Gf(G_,5),2&n&&v.iGM(a=v.CRH())&&(r.ripple=a.first)},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(n,r){2&n&&(v.uIk("disabled",r.disabled||null),v.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[v.qOj],attrs:Y6,ngContentSelectors:K6,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,r){1&n&&(v.F$t(),v.TgZ(0,"span",0),v.Hsn(1),v.qZA(),v._UZ(2,"span",1),v._UZ(3,"span",2)),2&n&&(v.xp6(2),v.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),v.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[G_],styles:[$6],encapsulation:2,changeDetection:0}),i}(),X6=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o,u){return(0,M.Z)(this,r),n.call(this,o,a,u)}return(0,R.Z)(r,[{key:"_haltDisabledEvents",value:function(o){this.disabled&&(o.preventDefault(),o.stopImmediatePropagation())}}]),r}(BF);return i.\u0275fac=function(n){return new(n||i)(v.Y36(rg),v.Y36(v.SBq),v.Y36(nl,8))},i.\u0275cmp=v.Xpm({type:i,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(n,r){1&n&&v.NdJ("click",function(o){return r._haltDisabledEvents(o)}),2&n&&(v.uIk("tabindex",r.disabled?-1:r.tabIndex||0)("disabled",r.disabled||null)("aria-disabled",r.disabled.toString()),v.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[v.qOj],attrs:Y6,ngContentSelectors:K6,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(n,r){1&n&&(v.F$t(),v.TgZ(0,"span",0),v.Hsn(1),v.qZA(),v._UZ(2,"span",1),v._UZ(3,"span",2)),2&n&&(v.xp6(2),v.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),v.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[G_],styles:[$6],encapsulation:2,changeDetection:0}),i}(),oX=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[ZF,lo],lo]}),i}(),uX=["*",[["mat-toolbar-row"]]],lX=["*","mat-toolbar-row"],cX=W3(function(){return function i(s){(0,M.Z)(this,i),this._elementRef=s}}()),Q6=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275dir=v.lG2({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i}(),hX=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o,u){var l;return(0,M.Z)(this,r),(l=n.call(this,a))._platform=o,l._document=u,l}return(0,R.Z)(r,[{key:"ngAfterViewInit",value:function(){var o=this;this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(function(){return o._checkToolbarMixedModes()}))}},{key:"_checkToolbarMixedModes",value:function(){}}]),r}(cX);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(Do),v.Y36(be))},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-toolbar"]],contentQueries:function(n,r,a){var o;1&n&&v.Suo(a,Q6,5),2&n&&v.iGM(o=v.CRH())&&(r._toolbarRows=o)},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(n,r){2&n&&v.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[v.qOj],ngContentSelectors:lX,decls:2,vars:0,template:function(n,r){1&n&&(v.F$t(uX),v.Hsn(0),v.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),i}(),fX=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[lo],lo]}),i}(),J3=ne(2709);function dX(i){return i instanceof Date&&!isNaN(+i)}var J6=ne(3103);function eG(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu.P,n=dX(i),r=n?+i-s.now():Math.abs(i);return function(a){return a.lift(new pX(r,s))}}var pX=function(){function i(s,n){(0,M.Z)(this,i),this.delay=s,this.scheduler=n}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new vX(n,this.delay,this.scheduler))}}]),i}(),vX=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).delay=a,u.scheduler=o,u.queue=[],u.active=!1,u.errored=!1,u}return(0,R.Z)(n,[{key:"_schedule",value:function(a){this.active=!0,this.destination.add(a.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))}},{key:"scheduleNotification",value:function(a){if(!0!==this.errored){var o=this.scheduler,u=new mX(o.now()+this.delay,a);this.queue.push(u),!1===this.active&&this._schedule(o)}}},{key:"_next",value:function(a){this.scheduleNotification(J6.P.createNext(a))}},{key:"_error",value:function(a){this.errored=!0,this.queue=[],this.destination.error(a),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(J6.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(a){for(var o=a.source,u=o.queue,l=a.scheduler,f=a.destination;u.length>0&&u[0].time-l.now()<=0;)u.shift().notification.observe(f);if(u.length>0){var m=Math.max(0,u[0].time-l.now());this.schedule(a,m)}else this.unsubscribe(),o.active=!1}}]),n}(qs.L),mX=function i(s,n){(0,M.Z)(this,i),this.time=s,this.notification=n},eB=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"attach",value:function(n){return this._attachedHost=n,n.attach(this)}},{key:"detach",value:function(){var n=this._attachedHost;null!=n&&(this._attachedHost=null,n.detach())}},{key:"isAttached",get:function(){return null!=this._attachedHost}},{key:"setAttachedHost",value:function(n){this._attachedHost=n}}]),i}(),gX=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this)).component=r,l.viewContainerRef=a,l.injector=o,l.componentFactoryResolver=u,l}return n}(eB),lE=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this)).templateRef=r,u.viewContainerRef=a,u.context=o,u}return(0,R.Z)(n,[{key:"origin",get:function(){return this.templateRef.elementRef}},{key:"attach",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.context;return this.context=o,(0,Se.Z)((0,ye.Z)(n.prototype),"attach",this).call(this,a)}},{key:"detach",value:function(){return this.context=void 0,(0,Se.Z)((0,ye.Z)(n.prototype),"detach",this).call(this)}}]),n}(eB),yX=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).element=r instanceof v.SBq?r.nativeElement:r,a}return n}(eB),nG=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l){var f,m;return(0,M.Z)(this,n),(m=s.call(this)).outletElement=r,m._componentFactoryResolver=a,m._appRef=o,m._defaultInjector=u,m.attachDomPortal=function(b){var w=b.element,C=m._document.createComment("dom-portal");w.parentNode.insertBefore(C,w),m.outletElement.appendChild(w),m._attachedPortal=b,(0,Se.Z)((f=(0,Ja.Z)(m),(0,ye.Z)(n.prototype)),"setDisposeFn",f).call(f,function(){C.parentNode&&C.parentNode.replaceChild(w,C)})},m._document=l,m}return(0,R.Z)(n,[{key:"attachComponentPortal",value:function(a){var f,o=this,l=(a.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(a.component);return a.viewContainerRef?(f=a.viewContainerRef.createComponent(l,a.viewContainerRef.length,a.injector||a.viewContainerRef.injector),this.setDisposeFn(function(){return f.destroy()})):(f=l.create(a.injector||this._defaultInjector),this._appRef.attachView(f.hostView),this.setDisposeFn(function(){o._appRef.detachView(f.hostView),f.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(f)),this._attachedPortal=a,f}},{key:"attachTemplatePortal",value:function(a){var o=this,u=a.viewContainerRef,l=u.createEmbeddedView(a.templateRef,a.context);return l.rootNodes.forEach(function(f){return o.outletElement.appendChild(f)}),l.detectChanges(),this.setDisposeFn(function(){var f=u.indexOf(l);-1!==f&&u.remove(f)}),this._attachedPortal=a,l}},{key:"dispose",value:function(){(0,Se.Z)((0,ye.Z)(n.prototype),"dispose",this).call(this),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}},{key:"_getComponentRootNode",value:function(a){return a.hostView.rootNodes[0]}}]),n}(function(){function i(){(0,M.Z)(this,i),this._isDisposed=!1,this.attachDomPortal=null}return(0,R.Z)(i,[{key:"hasAttached",value:function(){return!!this._attachedPortal}},{key:"attach",value:function(n){return n instanceof gX?(this._attachedPortal=n,this.attachComponentPortal(n)):n instanceof lE?(this._attachedPortal=n,this.attachTemplatePortal(n)):this.attachDomPortal&&n instanceof yX?(this._attachedPortal=n,this.attachDomPortal(n)):void 0}},{key:"detach",value:function(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}},{key:"dispose",value:function(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}},{key:"setDisposeFn",value:function(n){this._disposeFn=n}},{key:"_invokeDisposeFn",value:function(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}]),i}()),iG=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),_X=ne(5024);function UF(i,s,n,r){return(0,_X.m)(n)&&(r=n,n=void 0),r?UF(i,s,n).pipe((0,Tr.U)(function(a){return(0,fA.k)(a)?r.apply(void 0,(0,Kr.Z)(a)):r(a)})):new ro.y(function(a){aG(i,s,function(u){a.next(arguments.length>1?Array.prototype.slice.call(arguments):u)},a,n)})}function aG(i,s,n,r,a){var o;if(function(i){return i&&"function"==typeof i.addEventListener&&"function"==typeof i.removeEventListener}(i)){var u=i;i.addEventListener(s,n,a),o=function(){return u.removeEventListener(s,n,a)}}else if(function(i){return i&&"function"==typeof i.on&&"function"==typeof i.off}(i)){var l=i;i.on(s,n),o=function(){return l.off(s,n)}}else if(function(i){return i&&"function"==typeof i.addListener&&"function"==typeof i.removeListener}(i)){var f=i;i.addListener(s,n),o=function(){return f.removeListener(s,n)}}else{if(!i||!i.length)throw new TypeError("Invalid event target");for(var m=0,b=i.length;m<b;m++)aG(i[m],s,n,r,a)}r.add(o)}ne(8277);function TX(i){return function(n){return n.lift(new xX(i))}}var xX=function(){function i(s){(0,M.Z)(this,i),this.durationSelector=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new MX(n,this.durationSelector))}}]),i}(),MX=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).durationSelector=a,o.hasValue=!1,o}return(0,R.Z)(n,[{key:"_next",value:function(a){if(this.value=a,this.hasValue=!0,!this.throttled){var o;try{o=(0,this.durationSelector)(a)}catch(f){return this.destination.error(f)}var l=(0,Qc.ft)(o,new Qc.IY(this));!l||l.closed?this.clearThrottle():this.add(this.throttled=l)}}},{key:"clearThrottle",value:function(){var a=this.value,o=this.hasValue,u=this.throttled;u&&(this.remove(u),this.throttled=void 0,u.unsubscribe()),o&&(this.value=void 0,this.hasValue=!1,this.destination.next(a))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(Qc.Ds),oG=ne(2293);function IX(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return(0,oG.k)(s)?r=Number(s)<1?1:Number(s):(0,O0.K)(s)&&(n=s),(0,O0.K)(n)||(n=bu.P),new ro.y(function(a){var o=(0,oG.k)(i)?i:+i-n.now();return n.schedule(PX,o,{index:0,period:r,subscriber:a})})}function PX(i){var s=i.index,n=i.period,r=i.subscriber;if(r.next(s),!r.closed){if(-1===n)return r.complete();i.index=s+1,this.schedule(i,n)}}function nB(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bu.P;return TX(function(){return IX(i,s)})}var cE=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._ngZone=n,this._platform=r,this._scrolled=new jr.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}return(0,R.Z)(s,[{key:"register",value:function(r){var a=this;this.scrollContainers.has(r)||this.scrollContainers.set(r,r.elementScrolled().subscribe(function(){return a._scrolled.next(r)}))}},{key:"deregister",value:function(r){var a=this.scrollContainers.get(r);a&&(a.unsubscribe(),this.scrollContainers.delete(r))}},{key:"scrolled",value:function(){var r=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return this._platform.isBrowser?new ro.y(function(o){r._globalSubscription||r._addGlobalListener();var u=a>0?r._scrolled.pipe(nB(a)).subscribe(o):r._scrolled.subscribe(o);return r._scrolledCount++,function(){u.unsubscribe(),r._scrolledCount--,r._scrolledCount||r._removeGlobalListener()}}):(0,wr.of)()}},{key:"ngOnDestroy",value:function(){var r=this;this._removeGlobalListener(),this.scrollContainers.forEach(function(a,o){return r.deregister(o)}),this._scrolled.complete()}},{key:"ancestorScrolled",value:function(r,a){var o=this.getAncestorScrollContainers(r);return this.scrolled(a).pipe(Za(function(u){return!u||o.indexOf(u)>-1}))}},{key:"getAncestorScrollContainers",value:function(r){var a=this,o=[];return this.scrollContainers.forEach(function(u,l){a._scrollableContainsElement(l,r)&&o.push(l)}),o}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_scrollableContainsElement",value:function(r,a){var o=U_(a),u=r.getElementRef().nativeElement;do{if(o==u)return!0}while(o=o.parentElement);return!1}},{key:"_addGlobalListener",value:function(){var r=this;this._globalSubscription=this._ngZone.runOutsideAngular(function(){return UF(r._getWindow().document,"scroll").subscribe(function(){return r._scrolled.next()})})}},{key:"_removeGlobalListener",value:function(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.R0b),v.LFG(Do),v.LFG(be,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(v.R0b),v.LFG(Do),v.LFG(be,8))},token:i,providedIn:"root"}),i}(),fE=function(){var i=function(){function s(n,r,a){var o=this;(0,M.Z)(this,s),this._platform=n,this._change=new jr.xQ,this._changeListener=function(u){o._change.next(u)},this._document=a,r.runOutsideAngular(function(){if(n.isBrowser){var u=o._getWindow();u.addEventListener("resize",o._changeListener),u.addEventListener("orientationchange",o._changeListener)}o.change().subscribe(function(){return o._viewportSize=null})})}return(0,R.Z)(s,[{key:"ngOnDestroy",value:function(){if(this._platform.isBrowser){var r=this._getWindow();r.removeEventListener("resize",this._changeListener),r.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var r={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),r}},{key:"getViewportRect",value:function(){var r=this.getViewportScrollPosition(),a=this.getViewportSize(),o=a.width,u=a.height;return{top:r.top,left:r.left,bottom:r.top+u,right:r.left+o,height:u,width:o}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var r=this._document,a=this._getWindow(),o=r.documentElement,u=o.getBoundingClientRect();return{top:-u.top||r.body.scrollTop||a.scrollY||o.scrollTop||0,left:-u.left||r.body.scrollLeft||a.scrollX||o.scrollLeft||0}}},{key:"change",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return r>0?this._change.pipe(nB(r)):this._change}},{key:"_getWindow",value:function(){return this._document.defaultView||window}},{key:"_updateViewportSize",value:function(){var r=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:r.innerWidth,height:r.innerHeight}:{width:0,height:0}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Do),v.LFG(v.R0b),v.LFG(be,8))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(Do),v.LFG(v.R0b),v.LFG(be,8))},token:i,providedIn:"root"}),i}(),_T=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),dG=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[gT,pT,_T],gT,_T]}),i}(),pG=v6(),KX=function(){function i(s,n){(0,M.Z)(this,i),this._viewportRuler=s,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}return(0,R.Z)(i,[{key:"attach",value:function(){}},{key:"enable",value:function(){if(this._canBeEnabled()){var n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=lu(-this._previousScrollPosition.left),n.style.top=lu(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}},{key:"disable",value:function(){if(this._isEnabled){var n=this._document.documentElement,a=n.style,o=this._document.body.style,u=a.scrollBehavior||"",l=o.scrollBehavior||"";this._isEnabled=!1,a.left=this._previousHTMLStyles.left,a.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),pG&&(a.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),pG&&(a.scrollBehavior=u,o.scrollBehavior=l)}}},{key:"_canBeEnabled",value:function(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;var r=this._document.body,a=this._viewportRuler.getViewportSize();return r.scrollHeight>a.height||r.scrollWidth>a.width}}]),i}(),$X=function(){function i(s,n,r,a){var o=this;(0,M.Z)(this,i),this._scrollDispatcher=s,this._ngZone=n,this._viewportRuler=r,this._config=a,this._scrollSubscription=null,this._detach=function(){o.disable(),o._overlayRef.hasAttached()&&o._ngZone.run(function(){return o._overlayRef.detach()})}}return(0,R.Z)(i,[{key:"attach",value:function(n){this._overlayRef=n}},{key:"enable",value:function(){var n=this;if(!this._scrollSubscription){var r=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=r.subscribe(function(){var a=n._viewportRuler.getViewportScrollPosition().top;Math.abs(a-n._initialScrollPosition)>n._config.threshold?n._detach():n._overlayRef.updatePosition()})):this._scrollSubscription=r.subscribe(this._detach)}}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),i}(),vG=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"enable",value:function(){}},{key:"disable",value:function(){}},{key:"attach",value:function(){}}]),i}();function rB(i,s){return s.some(function(n){return i.bottom<n.top||i.top>n.bottom||i.right<n.left||i.left>n.right})}function mG(i,s){return s.some(function(n){return i.top<n.top||i.bottom>n.bottom||i.left<n.left||i.right>n.right})}var XX=function(){function i(s,n,r,a){(0,M.Z)(this,i),this._scrollDispatcher=s,this._viewportRuler=n,this._ngZone=r,this._config=a,this._scrollSubscription=null}return(0,R.Z)(i,[{key:"attach",value:function(n){this._overlayRef=n}},{key:"enable",value:function(){var n=this;this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(function(){if(n._overlayRef.updatePosition(),n._config&&n._config.autoClose){var a=n._overlayRef.overlayElement.getBoundingClientRect(),o=n._viewportRuler.getViewportSize(),u=o.width,l=o.height;rB(a,[{width:u,height:l,bottom:l,right:u,top:0,left:0}])&&(n.disable(),n._ngZone.run(function(){return n._overlayRef.detach()}))}}))}},{key:"disable",value:function(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}},{key:"detach",value:function(){this.disable(),this._overlayRef=null}}]),i}(),QX=function(){var i=function s(n,r,a,o){var u=this;(0,M.Z)(this,s),this._scrollDispatcher=n,this._viewportRuler=r,this._ngZone=a,this.noop=function(){return new vG},this.close=function(l){return new $X(u._scrollDispatcher,u._ngZone,u._viewportRuler,l)},this.block=function(){return new KX(u._viewportRuler,u._document)},this.reposition=function(l){return new XX(u._scrollDispatcher,u._viewportRuler,u._ngZone,l)},this._document=o};return i.\u0275fac=function(n){return new(n||i)(v.LFG(cE),v.LFG(fE),v.LFG(v.R0b),v.LFG(be))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(cE),v.LFG(fE),v.LFG(v.R0b),v.LFG(be))},token:i,providedIn:"root"}),i}(),iB=function i(s){if((0,M.Z)(this,i),this.scrollStrategy=new vG,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,s)for(var r=0,a=Object.keys(s);r<a.length;r++){var o=a[r];void 0!==s[o]&&(this[o]=s[o])}},JX=function i(s,n,r,a,o){(0,M.Z)(this,i),this.offsetX=r,this.offsetY=a,this.panelClass=o,this.originX=s.originX,this.originY=s.originY,this.overlayX=n.overlayX,this.overlayY=n.overlayY},eQ=function i(s,n){(0,M.Z)(this,i),this.connectionPair=s,this.scrollableViewProperties=n},gG=function(){var i=function(){function s(n){(0,M.Z)(this,s),this._attachedOverlays=[],this._document=n}return(0,R.Z)(s,[{key:"ngOnDestroy",value:function(){this.detach()}},{key:"add",value:function(r){this.remove(r),this._attachedOverlays.push(r)}},{key:"remove",value:function(r){var a=this._attachedOverlays.indexOf(r);a>-1&&this._attachedOverlays.splice(a,1),0===this._attachedOverlays.length&&this.detach()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(be))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(be))},token:i,providedIn:"root"}),i}(),tQ=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a){var o;return(0,M.Z)(this,r),(o=n.call(this,a))._keydownListener=function(u){for(var l=o._attachedOverlays,f=l.length-1;f>-1;f--)if(l[f]._keydownEvents.observers.length>0){l[f]._keydownEvents.next(u);break}},o}return(0,R.Z)(r,[{key:"add",value:function(o){(0,Se.Z)((0,ye.Z)(r.prototype),"add",this).call(this,o),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}},{key:"detach",value:function(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}]),r}(gG);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(be))},token:i,providedIn:"root"}),i}(),nQ=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o){var u;return(0,M.Z)(this,r),(u=n.call(this,a))._platform=o,u._cursorStyleIsSet=!1,u._clickListener=function(l){for(var f=sE(l),m=u._attachedOverlays.slice(),b=m.length-1;b>-1;b--){var w=m[b];if(!(w._outsidePointerEvents.observers.length<1)&&w.hasAttached()){if(w.overlayElement.contains(f))break;w._outsidePointerEvents.next(l)}}},u}return(0,R.Z)(r,[{key:"add",value:function(o){if((0,Se.Z)((0,ye.Z)(r.prototype),"add",this).call(this,o),!this._isAttached){var u=this._document.body;u.addEventListener("click",this._clickListener,!0),u.addEventListener("auxclick",this._clickListener,!0),u.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=u.style.cursor,u.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}},{key:"detach",value:function(){if(this._isAttached){var o=this._document.body;o.removeEventListener("click",this._clickListener,!0),o.removeEventListener("auxclick",this._clickListener,!0),o.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(o.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}]),r}(gG);return i.\u0275fac=function(n){return new(n||i)(v.LFG(be),v.LFG(Do))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(be),v.LFG(Do))},token:i,providedIn:"root"}),i}(),aB=function(){var i=function(){function s(n,r){(0,M.Z)(this,s),this._platform=r,this._document=n}return(0,R.Z)(s,[{key:"ngOnDestroy",value:function(){var r=this._containerElement;r&&r.parentNode&&r.parentNode.removeChild(r)}},{key:"getContainerElement",value:function(){return this._containerElement||this._createContainer(),this._containerElement}},{key:"_createContainer",value:function(){var r="cdk-overlay-container";if(this._platform.isBrowser||U3())for(var a=this._document.querySelectorAll(".".concat(r,'[platform="server"], ')+".".concat(r,'[platform="test"]')),o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);var u=this._document.createElement("div");u.classList.add(r),U3()?u.setAttribute("platform","test"):this._platform.isBrowser||u.setAttribute("platform","server"),this._document.body.appendChild(u),this._containerElement=u}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(be),v.LFG(Do))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(be),v.LFG(Do))},token:i,providedIn:"root"}),i}(),rQ=function(){function i(s,n,r,a,o,u,l,f,m){var b=this;(0,M.Z)(this,i),this._portalOutlet=s,this._host=n,this._pane=r,this._config=a,this._ngZone=o,this._keyboardDispatcher=u,this._document=l,this._location=f,this._outsideClickDispatcher=m,this._backdropElement=null,this._backdropClick=new jr.xQ,this._attachments=new jr.xQ,this._detachments=new jr.xQ,this._locationChanges=Vu.w.EMPTY,this._backdropClickHandler=function(w){return b._backdropClick.next(w)},this._keydownEvents=new jr.xQ,this._outsidePointerEvents=new jr.xQ,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}return(0,R.Z)(i,[{key:"overlayElement",get:function(){return this._pane}},{key:"backdropElement",get:function(){return this._backdropElement}},{key:"hostElement",get:function(){return this._host}},{key:"attach",value:function(n){var r=this,a=this._portalOutlet.attach(n);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Sc(1)).subscribe(function(){r.hasAttached()&&r.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(function(){return r.dispose()})),this._outsideClickDispatcher.add(this),a}},{key:"detach",value:function(){if(this.hasAttached()){this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();var n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}}},{key:"dispose",value:function(){var n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,n&&this._detachments.next(),this._detachments.complete()}},{key:"hasAttached",value:function(){return this._portalOutlet.hasAttached()}},{key:"backdropClick",value:function(){return this._backdropClick}},{key:"attachments",value:function(){return this._attachments}},{key:"detachments",value:function(){return this._detachments}},{key:"keydownEvents",value:function(){return this._keydownEvents}},{key:"outsidePointerEvents",value:function(){return this._outsidePointerEvents}},{key:"getConfig",value:function(){return this._config}},{key:"updatePosition",value:function(){this._positionStrategy&&this._positionStrategy.apply()}},{key:"updatePositionStrategy",value:function(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}},{key:"updateSize",value:function(n){this._config=Object.assign(Object.assign({},this._config),n),this._updateElementSize()}},{key:"setDirection",value:function(n){this._config=Object.assign(Object.assign({},this._config),{direction:n}),this._updateElementDirection()}},{key:"addPanelClass",value:function(n){this._pane&&this._toggleClasses(this._pane,n,!0)}},{key:"removePanelClass",value:function(n){this._pane&&this._toggleClasses(this._pane,n,!1)}},{key:"getDirection",value:function(){var n=this._config.direction;return n?"string"==typeof n?n:n.value:"ltr"}},{key:"updateScrollStrategy",value:function(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}},{key:"_updateElementDirection",value:function(){this._host.setAttribute("dir",this.getDirection())}},{key:"_updateElementSize",value:function(){if(this._pane){var n=this._pane.style;n.width=lu(this._config.width),n.height=lu(this._config.height),n.minWidth=lu(this._config.minWidth),n.minHeight=lu(this._config.minHeight),n.maxWidth=lu(this._config.maxWidth),n.maxHeight=lu(this._config.maxHeight)}}},{key:"_togglePointerEvents",value:function(n){this._pane.style.pointerEvents=n?"":"none"}},{key:"_attachBackdrop",value:function(){var n=this,r="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(function(){requestAnimationFrame(function(){n._backdropElement&&n._backdropElement.classList.add(r)})}):this._backdropElement.classList.add(r)}},{key:"_updateStackingOrder",value:function(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}},{key:"detachBackdrop",value:function(){var n=this,r=this._backdropElement;if(r){var a,o=function u(){r&&(r.removeEventListener("click",n._backdropClickHandler),r.removeEventListener("transitionend",u),n._disposeBackdrop(r)),n._config.backdropClass&&n._toggleClasses(r,n._config.backdropClass,!1),clearTimeout(a)};r.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(function(){r.addEventListener("transitionend",o)}),r.style.pointerEvents="none",a=this._ngZone.runOutsideAngular(function(){return setTimeout(o,500)})}}},{key:"_toggleClasses",value:function(n,r,a){var o=n.classList;d6(r).forEach(function(u){u&&(a?o.add(u):o.remove(u))})}},{key:"_detachContentWhenStable",value:function(){var n=this;this._ngZone.runOutsideAngular(function(){var r=n._ngZone.onStable.pipe(zo((0,Ld.T)(n._attachments,n._detachments))).subscribe(function(){(!n._pane||!n._host||0===n._pane.children.length)&&(n._pane&&n._config.panelClass&&n._toggleClasses(n._pane,n._config.panelClass,!1),n._host&&n._host.parentElement&&(n._previousHostParent=n._host.parentElement,n._previousHostParent.removeChild(n._host)),r.unsubscribe())})})}},{key:"_disposeScrollStrategy",value:function(){var n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}},{key:"_disposeBackdrop",value:function(n){n&&(n.parentNode&&n.parentNode.removeChild(n),this._backdropElement===n&&(this._backdropElement=null))}}]),i}(),yG="cdk-overlay-connected-position-bounding-box",iQ=/([A-Za-z%]+)$/,_G=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this._viewportRuler=n,this._document=r,this._platform=a,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new jr.xQ,this._resizeSubscription=Vu.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(s)}return(0,R.Z)(i,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(n){var r=this;this._validatePositions(),n.hostElement.classList.add(yG),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(function(){r._isInitialRender=!0,r.apply()})}},{key:"apply",value:function(){if(!this._isDisposed&&this._platform.isBrowser){if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();var u,f,n=this._originRect,r=this._overlayRect,a=this._viewportRect,o=[],l=(0,Ve.Z)(this._preferredPositions);try{for(l.s();!(f=l.n()).done;){var m=f.value,b=this._getOriginPoint(n,m),w=this._getOverlayPoint(b,r,m),C=this._getOverlayFit(w,r,a,m);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(m,b);this._canFitWithFlexibleDimensions(C,w,a)?o.push({position:m,origin:b,overlayRect:r,boundingBoxRect:this._calculateBoundingBoxRect(b,m)}):(!u||u.overlayFit.visibleArea<C.visibleArea)&&(u={overlayFit:C,overlayPoint:w,originPoint:b,position:m,overlayRect:r})}}catch(se){l.e(se)}finally{l.f()}if(o.length){var Y,T=null,I=-1,Z=(0,Ve.Z)(o);try{for(Z.s();!(Y=Z.n()).done;){var V=Y.value,W=V.boundingBoxRect.width*V.boundingBoxRect.height*(V.position.weight||1);W>I&&(I=W,T=V)}}catch(se){Z.e(se)}finally{Z.f()}return this._isPushed=!1,void this._applyPosition(T.position,T.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}}},{key:"detach",value:function(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}},{key:"dispose",value:function(){this._isDisposed||(this._boundingBox&&j_(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(yG),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}},{key:"reapplyLastPosition",value:function(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();var n=this._lastPosition||this._preferredPositions[0],r=this._getOriginPoint(this._originRect,n);this._applyPosition(n,r)}}},{key:"withScrollableContainers",value:function(n){return this._scrollables=n,this}},{key:"withPositions",value:function(n){return this._preferredPositions=n,-1===n.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}},{key:"withViewportMargin",value:function(n){return this._viewportMargin=n,this}},{key:"withFlexibleDimensions",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hasFlexibleDimensions=n,this}},{key:"withGrowAfterOpen",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._growAfterOpen=n,this}},{key:"withPush",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._canPush=n,this}},{key:"withLockedPosition",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._positionLocked=n,this}},{key:"setOrigin",value:function(n){return this._origin=n,this}},{key:"withDefaultOffsetX",value:function(n){return this._offsetX=n,this}},{key:"withDefaultOffsetY",value:function(n){return this._offsetY=n,this}},{key:"withTransformOriginOn",value:function(n){return this._transformOriginSelector=n,this}},{key:"_getOriginPoint",value:function(n,r){var a;if("center"==r.originX)a=n.left+n.width/2;else{var o=this._isRtl()?n.right:n.left,u=this._isRtl()?n.left:n.right;a="start"==r.originX?o:u}return{x:a,y:"center"==r.originY?n.top+n.height/2:"top"==r.originY?n.top:n.bottom}}},{key:"_getOverlayPoint",value:function(n,r,a){var o;return o="center"==a.overlayX?-r.width/2:"start"===a.overlayX?this._isRtl()?-r.width:0:this._isRtl()?0:-r.width,{x:n.x+o,y:n.y+("center"==a.overlayY?-r.height/2:"top"==a.overlayY?0:-r.height)}}},{key:"_getOverlayFit",value:function(n,r,a,o){var u=wG(r),l=n.x,f=n.y,m=this._getOffset(o,"x"),b=this._getOffset(o,"y");m&&(l+=m),b&&(f+=b);var T=0-f,I=f+u.height-a.height,Z=this._subtractOverflows(u.width,0-l,l+u.width-a.width),Y=this._subtractOverflows(u.height,T,I),V=Z*Y;return{visibleArea:V,isCompletelyWithinViewport:u.width*u.height===V,fitsInViewportVertically:Y===u.height,fitsInViewportHorizontally:Z==u.width}}},{key:"_canFitWithFlexibleDimensions",value:function(n,r,a){if(this._hasFlexibleDimensions){var o=a.bottom-r.y,u=a.right-r.x,l=bG(this._overlayRef.getConfig().minHeight),f=bG(this._overlayRef.getConfig().minWidth);return(n.fitsInViewportVertically||null!=l&&l<=o)&&(n.fitsInViewportHorizontally||null!=f&&f<=u)}return!1}},{key:"_pushOverlayOnScreen",value:function(n,r,a){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};var w,C,o=wG(r),u=this._viewportRect,l=Math.max(n.x+o.width-u.width,0),f=Math.max(n.y+o.height-u.height,0),m=Math.max(u.top-a.top-n.y,0),b=Math.max(u.left-a.left-n.x,0);return this._previousPushAmount={x:w=o.width<=u.width?b||-l:n.x<this._viewportMargin?u.left-a.left-n.x:0,y:C=o.height<=u.height?m||-f:n.y<this._viewportMargin?u.top-a.top-n.y:0},{x:n.x+w,y:n.y+C}}},{key:"_applyPosition",value:function(n,r){if(this._setTransformOrigin(n),this._setOverlayElementStyles(r,n),this._setBoundingBoxStyles(r,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._lastPosition=n,this._positionChanges.observers.length){var a=this._getScrollVisibility(),o=new eQ(n,a);this._positionChanges.next(o)}this._isInitialRender=!1}},{key:"_setTransformOrigin",value:function(n){if(this._transformOriginSelector){var a,r=this._boundingBox.querySelectorAll(this._transformOriginSelector),o=n.overlayY;a="center"===n.overlayX?"center":this._isRtl()?"start"===n.overlayX?"right":"left":"start"===n.overlayX?"left":"right";for(var u=0;u<r.length;u++)r[u].style.transformOrigin="".concat(a," ").concat(o)}}},{key:"_calculateBoundingBoxRect",value:function(n,r){var u,l,f,T,I,Z,a=this._viewportRect,o=this._isRtl();if("top"===r.overlayY)u=a.height-(l=n.y)+this._viewportMargin;else if("bottom"===r.overlayY)u=a.height-(f=a.height-n.y+2*this._viewportMargin)+this._viewportMargin;else{var m=Math.min(a.bottom-n.y+a.top,n.y),b=this._lastBoundingBoxSize.height;l=n.y-m,(u=2*m)>b&&!this._isInitialRender&&!this._growAfterOpen&&(l=n.y-b/2)}if("end"===r.overlayX&&!o||"start"===r.overlayX&&o)Z=a.width-n.x+this._viewportMargin,T=n.x-this._viewportMargin;else if("start"===r.overlayX&&!o||"end"===r.overlayX&&o)I=n.x,T=a.right-n.x;else{var Y=Math.min(a.right-n.x+a.left,n.x),V=this._lastBoundingBoxSize.width;I=n.x-Y,(T=2*Y)>V&&!this._isInitialRender&&!this._growAfterOpen&&(I=n.x-V/2)}return{top:l,left:I,bottom:f,right:Z,width:T,height:u}}},{key:"_setBoundingBoxStyles",value:function(n,r){var a=this._calculateBoundingBoxRect(n,r);!this._isInitialRender&&!this._growAfterOpen&&(a.height=Math.min(a.height,this._lastBoundingBoxSize.height),a.width=Math.min(a.width,this._lastBoundingBoxSize.width));var o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{var u=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;o.height=lu(a.height),o.top=lu(a.top),o.bottom=lu(a.bottom),o.width=lu(a.width),o.left=lu(a.left),o.right=lu(a.right),o.alignItems="center"===r.overlayX?"center":"end"===r.overlayX?"flex-end":"flex-start",o.justifyContent="center"===r.overlayY?"center":"bottom"===r.overlayY?"flex-end":"flex-start",u&&(o.maxHeight=lu(u)),l&&(o.maxWidth=lu(l))}this._lastBoundingBoxSize=a,j_(this._boundingBox.style,o)}},{key:"_resetBoundingBoxStyles",value:function(){j_(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}},{key:"_resetOverlayElementStyles",value:function(){j_(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}},{key:"_setOverlayElementStyles",value:function(n,r){var a={},o=this._hasExactPosition(),u=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(o){var f=this._viewportRuler.getViewportScrollPosition();j_(a,this._getExactOverlayY(r,n,f)),j_(a,this._getExactOverlayX(r,n,f))}else a.position="static";var m="",b=this._getOffset(r,"x"),w=this._getOffset(r,"y");b&&(m+="translateX(".concat(b,"px) ")),w&&(m+="translateY(".concat(w,"px)")),a.transform=m.trim(),l.maxHeight&&(o?a.maxHeight=lu(l.maxHeight):u&&(a.maxHeight="")),l.maxWidth&&(o?a.maxWidth=lu(l.maxWidth):u&&(a.maxWidth="")),j_(this._pane.style,a)}},{key:"_getExactOverlayY",value:function(n,r,a){var o={top:"",bottom:""},u=this._getOverlayPoint(r,this._overlayRect,n);this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,a));var l=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return u.y-=l,"bottom"===n.overlayY?o.bottom="".concat(this._document.documentElement.clientHeight-(u.y+this._overlayRect.height),"px"):o.top=lu(u.y),o}},{key:"_getExactOverlayX",value:function(n,r,a){var o={left:"",right:""},u=this._getOverlayPoint(r,this._overlayRect,n);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,a)),"right"==(this._isRtl()?"end"===n.overlayX?"left":"right":"end"===n.overlayX?"right":"left")?o.right="".concat(this._document.documentElement.clientWidth-(u.x+this._overlayRect.width),"px"):o.left=lu(u.x),o}},{key:"_getScrollVisibility",value:function(){var n=this._getOriginRect(),r=this._pane.getBoundingClientRect(),a=this._scrollables.map(function(o){return o.getElementRef().nativeElement.getBoundingClientRect()});return{isOriginClipped:mG(n,a),isOriginOutsideView:rB(n,a),isOverlayClipped:mG(r,a),isOverlayOutsideView:rB(r,a)}}},{key:"_subtractOverflows",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce(function(u,l){return u-Math.max(l,0)},n)}},{key:"_getNarrowedViewportRect",value:function(){var n=this._document.documentElement.clientWidth,r=this._document.documentElement.clientHeight,a=this._viewportRuler.getViewportScrollPosition();return{top:a.top+this._viewportMargin,left:a.left+this._viewportMargin,right:a.left+n-this._viewportMargin,bottom:a.top+r-this._viewportMargin,width:n-2*this._viewportMargin,height:r-2*this._viewportMargin}}},{key:"_isRtl",value:function(){return"rtl"===this._overlayRef.getDirection()}},{key:"_hasExactPosition",value:function(){return!this._hasFlexibleDimensions||this._isPushed}},{key:"_getOffset",value:function(n,r){return"x"===r?null==n.offsetX?this._offsetX:n.offsetX:null==n.offsetY?this._offsetY:n.offsetY}},{key:"_validatePositions",value:function(){}},{key:"_addPanelClasses",value:function(n){var r=this;this._pane&&d6(n).forEach(function(a){""!==a&&-1===r._appliedPanelClasses.indexOf(a)&&(r._appliedPanelClasses.push(a),r._pane.classList.add(a))})}},{key:"_clearPanelClasses",value:function(){var n=this;this._pane&&(this._appliedPanelClasses.forEach(function(r){n._pane.classList.remove(r)}),this._appliedPanelClasses=[])}},{key:"_getOriginRect",value:function(){var n=this._origin;if(n instanceof v.SBq)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();var r=n.width||0,a=n.height||0;return{top:n.y,bottom:n.y+a,left:n.x,right:n.x+r,height:a,width:r}}}]),i}();function j_(i,s){for(var n in s)s.hasOwnProperty(n)&&(i[n]=s[n]);return i}function bG(i){if("number"!=typeof i&&null!=i){var s=i.split(iQ),n=(0,Te.Z)(s,2),a=n[1];return a&&"px"!==a?null:parseFloat(n[0])}return i||null}function wG(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}var aQ=function(){function i(s,n,r,a,o,u,l){(0,M.Z)(this,i),this._preferredPositions=[],this._positionStrategy=new _G(r,a,o,u,l).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(s,n),this.onPositionChange=this._positionStrategy.positionChanges}return(0,R.Z)(i,[{key:"positions",get:function(){return this._preferredPositions}},{key:"attach",value:function(n){this._overlayRef=n,this._positionStrategy.attach(n),this._direction&&(n.setDirection(this._direction),this._direction=null)}},{key:"dispose",value:function(){this._positionStrategy.dispose()}},{key:"detach",value:function(){this._positionStrategy.detach()}},{key:"apply",value:function(){this._positionStrategy.apply()}},{key:"recalculateLastPosition",value:function(){this._positionStrategy.reapplyLastPosition()}},{key:"withScrollableContainers",value:function(n){this._positionStrategy.withScrollableContainers(n)}},{key:"withFallbackPosition",value:function(n,r,a,o){var u=new JX(n,r,a,o);return this._preferredPositions.push(u),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"withDirection",value:function(n){return this._overlayRef?this._overlayRef.setDirection(n):this._direction=n,this}},{key:"withOffsetX",value:function(n){return this._positionStrategy.withDefaultOffsetX(n),this}},{key:"withOffsetY",value:function(n){return this._positionStrategy.withDefaultOffsetY(n),this}},{key:"withLockedPosition",value:function(n){return this._positionStrategy.withLockedPosition(n),this}},{key:"withPositions",value:function(n){return this._preferredPositions=n.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}},{key:"setOrigin",value:function(n){return this._positionStrategy.setOrigin(n),this}}]),i}(),EG="cdk-global-overlay-wrapper",sQ=function(){function i(){(0,M.Z)(this,i),this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}return(0,R.Z)(i,[{key:"attach",value:function(n){var r=n.getConfig();this._overlayRef=n,this._width&&!r.width&&n.updateSize({width:this._width}),this._height&&!r.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(EG),this._isDisposed=!1}},{key:"top",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}},{key:"left",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._rightOffset="",this._leftOffset=n,this._justifyContent="flex-start",this}},{key:"bottom",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}},{key:"right",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._leftOffset="",this._rightOffset=n,this._justifyContent="flex-end",this}},{key:"width",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}},{key:"height",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}},{key:"centerHorizontally",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.left(n),this._justifyContent="center",this}},{key:"centerVertically",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.top(n),this._alignItems="center",this}},{key:"apply",value:function(){if(this._overlayRef&&this._overlayRef.hasAttached()){var n=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement.style,a=this._overlayRef.getConfig(),o=a.width,u=a.height,l=a.maxWidth,f=a.maxHeight,m=!("100%"!==o&&"100vw"!==o||l&&"100%"!==l&&"100vw"!==l),b=!("100%"!==u&&"100vh"!==u||f&&"100%"!==f&&"100vh"!==f);n.position=this._cssPosition,n.marginLeft=m?"0":this._leftOffset,n.marginTop=b?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=this._rightOffset,m?r.justifyContent="flex-start":"center"===this._justifyContent?r.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?r.justifyContent="flex-end":"flex-end"===this._justifyContent&&(r.justifyContent="flex-start"):r.justifyContent=this._justifyContent,r.alignItems=b?"flex-start":this._alignItems}}},{key:"dispose",value:function(){if(!this._isDisposed&&this._overlayRef){var n=this._overlayRef.overlayElement.style,r=this._overlayRef.hostElement,a=r.style;r.classList.remove(EG),a.justifyContent=a.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}}}]),i}(),oQ=function(){var i=function(){function s(n,r,a,o){(0,M.Z)(this,s),this._viewportRuler=n,this._document=r,this._platform=a,this._overlayContainer=o}return(0,R.Z)(s,[{key:"global",value:function(){return new sQ}},{key:"connectedTo",value:function(r,a,o){return new aQ(a,o,r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}},{key:"flexibleConnectedTo",value:function(r){return new _G(r,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(fE),v.LFG(be),v.LFG(Do),v.LFG(aB))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(fE),v.LFG(be),v.LFG(Do),v.LFG(aB))},token:i,providedIn:"root"}),i}(),uQ=0,bT=function(){var i=function(){function s(n,r,a,o,u,l,f,m,b,w,C){(0,M.Z)(this,s),this.scrollStrategies=n,this._overlayContainer=r,this._componentFactoryResolver=a,this._positionBuilder=o,this._keyboardDispatcher=u,this._injector=l,this._ngZone=f,this._document=m,this._directionality=b,this._location=w,this._outsideClickDispatcher=C}return(0,R.Z)(s,[{key:"create",value:function(r){var a=this._createHostElement(),o=this._createPaneElement(a),u=this._createPortalOutlet(o),l=new iB(r);return l.direction=l.direction||this._directionality.value,new rQ(u,a,o,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}},{key:"position",value:function(){return this._positionBuilder}},{key:"_createPaneElement",value:function(r){var a=this._document.createElement("div");return a.id="cdk-overlay-".concat(uQ++),a.classList.add("cdk-overlay-pane"),r.appendChild(a),a}},{key:"_createHostElement",value:function(){var r=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(r),r}},{key:"_createPortalOutlet",value:function(r){return this._appRef||(this._appRef=this._injector.get(v.z2F)),new nG(r,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(QX),v.LFG(aB),v.LFG(v._Vd),v.LFG(oQ),v.LFG(tQ),v.LFG(v.zs3),v.LFG(v.R0b),v.LFG(be),v.LFG(z_),v.LFG(Bt),v.LFG(nQ))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),hQ={provide:new v.OlP("cdk-connected-overlay-scroll-strategy"),deps:[bT],useFactory:function(i){return function(){return i.scrollStrategies.reposition()}}},fQ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[bT,hQ],imports:[[gT,iG,dG],dG]}),i}(),dQ=["mat-menu-item",""];function pQ(i,s){1&i&&(v.O4$(),v.TgZ(0,"svg",2),v._UZ(1,"polygon",3),v.qZA())}var CG=["*"];function vQ(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div",0),v.NdJ("keydown",function(o){return v.CHM(n),v.oxw()._handleKeydown(o)})("click",function(){return v.CHM(n),v.oxw().closed.emit("click")})("@transformMenu.start",function(o){return v.CHM(n),v.oxw()._onAnimationStart(o)})("@transformMenu.done",function(o){return v.CHM(n),v.oxw()._onAnimationDone(o)}),v.TgZ(1,"div",1),v.Hsn(2),v.qZA(),v.qZA()}if(2&i){var r=v.oxw();v.Q6J("id",r.panelId)("ngClass",r._classList)("@transformMenu",r._panelAnimationState),v.uIk("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null)("aria-describedby",r.ariaDescribedby||null)}}var VF={transformMenu:Xa("transformMenu",[mu("void",eo({opacity:0,transform:"scale(0.8)"})),el("void => enter",Qa("120ms cubic-bezier(0, 0, 0.2, 1)",eo({opacity:1,transform:"scale(1)"}))),el("* => void",Qa("100ms 25ms linear",eo({opacity:0})))]),fadeInItems:Xa("fadeInItems",[mu("showing",eo({opacity:1})),el("void => *",[eo({opacity:0}),Qa("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},DG=new v.OlP("MatMenuContent"),sB=new v.OlP("MAT_MENU_PANEL"),gQ=uE(LF(function(){return function i(){(0,M.Z)(this,i)}}())),zF=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o,u,l,f){var m;return(0,M.Z)(this,r),(m=n.call(this))._elementRef=a,m._focusMonitor=u,m._parentMenu=l,m._changeDetectorRef=f,m.role="menuitem",m._hovered=new jr.xQ,m._focused=new jr.xQ,m._highlighted=!1,m._triggersSubmenu=!1,l&&l.addItem&&l.addItem((0,Ja.Z)(m)),m}return(0,R.Z)(r,[{key:"focus",value:function(o,u){this._focusMonitor&&o?this._focusMonitor.focusVia(this._getHostElement(),o,u):this._getHostElement().focus(u),this._focused.next(this)}},{key:"ngAfterViewInit",value:function(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}},{key:"ngOnDestroy",value:function(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}},{key:"_getTabIndex",value:function(){return this.disabled?"-1":"0"}},{key:"_getHostElement",value:function(){return this._elementRef.nativeElement}},{key:"_checkDisabled",value:function(o){this.disabled&&(o.preventDefault(),o.stopPropagation())}},{key:"_handleMouseEnter",value:function(){this._hovered.next(this)}},{key:"getLabel",value:function(){for(var o,u,l=this._elementRef.nativeElement.cloneNode(!0),f=l.querySelectorAll("mat-icon, .material-icons"),m=0;m<f.length;m++){var b=f[m];null===(o=b.parentNode)||void 0===o||o.removeChild(b)}return(null===(u=l.textContent)||void 0===u?void 0:u.trim())||""}},{key:"_setHighlighted",value:function(o){var u;this._highlighted=o,null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()}}]),r}(gQ);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(be),v.Y36(rg),v.Y36(sB,8),v.Y36(v.sBO))},i.\u0275cmp=v.Xpm({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(n,r){1&n&&v.NdJ("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),2&n&&(v.uIk("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),v.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[v.qOj],attrs:dQ,ngContentSelectors:CG,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(n,r){1&n&&(v.F$t(),v.Hsn(0),v._UZ(1,"div",0),v.YNc(2,pQ,2,0,"svg",1)),2&n&&(v.xp6(1),v.Q6J("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),v.xp6(1),v.Q6J("ngIf",r._triggersSubmenu))},directives:[G_,Ra],encapsulation:2,changeDetection:0}),i}(),SG=new v.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}}),_Q=0,wT=function(){var i=function(){function s(n,r,a){(0,M.Z)(this,s),this._elementRef=n,this._ngZone=r,this._defaultOptions=a,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new v.n_E,this._tabSubscription=Vu.w.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new jr.xQ,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new v.vpe,this.close=this.closed,this.panelId="mat-menu-panel-".concat(_Q++)}return(0,R.Z)(s,[{key:"xPosition",get:function(){return this._xPosition},set:function(r){this._xPosition=r,this.setPositionClasses()}},{key:"yPosition",get:function(){return this._yPosition},set:function(r){this._yPosition=r,this.setPositionClasses()}},{key:"overlapTrigger",get:function(){return this._overlapTrigger},set:function(r){this._overlapTrigger=Ta(r)}},{key:"hasBackdrop",get:function(){return this._hasBackdrop},set:function(r){this._hasBackdrop=Ta(r)}},{key:"panelClass",set:function(r){var a=this,o=this._previousPanelClass;o&&o.length&&o.split(" ").forEach(function(u){a._classList[u]=!1}),this._previousPanelClass=r,r&&r.length&&(r.split(" ").forEach(function(u){a._classList[u]=!0}),this._elementRef.nativeElement.className="")}},{key:"classList",get:function(){return this.panelClass},set:function(r){this.panelClass=r}},{key:"ngOnInit",value:function(){this.setPositionClasses()}},{key:"ngAfterContentInit",value:function(){var r=this;this._updateDirectDescendants(),this._keyManager=new z3(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(function(){return r.closed.emit("tab")}),this._directDescendantItems.changes.pipe(rl(this._directDescendantItems),Uo(function(a){return Ld.T.apply(void 0,(0,Kr.Z)(a.map(function(o){return o._focused})))})).subscribe(function(a){return r._keyManager.updateActiveItem(a)})}},{key:"ngOnDestroy",value:function(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}},{key:"_hovered",value:function(){return this._directDescendantItems.changes.pipe(rl(this._directDescendantItems),Uo(function(a){return Ld.T.apply(void 0,(0,Kr.Z)(a.map(function(o){return o._hovered})))}))}},{key:"addItem",value:function(r){}},{key:"removeItem",value:function(r){}},{key:"_handleKeydown",value:function(r){var a=r.keyCode,o=this._keyManager;switch(a){case 27:eg(r)||(r.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===a||40===a)&&o.setFocusOrigin("keyboard"),o.onKeydown(r)}}},{key:"focusFirstItem",value:function(){var r=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"program";this.lazyContent?this._ngZone.onStable.pipe(Sc(1)).subscribe(function(){return r._focusFirstItem(a)}):this._focusFirstItem(a)}},{key:"_focusFirstItem",value:function(r){var a=this._keyManager;if(a.setFocusOrigin(r).setFirstItemActive(),!a.activeItem&&this._directDescendantItems.length)for(var o=this._directDescendantItems.first._getHostElement().parentElement;o;){if("menu"===o.getAttribute("role")){o.focus();break}o=o.parentElement}}},{key:"resetActiveItem",value:function(){this._keyManager.setActiveItem(-1)}},{key:"setElevation",value:function(r){var a=this,o=Math.min(this._baseElevation+r,24),u="".concat(this._elevationPrefix).concat(o),l=Object.keys(this._classList).find(function(f){return f.startsWith(a._elevationPrefix)});(!l||l===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[u]=!0,this._previousElevation=u)}},{key:"setPositionClasses",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xPosition,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.yPosition,o=this._classList;o["mat-menu-before"]="before"===r,o["mat-menu-after"]="after"===r,o["mat-menu-above"]="above"===a,o["mat-menu-below"]="below"===a}},{key:"_startAnimation",value:function(){this._panelAnimationState="enter"}},{key:"_resetAnimation",value:function(){this._panelAnimationState="void"}},{key:"_onAnimationDone",value:function(r){this._animationDone.next(r),this._isAnimating=!1}},{key:"_onAnimationStart",value:function(r){this._isAnimating=!0,"enter"===r.toState&&0===this._keyManager.activeItemIndex&&(r.element.scrollTop=0)}},{key:"_updateDirectDescendants",value:function(){var r=this;this._allItems.changes.pipe(rl(this._allItems)).subscribe(function(a){r._directDescendantItems.reset(a.filter(function(o){return o._parentMenu===r})),r._directDescendantItems.notifyOnChanges()})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(v.R0b),v.Y36(SG))},i.\u0275dir=v.lG2({type:i,contentQueries:function(n,r,a){var o;1&n&&(v.Suo(a,DG,5),v.Suo(a,zF,5),v.Suo(a,zF,4)),2&n&&(v.iGM(o=v.CRH())&&(r.lazyContent=o.first),v.iGM(o=v.CRH())&&(r._allItems=o),v.iGM(o=v.CRH())&&(r.items=o))},viewQuery:function(n,r){var a;1&n&&v.Gf(v.Rgc,5),2&n&&v.iGM(a=v.CRH())&&(r.templateRef=a.first)},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),i}(),bQ=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o,u){var l;return(0,M.Z)(this,r),(l=n.call(this,a,o,u))._elevationPrefix="mat-elevation-z",l._baseElevation=4,l}return r}(wT);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(v.R0b),v.Y36(SG))},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(n,r){2&n&&v.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[v._Bn([{provide:sB,useExisting:i}]),v.qOj],ngContentSelectors:CG,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(n,r){1&n&&(v.F$t(),v.YNc(0,vQ,3,6,"ng-template"))},directives:[$n],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[VF.transformMenu,VF.fadeInItems]},changeDetection:0}),i}(),AG=new v.OlP("mat-menu-scroll-strategy"),EQ={provide:AG,deps:[bT],useFactory:function(i){return function(){return i.scrollStrategies.reposition()}}},xG=FF({passive:!0}),kQ=function(){var i=function(){function s(n,r,a,o,u,l,f,m){var b=this;(0,M.Z)(this,s),this._overlay=n,this._element=r,this._viewContainerRef=a,this._menuItemInstance=l,this._dir=f,this._focusMonitor=m,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Vu.w.EMPTY,this._hoverSubscription=Vu.w.EMPTY,this._menuCloseSubscription=Vu.w.EMPTY,this._handleTouchStart=function(w){G3(w)||(b._openedBy="touch")},this._openedBy=void 0,this._ariaHaspopup=!0,this.restoreFocus=!0,this.menuOpened=new v.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new v.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=o,this._parentMaterialMenu=u instanceof wT?u:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,xG),l&&(l._triggersSubmenu=this.triggersSubmenu())}return(0,R.Z)(s,[{key:"_ariaExpanded",get:function(){return this.menuOpen||null}},{key:"_ariaControl",get:function(){return this.menuOpen?this.menu.panelId:null}},{key:"_deprecatedMatMenuTriggerFor",get:function(){return this.menu},set:function(r){this.menu=r}},{key:"menu",get:function(){return this._menu},set:function(r){var a=this;r!==this._menu&&(this._menu=r,this._menuCloseSubscription.unsubscribe(),r&&(this._menuCloseSubscription=r.close.subscribe(function(o){a._destroyMenu(o),("click"===o||"tab"===o)&&a._parentMaterialMenu&&a._parentMaterialMenu.closed.emit(o)})))}},{key:"ngAfterContentInit",value:function(){this._checkMenu(),this._handleHover()}},{key:"ngOnDestroy",value:function(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,xG),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}},{key:"menuOpen",get:function(){return this._menuOpen}},{key:"dir",get:function(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}},{key:"triggersSubmenu",value:function(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}},{key:"toggleMenu",value:function(){return this._menuOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){var r=this;if(!this._menuOpen){this._checkMenu();var a=this._createOverlay(),o=a.getConfig();this._setPosition(o.positionStrategy),o.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,a.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(function(){return r.closeMenu()}),this._initMenu(),this.menu instanceof wT&&this.menu._startAnimation()}}},{key:"closeMenu",value:function(){this.menu.close.emit()}},{key:"focus",value:function(r,a){this._focusMonitor&&r?this._focusMonitor.focusVia(this._element,r,a):this._element.nativeElement.focus(a)}},{key:"updatePosition",value:function(){var r;null===(r=this._overlayRef)||void 0===r||r.updatePosition()}},{key:"_destroyMenu",value:function(r){var a=this;if(this._overlayRef&&this.menuOpen){var o=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===r||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,o instanceof wT?(o._resetAnimation(),o.lazyContent?o._animationDone.pipe(Za(function(u){return"void"===u.toState}),Sc(1),zo(o.lazyContent._attached)).subscribe({next:function(){return o.lazyContent.detach()},complete:function(){return a._setIsMenuOpen(!1)}}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),o.lazyContent&&o.lazyContent.detach())}}},{key:"_initMenu",value:function(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}},{key:"_setMenuElevation",value:function(){if(this.menu.setElevation){for(var r=0,a=this.menu.parentMenu;a;)r++,a=a.parentMenu;this.menu.setElevation(r)}}},{key:"_setIsMenuOpen",value:function(r){this._menuOpen=r,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(r)}},{key:"_checkMenu",value:function(){}},{key:"_createOverlay",value:function(){if(!this._overlayRef){var r=this._getOverlayConfig();this._subscribeToPositions(r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}},{key:"_getOverlayConfig",value:function(){return new iB({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}},{key:"_subscribeToPositions",value:function(r){var a=this;this.menu.setPositionClasses&&r.positionChanges.subscribe(function(o){a.menu.setPositionClasses("start"===o.connectionPair.overlayX?"after":"before","top"===o.connectionPair.overlayY?"below":"above")})}},{key:"_setPosition",value:function(r){var o=(0,Te.Z)("before"===this.menu.xPosition?["end","start"]:["start","end"],2),u=o[0],l=o[1],m=(0,Te.Z)("above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],2),b=m[0],w=m[1],C=b,T=w,I=u,Z=l,Y=0;this.triggersSubmenu()?(Z=u="before"===this.menu.xPosition?"start":"end",l=I="end"===u?"start":"end",Y="bottom"===b?8:-8):this.menu.overlapTrigger||(C="top"===b?"bottom":"top",T="top"===w?"bottom":"top"),r.withPositions([{originX:u,originY:C,overlayX:I,overlayY:b,offsetY:Y},{originX:l,originY:C,overlayX:Z,overlayY:b,offsetY:Y},{originX:u,originY:T,overlayX:I,overlayY:w,offsetY:-Y},{originX:l,originY:T,overlayX:Z,overlayY:w,offsetY:-Y}])}},{key:"_menuClosingActions",value:function(){var r=this,a=this._overlayRef.backdropClick(),o=this._overlayRef.detachments(),u=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,wr.of)(),l=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Za(function(f){return f!==r._menuItemInstance}),Za(function(){return r._menuOpen})):(0,wr.of)();return(0,Ld.T)(a,u,l,o)}},{key:"_handleMousedown",value:function(r){H3(r)||(this._openedBy=0===r.button?"mouse":void 0,this.triggersSubmenu()&&r.preventDefault())}},{key:"_handleKeydown",value:function(r){var a=r.keyCode;(13===a||32===a)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===a&&"ltr"===this.dir||37===a&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}},{key:"_handleClick",value:function(r){this.triggersSubmenu()?(r.stopPropagation(),this.openMenu()):this.toggleMenu()}},{key:"_handleHover",value:function(){var r=this;!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Za(function(a){return a===r._menuItemInstance&&!a.disabled}),eG(0,J3.E)).subscribe(function(){r._openedBy="mouse",r.menu instanceof wT&&r.menu._isAnimating?r.menu._animationDone.pipe(Sc(1),eG(0,J3.E),zo(r._parentMaterialMenu._hovered())).subscribe(function(){return r.openMenu()}):r.openMenu()}))}},{key:"_getPortal",value:function(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new lE(this.menu.templateRef,this._viewContainerRef)),this._portal}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(bT),v.Y36(v.SBq),v.Y36(v.s_b),v.Y36(AG),v.Y36(sB,8),v.Y36(zF,10),v.Y36(z_,8),v.Y36(rg))},i.\u0275dir=v.lG2({type:i,hostVars:3,hostBindings:function(n,r){1&n&&v.NdJ("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(o){return r._handleClick(o)}),2&n&&v.uIk("aria-haspopup",r._ariaHaspopup)("aria-expanded",r._ariaExpanded)("aria-controls",r._ariaControl)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i}(),CQ=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(){return(0,M.Z)(this,r),n.apply(this,arguments)}return r}(kQ);return i.\u0275fac=function(){var s;return function(r){return(s||(s=v.n5z(i)))(r||i)}}(),i.\u0275dir=v.lG2({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[v.qOj]}),i}(),DQ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[EQ],imports:[[$,lo,ZF,fQ],_T,lo]}),i}(),SQ=ne(1225);function ig(i){return function(n){var r=new AQ(i),a=n.lift(r);return r.caught=a}}var AQ=function(){function i(s){(0,M.Z)(this,i),this.selector=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new TQ(n,this.selector,this.caught))}}]),i}(),TQ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r)).selector=a,u.caught=o,u}return(0,R.Z)(n,[{key:"error",value:function(a){if(!this.isStopped){var o;try{o=this.selector(a,this.caught)}catch(f){return void(0,Se.Z)((0,ye.Z)(n.prototype),"error",this).call(this,f)}this._unsubscribeAndRecycle();var u=new Qc.IY(this);this.add(u);var l=(0,Qc.ft)(o,u);l!==u&&this.add(l)}}}]),n}(Qc.Ds);function MG(i){return function(s){return s.lift(new xQ(i))}}var xQ=function(){function i(s){(0,M.Z)(this,i),this.callback=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new MQ(n,this.callback))}}]),i}(),MQ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).add(new Vu.w(a)),o}return n}(qs.L),IQ=["*"];function IG(i){return Error('Unable to find icon with the name "'.concat(i,'"'))}function PG(i){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL "+"via Angular's DomSanitizer. Attempted URL was \"".concat(i,'".'))}function FG(i){return Error("The literal provided to MatIconRegistry was not trusted as safe HTML by "+"Angular's DomSanitizer. Attempted literal was \"".concat(i,'".'))}var W_=function i(s,n,r){(0,M.Z)(this,i),this.url=s,this.svgText=n,this.options=r},HF=function(){var i=function(){function s(n,r,a,o){(0,M.Z)(this,s),this._httpClient=n,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=a}return(0,R.Z)(s,[{key:"addSvgIcon",value:function(r,a,o){return this.addSvgIconInNamespace("",r,a,o)}},{key:"addSvgIconLiteral",value:function(r,a,o){return this.addSvgIconLiteralInNamespace("",r,a,o)}},{key:"addSvgIconInNamespace",value:function(r,a,o,u){return this._addSvgIconConfig(r,a,new W_(o,null,u))}},{key:"addSvgIconResolver",value:function(r){return this._resolvers.push(r),this}},{key:"addSvgIconLiteralInNamespace",value:function(r,a,o,u){var l=this._sanitizer.sanitize(v.q3G.HTML,o);if(!l)throw FG(o);return this._addSvgIconConfig(r,a,new W_("",l,u))}},{key:"addSvgIconSet",value:function(r,a){return this.addSvgIconSetInNamespace("",r,a)}},{key:"addSvgIconSetLiteral",value:function(r,a){return this.addSvgIconSetLiteralInNamespace("",r,a)}},{key:"addSvgIconSetInNamespace",value:function(r,a,o){return this._addSvgIconSetConfig(r,new W_(a,null,o))}},{key:"addSvgIconSetLiteralInNamespace",value:function(r,a,o){var u=this._sanitizer.sanitize(v.q3G.HTML,a);if(!u)throw FG(a);return this._addSvgIconSetConfig(r,new W_("",u,o))}},{key:"registerFontClassAlias",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return this._fontCssClassesByAlias.set(r,a),this}},{key:"classNameForFontAlias",value:function(r){return this._fontCssClassesByAlias.get(r)||r}},{key:"setDefaultFontSetClass",value:function(r){return this._defaultFontSetClass=r,this}},{key:"getDefaultFontSetClass",value:function(){return this._defaultFontSetClass}},{key:"getSvgIconFromUrl",value:function(r){var a=this,o=this._sanitizer.sanitize(v.q3G.RESOURCE_URL,r);if(!o)throw PG(r);var u=this._cachedIconsByUrl.get(o);return u?(0,wr.of)(GF(u)):this._loadSvgIconFromConfig(new W_(r,null)).pipe((0,ll.b)(function(l){return a._cachedIconsByUrl.set(o,l)}),(0,Tr.U)(function(l){return GF(l)}))}},{key:"getNamedSvgIcon",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=RG(a,r),u=this._svgIconConfigs.get(o);if(u)return this._getSvgFromConfig(u);if(u=this._getIconConfigFromResolvers(a,r))return this._svgIconConfigs.set(o,u),this._getSvgFromConfig(u);var l=this._iconSetConfigs.get(a);return l?this._getSvgFromIconSetConfigs(r,l):(0,SQ._)(IG(o))}},{key:"ngOnDestroy",value:function(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}},{key:"_getSvgFromConfig",value:function(r){return r.svgText?(0,wr.of)(GF(this._svgElementFromConfig(r))):this._loadSvgIconFromConfig(r).pipe((0,Tr.U)(function(a){return GF(a)}))}},{key:"_getSvgFromIconSetConfigs",value:function(r,a){var o=this,u=this._extractIconWithNameFromAnySet(r,a);return u?(0,wr.of)(u):function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];if(1===s.length){var r=s[0];if((0,fA.k)(r))return dA(r,null);if((0,Az.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){var a=Object.keys(r);return dA(a.map(function(u){return r[u]}),a)}}if("function"==typeof s[s.length-1]){var o=s.pop();return dA(s=1===s.length&&(0,fA.k)(s[0])?s[0]:s,null).pipe((0,Tr.U)(function(u){return o.apply(void 0,(0,Kr.Z)(u))}))}return dA(s,null)}(a.filter(function(f){return!f.svgText}).map(function(f){return o._loadSvgIconSetFromConfig(f).pipe(ig(function(m){var b=o._sanitizer.sanitize(v.q3G.RESOURCE_URL,f.url),w="Loading icon set URL: ".concat(b," failed: ").concat(m.message);return o._errorHandler.handleError(new Error(w)),(0,wr.of)(null)}))})).pipe((0,Tr.U)(function(){var f=o._extractIconWithNameFromAnySet(r,a);if(!f)throw IG(r);return f}))}},{key:"_extractIconWithNameFromAnySet",value:function(r,a){for(var o=a.length-1;o>=0;o--){var u=a[o];if(u.svgText&&u.svgText.indexOf(r)>-1){var l=this._svgElementFromConfig(u),f=this._extractSvgIconFromSet(l,r,u.options);if(f)return f}}return null}},{key:"_loadSvgIconFromConfig",value:function(r){var a=this;return this._fetchIcon(r).pipe((0,ll.b)(function(o){return r.svgText=o}),(0,Tr.U)(function(){return a._svgElementFromConfig(r)}))}},{key:"_loadSvgIconSetFromConfig",value:function(r){return r.svgText?(0,wr.of)(null):this._fetchIcon(r).pipe((0,ll.b)(function(a){return r.svgText=a}))}},{key:"_extractSvgIconFromSet",value:function(r,a,o){var u=r.querySelector('[id="'.concat(a,'"]'));if(!u)return null;var l=u.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,o);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),o);var f=this._svgElementFromString("<svg></svg>");return f.appendChild(l),this._setSvgAttributes(f,o)}},{key:"_svgElementFromString",value:function(r){var a=this._document.createElement("DIV");a.innerHTML=r;var o=a.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}},{key:"_toSvgElement",value:function(r){for(var a=this._svgElementFromString("<svg></svg>"),o=r.attributes,u=0;u<o.length;u++){var l=o[u],f=l.name;"id"!==f&&a.setAttribute(f,l.value)}for(var b=0;b<r.childNodes.length;b++)r.childNodes[b].nodeType===this._document.ELEMENT_NODE&&a.appendChild(r.childNodes[b].cloneNode(!0));return a}},{key:"_setSvgAttributes",value:function(r,a){return r.setAttribute("fit",""),r.setAttribute("height","100%"),r.setAttribute("width","100%"),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("focusable","false"),a&&a.viewBox&&r.setAttribute("viewBox",a.viewBox),r}},{key:"_fetchIcon",value:function(r){var o,a=this,u=r.url,l=r.options,f=null!==(o=null==l?void 0:l.withCredentials)&&void 0!==o&&o;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==u)throw Error('Cannot fetch icon from URL "'.concat(u,'".'));var m=this._sanitizer.sanitize(v.q3G.RESOURCE_URL,u);if(!m)throw PG(u);var b=this._inProgressUrlFetches.get(m);if(b)return b;var w=this._httpClient.get(m,{responseType:"text",withCredentials:f}).pipe(MG(function(){return a._inProgressUrlFetches.delete(m)}),(0,Cn.B)());return this._inProgressUrlFetches.set(m,w),w}},{key:"_addSvgIconConfig",value:function(r,a,o){return this._svgIconConfigs.set(RG(r,a),o),this}},{key:"_addSvgIconSetConfig",value:function(r,a){var o=this._iconSetConfigs.get(r);return o?o.push(a):this._iconSetConfigs.set(r,[a]),this}},{key:"_svgElementFromConfig",value:function(r){if(!r.svgElement){var a=this._svgElementFromString(r.svgText);this._setSvgAttributes(a,r.options),r.svgElement=a}return r.svgElement}},{key:"_getIconConfigFromResolvers",value:function(r,a){for(var o=0;o<this._resolvers.length;o++){var u=this._resolvers[o](a,r);if(u)return RQ(u)?new W_(u.url,null,u.options):new W_(u,null)}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(__,8),v.LFG(Xt),v.LFG(be,8),v.LFG(v.qLn))},i.\u0275prov=v.Yz7({factory:function(){return new i(v.LFG(__,8),v.LFG(Xt),v.LFG(be,8),v.LFG(v.qLn))},token:i,providedIn:"root"}),i}();function GF(i){return i.cloneNode(!0)}function RG(i,s){return i+":"+s}function RQ(i){return!(!i.url||!i.options)}var OQ=W3(function(){return function i(s){(0,M.Z)(this,i),this._elementRef=s}}()),LQ=new v.OlP("mat-icon-location",{providedIn:"root",factory:function(){var i=(0,v.f3M)(be),s=i?i.location:null;return{getPathname:function(){return s?s.pathname+s.search:""}}}}),OG=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],BQ=OG.map(function(s){return"[".concat(s,"]")}).join(", "),UQ=/^url\(['"]?#(.*?)['"]?\)$/,oB=function(){var i=function(s){(0,x.Z)(r,s);var n=(0,oe.Z)(r);function r(a,o,u,l,f){var m;return(0,M.Z)(this,r),(m=n.call(this,a))._iconRegistry=o,m._location=l,m._errorHandler=f,m._inline=!1,m._currentIconFetch=Vu.w.EMPTY,u||a.nativeElement.setAttribute("aria-hidden","true"),m}return(0,R.Z)(r,[{key:"inline",get:function(){return this._inline},set:function(o){this._inline=Ta(o)}},{key:"svgIcon",get:function(){return this._svgIcon},set:function(o){o!==this._svgIcon&&(o?this._updateSvgIcon(o):this._svgIcon&&this._clearSvgElement(),this._svgIcon=o)}},{key:"fontSet",get:function(){return this._fontSet},set:function(o){var u=this._cleanupFontValue(o);u!==this._fontSet&&(this._fontSet=u,this._updateFontIconClasses())}},{key:"fontIcon",get:function(){return this._fontIcon},set:function(o){var u=this._cleanupFontValue(o);u!==this._fontIcon&&(this._fontIcon=u,this._updateFontIconClasses())}},{key:"_splitIconName",value:function(o){if(!o)return["",""];var u=o.split(":");switch(u.length){case 1:return["",u[0]];case 2:return u;default:throw Error('Invalid icon name: "'.concat(o,'"'))}}},{key:"ngOnInit",value:function(){this._updateFontIconClasses()}},{key:"ngAfterViewChecked",value:function(){var o=this._elementsWithExternalReferences;if(o&&o.size){var u=this._location.getPathname();u!==this._previousPath&&(this._previousPath=u,this._prependPathToReferences(u))}}},{key:"ngOnDestroy",value:function(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}},{key:"_usingFontIcon",value:function(){return!this.svgIcon}},{key:"_setSvgElement",value:function(o){this._clearSvgElement();for(var u=o.querySelectorAll("style"),l=0;l<u.length;l++)u[l].textContent+=" ";var f=this._location.getPathname();this._previousPath=f,this._cacheChildrenWithExternalReferences(o),this._prependPathToReferences(f),this._elementRef.nativeElement.appendChild(o)}},{key:"_clearSvgElement",value:function(){var o=this._elementRef.nativeElement,u=o.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();u--;){var l=o.childNodes[u];(1!==l.nodeType||"svg"===l.nodeName.toLowerCase())&&o.removeChild(l)}}},{key:"_updateFontIconClasses",value:function(){if(this._usingFontIcon()){var o=this._elementRef.nativeElement,u=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();u!=this._previousFontSetClass&&(this._previousFontSetClass&&o.classList.remove(this._previousFontSetClass),u&&o.classList.add(u),this._previousFontSetClass=u),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&o.classList.remove(this._previousFontIconClass),this.fontIcon&&o.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}}},{key:"_cleanupFontValue",value:function(o){return"string"==typeof o?o.trim().split(" ")[0]:o}},{key:"_prependPathToReferences",value:function(o){var u=this._elementsWithExternalReferences;u&&u.forEach(function(l,f){l.forEach(function(m){f.setAttribute(m.name,"url('".concat(o,"#").concat(m.value,"')"))})})}},{key:"_cacheChildrenWithExternalReferences",value:function(o){for(var u=o.querySelectorAll(BQ),l=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map,f=function(w){OG.forEach(function(C){var T=u[w],I=T.getAttribute(C),Z=I?I.match(UQ):null;if(Z){var Y=l.get(T);Y||l.set(T,Y=[]),Y.push({name:C,value:Z[1]})}})},m=0;m<u.length;m++)f(m)}},{key:"_updateSvgIcon",value:function(o){var u=this;if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),o){var l=this._splitIconName(o),f=(0,Te.Z)(l,2),m=f[0],b=f[1];m&&(this._svgNamespace=m),b&&(this._svgName=b),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(b,m).pipe(Sc(1)).subscribe(function(w){return u._setSvgElement(w)},function(w){var C="Error retrieving icon ".concat(m,":").concat(b,"! ").concat(w.message);u._errorHandler.handleError(new Error(C))})}}}]),r}(OQ);return i.\u0275fac=function(n){return new(n||i)(v.Y36(v.SBq),v.Y36(HF),v.$8M("aria-hidden"),v.Y36(LQ),v.Y36(v.qLn))},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(n,r){2&n&&(v.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),v.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[v.qOj],ngContentSelectors:IQ,decls:1,vars:0,template:function(n,r){1&n&&(v.F$t(),v.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i}(),VQ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[lo],lo]}),i}(),qQ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}(),uJ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[$,lo,qQ,iG]]}),i}(),kJ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[$,lo,pT,_T],_T,lo]}),i}(),CJ=function(){var i=function(){function s(){(0,M.Z)(this,s),this._vertical=!1,this._inset=!1}return(0,R.Z)(s,[{key:"vertical",get:function(){return this._vertical},set:function(r){this._vertical=Ta(r)}},{key:"inset",get:function(){return this._inset},set:function(r){this._inset=Ta(r)}}]),s}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(n,r){2&n&&(v.uIk("aria-orientation",r.vertical?"vertical":"horizontal"),v.ekj("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(n,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),i}(),DJ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[lo],lo]}),i}(),ZJ=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[Z6,ZF,lo,Y3,$],Z6,lo,Y3,DJ]}),i}(),BJ=ne(9342),XG={},VJ=function(){function i(s){(0,M.Z)(this,i),this.resultSelector=s}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new zJ(n,this.resultSelector))}}]),i}(),zJ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).resultSelector=a,o.active=0,o.values=[],o.observables=[],o}return(0,R.Z)(n,[{key:"_next",value:function(a){this.values.push(XG),this.observables.push(a)}},{key:"_complete",value:function(){var a=this.observables,o=a.length;if(0===o)this.destination.complete();else{this.active=o,this.toRespond=o;for(var u=0;u<o;u++)this.add(Ai(this,a[u],void 0,u))}}},{key:"notifyComplete",value:function(a){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(a,o,u){var l=this.values,m=this.toRespond?l[u]===XG?--this.toRespond:this.toRespond:0;l[u]=o,0===m&&(this.resultSelector?this._tryResultSelector(l):this.destination.next(l.slice()))}},{key:"_tryResultSelector",value:function(a){var o;try{o=this.resultSelector.apply(this,a)}catch(u){return void this.destination.error(u)}this.destination.next(o)}}]),n}(qt);function QG(i){return new ro.y(function(s){var n;try{n=i()}catch(a){return void s.error(a)}return(n?(0,Ws.D)(n):(0,Df.c)()).subscribe(s)})}var HJ=ne(2875);function dB(i){return function(n){return 0===i?(0,Df.c)():n.lift(new GJ(i))}}var GJ=function(){function i(s){if((0,M.Z)(this,i),this.total=s,this.total<0)throw new zI}return(0,R.Z)(i,[{key:"call",value:function(n,r){return r.subscribe(new jJ(n,this.total))}}]),i}(),jJ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).total=a,o.ring=new Array,o.count=0,o}return(0,R.Z)(n,[{key:"_next",value:function(a){var o=this.ring,u=this.total,l=this.count++;o.length<u?o.push(a):o[l%u]=a}},{key:"_complete",value:function(){var a=this.destination,o=this.count;if(o>0)for(var u=this.count>=this.total?this.total:this.count,l=this.ring,f=0;f<u;f++){var m=o++%u;a.next(l[m])}a.complete()}}]),n}(qs.L),qJ=ne(1564),Qp=function i(s,n){(0,M.Z)(this,i),this.id=s,this.url=n},pB=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,M.Z)(this,n),(o=s.call(this,r,a)).navigationTrigger=u,o.restoredState=l,o}return(0,R.Z)(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Qp),ET=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).urlAfterRedirects=o,u}return(0,R.Z)(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Qp),JG=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).reason=o,u}return(0,R.Z)(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Qp),YJ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).error=o,u}return(0,R.Z)(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Qp),KJ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this,r,a)).urlAfterRedirects=o,l.state=u,l}return(0,R.Z)(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Qp),$J=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this,r,a)).urlAfterRedirects=o,l.state=u,l}return(0,R.Z)(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Qp),XJ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l){var f;return(0,M.Z)(this,n),(f=s.call(this,r,a)).urlAfterRedirects=o,f.state=u,f.shouldActivate=l,f}return(0,R.Z)(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Qp),QJ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this,r,a)).urlAfterRedirects=o,l.state=u,l}return(0,R.Z)(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Qp),JJ=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this,r,a)).urlAfterRedirects=o,l.state=u,l}return(0,R.Z)(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Qp),e5=function(){function i(s){(0,M.Z)(this,i),this.route=s}return(0,R.Z)(i,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),i}(),t5=function(){function i(s){(0,M.Z)(this,i),this.route=s}return(0,R.Z)(i,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),i}(),eee=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,R.Z)(i,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),tee=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,R.Z)(i,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),nee=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,R.Z)(i,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),ree=function(){function i(s){(0,M.Z)(this,i),this.snapshot=s}return(0,R.Z)(i,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),i}(),n5=function(){function i(s,n,r){(0,M.Z)(this,i),this.routerEvent=s,this.position=n,this.anchor=r}return(0,R.Z)(i,[{key:"toString",value:function(){var n=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(n,"')")}}]),i}(),Yi="primary",iee=function(){function i(s){(0,M.Z)(this,i),this.params=s||{}}return(0,R.Z)(i,[{key:"has",value:function(n){return Object.prototype.hasOwnProperty.call(this.params,n)}},{key:"get",value:function(n){if(this.has(n)){var r=this.params[n];return Array.isArray(r)?r[0]:r}return null}},{key:"getAll",value:function(n){if(this.has(n)){var r=this.params[n];return Array.isArray(r)?r:[r]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),i}();function dE(i){return new iee(i)}var r5="ngNavigationCancelingError";function vB(i){var s=Error("NavigationCancelingError: "+i);return s[r5]=!0,s}function see(i,s,n){var r=n.path.split("/");if(r.length>i.length||"full"===n.pathMatch&&(s.hasChildren()||r.length<i.length))return null;for(var a={},o=0;o<r.length;o++){var u=r[o],l=i[o];if(u.startsWith(":"))a[u.substring(1)]=l;else if(u!==l.path)return null}return{consumed:i.slice(0,r.length),posParams:a}}function Kd(i,s){var n=i?Object.keys(i):void 0,r=s?Object.keys(s):void 0;if(!n||!r||n.length!=r.length)return!1;for(var a,o=0;o<n.length;o++)if(!i5(i[a=n[o]],s[a]))return!1;return!0}function i5(i,s){if(Array.isArray(i)&&Array.isArray(s)){if(i.length!==s.length)return!1;var n=(0,Kr.Z)(i).sort(),r=(0,Kr.Z)(s).sort();return n.every(function(a,o){return r[o]===a})}return i===s}function a5(i){return Array.prototype.concat.apply([],i)}function s5(i){return i.length>0?i[i.length-1]:null}function cl(i,s){for(var n in i)i.hasOwnProperty(n)&&s(i[n],n)}function $d(i){return(0,v.CqO)(i)?i:(0,v.QGY)(i)?(0,Ws.D)(Promise.resolve(i)):(0,wr.of)(i)}var lee={exact:function l5(i,s,n){if(!Y_(i.segments,s.segments)||!qF(i.segments,s.segments,n)||i.numberOfChildren!==s.numberOfChildren)return!1;for(var r in s.children)if(!i.children[r]||!l5(i.children[r],s.children[r],n))return!1;return!0},subset:c5},o5={exact:function(i,s){return Kd(i,s)},subset:function(i,s){return Object.keys(s).length<=Object.keys(i).length&&Object.keys(s).every(function(n){return i5(i[n],s[n])})},ignored:function(){return!0}};function u5(i,s,n){return lee[n.paths](i.root,s.root,n.matrixParams)&&o5[n.queryParams](i.queryParams,s.queryParams)&&!("exact"===n.fragment&&i.fragment!==s.fragment)}function c5(i,s,n){return h5(i,s,s.segments,n)}function h5(i,s,n,r){if(i.segments.length>n.length){var a=i.segments.slice(0,n.length);return!(!Y_(a,n)||s.hasChildren()||!qF(a,n,r))}if(i.segments.length===n.length){if(!Y_(i.segments,n)||!qF(i.segments,n,r))return!1;for(var o in s.children)if(!i.children[o]||!c5(i.children[o],s.children[o],r))return!1;return!0}var u=n.slice(0,i.segments.length),l=n.slice(i.segments.length);return!!(Y_(i.segments,u)&&qF(i.segments,u,r)&&i.children[Yi])&&h5(i.children[Yi],s,l,r)}function qF(i,s,n){return s.every(function(r,a){return o5[n](i[a].parameters,r.parameters)})}var q_=function(){function i(s,n,r){(0,M.Z)(this,i),this.root=s,this.queryParams=n,this.fragment=r}return(0,R.Z)(i,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=dE(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return pee.serialize(this)}}]),i}(),ta=function(){function i(s,n){var r=this;(0,M.Z)(this,i),this.segments=s,this.children=n,this.parent=null,cl(n,function(a,o){return a.parent=r})}return(0,R.Z)(i,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return YF(this)}}]),i}(),kT=function(){function i(s,n){(0,M.Z)(this,i),this.path=s,this.parameters=n}return(0,R.Z)(i,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=dE(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return v5(this)}}]),i}();function Y_(i,s){return i.length===s.length&&i.every(function(n,r){return n.path===s[r].path})}var mB=function i(){(0,M.Z)(this,i)},f5=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"parse",value:function(n){var r=new kee(n);return new q_(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}},{key:"serialize",value:function(n){var r="/".concat(CT(n.root,!0)),a=function(i){var s=Object.keys(i).map(function(n){var r=i[n];return Array.isArray(r)?r.map(function(a){return"".concat(KF(n),"=").concat(KF(a))}).join("&"):"".concat(KF(n),"=").concat(KF(r))}).filter(function(n){return!!n});return s.length?"?".concat(s.join("&")):""}(n.queryParams),o="string"==typeof n.fragment?"#".concat(function(i){return encodeURI(i)}(n.fragment)):"";return"".concat(r).concat(a).concat(o)}}]),i}(),pee=new f5;function YF(i){return i.segments.map(function(s){return v5(s)}).join("/")}function CT(i,s){if(!i.hasChildren())return YF(i);if(s){var n=i.children[Yi]?CT(i.children[Yi],!1):"",r=[];return cl(i.children,function(o,u){u!==Yi&&r.push("".concat(u,":").concat(CT(o,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var a=function(i,s){var n=[];return cl(i.children,function(r,a){a===Yi&&(n=n.concat(s(r,a)))}),cl(i.children,function(r,a){a!==Yi&&(n=n.concat(s(r,a)))}),n}(i,function(o,u){return u===Yi?[CT(i.children[Yi],!1)]:["".concat(u,":").concat(CT(o,!1))]});return 1===Object.keys(i.children).length&&null!=i.children[Yi]?"".concat(YF(i),"/").concat(a[0]):"".concat(YF(i),"/(").concat(a.join("//"),")")}function d5(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function KF(i){return d5(i).replace(/%3B/gi,";")}function gB(i){return d5(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $F(i){return decodeURIComponent(i)}function p5(i){return $F(i.replace(/\+/g,"%20"))}function v5(i){return"".concat(gB(i.path)).concat(function(i){return Object.keys(i).map(function(s){return";".concat(gB(s),"=").concat(gB(i[s]))}).join("")}(i.parameters))}var yee=/^[^\/()?;=#]+/;function XF(i){var s=i.match(yee);return s?s[0]:""}var _ee=/^[^=?&#]+/,wee=/^[^?&#]+/,kee=function(){function i(s){(0,M.Z)(this,i),this.url=s,this.remaining=s}return(0,R.Z)(i,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ta([],{}):new ta([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());var r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));var a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(a[Yi]=new ta(n,r)),a}},{key:"parseSegment",value:function(){var n=XF(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(n),new kT($F(n),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var n={};this.consumeOptional(";");)this.parseParam(n);return n}},{key:"parseParam",value:function(n){var r=XF(this.remaining);if(r){this.capture(r);var a="";if(this.consumeOptional("=")){var o=XF(this.remaining);o&&this.capture(a=o)}n[$F(r)]=$F(a)}}},{key:"parseQueryParam",value:function(n){var r=function(i){var s=i.match(_ee);return s?s[0]:""}(this.remaining);if(r){this.capture(r);var a="";if(this.consumeOptional("=")){var o=function(i){var s=i.match(wee);return s?s[0]:""}(this.remaining);o&&this.capture(a=o)}var u=p5(r),l=p5(a);if(n.hasOwnProperty(u)){var f=n[u];Array.isArray(f)||(n[u]=f=[f]),f.push(l)}else n[u]=l}}},{key:"parseParens",value:function(n){var r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var a=XF(this.remaining),o=this.remaining[a.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error("Cannot parse url '".concat(this.url,"'"));var u=void 0;a.indexOf(":")>-1?(u=a.substr(0,a.indexOf(":")),this.capture(u),this.capture(":")):n&&(u=Yi);var l=this.parseChildren();r[u]=1===Object.keys(l).length?l[Yi]:new ta([],l),this.consumeOptional("//")}return r}},{key:"peekStartsWith",value:function(n){return this.remaining.startsWith(n)}},{key:"consumeOptional",value:function(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}},{key:"capture",value:function(n){if(!this.consumeOptional(n))throw new Error('Expected "'.concat(n,'".'))}}]),i}(),m5=function(){function i(s){(0,M.Z)(this,i),this._root=s}return(0,R.Z)(i,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(n){var r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}},{key:"children",value:function(n){var r=yB(n,this._root);return r?r.children.map(function(a){return a.value}):[]}},{key:"firstChild",value:function(n){var r=yB(n,this._root);return r&&r.children.length>0?r.children[0].value:null}},{key:"siblings",value:function(n){var r=_B(n,this._root);return r.length<2?[]:r[r.length-2].children.map(function(o){return o.value}).filter(function(o){return o!==n})}},{key:"pathFromRoot",value:function(n){return _B(n,this._root).map(function(r){return r.value})}}]),i}();function yB(i,s){if(i===s.value)return s;var r,n=(0,Ve.Z)(s.children);try{for(n.s();!(r=n.n()).done;){var o=yB(i,r.value);if(o)return o}}catch(u){n.e(u)}finally{n.f()}return null}function _B(i,s){if(i===s.value)return[s];var r,n=(0,Ve.Z)(s.children);try{for(n.s();!(r=n.n()).done;){var o=_B(i,r.value);if(o.length)return o.unshift(s),o}}catch(u){n.e(u)}finally{n.f()}return[]}var Jp=function(){function i(s,n){(0,M.Z)(this,i),this.value=s,this.children=n}return(0,R.Z)(i,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),i}();function DT(i){var s={};return i&&i.children.forEach(function(n){return s[n.value.outlet]=n}),s}var g5=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r)).snapshot=a,bB((0,Ja.Z)(o),r),o}return(0,R.Z)(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(m5);function y5(i,s){var n=function(i,s){var u=new QF([],{},{},"",{},Yi,s,null,i.root,-1,{});return new b5("",new Jp(u,[]))}(i,s),r=new Gh([new kT("",{})]),a=new Gh({}),o=new Gh({}),u=new Gh({}),l=new Gh(""),f=new pE(r,a,u,l,o,Yi,s,n.root);return f.snapshot=n.root,new g5(new Jp(f,[]),n)}var pE=function(){function i(s,n,r,a,o,u,l,f){(0,M.Z)(this,i),this.url=s,this.params=n,this.queryParams=r,this.fragment=a,this.data=o,this.outlet=u,this.component=l,this._futureSnapshot=f}return(0,R.Z)(i,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tr.U)(function(n){return dE(n)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tr.U)(function(n){return dE(n)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),i}();function _5(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=i.pathFromRoot,r=0;if("always"!==s)for(r=n.length-1;r>=1;){var a=n[r],o=n[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(o.component)break;r--}}return Dee(n.slice(r))}function Dee(i){return i.reduce(function(s,n){return{params:Object.assign(Object.assign({},s.params),n.params),data:Object.assign(Object.assign({},s.data),n.data),resolve:Object.assign(Object.assign({},s.resolve),n._resolvedData)}},{params:{},data:{},resolve:{}})}var QF=function(){function i(s,n,r,a,o,u,l,f,m,b,w){(0,M.Z)(this,i),this.url=s,this.params=n,this.queryParams=r,this.fragment=a,this.data=o,this.outlet=u,this.component=l,this.routeConfig=f,this._urlSegment=m,this._lastPathIndex=b,this._resolve=w}return(0,R.Z)(i,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=dE(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=dE(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var n=this.url.map(function(a){return a.toString()}).join("/"),r=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(n,"', path:'").concat(r,"')")}}]),i}(),b5=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,a)).url=r,bB((0,Ja.Z)(o),a),o}return(0,R.Z)(n,[{key:"toString",value:function(){return w5(this._root)}}]),n}(m5);function bB(i,s){s.value._routerState=i,s.children.forEach(function(n){return bB(i,n)})}function w5(i){var s=i.children.length>0?" { ".concat(i.children.map(w5).join(", ")," } "):"";return"".concat(i.value).concat(s)}function wB(i){if(i.snapshot){var s=i.snapshot,n=i._futureSnapshot;i.snapshot=n,Kd(s.queryParams,n.queryParams)||i.queryParams.next(n.queryParams),s.fragment!==n.fragment&&i.fragment.next(n.fragment),Kd(s.params,n.params)||i.params.next(n.params),function(i,s){if(i.length!==s.length)return!1;for(var n=0;n<i.length;++n)if(!Kd(i[n],s[n]))return!1;return!0}(s.url,n.url)||i.url.next(n.url),Kd(s.data,n.data)||i.data.next(n.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function EB(i,s){return Kd(i.params,s.params)&&function(i,s){return Y_(i,s)&&i.every(function(n,r){return Kd(n.parameters,s[r].parameters)})}(i.url,s.url)&&!(!i.parent!=!s.parent)&&(!i.parent||EB(i.parent,s.parent))}function JF(i,s,n){if(n&&i.shouldReuseRoute(s.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=s.value;var a=function(i,s,n){return s.children.map(function(r){var o,a=(0,Ve.Z)(n.children);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(i.shouldReuseRoute(r.value,u.value.snapshot))return JF(i,r,u)}}catch(l){a.e(l)}finally{a.f()}return JF(i,r)})}(i,s,n);return new Jp(r,a)}if(i.shouldAttach(s.value)){var o=i.retrieve(s.value);if(null!==o){var u=o.route;return E5(s,u),u}}var l=function(i){return new pE(new Gh(i.url),new Gh(i.params),new Gh(i.queryParams),new Gh(i.fragment),new Gh(i.data),i.outlet,i.component,i)}(s.value),f=s.children.map(function(m){return JF(i,m)});return new Jp(l,f)}function E5(i,s){if(i.value.routeConfig!==s.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==s.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");s.value._futureSnapshot=i.value;for(var n=0;n<i.children.length;++n)E5(i.children[n],s.children[n])}function xee(i,s,n,r,a){if(0===n.length)return kB(s.root,s.root,s,r,a);var o=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new C5(!0,0,i);var s=0,n=!1,r=i.reduce(function(a,o,u){if("object"==typeof o&&null!=o){if(o.outlets){var l={};return cl(o.outlets,function(f,m){l[m]="string"==typeof f?f.split("/"):f}),[].concat((0,Kr.Z)(a),[{outlets:l}])}if(o.segmentPath)return[].concat((0,Kr.Z)(a),[o.segmentPath])}return"string"!=typeof o?[].concat((0,Kr.Z)(a),[o]):0===u?(o.split("/").forEach(function(f,m){0==m&&"."===f||(0==m&&""===f?n=!0:".."===f?s++:""!=f&&a.push(f))}),a):[].concat((0,Kr.Z)(a),[o])},[]);return new C5(n,s,r)}(n);if(o.toRoot())return kB(s.root,new ta([],{}),s,r,a);var u=function(i,s,n){if(i.isAbsolute)return new CB(s.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new CB(r,r===s.root,0)}var o=eR(i.commands[0])?0:1;return function(i,s,n){for(var r=i,a=s,o=n;o>a;){if(o-=a,!(r=r.parent))throw new Error("Invalid number of '../'");a=r.segments.length}return new CB(r,!1,a-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+o,i.numberOfDoubleDots)}(o,s,i),l=u.processChildren?tR(u.segmentGroup,u.index,o.commands):D5(u.segmentGroup,u.index,o.commands);return kB(u.segmentGroup,l,s,r,a)}function eR(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function ST(i){return"object"==typeof i&&null!=i&&i.outlets}function kB(i,s,n,r,a){var o={};return r&&cl(r,function(u,l){o[l]=Array.isArray(u)?u.map(function(f){return"".concat(f)}):"".concat(u)}),new q_(n.root===i?s:k5(n.root,i,s),o,a)}function k5(i,s,n){var r={};return cl(i.children,function(a,o){r[o]=a===s?n:k5(a,s,n)}),new ta(i.segments,r)}var C5=function(){function i(s,n,r){if((0,M.Z)(this,i),this.isAbsolute=s,this.numberOfDoubleDots=n,this.commands=r,s&&r.length>0&&eR(r[0]))throw new Error("Root segment cannot have matrix parameters");var a=r.find(ST);if(a&&a!==s5(r))throw new Error("{outlets:{}} has to be the last command")}return(0,R.Z)(i,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),i}(),CB=function i(s,n,r){(0,M.Z)(this,i),this.segmentGroup=s,this.processChildren=n,this.index=r};function D5(i,s,n){if(i||(i=new ta([],{})),0===i.segments.length&&i.hasChildren())return tR(i,s,n);var r=function(i,s,n){for(var r=0,a=s,o={match:!1,pathIndex:0,commandIndex:0};a<i.segments.length;){if(r>=n.length)return o;var u=i.segments[a],l=n[r];if(ST(l))break;var f="".concat(l),m=r<n.length-1?n[r+1]:null;if(a>0&&void 0===f)break;if(f&&m&&"object"==typeof m&&void 0===m.outlets){if(!A5(f,m,u))return o;r+=2}else{if(!A5(f,{},u))return o;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(i,s,n),a=n.slice(r.commandIndex);if(r.match&&r.pathIndex<i.segments.length){var o=new ta(i.segments.slice(0,r.pathIndex),{});return o.children[Yi]=new ta(i.segments.slice(r.pathIndex),i.children),tR(o,0,a)}return r.match&&0===a.length?new ta(i.segments,{}):r.match&&!i.hasChildren()?DB(i,s,n):r.match?tR(i,0,a):DB(i,s,n)}function tR(i,s,n){if(0===n.length)return new ta(i.segments,{});var r=function(i){return ST(i[0])?i[0].outlets:(0,vr.Z)({},Yi,i)}(n),a={};return cl(r,function(o,u){"string"==typeof o&&(o=[o]),null!==o&&(a[u]=D5(i.children[u],s,o))}),cl(i.children,function(o,u){void 0===r[u]&&(a[u]=o)}),new ta(i.segments,a)}function DB(i,s,n){for(var r=i.segments.slice(0,s),a=0;a<n.length;){var o=n[a];if(ST(o)){var u=Oee(o.outlets);return new ta(r,u)}if(0===a&&eR(n[0]))r.push(new kT(i.segments[s].path,S5(n[0]))),a++;else{var f=ST(o)?o.outlets[Yi]:"".concat(o),m=a<n.length-1?n[a+1]:null;f&&m&&eR(m)?(r.push(new kT(f,S5(m))),a+=2):(r.push(new kT(f,{})),a++)}}return new ta(r,{})}function Oee(i){var s={};return cl(i,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(s[r]=DB(new ta([],{}),0,n))}),s}function S5(i){var s={};return cl(i,function(n,r){return s[r]="".concat(n)}),s}function A5(i,s,n){return i==n.path&&Kd(s,n.parameters)}var Nee=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.routeReuseStrategy=s,this.futureState=n,this.currState=r,this.forwardEvent=a}return(0,R.Z)(i,[{key:"activate",value:function(n){var r=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,a,n),wB(this.futureState.root),this.activateChildRoutes(r,a,n)}},{key:"deactivateChildRoutes",value:function(n,r,a){var o=this,u=DT(r);n.children.forEach(function(l){var f=l.value.outlet;o.deactivateRoutes(l,u[f],a),delete u[f]}),cl(u,function(l,f){o.deactivateRouteAndItsChildren(l,a)})}},{key:"deactivateRoutes",value:function(n,r,a){var o=n.value,u=r?r.value:null;if(o===u)if(o.component){var l=a.getContext(o.outlet);l&&this.deactivateChildRoutes(n,r,l.children)}else this.deactivateChildRoutes(n,r,a);else u&&this.deactivateRouteAndItsChildren(r,a)}},{key:"deactivateRouteAndItsChildren",value:function(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}},{key:"detachAndStoreRouteSubtree",value:function(n,r){var a=r.getContext(n.value.outlet);if(a&&a.outlet){var o=a.outlet.detach(),u=a.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:o,route:n,contexts:u})}}},{key:"deactivateRouteAndOutlet",value:function(n,r){for(var a=r.getContext(n.value.outlet),o=a&&n.value.component?a.children:r,u=DT(n),l=0,f=Object.keys(u);l<f.length;l++)this.deactivateRouteAndItsChildren(u[f[l]],o);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}},{key:"activateChildRoutes",value:function(n,r,a){var o=this,u=DT(r);n.children.forEach(function(l){o.activateRoutes(l,u[l.value.outlet],a),o.forwardEvent(new ree(l.value.snapshot))}),n.children.length&&this.forwardEvent(new tee(n.value.snapshot))}},{key:"activateRoutes",value:function(n,r,a){var o=n.value,u=r?r.value:null;if(wB(o),o===u)if(o.component){var l=a.getOrCreateContext(o.outlet);this.activateChildRoutes(n,r,l.children)}else this.activateChildRoutes(n,r,a);else if(o.component){var f=a.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){var m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),f.children.onOutletReAttached(m.contexts),f.attachRef=m.componentRef,f.route=m.route.value,f.outlet&&f.outlet.attach(m.componentRef,m.route.value),T5(m.route)}else{var b=function(i){for(var s=i.parent;s;s=s.parent){var n=s.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(o.snapshot),w=b?b.module.componentFactoryResolver:null;f.attachRef=null,f.route=o,f.resolver=w,f.outlet&&f.outlet.activateWith(o,w),this.activateChildRoutes(n,null,f.children)}}else this.activateChildRoutes(n,null,a)}}]),i}();function T5(i){wB(i.value),i.children.forEach(T5)}var SB=function i(s,n){(0,M.Z)(this,i),this.routes=s,this.module=n};function ag(i){return"function"==typeof i}function K_(i){return i instanceof q_}var AT=Symbol("INITIAL_VALUE");function TT(){return Uo(function(i){return function(){for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];var r=void 0,a=void 0;return(0,O0.K)(s[s.length-1])&&(a=s.pop()),"function"==typeof s[s.length-1]&&(r=s.pop()),1===s.length&&(0,fA.k)(s[0])&&(s=s[0]),(0,BJ.n)(s,a).lift(new VJ(r))}(i.map(function(s){return s.pipe(Sc(1),rl(AT))})).pipe(Dv(function(s,n){var r=!1;return n.reduce(function(a,o,u){return a!==AT?a:(o===AT&&(r=!0),r||!1!==o&&u!==n.length-1&&!K_(o)?a:o)},s)},AT),Za(function(s){return s!==AT}),(0,Tr.U)(function(s){return K_(s)?s:!0===s}),Sc(1))})}var x5=function(){var i=function s(){(0,M.Z)(this,s)};return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&v._UZ(0,"router-outlet")},directives:function(){return[PB]},encapsulation:2}),i}();function M5(i){for(var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<i.length;n++){var r=i[n],a=jee(s,r);Gee(r,a)}}function Gee(i,s){i.children&&M5(i.children,s)}function jee(i,s){return s?i||s.path?i&&!s.path?"".concat(i,"/"):!i&&s.path?s.path:"".concat(i,"/").concat(s.path):"":i}function AB(i){var s=i.children&&i.children.map(AB),n=s?Object.assign(Object.assign({},i),{children:s}):Object.assign({},i);return!n.component&&(s||n.loadChildren)&&n.outlet&&n.outlet!==Yi&&(n.component=x5),n}function jh(i){return i.outlet||Yi}function I5(i,s){var n=i.filter(function(r){return jh(r)===s});return n.push.apply(n,(0,Kr.Z)(i.filter(function(r){return jh(r)!==s}))),n}var P5={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function nR(i,s,n){var r;if(""===s.path)return"full"===s.pathMatch&&(i.hasChildren()||n.length>0)?Object.assign({},P5):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var o=(s.matcher||see)(n,i,s);if(!o)return Object.assign({},P5);var u={};cl(o.posParams,function(f,m){u[m]=f.path});var l=o.consumed.length>0?Object.assign(Object.assign({},u),o.consumed[o.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:l,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function rR(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&Yee(i,n,r)){var o=new ta(s,qee(i,s,r,new ta(n,i.children)));return o._sourceSegment=i,o._segmentIndexShift=s.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&Kee(i,n,r)){var u=new ta(i.segments,Wee(i,s,n,r,i.children,a));return u._sourceSegment=i,u._segmentIndexShift=s.length,{segmentGroup:u,slicedSegments:n}}var l=new ta(i.segments,i.children);return l._sourceSegment=i,l._segmentIndexShift=s.length,{segmentGroup:l,slicedSegments:n}}function Wee(i,s,n,r,a,o){var f,u={},l=(0,Ve.Z)(r);try{for(l.s();!(f=l.n()).done;){var m=f.value;if(iR(i,n,m)&&!a[jh(m)]){var b=new ta([],{});b._sourceSegment=i,b._segmentIndexShift="legacy"===o?i.segments.length:s.length,u[jh(m)]=b}}}catch(w){l.e(w)}finally{l.f()}return Object.assign(Object.assign({},a),u)}function qee(i,s,n,r){var a={};a[Yi]=r,r._sourceSegment=i,r._segmentIndexShift=s.length;var u,o=(0,Ve.Z)(n);try{for(o.s();!(u=o.n()).done;){var l=u.value;if(""===l.path&&jh(l)!==Yi){var f=new ta([],{});f._sourceSegment=i,f._segmentIndexShift=s.length,a[jh(l)]=f}}}catch(m){o.e(m)}finally{o.f()}return a}function Yee(i,s,n){return n.some(function(r){return iR(i,s,r)&&jh(r)!==Yi})}function Kee(i,s,n){return n.some(function(r){return iR(i,s,r)})}function iR(i,s,n){return(!(i.hasChildren()||s.length>0)||"full"!==n.pathMatch)&&""===n.path}function F5(i,s,n,r){return!!(jh(i)===r||r!==Yi&&iR(s,n,i))&&("**"===i.path||nR(s,i,n).matched)}function R5(i,s,n){return 0===s.length&&!i.children[n]}var xT=function i(s){(0,M.Z)(this,i),this.segmentGroup=s||null},O5=function i(s){(0,M.Z)(this,i),this.urlTree=s};function aR(i){return new ro.y(function(s){return s.error(new xT(i))})}function L5(i){return new ro.y(function(s){return s.error(new O5(i))})}function $ee(i){return new ro.y(function(s){return s.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(i,"'")))})}var Jee=function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.configLoader=n,this.urlSerializer=r,this.urlTree=a,this.config=o,this.allowRedirects=!0,this.ngModule=s.get(v.h0i)}return(0,R.Z)(i,[{key:"apply",value:function(){var n=this,r=rR(this.urlTree.root,[],[],this.config).segmentGroup,a=new ta(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,a,Yi).pipe((0,Tr.U)(function(l){return n.createUrlTree(TB(l),n.urlTree.queryParams,n.urlTree.fragment)})).pipe(ig(function(l){if(l instanceof O5)return n.allowRedirects=!1,n.match(l.urlTree);throw l instanceof xT?n.noMatchError(l):l}))}},{key:"match",value:function(n){var r=this;return this.expandSegmentGroup(this.ngModule,this.config,n.root,Yi).pipe((0,Tr.U)(function(u){return r.createUrlTree(TB(u),n.queryParams,n.fragment)})).pipe(ig(function(u){throw u instanceof xT?r.noMatchError(u):u}))}},{key:"noMatchError",value:function(n){return new Error("Cannot match any routes. URL Segment: '".concat(n.segmentGroup,"'"))}},{key:"createUrlTree",value:function(n,r,a){var o=n.segments.length>0?new ta([],(0,vr.Z)({},Yi,n)):n;return new q_(o,r,a)}},{key:"expandSegmentGroup",value:function(n,r,a,o){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(n,r,a).pipe((0,Tr.U)(function(u){return new ta([],u)})):this.expandSegment(n,a,r,a.segments,o,!0)}},{key:"expandChildren",value:function(n,r,a){for(var o=this,u=[],l=0,f=Object.keys(a.children);l<f.length;l++){var m=f[l];"primary"===m?u.unshift(m):u.push(m)}return(0,Ws.D)(u).pipe(Bd(function(b){var w=a.children[b],C=I5(r,b);return o.expandSegmentGroup(n,C,w,b).pipe((0,Tr.U)(function(T){return{segment:T,outlet:b}}))}),Dv(function(b,w){return b[w.outlet]=w.segment,b},{}),function(i,s){var n=arguments.length>=2;return function(r){return r.pipe(i?Za(function(a,o){return i(a,o,r)}):Mw.y,dB(1),n?D2(s):Bp(function(){return new xw}))}}())}},{key:"expandSegment",value:function(n,r,a,o,u,l){var f=this;return(0,Ws.D)(a).pipe(Bd(function(m){return f.expandSegmentAgainstRoute(n,r,a,m,o,u,l).pipe(ig(function(w){if(w instanceof xT)return(0,wr.of)(null);throw w}))}),Nd(function(m){return!!m}),ig(function(m,b){if(m instanceof xw||"EmptyError"===m.name){if(R5(r,o,u))return(0,wr.of)(new ta([],{}));throw new xT(r)}throw m}))}},{key:"expandSegmentAgainstRoute",value:function(n,r,a,o,u,l,f){return F5(o,r,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,r,o,u,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,a,o,u,l):aR(r):aR(r)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(n,r,a,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,a,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,o,u,l)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(n,r,a,o){var u=this,l=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?L5(l):this.lineralizeSegments(a,l).pipe((0,ol.zg)(function(f){var m=new ta(f,{});return u.expandSegment(n,m,r,f,o,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(n,r,a,o,u,l){var f=this,m=nR(r,o,u),w=m.consumedSegments,C=m.lastChild,T=m.positionalParamSegments;if(!m.matched)return aR(r);var I=this.applyRedirectCommands(w,o.redirectTo,T);return o.redirectTo.startsWith("/")?L5(I):this.lineralizeSegments(o,I).pipe((0,ol.zg)(function(Z){return f.expandSegment(n,r,a,Z.concat(u.slice(C)),l,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(n,r,a,o,u){var l=this;if("**"===a.path)return a.loadChildren?(a._loadedConfig?(0,wr.of)(a._loadedConfig):this.configLoader.load(n.injector,a)).pipe((0,Tr.U)(function(Z){return a._loadedConfig=Z,new ta(o,{})})):(0,wr.of)(new ta(o,{}));var m=nR(r,a,o),w=m.consumedSegments,C=m.lastChild;if(!m.matched)return aR(r);var T=o.slice(C);return this.getChildConfig(n,a,o).pipe((0,ol.zg)(function(Z){var Y=Z.module,V=Z.routes,W=rR(r,w,T,V),se=W.segmentGroup,fe=W.slicedSegments,ve=new ta(se.segments,se.children);if(0===fe.length&&ve.hasChildren())return l.expandChildren(Y,V,ve).pipe((0,Tr.U)(function(je){return new ta(w,je)}));if(0===V.length&&0===fe.length)return(0,wr.of)(new ta(w,{}));var pe=jh(a)===u;return l.expandSegment(Y,ve,V,fe,pe?Yi:u,!0).pipe((0,Tr.U)(function(je){return new ta(w.concat(je.segments),je.children)}))}))}},{key:"getChildConfig",value:function(n,r,a){var o=this;return r.children?(0,wr.of)(new SB(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,wr.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,a).pipe((0,ol.zg)(function(u){return u?o.configLoader.load(n.injector,r).pipe((0,Tr.U)(function(l){return r._loadedConfig=l,l})):function(i){return new ro.y(function(s){return s.error(vB("Cannot load children because the guard of the route \"path: '".concat(i.path,"'\" returned false")))})}(r)})):(0,wr.of)(new SB([],n))}},{key:"runCanLoadGuards",value:function(n,r,a){var o=this,u=r.canLoad;if(!u||0===u.length)return(0,wr.of)(!0);var l=u.map(function(f){var b,m=n.get(f);if(function(i){return i&&ag(i.canLoad)}(m))b=m.canLoad(r,a);else{if(!ag(m))throw new Error("Invalid CanLoad guard");b=m(r,a)}return $d(b)});return(0,wr.of)(l).pipe(TT(),(0,ll.b)(function(f){if(K_(f)){var m=vB('Redirecting to "'.concat(o.urlSerializer.serialize(f),'"'));throw m.url=f,m}}),(0,Tr.U)(function(f){return!0===f}))}},{key:"lineralizeSegments",value:function(n,r){for(var a=[],o=r.root;;){if(a=a.concat(o.segments),0===o.numberOfChildren)return(0,wr.of)(a);if(o.numberOfChildren>1||!o.children[Yi])return $ee(n.redirectTo);o=o.children[Yi]}}},{key:"applyRedirectCommands",value:function(n,r,a){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,a)}},{key:"applyRedirectCreatreUrlTree",value:function(n,r,a,o){var u=this.createSegmentGroup(n,r.root,a,o);return new q_(u,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}},{key:"createQueryParams",value:function(n,r){var a={};return cl(n,function(o,u){if("string"==typeof o&&o.startsWith(":")){var f=o.substring(1);a[u]=r[f]}else a[u]=o}),a}},{key:"createSegmentGroup",value:function(n,r,a,o){var u=this,l=this.createSegments(n,r.segments,a,o),f={};return cl(r.children,function(m,b){f[b]=u.createSegmentGroup(n,m,a,o)}),new ta(l,f)}},{key:"createSegments",value:function(n,r,a,o){var u=this;return r.map(function(l){return l.path.startsWith(":")?u.findPosParam(n,l,o):u.findOrReturn(l,a)})}},{key:"findPosParam",value:function(n,r,a){var o=a[r.path.substring(1)];if(!o)throw new Error("Cannot redirect to '".concat(n,"'. Cannot find '").concat(r.path,"'."));return o}},{key:"findOrReturn",value:function(n,r){var u,a=0,o=(0,Ve.Z)(r);try{for(o.s();!(u=o.n()).done;){var l=u.value;if(l.path===n.path)return r.splice(a),l;a++}}catch(f){o.e(f)}finally{o.f()}return n}}]),i}();function TB(i){for(var s={},n=0,r=Object.keys(i.children);n<r.length;n++){var a=r[n],u=TB(i.children[a]);(u.segments.length>0||u.hasChildren())&&(s[a]=u)}return function(i){if(1===i.numberOfChildren&&i.children[Yi]){var s=i.children[Yi];return new ta(i.segments.concat(s.segments),s.children)}return i}(new ta(i.segments,s))}var N5=function i(s){(0,M.Z)(this,i),this.path=s,this.route=this.path[this.path.length-1]},sR=function i(s,n){(0,M.Z)(this,i),this.component=s,this.route=n};function nte(i,s,n){var r=i._root;return MT(r,s?s._root:null,n,[r.value])}function oR(i,s,n){var r=function(i){if(!i)return null;for(var s=i.parent;s;s=s.parent){var n=s.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(s);return(r?r.module.injector:n).get(i)}function MT(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=DT(s);return i.children.forEach(function(u){ate(u,o[u.value.outlet],n,r.concat([u.value]),a),delete o[u.value.outlet]}),cl(o,function(u,l){return IT(u,n.getContext(l),a)}),a}function ate(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=i.value,u=s?s.value:null,l=n?n.getContext(i.value.outlet):null;if(u&&o.routeConfig===u.routeConfig){var f=ste(u,o,o.routeConfig.runGuardsAndResolvers);f?a.canActivateChecks.push(new N5(r)):(o.data=u.data,o._resolvedData=u._resolvedData),MT(i,s,o.component?l?l.children:null:n,r,a),f&&l&&l.outlet&&l.outlet.isActivated&&a.canDeactivateChecks.push(new sR(l.outlet.component,u))}else u&&IT(s,l,a),a.canActivateChecks.push(new N5(r)),MT(i,null,o.component?l?l.children:null:n,r,a);return a}function ste(i,s,n){if("function"==typeof n)return n(i,s);switch(n){case"pathParamsChange":return!Y_(i.url,s.url);case"pathParamsOrQueryParamsChange":return!Y_(i.url,s.url)||!Kd(i.queryParams,s.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!EB(i,s)||!Kd(i.queryParams,s.queryParams);case"paramsChange":default:return!EB(i,s)}}function IT(i,s,n){var r=DT(i),a=i.value;cl(r,function(o,u){IT(o,a.component?s?s.children.getContext(u):null:s,n)}),n.canDeactivateChecks.push(new sR(a.component&&s&&s.outlet&&s.outlet.isActivated?s.outlet.component:null,a))}var vte=function i(){(0,M.Z)(this,i)};function Z5(i){return new ro.y(function(s){return s.error(i)})}var gte=function(){function i(s,n,r,a,o,u){(0,M.Z)(this,i),this.rootComponentType=s,this.config=n,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=u}return(0,R.Z)(i,[{key:"recognize",value:function(){var n=rR(this.urlTree.root,[],[],this.config.filter(function(l){return void 0===l.redirectTo}),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,Yi);if(null===r)return null;var a=new QF([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yi,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Jp(a,r),u=new b5(this.url,o);return this.inheritParamsAndData(u._root),u}},{key:"inheritParamsAndData",value:function(n){var r=this,a=n.value,o=_5(a,this.paramsInheritanceStrategy);a.params=Object.freeze(o.params),a.data=Object.freeze(o.data),n.children.forEach(function(u){return r.inheritParamsAndData(u)})}},{key:"processSegmentGroup",value:function(n,r,a){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,a)}},{key:"processChildren",value:function(n,r){for(var a=[],o=0,u=Object.keys(r.children);o<u.length;o++){var l=u[o],f=r.children[l],m=I5(n,l),b=this.processSegmentGroup(m,f,l);if(null===b)return null;a.push.apply(a,(0,Kr.Z)(b))}var w=B5(a);return function(i){i.sort(function(s,n){return s.value.outlet===Yi?-1:n.value.outlet===Yi?1:s.value.outlet.localeCompare(n.value.outlet)})}(w),w}},{key:"processSegment",value:function(n,r,a,o){var l,u=(0,Ve.Z)(n);try{for(u.s();!(l=u.n()).done;){var m=this.processSegmentAgainstRoute(l.value,r,a,o);if(null!==m)return m}}catch(b){u.e(b)}finally{u.f()}return R5(r,a,o)?[]:null}},{key:"processSegmentAgainstRoute",value:function(n,r,a,o){if(n.redirectTo||!F5(n,r,a,o))return null;var u,l=[],f=[];if("**"===n.path){var m=a.length>0?s5(a).parameters:{};u=new QF(a,m,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,z5(n),jh(n),n.component,n,U5(r),V5(r)+a.length,H5(n))}else{var b=nR(r,n,a);if(!b.matched)return null;l=b.consumedSegments,f=a.slice(b.lastChild),u=new QF(l,b.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,z5(n),jh(n),n.component,n,U5(r),V5(r)+l.length,H5(n))}var w=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(n),C=rR(r,l,f,w.filter(function(W){return void 0===W.redirectTo}),this.relativeLinkResolution),T=C.segmentGroup,I=C.slicedSegments;if(0===I.length&&T.hasChildren()){var Z=this.processChildren(w,T);return null===Z?null:[new Jp(u,Z)]}if(0===w.length&&0===I.length)return[new Jp(u,[])];var Y=jh(n)===o,V=this.processSegment(w,T,I,Y?Yi:o);return null===V?null:[new Jp(u,V)]}}]),i}();function B5(i){var a,s=[],n=new Set,r=(0,Ve.Z)(i);try{var o=function(){var C=a.value;if(!function(i){var s=i.value.routeConfig;return s&&""===s.path&&void 0===s.redirectTo}(C))return s.push(C),"continue";var I,T=s.find(function(Z){return C.value.routeConfig===Z.value.routeConfig});void 0!==T?((I=T.children).push.apply(I,(0,Kr.Z)(C.children)),n.add(T)):s.push(C)};for(r.s();!(a=r.n()).done;)o()}catch(w){r.e(w)}finally{r.f()}var f,l=(0,Ve.Z)(n);try{for(l.s();!(f=l.n()).done;){var m=f.value,b=B5(m.children);s.push(new Jp(m.value,b))}}catch(w){l.e(w)}finally{l.f()}return s.filter(function(w){return!n.has(w)})}function U5(i){for(var s=i;s._sourceSegment;)s=s._sourceSegment;return s}function V5(i){for(var s=i,n=s._segmentIndexShift?s._segmentIndexShift:0;s._sourceSegment;)n+=(s=s._sourceSegment)._segmentIndexShift?s._segmentIndexShift:0;return n-1}function z5(i){return i.data||{}}function H5(i){return i.resolve||{}}function xB(i){return Uo(function(s){var n=i(s);return n?(0,Ws.D)(n).pipe((0,Tr.U)(function(){return s})):(0,wr.of)(s)})}var Tte=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"shouldDetach",value:function(n){return!1}},{key:"store",value:function(n,r){}},{key:"shouldAttach",value:function(n){return!1}},{key:"retrieve",value:function(n){return null}},{key:"shouldReuseRoute",value:function(n,r){return n.routeConfig===r.routeConfig}}]),i}()),MB=new v.OlP("ROUTES"),G5=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.loader=s,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=a}return(0,R.Z)(i,[{key:"load",value:function(n,r){var a=this;if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);var u=this.loadModuleFactory(r.loadChildren).pipe((0,Tr.U)(function(l){a.onLoadEndListener&&a.onLoadEndListener(r);var f=l.create(n);return new SB(a5(f.injector.get(MB,void 0,v.XFs.Self|v.XFs.Optional)).map(AB),f)}),ig(function(l){throw r._loader$=void 0,l}));return r._loader$=new HJ.c(u,function(){return new jr.xQ}).pipe((0,qJ.x)()),r._loader$}},{key:"loadModuleFactory",value:function(n){var r=this;return"string"==typeof n?(0,Ws.D)(this.loader.load(n)):$d(n()).pipe((0,ol.zg)(function(a){return a instanceof v.YKP?(0,wr.of)(a):(0,Ws.D)(r.compiler.compileModuleAsync(a))}))}}]),i}(),xte=function i(){(0,M.Z)(this,i),this.outlet=null,this.route=null,this.resolver=null,this.children=new vE,this.attachRef=null},vE=function(){function i(){(0,M.Z)(this,i),this.contexts=new Map}return(0,R.Z)(i,[{key:"onChildOutletCreated",value:function(n,r){var a=this.getOrCreateContext(n);a.outlet=r,this.contexts.set(n,a)}},{key:"onChildOutletDestroyed",value:function(n){var r=this.getContext(n);r&&(r.outlet=null)}},{key:"onOutletDeactivated",value:function(){var n=this.contexts;return this.contexts=new Map,n}},{key:"onOutletReAttached",value:function(n){this.contexts=n}},{key:"getOrCreateContext",value:function(n){var r=this.getContext(n);return r||(r=new xte,this.contexts.set(n,r)),r}},{key:"getContext",value:function(n){return this.contexts.get(n)||null}}]),i}(),Ite=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"shouldProcessUrl",value:function(n){return!0}},{key:"extract",value:function(n){return n}},{key:"merge",value:function(n,r){return n}}]),i}();function Pte(i){throw i}function Fte(i,s,n){return s.parse("/")}function j5(i,s){return(0,wr.of)(null)}var Rte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ote={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pl=function(){var i=function(){function s(n,r,a,o,u,l,f,m){var b=this;(0,M.Z)(this,s),this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=a,this.location=o,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new jr.xQ,this.errorHandler=Pte,this.malformedUriErrorHandler=Fte,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:j5,afterPreactivation:j5},this.urlHandlingStrategy=new Ite,this.routeReuseStrategy=new Tte,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(v.h0i),this.console=u.get(v.c2e);var T=u.get(v.R0b);this.isNgZoneEnabled=T instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=new q_(new ta([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new G5(l,f,function(Z){return b.triggerEvent(new e5(Z))},function(Z){return b.triggerEvent(new t5(Z))}),this.routerState=y5(this.currentUrlTree,this.rootComponentType),this.transitions=new Gh({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return(0,R.Z)(s,[{key:"browserPageId",get:function(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}},{key:"setupNavigations",value:function(r){var a=this,o=this.events;return r.pipe(Za(function(u){return 0!==u.id}),(0,Tr.U)(function(u){return Object.assign(Object.assign({},u),{extractedUrl:a.urlHandlingStrategy.extract(u.rawUrl)})}),Uo(function(u){var l=!1,f=!1;return(0,wr.of)(u).pipe((0,ll.b)(function(m){a.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:a.lastSuccessfulNavigation?Object.assign(Object.assign({},a.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Uo(function(m){var b=a.browserUrlTree.toString(),w=!a.navigated||m.extractedUrl.toString()!==b||b!==a.currentUrlTree.toString();if(("reload"===a.onSameUrlNavigation||w)&&a.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return uR(m.source)&&(a.browserUrlTree=m.extractedUrl),(0,wr.of)(m).pipe(Uo(function(ve){var me=a.transitions.getValue();return o.next(new pB(ve.id,a.serializeUrl(ve.extractedUrl),ve.source,ve.restoredState)),me!==a.transitions.getValue()?Df.E:Promise.resolve(ve)}),function(i,s,n,r){return Uo(function(a){return function(i,s,n,r,a){return new Jee(i,s,n,r,a).apply()}(i,s,n,a.extractedUrl,r).pipe((0,Tr.U)(function(o){return Object.assign(Object.assign({},a),{urlAfterRedirects:o})}))})}(a.ngModule.injector,a.configLoader,a.urlSerializer,a.config),(0,ll.b)(function(ve){a.currentNavigation=Object.assign(Object.assign({},a.currentNavigation),{finalUrl:ve.urlAfterRedirects})}),function(i,s,n,r,a){return(0,ol.zg)(function(o){return function(i,s,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var u=new gte(i,s,n,r,a,o).recognize();return null===u?Z5(new vte):(0,wr.of)(u)}catch(l){return Z5(l)}}(i,s,o.urlAfterRedirects,n(o.urlAfterRedirects),r,a).pipe((0,Tr.U)(function(u){return Object.assign(Object.assign({},o),{targetSnapshot:u})}))})}(a.rootComponentType,a.config,function(ve){return a.serializeUrl(ve)},a.paramsInheritanceStrategy,a.relativeLinkResolution),(0,ll.b)(function(ve){"eager"===a.urlUpdateStrategy&&(ve.extras.skipLocationChange||a.setBrowserUrl(ve.urlAfterRedirects,ve),a.browserUrlTree=ve.urlAfterRedirects);var me=new KJ(ve.id,a.serializeUrl(ve.extractedUrl),a.serializeUrl(ve.urlAfterRedirects),ve.targetSnapshot);o.next(me)}));if(w&&a.rawUrlTree&&a.urlHandlingStrategy.shouldProcessUrl(a.rawUrlTree)){var Z=m.extractedUrl,Y=m.source,V=m.restoredState,W=m.extras,se=new pB(m.id,a.serializeUrl(Z),Y,V);o.next(se);var fe=y5(Z,a.rootComponentType).snapshot;return(0,wr.of)(Object.assign(Object.assign({},m),{targetSnapshot:fe,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},W),{skipLocationChange:!1,replaceUrl:!1})}))}return a.rawUrlTree=m.rawUrl,a.browserUrlTree=m.urlAfterRedirects,m.resolve(null),Df.E}),xB(function(m){var I=m.extras;return a.hooks.beforePreactivation(m.targetSnapshot,{navigationId:m.id,appliedUrlTree:m.extractedUrl,rawUrlTree:m.rawUrl,skipLocationChange:!!I.skipLocationChange,replaceUrl:!!I.replaceUrl})}),(0,ll.b)(function(m){var b=new $J(m.id,a.serializeUrl(m.extractedUrl),a.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);a.triggerEvent(b)}),(0,Tr.U)(function(m){return Object.assign(Object.assign({},m),{guards:nte(m.targetSnapshot,m.currentSnapshot,a.rootContexts)})}),function(i,s){return(0,ol.zg)(function(n){var r=n.targetSnapshot,a=n.currentSnapshot,o=n.guards,u=o.canActivateChecks,l=o.canDeactivateChecks;return 0===l.length&&0===u.length?(0,wr.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(i,s,n,r){return(0,Ws.D)(i).pipe((0,ol.zg)(function(a){return function(i,s,n,r,a){var o=s&&s.routeConfig?s.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,wr.of)(!0);var u=o.map(function(l){var m,f=oR(l,s,a);if(function(i){return i&&ag(i.canDeactivate)}(f))m=$d(f.canDeactivate(i,s,n,r));else{if(!ag(f))throw new Error("Invalid CanDeactivate guard");m=$d(f(i,s,n,r))}return m.pipe(Nd())});return(0,wr.of)(u).pipe(TT())}(a.component,a.route,n,s,r)}),Nd(function(a){return!0!==a},!0))}(l,r,a,i).pipe((0,ol.zg)(function(f){return f&&function(i){return"boolean"==typeof i}(f)?function(i,s,n,r){return(0,Ws.D)(s).pipe(Bd(function(a){return Pk(function(i,s){return null!==i&&s&&s(new eee(i)),(0,wr.of)(!0)}(a.route.parent,r),function(i,s){return null!==i&&s&&s(new nee(i)),(0,wr.of)(!0)}(a.route,r),function(i,s,n){var r=s[s.length-1],o=s.slice(0,s.length-1).reverse().map(function(u){return function(i){var s=i.routeConfig?i.routeConfig.canActivateChild:null;return s&&0!==s.length?{node:i,guards:s}:null}(u)}).filter(function(u){return null!==u}).map(function(u){return QG(function(){var l=u.guards.map(function(f){var b,m=oR(f,u.node,n);if(function(i){return i&&ag(i.canActivateChild)}(m))b=$d(m.canActivateChild(r,i));else{if(!ag(m))throw new Error("Invalid CanActivateChild guard");b=$d(m(r,i))}return b.pipe(Nd())});return(0,wr.of)(l).pipe(TT())})});return(0,wr.of)(o).pipe(TT())}(i,a.path,n),function(i,s,n){var r=s.routeConfig?s.routeConfig.canActivate:null;if(!r||0===r.length)return(0,wr.of)(!0);var a=r.map(function(o){return QG(function(){var l,u=oR(o,s,n);if(function(i){return i&&ag(i.canActivate)}(u))l=$d(u.canActivate(s,i));else{if(!ag(u))throw new Error("Invalid CanActivate guard");l=$d(u(s,i))}return l.pipe(Nd())})});return(0,wr.of)(a).pipe(TT())}(i,a.route,n))}),Nd(function(a){return!0!==a},!0))}(r,u,i,s):(0,wr.of)(f)}),(0,Tr.U)(function(f){return Object.assign(Object.assign({},n),{guardsResult:f})}))})}(a.ngModule.injector,function(m){return a.triggerEvent(m)}),(0,ll.b)(function(m){if(K_(m.guardsResult)){var b=vB('Redirecting to "'.concat(a.serializeUrl(m.guardsResult),'"'));throw b.url=m.guardsResult,b}var w=new XJ(m.id,a.serializeUrl(m.extractedUrl),a.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);a.triggerEvent(w)}),Za(function(m){return!!m.guardsResult||(a.restoreHistory(m),a.cancelNavigationTransition(m,""),!1)}),xB(function(m){if(m.guards.canActivateChecks.length)return(0,wr.of)(m).pipe((0,ll.b)(function(b){var w=new QJ(b.id,a.serializeUrl(b.extractedUrl),a.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);a.triggerEvent(w)}),Uo(function(b){var w=!1;return(0,wr.of)(b).pipe(function(i,s){return(0,ol.zg)(function(n){var r=n.targetSnapshot,a=n.guards.canActivateChecks;if(!a.length)return(0,wr.of)(n);var o=0;return(0,Ws.D)(a).pipe(Bd(function(u){return function(i,s,n,r){return function(i,s,n,r){var a=Object.keys(i);if(0===a.length)return(0,wr.of)({});var o={};return(0,Ws.D)(a).pipe((0,ol.zg)(function(u){return function(i,s,n,r){var a=oR(i,s,r);return $d(a.resolve?a.resolve(s,n):a(s,n))}(i[u],s,n,r).pipe((0,ll.b)(function(l){o[u]=l}))}),dB(1),(0,ol.zg)(function(){return Object.keys(o).length===a.length?(0,wr.of)(o):Df.E}))}(i._resolve,i,s,r).pipe((0,Tr.U)(function(o){return i._resolvedData=o,i.data=Object.assign(Object.assign({},i.data),_5(i,n).resolve),null}))}(u.route,r,i,s)}),(0,ll.b)(function(){return o++}),dB(1),(0,ol.zg)(function(u){return o===a.length?(0,wr.of)(n):Df.E}))})}(a.paramsInheritanceStrategy,a.ngModule.injector),(0,ll.b)({next:function(){return w=!0},complete:function(){w||(a.restoreHistory(b),a.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,ll.b)(function(b){var w=new JJ(b.id,a.serializeUrl(b.extractedUrl),a.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);a.triggerEvent(w)}))}),xB(function(m){var I=m.extras;return a.hooks.afterPreactivation(m.targetSnapshot,{navigationId:m.id,appliedUrlTree:m.extractedUrl,rawUrlTree:m.rawUrl,skipLocationChange:!!I.skipLocationChange,replaceUrl:!!I.replaceUrl})}),(0,Tr.U)(function(m){var b=function(i,s,n){var r=JF(i,s._root,n?n._root:void 0);return new g5(r,s)}(a.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:b})}),(0,ll.b)(function(m){a.currentUrlTree=m.urlAfterRedirects,a.rawUrlTree=a.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),a.routerState=m.targetRouterState,"deferred"===a.urlUpdateStrategy&&(m.extras.skipLocationChange||a.setBrowserUrl(a.rawUrlTree,m),a.browserUrlTree=m.urlAfterRedirects)}),function(s,n,r){return(0,Tr.U)(function(a){return new Nee(n,a.targetRouterState,a.currentRouterState,r).activate(s),a})}(a.rootContexts,a.routeReuseStrategy,function(m){return a.triggerEvent(m)}),(0,ll.b)({next:function(){l=!0},complete:function(){l=!0}}),MG(function(){if(!l&&!f){var m="Navigation ID ".concat(u.id," is not equal to the current navigation id ").concat(a.navigationId);"replace"===a.canceledNavigationResolution&&a.restoreHistory(u),a.cancelNavigationTransition(u,m)}a.currentNavigation=null}),ig(function(m){if(f=!0,function(i){return i&&i[r5]}(m)){var b=K_(m.url);b||(a.navigated=!0,a.restoreHistory(u,!0));var w=new JG(u.id,a.serializeUrl(u.extractedUrl),m.message);o.next(w),b?setTimeout(function(){var T=a.urlHandlingStrategy.merge(m.url,a.rawUrlTree),I={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===a.urlUpdateStrategy||uR(u.source)};a.scheduleNavigation(T,"imperative",null,I,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{a.restoreHistory(u,!0);var C=new YJ(u.id,a.serializeUrl(u.extractedUrl),m);o.next(C);try{u.resolve(a.errorHandler(m))}catch(T){u.reject(T)}}return Df.E}))}))}},{key:"resetRootComponentType",value:function(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}},{key:"setTransition",value:function(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var r=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(a){var o=r.extractLocationChangeInfoFromEvent(a);r.shouldScheduleNavigation(r.lastLocationChangeInfo,o)&&setTimeout(function(){var u=o.source,l=o.state,f=o.urlTree,m={replaceUrl:!0};if(l){var b=Object.assign({},l);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(m.state=b)}r.scheduleNavigation(f,u,l,m)},0),r.lastLocationChangeInfo=o}))}},{key:"extractLocationChangeInfoFromEvent",value:function(r){var a;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(a=r.state)||void 0===a?void 0:a.navigationId)?r.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(r,a){if(!r)return!0;var o=a.urlTree.toString()===r.urlTree.toString();return!(a.transitionId===r.transitionId&&o&&("hashchange"===a.source&&"popstate"===r.source||"popstate"===a.source&&"hashchange"===r.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(r){this.events.next(r)}},{key:"resetConfig",value:function(r){M5(r),this.config=r.map(AB),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.relativeTo,u=a.queryParams,l=a.fragment,f=a.queryParamsHandling,m=a.preserveFragment,b=o||this.routerState.root,w=m?this.currentUrlTree.fragment:l,C=null;switch(f){case"merge":C=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=u||null}return null!==C&&(C=this.removeEmptyProps(C)),xee(b,this.currentUrlTree,r,C,null!=w?w:null)}},{key:"navigateByUrl",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},o=K_(r)?r:this.parseUrl(r),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,a)}},{key:"navigate",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return Lte(r),this.navigateByUrl(this.createUrlTree(r,a),a)}},{key:"serializeUrl",value:function(r){return this.urlSerializer.serialize(r)}},{key:"parseUrl",value:function(r){var a;try{a=this.urlSerializer.parse(r)}catch(o){a=this.malformedUriErrorHandler(o,this.urlSerializer,r)}return a}},{key:"isActive",value:function(r,a){var o;if(o=!0===a?Object.assign({},Rte):!1===a?Object.assign({},Ote):a,K_(r))return u5(this.currentUrlTree,r,o);var u=this.parseUrl(r);return u5(this.currentUrlTree,u,o)}},{key:"removeEmptyProps",value:function(r){return Object.keys(r).reduce(function(a,o){var u=r[o];return null!=u&&(a[o]=u),a},{})}},{key:"processNavigations",value:function(){var r=this;this.navigations.subscribe(function(a){r.navigated=!0,r.lastSuccessfulId=a.id,r.currentPageId=a.targetPageId,r.events.next(new ET(a.id,r.serializeUrl(a.extractedUrl),r.serializeUrl(r.currentUrlTree))),r.lastSuccessfulNavigation=r.currentNavigation,a.resolve(!0)},function(a){r.console.warn("Unhandled Navigation Error: ".concat(a))})}},{key:"scheduleNavigation",value:function(r,a,o,u,l){var f,m;if(this.disposed)return Promise.resolve(!1);var Z,Y,V,b=this.getTransition(),w=uR(a)&&b&&!uR(b.source),I=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===r.toString();if(w&&I)return Promise.resolve(!0);l?(Z=l.resolve,Y=l.reject,V=l.promise):V=new Promise(function(ve,me){Z=ve,Y=me});var se,W=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),se=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):se=0,this.setTransition({id:W,targetPageId:se,source:a,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:u,resolve:Z,reject:Y,promise:V,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),V.catch(function(ve){return Promise.reject(ve)})}},{key:"setBrowserUrl",value:function(r,a){var o=this.urlSerializer.serialize(r),u=Object.assign(Object.assign({},a.extras.state),this.generateNgRouterState(a.id,a.targetPageId));this.location.isCurrentPathEqualTo(o)||a.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}},{key:"restoreHistory",value:function(r){var o,u,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var l=this.currentPageId-r.targetPageId,f="popstate"===r.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl);f&&0!==l?this.location.historyGo(l):this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===l&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(r),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(r,a){var o=new JG(r.id,this.serializeUrl(r.extractedUrl),a);this.triggerEvent(o),r.resolve(!1)}},{key:"generateNgRouterState",value:function(r,a){return"computed"===this.canceledNavigationResolution?{navigationId:r,"\u0275routerPageId":a}:{navigationId:r}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.DyG),v.LFG(mB),v.LFG(vE),v.LFG(Bt),v.LFG(v.zs3),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(void 0))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();function Lte(i){for(var s=0;s<i.length;s++){var n=i[s];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(s))}}function uR(i){return"imperative"!==i}var IB=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.router=n,this.route=r,this.commands=[],this.onChanges=new jr.xQ,null==a&&o.setAttribute(u.nativeElement,"tabindex","0")}return(0,R.Z)(s,[{key:"ngOnChanges",value:function(r){this.onChanges.next(this)}},{key:"routerLink",set:function(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}},{key:"onClick",value:function(){var r={skipLocationChange:mE(this.skipLocationChange),replaceUrl:mE(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:mE(this.preserveFragment)})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(Pl),v.Y36(pE),v.$8M("tabindex"),v.Y36(v.Qsj),v.Y36(v.SBq))},i.\u0275dir=v.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,r){1&n&&v.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[v.TTD]}),i}(),lR=function(){var i=function(){function s(n,r,a){var o=this;(0,M.Z)(this,s),this.router=n,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new jr.xQ,this.subscription=n.events.subscribe(function(u){u instanceof ET&&o.updateTargetUrlAndHref()})}return(0,R.Z)(s,[{key:"routerLink",set:function(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}},{key:"ngOnChanges",value:function(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(r,a,o,u,l){if(0!==r||a||o||u||l||"string"==typeof this.target&&"_self"!=this.target)return!0;var f={skipLocationChange:mE(this.skipLocationChange),replaceUrl:mE(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:mE(this.preserveFragment)})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(Pl),v.Y36(pE),v.Y36(mn))},i.\u0275dir=v.lG2({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,r){1&n&&v.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&n&&(v.Ikx("href",r.href,v.LSH),v.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[v.TTD]}),i}();function mE(i){return""===i||!!i}var W5=function(){var i=function(){function s(n,r,a,o,u,l){var f=this;(0,M.Z)(this,s),this.router=n,this.element=r,this.renderer=a,this.cdr=o,this.link=u,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=n.events.subscribe(function(m){m instanceof ET&&f.update()})}return(0,R.Z)(s,[{key:"ngAfterContentInit",value:function(){var r=this;(0,wr.of)(this.links.changes,this.linksWithHrefs.changes,(0,wr.of)(null)).pipe((0,R0.J)()).subscribe(function(a){r.update(),r.subscribeToEachLinkOnChanges()})}},{key:"subscribeToEachLinkOnChanges",value:function(){var a,r=this;null===(a=this.linkInputChangesSubscription)||void 0===a||a.unsubscribe();var o=[].concat((0,Kr.Z)(this.links.toArray()),(0,Kr.Z)(this.linksWithHrefs.toArray()),[this.link,this.linkWithHref]).filter(function(u){return!!u}).map(function(u){return u.onChanges});this.linkInputChangesSubscription=(0,Ws.D)(o).pipe((0,R0.J)()).subscribe(function(u){r.isActive!==r.isLinkActive(r.router)(u)&&r.update()})}},{key:"routerLinkActive",set:function(r){var a=Array.isArray(r)?r:r.split(" ");this.classes=a.filter(function(o){return!!o})}},{key:"ngOnChanges",value:function(r){this.update()}},{key:"ngOnDestroy",value:function(){var r;this.routerEventsSubscription.unsubscribe(),null===(r=this.linkInputChangesSubscription)||void 0===r||r.unsubscribe()}},{key:"update",value:function(){var r=this;!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(function(){var a=r.hasActiveLinks();r.isActive!==a&&(r.isActive=a,r.cdr.markForCheck(),r.classes.forEach(function(o){a?r.renderer.addClass(r.element.nativeElement,o):r.renderer.removeClass(r.element.nativeElement,o)}))})}},{key:"isLinkActive",value:function(r){var a=function(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return function(o){return r.isActive(o.urlTree,a)}}},{key:"hasActiveLinks",value:function(){var r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.linkWithHref&&r(this.linkWithHref)||this.links.some(r)||this.linksWithHrefs.some(r)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(Pl),v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.sBO),v.Y36(IB,8),v.Y36(lR,8))},i.\u0275dir=v.lG2({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,a){var o;1&n&&(v.Suo(a,IB,5),v.Suo(a,lR,5)),2&n&&(v.iGM(o=v.CRH())&&(r.links=o),v.iGM(o=v.CRH())&&(r.linksWithHrefs=o))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[v.TTD]}),i}(),PB=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.parentContexts=n,this.location=r,this.resolver=a,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.name=o||Yi,n.onChildOutletCreated(this.name,this)}return(0,R.Z)(s,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var r=this.activated;return this.activated=null,this._activatedRoute=null,r}},{key:"attach",value:function(r,a){this.activated=r,this._activatedRoute=a,this.location.insert(r.hostView)}},{key:"deactivate",value:function(){if(this.activated){var r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}},{key:"activateWith",value:function(r,a){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;var l=(a=a||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new Zte(r,f,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.Y36(vE),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},i.\u0275dir=v.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i}(),Zte=function(){function i(s,n,r){(0,M.Z)(this,i),this.route=s,this.childContexts=n,this.parent=r}return(0,R.Z)(i,[{key:"get",value:function(n,r){return n===pE?this.route:n===vE?this.childContexts:this.parent.get(n,r)}}]),i}(),q5=function i(){(0,M.Z)(this,i)},Bte=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"preload",value:function(n,r){return r().pipe(ig(function(){return(0,wr.of)(null)}))}}]),i}(),Y5=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"preload",value:function(n,r){return(0,wr.of)(null)}}]),i}(),K5=function(){var i=function(){function s(n,r,a,o,u){(0,M.Z)(this,s),this.router=n,this.injector=o,this.preloadingStrategy=u,this.loader=new G5(r,a,function(b){return n.triggerEvent(new e5(b))},function(b){return n.triggerEvent(new t5(b))})}return(0,R.Z)(s,[{key:"setUpPreloading",value:function(){var r=this;this.subscription=this.router.events.pipe(Za(function(a){return a instanceof ET}),Bd(function(){return r.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var r=this.injector.get(v.h0i);return this.processRoutes(r,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(r,a){var l,o=[],u=(0,Ve.Z)(a);try{for(u.s();!(l=u.n()).done;){var f=l.value;if(f.loadChildren&&!f.canLoad&&f._loadedConfig){var m=f._loadedConfig;o.push(this.processRoutes(m.module,m.routes))}else f.loadChildren&&!f.canLoad?o.push(this.preloadConfig(r,f)):f.children&&o.push(this.processRoutes(r,f.children))}}catch(b){u.e(b)}finally{u.f()}return(0,Ws.D)(o).pipe((0,R0.J)(),(0,Tr.U)(function(b){}))}},{key:"preloadConfig",value:function(r,a){var o=this;return this.preloadingStrategy.preload(a,function(){return(a._loadedConfig?(0,wr.of)(a._loadedConfig):o.loader.load(r.injector,a)).pipe((0,ol.zg)(function(l){return a._loadedConfig=l,o.processRoutes(l.module,l.routes)}))})}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Pl),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(q5))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),FB=function(){var i=function(){function s(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,M.Z)(this,s),this.router=n,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}return(0,R.Z)(s,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(a){a instanceof pB?(r.store[r.lastId]=r.viewportScroller.getScrollPosition(),r.lastSource=a.navigationTrigger,r.restoredId=a.restoredState?a.restoredState.navigationId:0):a instanceof ET&&(r.lastId=a.id,r.scheduleScrollEvent(a,r.router.parseUrl(a.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var r=this;return this.router.events.subscribe(function(a){a instanceof n5&&(a.position?"top"===r.options.scrollPositionRestoration?r.viewportScroller.scrollToPosition([0,0]):"enabled"===r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition(a.position):a.anchor&&"enabled"===r.options.anchorScrolling?r.viewportScroller.scrollToAnchor(a.anchor):"disabled"!==r.options.scrollPositionRestoration&&r.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(r,a){this.router.triggerEvent(new n5(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(Pl),v.LFG(At),v.LFG(void 0))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}(),$_=new v.OlP("ROUTER_CONFIGURATION"),$5=new v.OlP("ROUTER_FORROOT_GUARD"),Vte=[Bt,{provide:mB,useClass:f5},{provide:Pl,useFactory:function(i,s,n,r,a,o,u){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},f=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,b=new Pl(null,i,s,n,r,a,o,a5(u));return f&&(b.urlHandlingStrategy=f),m&&(b.routeReuseStrategy=m),qte(l,b),l.enableTracing&&b.events.subscribe(function(w){var C,T;null===(C=console.group)||void 0===C||C.call(console,"Router Event: ".concat(w.constructor.name)),console.log(w.toString()),console.log(w),null===(T=console.groupEnd)||void 0===T||T.call(console)}),b},deps:[mB,vE,Bt,v.zs3,v.v3s,v.Sil,MB,$_,[function i(){(0,M.Z)(this,i)},new v.FiY],[function i(){(0,M.Z)(this,i)},new v.FiY]]},vE,{provide:pE,useFactory:function(i){return i.routerState.root},deps:[Pl]},{provide:v.v3s,useClass:v.EAV},K5,Y5,Bte,{provide:$_,useValue:{enableTracing:!1}}];function zte(){return new v.PXZ("Router",Pl)}var X5=function(){var i=function(){function s(n,r){(0,M.Z)(this,s)}return(0,R.Z)(s,null,[{key:"forRoot",value:function(r,a){return{ngModule:s,providers:[Vte,Q5(r),{provide:$5,useFactory:jte,deps:[[Pl,new v.FiY,new v.tp0]]},{provide:$_,useValue:a||{}},{provide:mn,useFactory:Gte,deps:[Ne,[new v.tBr(Vt),new v.FiY],$_]},{provide:FB,useFactory:Hte,deps:[Pl,At,$_]},{provide:q5,useExisting:a&&a.preloadingStrategy?a.preloadingStrategy:Y5},{provide:v.PXZ,multi:!0,useFactory:zte},[RB,{provide:v.ip1,multi:!0,useFactory:Kte,deps:[RB]},{provide:J5,useFactory:$te,deps:[RB]},{provide:v.tb,multi:!0,useExisting:J5}]]}}},{key:"forChild",value:function(r){return{ngModule:s,providers:[Q5(r)]}}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG($5,8),v.LFG(Pl,8))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i}();function Hte(i,s,n){return n.scrollOffset&&s.setOffset(n.scrollOffset),new FB(i,s,n)}function Gte(i,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Rt(i,s):new Nt(i,s)}function jte(i){return"guarded"}function Q5(i){return[{provide:v.deG,multi:!0,useValue:i},{provide:MB,multi:!0,useValue:i}]}function qte(i,s){i.errorHandler&&(s.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(s.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(s.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(s.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(s.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(s.urlUpdateStrategy=i.urlUpdateStrategy)}var RB=function(){var i=function(){function s(n){(0,M.Z)(this,s),this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new jr.xQ}return(0,R.Z)(s,[{key:"appInitializer",value:function(){var r=this;return this.injector.get(et,Promise.resolve(null)).then(function(){if(r.destroyed)return Promise.resolve(!0);var o=null,u=new Promise(function(m){return o=m}),l=r.injector.get(Pl),f=r.injector.get($_);return"disabled"===f.initialNavigation?(l.setUpLocationChangeListener(),o(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(l.hooks.afterPreactivation=function(){return r.initNavigation?(0,wr.of)(null):(r.initNavigation=!0,o(!0),r.resultOfPreactivationDone)},l.initialNavigation()):o(!0),u})}},{key:"bootstrapListener",value:function(r){var a=this.injector.get($_),o=this.injector.get(K5),u=this.injector.get(FB),l=this.injector.get(Pl),f=this.injector.get(v.z2F);r===f.components[0]&&(("enabledNonBlocking"===a.initialNavigation||void 0===a.initialNavigation)&&l.initialNavigation(),o.setUpPreloading(),u.init(),l.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),s}();return i.\u0275fac=function(n){return new(n||i)(v.LFG(v.zs3))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i}();function Kte(i){return i.appInitializer.bind(i)}function $te(i){return i.bootstrapListener.bind(i)}var J5=new v.OlP("Router Initializer"),Qte=["jobCarousel"];function Jte(i,s){if(1&i&&v._UZ(0,"img",79),2&i){var n=v.oxw();v.Q6J("src","assets/self/"+n.nextImageStr,v.LSH)("ngClass",n.animationClass)}}var ene=function(){function i(){this.expandedPublications={},this.images=["general_01.jpg","dubai_01.jpg","dubai_02.jpg","dubai_03.jpg"],this.currentImageIndex=0,this.nextImageIndex=0,this.directions=["left","top","right","bottom"],this.currentDirectionIndex=0,this.animating=!1,this.currentImageStr="",this.nextImageStr="",this.animationClass=""}return i.prototype.ngOnInit=function(){var s=this;this.shuffleImages(),this.currentImageStr=this.images[0],setInterval(function(){s.triggerNextImage()},4e3)},i.prototype.shuffleImages=function(){for(var s,n=this.images.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1));this.images[n]=(s=[this.images[r],this.images[n]])[0],this.images[r]=s[1]}},i.prototype.triggerNextImage=function(){var s=this;this.animating||(this.animating=!0,this.nextImageIndex=(this.currentImageIndex+1)%this.images.length,this.nextImageStr=this.images[this.nextImageIndex],this.animationClass="slide-in-"+this.directions[this.currentDirectionIndex],this.currentDirectionIndex=(this.currentDirectionIndex+1)%this.directions.length,setTimeout(function(){s.currentImageIndex=s.nextImageIndex,s.currentImageStr=s.nextImageStr,s.animating=!1,s.animationClass=""},1e3))},i.prototype.toggleAbstract=function(s){this.expandedPublications[s]=!this.expandedPublications[s]},i.prototype.isExpanded=function(s){return this.expandedPublications[s]||!1},i.prototype.scrollLeft=function(){this.jobCarousel.nativeElement.scrollBy({left:-300,behavior:"smooth"})},i.prototype.scrollRight=function(){this.jobCarousel.nativeElement.scrollBy({left:300,behavior:"smooth"})},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-home"]],viewQuery:function(n,r){var a;(1&n&&v.Gf(Qte,5),2&n)&&(v.iGM(a=v.CRH())&&(r.jobCarousel=a.first))},decls:272,vars:18,consts:[[1,"section-hero"],[1,"container","mb-5",2,"max-width","1500px"],[1,"row","align-items-center"],[1,"col-md-5","mb-4","mb-md-0","text-center"],[1,"hero-image-container","shadow-lg"],["alt","Animesh",1,"current-image",3,"src"],["class","next-image","alt","Animesh",3,"src","ngClass",4,"ngIf"],[1,"col-md-7","text-center"],[1,"display-1"],[1,"display-6"],[1,"section-research"],[1,"container","text-center"],[1,"display-3","mb-4"],["href","https://scholar.google.com/citations?user=OMcthakAAAAJ&hl=en","target","_blank","aria-label","Google Scholar",2,"color","#4285F4","text-decoration","none"],[1,"fas","fa-graduation-cap",2,"font-size","0.8em","margin-left","10px"],[1,"display-4","mb-5","mt-5",2,"font-size","2rem"],[1,"row","research-papers"],[1,"col-6"],[1,"publication-card"],[1,"abstract-container"],[1,"abstract-text"],["mat-button","","href","https://ojs.aaai.org/index.php/AAAI/article/view/21231","target","_blank"],["mat-button","","href","https://docs.google.com/presentation/d/1Q-Y84ltoNbW15tKF_Nuh4MOcfkwyFIr6loAM7aGyJHk/edit?usp=sharing","target","_blank"],["mat-button","","href","https://github.com/AnimeshSinha1309/qroute-router/","target","_blank"],[1,"fab","fa-github",2,"font-size","24px","margin-right","8px"],["mat-button","",3,"click"],["mat-button","","href","https://link.springer.com/article/10.1007/s11128-023-03998-z","target","_blank"],["mat-button","","href","https://docs.google.com/presentation/d/1RSkwrip8yuScgd1z2VWHWNV0J8nL8TiYI00aM3sDXj0/edit?usp=sharing","target","_blank"],["mat-button","","href","https://github.com/qlemma/qleet","target","_blank"],["mat-button","","href","https://scholar.google.com/citations?view_op=view_citation&hl=en&user=OMcthakAAAAJ&citation_for_view=OMcthakAAAAJ:Tyk-4Ss8FVUC","target","_blank"],[1,"row","research-papers","justify-content-center"],[1,"col-md-8"],["mat-button","","href","https://ims-extr.iiit.ac.in/do.php?vBRX2geZOz/a9wPq79BsIHb41XbzYgrWA4GP/ruNgp0Y1RyVTeMt94MXdX4jmTNSa8vXRzJGEZdiUTQWeZqnGDl6+h+4su/YSrPUfQERe8fTmzmZOl/n0Jh9+HF9iBYRYOpCClYHdQQdwf5y2Dx5/g==","target","_blank"],["mat-button","","href","https://docs.google.com/presentation/d/1igUd_tvhbtYlZ7ah1Z-4zgaA27f83CIQf9iYDidNzJc/edit?usp=sharing","target","_blank"],[1,"section-work"],[1,"container","text-center","mb-5"],[1,"display-3","mb-5"],["href","https://www.linkedin.com/in/animeshsinha1309","target","_blank","aria-label","LinkedIn",2,"color","#0077b5","text-decoration","none"],[1,"fab","fa-linkedin",2,"font-size","0.8em","margin-left","10px"],[1,"row","justify-content-center","mb-5"],[1,"col-md-3","mb-4"],[1,"job-card","h-100","shadow-sm"],[1,"company-logo","mt-3"],["src","assets/companies/google.jpg","alt","Google"],["src","assets/companies/optiver.png","alt","Optiver"],[1,"display-4","mb-4",2,"font-size","2rem"],[1,"carousel-section"],["aria-label","Previous",1,"nav-btn","prev",3,"click"],[1,"carousel-container"],["jobCarousel",""],[1,"carousel-item-custom"],[1,"job-card","shadow-sm"],[1,"company-logo"],["src","assets/companies/aicrowd.png","alt","AICrowd"],[1,"small","mt-2","px-3"],["src","assets/companies/algouniversity.png","alt","AlgoUniversity"],["src","assets/companies/vlabs.jpg","alt","Virtual Labs"],["href","https://ds2-iiith.vlabs.ac.in/exp/tries-suffix-trees/index.html"],["href","https://ds1-iiith.vlabs.ac.in/exp/heap-sort/index.html"],["href","https://ds2-iiith.vlabs.ac.in/exp/2-3-tree/index.html"],["href","https://ds2-iiith.vlabs.ac.in/exp/red-black-tree/index.html"],["src","assets/companies/ihubdata.png","alt","IHub-Data"],["href","https://www.youtube.com/playlist?list=PLYGlLSI-E_w-5_p0PaycDf3IU_hNfh0O5"],["src","assets/companies/iiithyderabad.png","width","400px","alt","IIIT Hyderabad"],["aria-label","Next",1,"nav-btn","next",3,"click"],[1,"section-projects"],[1,"display-3","mb-5","text-center"],["href","https://github.com/AnimeshSinha1309/","target","_blank","aria-label","GitHub",2,"color","#333","text-decoration","none"],[1,"fab","fa-github",2,"font-size","0.8em","margin-left","10px"],[1,"row","justify-content-start"],[1,"col-md-4","mb-4"],[1,"job-card","h-100","shadow-sm","text-start","d-flex","flex-column"],[1,"pt-4","d-flex","flex-column","h-100"],[1,"fw-bold","mb-3"],[1,"project-tags"],[1,"project-tag","green"],[1,"project-tag","blue"],[1,"project-tag","yellow"],[1,"project-tag","purple"],["alt","Animesh",1,"next-image",3,"src","ngClass"]],template:function(n,r){1&n&&(v.TgZ(0,"section",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"div",3),v.TgZ(4,"div",4),v._UZ(5,"img",5),v.YNc(6,Jte,1,2,"img",6),v.qZA(),v.qZA(),v.TgZ(7,"div",7),v.TgZ(8,"h1",8),v._uU(9," Hi, I am Animesh. "),v.qZA(),v.TgZ(10,"h2",9),v._uU(11," I am a Computer Scientist by trade, I work on retrieval algorithms for my job, and on Robotics, Vision, and GPU kernel as a hobby. I have also spent my time in college on Competitive Programming and Quantum research, and I still love them. I enjoy playing Chess, riding on my bike, drawing things in Blender, and meeting you! "),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(12,"section",10),v.TgZ(13,"div",11),v.TgZ(14,"h2",12),v._uU(15," Research "),v.TgZ(16,"a",13),v._UZ(17,"i",14),v.qZA(),v.qZA(),v.TgZ(18,"h3",15),v._uU(19,"Academic publications (Conferences / Journals)"),v.qZA(),v.TgZ(20,"div",16),v.TgZ(21,"div",17),v.TgZ(22,"mat-card",18),v.TgZ(23,"mat-card-header"),v.TgZ(24,"mat-card-title"),v._uU(25,"Qubit routing using graph neural network aided Monte Carlo tree search"),v.qZA(),v.TgZ(26,"mat-card-subtitle"),v.TgZ(27,"div"),v._uU(28,"Authors: Animesh Sinha, Utkarsh Azad, Prof. Harjinder Singh."),v.qZA(),v.TgZ(29,"div"),v._uU(30,"Publisher: Proceedings of the AAAI Conference on Artificial Intelligence"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(31,"div",19),v.TgZ(32,"p",20),v._uU(33," Near-term quantum hardware can support two-qubit operations only on the qubits that can interact with each other. Therefore, to execute an arbitrary quantum circuit on the hardware, compilers have to first perform the task of qubit routing, ie, to transform the quantum circuit either by inserting additional SWAP gates or by reversing existing CNOT gates to satisfy the connectivity constraints of the target topology. The depth of the transformed quantum circuits is minimized by utilizing the Monte Carlo tree search (MCTS) to perform qubit routing by making it both construct each action and search over the space of all actions. It is aided in performing these tasks by a Graph neural network that evaluates the value function and action probabilities for each state. Along with this, we propose a new method of adding mutex-lock like variables in our state representation which helps factor in the parallelization of the scheduled operations, thereby pruning the depth of the output circuit. Overall, our procedure (referred to as QRoute) performs qubit routing in a hardware agnostic manner, and it outperforms other available qubit routing implementations on various circuit benchmarks. "),v.qZA(),v.qZA(),v.TgZ(34,"mat-card-actions"),v.TgZ(35,"a",21),v.TgZ(36,"mat-icon"),v._uU(37,"description"),v.qZA(),v._uU(38," View Article "),v.qZA(),v.TgZ(39,"a",22),v.TgZ(40,"mat-icon"),v._uU(41,"slideshow"),v.qZA(),v._uU(42," View Slides "),v.qZA(),v.TgZ(43,"a",23),v._UZ(44,"i",24),v._uU(45," View Code "),v.qZA(),v.TgZ(46,"button",25),v.NdJ("click",function(){return r.toggleAbstract(0)}),v._uU(47," View Abstract "),v.TgZ(48,"mat-icon"),v._uU(49),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(50,"div",17),v.TgZ(51,"mat-card",18),v.TgZ(52,"mat-card-header"),v.TgZ(53,"mat-card-title"),v._uU(54,"qLEET: visualizing loss landscapes, expressibility, entangling power and training trajectories for parameterized quantum circuits"),v.qZA(),v.TgZ(55,"mat-card-subtitle"),v.TgZ(56,"div"),v._uU(57,"Authors: Utkarsh Azad, Animesh Sinha."),v.qZA(),v.TgZ(58,"div"),v._uU(59,"Publisher: Quantum Information Processing"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(60,"div",19),v.TgZ(61,"p",20),v._uU(62," We present qLEET, an open-source Python package for studying parameterized quantum circuits (PQCs), which are widely used in various variational quantum algorithms (VQAs) and quantum machine learning (QML) algorithms. qLEET enables computation of properties such as expressibility and entangling power of a PQC by studying its entanglement spectrum and the distribution of parameterized states produced by it. Furthermore, it allows users to visualize the training trajectories of PQCs along with high-dimensional loss landscapes generated by them for different objective functions. It supports quantum circuits and noise models built using popular quantum computing libraries such as Qiskit, Cirq, and PyQuil. In our work, we demonstrate how qLEET provides opportunities to design and improve hybrid quantum-classical algorithms by utilizing intuitive insights from the ansatz capability and structure of the loss landscape. "),v.qZA(),v.qZA(),v.TgZ(63,"mat-card-actions"),v.TgZ(64,"a",26),v.TgZ(65,"mat-icon"),v._uU(66,"description"),v.qZA(),v._uU(67," View Article "),v.qZA(),v.TgZ(68,"a",27),v.TgZ(69,"mat-icon"),v._uU(70,"slideshow"),v.qZA(),v._uU(71," View Slides "),v.qZA(),v.TgZ(72,"a",28),v._UZ(73,"i",24),v._uU(74," View Code "),v.qZA(),v.TgZ(75,"button",25),v.NdJ("click",function(){return r.toggleAbstract(1)}),v._uU(76," View Abstract "),v.TgZ(77,"mat-icon"),v._uU(78),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(79,"div",17),v.TgZ(80,"mat-card",18),v.TgZ(81,"mat-card-header"),v.TgZ(82,"mat-card-title"),v._uU(83,"Deep reinforcement learning in chemistry: A review"),v.qZA(),v.TgZ(84,"mat-card-subtitle"),v.TgZ(85,"div"),v._uU(86,"Authors: Bhuvanesh Sridharan, Animesh Sinha, Jai Bardhan, Rohit Modee, Masahiro Ehara, U Deva Priyakumar."),v.qZA(),v.TgZ(87,"div"),v._uU(88,"Publisher: Journal of Computational Chemistry (2024)"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(89,"div",19),v.TgZ(90,"p",20),v._uU(91," The paper surveys reinforcement learning applications across computational chemistry domains. Key application areas include molecule generation, geometry optimization, and retrosynthetic pathway search. The authors establish foundational RL formalism relevant to chemistry problems and examine solution approaches from recent literature, discussing algorithmic advantages and implementation details for practitioners. "),v.qZA(),v.qZA(),v.TgZ(92,"mat-card-actions"),v.TgZ(93,"a",29),v.TgZ(94,"mat-icon"),v._uU(95,"description"),v.qZA(),v._uU(96," View Article "),v.qZA(),v.TgZ(97,"button",25),v.NdJ("click",function(){return r.toggleAbstract(2)}),v._uU(98," View Abstract "),v.TgZ(99,"mat-icon"),v._uU(100),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(101,"h3",15),v._uU(102,"My Thesis"),v.qZA(),v.TgZ(103,"div",30),v.TgZ(104,"div",31),v.TgZ(105,"mat-card",18),v.TgZ(106,"mat-card-header"),v.TgZ(107,"mat-card-title"),v._uU(108,"Machine-Learning driven Tranformations and Analysis of Quantum Circuits for NISQ-era hardware"),v.qZA(),v.TgZ(109,"mat-card-subtitle"),v.TgZ(110,"div"),v._uU(111,"Author: Animesh Sinha."),v.qZA(),v.TgZ(112,"div"),v._uU(113,"Advisor: Prof. Harjinder Singh"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(114,"div",19),v.TgZ(115,"p",20),v._uU(116," Quantum Computation is one of the most promising futures in furthering computing power and increasing the computational scientific simulation ability. However, the present-day quantum devices suffer from several limitations, a small number of qubits, limited connectivity, noisy evolution, and others. Therefore, the need of the hour is to come up with both hardware-based and algorithmic changes to mitigate these limitations and put forth a step toward a quantum computer that achieves supremacy over its classical counterpart. The primary focus of this dissertation is to present a method of efficiently compiling quantum circuits on present-day hardware to minimize the effects of limited connectivity and effects of noise. Further, we explore a class of hybrid quantum-classical algorithms called variational quantum circuits and attempt to characterize their properties, evolution, and advantages. First, we provide the requisite background in quantum computing, variational quantum methods, deep learning, and reinforcement learning. Next, we present qRoute, a reinforcement learning based solution for compiling quantum circuits onto present-day hardware. We elucidate the method that QRoute uses for depth minimized compilation, which is essentially a Monte-Carlo tree search put together with a graph neural network to decide which parts of the tree to explore. We discuss the details of the algorithm, the key points of innovation that differentiate it from the previous methods, and the state-of-the-art results it achieves on various circuits compilation benchmarks. Finally, we move to the application of quantum computers in solving real-world problems and discuss the circuits called variational quantum circuits. We present a framework qLEET for characterizing the training paths, loss landscapes, entanglement capability, and expressibility of these circuits, and we provide a use-case example in analyzing an algorithm called QAOA for computing the Max-Cut of a graph, which is an NP-complete problem and require time exponential in the number of nodes on a classical computer. All code for qRoute and qLEET has been released to the open-source community and provides easy and modular access to endpoints where our algorithms can be tweaked for further research in this domain. "),v.qZA(),v.qZA(),v.TgZ(117,"mat-card-actions"),v.TgZ(118,"a",32),v.TgZ(119,"mat-icon"),v._uU(120,"description"),v.qZA(),v._uU(121," View Article "),v.qZA(),v.TgZ(122,"a",33),v.TgZ(123,"mat-icon"),v._uU(124,"slideshow"),v.qZA(),v._uU(125," View Slides "),v.qZA(),v.TgZ(126,"button",25),v.NdJ("click",function(){return r.toggleAbstract(3)}),v._uU(127," View Abstract "),v.TgZ(128,"mat-icon"),v._uU(129),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(130,"section",34),v.TgZ(131,"div",35),v.TgZ(132,"h2",36),v._uU(133," Places I worked at "),v.TgZ(134,"a",37),v._UZ(135,"i",38),v.qZA(),v.qZA(),v.TgZ(136,"div",39),v.TgZ(137,"div",40),v.TgZ(138,"mat-card",41),v.TgZ(139,"div",42),v._UZ(140,"img",43),v.qZA(),v.TgZ(141,"mat-card-content"),v.TgZ(142,"p"),v._uU(143,"Working in Google Discover, the all-interest feed on the Search Homepage. Improving personalization, content-quality, and more to drive user engagement and platform growth. Interned in the Ads Team for 3 months, writing big-data pipelines for ML jobs."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(144,"div",40),v.TgZ(145,"mat-card",41),v.TgZ(146,"div",42),v._UZ(147,"img",44),v.qZA(),v.TgZ(148,"mat-card-content"),v.TgZ(149,"p"),v._uU(150,"Full time job at a High Frequency trading firm, working in Delta-1 Core Data team as a Software Engineer. Working in C++ and Python to provide data storage, access and transformation pipelines."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(151,"h3",45),v._uU(152,"Internships & Other Experience"),v.qZA(),v.TgZ(153,"div",46),v.TgZ(154,"button",47),v.NdJ("click",function(){return r.scrollLeft()}),v.TgZ(155,"mat-icon"),v._uU(156,"chevron_left"),v.qZA(),v.qZA(),v.TgZ(157,"div",48,49),v.TgZ(159,"div",50),v.TgZ(160,"mat-card",51),v.TgZ(161,"div",52),v._UZ(162,"img",53),v.qZA(),v.TgZ(163,"p",54),v._uU(164,"Worked for 3 months as a Reasearch Intern. Worked on the AICrowd food segmentation challenge, pixel level segmentation for a long-tailed high-error dataset, used Facebook Detectron2, PyTorch."),v.qZA(),v.qZA(),v.qZA(),v.TgZ(165,"div",50),v.TgZ(166,"mat-card",51),v.TgZ(167,"div",52),v._UZ(168,"img",55),v.qZA(),v.TgZ(169,"p",54),v._uU(170,"Took Algorithms and Data Structures classes, theory, labs, and contest upsolving. Acting as an independent content creator for the platform."),v.qZA(),v.qZA(),v.qZA(),v.TgZ(171,"div",50),v.TgZ(172,"mat-card",51),v.TgZ(173,"div",52),v._UZ(174,"img",56),v.qZA(),v.TgZ(175,"p",54),v._uU(176,"Developed Simulation for how different data structures work ("),v.TgZ(177,"a",57),v._uU(178,"Tries and Suffix Tries"),v.qZA(),v._uU(179,", "),v.TgZ(180,"a",58),v._uU(181,"Heap Sort"),v.qZA(),v._uU(182,", "),v.TgZ(183,"a",59),v._uU(184,"2-3 Trees"),v.qZA(),v._uU(185,", and "),v.TgZ(186,"a",60),v._uU(187,"Red-Black Trees"),v.qZA(),v._uU(188,"), along with quizzes and explainatory text and video content."),v.qZA(),v.qZA(),v.qZA(),v.TgZ(189,"div",50),v.TgZ(190,"mat-card",51),v.TgZ(191,"div",52),v._UZ(192,"img",61),v.qZA(),v.TgZ(193,"p",54),v._uU(194,"One of the Head TAs working for the "),v.TgZ(195,"a",62),v._uU(196,"Foundations of Modern Machine Learning"),v.qZA(),v._uU(197," course and as a TA for the Machine Learning for Drug Design Course. Work involves making Jupyter notebooks for class and labs, holding lab/tutorial sessions, etc."),v.qZA(),v.qZA(),v.qZA(),v.TgZ(198,"div",50),v.TgZ(199,"mat-card",51),v.TgZ(200,"div",52),v._UZ(201,"img",63),v.qZA(),v.TgZ(202,"p",54),v._uU(203,"Was a teaching assistant for Data Structures and Algorithms, and Probability and Statistics, wrote questions for assignments, evaluated them, managed online judge and held tutorials."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(204,"button",64),v.NdJ("click",function(){return r.scrollRight()}),v.TgZ(205,"mat-icon"),v._uU(206,"chevron_right"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(207,"section",65),v.TgZ(208,"div",35),v.TgZ(209,"h2",66),v._uU(210," Exciting Projects "),v.TgZ(211,"a",67),v._UZ(212,"i",68),v.qZA(),v.qZA(),v.TgZ(213,"div",69),v.TgZ(214,"div",70),v.TgZ(215,"mat-card",71),v.TgZ(216,"mat-card-content",72),v.TgZ(217,"h3",73),v._uU(218,"BayesMech Vision"),v.qZA(),v.TgZ(219,"p"),v._uU(220,"Large Video models like Gemini are great, and they give good advice, but they are not easy to learn from. To learn, for example racing, you need POV videos from a lot of tries, overlayed onto each other to understand how you are doing things now, perfect real world position understanding, and advice on top of this in video format that's grounded in many observations and truly correct measurements. We are building input and output video-processing tool calls to enable this. And this is the one project I spend most of my time on."),v.qZA(),v.TgZ(221,"div",74),v.TgZ(222,"span",75),v._uU(223,"#Active"),v.qZA(),v.TgZ(224,"span",76),v._uU(225,"#Vision"),v.qZA(),v.TgZ(226,"span",76),v._uU(227,"#Robotics"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(228,"div",70),v.TgZ(229,"mat-card",71),v.TgZ(230,"mat-card-content",72),v.TgZ(231,"h3",73),v._uU(232,"Qubit Routing"),v.qZA(),v.TgZ(233,"p"),v._uU(234,'In computers, RAM is used to store data, a CPU is separate and it copies data from the RAM, operates on it, and writes back results. On a Quantum computer, copying is impossible, so we build the compute on top of the memory. And this poses a formiddable challenge, how to organize memory at each step of our process to make compute the most efficient. Reinforcement Learning is one solution to perform such "compilation" of quantum circuits, I have studied this through college and is the subject of my thesis, and I am keen to keep up with ideas on both the Quantum end - e.g. noise modelling - and on the Reinforcement learning end - e.g. thinking models like TRM, HRM, etc.'),v.qZA(),v.TgZ(235,"div",74),v.TgZ(236,"span",77),v._uU(237,"#Past"),v.qZA(),v.TgZ(238,"span",76),v._uU(239,"#Quantum"),v.qZA(),v.TgZ(240,"span",76),v._uU(241,"#RL"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(242,"div",70),v.TgZ(243,"mat-card",71),v.TgZ(244,"mat-card-content",72),v.TgZ(245,"h3",73),v._uU(246,"Fog-of-War Agents"),v.qZA(),v.TgZ(247,"p"),v._uU(248,"I love playing chess, and I love partially observable Markov Decision Processes (i.e. games with hidden information - e.g. poker). But the combination of these, chess like planning and hidden board state, is unique to this variant of chess called fog of war. In my free time I train some models and some heuristics to play this game better, but finding a good formulation is challenging and I need help here."),v.qZA(),v.TgZ(249,"div",74),v.TgZ(250,"span",78),v._uU(251,"#Exploratory"),v.qZA(),v.TgZ(252,"span",76),v._uU(253,"#Games"),v.qZA(),v.TgZ(254,"span",76),v._uU(255,"#RL"),v.qZA(),v.TgZ(256,"span",76),v._uU(257,"#POMDP"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(258,"div",70),v.TgZ(259,"mat-card",71),v.TgZ(260,"mat-card-content",72),v.TgZ(261,"h3",73),v._uU(262,"Set Retrieval Algorithms"),v.qZA(),v.TgZ(263,"p"),v._uU(264,"Vector databases are fun, some work on CPUs, others are even accelerated on GPUs. We use these databases to search nearst neighbors - making them more of search engines than databases. But when we have a set of vectors and we need to find another set of vectors such that there are many similar pairs within these, our current algorithms fall short. This is useful for point cloud matching, finding users with similar behavior, late embedding models and more. It's cool algorithmic research, spending some of my time on this."),v.qZA(),v.TgZ(265,"div",74),v.TgZ(266,"span",75),v._uU(267,"#Active"),v.qZA(),v.TgZ(268,"span",76),v._uU(269,"#Algo"),v.qZA(),v.TgZ(270,"span",76),v._uU(271,"#GPU"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&n&&(v.xp6(5),v.Q6J("src","assets/self/"+r.currentImageStr,v.LSH),v.xp6(1),v.Q6J("ngIf",r.animating),v.xp6(25),v.ekj("expanded",r.isExpanded(0)),v.xp6(15),v.uIk("aria-label",r.isExpanded(0)?"Collapse abstract":"Expand abstract"),v.xp6(3),v.Oqu(r.isExpanded(0)?"expand_less":"expand_more"),v.xp6(11),v.ekj("expanded",r.isExpanded(1)),v.xp6(15),v.uIk("aria-label",r.isExpanded(1)?"Collapse abstract":"Expand abstract"),v.xp6(3),v.Oqu(r.isExpanded(1)?"expand_less":"expand_more"),v.xp6(11),v.ekj("expanded",r.isExpanded(2)),v.xp6(8),v.uIk("aria-label",r.isExpanded(2)?"Collapse abstract":"Expand abstract"),v.xp6(3),v.Oqu(r.isExpanded(2)?"expand_less":"expand_more"),v.xp6(14),v.ekj("expanded",r.isExpanded(3)),v.xp6(12),v.uIk("aria-label",r.isExpanded(3)?"Collapse abstract":"Expand abstract"),v.xp6(3),v.Oqu(r.isExpanded(3)?"expand_less":"expand_more"))},directives:[Ra,X3,Q3,K3,$3,q6,X6,oB,BF,W6,$n],styles:["a[_ngcontent-%COMP%]:hover{text-decoration:none}.research-papers[_ngcontent-%COMP%]{margin-top:50dp}.research-papers[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:20dp}.publication-card[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.abstract-container[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease-out}.abstract-container.expanded[_ngcontent-%COMP%]{max-height:1000px;transition:max-height .5s ease-in}.abstract-text[_ngcontent-%COMP%]{padding:16px;margin:0}.expand-button[_ngcontent-%COMP%]{margin-left:auto}.company-logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100px;margin-bottom:15px}.company-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:80px;-o-object-fit:contain;object-fit:contain}.job-card[_ngcontent-%COMP%]{height:100%;margin-bottom:20px}.carousel-section[_ngcontent-%COMP%]{position:relative;padding:0 40px}.carousel-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;grid-gap:20px;gap:20px;padding:10px 0;-ms-overflow-style:none;scrollbar-width:none}.carousel-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.carousel-item-custom[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 calc(30% - 20px);scroll-snap-align:start;min-width:300px;padding:10px}.carousel-item-custom[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:flex-start}.carousel-item-custom[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]{height:80px}.carousel-item-custom[_ngcontent-%COMP%]   .company-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50px}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.1);border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:background .3s}.nav-btn[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.3)}.nav-btn.prev[_ngcontent-%COMP%]{left:0}.nav-btn.next[_ngcontent-%COMP%]{right:0}@media (max-width: 768px){.carousel-item-custom[_ngcontent-%COMP%]{flex:0 0 85%}}.hero-image-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:400px;height:250px;margin:0 auto;overflow:hidden;border-radius:12px;background-color:#f0f0f0}.hero-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;position:absolute;top:0;left:0}.hero-image-container[_ngcontent-%COMP%]   .current-image[_ngcontent-%COMP%]{z-index:1}.hero-image-container[_ngcontent-%COMP%]   .next-image[_ngcontent-%COMP%]{z-index:2}.slide-in-left[_ngcontent-%COMP%]{-webkit-animation:slideInLeft 1s forwards ease-in-out;animation:slideInLeft 1s forwards ease-in-out}.slide-in-right[_ngcontent-%COMP%]{-webkit-animation:slideInRight 1s forwards ease-in-out;animation:slideInRight 1s forwards ease-in-out}.slide-in-top[_ngcontent-%COMP%]{-webkit-animation:slideInTop 1s forwards ease-in-out;animation:slideInTop 1s forwards ease-in-out}.slide-in-bottom[_ngcontent-%COMP%]{-webkit-animation:slideInBottom 1s forwards ease-in-out;animation:slideInBottom 1s forwards ease-in-out}@-webkit-keyframes slideInLeft{0%{transform:translate(-100%)}to{transform:translate(0)}}@keyframes slideInLeft{0%{transform:translate(-100%)}to{transform:translate(0)}}@-webkit-keyframes slideInRight{0%{transform:translate(100%)}to{transform:translate(0)}}@keyframes slideInRight{0%{transform:translate(100%)}to{transform:translate(0)}}@-webkit-keyframes slideInTop{0%{transform:translateY(-100%)}to{transform:translateY(0)}}@keyframes slideInTop{0%{transform:translateY(-100%)}to{transform:translateY(0)}}@-webkit-keyframes slideInBottom{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes slideInBottom{0%{transform:translateY(100%)}to{transform:translateY(0)}}section[_ngcontent-%COMP%]{padding:60px 0}section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{margin-bottom:0!important}.section-hero[_ngcontent-%COMP%]{background-color:#fff}.section-research[_ngcontent-%COMP%]{background-color:#f8f9fa}.section-work[_ngcontent-%COMP%]{background-color:#fff}.section-projects[_ngcontent-%COMP%]{background-color:#f3f4f6}.project-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;grid-gap:8px;gap:8px;padding-top:16px;margin-top:auto}.project-tag[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 12px;border-radius:16px;font-weight:500}.project-tag.yellow[_ngcontent-%COMP%]{background-color:#fff9c4;color:#fbc02d}.project-tag.pink[_ngcontent-%COMP%]{background-color:#f8bbd0;color:#c2185b}.project-tag.blue[_ngcontent-%COMP%]{background-color:#bbdefb;color:#1976d2}.project-tag.green[_ngcontent-%COMP%]{background-color:#c8e6c9;color:#388e3c}.project-tag.purple[_ngcontent-%COMP%]{background-color:#e1bee7;color:#7b1fa2}"]}),i}(),tne=ne(4762),PT=ne(3219),nne=function(){function i(s){this.firestore=s}return i.prototype.getFriends=function(){return this.firestore.collection("friends").snapshotChanges()},i.\u0275fac=function(n){return new(n||i)(v.LFG(uA))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}(),rne=["friendsCarousel"];function ine(i,s){if(1&i&&(v.TgZ(0,"div",21),v.TgZ(1,"mat-card",22),v.TgZ(2,"mat-card-header"),v.TgZ(3,"mat-card-title"),v._uU(4),v.qZA(),v.TgZ(5,"mat-card-subtitle"),v._uU(6),v.qZA(),v.qZA(),v._UZ(7,"img",23),v.TgZ(8,"mat-card-actions"),v.TgZ(9,"a",24),v._uU(10,"LinkedIn"),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&i){var n=s.$implicit;v.xp6(4),v.Oqu(n.name),v.xp6(2),v.Oqu(n.affiliation),v.xp6(1),v.MGl("src","assets/friends/",n.id,".jpeg",v.LSH),v.s9C("alt",n.name),v.xp6(2),v.s9C("href",n.linkedin,v.LSH)}}var une=PT.icon({iconRetinaUrl:"assets/marker-icon-2x.png",iconUrl:"assets/marker-icon.png",shadowUrl:"assets/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});PT.Marker.prototype.options.icon=une;var tv,lne=function(){function i(s){this.friendService=s}return i.prototype.ngOnInit=function(){var s=this;this.friendService.getFriends().subscribe(function(n){s.friends=n.map(function(r){return(0,tne.pi)({id:r.payload.doc.id},r.payload.doc.data())}).sort(function(r,a){var o,u;return(null!==(o=a.degval)&&void 0!==o?o:0)-(null!==(u=r.degval)&&void 0!==u?u:0)})})},i.prototype.ngAfterViewInit=function(){this.initMap()},i.prototype.initMap=function(){var s=this;this.map=PT.map("placesMap",{center:[30,45],zoom:3}),PT.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19}).addTo(this.map),[{name:"Bengaluru, India",coords:[12.9716,77.5946]},{name:"Zurich, Switzerland",coords:[47.3769,8.5417]},{name:"Locarno, Switzerland",coords:[46.167,8.7987]},{name:"Amsterdam, Netherlands",coords:[52.3676,4.9041]},{name:"Abu Dhabi, UAE",coords:[24.4539,54.3773]},{name:"Dubai, UAE",coords:[25.2048,55.2708]}].forEach(function(r){PT.marker(r.coords).addTo(s.map).bindPopup("<b>"+r.name+"</b>")})},i.prototype.scrollLeft=function(){this.friendsCarousel&&this.friendsCarousel.nativeElement.scrollBy({left:-300,behavior:"smooth"})},i.prototype.scrollRight=function(){this.friendsCarousel&&this.friendsCarousel.nativeElement.scrollBy({left:300,behavior:"smooth"})},i.\u0275fac=function(n){return new(n||i)(v.Y36(nne))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-friends"]],viewQuery:function(n,r){var a;(1&n&&v.Gf(rne,5,v.SBq),2&n)&&(v.iGM(a=v.CRH())&&(r.friendsCarousel=a.first))},decls:34,vars:1,consts:[[1,"section-hobbies","bg-white"],[1,"container","text-center","pt-5","pb-5"],[1,"display-3","mb-5"],[1,"row","justify-content-center"],[1,"col-md-3","mb-4"],["href","https://lichess.org/@/Anister","target","_blank",1,"hobby-link","text-decoration-none"],[1,"fas","fa-chess-knight","fa-5x","mb-3",2,"color","#769656"],[1,"mt-2","text-dark"],["href","https://www.youtube.com/@AnimeshSinha1309","target","_blank",1,"hobby-link","text-decoration-none"],[1,"fab","fa-youtube","fa-5x","mb-3","text-danger"],[1,"section-friends"],[1,"container","text-center","mb-5"],[1,"carousel-section"],["aria-label","Previous",1,"nav-btn","prev",3,"click"],[1,"carousel-container"],["friendsCarousel",""],["class","carousel-item-custom",4,"ngFor","ngForOf"],["aria-label","Next",1,"nav-btn","next",3,"click"],[1,"section-places","bg-white"],[1,"container","text-center"],["id","placesMap",2,"height","500px","width","100%","border-radius","12px","box-shadow","0 4px 6px rgba(0,0,0,0.1)"],[1,"carousel-item-custom"],[1,"h-100","shadow-sm"],[1,"friend-image",3,"src","alt"],["mat-button","","target","_blank",3,"href"]],template:function(n,r){1&n&&(v.TgZ(0,"section",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Fun things I like doing"),v.qZA(),v.TgZ(4,"div",3),v.TgZ(5,"div",4),v.TgZ(6,"a",5),v._UZ(7,"i",6),v.TgZ(8,"h4",7),v._uU(9,"@Anister"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(10,"div",4),v.TgZ(11,"a",8),v._UZ(12,"i",9),v.TgZ(13,"h4",7),v._uU(14,"@AnimeshSinha1309"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(15,"section",10),v.TgZ(16,"div",11),v.TgZ(17,"h1",2),v._uU(18,"Meet my friends!"),v.qZA(),v.TgZ(19,"div",12),v.TgZ(20,"button",13),v.NdJ("click",function(){return r.scrollLeft()}),v.TgZ(21,"mat-icon"),v._uU(22,"chevron_left"),v.qZA(),v.qZA(),v.TgZ(23,"div",14,15),v.YNc(25,ine,11,5,"div",16),v.qZA(),v.TgZ(26,"button",17),v.NdJ("click",function(){return r.scrollRight()}),v.TgZ(27,"mat-icon"),v._uU(28,"chevron_right"),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(29,"section",18),v.TgZ(30,"div",19),v.TgZ(31,"h1",2),v._uU(32,"Places I've been to"),v.qZA(),v._UZ(33,"div",20),v.qZA(),v.qZA()),2&n&&(v.xp6(25),v.Q6J("ngForOf",r.friends))},directives:[oB,as,X3,Q3,K3,$3,q6,X6],styles:["section[_ngcontent-%COMP%]{padding:60px 0}section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{margin-bottom:0!important}.section-friends[_ngcontent-%COMP%]{background-color:#f8f9fa}.carousel-section[_ngcontent-%COMP%]{position:relative;padding:0 40px}.carousel-container[_ngcontent-%COMP%]{display:flex;overflow-x:auto;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;-ms-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;grid-gap:20px;gap:20px;padding:10px 0;-ms-overflow-style:none;scrollbar-width:none}.carousel-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.carousel-item-custom[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 calc(25% - 20px);scroll-snap-align:start;min-width:250px;padding:10px}.carousel-item-custom[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:flex-start;padding:0;overflow:hidden}.carousel-item-custom[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:16px 16px 0}.carousel-item-custom[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{min-height:2.8em;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;margin-bottom:8px}.carousel-item-custom[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{padding:8px;margin:0}.nav-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.1);border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:background .3s}.nav-btn[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.3)}.nav-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#000}.nav-btn.prev[_ngcontent-%COMP%]{left:0}.nav-btn.next[_ngcontent-%COMP%]{right:0}.friend-image[_ngcontent-%COMP%]{height:200px;-o-object-fit:cover;object-fit:cover;width:100%;margin:0;display:block}@media (max-width: 992px){.carousel-item-custom[_ngcontent-%COMP%]{flex:0 0 calc(33% - 20px)}}@media (max-width: 768px){.carousel-item-custom[_ngcontent-%COMP%]{flex:0 0 calc(50% - 20px)}}@media (max-width: 576px){.carousel-item-custom[_ngcontent-%COMP%]{flex:0 0 calc(85% - 20px)}}a[_ngcontent-%COMP%]:hover{text-decoration:none}.hobby-link[_ngcontent-%COMP%]{text-decoration:none;display:block;transition:transform .3s ease}.hobby-link[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.hobby-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .hobby-link[_ngcontent-%COMP%]:hover   h4[_ngcontent-%COMP%]{opacity:.8;color:inherit}"]}),i}(),ev=ne(4173),cne=function(){function i(s,n,r){void 0===r&&(r=100),this.mX=s,this.mY=n,this.mWumpus=!1,this.mPit=!1,this.mGold=!1,this.BLOCK_SIZE=r,this.mMeasurement=zs.Safe,this.mMeasured=!1}return Object.defineProperty(i.prototype,"canvas",{set:function(s){this.mCanvas=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.mX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.mY},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasWumpus",{get:function(){return this.mWumpus},set:function(s){this.mWumpus=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasPit",{get:function(){return this.mPit},set:function(s){this.mPit=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasGold",{get:function(){return this.mGold},set:function(s){this.mGold=s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"measurement",{get:function(){return this.mMeasurement},set:function(s){this.mMeasurement=s,this.render()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"measured",{get:function(){return this.mMeasured},set:function(s){this.mMeasured=s,this.render()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasBreeze",{get:function(){return this.mMeasurement===zs.Breeze||this.mMeasurement===zs.StenchyBreeze},set:function(s){s&&this.mMeasurement===zs.Stench?this.mMeasurement=zs.StenchyBreeze:s&&this.mMeasurement===zs.Safe?this.mMeasurement=zs.Breeze:s||this.mMeasurement!==zs.StenchyBreeze?!s&&this.mMeasurement===zs.Breeze&&(this.mMeasurement=zs.Safe):this.mMeasurement=zs.Stench},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasStench",{get:function(){return this.mMeasurement===zs.Stench||this.mMeasurement===zs.StenchyBreeze},set:function(s){s&&this.mMeasurement===zs.Breeze?this.mMeasurement=zs.StenchyBreeze:s&&this.mMeasurement===zs.Safe?this.mMeasurement=zs.Stench:s||this.mMeasurement!==zs.StenchyBreeze?!s&&this.mMeasurement===zs.Stench&&(this.mMeasurement=zs.Safe):this.mMeasurement=zs.Stench},enumerable:!1,configurable:!0}),i.prototype.render=function(s){void 0===s&&(s=!1);var n=this.mCanvas.rect(.98*this.BLOCK_SIZE,.98*this.BLOCK_SIZE),r=this.mCanvas.rect(.75*this.BLOCK_SIZE,.75*this.BLOCK_SIZE);n.fill(this.mMeasured?{color:this.mMeasurement}:{color:"#ccc"}),r.fill({color:"#ddd"}),n.center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2),r.center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2),(this.mMeasured||s)&&(this.hasWumpus?this.mCanvas.image("assets/illustrations/logicalagents/wumpus.png",.6*this.BLOCK_SIZE,.6*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2):this.hasPit?this.mCanvas.image("assets/illustrations/logicalagents/pit.png",.6*this.BLOCK_SIZE,.6*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2):(this.hasGold&&this.mCanvas.image("assets/illustrations/logicalagents/gold.png",.6*this.BLOCK_SIZE,.2*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2),this.hasBreeze&&this.mCanvas.image("assets/illustrations/logicalagents/breeze.png",.6*this.BLOCK_SIZE,.2*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2+.25*this.BLOCK_SIZE),this.hasStench&&this.mCanvas.image("assets/illustrations/logicalagents/stench.png",.6*this.BLOCK_SIZE,.2*this.BLOCK_SIZE).center(this.BLOCK_SIZE/2,this.BLOCK_SIZE/2-.25*this.BLOCK_SIZE)))},i.prototype.reset=function(){this.measured=!1},i}(),zs=function(i){return i.Stench="#ff0000",i.Breeze="#000000",i.StenchyBreeze="#660000",i.Safe="#55ff66",i}({}),hne=function(){function i(s){this.canvas=[],this.ELEMENT="drawing-models",this.UX_SIZE=450,this.game=s,this.canvasParent=SVG(this.ELEMENT).size(2.02*this.UX_SIZE,6.04*this.UX_SIZE);for(var n=["Right","Up","Left","Down"],r=0;r<4;r++)this.canvasParent.rect(this.UX_SIZE,.25*this.UX_SIZE).center(.5*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE),this.canvasParent.text("Checking Wumpus on the "+n[r]).center(.5*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE).font({weight:"bold",fill:"white"}),this.canvas[r]=this.canvasParent.nested().size(this.UX_SIZE,this.UX_SIZE),this.canvas[r].center(.5*this.UX_SIZE,(1.51*r+.75)*this.UX_SIZE),this.canvasParent.rect(this.UX_SIZE,.25*this.UX_SIZE).center(1.51*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE),this.canvasParent.text("Checking Wumpus on the "+n[r]).center(1.51*this.UX_SIZE,(1.51*r+.125)*this.UX_SIZE).font({weight:"bold",fill:"white"}),this.canvas[r+4]=this.canvasParent.nested().size(this.UX_SIZE,this.UX_SIZE),this.canvas[r+4].center(1.51*this.UX_SIZE,(1.51*r+.75)*this.UX_SIZE),this.canvas[r+8]=this.canvasParent.nested().size(2*this.UX_SIZE,.25*this.UX_SIZE),this.canvas[r+8].center(1*this.UX_SIZE,(1.51*r+1.375)*this.UX_SIZE);this.render()}return i.prototype.render=function(){for(var s=this.game.agent.x,n=this.game.agent.y,r=[],a=0;a<8;a++){this.canvas[a].clear(),r[a]=!0;var o=s,u=n;if((0===a||4===a)&&s<this.game.GRID_SIZE?o++:(1===a||5===a)&&n<this.game.GRID_SIZE?u++:(2===a||6===a)&&s>1?o--:(3===a||7===a)&&n>1&&u--,s!==o||n!==u){this.game.getTile(o,u).measured&&(r[a]=!1);for(var l=[],f=0;f<this.game.GRID_SIZE*this.game.GRID_SIZE;f++)l[f]=!1;for(var m=0,b=this.game.getNeighbors(this.game.getTile(o,u));m<b.length;m++){var w=b[m];l[this.game.GRID_SIZE*(w.x-1)+(w.y-1)]=!0}for(f=1;f<=4;f++)for(var C=1;C<=4;C++){var T=this.canvas[a].rect(.245*this.UX_SIZE,.245*this.UX_SIZE).center((f-.5)*this.UX_SIZE/4,(4.5-C)*this.UX_SIZE/4),I=this.canvas[a].rect(.15*this.UX_SIZE,.15*this.UX_SIZE).center((f-.5)*this.UX_SIZE/4,(4.5-C)*this.UX_SIZE/4);this.game.getTile(f,C).measured?T.fill({color:this.game.getTile(f,C).measurement}):T.fill({color:"#dddddd"}),a<4?l[this.game.GRID_SIZE*(f-1)+(C-1)]?(I.fill({color:"#ff3837"}),this.game.getTile(f,C).measured&&!this.game.getTile(f,C).hasStench&&(r[a]=!1,this.canvas[a].text("x").font({fill:"#ffffff",weight:"bold",size:"large"}).center((f-.5)*this.UX_SIZE/4,(4.5-C)*this.UX_SIZE/4))):(I.fill({color:"#4e9d36"}),this.game.getTile(f,C).measured&&this.game.getTile(f,C).hasStench&&(r[a]=!1,this.canvas[a].text("x").font({fill:"#ffffff",weight:"bold",size:"large"}).center((f-.5)*this.UX_SIZE/4,(4.5-C)*this.UX_SIZE/4))):a<8&&(l[this.game.GRID_SIZE*(f-1)+(C-1)]?(I.fill({color:"#646464"}),this.game.getTile(f,C).measured&&!this.game.getTile(f,C).hasBreeze&&(r[a]=!1,this.canvas[a].text("x").font({fill:"#ffffff",weight:"bold",size:"large"}).center((f-.5)*this.UX_SIZE/4,(4.5-C)*this.UX_SIZE/4))):I.fill({color:"#ffffff"})),o===f&&u===C&&this.canvas[a].circle(10).fill({color:"#ff0066"}).center((f-.5)*this.UX_SIZE/4,(4.5-C)*this.UX_SIZE/4)}r[a]?r[a]&&(this.canvas[a].rect(this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#00ff00",opacity:"0.2"}).center(this.UX_SIZE/2,this.UX_SIZE/2),this.canvas[a].text("Model is Correct, Move is Risky.").font({weight:"bold"}).center(this.UX_SIZE/2,this.UX_SIZE/2)):(this.canvas[a].rect(this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#f00",opacity:"0.2"}).center(this.UX_SIZE/2,this.UX_SIZE/2),this.canvas[a].text("Model Invalid, Square Safe").font({weight:"bold"}).center(this.UX_SIZE/2,this.UX_SIZE/2))}else this.canvas[a].rect(this.UX_SIZE,this.UX_SIZE).fill({color:"#ddd",opacity:"0.5"}),this.canvas[a].rect(this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#f00",opacity:"0.2"}).center(this.UX_SIZE/2,this.UX_SIZE/2),this.canvas[a].text("Invalid Move").font({weight:"bold"}).center(this.UX_SIZE/2,this.UX_SIZE/2)}for(f=0;f<4;f++)this.canvas[f+8].clear(),r[f]||r[f+4]?(this.canvas[f+8].rect(2.01*this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#ff7b69"}),this.canvas[f+8].text("We ain't doing this.").center(1.05*this.UX_SIZE,.1*this.UX_SIZE).font({weight:"bold"})):(this.canvas[f+8].rect(2.01*this.UX_SIZE,.2*this.UX_SIZE).fill({color:"#89ff4f"}),this.canvas[f+8].text("This is Safe, Good to Go.").center(1.05*this.UX_SIZE,.1*this.UX_SIZE).font({weight:"bold"}))},i}(),fne=function(){function i(s){this.disabled=!1,this.mX=1,this.mY=1,this.mGame=s,this.measure(),this.disabled=!1,this.ux=this.mGame.canvas.circle(20),this.ux.fill("#f06"),this.ux.center(this.mGame.UX_SIZE/(2*this.mGame.GRID_SIZE),this.mGame.UX_SIZE-this.mGame.UX_SIZE/(2*this.mGame.GRID_SIZE))}return Object.defineProperty(i.prototype,"x",{get:function(){return this.mX},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.mY},enumerable:!1,configurable:!0}),i.prototype.move=function(s){this.disabled||(s===sg.Up&&this.mY<this.mGame.GRID_SIZE?this.mY+=1:s===sg.Down&&this.mY>1?this.mY-=1:s===sg.Right&&this.mX<this.mGame.GRID_SIZE?this.mX+=1:s===sg.Left&&this.mX>1&&(this.mX-=1),this.render(),this.measure(),this.checkResult())},i.prototype.measure=function(){return this.mGame.getTile(this.x,this.y).measured=!0,this.mGame.getTile(this.x,this.y).measurement},i.prototype.reset=function(){this.mX=1,this.mY=1,this.render(),this.ux.finish(),this.ux.fill("#f06"),this.ux.radius(10),this.disabled=!1},i.prototype.render=function(){this.ux.finish();var s=this.mGame.UX_SIZE/this.mGame.GRID_SIZE;this.ux.animate().center(s*this.mX-s/2,this.mGame.UX_SIZE-s*this.mY+s/2),this.ux.front(),this.console()},i.prototype.checkResult=function(){var s=this,n=this.mGame.getTile(this.mX,this.mY);if(n.hasWumpus){this.ux.animate().fill("#000000").radius(5);var r=this.mGame.canvas.rect(this.mGame.UX_SIZE,this.mGame.UX_SIZE/this.mGame.GRID_SIZE).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2).fill("#000000"),a=this.mGame.canvas.text("Wumpus ate you.").font({family:"Helvetica",size:60,fill:"white"}).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2);setTimeout(function(){s.mGame.reset(),r.remove(),a.remove()},2500),this.disabled=!0}else if(n.hasPit){this.ux.animate().fill("#000000").radius(5);var o=this.mGame.canvas.rect(this.mGame.UX_SIZE,this.mGame.UX_SIZE/this.mGame.GRID_SIZE).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2).fill("#000000"),u=this.mGame.canvas.text("Oops, you fell in a Pit.").font({family:"Helvetica",size:60,fill:"white"}).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2);setTimeout(function(){s.mGame.reset(),o.remove(),u.remove()},2500),this.disabled=!0}else if(n.hasGold){this.ux.animate().fill("#FFD000").radius(25);var l=this.mGame.canvas.rect(this.mGame.UX_SIZE,this.mGame.UX_SIZE/this.mGame.GRID_SIZE).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2).fill("#FFD000"),f=this.mGame.canvas.text("You Won GOLD!.").font({family:"Helvetica",size:60,fill:"black"}).center(this.mGame.UX_SIZE/2,this.mGame.UX_SIZE/2);setTimeout(function(){s.mGame.reset(),l.remove(),f.remove()},2500),this.disabled=!0}},i.prototype.console=function(){var s=this.mGame.getTile(this.mX,this.mY);s.hasGold?ev("#agent-console").html("Thank you for helping me find all this gold"):s.hasPit||s.hasWumpus?ev("#agent-console").html("You were supposed to help me, I am dead now."):s.hasStench&&s.hasBreeze?ev("#agent-console").html("There is a <strong>stench</strong> and there is a <strong>breeze</strong>!!!"):s.hasStench?ev("#agent-console").html("What's that <strong>stench?</strong> Wumpus must be around."):s.hasBreeze?ev("#agent-console").html("There is a <strong>breeze</strong>. Careful not to fall in a pit."):ev("#agent-console").html("I feel <strong>safe</strong> here, nothing around.")},i}(),sg=function(i){return i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.Up=2]="Up",i[i.Down=3]="Down",i}({}),dne=ne(3124),pne=function(){function i(){this.GRID_SIZE=4,this.UX_SIZE=600,this.ELEMENT="drawing",this.tiles=[],this.canvas=dne(this.ELEMENT).size(this.UX_SIZE,this.UX_SIZE);for(var s=0;s<this.GRID_SIZE;s++){this.tiles[s]=[];for(var n=0;n<this.GRID_SIZE;n++)this.tiles[s][n]=new cne(s+1,this.GRID_SIZE-n,this.UX_SIZE/this.GRID_SIZE)}this.render(),this.agent=new fne(this),this.godSight=!1,this.modelFilter=new hne(this)}return Object.defineProperty(i.prototype,"godsight",{set:function(s){this.godSight=s,console.log("GodSight: "+s),this.render(),this.agent.render()},enumerable:!1,configurable:!0}),i.prototype.getTile=function(s,n){if(n=this.GRID_SIZE-n,(s-=1)<0||n<0||s>=this.GRID_SIZE||n>=this.GRID_SIZE)throw new Error("Accessing invalid tile index ("+s+","+n+")");return this.tiles[s][n]},i.prototype.getNeighbors=function(s){var n=[];return s.x>1&&n.push(this.getTile(s.x-1,s.y)),s.x<this.GRID_SIZE&&n.push(this.getTile(s.x+1,s.y)),s.y>1&&n.push(this.getTile(s.x,s.y-1)),s.y<this.GRID_SIZE&&n.push(this.getTile(s.x,s.y+1)),n},i.prototype.sensorUpdate=function(){for(var s=0;s<this.GRID_SIZE;s++)for(var n=0;n<this.GRID_SIZE;n++){for(var r=!1,a=!1,o=0,u=this.getNeighbors(this.tiles[s][n]);o<u.length;o++){var l=u[o];r=l.hasWumpus||r,a=l.hasPit||a}this.tiles[s][n].measurement=a?r?zs.StenchyBreeze:zs.Breeze:r?zs.Stench:zs.Safe,this.tiles[s][n].render()}},i.prototype.reset=function(){for(var s=0;s<this.GRID_SIZE;s++)for(var n=0;n<this.GRID_SIZE;n++)this.tiles[s][n].reset();this.getTile(1,1).measured=!0,this.agent.reset(),this.modelFilter.render()},i.prototype.render=function(){for(var s=this.UX_SIZE/this.GRID_SIZE,n=0;n<this.GRID_SIZE;n++)for(var r=0;r<this.GRID_SIZE;r++)this.tiles[n][r].canvas=this.canvas.nested().attr({x:s*n,y:s*r}),this.tiles[n][r].render(this.godSight)},i}(),vne=function(){function i(){}return i.prototype.ngOnInit=function(){var s=new pne;s.getTile(3,1).hasPit=!0,s.getTile(3,3).hasPit=!0,s.getTile(4,4).hasPit=!0,s.getTile(1,3).hasWumpus=!0,s.getTile(2,3).hasGold=!0,s.sensorUpdate(),ev("#mode-game").on("click",function(){s.godsight=!1}),ev("#mode-god").on("click",function(){s.godsight=!0}),ev("html").on("keydown",function(n){37===n.which||n.which==="A".charCodeAt(0)?(s.agent.move(sg.Left),s.modelFilter.render()):38===n.which||n.which==="W".charCodeAt(0)?(s.agent.move(sg.Up),s.modelFilter.render()):39===n.which||n.which==="D".charCodeAt(0)?(s.agent.move(sg.Right),s.modelFilter.render()):(40===n.which||n.which==="S".charCodeAt(0))&&(s.agent.move(sg.Down),s.modelFilter.render())})},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-illustrations-artificialintelligence-logicalagent"]],decls:168,vars:0,consts:[[1,"container"],["id","content",1,"row"],[1,"display-4"],["href","https://en.wikipedia.org/wiki/Partially_observable_Markov_decision_process"],["href","https://aima.cs.berkeley.edu/"],[1,"col-lg-12"],[1,"table","table-bordered","table-dark","text-center"],["scope","col","colspan","2",1,"text-center"],["scope","col",1,"text-center"],["scope","row",1,"text-center"],[2,"background-color","#55ff66","min-width","30px"],[2,"background-color","#ff0000"],[2,"background-color","#000000"],[2,"background-color","#660000"],[1,"col-lg-8"],["id","drawing",2,"margin","50px"],[1,"col-lg-4",2,"padding","50px"],["id","mode-game",1,"btn","btn-success",2,"margin","10px"],["id","mode-god",1,"btn","btn-danger",2,"margin","10px"],[2,"border","solid black","margin-top","50px","padding","20px"],[2,"margin-bottom","20px"],["id","agent-console"],[2,"padding-left","30px","padding-right","30px"],["id","drawing-models",1,"col-lg-10","offset-lg-1",2,"margin-top","20px","margin-bottom","20px"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Model Filtering"),v.qZA(),v.TgZ(4,"p"),v._uU(5," Classical Artificial Intelligence, from long before the era of Deep Neural Networks, was all about search. Ever since we realized that computers could crunch through massive amounts of data, we thought that we will put together rules that the computer would search through and achieve true intelligence. This would span everything from using simple integration formulae and substitution rules together with some heuristics to make the computers do Calculus. The same with playing games like Pacman, heuristics and some general rules couple with search should help us behave near optimally, as it does. Even today, when we have robots moving around the real world, after the perception is done by a neural network, the planning of where to go and what to do is done through search. "),v.qZA(),v.TgZ(6,"p"),v._uU(7," Model filtering is a form of search, where we maintain a set of possible states we are in, and as we explore the world we keep updating this set of belief states. This is the simplest (computationally inefficient, yet complete) solution we have to solving "),v.TgZ(8,"a",3),v._uU(9,"Partially Observable Markov Decision Processes (POMDP)"),v.qZA(),v._uU(10,". These are processes where we are supposed to try to behave optimally in the world, but some part of the state of the world is hidden from us. In the following blog and illustrations, we see an example of how the a simple game can be navigated with Model Filtering. This illustrations is derived from the "),v.TgZ(11,"a",4),v._uU(12,"Artificial Intelligence: A modern approach by Stuart Russel and Peter Norwig"),v.qZA(),v._uU(13,". "),v.qZA(),v.TgZ(14,"div",5),v.TgZ(15,"h1"),v._uU(16,"Wumpus World"),v.qZA(),v.TgZ(17,"p"),v._uU(18," The Wumpus world is a cave with a Monster and Deep Pits. But a huge pile of Gold lights up the cave and entices Logical Agents to pursue a journey of great risks to find the Gold. Take this journey with me and help me reason out the world, won't you? "),v.qZA(),v.TgZ(19,"ul"),v.TgZ(20,"li"),v.TgZ(21,"strong"),v._uU(22,"Reward: Gold"),v.qZA(),v._uU(23," - There is a pile of gold - Game ends with +1000 to score."),v.qZA(),v.TgZ(24,"li"),v.TgZ(25,"strong"),v._uU(26,"Penalty: Wumpus"),v.qZA(),v._uU(27," - There is one monster - Game ends with -1000 from score."),v.qZA(),v.TgZ(28,"li"),v.TgZ(29,"strong"),v._uU(30,"Penalty: Pit"),v.qZA(),v._uU(31," - There are many pits in grid - Game ends with -1000 from score."),v.qZA(),v.TgZ(32,"li"),v.TgZ(33,"strong"),v._uU(34,"Sensor: Breeze"),v.qZA(),v._uU(35," - There is a pit in an adjacent tile."),v.qZA(),v.TgZ(36,"li"),v.TgZ(37,"strong"),v._uU(38,"Sensor: Stench"),v.qZA(),v._uU(39," - There is Wumpus in an adjacent tile."),v.qZA(),v.TgZ(40,"li"),v.TgZ(41,"strong"),v._uU(42,"Time Evolution: All Moves"),v.qZA(),v._uU(43," - Score decreased by 1 point after every move."),v.qZA(),v.TgZ(44,"li"),v.TgZ(45,"strong"),v._uU(46,"Time Evolution: Up Move"),v.qZA(),v._uU(47," - Score decreased by 10 points after every move."),v.qZA(),v.qZA(),v.TgZ(48,"h4"),v._uU(49,"Use "),v.TgZ(50,"kbd"),v._uU(51,"w"),v.qZA(),v._uU(52,", "),v.TgZ(53,"kbd"),v._uU(54,"a"),v.qZA(),v._uU(55,", "),v.TgZ(56,"kbd"),v._uU(57,"s"),v.qZA(),v._uU(58,", and "),v.TgZ(59,"kbd"),v._uU(60,"d"),v.qZA(),v._uU(61," to play this game."),v.qZA(),v.TgZ(62,"table",6),v.TgZ(63,"thead"),v.TgZ(64,"tr"),v.TgZ(65,"th",7),v._uU(66,"Color"),v.qZA(),v.TgZ(67,"th",8),v._uU(68,"Measurement"),v.qZA(),v.TgZ(69,"th",8),v._uU(70,"Meaning"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(71,"tbody"),v.TgZ(72,"tr"),v.TgZ(73,"th",9),v._uU(74,"Green"),v.qZA(),v._UZ(75,"td",10),v.TgZ(76,"td"),v._uU(77,"Nothing"),v.qZA(),v.TgZ(78,"td"),v._uU(79,"Feels like fresh safe air, doesn't it!"),v.qZA(),v.qZA(),v.TgZ(80,"tr"),v.TgZ(81,"th",9),v._uU(82,"Red"),v.qZA(),v._UZ(83,"td",11),v.TgZ(84,"td"),v._uU(85,"Stench"),v.qZA(),v.TgZ(86,"td"),v._uU(87,"Wumpus is close by, adjacent to your cell"),v.qZA(),v.qZA(),v.TgZ(88,"tr"),v.TgZ(89,"th",9),v._uU(90,"Black"),v.qZA(),v._UZ(91,"td",12),v.TgZ(92,"td"),v._uU(93,"Breeze"),v.qZA(),v.TgZ(94,"td"),v._uU(95,"There is a Pit in one of the Adjacent cells"),v.qZA(),v.qZA(),v.TgZ(96,"tr"),v.TgZ(97,"th",9),v._uU(98,"Brown"),v.qZA(),v._UZ(99,"td",13),v.TgZ(100,"td"),v._uU(101,"Stenchy Breeze"),v.qZA(),v.TgZ(102,"td"),v._uU(103,"This is dangerous. You feel both a pit and the Wumpus."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(104,"div",14),v._UZ(105,"div",15),v.qZA(),v.TgZ(106,"div",16),v.TgZ(107,"h4"),v._uU(108,"You can play the Game in two modes."),v.qZA(),v.TgZ(109,"button",17),v._uU(110," See only the Measurements "),v.qZA(),v._UZ(111,"br"),v.TgZ(112,"button",18),v._uU(113," See the entire state of the Board "),v.qZA(),v.TgZ(114,"div",19),v.TgZ(115,"h3"),v.TgZ(116,"div",20),v.TgZ(117,"strong"),v._uU(118,"The UserAgent:"),v.qZA(),v.qZA(),v.TgZ(119,"div",21),v.TgZ(120,"span"),v._uU(121,"I feel safe here, nothing around."),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.qZA(),v.TgZ(122,"div",5),v.TgZ(123,"h1"),v._uU(124,"Model Filtering"),v.qZA(),v.TgZ(125,"p",22),v._uU(126," When going through the grid, the agent develops models of the world, of where the dangers might lie and tries to find the safe moves by contradicting these models using its knowledge base, which it has collected from the measurements it makes. Our visualization for this is the following. "),v.qZA(),v.TgZ(127,"ul"),v.TgZ(128,"li"),v._uU(129,"The agent constructs two models for each possible move, one for Wumpus and one for a Pit being in the square it's trying to go to. All models are labelled at the top."),v.qZA(),v.TgZ(130,"li"),v._uU(131,"When checking a model, the agent puts itself in the square it would have been in after the move, and assumes that Wumpus/Pit is there. ("),v.TgZ(132,"strong"),v._uU(133,"The agent is the pink dot"),v.qZA(),v._uU(134,")"),v.qZA(),v.TgZ(135,"li"),v._uU(136,"If checking for Wumpus, it labels all squares that would have a stench with "),v.TgZ(137,"strong"),v._uU(138,"red"),v.qZA(),v._uU(139,", and all other squared with "),v.TgZ(140,"strong"),v._uU(141,"green"),v.qZA(),v._uU(142,", for they would never have stench (only one Wumpus)"),v.qZA(),v.TgZ(143,"li"),v._uU(144,"If checking for Pits, it labels all the square where a breeze is expected with "),v.TgZ(145,"strong"),v._uU(146,"grey"),v.qZA(),v._uU(147," and lets be all other squares cause they provide no usable information."),v.qZA(),v.TgZ(148,"li"),v._uU(149,"Finally, it validates whether the measurements (shown on the rim, "),v.TgZ(150,"strong"),v._uU(151,"see legend above"),v.qZA(),v._uU(152,") are consistant with what it expected for the model."),v.qZA(),v.TgZ(153,"li"),v._uU(154,"If there is an incosistancy, that square is marked with a "),v.TgZ(155,"strong"),v._uU(156,"White X"),v.qZA(),v._uU(157,", and the model is declared invalid (red-band). Otherwise the models is valid (green-band)."),v.qZA(),v.TgZ(158,"li"),v._uU(159,"If either the model with a Pit, or the one with Wumpus cannot be refuted, then the move is unsafe to make, more exploration is needed to expand knowledge base."),v.qZA(),v.TgZ(160,"li"),v._uU(161,"The agent should keep executing all the possible moves that are safe and unexplored to eventually find the gold!"),v.qZA(),v.qZA(),v.qZA(),v._UZ(162,"div",23),v.TgZ(163,"div",5),v.TgZ(164,"h1"),v._uU(165,"Using Propositional Logic"),v.qZA(),v.TgZ(166,"p"),v._uU(167,"A Theorem prover can take up the observations and constraints on the environment, and use And/Or statements to prove which of the squares are safe to go to. This will be implemented soon, more details on Artificial Intelligence, A Modern Approach."),v.qZA(),v.qZA(),v.qZA(),v.qZA())},styles:[""]}),i}(),mne=ne(9553);function ej(i,s){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);s&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(i,a).enumerable})),n.push.apply(n,r)}return n}function Du(i){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?ej(Object(n),!0).forEach(function(r){(0,vr.Z)(i,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):ej(Object(n)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(n,r))})}return i}for(var gE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yE={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},xc=1001,Au=1003,rh=1006,BT=1008,ug=1009,lg=1015,wE=1016,UT=1020,EE=1022,cc=1023,kE=1026,VT=1027,CE=2400,DE=2401,Fl=3e3,Q_=3001,zT=35044,HT=35048,cg=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"addEventListener",value:function(n,r){void 0===this._listeners&&(this._listeners={});var a=this._listeners;void 0===a[n]&&(a[n]=[]),-1===a[n].indexOf(r)&&a[n].push(r)}},{key:"hasEventListener",value:function(n,r){if(void 0===this._listeners)return!1;var a=this._listeners;return void 0!==a[n]&&-1!==a[n].indexOf(r)}},{key:"removeEventListener",value:function(n,r){if(void 0!==this._listeners){var o=this._listeners[n];if(void 0!==o){var u=o.indexOf(r);-1!==u&&o.splice(u,1)}}}},{key:"dispatchEvent",value:function(n){if(void 0!==this._listeners){var a=this._listeners[n.type];if(void 0!==a){n.target=this;for(var o=a.slice(0),u=0,l=o.length;u<l;u++)o[u].call(this,n);n.target=null}}}}]),i}(),AE=Math.PI/180,GT=180/Math.PI,hl=[],jT=0;jT<256;jT++)hl[jT]=(jT<16?"0":"")+jT.toString(16);var qre="undefined"!=typeof crypto&&"randomUUID"in crypto;function Wh(){if(qre)return crypto.randomUUID().toUpperCase();var i=4294967295*Math.random()|0,s=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(hl[255&i]+hl[i>>8&255]+hl[i>>16&255]+hl[i>>24&255]+"-"+hl[255&s]+hl[s>>8&255]+"-"+hl[s>>16&15|64]+hl[s>>24&255]+"-"+hl[63&n|128]+hl[n>>8&255]+"-"+hl[n>>16&255]+hl[n>>24&255]+hl[255&r]+hl[r>>8&255]+hl[r>>16&255]+hl[r>>24&255]).toUpperCase()}function fl(i,s,n){return Math.max(s,Math.min(n,i))}function WT(i,s,n){return(1-n)*i+n*s}function jB(i){return 0==(i&i-1)&&0!==i}function Tj(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}var un=function(i){function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,s),this.x=n,this.y=r}return(0,R.Z)(s,[{key:"width",get:function(){return this.x},set:function(r){this.x=r}},{key:"height",get:function(){return this.y},set:function(r){this.y=r}},{key:"set",value:function(r,a){return this.x=r,this.y=a,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setComponent",value:function(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this}},{key:"add",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,a)):(this.x+=r.x,this.y+=r.y,this)}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this}},{key:"addVectors",value:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this}},{key:"addScaledVector",value:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this}},{key:"sub",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,a)):(this.x-=r.x,this.y-=r.y,this)}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this}},{key:"subVectors",value:function(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"applyMatrix3",value:function(r){var a=this.x,o=this.y,u=r.elements;return this.x=u[0]*a+u[3]*o+u[6],this.y=u[1]*a+u[4]*o+u[7],this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this}},{key:"clamp",value:function(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this}},{key:"clampScalar",value:function(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this}},{key:"clampLength",value:function(r,a){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(a,o)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y}},{key:"cross",value:function(r){return this.x*r.y-this.y*r.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var a=this.x-r.x,o=this.y-r.y;return a*a+o*o}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this}},{key:"lerpVectors",value:function(r,a,o){return this.x=r.x+(a.x-r.x)*o,this.y=r.y+(a.y-r.y)*o,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y}},{key:"fromArray",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[a],this.y=r[a+1],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[a]=this.x,r[a+1]=this.y,r}},{key:"fromBufferAttribute",value:function(r,a,o){return void 0!==o&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(a),this.y=r.getY(a),this}},{key:"rotateAround",value:function(r,a){var o=Math.cos(a),u=Math.sin(a),l=this.x-r.x,f=this.y-r.y;return this.x=l*o-f*u+r.x,this.y=l*u+f*o+r.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:i,value:Ke().mark(function n(){return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.x;case 2:return a.next=4,this.y;case 4:case"end":return a.stop()}},n,this)})}]),s}(Symbol.iterator);un.prototype.isVector2=!0;var dl=function(){function i(){(0,M.Z)(this,i),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return(0,R.Z)(i,[{key:"set",value:function(n,r,a,o,u,l,f,m,b){var w=this.elements;return w[0]=n,w[1]=o,w[2]=f,w[3]=r,w[4]=u,w[5]=m,w[6]=a,w[7]=l,w[8]=b,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(n){var r=this.elements,a=n.elements;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this}},{key:"extractBasis",value:function(n,r,a){return n.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),a.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(n){var r=n.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}},{key:"multiply",value:function(n){return this.multiplyMatrices(this,n)}},{key:"premultiply",value:function(n){return this.multiplyMatrices(n,this)}},{key:"multiplyMatrices",value:function(n,r){var a=n.elements,o=r.elements,u=this.elements,l=a[0],f=a[3],m=a[6],b=a[1],w=a[4],C=a[7],T=a[2],I=a[5],Z=a[8],Y=o[0],V=o[3],W=o[6],se=o[1],fe=o[4],ve=o[7],me=o[2],pe=o[5],ke=o[8];return u[0]=l*Y+f*se+m*me,u[3]=l*V+f*fe+m*pe,u[6]=l*W+f*ve+m*ke,u[1]=b*Y+w*se+C*me,u[4]=b*V+w*fe+C*pe,u[7]=b*W+w*ve+C*ke,u[2]=T*Y+I*se+Z*me,u[5]=T*V+I*fe+Z*pe,u[8]=T*W+I*ve+Z*ke,this}},{key:"multiplyScalar",value:function(n){var r=this.elements;return r[0]*=n,r[3]*=n,r[6]*=n,r[1]*=n,r[4]*=n,r[7]*=n,r[2]*=n,r[5]*=n,r[8]*=n,this}},{key:"determinant",value:function(){var n=this.elements,r=n[0],a=n[1],o=n[2],u=n[3],l=n[4],f=n[5],m=n[6],b=n[7],w=n[8];return r*l*w-r*f*b-a*u*w+a*f*m+o*u*b-o*l*m}},{key:"invert",value:function(){var n=this.elements,r=n[0],a=n[1],o=n[2],u=n[3],l=n[4],f=n[5],m=n[6],b=n[7],w=n[8],C=w*l-f*b,T=f*m-w*u,I=b*u-l*m,Z=r*C+a*T+o*I;if(0===Z)return this.set(0,0,0,0,0,0,0,0,0);var Y=1/Z;return n[0]=C*Y,n[1]=(o*b-w*a)*Y,n[2]=(f*a-o*l)*Y,n[3]=T*Y,n[4]=(w*r-o*m)*Y,n[5]=(o*u-f*r)*Y,n[6]=I*Y,n[7]=(a*m-b*r)*Y,n[8]=(l*r-a*u)*Y,this}},{key:"transpose",value:function(){var n,r=this.elements;return n=r[1],r[1]=r[3],r[3]=n,n=r[2],r[2]=r[6],r[6]=n,n=r[5],r[5]=r[7],r[7]=n,this}},{key:"getNormalMatrix",value:function(n){return this.setFromMatrix4(n).invert().transpose()}},{key:"transposeIntoArray",value:function(n){var r=this.elements;return n[0]=r[0],n[1]=r[3],n[2]=r[6],n[3]=r[1],n[4]=r[4],n[5]=r[7],n[6]=r[2],n[7]=r[5],n[8]=r[8],this}},{key:"setUvTransform",value:function(n,r,a,o,u,l,f){var m=Math.cos(u),b=Math.sin(u);return this.set(a*m,a*b,-a*(m*l+b*f)+l+n,-o*b,o*m,-o*(-b*l+m*f)+f+r,0,0,1),this}},{key:"scale",value:function(n,r){var a=this.elements;return a[0]*=n,a[3]*=n,a[6]*=n,a[1]*=r,a[4]*=r,a[7]*=r,this}},{key:"rotate",value:function(n){var r=Math.cos(n),a=Math.sin(n),o=this.elements,u=o[0],l=o[3],f=o[6],m=o[1],b=o[4],w=o[7];return o[0]=r*u+a*m,o[3]=r*l+a*b,o[6]=r*f+a*w,o[1]=-a*u+r*m,o[4]=-a*l+r*b,o[7]=-a*f+r*w,this}},{key:"translate",value:function(n,r){var a=this.elements;return a[0]+=n*a[2],a[3]+=n*a[5],a[6]+=n*a[8],a[1]+=r*a[2],a[4]+=r*a[5],a[7]+=r*a[8],this}},{key:"equals",value:function(n){for(var r=this.elements,a=n.elements,o=0;o<9;o++)if(r[o]!==a[o])return!1;return!0}},{key:"fromArray",value:function(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0;a<9;a++)this.elements[a]=n[a+r];return this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.elements;return n[r]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3],n[r+4]=a[4],n[r+5]=a[5],n[r+6]=a[6],n[r+7]=a[7],n[r+8]=a[8],n}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),i}();function xj(i){if(0===i.length)return-1/0;for(var s=i[0],n=1,r=i.length;n<r;++n)i[n]>s&&(s=i[n]);return s}function ER(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}dl.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var TE,xE=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,null,[{key:"getDataURL",value:function(n){if(/^data:/i.test(n.src)||"undefined"==typeof HTMLCanvasElement)return n.src;var r;if(n instanceof HTMLCanvasElement)r=n;else{void 0===TE&&(TE=ER("canvas")),TE.width=n.width,TE.height=n.height;var a=TE.getContext("2d");n instanceof ImageData?a.putImageData(n,0,0):a.drawImage(n,0,0,n.width,n.height),r=TE}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",n),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}}]),i}(),lie=0,Mc=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xc,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xc,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rh,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:BT,b=arguments.length>6&&void 0!==arguments[6]?arguments[6]:cc,w=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ug,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,T=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Fl;return(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,Ja.Z)(r),"id",{value:lie++}),r.uuid=Wh(),r.name="",r.image=a,r.mipmaps=[],r.mapping=o,r.wrapS=u,r.wrapT=l,r.magFilter=f,r.minFilter=m,r.anisotropy=C,r.format=b,r.internalFormat=null,r.type=w,r.offset=new un(0,0),r.repeat=new un(1,1),r.center=new un(0,0),r.rotation=0,r.matrixAutoUpdate=!0,r.matrix=new dl,r.generateMipmaps=!0,r.premultiplyAlpha=!1,r.flipY=!0,r.unpackAlignment=4,r.encoding=T,r.version=0,r.onUpdate=null,r.isRenderTargetTexture=!1,r}return(0,R.Z)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){return this.name=a.name,this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this}},{key:"toJSON",value:function(a){var o=void 0===a||"string"==typeof a;if(!o&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var u={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var l=this.image;if(void 0===l.uuid&&(l.uuid=Wh()),!o&&void 0===a.images[l.uuid]){var f;if(Array.isArray(l)){f=[];for(var m=0,b=l.length;m<b;m++)f.push(WB(l[m].isDataTexture?l[m].image:l[m]))}else f=WB(l);a.images[l.uuid]={uuid:l.uuid,url:f}}u.image=l.uuid}return o||(a.textures[this.uuid]=u),u}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(a){if(300!==this.mapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case 1e3:a.x=a.x-Math.floor(a.x);break;case xc:a.x=a.x<0?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case 1e3:a.y=a.y-Math.floor(a.y);break;case xc:a.y=a.y<0?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}},{key:"needsUpdate",set:function(a){!0===a&&this.version++}}]),n}(cg);function WB(i){return"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap?xE.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Mc.DEFAULT_IMAGE=void 0,Mc.DEFAULT_MAPPING=300,Mc.prototype.isTexture=!0;var bs=function(i){function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,M.Z)(this,s),this.x=n,this.y=r,this.z=a,this.w=o}return(0,R.Z)(s,[{key:"width",get:function(){return this.z},set:function(r){this.z=r}},{key:"height",get:function(){return this.w},set:function(r){this.w=r}},{key:"set",value:function(r,a,o,u){return this.x=r,this.y=a,this.z=o,this.w=u,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setW",value:function(r){return this.w=r,this}},{key:"setComponent",value:function(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0!==r.w?r.w:1,this}},{key:"add",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,a)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this)}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this}},{key:"addVectors",value:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this.w=r.w+a.w,this}},{key:"addScaledVector",value:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a,this.w+=r.w*a,this}},{key:"sub",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,a)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this)}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this}},{key:"subVectors",value:function(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this.z=r.z-a.z,this.w=r.w-a.w,this}},{key:"multiply",value:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w,this}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this}},{key:"applyMatrix4",value:function(r){var a=this.x,o=this.y,u=this.z,l=this.w,f=r.elements;return this.x=f[0]*a+f[4]*o+f[8]*u+f[12]*l,this.y=f[1]*a+f[5]*o+f[9]*u+f[13]*l,this.z=f[2]*a+f[6]*o+f[10]*u+f[14]*l,this.w=f[3]*a+f[7]*o+f[11]*u+f[15]*l,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"setAxisAngleFromQuaternion",value:function(r){this.w=2*Math.acos(r.w);var a=Math.sqrt(1-r.w*r.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=r.x/a,this.y=r.y/a,this.z=r.z/a),this}},{key:"setAxisAngleFromRotationMatrix",value:function(r){var a,o,u,l,f=.01,m=.1,b=r.elements,w=b[0],C=b[4],T=b[8],I=b[1],Z=b[5],Y=b[9],V=b[2],W=b[6],se=b[10];if(Math.abs(C-I)<f&&Math.abs(T-V)<f&&Math.abs(Y-W)<f){if(Math.abs(C+I)<m&&Math.abs(T+V)<m&&Math.abs(Y+W)<m&&Math.abs(w+Z+se-3)<m)return this.set(1,0,0,0),this;a=Math.PI;var fe=(w+1)/2,ve=(Z+1)/2,me=(se+1)/2,pe=(C+I)/4,ke=(T+V)/4,je=(Y+W)/4;return fe>ve&&fe>me?fe<f?(o=0,u=.707106781,l=.707106781):(u=pe/(o=Math.sqrt(fe)),l=ke/o):ve>me?ve<f?(o=.707106781,u=0,l=.707106781):(o=pe/(u=Math.sqrt(ve)),l=je/u):me<f?(o=.707106781,u=.707106781,l=0):(o=ke/(l=Math.sqrt(me)),u=je/l),this.set(o,u,l,a),this}var qe=Math.sqrt((W-Y)*(W-Y)+(T-V)*(T-V)+(I-C)*(I-C));return Math.abs(qe)<.001&&(qe=1),this.x=(W-Y)/qe,this.y=(T-V)/qe,this.z=(I-C)/qe,this.w=Math.acos((w+Z+se-1)/2),this}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this}},{key:"clamp",value:function(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this.z=Math.max(r.z,Math.min(a.z,this.z)),this.w=Math.max(r.w,Math.min(a.w,this.w)),this}},{key:"clampScalar",value:function(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this.z=Math.max(r,Math.min(a,this.z)),this.w=Math.max(r,Math.min(a,this.w)),this}},{key:"clampLength",value:function(r,a){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(a,o)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this.z+=(r.z-this.z)*a,this.w+=(r.w-this.w)*a,this}},{key:"lerpVectors",value:function(r,a,o){return this.x=r.x+(a.x-r.x)*o,this.y=r.y+(a.y-r.y)*o,this.z=r.z+(a.z-r.z)*o,this.w=r.w+(a.w-r.w)*o,this}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w}},{key:"fromArray",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[a],this.y=r[a+1],this.z=r[a+2],this.w=r[a+3],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[a]=this.x,r[a+1]=this.y,r[a+2]=this.z,r[a+3]=this.w,r}},{key:"fromBufferAttribute",value:function(r,a,o){return void 0!==o&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(a),this.y=r.getY(a),this.z=r.getZ(a),this.w=r.getW(a),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:i,value:Ke().mark(function n(){return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.x;case 2:return a.next=4,this.y;case 4:return a.next=6,this.z;case 6:return a.next=8,this.w;case 8:case"end":return a.stop()}},n,this)})}]),s}(Symbol.iterator);bs.prototype.isVector4=!0;var Xd=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,M.Z)(this,n),(o=s.call(this)).width=r,o.height=a,o.depth=1,o.scissor=new bs(0,0,r,a),o.scissorTest=!1,o.viewport=new bs(0,0,r,a),o.texture=new Mc(void 0,u.mapping,u.wrapS,u.wrapT,u.magFilter,u.minFilter,u.format,u.type,u.anisotropy,u.encoding),o.texture.isRenderTargetTexture=!0,o.texture.image={width:r,height:a,depth:1},o.texture.generateMipmaps=void 0!==u.generateMipmaps&&u.generateMipmaps,o.texture.internalFormat=void 0!==u.internalFormat?u.internalFormat:null,o.texture.minFilter=void 0!==u.minFilter?u.minFilter:rh,o.depthBuffer=void 0===u.depthBuffer||u.depthBuffer,o.stencilBuffer=void 0!==u.stencilBuffer&&u.stencilBuffer,o.depthTexture=void 0!==u.depthTexture?u.depthTexture:null,o}return(0,R.Z)(n,[{key:"setTexture",value:function(a){a.image={width:this.width,height:this.height,depth:this.depth},this.texture=a}},{key:"setSize",value:function(a,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==a||this.height!==o||this.depth!==u)&&(this.width=a,this.height=o,this.depth=u,this.texture.image.width=a,this.texture.image.height=o,this.texture.image.depth=u,this.dispose()),this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){return this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.image=Du({},this.texture.image),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(cg);Xd.prototype.isWebGLRenderTarget=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;(0,M.Z)(this,n);var l=(u=s.call(this,r,a)).texture;u.texture=[];for(var f=0;f<o;f++)u.texture[f]=l.clone();return u}return(0,R.Z)(n,[{key:"setSize",value:function(a,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==a||this.height!==o||this.depth!==u){this.width=a,this.height=o,this.depth=u;for(var l=0,f=this.texture.length;l<f;l++)this.texture[l].image.width=a,this.texture[l].image.height=o,this.texture[l].image.depth=u;this.dispose()}return this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o),this}},{key:"copy",value:function(a){this.dispose(),this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this.texture.length=0;for(var o=0,u=a.texture.length;o<u;o++)this.texture[o]=a.texture[o].clone();return this}}]),n}(Xd).prototype.isWebGLMultipleRenderTargets=!0;var Mj=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a,o)).samples=4,u}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.samples=a.samples,this}}]),n}(Xd);Mj.prototype.isWebGLMultisampleRenderTarget=!0;var Gu=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,M.Z)(this,i),this._x=s,this._y=n,this._z=r,this._w=a}return(0,R.Z)(i,[{key:"x",get:function(){return this._x},set:function(n){this._x=n,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(n){this._z=n,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(n){this._w=n,this._onChangeCallback()}},{key:"set",value:function(n,r,a,o){return this._x=n,this._y=r,this._z=a,this._w=o,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(n,r){if(!n||!n.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var a=n._x,o=n._y,u=n._z,l=n._order,f=Math.cos,m=Math.sin,b=f(a/2),w=f(o/2),C=f(u/2),T=m(a/2),I=m(o/2),Z=m(u/2);switch(l){case"XYZ":this._x=T*w*C+b*I*Z,this._y=b*I*C-T*w*Z,this._z=b*w*Z+T*I*C,this._w=b*w*C-T*I*Z;break;case"YXZ":this._x=T*w*C+b*I*Z,this._y=b*I*C-T*w*Z,this._z=b*w*Z-T*I*C,this._w=b*w*C+T*I*Z;break;case"ZXY":this._x=T*w*C-b*I*Z,this._y=b*I*C+T*w*Z,this._z=b*w*Z+T*I*C,this._w=b*w*C-T*I*Z;break;case"ZYX":this._x=T*w*C-b*I*Z,this._y=b*I*C+T*w*Z,this._z=b*w*Z-T*I*C,this._w=b*w*C+T*I*Z;break;case"YZX":this._x=T*w*C+b*I*Z,this._y=b*I*C+T*w*Z,this._z=b*w*Z-T*I*C,this._w=b*w*C-T*I*Z;break;case"XZY":this._x=T*w*C-b*I*Z,this._y=b*I*C-T*w*Z,this._z=b*w*Z+T*I*C,this._w=b*w*C+T*I*Z;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return!1!==r&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(n,r){var a=r/2,o=Math.sin(a);return this._x=n.x*o,this._y=n.y*o,this._z=n.z*o,this._w=Math.cos(a),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(n){var r=n.elements,a=r[0],o=r[4],u=r[8],l=r[1],f=r[5],m=r[9],b=r[2],w=r[6],C=r[10],T=a+f+C;if(T>0){var I=.5/Math.sqrt(T+1);this._w=.25/I,this._x=(w-m)*I,this._y=(u-b)*I,this._z=(l-o)*I}else if(a>f&&a>C){var Z=2*Math.sqrt(1+a-f-C);this._w=(w-m)/Z,this._x=.25*Z,this._y=(o+l)/Z,this._z=(u+b)/Z}else if(f>C){var Y=2*Math.sqrt(1+f-a-C);this._w=(u-b)/Y,this._x=(o+l)/Y,this._y=.25*Y,this._z=(m+w)/Y}else{var V=2*Math.sqrt(1+C-a-f);this._w=(l-o)/V,this._x=(u+b)/V,this._y=(m+w)/V,this._z=.25*V}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(n,r){var a=n.dot(r)+1;return a<Number.EPSILON?(a=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=a):(this._x=0,this._y=-n.z,this._z=n.y,this._w=a)):(this._x=n.y*r.z-n.z*r.y,this._y=n.z*r.x-n.x*r.z,this._z=n.x*r.y-n.y*r.x,this._w=a),this.normalize()}},{key:"angleTo",value:function(n){return 2*Math.acos(Math.abs(fl(this.dot(n),-1,1)))}},{key:"rotateTowards",value:function(n,r){var a=this.angleTo(n);if(0===a)return this;var o=Math.min(1,r/a);return this.slerp(n,o),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var n=this.length();return 0===n?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(n=1/n),this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}},{key:"multiply",value:function(n,r){return void 0!==r?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(n,r)):this.multiplyQuaternions(this,n)}},{key:"premultiply",value:function(n){return this.multiplyQuaternions(n,this)}},{key:"multiplyQuaternions",value:function(n,r){var a=n._x,o=n._y,u=n._z,l=n._w,f=r._x,m=r._y,b=r._z,w=r._w;return this._x=a*w+l*f+o*b-u*m,this._y=o*w+l*m+u*f-a*b,this._z=u*w+l*b+a*m-o*f,this._w=l*w-a*f-o*m-u*b,this._onChangeCallback(),this}},{key:"slerp",value:function(n,r){if(0===r)return this;if(1===r)return this.copy(n);var a=this._x,o=this._y,u=this._z,l=this._w,f=l*n._w+a*n._x+o*n._y+u*n._z;if(f<0?(this._w=-n._w,this._x=-n._x,this._y=-n._y,this._z=-n._z,f=-f):this.copy(n),f>=1)return this._w=l,this._x=a,this._y=o,this._z=u,this;var m=1-f*f;if(m<=Number.EPSILON){var b=1-r;return this._w=b*l+r*this._w,this._x=b*a+r*this._x,this._y=b*o+r*this._y,this._z=b*u+r*this._z,this.normalize(),this._onChangeCallback(),this}var w=Math.sqrt(m),C=Math.atan2(w,f),T=Math.sin((1-r)*C)/w,I=Math.sin(r*C)/w;return this._w=l*T+this._w*I,this._x=a*T+this._x*I,this._y=o*T+this._y*I,this._z=u*T+this._z*I,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(n,r,a){this.copy(n).slerp(r,a)}},{key:"random",value:function(){var n=Math.random(),r=Math.sqrt(1-n),a=Math.sqrt(n),o=2*Math.PI*Math.random(),u=2*Math.PI*Math.random();return this.set(r*Math.cos(o),a*Math.sin(u),a*Math.cos(u),r*Math.sin(o))}},{key:"equals",value:function(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}},{key:"fromArray",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=n[r],this._y=n[r+1],this._z=n[r+2],this._w=n[r+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n[r]=this._x,n[r+1]=this._y,n[r+2]=this._z,n[r+3]=this._w,n}},{key:"fromBufferAttribute",value:function(n,r){return this._x=n.getX(r),this._y=n.getY(r),this._z=n.getZ(r),this._w=n.getW(r),this}},{key:"_onChange",value:function(n){return this._onChangeCallback=n,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(n,r,a,o){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),a.slerpQuaternions(n,r,o)}},{key:"slerpFlat",value:function(n,r,a,o,u,l,f){var m=a[o+0],b=a[o+1],w=a[o+2],C=a[o+3],T=u[l+0],I=u[l+1],Z=u[l+2],Y=u[l+3];if(0===f)return n[r+0]=m,n[r+1]=b,n[r+2]=w,void(n[r+3]=C);if(1===f)return n[r+0]=T,n[r+1]=I,n[r+2]=Z,void(n[r+3]=Y);if(C!==Y||m!==T||b!==I||w!==Z){var V=1-f,W=m*T+b*I+w*Z+C*Y,se=W>=0?1:-1,fe=1-W*W;if(fe>Number.EPSILON){var ve=Math.sqrt(fe),me=Math.atan2(ve,W*se);V=Math.sin(V*me)/ve,f=Math.sin(f*me)/ve}var pe=f*se;if(m=m*V+T*pe,b=b*V+I*pe,w=w*V+Z*pe,C=C*V+Y*pe,V===1-f){var ke=1/Math.sqrt(m*m+b*b+w*w+C*C);m*=ke,b*=ke,w*=ke,C*=ke}}n[r]=m,n[r+1]=b,n[r+2]=w,n[r+3]=C}},{key:"multiplyQuaternionsFlat",value:function(n,r,a,o,u,l){var f=a[o],m=a[o+1],b=a[o+2],w=a[o+3],C=u[l],T=u[l+1],I=u[l+2],Z=u[l+3];return n[r]=f*Z+w*C+m*I-b*T,n[r+1]=m*Z+w*T+b*C-f*I,n[r+2]=b*Z+w*I+f*T-m*C,n[r+3]=w*Z-f*C-m*T-b*I,n}}]),i}();Gu.prototype.isQuaternion=!0;var Ue=function(i){function s(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,M.Z)(this,s),this.x=n,this.y=r,this.z=a}return(0,R.Z)(s,[{key:"set",value:function(r,a,o){return void 0===o&&(o=this.z),this.x=r,this.y=a,this.z=o,this}},{key:"setScalar",value:function(r){return this.x=r,this.y=r,this.z=r,this}},{key:"setX",value:function(r){return this.x=r,this}},{key:"setY",value:function(r){return this.y=r,this}},{key:"setZ",value:function(r){return this.z=r,this}},{key:"setComponent",value:function(r,a){switch(r){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+r)}return this}},{key:"getComponent",value:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this}},{key:"add",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,a)):(this.x+=r.x,this.y+=r.y,this.z+=r.z,this)}},{key:"addScalar",value:function(r){return this.x+=r,this.y+=r,this.z+=r,this}},{key:"addVectors",value:function(r,a){return this.x=r.x+a.x,this.y=r.y+a.y,this.z=r.z+a.z,this}},{key:"addScaledVector",value:function(r,a){return this.x+=r.x*a,this.y+=r.y*a,this.z+=r.z*a,this}},{key:"sub",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,a)):(this.x-=r.x,this.y-=r.y,this.z-=r.z,this)}},{key:"subScalar",value:function(r){return this.x-=r,this.y-=r,this.z-=r,this}},{key:"subVectors",value:function(r,a){return this.x=r.x-a.x,this.y=r.y-a.y,this.z=r.z-a.z,this}},{key:"multiply",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,a)):(this.x*=r.x,this.y*=r.y,this.z*=r.z,this)}},{key:"multiplyScalar",value:function(r){return this.x*=r,this.y*=r,this.z*=r,this}},{key:"multiplyVectors",value:function(r,a){return this.x=r.x*a.x,this.y=r.y*a.y,this.z=r.z*a.z,this}},{key:"applyEuler",value:function(r){return r&&r.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ij.setFromEuler(r))}},{key:"applyAxisAngle",value:function(r,a){return this.applyQuaternion(Ij.setFromAxisAngle(r,a))}},{key:"applyMatrix3",value:function(r){var a=this.x,o=this.y,u=this.z,l=r.elements;return this.x=l[0]*a+l[3]*o+l[6]*u,this.y=l[1]*a+l[4]*o+l[7]*u,this.z=l[2]*a+l[5]*o+l[8]*u,this}},{key:"applyNormalMatrix",value:function(r){return this.applyMatrix3(r).normalize()}},{key:"applyMatrix4",value:function(r){var a=this.x,o=this.y,u=this.z,l=r.elements,f=1/(l[3]*a+l[7]*o+l[11]*u+l[15]);return this.x=(l[0]*a+l[4]*o+l[8]*u+l[12])*f,this.y=(l[1]*a+l[5]*o+l[9]*u+l[13])*f,this.z=(l[2]*a+l[6]*o+l[10]*u+l[14])*f,this}},{key:"applyQuaternion",value:function(r){var a=this.x,o=this.y,u=this.z,l=r.x,f=r.y,m=r.z,b=r.w,w=b*a+f*u-m*o,C=b*o+m*a-l*u,T=b*u+l*o-f*a,I=-l*a-f*o-m*u;return this.x=w*b+I*-l+C*-m-T*-f,this.y=C*b+I*-f+T*-l-w*-m,this.z=T*b+I*-m+w*-f-C*-l,this}},{key:"project",value:function(r){return this.applyMatrix4(r.matrixWorldInverse).applyMatrix4(r.projectionMatrix)}},{key:"unproject",value:function(r){return this.applyMatrix4(r.projectionMatrixInverse).applyMatrix4(r.matrixWorld)}},{key:"transformDirection",value:function(r){var a=this.x,o=this.y,u=this.z,l=r.elements;return this.x=l[0]*a+l[4]*o+l[8]*u,this.y=l[1]*a+l[5]*o+l[9]*u,this.z=l[2]*a+l[6]*o+l[10]*u,this.normalize()}},{key:"divide",value:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this}},{key:"divideScalar",value:function(r){return this.multiplyScalar(1/r)}},{key:"min",value:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this}},{key:"max",value:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this}},{key:"clamp",value:function(r,a){return this.x=Math.max(r.x,Math.min(a.x,this.x)),this.y=Math.max(r.y,Math.min(a.y,this.y)),this.z=Math.max(r.z,Math.min(a.z,this.z)),this}},{key:"clampScalar",value:function(r,a){return this.x=Math.max(r,Math.min(a,this.x)),this.y=Math.max(r,Math.min(a,this.y)),this.z=Math.max(r,Math.min(a,this.z)),this}},{key:"clampLength",value:function(r,a){var o=this.length();return this.divideScalar(o||1).multiplyScalar(Math.max(r,Math.min(a,o)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(r){return this.x*r.x+this.y*r.y+this.z*r.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(r){return this.normalize().multiplyScalar(r)}},{key:"lerp",value:function(r,a){return this.x+=(r.x-this.x)*a,this.y+=(r.y-this.y)*a,this.z+=(r.z-this.z)*a,this}},{key:"lerpVectors",value:function(r,a,o){return this.x=r.x+(a.x-r.x)*o,this.y=r.y+(a.y-r.y)*o,this.z=r.z+(a.z-r.z)*o,this}},{key:"cross",value:function(r,a){return void 0!==a?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,a)):this.crossVectors(this,r)}},{key:"crossVectors",value:function(r,a){var o=r.x,u=r.y,l=r.z,f=a.x,m=a.y,b=a.z;return this.x=u*b-l*m,this.y=l*f-o*b,this.z=o*m-u*f,this}},{key:"projectOnVector",value:function(r){var a=r.lengthSq();if(0===a)return this.set(0,0,0);var o=r.dot(this)/a;return this.copy(r).multiplyScalar(o)}},{key:"projectOnPlane",value:function(r){return qB.copy(this).projectOnVector(r),this.sub(qB)}},{key:"reflect",value:function(r){return this.sub(qB.copy(r).multiplyScalar(2*this.dot(r)))}},{key:"angleTo",value:function(r){var a=Math.sqrt(this.lengthSq()*r.lengthSq());if(0===a)return Math.PI/2;var o=this.dot(r)/a;return Math.acos(fl(o,-1,1))}},{key:"distanceTo",value:function(r){return Math.sqrt(this.distanceToSquared(r))}},{key:"distanceToSquared",value:function(r){var a=this.x-r.x,o=this.y-r.y,u=this.z-r.z;return a*a+o*o+u*u}},{key:"manhattanDistanceTo",value:function(r){return Math.abs(this.x-r.x)+Math.abs(this.y-r.y)+Math.abs(this.z-r.z)}},{key:"setFromSpherical",value:function(r){return this.setFromSphericalCoords(r.radius,r.phi,r.theta)}},{key:"setFromSphericalCoords",value:function(r,a,o){var u=Math.sin(a)*r;return this.x=u*Math.sin(o),this.y=Math.cos(a)*r,this.z=u*Math.cos(o),this}},{key:"setFromCylindrical",value:function(r){return this.setFromCylindricalCoords(r.radius,r.theta,r.y)}},{key:"setFromCylindricalCoords",value:function(r,a,o){return this.x=r*Math.sin(a),this.y=o,this.z=r*Math.cos(a),this}},{key:"setFromMatrixPosition",value:function(r){var a=r.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}},{key:"setFromMatrixScale",value:function(r){var a=this.setFromMatrixColumn(r,0).length(),o=this.setFromMatrixColumn(r,1).length(),u=this.setFromMatrixColumn(r,2).length();return this.x=a,this.y=o,this.z=u,this}},{key:"setFromMatrixColumn",value:function(r,a){return this.fromArray(r.elements,4*a)}},{key:"setFromMatrix3Column",value:function(r,a){return this.fromArray(r.elements,3*a)}},{key:"equals",value:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z}},{key:"fromArray",value:function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=r[a],this.y=r[a+1],this.z=r[a+2],this}},{key:"toArray",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r[a]=this.x,r[a+1]=this.y,r[a+2]=this.z,r}},{key:"fromBufferAttribute",value:function(r,a,o){return void 0!==o&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(a),this.y=r.getY(a),this.z=r.getZ(a),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var r=2*(Math.random()-.5),a=Math.random()*Math.PI*2,o=Math.sqrt(1-Math.pow(r,2));return this.x=o*Math.cos(a),this.y=o*Math.sin(a),this.z=r,this}},{key:i,value:Ke().mark(function n(){return Ke().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.x;case 2:return a.next=4,this.y;case 4:return a.next=6,this.z;case 6:case"end":return a.stop()}},n,this)})}]),s}(Symbol.iterator);Ue.prototype.isVector3=!0;var qB=new Ue,Ij=new Gu,qh=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue(-1/0,-1/0,-1/0);(0,M.Z)(this,i),this.min=s,this.max=n}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.min.copy(n),this.max.copy(r),this}},{key:"setFromArray",value:function(n){for(var r=1/0,a=1/0,o=1/0,u=-1/0,l=-1/0,f=-1/0,m=0,b=n.length;m<b;m+=3){var w=n[m],C=n[m+1],T=n[m+2];w<r&&(r=w),C<a&&(a=C),T<o&&(o=T),w>u&&(u=w),C>l&&(l=C),T>f&&(f=T)}return this.min.set(r,a,o),this.max.set(u,l,f),this}},{key:"setFromBufferAttribute",value:function(n){for(var r=1/0,a=1/0,o=1/0,u=-1/0,l=-1/0,f=-1/0,m=0,b=n.count;m<b;m++){var w=n.getX(m),C=n.getY(m),T=n.getZ(m);w<r&&(r=w),C<a&&(a=C),T<o&&(o=T),w>u&&(u=w),C>l&&(l=C),T>f&&(f=T)}return this.min.set(r,a,o),this.max.set(u,l,f),this}},{key:"setFromPoints",value:function(n){this.makeEmpty();for(var r=0,a=n.length;r<a;r++)this.expandByPoint(n[r]);return this}},{key:"setFromCenterAndSize",value:function(n,r){var a=qT.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(a),this.max.copy(n).add(a),this}},{key:"setFromObject",value:function(n){return this.makeEmpty(),this.expandByObject(n)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.min.copy(n.min),this.max.copy(n.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(n){return this.min.min(n),this.max.max(n),this}},{key:"expandByVector",value:function(n){return this.min.sub(n),this.max.add(n),this}},{key:"expandByScalar",value:function(n){return this.min.addScalar(-n),this.max.addScalar(n),this}},{key:"expandByObject",value:function(n){n.updateWorldMatrix(!1,!1);var r=n.geometry;void 0!==r&&(null===r.boundingBox&&r.computeBoundingBox(),YB.copy(r.boundingBox),YB.applyMatrix4(n.matrixWorld),this.union(YB));for(var a=n.children,o=0,u=a.length;o<u;o++)this.expandByObject(a[o]);return this}},{key:"containsPoint",value:function(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y||n.z<this.min.z||n.z>this.max.z)}},{key:"containsBox",value:function(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}},{key:"getParameter",value:function(n,r){return r.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y||n.max.z<this.min.z||n.min.z>this.max.z)}},{key:"intersectsSphere",value:function(n){return this.clampPoint(n.center,qT),qT.distanceToSquared(n.center)<=n.radius*n.radius}},{key:"intersectsPlane",value:function(n){var r,a;return n.normal.x>0?(r=n.normal.x*this.min.x,a=n.normal.x*this.max.x):(r=n.normal.x*this.max.x,a=n.normal.x*this.min.x),n.normal.y>0?(r+=n.normal.y*this.min.y,a+=n.normal.y*this.max.y):(r+=n.normal.y*this.max.y,a+=n.normal.y*this.min.y),n.normal.z>0?(r+=n.normal.z*this.min.z,a+=n.normal.z*this.max.z):(r+=n.normal.z*this.max.z,a+=n.normal.z*this.min.z),r<=-n.constant&&a>=-n.constant}},{key:"intersectsTriangle",value:function(n){if(this.isEmpty())return!1;this.getCenter(YT),kR.subVectors(this.max,YT),ME.subVectors(n.a,YT),IE.subVectors(n.b,YT),PE.subVectors(n.c,YT),hg.subVectors(IE,ME),fg.subVectors(PE,IE),J_.subVectors(ME,PE);var r=[0,-hg.z,hg.y,0,-fg.z,fg.y,0,-J_.z,J_.y,hg.z,0,-hg.x,fg.z,0,-fg.x,J_.z,0,-J_.x,-hg.y,hg.x,0,-fg.y,fg.x,0,-J_.y,J_.x,0];return!(!KB(r,ME,IE,PE,kR)||(r=[1,0,0,0,1,0,0,0,1],!KB(r,ME,IE,PE,kR)))&&(CR.crossVectors(hg,fg),KB(r=[CR.x,CR.y,CR.z],ME,IE,PE,kR))}},{key:"clampPoint",value:function(n,r){return r.copy(n).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(n){return qT.copy(n).clamp(this.min,this.max).sub(n).length()}},{key:"getBoundingSphere",value:function(n){return this.getCenter(n.center),n.radius=.5*this.getSize(qT).length(),n}},{key:"intersect",value:function(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(n){return this.min.min(n.min),this.max.max(n.max),this}},{key:"applyMatrix4",value:function(n){return this.isEmpty()||(nv[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),nv[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),nv[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),nv[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),nv[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),nv[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),nv[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),nv[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(nv)),this}},{key:"translate",value:function(n){return this.min.add(n),this.max.add(n),this}},{key:"equals",value:function(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}]),i}();qh.prototype.isBox3=!0;var nv=[new Ue,new Ue,new Ue,new Ue,new Ue,new Ue,new Ue,new Ue],qT=new Ue,YB=new qh,ME=new Ue,IE=new Ue,PE=new Ue,hg=new Ue,fg=new Ue,J_=new Ue,YT=new Ue,kR=new Ue,CR=new Ue,e0=new Ue;function KB(i,s,n,r,a){for(var o=0,u=i.length-3;o<=u;o+=3){e0.fromArray(i,o);var l=a.x*Math.abs(e0.x)+a.y*Math.abs(e0.y)+a.z*Math.abs(e0.z),f=s.dot(e0),m=n.dot(e0),b=r.dot(e0);if(Math.max(-Math.max(f,m,b),Math.min(f,m,b))>l)return!1}return!0}var hie=new qh,Pj=new Ue,$B=new Ue,XB=new Ue,FE=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;(0,M.Z)(this,i),this.center=s,this.radius=n}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.center.copy(n),this.radius=r,this}},{key:"setFromPoints",value:function(n,r){var a=this.center;void 0!==r?a.copy(r):hie.setFromPoints(n).getCenter(a);for(var o=0,u=0,l=n.length;u<l;u++)o=Math.max(o,a.distanceToSquared(n[u]));return this.radius=Math.sqrt(o),this}},{key:"copy",value:function(n){return this.center.copy(n.center),this.radius=n.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(n){return n.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(n){var r=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=r*r}},{key:"intersectsBox",value:function(n){return n.intersectsSphere(this)}},{key:"intersectsPlane",value:function(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(n,r){var a=this.center.distanceToSquared(n);return r.copy(n),a>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}},{key:"getBoundingBox",value:function(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}},{key:"applyMatrix4",value:function(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}},{key:"translate",value:function(n){return this.center.add(n),this}},{key:"expandByPoint",value:function(n){XB.subVectors(n,this.center);var r=XB.lengthSq();if(r>this.radius*this.radius){var a=Math.sqrt(r),o=.5*(a-this.radius);this.center.add(XB.multiplyScalar(o/a)),this.radius+=o}return this}},{key:"union",value:function(n){return $B.subVectors(n.center,this.center).normalize().multiplyScalar(n.radius),this.expandByPoint(Pj.copy(n.center).add($B)),this.expandByPoint(Pj.copy(n.center).sub($B)),this}},{key:"equals",value:function(n){return n.center.equals(this.center)&&n.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}(),rv=new Ue,QB=new Ue,DR=new Ue,dg=new Ue,JB=new Ue,SR=new Ue,eU=new Ue,RE=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue(0,0,-1);(0,M.Z)(this,i),this.origin=s,this.direction=n}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.origin.copy(n),this.direction.copy(r),this}},{key:"copy",value:function(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}},{key:"at",value:function(n,r){return r.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"lookAt",value:function(n){return this.direction.copy(n).sub(this.origin).normalize(),this}},{key:"recast",value:function(n){return this.origin.copy(this.at(n,rv)),this}},{key:"closestPointToPoint",value:function(n,r){r.subVectors(n,this.origin);var a=r.dot(this.direction);return a<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(a).add(this.origin)}},{key:"distanceToPoint",value:function(n){return Math.sqrt(this.distanceSqToPoint(n))}},{key:"distanceSqToPoint",value:function(n){var r=rv.subVectors(n,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(n):(rv.copy(this.direction).multiplyScalar(r).add(this.origin),rv.distanceToSquared(n))}},{key:"distanceSqToSegment",value:function(n,r,a,o){QB.copy(n).add(r).multiplyScalar(.5),DR.copy(r).sub(n).normalize(),dg.copy(this.origin).sub(QB);var C,T,I,Z,u=.5*n.distanceTo(r),l=-this.direction.dot(DR),f=dg.dot(this.direction),m=-dg.dot(DR),b=dg.lengthSq(),w=Math.abs(1-l*l);if(w>0)if(T=l*f-m,Z=u*w,(C=l*m-f)>=0)if(T>=-Z)if(T<=Z){var Y=1/w;I=(C*=Y)*(C+l*(T*=Y)+2*f)+T*(l*C+T+2*m)+b}else T=u,I=-(C=Math.max(0,-(l*T+f)))*C+T*(T+2*m)+b;else T=-u,I=-(C=Math.max(0,-(l*T+f)))*C+T*(T+2*m)+b;else T<=-Z?I=-(C=Math.max(0,-(-l*u+f)))*C+(T=C>0?-u:Math.min(Math.max(-u,-m),u))*(T+2*m)+b:T<=Z?(C=0,I=(T=Math.min(Math.max(-u,-m),u))*(T+2*m)+b):I=-(C=Math.max(0,-(l*u+f)))*C+(T=C>0?u:Math.min(Math.max(-u,-m),u))*(T+2*m)+b;else T=l>0?-u:u,I=-(C=Math.max(0,-(l*T+f)))*C+T*(T+2*m)+b;return a&&a.copy(this.direction).multiplyScalar(C).add(this.origin),o&&o.copy(DR).multiplyScalar(T).add(QB),I}},{key:"intersectSphere",value:function(n,r){rv.subVectors(n.center,this.origin);var a=rv.dot(this.direction),o=rv.dot(rv)-a*a,u=n.radius*n.radius;if(o>u)return null;var l=Math.sqrt(u-o),f=a-l,m=a+l;return f<0&&m<0?null:this.at(f<0?m:f,r)}},{key:"intersectsSphere",value:function(n){return this.distanceSqToPoint(n.center)<=n.radius*n.radius}},{key:"distanceToPlane",value:function(n){var r=n.normal.dot(this.direction);if(0===r)return 0===n.distanceToPoint(this.origin)?0:null;var a=-(this.origin.dot(n.normal)+n.constant)/r;return a>=0?a:null}},{key:"intersectPlane",value:function(n,r){var a=this.distanceToPlane(n);return null===a?null:this.at(a,r)}},{key:"intersectsPlane",value:function(n){var r=n.distanceToPoint(this.origin);return 0===r||n.normal.dot(this.direction)*r<0}},{key:"intersectBox",value:function(n,r){var a,o,u,l,f,m,b=1/this.direction.x,w=1/this.direction.y,C=1/this.direction.z,T=this.origin;return b>=0?(a=(n.min.x-T.x)*b,o=(n.max.x-T.x)*b):(a=(n.max.x-T.x)*b,o=(n.min.x-T.x)*b),w>=0?(u=(n.min.y-T.y)*w,l=(n.max.y-T.y)*w):(u=(n.max.y-T.y)*w,l=(n.min.y-T.y)*w),a>l||u>o||((u>a||a!=a)&&(a=u),(l<o||o!=o)&&(o=l),C>=0?(f=(n.min.z-T.z)*C,m=(n.max.z-T.z)*C):(f=(n.max.z-T.z)*C,m=(n.min.z-T.z)*C),a>m||f>o)||((f>a||a!=a)&&(a=f),(m<o||o!=o)&&(o=m),o<0)?null:this.at(a>=0?a:o,r)}},{key:"intersectsBox",value:function(n){return null!==this.intersectBox(n,rv)}},{key:"intersectTriangle",value:function(n,r,a,o,u){JB.subVectors(r,n),SR.subVectors(a,n),eU.crossVectors(JB,SR);var f,l=this.direction.dot(eU);if(l>0){if(o)return null;f=1}else{if(!(l<0))return null;f=-1,l=-l}dg.subVectors(this.origin,n);var m=f*this.direction.dot(SR.crossVectors(dg,SR));if(m<0)return null;var b=f*this.direction.dot(JB.cross(dg));if(b<0||m+b>l)return null;var w=-f*dg.dot(eU);return w<0?null:this.at(w/l,u)}},{key:"applyMatrix4",value:function(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}},{key:"equals",value:function(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}(),Wr=function(){function i(){(0,M.Z)(this,i),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return(0,R.Z)(i,[{key:"set",value:function(n,r,a,o,u,l,f,m,b,w,C,T,I,Z,Y,V){var W=this.elements;return W[0]=n,W[4]=r,W[8]=a,W[12]=o,W[1]=u,W[5]=l,W[9]=f,W[13]=m,W[2]=b,W[6]=w,W[10]=C,W[14]=T,W[3]=I,W[7]=Z,W[11]=Y,W[15]=V,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new i).fromArray(this.elements)}},{key:"copy",value:function(n){var r=this.elements,a=n.elements;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],this}},{key:"copyPosition",value:function(n){var r=this.elements,a=n.elements;return r[12]=a[12],r[13]=a[13],r[14]=a[14],this}},{key:"setFromMatrix3",value:function(n){var r=n.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(n,r,a){return n.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(n,r,a){return this.set(n.x,r.x,a.x,0,n.y,r.y,a.y,0,n.z,r.z,a.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(n){var r=this.elements,a=n.elements,o=1/OE.setFromMatrixColumn(n,0).length(),u=1/OE.setFromMatrixColumn(n,1).length(),l=1/OE.setFromMatrixColumn(n,2).length();return r[0]=a[0]*o,r[1]=a[1]*o,r[2]=a[2]*o,r[3]=0,r[4]=a[4]*u,r[5]=a[5]*u,r[6]=a[6]*u,r[7]=0,r[8]=a[8]*l,r[9]=a[9]*l,r[10]=a[10]*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromEuler",value:function(n){n&&n.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var r=this.elements,a=n.x,o=n.y,u=n.z,l=Math.cos(a),f=Math.sin(a),m=Math.cos(o),b=Math.sin(o),w=Math.cos(u),C=Math.sin(u);if("XYZ"===n.order){var T=l*w,I=l*C,Z=f*w,Y=f*C;r[0]=m*w,r[4]=-m*C,r[8]=b,r[1]=I+Z*b,r[5]=T-Y*b,r[9]=-f*m,r[2]=Y-T*b,r[6]=Z+I*b,r[10]=l*m}else if("YXZ"===n.order){var V=m*w,W=m*C,se=b*w,fe=b*C;r[0]=V+fe*f,r[4]=se*f-W,r[8]=l*b,r[1]=l*C,r[5]=l*w,r[9]=-f,r[2]=W*f-se,r[6]=fe+V*f,r[10]=l*m}else if("ZXY"===n.order){var ve=m*w,me=m*C,pe=b*w,ke=b*C;r[0]=ve-ke*f,r[4]=-l*C,r[8]=pe+me*f,r[1]=me+pe*f,r[5]=l*w,r[9]=ke-ve*f,r[2]=-l*b,r[6]=f,r[10]=l*m}else if("ZYX"===n.order){var je=l*w,qe=l*C,Ze=f*w,ct=f*C;r[0]=m*w,r[4]=Ze*b-qe,r[8]=je*b+ct,r[1]=m*C,r[5]=ct*b+je,r[9]=qe*b-Ze,r[2]=-b,r[6]=f*m,r[10]=l*m}else if("YZX"===n.order){var rt=l*m,ht=l*b,It=f*m,_t=f*b;r[0]=m*w,r[4]=_t-rt*C,r[8]=It*C+ht,r[1]=C,r[5]=l*w,r[9]=-f*w,r[2]=-b*w,r[6]=ht*C+It,r[10]=rt-_t*C}else if("XZY"===n.order){var Zt=l*m,ln=l*b,Sn=f*m,kn=f*b;r[0]=m*w,r[4]=-C,r[8]=b*w,r[1]=Zt*C+kn,r[5]=l*w,r[9]=ln*C-Sn,r[2]=Sn*C-ln,r[6]=f*w,r[10]=kn*C+Zt}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(n){return this.compose(fie,n,die)}},{key:"lookAt",value:function(n,r,a){var o=this.elements;return ih.subVectors(n,r),0===ih.lengthSq()&&(ih.z=1),ih.normalize(),pg.crossVectors(a,ih),0===pg.lengthSq()&&(1===Math.abs(a.z)?ih.x+=1e-4:ih.z+=1e-4,ih.normalize(),pg.crossVectors(a,ih)),pg.normalize(),AR.crossVectors(ih,pg),o[0]=pg.x,o[4]=AR.x,o[8]=ih.x,o[1]=pg.y,o[5]=AR.y,o[9]=ih.y,o[2]=pg.z,o[6]=AR.z,o[10]=ih.z,this}},{key:"multiply",value:function(n,r){return void 0!==r?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(n,r)):this.multiplyMatrices(this,n)}},{key:"premultiply",value:function(n){return this.multiplyMatrices(n,this)}},{key:"multiplyMatrices",value:function(n,r){var a=n.elements,o=r.elements,u=this.elements,l=a[0],f=a[4],m=a[8],b=a[12],w=a[1],C=a[5],T=a[9],I=a[13],Z=a[2],Y=a[6],V=a[10],W=a[14],se=a[3],fe=a[7],ve=a[11],me=a[15],pe=o[0],ke=o[4],je=o[8],qe=o[12],Ze=o[1],ct=o[5],rt=o[9],ht=o[13],It=o[2],_t=o[6],Zt=o[10],ln=o[14],Sn=o[3],kn=o[7],dn=o[11],gn=o[15];return u[0]=l*pe+f*Ze+m*It+b*Sn,u[4]=l*ke+f*ct+m*_t+b*kn,u[8]=l*je+f*rt+m*Zt+b*dn,u[12]=l*qe+f*ht+m*ln+b*gn,u[1]=w*pe+C*Ze+T*It+I*Sn,u[5]=w*ke+C*ct+T*_t+I*kn,u[9]=w*je+C*rt+T*Zt+I*dn,u[13]=w*qe+C*ht+T*ln+I*gn,u[2]=Z*pe+Y*Ze+V*It+W*Sn,u[6]=Z*ke+Y*ct+V*_t+W*kn,u[10]=Z*je+Y*rt+V*Zt+W*dn,u[14]=Z*qe+Y*ht+V*ln+W*gn,u[3]=se*pe+fe*Ze+ve*It+me*Sn,u[7]=se*ke+fe*ct+ve*_t+me*kn,u[11]=se*je+fe*rt+ve*Zt+me*dn,u[15]=se*qe+fe*ht+ve*ln+me*gn,this}},{key:"multiplyScalar",value:function(n){var r=this.elements;return r[0]*=n,r[4]*=n,r[8]*=n,r[12]*=n,r[1]*=n,r[5]*=n,r[9]*=n,r[13]*=n,r[2]*=n,r[6]*=n,r[10]*=n,r[14]*=n,r[3]*=n,r[7]*=n,r[11]*=n,r[15]*=n,this}},{key:"determinant",value:function(){var n=this.elements,r=n[0],a=n[4],o=n[8],u=n[12],l=n[1],f=n[5],m=n[9],b=n[13],w=n[2],C=n[6],T=n[10],I=n[14];return n[3]*(+u*m*C-o*b*C-u*f*T+a*b*T+o*f*I-a*m*I)+n[7]*(+r*m*I-r*b*T+u*l*T-o*l*I+o*b*w-u*m*w)+n[11]*(+r*b*C-r*f*I-u*l*C+a*l*I+u*f*w-a*b*w)+n[15]*(-o*f*w-r*m*C+r*f*T+o*l*C-a*l*T+a*m*w)}},{key:"transpose",value:function(){var r,n=this.elements;return r=n[1],n[1]=n[4],n[4]=r,r=n[2],n[2]=n[8],n[8]=r,r=n[6],n[6]=n[9],n[9]=r,r=n[3],n[3]=n[12],n[12]=r,r=n[7],n[7]=n[13],n[13]=r,r=n[11],n[11]=n[14],n[14]=r,this}},{key:"setPosition",value:function(n,r,a){var o=this.elements;return n.isVector3?(o[12]=n.x,o[13]=n.y,o[14]=n.z):(o[12]=n,o[13]=r,o[14]=a),this}},{key:"invert",value:function(){var n=this.elements,r=n[0],a=n[1],o=n[2],u=n[3],l=n[4],f=n[5],m=n[6],b=n[7],w=n[8],C=n[9],T=n[10],I=n[11],Z=n[12],Y=n[13],V=n[14],W=n[15],se=C*V*b-Y*T*b+Y*m*I-f*V*I-C*m*W+f*T*W,fe=Z*T*b-w*V*b-Z*m*I+l*V*I+w*m*W-l*T*W,ve=w*Y*b-Z*C*b+Z*f*I-l*Y*I-w*f*W+l*C*W,me=Z*C*m-w*Y*m-Z*f*T+l*Y*T+w*f*V-l*C*V,pe=r*se+a*fe+o*ve+u*me;if(0===pe)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var ke=1/pe;return n[0]=se*ke,n[1]=(Y*T*u-C*V*u-Y*o*I+a*V*I+C*o*W-a*T*W)*ke,n[2]=(f*V*u-Y*m*u+Y*o*b-a*V*b-f*o*W+a*m*W)*ke,n[3]=(C*m*u-f*T*u-C*o*b+a*T*b+f*o*I-a*m*I)*ke,n[4]=fe*ke,n[5]=(w*V*u-Z*T*u+Z*o*I-r*V*I-w*o*W+r*T*W)*ke,n[6]=(Z*m*u-l*V*u-Z*o*b+r*V*b+l*o*W-r*m*W)*ke,n[7]=(l*T*u-w*m*u+w*o*b-r*T*b-l*o*I+r*m*I)*ke,n[8]=ve*ke,n[9]=(Z*C*u-w*Y*u-Z*a*I+r*Y*I+w*a*W-r*C*W)*ke,n[10]=(l*Y*u-Z*f*u+Z*a*b-r*Y*b-l*a*W+r*f*W)*ke,n[11]=(w*f*u-l*C*u-w*a*b+r*C*b+l*a*I-r*f*I)*ke,n[12]=me*ke,n[13]=(w*Y*o-Z*C*o+Z*a*T-r*Y*T-w*a*V+r*C*V)*ke,n[14]=(Z*f*o-l*Y*o-Z*a*m+r*Y*m+l*a*V-r*f*V)*ke,n[15]=(l*C*o-w*f*o+w*a*m-r*C*m-l*a*T+r*f*T)*ke,this}},{key:"scale",value:function(n){var r=this.elements,a=n.x,o=n.y,u=n.z;return r[0]*=a,r[4]*=o,r[8]*=u,r[1]*=a,r[5]*=o,r[9]*=u,r[2]*=a,r[6]*=o,r[10]*=u,r[3]*=a,r[7]*=o,r[11]*=u,this}},{key:"getMaxScaleOnAxis",value:function(){var n=this.elements;return Math.sqrt(Math.max(n[0]*n[0]+n[1]*n[1]+n[2]*n[2],n[4]*n[4]+n[5]*n[5]+n[6]*n[6],n[8]*n[8]+n[9]*n[9]+n[10]*n[10]))}},{key:"makeTranslation",value:function(n,r,a){return this.set(1,0,0,n,0,1,0,r,0,0,1,a,0,0,0,1),this}},{key:"makeRotationX",value:function(n){var r=Math.cos(n),a=Math.sin(n);return this.set(1,0,0,0,0,r,-a,0,0,a,r,0,0,0,0,1),this}},{key:"makeRotationY",value:function(n){var r=Math.cos(n),a=Math.sin(n);return this.set(r,0,a,0,0,1,0,0,-a,0,r,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(n){var r=Math.cos(n),a=Math.sin(n);return this.set(r,-a,0,0,a,r,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(n,r){var a=Math.cos(r),o=Math.sin(r),u=1-a,l=n.x,f=n.y,m=n.z,b=u*l,w=u*f;return this.set(b*l+a,b*f-o*m,b*m+o*f,0,b*f+o*m,w*f+a,w*m-o*l,0,b*m-o*f,w*m+o*l,u*m*m+a,0,0,0,0,1),this}},{key:"makeScale",value:function(n,r,a){return this.set(n,0,0,0,0,r,0,0,0,0,a,0,0,0,0,1),this}},{key:"makeShear",value:function(n,r,a,o,u,l){return this.set(1,a,u,0,n,1,l,0,r,o,1,0,0,0,0,1),this}},{key:"compose",value:function(n,r,a){var o=this.elements,u=r._x,l=r._y,f=r._z,m=r._w,b=u+u,w=l+l,C=f+f,T=u*b,I=u*w,Z=u*C,Y=l*w,V=l*C,W=f*C,se=m*b,fe=m*w,ve=m*C,me=a.x,pe=a.y,ke=a.z;return o[0]=(1-(Y+W))*me,o[1]=(I+ve)*me,o[2]=(Z-fe)*me,o[3]=0,o[4]=(I-ve)*pe,o[5]=(1-(T+W))*pe,o[6]=(V+se)*pe,o[7]=0,o[8]=(Z+fe)*ke,o[9]=(V-se)*ke,o[10]=(1-(T+Y))*ke,o[11]=0,o[12]=n.x,o[13]=n.y,o[14]=n.z,o[15]=1,this}},{key:"decompose",value:function(n,r,a){var o=this.elements,u=OE.set(o[0],o[1],o[2]).length(),l=OE.set(o[4],o[5],o[6]).length(),f=OE.set(o[8],o[9],o[10]).length();this.determinant()<0&&(u=-u),n.x=o[12],n.y=o[13],n.z=o[14],Pf.copy(this);var b=1/u,w=1/l,C=1/f;return Pf.elements[0]*=b,Pf.elements[1]*=b,Pf.elements[2]*=b,Pf.elements[4]*=w,Pf.elements[5]*=w,Pf.elements[6]*=w,Pf.elements[8]*=C,Pf.elements[9]*=C,Pf.elements[10]*=C,r.setFromRotationMatrix(Pf),a.x=u,a.y=l,a.z=f,this}},{key:"makePerspective",value:function(n,r,a,o,u,l){void 0===l&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var f=this.elements,b=2*u/(a-o),w=(r+n)/(r-n),C=(a+o)/(a-o),T=-(l+u)/(l-u),I=-2*l*u/(l-u);return f[0]=2*u/(r-n),f[4]=0,f[8]=w,f[12]=0,f[1]=0,f[5]=b,f[9]=C,f[13]=0,f[2]=0,f[6]=0,f[10]=T,f[14]=I,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}},{key:"makeOrthographic",value:function(n,r,a,o,u,l){var f=this.elements,m=1/(r-n),b=1/(a-o),w=1/(l-u),C=(r+n)*m,T=(a+o)*b,I=(l+u)*w;return f[0]=2*m,f[4]=0,f[8]=0,f[12]=-C,f[1]=0,f[5]=2*b,f[9]=0,f[13]=-T,f[2]=0,f[6]=0,f[10]=-2*w,f[14]=-I,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}},{key:"equals",value:function(n){for(var r=this.elements,a=n.elements,o=0;o<16;o++)if(r[o]!==a[o])return!1;return!0}},{key:"fromArray",value:function(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0;a<16;a++)this.elements[a]=n[a+r];return this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.elements;return n[r]=a[0],n[r+1]=a[1],n[r+2]=a[2],n[r+3]=a[3],n[r+4]=a[4],n[r+5]=a[5],n[r+6]=a[6],n[r+7]=a[7],n[r+8]=a[8],n[r+9]=a[9],n[r+10]=a[10],n[r+11]=a[11],n[r+12]=a[12],n[r+13]=a[13],n[r+14]=a[14],n[r+15]=a[15],n}}]),i}();Wr.prototype.isMatrix4=!0;var OE=new Ue,Pf=new Wr,fie=new Ue(0,0,0),die=new Ue(1,1,1),pg=new Ue,AR=new Ue,ih=new Ue,Fj=new Wr,Rj=new Gu,TR=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.DefaultOrder;(0,M.Z)(this,i),this._x=s,this._y=n,this._z=r,this._order=a}return(0,R.Z)(i,[{key:"x",get:function(){return this._x},set:function(n){this._x=n,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(n){this._z=n,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(n){this._order=n,this._onChangeCallback()}},{key:"set",value:function(n,r,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=n,this._y=r,this._z=a,this._order=o,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=n.elements,u=o[0],l=o[4],f=o[8],m=o[1],b=o[5],w=o[9],C=o[2],T=o[6],I=o[10];switch(r){case"XYZ":this._y=Math.asin(fl(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-w,I),this._z=Math.atan2(-l,u)):(this._x=Math.atan2(T,b),this._z=0);break;case"YXZ":this._x=Math.asin(-fl(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(f,I),this._z=Math.atan2(m,b)):(this._y=Math.atan2(-C,u),this._z=0);break;case"ZXY":this._x=Math.asin(fl(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-C,I),this._z=Math.atan2(-l,b)):(this._y=0,this._z=Math.atan2(m,u));break;case"ZYX":this._y=Math.asin(-fl(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(T,I),this._z=Math.atan2(m,u)):(this._x=0,this._z=Math.atan2(-l,b));break;case"YZX":this._z=Math.asin(fl(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-w,b),this._y=Math.atan2(-C,u)):(this._x=0,this._y=Math.atan2(f,I));break;case"XZY":this._z=Math.asin(-fl(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(T,b),this._y=Math.atan2(f,u)):(this._x=Math.atan2(-w,I),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===a&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(n,r,a){return Fj.makeRotationFromQuaternion(n),this.setFromRotationMatrix(Fj,r,a)}},{key:"setFromVector3",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(n.x,n.y,n.z,r)}},{key:"reorder",value:function(n){return Rj.setFromEuler(this),this.setFromQuaternion(Rj,n)}},{key:"equals",value:function(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}},{key:"fromArray",value:function(n){return this._x=n[0],this._y=n[1],this._z=n[2],void 0!==n[3]&&(this._order=n[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n[r]=this._x,n[r+1]=this._y,n[r+2]=this._z,n[r+3]=this._order,n}},{key:"toVector3",value:function(n){return n?n.set(this._x,this._y,this._z):new Ue(this._x,this._y,this._z)}},{key:"_onChange",value:function(n){return this._onChangeCallback=n,this}},{key:"_onChangeCallback",value:function(){}}]),i}();TR.prototype.isEuler=!0,TR.DefaultOrder="XYZ",TR.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var pie=function(){function i(){(0,M.Z)(this,i),this.mask=1}return(0,R.Z)(i,[{key:"set",value:function(n){this.mask=1<<n|0}},{key:"enable",value:function(n){this.mask|=1<<n|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(n){this.mask^=1<<n|0}},{key:"disable",value:function(n){this.mask&=~(1<<n|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(n){return 0!=(this.mask&n.mask)}}]),i}(),vie=0,Oj=new Ue,LE=new Gu,iv=new Wr,xR=new Ue,KT=new Ue,mie=new Ue,gie=new Gu,Lj=new Ue(1,0,0),Nj=new Ue(0,1,0),Zj=new Ue(0,0,1),yie={type:"added"},Bj={type:"removed"},ws=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,Ja.Z)(r),"id",{value:vie++}),r.uuid=Wh(),r.name="",r.type="Object3D",r.parent=null,r.children=[],r.up=n.DefaultUp.clone();var a=new Ue,o=new TR,u=new Gu,l=new Ue(1,1,1);return o._onChange(function(){u.setFromEuler(o,!1)}),u._onChange(function(){o.setFromQuaternion(u,void 0,!1)}),Object.defineProperties((0,Ja.Z)(r),{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:u},scale:{configurable:!0,enumerable:!0,value:l},modelViewMatrix:{value:new Wr},normalMatrix:{value:new dl}}),r.matrix=new Wr,r.matrixWorld=new Wr,r.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,r.matrixWorldNeedsUpdate=!1,r.layers=new pie,r.visible=!0,r.castShadow=!1,r.receiveShadow=!1,r.frustumCulled=!0,r.renderOrder=0,r.animations=[],r.userData={},r}return(0,R.Z)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(a){return this.quaternion.premultiply(a),this}},{key:"setRotationFromAxisAngle",value:function(a,o){this.quaternion.setFromAxisAngle(a,o)}},{key:"setRotationFromEuler",value:function(a){this.quaternion.setFromEuler(a,!0)}},{key:"setRotationFromMatrix",value:function(a){this.quaternion.setFromRotationMatrix(a)}},{key:"setRotationFromQuaternion",value:function(a){this.quaternion.copy(a)}},{key:"rotateOnAxis",value:function(a,o){return LE.setFromAxisAngle(a,o),this.quaternion.multiply(LE),this}},{key:"rotateOnWorldAxis",value:function(a,o){return LE.setFromAxisAngle(a,o),this.quaternion.premultiply(LE),this}},{key:"rotateX",value:function(a){return this.rotateOnAxis(Lj,a)}},{key:"rotateY",value:function(a){return this.rotateOnAxis(Nj,a)}},{key:"rotateZ",value:function(a){return this.rotateOnAxis(Zj,a)}},{key:"translateOnAxis",value:function(a,o){return Oj.copy(a).applyQuaternion(this.quaternion),this.position.add(Oj.multiplyScalar(o)),this}},{key:"translateX",value:function(a){return this.translateOnAxis(Lj,a)}},{key:"translateY",value:function(a){return this.translateOnAxis(Nj,a)}},{key:"translateZ",value:function(a){return this.translateOnAxis(Zj,a)}},{key:"localToWorld",value:function(a){return a.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(a){return a.applyMatrix4(iv.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(a,o,u){a.isVector3?xR.copy(a):xR.set(a,o,u);var l=this.parent;this.updateWorldMatrix(!0,!1),KT.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?iv.lookAt(KT,xR,this.up):iv.lookAt(xR,KT,this.up),this.quaternion.setFromRotationMatrix(iv),l&&(iv.extractRotation(l.matrixWorld),LE.setFromRotationMatrix(iv),this.quaternion.premultiply(LE.invert()))}},{key:"add",value:function(a){if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(yie)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}},{key:"remove",value:function(a){if(arguments.length>1){for(var o=0;o<arguments.length;o++)this.remove(arguments[o]);return this}var u=this.children.indexOf(a);return-1!==u&&(a.parent=null,this.children.splice(u,1),a.dispatchEvent(Bj)),this}},{key:"removeFromParent",value:function(){var a=this.parent;return null!==a&&a.remove(this),this}},{key:"clear",value:function(){for(var a=0;a<this.children.length;a++){var o=this.children[a];o.parent=null,o.dispatchEvent(Bj)}return this.children.length=0,this}},{key:"attach",value:function(a){return this.updateWorldMatrix(!0,!1),iv.copy(this.matrixWorld).invert(),null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),iv.multiply(a.parent.matrixWorld)),a.applyMatrix4(iv),this.add(a),a.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(a){return this.getObjectByProperty("id",a)}},{key:"getObjectByName",value:function(a){return this.getObjectByProperty("name",a)}},{key:"getObjectByProperty",value:function(a,o){if(this[a]===o)return this;for(var u=0,l=this.children.length;u<l;u++){var m=this.children[u].getObjectByProperty(a,o);if(void 0!==m)return m}}},{key:"getWorldPosition",value:function(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(KT,a,mie),a}},{key:"getWorldScale",value:function(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(KT,gie,a),a}},{key:"getWorldDirection",value:function(a){this.updateWorldMatrix(!0,!1);var o=this.matrixWorld.elements;return a.set(o[8],o[9],o[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(a){a(this);for(var o=this.children,u=0,l=o.length;u<l;u++)o[u].traverse(a)}},{key:"traverseVisible",value:function(a){if(!1!==this.visible){a(this);for(var o=this.children,u=0,l=o.length;u<l;u++)o[u].traverseVisible(a)}}},{key:"traverseAncestors",value:function(a){var o=this.parent;null!==o&&(a(o),o.traverseAncestors(a))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var o=this.children,u=0,l=o.length;u<l;u++)o[u].updateMatrixWorld(a)}},{key:"updateWorldMatrix",value:function(a,o){var u=this.parent;if(!0===a&&null!==u&&u.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===o)for(var l=this.children,f=0,m=l.length;f<m;f++)l[f].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(a){var o=void 0===a||"string"==typeof a,u={};o&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},u.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var l={};function f(ct,rt){return void 0===ct[rt.uuid]&&(ct[rt.uuid]=rt.toJSON(a)),rt.uuid}if(l.uuid=this.uuid,l.type=this.type,""!==this.name&&(l.name=this.name),!0===this.castShadow&&(l.castShadow=!0),!0===this.receiveShadow&&(l.receiveShadow=!0),!1===this.visible&&(l.visible=!1),!1===this.frustumCulled&&(l.frustumCulled=!1),0!==this.renderOrder&&(l.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(l.userData=this.userData),l.layers=this.layers.mask,l.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(l.matrixAutoUpdate=!1),this.isInstancedMesh&&(l.type="InstancedMesh",l.count=this.count,l.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(l.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?l.background=this.background.toJSON():this.background.isTexture&&(l.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&(l.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){l.geometry=f(a.geometries,this.geometry);var m=this.geometry.parameters;if(void 0!==m&&void 0!==m.shapes){var b=m.shapes;if(Array.isArray(b))for(var w=0,C=b.length;w<C;w++)f(a.shapes,b[w]);else f(a.shapes,b)}}if(this.isSkinnedMesh&&(l.bindMode=this.bindMode,l.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(f(a.skeletons,this.skeleton),l.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var I=[],Z=0,Y=this.material.length;Z<Y;Z++)I.push(f(a.materials,this.material[Z]));l.material=I}else l.material=f(a.materials,this.material);if(this.children.length>0){l.children=[];for(var V=0;V<this.children.length;V++)l.children.push(this.children[V].toJSON(a).object)}if(this.animations.length>0){l.animations=[];for(var W=0;W<this.animations.length;W++)l.animations.push(f(a.animations,this.animations[W]))}if(o){var fe=Ze(a.geometries),ve=Ze(a.materials),me=Ze(a.textures),pe=Ze(a.images),ke=Ze(a.shapes),je=Ze(a.skeletons),qe=Ze(a.animations);fe.length>0&&(u.geometries=fe),ve.length>0&&(u.materials=ve),me.length>0&&(u.textures=me),pe.length>0&&(u.images=pe),ke.length>0&&(u.shapes=ke),je.length>0&&(u.skeletons=je),qe.length>0&&(u.animations=qe)}return u.object=l,u;function Ze(ct){var rt=[];for(var ht in ct){var It=ct[ht];delete It.metadata,rt.push(It)}return rt}}},{key:"clone",value:function(a){return(new this.constructor).copy(this,a)}},{key:"copy",value:function(a){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===o)for(var u=0;u<a.children.length;u++){var l=a.children[u];this.add(l.clone())}return this}}]),n}(cg);ws.DefaultUp=new Ue(0,1,0),ws.DefaultMatrixAutoUpdate=!0,ws.prototype.isObject3D=!0;var Ff=new Ue,av=new Ue,tU=new Ue,sv=new Ue,NE=new Ue,ZE=new Ue,Uj=new Ue,nU=new Ue,rU=new Ue,iU=new Ue,Ic=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ue;(0,M.Z)(this,i),this.a=s,this.b=n,this.c=r}return(0,R.Z)(i,[{key:"set",value:function(n,r,a){return this.a.copy(n),this.b.copy(r),this.c.copy(a),this}},{key:"setFromPointsAndIndices",value:function(n,r,a,o){return this.a.copy(n[r]),this.b.copy(n[a]),this.c.copy(n[o]),this}},{key:"setFromAttributeAndIndices",value:function(n,r,a,o){return this.a.fromBufferAttribute(n,r),this.b.fromBufferAttribute(n,a),this.c.fromBufferAttribute(n,o),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}},{key:"getArea",value:function(){return Ff.subVectors(this.c,this.b),av.subVectors(this.a,this.b),.5*Ff.cross(av).length()}},{key:"getMidpoint",value:function(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(n){return i.getNormal(this.a,this.b,this.c,n)}},{key:"getPlane",value:function(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(n,r){return i.getBarycoord(n,this.a,this.b,this.c,r)}},{key:"getUV",value:function(n,r,a,o,u){return i.getUV(n,this.a,this.b,this.c,r,a,o,u)}},{key:"containsPoint",value:function(n){return i.containsPoint(n,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(n){return i.isFrontFacing(this.a,this.b,this.c,n)}},{key:"intersectsBox",value:function(n){return n.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(n,r){var l,f,a=this.a,o=this.b,u=this.c;NE.subVectors(o,a),ZE.subVectors(u,a),nU.subVectors(n,a);var m=NE.dot(nU),b=ZE.dot(nU);if(m<=0&&b<=0)return r.copy(a);rU.subVectors(n,o);var w=NE.dot(rU),C=ZE.dot(rU);if(w>=0&&C<=w)return r.copy(o);var T=m*C-w*b;if(T<=0&&m>=0&&w<=0)return l=m/(m-w),r.copy(a).addScaledVector(NE,l);iU.subVectors(n,u);var I=NE.dot(iU),Z=ZE.dot(iU);if(Z>=0&&I<=Z)return r.copy(u);var Y=I*b-m*Z;if(Y<=0&&b>=0&&Z<=0)return f=b/(b-Z),r.copy(a).addScaledVector(ZE,f);var V=w*Z-I*C;if(V<=0&&C-w>=0&&I-Z>=0)return Uj.subVectors(u,o),f=(C-w)/(C-w+(I-Z)),r.copy(o).addScaledVector(Uj,f);var W=1/(V+Y+T);return l=Y*W,f=T*W,r.copy(a).addScaledVector(NE,l).addScaledVector(ZE,f)}},{key:"equals",value:function(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}],[{key:"getNormal",value:function(n,r,a,o){o.subVectors(a,r),Ff.subVectors(n,r),o.cross(Ff);var u=o.lengthSq();return u>0?o.multiplyScalar(1/Math.sqrt(u)):o.set(0,0,0)}},{key:"getBarycoord",value:function(n,r,a,o,u){Ff.subVectors(o,r),av.subVectors(a,r),tU.subVectors(n,r);var l=Ff.dot(Ff),f=Ff.dot(av),m=Ff.dot(tU),b=av.dot(av),w=av.dot(tU),C=l*b-f*f;if(0===C)return u.set(-2,-1,-1);var T=1/C,I=(b*m-f*w)*T,Z=(l*w-f*m)*T;return u.set(1-I-Z,Z,I)}},{key:"containsPoint",value:function(n,r,a,o){return this.getBarycoord(n,r,a,o,sv),sv.x>=0&&sv.y>=0&&sv.x+sv.y<=1}},{key:"getUV",value:function(n,r,a,o,u,l,f,m){return this.getBarycoord(n,r,a,o,sv),m.set(0,0),m.addScaledVector(u,sv.x),m.addScaledVector(l,sv.y),m.addScaledVector(f,sv.z),m}},{key:"isFrontFacing",value:function(n,r,a,o){return Ff.subVectors(a,r),av.subVectors(n,r),Ff.cross(av).dot(o)<0}}]),i}(),_ie=0,pl=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,Ja.Z)(r),"id",{value:_ie++}),r.uuid=Wh(),r.name="",r.type="Material",r.fog=!0,r.blending=1,r.side=0,r.vertexColors=!1,r.opacity=1,r.format=cc,r.transparent=!1,r.blendSrc=204,r.blendDst=205,r.blendEquation=100,r.blendSrcAlpha=null,r.blendDstAlpha=null,r.blendEquationAlpha=null,r.depthFunc=3,r.depthTest=!0,r.depthWrite=!0,r.stencilWriteMask=255,r.stencilFunc=519,r.stencilRef=0,r.stencilFuncMask=255,r.stencilFail=7680,r.stencilZFail=7680,r.stencilZPass=7680,r.stencilWrite=!1,r.clippingPlanes=null,r.clipIntersection=!1,r.clipShadows=!1,r.shadowSide=null,r.colorWrite=!0,r.precision=null,r.polygonOffset=!1,r.polygonOffsetFactor=0,r.polygonOffsetUnits=0,r.dithering=!1,r.alphaToCoverage=!1,r.premultipliedAlpha=!1,r.visible=!0,r.toneMapped=!0,r.userData={},r.version=0,r._alphaTest=0,r}return(0,R.Z)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(a){if(void 0!==a)for(var o in a){var u=a[o];if(void 0!==u)if("shading"!==o){var l=this[o];void 0!==l?l&&l.isColor?l.set(u):l&&l.isVector3&&u&&u.isVector3?l.copy(u):this[o]=u:console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===u;else console.warn("THREE.Material: '"+o+"' parameter is undefined.")}}},{key:"toJSON",value:function(a){var o=void 0===a||"string"==typeof a;o&&(a={textures:{},images:{}});var u={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function l(b){var w=[];for(var C in b){var T=b[C];delete T.metadata,w.push(T)}return w}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),this.color&&this.color.isColor&&(u.color=this.color.getHex()),void 0!==this.roughness&&(u.roughness=this.roughness),void 0!==this.metalness&&(u.metalness=this.metalness),void 0!==this.sheen&&(u.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(u.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(u.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(u.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(u.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(u.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(u.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(u.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(u.shininess=this.shininess),void 0!==this.clearcoat&&(u.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(u.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(u.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(u.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(u.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,u.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(u.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(u.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(u.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(u.lightMap=this.lightMap.toJSON(a).uuid,u.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(u.aoMap=this.aoMap.toJSON(a).uuid,u.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(u.bumpMap=this.bumpMap.toJSON(a).uuid,u.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(u.normalMap=this.normalMap.toJSON(a).uuid,u.normalMapType=this.normalMapType,u.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(u.displacementMap=this.displacementMap.toJSON(a).uuid,u.displacementScale=this.displacementScale,u.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(u.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(u.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(u.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(u.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(u.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(u.specularTintMap=this.specularTintMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(u.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(u.combine=this.combine)),void 0!==this.envMapIntensity&&(u.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(u.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(u.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(u.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.transmission&&(u.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(u.transmissionMap=this.transmissionMap.toJSON(a).uuid),void 0!==this.thickness&&(u.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(u.thicknessMap=this.thicknessMap.toJSON(a).uuid),void 0!==this.attenuationDistance&&(u.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(u.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(u.size=this.size),null!==this.shadowSide&&(u.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(u.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(u.blending=this.blending),0!==this.side&&(u.side=this.side),this.vertexColors&&(u.vertexColors=!0),this.opacity<1&&(u.opacity=this.opacity),this.format!==cc&&(u.format=this.format),!0===this.transparent&&(u.transparent=this.transparent),u.depthFunc=this.depthFunc,u.depthTest=this.depthTest,u.depthWrite=this.depthWrite,u.colorWrite=this.colorWrite,u.stencilWrite=this.stencilWrite,u.stencilWriteMask=this.stencilWriteMask,u.stencilFunc=this.stencilFunc,u.stencilRef=this.stencilRef,u.stencilFuncMask=this.stencilFuncMask,u.stencilFail=this.stencilFail,u.stencilZFail=this.stencilZFail,u.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(u.rotation=this.rotation),!0===this.polygonOffset&&(u.polygonOffset=!0),0!==this.polygonOffsetFactor&&(u.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(u.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(u.linewidth=this.linewidth),void 0!==this.dashSize&&(u.dashSize=this.dashSize),void 0!==this.gapSize&&(u.gapSize=this.gapSize),void 0!==this.scale&&(u.scale=this.scale),!0===this.dithering&&(u.dithering=!0),this.alphaTest>0&&(u.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(u.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(u.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(u.wireframe=this.wireframe),this.wireframeLinewidth>1&&(u.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(u.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(u.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(u.flatShading=this.flatShading),!1===this.visible&&(u.visible=!1),!1===this.toneMapped&&(u.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(u.userData=this.userData),o){var f=l(a.textures),m=l(a.images);f.length>0&&(u.textures=f),m.length>0&&(u.images=m)}return u}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){this.name=a.name,this.fog=a.fog,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.format=a.format,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;var o=a.clippingPlanes,u=null;if(null!==o){var l=o.length;u=new Array(l);for(var f=0;f!==l;++f)u[f]=o[f].clone()}return this.clippingPlanes=u,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(a){!0===a&&this.version++}}]),n}(cg);pl.prototype.isMaterial=!0;var Vj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Rf={h:0,s:0,l:0},MR={h:0,s:0,l:0};function aU(i,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?i+6*(s-i)*n:n<.5?s:n<2/3?i+6*(s-i)*(2/3-n):i}function sU(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function oU(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}var xr=function(){function i(s,n,r){return(0,M.Z)(this,i),void 0===n&&void 0===r?this.set(s):this.setRGB(s,n,r)}return(0,R.Z)(i,[{key:"set",value:function(n){return n&&n.isColor?this.copy(n):"number"==typeof n?this.setHex(n):"string"==typeof n&&this.setStyle(n),this}},{key:"setScalar",value:function(n){return this.r=n,this.g=n,this.b=n,this}},{key:"setHex",value:function(n){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(255&n)/255,this}},{key:"setRGB",value:function(n,r,a){return this.r=n,this.g=r,this.b=a,this}},{key:"setHSL",value:function(n,r,a){if(n=function(i,s){return(i%s+s)%s}(n,1),r=fl(r,0,1),a=fl(a,0,1),0===r)this.r=this.g=this.b=a;else{var o=a<=.5?a*(1+r):a+r-a*r,u=2*a-o;this.r=aU(u,o,n+1/3),this.g=aU(u,o,n),this.b=aU(u,o,n-1/3)}return this}},{key:"setStyle",value:function(n){function r(T){void 0!==T&&parseFloat(T)<1&&console.warn("THREE.Color: Alpha component of "+n+" will be ignored.")}var a;if(a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(n)){var o,l=a[2];switch(a[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){var f=parseFloat(o[1])/360,m=parseInt(o[2],10)/100,b=parseInt(o[3],10)/100;return r(o[4]),this.setHSL(f,m,b)}}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(n)){var w=a[1],C=w.length;if(3===C)return this.r=parseInt(w.charAt(0)+w.charAt(0),16)/255,this.g=parseInt(w.charAt(1)+w.charAt(1),16)/255,this.b=parseInt(w.charAt(2)+w.charAt(2),16)/255,this;if(6===C)return this.r=parseInt(w.charAt(0)+w.charAt(1),16)/255,this.g=parseInt(w.charAt(2)+w.charAt(3),16)/255,this.b=parseInt(w.charAt(4)+w.charAt(5),16)/255,this}return n&&n.length>0?this.setColorName(n):this}},{key:"setColorName",value:function(n){var r=Vj[n.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+n),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}},{key:"copyGammaToLinear",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(n.r,r),this.g=Math.pow(n.g,r),this.b=Math.pow(n.b,r),this}},{key:"copyLinearToGamma",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=r>0?1/r:1;return this.r=Math.pow(n.r,a),this.g=Math.pow(n.g,a),this.b=Math.pow(n.b,a),this}},{key:"convertGammaToLinear",value:function(n){return this.copyGammaToLinear(this,n),this}},{key:"convertLinearToGamma",value:function(n){return this.copyLinearToGamma(this,n),this}},{key:"copySRGBToLinear",value:function(n){return this.r=sU(n.r),this.g=sU(n.g),this.b=sU(n.b),this}},{key:"copyLinearToSRGB",value:function(n){return this.r=oU(n.r),this.g=oU(n.g),this.b=oU(n.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(n){var f,m,r=this.r,a=this.g,o=this.b,u=Math.max(r,a,o),l=Math.min(r,a,o),b=(l+u)/2;if(l===u)f=0,m=0;else{var w=u-l;switch(m=b<=.5?w/(u+l):w/(2-u-l),u){case r:f=(a-o)/w+(a<o?6:0);break;case a:f=(o-r)/w+2;break;case o:f=(r-a)/w+4}f/=6}return n.h=f,n.s=m,n.l=b,n}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(n,r,a){return this.getHSL(Rf),Rf.h+=n,Rf.s+=r,Rf.l+=a,this.setHSL(Rf.h,Rf.s,Rf.l),this}},{key:"add",value:function(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}},{key:"addColors",value:function(n,r){return this.r=n.r+r.r,this.g=n.g+r.g,this.b=n.b+r.b,this}},{key:"addScalar",value:function(n){return this.r+=n,this.g+=n,this.b+=n,this}},{key:"sub",value:function(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}},{key:"multiply",value:function(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}},{key:"multiplyScalar",value:function(n){return this.r*=n,this.g*=n,this.b*=n,this}},{key:"lerp",value:function(n,r){return this.r+=(n.r-this.r)*r,this.g+=(n.g-this.g)*r,this.b+=(n.b-this.b)*r,this}},{key:"lerpColors",value:function(n,r,a){return this.r=n.r+(r.r-n.r)*a,this.g=n.g+(r.g-n.g)*a,this.b=n.b+(r.b-n.b)*a,this}},{key:"lerpHSL",value:function(n,r){this.getHSL(Rf),n.getHSL(MR);var a=WT(Rf.h,MR.h,r),o=WT(Rf.s,MR.s,r),u=WT(Rf.l,MR.l,r);return this.setHSL(a,o,u),this}},{key:"equals",value:function(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}},{key:"fromArray",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=n[r],this.g=n[r+1],this.b=n[r+2],this}},{key:"toArray",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n[r]=this.r,n[r+1]=this.g,n[r+2]=this.b,n}},{key:"fromBufferAttribute",value:function(n,r){return this.r=n.getX(r),this.g=n.getY(r),this.b=n.getZ(r),!0===n.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),i}();xr.NAMES=Vj,xr.prototype.isColor=!0,xr.prototype.r=1,xr.prototype.g=1,xr.prototype.b=1;var IR=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshBasicMaterial",a.color=new xr(16777215),a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.specularMap=null,a.alphaMap=null,a.envMap=null,a.combine=0,a.reflectivity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}]),n}(pl);IR.prototype.isMeshBasicMaterial=!0;var Is=new Ue,PR=new un,cu=function(){function i(s,n,r){if((0,M.Z)(this,i),Array.isArray(s))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=s,this.itemSize=n,this.count=void 0!==s?s.length/n:0,this.normalized=!0===r,this.usage=zT,this.updateRange={offset:0,count:-1},this.version=0}return(0,R.Z)(i,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(n){!0===n&&this.version++}},{key:"setUsage",value:function(n){return this.usage=n,this}},{key:"copy",value:function(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this}},{key:"copyAt",value:function(n,r,a){n*=this.itemSize,a*=r.itemSize;for(var o=0,u=this.itemSize;o<u;o++)this.array[n+o]=r.array[a+o];return this}},{key:"copyArray",value:function(n){return this.array.set(n),this}},{key:"copyColorsArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var l=n[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),l=new xr),r[a++]=l.r,r[a++]=l.g,r[a++]=l.b}return this}},{key:"copyVector2sArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var l=n[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),l=new un),r[a++]=l.x,r[a++]=l.y}return this}},{key:"copyVector3sArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var l=n[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),l=new Ue),r[a++]=l.x,r[a++]=l.y,r[a++]=l.z}return this}},{key:"copyVector4sArray",value:function(n){for(var r=this.array,a=0,o=0,u=n.length;o<u;o++){var l=n[o];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),l=new bs),r[a++]=l.x,r[a++]=l.y,r[a++]=l.z,r[a++]=l.w}return this}},{key:"applyMatrix3",value:function(n){if(2===this.itemSize)for(var r=0,a=this.count;r<a;r++)PR.fromBufferAttribute(this,r),PR.applyMatrix3(n),this.setXY(r,PR.x,PR.y);else if(3===this.itemSize)for(var o=0,u=this.count;o<u;o++)Is.fromBufferAttribute(this,o),Is.applyMatrix3(n),this.setXYZ(o,Is.x,Is.y,Is.z);return this}},{key:"applyMatrix4",value:function(n){for(var r=0,a=this.count;r<a;r++)Is.x=this.getX(r),Is.y=this.getY(r),Is.z=this.getZ(r),Is.applyMatrix4(n),this.setXYZ(r,Is.x,Is.y,Is.z);return this}},{key:"applyNormalMatrix",value:function(n){for(var r=0,a=this.count;r<a;r++)Is.x=this.getX(r),Is.y=this.getY(r),Is.z=this.getZ(r),Is.applyNormalMatrix(n),this.setXYZ(r,Is.x,Is.y,Is.z);return this}},{key:"transformDirection",value:function(n){for(var r=0,a=this.count;r<a;r++)Is.x=this.getX(r),Is.y=this.getY(r),Is.z=this.getZ(r),Is.transformDirection(n),this.setXYZ(r,Is.x,Is.y,Is.z);return this}},{key:"set",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(n,r),this}},{key:"getX",value:function(n){return this.array[n*this.itemSize]}},{key:"setX",value:function(n,r){return this.array[n*this.itemSize]=r,this}},{key:"getY",value:function(n){return this.array[n*this.itemSize+1]}},{key:"setY",value:function(n,r){return this.array[n*this.itemSize+1]=r,this}},{key:"getZ",value:function(n){return this.array[n*this.itemSize+2]}},{key:"setZ",value:function(n,r){return this.array[n*this.itemSize+2]=r,this}},{key:"getW",value:function(n){return this.array[n*this.itemSize+3]}},{key:"setW",value:function(n,r){return this.array[n*this.itemSize+3]=r,this}},{key:"setXY",value:function(n,r,a){return this.array[0+(n*=this.itemSize)]=r,this.array[n+1]=a,this}},{key:"setXYZ",value:function(n,r,a,o){return this.array[0+(n*=this.itemSize)]=r,this.array[n+1]=a,this.array[n+2]=o,this}},{key:"setXYZW",value:function(n,r,a,o,u){return this.array[0+(n*=this.itemSize)]=r,this.array[n+1]=a,this.array[n+2]=o,this.array[n+3]=u,this}},{key:"onUpload",value:function(n){return this.onUploadCallback=n,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(n.name=this.name),this.usage!==zT&&(n.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(n.updateRange=this.updateRange),n}}]),i}();cu.prototype.isBufferAttribute=!0;var uU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Uint16Array(r),a,o)}return n}(cu),lU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Uint32Array(r),a,o)}return n}(cu);(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Uint16Array(r),a,o)}return n})(cu).prototype.isFloat16BufferAttribute=!0;var ci=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){return(0,M.Z)(this,n),s.call(this,new Float32Array(r),a,o)}return n}(cu),Aie=0,Yh=new Wr,cU=new ws,BE=new Ue,ah=new qh,$T=new qh,ju=new Ue,ma=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),r=s.call(this),Object.defineProperty((0,Ja.Z)(r),"id",{value:Aie++}),r.uuid=Wh(),r.name="",r.type="BufferGeometry",r.index=null,r.attributes={},r.morphAttributes={},r.morphTargetsRelative=!1,r.groups=[],r.boundingBox=null,r.boundingSphere=null,r.drawRange={start:0,count:1/0},r.userData={},r}return(0,R.Z)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(a){return this.index=Array.isArray(a)?new(xj(a)>65535?lU:uU)(a,1):a,this}},{key:"getAttribute",value:function(a){return this.attributes[a]}},{key:"setAttribute",value:function(a,o){return this.attributes[a]=o,this}},{key:"deleteAttribute",value:function(a){return delete this.attributes[a],this}},{key:"hasAttribute",value:function(a){return void 0!==this.attributes[a]}},{key:"addGroup",value:function(a,o){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:a,count:o,materialIndex:u})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(a,o){this.drawRange.start=a,this.drawRange.count=o}},{key:"applyMatrix4",value:function(a){var o=this.attributes.position;void 0!==o&&(o.applyMatrix4(a),o.needsUpdate=!0);var u=this.attributes.normal;if(void 0!==u){var l=(new dl).getNormalMatrix(a);u.applyNormalMatrix(l),u.needsUpdate=!0}var f=this.attributes.tangent;return void 0!==f&&(f.transformDirection(a),f.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(a){return Yh.makeRotationFromQuaternion(a),this.applyMatrix4(Yh),this}},{key:"rotateX",value:function(a){return Yh.makeRotationX(a),this.applyMatrix4(Yh),this}},{key:"rotateY",value:function(a){return Yh.makeRotationY(a),this.applyMatrix4(Yh),this}},{key:"rotateZ",value:function(a){return Yh.makeRotationZ(a),this.applyMatrix4(Yh),this}},{key:"translate",value:function(a,o,u){return Yh.makeTranslation(a,o,u),this.applyMatrix4(Yh),this}},{key:"scale",value:function(a,o,u){return Yh.makeScale(a,o,u),this.applyMatrix4(Yh),this}},{key:"lookAt",value:function(a){return cU.lookAt(a),cU.updateMatrix(),this.applyMatrix4(cU.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(BE).negate(),this.translate(BE.x,BE.y,BE.z),this}},{key:"setFromPoints",value:function(a){for(var o=[],u=0,l=a.length;u<l;u++){var f=a[u];o.push(f.x,f.y,f.z||0)}return this.setAttribute("position",new ci(o,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new qh);var a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ue(-1/0,-1/0,-1/0),new Ue(1/0,1/0,1/0));if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),o)for(var u=0,l=o.length;u<l;u++)ah.setFromBufferAttribute(o[u]),this.morphTargetsRelative?(ju.addVectors(this.boundingBox.min,ah.min),this.boundingBox.expandByPoint(ju),ju.addVectors(this.boundingBox.max,ah.max),this.boundingBox.expandByPoint(ju)):(this.boundingBox.expandByPoint(ah.min),this.boundingBox.expandByPoint(ah.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new FE);var a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ue,1/0);if(a){var u=this.boundingSphere.center;if(ah.setFromBufferAttribute(a),o)for(var l=0,f=o.length;l<f;l++)$T.setFromBufferAttribute(o[l]),this.morphTargetsRelative?(ju.addVectors(ah.min,$T.min),ah.expandByPoint(ju),ju.addVectors(ah.max,$T.max),ah.expandByPoint(ju)):(ah.expandByPoint($T.min),ah.expandByPoint($T.max));ah.getCenter(u);for(var b=0,w=0,C=a.count;w<C;w++)ju.fromBufferAttribute(a,w),b=Math.max(b,u.distanceToSquared(ju));if(o)for(var T=0,I=o.length;T<I;T++)for(var Z=o[T],Y=this.morphTargetsRelative,V=0,W=Z.count;V<W;V++)ju.fromBufferAttribute(Z,V),Y&&(BE.fromBufferAttribute(a,V),ju.add(BE)),b=Math.max(b,u.distanceToSquared(ju));this.boundingSphere.radius=Math.sqrt(b),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var a=this.index,o=this.attributes;if(null!==a&&void 0!==o.position&&void 0!==o.normal&&void 0!==o.uv){var u=a.array,l=o.position.array,f=o.normal.array,m=o.uv.array,b=l.length/3;void 0===o.tangent&&this.setAttribute("tangent",new cu(new Float32Array(4*b),4));for(var w=o.tangent.array,C=[],T=[],I=0;I<b;I++)C[I]=new Ue,T[I]=new Ue;var Z=new Ue,Y=new Ue,V=new Ue,W=new un,se=new un,fe=new un,ve=new Ue,me=new Ue,ke=this.groups;0===ke.length&&(ke=[{start:0,count:u.length}]);for(var je=0,qe=ke.length;je<qe;++je)for(var Ze=ke[je],ct=Ze.start,ht=ct,It=ct+Ze.count;ht<It;ht+=3)pe(u[ht+0],u[ht+1],u[ht+2]);for(var _t=new Ue,Zt=new Ue,ln=new Ue,Sn=new Ue,dn=0,gn=ke.length;dn<gn;++dn)for(var Hn=ke[dn],Ur=Hn.start,ft=Ur,bn=Ur+Hn.count;ft<bn;ft+=3)kn(u[ft+0]),kn(u[ft+1]),kn(u[ft+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function pe(Jn,_n,Yn){Z.fromArray(l,3*Jn),Y.fromArray(l,3*_n),V.fromArray(l,3*Yn),W.fromArray(m,2*Jn),se.fromArray(m,2*_n),fe.fromArray(m,2*Yn),Y.sub(Z),V.sub(Z),se.sub(W),fe.sub(W);var Gn=1/(se.x*fe.y-fe.x*se.y);!isFinite(Gn)||(ve.copy(Y).multiplyScalar(fe.y).addScaledVector(V,-se.y).multiplyScalar(Gn),me.copy(V).multiplyScalar(se.x).addScaledVector(Y,-fe.x).multiplyScalar(Gn),C[Jn].add(ve),C[_n].add(ve),C[Yn].add(ve),T[Jn].add(me),T[_n].add(me),T[Yn].add(me))}function kn(Jn){ln.fromArray(f,3*Jn),Sn.copy(ln);var _n=C[Jn];_t.copy(_n),_t.sub(ln.multiplyScalar(ln.dot(_n))).normalize(),Zt.crossVectors(Sn,_n);var Gn=Zt.dot(T[Jn])<0?-1:1;w[4*Jn]=_t.x,w[4*Jn+1]=_t.y,w[4*Jn+2]=_t.z,w[4*Jn+3]=Gn}}},{key:"computeVertexNormals",value:function(){var a=this.index,o=this.getAttribute("position");if(void 0!==o){var u=this.getAttribute("normal");if(void 0===u)u=new cu(new Float32Array(3*o.count),3),this.setAttribute("normal",u);else for(var l=0,f=u.count;l<f;l++)u.setXYZ(l,0,0,0);var m=new Ue,b=new Ue,w=new Ue,C=new Ue,T=new Ue,I=new Ue,Z=new Ue,Y=new Ue;if(a)for(var V=0,W=a.count;V<W;V+=3){var se=a.getX(V+0),fe=a.getX(V+1),ve=a.getX(V+2);m.fromBufferAttribute(o,se),b.fromBufferAttribute(o,fe),w.fromBufferAttribute(o,ve),Z.subVectors(w,b),Y.subVectors(m,b),Z.cross(Y),C.fromBufferAttribute(u,se),T.fromBufferAttribute(u,fe),I.fromBufferAttribute(u,ve),C.add(Z),T.add(Z),I.add(Z),u.setXYZ(se,C.x,C.y,C.z),u.setXYZ(fe,T.x,T.y,T.z),u.setXYZ(ve,I.x,I.y,I.z)}else for(var me=0,pe=o.count;me<pe;me+=3)m.fromBufferAttribute(o,me+0),b.fromBufferAttribute(o,me+1),w.fromBufferAttribute(o,me+2),Z.subVectors(w,b),Y.subVectors(m,b),Z.cross(Y),u.setXYZ(me+0,Z.x,Z.y,Z.z),u.setXYZ(me+1,Z.x,Z.y,Z.z),u.setXYZ(me+2,Z.x,Z.y,Z.z);this.normalizeNormals(),u.needsUpdate=!0}}},{key:"merge",value:function(a,o){if(a&&a.isBufferGeometry){void 0===o&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var u=this.attributes;for(var l in u)if(void 0!==a.attributes[l])for(var m=u[l].array,b=a.attributes[l],w=b.array,C=b.itemSize*o,T=Math.min(w.length,m.length-C),I=0,Z=C;I<T;I++,Z++)m[Z]=w[I];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)}},{key:"normalizeNormals",value:function(){for(var a=this.attributes.normal,o=0,u=a.count;o<u;o++)ju.fromBufferAttribute(a,o),ju.normalize(),a.setXYZ(o,ju.x,ju.y,ju.z)}},{key:"toNonIndexed",value:function(){function a(pe,ke){for(var je=pe.array,qe=pe.itemSize,Ze=pe.normalized,ct=new je.constructor(ke.length*qe),rt=0,ht=0,It=0,_t=ke.length;It<_t;It++){rt=pe.isInterleavedBufferAttribute?ke[It]*pe.data.stride+pe.offset:ke[It]*qe;for(var Zt=0;Zt<qe;Zt++)ct[ht++]=je[rt++]}return new cu(ct,qe,Ze)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var o=new n,u=this.index.array,l=this.attributes;for(var f in l){var b=a(l[f],u);o.setAttribute(f,b)}var w=this.morphAttributes;for(var C in w){for(var T=[],I=w[C],Z=0,Y=I.length;Z<Y;Z++){var W=a(I[Z],u);T.push(W)}o.morphAttributes[C]=T}o.morphTargetsRelative=this.morphTargetsRelative;for(var se=this.groups,fe=0,ve=se.length;fe<ve;fe++){var me=se[fe];o.addGroup(me.start,me.count,me.materialIndex)}return o}},{key:"toJSON",value:function(){var a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),void 0!==this.parameters){var o=this.parameters;for(var u in o)void 0!==o[u]&&(a[u]=o[u]);return a}a.data={attributes:{}};var l=this.index;null!==l&&(a.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});var f=this.attributes;for(var m in f)a.data.attributes[m]=f[m].toJSON(a.data);var w={},C=!1;for(var T in this.morphAttributes){for(var I=this.morphAttributes[T],Z=[],Y=0,V=I.length;Y<V;Y++)Z.push(I[Y].toJSON(a.data));Z.length>0&&(w[T]=Z,C=!0)}C&&(a.data.morphAttributes=w,a.data.morphTargetsRelative=this.morphTargetsRelative);var se=this.groups;se.length>0&&(a.data.groups=JSON.parse(JSON.stringify(se)));var fe=this.boundingSphere;return null!==fe&&(a.data.boundingSphere={center:fe.center.toArray(),radius:fe.radius}),a}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var o={};this.name=a.name;var u=a.index;null!==u&&this.setIndex(u.clone(o));var l=a.attributes;for(var f in l)this.setAttribute(f,l[f].clone(o));var b=a.morphAttributes;for(var w in b){for(var C=[],T=b[w],I=0,Z=T.length;I<Z;I++)C.push(T[I].clone(o));this.morphAttributes[w]=C}this.morphTargetsRelative=a.morphTargetsRelative;for(var Y=a.groups,V=0,W=Y.length;V<W;V++){var se=Y[V];this.addGroup(se.start,se.count,se.materialIndex)}var fe=a.boundingBox;null!==fe&&(this.boundingBox=fe.clone());var ve=a.boundingSphere;return null!==ve&&(this.boundingSphere=ve.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,void 0!==a.parameters&&(this.parameters=Object.assign({},a.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(cg);ma.prototype.isBufferGeometry=!0;var zj=new Wr,UE=new RE,hU=new FE,vg=new Ue,mg=new Ue,gg=new Ue,fU=new Ue,dU=new Ue,pU=new Ue,FR=new Ue,RR=new Ue,OR=new Ue,LR=new un,NR=new un,ZR=new un,vU=new Ue,BR=new Ue,Rl=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ma,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new IR;return(0,M.Z)(this,n),(r=s.call(this)).type="Mesh",r.geometry=a,r.material=o,r.updateMorphTargets(),r}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}},{key:"updateMorphTargets",value:function(){var a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,u=Object.keys(o);if(u.length>0){var l=o[u[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var f=0,m=l.length;f<m;f++){var b=l[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=f}}}}else{var w=a.morphTargets;void 0!==w&&w.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(a,o){var m,u=this.geometry,l=this.material,f=this.matrixWorld;if(void 0!==l&&(null===u.boundingSphere&&u.computeBoundingSphere(),hU.copy(u.boundingSphere),hU.applyMatrix4(f),!1!==a.ray.intersectsSphere(hU)&&(zj.copy(f).invert(),UE.copy(a.ray).applyMatrix4(zj),null===u.boundingBox||!1!==UE.intersectsBox(u.boundingBox))))if(u.isBufferGeometry){var b=u.index,w=u.attributes.position,C=u.morphAttributes.position,T=u.morphTargetsRelative,I=u.attributes.uv,Z=u.attributes.uv2,Y=u.groups,V=u.drawRange;if(null!==b)if(Array.isArray(l))for(var W=0,se=Y.length;W<se;W++)for(var fe=Y[W],ve=l[fe.materialIndex],ke=Math.max(fe.start,V.start),je=Math.min(b.count,Math.min(fe.start+fe.count,V.start+V.count));ke<je;ke+=3){var qe=b.getX(ke),Ze=b.getX(ke+1),ct=b.getX(ke+2);(m=UR(this,ve,a,UE,w,C,T,I,Z,qe,Ze,ct))&&(m.faceIndex=Math.floor(ke/3),m.face.materialIndex=fe.materialIndex,o.push(m))}else for(var It=Math.max(0,V.start),_t=Math.min(b.count,V.start+V.count);It<_t;It+=3){var Zt=b.getX(It),ln=b.getX(It+1),Sn=b.getX(It+2);(m=UR(this,l,a,UE,w,C,T,I,Z,Zt,ln,Sn))&&(m.faceIndex=Math.floor(It/3),o.push(m))}else if(void 0!==w)if(Array.isArray(l))for(var kn=0,dn=Y.length;kn<dn;kn++)for(var gn=Y[kn],Hn=l[gn.materialIndex],ft=Math.max(gn.start,V.start),bn=Math.min(w.count,Math.min(gn.start+gn.count,V.start+V.count));ft<bn;ft+=3)(m=UR(this,Hn,a,UE,w,C,T,I,Z,ft,ft+1,ft+2))&&(m.faceIndex=Math.floor(ft/3),m.face.materialIndex=gn.materialIndex,o.push(m));else for(var en=Math.max(0,V.start),yn=Math.min(w.count,V.start+V.count);en<yn;en+=3)(m=UR(this,l,a,UE,w,C,T,I,Z,en,en+1,en+2))&&(m.faceIndex=Math.floor(en/3),o.push(m))}else u.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(ws);function UR(i,s,n,r,a,o,u,l,f,m,b,w){vg.fromBufferAttribute(a,m),mg.fromBufferAttribute(a,b),gg.fromBufferAttribute(a,w);var C=i.morphTargetInfluences;if(o&&C){FR.set(0,0,0),RR.set(0,0,0),OR.set(0,0,0);for(var T=0,I=o.length;T<I;T++){var Z=C[T],Y=o[T];0!==Z&&(fU.fromBufferAttribute(Y,m),dU.fromBufferAttribute(Y,b),pU.fromBufferAttribute(Y,w),u?(FR.addScaledVector(fU,Z),RR.addScaledVector(dU,Z),OR.addScaledVector(pU,Z)):(FR.addScaledVector(fU.sub(vg),Z),RR.addScaledVector(dU.sub(mg),Z),OR.addScaledVector(pU.sub(gg),Z)))}vg.add(FR),mg.add(RR),gg.add(OR)}i.isSkinnedMesh&&(i.boneTransform(m,vg),i.boneTransform(b,mg),i.boneTransform(w,gg));var V=function(i,s,n,r,a,o,u,l){if(null===(1===s.side?r.intersectTriangle(u,o,a,!0,l):r.intersectTriangle(a,o,u,2!==s.side,l)))return null;BR.copy(l),BR.applyMatrix4(i.matrixWorld);var m=n.ray.origin.distanceTo(BR);return m<n.near||m>n.far?null:{distance:m,point:BR.clone(),object:i}}(i,s,n,r,vg,mg,gg,vU);if(V){l&&(LR.fromBufferAttribute(l,m),NR.fromBufferAttribute(l,b),ZR.fromBufferAttribute(l,w),V.uv=Ic.getUV(vU,vg,mg,gg,LR,NR,ZR,new un)),f&&(LR.fromBufferAttribute(f,m),NR.fromBufferAttribute(f,b),ZR.fromBufferAttribute(f,w),V.uv2=Ic.getUV(vU,vg,mg,gg,LR,NR,ZR,new un));var W={a:m,b:b,c:w,normal:new Ue,materialIndex:0};Ic.getNormal(vg,mg,gg,W.normal),V.face=W}return V}Rl.prototype.isMesh=!0;var VE=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;(0,M.Z)(this,n),(r=s.call(this)).type="BoxGeometry",r.parameters={width:a,height:o,depth:u,widthSegments:l,heightSegments:f,depthSegments:m};var b=(0,Ja.Z)(r);l=Math.floor(l),f=Math.floor(f),m=Math.floor(m);var w=[],C=[],T=[],I=[],Z=0,Y=0;function V(W,se,fe,ve,me,pe,ke,je,qe,Ze,ct){for(var rt=pe/qe,ht=ke/Ze,It=pe/2,_t=ke/2,Zt=je/2,ln=qe+1,Sn=Ze+1,kn=0,dn=0,gn=new Ue,Hn=0;Hn<Sn;Hn++)for(var Ur=Hn*ht-_t,Qn=0;Qn<ln;Qn++)gn[W]=(Qn*rt-It)*ve,gn[se]=Ur*me,gn[fe]=Zt,C.push(gn.x,gn.y,gn.z),gn[W]=0,gn[se]=0,gn[fe]=je>0?1:-1,T.push(gn.x,gn.y,gn.z),I.push(Qn/qe),I.push(1-Hn/Ze),kn+=1;for(var bn=0;bn<Ze;bn++)for(var Jn=0;Jn<qe;Jn++){var Yn=Z+Jn+ln*(bn+1),Gn=Z+(Jn+1)+ln*(bn+1),Vn=Z+(Jn+1)+ln*bn;w.push(Z+Jn+ln*bn,Yn,Vn),w.push(Yn,Gn,Vn),dn+=6}b.addGroup(Y,dn,ct),Y+=dn,Z+=kn}return V("z","y","x",-1,-1,u,o,a,m,f,0),V("z","y","x",1,-1,u,o,-a,m,f,1),V("x","z","y",1,1,a,u,o,l,m,2),V("x","z","y",1,-1,a,u,-o,l,m,3),V("x","y","z",1,-1,a,o,u,l,f,4),V("x","y","z",-1,-1,a,o,-u,l,f,5),r.setIndex(w),r.setAttribute("position",new ci(C,3)),r.setAttribute("normal",new ci(T,3)),r.setAttribute("uv",new ci(I,2)),r}return(0,R.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}]),n}(ma);function zE(i){var s={};for(var n in i)for(var r in s[n]={},i[n]){var a=i[n][r];s[n][r]=a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.clone():Array.isArray(a)?a.slice():a}return s}function Ol(i){for(var s={},n=0;n<i.length;n++){var r=zE(i[n]);for(var a in r)s[a]=r[a]}return s}var xie={clone:zE,merge:Ol},yg=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="ShaderMaterial",a.defines={},a.uniforms={},a.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",a.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",a.linewidth=1,a.wireframe=!1,a.wireframeLinewidth=1,a.fog=!1,a.lights=!1,a.clipping=!1,a.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},a.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},a.index0AttributeName=void 0,a.uniformsNeedUpdate=!1,a.glslVersion=null,void 0!==r&&(void 0!==r.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),a.setValues(r)),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=zE(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);for(var u in o.glslVersion=this.glslVersion,o.uniforms={},this.uniforms){var f=this.uniforms[u].value;o.uniforms[u]=f&&f.isTexture?{type:"t",value:f.toJSON(a).uuid}:f&&f.isColor?{type:"c",value:f.getHex()}:f&&f.isVector2?{type:"v2",value:f.toArray()}:f&&f.isVector3?{type:"v3",value:f.toArray()}:f&&f.isVector4?{type:"v4",value:f.toArray()}:f&&f.isMatrix3?{type:"m3",value:f.toArray()}:f&&f.isMatrix4?{type:"m4",value:f.toArray()}:{value:f}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;var m={};for(var b in this.extensions)!0===this.extensions[b]&&(m[b]=!0);return Object.keys(m).length>0&&(o.extensions=m),o}}]),n}(pl);yg.prototype.isShaderMaterial=!0;var VR=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Camera",r.matrixWorldInverse=new Wr,r.projectionMatrix=new Wr,r.projectionMatrixInverse=new Wr,r}return(0,R.Z)(n,[{key:"copy",value:function(a,o){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a,o),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(a){this.updateWorldMatrix(!0,!1);var o=this.matrixWorld.elements;return a.set(-o[8],-o[9],-o[10]).normalize()}},{key:"updateMatrixWorld",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"updateMatrixWorld",this).call(this,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(a,o){(0,Se.Z)((0,ye.Z)(n.prototype),"updateWorldMatrix",this).call(this,a,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(ws);VR.prototype.isCamera=!0;var hc=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return(0,M.Z)(this,n),(r=s.call(this)).type="PerspectiveCamera",r.fov=a,r.zoom=1,r.near=u,r.far=l,r.focus=10,r.aspect=o,r.view=null,r.filmGauge=35,r.filmOffset=0,r.updateProjectionMatrix(),r}return(0,R.Z)(n,[{key:"copy",value:function(a,o){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a,o),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}},{key:"setFocalLength",value:function(a){var o=.5*this.getFilmHeight()/a;this.fov=2*GT*Math.atan(o),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var a=Math.tan(.5*AE*this.fov);return.5*this.getFilmHeight()/a}},{key:"getEffectiveFOV",value:function(){return 2*GT*Math.atan(Math.tan(.5*AE*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(a,o,u,l,f,m){this.aspect=a/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=u,this.view.offsetY=l,this.view.width=f,this.view.height=m,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var a=this.near,o=a*Math.tan(.5*AE*this.fov)/this.zoom,u=2*o,l=this.aspect*u,f=-.5*l,m=this.view;if(null!==this.view&&this.view.enabled){var b=m.fullWidth,w=m.fullHeight;f+=m.offsetX*l/b,o-=m.offsetY*u/w,l*=m.width/b,u*=m.height/w}var C=this.filmOffset;0!==C&&(f+=a*C/this.getFilmWidth()),this.projectionMatrix.makePerspective(f,f+l,o,o-u,a,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}]),n}(VR);hc.prototype.isPerspectiveCamera=!0;var mU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;if((0,M.Z)(this,n),(u=s.call(this)).type="CubeCamera",!0!==o.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),(0,mne.Z)(u);u.renderTarget=o;var l=new hc(90,1,r,a);l.layers=u.layers,l.up.set(0,-1,0),l.lookAt(new Ue(1,0,0)),u.add(l);var f=new hc(90,1,r,a);f.layers=u.layers,f.up.set(0,-1,0),f.lookAt(new Ue(-1,0,0)),u.add(f);var m=new hc(90,1,r,a);m.layers=u.layers,m.up.set(0,0,1),m.lookAt(new Ue(0,1,0)),u.add(m);var b=new hc(90,1,r,a);b.layers=u.layers,b.up.set(0,0,-1),b.lookAt(new Ue(0,-1,0)),u.add(b);var w=new hc(90,1,r,a);w.layers=u.layers,w.up.set(0,-1,0),w.lookAt(new Ue(0,0,1)),u.add(w);var C=new hc(90,1,r,a);return C.layers=u.layers,C.up.set(0,-1,0),C.lookAt(new Ue(0,0,-1)),u.add(C),u}return(0,R.Z)(n,[{key:"update",value:function(a,o){null===this.parent&&this.updateMatrixWorld();var u=this.renderTarget,l=(0,Te.Z)(this.children,6),f=l[0],m=l[1],b=l[2],w=l[3],C=l[4],T=l[5],I=a.xr.enabled,Z=a.getRenderTarget();a.xr.enabled=!1;var Y=u.texture.generateMipmaps;u.texture.generateMipmaps=!1,a.setRenderTarget(u,0),a.render(o,f),a.setRenderTarget(u,1),a.render(o,m),a.setRenderTarget(u,2),a.render(o,b),a.setRenderTarget(u,3),a.render(o,w),a.setRenderTarget(u,4),a.render(o,C),u.texture.generateMipmaps=Y,a.setRenderTarget(u,5),a.render(o,T),a.setRenderTarget(Z),a.xr.enabled=I}}]),n}(ws),zR=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f,m,b,w,C){var T;return(0,M.Z)(this,n),(T=s.call(this,r=void 0!==r?r:[],a=void 0!==a?a:301,o,u,l,f,m,b,w,C)).flipY=!1,T}return(0,R.Z)(n,[{key:"images",get:function(){return this.image},set:function(a){this.image=a}}]),n}(Mc);zR.prototype.isCubeTexture=!0;var gU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),Number.isInteger(a)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),a=o),(u=s.call(this,r,r,a)).texture=new zR(void 0,(a=a||{}).mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),u.texture.isRenderTargetTexture=!0,u.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,u.texture.minFilter=void 0!==a.minFilter?a.minFilter:rh,u.texture._needsFlipEnvMap=!1,u}return(0,R.Z)(n,[{key:"fromEquirectangularTexture",value:function(a,o){this.texture.type=o.type,this.texture.format=cc,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;var l=new VE(5,5,5),f=new yg({name:"CubemapFromEquirect",uniforms:zE({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});f.uniforms.tEquirect.value=o;var m=new Rl(l,f),b=o.minFilter;return o.minFilter===BT&&(o.minFilter=rh),new mU(1,10,this).update(a,m),o.minFilter=b,m.geometry.dispose(),m.material.dispose(),this}},{key:"clear",value:function(a,o,u,l){for(var f=a.getRenderTarget(),m=0;m<6;m++)a.setRenderTarget(this,m),a.clear(o,u,l);a.setRenderTarget(f)}}]),n}(Xd);gU.prototype.isWebGLCubeRenderTarget=!0;var yU=new Ue,Pie=new Ue,Fie=new dl,ov=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,i),this.normal=s,this.constant=n}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.normal.copy(n),this.constant=r,this}},{key:"setComponents",value:function(n,r,a,o){return this.normal.set(n,r,a),this.constant=o,this}},{key:"setFromNormalAndCoplanarPoint",value:function(n,r){return this.normal.copy(n),this.constant=-r.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(n,r,a){var o=yU.subVectors(a,r).cross(Pie.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}},{key:"copy",value:function(n){return this.normal.copy(n.normal),this.constant=n.constant,this}},{key:"normalize",value:function(){var n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(n){return this.normal.dot(n)+this.constant}},{key:"distanceToSphere",value:function(n){return this.distanceToPoint(n.center)-n.radius}},{key:"projectPoint",value:function(n,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(n)).add(n)}},{key:"intersectLine",value:function(n,r){var a=n.delta(yU),o=this.normal.dot(a);if(0===o)return 0===this.distanceToPoint(n.start)?r.copy(n.start):null;var u=-(n.start.dot(this.normal)+this.constant)/o;return u<0||u>1?null:r.copy(a).multiplyScalar(u).add(n.start)}},{key:"intersectsLine",value:function(n){var r=this.distanceToPoint(n.start),a=this.distanceToPoint(n.end);return r<0&&a>0||a<0&&r>0}},{key:"intersectsBox",value:function(n){return n.intersectsPlane(this)}},{key:"intersectsSphere",value:function(n){return n.intersectsPlane(this)}},{key:"coplanarPoint",value:function(n){return n.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(n,r){var a=r||Fie.getNormalMatrix(n),o=this.coplanarPoint(yU).applyMatrix4(n),u=this.normal.applyMatrix3(a).normalize();return this.constant=-o.dot(u),this}},{key:"translate",value:function(n){return this.constant-=n.dot(this.normal),this}},{key:"equals",value:function(n){return n.normal.equals(this.normal)&&n.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}();ov.prototype.isPlane=!0;var jE=new FE,HR=new Ue,GR=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ov,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ov,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ov,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ov,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new ov,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new ov;(0,M.Z)(this,i),this.planes=[s,n,r,a,o,u]}return(0,R.Z)(i,[{key:"set",value:function(n,r,a,o,u,l){var f=this.planes;return f[0].copy(n),f[1].copy(r),f[2].copy(a),f[3].copy(o),f[4].copy(u),f[5].copy(l),this}},{key:"copy",value:function(n){for(var r=this.planes,a=0;a<6;a++)r[a].copy(n.planes[a]);return this}},{key:"setFromProjectionMatrix",value:function(n){var r=this.planes,a=n.elements,o=a[0],u=a[1],l=a[2],f=a[3],m=a[4],b=a[5],w=a[6],C=a[7],T=a[8],I=a[9],Z=a[10],Y=a[11],V=a[12],W=a[13],se=a[14],fe=a[15];return r[0].setComponents(f-o,C-m,Y-T,fe-V).normalize(),r[1].setComponents(f+o,C+m,Y+T,fe+V).normalize(),r[2].setComponents(f+u,C+b,Y+I,fe+W).normalize(),r[3].setComponents(f-u,C-b,Y-I,fe-W).normalize(),r[4].setComponents(f-l,C-w,Y-Z,fe-se).normalize(),r[5].setComponents(f+l,C+w,Y+Z,fe+se).normalize(),this}},{key:"intersectsObject",value:function(n){var r=n.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),jE.copy(r.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(jE)}},{key:"intersectsSprite",value:function(n){return jE.center.set(0,0,0),jE.radius=.7071067811865476,jE.applyMatrix4(n.matrixWorld),this.intersectsSphere(jE)}},{key:"intersectsSphere",value:function(n){for(var r=this.planes,a=n.center,o=-n.radius,u=0;u<6;u++)if(r[u].distanceToPoint(a)<o)return!1;return!0}},{key:"intersectsBox",value:function(n){for(var r=this.planes,a=0;a<6;a++){var o=r[a];if(HR.x=o.normal.x>0?n.max.x:n.min.x,HR.y=o.normal.y>0?n.max.y:n.min.y,HR.z=o.normal.z>0?n.max.z:n.min.z,o.distanceToPoint(HR)<0)return!1}return!0}},{key:"containsPoint",value:function(n){for(var r=this.planes,a=0;a<6;a++)if(r[a].distanceToPoint(n)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}();function Hj(){var i=null,s=!1,n=null,r=null;function a(o,u){n(o,u),r=i.requestAnimationFrame(a)}return{start:function(){!0!==s&&null!==n&&(r=i.requestAnimationFrame(a),s=!0)},stop:function(){i.cancelAnimationFrame(r),s=!1},setAnimationLoop:function(u){n=u},setContext:function(u){i=u}}}function Rie(i,s){var n=s.isWebGL2,r=new WeakMap;return{get:function(m){return m.isInterleavedBufferAttribute&&(m=m.data),r.get(m)},remove:function(m){m.isInterleavedBufferAttribute&&(m=m.data);var b=r.get(m);b&&(i.deleteBuffer(b.buffer),r.delete(m))},update:function(m,b){if(m.isGLBufferAttribute){var w=r.get(m);(!w||w.version<m.version)&&r.set(m,{buffer:m.buffer,type:m.type,bytesPerElement:m.elementSize,version:m.version})}else{m.isInterleavedBufferAttribute&&(m=m.data);var C=r.get(m);void 0===C?r.set(m,function(m,b){var w=m.array,C=m.usage,T=i.createBuffer();i.bindBuffer(b,T),i.bufferData(b,w,C),m.onUploadCallback();var I=5126;return w instanceof Float32Array?I=5126:w instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):w instanceof Uint16Array?m.isFloat16BufferAttribute?n?I=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):I=5123:w instanceof Int16Array?I=5122:w instanceof Uint32Array?I=5125:w instanceof Int32Array?I=5124:w instanceof Int8Array?I=5120:(w instanceof Uint8Array||w instanceof Uint8ClampedArray)&&(I=5121),{buffer:T,type:I,bytesPerElement:w.BYTES_PER_ELEMENT,version:m.version}}(m,b)):C.version<m.version&&(function(m,b,w){var C=b.array,T=b.updateRange;i.bindBuffer(w,m),-1===T.count?i.bufferSubData(w,0,C):(n?i.bufferSubData(w,T.offset*C.BYTES_PER_ELEMENT,C,T.offset,T.count):i.bufferSubData(w,T.offset*C.BYTES_PER_ELEMENT,C.subarray(T.offset,T.offset+T.count)),T.count=-1)}(C.buffer,m,b),C.version=m.version)}}}}var _U=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,M.Z)(this,n),(r=s.call(this)).type="PlaneGeometry",r.parameters={width:a,height:o,widthSegments:u,heightSegments:l};for(var f=a/2,m=o/2,b=Math.floor(u),w=Math.floor(l),C=b+1,T=w+1,I=a/b,Z=o/w,Y=[],V=[],W=[],se=[],fe=0;fe<T;fe++)for(var ve=fe*Z-m,me=0;me<C;me++){var pe=me*I-f;V.push(pe,-ve,0),W.push(0,0,1),se.push(me/b),se.push(1-fe/w)}for(var ke=0;ke<w;ke++)for(var je=0;je<b;je++){var qe=je+C*ke,Ze=je+C*(ke+1),ct=je+1+C*(ke+1),rt=je+1+C*ke;Y.push(qe,Ze,rt),Y.push(Ze,ct,rt)}return r.setIndex(Y),r.setAttribute("position",new ci(V,3)),r.setAttribute("normal",new ci(W,3)),r.setAttribute("uv",new ci(se,2)),r}return(0,R.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.width,a.height,a.widthSegments,a.heightSegments)}}]),n}(ma),Xi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenTint * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Xn={common:{diffuse:{value:new xr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new dl},uv2Transform:{value:new dl},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new un(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new dl}},sprite:{diffuse:{value:new xr(16777215)},opacity:{value:1},center:{value:new un(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new dl}}},Qd={basic:{uniforms:Ol([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.fog]),vertexShader:Xi.meshbasic_vert,fragmentShader:Xi.meshbasic_frag},lambert:{uniforms:Ol([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.fog,Xn.lights,{emissive:{value:new xr(0)}}]),vertexShader:Xi.meshlambert_vert,fragmentShader:Xi.meshlambert_frag},phong:{uniforms:Ol([Xn.common,Xn.specularmap,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,Xn.lights,{emissive:{value:new xr(0)},specular:{value:new xr(1118481)},shininess:{value:30}}]),vertexShader:Xi.meshphong_vert,fragmentShader:Xi.meshphong_frag},standard:{uniforms:Ol([Xn.common,Xn.envmap,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.roughnessmap,Xn.metalnessmap,Xn.fog,Xn.lights,{emissive:{value:new xr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xi.meshphysical_vert,fragmentShader:Xi.meshphysical_frag},toon:{uniforms:Ol([Xn.common,Xn.aomap,Xn.lightmap,Xn.emissivemap,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.gradientmap,Xn.fog,Xn.lights,{emissive:{value:new xr(0)}}]),vertexShader:Xi.meshtoon_vert,fragmentShader:Xi.meshtoon_frag},matcap:{uniforms:Ol([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,Xn.fog,{matcap:{value:null}}]),vertexShader:Xi.meshmatcap_vert,fragmentShader:Xi.meshmatcap_frag},points:{uniforms:Ol([Xn.points,Xn.fog]),vertexShader:Xi.points_vert,fragmentShader:Xi.points_frag},dashed:{uniforms:Ol([Xn.common,Xn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xi.linedashed_vert,fragmentShader:Xi.linedashed_frag},depth:{uniforms:Ol([Xn.common,Xn.displacementmap]),vertexShader:Xi.depth_vert,fragmentShader:Xi.depth_frag},normal:{uniforms:Ol([Xn.common,Xn.bumpmap,Xn.normalmap,Xn.displacementmap,{opacity:{value:1}}]),vertexShader:Xi.meshnormal_vert,fragmentShader:Xi.meshnormal_frag},sprite:{uniforms:Ol([Xn.sprite,Xn.fog]),vertexShader:Xi.sprite_vert,fragmentShader:Xi.sprite_frag},background:{uniforms:{uvTransform:{value:new dl},t2D:{value:null}},vertexShader:Xi.background_vert,fragmentShader:Xi.background_frag},cube:{uniforms:Ol([Xn.envmap,{opacity:{value:1}}]),vertexShader:Xi.cube_vert,fragmentShader:Xi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xi.equirect_vert,fragmentShader:Xi.equirect_frag},distanceRGBA:{uniforms:Ol([Xn.common,Xn.displacementmap,{referencePosition:{value:new Ue},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xi.distanceRGBA_vert,fragmentShader:Xi.distanceRGBA_frag},shadow:{uniforms:Ol([Xn.lights,Xn.fog,{color:{value:new xr(0)},opacity:{value:1}}]),vertexShader:Xi.shadow_vert,fragmentShader:Xi.shadow_frag}};function ooe(i,s,n,r,a){var l,f,o=new xr(0),u=0,m=null,b=0,w=null;function T(I,Z){n.buffers.color.setClear(I.r,I.g,I.b,Z,a)}return{getClearColor:function(){return o},setClearColor:function(Z){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(Z),T(o,u=Y)},getClearAlpha:function(){return u},setClearAlpha:function(Z){T(o,u=Z)},render:function(I,Z){var Y=!1,V=!0===Z.isScene?Z.background:null;V&&V.isTexture&&(V=s.get(V));var W=i.xr,se=W.getSession&&W.getSession();se&&"additive"===se.environmentBlendMode&&(V=null),null===V?T(o,u):V&&V.isColor&&(T(V,1),Y=!0),(i.autoClear||Y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),V&&(V.isCubeTexture||306===V.mapping)?(void 0===f&&((f=new Rl(new VE(1,1,1),new yg({name:"BackgroundCubeMaterial",uniforms:zE(Qd.cube.uniforms),vertexShader:Qd.cube.vertexShader,fragmentShader:Qd.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(fe,ve,me){this.matrixWorld.copyPosition(me.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=V,f.material.uniforms.flipEnvMap.value=V.isCubeTexture&&!1===V.isRenderTargetTexture?-1:1,(m!==V||b!==V.version||w!==i.toneMapping)&&(f.material.needsUpdate=!0,m=V,b=V.version,w=i.toneMapping),I.unshift(f,f.geometry,f.material,0,0,null)):V&&V.isTexture&&(void 0===l&&((l=new Rl(new _U(2,2),new yg({name:"BackgroundMaterial",uniforms:zE(Qd.background.uniforms),vertexShader:Qd.background.vertexShader,fragmentShader:Qd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=V,!0===V.matrixAutoUpdate&&V.updateMatrix(),l.material.uniforms.uvTransform.value.copy(V.matrix),(m!==V||b!==V.version||w!==i.toneMapping)&&(l.material.needsUpdate=!0,m=V,b=V.version,w=i.toneMapping),I.unshift(l,l.geometry,l.material,0,0,null))}}}function uoe(i,s,n,r){var a=i.getParameter(34921),o=r.isWebGL2?null:s.get("OES_vertex_array_object"),u=r.isWebGL2||null!==o,l={},f=Z(null),m=f;function C(rt){return r.isWebGL2?i.bindVertexArray(rt):o.bindVertexArrayOES(rt)}function T(rt){return r.isWebGL2?i.deleteVertexArray(rt):o.deleteVertexArrayOES(rt)}function Z(rt){for(var ht=[],It=[],_t=[],Zt=0;Zt<a;Zt++)ht[Zt]=0,It[Zt]=0,_t[Zt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ht,enabledAttributes:It,attributeDivisors:_t,object:rt,attributes:{},index:null}}function W(){for(var rt=m.newAttributes,ht=0,It=rt.length;ht<It;ht++)rt[ht]=0}function se(rt){fe(rt,0)}function fe(rt,ht){var _t=m.enabledAttributes,Zt=m.attributeDivisors;m.newAttributes[rt]=1,0===_t[rt]&&(i.enableVertexAttribArray(rt),_t[rt]=1),Zt[rt]!==ht&&((r.isWebGL2?i:s.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](rt,ht),Zt[rt]=ht)}function ve(){for(var rt=m.newAttributes,ht=m.enabledAttributes,It=0,_t=ht.length;It<_t;It++)ht[It]!==rt[It]&&(i.disableVertexAttribArray(It),ht[It]=0)}function me(rt,ht,It,_t,Zt,ln){!0!==r.isWebGL2||5124!==It&&5125!==It?i.vertexAttribPointer(rt,ht,It,_t,Zt,ln):i.vertexAttribIPointer(rt,ht,It,Zt,ln)}function Ze(){ct(),m!==f&&C((m=f).object)}function ct(){f.geometry=null,f.program=null,f.wireframe=!1}return{setup:function(rt,ht,It,_t,Zt){var ln=!1;if(u){var Sn=function(rt,ht,It){var _t=!0===It.wireframe,Zt=l[rt.id];void 0===Zt&&(l[rt.id]=Zt={});var ln=Zt[ht.id];void 0===ln&&(Zt[ht.id]=ln={});var Sn=ln[_t];return void 0===Sn&&(Sn=Z(r.isWebGL2?i.createVertexArray():o.createVertexArrayOES()),ln[_t]=Sn),Sn}(_t,It,ht);m!==Sn&&C((m=Sn).object),(ln=function(rt,ht){var It=m.attributes,_t=rt.attributes,Zt=0;for(var ln in _t){var Sn=It[ln],kn=_t[ln];if(void 0===Sn||Sn.attribute!==kn||Sn.data!==kn.data)return!0;Zt++}return m.attributesNum!==Zt||m.index!==ht}(_t,Zt))&&function(rt,ht){var It={},_t=rt.attributes,Zt=0;for(var ln in _t){var Sn=_t[ln],kn={};kn.attribute=Sn,Sn.data&&(kn.data=Sn.data),It[ln]=kn,Zt++}m.attributes=It,m.attributesNum=Zt,m.index=ht}(_t,Zt)}else{var kn=!0===ht.wireframe;(m.geometry!==_t.id||m.program!==It.id||m.wireframe!==kn)&&(m.geometry=_t.id,m.program=It.id,m.wireframe=kn,ln=!0)}!0===rt.isInstancedMesh&&(ln=!0),null!==Zt&&n.update(Zt,34963),ln&&(function(rt,ht,It,_t){if(!1!==r.isWebGL2||!rt.isInstancedMesh&&!_t.isInstancedBufferGeometry||null!==s.get("ANGLE_instanced_arrays")){W();var Zt=_t.attributes,ln=It.getAttributes(),Sn=ht.defaultAttributeValues;for(var kn in ln){var dn=ln[kn];if(dn.location>=0){var gn=Zt[kn];if(void 0===gn&&("instanceMatrix"===kn&&rt.instanceMatrix&&(gn=rt.instanceMatrix),"instanceColor"===kn&&rt.instanceColor&&(gn=rt.instanceColor)),void 0!==gn){var Hn=gn.normalized,Ur=gn.itemSize,Qn=n.get(gn);if(void 0===Qn)continue;var ft=Qn.buffer,bn=Qn.type,Jn=Qn.bytesPerElement;if(gn.isInterleavedBufferAttribute){var _n=gn.data,Yn=_n.stride,Gn=gn.offset;if(_n&&_n.isInstancedInterleavedBuffer){for(var Vn=0;Vn<dn.locationSize;Vn++)fe(dn.location+Vn,_n.meshPerAttribute);!0!==rt.isInstancedMesh&&void 0===_t._maxInstanceCount&&(_t._maxInstanceCount=_n.meshPerAttribute*_n.count)}else for(var en=0;en<dn.locationSize;en++)se(dn.location+en);i.bindBuffer(34962,ft);for(var yn=0;yn<dn.locationSize;yn++)me(dn.location+yn,Ur/dn.locationSize,bn,Hn,Yn*Jn,(Gn+Ur/dn.locationSize*yn)*Jn)}else{if(gn.isInstancedBufferAttribute){for(var An=0;An<dn.locationSize;An++)fe(dn.location+An,gn.meshPerAttribute);!0!==rt.isInstancedMesh&&void 0===_t._maxInstanceCount&&(_t._maxInstanceCount=gn.meshPerAttribute*gn.count)}else for(var Vr=0;Vr<dn.locationSize;Vr++)se(dn.location+Vr);i.bindBuffer(34962,ft);for(var Pi=0;Pi<dn.locationSize;Pi++)me(dn.location+Pi,Ur/dn.locationSize,bn,Hn,Ur*Jn,Ur/dn.locationSize*Pi*Jn)}}else if(void 0!==Sn){var ba=Sn[kn];if(void 0!==ba)switch(ba.length){case 2:i.vertexAttrib2fv(dn.location,ba);break;case 3:i.vertexAttrib3fv(dn.location,ba);break;case 4:i.vertexAttrib4fv(dn.location,ba);break;default:i.vertexAttrib1fv(dn.location,ba)}}}}ve()}}(rt,ht,It,_t),null!==Zt&&i.bindBuffer(34963,n.get(Zt).buffer))},reset:Ze,resetDefaultState:ct,dispose:function(){for(var rt in Ze(),l){var ht=l[rt];for(var It in ht){var _t=ht[It];for(var Zt in _t)T(_t[Zt].object),delete _t[Zt];delete ht[It]}delete l[rt]}},releaseStatesOfGeometry:function(rt){if(void 0!==l[rt.id]){var ht=l[rt.id];for(var It in ht){var _t=ht[It];for(var Zt in _t)T(_t[Zt].object),delete _t[Zt];delete ht[It]}delete l[rt.id]}},releaseStatesOfProgram:function(rt){for(var ht in l){var It=l[ht];if(void 0!==It[rt.id]){var _t=It[rt.id];for(var Zt in _t)T(_t[Zt].object),delete _t[Zt];delete It[rt.id]}}},initAttributes:W,enableAttribute:se,disableUnusedAttributes:ve}}function loe(i,s,n,r){var o,a=r.isWebGL2;this.setMode=function(m){o=m},this.render=function(m,b){i.drawArrays(o,m,b),n.update(b,o,1)},this.renderInstances=function(m,b,w){if(0!==w){var C,T;if(a)C=i,T="drawArraysInstanced";else if(T="drawArraysInstancedANGLE",null===(C=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[T](o,m,b,w),n.update(b,o,w)}}}function coe(i,s,n){var r;function o(pe){if("highp"===pe){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";pe="mediump"}return"mediump"===pe&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var u="undefined"!=typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&i instanceof WebGL2ComputeRenderingContext,l=void 0!==n.precision?n.precision:"highp",f=o(l);f!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",f,"instead."),l=f);var m=u||s.has("WEBGL_draw_buffers"),b=!0===n.logarithmicDepthBuffer,w=i.getParameter(34930),C=i.getParameter(35660),T=i.getParameter(3379),I=i.getParameter(34076),Z=i.getParameter(34921),Y=i.getParameter(36347),V=i.getParameter(36348),W=i.getParameter(36349),se=C>0,fe=u||s.has("OES_texture_float");return{isWebGL2:u,drawBuffers:m,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===s.has("EXT_texture_filter_anisotropic")){var pe=s.get("EXT_texture_filter_anisotropic");r=i.getParameter(pe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,precision:l,logarithmicDepthBuffer:b,maxTextures:w,maxVertexTextures:C,maxTextureSize:T,maxCubemapSize:I,maxAttributes:Z,maxVertexUniforms:Y,maxVaryings:V,maxFragmentUniforms:W,vertexTextures:se,floatFragmentTextures:fe,floatVertexTextures:se&&fe,maxSamples:u?i.getParameter(36183):0}}function hoe(i){var s=this,n=null,r=0,a=!1,o=!1,u=new ov,l=new dl,f={value:null,needsUpdate:!1};function m(){f.value!==n&&(f.value=n,f.needsUpdate=r>0),s.numPlanes=r,s.numIntersection=0}function b(w,C,T,I){var Z=null!==w?w.length:0,Y=null;if(0!==Z){if(Y=f.value,!0!==I||null===Y){var V=T+4*Z,W=C.matrixWorldInverse;l.getNormalMatrix(W),(null===Y||Y.length<V)&&(Y=new Float32Array(V));for(var se=0,fe=T;se!==Z;++se,fe+=4)u.copy(w[se]).applyMatrix4(W,l),u.normal.toArray(Y,fe),Y[fe+3]=u.constant}f.value=Y,f.needsUpdate=!0}return s.numPlanes=Z,s.numIntersection=0,Y}this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(w,C,T){var I=0!==w.length||C||0!==r||a;return a=C,n=b(w,T,0),r=w.length,I},this.beginShadows=function(){o=!0,b(null)},this.endShadows=function(){o=!1,m()},this.setState=function(w,C,T){var I=w.clippingPlanes,Z=w.clipIntersection,Y=w.clipShadows,V=i.get(w);if(!a||null===I||0===I.length||o&&!Y)o?b(null):m();else{var W=o?0:r,se=4*W,fe=V.clippingState||null;f.value=fe,fe=b(I,C,se,T);for(var ve=0;ve!==se;++ve)fe[ve]=n[ve];V.clippingState=fe,this.numIntersection=Z?this.numPlanes:0,this.numPlanes+=W}}}function foe(i){var s=new WeakMap;function n(u,l){return 303===l?u.mapping=301:304===l&&(u.mapping=302),u}function a(u){var l=u.target;l.removeEventListener("dispose",a);var f=s.get(l);void 0!==f&&(s.delete(l),f.dispose())}return{get:function(u){if(u&&u.isTexture&&!1===u.isRenderTargetTexture){var l=u.mapping;if(303===l||304===l){if(s.has(u))return n(s.get(u).texture,u.mapping);var m=u.image;if(m&&m.height>0){var b=i.getRenderTarget(),w=new gU(m.height/2);return w.fromEquirectangularTexture(i,u),s.set(u,w),i.setRenderTarget(b),u.addEventListener("dispose",a),n(w.texture,u.mapping)}return null}}return u},dispose:function(){s=new WeakMap}}}Qd.physical={uniforms:Ol([Qd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new un(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new xr(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new un},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new xr(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new xr(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Xi.meshphysical_vert,fragmentShader:Xi.meshphysical_frag};var bU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return(0,M.Z)(this,n),(r=s.call(this)).type="OrthographicCamera",r.zoom=1,r.view=null,r.left=a,r.right=o,r.top=u,r.bottom=l,r.near=f,r.far=m,r.updateProjectionMatrix(),r}return(0,R.Z)(n,[{key:"copy",value:function(a,o){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a,o),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this}},{key:"setViewOffset",value:function(a,o,u,l,f,m){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=u,this.view.offsetY=l,this.view.width=f,this.view.height=m,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var a=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),u=(this.right+this.left)/2,l=(this.top+this.bottom)/2,f=u-a,m=u+a,b=l+o,w=l-o;if(null!==this.view&&this.view.enabled){var C=(this.right-this.left)/this.view.fullWidth/this.zoom,T=(this.top-this.bottom)/this.view.fullHeight/this.zoom;m=(f+=C*this.view.offsetX)+C*this.view.width,w=(b-=T*this.view.offsetY)-T*this.view.height}this.projectionMatrix.makeOrthographic(f,m,b,w,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}]),n}(VR);bU.prototype.isOrthographicCamera=!0;var XT=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).type="RawShaderMaterial",a}return n}(yg);XT.prototype.isRawShaderMaterial=!0;var Jd=Math.pow(2,8),Gj=[.125,.215,.35,.446,.526,.582],jj=5+Gj.length,bg=((0,vr.Z)(tv={},Fl,0),(0,vr.Z)(tv,Q_,1),(0,vr.Z)(tv,3002,2),(0,vr.Z)(tv,3004,3),(0,vr.Z)(tv,3005,4),(0,vr.Z)(tv,3006,5),(0,vr.Z)(tv,3007,6),tv),wU=new bU,EU=voe(),QT=EU._lodPlanes,Wj=EU._sizeLods,jR=EU._sigmas,qj=new xr,kU=null,t0=(1+Math.sqrt(5))/2,YE=1/t0,Yj=[new Ue(1,1,1),new Ue(-1,1,1),new Ue(1,1,-1),new Ue(-1,1,-1),new Ue(0,t0,YE),new Ue(0,t0,-YE),new Ue(YE,0,t0),new Ue(-YE,0,t0),new Ue(t0,YE,0),new Ue(-t0,YE,0)],doe=function(){function i(s){(0,M.Z)(this,i),this._renderer=s,this._pingPongRenderTarget=null,this._blurMaterial=function(i){var s=new Float32Array(20),n=new Ue(0,1,0);return new XT({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:bg[Fl]},outputEncoding:{value:bg[Fl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return(0,R.Z)(i,[{key:"fromScene",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;kU=this._renderer.getRenderTarget();var u=this._allocateTargets();return this._sceneToCubeUV(n,a,o,u),r>0&&this._blur(u,0,0,r),this._applyPMREM(u),this._cleanup(u),u}},{key:"fromEquirectangular",value:function(n){return this._fromTexture(n)}},{key:"fromCubemap",value:function(n){return this._fromTexture(n)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=Xj(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=$j(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var n=0;n<QT.length;n++)QT[n].dispose()}},{key:"_cleanup",value:function(n){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(kU),n.scissorTest=!1,WR(n,0,0,n.width,n.height)}},{key:"_fromTexture",value:function(n){kU=this._renderer.getRenderTarget();var r=this._allocateTargets(n);return this._textureToCubeUV(n,r),this._applyPMREM(r),this._cleanup(r),r}},{key:"_allocateTargets",value:function(n){var r={magFilter:Au,minFilter:Au,generateMipmaps:!1,type:ug,format:1023,encoding:poe(n)?n.encoding:3002,depthBuffer:!1},a=Kj(r);return a.depthBuffer=!n,this._pingPongRenderTarget=Kj(r),a}},{key:"_compileMaterial",value:function(n){var r=new Rl(QT[0],n);this._renderer.compile(r,wU)}},{key:"_sceneToCubeUV",value:function(n,r,a,o){var f=new hc(90,1,r,a),m=[1,-1,1,1,1,1],b=[1,1,1,-1,-1,-1],w=this._renderer,C=w.autoClear,T=w.outputEncoding,I=w.toneMapping;w.getClearColor(qj),w.toneMapping=0,w.outputEncoding=Fl,w.autoClear=!1;var Z=new IR({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),Y=new Rl(new VE,Z),V=!1,W=n.background;W?W.isColor&&(Z.color.copy(W),n.background=null,V=!0):(Z.color.copy(qj),V=!0);for(var se=0;se<6;se++){var fe=se%3;0==fe?(f.up.set(0,m[se],0),f.lookAt(b[se],0,0)):1==fe?(f.up.set(0,0,m[se]),f.lookAt(0,b[se],0)):(f.up.set(0,m[se],0),f.lookAt(0,0,b[se])),WR(o,fe*Jd,se>2?Jd:0,Jd,Jd),w.setRenderTarget(o),V&&w.render(Y,f),w.render(n,f)}Y.geometry.dispose(),Y.material.dispose(),w.toneMapping=I,w.outputEncoding=T,w.autoClear=C,n.background=W}},{key:"_setEncoding",value:function(n,r){n.value=!0===this._renderer.capabilities.isWebGL2&&r.format===cc&&r.type===ug&&r.encoding===Q_?bg[Fl]:bg[r.encoding]}},{key:"_textureToCubeUV",value:function(n,r){var a=this._renderer;n.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Xj()):null==this._equirectShader&&(this._equirectShader=$j());var o=n.isCubeTexture?this._cubemapShader:this._equirectShader,u=new Rl(QT[0],o),l=o.uniforms;l.envMap.value=n,n.isCubeTexture||l.texelSize.value.set(1/n.image.width,1/n.image.height),this._setEncoding(l.inputEncoding,n),this._setEncoding(l.outputEncoding,r.texture),WR(r,0,0,3*Jd,2*Jd),a.setRenderTarget(r),a.render(u,wU)}},{key:"_applyPMREM",value:function(n){var r=this._renderer,a=r.autoClear;r.autoClear=!1;for(var o=1;o<jj;o++){var u=Math.sqrt(jR[o]*jR[o]-jR[o-1]*jR[o-1]);this._blur(n,o-1,o,u,Yj[(o-1)%Yj.length])}r.autoClear=a}},{key:"_blur",value:function(n,r,a,o,u){var l=this._pingPongRenderTarget;this._halfBlur(n,l,r,a,o,"latitudinal",u),this._halfBlur(l,n,a,a,o,"longitudinal",u)}},{key:"_halfBlur",value:function(n,r,a,o,u,l,f){var m=this._renderer,b=this._blurMaterial;"latitudinal"!==l&&"longitudinal"!==l&&console.error("blur direction must be either latitudinal or longitudinal!");var C=new Rl(QT[o],b),T=b.uniforms,I=Wj[a]-1,Z=isFinite(u)?Math.PI/(2*I):2*Math.PI/39,Y=u/Z,V=isFinite(u)?1+Math.floor(3*Y):20;V>20&&console.warn("sigmaRadians, ".concat(u,", is too large and will clip, as it requested ").concat(V," samples when the maximum is set to ").concat(20));for(var W=[],se=0,fe=0;fe<20;++fe){var ve=fe/Y,me=Math.exp(-ve*ve/2);W.push(me),0==fe?se+=me:fe<V&&(se+=2*me)}for(var pe=0;pe<W.length;pe++)W[pe]=W[pe]/se;T.envMap.value=n.texture,T.samples.value=V,T.weights.value=W,T.latitudinal.value="latitudinal"===l,f&&(T.poleAxis.value=f),T.dTheta.value=Z,T.mipInt.value=8-a,this._setEncoding(T.inputEncoding,n.texture),this._setEncoding(T.outputEncoding,n.texture);var ke=Wj[o];WR(r,3*Math.max(0,Jd-2*ke),(0===o?0:2*Jd)+2*ke*(o>4?o-8+4:0),3*ke,2*ke),m.setRenderTarget(r),m.render(C,wU)}}]),i}();function poe(i){return void 0!==i&&i.type===ug&&(i.encoding===Fl||i.encoding===Q_||3007===i.encoding)}function voe(){for(var i=[],s=[],n=[],r=8,a=0;a<jj;a++){var o=Math.pow(2,r);s.push(o);var u=1/o;a>4?u=Gj[a-8+4-1]:0==a&&(u=0),n.push(u);for(var l=1/(o-1),f=-l/2,m=1+l/2,b=[f,f,m,f,m,m,f,f,m,m,f,m],Y=new Float32Array(108),V=new Float32Array(72),W=new Float32Array(36),se=0;se<6;se++){var fe=se%3*2/3-1,ve=se>2?0:-1;Y.set([fe,ve,0,fe+2/3,ve,0,fe+2/3,ve+1,0,fe,ve,0,fe+2/3,ve+1,0,fe,ve+1,0],18*se),V.set(b,12*se),W.set([se,se,se,se,se,se],6*se)}var ke=new ma;ke.setAttribute("position",new cu(Y,3)),ke.setAttribute("uv",new cu(V,2)),ke.setAttribute("faceIndex",new cu(W,1)),i.push(ke),r>4&&r--}return{_lodPlanes:i,_sizeLods:s,_sigmas:n}}function Kj(i){var s=new Xd(3*Jd,3*Jd,i);return s.texture.mapping=306,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function WR(i,s,n,r,a){i.viewport.set(s,n,r,a),i.scissor.set(s,n,r,a)}function $j(){var i=new un(1,1);return new XT({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:i},inputEncoding:{value:bg[Fl]},outputEncoding:{value:bg[Fl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function Xj(){return new XT({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:bg[Fl]},outputEncoding:{value:bg[Fl]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function goe(i){var s=new WeakMap,n=null;function o(l){var f=l.target;f.removeEventListener("dispose",o);var m=s.get(f);void 0!==m&&(s.delete(f),m.dispose())}return{get:function(l){if(l&&l.isTexture&&!1===l.isRenderTargetTexture){var f=l.mapping,m=303===f||304===f,b=301===f||302===f;if(m||b){if(s.has(l))return s.get(l).texture;var w=l.image;if(m&&w&&w.height>0||b&&w&&function(l){for(var f=0,b=0;b<6;b++)void 0!==l[b]&&f++;return 6===f}(w)){var C=i.getRenderTarget();null===n&&(n=new doe(i));var T=m?n.fromEquirectangular(l):n.fromCubemap(l);return s.set(l,T),i.setRenderTarget(C),l.addEventListener("dispose",o),T.texture}return null}}return l},dispose:function(){s=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function yoe(i){var s={};function n(r){if(void 0!==s[r])return s[r];var a;switch(r){case"WEBGL_depth_texture":a=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=i.getExtension(r)}return s[r]=a,a}return{has:function(a){return null!==n(a)},init:function(a){a.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(a){var o=n(a);return null===o&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),o}}}function _oe(i,s,n,r){var a={},o=new WeakMap;function u(w){var C=w.target;for(var T in null!==C.index&&s.remove(C.index),C.attributes)s.remove(C.attributes[T]);C.removeEventListener("dispose",u),delete a[C.id];var I=o.get(C);I&&(s.remove(I),o.delete(C)),r.releaseStatesOfGeometry(C),!0===C.isInstancedBufferGeometry&&delete C._maxInstanceCount,n.memory.geometries--}function m(w){var C=[],T=w.index,I=w.attributes.position,Z=0;if(null!==T){var Y=T.array;Z=T.version;for(var V=0,W=Y.length;V<W;V+=3){var se=Y[V+0],fe=Y[V+1],ve=Y[V+2];C.push(se,fe,fe,ve,ve,se)}}else{Z=I.version;for(var pe=0,ke=I.array.length/3-1;pe<ke;pe+=3){var je=pe+0,qe=pe+1,Ze=pe+2;C.push(je,qe,qe,Ze,Ze,je)}}var ct=new(xj(C)>65535?lU:uU)(C,1);ct.version=Z;var rt=o.get(w);rt&&s.remove(rt),o.set(w,ct)}return{get:function(w,C){return!0===a[C.id]||(C.addEventListener("dispose",u),a[C.id]=!0,n.memory.geometries++),C},update:function(w){var C=w.attributes;for(var T in C)s.update(C[T],34962);var I=w.morphAttributes;for(var Z in I)for(var Y=I[Z],V=0,W=Y.length;V<W;V++)s.update(Y[V],34962)},getWireframeAttribute:function(w){var C=o.get(w);if(C){var T=w.index;null!==T&&C.version<T.version&&m(w)}else m(w);return o.get(w)}}}function boe(i,s,n,r){var o,l,f,a=r.isWebGL2;this.setMode=function(C){o=C},this.setIndex=function(C){l=C.type,f=C.bytesPerElement},this.render=function(C,T){i.drawElements(o,T,l,C*f),n.update(T,o,1)},this.renderInstances=function(C,T,I){if(0!==I){var Z,Y;if(a)Z=i,Y="drawElementsInstanced";else if(Y="drawElementsInstancedANGLE",null===(Z=s.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Z[Y](o,T,l,C*f,I),n.update(T,o,I)}}}function woe(i){var n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(o,u,l){switch(n.calls++,u){case 4:n.triangles+=l*(o/3);break;case 1:n.lines+=l*(o/2);break;case 3:n.lines+=l*(o-1);break;case 2:n.lines+=l*o;break;case 0:n.points+=l*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u)}}}}var SU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),(r=s.call(this,null)).image={data:a,width:o,height:u,depth:l},r.magFilter=Au,r.minFilter=Au,r.wrapR=xc,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r.needsUpdate=!0,r}return n}(Mc);function Eoe(i,s){return i[0]-s[0]}function koe(i,s){return Math.abs(s[1])-Math.abs(i[1])}function Qj(i,s){var n=1,r=s.isInterleavedBufferAttribute?s.data.array:s.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),i.divideScalar(n)}function Coe(i,s,n){for(var r={},a=new Float32Array(8),o=new WeakMap,u=new Ue,l=[],f=0;f<8;f++)l[f]=[f,0];return{update:function(b,w,C,T){var I=b.morphTargetInfluences;if(!0===s.isWebGL2){var Z=w.morphAttributes.position.length,Y=o.get(w);if(void 0===Y||Y.count!==Z){void 0!==Y&&Y.texture.dispose();var V=void 0!==w.morphAttributes.normal,W=w.morphAttributes.position,se=w.morphAttributes.normal||[],ve=!0===V?2:1,me=w.attributes.position.count*ve,pe=1;me>s.maxTextureSize&&(pe=Math.ceil(me/s.maxTextureSize),me=s.maxTextureSize);var ke=new Float32Array(me*pe*4*Z),je=new SU(ke,me,pe,Z);je.format=cc,je.type=lg;for(var qe=4*ve,Ze=0;Ze<Z;Ze++)for(var ct=W[Ze],rt=se[Ze],ht=me*pe*4*Ze,It=0;It<ct.count;It++){u.fromBufferAttribute(ct,It),!0===ct.normalized&&Qj(u,ct);var _t=It*qe;ke[ht+_t+0]=u.x,ke[ht+_t+1]=u.y,ke[ht+_t+2]=u.z,ke[ht+_t+3]=0,!0===V&&(u.fromBufferAttribute(rt,It),!0===rt.normalized&&Qj(u,rt),ke[ht+_t+4]=u.x,ke[ht+_t+5]=u.y,ke[ht+_t+6]=u.z,ke[ht+_t+7]=0)}Y={count:Z,texture:je,size:new un(me,pe)},o.set(w,Y)}for(var Zt=0,ln=0;ln<I.length;ln++)Zt+=I[ln];var Sn=w.morphTargetsRelative?1:1-Zt;T.getUniforms().setValue(i,"morphTargetBaseInfluence",Sn),T.getUniforms().setValue(i,"morphTargetInfluences",I),T.getUniforms().setValue(i,"morphTargetsTexture",Y.texture,n),T.getUniforms().setValue(i,"morphTargetsTextureSize",Y.size)}else{var kn=void 0===I?0:I.length,dn=r[w.id];if(void 0===dn||dn.length!==kn){dn=[];for(var gn=0;gn<kn;gn++)dn[gn]=[gn,0];r[w.id]=dn}for(var Hn=0;Hn<kn;Hn++){var Ur=dn[Hn];Ur[0]=Hn,Ur[1]=I[Hn]}dn.sort(koe);for(var Qn=0;Qn<8;Qn++)Qn<kn&&dn[Qn][1]?(l[Qn][0]=dn[Qn][0],l[Qn][1]=dn[Qn][1]):(l[Qn][0]=Number.MAX_SAFE_INTEGER,l[Qn][1]=0);l.sort(Eoe);for(var ft=w.morphAttributes.position,bn=w.morphAttributes.normal,Jn=0,_n=0;_n<8;_n++){var Yn=l[_n],Gn=Yn[0],Vn=Yn[1];Gn!==Number.MAX_SAFE_INTEGER&&Vn?(ft&&w.getAttribute("morphTarget"+_n)!==ft[Gn]&&w.setAttribute("morphTarget"+_n,ft[Gn]),bn&&w.getAttribute("morphNormal"+_n)!==bn[Gn]&&w.setAttribute("morphNormal"+_n,bn[Gn]),a[_n]=Vn,Jn+=Vn):(ft&&!0===w.hasAttribute("morphTarget"+_n)&&w.deleteAttribute("morphTarget"+_n),bn&&!0===w.hasAttribute("morphNormal"+_n)&&w.deleteAttribute("morphNormal"+_n),a[_n]=0)}var en=w.morphTargetsRelative?1:1-Jn;T.getUniforms().setValue(i,"morphTargetBaseInfluence",en),T.getUniforms().setValue(i,"morphTargetInfluences",a)}}}}function Doe(i,s,n,r){var a=new WeakMap;function l(f){var m=f.target;m.removeEventListener("dispose",l),n.remove(m.instanceMatrix),null!==m.instanceColor&&n.remove(m.instanceColor)}return{update:function(f){var m=r.render.frame,w=s.get(f,f.geometry);return a.get(w)!==m&&(s.update(w),a.set(w,m)),f.isInstancedMesh&&(!1===f.hasEventListener("dispose",l)&&f.addEventListener("dispose",l),n.update(f.instanceMatrix,34962),null!==f.instanceColor&&n.update(f.instanceColor,34962)),w},dispose:function(){a=new WeakMap}}}SU.prototype.isDataTexture2DArray=!0;var Jj=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),(r=s.call(this,null)).image={data:a,width:o,height:u,depth:l},r.magFilter=Au,r.minFilter=Au,r.wrapR=xc,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r.needsUpdate=!0,r}return n}(Mc);Jj.prototype.isDataTexture3D=!0;var e8=new Mc,Soe=new SU,Aoe=new Jj,t8=new zR,n8=[],r8=[],i8=new Float32Array(16),a8=new Float32Array(9),s8=new Float32Array(4);function KE(i,s,n){var r=i[0];if(r<=0||r>0)return i;var a=s*n,o=n8[a];if(void 0===o&&(o=new Float32Array(a),n8[a]=o),0!==s){r.toArray(o,0);for(var u=1,l=0;u!==s;++u)i[u].toArray(o,l+=n)}return o}function fc(i,s){if(i.length!==s.length)return!1;for(var n=0,r=i.length;n<r;n++)if(i[n]!==s[n])return!1;return!0}function Ll(i,s){for(var n=0,r=s.length;n<r;n++)i[n]=s[n]}function o8(i,s){var n=r8[s];void 0===n&&(n=new Int32Array(s),r8[s]=n);for(var r=0;r!==s;++r)n[r]=i.allocateTextureUnit();return n}function Toe(i,s){var n=this.cache;n[0]!==s&&(i.uniform1f(this.addr,s),n[0]=s)}function xoe(i,s){var n=this.cache;if(void 0!==s.x)(n[0]!==s.x||n[1]!==s.y)&&(i.uniform2f(this.addr,s.x,s.y),n[0]=s.x,n[1]=s.y);else{if(fc(n,s))return;i.uniform2fv(this.addr,s),Ll(n,s)}}function Moe(i,s){var n=this.cache;if(void 0!==s.x)(n[0]!==s.x||n[1]!==s.y||n[2]!==s.z)&&(i.uniform3f(this.addr,s.x,s.y,s.z),n[0]=s.x,n[1]=s.y,n[2]=s.z);else if(void 0!==s.r)(n[0]!==s.r||n[1]!==s.g||n[2]!==s.b)&&(i.uniform3f(this.addr,s.r,s.g,s.b),n[0]=s.r,n[1]=s.g,n[2]=s.b);else{if(fc(n,s))return;i.uniform3fv(this.addr,s),Ll(n,s)}}function Ioe(i,s){var n=this.cache;if(void 0!==s.x)(n[0]!==s.x||n[1]!==s.y||n[2]!==s.z||n[3]!==s.w)&&(i.uniform4f(this.addr,s.x,s.y,s.z,s.w),n[0]=s.x,n[1]=s.y,n[2]=s.z,n[3]=s.w);else{if(fc(n,s))return;i.uniform4fv(this.addr,s),Ll(n,s)}}function Poe(i,s){var n=this.cache,r=s.elements;if(void 0===r){if(fc(n,s))return;i.uniformMatrix2fv(this.addr,!1,s),Ll(n,s)}else{if(fc(n,r))return;s8.set(r),i.uniformMatrix2fv(this.addr,!1,s8),Ll(n,r)}}function Foe(i,s){var n=this.cache,r=s.elements;if(void 0===r){if(fc(n,s))return;i.uniformMatrix3fv(this.addr,!1,s),Ll(n,s)}else{if(fc(n,r))return;a8.set(r),i.uniformMatrix3fv(this.addr,!1,a8),Ll(n,r)}}function Roe(i,s){var n=this.cache,r=s.elements;if(void 0===r){if(fc(n,s))return;i.uniformMatrix4fv(this.addr,!1,s),Ll(n,s)}else{if(fc(n,r))return;i8.set(r),i.uniformMatrix4fv(this.addr,!1,i8),Ll(n,r)}}function Ooe(i,s){var n=this.cache;n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s)}function Loe(i,s){var n=this.cache;fc(n,s)||(i.uniform2iv(this.addr,s),Ll(n,s))}function Noe(i,s){var n=this.cache;fc(n,s)||(i.uniform3iv(this.addr,s),Ll(n,s))}function Zoe(i,s){var n=this.cache;fc(n,s)||(i.uniform4iv(this.addr,s),Ll(n,s))}function Boe(i,s){var n=this.cache;n[0]!==s&&(i.uniform1ui(this.addr,s),n[0]=s)}function Uoe(i,s){var n=this.cache;fc(n,s)||(i.uniform2uiv(this.addr,s),Ll(n,s))}function Voe(i,s){var n=this.cache;fc(n,s)||(i.uniform3uiv(this.addr,s),Ll(n,s))}function zoe(i,s){var n=this.cache;fc(n,s)||(i.uniform4uiv(this.addr,s),Ll(n,s))}function Hoe(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.safeSetTexture2D(s||e8,a)}function Goe(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.setTexture3D(s||Aoe,a)}function joe(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.safeSetTextureCube(s||t8,a)}function Woe(i,s,n){var r=this.cache,a=n.allocateTextureUnit();r[0]!==a&&(i.uniform1i(this.addr,a),r[0]=a),n.setTexture2DArray(s||Soe,a)}function Yoe(i,s){i.uniform1fv(this.addr,s)}function Koe(i,s){var n=KE(s,this.size,2);i.uniform2fv(this.addr,n)}function $oe(i,s){var n=KE(s,this.size,3);i.uniform3fv(this.addr,n)}function Xoe(i,s){var n=KE(s,this.size,4);i.uniform4fv(this.addr,n)}function Qoe(i,s){var n=KE(s,this.size,4);i.uniformMatrix2fv(this.addr,!1,n)}function Joe(i,s){var n=KE(s,this.size,9);i.uniformMatrix3fv(this.addr,!1,n)}function eue(i,s){var n=KE(s,this.size,16);i.uniformMatrix4fv(this.addr,!1,n)}function tue(i,s){i.uniform1iv(this.addr,s)}function nue(i,s){i.uniform2iv(this.addr,s)}function rue(i,s){i.uniform3iv(this.addr,s)}function iue(i,s){i.uniform4iv(this.addr,s)}function aue(i,s){i.uniform1uiv(this.addr,s)}function sue(i,s){i.uniform2uiv(this.addr,s)}function oue(i,s){i.uniform3uiv(this.addr,s)}function uue(i,s){i.uniform4uiv(this.addr,s)}function lue(i,s,n){var r=s.length,a=o8(n,r);i.uniform1iv(this.addr,a);for(var o=0;o!==r;++o)n.safeSetTexture2D(s[o]||e8,a[o])}function cue(i,s,n){var r=s.length,a=o8(n,r);i.uniform1iv(this.addr,a);for(var o=0;o!==r;++o)n.safeSetTextureCube(s[o]||t8,a[o])}function fue(i,s,n){this.id=i,this.addr=n,this.cache=[],this.setValue=function(i){switch(i){case 5126:return Toe;case 35664:return xoe;case 35665:return Moe;case 35666:return Ioe;case 35674:return Poe;case 35675:return Foe;case 35676:return Roe;case 5124:case 35670:return Ooe;case 35667:case 35671:return Loe;case 35668:case 35672:return Noe;case 35669:case 35673:return Zoe;case 5125:return Boe;case 36294:return Uoe;case 36295:return Voe;case 36296:return zoe;case 35678:case 36198:case 36298:case 36306:case 35682:return Hoe;case 35679:case 36299:case 36307:return Goe;case 35680:case 36300:case 36308:case 36293:return joe;case 36289:case 36303:case 36311:case 36292:return Woe}}(s.type)}function u8(i,s,n){this.id=i,this.addr=n,this.cache=[],this.size=s.size,this.setValue=function(i){switch(i){case 5126:return Yoe;case 35664:return Koe;case 35665:return $oe;case 35666:return Xoe;case 35674:return Qoe;case 35675:return Joe;case 35676:return eue;case 5124:case 35670:return tue;case 35667:case 35671:return nue;case 35668:case 35672:return rue;case 35669:case 35673:return iue;case 5125:return aue;case 36294:return sue;case 36295:return oue;case 36296:return uue;case 35678:case 36198:case 36298:case 36306:case 35682:return lue;case 35680:case 36300:case 36308:case 36293:return cue}}(s.type)}function l8(i){this.id=i,this.seq=[],this.map={}}u8.prototype.updateCache=function(i){var s=this.cache;i instanceof Float32Array&&s.length!==i.length&&(this.cache=new Float32Array(i.length)),Ll(s,i)},l8.prototype.setValue=function(i,s,n){for(var r=this.seq,a=0,o=r.length;a!==o;++a){var u=r[a];u.setValue(i,s[u.id],n)}};var AU=/(\w+)(\])?(\[|\.)?/g;function c8(i,s){i.seq.push(s),i.map[s.id]=s}function due(i,s,n){var r=i.name,a=r.length;for(AU.lastIndex=0;;){var o=AU.exec(r),l=o[1],m=o[3];if("]"===o[2]&&(l|=0),void 0===m||"["===m&&AU.lastIndex+2===a){c8(n,void 0===m?new fue(l,i,s):new u8(l,i,s));break}var w=n.map[l];void 0===w&&c8(n,w=new l8(l)),n=w}}function wg(i,s){this.seq=[],this.map={};for(var n=i.getProgramParameter(s,35718),r=0;r<n;++r){var a=i.getActiveUniform(s,r);due(a,i.getUniformLocation(s,a.name),this)}}function h8(i,s,n){var r=i.createShader(s);return i.shaderSource(r,n),i.compileShader(r),r}wg.prototype.setValue=function(i,s,n,r){var a=this.map[s];void 0!==a&&a.setValue(i,n,r)},wg.prototype.setOptional=function(i,s,n){var r=s[n];void 0!==r&&this.setValue(i,n,r)},wg.upload=function(i,s,n,r){for(var a=0,o=s.length;a!==o;++a){var u=s[a],l=n[u.id];!1!==l.needsUpdate&&u.setValue(i,l.value,r)}},wg.seqWithValue=function(i,s){for(var n=[],r=0,a=i.length;r!==a;++r){var o=i[r];o.id in s&&n.push(o)}return n};var pue=0;function f8(i){switch(i){case Fl:return["Linear","( value )"];case Q_:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function d8(i,s,n){var r=i.getShaderParameter(s,35713),a=i.getShaderInfoLog(s).trim();return r&&""===a?"":n.toUpperCase()+"\n\n"+a+"\n\n"+function(i){for(var s=i.split("\n"),n=0;n<s.length;n++)s[n]=n+1+": "+s[n];return s.join("\n")}(i.getShaderSource(s))}function $E(i,s){var n=f8(s);return"vec4 "+i+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function mue(i,s){var n=f8(s);return"vec4 "+i+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function gue(i,s){var n;switch(s){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",s),n="Linear"}return"vec3 "+i+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function JT(i){return""!==i}function p8(i,s){return i.replace(/NUM_DIR_LIGHTS/g,s.numDirLights).replace(/NUM_SPOT_LIGHTS/g,s.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,s.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,s.numPointLights).replace(/NUM_HEMI_LIGHTS/g,s.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,s.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,s.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,s.numPointLightShadows)}function v8(i,s){return i.replace(/NUM_CLIPPING_PLANES/g,s.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,s.numClippingPlanes-s.numClipIntersection)}var wue=/^[ \t]*#include +<([\w\d./]+)>/gm;function TU(i){return i.replace(wue,Eue)}function Eue(i,s){var n=Xi[s];if(void 0===n)throw new Error("Can not resolve #include <"+s+">");return TU(n)}var kue=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Cue=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function m8(i){return i.replace(Cue,g8).replace(kue,Due)}function Due(i,s,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),g8(0,s,n,r)}function g8(i,s,n,r){for(var a="",o=parseInt(s);o<parseInt(n);o++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function y8(i){var s="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?s+="\n#define HIGH_PRECISION":"mediump"===i.precision?s+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(s+="\n#define LOW_PRECISION"),s}function Mue(i,s,n,r){var Y,V,a=i.getContext(),o=n.defines,u=n.vertexShader,l=n.fragmentShader,f=function(i){var s="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?s="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?s="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(s="SHADOWMAP_TYPE_VSM"),s}(n),m=function(i){var s="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:s="ENVMAP_TYPE_CUBE";break;case 306:case 307:s="ENVMAP_TYPE_CUBE_UV"}return s}(n),b=function(i){var s="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case 302:case 307:s="ENVMAP_MODE_REFRACTION"}return s}(n),w=function(i){var s="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:s="ENVMAP_BLENDING_MULTIPLY";break;case 1:s="ENVMAP_BLENDING_MIX";break;case 2:s="ENVMAP_BLENDING_ADD"}return s}(n),C=i.gammaFactor>0?i.gammaFactor:1,T=n.isWebGL2?"":function(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(JT).join("\n")}(n),I=function(i){var s=[];for(var n in i){var r=i[n];!1!==r&&s.push("#define "+n+" "+r)}return s.join("\n")}(o),Z=a.createProgram(),W=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((Y=[I].filter(JT).join("\n")).length>0&&(Y+="\n"),(V=[T,I].filter(JT).join("\n")).length>0&&(V+="\n")):(Y=[y8(n),"#define SHADER_NAME "+n.shaderName,I,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+C,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+b:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(JT).join("\n"),V=[T,y8(n),"#define SHADER_NAME "+n.shaderName,I,"#define GAMMA_FACTOR "+C,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.envMap?"#define "+b:"",n.envMap?"#define "+w:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Xi.tonemapping_pars_fragment:"",0!==n.toneMapping?gue("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===EE?"#define OPAQUE":"",Xi.encodings_pars_fragment,n.map?$E("mapTexelToLinear",n.mapEncoding):"",n.matcap?$E("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?$E("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?$E("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?$E("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?$E("lightMapTexelToLinear",n.lightMapEncoding):"",mue("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(JT).join("\n")),u=v8(u=p8(u=TU(u),n),n),l=v8(l=p8(l=TU(l),n),n),u=m8(u),l=m8(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(W="#version 300 es\n",Y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Y,V=["#define varying in","300 es"===n.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+V);var ht,It,fe=W+V+l,ve=h8(a,35633,W+Y+u),me=h8(a,35632,fe);if(a.attachShader(Z,ve),a.attachShader(Z,me),void 0!==n.index0AttributeName?a.bindAttribLocation(Z,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(Z,0,"position"),a.linkProgram(Z),i.debug.checkShaderErrors){var pe=a.getProgramInfoLog(Z).trim(),ke=a.getShaderInfoLog(ve).trim(),je=a.getShaderInfoLog(me).trim(),qe=!0,Ze=!0;if(!1===a.getProgramParameter(Z,35714)){qe=!1;var ct=d8(a,ve,"vertex"),rt=d8(a,me,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(Z,35715)+"\n\nProgram Info Log: "+pe+"\n"+ct+"\n"+rt)}else""!==pe?console.warn("THREE.WebGLProgram: Program Info Log:",pe):(""===ke||""===je)&&(Ze=!1);Ze&&(this.diagnostics={runnable:qe,programLog:pe,vertexShader:{log:ke,prefix:Y},fragmentShader:{log:je,prefix:V}})}return a.deleteShader(ve),a.deleteShader(me),this.getUniforms=function(){return void 0===ht&&(ht=new wg(a,Z)),ht},this.getAttributes=function(){return void 0===It&&(It=function(i,s){for(var n={},r=i.getProgramParameter(s,35721),a=0;a<r;a++){var o=i.getActiveAttrib(s,a),u=o.name,l=1;35674===o.type&&(l=2),35675===o.type&&(l=3),35676===o.type&&(l=4),n[u]={type:o.type,location:i.getAttribLocation(s,u),locationSize:l}}return n}(a,Z)),It},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(Z),this.program=void 0},this.name=n.shaderName,this.id=pue++,this.cacheKey=s,this.usedTimes=1,this.program=Z,this.vertexShader=ve,this.fragmentShader=me,this}function Iue(i,s,n,r,a,o,u){var l=[],f=a.isWebGL2,m=a.logarithmicDepthBuffer,b=a.floatVertexTextures,w=a.maxVertexUniforms,C=a.vertexTextures,T=a.precision,I={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},Z=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function V(pe){var ke;return pe&&pe.isTexture?ke=pe.encoding:pe&&pe.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ke=pe.texture.encoding):ke=Fl,f&&pe&&pe.isTexture&&pe.format===cc&&pe.type===ug&&pe.encoding===Q_&&(ke=Fl),ke}return{getParameters:function(pe,ke,je,qe,Ze){var Zt,ln,ct=qe.fog,ht=(pe.isMeshStandardMaterial?n:s).get(pe.envMap||(pe.isMeshStandardMaterial?qe.environment:null)),It=I[pe.type],_t=Ze.isSkinnedMesh?function(pe){var je=pe.skeleton.bones;if(b)return 1024;var Ze=Math.floor((w-20)/4),ct=Math.min(Ze,je.length);return ct<je.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+je.length+" bones. This GPU supports "+ct+"."),0):ct}(Ze):0;if(null!==pe.precision&&(T=a.getMaxPrecision(pe.precision))!==pe.precision&&console.warn("THREE.WebGLProgram.getParameters:",pe.precision,"not supported, using",T,"instead."),It){var Sn=Qd[It];Zt=Sn.vertexShader,ln=Sn.fragmentShader}else Zt=pe.vertexShader,ln=pe.fragmentShader;var kn=i.getRenderTarget(),dn=pe.alphaTest>0,gn=pe.clearcoat>0;return{isWebGL2:f,shaderID:It,shaderName:pe.type,vertexShader:Zt,fragmentShader:ln,defines:pe.defines,isRawShaderMaterial:!0===pe.isRawShaderMaterial,glslVersion:pe.glslVersion,precision:T,instancing:!0===Ze.isInstancedMesh,instancingColor:!0===Ze.isInstancedMesh&&null!==Ze.instanceColor,supportsVertexTextures:C,outputEncoding:null!==kn?V(kn.texture):i.outputEncoding,map:!!pe.map,mapEncoding:V(pe.map),matcap:!!pe.matcap,matcapEncoding:V(pe.matcap),envMap:!!ht,envMapMode:ht&&ht.mapping,envMapEncoding:V(ht),envMapCubeUV:!!ht&&(306===ht.mapping||307===ht.mapping),lightMap:!!pe.lightMap,lightMapEncoding:V(pe.lightMap),aoMap:!!pe.aoMap,emissiveMap:!!pe.emissiveMap,emissiveMapEncoding:V(pe.emissiveMap),bumpMap:!!pe.bumpMap,normalMap:!!pe.normalMap,objectSpaceNormalMap:1===pe.normalMapType,tangentSpaceNormalMap:0===pe.normalMapType,clearcoat:gn,clearcoatMap:gn&&!!pe.clearcoatMap,clearcoatRoughnessMap:gn&&!!pe.clearcoatRoughnessMap,clearcoatNormalMap:gn&&!!pe.clearcoatNormalMap,displacementMap:!!pe.displacementMap,roughnessMap:!!pe.roughnessMap,metalnessMap:!!pe.metalnessMap,specularMap:!!pe.specularMap,specularIntensityMap:!!pe.specularIntensityMap,specularTintMap:!!pe.specularTintMap,specularTintMapEncoding:V(pe.specularTintMap),alphaMap:!!pe.alphaMap,alphaTest:dn,gradientMap:!!pe.gradientMap,sheen:pe.sheen>0,transmission:pe.transmission>0,transmissionMap:!!pe.transmissionMap,thicknessMap:!!pe.thicknessMap,combine:pe.combine,vertexTangents:!!pe.normalMap&&!!Ze.geometry&&!!Ze.geometry.attributes.tangent,vertexColors:pe.vertexColors,vertexAlphas:!0===pe.vertexColors&&!!Ze.geometry&&!!Ze.geometry.attributes.color&&4===Ze.geometry.attributes.color.itemSize,vertexUvs:!!(pe.map||pe.bumpMap||pe.normalMap||pe.specularMap||pe.alphaMap||pe.emissiveMap||pe.roughnessMap||pe.metalnessMap||pe.clearcoatMap||pe.clearcoatRoughnessMap||pe.clearcoatNormalMap||pe.displacementMap||pe.transmissionMap||pe.thicknessMap||pe.specularIntensityMap||pe.specularTintMap),uvsVertexOnly:!(pe.map||pe.bumpMap||pe.normalMap||pe.specularMap||pe.alphaMap||pe.emissiveMap||pe.roughnessMap||pe.metalnessMap||pe.clearcoatNormalMap||pe.transmission>0||pe.transmissionMap||pe.thicknessMap||pe.specularIntensityMap||pe.specularTintMap||!pe.displacementMap),fog:!!ct,useFog:pe.fog,fogExp2:ct&&ct.isFogExp2,flatShading:!!pe.flatShading,sizeAttenuation:pe.sizeAttenuation,logarithmicDepthBuffer:m,skinning:!0===Ze.isSkinnedMesh&&_t>0,maxBones:_t,useVertexTexture:b,morphTargets:!!Ze.geometry&&!!Ze.geometry.morphAttributes.position,morphNormals:!!Ze.geometry&&!!Ze.geometry.morphAttributes.normal,morphTargetsCount:Ze.geometry&&Ze.geometry.morphAttributes.position?Ze.geometry.morphAttributes.position.length:0,numDirLights:ke.directional.length,numPointLights:ke.point.length,numSpotLights:ke.spot.length,numRectAreaLights:ke.rectArea.length,numHemiLights:ke.hemi.length,numDirLightShadows:ke.directionalShadowMap.length,numPointLightShadows:ke.pointShadowMap.length,numSpotLightShadows:ke.spotShadowMap.length,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,format:pe.format,dithering:pe.dithering,shadowMapEnabled:i.shadowMap.enabled&&je.length>0,shadowMapType:i.shadowMap.type,toneMapping:pe.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:pe.premultipliedAlpha,doubleSided:2===pe.side,flipSided:1===pe.side,depthPacking:void 0!==pe.depthPacking&&pe.depthPacking,index0AttributeName:pe.index0AttributeName,extensionDerivatives:pe.extensions&&pe.extensions.derivatives,extensionFragDepth:pe.extensions&&pe.extensions.fragDepth,extensionDrawBuffers:pe.extensions&&pe.extensions.drawBuffers,extensionShaderTextureLOD:pe.extensions&&pe.extensions.shaderTextureLOD,rendererExtensionFragDepth:f||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||r.has("EXT_shader_texture_lod"),customProgramCacheKey:pe.customProgramCacheKey()}},getProgramCacheKey:function(pe){var ke=[];if(pe.shaderID?ke.push(pe.shaderID):(ke.push(pe.fragmentShader),ke.push(pe.vertexShader)),void 0!==pe.defines)for(var je in pe.defines)ke.push(je),ke.push(pe.defines[je]);if(!1===pe.isRawShaderMaterial){for(var qe=0;qe<Z.length;qe++)ke.push(pe[Z[qe]]);ke.push(i.outputEncoding),ke.push(i.gammaFactor)}return ke.push(pe.customProgramCacheKey),ke.join()},getUniforms:function(pe){var ke=I[pe.type];return ke?xie.clone(Qd[ke].uniforms):pe.uniforms},acquireProgram:function(pe,ke){for(var je,qe=0,Ze=l.length;qe<Ze;qe++){var ct=l[qe];if(ct.cacheKey===ke){++(je=ct).usedTimes;break}}return void 0===je&&(je=new Mue(i,ke,pe,o),l.push(je)),je},releaseProgram:function(pe){if(0==--pe.usedTimes){var ke=l.indexOf(pe);l[ke]=l[l.length-1],l.pop(),pe.destroy()}},programs:l}}function Pue(){var i=new WeakMap;return{get:function(o){var u=i.get(o);return void 0===u&&i.set(o,u={}),u},remove:function(o){i.delete(o)},update:function(o,u,l){i.get(o)[u]=l},dispose:function(){i=new WeakMap}}}function Fue(i,s){return i.groupOrder!==s.groupOrder?i.groupOrder-s.groupOrder:i.renderOrder!==s.renderOrder?i.renderOrder-s.renderOrder:i.program!==s.program?i.program.id-s.program.id:i.material.id!==s.material.id?i.material.id-s.material.id:i.z!==s.z?i.z-s.z:i.id-s.id}function _8(i,s){return i.groupOrder!==s.groupOrder?i.groupOrder-s.groupOrder:i.renderOrder!==s.renderOrder?i.renderOrder-s.renderOrder:i.z!==s.z?s.z-i.z:i.id-s.id}function b8(i){var s=[],n=0,r=[],a=[],o=[],u={id:-1};function f(T,I,Z,Y,V,W){var se=s[n],fe=i.get(Z);return void 0===se?s[n]=se={id:T.id,object:T,geometry:I,material:Z,program:fe.program||u,groupOrder:Y,renderOrder:T.renderOrder,z:V,group:W}:(se.id=T.id,se.object=T,se.geometry=I,se.material=Z,se.program=fe.program||u,se.groupOrder=Y,se.renderOrder=T.renderOrder,se.z=V,se.group=W),n++,se}return{opaque:r,transmissive:a,transparent:o,init:function(){n=0,r.length=0,a.length=0,o.length=0},push:function(T,I,Z,Y,V,W){var se=f(T,I,Z,Y,V,W);Z.transmission>0?a.push(se):!0===Z.transparent?o.push(se):r.push(se)},unshift:function(T,I,Z,Y,V,W){var se=f(T,I,Z,Y,V,W);Z.transmission>0?a.unshift(se):!0===Z.transparent?o.unshift(se):r.unshift(se)},finish:function(){for(var T=n,I=s.length;T<I;T++){var Z=s[T];if(null===Z.id)break;Z.id=null,Z.object=null,Z.geometry=null,Z.material=null,Z.program=null,Z.group=null}},sort:function(T,I){r.length>1&&r.sort(T||Fue),a.length>1&&a.sort(I||_8),o.length>1&&o.sort(I||_8)}}}function Rue(i){var s=new WeakMap;return{get:function(a,o){var u;return!1===s.has(a)?(u=new b8(i),s.set(a,[u])):o>=s.get(a).length?(u=new b8(i),s.get(a).push(u)):u=s.get(a)[o],u},dispose:function(){s=new WeakMap}}}function Oue(){var i={};return{get:function(n){if(void 0!==i[n.id])return i[n.id];var r;switch(n.type){case"DirectionalLight":r={direction:new Ue,color:new xr};break;case"SpotLight":r={position:new Ue,direction:new Ue,color:new xr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Ue,color:new xr,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Ue,skyColor:new xr,groundColor:new xr};break;case"RectAreaLight":r={color:new xr,position:new Ue,halfWidth:new Ue,halfHeight:new Ue}}return i[n.id]=r,r}}}var Nue=0;function Zue(i,s){return(s.castShadow?1:0)-(i.castShadow?1:0)}function Bue(i,s){for(var n=new Oue,r=function(){var i={};return{get:function(n){if(void 0!==i[n.id])return i[n.id];var r;switch(n.type){case"DirectionalLight":case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new un,shadowCameraNear:1,shadowCameraFar:1e3}}return i[n.id]=r,r}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)a.probe.push(new Ue);var u=new Ue,l=new Wr,f=new Wr;return{setup:function(w,C){for(var T=0,I=0,Z=0,Y=0;Y<9;Y++)a.probe[Y].set(0,0,0);var V=0,W=0,se=0,fe=0,ve=0,me=0,pe=0,ke=0;w.sort(Zue);for(var je=!0!==C?Math.PI:1,qe=0,Ze=w.length;qe<Ze;qe++){var ct=w[qe],rt=ct.color,ht=ct.intensity,It=ct.distance,_t=ct.shadow&&ct.shadow.map?ct.shadow.map.texture:null;if(ct.isAmbientLight)T+=rt.r*ht*je,I+=rt.g*ht*je,Z+=rt.b*ht*je;else if(ct.isLightProbe)for(var Zt=0;Zt<9;Zt++)a.probe[Zt].addScaledVector(ct.sh.coefficients[Zt],ht);else if(ct.isDirectionalLight){var ln=n.get(ct);if(ln.color.copy(ct.color).multiplyScalar(ct.intensity*je),ct.castShadow){var Sn=ct.shadow,kn=r.get(ct);kn.shadowBias=Sn.bias,kn.shadowNormalBias=Sn.normalBias,kn.shadowRadius=Sn.radius,kn.shadowMapSize=Sn.mapSize,a.directionalShadow[V]=kn,a.directionalShadowMap[V]=_t,a.directionalShadowMatrix[V]=ct.shadow.matrix,me++}a.directional[V]=ln,V++}else if(ct.isSpotLight){var dn=n.get(ct);if(dn.position.setFromMatrixPosition(ct.matrixWorld),dn.color.copy(rt).multiplyScalar(ht*je),dn.distance=It,dn.coneCos=Math.cos(ct.angle),dn.penumbraCos=Math.cos(ct.angle*(1-ct.penumbra)),dn.decay=ct.decay,ct.castShadow){var gn=ct.shadow,Hn=r.get(ct);Hn.shadowBias=gn.bias,Hn.shadowNormalBias=gn.normalBias,Hn.shadowRadius=gn.radius,Hn.shadowMapSize=gn.mapSize,a.spotShadow[se]=Hn,a.spotShadowMap[se]=_t,a.spotShadowMatrix[se]=ct.shadow.matrix,ke++}a.spot[se]=dn,se++}else if(ct.isRectAreaLight){var Ur=n.get(ct);Ur.color.copy(rt).multiplyScalar(ht),Ur.halfWidth.set(.5*ct.width,0,0),Ur.halfHeight.set(0,.5*ct.height,0),a.rectArea[fe]=Ur,fe++}else if(ct.isPointLight){var Qn=n.get(ct);if(Qn.color.copy(ct.color).multiplyScalar(ct.intensity*je),Qn.distance=ct.distance,Qn.decay=ct.decay,ct.castShadow){var ft=ct.shadow,bn=r.get(ct);bn.shadowBias=ft.bias,bn.shadowNormalBias=ft.normalBias,bn.shadowRadius=ft.radius,bn.shadowMapSize=ft.mapSize,bn.shadowCameraNear=ft.camera.near,bn.shadowCameraFar=ft.camera.far,a.pointShadow[W]=bn,a.pointShadowMap[W]=_t,a.pointShadowMatrix[W]=ct.shadow.matrix,pe++}a.point[W]=Qn,W++}else if(ct.isHemisphereLight){var Jn=n.get(ct);Jn.skyColor.copy(ct.color).multiplyScalar(ht*je),Jn.groundColor.copy(ct.groundColor).multiplyScalar(ht*je),a.hemi[ve]=Jn,ve++}}fe>0&&(s.isWebGL2||!0===i.has("OES_texture_float_linear")?(a.rectAreaLTC1=Xn.LTC_FLOAT_1,a.rectAreaLTC2=Xn.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=Xn.LTC_HALF_1,a.rectAreaLTC2=Xn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=T,a.ambient[1]=I,a.ambient[2]=Z;var _n=a.hash;(_n.directionalLength!==V||_n.pointLength!==W||_n.spotLength!==se||_n.rectAreaLength!==fe||_n.hemiLength!==ve||_n.numDirectionalShadows!==me||_n.numPointShadows!==pe||_n.numSpotShadows!==ke)&&(a.directional.length=V,a.spot.length=se,a.rectArea.length=fe,a.point.length=W,a.hemi.length=ve,a.directionalShadow.length=me,a.directionalShadowMap.length=me,a.pointShadow.length=pe,a.pointShadowMap.length=pe,a.spotShadow.length=ke,a.spotShadowMap.length=ke,a.directionalShadowMatrix.length=me,a.pointShadowMatrix.length=pe,a.spotShadowMatrix.length=ke,_n.directionalLength=V,_n.pointLength=W,_n.spotLength=se,_n.rectAreaLength=fe,_n.hemiLength=ve,_n.numDirectionalShadows=me,_n.numPointShadows=pe,_n.numSpotShadows=ke,a.version=Nue++)},setupView:function(w,C){for(var T=0,I=0,Z=0,Y=0,V=0,W=C.matrixWorldInverse,se=0,fe=w.length;se<fe;se++){var ve=w[se];if(ve.isDirectionalLight){var me=a.directional[T];me.direction.setFromMatrixPosition(ve.matrixWorld),u.setFromMatrixPosition(ve.target.matrixWorld),me.direction.sub(u),me.direction.transformDirection(W),T++}else if(ve.isSpotLight){var pe=a.spot[Z];pe.position.setFromMatrixPosition(ve.matrixWorld),pe.position.applyMatrix4(W),pe.direction.setFromMatrixPosition(ve.matrixWorld),u.setFromMatrixPosition(ve.target.matrixWorld),pe.direction.sub(u),pe.direction.transformDirection(W),Z++}else if(ve.isRectAreaLight){var ke=a.rectArea[Y];ke.position.setFromMatrixPosition(ve.matrixWorld),ke.position.applyMatrix4(W),f.identity(),l.copy(ve.matrixWorld),l.premultiply(W),f.extractRotation(l),ke.halfWidth.set(.5*ve.width,0,0),ke.halfHeight.set(0,.5*ve.height,0),ke.halfWidth.applyMatrix4(f),ke.halfHeight.applyMatrix4(f),Y++}else if(ve.isPointLight){var je=a.point[I];je.position.setFromMatrixPosition(ve.matrixWorld),je.position.applyMatrix4(W),I++}else if(ve.isHemisphereLight){var qe=a.hemi[V];qe.direction.setFromMatrixPosition(ve.matrixWorld),qe.direction.transformDirection(W),qe.direction.normalize(),V++}}},state:a}}function w8(i,s){var n=new Bue(i,s),r=[],a=[];return{init:function(){r.length=0,a.length=0},state:{lightsArray:r,shadowsArray:a,lights:n},setupLights:function(w){n.setup(r,w)},setupLightsView:function(w){n.setupView(r,w)},pushLight:function(w){r.push(w)},pushShadow:function(w){a.push(w)}}}function Uue(i,s){var n=new WeakMap;return{get:function(o){var l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(o)?(l=new w8(i,s),n.set(o,[l])):u>=n.get(o).length?(l=new w8(i,s),n.get(o).push(l)):l=n.get(o)[u],l},dispose:function(){n=new WeakMap}}}var xU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshDepthMaterial",a.depthPacking=3200,a.map=null,a.alphaMap=null,a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.wireframe=!1,a.wireframeLinewidth=1,a.fog=!1,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}]),n}(pl);xU.prototype.isMeshDepthMaterial=!0;var MU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshDistanceMaterial",a.referencePosition=new Ue,a.nearDistance=1,a.farDistance=1e3,a.map=null,a.alphaMap=null,a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.fog=!1,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}]),n}(pl);function E8(i,s,n){var r=new GR,a=new un,o=new un,u=new bs,l=new xU({depthPacking:3201}),f=new MU,m={},b=n.maxTextureSize,w={0:1,1:0,2:2},C=new yg({uniforms:{shadow_pass:{value:null},resolution:{value:new un},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=C.clone();T.defines.HORIZONTAL_PASS=1;var I=new ma;I.setAttribute("position",new cu(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var Z=new Rl(I,C),Y=this;function V(fe,ve){var me=s.update(Z);C.uniforms.shadow_pass.value=fe.map.texture,C.uniforms.resolution.value=fe.mapSize,C.uniforms.radius.value=fe.radius,C.uniforms.samples.value=fe.blurSamples,i.setRenderTarget(fe.mapPass),i.clear(),i.renderBufferDirect(ve,null,me,C,Z,null),T.uniforms.shadow_pass.value=fe.mapPass.texture,T.uniforms.resolution.value=fe.mapSize,T.uniforms.radius.value=fe.radius,T.uniforms.samples.value=fe.blurSamples,i.setRenderTarget(fe.map),i.clear(),i.renderBufferDirect(ve,null,me,T,Z,null)}function W(fe,ve,me,pe,ke,je,qe){var Ze=null,ct=!0===pe.isPointLight?fe.customDistanceMaterial:fe.customDepthMaterial;if(Ze=void 0!==ct?ct:!0===pe.isPointLight?f:l,i.localClippingEnabled&&!0===me.clipShadows&&0!==me.clippingPlanes.length||me.displacementMap&&0!==me.displacementScale||me.alphaMap&&me.alphaTest>0){var rt=Ze.uuid,ht=me.uuid,It=m[rt];void 0===It&&(m[rt]=It={});var _t=It[ht];void 0===_t&&(_t=Ze.clone(),It[ht]=_t),Ze=_t}return Ze.visible=me.visible,Ze.wireframe=me.wireframe,Ze.side=3===qe?null!==me.shadowSide?me.shadowSide:me.side:null!==me.shadowSide?me.shadowSide:w[me.side],Ze.alphaMap=me.alphaMap,Ze.alphaTest=me.alphaTest,Ze.clipShadows=me.clipShadows,Ze.clippingPlanes=me.clippingPlanes,Ze.clipIntersection=me.clipIntersection,Ze.displacementMap=me.displacementMap,Ze.displacementScale=me.displacementScale,Ze.displacementBias=me.displacementBias,Ze.wireframeLinewidth=me.wireframeLinewidth,Ze.linewidth=me.linewidth,!0===pe.isPointLight&&!0===Ze.isMeshDistanceMaterial&&(Ze.referencePosition.setFromMatrixPosition(pe.matrixWorld),Ze.nearDistance=ke,Ze.farDistance=je),Ze}function se(fe,ve,me,pe,ke){if(!1!==fe.visible){if(fe.layers.test(ve.layers)&&(fe.isMesh||fe.isLine||fe.isPoints)&&(fe.castShadow||fe.receiveShadow&&3===ke)&&(!fe.frustumCulled||r.intersectsObject(fe))){fe.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,fe.matrixWorld);var qe=s.update(fe),Ze=fe.material;if(Array.isArray(Ze))for(var ct=qe.groups,rt=0,ht=ct.length;rt<ht;rt++){var It=ct[rt],_t=Ze[It.materialIndex];if(_t&&_t.visible){var Zt=W(fe,0,_t,pe,me.near,me.far,ke);i.renderBufferDirect(me,null,qe,Zt,fe,It)}}else if(Ze.visible){var ln=W(fe,0,Ze,pe,me.near,me.far,ke);i.renderBufferDirect(me,null,qe,ln,fe,null)}}for(var Sn=fe.children,kn=0,dn=Sn.length;kn<dn;kn++)se(Sn[kn],ve,me,pe,ke)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(fe,ve,me){if(!1!==Y.enabled&&(!1!==Y.autoUpdate||!1!==Y.needsUpdate)&&0!==fe.length){var pe=i.getRenderTarget(),ke=i.getActiveCubeFace(),je=i.getActiveMipmapLevel(),qe=i.state;qe.setBlending(0),qe.buffers.color.setClear(1,1,1,1),qe.buffers.depth.setTest(!0),qe.setScissorTest(!1);for(var Ze=0,ct=fe.length;Ze<ct;Ze++){var rt=fe[Ze],ht=rt.shadow;if(void 0!==ht){if(!1!==ht.autoUpdate||!1!==ht.needsUpdate){a.copy(ht.mapSize);var It=ht.getFrameExtents();if(a.multiply(It),o.copy(ht.mapSize),(a.x>b||a.y>b)&&(a.x>b&&(o.x=Math.floor(b/It.x),a.x=o.x*It.x,ht.mapSize.x=o.x),a.y>b&&(o.y=Math.floor(b/It.y),a.y=o.y*It.y,ht.mapSize.y=o.y)),null===ht.map&&!ht.isPointLightShadow&&3===this.type){var _t={minFilter:rh,magFilter:rh,format:cc};ht.map=new Xd(a.x,a.y,_t),ht.map.texture.name=rt.name+".shadowMap",ht.mapPass=new Xd(a.x,a.y,_t),ht.camera.updateProjectionMatrix()}null===ht.map&&(ht.map=new Xd(a.x,a.y,{minFilter:Au,magFilter:Au,format:cc}),ht.map.texture.name=rt.name+".shadowMap",ht.camera.updateProjectionMatrix()),i.setRenderTarget(ht.map),i.clear();for(var ln=ht.getViewportCount(),Sn=0;Sn<ln;Sn++){var kn=ht.getViewport(Sn);u.set(o.x*kn.x,o.y*kn.y,o.x*kn.z,o.y*kn.w),qe.viewport(u),ht.updateMatrices(rt,Sn),r=ht.getFrustum(),se(ve,me,ht.camera,rt,this.type)}!ht.isPointLightShadow&&3===this.type&&V(ht,me),ht.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",rt,"has no shadow.")}Y.needsUpdate=!1,i.setRenderTarget(pe,ke,je)}}}function Hue(i,s,n){var r,a,o=n.isWebGL2,m=new function(){var xt=!1,tr=new bs,yr=null,di=new bs(0,0,0,0);return{setMask:function(er){yr!==er&&!xt&&(i.colorMask(er,er,er,er),yr=er)},setLocked:function(er){xt=er},setClear:function(er,Dt,nr,Gi,Fi){!0===Fi&&(er*=Gi,Dt*=Gi,nr*=Gi),tr.set(er,Dt,nr,Gi),!1===di.equals(tr)&&(i.clearColor(er,Dt,nr,Gi),di.copy(tr))},reset:function(){xt=!1,yr=null,di.set(-1,0,0,0)}}},b=new function(){var xt=!1,tr=null,yr=null,di=null;return{setTest:function(er){er?ft(2929):bn(2929)},setMask:function(er){tr!==er&&!xt&&(i.depthMask(er),tr=er)},setFunc:function(er){if(yr!==er){if(er)switch(er){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);yr=er}},setLocked:function(er){xt=er},setClear:function(er){di!==er&&(i.clearDepth(er),di=er)},reset:function(){xt=!1,tr=null,yr=null,di=null}}},w=new function(){var xt=!1,tr=null,yr=null,di=null,qr=null,er=null,Dt=null,nr=null,Gi=null;return{setTest:function(_i){xt||(_i?ft(2960):bn(2960))},setMask:function(_i){tr!==_i&&!xt&&(i.stencilMask(_i),tr=_i)},setFunc:function(_i,ts,ho){(yr!==_i||di!==ts||qr!==ho)&&(i.stencilFunc(_i,ts,ho),yr=_i,di=ts,qr=ho)},setOp:function(_i,ts,ho){(er!==_i||Dt!==ts||nr!==ho)&&(i.stencilOp(_i,ts,ho),er=_i,Dt=ts,nr=ho)},setLocked:function(_i){xt=_i},setClear:function(_i){Gi!==_i&&(i.clearStencil(_i),Gi=_i)},reset:function(){xt=!1,tr=null,yr=null,di=null,qr=null,er=null,Dt=null,nr=null,Gi=null}}},C={},T=null,I={},Z=null,Y=!1,V=null,W=null,se=null,fe=null,ve=null,me=null,pe=null,ke=!1,je=null,qe=null,Ze=null,ct=null,rt=null,ht=i.getParameter(35661),It=!1,_t=0,Zt=i.getParameter(7938);-1!==Zt.indexOf("WebGL")?(_t=parseFloat(/^WebGL (\d)/.exec(Zt)[1]),It=_t>=1):-1!==Zt.indexOf("OpenGL ES")&&(_t=parseFloat(/^OpenGL ES (\d)/.exec(Zt)[1]),It=_t>=2);var ln=null,Sn={},kn=i.getParameter(3088),dn=i.getParameter(2978),gn=(new bs).fromArray(kn),Hn=(new bs).fromArray(dn);function Ur(xt,tr,yr){var di=new Uint8Array(4),qr=i.createTexture();i.bindTexture(xt,qr),i.texParameteri(xt,10241,9728),i.texParameteri(xt,10240,9728);for(var er=0;er<yr;er++)i.texImage2D(tr+er,0,6408,1,1,0,6408,5121,di);return qr}var Qn={};function ft(xt){!0!==C[xt]&&(i.enable(xt),C[xt]=!0)}function bn(xt){!1!==C[xt]&&(i.disable(xt),C[xt]=!1)}Qn[3553]=Ur(3553,3553,1),Qn[34067]=Ur(34067,34069,6),m.setClear(0,0,0,1),b.setClear(1),w.setClear(0),ft(2929),b.setFunc(3),Vr(!1),Pi(1),ft(2884),yn(0);var Gn=((0,vr.Z)(r={},100,32774),(0,vr.Z)(r,101,32778),(0,vr.Z)(r,102,32779),r);if(o)Gn[103]=32775,Gn[104]=32776;else{var Vn=s.get("EXT_blend_minmax");null!==Vn&&(Gn[103]=Vn.MIN_EXT,Gn[104]=Vn.MAX_EXT)}var en=((0,vr.Z)(a={},200,0),(0,vr.Z)(a,201,1),(0,vr.Z)(a,202,768),(0,vr.Z)(a,204,770),(0,vr.Z)(a,210,776),(0,vr.Z)(a,208,774),(0,vr.Z)(a,206,772),(0,vr.Z)(a,203,769),(0,vr.Z)(a,205,771),(0,vr.Z)(a,209,775),(0,vr.Z)(a,207,773),a);function yn(xt,tr,yr,di,qr,er,Dt,nr){if(0!==xt){if(!1===Y&&(ft(3042),Y=!0),5===xt)qr=qr||tr,er=er||yr,Dt=Dt||di,(tr!==W||qr!==ve)&&(i.blendEquationSeparate(Gn[tr],Gn[qr]),W=tr,ve=qr),(yr!==se||di!==fe||er!==me||Dt!==pe)&&(i.blendFuncSeparate(en[yr],en[di],en[er],en[Dt]),se=yr,fe=di,me=er,pe=Dt),V=xt,ke=null;else if(xt!==V||nr!==ke){if((100!==W||100!==ve)&&(i.blendEquation(32774),W=100,ve=100),nr)switch(xt){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,0,769,771);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",xt)}else switch(xt){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFunc(0,769);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",xt)}se=null,fe=null,me=null,pe=null,V=xt,ke=nr}}else!0===Y&&(bn(3042),Y=!1)}function Vr(xt){je!==xt&&(i.frontFace(xt?2304:2305),je=xt)}function Pi(xt){0!==xt?(ft(2884),xt!==qe&&i.cullFace(1===xt?1029:2===xt?1028:1032)):bn(2884),qe=xt}function st(xt,tr,yr){xt?(ft(32823),(ct!==tr||rt!==yr)&&(i.polygonOffset(tr,yr),ct=tr,rt=yr)):bn(32823)}function hn(xt){void 0===xt&&(xt=33984+ht-1),ln!==xt&&(i.activeTexture(xt),ln=xt)}return{buffers:{color:m,depth:b,stencil:w},enable:ft,disable:bn,bindFramebuffer:function(xt,tr){return null===tr&&null!==T&&(tr=T),I[xt]!==tr&&(i.bindFramebuffer(xt,tr),I[xt]=tr,o&&(36009===xt&&(I[36160]=tr),36160===xt&&(I[36009]=tr)),!0)},bindXRFramebuffer:function(xt){xt!==T&&(i.bindFramebuffer(36160,xt),T=xt)},useProgram:function(xt){return Z!==xt&&(i.useProgram(xt),Z=xt,!0)},setBlending:yn,setMaterial:function(xt,tr){2===xt.side?bn(2884):ft(2884);var yr=1===xt.side;tr&&(yr=!yr),Vr(yr),1===xt.blending&&!1===xt.transparent?yn(0):yn(xt.blending,xt.blendEquation,xt.blendSrc,xt.blendDst,xt.blendEquationAlpha,xt.blendSrcAlpha,xt.blendDstAlpha,xt.premultipliedAlpha),b.setFunc(xt.depthFunc),b.setTest(xt.depthTest),b.setMask(xt.depthWrite),m.setMask(xt.colorWrite);var di=xt.stencilWrite;w.setTest(di),di&&(w.setMask(xt.stencilWriteMask),w.setFunc(xt.stencilFunc,xt.stencilRef,xt.stencilFuncMask),w.setOp(xt.stencilFail,xt.stencilZFail,xt.stencilZPass)),st(xt.polygonOffset,xt.polygonOffsetFactor,xt.polygonOffsetUnits),!0===xt.alphaToCoverage?ft(32926):bn(32926)},setFlipSided:Vr,setCullFace:Pi,setLineWidth:function(xt){xt!==Ze&&(It&&i.lineWidth(xt),Ze=xt)},setPolygonOffset:st,setScissorTest:function(xt){xt?ft(3089):bn(3089)},activeTexture:hn,bindTexture:function(xt,tr){null===ln&&hn();var yr=Sn[ln];void 0===yr&&(Sn[ln]=yr={type:void 0,texture:void 0}),(yr.type!==xt||yr.texture!==tr)&&(i.bindTexture(xt,tr||Qn[xt]),yr.type=xt,yr.texture=tr)},unbindTexture:function(){var xt=Sn[ln];void 0!==xt&&void 0!==xt.type&&(i.bindTexture(xt.type,null),xt.type=void 0,xt.texture=void 0)},compressedTexImage2D:function(){try{i.compressedTexImage2D.apply(i,arguments)}catch(xt){console.error("THREE.WebGLState:",xt)}},texImage2D:function(){try{i.texImage2D.apply(i,arguments)}catch(xt){console.error("THREE.WebGLState:",xt)}},texImage3D:function(){try{i.texImage3D.apply(i,arguments)}catch(xt){console.error("THREE.WebGLState:",xt)}},scissor:function(xt){!1===gn.equals(xt)&&(i.scissor(xt.x,xt.y,xt.z,xt.w),gn.copy(xt))},viewport:function(xt){!1===Hn.equals(xt)&&(i.viewport(xt.x,xt.y,xt.z,xt.w),Hn.copy(xt))},reset:function(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===o&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),C={},ln=null,Sn={},T=null,I={},Z=null,Y=!1,V=null,W=null,se=null,fe=null,ve=null,me=null,pe=null,ke=!1,je=null,qe=null,Ze=null,ct=null,rt=null,gn.set(0,0,i.canvas.width,i.canvas.height),Hn.set(0,0,i.canvas.width,i.canvas.height),m.reset(),b.reset(),w.reset()}}}function Gue(i,s,n,r,a,o,u){var l,f,Z,m=a.isWebGL2,b=a.maxTextures,w=a.maxCubemapSize,C=a.maxTextureSize,T=a.maxSamples,I=new WeakMap,Y=!1;try{Y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(st){}function V(st,Ge){return Y?new OffscreenCanvas(st,Ge):ER("canvas")}function W(st,Ge,hn,Ln){var Kn=1;if((st.width>Ln||st.height>Ln)&&(Kn=Ln/Math.max(st.width,st.height)),Kn<1||!0===Ge){if("undefined"!=typeof HTMLImageElement&&st instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&st instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&st instanceof ImageBitmap){var ar=Ge?Tj:Math.floor,Mr=ar(Kn*st.width),Cr=ar(Kn*st.height);void 0===Z&&(Z=V(Mr,Cr));var hi=hn?V(Mr,Cr):Z;return hi.width=Mr,hi.height=Cr,hi.getContext("2d").drawImage(st,0,0,Mr,Cr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+st.width+"x"+st.height+") to ("+Mr+"x"+Cr+")."),hi}return"data"in st&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+st.width+"x"+st.height+")."),st}return st}function se(st){return jB(st.width)&&jB(st.height)}function ve(st,Ge){return st.generateMipmaps&&Ge&&st.minFilter!==Au&&st.minFilter!==rh}function me(st,Ge,hn,Ln){var Kn=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;i.generateMipmap(st);var ar=r.get(Ge);ar.__maxMipLevel=Math.log2(Math.max(hn,Ln,Kn))}function pe(st,Ge,hn,Ln){if(!1===m)return Ge;if(null!==st){if(void 0!==i[st])return i[st];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+st+"'")}var Kn=Ge;return 6403===Ge&&(5126===hn&&(Kn=33326),5131===hn&&(Kn=33325),5121===hn&&(Kn=33321)),6407===Ge&&(5126===hn&&(Kn=34837),5131===hn&&(Kn=34843),5121===hn&&(Kn=32849)),6408===Ge&&(5126===hn&&(Kn=34836),5131===hn&&(Kn=34842),5121===hn&&(Kn=Ln===Q_?35907:32856)),(33325===Kn||33326===Kn||34842===Kn||34836===Kn)&&s.get("EXT_color_buffer_float"),Kn}function ke(st){return st===Au||1004===st||1005===st?9728:9729}function je(st){var Ge=st.target;Ge.removeEventListener("dispose",je),function(st){var Ge=r.get(st);void 0!==Ge.__webglInit&&(i.deleteTexture(Ge.__webglTexture),r.remove(st))}(Ge),Ge.isVideoTexture&&I.delete(Ge),u.memory.textures--}function qe(st){var Ge=st.target;Ge.removeEventListener("dispose",qe),function(st){var Ge=st.texture,hn=r.get(st),Ln=r.get(Ge);if(st){if(void 0!==Ln.__webglTexture&&(i.deleteTexture(Ln.__webglTexture),u.memory.textures--),st.depthTexture&&st.depthTexture.dispose(),st.isWebGLCubeRenderTarget)for(var Kn=0;Kn<6;Kn++)i.deleteFramebuffer(hn.__webglFramebuffer[Kn]),hn.__webglDepthbuffer&&i.deleteRenderbuffer(hn.__webglDepthbuffer[Kn]);else i.deleteFramebuffer(hn.__webglFramebuffer),hn.__webglDepthbuffer&&i.deleteRenderbuffer(hn.__webglDepthbuffer),hn.__webglMultisampledFramebuffer&&i.deleteFramebuffer(hn.__webglMultisampledFramebuffer),hn.__webglColorRenderbuffer&&i.deleteRenderbuffer(hn.__webglColorRenderbuffer),hn.__webglDepthRenderbuffer&&i.deleteRenderbuffer(hn.__webglDepthRenderbuffer);if(st.isWebGLMultipleRenderTargets)for(var ar=0,Mr=Ge.length;ar<Mr;ar++){var Cr=r.get(Ge[ar]);Cr.__webglTexture&&(i.deleteTexture(Cr.__webglTexture),u.memory.textures--),r.remove(Ge[ar])}r.remove(Ge),r.remove(st)}}(Ge)}var rt=0;function _t(st,Ge){var hn=r.get(st);if(st.isVideoTexture&&function(st){var Ge=u.render.frame;I.get(st)!==Ge&&(I.set(st,Ge),st.update())}(st),st.version>0&&hn.__version!==st.version){var Ln=st.image;if(void 0===Ln)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==Ln.complete)return void Ur(hn,st,Ge);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+Ge),n.bindTexture(3553,hn.__webglTexture)}function Sn(st,Ge){var hn=r.get(st);st.version>0&&hn.__version!==st.version?function(st,Ge,hn){if(6===Ge.image.length){Hn(st,Ge),n.activeTexture(33984+hn),n.bindTexture(34067,st.__webglTexture),i.pixelStorei(37440,Ge.flipY),i.pixelStorei(37441,Ge.premultiplyAlpha),i.pixelStorei(3317,Ge.unpackAlignment),i.pixelStorei(37443,0);for(var Ln=Ge&&(Ge.isCompressedTexture||Ge.image[0].isCompressedTexture),Kn=Ge.image[0]&&Ge.image[0].isDataTexture,ar=[],Mr=0;Mr<6;Mr++)ar[Mr]=Ln||Kn?Kn?Ge.image[Mr].image:Ge.image[Mr]:W(Ge.image[Mr],!1,!0,w);var tr,Cr=ar[0],hi=se(Cr)||m,Ci=o.convert(Ge.format),na=o.convert(Ge.type),xt=pe(Ge.internalFormat,Ci,na,Ge.encoding);if(gn(34067,Ge,hi),Ln){for(var yr=0;yr<6;yr++){tr=ar[yr].mipmaps;for(var di=0;di<tr.length;di++){var qr=tr[di];Ge.format!==cc&&Ge.format!==EE?null!==Ci?n.compressedTexImage2D(34069+yr,di,xt,qr.width,qr.height,0,qr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+yr,di,xt,qr.width,qr.height,0,Ci,na,qr.data)}}st.__maxMipLevel=tr.length-1}else{tr=Ge.mipmaps;for(var er=0;er<6;er++)if(Kn){n.texImage2D(34069+er,0,xt,ar[er].width,ar[er].height,0,Ci,na,ar[er].data);for(var Dt=0;Dt<tr.length;Dt++){var Gi=tr[Dt].image[er].image;n.texImage2D(34069+er,Dt+1,xt,Gi.width,Gi.height,0,Ci,na,Gi.data)}}else{n.texImage2D(34069+er,0,xt,Ci,na,ar[er]);for(var Fi=0;Fi<tr.length;Fi++)n.texImage2D(34069+er,Fi+1,xt,Ci,na,tr[Fi].image[er])}st.__maxMipLevel=tr.length}ve(Ge,hi)&&me(34067,Ge,Cr.width,Cr.height),st.__version=Ge.version,Ge.onUpdate&&Ge.onUpdate(Ge)}}(hn,st,Ge):(n.activeTexture(33984+Ge),n.bindTexture(34067,hn.__webglTexture))}var kn=((0,vr.Z)(l={},1e3,10497),(0,vr.Z)(l,xc,33071),(0,vr.Z)(l,1002,33648),l),dn=((0,vr.Z)(f={},Au,9728),(0,vr.Z)(f,1004,9984),(0,vr.Z)(f,1005,9986),(0,vr.Z)(f,rh,9729),(0,vr.Z)(f,1007,9985),(0,vr.Z)(f,BT,9987),f);function gn(st,Ge,hn){if(hn?(i.texParameteri(st,10242,kn[Ge.wrapS]),i.texParameteri(st,10243,kn[Ge.wrapT]),(32879===st||35866===st)&&i.texParameteri(st,32882,kn[Ge.wrapR]),i.texParameteri(st,10240,dn[Ge.magFilter]),i.texParameteri(st,10241,dn[Ge.minFilter])):(i.texParameteri(st,10242,33071),i.texParameteri(st,10243,33071),(32879===st||35866===st)&&i.texParameteri(st,32882,33071),(Ge.wrapS!==xc||Ge.wrapT!==xc)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(st,10240,ke(Ge.magFilter)),i.texParameteri(st,10241,ke(Ge.minFilter)),Ge.minFilter!==Au&&Ge.minFilter!==rh&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===s.has("EXT_texture_filter_anisotropic")){var Ln=s.get("EXT_texture_filter_anisotropic");if(Ge.type===lg&&!1===s.has("OES_texture_float_linear")||!1===m&&Ge.type===wE&&!1===s.has("OES_texture_half_float_linear"))return;(Ge.anisotropy>1||r.get(Ge).__currentAnisotropy)&&(i.texParameterf(st,Ln.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Ge.anisotropy,a.getMaxAnisotropy())),r.get(Ge).__currentAnisotropy=Ge.anisotropy)}}function Hn(st,Ge){void 0===st.__webglInit&&(st.__webglInit=!0,Ge.addEventListener("dispose",je),st.__webglTexture=i.createTexture(),u.memory.textures++)}function Ur(st,Ge,hn){var Ln=3553;Ge.isDataTexture2DArray&&(Ln=35866),Ge.isDataTexture3D&&(Ln=32879),Hn(st,Ge),n.activeTexture(33984+hn),n.bindTexture(Ln,st.__webglTexture),i.pixelStorei(37440,Ge.flipY),i.pixelStorei(37441,Ge.premultiplyAlpha),i.pixelStorei(3317,Ge.unpackAlignment),i.pixelStorei(37443,0);var Kn=function(st){return!m&&(st.wrapS!==xc||st.wrapT!==xc||st.minFilter!==Au&&st.minFilter!==rh)}(Ge)&&!1===se(Ge.image),ar=W(Ge.image,Kn,!1,C),Mr=se(ar)||m,Cr=o.convert(Ge.format),hi=o.convert(Ge.type),Ci=pe(Ge.internalFormat,Cr,hi,Ge.encoding);gn(Ln,Ge,Mr);var na,xt=Ge.mipmaps;if(Ge.isDepthTexture)Ci=6402,m?Ci=Ge.type===lg?36012:1014===Ge.type?33190:Ge.type===UT?35056:33189:Ge.type===lg&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Ge.format===kE&&6402===Ci&&1012!==Ge.type&&1014!==Ge.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Ge.type=1012,hi=o.convert(Ge.type)),Ge.format===VT&&6402===Ci&&(Ci=34041,Ge.type!==UT&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Ge.type=UT,hi=o.convert(Ge.type))),n.texImage2D(3553,0,Ci,ar.width,ar.height,0,Cr,hi,null);else if(Ge.isDataTexture)if(xt.length>0&&Mr){for(var tr=0,yr=xt.length;tr<yr;tr++)n.texImage2D(3553,tr,Ci,(na=xt[tr]).width,na.height,0,Cr,hi,na.data);Ge.generateMipmaps=!1,st.__maxMipLevel=xt.length-1}else n.texImage2D(3553,0,Ci,ar.width,ar.height,0,Cr,hi,ar.data),st.__maxMipLevel=0;else if(Ge.isCompressedTexture){for(var di=0,qr=xt.length;di<qr;di++)na=xt[di],Ge.format!==cc&&Ge.format!==EE?null!==Cr?n.compressedTexImage2D(3553,di,Ci,na.width,na.height,0,na.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,di,Ci,na.width,na.height,0,Cr,hi,na.data);st.__maxMipLevel=xt.length-1}else if(Ge.isDataTexture2DArray)n.texImage3D(35866,0,Ci,ar.width,ar.height,ar.depth,0,Cr,hi,ar.data),st.__maxMipLevel=0;else if(Ge.isDataTexture3D)n.texImage3D(32879,0,Ci,ar.width,ar.height,ar.depth,0,Cr,hi,ar.data),st.__maxMipLevel=0;else if(xt.length>0&&Mr){for(var er=0,Dt=xt.length;er<Dt;er++)n.texImage2D(3553,er,Ci,Cr,hi,na=xt[er]);Ge.generateMipmaps=!1,st.__maxMipLevel=xt.length-1}else n.texImage2D(3553,0,Ci,Cr,hi,ar),st.__maxMipLevel=0;ve(Ge,Mr)&&me(Ln,Ge,ar.width,ar.height),st.__version=Ge.version,Ge.onUpdate&&Ge.onUpdate(Ge)}function ft(st,Ge,hn,Ln,Kn){var ar=o.convert(hn.format),Mr=o.convert(hn.type),Cr=pe(hn.internalFormat,ar,Mr,hn.encoding);32879===Kn||35866===Kn?n.texImage3D(Kn,0,Cr,Ge.width,Ge.height,Ge.depth,0,ar,Mr,null):n.texImage2D(Kn,0,Cr,Ge.width,Ge.height,0,ar,Mr,null),n.bindFramebuffer(36160,st),i.framebufferTexture2D(36160,Ln,Kn,r.get(hn).__webglTexture,0),n.bindFramebuffer(36160,null)}function bn(st,Ge,hn){if(i.bindRenderbuffer(36161,st),Ge.depthBuffer&&!Ge.stencilBuffer){var Ln=33189;if(hn){var Kn=Ge.depthTexture;Kn&&Kn.isDepthTexture&&(Kn.type===lg?Ln=36012:1014===Kn.type&&(Ln=33190));var ar=en(Ge);i.renderbufferStorageMultisample(36161,ar,Ln,Ge.width,Ge.height)}else i.renderbufferStorage(36161,Ln,Ge.width,Ge.height);i.framebufferRenderbuffer(36160,36096,36161,st)}else if(Ge.depthBuffer&&Ge.stencilBuffer){if(hn){var Mr=en(Ge);i.renderbufferStorageMultisample(36161,Mr,35056,Ge.width,Ge.height)}else i.renderbufferStorage(36161,34041,Ge.width,Ge.height);i.framebufferRenderbuffer(36160,33306,36161,st)}else{var Cr=!0===Ge.isWebGLMultipleRenderTargets?Ge.texture[0]:Ge.texture,hi=o.convert(Cr.format),Ci=o.convert(Cr.type),na=pe(Cr.internalFormat,hi,Ci,Cr.encoding);if(hn){var xt=en(Ge);i.renderbufferStorageMultisample(36161,xt,na,Ge.width,Ge.height)}else i.renderbufferStorage(36161,na,Ge.width,Ge.height)}i.bindRenderbuffer(36161,null)}function en(st){return m&&st.isWebGLMultisampleRenderTarget?Math.min(T,st.samples):0}var An=!1,Vr=!1;this.allocateTextureUnit=function(){var st=rt;return st>=b&&console.warn("THREE.WebGLTextures: Trying to use "+st+" texture units while this GPU supports only "+b),rt+=1,st},this.resetTextureUnits=function(){rt=0},this.setTexture2D=_t,this.setTexture2DArray=function(st,Ge){var hn=r.get(st);st.version>0&&hn.__version!==st.version?Ur(hn,st,Ge):(n.activeTexture(33984+Ge),n.bindTexture(35866,hn.__webglTexture))},this.setTexture3D=function(st,Ge){var hn=r.get(st);st.version>0&&hn.__version!==st.version?Ur(hn,st,Ge):(n.activeTexture(33984+Ge),n.bindTexture(32879,hn.__webglTexture))},this.setTextureCube=Sn,this.setupRenderTarget=function(st){var Ge=st.texture,hn=r.get(st),Ln=r.get(Ge);st.addEventListener("dispose",qe),!0!==st.isWebGLMultipleRenderTargets&&(Ln.__webglTexture=i.createTexture(),Ln.__version=Ge.version,u.memory.textures++);var Kn=!0===st.isWebGLCubeRenderTarget,ar=!0===st.isWebGLMultipleRenderTargets,Mr=!0===st.isWebGLMultisampleRenderTarget,Cr=Ge.isDataTexture3D||Ge.isDataTexture2DArray,hi=se(st)||m;if(m&&Ge.format===EE&&(Ge.type===lg||Ge.type===wE)&&(Ge.format=cc,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Kn){hn.__webglFramebuffer=[];for(var Ci=0;Ci<6;Ci++)hn.__webglFramebuffer[Ci]=i.createFramebuffer()}else if(hn.__webglFramebuffer=i.createFramebuffer(),ar)if(a.drawBuffers)for(var na=st.texture,xt=0,tr=na.length;xt<tr;xt++){var yr=r.get(na[xt]);void 0===yr.__webglTexture&&(yr.__webglTexture=i.createTexture(),u.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Mr)if(m){hn.__webglMultisampledFramebuffer=i.createFramebuffer(),hn.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,hn.__webglColorRenderbuffer);var di=o.convert(Ge.format),qr=o.convert(Ge.type),er=pe(Ge.internalFormat,di,qr,Ge.encoding),Dt=en(st);i.renderbufferStorageMultisample(36161,Dt,er,st.width,st.height),n.bindFramebuffer(36160,hn.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,hn.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),st.depthBuffer&&(hn.__webglDepthRenderbuffer=i.createRenderbuffer(),bn(hn.__webglDepthRenderbuffer,st,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Kn){n.bindTexture(34067,Ln.__webglTexture),gn(34067,Ge,hi);for(var nr=0;nr<6;nr++)ft(hn.__webglFramebuffer[nr],st,Ge,36064,34069+nr);ve(Ge,hi)&&me(34067,Ge,st.width,st.height),n.unbindTexture()}else if(ar){for(var Gi=st.texture,Fi=0,_i=Gi.length;Fi<_i;Fi++){var ts=Gi[Fi],ho=r.get(ts);n.bindTexture(3553,ho.__webglTexture),gn(3553,ts,hi),ft(hn.__webglFramebuffer,st,ts,36064+Fi,3553),ve(ts,hi)&&me(3553,ts,st.width,st.height)}n.unbindTexture()}else{var vl=3553;Cr&&(m?vl=Ge.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(vl,Ln.__webglTexture),gn(vl,Ge,hi),ft(hn.__webglFramebuffer,st,Ge,36064,vl),ve(Ge,hi)&&me(vl,Ge,st.width,st.height,st.depth),n.unbindTexture()}st.depthBuffer&&function(st){var Ge=r.get(st),hn=!0===st.isWebGLCubeRenderTarget;if(st.depthTexture){if(hn)throw new Error("target.depthTexture not supported in Cube render targets");!function(st,Ge){if(Ge&&Ge.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,st),!Ge.depthTexture||!Ge.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Ge.depthTexture).__webglTexture||Ge.depthTexture.image.width!==Ge.width||Ge.depthTexture.image.height!==Ge.height)&&(Ge.depthTexture.image.width=Ge.width,Ge.depthTexture.image.height=Ge.height,Ge.depthTexture.needsUpdate=!0),_t(Ge.depthTexture,0);var Ln=r.get(Ge.depthTexture).__webglTexture;if(Ge.depthTexture.format===kE)i.framebufferTexture2D(36160,36096,3553,Ln,0);else{if(Ge.depthTexture.format!==VT)throw new Error("Unknown depthTexture format");i.framebufferTexture2D(36160,33306,3553,Ln,0)}}(Ge.__webglFramebuffer,st)}else if(hn){Ge.__webglDepthbuffer=[];for(var Ln=0;Ln<6;Ln++)n.bindFramebuffer(36160,Ge.__webglFramebuffer[Ln]),Ge.__webglDepthbuffer[Ln]=i.createRenderbuffer(),bn(Ge.__webglDepthbuffer[Ln],st,!1)}else n.bindFramebuffer(36160,Ge.__webglFramebuffer),Ge.__webglDepthbuffer=i.createRenderbuffer(),bn(Ge.__webglDepthbuffer,st,!1);n.bindFramebuffer(36160,null)}(st)},this.updateRenderTargetMipmap=function(st){for(var Ge=se(st)||m,hn=!0===st.isWebGLMultipleRenderTargets?st.texture:[st.texture],Ln=0,Kn=hn.length;Ln<Kn;Ln++){var ar=hn[Ln];if(ve(ar,Ge)){var Mr=st.isWebGLCubeRenderTarget?34067:3553,Cr=r.get(ar).__webglTexture;n.bindTexture(Mr,Cr),me(Mr,ar,st.width,st.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(st){if(st.isWebGLMultisampleRenderTarget)if(m){var Ge=st.width,hn=st.height,Ln=16384;st.depthBuffer&&(Ln|=256),st.stencilBuffer&&(Ln|=1024);var Kn=r.get(st);n.bindFramebuffer(36008,Kn.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,Kn.__webglFramebuffer),i.blitFramebuffer(0,0,Ge,hn,0,0,Ge,hn,Ln,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,Kn.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(st,Ge){st&&st.isWebGLRenderTarget&&(!1===An&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),An=!0),st=st.texture),_t(st,Ge)},this.safeSetTextureCube=function(st,Ge){st&&st.isWebGLCubeRenderTarget&&(!1===Vr&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Vr=!0),st=st.texture),Sn(st,Ge)}}function jue(i,s,n){var r=n.isWebGL2;return{convert:function(o){var u;if(o===ug)return 5121;if(1017===o)return 32819;if(1018===o)return 32820;if(1019===o)return 33635;if(1010===o)return 5120;if(1011===o)return 5122;if(1012===o)return 5123;if(1013===o)return 5124;if(1014===o)return 5125;if(o===lg)return 5126;if(o===wE)return r?5131:null!==(u=s.get("OES_texture_half_float"))?u.HALF_FLOAT_OES:null;if(1021===o)return 6406;if(o===EE)return 6407;if(o===cc)return 6408;if(1024===o)return 6409;if(1025===o)return 6410;if(o===kE)return 6402;if(o===VT)return 34041;if(1028===o)return 6403;if(1029===o)return 36244;if(1030===o)return 33319;if(1031===o)return 33320;if(1032===o)return 36248;if(1033===o)return 36249;if(33776===o||33777===o||33778===o||33779===o){if(null===(u=s.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===o)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(null===(u=s.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===o)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return null!==(u=s.get("WEBGL_compressed_texture_etc1"))?u.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===o||37496===o)&&null!==(u=s.get("WEBGL_compressed_texture_etc"))){if(37492===o)return u.COMPRESSED_RGB8_ETC2;if(37496===o)return u.COMPRESSED_RGBA8_ETC2_EAC}return 37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o||37840===o||37841===o||37842===o||37843===o||37844===o||37845===o||37846===o||37847===o||37848===o||37849===o||37850===o||37851===o||37852===o||37853===o?null!==(u=s.get("WEBGL_compressed_texture_astc"))?o:null:36492===o?null!==(u=s.get("EXT_texture_compression_bptc"))?o:null:o===UT?r?34042:null!==(u=s.get("WEBGL_depth_texture"))?u.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}MU.prototype.isMeshDistanceMaterial=!0;var k8=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,M.Z)(this,n),(r=s.call(this)).cameras=a,r}return n}(hc);k8.prototype.isArrayCamera=!0;var e1=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Group",r}return n}(ws);e1.prototype.isGroup=!0;var Wue={type:"move"},IU=function(){function i(){(0,M.Z)(this,i),this._targetRay=null,this._grip=null,this._hand=null}return(0,R.Z)(i,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new e1,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new e1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ue,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ue),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new e1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ue,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ue),this._grip}},{key:"dispatchEvent",value:function(n){return null!==this._targetRay&&this._targetRay.dispatchEvent(n),null!==this._grip&&this._grip.dispatchEvent(n),null!==this._hand&&this._hand.dispatchEvent(n),this}},{key:"disconnect",value:function(n){return this.dispatchEvent({type:"disconnected",data:n}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(n,r,a){var o=null,u=null,l=null,f=this._targetRay,m=this._grip,b=this._hand;if(n&&"visible-blurred"!==r.session.visibilityState)if(null!==f&&null!==(o=r.getPose(n.targetRaySpace,a))&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(Wue)),b&&n.hand){l=!0;var C,w=(0,Ve.Z)(n.hand.values());try{for(w.s();!(C=w.n()).done;){var T=C.value,I=r.getJointPose(T,a);if(void 0===b.joints[T.jointName]){var Z=new e1;Z.matrixAutoUpdate=!1,Z.visible=!1,b.joints[T.jointName]=Z,b.add(Z)}var Y=b.joints[T.jointName];null!==I&&(Y.matrix.fromArray(I.transform.matrix),Y.matrix.decompose(Y.position,Y.rotation,Y.scale),Y.jointRadius=I.radius),Y.visible=null!==I}}catch(me){w.e(me)}finally{w.f()}var se=b.joints["index-finger-tip"].position.distanceTo(b.joints["thumb-tip"].position);b.inputState.pinching&&se>.025?(b.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!b.inputState.pinching&&se<=.015&&(b.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else null!==m&&n.gripSpace&&null!==(u=r.getPose(n.gripSpace,a))&&(m.matrix.fromArray(u.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),u.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(u.linearVelocity)):m.hasLinearVelocity=!1,u.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(u.angularVelocity)):m.hasAngularVelocity=!1);return null!==f&&(f.visible=null!==o),null!==m&&(m.visible=null!==u),null!==b&&(b.visible=null!==l),this}}]),i}(),que=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;(0,M.Z)(this,n),o=s.call(this);var u=(0,Ja.Z)(o),l=r.state,f=null,m=1,b=null,w="local-floor",C=null,T=null,I=null,Z=null,Y=null,V=!1,W=null,se=null,fe=null,ve=null,me=null,pe=null,ke=[],je=new Map,qe=new hc;qe.layers.enable(1),qe.viewport=new bs;var Ze=new hc;Ze.layers.enable(2),Ze.viewport=new bs;var ct=[qe,Ze],rt=new k8;rt.layers.enable(1),rt.layers.enable(2);var ht=null,It=null;function _t(ft){var bn=je.get(ft.inputSource);bn&&bn.dispatchEvent({type:ft.type,data:ft.inputSource})}function Zt(){je.forEach(function(ft,bn){ft.disconnect(bn)}),je.clear(),ht=null,It=null,l.bindXRFramebuffer(null),r.setRenderTarget(r.getRenderTarget()),I&&a.deleteFramebuffer(I),W&&a.deleteFramebuffer(W),se&&a.deleteRenderbuffer(se),fe&&a.deleteRenderbuffer(fe),I=null,W=null,se=null,fe=null,Y=null,Z=null,T=null,f=null,Qn.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}function ln(ft){for(var bn=f.inputSources,Jn=0;Jn<ke.length;Jn++)je.set(bn[Jn],ke[Jn]);for(var _n=0;_n<ft.removed.length;_n++){var Yn=ft.removed[_n],Gn=je.get(Yn);Gn&&(Gn.dispatchEvent({type:"disconnected",data:Yn}),je.delete(Yn))}for(var Vn=0;Vn<ft.added.length;Vn++){var en=ft.added[Vn],yn=je.get(en);yn&&yn.dispatchEvent({type:"connected",data:en})}}o.cameraAutoUpdate=!0,o.enabled=!1,o.isPresenting=!1,o.getController=function(ft){var bn=ke[ft];return void 0===bn&&(bn=new IU,ke[ft]=bn),bn.getTargetRaySpace()},o.getControllerGrip=function(ft){var bn=ke[ft];return void 0===bn&&(bn=new IU,ke[ft]=bn),bn.getGripSpace()},o.getHand=function(ft){var bn=ke[ft];return void 0===bn&&(bn=new IU,ke[ft]=bn),bn.getHandSpace()},o.setFramebufferScaleFactor=function(ft){m=ft,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},o.setReferenceSpaceType=function(ft){w=ft,!0===u.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},o.getReferenceSpace=function(){return b},o.getBaseLayer=function(){return null!==Z?Z:Y},o.getBinding=function(){return T},o.getFrame=function(){return ve},o.getSession=function(){return f},o.setSession=function(){var ft=(0,Qt.Z)(Ke().mark(function bn(Jn){var _n,Vn,en;return Ke().wrap(function(An){for(;;)switch(An.prev=An.next){case 0:if(null===(f=Jn)){An.next=22;break}if(f.addEventListener("select",_t),f.addEventListener("selectstart",_t),f.addEventListener("selectend",_t),f.addEventListener("squeeze",_t),f.addEventListener("squeezestart",_t),f.addEventListener("squeezeend",_t),f.addEventListener("end",Zt),f.addEventListener("inputsourceschange",ln),!0===(_n=a.getContextAttributes()).xrCompatible){An.next=14;break}return An.next=14,a.makeXRCompatible();case 14:return void 0===f.renderState.layers?(Y=new XRWebGLLayer(f,a,{antialias:_n.antialias,alpha:_n.alpha,depth:_n.depth,stencil:_n.stencil,framebufferScaleFactor:m}),f.updateRenderState({baseLayer:Y})):a instanceof WebGLRenderingContext?(Y=new XRWebGLLayer(f,a,{antialias:!0,alpha:_n.alpha,depth:_n.depth,stencil:_n.stencil,framebufferScaleFactor:m}),f.updateRenderState({layers:[Y]})):(V=_n.antialias,Vn=null,_n.depth&&(pe=256,_n.stencil&&(pe|=1024),me=_n.stencil?33306:36096,Vn=_n.stencil?35056:33190),en={colorFormat:_n.alpha?32856:32849,depthFormat:Vn,scaleFactor:m},T=new XRWebGLBinding(f,a),Z=T.createProjectionLayer(en),I=a.createFramebuffer(),f.updateRenderState({layers:[Z]}),V&&(W=a.createFramebuffer(),se=a.createRenderbuffer(),a.bindRenderbuffer(36161,se),a.renderbufferStorageMultisample(36161,4,32856,Z.textureWidth,Z.textureHeight),l.bindFramebuffer(36160,W),a.framebufferRenderbuffer(36160,36064,36161,se),a.bindRenderbuffer(36161,null),null!==Vn&&(fe=a.createRenderbuffer(),a.bindRenderbuffer(36161,fe),a.renderbufferStorageMultisample(36161,4,Vn,Z.textureWidth,Z.textureHeight),a.framebufferRenderbuffer(36160,me,36161,fe),a.bindRenderbuffer(36161,null)),l.bindFramebuffer(36160,null))),An.next=17,f.requestReferenceSpace(w);case 17:b=An.sent,Qn.setContext(f),Qn.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"});case 22:case"end":return An.stop()}},bn)}));return function(bn){return ft.apply(this,arguments)}}();var Sn=new Ue,kn=new Ue;function gn(ft,bn){null===bn?ft.matrixWorld.copy(ft.matrix):ft.matrixWorld.multiplyMatrices(bn.matrixWorld,ft.matrix),ft.matrixWorldInverse.copy(ft.matrixWorld).invert()}o.updateCamera=function(ft){if(null!==f){rt.near=Ze.near=qe.near=ft.near,rt.far=Ze.far=qe.far=ft.far,(ht!==rt.near||It!==rt.far)&&(f.updateRenderState({depthNear:rt.near,depthFar:rt.far}),ht=rt.near,It=rt.far);var bn=ft.parent,Jn=rt.cameras;gn(rt,bn);for(var _n=0;_n<Jn.length;_n++)gn(Jn[_n],bn);rt.matrixWorld.decompose(rt.position,rt.quaternion,rt.scale),ft.position.copy(rt.position),ft.quaternion.copy(rt.quaternion),ft.scale.copy(rt.scale),ft.matrix.copy(rt.matrix),ft.matrixWorld.copy(rt.matrixWorld);for(var Yn=ft.children,Gn=0,Vn=Yn.length;Gn<Vn;Gn++)Yn[Gn].updateMatrixWorld(!0);2===Jn.length?function(ft,bn,Jn){Sn.setFromMatrixPosition(bn.matrixWorld),kn.setFromMatrixPosition(Jn.matrixWorld);var _n=Sn.distanceTo(kn),Yn=bn.projectionMatrix.elements,Gn=Jn.projectionMatrix.elements,Vn=Yn[14]/(Yn[10]-1),en=Yn[14]/(Yn[10]+1),yn=(Yn[9]+1)/Yn[5],An=(Yn[9]-1)/Yn[5],Vr=(Yn[8]-1)/Yn[0],Pi=(Gn[8]+1)/Gn[0],ba=Vn*Vr,st=Vn*Pi,Ge=_n/(-Vr+Pi),hn=Ge*-Vr;bn.matrixWorld.decompose(ft.position,ft.quaternion,ft.scale),ft.translateX(hn),ft.translateZ(Ge),ft.matrixWorld.compose(ft.position,ft.quaternion,ft.scale),ft.matrixWorldInverse.copy(ft.matrixWorld).invert();var Ln=Vn+Ge,Kn=en+Ge;ft.projectionMatrix.makePerspective(ba-hn,st+(_n-hn),yn*en/Kn*Ln,An*en/Kn*Ln,Ln,Kn)}(rt,qe,Ze):rt.projectionMatrix.copy(qe.projectionMatrix)}},o.getCamera=function(){return rt},o.getFoveation=function(){return null!==Z?Z.fixedFoveation:null!==Y?Y.fixedFoveation:void 0},o.setFoveation=function(ft){null!==Z&&(Z.fixedFoveation=ft),null!==Y&&void 0!==Y.fixedFoveation&&(Y.fixedFoveation=ft)};var Hn=null,Qn=new Hj;return Qn.setAnimationLoop(function(ft,bn){if(C=bn.getViewerPose(b),ve=bn,null!==C){var Jn=C.views;null!==Y&&l.bindXRFramebuffer(Y.framebuffer);var _n=!1;Jn.length!==rt.cameras.length&&(rt.cameras.length=0,_n=!0);for(var Yn=0;Yn<Jn.length;Yn++){var Gn=Jn[Yn],Vn=null;if(null!==Y)Vn=Y.getViewport(Gn);else{var en=T.getViewSubImage(Z,Gn);l.bindXRFramebuffer(I),void 0!==en.depthStencilTexture&&a.framebufferTexture2D(36160,me,3553,en.depthStencilTexture,0),a.framebufferTexture2D(36160,36064,3553,en.colorTexture,0),Vn=en.viewport}var yn=ct[Yn];yn.matrix.fromArray(Gn.transform.matrix),yn.projectionMatrix.fromArray(Gn.projectionMatrix),yn.viewport.set(Vn.x,Vn.y,Vn.width,Vn.height),0===Yn&&rt.matrix.copy(yn.matrix),!0===_n&&rt.cameras.push(yn)}V&&(l.bindXRFramebuffer(W),null!==pe&&a.clear(pe))}for(var An=f.inputSources,Vr=0;Vr<ke.length;Vr++)ke[Vr].update(An[Vr],bn,b);if(Hn&&Hn(ft,bn),V){var st=Z.textureWidth,Ge=Z.textureHeight;l.bindFramebuffer(36008,W),l.bindFramebuffer(36009,I),a.invalidateFramebuffer(36008,[me]),a.invalidateFramebuffer(36009,[me]),a.blitFramebuffer(0,0,st,Ge,0,0,st,Ge,16384,9728),a.invalidateFramebuffer(36008,[36064]),l.bindFramebuffer(36008,null),l.bindFramebuffer(36009,null),l.bindFramebuffer(36160,W)}ve=null}),o.setAnimationLoop=function(ft){Hn=ft},o.dispose=function(){},o}return n}(cg);function Yue(i){function r(V,W){V.opacity.value=W.opacity,W.color&&V.diffuse.value.copy(W.color),W.emissive&&V.emissive.value.copy(W.emissive).multiplyScalar(W.emissiveIntensity),W.map&&(V.map.value=W.map),W.alphaMap&&(V.alphaMap.value=W.alphaMap),W.specularMap&&(V.specularMap.value=W.specularMap),W.alphaTest>0&&(V.alphaTest.value=W.alphaTest);var ve,me,se=i.get(W).envMap;if(se){V.envMap.value=se,V.flipEnvMap.value=se.isCubeTexture&&!1===se.isRenderTargetTexture?-1:1,V.reflectivity.value=W.reflectivity,V.ior.value=W.ior,V.refractionRatio.value=W.refractionRatio;var fe=i.get(se).__maxMipLevel;void 0!==fe&&(V.maxMipLevel.value=fe)}W.lightMap&&(V.lightMap.value=W.lightMap,V.lightMapIntensity.value=W.lightMapIntensity),W.aoMap&&(V.aoMap.value=W.aoMap,V.aoMapIntensity.value=W.aoMapIntensity),W.map?ve=W.map:W.specularMap?ve=W.specularMap:W.displacementMap?ve=W.displacementMap:W.normalMap?ve=W.normalMap:W.bumpMap?ve=W.bumpMap:W.roughnessMap?ve=W.roughnessMap:W.metalnessMap?ve=W.metalnessMap:W.alphaMap?ve=W.alphaMap:W.emissiveMap?ve=W.emissiveMap:W.clearcoatMap?ve=W.clearcoatMap:W.clearcoatNormalMap?ve=W.clearcoatNormalMap:W.clearcoatRoughnessMap?ve=W.clearcoatRoughnessMap:W.specularIntensityMap?ve=W.specularIntensityMap:W.specularTintMap?ve=W.specularTintMap:W.transmissionMap?ve=W.transmissionMap:W.thicknessMap&&(ve=W.thicknessMap),void 0!==ve&&(ve.isWebGLRenderTarget&&(ve=ve.texture),!0===ve.matrixAutoUpdate&&ve.updateMatrix(),V.uvTransform.value.copy(ve.matrix)),W.aoMap?me=W.aoMap:W.lightMap&&(me=W.lightMap),void 0!==me&&(me.isWebGLRenderTarget&&(me=me.texture),!0===me.matrixAutoUpdate&&me.updateMatrix(),V.uv2Transform.value.copy(me.matrix))}function w(V,W){V.roughness.value=W.roughness,V.metalness.value=W.metalness,W.roughnessMap&&(V.roughnessMap.value=W.roughnessMap),W.metalnessMap&&(V.metalnessMap.value=W.metalnessMap),W.emissiveMap&&(V.emissiveMap.value=W.emissiveMap),W.bumpMap&&(V.bumpMap.value=W.bumpMap,V.bumpScale.value=W.bumpScale,1===W.side&&(V.bumpScale.value*=-1)),W.normalMap&&(V.normalMap.value=W.normalMap,V.normalScale.value.copy(W.normalScale),1===W.side&&V.normalScale.value.negate()),W.displacementMap&&(V.displacementMap.value=W.displacementMap,V.displacementScale.value=W.displacementScale,V.displacementBias.value=W.displacementBias),i.get(W).envMap&&(V.envMapIntensity.value=W.envMapIntensity)}return{refreshFogUniforms:function(V,W){V.fogColor.value.copy(W.color),W.isFog?(V.fogNear.value=W.near,V.fogFar.value=W.far):W.isFogExp2&&(V.fogDensity.value=W.density)},refreshMaterialUniforms:function(V,W,se,fe,ve){W.isMeshBasicMaterial?r(V,W):W.isMeshLambertMaterial?(r(V,W),function(V,W){W.emissiveMap&&(V.emissiveMap.value=W.emissiveMap)}(V,W)):W.isMeshToonMaterial?(r(V,W),function(V,W){W.gradientMap&&(V.gradientMap.value=W.gradientMap),W.emissiveMap&&(V.emissiveMap.value=W.emissiveMap),W.bumpMap&&(V.bumpMap.value=W.bumpMap,V.bumpScale.value=W.bumpScale,1===W.side&&(V.bumpScale.value*=-1)),W.normalMap&&(V.normalMap.value=W.normalMap,V.normalScale.value.copy(W.normalScale),1===W.side&&V.normalScale.value.negate()),W.displacementMap&&(V.displacementMap.value=W.displacementMap,V.displacementScale.value=W.displacementScale,V.displacementBias.value=W.displacementBias)}(V,W)):W.isMeshPhongMaterial?(r(V,W),function(V,W){V.specular.value.copy(W.specular),V.shininess.value=Math.max(W.shininess,1e-4),W.emissiveMap&&(V.emissiveMap.value=W.emissiveMap),W.bumpMap&&(V.bumpMap.value=W.bumpMap,V.bumpScale.value=W.bumpScale,1===W.side&&(V.bumpScale.value*=-1)),W.normalMap&&(V.normalMap.value=W.normalMap,V.normalScale.value.copy(W.normalScale),1===W.side&&V.normalScale.value.negate()),W.displacementMap&&(V.displacementMap.value=W.displacementMap,V.displacementScale.value=W.displacementScale,V.displacementBias.value=W.displacementBias)}(V,W)):W.isMeshStandardMaterial?(r(V,W),W.isMeshPhysicalMaterial?function(V,W,se){w(V,W),V.ior.value=W.ior,W.sheen>0&&(V.sheenTint.value.copy(W.sheenTint).multiplyScalar(W.sheen),V.sheenRoughness.value=W.sheenRoughness),W.clearcoat>0&&(V.clearcoat.value=W.clearcoat,V.clearcoatRoughness.value=W.clearcoatRoughness,W.clearcoatMap&&(V.clearcoatMap.value=W.clearcoatMap),W.clearcoatRoughnessMap&&(V.clearcoatRoughnessMap.value=W.clearcoatRoughnessMap),W.clearcoatNormalMap&&(V.clearcoatNormalScale.value.copy(W.clearcoatNormalScale),V.clearcoatNormalMap.value=W.clearcoatNormalMap,1===W.side&&V.clearcoatNormalScale.value.negate())),W.transmission>0&&(V.transmission.value=W.transmission,V.transmissionSamplerMap.value=se.texture,V.transmissionSamplerSize.value.set(se.width,se.height),W.transmissionMap&&(V.transmissionMap.value=W.transmissionMap),V.thickness.value=W.thickness,W.thicknessMap&&(V.thicknessMap.value=W.thicknessMap),V.attenuationDistance.value=W.attenuationDistance,V.attenuationTint.value.copy(W.attenuationTint)),V.specularIntensity.value=W.specularIntensity,V.specularTint.value.copy(W.specularTint),W.specularIntensityMap&&(V.specularIntensityMap.value=W.specularIntensityMap),W.specularTintMap&&(V.specularTintMap.value=W.specularTintMap)}(V,W,ve):w(V,W)):W.isMeshMatcapMaterial?(r(V,W),function(V,W){W.matcap&&(V.matcap.value=W.matcap),W.bumpMap&&(V.bumpMap.value=W.bumpMap,V.bumpScale.value=W.bumpScale,1===W.side&&(V.bumpScale.value*=-1)),W.normalMap&&(V.normalMap.value=W.normalMap,V.normalScale.value.copy(W.normalScale),1===W.side&&V.normalScale.value.negate()),W.displacementMap&&(V.displacementMap.value=W.displacementMap,V.displacementScale.value=W.displacementScale,V.displacementBias.value=W.displacementBias)}(V,W)):W.isMeshDepthMaterial?(r(V,W),function(V,W){W.displacementMap&&(V.displacementMap.value=W.displacementMap,V.displacementScale.value=W.displacementScale,V.displacementBias.value=W.displacementBias)}(V,W)):W.isMeshDistanceMaterial?(r(V,W),function(V,W){W.displacementMap&&(V.displacementMap.value=W.displacementMap,V.displacementScale.value=W.displacementScale,V.displacementBias.value=W.displacementBias),V.referencePosition.value.copy(W.referencePosition),V.nearDistance.value=W.nearDistance,V.farDistance.value=W.farDistance}(V,W)):W.isMeshNormalMaterial?(r(V,W),function(V,W){W.bumpMap&&(V.bumpMap.value=W.bumpMap,V.bumpScale.value=W.bumpScale,1===W.side&&(V.bumpScale.value*=-1)),W.normalMap&&(V.normalMap.value=W.normalMap,V.normalScale.value.copy(W.normalScale),1===W.side&&V.normalScale.value.negate()),W.displacementMap&&(V.displacementMap.value=W.displacementMap,V.displacementScale.value=W.displacementScale,V.displacementBias.value=W.displacementBias)}(V,W)):W.isLineBasicMaterial?(function(V,W){V.diffuse.value.copy(W.color),V.opacity.value=W.opacity}(V,W),W.isLineDashedMaterial&&function(V,W){V.dashSize.value=W.dashSize,V.totalSize.value=W.dashSize+W.gapSize,V.scale.value=W.scale}(V,W)):W.isPointsMaterial?function(V,W,se,fe){var ve;V.diffuse.value.copy(W.color),V.opacity.value=W.opacity,V.size.value=W.size*se,V.scale.value=.5*fe,W.map&&(V.map.value=W.map),W.alphaMap&&(V.alphaMap.value=W.alphaMap),W.alphaTest>0&&(V.alphaTest.value=W.alphaTest),W.map?ve=W.map:W.alphaMap&&(ve=W.alphaMap),void 0!==ve&&(!0===ve.matrixAutoUpdate&&ve.updateMatrix(),V.uvTransform.value.copy(ve.matrix))}(V,W,se,fe):W.isSpriteMaterial?function(V,W){var se;V.diffuse.value.copy(W.color),V.opacity.value=W.opacity,V.rotation.value=W.rotation,W.map&&(V.map.value=W.map),W.alphaMap&&(V.alphaMap.value=W.alphaMap),W.alphaTest>0&&(V.alphaTest.value=W.alphaTest),W.map?se=W.map:W.alphaMap&&(se=W.alphaMap),void 0!==se&&(!0===se.matrixAutoUpdate&&se.updateMatrix(),V.uvTransform.value.copy(se.matrix))}(V,W):W.isShadowMaterial?(V.color.value.copy(W.color),V.opacity.value=W.opacity):W.isShaderMaterial&&(W.uniformsNeedUpdate=!1)}}}function Kue(){var i=ER("canvas");return i.style.display="block",i}function us(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=void 0!==i.canvas?i.canvas:Kue(),n=void 0!==i.context?i.context:null,r=void 0!==i.alpha&&i.alpha,a=void 0===i.depth||i.depth,o=void 0===i.stencil||i.stencil,u=void 0!==i.antialias&&i.antialias,l=void 0===i.premultipliedAlpha||i.premultipliedAlpha,f=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,m=void 0!==i.powerPreference?i.powerPreference:"default",b=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat,w=null,C=null,T=[],I=[];this.domElement=s,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Fl,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var Z=this,Y=!1,V=0,W=0,se=null,fe=-1,ve=null,me=new bs,pe=new bs,ke=null,je=s.width,qe=s.height,Ze=1,ct=null,rt=null,ht=new bs(0,0,je,qe),It=new bs(0,0,je,qe),_t=!1,Zt=[],ln=new GR,Sn=!1,kn=!1,dn=null,gn=new Wr,Hn=new Ue,Ur={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Qn(){return null===se?Ze:1}var Yn,Gn,Vn,en,yn,An,Vr,Pi,ba,st,Ge,hn,Ln,Kn,ar,Mr,Cr,hi,Ci,na,xt,tr,yr,ft=n;function bn(ze,zt){for(var Wt=0;Wt<ze.length;Wt++){var fn=s.getContext(ze[Wt],zt);if(null!==fn)return fn}return null}try{var Jn={alpha:r,depth:a,stencil:o,antialias:u,premultipliedAlpha:l,preserveDrawingBuffer:f,powerPreference:m,failIfMajorPerformanceCaveat:b};if(s.addEventListener("webglcontextlost",er,!1),s.addEventListener("webglcontextrestored",Dt,!1),null===ft){var _n=["webgl2","webgl","experimental-webgl"];if(!0===Z.isWebGL1Renderer&&_n.shift(),null===(ft=bn(_n,Jn)))throw bn(_n)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ft.getShaderPrecisionFormat&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ze){throw console.error("THREE.WebGLRenderer: "+ze.message),ze}function di(){Yn=new yoe(ft),Gn=new coe(ft,Yn,i),Yn.init(Gn),tr=new jue(ft,Yn,Gn),Vn=new Hue(ft,Yn,Gn),Zt[0]=1029,en=new woe(ft),yn=new Pue,An=new Gue(ft,Yn,Vn,yn,Gn,tr,en),Vr=new foe(Z),Pi=new goe(Z),ba=new Rie(ft,Gn),yr=new uoe(ft,Yn,ba,Gn),st=new _oe(ft,ba,en,yr),Ge=new Doe(ft,st,ba,en),Ci=new Coe(ft,Gn,An),Mr=new hoe(yn),hn=new Iue(Z,Vr,Pi,Yn,Gn,yr,Mr),Ln=new Yue(yn),Kn=new Rue(yn),ar=new Uue(Yn,Gn),hi=new ooe(Z,Vr,Vn,Ge,l),Cr=new E8(Z,Ge,Gn),na=new loe(ft,Yn,en,Gn),xt=new boe(ft,Yn,en,Gn),en.programs=hn.programs,Z.capabilities=Gn,Z.extensions=Yn,Z.properties=yn,Z.renderLists=Kn,Z.shadowMap=Cr,Z.state=Vn,Z.info=en}di();var qr=new que(Z,ft);function er(ze){ze.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Y=!0}function Dt(){console.log("THREE.WebGLRenderer: Context Restored."),Y=!1;var ze=en.autoReset,zt=Cr.enabled,Wt=Cr.autoUpdate,jt=Cr.needsUpdate,fn=Cr.type;di(),en.autoReset=ze,Cr.enabled=zt,Cr.autoUpdate=Wt,Cr.needsUpdate=jt,Cr.type=fn}function nr(ze){var zt=ze.target;zt.removeEventListener("dispose",nr),Gi(zt)}function Gi(ze){Fi(ze),yn.remove(ze)}function Fi(ze){var zt=yn.get(ze).programs;void 0!==zt&&zt.forEach(function(Wt){hn.releaseProgram(Wt)})}function _i(ze,zt){ze.render(function(Wt){Z.renderBufferImmediate(Wt,zt)})}this.xr=qr,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){var ze=Yn.get("WEBGL_lose_context");ze&&ze.loseContext()},this.forceContextRestore=function(){var ze=Yn.get("WEBGL_lose_context");ze&&ze.restoreContext()},this.getPixelRatio=function(){return Ze},this.setPixelRatio=function(ze){void 0!==ze&&(Ze=ze,this.setSize(je,qe,!1))},this.getSize=function(ze){return ze.set(je,qe)},this.setSize=function(ze,zt,Wt){qr.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(je=ze,qe=zt,s.width=Math.floor(ze*Ze),s.height=Math.floor(zt*Ze),!1!==Wt&&(s.style.width=ze+"px",s.style.height=zt+"px"),this.setViewport(0,0,ze,zt))},this.getDrawingBufferSize=function(ze){return ze.set(je*Ze,qe*Ze).floor()},this.setDrawingBufferSize=function(ze,zt,Wt){je=ze,qe=zt,Ze=Wt,s.width=Math.floor(ze*Wt),s.height=Math.floor(zt*Wt),this.setViewport(0,0,ze,zt)},this.getCurrentViewport=function(ze){return ze.copy(me)},this.getViewport=function(ze){return ze.copy(ht)},this.setViewport=function(ze,zt,Wt,jt){ze.isVector4?ht.set(ze.x,ze.y,ze.z,ze.w):ht.set(ze,zt,Wt,jt),Vn.viewport(me.copy(ht).multiplyScalar(Ze).floor())},this.getScissor=function(ze){return ze.copy(It)},this.setScissor=function(ze,zt,Wt,jt){ze.isVector4?It.set(ze.x,ze.y,ze.z,ze.w):It.set(ze,zt,Wt,jt),Vn.scissor(pe.copy(It).multiplyScalar(Ze).floor())},this.getScissorTest=function(){return _t},this.setScissorTest=function(ze){Vn.setScissorTest(_t=ze)},this.setOpaqueSort=function(ze){ct=ze},this.setTransparentSort=function(ze){rt=ze},this.getClearColor=function(ze){return ze.copy(hi.getClearColor())},this.setClearColor=function(){hi.setClearColor.apply(hi,arguments)},this.getClearAlpha=function(){return hi.getClearAlpha()},this.setClearAlpha=function(){hi.setClearAlpha.apply(hi,arguments)},this.clear=function(ze,zt,Wt){var jt=0;(void 0===ze||ze)&&(jt|=16384),(void 0===zt||zt)&&(jt|=256),(void 0===Wt||Wt)&&(jt|=1024),ft.clear(jt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){s.removeEventListener("webglcontextlost",er,!1),s.removeEventListener("webglcontextrestored",Dt,!1),Kn.dispose(),ar.dispose(),yn.dispose(),Vr.dispose(),Pi.dispose(),Ge.dispose(),yr.dispose(),qr.dispose(),qr.removeEventListener("sessionstart",vl),qr.removeEventListener("sessionend",Tu),dn&&(dn.dispose(),dn=null),Go.stop()},this.renderBufferImmediate=function(ze,zt){yr.initAttributes();var Wt=yn.get(ze);ze.hasPositions&&!Wt.position&&(Wt.position=ft.createBuffer()),ze.hasNormals&&!Wt.normal&&(Wt.normal=ft.createBuffer()),ze.hasUvs&&!Wt.uv&&(Wt.uv=ft.createBuffer()),ze.hasColors&&!Wt.color&&(Wt.color=ft.createBuffer());var jt=zt.getAttributes();ze.hasPositions&&(ft.bindBuffer(34962,Wt.position),ft.bufferData(34962,ze.positionArray,35048),yr.enableAttribute(jt.position.location),ft.vertexAttribPointer(jt.position.location,3,5126,!1,0,0)),ze.hasNormals&&(ft.bindBuffer(34962,Wt.normal),ft.bufferData(34962,ze.normalArray,35048),yr.enableAttribute(jt.normal.location),ft.vertexAttribPointer(jt.normal.location,3,5126,!1,0,0)),ze.hasUvs&&(ft.bindBuffer(34962,Wt.uv),ft.bufferData(34962,ze.uvArray,35048),yr.enableAttribute(jt.uv.location),ft.vertexAttribPointer(jt.uv.location,2,5126,!1,0,0)),ze.hasColors&&(ft.bindBuffer(34962,Wt.color),ft.bufferData(34962,ze.colorArray,35048),yr.enableAttribute(jt.color.location),ft.vertexAttribPointer(jt.color.location,3,5126,!1,0,0)),yr.disableUnusedAttributes(),ft.drawArrays(4,0,ze.count),ze.count=0},this.renderBufferDirect=function(ze,zt,Wt,jt,fn,zr){null===zt&&(zt=Ur);var ti=fn.isMesh&&fn.matrixWorld.determinant()<0,ra=kO(ze,zt,Wt,jt,fn);Vn.setMaterial(jt,ti);var Ni=Wt.index,Ki=Wt.attributes.position;if(null===Ni){if(void 0===Ki||0===Ki.count)return}else if(0===Ni.count)return;var sr=1;!0===jt.wireframe&&(Ni=st.getWireframeAttribute(Wt),sr=2),yr.setup(fn,jt,ra,Wt,Ni);var _r,Hr=na;null!==Ni&&(_r=ba.get(Ni),(Hr=xt).setIndex(_r));var Qi=null!==Ni?Ni.count:Ki.count,br=Wt.drawRange.start*sr,xa=Wt.drawRange.count*sr,ns=null!==zr?zr.start*sr:0,ga=null!==zr?zr.count*sr:1/0,Fs=Math.max(br,ns),Wu=Math.min(Qi,br+xa,ns+ga)-1,hu=Math.max(0,Wu-Fs+1);if(0!==hu){if(fn.isMesh)!0===jt.wireframe?(Vn.setLineWidth(jt.wireframeLinewidth*Qn()),Hr.setMode(1)):Hr.setMode(4);else if(fn.isLine){var Zf=jt.linewidth;void 0===Zf&&(Zf=1),Vn.setLineWidth(Zf*Qn()),Hr.setMode(fn.isLineSegments?1:fn.isLineLoop?2:3)}else fn.isPoints?Hr.setMode(0):fn.isSprite&&Hr.setMode(4);if(fn.isInstancedMesh)Hr.renderInstances(Fs,hu,fn.count);else if(Wt.isInstancedBufferGeometry){var fo=Math.min(Wt.instanceCount,Wt._maxInstanceCount);Hr.renderInstances(Fs,hu,fo)}else Hr.render(Fs,hu)}},this.compile=function(ze,zt){(C=ar.get(ze)).init(),I.push(C),ze.traverseVisible(function(Wt){Wt.isLight&&Wt.layers.test(zt.layers)&&(C.pushLight(Wt),Wt.castShadow&&C.pushShadow(Wt))}),C.setupLights(Z.physicallyCorrectLights),ze.traverse(function(Wt){var jt=Wt.material;if(jt)if(Array.isArray(jt))for(var fn=0;fn<jt.length;fn++)hk(jt[fn],ze,Wt);else hk(jt,ze,Wt)}),I.pop(),C=null};var ts=null;function ho(ze){ts&&ts(ze)}function vl(){Go.stop()}function Tu(){Go.start()}var Go=new Hj;function w1(ze,zt,Wt,jt){if(!1!==ze.visible){if(ze.layers.test(zt.layers))if(ze.isGroup)Wt=ze.renderOrder;else if(ze.isLOD)!0===ze.autoUpdate&&ze.update(zt);else if(ze.isLight)C.pushLight(ze),ze.castShadow&&C.pushShadow(ze);else if(ze.isSprite){if(!ze.frustumCulled||ln.intersectsSprite(ze)){jt&&Hn.setFromMatrixPosition(ze.matrixWorld).applyMatrix4(gn);var zr=Ge.update(ze),ti=ze.material;ti.visible&&w.push(ze,zr,ti,Wt,Hn.z,null)}}else if(ze.isImmediateRenderObject)jt&&Hn.setFromMatrixPosition(ze.matrixWorld).applyMatrix4(gn),w.push(ze,null,ze.material,Wt,Hn.z,null);else if((ze.isMesh||ze.isLine||ze.isPoints)&&(ze.isSkinnedMesh&&ze.skeleton.frame!==en.render.frame&&(ze.skeleton.update(),ze.skeleton.frame=en.render.frame),!ze.frustumCulled||ln.intersectsObject(ze))){jt&&Hn.setFromMatrixPosition(ze.matrixWorld).applyMatrix4(gn);var ra=Ge.update(ze),Ni=ze.material;if(Array.isArray(Ni))for(var Ki=ra.groups,sr=0,_r=Ki.length;sr<_r;sr++){var Hr=Ki[sr],Qi=Ni[Hr.materialIndex];Qi&&Qi.visible&&w.push(ze,ra,Qi,Wt,Hn.z,Hr)}else Ni.visible&&w.push(ze,ra,Ni,Wt,Hn.z,null)}for(var br=ze.children,xa=0,ns=br.length;xa<ns;xa++)w1(br[xa],zt,Wt,jt)}}function ck(ze,zt,Wt,jt){var fn=ze.opaque,zr=ze.transmissive,ti=ze.transparent;C.setupLightsView(Wt),zr.length>0&&EO(fn,zt,Wt),jt&&Vn.viewport(me.copy(jt)),fn.length>0&&lv(fn,zt,Wt),zr.length>0&&lv(zr,zt,Wt),ti.length>0&&lv(ti,zt,Wt)}function EO(ze,zt,Wt){null===dn&&(dn=new(!0===u&&!0===Gn.isWebGL2?Mj:Xd)(1024,1024,{generateMipmaps:!0,type:null!==tr.convert(wE)?wE:ug,minFilter:BT,magFilter:Au,wrapS:xc,wrapT:xc}));var zr=Z.getRenderTarget();Z.setRenderTarget(dn),Z.clear();var ti=Z.toneMapping;Z.toneMapping=0,lv(ze,zt,Wt),Z.toneMapping=ti,An.updateMultisampleRenderTarget(dn),An.updateRenderTargetMipmap(dn),Z.setRenderTarget(zr)}function lv(ze,zt,Wt){for(var jt=!0===zt.isScene?zt.overrideMaterial:null,fn=0,zr=ze.length;fn<zr;fn++){var ti=ze[fn],ra=ti.object,Ni=ti.geometry,Ki=null===jt?ti.material:jt,sr=ti.group;ra.layers.test(Wt.layers)&&CV(ra,zt,Wt,Ni,Ki,sr)}}function CV(ze,zt,Wt,jt,fn,zr){if(ze.onBeforeRender(Z,zt,Wt,jt,fn,zr),ze.modelViewMatrix.multiplyMatrices(Wt.matrixWorldInverse,ze.matrixWorld),ze.normalMatrix.getNormalMatrix(ze.modelViewMatrix),fn.onBeforeRender(Z,zt,Wt,jt,ze,zr),ze.isImmediateRenderObject){var ti=kO(Wt,zt,jt,fn,ze);Vn.setMaterial(fn),yr.reset(),_i(ze,ti)}else!0===fn.transparent&&2===fn.side?(fn.side=1,fn.needsUpdate=!0,Z.renderBufferDirect(Wt,zt,jt,fn,ze,zr),fn.side=0,fn.needsUpdate=!0,Z.renderBufferDirect(Wt,zt,jt,fn,ze,zr),fn.side=2):Z.renderBufferDirect(Wt,zt,jt,fn,ze,zr);ze.onAfterRender(Z,zt,Wt,jt,fn,zr)}function hk(ze,zt,Wt){!0!==zt.isScene&&(zt=Ur);var jt=yn.get(ze),fn=C.state.lights,ti=fn.state.version,ra=hn.getParameters(ze,fn.state,C.state.shadowsArray,zt,Wt),Ni=hn.getProgramCacheKey(ra),Ki=jt.programs;jt.environment=ze.isMeshStandardMaterial?zt.environment:null,jt.fog=zt.fog,jt.envMap=(ze.isMeshStandardMaterial?Pi:Vr).get(ze.envMap||jt.environment),void 0===Ki&&(ze.addEventListener("dispose",nr),Ki=new Map,jt.programs=Ki);var sr=Ki.get(Ni);if(void 0!==sr){if(jt.currentProgram===sr&&jt.lightsStateVersion===ti)return a0(ze,ra),sr}else ra.uniforms=hn.getUniforms(ze),ze.onBuild(ra,Z),ze.onBeforeCompile(ra,Z),sr=hn.acquireProgram(ra,Ni),Ki.set(Ni,sr),jt.uniforms=ra.uniforms;var _r=jt.uniforms;(!ze.isShaderMaterial&&!ze.isRawShaderMaterial||!0===ze.clipping)&&(_r.clippingPlanes=Mr.uniform),a0(ze,ra),jt.needsLights=fk(ze),jt.lightsStateVersion=ti,jt.needsLights&&(_r.ambientLightColor.value=fn.state.ambient,_r.lightProbe.value=fn.state.probe,_r.directionalLights.value=fn.state.directional,_r.directionalLightShadows.value=fn.state.directionalShadow,_r.spotLights.value=fn.state.spot,_r.spotLightShadows.value=fn.state.spotShadow,_r.rectAreaLights.value=fn.state.rectArea,_r.ltc_1.value=fn.state.rectAreaLTC1,_r.ltc_2.value=fn.state.rectAreaLTC2,_r.pointLights.value=fn.state.point,_r.pointLightShadows.value=fn.state.pointShadow,_r.hemisphereLights.value=fn.state.hemi,_r.directionalShadowMap.value=fn.state.directionalShadowMap,_r.directionalShadowMatrix.value=fn.state.directionalShadowMatrix,_r.spotShadowMap.value=fn.state.spotShadowMap,_r.spotShadowMatrix.value=fn.state.spotShadowMatrix,_r.pointShadowMap.value=fn.state.pointShadowMap,_r.pointShadowMatrix.value=fn.state.pointShadowMatrix);var Hr=sr.getUniforms(),Qi=wg.seqWithValue(Hr.seq,_r);return jt.currentProgram=sr,jt.uniformsList=Qi,sr}function a0(ze,zt){var Wt=yn.get(ze);Wt.outputEncoding=zt.outputEncoding,Wt.instancing=zt.instancing,Wt.skinning=zt.skinning,Wt.morphTargets=zt.morphTargets,Wt.morphNormals=zt.morphNormals,Wt.morphTargetsCount=zt.morphTargetsCount,Wt.numClippingPlanes=zt.numClippingPlanes,Wt.numIntersection=zt.numClipIntersection,Wt.vertexAlphas=zt.vertexAlphas,Wt.vertexTangents=zt.vertexTangents}function kO(ze,zt,Wt,jt,fn){!0!==zt.isScene&&(zt=Ur),An.resetTextureUnits();var zr=zt.fog,ra=null===se?Z.outputEncoding:se.texture.encoding,Ni=(jt.isMeshStandardMaterial?Pi:Vr).get(jt.envMap||(jt.isMeshStandardMaterial?zt.environment:null)),Ki=!0===jt.vertexColors&&!!Wt&&!!Wt.attributes.color&&4===Wt.attributes.color.itemSize,sr=!!jt.normalMap&&!!Wt&&!!Wt.attributes.tangent,_r=!!Wt&&!!Wt.morphAttributes.position,Hr=!!Wt&&!!Wt.morphAttributes.normal,Qi=Wt&&Wt.morphAttributes.position?Wt.morphAttributes.position.length:0,br=yn.get(jt),xa=C.state.lights;!0!==Sn||!0!==kn&&ze===ve||Mr.setState(jt,ze,ze===ve&&jt.id===fe);var ga=!1;jt.version===br.__version?(br.needsLights&&br.lightsStateVersion!==xa.state.version||br.outputEncoding!==ra||fn.isInstancedMesh&&!1===br.instancing||!fn.isInstancedMesh&&!0===br.instancing||fn.isSkinnedMesh&&!1===br.skinning||!fn.isSkinnedMesh&&!0===br.skinning||br.envMap!==Ni||jt.fog&&br.fog!==zr||void 0!==br.numClippingPlanes&&(br.numClippingPlanes!==Mr.numPlanes||br.numIntersection!==Mr.numIntersection)||br.vertexAlphas!==Ki||br.vertexTangents!==sr||br.morphTargets!==_r||br.morphNormals!==Hr||!0===Gn.isWebGL2&&br.morphTargetsCount!==Qi)&&(ga=!0):(ga=!0,br.__version=jt.version);var Fs=br.currentProgram;!0===ga&&(Fs=hk(jt,zt,fn));var Wu=!1,hu=!1,Zf=!1,fo=Fs.getUniforms(),xg=br.uniforms;if(Vn.useProgram(Fs.program)&&(Wu=!0,hu=!0,Zf=!0),jt.id!==fe&&(fe=jt.id,hu=!0),Wu||ve!==ze){if(fo.setValue(ft,"projectionMatrix",ze.projectionMatrix),Gn.logarithmicDepthBuffer&&fo.setValue(ft,"logDepthBufFC",2/(Math.log(ze.far+1)/Math.LN2)),ve!==ze&&(ve=ze,hu=!0,Zf=!0),jt.isShaderMaterial||jt.isMeshPhongMaterial||jt.isMeshToonMaterial||jt.isMeshStandardMaterial||jt.envMap){var E1=fo.map.cameraPosition;void 0!==E1&&E1.setValue(ft,Hn.setFromMatrixPosition(ze.matrixWorld))}(jt.isMeshPhongMaterial||jt.isMeshToonMaterial||jt.isMeshLambertMaterial||jt.isMeshBasicMaterial||jt.isMeshStandardMaterial||jt.isShaderMaterial)&&fo.setValue(ft,"isOrthographic",!0===ze.isOrthographicCamera),(jt.isMeshPhongMaterial||jt.isMeshToonMaterial||jt.isMeshLambertMaterial||jt.isMeshBasicMaterial||jt.isMeshStandardMaterial||jt.isShaderMaterial||jt.isShadowMaterial||fn.isSkinnedMesh)&&fo.setValue(ft,"viewMatrix",ze.matrixWorldInverse)}if(fn.isSkinnedMesh){fo.setOptional(ft,fn,"bindMatrix"),fo.setOptional(ft,fn,"bindMatrixInverse");var cv=fn.skeleton;cv&&(Gn.floatVertexTextures?(null===cv.boneTexture&&cv.computeBoneTexture(),fo.setValue(ft,"boneTexture",cv.boneTexture,An),fo.setValue(ft,"boneTextureSize",cv.boneTextureSize)):fo.setOptional(ft,cv,"boneMatrices"))}return!!Wt&&(void 0!==Wt.morphAttributes.position||void 0!==Wt.morphAttributes.normal)&&Ci.update(fn,Wt,jt,Fs),(hu||br.receiveShadow!==fn.receiveShadow)&&(br.receiveShadow=fn.receiveShadow,fo.setValue(ft,"receiveShadow",fn.receiveShadow)),hu&&(fo.setValue(ft,"toneMappingExposure",Z.toneMappingExposure),br.needsLights&&CO(xg,Zf),zr&&jt.fog&&Ln.refreshFogUniforms(xg,zr),Ln.refreshMaterialUniforms(xg,jt,Ze,qe,dn),wg.upload(ft,br.uniformsList,xg,An)),jt.isShaderMaterial&&!0===jt.uniformsNeedUpdate&&(wg.upload(ft,br.uniformsList,xg,An),jt.uniformsNeedUpdate=!1),jt.isSpriteMaterial&&fo.setValue(ft,"center",fn.center),fo.setValue(ft,"modelViewMatrix",fn.modelViewMatrix),fo.setValue(ft,"normalMatrix",fn.normalMatrix),fo.setValue(ft,"modelMatrix",fn.matrixWorld),Fs}function CO(ze,zt){ze.ambientLightColor.needsUpdate=zt,ze.lightProbe.needsUpdate=zt,ze.directionalLights.needsUpdate=zt,ze.directionalLightShadows.needsUpdate=zt,ze.pointLights.needsUpdate=zt,ze.pointLightShadows.needsUpdate=zt,ze.spotLights.needsUpdate=zt,ze.spotLightShadows.needsUpdate=zt,ze.rectAreaLights.needsUpdate=zt,ze.hemisphereLights.needsUpdate=zt}function fk(ze){return ze.isMeshLambertMaterial||ze.isMeshToonMaterial||ze.isMeshPhongMaterial||ze.isMeshStandardMaterial||ze.isShadowMaterial||ze.isShaderMaterial&&!0===ze.lights}Go.setAnimationLoop(ho),"undefined"!=typeof window&&Go.setContext(window),this.setAnimationLoop=function(ze){ts=ze,qr.setAnimationLoop(ze),null===ze?Go.stop():Go.start()},qr.addEventListener("sessionstart",vl),qr.addEventListener("sessionend",Tu),this.render=function(ze,zt){if(void 0===zt||!0===zt.isCamera){if(!0!==Y){if(!0===ze.autoUpdate&&ze.updateMatrixWorld(),null===zt.parent&&zt.updateMatrixWorld(),!0===qr.enabled&&!0===qr.isPresenting&&(!0===qr.cameraAutoUpdate&&qr.updateCamera(zt),zt=qr.getCamera()),!0===ze.isScene&&ze.onBeforeRender(Z,ze,zt,se),(C=ar.get(ze,I.length)).init(),I.push(C),gn.multiplyMatrices(zt.projectionMatrix,zt.matrixWorldInverse),ln.setFromProjectionMatrix(gn),Sn=Mr.init(this.clippingPlanes,kn=this.localClippingEnabled,zt),(w=Kn.get(ze,T.length)).init(),T.push(w),w1(ze,zt,0,Z.sortObjects),w.finish(),!0===Z.sortObjects&&w.sort(ct,rt),!0===Sn&&Mr.beginShadows(),Cr.render(C.state.shadowsArray,ze,zt),!0===Sn&&Mr.endShadows(),!0===this.info.autoReset&&this.info.reset(),hi.render(w,ze),C.setupLights(Z.physicallyCorrectLights),zt.isArrayCamera)for(var jt=zt.cameras,fn=0,zr=jt.length;fn<zr;fn++){var ti=jt[fn];ck(w,ze,ti,ti.viewport)}else ck(w,ze,zt);null!==se&&(An.updateMultisampleRenderTarget(se),An.updateRenderTargetMipmap(se)),!0===ze.isScene&&ze.onAfterRender(Z,ze,zt),Vn.buffers.depth.setTest(!0),Vn.buffers.depth.setMask(!0),Vn.buffers.color.setMask(!0),Vn.setPolygonOffset(!1),yr.resetDefaultState(),fe=-1,ve=null,I.pop(),C=I.length>0?I[I.length-1]:null,T.pop(),w=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return V},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return se},this.setRenderTarget=function(ze){var zt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Wt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;se=ze,V=zt,W=Wt,ze&&void 0===yn.get(ze).__webglFramebuffer&&An.setupRenderTarget(ze);var jt=null,fn=!1,zr=!1;if(ze){var ti=ze.texture;(ti.isDataTexture3D||ti.isDataTexture2DArray)&&(zr=!0);var ra=yn.get(ze).__webglFramebuffer;ze.isWebGLCubeRenderTarget?(jt=ra[zt],fn=!0):jt=ze.isWebGLMultisampleRenderTarget?yn.get(ze).__webglMultisampledFramebuffer:ra,me.copy(ze.viewport),pe.copy(ze.scissor),ke=ze.scissorTest}else me.copy(ht).multiplyScalar(Ze).floor(),pe.copy(It).multiplyScalar(Ze).floor(),ke=_t;var Ni=Vn.bindFramebuffer(36160,jt);if(Ni&&Gn.drawBuffers){var Ki=!1;if(ze)if(ze.isWebGLMultipleRenderTargets){var sr=ze.texture;if(Zt.length!==sr.length||36064!==Zt[0]){for(var _r=0,Hr=sr.length;_r<Hr;_r++)Zt[_r]=36064+_r;Zt.length=sr.length,Ki=!0}}else(1!==Zt.length||36064!==Zt[0])&&(Zt[0]=36064,Zt.length=1,Ki=!0);else(1!==Zt.length||1029!==Zt[0])&&(Zt[0]=1029,Zt.length=1,Ki=!0);Ki&&(Gn.isWebGL2?ft.drawBuffers(Zt):Yn.get("WEBGL_draw_buffers").drawBuffersWEBGL(Zt))}if(Vn.viewport(me),Vn.scissor(pe),Vn.setScissorTest(ke),fn){var Qi=yn.get(ze.texture);ft.framebufferTexture2D(36160,36064,34069+zt,Qi.__webglTexture,Wt)}else if(zr){var br=yn.get(ze.texture),xa=zt||0;ft.framebufferTextureLayer(36160,36064,br.__webglTexture,Wt||0,xa)}fe=-1},this.readRenderTargetPixels=function(ze,zt,Wt,jt,fn,zr,ti){if(ze&&ze.isWebGLRenderTarget){var ra=yn.get(ze).__webglFramebuffer;if(ze.isWebGLCubeRenderTarget&&void 0!==ti&&(ra=ra[ti]),ra){Vn.bindFramebuffer(36160,ra);try{var Ni=ze.texture,Ki=Ni.format,sr=Ni.type;if(Ki!==cc&&tr.convert(Ki)!==ft.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var _r=sr===wE&&(Yn.has("EXT_color_buffer_half_float")||Gn.isWebGL2&&Yn.has("EXT_color_buffer_float"));if(!(sr===ug||tr.convert(sr)===ft.getParameter(35738)||sr===lg&&(Gn.isWebGL2||Yn.has("OES_texture_float")||Yn.has("WEBGL_color_buffer_float"))||_r))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ft.checkFramebufferStatus(36160)?zt>=0&&zt<=ze.width-jt&&Wt>=0&&Wt<=ze.height-fn&&ft.readPixels(zt,Wt,jt,fn,tr.convert(Ki),tr.convert(sr),zr):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var Hr=null!==se?yn.get(se).__webglFramebuffer:null;Vn.bindFramebuffer(36160,Hr)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(ze,zt){var Wt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,jt=Math.pow(2,-Wt),fn=Math.floor(zt.image.width*jt),zr=Math.floor(zt.image.height*jt),ti=tr.convert(zt.format);Gn.isWebGL2&&(6407===ti&&(ti=32849),6408===ti&&(ti=32856)),An.setTexture2D(zt,0),ft.copyTexImage2D(3553,Wt,ti,ze.x,ze.y,fn,zr,0),Vn.unbindTexture()},this.copyTextureToTexture=function(ze,zt,Wt){var jt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,fn=zt.image.width,zr=zt.image.height,ti=tr.convert(Wt.format),ra=tr.convert(Wt.type);An.setTexture2D(Wt,0),ft.pixelStorei(37440,Wt.flipY),ft.pixelStorei(37441,Wt.premultiplyAlpha),ft.pixelStorei(3317,Wt.unpackAlignment),zt.isDataTexture?ft.texSubImage2D(3553,jt,ze.x,ze.y,fn,zr,ti,ra,zt.image.data):zt.isCompressedTexture?ft.compressedTexSubImage2D(3553,jt,ze.x,ze.y,zt.mipmaps[0].width,zt.mipmaps[0].height,ti,zt.mipmaps[0].data):ft.texSubImage2D(3553,jt,ze.x,ze.y,ti,ra,zt.image),0===jt&&Wt.generateMipmaps&&ft.generateMipmap(3553),Vn.unbindTexture()},this.copyTextureToTexture3D=function(ze,zt,Wt,jt){var fn=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(Z.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var sr,zr=ze.max.x-ze.min.x+1,ti=ze.max.y-ze.min.y+1,ra=ze.max.z-ze.min.z+1,Ni=tr.convert(jt.format),Ki=tr.convert(jt.type);if(jt.isDataTexture3D)An.setTexture3D(jt,0),sr=32879;else{if(!jt.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");An.setTexture2DArray(jt,0),sr=35866}ft.pixelStorei(37440,jt.flipY),ft.pixelStorei(37441,jt.premultiplyAlpha),ft.pixelStorei(3317,jt.unpackAlignment);var _r=ft.getParameter(3314),Hr=ft.getParameter(32878),Qi=ft.getParameter(3316),br=ft.getParameter(3315),xa=ft.getParameter(32877),ns=Wt.isCompressedTexture?Wt.mipmaps[0]:Wt.image;ft.pixelStorei(3314,ns.width),ft.pixelStorei(32878,ns.height),ft.pixelStorei(3316,ze.min.x),ft.pixelStorei(3315,ze.min.y),ft.pixelStorei(32877,ze.min.z),Wt.isDataTexture||Wt.isDataTexture3D?ft.texSubImage3D(sr,fn,zt.x,zt.y,zt.z,zr,ti,ra,Ni,Ki,ns.data):Wt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ft.compressedTexSubImage3D(sr,fn,zt.x,zt.y,zt.z,zr,ti,ra,Ni,ns.data)):ft.texSubImage3D(sr,fn,zt.x,zt.y,zt.z,zr,ti,ra,Ni,Ki,ns),ft.pixelStorei(3314,_r),ft.pixelStorei(32878,Hr),ft.pixelStorei(3316,Qi),ft.pixelStorei(3315,br),ft.pixelStorei(32877,xa),0===fn&&jt.generateMipmaps&&ft.generateMipmap(sr),Vn.unbindTexture()}},this.initTexture=function(ze){An.setTexture2D(ze,0),Vn.unbindTexture()},this.resetState=function(){V=0,W=0,se=null,Vn.reset(),yr.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n})(us).prototype.isWebGL1Renderer=!0,function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;(0,M.Z)(this,i),this.name="",this.color=new xr(s),this.density=n}return(0,R.Z)(i,[{key:"clone",value:function(){return new i(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),i}().prototype.isFogExp2=!0,function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;(0,M.Z)(this,i),this.name="",this.color=new xr(s),this.near=n,this.far=r}return(0,R.Z)(i,[{key:"clone",value:function(){return new i(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),i}().prototype.isFog=!0;var PU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Scene",r.background=null,r.environment=null,r.fog=null,r.overrideMaterial=null,r.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:(0,Ja.Z)(r)})),r}return(0,R.Z)(n,[{key:"copy",value:function(a,o){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a,o),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);return null!==this.fog&&(o.object.fog=this.fog.toJSON()),o}}]),n}(ws);PU.prototype.isScene=!0;var t1=function(){function i(s,n){(0,M.Z)(this,i),this.array=s,this.stride=n,this.count=void 0!==s?s.length/n:0,this.usage=zT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Wh()}return(0,R.Z)(i,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(n){!0===n&&this.version++}},{key:"setUsage",value:function(n){return this.usage=n,this}},{key:"copy",value:function(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}},{key:"copyAt",value:function(n,r,a){n*=this.stride,a*=r.stride;for(var o=0,u=this.stride;o<u;o++)this.array[n+o]=r.array[a+o];return this}},{key:"set",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(n,r),this}},{key:"clone",value:function(n){void 0===n.arrayBuffers&&(n.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Wh()),void 0===n.arrayBuffers[this.array.buffer._uuid]&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var r=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),a=new this.constructor(r,this.stride);return a.setUsage(this.usage),a}},{key:"onUpload",value:function(n){return this.onUploadCallback=n,this}},{key:"toJSON",value:function(n){return void 0===n.arrayBuffers&&(n.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Wh()),void 0===n.arrayBuffers[this.array.buffer._uuid]&&(n.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),i}();t1.prototype.isInterleavedBuffer=!0;var Ho=new Ue,FU=function(){function i(s,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,M.Z)(this,i),this.name="",this.data=s,this.itemSize=n,this.offset=r,this.normalized=!0===a}return(0,R.Z)(i,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(n){this.data.needsUpdate=n}},{key:"applyMatrix4",value:function(n){for(var r=0,a=this.data.count;r<a;r++)Ho.x=this.getX(r),Ho.y=this.getY(r),Ho.z=this.getZ(r),Ho.applyMatrix4(n),this.setXYZ(r,Ho.x,Ho.y,Ho.z);return this}},{key:"applyNormalMatrix",value:function(n){for(var r=0,a=this.count;r<a;r++)Ho.x=this.getX(r),Ho.y=this.getY(r),Ho.z=this.getZ(r),Ho.applyNormalMatrix(n),this.setXYZ(r,Ho.x,Ho.y,Ho.z);return this}},{key:"transformDirection",value:function(n){for(var r=0,a=this.count;r<a;r++)Ho.x=this.getX(r),Ho.y=this.getY(r),Ho.z=this.getZ(r),Ho.transformDirection(n),this.setXYZ(r,Ho.x,Ho.y,Ho.z);return this}},{key:"setX",value:function(n,r){return this.data.array[n*this.data.stride+this.offset]=r,this}},{key:"setY",value:function(n,r){return this.data.array[n*this.data.stride+this.offset+1]=r,this}},{key:"setZ",value:function(n,r){return this.data.array[n*this.data.stride+this.offset+2]=r,this}},{key:"setW",value:function(n,r){return this.data.array[n*this.data.stride+this.offset+3]=r,this}},{key:"getX",value:function(n){return this.data.array[n*this.data.stride+this.offset]}},{key:"getY",value:function(n){return this.data.array[n*this.data.stride+this.offset+1]}},{key:"getZ",value:function(n){return this.data.array[n*this.data.stride+this.offset+2]}},{key:"getW",value:function(n){return this.data.array[n*this.data.stride+this.offset+3]}},{key:"setXY",value:function(n,r,a){return this.data.array[(n=n*this.data.stride+this.offset)+0]=r,this.data.array[n+1]=a,this}},{key:"setXYZ",value:function(n,r,a,o){return this.data.array[(n=n*this.data.stride+this.offset)+0]=r,this.data.array[n+1]=a,this.data.array[n+2]=o,this}},{key:"setXYZW",value:function(n,r,a,o,u){return this.data.array[(n=n*this.data.stride+this.offset)+0]=r,this.data.array[n+1]=a,this.data.array[n+2]=o,this.data.array[n+3]=u,this}},{key:"clone",value:function(n){if(void 0===n){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var r=[],a=0;a<this.count;a++)for(var o=a*this.data.stride+this.offset,u=0;u<this.itemSize;u++)r.push(this.data.array[o+u]);return new cu(new this.array.constructor(r),this.itemSize,this.normalized)}return void 0===n.interleavedBuffers&&(n.interleavedBuffers={}),void 0===n.interleavedBuffers[this.data.uuid]&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new i(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(n){if(void 0===n){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var r=[],a=0;a<this.count;a++)for(var o=a*this.data.stride+this.offset,u=0;u<this.itemSize;u++)r.push(this.data.array[o+u]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}return void 0===n.interleavedBuffers&&(n.interleavedBuffers={}),void 0===n.interleavedBuffers[this.data.uuid]&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),i}();FU.prototype.isInterleavedBufferAttribute=!0;var RU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="SpriteMaterial",a.color=new xr(16777215),a.map=null,a.alphaMap=null,a.rotation=0,a.sizeAttenuation=!0,a.transparent=!0,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this}}]),n}(pl);RU.prototype.isSpriteMaterial=!0;var XE,n1=new Ue,QE=new Ue,JE=new Ue,ek=new un,r1=new un,C8=new Wr,qR=new Ue,i1=new Ue,YR=new Ue,D8=new un,OU=new un,S8=new un;function KR(i,s,n,r,a,o){ek.subVectors(i,n).addScalar(.5).multiply(r),void 0!==a?(r1.x=o*ek.x-a*ek.y,r1.y=a*ek.x+o*ek.y):r1.copy(ek),i.copy(s),i.x+=r1.x,i.y+=r1.y,i.applyMatrix4(C8)}(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;if((0,M.Z)(this,n),(a=s.call(this)).type="Sprite",void 0===XE){XE=new ma;var o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),u=new t1(o,5);XE.setIndex([0,1,2,0,2,3]),XE.setAttribute("position",new FU(u,3,0,!1)),XE.setAttribute("uv",new FU(u,2,3,!1))}return a.geometry=XE,a.material=void 0!==r?r:new RU,a.center=new un(.5,.5),a}return(0,R.Z)(n,[{key:"raycast",value:function(a,o){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),QE.setFromMatrixScale(this.matrixWorld),C8.copy(a.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld),JE.setFromMatrixPosition(this.modelViewMatrix),a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&QE.multiplyScalar(-JE.z);var l,f,u=this.material.rotation;0!==u&&(f=Math.cos(u),l=Math.sin(u));var m=this.center;KR(qR.set(-.5,-.5,0),JE,m,QE,l,f),KR(i1.set(.5,-.5,0),JE,m,QE,l,f),KR(YR.set(.5,.5,0),JE,m,QE,l,f),D8.set(0,0),OU.set(1,0),S8.set(1,1);var b=a.ray.intersectTriangle(qR,i1,YR,!1,n1);if(null!==b||(KR(i1.set(-.5,.5,0),JE,m,QE,l,f),OU.set(0,1),null!==(b=a.ray.intersectTriangle(qR,YR,i1,!1,n1)))){var w=a.ray.origin.distanceTo(n1);w<a.near||w>a.far||o.push({distance:w,point:n1.clone(),uv:Ic.getUV(n1,qR,i1,YR,D8,OU,S8,new un),face:null,object:this})}}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),void 0!==a.center&&this.center.copy(a.center),this.material=a.material,this}}]),n})(ws).prototype.isSprite=!0;var T8=new Ue,x8=new bs,M8=new bs,Jue=new Ue,I8=new Wr,P8=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="SkinnedMesh",o.bindMode="attached",o.bindMatrix=new Wr,o.bindMatrixInverse=new Wr,o}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.bindMode=a.bindMode,this.bindMatrix.copy(a.bindMatrix),this.bindMatrixInverse.copy(a.bindMatrixInverse),this.skeleton=a.skeleton,this}},{key:"bind",value:function(a,o){this.skeleton=a,void 0===o&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var a=new bs,o=this.geometry.attributes.skinWeight,u=0,l=o.count;u<l;u++){a.x=o.getX(u),a.y=o.getY(u),a.z=o.getZ(u),a.w=o.getW(u);var f=1/a.manhattanLength();f!==1/0?a.multiplyScalar(f):a.set(1,0,0,0),o.setXYZW(u,a.x,a.y,a.z,a.w)}}},{key:"updateMatrixWorld",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"updateMatrixWorld",this).call(this,a),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(a,o){var u=this.skeleton,l=this.geometry;x8.fromBufferAttribute(l.attributes.skinIndex,a),M8.fromBufferAttribute(l.attributes.skinWeight,a),T8.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var f=0;f<4;f++){var m=M8.getComponent(f);if(0!==m){var b=x8.getComponent(f);I8.multiplyMatrices(u.bones[b].matrixWorld,u.boneInverses[b]),o.addScaledVector(Jue.copy(T8).applyMatrix4(I8),m)}}return o.applyMatrix4(this.bindMatrixInverse)}}]),n}(Rl);P8.prototype.isSkinnedMesh=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="Bone",r}return n}(ws).prototype.isBone=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3?arguments[3]:void 0,f=arguments.length>4?arguments[4]:void 0,m=arguments.length>5?arguments[5]:void 0,b=arguments.length>6?arguments[6]:void 0,w=arguments.length>7?arguments[7]:void 0,C=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Au,T=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Au,I=arguments.length>10?arguments[10]:void 0,Z=arguments.length>11?arguments[11]:void 0;return(0,M.Z)(this,n),(r=s.call(this,null,m,b,w,C,T,l,f,I,Z)).image={data:a,width:o,height:u},r.magFilter=C,r.minFilter=T,r.generateMipmaps=!1,r.flipY=!1,r.unpackAlignment=1,r.needsUpdate=!0,r}return n}(Mc).prototype.isDataTexture=!0;var LU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),"number"==typeof o&&(l=o,o=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(u=s.call(this,r,a,o)).meshPerAttribute=l,u}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.meshPerAttribute=a.meshPerAttribute,this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.meshPerAttribute=this.meshPerAttribute,a.isInstancedBufferAttribute=!0,a}}]),n}(cu);LU.prototype.isInstancedBufferAttribute=!0;var F8=new Wr,R8=new Wr,$R=[],a1=new Rl;(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,a)).instanceMatrix=new LU(new Float32Array(16*o),16),u.instanceColor=null,u.count=o,u.frustumCulled=!1,u}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.instanceMatrix.copy(a.instanceMatrix),null!==a.instanceColor&&(this.instanceColor=a.instanceColor.clone()),this.count=a.count,this}},{key:"getColorAt",value:function(a,o){o.fromArray(this.instanceColor.array,3*a)}},{key:"getMatrixAt",value:function(a,o){o.fromArray(this.instanceMatrix.array,16*a)}},{key:"raycast",value:function(a,o){var u=this.matrixWorld,l=this.count;if(a1.geometry=this.geometry,a1.material=this.material,void 0!==a1.material)for(var f=0;f<l;f++){this.getMatrixAt(f,F8),R8.multiplyMatrices(u,F8),a1.matrixWorld=R8,a1.raycast(a,$R);for(var m=0,b=$R.length;m<b;m++){var w=$R[m];w.instanceId=f,w.object=this,o.push(w)}$R.length=0}}},{key:"setColorAt",value:function(a,o){null===this.instanceColor&&(this.instanceColor=new LU(new Float32Array(3*this.instanceMatrix.count),3)),o.toArray(this.instanceColor.array,3*a)}},{key:"setMatrixAt",value:function(a,o){o.toArray(this.instanceMatrix.array,16*a)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n})(Rl).prototype.isInstancedMesh=!0;var Eg=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="LineBasicMaterial",a.color=new xr(16777215),a.linewidth=1,a.linecap="round",a.linejoin="round",a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this}}]),n}(pl);Eg.prototype.isLineBasicMaterial=!0;var O8=new Ue,L8=new Ue,N8=new Wr,NU=new RE,XR=new FE,ZU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ma,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Eg;return(0,M.Z)(this,n),(r=s.call(this)).type="Line",r.geometry=a,r.material=o,r.updateMorphTargets(),r}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.material=a.material,this.geometry=a.geometry,this}},{key:"computeLineDistances",value:function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var o=a.attributes.position,u=[0],l=1,f=o.count;l<f;l++)O8.fromBufferAttribute(o,l-1),L8.fromBufferAttribute(o,l),u[l]=u[l-1],u[l]+=O8.distanceTo(L8);a.setAttribute("lineDistance",new ci(u,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(a,o){var u=this.geometry,l=this.matrixWorld,f=a.params.Line.threshold,m=u.drawRange;if(null===u.boundingSphere&&u.computeBoundingSphere(),XR.copy(u.boundingSphere),XR.applyMatrix4(l),XR.radius+=f,!1!==a.ray.intersectsSphere(XR)){N8.copy(l).invert(),NU.copy(a.ray).applyMatrix4(N8);var b=f/((this.scale.x+this.scale.y+this.scale.z)/3),w=b*b,C=new Ue,T=new Ue,I=new Ue,Z=new Ue,Y=this.isLineSegments?2:1;if(u.isBufferGeometry){var V=u.index,se=u.attributes.position;if(null!==V)for(var me=Math.max(0,m.start),pe=Math.min(V.count,m.start+m.count)-1;me<pe;me+=Y){var ke=V.getX(me),je=V.getX(me+1);if(C.fromBufferAttribute(se,ke),T.fromBufferAttribute(se,je),!(NU.distanceSqToSegment(C,T,Z,I)>w)){Z.applyMatrix4(this.matrixWorld);var Ze=a.ray.origin.distanceTo(Z);Ze<a.near||Ze>a.far||o.push({distance:Ze,point:I.clone().applyMatrix4(this.matrixWorld),index:me,face:null,faceIndex:null,object:this})}}else for(var ht=Math.max(0,m.start),It=Math.min(se.count,m.start+m.count)-1;ht<It;ht+=Y)if(C.fromBufferAttribute(se,ht),T.fromBufferAttribute(se,ht+1),!(NU.distanceSqToSegment(C,T,Z,I)>w)){Z.applyMatrix4(this.matrixWorld);var Zt=a.ray.origin.distanceTo(Z);Zt<a.near||Zt>a.far||o.push({distance:Zt,point:I.clone().applyMatrix4(this.matrixWorld),index:ht,face:null,faceIndex:null,object:this})}}else u.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,u=Object.keys(o);if(u.length>0){var l=o[u[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var f=0,m=l.length;f<m;f++){var b=l[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=f}}}}else{var w=a.morphTargets;void 0!==w&&w.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(ws);ZU.prototype.isLine=!0;var Z8=new Ue,B8=new Ue,s1=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="LineSegments",o}return(0,R.Z)(n,[{key:"computeLineDistances",value:function(){var a=this.geometry;if(a.isBufferGeometry)if(null===a.index){for(var o=a.attributes.position,u=[],l=0,f=o.count;l<f;l+=2)Z8.fromBufferAttribute(o,l),B8.fromBufferAttribute(o,l+1),u[l]=0===l?0:u[l-1],u[l+1]=u[l]+Z8.distanceTo(B8);a.setAttribute("lineDistance",new ci(u,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(ZU);s1.prototype.isLineSegments=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="LineLoop",o}return n}(ZU).prototype.isLineLoop=!0;var tk=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="PointsMaterial",a.color=new xr(16777215),a.map=null,a.alphaMap=null,a.size=1,a.sizeAttenuation=!0,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this}}]),n}(pl);tk.prototype.isPointsMaterial=!0;var U8=new Wr,BU=new RE,QR=new FE,JR=new Ue;function V8(i,s,n,r,a,o,u){var l=BU.distanceSqToPoint(i);if(l<n){var f=new Ue;BU.closestPointToPoint(i,f),f.applyMatrix4(r);var m=a.ray.origin.distanceTo(f);if(m<a.near||m>a.far)return;o.push({distance:m,distanceToRay:Math.sqrt(l),point:f,index:s,face:null,object:u})}}(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ma,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tk;return(0,M.Z)(this,n),(r=s.call(this)).type="Points",r.geometry=a,r.material=o,r.updateMorphTargets(),r}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.material=a.material,this.geometry=a.geometry,this}},{key:"raycast",value:function(a,o){var u=this.geometry,l=this.matrixWorld,f=a.params.Points.threshold,m=u.drawRange;if(null===u.boundingSphere&&u.computeBoundingSphere(),QR.copy(u.boundingSphere),QR.applyMatrix4(l),QR.radius+=f,!1!==a.ray.intersectsSphere(QR)){U8.copy(l).invert(),BU.copy(a.ray).applyMatrix4(U8);var b=f/((this.scale.x+this.scale.y+this.scale.z)/3),w=b*b;if(u.isBufferGeometry){var C=u.index,I=u.attributes.position;if(null!==C)for(var V=Math.max(0,m.start),W=Math.min(C.count,m.start+m.count);V<W;V++){var se=C.getX(V);JR.fromBufferAttribute(I,se),V8(JR,se,w,l,a,o,this)}else for(var me=Math.max(0,m.start),pe=Math.min(I.count,m.start+m.count);me<pe;me++)JR.fromBufferAttribute(I,me),V8(JR,me,w,l,a,o,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var a=this.geometry;if(a.isBufferGeometry){var o=a.morphAttributes,u=Object.keys(o);if(u.length>0){var l=o[u[0]];if(void 0!==l){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var f=0,m=l.length;f<m;f++){var b=l[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[b]=f}}}}else{var w=a.morphTargets;void 0!==w&&w.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n})(ws).prototype.isPoints=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f,m,b,w){var C;(0,M.Z)(this,n),(C=s.call(this,r,a,o,u,l,f,m,b,w)).format=void 0!==m?m:EE,C.minFilter=void 0!==f?f:rh,C.magFilter=void 0!==l?l:rh,C.generateMipmaps=!1;var T=(0,Ja.Z)(C);return"requestVideoFrameCallback"in r&&r.requestVideoFrameCallback(function I(){T.needsUpdate=!0,r.requestVideoFrameCallback(I)}),C}return(0,R.Z)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var a=this.image;!1=="requestVideoFrameCallback"in a&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Mc).prototype.isVideoTexture=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f,m,b,w,C,T,I){var Z;return(0,M.Z)(this,n),(Z=s.call(this,null,f,m,b,w,C,u,l,T,I)).image={width:a,height:o},Z.mipmaps=r,Z.flipY=!1,Z.generateMipmaps=!1,Z}return n}(Mc).prototype.isCompressedTexture=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f,m,b,w){var C;return(0,M.Z)(this,n),(C=s.call(this,r,a,o,u,l,f,m,b,w)).needsUpdate=!0,C}return n}(Mc).prototype.isCanvasTexture=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f,m,b,w,C){var T;if((0,M.Z)(this,n),(C=void 0!==C?C:kE)!==kE&&C!==VT)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===o&&C===kE&&(o=1012),void 0===o&&C===VT&&(o=UT),(T=s.call(this,null,u,l,f,m,b,C,o,w)).image={width:r,height:a},T.magFilter=void 0!==m?m:Au,T.minFilter=void 0!==b?b:Au,T.flipY=!1,T.generateMipmaps=!1,T}return n}(Mc).prototype.isDepthTexture=!0;var nk=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,M.Z)(this,n),(r=s.call(this)).type="PolyhedronGeometry",r.parameters={vertices:a,indices:o,radius:u,detail:l};var f=[],m=[];function b(ve){for(var me=new Ue,pe=new Ue,ke=new Ue,je=0;je<o.length;je+=3)Y(o[je+0],me),Y(o[je+1],pe),Y(o[je+2],ke),w(me,pe,ke,ve)}function w(ve,me,pe,ke){for(var je=ke+1,qe=[],Ze=0;Ze<=je;Ze++){qe[Ze]=[];for(var ct=ve.clone().lerp(pe,Ze/je),rt=me.clone().lerp(pe,Ze/je),ht=je-Ze,It=0;It<=ht;It++)qe[Ze][It]=0===It&&Ze===je?ct:ct.clone().lerp(rt,It/ht)}for(var _t=0;_t<je;_t++)for(var Zt=0;Zt<2*(je-_t)-1;Zt++){var ln=Math.floor(Zt/2);Zt%2==0?(Z(qe[_t][ln+1]),Z(qe[_t+1][ln]),Z(qe[_t][ln])):(Z(qe[_t][ln+1]),Z(qe[_t+1][ln+1]),Z(qe[_t+1][ln]))}}function C(ve){for(var me=new Ue,pe=0;pe<f.length;pe+=3)me.x=f[pe+0],me.y=f[pe+1],me.z=f[pe+2],me.normalize().multiplyScalar(ve),f[pe+0]=me.x,f[pe+1]=me.y,f[pe+2]=me.z}function T(){for(var ve=new Ue,me=0;me<f.length;me+=3){ve.x=f[me+0],ve.y=f[me+1],ve.z=f[me+2];var pe=se(ve)/2/Math.PI+.5,ke=fe(ve)/Math.PI+.5;m.push(pe,1-ke)}V(),I()}function I(){for(var ve=0;ve<m.length;ve+=6){var me=m[ve+0],pe=m[ve+2],ke=m[ve+4],je=Math.max(me,pe,ke),qe=Math.min(me,pe,ke);je>.9&&qe<.1&&(me<.2&&(m[ve+0]+=1),pe<.2&&(m[ve+2]+=1),ke<.2&&(m[ve+4]+=1))}}function Z(ve){f.push(ve.x,ve.y,ve.z)}function Y(ve,me){var pe=3*ve;me.x=a[pe+0],me.y=a[pe+1],me.z=a[pe+2]}function V(){for(var ve=new Ue,me=new Ue,pe=new Ue,ke=new Ue,je=new un,qe=new un,Ze=new un,ct=0,rt=0;ct<f.length;ct+=9,rt+=6){ve.set(f[ct+0],f[ct+1],f[ct+2]),me.set(f[ct+3],f[ct+4],f[ct+5]),pe.set(f[ct+6],f[ct+7],f[ct+8]),je.set(m[rt+0],m[rt+1]),qe.set(m[rt+2],m[rt+3]),Ze.set(m[rt+4],m[rt+5]),ke.copy(ve).add(me).add(pe).divideScalar(3);var ht=se(ke);W(je,rt+0,ve,ht),W(qe,rt+2,me,ht),W(Ze,rt+4,pe,ht)}}function W(ve,me,pe,ke){ke<0&&1===ve.x&&(m[me]=ve.x-1),0===pe.x&&0===pe.z&&(m[me]=ke/2/Math.PI+.5)}function se(ve){return Math.atan2(ve.z,-ve.x)}function fe(ve){return Math.atan2(-ve.y,Math.sqrt(ve.x*ve.x+ve.z*ve.z))}return b(l),C(u),T(),r.setAttribute("position",new ci(f,3)),r.setAttribute("normal",new ci(f.slice(),3)),r.setAttribute("uv",new ci(m,2)),0===l?r.computeVertexNormals():r.normalizeNormals(),r}return(0,R.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.vertices,a.indices,a.radius,a.details)}}]),n}(ma),Kh=(new Ue,new Ue,new Ue,new Ic,function(){function i(){(0,M.Z)(this,i),this.type="Curve",this.arcLengthDivisions=200}return(0,R.Z)(i,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(n,r){var a=this.getUtoTmapping(n);return this.getPoint(a,r)}},{key:"getPoints",value:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,r=[],a=0;a<=n;a++)r.push(this.getPoint(a/n));return r}},{key:"getSpacedPoints",value:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,r=[],a=0;a<=n;a++)r.push(this.getPointAt(a/n));return r}},{key:"getLength",value:function(){var n=this.getLengths();return n[n.length-1]}},{key:"getLengths",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var a,r=[],o=this.getPoint(0),u=0;r.push(0);for(var l=1;l<=n;l++)u+=(a=this.getPoint(l/n)).distanceTo(o),r.push(u),o=a;return this.cacheArcLengths=r,r}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(n,r){var l,a=this.getLengths(),o=0,u=a.length;l=r||n*a[u-1];for(var b,f=0,m=u-1;f<=m;)if((b=a[o=Math.floor(f+(m-f)/2)]-l)<0)f=o+1;else{if(!(b>0)){m=o;break}m=o-1}if(a[o=m]===l)return o/(u-1);var w=a[o];return(o+(l-w)/(a[o+1]-w))/(u-1)}},{key:"getTangent",value:function(n,r){var a=1e-4,o=n-a,u=n+a;o<0&&(o=0),u>1&&(u=1);var l=this.getPoint(o),f=this.getPoint(u),m=r||(l.isVector2?new un:new Ue);return m.copy(f).sub(l).normalize(),m}},{key:"getTangentAt",value:function(n,r){var a=this.getUtoTmapping(n);return this.getTangent(a,r)}},{key:"computeFrenetFrames",value:function(n,r){for(var a=new Ue,o=[],u=[],l=[],f=new Ue,m=new Wr,b=0;b<=n;b++)o[b]=this.getTangentAt(b/n,new Ue);u[0]=new Ue,l[0]=new Ue;var C=Number.MAX_VALUE,T=Math.abs(o[0].x),I=Math.abs(o[0].y),Z=Math.abs(o[0].z);T<=C&&(C=T,a.set(1,0,0)),I<=C&&(C=I,a.set(0,1,0)),Z<=C&&a.set(0,0,1),f.crossVectors(o[0],a).normalize(),u[0].crossVectors(o[0],f),l[0].crossVectors(o[0],u[0]);for(var Y=1;Y<=n;Y++){if(u[Y]=u[Y-1].clone(),l[Y]=l[Y-1].clone(),f.crossVectors(o[Y-1],o[Y]),f.length()>Number.EPSILON){f.normalize();var V=Math.acos(fl(o[Y-1].dot(o[Y]),-1,1));u[Y].applyMatrix4(m.makeRotationAxis(f,V))}l[Y].crossVectors(o[Y],u[Y])}if(!0===r){var W=Math.acos(fl(u[0].dot(u[n]),-1,1));W/=n,o[0].dot(f.crossVectors(u[0],u[n]))>0&&(W=-W);for(var se=1;se<=n;se++)u[se].applyMatrix4(m.makeRotationAxis(o[se],W*se)),l[se].crossVectors(o[se],u[se])}return{tangents:o,normals:u,binormals:l}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}},{key:"toJSON",value:function(){var n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}},{key:"fromJSON",value:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}]),i}()),nO=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,b=arguments.length>6&&void 0!==arguments[6]&&arguments[6],w=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return(0,M.Z)(this,n),(r=s.call(this)).type="EllipseCurve",r.aX=a,r.aY=o,r.xRadius=u,r.yRadius=l,r.aStartAngle=f,r.aEndAngle=m,r.aClockwise=b,r.aRotation=w,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a,o){for(var u=o||new un,l=2*Math.PI,f=this.aEndAngle-this.aStartAngle,m=Math.abs(f)<Number.EPSILON;f<0;)f+=l;for(;f>l;)f-=l;f<Number.EPSILON&&(f=m?0:l),!0===this.aClockwise&&!m&&(f===l?f=-l:f-=l);var b=this.aStartAngle+a*f,w=this.aX+this.xRadius*Math.cos(b),C=this.aY+this.yRadius*Math.sin(b);if(0!==this.aRotation){var T=Math.cos(this.aRotation),I=Math.sin(this.aRotation),Z=w-this.aX,Y=C-this.aY;w=Z*T-Y*I+this.aX,C=Z*I+Y*T+this.aY}return u.set(w,C)}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}]),n}(Kh);nO.prototype.isEllipseCurve=!0;var W8=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u,l,f){var m;return(0,M.Z)(this,n),(m=s.call(this,r,a,o,o,u,l,f)).type="ArcCurve",m}return n}(nO);function HU(){var i=0,s=0,n=0,r=0;function a(o,u,l,f){i=o,s=l,n=-3*o+3*u-2*l-f,r=2*o-2*u+l+f}return{initCatmullRom:function(u,l,f,m,b){a(l,f,b*(f-u),b*(m-l))},initNonuniformCatmullRom:function(u,l,f,m,b,w,C){var T=(l-u)/b-(f-u)/(b+w)+(f-l)/w,I=(f-l)/w-(m-l)/(w+C)+(m-f)/C;a(l,f,T*=w,I*=w)},calc:function(u){var l=u*u;return i+s*u+n*l+r*(l*u)}}}W8.prototype.isArcCurve=!0;var rO=new Ue,GU=new HU,jU=new HU,WU=new HU,q8=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return(0,M.Z)(this,n),(r=s.call(this)).type="CatmullRomCurve3",r.points=a,r.closed=o,r.curveType=u,r.tension=l,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var C,T,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue,u=o,l=this.points,f=l.length,m=(f-(this.closed?0:1))*a,b=Math.floor(m),w=m-b;this.closed?b+=b>0?0:(Math.floor(Math.abs(b)/f)+1)*f:0===w&&b===f-1&&(b=f-2,w=1),this.closed||b>0?C=l[(b-1)%f]:(rO.subVectors(l[0],l[1]).add(l[0]),C=rO);var I=l[b%f],Z=l[(b+1)%f];if(this.closed||b+2<f?T=l[(b+2)%f]:(rO.subVectors(l[f-1],l[f-2]).add(l[f-1]),T=rO),"centripetal"===this.curveType||"chordal"===this.curveType){var Y="chordal"===this.curveType?.5:.25,V=Math.pow(C.distanceToSquared(I),Y),W=Math.pow(I.distanceToSquared(Z),Y),se=Math.pow(Z.distanceToSquared(T),Y);W<1e-4&&(W=1),V<1e-4&&(V=W),se<1e-4&&(se=W),GU.initNonuniformCatmullRom(C.x,I.x,Z.x,T.x,V,W,se),jU.initNonuniformCatmullRom(C.y,I.y,Z.y,T.y,V,W,se),WU.initNonuniformCatmullRom(C.z,I.z,Z.z,T.z,V,W,se)}else"catmullrom"===this.curveType&&(GU.initCatmullRom(C.x,I.x,Z.x,T.x,this.tension),jU.initCatmullRom(C.y,I.y,Z.y,T.y,this.tension),WU.initCatmullRom(C.z,I.z,Z.z,T.z,this.tension));return u.set(GU.calc(w),jU.calc(w),WU.calc(w)),u}},{key:"copy",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++)this.points.push(a.points[o].clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);a.points=[];for(var o=0,u=this.points.length;o<u;o++)a.points.push(this.points[o].toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}},{key:"fromJSON",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++){var l=a.points[o];this.points.push((new Ue).fromArray(l))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}]),n}(Kh);function Y8(i,s,n,r,a){var o=.5*(r-s),u=.5*(a-n),l=i*i;return(2*n-2*r+o+u)*(i*l)+(-3*n+3*r-2*o-u)*l+o*i+n}function o1(i,s,n,r){return function(i,s){var n=1-i;return n*n*s}(i,s)+function(i,s){return 2*(1-i)*i*s}(i,n)+function(i,s){return i*i*s}(i,r)}function u1(i,s,n,r,a){return function(i,s){var n=1-i;return n*n*n*s}(i,s)+function(i,s){var n=1-i;return 3*n*n*i*s}(i,n)+function(i,s){return 3*(1-i)*i*i*s}(i,r)+function(i,s){return i*i*i*s}(i,a)}q8.prototype.isCatmullRomCurve3=!0;var qU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new un,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new un,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new un;return(0,M.Z)(this,n),(r=s.call(this)).type="CubicBezierCurve",r.v0=a,r.v1=o,r.v2=u,r.v3=l,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un,u=o,l=this.v0,f=this.v1,m=this.v2,b=this.v3;return u.set(u1(a,l.x,f.x,m.x,b.x),u1(a,l.y,f.y,m.y,b.y)),u}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}]),n}(Kh);qU.prototype.isCubicBezierCurve=!0;var K8=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ue,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ue;return(0,M.Z)(this,n),(r=s.call(this)).type="CubicBezierCurve3",r.v0=a,r.v1=o,r.v2=u,r.v3=l,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue,u=o,l=this.v0,f=this.v1,m=this.v2,b=this.v3;return u.set(u1(a,l.x,f.x,m.x,b.x),u1(a,l.y,f.y,m.y,b.y),u1(a,l.z,f.z,m.z,b.z)),u}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}]),n}(Kh);K8.prototype.isCubicBezierCurve3=!0;var iO=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new un,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un;return(0,M.Z)(this,n),(r=s.call(this)).type="LineCurve",r.v1=a,r.v2=o,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un,u=o;return 1===a?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(a).add(this.v1)),u}},{key:"getPointAt",value:function(a,o){return this.getPoint(a,o)}},{key:"getTangent",value:function(a,o){var u=o||new un;return u.copy(this.v2).sub(this.v1).normalize(),u}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Kh);iO.prototype.isLineCurve=!0;var vle=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue;return(0,M.Z)(this,n),(r=s.call(this)).type="LineCurve3",r.isLineCurve3=!0,r.v1=a,r.v2=o,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue,u=o;return 1===a?u.copy(this.v2):(u.copy(this.v2).sub(this.v1),u.multiplyScalar(a).add(this.v1)),u}},{key:"getPointAt",value:function(a,o){return this.getPoint(a,o)}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Kh),YU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new un,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new un;return(0,M.Z)(this,n),(r=s.call(this)).type="QuadraticBezierCurve",r.v0=a,r.v1=o,r.v2=u,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un,u=o,l=this.v0,f=this.v1,m=this.v2;return u.set(o1(a,l.x,f.x,m.x),o1(a,l.y,f.y,m.y)),u}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Kh);YU.prototype.isQuadraticBezierCurve=!0;var KU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ue;return(0,M.Z)(this,n),(r=s.call(this)).type="QuadraticBezierCurve3",r.v0=a,r.v1=o,r.v2=u,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue,u=o,l=this.v0,f=this.v1,m=this.v2;return u.set(o1(a,l.x,f.x,m.x),o1(a,l.y,f.y,m.y),o1(a,l.z,f.z,m.z)),u}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}]),n}(Kh);KU.prototype.isQuadraticBezierCurve3=!0;var $U=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,M.Z)(this,n),(r=s.call(this)).type="SplineCurve",r.points=a,r}return(0,R.Z)(n,[{key:"getPoint",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un,u=o,l=this.points,f=(l.length-1)*a,m=Math.floor(f),b=f-m,w=l[0===m?m:m-1],C=l[m],T=l[m>l.length-2?l.length-1:m+1],I=l[m>l.length-3?l.length-1:m+2];return u.set(Y8(b,w.x,C.x,T.x,I.x),Y8(b,w.y,C.y,T.y,I.y)),u}},{key:"copy",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++)this.points.push(a.points[o].clone());return this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);a.points=[];for(var o=0,u=this.points.length;o<u;o++)a.points.push(this.points[o].toArray());return a}},{key:"fromJSON",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.points=[];for(var o=0,u=a.points.length;o<u;o++){var l=a.points[o];this.points.push((new un).fromArray(l))}return this}}]),n}(Kh);$U.prototype.isSplineCurve=!0;var XU=Object.freeze({__proto__:null,ArcCurve:W8,CatmullRomCurve3:q8,CubicBezierCurve:qU,CubicBezierCurve3:K8,EllipseCurve:nO,LineCurve:iO,LineCurve3:vle,QuadraticBezierCurve:YU,QuadraticBezierCurve3:KU,SplineCurve:$U}),QU=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="Path",a.currentPoint=new un,r&&a.setFromPoints(r),a}return(0,R.Z)(n,[{key:"setFromPoints",value:function(a){this.moveTo(a[0].x,a[0].y);for(var o=1,u=a.length;o<u;o++)this.lineTo(a[o].x,a[o].y);return this}},{key:"moveTo",value:function(a,o){return this.currentPoint.set(a,o),this}},{key:"lineTo",value:function(a,o){var u=new iO(this.currentPoint.clone(),new un(a,o));return this.curves.push(u),this.currentPoint.set(a,o),this}},{key:"quadraticCurveTo",value:function(a,o,u,l){var f=new YU(this.currentPoint.clone(),new un(a,o),new un(u,l));return this.curves.push(f),this.currentPoint.set(u,l),this}},{key:"bezierCurveTo",value:function(a,o,u,l,f,m){var b=new qU(this.currentPoint.clone(),new un(a,o),new un(u,l),new un(f,m));return this.curves.push(b),this.currentPoint.set(f,m),this}},{key:"splineThru",value:function(a){var o=[this.currentPoint.clone()].concat(a),u=new $U(o);return this.curves.push(u),this.currentPoint.copy(a[a.length-1]),this}},{key:"arc",value:function(a,o,u,l,f,m){return this.absarc(a+this.currentPoint.x,o+this.currentPoint.y,u,l,f,m),this}},{key:"absarc",value:function(a,o,u,l,f,m){return this.absellipse(a,o,u,u,l,f,m),this}},{key:"ellipse",value:function(a,o,u,l,f,m,b,w){return this.absellipse(a+this.currentPoint.x,o+this.currentPoint.y,u,l,f,m,b,w),this}},{key:"absellipse",value:function(a,o,u,l,f,m,b,w){var C=new nO(a,o,u,l,f,m,b,w);if(this.curves.length>0){var T=C.getPoint(0);T.equals(this.currentPoint)||this.lineTo(T.x,T.y)}this.curves.push(C);var I=C.getPoint(1);return this.currentPoint.copy(I),this}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.currentPoint.copy(a.currentPoint),this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return a.currentPoint=this.currentPoint.toArray(),a}},{key:"fromJSON",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.currentPoint.fromArray(a.currentPoint),this}}]),n}(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="CurvePath",r.curves=[],r.autoClose=!1,r}return(0,R.Z)(n,[{key:"add",value:function(a){this.curves.push(a)}},{key:"closePath",value:function(){var a=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);a.equals(o)||this.curves.push(new iO(o,a))}},{key:"getPoint",value:function(a,o){for(var u=a*this.getLength(),l=this.getCurveLengths(),f=0;f<l.length;){if(l[f]>=u){var m=l[f]-u,b=this.curves[f],w=b.getLength();return b.getPointAt(0===w?0:1-m/w,o)}f++}return null}},{key:"getLength",value:function(){var a=this.getCurveLengths();return a[a.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],o=0,u=0,l=this.curves.length;u<l;u++)o+=this.curves[u].getLength(),a.push(o);return this.cacheLengths=a,a}},{key:"getSpacedPoints",value:function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,o=[],u=0;u<=a;u++)o.push(this.getPoint(u/a));return this.autoClose&&o.push(o[0]),o}},{key:"getPoints",value:function(){for(var u,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,o=[],l=0,f=this.curves;l<f.length;l++)for(var m=f[l],b=m&&m.isEllipseCurve?2*a:m&&(m.isLineCurve||m.isLineCurve3)?1:m&&m.isSplineCurve?a*m.points.length:a,w=m.getPoints(b),C=0;C<w.length;C++){var T=w[C];u&&u.equals(T)||(o.push(T),u=T)}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}},{key:"copy",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.curves=[];for(var o=0,u=a.curves.length;o<u;o++)this.curves.push(a.curves[o].clone());return this.autoClose=a.autoClose,this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);a.autoClose=this.autoClose,a.curves=[];for(var o=0,u=this.curves.length;o<u;o++)a.curves.push(this.curves[o].toJSON());return a}},{key:"fromJSON",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.autoClose=a.autoClose,this.curves=[];for(var o=0,u=a.curves.length;o<u;o++){var l=a.curves[o];this.curves.push((new XU[l.type]).fromJSON(l))}return this}}]),n}(Kh)),l1=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this,r)).uuid=Wh(),a.type="Shape",a.holes=[],a}return(0,R.Z)(n,[{key:"getPointsHoles",value:function(a){for(var o=[],u=0,l=this.holes.length;u<l;u++)o[u]=this.holes[u].getPoints(a);return o}},{key:"extractPoints",value:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}},{key:"copy",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.holes=[];for(var o=0,u=a.holes.length;o<u;o++)this.holes.push(a.holes[o].clone());return this}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);a.uuid=this.uuid,a.holes=[];for(var o=0,u=this.holes.length;o<u;o++)a.holes.push(this.holes[o].toJSON());return a}},{key:"fromJSON",value:function(a){(0,Se.Z)((0,ye.Z)(n.prototype),"fromJSON",this).call(this,a),this.uuid=a.uuid,this.holes=[];for(var o=0,u=a.holes.length;o<u;o++){var l=a.holes[o];this.holes.push((new QU).fromJSON(l))}return this}}]),n}(QU);function $8(i,s,n,r,a){var o,u;if(a===function(i,s,n,r){for(var a=0,o=s,u=n-r;o<n;o+=r)a+=(i[u]-i[o])*(i[o+1]+i[u+1]),u=o;return a}(i,s,n,r)>0)for(o=s;o<n;o+=r)u=J8(o,i[o],i[o+1],u);else for(o=n-r;o>=s;o-=r)u=J8(o,i[o],i[o+1],u);return u&&aO(u,u.next)&&(f1(u),u=u.next),u}function kg(i,s){if(!i)return i;s||(s=i);var r,n=i;do{if(r=!1,n.steiner||!aO(n,n.next)&&0!==co(n.prev,n,n.next))n=n.next;else{if(f1(n),(n=s=n.prev)===n.next)break;r=!0}}while(r||n!==s);return s}function c1(i,s,n,r,a,o,u){if(i){!u&&o&&function(i,s,n,r){var a=i;do{null===a.z&&(a.z=JU(a.x,a.y,s,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,function(i){var s,n,r,a,o,u,l,f,m=1;do{for(n=i,i=null,o=null,u=0;n;){for(u++,r=n,l=0,s=0;s<m&&(l++,r=r.nextZ);s++);for(f=m;l>0||f>0&&r;)0!==l&&(0===f||!r||n.z<=r.z)?(a=n,n=n.nextZ,l--):(a=r,r=r.nextZ,f--),o?o.nextZ=a:i=a,a.prevZ=o,o=a;n=r}o.nextZ=null,m*=2}while(u>1)}(a)}(i,r,a,o);for(var f,m,l=i;i.prev!==i.next;)if(f=i.prev,m=i.next,o?_le(i,r,a,o):yle(i))s.push(f.i/n),s.push(i.i/n),s.push(m.i/n),f1(i),i=m.next,l=m.next;else if((i=m)===l){u?1===u?c1(i=ble(kg(i),s,n),s,n,r,a,o,2):2===u&&wle(i,s,n,r,a,o):c1(kg(i),s,n,r,a,o,1);break}}}function yle(i){var s=i.prev,n=i,r=i.next;if(co(s,n,r)>=0)return!1;for(var a=i.next.next;a!==i.prev;){if(ik(s.x,s.y,n.x,n.y,r.x,r.y,a.x,a.y)&&co(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function _le(i,s,n,r){var a=i.prev,o=i,u=i.next;if(co(a,o,u)>=0)return!1;for(var m=a.x>o.x?a.x>u.x?a.x:u.x:o.x>u.x?o.x:u.x,b=a.y>o.y?a.y>u.y?a.y:u.y:o.y>u.y?o.y:u.y,w=JU(a.x<o.x?a.x<u.x?a.x:u.x:o.x<u.x?o.x:u.x,a.y<o.y?a.y<u.y?a.y:u.y:o.y<u.y?o.y:u.y,s,n,r),C=JU(m,b,s,n,r),T=i.prevZ,I=i.nextZ;T&&T.z>=w&&I&&I.z<=C;){if(T!==i.prev&&T!==i.next&&ik(a.x,a.y,o.x,o.y,u.x,u.y,T.x,T.y)&&co(T.prev,T,T.next)>=0||(T=T.prevZ,I!==i.prev&&I!==i.next&&ik(a.x,a.y,o.x,o.y,u.x,u.y,I.x,I.y)&&co(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;T&&T.z>=w;){if(T!==i.prev&&T!==i.next&&ik(a.x,a.y,o.x,o.y,u.x,u.y,T.x,T.y)&&co(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;I&&I.z<=C;){if(I!==i.prev&&I!==i.next&&ik(a.x,a.y,o.x,o.y,u.x,u.y,I.x,I.y)&&co(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function ble(i,s,n){var r=i;do{var a=r.prev,o=r.next.next;!aO(a,o)&&X8(a,r,r.next,o)&&h1(a,o)&&h1(o,a)&&(s.push(a.i/n),s.push(r.i/n),s.push(o.i/n),f1(r),f1(r.next),r=i=o),r=r.next}while(r!==i);return kg(r)}function wle(i,s,n,r,a,o){var u=i;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&Mle(u,l)){var f=Q8(u,l);return u=kg(u,u.next),f=kg(f,f.next),c1(u,s,n,r,a,o),void c1(f,s,n,r,a,o)}l=l.next}u=u.next}while(u!==i)}function Ele(i,s,n,r){var o,u,m,a=[];for(o=0,u=s.length;o<u;o++)(m=$8(i,s[o]*r,o<u-1?s[o+1]*r:i.length,r,!1))===m.next&&(m.steiner=!0),a.push(xle(m));for(a.sort(kle),o=0;o<a.length;o++)Cle(a[o],n),n=kg(n,n.next);return n}function kle(i,s){return i.x-s.x}function Cle(i,s){if(s=function(i,s){var u,n=s,r=i.x,a=i.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var l=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=r&&l>o){if(o=l,l===r){if(a===n.y)return n;if(a===n.next.y)return n.next}u=n.x<n.next.x?n:n.next}}n=n.next}while(n!==s);if(!u)return null;if(r===o)return u;var C,f=u,m=u.x,b=u.y,w=1/0;n=u;do{r>=n.x&&n.x>=m&&r!==n.x&&ik(a<b?r:o,a,m,b,a<b?o:r,a,n.x,n.y)&&(C=Math.abs(a-n.y)/(r-n.x),h1(n,i)&&(C<w||C===w&&(n.x>u.x||n.x===u.x&&Sle(u,n)))&&(u=n,w=C)),n=n.next}while(n!==f);return u}(i,s)){var n=Q8(s,i);kg(s,s.next),kg(n,n.next)}}function Sle(i,s){return co(i.prev,i,s.prev)<0&&co(s.next,i,i.next)<0}function JU(i,s,n,r,a){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-n)*a)|i<<8))|i<<4))|i<<2))|i<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-r)*a)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function xle(i){var s=i,n=i;do{(s.x<n.x||s.x===n.x&&s.y<n.y)&&(n=s),s=s.next}while(s!==i);return n}function ik(i,s,n,r,a,o,u,l){return(a-u)*(s-l)-(i-u)*(o-l)>=0&&(i-u)*(r-l)-(n-u)*(s-l)>=0&&(n-u)*(o-l)-(a-u)*(r-l)>=0}function Mle(i,s){return i.next.i!==s.i&&i.prev.i!==s.i&&!function(i,s){var n=i;do{if(n.i!==i.i&&n.next.i!==i.i&&n.i!==s.i&&n.next.i!==s.i&&X8(n,n.next,i,s))return!0;n=n.next}while(n!==i);return!1}(i,s)&&(h1(i,s)&&h1(s,i)&&function(i,s){var n=i,r=!1,a=(i.x+s.x)/2,o=(i.y+s.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&a<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==i);return r}(i,s)&&(co(i.prev,i,s.prev)||co(i,s.prev,s))||aO(i,s)&&co(i.prev,i,i.next)>0&&co(s.prev,s,s.next)>0)}function co(i,s,n){return(s.y-i.y)*(n.x-s.x)-(s.x-i.x)*(n.y-s.y)}function aO(i,s){return i.x===s.x&&i.y===s.y}function X8(i,s,n,r){var a=oO(co(i,s,n)),o=oO(co(i,s,r)),u=oO(co(n,r,i)),l=oO(co(n,r,s));return!!(a!==o&&u!==l||0===a&&sO(i,n,s)||0===o&&sO(i,r,s)||0===u&&sO(n,i,r)||0===l&&sO(n,s,r))}function sO(i,s,n){return s.x<=Math.max(i.x,n.x)&&s.x>=Math.min(i.x,n.x)&&s.y<=Math.max(i.y,n.y)&&s.y>=Math.min(i.y,n.y)}function oO(i){return i>0?1:i<0?-1:0}function h1(i,s){return co(i.prev,i,i.next)<0?co(i,s,i.next)>=0&&co(i,i.prev,s)>=0:co(i,s,i.prev)<0||co(i,i.next,s)<0}function Q8(i,s){var n=new eV(i.i,i.x,i.y),r=new eV(s.i,s.x,s.y),a=i.next,o=s.prev;return i.next=s,s.prev=i,n.next=a,a.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function J8(i,s,n,r){var a=new eV(i,s,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function f1(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function eV(i,s,n){this.i=i,this.x=s,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ak=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,null,[{key:"area",value:function(n){for(var r=n.length,a=0,o=r-1,u=0;u<r;o=u++)a+=n[o].x*n[u].y-n[u].x*n[o].y;return.5*a}},{key:"isClockWise",value:function(n){return i.area(n)<0}},{key:"triangulateShape",value:function(n,r){var a=[],o=[],u=[];eW(n),tW(a,n);var l=n.length;r.forEach(eW);for(var f=0;f<r.length;f++)o.push(l),l+=r[f].length,tW(a,r[f]);for(var m=function(s,n){var f,m,b,w,C,T,I,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=n&&n.length,o=a?n[0]*r:s.length,u=$8(s,0,o,r,!0),l=[];if(!u||u.next===u.prev)return l;if(a&&(u=Ele(s,n,u,r)),s.length>80*r){f=b=s[0],m=w=s[1];for(var Z=r;Z<o;Z+=r)(C=s[Z])<f&&(f=C),(T=s[Z+1])<m&&(m=T),C>b&&(b=C),T>w&&(w=T);I=0!==(I=Math.max(b-f,w-m))?1/I:0}return c1(u,l,r,f,m,I),l}(a,o),b=0;b<m.length;b+=3)u.push(m.slice(b,b+3));return u}}]),i}();function eW(i){var s=i.length;s>2&&i[s-1].equals(i[0])&&i.pop()}function tW(i,s){for(var n=0;n<s.length;n++)i.push(s[n].x),i.push(s[n].y)}var sk=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l1([new un(.5,.5),new un(-.5,.5),new un(-.5,-.5),new un(.5,-.5)]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,M.Z)(this,n),(r=s.call(this)).type="ExtrudeGeometry",r.parameters={shapes:a,options:o},a=Array.isArray(a)?a:[a];for(var u=(0,Ja.Z)(r),l=[],f=[],m=0,b=a.length;m<b;m++){var w=a[m];C(w)}function C(T){var I=[],Z=void 0!==o.curveSegments?o.curveSegments:12,Y=void 0!==o.steps?o.steps:1,V=void 0!==o.depth?o.depth:1,W=void 0===o.bevelEnabled||o.bevelEnabled,se=void 0!==o.bevelThickness?o.bevelThickness:.2,fe=void 0!==o.bevelSize?o.bevelSize:se-.1,ve=void 0!==o.bevelOffset?o.bevelOffset:0,me=void 0!==o.bevelSegments?o.bevelSegments:3,pe=o.extrudePath,ke=void 0!==o.UVGenerator?o.UVGenerator:Rle;void 0!==o.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),V=o.amount);var je,Ze,ct,rt,ht,qe=!1;pe&&(je=pe.getSpacedPoints(Y),qe=!0,W=!1,Ze=pe.computeFrenetFrames(Y,!1),ct=new Ue,rt=new Ue,ht=new Ue),W||(me=0,se=0,fe=0,ve=0);var It=T.extractPoints(Z),_t=It.shape,Zt=It.holes;if(!ak.isClockWise(_t)){_t=_t.reverse();for(var Sn=0,kn=Zt.length;Sn<kn;Sn++){var dn=Zt[Sn];ak.isClockWise(dn)&&(Zt[Sn]=dn.reverse())}}for(var gn=ak.triangulateShape(_t,Zt),Hn=_t,Ur=0,Qn=Zt.length;Ur<Qn;Ur++)_t=_t.concat(Zt[Ur]);function bn(sr,_r,Hr){return _r||console.error("THREE.ExtrudeGeometry: vec does not exist"),_r.clone().multiplyScalar(Hr).add(sr)}var Jn=_t.length,_n=gn.length;function Yn(sr,_r,Hr){var Qi,br,xa,ns=sr.x-_r.x,ga=sr.y-_r.y,Fs=Hr.x-sr.x,Wu=Hr.y-sr.y,hu=ns*ns+ga*ga;if(Math.abs(ns*Wu-ga*Fs)>Number.EPSILON){var fo=Math.sqrt(hu),xg=Math.sqrt(Fs*Fs+Wu*Wu),E1=_r.x-ga/fo,cv=_r.y+ns/fo,i7=((Hr.x-Wu/xg-E1)*Wu-(Hr.y+Fs/xg-cv)*Fs)/(ns*Wu-ga*Fs),a7=(Qi=E1+ns*i7-sr.x)*Qi+(br=cv+ga*i7-sr.y)*br;if(a7<=2)return new un(Qi,br);xa=Math.sqrt(a7/2)}else{var DO=!1;ns>Number.EPSILON?Fs>Number.EPSILON&&(DO=!0):ns<-Number.EPSILON?Fs<-Number.EPSILON&&(DO=!0):Math.sign(ga)===Math.sign(Wu)&&(DO=!0),DO?(Qi=-ga,br=ns,xa=Math.sqrt(hu)):(Qi=ns,br=ga,xa=Math.sqrt(hu/2))}return new un(Qi/xa,br/xa)}for(var Gn=[],Vn=0,en=Hn.length,yn=en-1,An=Vn+1;Vn<en;Vn++,yn++,An++)yn===en&&(yn=0),An===en&&(An=0),Gn[Vn]=Yn(Hn[Vn],Hn[yn],Hn[An]);for(var Pi,Vr=[],ba=Gn.concat(),st=0,Ge=Zt.length;st<Ge;st++){var hn=Zt[st];Pi=[];for(var Ln=0,Kn=hn.length,ar=Kn-1,Mr=Ln+1;Ln<Kn;Ln++,ar++,Mr++)ar===Kn&&(ar=0),Mr===Kn&&(Mr=0),Pi[Ln]=Yn(hn[Ln],hn[ar],hn[Mr]);Vr.push(Pi),ba=ba.concat(Pi)}for(var Cr=0;Cr<me;Cr++){for(var hi=Cr/me,Ci=se*Math.cos(hi*Math.PI/2),na=fe*Math.sin(hi*Math.PI/2)+ve,xt=0,tr=Hn.length;xt<tr;xt++){var yr=bn(Hn[xt],Gn[xt],na);zr(yr.x,yr.y,-Ci)}for(var di=0,qr=Zt.length;di<qr;di++){var er=Zt[di];Pi=Vr[di];for(var Dt=0,nr=er.length;Dt<nr;Dt++){var Gi=bn(er[Dt],Pi[Dt],na);zr(Gi.x,Gi.y,-Ci)}}}for(var Fi=fe+ve,_i=0;_i<Jn;_i++){var ts=W?bn(_t[_i],ba[_i],Fi):_t[_i];qe?(rt.copy(Ze.normals[0]).multiplyScalar(ts.x),ct.copy(Ze.binormals[0]).multiplyScalar(ts.y),ht.copy(je[0]).add(rt).add(ct),zr(ht.x,ht.y,ht.z)):zr(ts.x,ts.y,0)}for(var ho=1;ho<=Y;ho++)for(var vl=0;vl<Jn;vl++){var Tu=W?bn(_t[vl],ba[vl],Fi):_t[vl];qe?(rt.copy(Ze.normals[ho]).multiplyScalar(Tu.x),ct.copy(Ze.binormals[ho]).multiplyScalar(Tu.y),ht.copy(je[ho]).add(rt).add(ct),zr(ht.x,ht.y,ht.z)):zr(Tu.x,Tu.y,V/Y*ho)}for(var Go=me-1;Go>=0;Go--){for(var w1=Go/me,ck=se*Math.cos(w1*Math.PI/2),EO=fe*Math.sin(w1*Math.PI/2)+ve,lv=0,CV=Hn.length;lv<CV;lv++){var hk=bn(Hn[lv],Gn[lv],EO);zr(hk.x,hk.y,V+ck)}for(var a0=0,kO=Zt.length;a0<kO;a0++){var CO=Zt[a0];Pi=Vr[a0];for(var fk=0,ze=CO.length;fk<ze;fk++){var zt=bn(CO[fk],Pi[fk],EO);qe?zr(zt.x,zt.y+je[Y-1].y,je[Y-1].x+ck):zr(zt.x,zt.y,V+ck)}}}function fn(sr,_r){for(var Hr=sr.length;--Hr>=0;){var Qi=Hr,br=Hr-1;br<0&&(br=sr.length-1);for(var xa=0,ns=Y+2*me;xa<ns;xa++){var ga=Jn*xa,Fs=Jn*(xa+1);ra(_r+Qi+ga,_r+br+ga,_r+br+Fs,_r+Qi+Fs)}}}function zr(sr,_r,Hr){I.push(sr),I.push(_r),I.push(Hr)}function ti(sr,_r,Hr){Ni(sr),Ni(_r),Ni(Hr);var Qi=l.length/3,br=ke.generateTopUV(u,l,Qi-3,Qi-2,Qi-1);Ki(br[0]),Ki(br[1]),Ki(br[2])}function ra(sr,_r,Hr,Qi){Ni(sr),Ni(_r),Ni(Qi),Ni(_r),Ni(Hr),Ni(Qi);var br=l.length/3,xa=ke.generateSideWallUV(u,l,br-6,br-3,br-2,br-1);Ki(xa[0]),Ki(xa[1]),Ki(xa[3]),Ki(xa[1]),Ki(xa[2]),Ki(xa[3])}function Ni(sr){l.push(I[3*sr+0]),l.push(I[3*sr+1]),l.push(I[3*sr+2])}function Ki(sr){f.push(sr.x),f.push(sr.y)}(function(){var sr=l.length/3;if(W){for(var _r=0,Hr=Jn*_r,Qi=0;Qi<_n;Qi++){var br=gn[Qi];ti(br[2]+Hr,br[1]+Hr,br[0]+Hr)}Hr=Jn*(_r=Y+2*me);for(var xa=0;xa<_n;xa++){var ns=gn[xa];ti(ns[0]+Hr,ns[1]+Hr,ns[2]+Hr)}}else{for(var ga=0;ga<_n;ga++){var Fs=gn[ga];ti(Fs[2],Fs[1],Fs[0])}for(var Wu=0;Wu<_n;Wu++){var hu=gn[Wu];ti(hu[0]+Jn*Y,hu[1]+Jn*Y,hu[2]+Jn*Y)}}u.addGroup(sr,l.length/3-sr,0)})(),function(){var sr=l.length/3,_r=0;fn(Hn,_r),_r+=Hn.length;for(var Hr=0,Qi=Zt.length;Hr<Qi;Hr++){var br=Zt[Hr];fn(br,_r),_r+=br.length}u.addGroup(sr,l.length/3-sr,1)}()}return r.setAttribute("position",new ci(l,3)),r.setAttribute("uv",new ci(f,2)),r.computeVertexNormals(),r}return(0,R.Z)(n,[{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return function(i,s,n){if(n.shapes=[],Array.isArray(i))for(var r=0,a=i.length;r<a;r++)n.shapes.push(i[r].uuid);else n.shapes.push(i.uuid);return void 0!==s.extrudePath&&(n.options.extrudePath=s.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,a)}}],[{key:"fromJSON",value:function(a,o){for(var u=[],l=0,f=a.shapes.length;l<f;l++)u.push(o[a.shapes[l]]);var b=a.options.extrudePath;return void 0!==b&&(a.options.extrudePath=(new XU[b.type]).fromJSON(b)),new n(u,a.options)}}]),n}(ma),Rle={generateTopUV:function(s,n,r,a,o){var f=n[3*a],m=n[3*a+1],b=n[3*o],w=n[3*o+1];return[new un(n[3*r],n[3*r+1]),new un(f,m),new un(b,w)]},generateSideWallUV:function(s,n,r,a,o,u){var l=n[3*r],f=n[3*r+1],m=n[3*r+2],b=n[3*a],w=n[3*a+1],C=n[3*a+2],T=n[3*o],I=n[3*o+1],Z=n[3*o+2],Y=n[3*u],V=n[3*u+1],W=n[3*u+2];return Math.abs(f-w)<Math.abs(l-b)?[new un(l,1-m),new un(b,1-C),new un(T,1-Z),new un(Y,1-W)]:[new un(f,1-m),new un(w,1-C),new un(I,1-Z),new un(V,1-W)]}},tV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,M.Z)(this,n);var u=(1+Math.sqrt(5))/2,l=[-1,u,0,1,u,0,-1,-u,0,1,-u,0,0,-1,u,0,1,u,0,-1,-u,0,1,-u,u,0,-1,u,0,1,-u,0,-1,-u,0,1],f=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(r=s.call(this,l,f,a,o)).type="IcosahedronGeometry",r.parameters={radius:a,detail:o},r}return(0,R.Z)(n,null,[{key:"fromJSON",value:function(a){return new n(a.radius,a.detail)}}]),n}(nk),nV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l1([new un(0,.5),new un(-.5,-.5),new un(.5,-.5)]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;(0,M.Z)(this,n),(r=s.call(this)).type="ShapeGeometry",r.parameters={shapes:a,curveSegments:o};var u=[],l=[],f=[],m=[],b=0,w=0;if(!1===Array.isArray(a))T(a);else for(var C=0;C<a.length;C++)T(a[C]),r.addGroup(b,w,C),b+=w,w=0;function T(I){var Z=l.length/3,Y=I.extractPoints(o),V=Y.shape,W=Y.holes;!1===ak.isClockWise(V)&&(V=V.reverse());for(var se=0,fe=W.length;se<fe;se++){var ve=W[se];!0===ak.isClockWise(ve)&&(W[se]=ve.reverse())}for(var me=ak.triangulateShape(V,W),pe=0,ke=W.length;pe<ke;pe++)V=V.concat(W[pe]);for(var qe=0,Ze=V.length;qe<Ze;qe++){var ct=V[qe];l.push(ct.x,ct.y,0),f.push(0,0,1),m.push(ct.x,ct.y)}for(var rt=0,ht=me.length;rt<ht;rt++){var It=me[rt];u.push(It[0]+Z,It[1]+Z,It[2]+Z),w+=3}}return r.setIndex(u),r.setAttribute("position",new ci(l,3)),r.setAttribute("normal",new ci(f,3)),r.setAttribute("uv",new ci(m,2)),r}return(0,R.Z)(n,[{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this);return function(i,s){if(s.shapes=[],Array.isArray(i))for(var n=0,r=i.length;n<r;n++)s.shapes.push(i[n].uuid);else s.shapes.push(i.uuid);return s}(this.parameters.shapes,a)}}],[{key:"fromJSON",value:function(a,o){for(var u=[],l=0,f=a.shapes.length;l<f;l++)u.push(o[a.shapes[l]]);return new n(u,a.curveSegments)}}]),n}(ma);(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="ShadowMaterial",a.color=new xr(0),a.transparent=!0,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this}}]),n})(pl).prototype.isShadowMaterial=!0;var rV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={STANDARD:""},a.type="MeshStandardMaterial",a.color=new xr(16777215),a.roughness=1,a.metalness=0,a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new xr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new un(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.roughnessMap=null,a.metalnessMap=null,a.alphaMap=null,a.envMap=null,a.envMapIntensity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.flatShading=!1,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}]),n}(pl);rV.prototype.isMeshStandardMaterial=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={STANDARD:"",PHYSICAL:""},a.type="MeshPhysicalMaterial",a.clearcoatMap=null,a.clearcoatRoughness=0,a.clearcoatRoughnessMap=null,a.clearcoatNormalScale=new un(1,1),a.clearcoatNormalMap=null,a.ior=1.5,Object.defineProperty((0,Ja.Z)(a),"reflectivity",{get:function(){return fl(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(u){this.ior=(1+.4*u)/(1-.4*u)}}),a.sheenTint=new xr(0),a.sheenRoughness=1,a.transmissionMap=null,a.thickness=.01,a.thicknessMap=null,a.attenuationDistance=0,a.attenuationTint=new xr(1,1,1),a.specularIntensity=1,a.specularIntensityMap=null,a.specularTint=new xr(1,1,1),a.specularTintMap=null,a._sheen=0,a._clearcoat=0,a._transmission=0,a.setValues(r),a}return(0,R.Z)(n,[{key:"sheen",get:function(){return this._sheen},set:function(a){this._sheen>0!=a>0&&this.version++,this._sheen=a}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(a){this._clearcoat>0!=a>0&&this.version++,this._clearcoat=a}},{key:"transmission",get:function(){return this._transmission},set:function(a){this._transmission>0!=a>0&&this.version++,this._transmission=a}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.ior=a.ior,this.sheen=a.sheen,this.sheenTint.copy(a.sheenTint),this.sheenRoughness=a.sheenRoughness,this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this.thickness=a.thickness,this.thicknessMap=a.thicknessMap,this.attenuationDistance=a.attenuationDistance,this.attenuationTint.copy(a.attenuationTint),this.specularIntensity=a.specularIntensity,this.specularIntensityMap=a.specularIntensityMap,this.specularTint.copy(a.specularTint),this.specularTintMap=a.specularTintMap,this}}]),n}(rV).prototype.isMeshPhysicalMaterial=!0;var uO=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshPhongMaterial",a.color=new xr(16777215),a.specular=new xr(1118481),a.shininess=30,a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new xr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new un(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.specularMap=null,a.alphaMap=null,a.envMap=null,a.combine=0,a.reflectivity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.flatShading=!1,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}]),n}(pl);uO.prototype.isMeshPhongMaterial=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={TOON:""},a.type="MeshToonMaterial",a.color=new xr(16777215),a.map=null,a.gradientMap=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new xr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new un(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.alphaMap=null,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}]),n}(pl).prototype.isMeshToonMaterial=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshNormalMaterial",a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new un(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.wireframe=!1,a.wireframeLinewidth=1,a.fog=!1,a.flatShading=!1,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.flatShading=a.flatShading,this}}]),n}(pl).prototype.isMeshNormalMaterial=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="MeshLambertMaterial",a.color=new xr(16777215),a.map=null,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=null,a.aoMapIntensity=1,a.emissive=new xr(0),a.emissiveIntensity=1,a.emissiveMap=null,a.specularMap=null,a.alphaMap=null,a.envMap=null,a.combine=0,a.reflectivity=1,a.refractionRatio=.98,a.wireframe=!1,a.wireframeLinewidth=1,a.wireframeLinecap="round",a.wireframeLinejoin="round",a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}]),n}(pl).prototype.isMeshLambertMaterial=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).defines={MATCAP:""},a.type="MeshMatcapMaterial",a.color=new xr(16777215),a.matcap=null,a.map=null,a.bumpMap=null,a.bumpScale=1,a.normalMap=null,a.normalMapType=0,a.normalScale=new un(1,1),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.alphaMap=null,a.flatShading=!1,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.flatShading=a.flatShading,this}}]),n}(pl).prototype.isMeshMatcapMaterial=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="LineDashedMaterial",a.scale=1,a.dashSize=3,a.gapSize=1,a.setValues(r),a}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this}}]),n}(Eg).prototype.isLineDashedMaterial=!0;var Xs={arraySlice:function(s,n,r){return Xs.isTypedArray(s)?new s.constructor(s.subarray(n,void 0!==r?r:s.length)):s.slice(n,r)},convertArray:function(s,n,r){return!s||!r&&s.constructor===n?s:"number"==typeof n.BYTES_PER_ELEMENT?new n(s):Array.prototype.slice.call(s)},isTypedArray:function(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)},getKeyframeOrder:function(s){for(var r=s.length,a=new Array(r),o=0;o!==r;++o)a[o]=o;return a.sort(function(u,l){return s[u]-s[l]}),a},sortedArray:function(s,n,r){for(var a=s.length,o=new s.constructor(a),u=0,l=0;l!==a;++u)for(var f=r[u]*n,m=0;m!==n;++m)o[l++]=s[f+m];return o},flattenJSON:function(s,n,r,a){for(var o=1,u=s[0];void 0!==u&&void 0===u[a];)u=s[o++];if(void 0!==u){var l=u[a];if(void 0!==l)if(Array.isArray(l))do{void 0!==(l=u[a])&&(n.push(u.time),r.push.apply(r,l)),u=s[o++]}while(void 0!==u);else if(void 0!==l.toArray)do{void 0!==(l=u[a])&&(n.push(u.time),l.toArray(r,r.length)),u=s[o++]}while(void 0!==u);else do{void 0!==(l=u[a])&&(n.push(u.time),r.push(l)),u=s[o++]}while(void 0!==u)}},subclip:function(s,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,u=s.clone();u.name=n;for(var l=[],f=0;f<u.tracks.length;++f){for(var m=u.tracks[f],b=m.getValueSize(),w=[],C=[],T=0;T<m.times.length;++T){var I=m.times[T]*o;if(!(I<r||I>=a)){w.push(m.times[T]);for(var Z=0;Z<b;++Z)C.push(m.values[T*b+Z])}}0!==w.length&&(m.times=Xs.convertArray(w,m.times.constructor),m.values=Xs.convertArray(C,m.values.constructor),l.push(m))}u.tracks=l;for(var Y=1/0,V=0;V<u.tracks.length;++V)Y>u.tracks[V].times[0]&&(Y=u.tracks[V].times[0]);for(var W=0;W<u.tracks.length;++W)u.tracks[W].shift(-1*Y);return u.resetDuration(),u},makeClipAdditive:function(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;a<=0&&(a=30);for(var o=r.tracks.length,u=n/a,l=function(w){var C=r.tracks[w],T=C.ValueTypeName;if("bool"===T||"string"===T)return"continue";var I=s.tracks.find(function(ln){return ln.name===C.name&&ln.ValueTypeName===T});if(void 0===I)return"continue";var Z=0,Y=C.getValueSize();C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Z=Y/3);var V=0,W=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(V=W/3);var se=C.times.length-1,fe=void 0;if(u<=C.times[0])fe=Xs.arraySlice(C.values,Z,Y-Z);else if(u>=C.times[se]){var pe=se*Y+Z;fe=Xs.arraySlice(C.values,pe,pe+Y-Z)}else{var je=C.createInterpolant(),qe=Z,Ze=Y-Z;je.evaluate(u),fe=Xs.arraySlice(je.resultBuffer,qe,Ze)}"quaternion"===T&&(new Gu).fromArray(fe).normalize().conjugate().toArray(fe);for(var rt=I.times.length,ht=0;ht<rt;++ht){var It=ht*W+V;if("quaternion"===T)Gu.multiplyQuaternionsFlat(I.values,It,fe,0,I.values,It);else for(var _t=W-2*V,Zt=0;Zt<_t;++Zt)I.values[It+Zt]-=fe[Zt]}},f=0;f<o;++f)l(f);return s.blendMode=2501,s}},Cg=function(){function i(s,n,r,a){(0,M.Z)(this,i),this.parameterPositions=s,this._cachedIndex=0,this.resultBuffer=void 0!==a?a:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return(0,R.Z)(i,[{key:"evaluate",value:function(n){var r=this.parameterPositions,a=this._cachedIndex,o=r[a],u=r[a-1];e:{t:{var l;n:{r:if(!(n<o)){for(var f=a+2;;){if(void 0===o){if(n<u)break r;return this._cachedIndex=a=r.length,this.afterEnd_(a-1,n,u)}if(a===f)break;if(u=o,n<(o=r[++a]))break t}l=r.length;break n}if(n>=u)break e;var m=r[1];n<m&&(a=2,u=m);for(var b=a-2;;){if(void 0===u)return this._cachedIndex=0,this.beforeStart_(0,n,o);if(a===b)break;if(o=u,n>=(u=r[--a-1]))break t}l=a,a=0}for(;a<l;){var w=a+l>>>1;n<r[w]?l=w:a=w+1}if(o=r[a],void 0===(u=r[a-1]))return this._cachedIndex=0,this.beforeStart_(0,n,o);if(void 0===o)return this._cachedIndex=a=r.length,this.afterEnd_(a-1,u,n)}this._cachedIndex=a,this.intervalChanged_(a,u,o)}return this.interpolate_(a,u,n,o)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(n){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,u=n*o,l=0;l!==o;++l)r[l]=a[u+l];return r}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),i}();Cg.prototype.beforeStart_=Cg.prototype.copySampleValue_,Cg.prototype.afterEnd_=Cg.prototype.copySampleValue_;var Nle=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){var l;return(0,M.Z)(this,n),(l=s.call(this,r,a,o,u))._weightPrev=-0,l._offsetPrev=-0,l._weightNext=-0,l._offsetNext=-0,l.DefaultSettings_={endingStart:CE,endingEnd:CE},l}return(0,R.Z)(n,[{key:"intervalChanged_",value:function(a,o,u){var l=this.parameterPositions,f=a-2,m=a+1,b=l[f],w=l[m];if(void 0===b)switch(this.getSettings_().endingStart){case DE:f=a,b=2*o-u;break;case 2402:b=o+l[f=l.length-2]-l[f+1];break;default:f=a,b=u}if(void 0===w)switch(this.getSettings_().endingEnd){case DE:m=a,w=2*u-o;break;case 2402:m=1,w=u+l[1]-l[0];break;default:m=a-1,w=o}var C=.5*(u-o),T=this.valueSize;this._weightPrev=C/(o-b),this._weightNext=C/(w-u),this._offsetPrev=f*T,this._offsetNext=m*T}},{key:"interpolate_",value:function(a,o,u,l){for(var f=this.resultBuffer,m=this.sampleValues,b=this.valueSize,w=a*b,C=w-b,T=this._offsetPrev,I=this._offsetNext,Z=this._weightPrev,Y=this._weightNext,V=(u-o)/(l-o),W=V*V,se=W*V,fe=-Z*se+2*Z*W-Z*V,ve=(1+Z)*se+(-1.5-2*Z)*W+(-.5+Z)*V+1,me=(-1-Y)*se+(1.5+Y)*W+.5*V,pe=Y*se-Y*W,ke=0;ke!==b;++ke)f[ke]=fe*m[T+ke]+ve*m[C+ke]+me*m[w+ke]+pe*m[I+ke];return f}}]),n}(Cg),_W=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){return(0,M.Z)(this,n),s.call(this,r,a,o,u)}return(0,R.Z)(n,[{key:"interpolate_",value:function(a,o,u,l){for(var f=this.resultBuffer,m=this.sampleValues,b=this.valueSize,w=a*b,C=w-b,T=(u-o)/(l-o),I=1-T,Z=0;Z!==b;++Z)f[Z]=m[C+Z]*I+m[w+Z]*T;return f}}]),n}(Cg),Zle=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){return(0,M.Z)(this,n),s.call(this,r,a,o,u)}return(0,R.Z)(n,[{key:"interpolate_",value:function(a){return this.copySampleValue_(a-1)}}]),n}(Cg),ep=function(){function i(s,n,r,a){if((0,M.Z)(this,i),void 0===s)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+s);this.name=s,this.times=Xs.convertArray(n,this.TimeBufferType),this.values=Xs.convertArray(r,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}return(0,R.Z)(i,[{key:"InterpolantFactoryMethodDiscrete",value:function(n){return new Zle(this.times,this.values,this.getValueSize(),n)}},{key:"InterpolantFactoryMethodLinear",value:function(n){return new _W(this.times,this.values,this.getValueSize(),n)}},{key:"InterpolantFactoryMethodSmooth",value:function(n){return new Nle(this.times,this.values,this.getValueSize(),n)}},{key:"setInterpolation",value:function(n){var r;switch(n){case 2300:r=this.InterpolantFactoryMethodDiscrete;break;case 2301:r=this.InterpolantFactoryMethodLinear;break;case 2302:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){var a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(n===this.DefaultInterpolation)throw new Error(a);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=r,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(n){if(0!==n)for(var r=this.times,a=0,o=r.length;a!==o;++a)r[a]+=n;return this}},{key:"scale",value:function(n){if(1!==n)for(var r=this.times,a=0,o=r.length;a!==o;++a)r[a]*=n;return this}},{key:"trim",value:function(n,r){for(var a=this.times,o=a.length,u=0,l=o-1;u!==o&&a[u]<n;)++u;for(;-1!==l&&a[l]>r;)--l;if(++l,0!==u||l!==o){u>=l&&(u=(l=Math.max(l,1))-1);var f=this.getValueSize();this.times=Xs.arraySlice(a,u,l),this.values=Xs.arraySlice(this.values,u*f,l*f)}return this}},{key:"validate",value:function(){var n=!0,r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);var a=this.times,o=this.values,u=a.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);for(var l=null,f=0;f!==u;f++){var m=a[f];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,m),n=!1;break}if(null!==l&&l>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,m,l),n=!1;break}l=m}if(void 0!==o&&Xs.isTypedArray(o))for(var b=0,w=o.length;b!==w;++b){var C=o[b];if(isNaN(C)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,b,C),n=!1;break}}return n}},{key:"optimize",value:function(){for(var n=Xs.arraySlice(this.times),r=Xs.arraySlice(this.values),a=this.getValueSize(),o=2302===this.getInterpolation(),u=n.length-1,l=1,f=1;f<u;++f){var m=!1,b=n[f];if(b!==n[f+1]&&(1!==f||b!==n[0]))if(o)m=!0;else for(var C=f*a,T=C-a,I=C+a,Z=0;Z!==a;++Z){var Y=r[C+Z];if(Y!==r[T+Z]||Y!==r[I+Z]){m=!0;break}}if(m){if(f!==l){n[l]=n[f];for(var V=f*a,W=l*a,se=0;se!==a;++se)r[W+se]=r[V+se]}++l}}if(u>0){n[l]=n[u];for(var fe=u*a,ve=l*a,me=0;me!==a;++me)r[ve+me]=r[fe+me];++l}return l!==n.length?(this.times=Xs.arraySlice(n,0,l),this.values=Xs.arraySlice(r,0,l*a)):(this.times=n,this.values=r),this}},{key:"clone",value:function(){var n=Xs.arraySlice(this.times,0),r=Xs.arraySlice(this.values,0),o=new(0,this.constructor)(this.name,n,r);return o.createInterpolant=this.createInterpolant,o}}],[{key:"toJSON",value:function(n){var a,r=n.constructor;if(r.toJSON!==this.toJSON)a=r.toJSON(n);else{a={name:n.name,times:Xs.convertArray(n.times,Array),values:Xs.convertArray(n.values,Array)};var o=n.getInterpolation();o!==n.DefaultInterpolation&&(a.interpolation=o)}return a.type=n.ValueTypeName,a}}]),i}();ep.prototype.TimeBufferType=Float32Array,ep.prototype.ValueBufferType=Float32Array,ep.prototype.DefaultInterpolation=2301;var ok=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ep);ok.prototype.ValueTypeName="bool",ok.prototype.ValueBufferType=Array,ok.prototype.DefaultInterpolation=2300,ok.prototype.InterpolantFactoryMethodLinear=void 0,ok.prototype.InterpolantFactoryMethodSmooth=void 0;var bW=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ep);bW.prototype.ValueTypeName="color";var lO=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ep);lO.prototype.ValueTypeName="number";var Ble=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o,u){return(0,M.Z)(this,n),s.call(this,r,a,o,u)}return(0,R.Z)(n,[{key:"interpolate_",value:function(a,o,u,l){for(var f=this.resultBuffer,m=this.sampleValues,b=this.valueSize,w=(u-o)/(l-o),C=a*b,T=C+b;C!==T;C+=4)Gu.slerpFlat(f,0,m,C-b,m,C,w);return f}}]),n}(Cg),d1=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return(0,R.Z)(n,[{key:"InterpolantFactoryMethodLinear",value:function(a){return new Ble(this.times,this.values,this.getValueSize(),a)}}]),n}(ep);d1.prototype.ValueTypeName="quaternion",d1.prototype.DefaultInterpolation=2301,d1.prototype.InterpolantFactoryMethodSmooth=void 0;var uk=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ep);uk.prototype.ValueTypeName="string",uk.prototype.ValueBufferType=Array,uk.prototype.DefaultInterpolation=2300,uk.prototype.InterpolantFactoryMethodLinear=void 0,uk.prototype.InterpolantFactoryMethodSmooth=void 0;var cO=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.apply(this,arguments)}return n}(ep);cO.prototype.ValueTypeName="vector";var wW=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;(0,M.Z)(this,i),this.name=s,this.tracks=r,this.duration=n,this.blendMode=a,this.uuid=Wh(),this.duration<0&&this.resetDuration()}return(0,R.Z)(i,[{key:"resetDuration",value:function(){for(var r=0,a=0,o=this.tracks.length;a!==o;++a){var u=this.tracks[a];r=Math.max(r,u.times[u.times.length-1])}return this.duration=r,this}},{key:"trim",value:function(){for(var n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var n=!0,r=0;r<this.tracks.length;r++)n=n&&this.tracks[r].validate();return n}},{key:"optimize",value:function(){for(var n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}},{key:"clone",value:function(){for(var n=[],r=0;r<this.tracks.length;r++)n.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,n,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(n){for(var r=[],a=n.tracks,o=1/(n.fps||1),u=0,l=a.length;u!==l;++u)r.push(Vle(a[u]).scale(o));var f=new this(n.name,n.duration,r,n.blendMode);return f.uuid=n.uuid,f}},{key:"toJSON",value:function(n){for(var r=[],a=n.tracks,o={name:n.name,duration:n.duration,tracks:r,uuid:n.uuid,blendMode:n.blendMode},u=0,l=a.length;u!==l;++u)r.push(ep.toJSON(a[u]));return o}},{key:"CreateFromMorphTargetSequence",value:function(n,r,a,o){for(var u=r.length,l=[],f=0;f<u;f++){var m=[],b=[];m.push((f+u-1)%u,f,(f+1)%u),b.push(0,1,0);var w=Xs.getKeyframeOrder(m);m=Xs.sortedArray(m,1,w),b=Xs.sortedArray(b,1,w),!o&&0===m[0]&&(m.push(u),b.push(b[0])),l.push(new lO(".morphTargetInfluences["+r[f].name+"]",m,b).scale(1/a))}return new this(n,-1,l)}},{key:"findByName",value:function(n,r){var a=n;Array.isArray(n)||(a=n.geometry&&n.geometry.animations||n.animations);for(var u=0;u<a.length;u++)if(a[u].name===r)return a[u];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(n,r,a){for(var o={},u=/^([\w-]*?)([\d]+)$/,l=0,f=n.length;l<f;l++){var m=n[l],b=m.name.match(u);if(b&&b.length>1){var w=b[1],C=o[w];C||(o[w]=C=[]),C.push(m)}}var T=[];for(var I in o)T.push(this.CreateFromMorphTargetSequence(I,o[I],r,a));return T}},{key:"parseAnimation",value:function(n,r){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var a=function(ke,je,qe,Ze,ct){if(0!==qe.length){var rt=[],ht=[];Xs.flattenJSON(qe,rt,ht,Ze),0!==rt.length&&ct.push(new ke(je,rt,ht))}},o=[],u=n.name||"default",l=n.fps||30,f=n.blendMode,m=n.length||-1,b=n.hierarchy||[],w=0;w<b.length;w++){var C=b[w].keys;if(C&&0!==C.length)if(C[0].morphTargets){var T={},I=void 0;for(I=0;I<C.length;I++)if(C[I].morphTargets)for(var Z=0;Z<C[I].morphTargets.length;Z++)T[C[I].morphTargets[Z]]=-1;for(var Y in T){for(var V=[],W=[],se=0;se!==C[I].morphTargets.length;++se){var fe=C[I];V.push(fe.time),W.push(fe.morphTarget===Y?1:0)}o.push(new lO(".morphTargetInfluence["+Y+"]",V,W))}m=T.length*(l||1)}else{var ve=".bones["+r[w].name+"]";a(cO,ve+".position",C,"pos",o),a(d1,ve+".quaternion",C,"rot",o),a(cO,ve+".scale",C,"scl",o)}}return 0===o.length?null:new this(u,m,o,f)}}]),i}();function Vle(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var s=function(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lO;case"vector":case"vector2":case"vector3":case"vector4":return cO;case"color":return bW;case"quaternion":return d1;case"bool":case"boolean":return ok;case"string":return uk}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){var n=[],r=[];Xs.flattenJSON(i.keys,n,r,"value"),i.times=n,i.values=r}return void 0!==s.parse?s.parse(i):new s(i.name,i.times,i.values,i.interpolation)}var lk={enabled:!1,files:{},add:function(s,n){!1!==this.enabled&&(this.files[s]=n)},get:function(s){if(!1!==this.enabled)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}},Hle=new function i(s,n,r){(0,M.Z)(this,i);var a=this,o=!1,u=0,l=0,f=void 0,m=[];this.onStart=void 0,this.onLoad=s,this.onProgress=n,this.onError=r,this.itemStart=function(b){l++,!1===o&&void 0!==a.onStart&&a.onStart(b,u,l),o=!0},this.itemEnd=function(b){u++,void 0!==a.onProgress&&a.onProgress(b,u,l),u===l&&(o=!1,void 0!==a.onLoad&&a.onLoad())},this.itemError=function(b){void 0!==a.onError&&a.onError(b)},this.resolveURL=function(b){return f?f(b):b},this.setURLModifier=function(b){return f=b,this},this.addHandler=function(b,w){return m.push(b,w),this},this.removeHandler=function(b){var w=m.indexOf(b);return-1!==w&&m.splice(w,2),this},this.getHandler=function(b){for(var w=0,C=m.length;w<C;w+=2){var T=m[w],I=m[w+1];if(T.global&&(T.lastIndex=0),T.test(b))return I}return null}},Dg=function(){function i(s){(0,M.Z)(this,i),this.manager=void 0!==s?s:Hle,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return(0,R.Z)(i,[{key:"load",value:function(){}},{key:"loadAsync",value:function(n,r){var a=this;return new Promise(function(o,u){a.load(n,o,r,u)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(n){return this.crossOrigin=n,this}},{key:"setWithCredentials",value:function(n){return this.withCredentials=n,this}},{key:"setPath",value:function(n){return this.path=n,this}},{key:"setResourcePath",value:function(n){return this.resourcePath=n,this}},{key:"setRequestHeader",value:function(n){return this.requestHeader=n,this}}]),i}(),Of={},EW=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,R.Z)(n,[{key:"load",value:function(a,o,u,l){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var f=this,m=lk.get(a);if(void 0!==m)return f.manager.itemStart(a),setTimeout(function(){o&&o(m),f.manager.itemEnd(a)},0),m;if(void 0===Of[a]){var C,w=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(w){var T=w[1],I=!!w[2],Z=w[3];Z=decodeURIComponent(Z),I&&(Z=atob(Z));try{var Y,V=(this.responseType||"").toLowerCase();switch(V){case"arraybuffer":case"blob":for(var W=new Uint8Array(Z.length),se=0;se<Z.length;se++)W[se]=Z.charCodeAt(se);Y="blob"===V?new Blob([W.buffer],{type:T}):W.buffer;break;case"document":var fe=new DOMParser;Y=fe.parseFromString(Z,T);break;case"json":Y=JSON.parse(Z);break;default:Y=Z}setTimeout(function(){o&&o(Y),f.manager.itemEnd(a)},0)}catch(me){setTimeout(function(){l&&l(me),f.manager.itemError(a),f.manager.itemEnd(a)},0)}}else{for(var ve in Of[a]=[],Of[a].push({onLoad:o,onProgress:u,onError:l}),(C=new XMLHttpRequest).open("GET",a,!0),C.addEventListener("load",function(me){var pe=this.response,ke=Of[a];if(delete Of[a],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),lk.add(a,pe);for(var je=0,qe=ke.length;je<qe;je++){var Ze=ke[je];Ze.onLoad&&Ze.onLoad(pe)}f.manager.itemEnd(a)}else{for(var ct=0,rt=ke.length;ct<rt;ct++){var ht=ke[ct];ht.onError&&ht.onError(me)}f.manager.itemError(a),f.manager.itemEnd(a)}},!1),C.addEventListener("progress",function(me){for(var pe=Of[a],ke=0,je=pe.length;ke<je;ke++){var qe=pe[ke];qe.onProgress&&qe.onProgress(me)}},!1),C.addEventListener("error",function(me){var pe=Of[a];delete Of[a];for(var ke=0,je=pe.length;ke<je;ke++){var qe=pe[ke];qe.onError&&qe.onError(me)}f.manager.itemError(a),f.manager.itemEnd(a)},!1),C.addEventListener("abort",function(me){var pe=Of[a];delete Of[a];for(var ke=0,je=pe.length;ke<je;ke++){var qe=pe[ke];qe.onError&&qe.onError(me)}f.manager.itemError(a),f.manager.itemEnd(a)},!1),void 0!==this.responseType&&(C.responseType=this.responseType),void 0!==this.withCredentials&&(C.withCredentials=this.withCredentials),C.overrideMimeType&&C.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)C.setRequestHeader(ve,this.requestHeader[ve]);C.send(null)}return f.manager.itemStart(a),C}Of[a].push({onLoad:o,onProgress:u,onError:l})}},{key:"setResponseType",value:function(a){return this.responseType=a,this}},{key:"setMimeType",value:function(a){return this.mimeType=a,this}}]),n}(Dg),kW=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,R.Z)(n,[{key:"load",value:function(a,o,u,l){void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var f=this,m=lk.get(a);if(void 0!==m)return f.manager.itemStart(a),setTimeout(function(){o&&o(m),f.manager.itemEnd(a)},0),m;var b=ER("img");function w(){b.removeEventListener("load",w,!1),b.removeEventListener("error",C,!1),lk.add(a,this),o&&o(this),f.manager.itemEnd(a)}function C(T){b.removeEventListener("load",w,!1),b.removeEventListener("error",C,!1),l&&l(T),f.manager.itemError(a),f.manager.itemEnd(a)}return b.addEventListener("load",w,!1),b.addEventListener("error",C,!1),"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(b.crossOrigin=this.crossOrigin),f.manager.itemStart(a),b.src=a,b}}]),n}(Dg),Gle=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,R.Z)(n,[{key:"load",value:function(a,o,u,l){var f=new zR,m=new kW(this.manager);m.setCrossOrigin(this.crossOrigin),m.setPath(this.path);var b=0;function w(T){m.load(a[T],function(I){f.images[T]=I,6==++b&&(f.needsUpdate=!0,o&&o(f))},void 0,l)}for(var C=0;C<a.length;++C)w(C);return f}}]),n}(Dg),Wle=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,R.Z)(n,[{key:"load",value:function(a,o,u,l){var f=new Mc,m=new kW(this.manager);return m.setCrossOrigin(this.crossOrigin),m.setPath(this.path),m.load(a,function(b){f.image=b,f.needsUpdate=!0,void 0!==o&&o(f)},u,l),f}}]),n}(Dg),tp=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,M.Z)(this,n),(a=s.call(this)).type="Light",a.color=new xr(r),a.intensity=o,a}return(0,R.Z)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,void 0!==this.groundColor&&(o.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(o.object.distance=this.distance),void 0!==this.angle&&(o.object.angle=this.angle),void 0!==this.decay&&(o.object.decay=this.decay),void 0!==this.penumbra&&(o.object.penumbra=this.penumbra),void 0!==this.shadow&&(o.object.shadow=this.shadow.toJSON()),o}}]),n}(ws);tp.prototype.isLight=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a,o){var u;return(0,M.Z)(this,n),(u=s.call(this,r,o)).type="HemisphereLight",u.position.copy(ws.DefaultUp),u.updateMatrix(),u.groundColor=new xr(a),u}return(0,R.Z)(n,[{key:"copy",value:function(a){return tp.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}]),n}(tp).prototype.isHemisphereLight=!0;var CW=new Wr,DW=new Ue,SW=new Ue,iV=function(){function i(s){(0,M.Z)(this,i),this.camera=s,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new un(512,512),this.map=null,this.mapPass=null,this.matrix=new Wr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new GR,this._frameExtents=new un(1,1),this._viewportCount=1,this._viewports=[new bs(0,0,1,1)]}return(0,R.Z)(i,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(n){var r=this.camera,a=this.matrix;DW.setFromMatrixPosition(n.matrixWorld),r.position.copy(DW),SW.setFromMatrixPosition(n.target.matrixWorld),r.lookAt(SW),r.updateMatrixWorld(),CW.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(CW),a.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),a.multiply(r.projectionMatrix),a.multiply(r.matrixWorldInverse)}},{key:"getViewport",value:function(n){return this._viewports[n]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var n={};return 0!==this.bias&&(n.bias=this.bias),0!==this.normalBias&&(n.normalBias=this.normalBias),1!==this.radius&&(n.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}]),i}(),AW=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this,new hc(50,1,.5,500))).focus=1,r}return(0,R.Z)(n,[{key:"updateMatrices",value:function(a){var o=this.camera,u=2*GT*a.angle*this.focus,l=this.mapSize.width/this.mapSize.height,f=a.distance||o.far;(u!==o.fov||l!==o.aspect||f!==o.far)&&(o.fov=u,o.aspect=l,o.far=f,o.updateProjectionMatrix()),(0,Se.Z)((0,ye.Z)(n.prototype),"updateMatrices",this).call(this,a)}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.focus=a.focus,this}}]),n}(iV);AW.prototype.isSpotLightShadow=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="SpotLight",o.position.copy(ws.DefaultUp),o.updateMatrix(),o.target=new ws,o.distance=u,o.angle=l,o.penumbra=f,o.decay=m,o.shadow=new AW,o}return(0,R.Z)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}]),n}(tp).prototype.isSpotLight=!0;var TW=new Wr,p1=new Ue,aV=new Ue,xW=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this,new hc(90,1,.5,500)))._frameExtents=new un(4,2),r._viewportCount=6,r._viewports=[new bs(2,1,1,1),new bs(0,1,1,1),new bs(3,1,1,1),new bs(1,1,1,1),new bs(3,0,1,1),new bs(1,0,1,1)],r._cubeDirections=[new Ue(1,0,0),new Ue(-1,0,0),new Ue(0,0,1),new Ue(0,0,-1),new Ue(0,1,0),new Ue(0,-1,0)],r._cubeUps=[new Ue(0,1,0),new Ue(0,1,0),new Ue(0,1,0),new Ue(0,1,0),new Ue(0,0,1),new Ue(0,0,-1)],r}return(0,R.Z)(n,[{key:"updateMatrices",value:function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=this.camera,l=this.matrix,f=a.distance||u.far;f!==u.far&&(u.far=f,u.updateProjectionMatrix()),p1.setFromMatrixPosition(a.matrixWorld),u.position.copy(p1),aV.copy(u.position),aV.add(this._cubeDirections[o]),u.up.copy(this._cubeUps[o]),u.lookAt(aV),u.updateMatrixWorld(),l.makeTranslation(-p1.x,-p1.y,-p1.z),TW.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TW)}}]),n}(iV);xW.prototype.isPointLightShadow=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="PointLight",o.distance=u,o.decay=l,o.shadow=new xW,o}return(0,R.Z)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(a){this.intensity=a/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}]),n}(tp).prototype.isPointLight=!0;var MW=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){return(0,M.Z)(this,n),s.call(this,new bU(-5,5,5,-5,.5,500))}return n}(iV);MW.prototype.isDirectionalLightShadow=!0;var sV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="DirectionalLight",o.position.copy(ws.DefaultUp),o.updateMatrix(),o.target=new ws,o.shadow=new MW,o}return(0,R.Z)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}]),n}(tp);sV.prototype.isDirectionalLight=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="AmbientLight",o}return n}(tp).prototype.isAmbientLight=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return(0,M.Z)(this,n),(o=s.call(this,r,a)).type="RectAreaLight",o.width=u,o.height=l,o}return(0,R.Z)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(a){this.intensity=a/(this.width*this.height*Math.PI)}},{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.width=a.width,this.height=a.height,this}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.width=this.width,o.object.height=this.height,o}}]),n}(tp).prototype.isRectAreaLight=!0;var IW=function(){function i(){(0,M.Z)(this,i),this.coefficients=[];for(var s=0;s<9;s++)this.coefficients.push(new Ue)}return(0,R.Z)(i,[{key:"set",value:function(n){for(var r=0;r<9;r++)this.coefficients[r].copy(n[r]);return this}},{key:"zero",value:function(){for(var n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}},{key:"getAt",value:function(n,r){var a=n.x,o=n.y,u=n.z,l=this.coefficients;return r.copy(l[0]).multiplyScalar(.282095),r.addScaledVector(l[1],.488603*o),r.addScaledVector(l[2],.488603*u),r.addScaledVector(l[3],.488603*a),r.addScaledVector(l[4],a*o*1.092548),r.addScaledVector(l[5],o*u*1.092548),r.addScaledVector(l[6],.315392*(3*u*u-1)),r.addScaledVector(l[7],a*u*1.092548),r.addScaledVector(l[8],.546274*(a*a-o*o)),r}},{key:"getIrradianceAt",value:function(n,r){var a=n.x,o=n.y,u=n.z,l=this.coefficients;return r.copy(l[0]).multiplyScalar(.886227),r.addScaledVector(l[1],1.023328*o),r.addScaledVector(l[2],1.023328*u),r.addScaledVector(l[3],1.023328*a),r.addScaledVector(l[4],.858086*a*o),r.addScaledVector(l[5],.858086*o*u),r.addScaledVector(l[6],.743125*u*u-.247708),r.addScaledVector(l[7],.858086*a*u),r.addScaledVector(l[8],.429043*(a*a-o*o)),r}},{key:"add",value:function(n){for(var r=0;r<9;r++)this.coefficients[r].add(n.coefficients[r]);return this}},{key:"addScaledSH",value:function(n,r){for(var a=0;a<9;a++)this.coefficients[a].addScaledVector(n.coefficients[a],r);return this}},{key:"scale",value:function(n){for(var r=0;r<9;r++)this.coefficients[r].multiplyScalar(n);return this}},{key:"lerp",value:function(n,r){for(var a=0;a<9;a++)this.coefficients[a].lerp(n.coefficients[a],r);return this}},{key:"equals",value:function(n){for(var r=0;r<9;r++)if(!this.coefficients[r].equals(n.coefficients[r]))return!1;return!0}},{key:"copy",value:function(n){return this.set(n.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.coefficients,o=0;o<9;o++)a[o].fromArray(n,r+3*o);return this}},{key:"toArray",value:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this.coefficients,o=0;o<9;o++)a[o].toArray(n,r+3*o);return n}}],[{key:"getBasisAt",value:function(n,r){var a=n.x,o=n.y,u=n.z;r[0]=.282095,r[1]=.488603*o,r[2]=.488603*u,r[3]=.488603*a,r[4]=1.092548*a*o,r[5]=1.092548*o*u,r[6]=.315392*(3*u*u-1),r[7]=1.092548*a*u,r[8]=.546274*(a*a-o*o)}}]),i}();IW.prototype.isSphericalHarmonics3=!0;var oV=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new IW,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,M.Z)(this,n),(r=s.call(this,void 0,o)).sh=a,r}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.sh.copy(a.sh),this}},{key:"fromJSON",value:function(a){return this.intensity=a.intensity,this.sh.fromArray(a.sh),this}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);return o.object.sh=this.sh.toArray(),o}}]),n}(tp);oV.prototype.isLightProbe=!0;var Qle=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,null,[{key:"decodeText",value:function(n){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(n);for(var r="",a=0,o=n.length;a<o;a++)r+=String.fromCharCode(n[a]);try{return decodeURIComponent(escape(r))}catch(u){return r}}},{key:"extractUrlBase",value:function(n){var r=n.lastIndexOf("/");return-1===r?"./":n.substr(0,r+1)}}]),i}();(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r;return(0,M.Z)(this,n),(r=s.call(this)).type="InstancedBufferGeometry",r.instanceCount=1/0,r}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.instanceCount=a.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var a=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,this);return a.instanceCount=this.instanceCount,a.isInstancedBufferGeometry=!0,a}}]),n})(ma).prototype.isInstancedBufferGeometry=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),a=s.call(this,r),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),a.options={premultiplyAlpha:"none"},a}return(0,R.Z)(n,[{key:"setOptions",value:function(a){return this.options=a,this}},{key:"load",value:function(a,o,u,l){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var f=this,m=lk.get(a);if(void 0!==m)return f.manager.itemStart(a),setTimeout(function(){o&&o(m),f.manager.itemEnd(a)},0),m;var b={};b.credentials="anonymous"===this.crossOrigin?"same-origin":"include",b.headers=this.requestHeader,fetch(a,b).then(function(w){return w.blob()}).then(function(w){return createImageBitmap(w,Object.assign(f.options,{colorSpaceConversion:"none"}))}).then(function(w){lk.add(a,w),o&&o(w),f.manager.itemEnd(a)}).catch(function(w){l&&l(w),f.manager.itemError(a),f.manager.itemEnd(a)}),f.manager.itemStart(a)}}]),n}(Dg).prototype.isImageBitmapLoader=!0;var hO,nce=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){return(0,M.Z)(this,n),s.call(this,r)}return(0,R.Z)(n,[{key:"load",value:function(a,o,u,l){var f=this,m=new EW(this.manager);m.setResponseType("arraybuffer"),m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(a,function(b){try{var w=b.slice(0);(void 0===hO&&(hO=new(window.AudioContext||window.webkitAudioContext)),hO).decodeAudioData(w,function(T){o(T)})}catch(T){l?l(T):console.error(T),f.manager.itemError(a)}},u,l)}}]),n}(Dg);(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,M.Z)(this,n),o=s.call(this,void 0,u);var l=(new xr).set(r),f=(new xr).set(a),m=new Ue(l.r,l.g,l.b),b=new Ue(f.r,f.g,f.b),w=Math.sqrt(Math.PI),C=w*Math.sqrt(.75);return o.sh.coefficients[0].copy(m).add(b).multiplyScalar(w),o.sh.coefficients[1].copy(m).sub(b).multiplyScalar(C),o}return n})(oV).prototype.isHemisphereLightProbe=!0,function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,M.Z)(this,n),a=s.call(this,void 0,o);var u=(new xr).set(r);return a.sh.coefficients[0].set(u.r,u.g,u.b).multiplyScalar(2*Math.sqrt(Math.PI)),a}return n}(oV).prototype.isAmbientLightProbe=!0;var ace=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).type="Audio",a.listener=r,a.context=r.context,a.gain=a.context.createGain(),a.gain.connect(r.getInput()),a.autoplay=!1,a.buffer=null,a.detune=0,a.loop=!1,a.loopStart=0,a.loopEnd=0,a.offset=0,a.duration=void 0,a.playbackRate=1,a.isPlaying=!1,a.hasPlaybackControl=!0,a.source=null,a.sourceType="empty",a._startedAt=0,a._progress=0,a._connected=!1,a.filters=[],a}return(0,R.Z)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this}},{key:"setMediaElementSource",value:function(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this}},{key:"setMediaStreamSource",value:function(a){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(a),this.connect(),this}},{key:"setBuffer",value:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+a;var o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,o=this.filters.length;a<o;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,o=this.filters.length;a<o;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(a){return a||(a=[]),!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice(),this}},{key:"setDetune",value:function(a){if(this.detune=a,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(a){return this.setFilters(a?[a]:[])}},{key:"setPlaybackRate",value:function(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(a){return this.loopStart=a,this}},{key:"setLoopEnd",value:function(a){return this.loopEnd=a,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}]),n}(ws),sce=function(){function i(s){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;(0,M.Z)(this,i),this.analyser=s.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),s.getOutput().connect(this.analyser)}return(0,R.Z)(i,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var n=0,r=this.getFrequencyData(),a=0;a<r.length;a++)n+=r[a];return n/r.length}}]),i}(),oce=function(){function i(s,n,r){var a,o,u;switch((0,M.Z)(this,i),this.binding=s,this.valueSize=r,n){case"quaternion":a=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:a=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return(0,R.Z)(i,[{key:"accumulate",value:function(n,r){var a=this.buffer,o=this.valueSize,u=n*o+o,l=this.cumulativeWeight;if(0===l){for(var f=0;f!==o;++f)a[u+f]=a[f];l=r}else this._mixBufferRegion(a,u,0,r/(l+=r),o);this.cumulativeWeight=l}},{key:"accumulateAdditive",value:function(n){var r=this.buffer,a=this.valueSize,o=a*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,o,0,n,a),this.cumulativeWeightAdditive+=n}},{key:"apply",value:function(n){var r=this.valueSize,a=this.buffer,o=n*r+r,u=this.cumulativeWeight,l=this.cumulativeWeightAdditive,f=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1&&this._mixBufferRegion(a,o,r*this._origIndex,1-u,r),l>0&&this._mixBufferRegionAdditive(a,o,this._addIndex*r,1,r);for(var b=r,w=r+r;b!==w;++b)if(a[b]!==a[b+r]){f.setValue(a,o);break}}},{key:"saveOriginalState",value:function(){var r=this.buffer,a=this.valueSize,o=a*this._origIndex;this.binding.getValue(r,o);for(var u=a,l=o;u!==l;++u)r[u]=r[o+u%a];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var n=this._addIndex*this.valueSize,r=n+this.valueSize,a=n;a<r;a++)this.buffer[a]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var n=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize,a=0;a<this.valueSize;a++)this.buffer[r+a]=this.buffer[n+a]}},{key:"_select",value:function(n,r,a,o,u){if(o>=.5)for(var l=0;l!==u;++l)n[r+l]=n[a+l]}},{key:"_slerp",value:function(n,r,a,o){Gu.slerpFlat(n,r,n,r,n,a,o)}},{key:"_slerpAdditive",value:function(n,r,a,o,u){var l=this._workIndex*u;Gu.multiplyQuaternionsFlat(n,l,n,r,n,a),Gu.slerpFlat(n,r,n,r,n,l,o)}},{key:"_lerp",value:function(n,r,a,o,u){for(var l=1-o,f=0;f!==u;++f){var m=r+f;n[m]=n[m]*l+n[a+f]*o}}},{key:"_lerpAdditive",value:function(n,r,a,o,u){for(var l=0;l!==u;++l){var f=r+l;n[f]=n[f]+n[a+l]*o}}}]),i}(),uV="\\[\\]\\.:\\/",uce=new RegExp("["+uV+"]","g"),lV="[^"+uV+"]",lce="[^"+uV.replace("\\.","")+"]",cce=/((?:WC+[\/:])*)/.source.replace("WC",lV),hce=/(WCOD+)?/.source.replace("WCOD",lce),fce=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lV),dce=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lV),pce=new RegExp("^"+cce+hce+fce+dce+"$"),vce=["material","materials","bones"],mce=function(){function i(s,n,r){(0,M.Z)(this,i);var a=r||Ps.parseTrackName(n);this._targetGroup=s,this._bindings=s.subscribe_(n,a)}return(0,R.Z)(i,[{key:"getValue",value:function(n,r){this.bind();var o=this._bindings[this._targetGroup.nCachedObjects_];void 0!==o&&o.getValue(n,r)}},{key:"setValue",value:function(n,r){for(var a=this._bindings,o=this._targetGroup.nCachedObjects_,u=a.length;o!==u;++o)a[o].setValue(n,r)}},{key:"bind",value:function(){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].bind()}},{key:"unbind",value:function(){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,a=n.length;r!==a;++r)n[r].unbind()}}]),i}(),Ps=function(){function i(s,n,r){(0,M.Z)(this,i),this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(s,this.parsedPath.nodeName)||s,this.rootNode=s,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return(0,R.Z)(i,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(n,r){n[r]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)n[r++]=a[o]}},{key:"_getValue_arrayElement",value:function(n,r){n[r]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(n,r){this.resolvedProperty.toArray(n,r)}},{key:"_setValue_direct",value:function(n,r){this.targetObject[this.propertyName]=n[r]}},{key:"_setValue_direct_setNeedsUpdate",value:function(n,r){this.targetObject[this.propertyName]=n[r],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(n,r){this.targetObject[this.propertyName]=n[r],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)a[o]=n[r++]}},{key:"_setValue_array_setNeedsUpdate",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)a[o]=n[r++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(n,r){for(var a=this.resolvedProperty,o=0,u=a.length;o!==u;++o)a[o]=n[r++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(n,r){this.resolvedProperty[this.propertyIndex]=n[r]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(n,r){this.resolvedProperty[this.propertyIndex]=n[r],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(n,r){this.resolvedProperty[this.propertyIndex]=n[r],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(n,r){this.resolvedProperty.fromArray(n,r)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(n,r){this.resolvedProperty.fromArray(n,r),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(n,r){this.resolvedProperty.fromArray(n,r),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(n,r){this.bind(),this.getValue(n,r)}},{key:"_setValue_unbound",value:function(n,r){this.bind(),this.setValue(n,r)}},{key:"bind",value:function(){var n=this.node,r=this.parsedPath,a=r.objectName,o=r.propertyName,u=r.propertyIndex;if(n||(n=i.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,n){if(a){var l=r.objectIndex;switch(a){case"materials":if(!n.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!n.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);n=n.material.materials;break;case"bones":if(!n.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);n=n.skeleton.bones;for(var f=0;f<n.length;f++)if(n[f].name===l){l=f;break}break;default:if(void 0===n[a])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);n=n[a]}if(void 0!==l){if(void 0===n[l])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);n=n[l]}}var m=n[o];if(void 0!==m){var w=this.Versioning.None;this.targetObject=n,void 0!==n.needsUpdate?w=this.Versioning.NeedsUpdate:void 0!==n.matrixWorldNeedsUpdate&&(w=this.Versioning.MatrixWorldNeedsUpdate);var C=this.BindingType.Direct;if(void 0!==u){if("morphTargetInfluences"===o){if(!n.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!n.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!n.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==n.morphTargetDictionary[u]&&(u=n.morphTargetDictionary[u])}C=this.BindingType.ArrayElement,this.resolvedProperty=m,this.propertyIndex=u}else void 0!==m.fromArray&&void 0!==m.toArray?(C=this.BindingType.HasFromToArray,this.resolvedProperty=m):Array.isArray(m)?(C=this.BindingType.EntireArray,this.resolvedProperty=m):this.propertyName=o;this.getValue=this.GetterByBindingType[C],this.setValue=this.SetterByBindingTypeAndVersioning[C][w]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+o+" but it wasn't found.",n)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(n,r,a){return n&&n.isAnimationObjectGroup?new i.Composite(n,r,a):new i(n,r,a)}},{key:"sanitizeNodeName",value:function(n){return n.replace(/\s/g,"_").replace(uce,"")}},{key:"parseTrackName",value:function(n){var r=pce.exec(n);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+n);var a={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},o=a.nodeName&&a.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){var u=a.nodeName.substring(o+1);-1!==vce.indexOf(u)&&(a.nodeName=a.nodeName.substring(0,o),a.objectName=u)}if(null===a.propertyName||0===a.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return a}},{key:"findNode",value:function(n,r){if(!r||""===r||"."===r||-1===r||r===n.name||r===n.uuid)return n;if(n.skeleton){var a=n.skeleton.getBoneByName(r);if(void 0!==a)return a}if(n.children){var u=function l(f){for(var m=0;m<f.length;m++){var b=f[m];if(b.name===r||b.uuid===r)return b;var w=l(b.children);if(w)return w}return null}(n.children);if(u)return u}return null}}]),i}();Ps.Composite=mce,Ps.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ps.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ps.prototype.GetterByBindingType=[Ps.prototype._getValue_direct,Ps.prototype._getValue_array,Ps.prototype._getValue_arrayElement,Ps.prototype._getValue_toArray],Ps.prototype.SetterByBindingTypeAndVersioning=[[Ps.prototype._setValue_direct,Ps.prototype._setValue_direct_setNeedsUpdate,Ps.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ps.prototype._setValue_array,Ps.prototype._setValue_array_setNeedsUpdate,Ps.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ps.prototype._setValue_arrayElement,Ps.prototype._setValue_arrayElement_setNeedsUpdate,Ps.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ps.prototype._setValue_fromArray,Ps.prototype._setValue_fromArray_setNeedsUpdate,Ps.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],function(){function i(){(0,M.Z)(this,i),this.uuid=Wh(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var s={};this._indicesByUUID=s;for(var n=0,r=arguments.length;n!==r;++n)s[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}return(0,R.Z)(i,[{key:"add",value:function(){for(var n=this._objects,r=this._indicesByUUID,a=this._paths,o=this._parsedPaths,u=this._bindings,l=u.length,f=void 0,m=n.length,b=this.nCachedObjects_,w=0,C=arguments.length;w!==C;++w){var T=arguments[w],I=T.uuid,Z=r[I];if(void 0===Z){Z=m++,r[I]=Z,n.push(T);for(var Y=0,V=l;Y!==V;++Y)u[Y].push(new Ps(T,a[Y],o[Y]))}else if(Z<b){f=n[Z];var W=--b,se=n[W];r[se.uuid]=Z,n[Z]=se,r[I]=W,n[W]=T;for(var fe=0,ve=l;fe!==ve;++fe){var me=u[fe],pe=me[W],ke=me[Z];me[Z]=pe,void 0===ke&&(ke=new Ps(T,a[fe],o[fe])),me[W]=ke}}else n[Z]!==f&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=b}},{key:"remove",value:function(){for(var n=this._objects,r=this._indicesByUUID,a=this._bindings,o=a.length,u=this.nCachedObjects_,l=0,f=arguments.length;l!==f;++l){var m=arguments[l],b=m.uuid,w=r[b];if(void 0!==w&&w>=u){var C=u++,T=n[C];r[T.uuid]=w,n[w]=T,r[b]=C,n[C]=m;for(var I=0,Z=o;I!==Z;++I){var Y=a[I],V=Y[C],W=Y[w];Y[w]=V,Y[C]=W}}}this.nCachedObjects_=u}},{key:"uncache",value:function(){for(var n=this._objects,r=this._indicesByUUID,a=this._bindings,o=a.length,u=this.nCachedObjects_,l=n.length,f=0,m=arguments.length;f!==m;++f){var b=arguments[f],w=b.uuid,C=r[w];if(void 0!==C)if(delete r[w],C<u){var T=--u,I=n[T],Z=--l,Y=n[Z];r[I.uuid]=C,n[C]=I,r[Y.uuid]=T,n[T]=Y,n.pop();for(var V=0,W=o;V!==W;++V){var se=a[V],fe=se[T],ve=se[Z];se[C]=fe,se[T]=ve,se.pop()}}else{var me=--l,pe=n[me];me>0&&(r[pe.uuid]=C),n[C]=pe,n.pop();for(var ke=0,je=o;ke!==je;++ke){var qe=a[ke];qe[C]=qe[me],qe.pop()}}}this.nCachedObjects_=u}},{key:"subscribe_",value:function(n,r){var a=this._bindingsIndicesByPath,o=a[n],u=this._bindings;if(void 0!==o)return u[o];var l=this._paths,f=this._parsedPaths,m=this._objects,w=this.nCachedObjects_,C=new Array(m.length);a[n]=o=u.length,l.push(n),f.push(r),u.push(C);for(var T=w,I=m.length;T!==I;++T)C[T]=new Ps(m[T],n,r);return C}},{key:"unsubscribe_",value:function(n){var r=this._bindingsIndicesByPath,a=r[n];if(void 0!==a){var o=this._paths,u=this._parsedPaths,l=this._bindings,f=l.length-1,m=l[f];r[n[f]]=a,l[a]=m,l.pop(),u[a]=u[f],u.pop(),o[a]=o[f],o.pop()}}}]),i}().prototype.isAnimationObjectGroup=!0;var yce=function(){function i(s,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;(0,M.Z)(this,i),this._mixer=s,this._clip=n,this._localRoot=r,this.blendMode=a;for(var o=n.tracks,u=o.length,l=new Array(u),f={endingStart:CE,endingEnd:CE},m=0;m!==u;++m){var b=o[m].createInterpolant(null);l[m]=b,b.settings=f}this._interpolantSettings=f,this._interpolants=l,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return(0,R.Z)(i,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(n){return this._startTime=n,this}},{key:"setLoop",value:function(n,r){return this.loop=n,this.repetitions=r,this}},{key:"setEffectiveWeight",value:function(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(n){return this._scheduleFading(n,0,1)}},{key:"fadeOut",value:function(n){return this._scheduleFading(n,1,0)}},{key:"crossFadeFrom",value:function(n,r,a){if(n.fadeOut(r),this.fadeIn(r),a){var o=this._clip.duration,u=n._clip.duration,f=o/u;n.warp(1,u/o,r),this.warp(f,1,r)}return this}},{key:"crossFadeTo",value:function(n,r,a){return n.crossFadeFrom(this,r,a)}},{key:"stopFading",value:function(){var n=this._weightInterpolant;return null!==n&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}},{key:"setEffectiveTimeScale",value:function(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}},{key:"syncWith",value:function(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}},{key:"halt",value:function(n){return this.warp(this._effectiveTimeScale,0,n)}},{key:"warp",value:function(n,r,a){var o=this._mixer,u=o.time,l=this.timeScale,f=this._timeScaleInterpolant;null===f&&(f=o._lendControlInterpolant(),this._timeScaleInterpolant=f);var m=f.parameterPositions,b=f.sampleValues;return m[0]=u,m[1]=u+a,b[0]=n/l,b[1]=r/l,this}},{key:"stopWarping",value:function(){var n=this._timeScaleInterpolant;return null!==n&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(n,r,a,o){if(this.enabled){var u=this._startTime;if(null!==u){var l=(n-u)*a;if(l<0||0===a)return;this._startTime=null,r=a*l}r*=this._updateTimeScale(n);var f=this._updateTime(r),m=this._updateWeight(n);if(m>0){var b=this._interpolants,w=this._propertyBindings;switch(this.blendMode){case 2501:for(var C=0,T=b.length;C!==T;++C)b[C].evaluate(f),w[C].accumulateAdditive(m);break;case 2500:default:for(var I=0,Z=b.length;I!==Z;++I)b[I].evaluate(f),w[I].accumulate(o,m)}}}else this._updateWeight(n)}},{key:"_updateWeight",value:function(n){var r=0;if(this.enabled){r=this.weight;var a=this._weightInterpolant;if(null!==a){var o=a.evaluate(n)[0];r*=o,n>a.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=r,r}},{key:"_updateTimeScale",value:function(n){var r=0;if(!this.paused){r=this.timeScale;var a=this._timeScaleInterpolant;null!==a&&(r*=a.evaluate(n)[0],n>a.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r))}return this._effectiveTimeScale=r,r}},{key:"_updateTime",value:function(n){var r=this._clip.duration,a=this.loop,o=this.time+n,u=this._loopCount,l=2202===a;if(0===n)return-1===u?o:l&&1==(1&u)?r-o:o;if(2200===a){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=r)o=r;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(-1===u&&(n>=0?(u=0,this._setEndings(!0,0===this.repetitions,l)):this._setEndings(0===this.repetitions,!0,l)),o>=r||o<0){var f=Math.floor(o/r);o-=r*f,u+=Math.abs(f);var m=this.repetitions-u;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o=n>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(1===m){var b=n<0;this._setEndings(b,!b,l)}else this._setEndings(!1,!1,l);this._loopCount=u,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=o;if(l&&1==(1&u))return r-o}return o}},{key:"_setEndings",value:function(n,r,a){var o=this._interpolantSettings;a?(o.endingStart=DE,o.endingEnd=DE):(o.endingStart=n?this.zeroSlopeAtStart?DE:CE:2402,o.endingEnd=r?this.zeroSlopeAtEnd?DE:CE:2402)}},{key:"_scheduleFading",value:function(n,r,a){var o=this._mixer,u=o.time,l=this._weightInterpolant;null===l&&(l=o._lendControlInterpolant(),this._weightInterpolant=l);var f=l.parameterPositions,m=l.sampleValues;return f[0]=u,m[0]=r,f[1]=u+n,m[1]=a,this}}]),i}();(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this))._root=r,a._initMemoryManager(),a._accuIndex=0,a.time=0,a.timeScale=1,a}return(0,R.Z)(n,[{key:"_bindAction",value:function(a,o){var u=a._localRoot||this._root,l=a._clip.tracks,f=l.length,m=a._propertyBindings,b=a._interpolants,w=u.uuid,C=this._bindingsByRootAndName,T=C[w];void 0===T&&(C[w]=T={});for(var I=0;I!==f;++I){var Z=l[I],Y=Z.name,V=T[Y];if(void 0!==V)m[I]=V;else{if(void 0!==(V=m[I])){null===V._cacheIndex&&(++V.referenceCount,this._addInactiveBinding(V,w,Y));continue}++(V=new oce(Ps.create(u,Y,o&&o._propertyBindings[I].binding.parsedPath),Z.ValueTypeName,Z.getValueSize())).referenceCount,this._addInactiveBinding(V,w,Y),m[I]=V}b[I].resultBuffer=V.buffer}}},{key:"_activateAction",value:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var o=(a._localRoot||this._root).uuid,u=a._clip.uuid,l=this._actionsByClip[u];this._bindAction(a,l&&l.knownActions[0]),this._addInactiveAction(a,u,o)}for(var f=a._propertyBindings,m=0,b=f.length;m!==b;++m){var w=f[m];0==w.useCount++&&(this._lendBinding(w),w.saveOriginalState())}this._lendAction(a)}}},{key:"_deactivateAction",value:function(a){if(this._isActiveAction(a)){for(var o=a._propertyBindings,u=0,l=o.length;u!==l;++u){var f=o[u];0==--f.useCount&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(a)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(a){var o=a._cacheIndex;return null!==o&&o<this._nActiveActions}},{key:"_addInactiveAction",value:function(a,o,u){var l=this._actions,f=this._actionsByClip,m=f[o];if(void 0===m)m={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,f[o]=m;else{var b=m.knownActions;a._byClipCacheIndex=b.length,b.push(a)}a._cacheIndex=l.length,l.push(a),m.actionByRoot[u]=a}},{key:"_removeInactiveAction",value:function(a){var o=this._actions,u=o[o.length-1],l=a._cacheIndex;u._cacheIndex=l,o[l]=u,o.pop(),a._cacheIndex=null;var f=a._clip.uuid,m=this._actionsByClip,b=m[f],w=b.knownActions,C=w[w.length-1],T=a._byClipCacheIndex;C._byClipCacheIndex=T,w[T]=C,w.pop(),a._byClipCacheIndex=null,delete b.actionByRoot[(a._localRoot||this._root).uuid],0===w.length&&delete m[f],this._removeInactiveBindingsForAction(a)}},{key:"_removeInactiveBindingsForAction",value:function(a){for(var o=a._propertyBindings,u=0,l=o.length;u!==l;++u){var f=o[u];0==--f.referenceCount&&this._removeInactiveBinding(f)}}},{key:"_lendAction",value:function(a){var o=this._actions,u=a._cacheIndex,l=this._nActiveActions++,f=o[l];a._cacheIndex=l,o[l]=a,f._cacheIndex=u,o[u]=f}},{key:"_takeBackAction",value:function(a){var o=this._actions,u=a._cacheIndex,l=--this._nActiveActions,f=o[l];a._cacheIndex=l,o[l]=a,f._cacheIndex=u,o[u]=f}},{key:"_addInactiveBinding",value:function(a,o,u){var l=this._bindingsByRootAndName,f=this._bindings,m=l[o];void 0===m&&(l[o]=m={}),m[u]=a,a._cacheIndex=f.length,f.push(a)}},{key:"_removeInactiveBinding",value:function(a){var o=this._bindings,u=a.binding,l=u.rootNode.uuid,f=u.path,m=this._bindingsByRootAndName,b=m[l],w=o[o.length-1],C=a._cacheIndex;w._cacheIndex=C,o[C]=w,o.pop(),delete b[f],0===Object.keys(b).length&&delete m[l]}},{key:"_lendBinding",value:function(a){var o=this._bindings,u=a._cacheIndex,l=this._nActiveBindings++,f=o[l];a._cacheIndex=l,o[l]=a,f._cacheIndex=u,o[u]=f}},{key:"_takeBackBinding",value:function(a){var o=this._bindings,u=a._cacheIndex,l=--this._nActiveBindings,f=o[l];a._cacheIndex=l,o[l]=a,f._cacheIndex=u,o[u]=f}},{key:"_lendControlInterpolant",value:function(){var a=this._controlInterpolants,o=this._nActiveControlInterpolants++,u=a[o];return void 0===u&&((u=new _W(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=o,a[o]=u),u}},{key:"_takeBackControlInterpolant",value:function(a){var o=this._controlInterpolants,u=a.__cacheIndex,l=--this._nActiveControlInterpolants,f=o[l];a.__cacheIndex=l,o[l]=a,f.__cacheIndex=u,o[u]=f}},{key:"clipAction",value:function(a,o,u){var l=o||this._root,f=l.uuid,m="string"==typeof a?wW.findByName(l,a):a,b=null!==m?m.uuid:a,w=this._actionsByClip[b],C=null;if(void 0===u&&(u=null!==m?m.blendMode:2500),void 0!==w){var T=w.actionByRoot[f];if(void 0!==T&&T.blendMode===u)return T;C=w.knownActions[0],null===m&&(m=C._clip)}if(null===m)return null;var I=new yce(this,m,o,u);return this._bindAction(I,C),this._addInactiveAction(I,b,f),I}},{key:"existingAction",value:function(a,o){var u=o||this._root,l=u.uuid,f="string"==typeof a?wW.findByName(u,a):a,b=this._actionsByClip[f?f.uuid:a];return void 0!==b&&b.actionByRoot[l]||null}},{key:"stopAllAction",value:function(){for(var a=this._actions,u=this._nActiveActions-1;u>=0;--u)a[u].stop();return this}},{key:"update",value:function(a){for(var o=this._actions,u=this._nActiveActions,l=this.time+=a*=this.timeScale,f=Math.sign(a),m=this._accuIndex^=1,b=0;b!==u;++b)o[b]._update(l,a,f,m);for(var C=this._bindings,T=this._nActiveBindings,I=0;I!==T;++I)C[I].apply(m);return this}},{key:"setTime",value:function(a){this.time=0;for(var o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(a)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(a){var o=this._actions,u=a.uuid,l=this._actionsByClip,f=l[u];if(void 0!==f){for(var m=f.knownActions,b=0,w=m.length;b!==w;++b){var C=m[b];this._deactivateAction(C);var T=C._cacheIndex,I=o[o.length-1];C._cacheIndex=null,C._byClipCacheIndex=null,I._cacheIndex=T,o[T]=I,o.pop(),this._removeInactiveBindingsForAction(C)}delete l[u]}}},{key:"uncacheRoot",value:function(a){var o=a.uuid,u=this._actionsByClip;for(var l in u){var m=u[l].actionByRoot[o];void 0!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}var w=this._bindingsByRootAndName[o];if(void 0!==w)for(var C in w){var T=w[C];T.restoreOriginalState(),this._removeInactiveBinding(T)}}},{key:"uncacheAction",value:function(a,o){var u=this.existingAction(a,o);null!==u&&(this._deactivateAction(u),this._removeInactiveAction(u))}}]),n})(cg).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var bce=function(){function i(s){(0,M.Z)(this,i),"string"==typeof s&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),s=arguments[1]),this.value=s}return(0,R.Z)(i,[{key:"clone",value:function(){return new i(void 0===this.value.clone?this.value:this.value.clone())}}]),i}();(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(0,M.Z)(this,n),(o=s.call(this,r,a)).meshPerAttribute=u,o}return(0,R.Z)(n,[{key:"copy",value:function(a){return(0,Se.Z)((0,ye.Z)(n.prototype),"copy",this).call(this,a),this.meshPerAttribute=a.meshPerAttribute,this}},{key:"clone",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"clone",this).call(this,a);return o.meshPerAttribute=this.meshPerAttribute,o}},{key:"toJSON",value:function(a){var o=(0,Se.Z)((0,ye.Z)(n.prototype),"toJSON",this).call(this,a);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}]),n})(t1).prototype.isInstancedInterleavedBuffer=!0,function(){function i(s,n,r,a,o){(0,M.Z)(this,i),this.buffer=s,this.type=n,this.itemSize=r,this.elementSize=a,this.count=o,this.version=0}return(0,R.Z)(i,[{key:"needsUpdate",set:function(n){!0===n&&this.version++}},{key:"setBuffer",value:function(n){return this.buffer=n,this}},{key:"setType",value:function(n,r){return this.type=n,this.elementSize=r,this}},{key:"setItemSize",value:function(n){return this.itemSize=n,this}},{key:"setCount",value:function(n){return this.count=n,this}}]),i}().prototype.isGLBufferAttribute=!0;var PW=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,M.Z)(this,i),this.radius=s,this.phi=n,this.theta=r,this}return(0,R.Z)(i,[{key:"set",value:function(n,r,a){return this.radius=n,this.phi=r,this.theta=a,this}},{key:"copy",value:function(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}},{key:"makeSafe",value:function(){var n=1e-6;return this.phi=Math.max(n,Math.min(Math.PI-n,this.phi)),this}},{key:"setFromVector3",value:function(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}},{key:"setFromCartesianCoords",value:function(n,r,a){return this.radius=Math.sqrt(n*n+r*r+a*a),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,a),this.phi=Math.acos(fl(r/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}(),FW=new un,v1=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new un(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new un(-1/0,-1/0);(0,M.Z)(this,i),this.min=s,this.max=n}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.min.copy(n),this.max.copy(r),this}},{key:"setFromPoints",value:function(n){this.makeEmpty();for(var r=0,a=n.length;r<a;r++)this.expandByPoint(n[r]);return this}},{key:"setFromCenterAndSize",value:function(n,r){var a=FW.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(a),this.max.copy(n).add(a),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(n){return this.min.copy(n.min),this.max.copy(n.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(n){return this.min.min(n),this.max.max(n),this}},{key:"expandByVector",value:function(n){return this.min.sub(n),this.max.add(n),this}},{key:"expandByScalar",value:function(n){return this.min.addScalar(-n),this.max.addScalar(n),this}},{key:"containsPoint",value:function(n){return!(n.x<this.min.x||n.x>this.max.x||n.y<this.min.y||n.y>this.max.y)}},{key:"containsBox",value:function(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}},{key:"getParameter",value:function(n,r){return r.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(n){return!(n.max.x<this.min.x||n.min.x>this.max.x||n.max.y<this.min.y||n.min.y>this.max.y)}},{key:"clampPoint",value:function(n,r){return r.copy(n).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(n){return FW.copy(n).clamp(this.min,this.max).sub(n).length()}},{key:"intersect",value:function(n){return this.min.max(n.min),this.max.min(n.max),this}},{key:"union",value:function(n){return this.min.min(n.min),this.max.max(n.max),this}},{key:"translate",value:function(n){return this.min.add(n),this.max.add(n),this}},{key:"equals",value:function(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}]),i}();v1.prototype.isBox2=!0;var RW=new Ue,fO=new Ue,Cce=function(){function i(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ue;(0,M.Z)(this,i),this.start=s,this.end=n}return(0,R.Z)(i,[{key:"set",value:function(n,r){return this.start.copy(n),this.end.copy(r),this}},{key:"copy",value:function(n){return this.start.copy(n.start),this.end.copy(n.end),this}},{key:"getCenter",value:function(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(n){return n.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(n,r){return this.delta(r).multiplyScalar(n).add(this.start)}},{key:"closestPointToPointParameter",value:function(n,r){RW.subVectors(n,this.start),fO.subVectors(this.end,this.start);var a=fO.dot(fO),u=fO.dot(RW)/a;return r&&(u=fl(u,0,1)),u}},{key:"closestPointToPoint",value:function(n,r,a){var o=this.closestPointToPointParameter(n,r);return this.delta(a).multiplyScalar(o).add(this.start)}},{key:"applyMatrix4",value:function(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}},{key:"equals",value:function(n){return n.start.equals(this.start)&&n.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),i}();(function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;return(0,M.Z)(this,n),(a=s.call(this)).material=r,a.render=function(){},a.hasPositions=!1,a.hasNormals=!1,a.hasColors=!1,a.hasUvs=!1,a.positionArray=null,a.normalArray=null,a.colorArray=null,a.uvArray=null,a.count=0,a}return n})(ws).prototype.isImmediateRenderObject=!0;var Sg=new Ue,dO=new Wr,cV=new Wr,Sce=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r){var a;(0,M.Z)(this,n);for(var o=OW(r),u=new ma,l=[],f=[],m=new xr(0,0,1),b=new xr(0,1,0),w=0;w<o.length;w++){var C=o[w];C.parent&&C.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),f.push(m.r,m.g,m.b),f.push(b.r,b.g,b.b))}u.setAttribute("position",new ci(l,3)),u.setAttribute("color",new ci(f,3));var T=new Eg({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(a=s.call(this,u,T)).type="SkeletonHelper",a.isSkeletonHelper=!0,a.root=r,a.bones=o,a.matrix=r.matrixWorld,a.matrixAutoUpdate=!1,a}return(0,R.Z)(n,[{key:"updateMatrixWorld",value:function(a){var o=this.bones,u=this.geometry,l=u.getAttribute("position");cV.copy(this.root.matrixWorld).invert();for(var f=0,m=0;f<o.length;f++){var b=o[f];b.parent&&b.parent.isBone&&(dO.multiplyMatrices(cV,b.matrixWorld),Sg.setFromMatrixPosition(dO),l.setXYZ(m,Sg.x,Sg.y,Sg.z),dO.multiplyMatrices(cV,b.parent.matrixWorld),Sg.setFromMatrixPosition(dO),l.setXYZ(m+1,Sg.x,Sg.y,Sg.z),m+=2)}u.getAttribute("position").needsUpdate=!0,(0,Se.Z)((0,ye.Z)(n.prototype),"updateMatrixWorld",this).call(this,a)}}]),n}(s1);function OW(i){var s=[];i&&i.isBone&&s.push(i);for(var n=0;n<i.children.length;n++)s.push.apply(s,OW(i.children[n]));return s}var Ace=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;(0,M.Z)(this,n),u=new xr(u),l=new xr(l);for(var f=o/2,m=a/o,b=a/2,w=[],C=[],T=0,I=0,Z=-b;T<=o;T++,Z+=m){w.push(-b,0,Z,b,0,Z),w.push(Z,0,-b,Z,0,b);var Y=T===f?u:l;Y.toArray(C,I),Y.toArray(C,I+=3),Y.toArray(C,I+=3),Y.toArray(C,I+=3),I+=3}var V=new ma;V.setAttribute("position",new ci(w,3)),V.setAttribute("color",new ci(C,3));var W=new Eg({vertexColors:!0,toneMapped:!1});return(r=s.call(this,V,W)).type="GridHelper",r}return n}(s1),Mce=new Float32Array(1);new Int32Array(Mce.buffer),Kh.create=function(i,s){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(Kh.prototype),i.prototype.constructor=i,i.prototype.getPoint=s,i},QU.prototype.fromPoints=function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)},Ace.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Sce.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Dg.prototype.extractUrlBase=function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Qle.extractUrlBase(i)},Dg.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},v1.prototype.center=function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},v1.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},v1.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},v1.prototype.size=function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)},qh.prototype.center=function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},qh.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},qh.prototype.isIntersectionBox=function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},qh.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},qh.prototype.size=function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)},FE.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},GR.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)},Cce.prototype.center=function(i){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(i)},dl.prototype.flattenToArrayOffset=function(i,s){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,s)},dl.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},dl.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},dl.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},dl.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},dl.prototype.getInverse=function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},Wr.prototype.extractPosition=function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},Wr.prototype.flattenToArrayOffset=function(i,s){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,s)},Wr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ue).setFromMatrixColumn(this,3)},Wr.prototype.setRotationFromQuaternion=function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},Wr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Wr.prototype.multiplyVector3=function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Wr.prototype.multiplyVector4=function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Wr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Wr.prototype.rotateAxis=function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},Wr.prototype.crossVector=function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Wr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Wr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Wr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Wr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Wr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Wr.prototype.applyToBufferAttribute=function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},Wr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Wr.prototype.makeFrustum=function(i,s,n,r,a,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,s,r,n,a,o)},Wr.prototype.getInverse=function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},ov.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)},Gu.prototype.multiplyVector3=function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)},Gu.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},RE.prototype.isIntersectionBox=function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},RE.prototype.isIntersectionPlane=function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},RE.prototype.isIntersectionSphere=function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},Ic.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ic.prototype.barycoordFromPoint=function(i,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,s)},Ic.prototype.midpoint=function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},Ic.prototypenormal=function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},Ic.prototype.plane=function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)},Ic.barycoordFromPoint=function(i,s,n,r,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ic.getBarycoord(i,s,n,r,a)},Ic.normal=function(i,s,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ic.getNormal(i,s,n,r)},l1.prototype.extractAllPoints=function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},l1.prototype.extrude=function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new sk(this,i)},l1.prototype.makeGeometry=function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new nV(this,i)},un.prototype.fromAttribute=function(i,s,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,s,n)},un.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},un.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ue.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Ue.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Ue.prototype.getPositionFromMatrix=function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},Ue.prototype.getScaleFromMatrix=function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},Ue.prototype.getColumnFromMatrix=function(i,s){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(s,i)},Ue.prototype.applyProjection=function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},Ue.prototype.fromAttribute=function(i,s,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,s,n)},Ue.prototype.distanceToManhattan=function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},Ue.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},bs.prototype.fromAttribute=function(i,s,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,s,n)},bs.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ws.prototype.getChildByName=function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},ws.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ws.prototype.translate=function(i,s){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(s,i)},ws.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ws.prototype.applyMatrix=function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(ws.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(s){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=s}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Rl.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Rl.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),P8.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},hc.prototype.setLens=function(i,s){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==s&&(this.filmGauge=s),this.setFocalLength(i)},Object.defineProperties(tp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(s){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=s}},shadowCameraLeft:{set:function(s){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=s}},shadowCameraRight:{set:function(s){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=s}},shadowCameraTop:{set:function(s){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=s}},shadowCameraBottom:{set:function(s){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=s}},shadowCameraNear:{set:function(s){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=s}},shadowCameraFar:{set:function(s){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=s}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(s){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=s}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(s){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=s}},shadowMapHeight:{set:function(s){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=s}}}),Object.defineProperties(cu.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===HT},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(HT)}}}),cu.prototype.setDynamic=function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?HT:zT),this},cu.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},cu.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ma.prototype.addIndex=function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},ma.prototype.addAttribute=function(i,s){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),s&&s.isBufferAttribute||s&&s.isInterleavedBufferAttribute?"index"===i?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(s),this):this.setAttribute(i,s):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new cu(arguments[1],arguments[2])))},ma.prototype.addDrawCall=function(i,s,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,s)},ma.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ma.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ma.prototype.removeAttribute=function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)},ma.prototype.applyMatrix=function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},Object.defineProperties(ma.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),t1.prototype.setDynamic=function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?HT:zT),this},t1.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},sk.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},sk.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},sk.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},PU.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},bce.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(pl.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new xr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(s){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===s}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(s){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=s}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(yg.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(s){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=s}}}),us.prototype.clearTarget=function(i,s,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(s,n,r)},us.prototype.animate=function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},us.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},us.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},us.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},us.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},us.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},us.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},us.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},us.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},us.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},us.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},us.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},us.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},us.prototype.enableScissorTest=function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},us.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},us.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},us.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},us.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},us.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},us.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},us.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},us.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},us.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},us.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(us.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=s}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(s){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=s}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(s){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===s?Q_:Fl}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(E8.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Xd.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=s}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(s){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=s}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=s}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(s){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=s}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(s){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=s}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(s){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=s}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(s){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=s}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(s){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=s}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(s){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=s}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(s){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=s}}}),ace.prototype.load=function(i){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var s=this;return(new nce).load(i,function(r){s.setBuffer(r)}),this},sce.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},mU.prototype.updateCubeMap=function(i,s){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,s)},mU.prototype.clear=function(i,s,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,s,n,r)},xE.crossOrigin=void 0,xE.loadTexture=function(i,s,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var a=new Wle;a.setCrossOrigin(this.crossOrigin);var o=a.load(i,n,void 0,r);return s&&(o.mapping=s),o},xE.loadTextureCube=function(i,s,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var a=new Gle;a.setCrossOrigin(this.crossOrigin);var o=a.load(i,n,void 0,r);return s&&(o.mapping=s),o},xE.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},xE.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"133"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="133");var LW={type:"change"},hV={type:"start"},fV={type:"end"},Ice=function(i){(0,x.Z)(n,i);var s=(0,oe.Z)(n);function n(r,a){var o,Dt,nr,Gi,Fi,_i,ts;(0,M.Z)(this,n),o=s.call(this),void 0===a&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),a===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),o.object=r,o.domElement=a,o.domElement.style.touchAction="none",o.enabled=!0,o.target=new Ue,o.minDistance=0,o.maxDistance=1/0,o.minZoom=0,o.maxZoom=1/0,o.minPolarAngle=0,o.maxPolarAngle=Math.PI,o.minAzimuthAngle=-1/0,o.maxAzimuthAngle=1/0,o.enableDamping=!1,o.dampingFactor=.05,o.enableZoom=!0,o.zoomSpeed=1,o.enableRotate=!0,o.rotateSpeed=1,o.enablePan=!0,o.panSpeed=1,o.screenSpacePanning=!0,o.keyPanSpeed=7,o.autoRotate=!1,o.autoRotateSpeed=2,o.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},o.mouseButtons={LEFT:gE.ROTATE,MIDDLE:gE.DOLLY,RIGHT:gE.PAN},o.touches={ONE:yE.ROTATE,TWO:yE.DOLLY_PAN},o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.zoom0=o.object.zoom,o._domElementKeyEvents=null,o.getPolarAngle=function(){return b.phi},o.getAzimuthalAngle=function(){return b.theta},o.getDistance=function(){return this.object.position.distanceTo(this.target)},o.listenToKeyEvents=function(Dt){Dt.addEventListener("keydown",hi),this._domElementKeyEvents=Dt},o.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},o.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(LW),u.update(),f=l.NONE},o.update=(Dt=new Ue,nr=(new Gu).setFromUnitVectors(r.up,new Ue(0,1,0)),Gi=nr.clone().invert(),Fi=new Ue,_i=new Gu,ts=2*Math.PI,function(){var vl=u.object.position;Dt.copy(vl).sub(u.target),Dt.applyQuaternion(nr),b.setFromVector3(Dt),u.autoRotate&&f===l.NONE&&ct(2*Math.PI/60/60*u.autoRotateSpeed),u.enableDamping?(b.theta+=w.theta*u.dampingFactor,b.phi+=w.phi*u.dampingFactor):(b.theta+=w.theta,b.phi+=w.phi);var Tu=u.minAzimuthAngle,Go=u.maxAzimuthAngle;return isFinite(Tu)&&isFinite(Go)&&(Tu<-Math.PI?Tu+=ts:Tu>Math.PI&&(Tu-=ts),Go<-Math.PI?Go+=ts:Go>Math.PI&&(Go-=ts),b.theta=Tu<=Go?Math.max(Tu,Math.min(Go,b.theta)):b.theta>(Tu+Go)/2?Math.max(Tu,b.theta):Math.min(Go,b.theta)),b.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=C,b.radius=Math.max(u.minDistance,Math.min(u.maxDistance,b.radius)),!0===u.enableDamping?u.target.addScaledVector(T,u.dampingFactor):u.target.add(T),Dt.setFromSpherical(b),Dt.applyQuaternion(Gi),vl.copy(u.target).add(Dt),u.object.lookAt(u.target),!0===u.enableDamping?(w.theta*=1-u.dampingFactor,w.phi*=1-u.dampingFactor,T.multiplyScalar(1-u.dampingFactor)):(w.set(0,0,0),T.set(0,0,0)),C=1,!!(I||Fi.distanceToSquared(u.object.position)>m||8*(1-_i.dot(u.object.quaternion))>m)&&(u.dispatchEvent(LW),Fi.copy(u.object.position),_i.copy(u.object.quaternion),I=!1,!0)}),o.dispose=function(){u.domElement.removeEventListener("contextmenu",tr),u.domElement.removeEventListener("pointerdown",st),u.domElement.removeEventListener("pointercancel",Ln),u.domElement.removeEventListener("wheel",Cr),u.domElement.removeEventListener("pointermove",Ge),u.domElement.removeEventListener("pointerup",hn),null!==u._domElementKeyEvents&&u._domElementKeyEvents.removeEventListener("keydown",hi)};var u=(0,Ja.Z)(o),l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=l.NONE,m=1e-6,b=new PW,w=new PW,C=1,T=new Ue,I=!1,Z=new un,Y=new un,V=new un,W=new un,se=new un,fe=new un,ve=new un,me=new un,pe=new un,ke=[],je={};function Ze(){return Math.pow(.95,u.zoomSpeed)}function ct(Dt){w.theta-=Dt}function rt(Dt){w.phi-=Dt}var ht=function(){var Dt=new Ue;return function(Gi,Fi){Dt.setFromMatrixColumn(Fi,0),Dt.multiplyScalar(-Gi),T.add(Dt)}}(),It=function(){var Dt=new Ue;return function(Gi,Fi){!0===u.screenSpacePanning?Dt.setFromMatrixColumn(Fi,1):(Dt.setFromMatrixColumn(Fi,0),Dt.crossVectors(u.object.up,Dt)),Dt.multiplyScalar(Gi),T.add(Dt)}}(),_t=function(){var Dt=new Ue;return function(Gi,Fi){var _i=u.domElement;if(u.object.isPerspectiveCamera){Dt.copy(u.object.position).sub(u.target);var ho=Dt.length();ho*=Math.tan(u.object.fov/2*Math.PI/180),ht(2*Gi*ho/_i.clientHeight,u.object.matrix),It(2*Fi*ho/_i.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(ht(Gi*(u.object.right-u.object.left)/u.object.zoom/_i.clientWidth,u.object.matrix),It(Fi*(u.object.top-u.object.bottom)/u.object.zoom/_i.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function Zt(Dt){u.object.isPerspectiveCamera?C/=Dt:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*Dt)),u.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function ln(Dt){u.object.isPerspectiveCamera?C*=Dt:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/Dt)),u.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function Sn(Dt){Z.set(Dt.clientX,Dt.clientY)}function dn(Dt){W.set(Dt.clientX,Dt.clientY)}function Jn(){1===ke.length?Z.set(ke[0].pageX,ke[0].pageY):Z.set(.5*(ke[0].pageX+ke[1].pageX),.5*(ke[0].pageY+ke[1].pageY))}function _n(){1===ke.length?W.set(ke[0].pageX,ke[0].pageY):W.set(.5*(ke[0].pageX+ke[1].pageX),.5*(ke[0].pageY+ke[1].pageY))}function Yn(){var Dt=ke[0].pageX-ke[1].pageX,nr=ke[0].pageY-ke[1].pageY,Gi=Math.sqrt(Dt*Dt+nr*nr);ve.set(0,Gi)}function en(Dt){if(1==ke.length)Y.set(Dt.pageX,Dt.pageY);else{var nr=er(Dt);Y.set(.5*(Dt.pageX+nr.x),.5*(Dt.pageY+nr.y))}V.subVectors(Y,Z).multiplyScalar(u.rotateSpeed);var _i=u.domElement;ct(2*Math.PI*V.x/_i.clientHeight),rt(2*Math.PI*V.y/_i.clientHeight),Z.copy(Y)}function yn(Dt){if(1===ke.length)se.set(Dt.pageX,Dt.pageY);else{var nr=er(Dt);se.set(.5*(Dt.pageX+nr.x),.5*(Dt.pageY+nr.y))}fe.subVectors(se,W).multiplyScalar(u.panSpeed),_t(fe.x,fe.y),W.copy(se)}function An(Dt){var nr=er(Dt),Gi=Dt.pageX-nr.x,Fi=Dt.pageY-nr.y,_i=Math.sqrt(Gi*Gi+Fi*Fi);me.set(0,_i),pe.set(0,Math.pow(me.y/ve.y,u.zoomSpeed)),Zt(pe.y),ve.copy(me)}function st(Dt){!1!==u.enabled&&(0===ke.length&&(u.domElement.setPointerCapture(Dt.pointerId),u.domElement.addEventListener("pointermove",Ge),u.domElement.addEventListener("pointerup",hn)),function(Dt){ke.push(Dt)}(Dt),"touch"===Dt.pointerType?function(Dt){switch(qr(Dt),ke.length){case 1:switch(u.touches.ONE){case yE.ROTATE:if(!1===u.enableRotate)return;Jn(),f=l.TOUCH_ROTATE;break;case yE.PAN:if(!1===u.enablePan)return;_n(),f=l.TOUCH_PAN;break;default:f=l.NONE}break;case 2:switch(u.touches.TWO){case yE.DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;u.enableZoom&&Yn(),u.enablePan&&_n(),f=l.TOUCH_DOLLY_PAN;break;case yE.DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;u.enableZoom&&Yn(),u.enableRotate&&Jn(),f=l.TOUCH_DOLLY_ROTATE;break;default:f=l.NONE}break;default:f=l.NONE}f!==l.NONE&&u.dispatchEvent(hV)}(Dt):function(Dt){var nr;switch(Dt.button){case 0:nr=u.mouseButtons.LEFT;break;case 1:nr=u.mouseButtons.MIDDLE;break;case 2:nr=u.mouseButtons.RIGHT;break;default:nr=-1}switch(nr){case gE.DOLLY:if(!1===u.enableZoom)return;(function(Dt){ve.set(Dt.clientX,Dt.clientY)})(Dt),f=l.DOLLY;break;case gE.ROTATE:if(Dt.ctrlKey||Dt.metaKey||Dt.shiftKey){if(!1===u.enablePan)return;dn(Dt),f=l.PAN}else{if(!1===u.enableRotate)return;Sn(Dt),f=l.ROTATE}break;case gE.PAN:if(Dt.ctrlKey||Dt.metaKey||Dt.shiftKey){if(!1===u.enableRotate)return;Sn(Dt),f=l.ROTATE}else{if(!1===u.enablePan)return;dn(Dt),f=l.PAN}break;default:f=l.NONE}f!==l.NONE&&u.dispatchEvent(hV)}(Dt))}function Ge(Dt){!1!==u.enabled&&("touch"===Dt.pointerType?function(Dt){switch(qr(Dt),f){case l.TOUCH_ROTATE:if(!1===u.enableRotate)return;en(Dt),u.update();break;case l.TOUCH_PAN:if(!1===u.enablePan)return;yn(Dt),u.update();break;case l.TOUCH_DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;(function(Dt){u.enableZoom&&An(Dt),u.enablePan&&yn(Dt)})(Dt),u.update();break;case l.TOUCH_DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;(function(Dt){u.enableZoom&&An(Dt),u.enableRotate&&en(Dt)})(Dt),u.update();break;default:f=l.NONE}}(Dt):function(Dt){if(!1!==u.enabled)switch(f){case l.ROTATE:if(!1===u.enableRotate)return;!function(Dt){Y.set(Dt.clientX,Dt.clientY),V.subVectors(Y,Z).multiplyScalar(u.rotateSpeed);var nr=u.domElement;ct(2*Math.PI*V.x/nr.clientHeight),rt(2*Math.PI*V.y/nr.clientHeight),Z.copy(Y),u.update()}(Dt);break;case l.DOLLY:if(!1===u.enableZoom)return;!function(Dt){me.set(Dt.clientX,Dt.clientY),pe.subVectors(me,ve),pe.y>0?Zt(Ze()):pe.y<0&&ln(Ze()),ve.copy(me),u.update()}(Dt);break;case l.PAN:if(!1===u.enablePan)return;!function(Dt){se.set(Dt.clientX,Dt.clientY),fe.subVectors(se,W).multiplyScalar(u.panSpeed),_t(fe.x,fe.y),W.copy(se),u.update()}(Dt)}}(Dt))}function hn(Dt){!1!==u.enabled&&(u.dispatchEvent(fV),f=l.NONE,di(Dt),0===ke.length&&(u.domElement.releasePointerCapture(Dt.pointerId),u.domElement.removeEventListener("pointermove",Ge),u.domElement.removeEventListener("pointerup",hn)))}function Ln(Dt){di(Dt)}function Cr(Dt){!1===u.enabled||!1===u.enableZoom||f!==l.NONE&&f!==l.ROTATE||(Dt.preventDefault(),u.dispatchEvent(hV),function(Dt){Dt.deltaY<0?ln(Ze()):Dt.deltaY>0&&Zt(Ze()),u.update()}(Dt),u.dispatchEvent(fV))}function hi(Dt){!1===u.enabled||!1===u.enablePan||function(Dt){var nr=!1;switch(Dt.code){case u.keys.UP:_t(0,u.keyPanSpeed),nr=!0;break;case u.keys.BOTTOM:_t(0,-u.keyPanSpeed),nr=!0;break;case u.keys.LEFT:_t(u.keyPanSpeed,0),nr=!0;break;case u.keys.RIGHT:_t(-u.keyPanSpeed,0),nr=!0}nr&&(Dt.preventDefault(),u.update())}(Dt)}function tr(Dt){!1!==u.enabled&&Dt.preventDefault()}function di(Dt){delete je[Dt.pointerId];for(var nr=0;nr<ke.length;nr++)if(ke[nr].pointerId==Dt.pointerId)return void ke.splice(nr,1)}function qr(Dt){var nr=je[Dt.pointerId];void 0===nr&&(nr=new un,je[Dt.pointerId]=nr),nr.set(Dt.pageX,Dt.pageY)}function er(Dt){return je[(Dt.pointerId===ke[0].pointerId?ke[1]:ke[0]).pointerId]}return u.domElement.addEventListener("contextmenu",tr),u.domElement.addEventListener("pointerdown",st),u.domElement.addEventListener("pointercancel",Ln),u.domElement.addEventListener("wheel",Cr,{passive:!1}),o.update(),o}return n}(cg),Ag=new(function(){function i(s,n,r){this.atoms=s,this.bonds=n,this.coordinates=r}return i.prototype.colorOfAtom=function(s){},i.prototype.addAtom=function(s,n){return this.atoms.push(s),this.coordinates.push(n),this},i.prototype.addBond=function(s,n,r){return this.bonds.push([s,n,r]),this},i.prototype.getGeometry=function(s){var n=new Ue(this.coordinates[s][0],this.coordinates[s][1],this.coordinates[s][2]);return{color:{C:3355443,H:14540253,O:16711680}[this.atoms[s]],coordinates:n}},i}())(["C","C","H","O","H","H","H","H","H"],[[0,1,1],[0,3,1],[3,2,1],[0,4,1],[0,5,1],[1,6,1],[1,7,1],[1,8,1]],[[.011,-.566,0],[-1.285,.246,-0],[1.925,-.229,-0],[1.13,.322,0],[.046,-1.195,.89],[.046,-1.195,-.89],[-2.139,-.432,0],[-1.32,.875,.89],[-1.32,.875,-.89]]),Fce=["canvas"],Rce=function(){function i(){}return Object.defineProperty(i.prototype,"canvas",{get:function(){return this.canvasRef.nativeElement},enumerable:!1,configurable:!0}),i.prototype.update=function(){},i.prototype.stage=function(){this.scene=new PU,this.scene.background=new xr(0),this.camera=new hc(1.5,this.canvas.clientWidth/this.canvas.clientHeight,1,1e3),this.camera.position.z=200;for(var s=0;s<Ag.atoms.length;s++){var n=new uO({color:Ag.getGeometry(s).color}),r=new tV(1,3),a=new Rl(r,n);a.position.copy(Ag.getGeometry(s).coordinates),a.scale.multiplyScalar(.2),this.scene.add(a)}for(var o=new VE(1,1,1),u=0;u<Ag.bonds.length;u+=1){var l=new Rl(o,new uO({color:16777215})),f=Ag.getGeometry(Ag.bonds[u][0]).coordinates,m=Ag.getGeometry(Ag.bonds[u][1]).coordinates;l.position.copy(f),l.position.lerp(m,.5),l.scale.set(.01,.01,f.distanceTo(m)),l.lookAt(m),this.scene.add(l)}var b=new sV(16777215,.8);b.position.set(1,1,1),this.scene.add(b);var w=new sV(16777215,.5);w.position.set(-1,-1,1),this.scene.add(w)},i.prototype.animate=function(){this.renderer=new us({canvas:this.canvas,alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),new Ice(this.camera,this.renderer.domElement);var n=this;!function r(){requestAnimationFrame(r),n.update(),n.renderer.render(n.scene,n.camera)}()},i.prototype.ngOnInit=function(){},i.prototype.ngAfterViewInit=function(){this.stage(),this.animate()},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-illustrations-molecularchemistry-moleculerender"]],viewQuery:function(n,r){var a;(1&n&&v.Gf(Fce,5),2&n)&&(v.iGM(a=v.CRH())&&(r.canvasRef=a.first))},decls:6,vars:0,consts:[[1,"container"],["id","content",1,"row"],[1,"display-4"],["id","canvas"],["canvas",""]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Molecule Rendering"),v.qZA(),v._UZ(4,"canvas",3,4),v.qZA(),v.qZA())},styles:["#canvas[_ngcontent-%COMP%]{width:100%;height:500px}"]}),i}(),Oce=function(){function i(){}return i.prototype.ngOnInit=function(){},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-illustrations-artificialintelligence-vae"]],decls:16,vars:0,consts:[[1,"container","mt-5"],[1,"display-6","text-center","mb-4"],[1,"text-center","mb-5"],[1,"row","mb-5"],[1,"col-12","video-container"],["src","https://www.youtube.com/embed/geTrTBi5bSU","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share","allowfullscreen",""],[1,"row"],[1,"col-12","slides-container"],["src","https://docs.google.com/presentation/d/1AuAr5JQH025OPVGMUyQ5iLUmFqf0UhndiyPkgXWpNpo/embed?start=false&loop=false&delayms=3000","frameborder","0","width","960","height","569","allowfullscreen","true","mozallowfullscreen","true","webkitallowfullscreen","true"],[1,"col-12","mt-3","text-center"],["href","https://docs.google.com/presentation/d/1AuAr5JQH025OPVGMUyQ5iLUmFqf0UhndiyPkgXWpNpo/edit?usp=sharing","target","_blank",1,"btn","btn-outline-primary"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"h2",1),v._uU(2,"Lecture Video"),v.qZA(),v.TgZ(3,"p",2),v._uU(4,"Here's a talk by me on Variational AutoEncoders. This was presented by me in CVIT summer school while I was in college."),v.qZA(),v.TgZ(5,"div",3),v.TgZ(6,"div",4),v._UZ(7,"iframe",5),v.qZA(),v.qZA(),v.TgZ(8,"h2",1),v._uU(9,"Presentation Slides"),v.qZA(),v.TgZ(10,"div",6),v.TgZ(11,"div",7),v._UZ(12,"iframe",8),v.qZA(),v.TgZ(13,"div",9),v.TgZ(14,"a",10),v._uU(15,"Open Slides in New Tab"),v.qZA(),v.qZA(),v.qZA(),v.qZA())},styles:[".video-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0;overflow:hidden;margin-bottom:20px}.video-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.slides-container[_ngcontent-%COMP%]{position:relative;padding-bottom:56.25%;height:0;overflow:hidden}.slides-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}"]}),i}();function Lce(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div",10),v.NdJ("click",function(){var u=v.CHM(n).$implicit;return v.oxw(2).selectedDemo=u}),v.TgZ(1,"span"),v._uU(2),v.qZA(),v.TgZ(3,"mat-icon"),v._uU(4,"chevron_right"),v.qZA(),v.qZA()}if(2&i){var r=s.$implicit;v.xp6(2),v.Oqu(r)}}function Nce(i,s){if(1&i&&(v.TgZ(0,"div",3),v.TgZ(1,"div",4),v.TgZ(2,"div",5),v.TgZ(3,"h1",6),v._uU(4,"Academic Content"),v.qZA(),v.TgZ(5,"h4",7),v._uU(6,"Animations, Lectures, and more"),v.qZA(),v.TgZ(7,"div",8),v.YNc(8,Lce,5,1,"div",9),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&i){var n=v.oxw();v.xp6(8),v.Q6J("ngForOf",n.modulesList)}}function Zce(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"button",17),v.NdJ("click",function(){var u=v.CHM(n).$implicit;return v.oxw(2).selectedDemo=u}),v._uU(1),v.qZA()}if(2&i){var r=s.$implicit;v.xp6(1),v.hij(" ",r," ")}}function Bce(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div",11),v.TgZ(1,"mat-toolbar",12),v.TgZ(2,"mat-toolbar-row"),v.TgZ(3,"button",13),v.NdJ("click",function(){return v.CHM(n),v.oxw().selectedDemo=null}),v.TgZ(4,"mat-icon"),v._uU(5,"arrow_back"),v.qZA(),v.qZA(),v.TgZ(6,"button",14),v._uU(7),v.TgZ(8,"mat-icon",15),v._uU(9,"arrow_drop_down"),v.qZA(),v.qZA(),v.TgZ(10,"mat-menu",null,16),v.TgZ(12,"button",17),v.NdJ("click",function(){return v.CHM(n),v.oxw().selectedDemo=null}),v.TgZ(13,"mat-icon"),v._uU(14,"list"),v.qZA(),v._uU(15," Back to List "),v.qZA(),v._UZ(16,"mat-divider"),v.YNc(17,Zce,2,1,"button",18),v.qZA(),v.qZA(),v.qZA(),v.qZA()}if(2&i){var r=v.MAs(11),a=v.oxw();v.xp6(6),v.Q6J("matMenuTriggerFor",r),v.xp6(1),v.hij(" ",a.selectedDemo," "),v.xp6(10),v.Q6J("ngForOf",a.modulesList)}}function Uce(i,s){1&i&&v._UZ(0,"app-illustrations-artificialintelligence-logicalagent")}function Vce(i,s){1&i&&v._UZ(0,"app-illustrations-molecularchemistry-moleculerender")}function zce(i,s){1&i&&v._UZ(0,"app-illustrations-artificialintelligence-vae")}function Hce(i,s){if(1&i&&(v.ynx(0),v.YNc(1,Uce,1,0,"app-illustrations-artificialintelligence-logicalagent",2),v.YNc(2,Vce,1,0,"app-illustrations-molecularchemistry-moleculerender",2),v.YNc(3,zce,1,0,"app-illustrations-artificialintelligence-vae",2),v.BQk()),2&i){var n=v.oxw();v.xp6(1),v.Q6J("ngIf","Artificial Intelligence / Model Filtering"==n.selectedDemo),v.xp6(1),v.Q6J("ngIf","Molecular Chemistry / Molecule Render"==n.selectedDemo),v.xp6(1),v.Q6J("ngIf","Artificial Intelligence / Variational AutoEncoders"==n.selectedDemo)}}var Gce=function(){function i(){this.modulesList=["Artificial Intelligence / Model Filtering","Artificial Intelligence / Variational AutoEncoders","Molecular Chemistry / Molecule Render"],this.selectedDemo=null}return i.prototype.ngOnInit=function(){},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-illustrations"]],inputs:{selectedDemo:"selectedDemo"},decls:3,vars:3,consts:[["class","container mt-5",4,"ngIf"],["id","illustrations-topic",4,"ngIf"],[4,"ngIf"],[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-lg-8","text-center"],[1,"display-4"],[1,"text-muted"],[1,"d-flex","flex-column","align-items-stretch"],["class","demo-list-item d-flex justify-content-between align-items-center mb-3 bg-white shadow-sm border-0",3,"click",4,"ngFor","ngForOf"],[1,"demo-list-item","d-flex","justify-content-between","align-items-center","mb-3","bg-white","shadow-sm","border-0",3,"click"],["id","illustrations-topic"],["color","secondary"],["mat-icon-button","","aria-label","Back to list",1,"back-btn",3,"click"],["mat-button","",1,"text-truncate",2,"max-width","80%",3,"matMenuTriggerFor"],[1,"ms-1",2,"font-size","1.2em","vertical-align","middle"],["menuTopic","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(v.YNc(0,Nce,9,1,"div",0),v.YNc(1,Bce,18,3,"div",1),v.YNc(2,Hce,4,3,"ng-container",2)),2&n&&(v.Q6J("ngIf",!r.selectedDemo),v.xp6(1),v.Q6J("ngIf",r.selectedDemo),v.xp6(1),v.Q6J("ngIf",r.selectedDemo))},directives:[Ra,as,oB,hX,Q6,BF,CQ,bQ,zF,CJ,vne,Rce,Oce],styles:["div#illustrations-topic[_ngcontent-%COMP%]{margin-bottom:50px}h1[_ngcontent-%COMP%]{font-weight:300;margin-bottom:2rem}h4[_ngcontent-%COMP%]{margin-bottom:3rem;font-weight:300}.demo-list-item[_ngcontent-%COMP%]{font-size:1.1rem;padding:1.5rem;border-radius:8px;transition:all .2s ease;color:#333;font-weight:400}.demo-list-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;transform:translate(5px);text-decoration:none;cursor:pointer}.demo-list-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#6c757d;transition:color .2s ease}.demo-list-item[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#007bff}.back-btn[_ngcontent-%COMP%]{margin-right:15px}"]}),i}();function jce(i,s){if(1&i&&(v.TgZ(0,"div",6),v.TgZ(1,"mat-card"),v.TgZ(2,"mat-card-header"),v._UZ(3,"img",7),v.TgZ(4,"mat-card-title"),v._uU(5),v.qZA(),v.TgZ(6,"mat-card-subtitle"),v._uU(7),v.qZA(),v.qZA(),v._UZ(8,"img",8),v.TgZ(9,"mat-card-content"),v.TgZ(10,"p"),v._uU(11),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&i){var n=s.$implicit;v.xp6(3),v.s9C("src",n.logo,v.LSH),v.xp6(2),v.Oqu(n.name),v.xp6(2),v.Oqu(n.subtitle),v.xp6(1),v.s9C("src",n.logo,v.LSH),v.xp6(3),v.hij(" ",n.description," ")}}function Wce(i,s){if(1&i&&(v.TgZ(0,"div",9),v.TgZ(1,"mat-card"),v.TgZ(2,"mat-card-header"),v._UZ(3,"img",10),v.TgZ(4,"mat-card-title"),v._uU(5),v.qZA(),v.TgZ(6,"mat-card-subtitle"),v._uU(7),v.qZA(),v.qZA(),v.TgZ(8,"mat-card-content"),v.TgZ(9,"p"),v._uU(10),v.qZA(),v.qZA(),v.qZA(),v.qZA()),2&i){var n=s.$implicit;v.xp6(3),v.s9C("src",n.logo,v.LSH),v.xp6(2),v.Oqu(n.name),v.xp6(2),v.Oqu(n.subtitle),v.xp6(3),v.hij(" ",n.description," ")}}var qce=function(){function i(){this.teams=[new np("ACLimitExceeded","assets/teams/logo_aclimitexceeded.png","This is our Competitive Programming teams. Currently it's composed of Me, Gaurang Tandon, and Dixit Garg. We love to study and practice pretty algorithmic problems. We ranked 30th on ICPC-Amrita regionals last year and hope to do a lot better this time around.","Algorithmic Theory"),new np("BayesianMechanics","assets/teams/logo_bayesianmechanics.png","A Big group of machine learning enthusiasts, this is me, Kanish, Gaurang, Yoogottam, Jai, and hopefully soon, Bhuvanesh. The purpose of this team if competive ML, but since everyone has college research in ML theory, we hope our work will be well inspired.","Machine Learning"),new np("OccamsRazor","assets/teams/logo_occamsrazor.png","Now to our Hackathon Team. This one has me, Kanish, Gaurang, Avni, Arpan and Akshat. First assembled to make the Library App for the Smart India Hackathon (which we won), we stuck around and await the next development opportunities that come our way.","Software Development"),new np("BowsersCastle","assets/teams/logo_bowserscastle.png","With Kalp and Yoogottam at the head, this is our CTF group. We started off with a reasonable performance at PicoCTF, and we keep attempting CTFs on and off with a dream of someday performing well at Google CTF.","Security Engineering"),new np("OptimisticOptimizations","assets/teams/logo_optimisticoptimizations.png","Me, Gaurang, Arpan and Yoogottam started off as a team with Google Hashcode in the first year of college. While we have not made a lot of efforts here, it's an annual tradition to pour in some effort into learning how to best approximate and fail at Hashcode (after an honest try, ofc).","Approximation Algorithms"),new np("PhymlqGroup","assets/teams/logo_phymlqgroup.png","We are just 3 friends and classmate, that's me, Jai and Kalp with shared interests in the same research topics in the intersection of Machine Learning and Physics, mostly on the particle physics side.","Computational Physics Research")],this.projects=[new np("Qubit Routing","assets/teams/icon_quantumcomputation.jpg","The task of Quantum Compilation entails mapping the logical qubits to the physical qubits on the device, and evolving said mapping using swap gates, so that all operations in the logical circuit become local (on physically neighboring qubits).","Reinforcement Learning"),new np("Particle Tagging","assets/teams/icon_hadroncollider.jpg","Collisions of particles in accelerators lead to showers of smaller particles, coming from a single source collision we call them a jet. Classifying the source of these jets (collisions of what types of particles lead to this) is an interesting task in learning from structures in the images (extremely sparse, hence this is a graph task) that they leave on the calorimeters.","Graph Convolutional Networks"),new np("Food Segmentation","assets/teams/icon_foodsegmentation.png","This is the AICrowd challenge. That's standard semantic segmentation, but on a dataset that is much harder than usual, has class imbalances and poor annotations. Low on theory, but this is still an interesting real world ML task out there.","Semantic Segmentation"),new np("Ensemble Biological Sensors","assets/teams/icon_biologicalsensors.jpg","A small project in my Systems Biology course, it constitutes an interesting question. Is the dynamic range of fold change sensors enhanced by ensemble behavior. And how do ensembles of sensors affect sensing in general. Insipired from a paper on a similar idea by Prof. Steven Frank.","Differential Equation Modelling")]}return i.prototype.ngOnInit=function(){},i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-projects"]],decls:11,vars:2,consts:[[1,"container"],[1,"row","page-heading"],[1,"display-2"],[1,"row"],["class","col-lg-6 card-container",4,"ngFor","ngForOf"],["class","col-lg-4 card-container",4,"ngFor","ngForOf"],[1,"col-lg-6","card-container"],["mat-card-avatar","","alt","Project Icon",3,"src"],["mat-card-image","","height","200px","alt","Project Icon",3,"src"],[1,"col-lg-4","card-container"],["mat-card-avatar","","alt","Team Logo",3,"src"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"h1",2),v._uU(3,"Projects I am excited by:"),v.qZA(),v.qZA(),v.TgZ(4,"div",3),v.YNc(5,jce,12,5,"div",4),v.qZA(),v.TgZ(6,"div",1),v.TgZ(7,"h1",2),v._uU(8,"Teams I am a part of:"),v.qZA(),v.qZA(),v.TgZ(9,"div",3),v.YNc(10,Wce,11,4,"div",5),v.qZA(),v.qZA()),2&n&&(v.xp6(5),v.Q6J("ngForOf",r.projects),v.xp6(5),v.Q6J("ngForOf",r.teams))},directives:[as,X3,Q3,nX,K3,$3,tX,W6],styles:["div.card-container[_ngcontent-%COMP%]{padding:20px}a[_ngcontent-%COMP%]:hover{text-decoration:none}img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}"]}),i}(),np=function(){return function(s,n,r,a){this.name=s,this.logo=n,this.description=r,this.subtitle=a}}(),Yce=ne(282),NW=function(){function i(s,n,r){var a=this;this.afAuth=s,this.db=n,this.router=r,this.authState=null,this.afAuth.authState.subscribe(function(o){a.authState=o})}return Object.defineProperty(i.prototype,"authenticated",{get:function(){return null!==this.authState},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUser",{get:function(){return this.authenticated?this.authState:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUserId",{get:function(){return this.authenticated?this.authState.uid:""},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUserAnonymous",{get:function(){return!!this.authenticated&&this.authState.isAnonymous},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentUserDisplayName",{get:function(){return this.authState?this.currentUserAnonymous?"Anonymous":this.authState.displayName||"User without a Name":"Guest"},enumerable:!1,configurable:!0}),i.prototype.googleLogin=function(){var s=new Yce.N;return this.socialSignIn(s)},i.prototype.socialSignIn=function(s){var n=this;return this.afAuth.signInWithPopup(s).then(function(r){n.authState=r.user,n.updateUserData()}).catch(function(r){return console.log(r)})},i.prototype.signOut=function(){this.afAuth.signOut(),this.router.navigate(["/"])},i.prototype.updateUserData=function(){var n={email:this.authState.email,name:this.authState.displayName};this.db.object("users/"+this.currentUserId).update(n).catch(function(r){return console.log(r)})},i.\u0275fac=function(n){return new(n||i)(v.LFG(Zd),v.LFG(h6),v.LFG(Pl))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}();function Kce(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div"),v.TgZ(1,"h1",2),v._uU(2),v.qZA(),v._UZ(3,"img",3),v.TgZ(4,"div"),v.TgZ(5,"button",4),v.NdJ("click",function(){return v.CHM(n),v.oxw().signOutWithGoogle()}),v._UZ(6,"span",5),v.TgZ(7,"span",6),v._uU(8,"Sign Out from your Google account"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(9,"div",7),v._uU(10,"The Google account you logged in with does not have an associated username or registered privaledges. If you have an account here, please login with your IIIT account."),v.qZA(),v.qZA()}if(2&i){var r=v.oxw();v.xp6(2),v.hij("Howdy, ",r.auth.currentUser.displayName,""),v.xp6(1),v.Q6J("src",r.auth.currentUser.photoURL||"https://api.adorable.io/avatars/109/fire.png",v.LSH)}}function $ce(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div"),v.TgZ(1,"h1",2),v._uU(2,"Howdy There!"),v.qZA(),v.TgZ(3,"div"),v.TgZ(4,"button",4),v.NdJ("click",function(){return v.CHM(n),v.oxw().signInWithGoogle()}),v._UZ(5,"span",5),v.TgZ(6,"span",6),v._uU(7,"Login with Google"),v.qZA(),v.qZA(),v.qZA(),v.qZA()}}var dV,BW,ZW=function(){function i(s,n){this.auth=s,this.router=n}return i.prototype.ngOnInit=function(){},i.prototype.afterSignIn=function(){this.router.navigate(["/"])},i.prototype.signOutWithGoogle=function(){this.auth.signOut()},i.prototype.signInWithGoogle=function(){var s=this;this.auth.googleLogin().then(function(){return s.afterSignIn()})},i.\u0275fac=function(n){return new(n||i)(v.Y36(NW),v.Y36(Pl))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-profile"]],decls:3,vars:2,consts:[[1,"container","text-center"],[4,"ngIf"],[1,"display-3"],["width","200px",1,"img-thumbnail",3,"src"],["mat-button","","id","google-signin",1,"btn",3,"click"],[1,"icon"],[1,"label"],[1,"display-5"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.YNc(1,Kce,11,2,"div",1),v.YNc(2,$ce,8,0,"div",1),v.qZA()),2&n&&(v.xp6(1),v.Q6J("ngIf",r.auth.currentUser),v.xp6(1),v.Q6J("ngIf",!r.auth.currentUser))},directives:[Ra,BF],styles:["#google-signin[_ngcontent-%COMP%]{margin:20px;padding:10px}#google-signin[_ngcontent-%COMP%]   span.icon[_ngcontent-%COMP%]{background:url(https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg) transparent 5px 50% no-repeat;display:inline-block;vertical-align:middle;width:50px;height:50px;margin-right:20px}.container[_ngcontent-%COMP%]{margin-top:20px}"]}),i}(),Xce=function(){function i(s){this.sanitizer=s,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl("https://animeshsinha1309.github.io/notes-blog/")}return i.\u0275fac=function(n){return new(n||i)(v.Y36(Xt))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-notes"]],decls:1,vars:1,consts:[[2,"width","100%","height","100vh","border","none",3,"src"]],template:function(n,r){1&n&&v._UZ(0,"iframe",0),2&n&&v.Q6J("src",r.safeUrl,v.uOi)},styles:[""]}),i}(),Qce=ne(5464),Jce=ne(2007);function vO(){vO=function(o,u){return new n(o,void 0,u)};var i=RegExp.prototype,s=new WeakMap;function n(a,o,u){var l=new RegExp(a,o);return s.set(l,u||s.get(a)),(0,Jce.Z)(l,n.prototype)}function r(a,o){var u=s.get(o);return Object.keys(u).reduce(function(l,f){return l[f]=a[u[f]],l},Object.create(null))}return(0,x.Z)(n,RegExp),n.prototype.exec=function(a){var o=i.exec.call(this,a);return o&&(o.groups=r(o,this)),o},n.prototype[Symbol.replace]=function(a,o){if("string"==typeof o){var u=s.get(this);return i[Symbol.replace].call(this,a,o.replace(/\$<([^>]+)>/g,function(f,m){return"$"+u[m]}))}if("function"==typeof o){var l=this;return i[Symbol.replace].call(this,a,function(){var f=arguments;return"object"!==(0,Qce.Z)(f[f.length-1])&&(f=[].slice.call(f)).push(r(f,l)),o.apply(this,f)})}return i[Symbol.replace].call(this,a,o)},vO.apply(this,arguments)}var n0={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function UW(i){n0=i}var m1={exec:function(){return null}};function za(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="string"==typeof i?i:i.source,r={replace:function(o,u){var l="string"==typeof u?u:u.source;return l=l.replace(dc.caret,"$1"),n=n.replace(o,l),r},getRegex:function(){return new RegExp(n,s)}};return r}var ehe=function(){try{return!!new RegExp("(?<=1)(?<!1)")}catch(i){return!1}}(),dc={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:function(s){return new RegExp("^( {0,3}".concat(s,")((?:[\t ][^\\n]*)?(?:\\n|$))"))},nextBulletRegex:function(s){return new RegExp("^ {0,".concat(Math.min(3,s-1),"}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))"))},hrRegex:function(s){return new RegExp("^ {0,".concat(Math.min(3,s-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"))},fencesBeginRegex:function(s){return new RegExp("^ {0,".concat(Math.min(3,s-1),"}(?:```|~~~)"))},headingBeginRegex:function(s){return new RegExp("^ {0,".concat(Math.min(3,s-1),"}#"))},htmlBeginRegex:function(s){return new RegExp("^ {0,".concat(Math.min(3,s-1),"}<(?:[a-z].*>|!--)"),"i")}},g1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,vV=/(?:[*+-]|\d{1,9}[.)])/,VW=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,zW=za(VW).replace(/bull/g,vV).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),ahe=za(VW).replace(/bull/g,vV).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),mV=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,gV=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,ohe=za(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",gV).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),uhe=za(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,vV).getRegex(),mO="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yV=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,lhe=za("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",yV).replace("tag",mO).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),HW=za(mV).replace("hr",g1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mO).getRegex(),_V={blockquote:za(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",HW).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:ohe,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:g1,html:lhe,lheading:zW,list:uhe,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:HW,table:m1,text:/^[^\n]+/},GW=za("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",g1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mO).getRegex(),hhe=Du(Du({},_V),{},{lheading:ahe,table:GW,paragraph:za(mV).replace("hr",g1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",GW).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mO).getRegex()}),fhe=Du(Du({},_V),{},{html:za("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",yV).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:m1,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:za(mV).replace("hr",g1).replace("heading"," *#{1,6} *[^\n]").replace("lheading",zW).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),jW=/^( {2,}|\\)\n(?!\s*$)/,gO=/(?:[!-\/:-@\[-`\{-~\xA1-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2010-\u2027\u2030-\u205E\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA])/,bV=/(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u200A\u2010-\u2029\u202F-\u205F\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA])/,WW=/(?:(?![\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u200A\u2010-\u2029\u202F-\u205F\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA])[\s\S])/,mhe=za(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,bV).getRegex(),qW=/(?!~)(?:[!-\/:-@\[-`\{-~\xA1-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2010-\u2027\u2030-\u205E\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA])/,_he=za(/link|precode-code|html/,"g").replace("link",vO(/\[(?:(?:(?![\[\]`])[\s\S])|(`+)(?:(?!`)[\s\S])+\1(?!`))*?\]\((?:\\[\0-\uFFFF]|(?:(?![\(\)\\])[\s\S])|\((?:\\[\0-\uFFFF]|(?:(?![\(\)\\])[\s\S]))*\))*\)/,{a:1})).replace("precode-",ehe?"(?<!`)()":"(^^|[^`])").replace("code",vO(/(`+)(?:(?!`)[\s\S])+\1(?!`)/,{b:1})).replace("html",/<(?! )[^<>]*?>/).getRegex(),YW=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,bhe=za(YW,"u").replace(/punct/g,gO).getRegex(),whe=za(YW,"u").replace(/punct/g,qW).getRegex(),KW="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Ehe=za(KW,"gu").replace(/notPunctSpace/g,WW).replace(/punctSpace/g,bV).replace(/punct/g,gO).getRegex(),khe=za(KW,"gu").replace(/notPunctSpace/g,/(?:(?:(?![\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u200A\u2010-\u2029\u202F-\u205F\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA])[\s\S])|~)/).replace(/punctSpace/g,/(?!~)(?:[\t-\r -\/:-@\[-`\{-~\xA0-\xA9\xAB\xAC\xAE-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u037E\u0384\u0385\u0387\u03F6\u0482\u055A-\u055F\u0589\u058A\u058D-\u058F\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0606-\u060F\u061B\u061D-\u061F\u066A-\u066D\u06D4\u06DE\u06E9\u06FD\u06FE\u0700-\u070D\u07F6-\u07F9\u07FE\u07FF\u0830-\u083E\u085E\u0888\u0964\u0965\u0970\u09F2\u09F3\u09FA\u09FB\u09FD\u0A76\u0AF0\u0AF1\u0B70\u0BF3-\u0BFA\u0C77\u0C7F\u0C84\u0D4F\u0D79\u0DF4\u0E3F\u0E4F\u0E5A\u0E5B\u0F01-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F85\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u104A-\u104F\u109E\u109F\u10FB\u1360-\u1368\u1390-\u1399\u1400\u166D\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DB\u1800-\u180A\u1940\u1944\u1945\u19DE-\u19FF\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B6A\u1B74-\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u200A\u2010-\u2029\u202F-\u205F\u207A-\u207E\u208A-\u208E\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2775\u2794-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u303F\u309B\u309C\u30A0\u30FB\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAA77-\uAA79\uAADE\uAADF\uAAF0\uAAF1\uAB5B\uAB6A\uAB6B\uABEB\uFB29\uFBB2-\uFBC2\uFD3E-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD00-\uDD02\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDC77\uDC78\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEC8\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3F]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFD5-\uDFF1\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3F\uDF44\uDF45]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F[\uDC9C\uDC9F]|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE8B]|\uD838[\uDD4F\uDEFF]|\uD83A[\uDD5E\uDD5F]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDD-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF73\uDF80-\uDFD8\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6\uDF00-\uDF92\uDF94-\uDFCA])/).replace(/punct/g,qW).getRegex(),Che=za("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,WW).replace(/punctSpace/g,bV).replace(/punct/g,gO).getRegex(),Dhe=za(/\\(punct)/,"gu").replace(/punct/g,gO).getRegex(),She=za(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ahe=za(yV).replace("(?:--\x3e|$)","--\x3e").getRegex(),The=za("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ahe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yO=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,xhe=za(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",yO).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$W=za(/^!?\[(label)\]\[(ref)\]/).replace("label",yO).replace("ref",gV).getRegex(),XW=za(/^!?\[(ref)\](?:\[\])?/).replace("ref",gV).getRegex(),QW=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,wV={_backpedal:m1,anyPunctuation:Dhe,autolink:She,blockSkip:_he,br:jW,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:m1,emStrongLDelim:bhe,emStrongRDelimAst:Ehe,emStrongRDelimUnd:Che,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:xhe,nolink:XW,punctuation:mhe,reflink:$W,reflinkSearch:za("reflink|nolink(?!\\()","g").replace("reflink",$W).replace("nolink",XW).getRegex(),tag:The,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:m1},Ihe=Du(Du({},wV),{},{link:za(/^!?\[(label)\]\((.*?)\)/).replace("label",yO).getRegex(),reflink:za(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yO).getRegex()}),EV=Du(Du({},wV),{},{emStrongRDelimAst:khe,emStrongLDelim:whe,url:za(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",QW).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:za(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",QW).getRegex()}),Phe=Du(Du({},EV),{},{br:za(jW).replace("{2,}","*").getRegex(),text:za(EV.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),_O={normal:_V,gfm:hhe,pedantic:fhe},y1={normal:wV,gfm:EV,breaks:Phe,pedantic:Ihe},Fhe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},JW=function(s){return Fhe[s]};function uv(i,s){if(s){if(dc.escapeTest.test(i))return i.replace(dc.escapeReplace,JW)}else if(dc.escapeTestNoEncode.test(i))return i.replace(dc.escapeReplaceNoEncode,JW);return i}function e7(i){try{i=encodeURI(i).replace(dc.percentDecode,"%")}catch(s){return null}return i}function t7(i,s){var n,a=i.replace(dc.findPipe,function(u,l,f){for(var m=!1,b=l;--b>=0&&"\\"===f[b];)m=!m;return m?"|":" |"}).split(dc.splitPipe),o=0;if(a[0].trim()||a.shift(),a.length>0&&!(null!==(n=a.at(-1))&&void 0!==n&&n.trim())&&a.pop(),s)if(a.length>s)a.splice(s);else for(;a.length<s;)a.push("");for(;o<a.length;o++)a[o]=a[o].trim().replace(dc.slashPipe,"|");return a}function _1(i,s,n){var r=i.length;if(0===r)return"";for(var a=0;a<r;){var o=i.charAt(r-a-1);if(o!==s||n){if(o===s||!n)break;a++}else a++}return i.slice(0,r-a)}function n7(i,s,n,r,a){var o=s.href,u=s.title||null,l=i[1].replace(a.other.outputLinkReplace,"$1");r.state.inLink=!0;var f={type:"!"===i[0].charAt(0)?"image":"link",raw:n,href:o,title:u,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,f}var bO=function(){function i(s){(0,M.Z)(this,i),(0,vr.Z)(this,"options",void 0),(0,vr.Z)(this,"rules",void 0),(0,vr.Z)(this,"lexer",void 0),this.options=s||n0}return(0,R.Z)(i,[{key:"space",value:function(n){var r=this.rules.block.newline.exec(n);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}},{key:"code",value:function(n){var r=this.rules.block.code.exec(n);if(r){var a=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?a:_1(a,"\n")}}}},{key:"fences",value:function(n){var r=this.rules.block.fences.exec(n);if(r){var a=r[0],o=function(i,s,n){var r=i.match(n.other.indentCodeCompensation);if(null===r)return s;var a=r[1];return s.split("\n").map(function(o){var u=o.match(n.other.beginningSpace);return null===u?o:(0,Te.Z)(u,1)[0].length>=a.length?o.slice(a.length):o}).join("\n")}(a,r[3]||"",this.rules);return{type:"code",raw:a,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:o}}}},{key:"heading",value:function(n){var r=this.rules.block.heading.exec(n);if(r){var a=r[2].trim();if(this.rules.other.endingHash.test(a)){var o=_1(a,"#");(this.options.pedantic||!o||this.rules.other.endingSpaceChar.test(o))&&(a=o.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:a,tokens:this.lexer.inline(a)}}}},{key:"hr",value:function(n){var r=this.rules.block.hr.exec(n);if(r)return{type:"hr",raw:_1(r[0],"\n")}}},{key:"blockquote",value:function(n){var r=this.rules.block.blockquote.exec(n);if(r){for(var a=_1(r[0],"\n").split("\n"),o="",u="",l=[];a.length>0;){var f=!1,m=[],b=void 0;for(b=0;b<a.length;b++)if(this.rules.other.blockquoteStart.test(a[b]))m.push(a[b]),f=!0;else{if(f)break;m.push(a[b])}a=a.slice(b);var w=m.join("\n"),C=w.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");o=o?"".concat(o,"\n").concat(w):w,u=u?"".concat(u,"\n").concat(C):C;var T=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(C,l,!0),this.lexer.state.top=T,0===a.length)break;var I=l.at(-1);if("code"===(null==I?void 0:I.type))break;if("blockquote"===(null==I?void 0:I.type)){var Z=I,Y=Z.raw+"\n"+a.join("\n"),V=this.blockquote(Y);l[l.length-1]=V,o=o.substring(0,o.length-Z.raw.length)+V.raw,u=u.substring(0,u.length-Z.text.length)+V.text;break}if("list"!==(null==I?void 0:I.type));else{var W=I,se=W.raw+"\n"+a.join("\n"),fe=this.list(se);l[l.length-1]=fe,o=o.substring(0,o.length-I.raw.length)+fe.raw,u=u.substring(0,u.length-W.raw.length)+fe.raw,a=se.substring(l.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:o,tokens:l,text:u}}}},{key:"list",value:function(n){var r=this,a=this.rules.block.list.exec(n);if(a){var o=a[1].trim(),u=o.length>1,l={type:"list",raw:"",ordered:u,start:u?+o.slice(0,-1):"",loose:!1,items:[]};o=u?"\\d{1,9}\\".concat(o.slice(-1)):"\\".concat(o),this.options.pedantic&&(o=u?o:"[*+-]");for(var f=this.rules.other.listItemRegex(o),m=!1;n;){var b=!1,w="",C="";if(!(a=f.exec(n))||this.rules.block.hr.test(n))break;n=n.substring((w=a[0]).length);var T=a[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,function(Qn){return" ".repeat(3*Qn.length)}),I=n.split("\n",1)[0],Z=!T.trim(),Y=0;if(this.options.pedantic?(Y=2,C=T.trimStart()):Z?Y=a[1].length+1:(Y=a[2].search(this.rules.other.nonSpaceChar),C=T.slice(Y=Y>4?1:Y),Y+=a[1].length),Z&&this.rules.other.blankLine.test(I)&&(w+=I+"\n",n=n.substring(I.length+1),b=!0),!b)for(var V=this.rules.other.nextBulletRegex(Y),W=this.rules.other.hrRegex(Y),se=this.rules.other.fencesBeginRegex(Y),fe=this.rules.other.headingBeginRegex(Y),ve=this.rules.other.htmlBeginRegex(Y);n;){var me=n.split("\n",1)[0],pe=void 0;if(I=me,pe=this.options.pedantic?I=I.replace(this.rules.other.listReplaceNesting,"  "):I.replace(this.rules.other.tabCharGlobal,"    "),se.test(I)||fe.test(I)||ve.test(I)||V.test(I)||W.test(I))break;if(pe.search(this.rules.other.nonSpaceChar)>=Y||!I.trim())C+="\n"+pe.slice(Y);else{if(Z||T.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||se.test(T)||fe.test(T)||W.test(T))break;C+="\n"+I}!Z&&!I.trim()&&(Z=!0),w+=me+"\n",n=n.substring(me.length+1),T=pe.slice(Y)}l.loose||(m?l.loose=!0:this.rules.other.doubleBlankLine.test(w)&&(m=!0)),l.items.push({type:"list_item",raw:w,task:!!this.options.gfm&&this.rules.other.listIsTask.test(C),loose:!1,text:C,tokens:[]}),l.raw+=w}var ke=l.items.at(-1);if(!ke)return;ke.raw=ke.raw.trimEnd(),ke.text=ke.text.trimEnd(),l.raw=l.raw.trimEnd();var qe,je=(0,Ve.Z)(l.items);try{for(je.s();!(qe=je.n()).done;){var Ze=qe.value;if(this.lexer.state.top=!1,Ze.tokens=this.lexer.blockTokens(Ze.text,[]),Ze.task){var ct,rt;if(Ze.text=Ze.text.replace(this.rules.other.listReplaceTask,""),"text"===(null===(ct=Ze.tokens[0])||void 0===ct?void 0:ct.type)||"paragraph"===(null===(rt=Ze.tokens[0])||void 0===rt?void 0:rt.type)){Ze.tokens[0].raw=Ze.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),Ze.tokens[0].text=Ze.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(var ht=this.lexer.inlineQueue.length-1;ht>=0;ht--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[ht].src)){this.lexer.inlineQueue[ht].src=this.lexer.inlineQueue[ht].src.replace(this.rules.other.listReplaceTask,"");break}}var It=this.rules.other.listTaskCheckbox.exec(Ze.raw);if(It){var _t={type:"checkbox",raw:It[0]+" ",checked:"[ ]"!==It[0]};Ze.checked=_t.checked,l.loose?Ze.tokens[0]&&["paragraph","text"].includes(Ze.tokens[0].type)&&"tokens"in Ze.tokens[0]&&Ze.tokens[0].tokens?(Ze.tokens[0].raw=_t.raw+Ze.tokens[0].raw,Ze.tokens[0].text=_t.raw+Ze.tokens[0].text,Ze.tokens[0].tokens.unshift(_t)):Ze.tokens.unshift({type:"paragraph",raw:_t.raw,text:_t.raw,tokens:[_t]}):Ze.tokens.unshift(_t)}}if(!l.loose){var Zt=Ze.tokens.filter(function(Qn){return"space"===Qn.type}),ln=Zt.length>0&&Zt.some(function(Qn){return r.rules.other.anyLine.test(Qn.raw)});l.loose=ln}}}catch(Qn){je.e(Qn)}finally{je.f()}if(l.loose){var kn,Sn=(0,Ve.Z)(l.items);try{for(Sn.s();!(kn=Sn.n()).done;){var dn=kn.value;dn.loose=!0;var Hn,gn=(0,Ve.Z)(dn.tokens);try{for(gn.s();!(Hn=gn.n()).done;){var Ur=Hn.value;"text"===Ur.type&&(Ur.type="paragraph")}}catch(Qn){gn.e(Qn)}finally{gn.f()}}}catch(Qn){Sn.e(Qn)}finally{Sn.f()}}return l}}},{key:"html",value:function(n){var r=this.rules.block.html.exec(n);if(r)return{type:"html",block:!0,raw:r[0],pre:"pre"===r[1]||"script"===r[1]||"style"===r[1],text:r[0]}}},{key:"def",value:function(n){var r=this.rules.block.def.exec(n);if(r){var a=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),o=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",u=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:a,raw:r[0],href:o,title:u}}}},{key:"table",value:function(n){var r,a=this,o=this.rules.block.table.exec(n);if(o&&this.rules.other.tableDelimiter.test(o[2])){var u=t7(o[1]),l=o[2].replace(this.rules.other.tableAlignChars,"").split("|"),f=null!==(r=o[3])&&void 0!==r&&r.trim()?o[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],m={type:"table",raw:o[0],header:[],align:[],rows:[]};if(u.length===l.length){var w,b=(0,Ve.Z)(l);try{for(b.s();!(w=b.n()).done;){var C=w.value;this.rules.other.tableAlignRight.test(C)?m.align.push("right"):this.rules.other.tableAlignCenter.test(C)?m.align.push("center"):this.rules.other.tableAlignLeft.test(C)?m.align.push("left"):m.align.push(null)}}catch(V){b.e(V)}finally{b.f()}for(var T=0;T<u.length;T++)m.header.push({text:u[T],tokens:this.lexer.inline(u[T]),header:!0,align:m.align[T]});var Z,I=(0,Ve.Z)(f);try{for(I.s();!(Z=I.n()).done;)m.rows.push(t7(Z.value,m.header.length).map(function(V,W){return{text:V,tokens:a.lexer.inline(V),header:!1,align:m.align[W]}}))}catch(V){I.e(V)}finally{I.f()}return m}}}},{key:"lheading",value:function(n){var r=this.rules.block.lheading.exec(n);if(r)return{type:"heading",raw:r[0],depth:"="===r[2].charAt(0)?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}},{key:"paragraph",value:function(n){var r=this.rules.block.paragraph.exec(n);if(r){var a="\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:a,tokens:this.lexer.inline(a)}}}},{key:"text",value:function(n){var r=this.rules.block.text.exec(n);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}},{key:"escape",value:function(n){var r=this.rules.inline.escape.exec(n);if(r)return{type:"escape",raw:r[0],text:r[1]}}},{key:"tag",value:function(n){var r=this.rules.inline.tag.exec(n);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}},{key:"link",value:function(n){var r=this.rules.inline.link.exec(n);if(r){var a=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(a)){if(!this.rules.other.endAngleBracket.test(a))return;var o=_1(a.slice(0,-1),"\\");if((a.length-o.length)%2==0)return}else{var u=function(i,s){if(-1===i.indexOf(s[1]))return-1;for(var n=0,r=0;r<i.length;r++)if("\\"===i[r])r++;else if(i[r]===s[0])n++;else if(i[r]===s[1]&&--n<0)return r;return n>0?-2:-1}(r[2],"()");if(-2===u)return;if(u>-1){var l=(0===r[0].indexOf("!")?5:4)+r[1].length+u;r[2]=r[2].substring(0,u),r[0]=r[0].substring(0,l).trim(),r[3]=""}}var f=r[2],m="";if(this.options.pedantic){var b=this.rules.other.pedanticHrefTitle.exec(f);b&&(f=b[1],m=b[3])}else m=r[3]?r[3].slice(1,-1):"";return f=f.trim(),this.rules.other.startAngleBracket.test(f)&&(f=this.options.pedantic&&!this.rules.other.endAngleBracket.test(a)?f.slice(1):f.slice(1,-1)),n7(r,{href:f&&f.replace(this.rules.inline.anyPunctuation,"$1"),title:m&&m.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}},{key:"reflink",value:function(n,r){var a;if((a=this.rules.inline.reflink.exec(n))||(a=this.rules.inline.nolink.exec(n))){var u=r[(a[2]||a[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!u){var l=a[0].charAt(0);return{type:"text",raw:l,text:l}}return n7(a,u,a[0],this.lexer,this.rules)}}},{key:"emStrong",value:function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=this.rules.inline.emStrongLDelim.exec(n);if(!(!o||o[3]&&a.match(this.rules.other.unicodeAlphaNumeric))&&(!o[1]&&!o[2]||!a||this.rules.inline.punctuation.exec(a))){var l,f,u=(0,Kr.Z)(o[0]).length-1,m=u,b=0,w="*"===o[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(w.lastIndex=0,r=r.slice(-1*n.length+u);null!=(o=w.exec(r));)if(l=o[1]||o[2]||o[3]||o[4]||o[5]||o[6]){if(f=(0,Kr.Z)(l).length,o[3]||o[4]){m+=f;continue}if((o[5]||o[6])&&u%3&&!((u+f)%3)){b+=f;continue}if(!((m-=f)>0)){f=Math.min(f,f+m+b);var C=(0,Kr.Z)(o[0])[0].length,T=n.slice(0,u+o.index+C+f);if(Math.min(u,f)%2){var I=T.slice(1,-1);return{type:"em",raw:T,text:I,tokens:this.lexer.inlineTokens(I)}}var Z=T.slice(2,-2);return{type:"strong",raw:T,text:Z,tokens:this.lexer.inlineTokens(Z)}}}}}},{key:"codespan",value:function(n){var r=this.rules.inline.code.exec(n);if(r){var a=r[2].replace(this.rules.other.newLineCharGlobal," "),o=this.rules.other.nonSpaceChar.test(a),u=this.rules.other.startingSpaceChar.test(a)&&this.rules.other.endingSpaceChar.test(a);return o&&u&&(a=a.substring(1,a.length-1)),{type:"codespan",raw:r[0],text:a}}}},{key:"br",value:function(n){var r=this.rules.inline.br.exec(n);if(r)return{type:"br",raw:r[0]}}},{key:"del",value:function(n){var r=this.rules.inline.del.exec(n);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}},{key:"autolink",value:function(n){var a,o,r=this.rules.inline.autolink.exec(n);if(r)return o="@"===r[2]?"mailto:"+(a=r[1]):a=r[1],{type:"link",raw:r[0],text:a,href:o,tokens:[{type:"text",raw:a,text:a}]}}},{key:"url",value:function(n){var r;if(r=this.rules.inline.url.exec(n)){var a,o;if("@"===r[2])o="mailto:"+(a=r[0]);else{var u;do{var l,f;u=r[0],r[0]=null!==(l=null===(f=this.rules.inline._backpedal.exec(r[0]))||void 0===f?void 0:f[0])&&void 0!==l?l:""}while(u!==r[0]);a=r[0],o="www."===r[1]?"http://"+r[0]:r[0]}return{type:"link",raw:r[0],text:a,href:o,tokens:[{type:"text",raw:a,text:a}]}}}},{key:"inlineText",value:function(n){var r=this.rules.inline.text.exec(n);if(r)return{type:"text",raw:r[0],text:r[0],escaped:this.lexer.state.inRawBlock}}}]),i}(),Lf=function(){function i(s){(0,M.Z)(this,i),(0,vr.Z)(this,"tokens",void 0),(0,vr.Z)(this,"options",void 0),(0,vr.Z)(this,"state",void 0),(0,vr.Z)(this,"inlineQueue",void 0),(0,vr.Z)(this,"tokenizer",void 0),this.tokens=[],this.tokens.links=Object.create(null),this.options=s||n0,this.options.tokenizer=this.options.tokenizer||new bO,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var n={other:dc,block:_O.normal,inline:y1.normal};this.options.pedantic?(n.block=_O.pedantic,n.inline=y1.pedantic):this.options.gfm&&(n.block=_O.gfm,n.inline=this.options.breaks?y1.breaks:y1.gfm),this.tokenizer.rules=n}return(0,R.Z)(i,[{key:"lex",value:function(n){n=n.replace(dc.carriageReturn,"\n"),this.blockTokens(n,this.tokens);for(var r=0;r<this.inlineQueue.length;r++){var a=this.inlineQueue[r];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}},{key:"blockTokens",value:function(n){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=function(){var m,b,w,C=void 0;if(null!==(m=r.options.extensions)&&void 0!==m&&null!==(b=m.block)&&void 0!==b&&b.some(function(pe){return!!(C=pe.call({lexer:r},n,a))&&(n=n.substring(C.raw.length),a.push(C),!0)}))return"continue";if(C=r.tokenizer.space(n)){n=n.substring(C.raw.length);var T=a.at(-1);return 1===C.raw.length&&void 0!==T?T.raw+="\n":a.push(C),"continue"}if(C=r.tokenizer.code(n)){n=n.substring(C.raw.length);var I=a.at(-1);return"paragraph"===(null==I?void 0:I.type)||"text"===(null==I?void 0:I.type)?(I.raw+=(I.raw.endsWith("\n")?"":"\n")+C.raw,I.text+="\n"+C.text,r.inlineQueue.at(-1).src=I.text):a.push(C),"continue"}if((C=r.tokenizer.fences(n))||(C=r.tokenizer.heading(n))||(C=r.tokenizer.hr(n))||(C=r.tokenizer.blockquote(n))||(C=r.tokenizer.list(n))||(C=r.tokenizer.html(n)))return n=n.substring(C.raw.length),a.push(C),"continue";if(C=r.tokenizer.def(n)){n=n.substring(C.raw.length);var Z=a.at(-1);return"paragraph"===(null==Z?void 0:Z.type)||"text"===(null==Z?void 0:Z.type)?(Z.raw+=(Z.raw.endsWith("\n")?"":"\n")+C.raw,Z.text+="\n"+C.raw,r.inlineQueue.at(-1).src=Z.text):r.tokens.links[C.tag]||(r.tokens.links[C.tag]={href:C.href,title:C.title},a.push(C)),"continue"}if((C=r.tokenizer.table(n))||(C=r.tokenizer.lheading(n)))return n=n.substring(C.raw.length),a.push(C),"continue";var Y=n;if(null!==(w=r.options.extensions)&&void 0!==w&&w.startBlock){var se,V=1/0,W=n.slice(1);r.options.extensions.startBlock.forEach(function(pe){"number"==typeof(se=pe.call({lexer:r},W))&&se>=0&&(V=Math.min(V,se))}),V<1/0&&V>=0&&(Y=n.substring(0,V+1))}if(r.state.top&&(C=r.tokenizer.paragraph(Y))){var fe=a.at(-1);return o&&"paragraph"===(null==fe?void 0:fe.type)?(fe.raw+=(fe.raw.endsWith("\n")?"":"\n")+C.raw,fe.text+="\n"+C.text,r.inlineQueue.pop(),r.inlineQueue.at(-1).src=fe.text):a.push(C),o=Y.length!==n.length,n=n.substring(C.raw.length),"continue"}if(C=r.tokenizer.text(n)){n=n.substring(C.raw.length);var ve=a.at(-1);return"text"===(null==ve?void 0:ve.type)?(ve.raw+=(ve.raw.endsWith("\n")?"":"\n")+C.raw,ve.text+="\n"+C.text,r.inlineQueue.pop(),r.inlineQueue.at(-1).src=ve.text):a.push(C),"continue"}if(n){var me="Infinite loop on byte: "+n.charCodeAt(0);if(r.options.silent)return console.error(me),"break";throw new Error(me)}};for(this.options.pedantic&&(n=n.replace(dc.tabCharGlobal,"    ").replace(dc.spaceLine,""));n;){var l=u();if("continue"!==l&&"break"===l)break}return this.state.top=!0,a}},{key:"inline",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.inlineQueue.push({src:n,tokens:r}),r}},{key:"inlineTokens",value:function(n){var r,a,o,w,u=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=n,m=null;if(this.tokens.links){var b=Object.keys(this.tokens.links);if(b.length>0)for(;null!=(m=this.tokenizer.rules.inline.reflinkSearch.exec(f));)b.includes(m[0].slice(m[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,m.index)+"["+"a".repeat(m[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(m=this.tokenizer.rules.inline.anyPunctuation.exec(f));)f=f.slice(0,m.index)+"++"+f.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(m=this.tokenizer.rules.inline.blockSkip.exec(f));)f=f.slice(0,m.index+(w=m[2]?m[2].length:0))+"["+"a".repeat(m[0].length-w-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);f=null!==(r=null===(a=this.options.hooks)||void 0===a||null===(o=a.emStrongMask)||void 0===o?void 0:o.call({lexer:this},f))&&void 0!==r?r:f;for(var C=!1,T="",I=function(){var V,W,se;C||(T=""),C=!1;var fe=void 0;if(null!==(V=u.options.extensions)&&void 0!==V&&null!==(W=V.inline)&&void 0!==W&&W.some(function(ct){return!!(fe=ct.call({lexer:u},n,l))&&(n=n.substring(fe.raw.length),l.push(fe),!0)}))return"continue";if((fe=u.tokenizer.escape(n))||(fe=u.tokenizer.tag(n))||(fe=u.tokenizer.link(n)))return n=n.substring(fe.raw.length),l.push(fe),"continue";if(fe=u.tokenizer.reflink(n,u.tokens.links)){n=n.substring(fe.raw.length);var ve=l.at(-1);return"text"===fe.type&&"text"===(null==ve?void 0:ve.type)?(ve.raw+=fe.raw,ve.text+=fe.text):l.push(fe),"continue"}if((fe=u.tokenizer.emStrong(n,f,T))||(fe=u.tokenizer.codespan(n))||(fe=u.tokenizer.br(n))||(fe=u.tokenizer.del(n))||(fe=u.tokenizer.autolink(n))||!u.state.inLink&&(fe=u.tokenizer.url(n)))return n=n.substring(fe.raw.length),l.push(fe),"continue";var me=n;if(null!==(se=u.options.extensions)&&void 0!==se&&se.startInline){var je,pe=1/0,ke=n.slice(1);u.options.extensions.startInline.forEach(function(ct){"number"==typeof(je=ct.call({lexer:u},ke))&&je>=0&&(pe=Math.min(pe,je))}),pe<1/0&&pe>=0&&(me=n.substring(0,pe+1))}if(fe=u.tokenizer.inlineText(me)){n=n.substring(fe.raw.length),"_"!==fe.raw.slice(-1)&&(T=fe.raw.slice(-1)),C=!0;var qe=l.at(-1);return"text"===(null==qe?void 0:qe.type)?(qe.raw+=fe.raw,qe.text+=fe.text):l.push(fe),"continue"}if(n){var Ze="Infinite loop on byte: "+n.charCodeAt(0);if(u.options.silent)return console.error(Ze),"break";throw new Error(Ze)}};n;){var Z=I();if("continue"!==Z&&"break"===Z)break}return l}}],[{key:"rules",get:function(){return{block:_O,inline:y1}}},{key:"lex",value:function(n,r){return new i(r).lex(n)}},{key:"lexInline",value:function(n,r){return new i(r).inlineTokens(n)}}]),i}(),wO=function(){function i(s){(0,M.Z)(this,i),(0,vr.Z)(this,"options",void 0),(0,vr.Z)(this,"parser",void 0),this.options=s||n0}return(0,R.Z)(i,[{key:"space",value:function(n){return""}},{key:"code",value:function(n){var r,a=n.text,u=n.escaped,l=null===(r=(n.lang||"").match(dc.notSpaceStart))||void 0===r?void 0:r[0],f=a.replace(dc.endingNewline,"")+"\n";return l?'<pre><code class="language-'+uv(l)+'">'+(u?f:uv(f,!0))+"</code></pre>\n":"<pre><code>"+(u?f:uv(f,!0))+"</code></pre>\n"}},{key:"blockquote",value:function(n){return"<blockquote>\n".concat(this.parser.parse(n.tokens),"</blockquote>\n")}},{key:"html",value:function(n){return n.text}},{key:"def",value:function(n){return""}},{key:"heading",value:function(n){var r=n.tokens,a=n.depth;return"<h".concat(a,">").concat(this.parser.parseInline(r),"</h").concat(a,">\n")}},{key:"hr",value:function(n){return"<hr>\n"}},{key:"list",value:function(n){for(var r=n.ordered,a=n.start,o="",u=0;u<n.items.length;u++)o+=this.listitem(n.items[u]);var f=r?"ol":"ul";return"<"+f+(r&&1!==a?' start="'+a+'"':"")+">\n"+o+"</"+f+">\n"}},{key:"listitem",value:function(n){return"<li>".concat(this.parser.parse(n.tokens),"</li>\n")}},{key:"checkbox",value:function(n){return"<input "+(n.checked?'checked="" ':"")+'disabled="" type="checkbox"> '}},{key:"paragraph",value:function(n){return"<p>".concat(this.parser.parseInline(n.tokens),"</p>\n")}},{key:"table",value:function(n){for(var r="",a="",o=0;o<n.header.length;o++)a+=this.tablecell(n.header[o]);r+=this.tablerow({text:a});for(var u="",l=0;l<n.rows.length;l++){var f=n.rows[l];a="";for(var m=0;m<f.length;m++)a+=this.tablecell(f[m]);u+=this.tablerow({text:a})}return u&&(u="<tbody>".concat(u,"</tbody>")),"<table>\n<thead>\n"+r+"</thead>\n"+u+"</table>\n"}},{key:"tablerow",value:function(n){return"<tr>\n".concat(n.text,"</tr>\n")}},{key:"tablecell",value:function(n){var r=this.parser.parseInline(n.tokens),a=n.header?"th":"td";return(n.align?"<".concat(a,' align="').concat(n.align,'">'):"<".concat(a,">"))+r+"</".concat(a,">\n")}},{key:"strong",value:function(n){return"<strong>".concat(this.parser.parseInline(n.tokens),"</strong>")}},{key:"em",value:function(n){return"<em>".concat(this.parser.parseInline(n.tokens),"</em>")}},{key:"codespan",value:function(n){return"<code>".concat(uv(n.text,!0),"</code>")}},{key:"br",value:function(n){return"<br>"}},{key:"del",value:function(n){return"<del>".concat(this.parser.parseInline(n.tokens),"</del>")}},{key:"link",value:function(n){var r=n.href,a=n.title,u=this.parser.parseInline(n.tokens),l=e7(r);if(null===l)return u;var f='<a href="'+(r=l)+'"';return a&&(f+=' title="'+uv(a)+'"'),f+">"+u+"</a>"}},{key:"image",value:function(n){var r=n.href,a=n.title,o=n.text,u=n.tokens;u&&(o=this.parser.parseInline(u,this.parser.textRenderer));var l=e7(r);if(null===l)return uv(o);var f='<img src="'.concat(r=l,'" alt="').concat(o,'"');return a&&(f+=' title="'.concat(uv(a),'"')),f+">"}},{key:"text",value:function(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:uv(n.text)}}]),i}(),kV=function(){function i(){(0,M.Z)(this,i)}return(0,R.Z)(i,[{key:"strong",value:function(n){return n.text}},{key:"em",value:function(n){return n.text}},{key:"codespan",value:function(n){return n.text}},{key:"del",value:function(n){return n.text}},{key:"html",value:function(n){return n.text}},{key:"text",value:function(n){return n.text}},{key:"link",value:function(n){return""+n.text}},{key:"image",value:function(n){return""+n.text}},{key:"br",value:function(){return""}},{key:"checkbox",value:function(n){return n.raw}}]),i}(),Nf=function(){function i(s){(0,M.Z)(this,i),(0,vr.Z)(this,"options",void 0),(0,vr.Z)(this,"renderer",void 0),(0,vr.Z)(this,"textRenderer",void 0),this.options=s||n0,this.options.renderer=this.options.renderer||new wO,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new kV}return(0,R.Z)(i,[{key:"parse",value:function(n){for(var r="",a=0;a<n.length;a++){var o,u,l=n[a];if(null!==(o=this.options.extensions)&&void 0!==o&&null!==(u=o.renderers)&&void 0!==u&&u[l.type]){var f=l,m=this.options.extensions.renderers[f.type].call({parser:this},f);if(!1!==m||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(f.type)){r+=m||"";continue}}var b=l;switch(b.type){case"space":r+=this.renderer.space(b);break;case"hr":r+=this.renderer.hr(b);break;case"heading":r+=this.renderer.heading(b);break;case"code":r+=this.renderer.code(b);break;case"table":r+=this.renderer.table(b);break;case"blockquote":r+=this.renderer.blockquote(b);break;case"list":r+=this.renderer.list(b);break;case"checkbox":r+=this.renderer.checkbox(b);break;case"html":r+=this.renderer.html(b);break;case"def":r+=this.renderer.def(b);break;case"paragraph":r+=this.renderer.paragraph(b);break;case"text":r+=this.renderer.text(b);break;default:var w='Token with "'+b.type+'" type was not found.';if(this.options.silent)return console.error(w),"";throw new Error(w)}}return r}},{key:"parseInline",value:function(n){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.renderer,a="",o=0;o<n.length;o++){var u,l,f=n[o];if(null!==(u=this.options.extensions)&&void 0!==u&&null!==(l=u.renderers)&&void 0!==l&&l[f.type]){var m=this.options.extensions.renderers[f.type].call({parser:this},f);if(!1!==m||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(f.type)){a+=m||"";continue}}var b=f;switch(b.type){case"escape":a+=r.text(b);break;case"html":a+=r.html(b);break;case"link":a+=r.link(b);break;case"image":a+=r.image(b);break;case"checkbox":a+=r.checkbox(b);break;case"strong":a+=r.strong(b);break;case"em":a+=r.em(b);break;case"codespan":a+=r.codespan(b);break;case"br":a+=r.br(b);break;case"del":a+=r.del(b);break;case"text":a+=r.text(b);break;default:var w='Token with "'+b.type+'" type was not found.';if(this.options.silent)return console.error(w),"";throw new Error(w)}}return a}}],[{key:"parse",value:function(n,r){return new i(r).parse(n)}},{key:"parseInline",value:function(n,r){return new i(r).parseInline(n)}}]),i}(),b1=(BW=dV=function(){function i(s){(0,M.Z)(this,i),(0,vr.Z)(this,"options",void 0),(0,vr.Z)(this,"block",void 0),this.options=s||n0}return(0,R.Z)(i,[{key:"preprocess",value:function(n){return n}},{key:"postprocess",value:function(n){return n}},{key:"processAllTokens",value:function(n){return n}},{key:"emStrongMask",value:function(n){return n}},{key:"provideLexer",value:function(){return this.block?Lf.lex:Lf.lexInline}},{key:"provideParser",value:function(){return this.block?Nf.parse:Nf.parseInline}}]),i}(),(0,vr.Z)(dV,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens","emStrongMask"])),(0,vr.Z)(dV,"passThroughHooksRespectAsync",new Set(["preprocess","postprocess","processAllTokens"])),BW),Tg=new(function(){function i(){(0,M.Z)(this,i),(0,vr.Z)(this,"defaults",{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}),(0,vr.Z)(this,"options",this.setOptions),(0,vr.Z)(this,"parse",this.parseMarkdown(!0)),(0,vr.Z)(this,"parseInline",this.parseMarkdown(!1)),(0,vr.Z)(this,"Parser",Nf),(0,vr.Z)(this,"Renderer",wO),(0,vr.Z)(this,"TextRenderer",kV),(0,vr.Z)(this,"Lexer",Lf),(0,vr.Z)(this,"Tokenizer",bO),(0,vr.Z)(this,"Hooks",b1),this.use.apply(this,arguments)}return(0,R.Z)(i,[{key:"walkTokens",value:function(n,r){var l,a=this,o=[],u=(0,Ve.Z)(n);try{for(u.s();!(l=u.n()).done;){var f=l.value;switch(o=o.concat(r.call(this,f)),f.type){case"table":var w,m=f,b=(0,Ve.Z)(m.header);try{for(b.s();!(w=b.n()).done;)o=o.concat(this.walkTokens(w.value.tokens,r))}catch(fe){b.e(fe)}finally{b.f()}var I,T=(0,Ve.Z)(m.rows);try{for(T.s();!(I=T.n()).done;){var V,Y=(0,Ve.Z)(I.value);try{for(Y.s();!(V=Y.n()).done;)o=o.concat(this.walkTokens(V.value.tokens,r))}catch(fe){Y.e(fe)}finally{Y.f()}}}catch(fe){T.e(fe)}finally{T.f()}break;case"list":o=o.concat(this.walkTokens(f.items,r));break;default:!function(){var fe,ve,me=f;null!==(fe=a.defaults.extensions)&&void 0!==fe&&null!==(ve=fe.childTokens)&&void 0!==ve&&ve[me.type]?a.defaults.extensions.childTokens[me.type].forEach(function(pe){var ke=me[pe].flat(1/0);o=o.concat(a.walkTokens(ke,r))}):me.tokens&&(o=o.concat(a.walkTokens(me.tokens,r)))}()}}}catch(fe){u.e(fe)}finally{u.f()}return o}},{key:"use",value:function(){for(var n=this,r=this.defaults.extensions||{renderers:{},childTokens:{}},a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return o.forEach(function(l){var f=Du({},l);if(f.async=n.defaults.async||f.async||!1,l.extensions&&(l.extensions.forEach(function(w){if(!w.name)throw new Error("extension name required");if("renderer"in w){var C=r.renderers[w.name];r.renderers[w.name]=C?function(){for(var I=arguments.length,Z=new Array(I),Y=0;Y<I;Y++)Z[Y]=arguments[Y];var V=w.renderer.apply(this,Z);return!1===V&&(V=C.apply(this,Z)),V}:w.renderer}if("tokenizer"in w){if(!w.level||"block"!==w.level&&"inline"!==w.level)throw new Error("extension level must be 'block' or 'inline'");var T=r[w.level];T?T.unshift(w.tokenizer):r[w.level]=[w.tokenizer],w.start&&("block"===w.level?r.startBlock?r.startBlock.push(w.start):r.startBlock=[w.start]:"inline"===w.level&&(r.startInline?r.startInline.push(w.start):r.startInline=[w.start]))}"childTokens"in w&&w.childTokens&&(r.childTokens[w.name]=w.childTokens)}),f.extensions=r),l.renderer&&function(){var w=n.defaults.renderer||new wO(n.defaults),C=function(Y){if(!(Y in w))throw new Error("renderer '".concat(Y,"' does not exist"));if(["options","parser"].includes(Y))return"continue";var W=l.renderer[Y],se=w[Y];w[Y]=function(){for(var fe=arguments.length,ve=new Array(fe),me=0;me<fe;me++)ve[me]=arguments[me];var pe=W.apply(w,ve);return!1===pe&&(pe=se.apply(w,ve)),pe||""}};for(var T in l.renderer)C(T);f.renderer=w}(),l.tokenizer&&function(){var w=n.defaults.tokenizer||new bO(n.defaults),C=function(Y){if(!(Y in w))throw new Error("tokenizer '".concat(Y,"' does not exist"));if(["options","rules","lexer"].includes(Y))return"continue";var W=l.tokenizer[Y],se=w[Y];w[Y]=function(){for(var fe=arguments.length,ve=new Array(fe),me=0;me<fe;me++)ve[me]=arguments[me];var pe=W.apply(w,ve);return!1===pe&&(pe=se.apply(w,ve)),pe}};for(var T in l.tokenizer)C(T);f.tokenizer=w}(),l.hooks&&function(){var w=n.defaults.hooks||new b1,C=function(Y){if(!(Y in w))throw new Error("hook '".concat(Y,"' does not exist"));if(["options","block"].includes(Y))return"continue";var W=l.hooks[Y],se=w[Y];w[Y]=b1.passThroughHooks.has(Y)?function(fe){if(n.defaults.async&&b1.passThroughHooksRespectAsync.has(Y))return(0,Qt.Z)(id.mark(function me(){return id.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,W.call(w,fe);case 2:return je.abrupt("return",se.call(w,je.sent));case 4:case"end":return je.stop()}},me)}))();var ve=W.call(w,fe);return se.call(w,ve)}:function(){for(var fe=arguments.length,ve=new Array(fe),me=0;me<fe;me++)ve[me]=arguments[me];if(n.defaults.async)return(0,Qt.Z)(id.mark(function ke(){var je;return id.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return Ze.next=2,W.apply(w,ve);case 2:if(Ze.t0=!1===(je=Ze.sent),!Ze.t0){Ze.next=8;break}return Ze.next=7,se.apply(w,ve);case 7:je=Ze.sent;case 8:return Ze.abrupt("return",je);case 9:case"end":return Ze.stop()}},ke)}))();var pe=W.apply(w,ve);return!1===pe&&(pe=se.apply(w,ve)),pe}};for(var T in l.hooks)C(T);f.hooks=w}(),l.walkTokens){var m=n.defaults.walkTokens,b=l.walkTokens;f.walkTokens=function(w){var C=[];return C.push(b.call(this,w)),m&&(C=C.concat(m.call(this,w))),C}}n.defaults=Du(Du({},n.defaults),f)}),this}},{key:"setOptions",value:function(n){return this.defaults=Du(Du({},this.defaults),n),this}},{key:"lexer",value:function(n,r){return Lf.lex(n,null!=r?r:this.defaults)}},{key:"parser",value:function(n,r){return Nf.parse(n,null!=r?r:this.defaults)}},{key:"parseMarkdown",value:function(n){var r=this;return function(a,o){var u=Du({},o),l=Du(Du({},r.defaults),u),f=r.onError(!!l.silent,!!l.async);if(!0===r.defaults.async&&!1===u.async)return f(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof a>"u"||null===a)return f(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof a)return f(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(a)+", string expected"));if(l.hooks&&(l.hooks.options=l,l.hooks.block=n),l.async)return(0,Qt.Z)(id.mark(function w(){var C,T,I,Z;return id.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!l.hooks){V.next=6;break}return V.next=3,l.hooks.preprocess(a);case 3:V.t0=V.sent,V.next=7;break;case 6:V.t0=a;case 7:if(C=V.t0,!l.hooks){V.next=14;break}return V.next=11,l.hooks.provideLexer();case 11:V.t1=V.sent,V.next=15;break;case 14:V.t1=n?Lf.lex:Lf.lexInline;case 15:return V.t2=V.t1,V.next=18,(0,V.t2)(C,l);case 18:if(T=V.sent,!l.hooks){V.next=25;break}return V.next=22,l.hooks.processAllTokens(T);case 22:V.t3=V.sent,V.next=26;break;case 25:V.t3=T;case 26:if(I=V.t3,V.t4=l.walkTokens,!V.t4){V.next=31;break}return V.next=31,Promise.all(r.walkTokens(I,l.walkTokens));case 31:if(!l.hooks){V.next=37;break}return V.next=34,l.hooks.provideParser();case 34:V.t5=V.sent,V.next=38;break;case 37:V.t5=n?Nf.parse:Nf.parseInline;case 38:return V.t6=V.t5,V.next=41,(0,V.t6)(I,l);case 41:if(Z=V.sent,!l.hooks){V.next=48;break}return V.next=45,l.hooks.postprocess(Z);case 45:V.t7=V.sent,V.next=49;break;case 48:V.t7=Z;case 49:return V.abrupt("return",V.t7);case 50:case"end":return V.stop()}},w)}))().catch(f);try{l.hooks&&(a=l.hooks.preprocess(a));var m=(l.hooks?l.hooks.provideLexer():n?Lf.lex:Lf.lexInline)(a,l);l.hooks&&(m=l.hooks.processAllTokens(m)),l.walkTokens&&r.walkTokens(m,l.walkTokens);var b=(l.hooks?l.hooks.provideParser():n?Nf.parse:Nf.parseInline)(m,l);return l.hooks&&(b=l.hooks.postprocess(b)),b}catch(w){return f(w)}}}},{key:"onError",value:function(n,r){return function(a){if(a.message+="\nPlease report this to https://github.com/markedjs/marked.",n){var o="<p>An error occurred:</p><pre>"+uv(a.message+"",!0)+"</pre>";return r?Promise.resolve(o):o}if(r)return Promise.reject(a);throw a}}}]),i}());function es(i,s){return Tg.parse(i,s)}function Nhe(i,s){if(1&i&&(v.TgZ(0,"span",13),v._uU(1),v.qZA()),2&i){var n=s.$implicit;v.xp6(1),v.hij(" ",n," ")}}function Zhe(i,s){if(1&i&&(v.TgZ(0,"p",14),v._uU(1),v.qZA()),2&i){var n=v.oxw().$implicit;v.xp6(1),v.hij(" ",n.preview," ")}}function Bhe(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"button",6),v.NdJ("click",function(){var l=v.CHM(n).$implicit;return v.oxw().selectPost(l)}),v.TgZ(1,"div",7),v.TgZ(2,"h5",8),v._uU(3),v.qZA(),v.qZA(),v.TgZ(4,"small",9),v._uU(5),v.ALo(6,"date"),v.qZA(),v.TgZ(7,"div",10),v.YNc(8,Nhe,2,1,"span",11),v.qZA(),v.YNc(9,Zhe,2,1,"p",12),v.qZA()}if(2&i){var r=s.$implicit,a=v.oxw();v.ekj("active",a.selectedPost===r),v.xp6(3),v.Oqu(r.title),v.xp6(2),v.Oqu(v.lcZ(6,6,r.date)),v.xp6(3),v.Q6J("ngForOf",r.tags),v.xp6(1),v.Q6J("ngIf",!a.selectedPost)}}function Uhe(i,s){if(1&i&&(v.TgZ(0,"span",24),v._uU(1),v.qZA()),2&i){var n=s.$implicit;v.xp6(1),v.Oqu(n)}}function Vhe(i,s){if(1&i){var n=v.EpF();v.TgZ(0,"div",15),v.TgZ(1,"div",16),v.TgZ(2,"div",17),v.TgZ(3,"button",18),v.NdJ("click",function(){return v.CHM(n),v.oxw().selectedPost=null}),v._uU(4," \u2190 Back to list "),v.qZA(),v.TgZ(5,"h1",19),v._uU(6),v.qZA(),v.TgZ(7,"p",20),v._uU(8),v.ALo(9,"date"),v.TgZ(10,"span",21),v._uU(11,"\u2022"),v.qZA(),v.YNc(12,Uhe,2,1,"span",22),v.qZA(),v._UZ(13,"div",23),v.qZA(),v.qZA(),v.qZA()}if(2&i){var r=v.oxw();v.xp6(6),v.Oqu(r.selectedPost.title),v.xp6(2),v.hij(" ",v.xi3(9,4,r.selectedPost.date,"longDate")," "),v.xp6(4),v.Q6J("ngForOf",r.selectedPost.tags),v.xp6(1),v.Q6J("innerHTML",r.postContent,v.oJD)}}es.options=es.setOptions=function(i){return Tg.setOptions(i),UW(es.defaults=Tg.defaults),es},es.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},es.defaults=n0,es.use=function(){return Tg.use.apply(Tg,arguments),UW(es.defaults=Tg.defaults),es},es.walkTokens=function(i,s){return Tg.walkTokens(i,s)},es.parseInline=Tg.parseInline,es.Parser=Nf,es.parser=Nf.parse,es.Renderer=wO,es.TextRenderer=kV,es.Lexer=Lf,es.lexer=Lf.lex,es.Tokenizer=bO,es.Hooks=b1,es.parse=es;var Hhe=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:ene},{path:"friends",component:lne},{path:"illustrations",component:Gce},{path:"projects",component:qce},{path:"login",component:ZW},{path:"profile",component:ZW},{path:"notes",component:Xce},{path:"blog",component:function(){function i(s){this.http=s,this.posts=[],this.selectedPost=null,this.postContent=""}return i.prototype.ngOnInit=function(){var s=this;this.http.get("assets/blog/index.json").subscribe({next:function(n){s.posts=n,s.posts.length>0&&s.selectPost(s.posts[0])},error:function(n){return console.error("Failed to load blog index",n)}})},i.prototype.selectPost=function(s){var n=this;this.selectedPost=s,this.http.get("assets/blog/"+s.file,{responseType:"text"}).subscribe({next:function(r){var a=r.replace(/<!--[\s\S]*?-->/,"");Promise.resolve(es.parse(a)).then(function(o){n.postContent=o})},error:function(r){return console.error("Failed to load post content",r)}})},i.prototype.backToUuidList=function(){this.selectedPost=null,this.postContent=""},i.\u0275fac=function(n){return new(n||i)(v.Y36(__))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-blog"]],decls:6,vars:2,consts:[[1,"container","blog-container","mb-5","pt-5"],[1,"row"],[1,"col-md-4","col-lg-3"],[1,"list-group"],["type","button","class","list-group-item list-group-item-action mb-2 border-0 shadow-sm rounded",3,"active","click",4,"ngFor","ngForOf"],["class","col-md-8 col-lg-9",4,"ngIf"],["type","button",1,"list-group-item","list-group-item-action","mb-2","border-0","shadow-sm","rounded",3,"click"],[1,"d-flex","w-100","justify-content-between","align-items-center"],[1,"mb-1","fw-bold"],[1,"text-muted","d-block","mb-2"],[1,"tags"],["class","badge rounded-pill bg-light text-dark me-1 border",4,"ngFor","ngForOf"],["class","mb-1 mt-2 small text-secondary",4,"ngIf"],[1,"badge","rounded-pill","bg-light","text-dark","me-1","border"],[1,"mb-1","mt-2","small","text-secondary"],[1,"col-md-8","col-lg-9"],[1,"card","border-0","shadow-sm"],[1,"card-body","p-4","p-md-5"],[1,"btn","btn-sm","btn-outline-secondary","mb-3","d-md-none",3,"click"],[1,"display-4","fw-bold","mb-2"],[1,"text-muted","mb-4"],[1,"mx-2"],["class","badge bg-secondary me-1",4,"ngFor","ngForOf"],[1,"blog-content",3,"innerHTML"],[1,"badge","bg-secondary","me-1"]],template:function(n,r){1&n&&(v.TgZ(0,"div",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v.TgZ(3,"div",3),v.YNc(4,Bhe,10,8,"button",4),v.qZA(),v.qZA(),v.YNc(5,Vhe,14,7,"div",5),v.qZA(),v.qZA()),2&n&&(v.xp6(4),v.Q6J("ngForOf",r.posts),v.xp6(1),v.Q6J("ngIf",r.selectedPost))},directives:[as,Ra],pipes:[vu],styles:[".page-heading[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:30px}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;transition:all .2s}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;transform:translateY(-2px)}.list-group-item.active[_ngcontent-%COMP%]{background-color:#0d6efd;color:#fff}.list-group-item.active[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:rgba(255,255,255,.8)!important}.list-group-item.active[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background-color:rgba(255,255,255,.2)!important;color:#fff!important}.blog-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .blog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .blog-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:1rem}.blog-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.7;margin-bottom:1.5rem}.blog-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .blog-content[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-bottom:1.5rem}.blog-content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#f1f3f5;padding:.2rem .4rem;border-radius:4px;color:#d63384}.blog-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:1rem;border-radius:6px;overflow-x:auto}.blog-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:transparent;color:inherit}.blog-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;border-radius:8px;margin:1rem 0}"]}),i}()}],Ghe=function(){function i(){}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[X5.forRoot(Hhe)],X5]}),i}(),r7_firebase={apiKey:"AIzaSyBEqX5EXqhTsEDf5ujduEhushEXxVDQoZc",authDomain:"animesh-researchwebwebsite.firebaseapp.com",databaseURL:"https://animesh-researchwebwebsite.firebaseio.com",projectId:"animesh-researchwebwebsite",storageBucket:"animesh-researchwebwebsite.appspot.com",messagingSenderId:"413085083843"},r0=function(){return{exact:!0}};function jhe(i,s){1&i&&(v.TgZ(0,"li",6),v.TgZ(1,"a",14),v._uU(2,"Login"),v.qZA(),v.qZA()),2&i&&v.Q6J("routerLinkActiveOptions",v.DdM(1,r0))}function Whe(i,s){1&i&&(v.TgZ(0,"li",6),v.TgZ(1,"a",15),v._uU(2,"My Profile"),v.qZA(),v.qZA()),2&i&&v.Q6J("routerLinkActiveOptions",v.DdM(1,r0))}var qhe=function(){function i(s){this.auth=s,this.title="ResearchWebsite"}return i.\u0275fac=function(n){return new(n||i)(v.Y36(NW))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-root"]],decls:26,vars:12,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark","sticky-top"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],["routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],["routerLink","/home",1,"nav-link"],["routerLink","/friends",1,"nav-link"],["routerLink","/illustrations",1,"nav-link"],["routerLink","/notes",1,"nav-link"],["routerLink","/blog",1,"nav-link"],[1,"navbar-nav","ms-auto"],["class","nav-item","routerLinkActive","active",3,"routerLinkActiveOptions",4,"ngIf"],["routerLink","/login",1,"nav-link"],["routerLink","/profile",1,"nav-link"]],template:function(n,r){1&n&&(v.TgZ(0,"nav",0),v.TgZ(1,"a",1),v._uU(2,"Hi, I am Animesh!"),v.qZA(),v.TgZ(3,"button",2),v._UZ(4,"span",3),v.qZA(),v.TgZ(5,"div",4),v.TgZ(6,"ul",5),v.TgZ(7,"li",6),v.TgZ(8,"a",7),v._uU(9,"Work"),v.qZA(),v.qZA(),v.TgZ(10,"li",6),v.TgZ(11,"a",8),v._uU(12,"Life"),v.qZA(),v.qZA(),v.TgZ(13,"li",6),v.TgZ(14,"a",9),v._uU(15,"Content"),v.qZA(),v.qZA(),v.TgZ(16,"li",6),v.TgZ(17,"a",10),v._uU(18,"Notes"),v.qZA(),v.qZA(),v.TgZ(19,"li",6),v.TgZ(20,"a",11),v._uU(21,"Thoughts"),v.qZA(),v.qZA(),v.qZA(),v.TgZ(22,"ul",12),v.YNc(23,jhe,3,2,"li",13),v.YNc(24,Whe,3,2,"li",13),v.qZA(),v.qZA(),v.qZA(),v._UZ(25,"router-outlet")),2&n&&(v.xp6(7),v.Q6J("routerLinkActiveOptions",v.DdM(7,r0)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(8,r0)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(9,r0)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(10,r0)),v.xp6(3),v.Q6J("routerLinkActiveOptions",v.DdM(11,r0)),v.xp6(4),v.Q6J("ngIf",!r.auth.currentUser),v.xp6(1),v.Q6J("ngIf",r.auth.currentUser))},directives:[W5,lR,Ra,PB],styles:['@import"https://fonts.googleapis.com/css?family=Open+Sans";nav.navbar[_ngcontent-%COMP%]{padding:20px;font-family:"Open Sans",sans-serif}nav.navbar[_ngcontent-%COMP%]   a.navbar-brand[_ngcontent-%COMP%]{font-weight:bold;padding-left:20px;padding-right:20px}nav.navbar[_ngcontent-%COMP%]   li.nav-item[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}']}),i}(),Yhe=function(){function i(){}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=v.oAB({type:i,bootstrap:[qhe]}),i.\u0275inj=v.cJS({providers:[uA],imports:[[Us,Ghe,VO,rX,oX,fX,DQ,VQ,uJ,kJ,ZJ,Tl.hO.initializeApp(r7_firebase),DK,Nh,x2,Ee,W2]]}),i}();ss().bootstrapModule(Yhe).catch(function(i){return console.error(i)})},8774:function(vn,Ct,ne){vn.exports=ne(5579)},4762:function(vn,Ct,ne){"use strict";ne.d(Ct,{pi:function(){return R},_T:function(){return M},mG:function(){return Te},Jh:function(){return v},XA:function(){return ce},CR:function(){return Be},ev:function(){return Ne}});var R=function(){return(R=Object.assign||function(Nt){for(var Rt,Bt=1,K=arguments.length;Bt<K;Bt++)for(var k in Rt=arguments[Bt])Object.prototype.hasOwnProperty.call(Rt,k)&&(Nt[k]=Rt[k]);return Nt}).apply(this,arguments)};function M(Vt,Nt){var Rt={};for(var Bt in Vt)Object.prototype.hasOwnProperty.call(Vt,Bt)&&Nt.indexOf(Bt)<0&&(Rt[Bt]=Vt[Bt]);if(null!=Vt&&"function"==typeof Object.getOwnPropertySymbols){var K=0;for(Bt=Object.getOwnPropertySymbols(Vt);K<Bt.length;K++)Nt.indexOf(Bt[K])<0&&Object.prototype.propertyIsEnumerable.call(Vt,Bt[K])&&(Rt[Bt[K]]=Vt[Bt[K]])}return Rt}function Te(Vt,Nt,Rt,Bt){return new(Rt||(Rt=Promise))(function(k,j){function ie(at){try{Le(Bt.next(at))}catch(bt){j(bt)}}function we(at){try{Le(Bt.throw(at))}catch(bt){j(bt)}}function Le(at){at.done?k(at.value):function(k){return k instanceof Rt?k:new Rt(function(j){j(k)})}(at.value).then(ie,we)}Le((Bt=Bt.apply(Vt,Nt||[])).next())})}function v(Vt,Nt){var Bt,K,k,j,Rt={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return j={next:ie(0),throw:ie(1),return:ie(2)},"function"==typeof Symbol&&(j[Symbol.iterator]=function(){return this}),j;function ie(Le){return function(at){return function(Le){if(Bt)throw new TypeError("Generator is already executing.");for(;Rt;)try{if(Bt=1,K&&(k=2&Le[0]?K.return:Le[0]?K.throw||((k=K.return)&&k.call(K),0):K.next)&&!(k=k.call(K,Le[1])).done)return k;switch(K=0,k&&(Le=[2&Le[0],k.value]),Le[0]){case 0:case 1:k=Le;break;case 4:return Rt.label++,{value:Le[1],done:!1};case 5:Rt.label++,K=Le[1],Le=[0];continue;case 7:Le=Rt.ops.pop(),Rt.trys.pop();continue;default:if(!(k=(k=Rt.trys).length>0&&k[k.length-1])&&(6===Le[0]||2===Le[0])){Rt=0;continue}if(3===Le[0]&&(!k||Le[1]>k[0]&&Le[1]<k[3])){Rt.label=Le[1];break}if(6===Le[0]&&Rt.label<k[1]){Rt.label=k[1],k=Le;break}if(k&&Rt.label<k[2]){Rt.label=k[2],Rt.ops.push(Le);break}k[2]&&Rt.ops.pop(),Rt.trys.pop();continue}Le=Nt.call(Vt,Rt)}catch(at){Le=[6,at],K=0}finally{Bt=k=0}if(5&Le[0])throw Le[1];return{value:Le[0]?Le[1]:void 0,done:!0}}([Le,at])}}}function ce(Vt){var Nt="function"==typeof Symbol&&Symbol.iterator,Rt=Nt&&Vt[Nt],Bt=0;if(Rt)return Rt.call(Vt);if(Vt&&"number"==typeof Vt.length)return{next:function(){return Vt&&Bt>=Vt.length&&(Vt=void 0),{value:Vt&&Vt[Bt++],done:!Vt}}};throw new TypeError(Nt?"Object is not iterable.":"Symbol.iterator is not defined.")}function Be(Vt,Nt){var Rt="function"==typeof Symbol&&Vt[Symbol.iterator];if(!Rt)return Vt;var K,j,Bt=Rt.call(Vt),k=[];try{for(;(void 0===Nt||Nt-- >0)&&!(K=Bt.next()).done;)k.push(K.value)}catch(ie){j={error:ie}}finally{try{K&&!K.done&&(Rt=Bt.return)&&Rt.call(Bt)}finally{if(j)throw j.error}}return k}function Ne(Vt,Nt,Rt){if(Rt||2===arguments.length)for(var k,Bt=0,K=Nt.length;Bt<K;Bt++)(k||!(Bt in Nt))&&(k||(k=Array.prototype.slice.call(Nt,0,Bt)),k[Bt]=Nt[Bt]);return Vt.concat(k||Array.prototype.slice.call(Nt))}},2988:function(vn,Ct,ne){"use strict";function Se(ye,R){(null==R||R>ye.length)&&(R=ye.length);for(var M=0,x=new Array(R);M<R;M++)x[M]=ye[M];return x}ne.d(Ct,{Z:function(){return Se}})},1718:function(vn,Ct,ne){"use strict";function Se(ye){if(Array.isArray(ye))return ye}ne.d(Ct,{Z:function(){return Se}})},6518:function(vn,Ct,ne){"use strict";function Se(ye){if(void 0===ye)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye}ne.d(Ct,{Z:function(){return Se}})},8239:function(vn,Ct,ne){"use strict";function Se(R,M,x,oe,Ve,Te,v){try{var Ae=R[Te](v),xe=Ae.value}catch(ce){return void x(ce)}Ae.done?M(xe):Promise.resolve(xe).then(oe,Ve)}function ye(R){return function(){var M=this,x=arguments;return new Promise(function(oe,Ve){var Te=R.apply(M,x);function v(xe){Se(Te,oe,Ve,v,Ae,"next",xe)}function Ae(xe){Se(Te,oe,Ve,v,Ae,"throw",xe)}v(void 0)})}}ne.d(Ct,{Z:function(){return ye}})},5134:function(vn,Ct,ne){"use strict";function Se(ye,R){if(!(ye instanceof R))throw new TypeError("Cannot call a class as a function")}ne.d(Ct,{Z:function(){return Se}})},4768:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return R}});var Se=ne(2007),ye=ne(1197);function R(M,x,oe){return(R=(0,ye.Z)()?Reflect.construct:function(Te,v,Ae){var xe=[null];xe.push.apply(xe,v);var Be=new(Function.bind.apply(Te,xe));return Ae&&(0,Se.Z)(Be,Ae.prototype),Be}).apply(null,arguments)}},7289:function(vn,Ct,ne){"use strict";function Se(R,M){for(var x=0;x<M.length;x++){var oe=M[x];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(R,oe.key,oe)}}function ye(R,M,x){return M&&Se(R.prototype,M),x&&Se(R,x),R}ne.d(Ct,{Z:function(){return ye}})},6054:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return ye}});var Se=ne(2491);function ye(R,M){var x="undefined"!=typeof Symbol&&R[Symbol.iterator]||R["@@iterator"];if(!x){if(Array.isArray(R)||(x=(0,Se.Z)(R))||M&&R&&"number"==typeof R.length){x&&(R=x);var oe=0,Ve=function(){};return{s:Ve,n:function(){return oe>=R.length?{done:!0}:{done:!1,value:R[oe++]}},e:function(ce){throw ce},f:Ve}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ae,Te=!0,v=!1;return{s:function(){x=x.call(R)},n:function(){var ce=x.next();return Te=ce.done,ce},e:function(ce){v=!0,Ae=ce},f:function(){try{!Te&&null!=x.return&&x.return()}finally{if(v)throw Ae}}}}},9727:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return M}});var Se=ne(9187),ye=ne(1197),R=ne(9553);function M(x){var oe=(0,ye.Z)();return function(){var v,Te=(0,Se.Z)(x);if(oe){var Ae=(0,Se.Z)(this).constructor;v=Reflect.construct(Te,arguments,Ae)}else v=Te.apply(this,arguments);return(0,R.Z)(this,v)}}},3512:function(vn,Ct,ne){"use strict";function Se(ye,R,M){return R in ye?Object.defineProperty(ye,R,{value:M,enumerable:!0,configurable:!0,writable:!0}):ye[R]=M,ye}ne.d(Ct,{Z:function(){return Se}})},9333:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return R}});var Se=ne(9187);function R(M,x,oe){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(Te,v,Ae){var xe=function(M,x){for(;!Object.prototype.hasOwnProperty.call(M,x)&&null!==(M=(0,Se.Z)(M)););return M}(Te,v);if(xe){var ce=Object.getOwnPropertyDescriptor(xe,v);return ce.get?ce.get.call(Ae):ce.value}})(M,x,oe||M)}},9187:function(vn,Ct,ne){"use strict";function Se(ye){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(ye)}ne.d(Ct,{Z:function(){return Se}})},1885:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return ye}});var Se=ne(2007);function ye(R,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(M&&M.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),M&&(0,Se.Z)(R,M)}},1197:function(vn,Ct,ne){"use strict";function Se(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ye){return!1}}ne.d(Ct,{Z:function(){return Se}})},8967:function(vn,Ct,ne){"use strict";function Se(ye){if("undefined"!=typeof Symbol&&null!=ye[Symbol.iterator]||null!=ye["@@iterator"])return Array.from(ye)}ne.d(Ct,{Z:function(){return Se}})},700:function(vn,Ct,ne){"use strict";function Se(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}ne.d(Ct,{Z:function(){return Se}})},9553:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return R}});var Se=ne(5464),ye=ne(6518);function R(M,x){return!x||"object"!==(0,Se.Z)(x)&&"function"!=typeof x?(0,ye.Z)(M):x}},2007:function(vn,Ct,ne){"use strict";function Se(ye,R){return(Se=Object.setPrototypeOf||function(x,oe){return x.__proto__=oe,x})(ye,R)}ne.d(Ct,{Z:function(){return Se}})},2787:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return x}});var Se=ne(1718),R=ne(2491),M=ne(700);function x(oe,Ve){return(0,Se.Z)(oe)||function(oe,Ve){var Te=null==oe?null:"undefined"!=typeof Symbol&&oe[Symbol.iterator]||oe["@@iterator"];if(null!=Te){var ce,Be,v=[],Ae=!0,xe=!1;try{for(Te=Te.call(oe);!(Ae=(ce=Te.next()).done)&&(v.push(ce.value),!Ve||v.length!==Ve);Ae=!0);}catch(ae){xe=!0,Be=ae}finally{try{!Ae&&null!=Te.return&&Te.return()}finally{if(xe)throw Be}}return v}}(oe,Ve)||(0,R.Z)(oe,Ve)||(0,M.Z)()}},8251:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return x}});var Se=ne(1718),ye=ne(8967),R=ne(2491),M=ne(700);function x(oe){return(0,Se.Z)(oe)||(0,ye.Z)(oe)||(0,R.Z)(oe)||(0,M.Z)()}},8398:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return oe}});var Se=ne(2988),R=ne(8967),M=ne(2491);function oe(Ve){return function(Ve){if(Array.isArray(Ve))return(0,Se.Z)(Ve)}(Ve)||(0,R.Z)(Ve)||(0,M.Z)(Ve)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},5464:function(vn,Ct,ne){"use strict";function Se(ye){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(M){return typeof M}:function(M){return M&&"function"==typeof Symbol&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(ye)}ne.d(Ct,{Z:function(){return Se}})},2491:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return ye}});var Se=ne(2988);function ye(R,M){if(R){if("string"==typeof R)return(0,Se.Z)(R,M);var x=Object.prototype.toString.call(R).slice(8,-1);if("Object"===x&&R.constructor&&(x=R.constructor.name),"Map"===x||"Set"===x)return Array.from(R);if("Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return(0,Se.Z)(R,M)}}},3455:function(vn,Ct,ne){"use strict";ne.d(Ct,{Z:function(){return x}});var Se=ne(9187),ye=ne(2007),M=ne(4768);function x(oe){var Ve="function"==typeof Map?new Map:void 0;return(x=function(v){if(null===v||!function(oe){return-1!==Function.toString.call(oe).indexOf("[native code]")}(v))return v;if("function"!=typeof v)throw new TypeError("Super expression must either be null or a function");if(void 0!==Ve){if(Ve.has(v))return Ve.get(v);Ve.set(v,Ae)}function Ae(){return(0,M.Z)(v,arguments,(0,Se.Z)(this).constructor)}return Ae.prototype=Object.create(v.prototype,{constructor:{value:Ae,enumerable:!1,writable:!0,configurable:!0}}),(0,ye.Z)(Ae,v)})(oe)}}},function(vn){vn(vn.s=9935)}]);